<html id="13544.troubleshooting-xstream-out.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can diagnose and correct problems with an XStream Out configuration."></meta>
      <meta name="description" content="You can diagnose and correct problems with an XStream Out configuration."></meta>
      <title>排除XStream Out故障</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="XStream Guide "></meta>
      <meta property="og:description" content="You can diagnose and correct problems with an XStream Out configuration."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="XStream Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96280-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="monitoring-xstream-out.html" title="Previous" type="text/html"></link>
      <link rel="next" href="xstream-in.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide"></meta>
    <meta name="dcterms.isVersionOf" content="XSTRM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="monitoring-xstream-out.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="xstream-in.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-out.html" property="item" typeof="WebPage"><span property="name">XStream Out</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">排除XStream Out故障</li>
            </ol>
            <a id="GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1" name="GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1"></a><a id="XSTRM1641"></a>
            
            <h2 id="XSTRM-GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1" class="sect2"><span class="enumeration_chapter">7</span>排除XStream Out故障</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用XStream Out配置诊断和更正问题。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C">使用XStream Out诊断问题</a><br>您可以使用几种不同的技术来诊断XStream Out的问题。
                  </li>
                  <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-7D01008F-B652-483D-B30D-44825CBE868F">XStream Out的问题和解决方案</a><br>您可以使用XStream Out实现常见问题的解决方案。
                  </li>
                  <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB">如何获得XStream Out的更多帮助</a><br>Oracle Support可以为XStream Out提供更多帮助。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1__GUID-3ADD9B3E-44AD-4152-A4FA-B08B028E2360">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="introduction-to-xstream.html#GUID-21FC23DF-2881-4CFD-AF74-9A1173D768FF" title="有几种常见的XStream用例。">XStream用例</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="configuring-xstream-out.html#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="您可以配置XStream Out使用的Oracle数据库组件。">配置XStream Out</a> ”</span></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="xstream-out.html#GUID-40B2996E-433C-4240-8022-8505273F99EF" title="您可以配置和管理XStream Out环境。">XStream Out</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM72610"></a><div class="props_rev_3"><a id="GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C" name="GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C"></a><h3 id="XSTRM-GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C" class="sect3"><span class="enumeration_section">7.1</span>诊断XStream Out的问题</h3>
               <p>您可以使用几种不同的技术来诊断XStream Out的问题。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3">查看警报</a><br><span class="bold">警报</span>是关于潜在问题的警告或已经超过临界阈值的指示。
                     </li>
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106">检查跟踪文件和警报日志是否存在问题</a><br>有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1" title="您可以使用XStream Out配置诊断和更正问题。">XStream Out故障排除</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72856"></a><div class="props_rev_3"><a id="GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3" name="GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3"></a><h4 id="XSTRM-GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3" class="sect4"><span class="enumeration_section">7.1.1</span>查看警报</h4>
                  <div>
                     <p><span class="bold">警报</span>是关于潜在问题的警告或已经超过临界阈值的指示。
                     </p>
                     <div class="section">
                        <p>有两种类型的警报：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">无状态：</span>指示不一定与系统状态相关的单个事件的警报。例如，指示捕获因特定错误而中止的警报是无状态警报。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">有状态：</span>与特定系统状态关联的警报。有状态警报通常基于数值，阈值定义在警告和关键级别。例如，当前Streams池内存使用百分比的警报，警告级别为85％，临界级别为95％，是一个状态警报。
                              </p>
                           </li>
                        </ul>
                        <p>Oracle数据库在以下条件下生成无状态警报：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>捕获过程中止。</p>
                           </li>
                           <li>
                              <p>出站服务器中止。</p>
                           </li>
                        </ul>
                        <p>当Streams池内存使用量超过<code class="codeph">STREAMS_POOL_USED_PCT</code>度量指定的百分比时，Oracle数据库会生成有状态XStream警报。您可以使用<code class="codeph">DBMS_SERVER_ALERT</code>包中的<code class="codeph">SET_THRESHOLD</code>过程来管理此度量标准。
                        </p>
                        <p>您可以在Oracle Enterprise Manager Cloud Control中查看警报，也可以查询以下数据字典视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBA_OUTSTANDING_ALERTS</code>视图记录当前的有状态警报。<code class="codeph">DBA_ALERT_HISTORY</code>视图记录已清除的无状态警报和状态警报。例如，如果Streams池中的内存使用量超过指定的阈值，则会在<code class="codeph">DBA_OUTSTANDING_ALERTS</code>视图中记录有状态警报。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_ALERT_HISTORY</code>数据字典视图显示已从<code class="codeph">DBA_OUTSTANDING_ALERTS</code>视图中清除的警报。例如，如果流池中的内存使用率低于指定的阈值，则清除<code class="codeph">DBA_OUTSTANDING_ALERTS</code>视图中记录的警报并将其移至<code class="codeph">DBA_ALERT_HISTORY</code>视图。
                              </p>
                           </li>
                        </ul>
                        <p>例如，要列出当前有状态警报，请在<code class="codeph">DBA_OUTSTANDING_ALERTS</code>视图上运行以下查询：</p><pre class="oac_no_warn" dir="ltr">栏目原因标题'提醒原因'格式A35栏目建议_行动标题'建议回应'格式A35选择原因，建议从DBA_OUTSTANDING_ALERTS获取，其中MODULE_ID类似'％XSTREAM％';</pre><p>要列出无状态警报并清除XStream状态警报，请在<code class="codeph">DBA_ALERT_HISTORY</code>视图上运行以下查询：</p><pre class="oac_no_warn" dir="ltr">列原因标题'提醒原因'格式A35列建议_ACTION HEADING'建议响应'格式A35选择原因，SUGGESTED_ACTION来自DBA_ALERT_HISTORY，其中MODULE_ID类似'％XSTREAM％';</pre><p>当问题原因消失或数据库管理员确认时，大多数警报会自动清除。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F6B50FEB-2E08-4494-8676-D271EF0350B3__GUID-CCB6E845-63BB-4245-850C-C50099D2D73D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../admin/monitoring-the-database.html#ADMIN005" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，提供有关警报的信息以及有关订阅<code class="codeph">ALERT_QUE</code>队列以在生成新警报时接收通知的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBMS_SERVER_ALERT</code>包的更多信息，请<code class="codeph">DBMS_SERVER_ALERT</code> <a href="../arpls/DBMS_SERVER_ALERT.html#ARPLS016" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="configuring-xstream-out.html#GUID-41E37368-E434-4AD7-A5E8-4786E41C8C94" title="Streams池是系统全局区域（SGA）中的一部分内存，Oracle Replication和XStream组件都使用它。">配置Streams池</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../tdppt/monitoring-performance-alerts.html#TDPPT048" target="_blank"><span><cite>Oracle Database 2 Day +性能调整指南</cite></span></a> ，了解有关使用Oracle Enterprise Manager Cloud Control清除和清除警报的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C" title="您可以使用几种不同的技术来诊断XStream Out的问题。">使用XStream Out诊断问题</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72857"></a><div class="props_rev_3"><a id="GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" name="GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106"></a><h4 id="XSTRM-GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" class="sect4"><span class="enumeration_section">7.1.2</span>检查跟踪文件和警报日志是否存在问题</h4>
                  <div>
                     <p>有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。</p>
                     <p>本地捕获进程在源数据库上运行，下游捕获进程在下游数据库上运行。这些跟踪文件消息可以帮助您识别和解决XStream Out配置中的问题。</p>
                     <p>后台进程的所有跟踪文件都将写入自动诊断信息库。跟踪文件的名称是特定于操作系统的，但每个文件通常都包含写入文件的进程的名称。</p>
                     <p>例如，在某些操作系统上，进程的跟踪文件名是<span class="italic"><code class="codeph">sid_xxxx_iiiii</code></span> <code class="codeph">.trc</code> ，其中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">sid</code></span>是数据库的系统标识符</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">xxxx</code></span>是进程的名称</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">iiiii</code></span>是操作系统进程号</p>
                        </li>
                     </ul>
                     <p>此外，您可以将捕获进程和出站服务器的<code class="codeph">write_alert_log</code>参数设置为<code class="codeph">y</code> 。当此参数设置为<code class="codeph">y</code> （默认设置）时，数据库的警报日志包含有关捕获进程或出站服务器停止的原因的消息。
                     </p>
                     <p>您可以通过设置控制在跟踪文件中的信息<code class="codeph">trace_level</code>捕获过程或出站服务器使用应用参数<code class="codeph">SET_PARAMETER</code>在程序<code class="codeph">DBMS_XSTREAM_ADM</code>包。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2">捕获进程跟踪文件</a><br>捕获过程是名为<code class="codeph">CP</code> <span class="italic"><code class="codeph">nn</code></span>的Oracle后台进程，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。
                        </li>
                        <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601">Logminer跟踪文件</a><br>Logminer跟踪文件有助于理解XStream Out的问题。
                        </li>
                        <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C">出站服务器跟踪文件</a><br>出站服务器是名为<code class="codeph">AP</code> <span class="italic"><code class="codeph">nn</code></span>的Oracle后台进程，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。
                        </li>
                        <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A">客户端应用跟踪文件</a><br>客户端应用程序跟踪文件可以帮助隔离XStream Out的问题。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106__GUID-04F91DFB-F894-4B3C-91BA-DE0DE3A0E2BD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关跟踪文件和警报日志的详细信息，请参见<a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11007" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，以及有关其名称和位置的详细信息</p>
                           </li>
                           <li>
                              <p>有关设置<a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS306" target="_blank"><code class="codeph">trace_level</code>捕获过程参数</a>和<a href="../arpls/DBMS_APPLY_ADM.html#ARPLS314" target="_blank"><code class="codeph">trace_level</code>应用参数的</a>详细信息，请参阅<a href="../arpls/index.html" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关跟踪文件的名称和位置的详细信息，请参见特定于操作系统的Oracle文档</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-638514F3-FF2B-487D-AF78-F83ADCD03A2C" title="您可以使用几种不同的技术来诊断XStream Out的问题。">使用XStream Out诊断问题</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72858"></a><div class="props_rev_3"><a id="GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2" name="GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2"></a><h5 id="XSTRM-GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2" class="sect5"><span class="enumeration_section">7.1.2.1</span>捕获进程跟踪文件</h5>
                     <div>
                        <p>捕获过程是名为<code class="codeph">CP</code> <span class="italic"><code class="codeph">nn</code></span>的Oracle后台进程，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。
                        </p>
                        <p>例如，在某些操作系统上，如果运行捕获进程的数据库的系统标识符为<code class="codeph">hqdb</code>且捕获进程号为<code class="codeph">01</code> ，则捕获进程的跟踪文件以<code class="codeph">hqdb_CP01</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-0EA16DF9-4354-4501-B9E5-23683733FDF2__GUID-FC70A314-5E97-46A3-924D-38B8F0F71E75">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="monitoring-xstream-out.html#GUID-60927BCC-BAD0-46BC-BA71-717277D5D29D" title="示例查询说明了如何显示有关每个捕获过程的更改捕获信息。">显示关于每个捕获过程的更改捕获信息</a> ”，</span>用于显示捕获过程的捕获进程号的查询</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" title="有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。">检查跟踪文件和警报日志以查找问题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72949"></a><div class="props_rev_3"><a id="GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601" name="GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601"></a><h5 id="XSTRM-GUID-D695AC64-6A0F-45A5-8B00-B626DE44D601" class="sect5"><span class="enumeration_section">7.1.2.2</span> Logminer跟踪文件</h5>
                     <div>
                        <p>Logminer跟踪文件有助于理解XStream Out的问题。</p>
                        <p>当并行捕获过程参数设置为大于0的值时，将创建logminer跟踪文件。至少有3个logminer跟踪文件生成并写入自动诊断信息库。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" title="有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。">检查跟踪文件和警报日志以查找问题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72859"></a><div class="props_rev_3"><a id="GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C" name="GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C"></a><h5 id="XSTRM-GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C" class="sect5"><span class="enumeration_section">7.1.2.3</span>出站服务器跟踪文件</h5>
                     <div>
                        <p>出站服务器是名为<code class="codeph">AP</code> <span class="italic"><code class="codeph">nn</code></span>的Oracle后台进程，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。
                        </p>
                        <p>例如，在某些操作系统上，如果运行出站服务器的数据库的系统标识符为<code class="codeph">hqdb</code>且出站服务器编号为<code class="codeph">01</code> ，则出站服务器的跟踪文件以<code class="codeph">hqdb_ap01_xxxx.trc</code>启动。
                        </p>
                        <p>出站服务器也使用其他进程。有关出站服务器的信息可能会记录在跟踪文件中，以用于这些进程中的一个或多个。阅读器服务器和应用服务器的进程名称为<code class="codeph">AS</code> <span class="italic"><code class="codeph">nn</code></span> ，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。因此，在某些操作系统上，如果运行出站服务器的数据库的系统标识符为<code class="codeph">hqdb</code>且进程号为<code class="codeph">01</code> ，则包含有关出站服务器使用的进程的信息的跟踪文件以<code class="codeph">hqdb_AS01</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-23E487D1-D176-4885-B8F1-D3B085F60F3C__GUID-863B7897-C2C8-40FE-AE23-C28A2D93CDF3">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="monitoring-xstream-out.html#GUID-AAD5D552-A91B-4842-AA3A-95FD9356D2D9" title="示例说明了监视有关XStream Out组件的会话信息。">监控有关XStream Out组件的会话信息</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" title="有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。">检查跟踪文件和警报日志以查找问题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72950"></a><div class="props_rev_3"><a id="GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A" name="GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A"></a><h5 id="XSTRM-GUID-78743ED9-A127-4670-AB88-B3570D5A4D2A" class="sect5"><span class="enumeration_section">7.1.2.4</span>客户端应用程序跟踪文件</h5>
                     <div>
                        <p>客户端应用程序跟踪文件可以帮助隔离XStream Out的问题。</p>
                        <p>在对错误进行故障排除，将问题隔离到关键组件或识别潜在的性能问题时，最好检查XStream环境中所有关键源的跟踪文件。要检查的一个关键源是客户端应用程序跟踪文件。客户端跟踪文件位于以下目录中： <code class="codeph">$ORACLE_HOME/diag/clients/</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" title="有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。">检查跟踪文件和警报日志以查找问题</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="XSTRM72611"></a><div class="props_rev_3"><a id="GUID-7D01008F-B652-483D-B30D-44825CBE868F" name="GUID-7D01008F-B652-483D-B30D-44825CBE868F"></a><h3 id="XSTRM-GUID-7D01008F-B652-483D-B30D-44825CBE868F" class="sect3"><span class="enumeration_section">7.2</span> XStream Out的问题和解决方案</h3>
               <div>
                  <p>您可以使用XStream Out实现常见问题的解决方案。</p>
                  <p>通常，您可以像对Oracle Apply进程进行故障排除一样对XStream出站服务器进行故障排除。此外，XStream Out环境包括捕获进程和队列，还可能包括其他组件，例如传播，规则和基于规则的转换。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921">OCI客户端应用程序无法附加到出站服务器</a><br>XStream客户端应用程序无法使用Oracle调用接口（OCI） <code class="codeph">OCIXStreamOutAttach()</code>函数连接到出站服务器。
                     </li>
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-CD511489-D916-4153-8F04-9946798F22F4">更改无法在XStream Out中访问客户端应用程序</a><br>在XStream Out配置中，应捕获并流式传输到XStream客户端应用程序的数据库更改未到达客户端应用程序。
                     </li>
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282">捕获进程缺少必需的重做日志文件</a><br>捕获进程启动或停止并重新启动时，可能需要扫描在包含与所需检查点SCN对应的SCN的日志文件之前生成的重做日志文件，并且这些文件可能已被删除。
                     </li>
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012">从出站服务器流式传输的LCR缺少额外属性</a><br>从出站服务器流式传输的LCR预计会包含额外的属性，但这些属性不包含在LCR中。
                     </li>
                     <li class="ulchildlink"><a href="troubleshooting-xstream-out.html#GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5">XStream Out客户端应用程序没有响应</a><br>XStream Out配置中的XStream客户端应用程序没有响应。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1" title="您可以使用XStream Out配置诊断和更正问题。">XStream Out故障排除</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72612"></a><a id="XSTRM72613"></a><a id="XSTRM72614"></a><a id="XSTRM72615"></a><a id="XSTRM1643"></a><div class="props_rev_3"><a id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921" name="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921"></a><h4 id="XSTRM-GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921" class="sect4"><span class="enumeration_section">7.2.1</span> OCI客户端应用程序无法连接到出站服务器</h4>
                  <div>
                     <p>XStream客户端应用程序无法使用Oracle调用接口（OCI） <code class="codeph">OCIXStreamOutAttach()</code>函数连接到出站服务器。
                     </p>
                     <div class="section">
                        <p>以下部分描述了可能的问题及其解决方案。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-D717438B-47B4-442F-AAC2-1DF5126EBC1C">问题1：客户端应用程序未连接为Connect用户</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>客户端应用程序未作为出站服务器的连接用户连接到出站服务器的数据库。客户端应用程序以不同的用户身份连接到数据库。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-EECA60E7-AA1B-464C-A8F2-61A00C5EC0EE">要显示有关connect用户可访问的XStream Out服务器的信息，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到出站服务器数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>运行以下查询以确定连接用户：</p><pre class="oac_no_warn" dir="ltr">SELECT SERVER_NAME，CONNECT_USER，CAPTURE_NAME，SOURCE_DATABASE，CAPTURE_USER，QUEUE_OWNER来自ALL_XSTREAM_OUTBOUND;</pre><p>此查询显示可以连接到出站服务器并处理出站LCR的用户（ <code class="codeph">connect_user</code> ）的名称。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-795A5638-5325-4327-8DEA-A5C733DF5170">解决方案1</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-1B8334D8-8EAC-4A72-A66E-EF1F5C588D09">纠正问题1：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在连接到出站服务器之前，修改客户端应用程序以作为连接用户连接到数据库。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-E9A1CB26-A3FD-43F8-BB81-E2A1B88EAB2E">问题2：客户端应用程序未通过服务句柄</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>客户端应用程序未将服务句柄传递给出站服务器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-F884C8CB-C51F-49EA-87D0-C852E5CD788B">解决方案2</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-B717A07D-B656-4C22-A821-29F550A910CA">纠正问题2：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>修改客户端应用程序，使其使用<code class="codeph">OCISvcCtx</code>而不是<code class="codeph">OCIServer</code>传递服务句柄。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5D4E37D6-025F-4C2C-85B7-931FB7F0A921__GUID-EE647C1A-19A6-48BA-BEF9-807C9113A468">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" title="了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。">XStream Out and Security</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/oci-XStream-functions.html#LNOCI72963" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-7D01008F-B652-483D-B30D-44825CBE868F" title="您可以使用XStream Out实现常见问题的解决方案。">XStream Out的问题和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72616"></a><a id="XSTRM72617"></a><a id="XSTRM72618"></a><a id="XSTRM72619"></a><a id="XSTRM72620"></a><a id="XSTRM72621"></a><a id="XSTRM1644"></a><div class="props_rev_3"><a id="GUID-CD511489-D916-4153-8F04-9946798F22F4" name="GUID-CD511489-D916-4153-8F04-9946798F22F4"></a><h4 id="XSTRM-GUID-CD511489-D916-4153-8F04-9946798F22F4" class="sect4"><span class="enumeration_section">7.2.2</span>更改无法在XStream Out中访问客户端应用程序</h4>
                  <div>
                     <p>在XStream Out配置中，应捕获并流式传输到XStream客户端应用程序的数据库更改未到达客户端应用程序。</p>
                     <div class="section">
                        <p>以下部分描述了可能的问题及其解决方案。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-BD0188CC-C9DF-4011-A7C2-64D168A520DB">问题1：捕获过程落后了</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>捕获过程落后了。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-274B79FE-CB60-4B6F-A83C-88582F3B7065">确定捕获过程是否落后：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到出站服务器数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN CAPTURE_NAME标题'捕获|名称'格式A15列状态标题'状态'格式A15列CREATE_MESSAGE标题'上次LCR |创建时间'列ENQUEUE_MESSAGE标题'最后|入队时间'SELECT CAPTURE_NAME，STATE，TO_CHAR（CAPTURE_MESSAGE_CREATE_TIME，'HH24：MI ：SS MM / DD / YY'）CREATE_MESSAGE，TO_CHAR（ENQUEUE_MESSAGE_CREATE_TIME，'HH24：MI：SS MM / DD / YY'）来自V $ XSTREAM_CAPTURE的ENQUEUE_MESSAGE;</pre><p>此查询显示捕获过程的当前状态。此查询还显示捕获过程上次创建逻辑更改记录（LCR）的时间以及捕获过程最后排入LCR的时间。如果返回的时间早于数据库更改的时间，则捕获过程必须赶上并捕获更改。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-9BE7DB42-F42F-4683-9DA0-C3324D1336B0">解决方案1</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>无需任何操作。通常情况下，捕获过程将自行赶上而无需干预。</p>
                        <div class="infoboxnotealso" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-CB08F898-47AB-4F60-805E-1EFDFD999A58">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../refrn/V-XSTREAM_CAPTURE.html#REFRN30639" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-92FB0CC5-C113-424B-99D0-6191A9726B64">问题2：排除变更的规则或基于规则的转换</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>规则或基于规则的转换排除了应捕获的更改。</p>
                        <p>规则确定捕获进程捕获哪些LCR，通过传播从源队列发送到目标队列，以及由出站服务器发送到XStream客户端应用程序。如果规则配置不正确，则客户端应用程序可能无法接收应收到的LCR。客户端应用程序也可能会收到它不应接收的LCR。</p>
                        <p>基于规则的转换会修改LCR的内容。因此，如果预期的更改数据未到达客户端应用程序，则可能是因为基于规则的转换修改了数据或删除了数据。例如， <code class="codeph">DELETE_COLUMN</code>基于声明规则的转换从LCR中删除列。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-7DF46F3D-28F4-4765-AC74-1DAB7ECE940F">解决方案2</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-0CAAB2F3-05FE-4071-BB78-4195018C8B10">纠正问题2：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>检查为从捕获过程到客户端应用程序的流中的每个组件配置的规则和基于规则的转换，并更正所有问题。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-47E58917-59DD-46DC-8530-7F13B15B891D">问题3：LCR在流中被阻止</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果捕获过程没有落后，并且规则或基于规则的转换没有问题，那么由于某些其他原因，可能会在流中阻止LCR。例如，可能会禁用传播或出站服务器，可能会破坏数据库链接，或者可能存在其他问题。</p>
                        <p>您可以使用以下方法之一通过流跟踪LCR：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将<code class="codeph">message_tracking_frequency</code>捕获进程参数设置为<code class="codeph">1</code>或另一个相对较低的值</p>
                              <p>要在使用此方法时禁用LCR跟踪，请将<code class="codeph">message_tracking_frequency</code>捕获进程参数设置为<code class="codeph">NULL</code>或退出会话。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">DBMS_XSTREAM_ADM</code>包中运行<code class="codeph">SET_MESSAGE_TRACKING</code>过程</p>
                              <p>要在使用此方法时禁用LCR跟踪，请在<code class="codeph">SET_MESSAGE_TRACKING</code>过程中将<code class="codeph">tracking_label</code>参数设置为<code class="codeph">NULL</code>或退出会话。
                              </p>
                           </li>
                        </ul>
                        <p>使用其中一种方法后，使用<code class="codeph">V$XSTREAM_MESSAGE_TRACKING</code>视图通过流监视LCR的进度。通过流跟踪LCR，您可以确定LCR被阻止的位置。
                        </p>
                        <p>此外，如果使用传播在配置中发送LCR，则可以通过运行以下查询来检查传播发送方的当前状态：</p><pre class="oac_no_warn" dir="ltr">从V $ PROPAGATION_SENDER中选择状态;</pre><p>您可以通过运行以下查询来检查出站服务器的当前状态：</p><pre class="oac_no_warn" dir="ltr">SELECT SERVER_NAME，STATE FROM V $ XSTREAM_OUTBOUND_SERVER;</pre><p>您可以通过运行以下查询来验证客户端应用程序是否已附加到出站服务器：</p><pre class="oac_no_warn" dir="ltr">COLUMN SERVER_NAME标题'捕获|名称'格式A30列状态标题标题'状态'格式A8 SELECT SERVER_NAME，状态来自ALL_XSTREAM_OUTBOUND;</pre><p>当客户端应用程序连接到出站服务器时， <code class="codeph">STATUS</code>列显示<code class="codeph">ATTACHED</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-CBF1DAD7-BBB1-4F32-990C-D81248F2FC42">解决方案3</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-54202A39-FAFD-4DA9-BFE9-AF782282454B">纠正问题3：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>根据LCR被阻止的原因采取适当的措施。例如，如果禁用传播，则启用它。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CD511489-D916-4153-8F04-9946798F22F4__GUID-BFC7B999-F8A1-45F8-8984-F84E90171290">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">message_tracking_frequency</code>捕获过程参数的信息，请参阅<a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS306" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-7D01008F-B652-483D-B30D-44825CBE868F" title="您可以使用XStream Out实现常见问题的解决方案。">XStream Out的问题和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72861"></a><a id="XSTRM72862"></a><a id="XSTRM72860"></a><div class="props_rev_3"><a id="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282" name="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282"></a><h4 id="XSTRM-GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282" class="sect4"><span class="enumeration_section">7.2.3</span>捕获进程缺少必需的重做日志文件</h4>
                  <div>
                     <p>捕获进程启动或停止并重新启动时，可能需要扫描在包含与所需检查点SCN对应的SCN的日志文件之前生成的重做日志文件，并且这些文件可能已被删除。</p>
                     <div class="section">
                        <p>您可以查询<code class="codeph">ALL_CAPTURE</code>数据字典视图以确定捕获过程所需的检查点SCN。查询<code class="codeph">V$XSTREAM_CAPTURE</code>并检查<code class="codeph">STATE</code>列也很有帮助。捕获过程的状态描述了捕获过程当前正在执行的操作。在这种情况下，您可以获得有关捕获进程丢失原因或等待重做日志文件的其他信息。
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN CAPTURE_NAME标题'捕获名称'格式A30列状态标题'状态'格式A30 SELECT CAPTURE_NAME，状态来自V $ XSTREAM_CAPTURE; CAPTURE_NAME状态------------------ ----------------- XOUT_SRC_CAPTURE等待重做</pre><p>查询<code class="codeph">V$XSTREAM_CAPTURE</code>视图时，可能会显示附加信息以及状态信息。附加信息可以帮助您确定捕获过程等待重做的原因。例如，查询视图时， <code class="codeph">STATE</code>列可能会显示类似于以下内容的语句：</p><pre class="oac_no_warn" dir="ltr">等待重做：最后一次扫描6700345</pre><p>在这种情况下，输出显示捕获过程扫描的最后一个系统更改编号（SCN）。在其他情况下，输出可能会显式显示重做日志文件名。无论哪种方式，附加信息都可以帮助您识别捕获进程正在等待的重做日志文件。要更正此问题，请使捕获进程可以使用任何缺少的重做日志文件。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282__GUID-ED91D0BD-9572-4175-BB55-C0E0AE5C45A5">问题：已删除所需的重做日志文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在捕获进程扫描之前删除所需的重做日志文件会导致捕获进程中止，并在捕获进程跟踪文件中导致以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-01291：缺少日志文件</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282__GUID-BF964516-ADD9-410A-AAFB-808DAB3FFB21">解决方案：还原丢失的重做日志文件并防止将来出现问题</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果看到此错误，请尝试恢复任何缺少的重做日志文件并重新启动捕获过程。您可以检查<code class="codeph">V$LOGMNR_LOGS</code>动态性能视图以确定缺少的SCN范围，并添加相关的重做日志文件。捕获过程需要重做日志文件，其中包含所需的检查点SCN和所有后续重做日志文件。您可以在<code class="codeph">ALL_CAPTURE</code>数据字典视图中查询<code class="codeph">REQUIRED_CHECKPOINT_SCN</code>列，以确定捕获过程所需的检查点SCN。
                        </p>
                        <p>如果禁用捕获进程的时间超过<code class="codeph">CONTROL_FILE_RECORD_KEEP_TIME</code>初始化参数中指定的时间，则可能已在控制文件中替换有关缺少的重做日志文件的信息。您可以查询<code class="codeph">V$ARCHIVE_LOG</code>视图以查看是否列出了日志文件名。如果未列出，则可以使用<code class="codeph">ALTER DATABASE REGISTER OR REPLACE LOGFILE</code> SQL语句注册它们。
                        </p>
                        <p>如果在XStream环境中的源数据库上使用Recovery Manager（RMAN）的快速恢复区功能，则RMAN可能会删除捕获进程所需的归档重做日志文件。当恢复相关文件使用的磁盘空间接近快速恢复区域的指定磁盘配额时，RMAN可能会删除这些文件。要防止将来出现此问题，请完成以下一个或多个操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>增加快速恢复区域的磁盘配额。增加磁盘配额使RMAN删除所需的归档重做日志文件的可能性降低，但并不总是能够防止出现问题。</p>
                           </li>
                           <li>
                              <p>配置源数据库以将归档重做日志文件存储在快速恢复区域以外的位置。如果快速恢复区域中缺少必需的日志文件，则本地捕获进程将能够使用其他位置的日志文件。在这种情况下，数据库管理员必须在其他位置手动管理日志文件。</p>
                           </li>
                        </ul>
                        <p>RMAN始终确保在删除归档重做日志文件之前对其进行备份。如果RMAN删除捕获进程所需的归档重做日志文件，则RMAN会在警报日志中记录此操作。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282__GUID-6371C771-E904-4D0E-9F32-BAD8D2344207">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获过程</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372" title="RMAN删除策略可能会影响捕获过程。">XStream Out和Recovery Manager</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="monitoring-xstream-out.html#GUID-68AF1BB9-C49E-4CCB-AB2B-346E57B4CFF5" title="示例查询说明了如何显示每个捕获过程所需的重做日志文件。">显示每个捕获过程所需的重做日志文件</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-7D01008F-B652-483D-B30D-44825CBE868F" title="您可以使用XStream Out实现常见问题的解决方案。">XStream Out的问题和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72622"></a><a id="XSTRM72623"></a><a id="XSTRM72624"></a><a id="XSTRM1647"></a><div class="props_rev_3"><a id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012" name="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012"></a><h4 id="XSTRM-GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012" class="sect4"><span class="enumeration_section">7.2.4</span>从出站服务器流式传输的LCR缺少额外属性</h4>
                  <div>
                     <p>从出站服务器流式传输的LCR预计会包含额外的属性，但这些属性不包含在LCR中。</p>
                     <div class="section">
                        <p>LCR可以包含以下与数据库更改相关的额外属性：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ROW_ID</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">串行＃</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">会议＃</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">线＃</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">tx_name</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">用户名</code></p>
                           </li>
                        </ul>
                        <p>默认情况下，捕获过程不捕获这些额外属性。如果要将额外属性包含在从出站服务器流式传输到XStream客户端应用程序的LCR中，但LCR不包含额外属性的值，请确保捕获出站服务器更改的捕获进程配置为捕获值为了额外的属性。</p>
                        <p>以下部分描述了可能的问题及其解决方案。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-8CEE2CD7-1647-4997-BFD5-693BB9676C4D">问题：捕获过程未配置为捕获额外属性</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>捕获过程未配置为捕获所需的额外属性。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-C6FA0CC5-36EF-4D0E-B4AF-D55AC8991FDC">要显示数据库中捕获进程当前捕获的额外属性：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到运行捕获过程的数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN CAPTURE_NAME标题'捕获流程'格式A30列ATTRIBUTE_NAME标题'属性名称'格式A30选择CAPTURE_NAME，ATTRIBUTE_NAME来自ALL_CAPTURE_EXTRA_ATTRIBUTES，其中包括CAPTURE_NAME的'YES'订单;</pre><p>如果此查询未显示额外属性，则表示未捕获该属性。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-578AD494-5295-40A8-B6AC-3EA052921264">解</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-CC182A1A-D868-4BD8-8E17-79B307BEA509">要解决此问题，请配置捕获过程以捕获所需的额外属性：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到出站服务器数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">DBMS_CAPTURE_ADM</code>包中运行<code class="codeph">INCLUDE_EXTRA_ATTRIBUTE</code>过程。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4E6239CC-E633-45B9-8081-A1FEB5A64012__GUID-141A55D1-ABB3-42B1-8417-3095948AF624">
                        <p class="titleinexample">示例7-1包括Capture Process xcapture的tx_name属性</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_CAPTURE_ADM.INCLUDE_EXTRA_ATTRIBUTE（capture_name =&gt;'xcapture'，attribute_name =&gt;'tx_name'，include =&gt; TRUE）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-7D01008F-B652-483D-B30D-44825CBE868F" title="您可以使用XStream Out实现常见问题的解决方案。">XStream Out的问题和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72625"></a><a id="XSTRM72626"></a><a id="XSTRM72980"></a><a id="XSTRM72981"></a><a id="XSTRM72627"></a><a id="XSTRM72628"></a><a id="XSTRM1648"></a><div class="props_rev_3"><a id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5" name="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5"></a><h4 id="XSTRM-GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5" class="sect4"><span class="enumeration_section">7.2.5</span> XStream Out客户端应用程序无响应</h4>
                  <div>
                     <p>XStream Out配置中的XStream客户端应用程序没有响应。</p>
                     <div class="section">
                        <p>以下部分描述了可能的问题及其解决方案。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-5EA54916-5EA4-4E06-82E9-EFD532CDE7C3">问题1：流池大小太小</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Streams池大小可能太小。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-BEB09822-7E4A-41D9-A7D3-8B58A4BEDB0E">要确定Streams池大小是否太小：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到出站服务器数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>在包含出站服务器的数据库上运行以下查询：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>查询<code class="codeph">V$PROPAGATION_RECEIVER</code>视图：</p><pre class="oac_no_warn" dir="ltr">从V $ PROPAGATION_RECEIVER中选择状态;</pre><p>如果状态为<code class="codeph">WAITING</code> <code class="codeph">FOR</code> <code class="codeph">MEMORY</code> ，则考虑增加Streams池大小。
                                    </p>
                                 </li>
                                 <li>
                                    <p>查询<code class="codeph">V$STREAMS_POOL_STATISTICS</code>视图：</p><pre class="oac_no_warn" dir="ltr">从V $ STREAMS_POOL_STATISTICS中选择TOTAL_MEMORY_ALLOCATED / CURRENT_SIZE;</pre><p>如果返回的值是.90或更高，则考虑增加Streams池大小。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-D95DE022-2B4C-4658-B27A-EC2BEC847398">解决方案1</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-72296CED-ABC7-49DF-9521-EB18B2BB59E8">纠正问题1：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过修改<code class="codeph">STREAMS_POOL_SIZE</code>初始化参数或修改与内存相关的其他初始化参数来增加Streams池大小。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-562C7F8D-41DB-4CFC-903D-75E55116D0AD">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../refrn/V-XSTREAM_CAPTURE.html#REFRN30639" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关设置初始化参数的信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN00202" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-390E4689-F82D-4B18-A0E0-9700A92395E6">问题2：捕获过程的最大SGA大小太小</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">max_sga_size</code>捕获进程参数控制专门为捕获进程分配的系统全局区域（SGA）内存量，以兆字节为单位。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-DF3DC8E0-0BAF-4789-83EF-24DC16870163">要确定捕获过程的最大SGA大小是否太小：</p>
                        <ol>
                           <li>
                              <p>以XStream管理员身份连接到运行XStream组件的数据库。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>在数据库中运行以下查询：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>查询<code class="codeph">V$XSTREAM_CAPTURE</code>视图：</p><pre class="oac_no_warn" dir="ltr">选择CAPTURE_NAME AS CAP，SGA_USED /（1024 * 1024）AS USED，SGA_ALLOCATED /（1024 * 1024）AS ALLOCATED，TOTAL_MESSAGES_CAPTURED as CAPTURED，TOTAL_MESSAGES_ENQUEUED从V $ XSTREAM_CAPTURE中删除;</pre><p>如果<code class="codeph">USED</code>字段等于或几乎等于输出中的<code class="codeph">ALLOCATED</code>字段，则可能需要增加捕获过程的最大SGA大小。
                                    </p>
                                 </li>
                                 <li>
                                    <p>查询<code class="codeph">V$LOGMNR_SESSION</code>视图：</p><pre class="oac_no_warn" dir="ltr">SELECT SESSION_NAME AS CAP，MAX_MEMORY_SIZE /（1024 * 1024）AS LMMAX，USED_MEMORY_SIZE /（1024 * 1024）AS LMUSED，USED_MEMORY_SIZE / MAX_MEMORY_SIZE AS FROM V FROM LOGMNR_SESSION;</pre><p>如果<code class="codeph">PCT</code>字段在输出中等于或几乎等于1，则可能需要增加捕获过程的最大SGA大小。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-2198B727-E12C-4390-B9F1-1AE6A0D0F375">解决方案2</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-B261400D-2A29-4A3B-AB61-D53208506EA8">纠正问题2：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过修改<code class="codeph">max_sga_size</code>捕获进程参数来<code class="codeph">max_sga_size</code>捕获进程的最大SGA大小。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-667EDEBD-89D6-4C48-A18E-2047AB81FEDF">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-xstream-out.html#GUID-AB998819-B851-478E-8412-3E30EBFC8FD4" title="捕获过程参数控制捕获过程的操作方式。您可以使用DBMS_CAPTURE_ADM包中的SET_PARAMETER过程设置捕获过程参数。">设置捕获过程参数</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-59036168-AE96-4DC3-9E34-4BE6C2B7744B">问题3：编程错误</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果Streams池中有足够的内存且<code class="codeph">MAX_SGA_SIZE</code>捕获进程参数和apply参数设置正确，则检查客户端应用程序是否存在编程错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-7C0E24CD-749D-4BA2-9265-88F1C074A51E">解决方案3</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21256A5A-6017-4FBA-BA96-925A7DD98CA5__GUID-FDBF8914-BF5C-4B13-9CA6-76B5D481C139">纠正问题3：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>纠正编程错误。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-7D01008F-B652-483D-B30D-44825CBE868F" title="您可以使用XStream Out实现常见问题的解决方案。">XStream Out的问题和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="XSTRM72631"></a><div class="props_rev_3"><a id="GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB" name="GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB"></a><h3 id="XSTRM-GUID-BCE5DDD7-44FB-4EBE-B855-8850ADE9CAEB" class="sect3"><span class="enumeration_section">7.3</span>如何获得XStream Out的更多帮助</h3>
               <div>
                  <p>Oracle Support可以为XStream Out提供更多帮助。</p>
                  <p>您可以访问<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>查看My Oracle Support以获取更多问题的解决方案。
                  </p>
                  <p>有关Oracle支持的更多信息，请访问<a href="http://www.oracle.com/support/contact.html" target="_blank"><code class="codeph">http://www.oracle.com/support/contact.html</code></a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="troubleshooting-xstream-out.html#GUID-59CACCB8-8127-4C3F-9C15-E1899DFD3DD1" title="您可以使用XStream Out配置诊断和更正问题。">XStream Out故障排除</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="01004.DBMS_DDL.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This package provides access to some SQL data definition language (DDL) statements from stored procedures. It also provides special administration operations that are not available as Data Definition Language statements (DDLs)."></meta>
      <meta name="description" content="This package provides access to some SQL data definition language (DDL) statements from stored procedures. It also provides special administration operations that are not available as Data Definition Language statements (DDLs)."></meta>
      <title>DBMS_DDL</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="This package provides access to some SQL data definition language (DDL) statements from stored procedures. It also provides special administration operations that are not available as Data Definition Language statements (DDLs)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_DBFS_SFS.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_DEBUG.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_DBFS_SFS.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_DEBUG.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_DDL</li>
            </ol>
            <a id="GUID-325CEFAD-D6E5-41F0-A924-1A315A19D167" name="GUID-325CEFAD-D6E5-41F0-A924-1A315A19D167"></a><a id="ARPLS008"></a><a id="ARPLS008"></a>
            
            <h2 id="ARPLS-GUID-325CEFAD-D6E5-41F0-A924-1A315A19D167" class="sect2"><span class="enumeration_chapter">53</span> DBMS_DDL</h2>
         </header>
         <div class="ind">
            <div>
               <p>此包提供对存储过程中的某些SQL数据定义语言（DDL）语句的访问。它还提供了不可用作数据定义语言语句（DDL）的特殊管理操作。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_DDL.html#GUID-2FCA5403-4649-4841-BBA0-FE492072FD93" title="Oracle建议您不要在新应用程序中使用已弃用的子程序。对不推荐使用的功能的支持仅用于向后兼容">不推荐使用的子程序</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_DDL.html#GUID-46AAD0BC-04A6-4C23-BEAC-A4E78BCD607B" title="此程序包使用调用用户的权限运行，而不是程序包所有者SYS。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_DDL.html#GUID-EDF81CF0-E0DB-40BB-B389-A1A48E42A98E" title="ALTER_COMPILE过程提交当前事务，执行操作，然后再次提交。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_DDL.html#GUID-C8C80592-8D31-43B7-8643-76D93B6CB01F" title="此表按字母顺序列出DDBMS_DDL子程序并简要描述它们">DBMS_DDL子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS66074"></a><a id="ARPLS66074"></a><div class="props_rev_3"><a id="GUID-2FCA5403-4649-4841-BBA0-FE492072FD93" name="GUID-2FCA5403-4649-4841-BBA0-FE492072FD93"></a><h3 id="ARPLS-GUID-2FCA5403-4649-4841-BBA0-FE492072FD93" class="sect3"><span class="enumeration_section">53.1</span> DBMS_DDL不推荐使用的子程序</h3>
               <div>
                  <p>Oracle建议您不要在新应用程序中使用已弃用的子程序。对不推荐使用的功能的支持仅用于向后兼容</p>
                  <div class="section">
                     <p>以下子程序在发布Oracle数据库<span class="italic">10g时</span>已弃用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_DDL.html#GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA" title="此过程等同于SQL语句：ALTER PROCEDURE | FUNCTION | PACKAGE [&lt;schema&gt;。] &lt;name&gt; COMPILE [BODY]">ALTER_COMPILE程序</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66075"></a><a id="ARPLS66075"></a><div class="props_rev_3"><a id="GUID-46AAD0BC-04A6-4C23-BEAC-A4E78BCD607B" name="GUID-46AAD0BC-04A6-4C23-BEAC-A4E78BCD607B"></a><h3 id="ARPLS-GUID-46AAD0BC-04A6-4C23-BEAC-A4E78BCD607B" class="sect3"><span class="enumeration_section">53.2</span> DBMS_DDL安全模型</h3>
               <div>
                  <p>此程序包使用调用用户的权限运行，而不是程序包所有者<code class="codeph">SYS</code> 。</p>
               </div>
            </div><a id="ARPLS66076"></a><a id="ARPLS66076"></a><div class="props_rev_3"><a id="GUID-EDF81CF0-E0DB-40BB-B389-A1A48E42A98E" name="GUID-EDF81CF0-E0DB-40BB-B389-A1A48E42A98E"></a><h3 id="ARPLS-GUID-EDF81CF0-E0DB-40BB-B389-A1A48E42A98E" class="sect3"><span class="enumeration_section">53.3</span> <span class="bold">DBMS_DDL</span>操作说明</h3>
               <div>
                  <p><code class="codeph">ALTER_COMPILE</code>过程提交当前事务，执行操作，然后再次提交。
                  </p>
               </div>
            </div><a id="ARPLS66077"></a><a id="ARPLS66078"></a><a id="ARPLS66078"></a><a id="ARPLS66077"></a><div class="props_rev_3"><a id="GUID-C8C80592-8D31-43B7-8643-76D93B6CB01F" name="GUID-C8C80592-8D31-43B7-8643-76D93B6CB01F"></a><h3 id="ARPLS-GUID-C8C80592-8D31-43B7-8643-76D93B6CB01F" class="sect3"><span class="enumeration_section">53.4</span> DBMS_DDL子程序摘要</h3>
               <div>
                  <p>此表按字母顺序列出<code class="codeph">DDBMS_DDL</code>子程序并简要描述它们</p>
                  <div class="tblformal" id="GUID-C8C80592-8D31-43B7-8643-76D93B6CB01F__GUID-DD4BDD28-A8CC-4BC8-9B03-2BA3899DD601">
                     <p class="titleintable">表53-1 <span class="italic"><span class="bold">DBMS_DDL包子程序</span></span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_DDL包子程序" width="100%" border="1" summary="This table lists the DDBMS_DDL subprograms in alphabetical order and briefly describes them" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="42%" id="d384476e519">子程序</th>
                              <th align="left" valign="bottom" width="58%" id="d384476e522">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e527" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA" title="此过程等同于SQL语句：ALTER PROCEDURE | FUNCTION | PACKAGE [&lt;schema&gt;。] &lt;name&gt; COMPILE [BODY]">ALTER_COMPILE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e527 d384476e522 ">
                                 <p>编译PL / SQL对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e541" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA" title="此过程更改给定的对象表table_schema.table_name，因此它不是架构affected_schema的默认可引用表。">ALTER_TABLE_NOT_REFERENCEABLE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e541 d384476e522 ">
                                 <p>重组对象表</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e559" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-31A20381-02AC-4788-833F-D3A96967518F" title="此过程会更改给定的对象表table_schema.table_name，以使其成为给定模式affected_schema的可引用表。">ALTER_TABLE_REFERENCEABLE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e559 d384476e522 ">
                                 <p>重组对象表</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e577" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E" title="该过程将一个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建。然后，它生成一个CREATE OR REPLACE语句，其中PL / SQL源文本进行了模糊处理，并执行生成的语句。实际上，此过程将包装文本和创建PL / SQL单元的操作捆绑在一起。">CREATE_WRAPPED程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e577 d384476e522 ">
                                 <p>将单个<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句作为输入，指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的<code class="codeph">CREATE</code> ，生成带有混淆的PL / SQL源文本的<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句并执行生成的声明</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e627" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-7FBB75CA-A190-41C8-9932-73A79F35F813" title="如果指定的DML或DDL触发器设置为触发一次，则此函数返回TRUE。否则，它返回FALSE。">IS_TRIGGER_FIRE_ONCE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e627 d384476e522 ">
                                 <p>如果指定的DML或DDL触发器设置为触发一次，则返回<code class="codeph">TRUE</code> 。否则，返回<code class="codeph">FALSE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e650" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579" title="无论是否为触发器设置了属性，此过程都会设置指定的DML或DDL触发器的触发属性。">SET_TRIGGER_FIRING_PROPERTY程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e650 d384476e522 ">
                                 <p>设置指定的DML或DDL触发器的触发属性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d384476e662" headers="d384476e519 ">
                                 <p><a href="DBMS_DDL.html#GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" title="此函数将单个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建，并返回CREATE OR REPLACE语句，其中PL / SQL单元的文本被混淆了。">WRAP功能</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d384476e662 d384476e522 ">
                                 <p>将<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的<code class="codeph">CREATE</code>并返回<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句，其中PL / SQL单元的文本已被模糊处理</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66079"></a><a id="ARPLS66080"></a><a id="ARPLS66081"></a><a id="ARPLS66080"></a><a id="ARPLS66081"></a><a id="ARPLS66079"></a><div class="props_rev_3"><a id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA" name="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA"></a><h4 id="ARPLS-GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA" class="sect4"><span class="enumeration_section">53.4.1</span> ALTER_COMPILE过程</h4>
                  <div>
                     <p>此过程等同于SQL语句： <code class="codeph">ALTER PROCEDURE|FUNCTION|PACKAGE [&lt;schema&gt;.] &lt;name&gt; COMPILE [BODY]</code></p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA__GUID-054315B7-FC36-4F8B-BFF2-0579DDE78D08">
                           <p class="notep1">注意：</p>
                           <p>Oracle Database <span class="italic">10g</span>第2版（10.2）中不推荐使用此过程虽然出于向后兼容性的原因，程序包仍然可用，但Oracle建议在动态SQL语句中使用DDL等效项。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA__GUID-8DE8E99A-20BB-48E1-AC98-599DC0EDE58F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.ALTER_COMPILE（类型VARCHAR2，模式VARCHAR2，名称VARCHAR2 reuse_settings BOOLEAN：= FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA__GUID-89BF3EC7-2707-4131-971B-B47CC327C84C">参数</p>
                        <div class="tblformal" id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA__GUID-77AD8860-BC1A-4359-925B-C3D9D800D0EA">
                           <p class="titleintable">表53-2 ALTER_COMPILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_COMPILE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_DDL.ALTER_COMPILE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d384476e832">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d384476e835">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e840" headers="d384476e832 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e840 d384476e835 ">
                                       <p>必须是<code class="codeph">PROCEDURE</code> ， <code class="codeph">FUNCTION</code> ， <code class="codeph">PACKAGE</code> ， <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code>或<code class="codeph">TRIGGER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e866" headers="d384476e832 ">
                                       <p><code class="codeph">模式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e866 d384476e835 ">
                                       <p>架构名称</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则使用当前架构（区分大小写）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e879" headers="d384476e832 ">
                                       <p><code class="codeph">名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e879 d384476e835 ">
                                       <p>对象名称（区分大小写）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e887" headers="d384476e832 ">
                                       <p><code class="codeph">reuse_settings</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e887 d384476e835 ">
                                       <p>指示是否应重用对象中的会话设置，或者是否应采用当前会话设置</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA__GUID-A9726C23-6705-40B1-B6C2-9F1607CC796E">例外</p>
                        <div class="tblformal" id="GUID-4B881588-C3D3-407C-A0D1-47F0A8DA57DA__GUID-A89BE626-5145-4E31-9998-146A532A76E2">
                           <p class="titleintable">表53-3 ALTER_COMPILE过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_COMPILE过程异常" width="100%" border="1" summary="This table describes ALTER_COMPILE Procedure Exceptions." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d384476e907">例外</th>
                                    <th align="left" valign="bottom" width="74%" id="d384476e910">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e915" headers="d384476e907 ">
                                       <p><code class="codeph">ORA-20000：</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e915 d384476e910 ">
                                       <p>没有足够的权限或对象</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e923" headers="d384476e907 ">
                                       <p><code class="codeph">ORA-20001：</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e923 d384476e910 ">
                                       <p>远程对象，无法编译</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e931" headers="d384476e907 ">
                                       <p><code class="codeph">ORA-20002：</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e931 d384476e910 ">
                                       <p>对象类型的错误值：应该是<code class="codeph">PACKAGE</code> ， <code class="codeph">PACKAGE BODY</code> ， <code class="codeph">PROCEDURE</code> ， <code class="codeph">FUNCTION</code>或<code class="codeph">TRIGGER</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66082"></a><a id="ARPLS66083"></a><a id="ARPLS66083"></a><a id="ARPLS66082"></a><div class="props_rev_3"><a id="GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA" name="GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA"></a><h4 id="ARPLS-GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA" class="sect4"><span class="enumeration_section">53.4.2 ALTER_TABLE_NOT_REFERENCEABLE</span>过程</h4>
                  <div>
                     <p>此过程更改给定的对象表<code class="codeph">table_schema.table_name</code>因此它不是架构<code class="codeph">affected_schema</code>的默认可引用表。
                     </p>
                     <div class="section">
                        <p>这相当于SQL：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE [&lt;table_schema&gt;。] &lt;table_name&gt; &lt;affected_schema&gt;不可引用</pre><p>目前不支持或作为DDL语句提供。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA__GUID-CFA4AFAE-2028-4E8F-AAE8-08A5C6745122">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.ALTER_TABLE_NOT_REFERENCEABLE（table_name IN VARCHAR2，table_schema IN DEFAULT NULL，affected_schema IN DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA__GUID-5B569804-CCD2-48A5-AC99-D9B2ECB243D6">参数</p>
                        <div class="tblformal" id="GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA__GUID-0DF641C5-BE0E-4A01-A7F4-D3AE56FF2897">
                           <p class="titleintable">表53-4 ALTER_TABLE_NOT_REFERENCEABLE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_TABLE_NOT_REFERENCEABLE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_DDL.ALTER_TABLE_NOT_REFERENCEABLE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d384476e1076">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d384476e1079">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1084" headers="d384476e1076 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1084 d384476e1079 ">
                                       <p>要更改的表的名称。不能成为同义词。不能为<code class="codeph">NULL</code> 。区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1095" headers="d384476e1076 ">
                                       <p><code class="codeph">TABLE_SCHEMA</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1095 d384476e1079 ">
                                       <p>拥有要更改的表的模式的名称。如果为<code class="codeph">NULL</code>则使用当前模式。区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1106" headers="d384476e1076 ">
                                       <p><code class="codeph">affected_schema</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1106 d384476e1079 ">
                                       <p>受此更改影响的架构的名称。如果为NULL，则使用当前模式。区分大小写。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E78618DD-8B1C-4B92-B849-F73D528AA4AA__GUID-46F35166-484A-4BE9-8680-0851CD31B664">使用说明</p>
                        <p>此过程只是将受影响的模式恢复为<code class="codeph">PUBLIC</code>引用的默认表;也就是说，它只是撤消此特定模式的先前<code class="codeph">ALTER_TABLE_REFERENCEABLE</code>调用。受影响的模式必须是特定模式（不能是<code class="codeph">PUBLIC</code> ）。
                        </p>
                        <p>执行此过程的用户必须拥有该表（即，模式与用户相同），并且受影响的模式必须与用户相同。</p>
                        <p>如果执行此过程的用户具有<code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>和<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>以及<code class="codeph">DROP</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>权限，则用户不必拥有该表，并且受影响的模式可以是任何有效的模式。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66084"></a><a id="ARPLS66085"></a><a id="ARPLS66085"></a><a id="ARPLS66084"></a><div class="props_rev_3"><a id="GUID-31A20381-02AC-4788-833F-D3A96967518F" name="GUID-31A20381-02AC-4788-833F-D3A96967518F"></a><h4 id="ARPLS-GUID-31A20381-02AC-4788-833F-D3A96967518F" class="sect4"><span class="enumeration_section">53.4.3 ALTER_TABLE_REFERENCEABLE</span>过程</h4>
                  <div>
                     <p>此过程会更改给定的对象表<code class="codeph">table_schema.table_name</code>以使其成为给定模式<code class="codeph">affected_schema</code>的可引用表。
                     </p>
                     <div class="section">
                        <p>这相当于SQL：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE [&lt;table_schema&gt;。] &lt;table_name&gt;可以参考&lt;affected_schema&gt;</pre><p>目前不支持或作为DDL语句提供。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31A20381-02AC-4788-833F-D3A96967518F__GUID-D4347E11-0CF8-4F7A-83C5-4E603D3F336C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.ALTER_TABLE_REFERENCEABLE table_name IN VARCHAR2，table_schema IN DEFAULT NULL，affected_schema IN DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31A20381-02AC-4788-833F-D3A96967518F__GUID-AD8DE04E-B85C-4A2A-81A0-8B02A2E2AD7C">参数</p>
                        <div class="tblformal" id="GUID-31A20381-02AC-4788-833F-D3A96967518F__GUID-E77D6B70-20BE-4041-95D2-0ED7A10B5A06">
                           <p class="titleintable">表53-5 ALTER_TABLE_REFERENCEABLE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_TABLE_REFERENCEABLE过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_DDL.ALTER_TABLE_REFERENCEABLE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d384476e1282">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d384476e1285">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1290" headers="d384476e1282 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1290 d384476e1285 ">
                                       <p>要更改的表的名称。不能成为同义词。不能为<code class="codeph">NULL</code> 。区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1301" headers="d384476e1282 ">
                                       <p><code class="codeph">TABLE_SCHEMA</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1301 d384476e1285 ">
                                       <p>拥有要更改的表的模式的名称。如果为<code class="codeph">NULL</code>则使用当前模式。区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1312" headers="d384476e1282 ">
                                       <p><code class="codeph">affected_schema</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1312 d384476e1285 ">
                                       <p>受此更改影响的架构的名称。如果为NULL，则使用当前模式。区分大小写。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31A20381-02AC-4788-833F-D3A96967518F__GUID-C8F21B5A-5D78-4C2C-93D3-70440CB7BD8C">使用说明</p>
                        <p>创建对象表时，除非在创建表时使用<code class="codeph">OID</code> <code class="codeph">AS</code>子句，否则它将自动变为可引用。<code class="codeph">OID</code> <code class="codeph">AS</code>子句使您可以创建对象表，并为新表分配与同一类型的另一个对象表相同的EOID。使用<code class="codeph">OID</code> <code class="codeph">AS</code>子句创建新表后，最终会得到两个具有相同<code class="codeph">EOID</code>对象表;新表是不可引用的，原始表是。用于指向原始表中的对象的所有引用仍引用同一原始表中的相同对象。
                        </p>
                        <p>如果在新表上执行此过程，则会使新表成为可引用表替换原来的表;因此，这些引用现在指向新表中的对象而不是原始表。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66086"></a><a id="ARPLS66087"></a><a id="ARPLS66087"></a><a id="ARPLS66086"></a><div class="props_rev_3"><a id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E" name="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E"></a><h4 id="ARPLS-GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E" class="sect4"><span class="enumeration_section">53.4.4</span> CREATE_WRAPPED程序</h4>
                  <div>
                     <p>该过程将一个<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建。然后，它生成一个<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句，其中PL / SQL源文本进行了模糊处理，并执行生成的语句。实际上，此过程将包装文本和创建PL / SQL单元的操作捆绑在一起。
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-90F5E14A-82E8-4BDD-9E6A-2697021C28F2">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="DBMS_DDL.html#GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" title="此函数将单个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建，并返回CREATE OR REPLACE语句，其中PL / SQL单元的文本被混淆了。">WRAP功能</a></p>
                        </div>
                        <p>此过程有3次重载。与使用单独的<a href="DBMS_DDL.html#GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" title="此函数将单个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建，并返回CREATE OR REPLACE语句，其中PL / SQL单元的文本被混淆了。">WRAP函数</a>和<code class="codeph">DBMS_SQL.PARSE</code> （或<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> ）调用的组合相比，这三个函数中的每一个都提供了更好的性能。每种语法形式的不同功能与定义一起呈现。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-9BF1114E-6806-4767-A3C1-AE50972BB907">句法</p>
                        <p>是<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> <code class="codeph">SYS.DBMS_DDL</code>的快捷方式。 <code class="codeph">WRAP</code> （ <span class="italic">ddl</span> ）：</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.CREATE_WRAPPED（ddl VARCHAR2）;</pre><p>是<code class="codeph">DBMS_SQL</code>的快捷方式。 <code class="codeph">PARSE</code> （ <code class="codeph">cursor</code> ， <code class="codeph">SYS</code> 。 <code class="codeph">DBMS_DDL</code> 。 <code class="codeph">WRAP</code> （ <code class="codeph">input</code> ， <code class="codeph">lb</code> ， <code class="codeph">ub</code> ））：</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.CREATE_WRAPPED（ddl DBMS_SQL.VARCHAR2A，lb PLS_INTEGER，ub PLS_INTEGER）;</pre><p>是<code class="codeph">DBMS_SQL</code>的快捷方式。 <code class="codeph">PARSE</code> （ <code class="codeph">cursor</code> ， <code class="codeph">SYS</code> 。 <code class="codeph">DBMS_DDL</code> 。 <code class="codeph">WRAP</code> （ <code class="codeph">input</code> ， <code class="codeph">lb</code> ， <code class="codeph">ub</code> ））：</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.CREATE_WRAPPED（ddl DBMS_SQL.VARCHAR2S，lb PLS_INTEGER，ub PLS_INTEGER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-DFE55961-180E-482B-B0CE-CD19D769EF00">参数</p>
                        <div class="tblformal" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-5726CA02-578E-4341-BE79-B999F1AAA007">
                           <p class="titleintable">表53-6 CREATE_WRAPPED过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_WRAPPED过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_DDL.CREATE_WRAPPED subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d384476e1623">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d384476e1626">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d384476e1631" headers="d384476e1623 ">
                                       <p><code class="codeph">DDL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d384476e1631 d384476e1626 ">
                                       <p><code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句，用于指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d384476e1648" headers="d384476e1623 ">
                                       <p><code class="codeph">磅</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d384476e1648 d384476e1626 ">
                                       <p>字符串表中索引的下限，用于指定<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d384476e1665" headers="d384476e1623 ">
                                       <p><code class="codeph">UB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d384476e1665 d384476e1626 ">
                                       <p>字符串表中索引的上限，用于指定<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-7150AE4F-FD19-4CE7-BDA3-D79432236991">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用用户调用<code class="codeph">DBMS_DDL</code>的权限执行<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句。 <code class="codeph">CREATE_WRAPPED</code> 。</p>
                           </li>
                           <li>
                              <p>尝试调用这些接口的任何PL / SQL代码都应使用完全限定的包名<code class="codeph">SYS</code> 。 <code class="codeph">DBMS_DDL</code>以避免由本地定义的单元捕获名称<code class="codeph">DBMS_DDL</code>或重新定义<code class="codeph">DBMS_DDL</code>公共同义词。
                              </p>
                           </li>
                           <li>
                              <p>any的每次调用只接受一个PL / SQL单元。相比之下，PL / SQL <code class="codeph">wrap</code>实用程序接受整个SQL * Plus文件并对文件中的PL / SQL单元进行模糊处理，使所有其他文本保持原样。这些接口意在结合使用具有或作为PL / SQL的动态SQL接口（替换<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>和<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code> ）。由于这些动态SQL接口一次只接受一个单元（并且不理解SQL * Plus“ <code class="codeph">/</code> ”终止字符），因此<a href="DBMS_DDL.html#GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E" title="该过程将一个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建。然后，它生成一个CREATE OR REPLACE语句，其中PL / SQL源文本进行了模糊处理，并执行生成的语句。实际上，此过程将包装文本和创建PL / SQL单元的操作捆绑在一起。">CREATE_WRAPPED过程</a>和<a href="DBMS_DDL.html#GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" title="此函数将单个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建，并返回CREATE OR REPLACE语句，其中PL / SQL单元的文本被混淆了。">WRAP函数</a>都需要输入为单个单元。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-436C0CD1-13A2-42EA-913F-FED28791E87B">例外</p>
                        <p><code class="codeph">ORA-24230</code> ：如果输入不是指定PL / SQL单元的<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句， <code class="codeph">DBMS_DDL</code>异常。 <code class="codeph">MALFORMED_WRAP_INPUT</code>被提出。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E__GUID-B191B8F3-B71E-4339-B2BF-B930FD43A632">例子</p><pre class="oac_no_warn" dir="ltr">DECLARE ddl VARCHAR2（32767）; BEGIN ddl：= GENERATE_PACKAGE（...）; SYS.DBMS_DDL.CREATE_WRAPPED（DDL）; - 而不是EXECUTE IMMEDIATE ddl END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS321"></a><a id="ARPLS66088"></a><a id="ARPLS66088"></a><a id="ARPLS321"></a><div class="props_rev_3"><a id="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813" name="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813"></a><h4 id="ARPLS-GUID-7FBB75CA-A190-41C8-9932-73A79F35F813" class="sect4"><span class="enumeration_section">53.4.5</span> IS_TRIGGER_FIRE_ONCE功能</h4>
                  <div>
                     <p>如果指定的DML或DDL触发器设置为触发一次，则此函数返回<code class="codeph">TRUE</code> 。否则，它返回<code class="codeph">FALSE</code> 。</p>
                     <div class="section">
                        <p>一旦触发器在用户会话中触发，但在以下情况下不触发：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于Streams应用过程所做的更改</p>
                           </li>
                           <li>
                              <p>对于通过执行一个或多个Streams所做的更改，使用<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">EXECUTE_ERROR</code>或<code class="codeph">EXECUTE_ALL_ERRORS</code>过程来应用错误</p>
                           </li>
                           <li>
                              <p>对于逻辑备用申请流程所做的更改</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813__GUID-06FD925E-2AFB-4B5B-94AB-476287F1953A">
                           <p class="notep1">注意：</p>
                           <p>只有DML和DDL触发器可以触发一次。所有其他类型的触发器总是会触发。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813__GUID-27AD0A07-41A8-4CF4-8B84-14B501076F64">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="DBMS_DDL.html#GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579" title="无论是否为触发器设置了属性，此过程都会设置指定的DML或DDL触发器的触发属性。">SET_TRIGGER_FIRING_PROPERTY程序</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813__GUID-536FC7A3-5175-44AB-90A8-136090D77C27">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.IS_TRIGGER_FIRE_ONCE trig_owner IN VARCHAR2，trig_name IN VARCHAR2）RETURN BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813__GUID-80CA1D1A-D0C5-4D70-92E5-4790C399D0DC">参数</p>
                        <div class="tblformal" id="GUID-7FBB75CA-A190-41C8-9932-73A79F35F813__GUID-2A7918E2-12D3-4ABA-8308-BB9594D25C66">
                           <p class="titleintable">表53-7 IS_TRIGGER_FIRE_ONCE功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="IS_TRIGGER_FIRE_ONCE函数参数" width="100%" border="1" summary="This table describes the parameters of DBMS_DDL.IS_TRIGGER_FIRE_ONCE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d384476e1970">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d384476e1973">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1978" headers="d384476e1970 ">
                                       <p><code class="codeph">trig_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1978 d384476e1973 ">
                                       <p>触发器的模式</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e1986" headers="d384476e1970 ">
                                       <p><code class="codeph">trig_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e1986 d384476e1973 ">
                                       <p>触发器名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS322"></a><a id="ARPLS66089"></a><a id="ARPLS66089"></a><a id="ARPLS322"></a><div class="props_rev_3"><a id="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579" name="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579"></a><h4 id="ARPLS-GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579" class="sect4"><span class="enumeration_section">53.4.6</span> SET_TRIGGER_FIRING_PROPERTY过程</h4>
                  <div>
                     <p>无论是否为触发器设置了属性，此过程都会设置指定的DML或DDL触发器的触发属性。</p>
                     <div class="section">
                        <p>使用此过程控制DML或DDL触发器的触发属性以进行更改：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>由Streams申请流程应用</p>
                           </li>
                           <li>
                              <p>通过使用<code class="codeph">DBMS_APPLY_ADM</code>包中的<code class="codeph">EXECUTE_ERROR</code>或<code class="codeph">EXECUTE_ALL_ERRORS</code>过程执行一个或多个Streams应用错误。
                              </p>
                           </li>
                           <li>
                              <p>由Logical Standby申请流程应用</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579__GUID-3AECA6D1-034A-4A11-B5C2-7C2A73A97F46">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.SET_TRIGGER_FIRING_PROPERTY（trig_owner IN VARCHAR2，trig_name IN VARCHAR2，fire_once IN BOOLEAN）; DBMS_DDL.SET_TRIGGER_FIRING_PROPERTY（trig_owner IN VARCHAR2，trig_name IN VARCHAR2，property IN INTEGER，设置IN BOOLEAN）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579__GUID-A36260BC-4E2F-4151-A5CE-6FE94E559242">参数</p>
                        <div class="tblformal" id="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579__GUID-97568B37-A6E2-4B13-9721-1D4228D2AC11">
                           <p class="titleintable">表53-8 SET_TRIGGER_FIRING_PROPERTY过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_TRIGGER_FIRING_PROPERTY过程参数" width="100%" border="1" summary="This table describes the parameters of DBMS_DDL.SET_TRIGGER_FIRING_PROPERTY." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d384476e2125">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d384476e2128">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e2133" headers="d384476e2125 ">
                                       <p><code class="codeph">trig_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e2133 d384476e2128 ">
                                       <p>要设置的触发器的模式</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e2141" headers="d384476e2125 ">
                                       <p><code class="codeph">trig_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e2141 d384476e2128 ">
                                       <p>要设置的触发器的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e2149" headers="d384476e2125 ">
                                       <p><code class="codeph">fire_once</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e2149 d384476e2128 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>如果为<code class="codeph">TRUE</code> ，则触发器设置为触发一次。默认情况下，对于DML和DDL触发器， <code class="codeph">fire_once</code>参数设置为<code class="codeph">TRUE</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p>如果为<code class="codeph">FALSE</code> ，则触发器设置为始终触发，除非<code class="codeph">apply_server_only</code>属性设置为<code class="codeph">TRUE</code> ，这将覆盖<code class="codeph">fire_once</code>属性设置。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e2183" headers="d384476e2125 ">
                                       <p><code class="codeph">属性</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e2183 d384476e2128 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DBMS_DDL</code> 。 <code class="codeph">fire_once</code>设置触发器的<code class="codeph">fire_once</code>属性</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_DDL</code> 。 <code class="codeph">apply_server_only</code>指示是否仅在SQL应用进程的上下文中触发触发器维护逻辑备用数据库或Streams应用进程</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d384476e2209" headers="d384476e2125 ">
                                       <p><code class="codeph">设置</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d384476e2209 d384476e2128 ">
                                       <p>正在设置的财产价值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579__GUID-F56D58B4-9501-4AC6-8D11-DE9BA352A736">使用说明</p>
                        <p>在表上创建的DML触发器将其fire-once属性设置为<code class="codeph">TRUE</code> 。在这种情况下，触发器仅在用户进程修改表时触发，并且在Oracle进程内自动禁用它们，维护逻辑备用数据库（SQL Apply）或Oracle进程执行复制（Streams Apply）进程，从而执行当SQL Apply或Streams Apply进程修改表时，不会触发。由于SQL Apply或Streams Apply进程对维护表进行更改，用户可以通过两种方式触发触发器：（a）将触发器的fire-once属性设置为<code class="codeph">FALSE</code> ，这样可以同时触发在用户进程或SQL或Streams Apply进程的上下文中，或（b）通过将apply-server-only属性设置为<code class="codeph">TRUE</code> ，从而仅在SQL Apply或Streams Apply进程的上下文中触发触发器不在用户进程的上下文中。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">FIRE_ONCE</code> = <code class="codeph">TRUE</code> ， <code class="codeph">APPLY_SERVER_ONLY</code> = <code class="codeph">FALSE</code></p>
                              <p>这是DML触发器的默认属性设置。触发器仅在用户进程修改基表时触发。</p>
                           </li>
                           <li>
                              <p><code class="codeph">FIRE_ONCE</code> = <code class="codeph">TRUE</code>或<code class="codeph">FALSE</code> ， <code class="codeph">APPLY_SERVER_ONLY</code> = <code class="codeph">TRUE</code></p>
                              <p>仅当SQL Apply或Streams Apply进程修改基表时，才会触发该触发器。当用户进程修改基表时，触发器不会触发。因此，apply-server-only属性会覆盖触发器的fire-once属性。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-A501BBA0-0440-4704-AA91-4A28AE4B1579__GUID-4DE20C26-FEC3-4CB0-8EB6-3C3AA81766B4">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果从错误队列中取出错误事务并在不使用<code class="codeph">DBMS_APPLY_ADM</code>程序包的情况下执行它，则无论触发器触发属性如何，此执行产生的相关更改都会导致触发器触发。
                                 </p>
                              </li>
                              <li>
                                 <p>只有DML和DDL触发器可以触发一次。所有其他类型的触发器总是会触发。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66090"></a><a id="ARPLS66091"></a><a id="ARPLS66091"></a><a id="ARPLS66090"></a><div class="props_rev_3"><a id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" name="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE"></a><h4 id="ARPLS-GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" class="sect4"><span class="enumeration_section">53.4.7</span> WRAP功能</h4>
                  <div>
                     <p>此函数将单个<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的<code class="codeph">CREATE</code>并返回<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句，其中PL / SQL单元的文本被混淆了。
                     </p>
                     <div class="section">
                        <p>该函数有3个重载，以允许动态生成DDL语句并呈现给<code class="codeph">DBMS_SQL</code>或<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>的不同方式。每种语法形式的不同功能与定义一起呈现。
                        </p>
                        <div class="infoboxnotealso" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-E186736D-65FA-4291-93B1-66464799C985">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="DBMS_DDL.html#GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E" title="该过程将一个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建。然后，它生成一个CREATE OR REPLACE语句，其中PL / SQL源文本进行了模糊处理，并执行生成的语句。实际上，此过程将包装文本和创建PL / SQL单元的操作捆绑在一起。">CREATE_WRAPPED程序</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-78AA44AF-A54A-4BD5-9A1A-EDD6405F2DBF">句法</p>
                        <p>提供基本功能：</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.WRAP（ddl VARCHAR2）RETURN VARCHAR2;</pre><p>提供与第一种形式相同的功能，但允许更大的输入。此函数旨在与<a href="DBMS_SQL.html#GUID-C96D5BAA-29A9-4AB5-A69E-E31228ECC9E9" title="DBMS_SQL包提供了一个接口，使用动态SQL来解析使用PL / SQL的任何数据操作语言（DML）或数据定义语言（DDL）语句。">DBMS_SQL</a>包中的<a href="DBMS_SQL.html#GUID-9723D6EA-3BD2-4B10-BE29-0E1FD64FDA2B" title="此过程解析给定游标中的给定语句。所有语句都会立即解析。此外，DDL语句在解析时立即运行。">PARSE过程</a>一起使用，其参数列表遵循DBMS_SQL.PARSE的约定：</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.WRAP（ddl DBMS_SQL.VARCHAR2S，lb PLS_INTEGER，ub PLS_INTEGER）RETURN DBMS_SQL.VARCHAR2S;</pre><p>提供与第二种形式相同的功能，并提供与<a href="DBMS_SQL.html#GUID-C96D5BAA-29A9-4AB5-A69E-E31228ECC9E9" title="DBMS_SQL包提供了一个接口，使用动态SQL来解析使用PL / SQL的任何数据操作语言（DML）或数据定义语言（DDL）语句。">DBMS_SQL</a>包中的多种形式的<a href="DBMS_SQL.html#GUID-9723D6EA-3BD2-4B10-BE29-0E1FD64FDA2B" title="此过程解析给定游标中的给定语句。所有语句都会立即解析。此外，DDL语句在解析时立即运行。">PARSE过程的</a>兼容性：</p><pre class="oac_no_warn" dir="ltr">DBMS_DDL.WRAP（ddl DBMS_SQL.VARCHAR2A，lb PLS_INTEGER，ub PLS_INTEGER）RETURN DBMS_SQL.VARCHAR2A;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-1F6C6585-E587-470F-92E0-F2AC90A399EB">参数</p>
                        <div class="tblformal" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-0B668013-8F01-4AAD-90A7-AC17B0A00CEE">
                           <p class="titleintable">表53-9 WRAP功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="WRAP功能参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_DDL.WRAP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d384476e2487">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d384476e2490">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d384476e2495" headers="d384476e2487 ">
                                       <p><code class="codeph">DDL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d384476e2495 d384476e2490 ">
                                       <p><code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句，用于指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d384476e2512" headers="d384476e2487 ">
                                       <p><code class="codeph">磅</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d384476e2512 d384476e2490 ">
                                       <p>字符串表中索引的下限，用于指定<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d384476e2529" headers="d384476e2487 ">
                                       <p><code class="codeph">UB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d384476e2529 d384476e2490 ">
                                       <p>字符串表中索引的上限，用于指定<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-AED0A86F-0BDB-4A5F-8A97-DD3D4B555B30">返回值</p>
                        <p>带有文本模糊的<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句。对于第二种和第三种形式，返回值是一个字符串表，需要连接这些字符串才能构造包含混淆源文本的<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>字符串。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-C2F146B3-C369-4888-AED6-A7ED834B442E">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>尝试调用这些接口的任何PL / SQL代码都应使用完全限定的包名<code class="codeph">SYS</code> 。 <code class="codeph">DBMS_DDL</code>以避免由本地定义的单元捕获名称<code class="codeph">DBMS_DDL</code>或重新定义<code class="codeph">DBMS_DDL</code>公共同义词。
                              </p>
                           </li>
                           <li>
                              <p>any的每次调用只接受一个PL / SQL单元。相比之下，PL / SQL <code class="codeph">wrap</code>实用程序接受完整的SQL文件并对文件中的PL / SQL单元进行模糊处理，使所有其他文本保持原样。这些接口意在结合使用具有或作为PL / SQL的动态SQL接口（替换<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>和<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code> ）。由于这些动态SQL接口一次只接受一个单元（并且不理解SQL * Plus“ <code class="codeph">/</code> ”终止字符），因此<a href="DBMS_DDL.html#GUID-DDFE794A-5D30-48FF-80D2-771B9890CB5E" title="该过程将一个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建。然后，它生成一个CREATE OR REPLACE语句，其中PL / SQL源文本进行了模糊处理，并执行生成的语句。实际上，此过程将包装文本和创建PL / SQL单元的操作捆绑在一起。">CREATE_WRAPPED过程</a>和<a href="DBMS_DDL.html#GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE" title="此函数将单个CREATE OR REPLACE语句作为输入，该语句指定PL / SQL包规范，包主体，函数，过程，类型规范或类型主体的创建，并返回CREATE OR REPLACE语句，其中PL / SQL单元的文本被混淆了。">WRAP函数</a>都需要输入为单个单元。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-C4004F40-102E-4B59-A993-DADDA82E353B">例外</p>
                        <p><code class="codeph">ORA-24230</code> ：如果输入不是指定PL / SQL单元的<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>语句， <code class="codeph">DBMS_DDL</code>异常。 <code class="codeph">MALFORMED_WRAP_INPUT</code>被提出。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0CF2398C-57A2-4A2E-829B-07EF4AACF5EE__GUID-AE3FD91D-1EF2-46FB-B221-FBB6C4B0BDAD">例子</p><pre class="oac_no_warn" dir="ltr">DECLARE ddl VARCHAR2（32767）; BEGIN ddl：= GENERATE_PACKAGE（...）; EXECUTE IMMEDIATE SYS.DBMS_DDL.WRAP（ddl）; - 而不是EXECUTE IMMEDIATE ddl END;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01068.DBMS_PDB.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_PDB package provides an interface to examine and manipulate data about pluggable databases (PDBs) in a multitenant container database (CDB). It also contains an interface specify which database objects are application common objects. You can migrate a PDB from one CDB to another CDB. After the migration is complete, all backups of the PDB before migration is available and useable in the destination CDB."></meta>
      <meta name="description" content="The DBMS_PDB package provides an interface to examine and manipulate data about pluggable databases (PDBs) in a multitenant container database (CDB). It also contains an interface specify which database objects are application common objects. You can migrate a PDB from one CDB to another CDB. After the migration is complete, all backups of the PDB before migration is available and useable in the destination CDB."></meta>
      <title>DBMS_PDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_PDB package provides an interface to examine and manipulate data about pluggable databases (PDBs) in a multitenant container database (CDB). It also contains an interface specify which database objects are application common objects. You can migrate a PDB from one CDB to another CDB. After the migration is complete, all backups of the PDB before migration is available and useable in the destination CDB."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_PCLXUTIL.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_PDB_ALTER_SHARING.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_PCLXUTIL.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_PDB_ALTER_SHARING.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_PDB</li>
            </ol>
            <a id="GUID-DB254799-2EC9-4582-B5BC-086EFBB8D375" name="GUID-DB254799-2EC9-4582-B5BC-086EFBB8D375"></a><a id="ARPLS73527"></a><a id="ARPLS73527"></a>
            
            <h2 id="ARPLS-GUID-DB254799-2EC9-4582-B5BC-086EFBB8D375" class="sect2"><span class="enumeration_chapter">118</span> DBMS_PDB</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_PDB</code>包提供了一个接口，用于检查和操作多租户容器数据库（CDB）中可插拔数据库（PDB）的数据。它还包含一个接口，指定哪些数据库对象是应用程序公共对象。您可以将PDB从一个CDB迁移到另一个CDB。迁移完成后，迁移前PDB的所有备份都可用，并且可在目标CDB中使用。</p>
               <div class="infoboxnotealso" id="GUID-DB254799-2EC9-4582-B5BC-086EFBB8D375__GUID-2456E81E-EB3C-4435-A73D-3A55C49A6213">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关创建和管理PDB和CDB的信息，请参见<a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </li>
                     <li>
                        <p>有关配置协议端口和DNS映射的信息，请参阅<a href="../adxdb/administration-of-XML-DB.html#ADXDB2700" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a></p>
                     </li>
                     <li>
                        <p>有关创建PDB的信息，请<a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55686" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </li>
                     <li>
                        <p>有关如何在多租户环境中创建审计策略的<a href="../dbseg/configuring-audit-policies.html#DBSEG634" target="_blank"><span class="italic">Oracle数据库安全指南</span></a></p>
                     </li>
                  </ul>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_PDB.html#GUID-92AB3A3C-4F86-4E6B-8F87-078AB2AC07CC" title="多租户容器数据库（CDB）是一个Oracle数据库，包括零个，一个或多个用户创建的可插拔数据库（PDB）。DBMS_PDB包提供了一个接口，用于检查和操作有关可插拔数据库（PDB）的数据。此程序包中的子程序还可以将数据库对象设置为应用程序容器中以下类型的应用程序公共对象之一：数据链接对象，扩展数据链接对象或元数据链接对象。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PDB.html#GUID-DA69BA9B-BAB9-4724-AA64-431D31CE1DF4" title="用户必须具有EXECUTE特权才能运行DBMS_PDB包的过程。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PDB.html#GUID-57089037-1442-4DA9-9564-B9DA8312456B" title="此表列出并描述了DBMS_PDB包子程序。">DBMS_PDB子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS73529"></a><a id="ARPLS73529"></a><div class="props_rev_3"><a id="GUID-92AB3A3C-4F86-4E6B-8F87-078AB2AC07CC" name="GUID-92AB3A3C-4F86-4E6B-8F87-078AB2AC07CC"></a><h3 id="ARPLS-GUID-92AB3A3C-4F86-4E6B-8F87-078AB2AC07CC" class="sect3"><span class="enumeration_section">118.1</span> DBMS_PDB概述</h3>
               <div>
                  <p>多租户容器数据库（CDB）是一个Oracle数据库，包括零个，一个或多个用户创建的可插拔数据库（PDB）。<code class="codeph">DBMS_PDB</code>包提供了一个接口，用于检查和操作有关可插拔数据库（PDB）的数据。此程序包中的子程序还可以将数据库对象设置为应用程序容器中以下类型的应用程序公共对象之一：数据链接对象，扩展数据链接对象或元数据链接对象。
                  </p>
                  <div class="section">
                     <p>数据链接的应用程序公共对象将数据存储在应用程序根目录中，该数据可由应用程序容器中的所有应用程序PDB访问和修改。对于扩展的数据链接对象，每个应用程序PDB可以在共享应用程序根目录中的公共数据的同时创建自己的特定数据。因此，对于扩展的数据链接对象，只有存储在应用程序根目录中的数据对于所有应用程序PDB都是通用的。元数据链接的应用程序公共对象在应用程序根目录中存储特定对象（例如表）的元数据，以便应用程序容器中的容器具有相同的对象结构但具有不同的数据。此程序包还包含一个过程，该过程指定数据库对象不是应用程序公共对象。</p>
                     <p>通常，此包中的子程序用于以下情况：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>安装在PDB中的应用程序将迁移到应用程序容器。应用程序可以迁移到应用程序根目录或应用程序PDB。例如，可以迁移安装在PDB插入Oracle数据库12 <span class="italic">c</span>解除1（12.1）CDB到应用容器在Oracle数据库12 <span class="italic">c</span>解除2（12.2）CDB的应用程序。</p>
                        </li>
                        <li>
                           <p>应用程序使用不允许设置应用程序公共对象的安装程序安装在应用程序根目录中。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-92AB3A3C-4F86-4E6B-8F87-078AB2AC07CC__GUID-A2C48926-58BF-44C5-80EA-C7EF620A7268">
                        <p class="notep1">也可以看看：</p>
                        <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73621"></a><a id="ARPLS73621"></a><div class="props_rev_3"><a id="GUID-DA69BA9B-BAB9-4724-AA64-431D31CE1DF4" name="GUID-DA69BA9B-BAB9-4724-AA64-431D31CE1DF4"></a><h3 id="ARPLS-GUID-DA69BA9B-BAB9-4724-AA64-431D31CE1DF4" class="sect3"><span class="enumeration_section">118.2</span> DBMS_PDB安全模型</h3>
               <div>
                  <p>用户必须具有<code class="codeph">EXECUTE</code>特权才能运行<code class="codeph">DBMS_PDB</code>包的过程。
                  </p>
               </div>
            </div><a id="ARPLS73530"></a><a id="ARPLS73531"></a><a id="ARPLS73531"></a><a id="ARPLS73530"></a><div class="props_rev_3"><a id="GUID-57089037-1442-4DA9-9564-B9DA8312456B" name="GUID-57089037-1442-4DA9-9564-B9DA8312456B"></a><h3 id="ARPLS-GUID-57089037-1442-4DA9-9564-B9DA8312456B" class="sect3"><span class="enumeration_section">118.3</span> DBMS_PDB子程序摘要</h3>
               <div>
                  <p>此表列出并描述了<code class="codeph">DBMS_PDB</code>程序。
                  </p>
                  <div class="tblformal" id="GUID-57089037-1442-4DA9-9564-B9DA8312456B__GUID-D848663D-E9F6-4470-985F-E5990199FC14">
                     <p class="titleintable">表118-1 DBMS_PDB包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_PDB包子程序" width="100%" border="1" summary="This table lists and describes DBMS_PDB package subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d656547e464">子程序</th>
                              <th align="left" valign="bottom" width="70%" id="d656547e467">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e472" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-875817BD-6278-4609-97E4-982F1CF3DFA1" title="此函数使用描述可插拔数据库（PDB）的XML文件来确定是否可以将其插入给定的多租户容器数据库（CDB）。">CHECK_PLUG_COMPATIBILITY功能</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e472 d656547e467 ">
                                 <p>使用描述可插拔数据库（PDB）的XML文件来确定它是否可以插入给定的多租户容器数据库（CDB）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e484" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC" title="此过程生成描述指定可插拔数据库（PDB）的XML文件。然后可以将此文件传递给CHECK_PLUG_COMPATIBILITY函数，以确定XML文件描述的PDB是否可以插入给定的多租户容器数据库（CDB）。">DESCRIBE程序</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e484 d656547e467 ">
                                 <p>生成描述指定可插拔数据库（PDB）的XML文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e496" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" title="在拔出插头之前，此过程将属于可插拔数据库的RMAN备份信息导出到其字典，以便可以使用预插件备份。只需要为非CDB到PDB迁移调用此过程。对于PDB重定位，不需要调用此过程。">EXPORTRMANBACKUP过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e496 d656547e467 ">
                                 <p>仅在将非CDB迁移为PDB时才需要调用。此过程需要在非CDB数据库中执行。对于PDb重定位，它在unplugin期间自动调用。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e507" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A" title="此过程使用属于可插拔数据库的数据文件生成描述可插拔数据库的XML文件。然后，可以使用此XML文件使用CREATE PLUGGABLE DATABASE语句将可插拔数据库插入多租户容器数据库（CDB）。">恢复程序</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e507 d656547e467 ">
                                 <p>使用属于可插拔数据库（PDB）的数据文件生成描述可插拔数据库的XML文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e522" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D" title="此过程指定数据库对象不是应用程序公共对象。在应用程序容器中，应用程序公共对象在多个容器之间共享。">REMOVE_LINK程序</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e522 d656547e467 ">
                                 <p>指定数据库对象不是应用程序公共对象。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e533" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E" title="此过程将数据库对象设置为数据链接的应用程序公共对象。在应用程序容器中，数据链接的应用程序公共对象仅将数据存储在应用程序根目录中，并且数据可以由应用程序容器中的所有应用程序PDB访问。数据链接的应用程序公共对象中的数据只能在应用程序根目录中进行修改。">SET_DATA_LINKED程序</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e533 d656547e467 ">
                                 <p>将数据库对象设置为数据链接的应用程序公共对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e544" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22" title="此过程将数据库对象设置为扩展的数据链接的应用程序公共对象。在应用程序容器中，对于扩展的数据链接对象，每个应用程序PDB可以在共享应用程序根目录中的公共数据的同时创建自己的特定数据。因此，只有存储在应用程序根目录中的数据对于所有应用程序PDB都是通用的。">SET_EXT_DATA_LINKED过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e544 d656547e467 ">
                                 <p>将数据库对象设置为扩展的数据链接的应用程序公共对象。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e555" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-138E3F75-1598-4DF6-98DA-A63457C69D52" title="此过程将数据库对象设置为元数据链接的应用程序公共对象。在应用程序容器中，元数据链接的应用程序公共对象存储特定对象（例如表）的元数据，以便共享应用程序公共对象的容器具有相同的结构但具有不同的数据。">SET_METADATA_LINKED程序</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e555 d656547e467 ">
                                 <p>将数据库对象设置为元数据链接的应用程序公共对象。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e566" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3" title="此过程将配置文件设置为应用程序容器中的应用程序通用配置文件。此过程用于将概要文件从先前版本迁移到当前版本中的应用程序容器。">SET_PROFILE_EXPLICIT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e566 d656547e467 ">
                                 <p>将概要文件设置为应用程序容器中的应用程序通用概要文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e577" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572" title="此过程将角色设置为应用程序容器中的应用程序公共角色。此过程用于将角色从先前版本迁移到当前版本中的应用程序容器。">SET_ROLE_EXPLICIT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e577 d656547e467 ">
                                 <p>将角色设置为应用程序容器中的应用程序公共角色。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d656547e588" headers="d656547e464 ">
                                 <p><a href="DBMS_PDB.html#GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B" title="此过程将本地用户设置为应用程序容器中的应用程序公共用户。">SET_USER_EXPLICIT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d656547e588 d656547e467 ">
                                 <p>此过程将本地用户设置为应用程序容器中的应用程序公共用户。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS73798"></a><a id="ARPLS73799"></a><a id="ARPLS73799"></a><a id="ARPLS73798"></a><div class="props_rev_3"><a id="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1" name="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1"></a><h4 id="ARPLS-GUID-875817BD-6278-4609-97E4-982F1CF3DFA1" class="sect4"><span class="enumeration_section">118.3.1</span> CHECK_PLUG_COMPATIBILITY函数</h4>
                  <div>
                     <p>此函数使用描述可插拔数据库（PDB）的XML文件来确定是否可以将其插入给定的多租户容器数据库（CDB）。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1__GUID-EA7567CF-D92F-4505-8F5C-3C07F1F72B12">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.CHECK_PLUG_COMPATIBILITY（pdb_descr_file IN VARCHAR2，pdb_name IN VARCHAR2 DEFAULT NULL）RETURN BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1__GUID-D6507DBD-A332-44A4-8703-3AA560AEBF33">参数</p>
                        <div class="tblformal" id="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1__GUID-9AD04570-A851-4680-99A7-0E2E99A05100">
                           <p class="titleintable">表118-2 <span class="italic"><span class="bold">CHECK_PLUG_COMPATIBILITY过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CHECK_PLUG_COMPATIBILITY过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.CHECK_PLUG_COMPATIBILITY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e710">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e713">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e718" headers="d656547e710 ">
                                       <p><code class="codeph">pdb_descr_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e718 d656547e713 ">
                                       <p>将包含PDB描述的XML文件的路径</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e726" headers="d656547e710 ">
                                       <p><code class="codeph">pdb_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e726 d656547e713 ">
                                       <p>插入给定CDB时将由<code class="codeph">pdb_descr_file</code>指定给PDB的名称。如果未指定，则将从<code class="codeph">pdb_descr_file</code>提取名称。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1__GUID-A27B7B84-8B43-40A1-986C-474AD0406751">返回值</p>
                        <p>如果<code class="codeph">pdb_descr_file</code>描述的PDB与给定的CDB兼容， <code class="codeph">pdb_descr_file</code> <code class="codeph">TRUE</code> ，否则为<code class="codeph">FALSE</code> 。如果此函数返回<code class="codeph">FALSE</code> ，则查询<code class="codeph">PDB_PLUG_IN_VIOLATIONS</code>数据字典视图以查找有关找到的错误的信息。
                        </p>
                        <div class="infoboxnotealso" id="GUID-875817BD-6278-4609-97E4-982F1CF3DFA1__GUID-6D2256AD-250B-4537-BB34-C0A7C01013EF">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">PDB_PLUG_IN_VIOLATIONS</code>视图的信息，请<code class="codeph">PDB_PLUG_IN_VIOLATIONS</code> <a href="../refrn/PDB_PLUG_IN_VIOLATIONS.html#REFRN29161" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73532"></a><a id="ARPLS73533"></a><a id="ARPLS73533"></a><a id="ARPLS73532"></a><div class="props_rev_3"><a id="GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC" name="GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC"></a><h4 id="ARPLS-GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC" class="sect4"><span class="enumeration_section">118.3.2</span>描述程序</h4>
                  <div>
                     <p>此过程生成描述指定可插拔数据库（PDB）的XML文件。然后可以将此文件传递给CHECK_PLUG_COMPATIBILITY函数，以确定XML文件描述的PDB是否可以插入给定的多租户容器数据库（CDB）。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC__GUID-416A26E6-C6A6-47D2-898E-6370AB0EEECC">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.DESCRIBE（pdb_descr_file IN VARCHAR2，pdb_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC__GUID-EADA80B1-51C9-4FB0-9CD5-36E16417AE68">参数</p>
                        <div class="tblformal" id="GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC__GUID-53125B8E-487F-4D96-9158-E4DB2A73604A">
                           <p class="titleintable">表118-3 <span class="italic"><span class="bold">DESCRIBE过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DESCRIBE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.DESCRIBE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e881">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e884">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e889" headers="d656547e881 ">
                                       <p><code class="codeph">pdb_descr_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e889 d656547e884 ">
                                       <p>将包含PDB描述的XML文件的路径</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e897" headers="d656547e881 ">
                                       <p><code class="codeph">pdb_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e897 d656547e884 ">
                                       <p>要描述的PDB的名称。通过包含<code class="codeph">@dblink</code>指定远程数据库。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24525F0C-8D64-465B-B5E6-A221DA753CCC__GUID-A1EBD689-B1C7-4C06-A9C6-163047C73E9A">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果省略<code class="codeph">pdb_name</code> ，则将描述会话所连接的PDB。
                              </p>
                           </li>
                           <li>
                              <p>如果省略<code class="codeph">pdb_name</code> ，并且会话连接到Root，则将返回错误。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="DBMS_PDB.html#GUID-875817BD-6278-4609-97E4-982F1CF3DFA1" title="此函数使用描述可插拔数据库（PDB）的XML文件来确定是否可以将其插入给定的多租户容器数据库（CDB）。">CHECK_PLUG_COMPATIBILITY功能</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" name="GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F"></a><h4 id="ARPLS-GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" class="sect4"><span class="enumeration_section">118.3.3</span> EXPORTRMANBACKUP过程</h4>
                  <div>
                     <p>在拔出插头之前，此过程将属于可插拔数据库的RMAN备份信息导出到其字典，以便可以使用预插件备份。只需要为非CDB到PDB迁移调用此过程。对于PDB重定位，不需要调用此过程。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F__GUID-8E129DB1-ACBE-4A1D-AF53-F938AFCE794A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.EXPORTRMANBACKUP（pdb_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F__GUID-F6C5753C-4B90-4673-8193-DC768132DDA6">参数</p>
                        <div class="tblformal" id="GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F__GUID-BE5FE22B-B7B3-471E-B638-94014730D2CE">
                           <p class="titleintable">表118-4 EXPORTRMANBACKUP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPORTRMANBACKUP过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.EXPORTRMANBACKUP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d656547e1037">参数</th>
                                    <th align="left" valign="bottom" id="d656547e1040">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d656547e1045" headers="d656547e1037 ">
                                       <p><code class="codeph">pdb_name</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d656547e1045 d656547e1040 ">
                                       <p>需要导出备份信息的可插拔数据库的名称。</p>
                                       <p>如果连接到可插拔数据库或非cdb，则省略此参数。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F__GUID-07AD0EE8-C059-42A5-BEF7-B325FB085F83">使用说明</p>
                        <div class="p">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>必须以<code class="codeph">read/write</code>模式打开PDB。
                                 </p>
                              </li>
                              <li>
                                 <p>如果数据库是非CDB，则必须省略<code class="codeph">pdb_name</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果省略<code class="codeph">pdb_name</code> ，则导出会话所连接的可插拔数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>如果省略<code class="codeph">pdb_name</code>并且会话连接到<code class="codeph">root</code> ，则会返回错误。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74910"></a><a id="ARPLS74911"></a><a id="ARPLS74911"></a><a id="ARPLS74910"></a><div class="props_rev_3"><a id="GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A" name="GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A"></a><h4 id="ARPLS-GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A" class="sect4"><span class="enumeration_section">118.3.4恢复</span>程序</h4>
                  <div>
                     <p>此过程使用属于可插拔数据库的数据文件生成描述可插拔数据库的XML文件。然后，可以使用此XML文件使用<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句将可插拔数据库插入多租户容器数据库（CDB）。
                     </p>
                     <div class="section">
                        <p>当描述可插拔数据库的XML文件损坏或丢失时，请使用此过程。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.RECOVER（pdb_descr_file IN VARCHAR2，pdb_name IN VARCHAR2，文件名IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-D0601C03-88AB-4D03-8F8F-2829FB0CD12A__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-5 <span class="italic"><span class="bold">RECOVER过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECOVER过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.RECOVER subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e1204">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e1207">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1212" headers="d656547e1204 ">
                                       <p><code class="codeph">pdb_descr_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1212 d656547e1207 ">
                                       <p>包含可插拔数据库描述的XML文件的路径</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1220" headers="d656547e1204 ">
                                       <p><code class="codeph">pdb_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1220 d656547e1207 ">
                                       <p>可插拔数据库的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1228" headers="d656547e1204 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1228 d656547e1207 ">
                                       <p>以逗号分隔的数据文件路径和/或目录列表，其中包含可插拔数据库的数据文件</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D" name="GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D"></a><h4 id="ARPLS-GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D" class="sect4"><span class="enumeration_section">118.3.5</span> REMOVE_LINK程序</h4>
                  <div>
                     <p>此过程指定数据库对象不是应用程序公共对象。在应用程序容器中，应用程序公共对象在多个容器之间共享。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.REMOVE_LINK（schema_name IN VARCHAR2，object_name IN VARCHAR2，namespace IN NUMBER，edition_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-6 <span class="italic"><span class="bold">REMOVE_LINK过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_LINK程序参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.REMOVE_LINK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e1344">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e1347">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1352" headers="d656547e1344 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1352 d656547e1347 ">
                                       <p>拥有数据库对象的架构的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1360" headers="d656547e1344 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1360 d656547e1347 ">
                                       <p>数据库对象的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1368" headers="d656547e1344 ">
                                       <p><code class="codeph">命名空间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1368 d656547e1347 ">
                                       <p>数据库对象的命名空间。</p>
                                       <p><code class="codeph">DBA_OBJECTS</code>视图的<code class="codeph">NAMESPACE</code>列显示对象的命名空间。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1384" headers="d656547e1344 ">
                                       <p><code class="codeph">EDITION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1384 d656547e1347 ">
                                       <p>数据库对象的版本名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-ABDC1A42-B48D-4DFA-A275-072EA683F81D__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E" name="GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E"></a><h4 id="ARPLS-GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E" class="sect4"><span class="enumeration_section">118.3.6</span> SET_DATA_LINKED过程</h4>
                  <div>
                     <p>此过程将数据库对象设置为数据链接的应用程序公共对象。在应用程序容器中，数据链接的应用程序公共对象仅将数据存储在应用程序根目录中，并且数据可以由应用程序容器中的所有应用程序PDB访问。数据链接的应用程序公共对象中的数据只能在应用程序根目录中进行修改。</p>
                     <div class="section">
                        <p>将PDB中安装的应用程序迁移到应用程序容器时，可以使用此过程设置数据链接的应用程序公共对象。应用程序可以迁移到应用程序根目录或应用程序PDB。例如，可以迁移安装在PDB插入Oracle数据库12 <span class="italic">c</span>解除1（12.1）CDB到应用容器在Oracle数据库12 <span class="italic">c</span>解除2（12.2）CDB的应用程序。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.SET_DATA_LINKED（schema_name IN VARCHAR2，object_name IN VARCHAR2，namespace IN NUMBER，edition_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-7 <span class="italic"><span class="bold">SET_DATA_LINKED过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_DATA_LINKED过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.SET_DATA_LINKED subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e1515">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e1518">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1523" headers="d656547e1515 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1523 d656547e1518 ">
                                       <p>拥有数据库对象的架构的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1531" headers="d656547e1515 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1531 d656547e1518 ">
                                       <p>数据库对象的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1539" headers="d656547e1515 ">
                                       <p><code class="codeph">命名空间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1539 d656547e1518 ">
                                       <p>数据库对象的命名空间。</p>
                                       <p><code class="codeph">DBA_OBJECTS</code>视图的<code class="codeph">NAMESPACE</code>列显示对象的命名空间。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1555" headers="d656547e1515 ">
                                       <p><code class="codeph">EDITION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1555 d656547e1518 ">
                                       <p>数据库对象的版本名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-3CBF9467-9430-44F1-8D22-91CC796B3A3E__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22" name="GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22"></a><h4 id="ARPLS-GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22" class="sect4"><span class="enumeration_section">118.3.7</span> SET_EXT_DATA_LINKED过程</h4>
                  <div>
                     <p>此过程将数据库对象设置为扩展的数据链接的应用程序公共对象。在应用程序容器中，对于扩展的数据链接对象，每个应用程序PDB可以在共享应用程序根目录中的公共数据的同时创建自己的特定数据。因此，只有存储在应用程序根目录中的数据对于所有应用程序PDB都是通用的。</p>
                     <div class="section">
                        <p>将PDB中安装的应用程序迁移到应用程序容器时，可以使用此过程设置扩展的数据链接的应用程序公共对象。应用程序可以迁移到应用程序根目录或应用程序PDB。例如，可以迁移安装在PDB插入Oracle数据库12 <span class="italic">c</span>解除1（12.1）CDB到应用容器在Oracle数据库12 <span class="italic">c</span>解除2（12.2）CDB的应用程序。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.SET_EXT_DATA_LINKED（schema_name IN VARCHAR2，object_name IN VARCHAR2，namespace IN NUMBER，edition_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-8 <span class="italic"><span class="bold">SET_EXT_DATA_LINKED过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_EXT_DATA_LINKED过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.SET_EXT_DATA_LINKED subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e1686">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e1689">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1694" headers="d656547e1686 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1694 d656547e1689 ">
                                       <p>拥有数据库对象的架构的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1702" headers="d656547e1686 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1702 d656547e1689 ">
                                       <p>数据库对象的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1710" headers="d656547e1686 ">
                                       <p><code class="codeph">命名空间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1710 d656547e1689 ">
                                       <p>数据库对象的命名空间。</p>
                                       <p><code class="codeph">DBA_OBJECTS</code>视图的<code class="codeph">NAMESPACE</code>列显示对象的命名空间。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1726" headers="d656547e1686 ">
                                       <p><code class="codeph">EDITION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1726 d656547e1689 ">
                                       <p>数据库对象的版本名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-DD57D8FE-F82C-4263-90F2-7E6CA948BE22__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-138E3F75-1598-4DF6-98DA-A63457C69D52" name="GUID-138E3F75-1598-4DF6-98DA-A63457C69D52"></a><h4 id="ARPLS-GUID-138E3F75-1598-4DF6-98DA-A63457C69D52" class="sect4"><span class="enumeration_section">118.3.8</span> SET_METADATA_LINKED过程</h4>
                  <div>
                     <p>此过程将数据库对象设置为元数据链接的应用程序公共对象。在应用程序容器中，元数据链接的应用程序公共对象存储特定对象（例如表）的元数据，以便共享应用程序公共对象的容器具有相同的结构但具有不同的数据。</p>
                     <div class="section">
                        <p>将PDB中安装的应用程序迁移到应用程序容器时，可以使用此过程设置元数据链接的应用程序公共对象。应用程序可以迁移到应用程序根目录或应用程序PDB。例如，可以迁移安装在PDB插入Oracle数据库12 <span class="italic">c</span>解除1（12.1）CDB到应用容器在Oracle数据库12 <span class="italic">c</span>解除2（12.2）CDB的应用程序。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-138E3F75-1598-4DF6-98DA-A63457C69D52__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.SET_METADATA_LINKED（schema_name IN VARCHAR2，object_name IN VARCHAR2，namespace IN NUMBER，edition_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-138E3F75-1598-4DF6-98DA-A63457C69D52__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-138E3F75-1598-4DF6-98DA-A63457C69D52__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-9 <span class="italic"><span class="bold">SET_METADATA_LINKED过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_METADATA_LINKED过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.SET_METADATA_LINKED subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e1858">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e1861">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1866" headers="d656547e1858 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1866 d656547e1861 ">
                                       <p>拥有数据库对象的架构的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1874" headers="d656547e1858 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1874 d656547e1861 ">
                                       <p>数据库对象的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1882" headers="d656547e1858 ">
                                       <p><code class="codeph">命名空间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1882 d656547e1861 ">
                                       <p>数据库对象的命名空间。</p>
                                       <p><code class="codeph">DBA_OBJECTS</code>视图的<code class="codeph">NAMESPACE</code>列显示对象的命名空间。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e1898" headers="d656547e1858 ">
                                       <p><code class="codeph">EDITION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e1898 d656547e1861 ">
                                       <p>数据库对象的版本名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-138E3F75-1598-4DF6-98DA-A63457C69D52__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3" name="GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3"></a><h4 id="ARPLS-GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3" class="sect4"><span class="enumeration_section">118.3.9</span> SET_PROFILE_EXPLICIT过程</h4>
                  <div>
                     <p>此过程将配置文件设置为应用程序容器中的应用程序通用配置文件。此过程用于将概要文件从先前版本迁移到当前版本中的应用程序容器。</p>
                     <div class="section">
                        <p>必须在应用程序根目录中的应用程序安装，修补，升级或卸载操作中调用此过程。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.SET_PROFILE_EXPLICIT（profile_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-10 <span class="italic"><span class="bold">SET_PROFILE_EXPLICIT过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_PROFILE_EXPLICIT过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.SET_PROFILE_EXPLICIT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e2023">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e2026">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e2031" headers="d656547e2023 ">
                                       <p><code class="codeph">PROFILE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e2031 d656547e2026 ">
                                       <p>配置文件的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-076A161D-C5B9-4C03-8E2A-9AB3E1666AB3__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572" name="GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572"></a><h4 id="ARPLS-GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572" class="sect4"><span class="enumeration_section">118.3.10</span> SET_ROLE_EXPLICIT过程</h4>
                  <div>
                     <p>此过程将角色设置为应用程序容器中的应用程序公共角色。此过程用于将角色从先前版本迁移到当前版本中的应用程序容器。</p>
                     <div class="section">
                        <p>必须在应用程序根目录中的应用程序安装，修补，升级或卸载操作中调用此过程。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.SET_ROLE_EXPLICIT（role_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-11 <span class="italic"><span class="bold">SET_ROLE_EXPLICIT过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_ROLE_EXPLICIT过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.SET_ROLE_EXPLICIT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e2156">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e2159">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e2164" headers="d656547e2156 ">
                                       <p><code class="codeph">ROLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e2164 d656547e2159 ">
                                       <p>角色的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-EC91A7DF-8BB9-4DD4-B93B-154E659B8572__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B" name="GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B"></a><h4 id="ARPLS-GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B" class="sect4"><span class="enumeration_section">118.3.11</span> SET_USER_EXPLICIT过程</h4>
                  <div>
                     <p>此过程将本地用户设置为应用程序容器中的应用程序公共用户。</p>
                     <div class="section">
                        <p>必须在应用程序根目录中的应用程序安装，修补，升级或卸载操作中调用此过程。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B__GUID-38B61957-64ED-44A5-BC8C-FEA5D0A42AF6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_PDB.SET_USER_EXPLICIT（user_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B__GUID-700F66A0-2AF6-4F74-9754-162005FF92C6">参数</p>
                        <div class="tblformal" id="GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B__GUID-C5A21BB7-2C9D-4311-B28A-91088A0A847B">
                           <p class="titleintable">表118-12 <span class="italic"><span class="bold">SET_USER_EXPLICIT过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_USER_EXPLICIT过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_PDB.SET_USER_EXPLICIT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d656547e2290">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d656547e2293">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d656547e2298" headers="d656547e2290 ">
                                       <p><code class="codeph">用户名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d656547e2298 d656547e2293 ">
                                       <p>用户名。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-AE9B1B92-542C-449E-B331-B9BF68B36D3B__GUID-7D38BE54-A10D-44B1-B5CF-224BD317FD32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关将应用程序迁移到应用程序容器的信息，请参见<a href="../multi/administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03512.ACFSK-00004.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>ACFSK-00004至ACFSK-00099</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Error Messages"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Error Messages"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-error-messages.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T07:32:34-07:00"></meta>
      <meta name="dcterms.title" content="Database Error Messages"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95938-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ACFS-00501.html" title="Previous" type="text/html"></link>
      <link rel="next" href="ADVM-00501.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ERRMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ACFS-00501.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="ADVM-00501.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库错误消息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ACFSK-00004至ACFSK-00099</li>
            </ol>
            <a id="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4" name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4"></a>
            
            <h2 id="ERRMG-GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4" class="sect2"><span class="enumeration_chapter">3</span> ACFSK-00004至ACFSK-00099</h2>
         </header>
         <div class="ind">
            <div>
               <dl>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-54F0D462-73C8-4ACA-9375-6851913966DC"><!-- --></a> ACFSK-00004：无法创建安装在％2的卷的安全文件（错误状态％3），因此该节点无法使用该卷。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这不是一个简单的磁盘已满状态。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装，如果失败，请运行acfschkdsk来修复文件系统。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-C851F89E-A9FE-4E9B-B83E-02E264E4482C"><!-- --></a> ACFSK-00005：无法创建卷％2的安全文件（错误状态％3），因此该节点无法使用该卷。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这不是一个简单的磁盘已满状态。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装，如果失败，请运行acfschkdsk来修复文件系统。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-415E67EA-714B-4161-B5D1-DD40FB727D51"><!-- --></a> ACFSK-00006：无法创建设备次要编号为％2的卷的安全文件（错误状态为％3），因此该节点无法使用该卷。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这不是一个简单的磁盘已满状态。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装，如果失败，请运行acfschkdsk来修复文件系统。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-B731DC90-550C-4F5B-835E-C3A0A2086DA1"><!-- --></a> ACFSK-00007：由于文件系统已满，无法创建安装在％2的卷的安全文件。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>因为文件系统已满。在成功创建安全文件之前，此节点无法使用该卷。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用“acfsutil size”命令扩展此ACFS卷的可用存储空间，或减少正在使用的空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-4FF2D0D0-0DF9-4F8B-A098-FCB21B0D4832"><!-- --></a> ACFSK-00008：无法创建卷％2的安全文件，因为文件系统已满。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>因为文件系统已满。在成功创建安全文件之前，此节点无法使用该卷。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用“acfsutil size”命令扩展此ACFS卷的可用存储空间，或减少正在使用的空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-FA5BA02A-B902-47A5-AD67-01156324CAB8"><!-- --></a> ACFSK-00009：由于文件系统已满，无法创建设备次要编号为％2的卷的安全文件。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>因为文件系统已满。在成功创建安全文件之前，此节点无法使用该卷。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用“acfsutil size”命令扩展此ACFS卷的可用存储空间，或减少正在使用的空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-698B616F-8787-48EF-AE71-59F1BF5F7300"><!-- --></a> ACFSK-00010：由于内存不足，无法创建安装在％2的卷的安全文件。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>可能是由于内存不足，因此文件系统无法在此节点上使用。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装，如果失败，请运行acfschkdsk来修复文件系统。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-D994C9E4-BAC8-4949-951A-0E4CDC67F518"><!-- --></a> ACFSK-00011：由于内存不足，无法创建卷％2的安全文件。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>可能是由于内存不足，因此文件系统无法在此节点上使用。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装，如果失败，请运行acfschkdsk来修复文件系统。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-ED811871-49C8-4343-B421-8D6A50BB64BA"><!-- --></a> ACFSK-00012：由于内存不足，无法创建设备次要编号为％2的卷的安全文件。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>可能是由于内存不足，因此文件系统无法在此节点上使用。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装，如果失败，请运行acfschkdsk来修复文件系统。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-4510F09C-1257-47F4-9354-02D013A3BB53"><!-- --></a> ACFSK-00013：缺少在％2文件％3上装入的卷的安全信息。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>授予管理员完全访问权限的ACL已与该文件关联。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>根据需要修改ACL。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-C2FCD7A2-14B6-41E4-A305-2F8EF87D1864"><!-- --></a> ACFSK-00014：缺少卷％2文件％3的安全信息。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>授予管理员完全访问权限的ACL已与该文件关联。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>根据需要修改ACL。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-CB676B69-1FB7-4524-880E-510813C7566E"><!-- --></a> ACFSK-00015：缺少设备次要编号％2文件％3的卷的安全信息。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>授予管理员完全访问权限的ACL已与该文件关联。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>根据需要修改ACL。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-3FAD9ADE-C1DD-4FE4-B745-69F43772155E"><!-- --></a> ACFSK-00019：卷％2现在脱机。内部ACFS位置％3。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在处理过程中的关键时刻出现访问有效文件系统元数据的问题。所有读取或写入文件的尝试都将在此节点上失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在此节点上卸载并重新装入文件系统。有关OFFLINE文件系统的详细信息，请参阅“ACFS管理指南”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-A496040B-1CA2-4D8A-A9AC-06A7A479D027"><!-- --></a> ACFSK-00020：请求卷％2的RECOVERY。内部ACFS位置％3。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS已启动卷的恢复。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：不</span>适用</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-E09D5BCF-7D89-412A-A7AE-8652E5C4B965"><!-- --></a> ACFSK-00021：FSCK-NEEDED设置为卷％2。内部ACFS位置％3。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>上述卷中的文件系统元数据检测到问题。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>正常操作可以继续，但建议尽快在文件系统上以修复程序模式运行fsck / acfschkdsk。有关FSCK-NEEDED的更多信息，请参阅“ACFS管理指南”。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-66BC8BC8-0A2E-42D1-BE02-2B1EDE99C4A2"><!-- --></a> ACFSK-00022：％2处的卷装载成功，但之前存在元数据错误。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>元数据错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽快运行fsck / acfschkdsk。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-74BE437C-80C9-4175-80D3-FAB67A3593BE"><!-- --></a> ACFSK-00023：已成功安装卷％2，但之前存在元数据错误。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>元数据错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽快运行fsck / acfschkdsk。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-7EBD6C9F-5631-46FF-ABDE-B6C07C5FF9F7"><!-- --></a> ACFSK-00024：装入次要编号％2的卷装载成功，但之前存在元数据错误。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>元数据错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽快运行fsck / acfschkdsk。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-A4656EF4-E66E-4D52-8EB5-782DA6FC93D0"><!-- --></a> ACFSK-00025：在％2上安装的卷上，文件％3是内存映射，用于在此节点上写入，另一个节点即将对其进行修改。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> mmaped文件不支持并发共享。这可能导致文件内容变得不一致。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>取消映射文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-A29B6E8A-0838-4386-9097-C295E73848DB"><!-- --></a> ACFSK-00026：在％2文件％3上安装的卷是在此节点上写入的内存映射，另一个节点即将修改它。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> mmaped文件不支持并发共享。这可能导致文件内容变得不一致。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>取消映射文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-3788DFCA-576F-4F3F-946E-237EBF407331"><!-- --></a> ACFSK-00027：在具有设备次要编号％2文件的卷上，％3是在此节点上进行写入的内存映射，另一个节点即将对其进行修改。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> mmaped文件不支持并发共享。这可能导致文件内容变得不一致。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>取消映射文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-0B09CE60-826B-42EF-8E7E-31FED05AB7E8"><!-- --></a> ACFSK-00028：打开文件的尝试达到了打开的ACFS文件的系统限制。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试打开另一个文件时，打开的文件数已达到系统限制。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>可以通过使用acfsutil命令更改AcfsMaxOpenFiles可调节来增加此限制。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-C8F05692-72DB-4418-BCD7-7D9624E29E15"><!-- --></a> ACFSK-00029：卷％2现已脱机</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>请参阅前面的消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>见前面的消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-48352956-0063-4C08-AFB2-B3734FC84E5E"><!-- --></a> ACFSK-00030：％2实例失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>实例有意停止或失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果这不是故意的，请参阅实例跟踪消息。重启实例。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-8617EFD2-4AAD-4F60-B169-809B0D9E12DE"><!-- --></a> ACFSK-00032：状态为％3的设备次要编号％2的安装失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>挂载请求失败，并显示状态。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尝试再次安装。如果再次失败，请运行文件系统检查程序并尝试再次安装。如果失败，请通知Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-3F816247-1561-4D45-9BE5-C5415ACA53C7"><!-- --></a> ACFSK-00033：与元数据错误有关的信息已保存在文件％2中。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>检测到元数据错误，并保存相关数据以供将来检查。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>显示文件以了解遇到问题的卷，然后在可行的情况下运行acfschkdsk。如果向Oracle报告此问题，请包括所提及文件的内容。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-829A52AB-24FB-433B-9EC6-F5BF885FF3E6"><!-- --></a> ACFSK-00034：在％2中安装的卷中，文件标识符为％2的内存映射文件的快照不再有效。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法在卷中获得足够的存储空间，以保持此文件的快照版本的有效性。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>要避免此类型的进一步错误，请展开此ACFS卷的可用存储空间或减少正在使用的空间。运行命令“acfsutil info id％3”以获取文件的路径名。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-E0B9BE55-2CB8-4B7C-992C-693046CAF100"><!-- --></a> ACFSK-00035：在卷％2中，文件标识符为％3的内存映射文件的快照不再有效。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法在卷中获得足够的存储空间，以保持此文件的快照版本的有效性。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>要避免此类型的进一步错误，请展开此ACFS卷的可用存储空间或减少正在使用的空间。运行命令“acfsutil info id％3”以获取文件的路径名。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-92EB3939-9930-479E-A6C0-436F247FD51B"><!-- --></a> ACFSK-00036：在设备次要编号为％2的卷中，具有文件标识符％3的内存映射文件的快照不再有效。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法在卷中获得足够的存储空间，以保持此文件的快照版本的有效性。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>要避免此类型的进一步错误，请展开此ACFS卷的可用存储空间或减少正在使用的空间。运行命令“acfsutil info id％3”以获取文件的路径名。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-3ADDBCA2-ACFD-422E-BEE3-1707E5B2A83A"><!-- --></a> ACFSK-00038：模块无法加载并以状态％2启动。建立信息：％3％4％5</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>操作系统无法加载ACFS驱动程序。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果基于状态的纠正措施不明确，请联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-6A7ED566-3807-43A2-A7B7-40F8CE834181"><!-- --></a> ACFSK-00040：状态为％3的设备次要编号％2的安装失败。在超级块中发现错误。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法识别指示设备上的有效ACFS超级块。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果指定的设备上应该有一个有效的ACFS文件系统，请运行acfschkdsk以尝试修复超级块。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-5AB96F5E-E42D-4C10-A68C-793805888CD1"><!-- --></a> ACFSK-00041：状态为％3的设备次要编号％2的安装失败。未建立群集成员资格。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>此节点不是群集的成员。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>确保ASM正常运行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-926067F1-42E9-427C-8EA9-CD7CBA4B9FD2"><!-- --></a> ACFSK-00042：状态为％3的设备次要编号％2的安装失败。内核资源不足，无法完成安装。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>由于缺少操作系统资源，装入请求失败。这很可能是一次短暂的失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尝试再次安装。如果再次失败，请通知Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-C07CA3E5-E48E-4C00-BE90-F4F295C47C2C"><!-- --></a> ACFSK-00044：在％2上安装的卷上遇到元数据验证错误。读取重试成功，文件标识符％3启动磁盘偏移％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，但再次读取提供了有效数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。存储堆栈中的层可能出现故障。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-AB26FC4F-F352-42B8-AC54-753DB0554CA8"><!-- --></a> ACFSK-00045：卷％2上遇到元数据验证错误。读取重试成功，文件标识符％3启动磁盘偏移％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，但再次读取提供了有效数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。存储堆栈中的层可能出现故障。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-ADC453BD-2409-4AC1-A83A-E04BC46139F4"><!-- --></a> ACFSK-00046：卷上遇到元数据验证错误，设备次要编号为％2。读取重试成功，文件标识符％3启动磁盘偏移％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，但再次读取提供了有效数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。存储堆栈中的层可能出现故障。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-65C749C6-850B-4D2C-9F3F-4BBDB8D8F9B2"><!-- --></a> ACFSK-00047：在％2上安装的卷上遇到元数据验证错误。文件标识符％3启动磁盘偏移％4时读取重试失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，并且再次读取未提供有效数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽快运行文件系统检查程序。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-F03607C0-5139-4904-ACC1-EF467913D57B"><!-- --></a> ACFSK-00048：卷％2上遇到元数据验证错误。文件标识符％3启动磁盘偏移％4时读取重试失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，并且再次读取未提供有效数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽快运行文件系统检查程序。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-B57C4407-CFC5-4A74-8D44-F216A53FA2FE"><!-- --></a> ACFSK-00049：在设备次要编号为％2的卷上遇到元数据验证错误。文件标识符％3启动磁盘偏移％4时读取重试失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，并且再次读取未提供有效数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽快运行文件系统检查程序。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-0B68B1F2-1D57-49CE-8EC4-8A48C4809602"><!-- --></a> ACFSK-00052：卷％2（主要：％3，次要：％4）安装失败。音量空间不足。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>由于卷中可用空间不足，安装失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用“acfsutil size”命令扩展此ACFS卷的可用存储空间，或减少正在使用的空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-BCCE7542-0B14-4F23-95C6-B5272C798550"><!-- --></a> ACFSK-00053：卷％2（主要：％3，次要：％4）安装失败。卷版本与ACFS驱动程序版本不匹配。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>安装失败，因为内核中的ACFS版本与磁盘上存储的卷版本不兼容。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果使用较新的驱动程序创建此文件系统，则ADVM兼容性增加，并且使用了新功能，则无法使用较旧的驱动程序安装此文件系统。否则，请确保安装了正确的驱动程序和工具。运行fsck / acfschkdsk可能会提供更多线索。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-00D47241-D5C4-4BB6-ADA6-015CE2D66888"><!-- --></a> ACFSK-00054：卷％2（主要：％3，次要：％4）安装失败，内部状态代码（％5）。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>安装失败，因为ACFS检测到内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>验证正在运行的ACFS版本是否为corect。如果是，请通知Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-88B190F1-9B14-44B5-A00C-998FA8544AD7"><!-- --></a> ACFSK-00055：卷％2（主要：％3，次要：％4）安装失败。未建立群集成员资格。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>安装失败，因为此节点不在群集中。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保正确配置ASM。等到节点加入群集后再试一次。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-DDFBE79A-EB53-4E00-8FD6-43D48953ACB5"><!-- --></a> ACFSK-00056：卷％2（主要：％3，次要：％4）安装失败。内核资源不足，无法完成安装。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>由于资源问题，安装失败，可能是临时的，可能是内核内存。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>再次尝试安装。如果再次失败，请通知Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-B0C539DC-2704-4E87-8346-7E6DECEDA567"><!-- --></a> ACFSK-00057：卷％2（主要：％3，次要：％4）安装失败。超级块中的错误。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在超级块中检测到问题。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>尽可能运行fsck / acfschkdsk并尝试再次安装。如果再次失败，请通知Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-7C568EB6-E273-423D-9E7A-2773C5FD5D2B"><!-- --></a> ACFSK-00061：ACFS断言在％2行％3处失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS断言失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>请参阅Oracle OKS的下一条消息，其中可能包含包含更多信息的文件的位置。如果向Oracle报告问题，请包含此文件的内容</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-589A5134-E6DC-4D90-ABC6-BDFCF819D20A"><!-- --></a> ACFSK-00062：复制日志记录无效时遇到I / O错误。正在为文件系统％2终止复制。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这使主站点和备用站点不同步，因此文件系统％2的复制正在终止。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：不</span>适用</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-E453AFA3-B58A-459A-97A7-272335411AAA"><!-- --></a> ACFSK-00063：Acfs内核扩展配置失败。诊断代码：％2％3 /％4％5 /％6。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在Acfs配置和/或初始化期间出现错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通知Oracle支持服务并提供显示的消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-22E2CB64-9CAD-488A-9741-96E779CB9104"><!-- --></a> ACFSK-00064：已停止记录到文件％2。如果需要，将日志存档％3％4备份到新位置，然后删除日志存档以重新开始日志记录。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>日志存档仍然存在时达到日志文件大小限制。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，将日志存档备份到新位置，然后删除日志存档。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-0E3667F4-5CE6-4FCD-A097-F6032BFD5975"><!-- --></a> ACFSK-00065：日志文件％2已存档在位置％3％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>自文件达到指定的大小限制以来，日志文件已存档。同时，将继续记录到原始文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，将日志存档备份到新位置，然后删除日志存档。在日志文件再次填充之前未能执行此操作将导致日志数据丢失。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-B42F6C42-9324-484F-A9FD-A6EA55C1BBE7"><!-- --></a> ACFSK-00066：日志文件％2的存档位于％3％4位置。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>活动日志文件达到其指定的大小限制，并且尚未删除日志存档。在活动日志文件达到其指定的大小限制并且仍未删除日志存档后，日志记录将停止。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，将日志存档备份到新位置，然后删除日志存档。在日志文件再次填充之前未能执行此操作将导致日志数据丢失。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-7F2141B7-002F-41E1-AACE-5DABA439DAC3"><!-- --></a> ACFSK-00067：已停止记录到文件％2。如果需要，将日志存档％3％4备份到新位置，然后删除日志存档以重新开始日志记录。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>日志存档仍然存在时达到日志文件大小限制。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，请联系ACFS安全管理员以将日志存档备份到新位置，然后删除日志存档。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-5DC36D9B-580A-4022-AA37-634E75B0D250"><!-- --></a> ACFSK-00068：日志文件％2已存档在位置％3％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>自文件达到指定的大小限制以来，日志文件已存档。同时，将继续记录到原始文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，请联系ACFS安全管理员以将日志存档备份到新位置，然后删除日志存档。在日志文件再次填充之前未能执行此操作将导致日志数据丢失。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-97F8A8F5-EB54-41D1-BF9E-004BE259CFF7"><!-- --></a> ACFSK-00069：日志文件％2的存档位于％3％4位置。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>活动日志文件达到其指定的大小限制，并且尚未删除日志存档。在活动日志文件达到其指定的大小限制并且仍未删除日志存档后，日志记录将停止。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，请联系ACFS安全管理员以将日志存档备份到新位置，然后删除日志存档。在日志文件再次填充之前未能执行此操作将导致日志数据丢失。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-FF421CF6-7828-46E2-9695-C121DF1391ED"><!-- --></a> ACFSK-00070：％2看到异常％3。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>检测到意外的异常。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通知Oracle支持服务并提供显示的消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-10BD5FA9-598B-4F7E-A849-5406C32EB7B3"><!-- --></a> ACFSK-00071：卷加密密钥不适用于安装在％2的文件系统，加密文件将不可用。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>文件系统无法使用卷加密密钥（VEK）。可能的原因是：1）缺少ACFS加密密钥库。这在安装期间由消息ACFS-10573指示。2）ACFS加密密钥库已损坏。3）ACFS加密配置为使用受密码保护的密钥库，并在安装文件系统时提供了错误的密钥库密码。4）ACFS加密配置为使用受密码保护的密钥库，文件系统通过ACFS Mount Registry安装。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>立即卸载并重新装入文件系统，而不使用ACFS装入注册表，如果需要，提供正确的密码。如果问题仍然存在，请与Oracle支持服务联系。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-4889A079-EED0-4B5B-AB5A-0504BAA57505"><!-- --></a> ACFSK-00072：调用fcntl（2）F_SETFL已清除O_DIRECT，而I / O处于活动状态，文件标识符％2位于卷％3中。这是不允许的。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>用户空间代码调用fcntl并清除了用于Direct I / O的文件的O_DIRECT打开标志。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保在调用fcntl F_SETFL时，用户空间代码不会重置O_DIRECT。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-CF1BF721-BD96-4681-80AF-CB5E1BEF1E4A"><!-- --></a> ACFSK-00073：Oracle ACFS FCB散列大小为％2。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-0CE026AB-266C-4E73-ABDF-459AA3A5FF71"><!-- --></a> ACFSK-00074：ASSERTION FAILURE：％2文件：％3行：％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>内部ACFS断言失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-E357E416-0AEF-474A-95DD-F5C07AFDDB7A"><!-- --></a> ACFSK-00075：Oracle ACFS内核分布式锁管理器哈希大小为％2。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-67F6A0BE-2430-4377-A2EC-116D70E96106"><!-- --></a> ACFSK-00076：Oracle ACFS缓冲区高速缓存大小：％3个桶中的％2MB。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-C6DFC14A-F21E-40E4-8FCD-C6261677DDF1"><!-- --></a> ACFSK-00077：警告：OKS和ACFS驱动程序具有不同的构建信息。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>警告 -  ACFS标签版本应与OKS标签版本匹配。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-FFC317D7-B1AE-4458-9148-A17105AF5731"><!-- --></a> ACFSK-00078：ACFS构建％2。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-7931FCD0-3678-4ED6-A36B-4FC8BAFC1C6A"><!-- --></a> ACFSK-00079：ACFS包含修复程序'％2'。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-25C17126-F592-42D6-AE20-62A6F989A701"><!-- --></a> ACFSK-00080：OKS build％2。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-94DAEBFA-DCF7-4D96-9D27-0F5A6ED5CF7C"><!-- --></a> ACFSK-00081：OKS包含修复'％2'。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-40131097-332F-42B1-A671-3952AF28DDAA"><!-- --></a> ACFSK-00082：安装在％2的卷快照的存储消耗统计信息不再准确。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>运行fsck / acfschkdsk将修复快照统计信息。这些统计信息仅用于报告目的。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-4DDD67B7-A073-4E1B-AE62-1013882A7618"><!-- --></a> ACFSK-00083：已停止记录到审计跟踪％2。如果需要，将审计跟踪存档％3％4备份到新位置，然后删除审计跟踪存档以重新启动日志记录。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>审计跟踪存档仍然存在时达到审计跟踪大小限制。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，将审计跟踪归档备份到新位置，然后删除审计跟踪归档。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-4D44C71C-9A14-4106-BB90-4F42608F4994"><!-- --></a> ACFSK-00084：审计跟踪％2已在位置％3％4存档。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>自文件达到指定的大小限制以来，审计跟踪已归档。同时，将继续记录到原始审计跟踪。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，将审计跟踪归档备份到新位置，然后使用“acfsutil audit purge”命令删除审计跟踪归档。在审计跟踪再次填充之前未能执行此操作将导致日志数据丢失。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-77CDD51F-711A-45CD-A34D-2F8EA2B5313C"><!-- --></a> ACFSK-00085：审计跟踪％2的存档位于％3％4位置。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>活动审计跟踪已达到其指定的大小限制，并且尚未删除审计跟踪存档。在活动审计跟踪达到其指定的大小限制并且仍未删除审计跟踪归档后，审计将停止。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果需要，将审计跟踪归档备份到新位置，然后删除审计跟踪归档。在审计跟踪再次填充之前未能执行此操作将导致审计跟踪数据丢失。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-704076EF-D5B9-4BE1-AFCB-A4FACC92460D"><!-- --></a> ACFSK-00086：在％2上安装的卷上遇到元数据验证错误。镜像％3上的读取重试成功，文件标识符为％4，化身编号为％5，启动磁盘偏移％6。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，但使用提供的消息中引用的镜像重试</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。存储堆栈中的层可能出现故障。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-B695EC51-F2F2-4DEA-839A-1DF7BD9877A9"><!-- --></a> ACFSK-00087：卷％2上遇到元数据验证错误。镜像％3上的读取重试成功，文件标识符％4启动磁盘偏移％5。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，但使用提供的消息中引用的镜像重试</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。存储堆栈中的层可能出现故障。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-2FF79313-4DD1-4039-97F0-FABCB41BBF56"><!-- --></a> ACFSK-00088：卷上遇到元数据验证错误，设备次要编号为％2。镜像％3上的读取重试成功，文件标识符％3启动磁盘偏移％4。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS检测到从磁盘读取的元数据内容有问题，但使用提供的消息中引用的镜像重试</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。存储堆栈中的层可能出现故障。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-D76E6C93-5E5B-4376-A322-B3CE4E102356"><!-- --></a> ACFSK-00089：无法从挂载在<span class="variable" translate="no">string</span>上的卷上的已删除大文件中释放存储空间;将继续尝试释放存储空间</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法从已删除的大文件中释放空间，因为文件系统没有空闲存储空间。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>删除较小的文件，目录或快照以释放某些块，或运行“fsck -a”以从大文件返回空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-5873C198-3BE4-4EC7-9CF2-5395D788A778"><!-- --></a> ACFSK-00090：无法从卷<span class="variable" translate="no">string</span>上的已删除大文件中释放存储空间;将继续尝试释放存储空间</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法从已删除的大文件中释放空间，因为文件系统没有空闲存储空间。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>删除较小的文件，目录或快照以释放某些块，或运行“fsck -a”以从大文件返回空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-0193CE88-1D78-4687-91D8-EF21BF615E04"><!-- --></a> ACFSK-00091：无法使用设备次要编号<span class="variable" translate="no">string</span>从卷上已删除的大文件中释放存储空间;将继续尝试释放存储空间</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS无法从已删除的大文件中释放空间，因为文件系统没有空闲存储空间。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>删除较小的文件，目录或快照以释放某些块，或运行“fsck -a”以从大文件返回空间。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-6813562E-E21B-48E7-9BA8-397585B9A5EC"><!-- --></a> ACFSK-00092：Oracle文件类型％2的压缩数据库文件已阻止％3但已打开指定％4</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>打开现有的压缩数据库文件，指定与预期不同的DB Blocksize。在此条件得到修复之前，将阻止数据访问。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>验证配置的DB块大小是否正确，并在必要时进行更改。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-3D28B253-5786-4274-A99D-0D68056B8603"><!-- --></a> ACFSK-00093：安装在％4的卷的快照％2（ID％3）的存储消耗统计信息不再准确。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>用于报告存储统计信息的机制已中断。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动，因为这些统计数据仅用于报告目的。如果需要准确性，请运行fsck / acfschkdsk以修复快照统计信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-B5FBF7A8-F753-4890-8F31-E24AC318EFFD"><!-- --></a> ACFSK-00094：应释放的压缩文件中的磁盘存储量已达到路径％2上装入的卷所允许的最大值。预计写入新数据会暂时放缓。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ACFS需要赶上压缩文件不再需要的释放存储空间。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>无需采取任何行动。一旦ACFS赶上了释放存储空间，写入将不受限制。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-D43CC7A8-AB24-4D08-B654-960DC17F1160"><!-- --></a> ACFSK-00095：由于错误的对齐或长度，直接IO到压缩文件的转换为缓存IO。该文件具有ACFS标识符％2，并且位于路径％3（设备％4）上安装的文件系统上。调用％5文件类型％6数据1％7数据2％8</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>应用程序尝试将Direct IO发布到不符合预期对齐和长度要求的压缩文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>不需要采取任何行动，但请注意，这可能导致业绩不佳。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-9453B2A2-D1AF-466B-9F54-0518DEFEBDD4"><!-- --></a> ACFSK-00096：未对齐的直接IO写入压缩数据库被拒绝。该文件具有ACFS标识符％2，并且位于路径％3（设备％4）上安装的文件系统上。调用％5文件类型％6</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试对压缩数据库数据文件的直接IO写入被拒绝，因为它们未与文件的压缩单元大小对齐并且会导致损坏。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果配置的数据库块大小不等于压缩单元大小，则重新创建具有ACFS支持的块大小的文件。如果数据库块大小等于压缩单元大小，请与Oracle支持服务联系。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-78945C21-DDB8-459E-A93C-B32A44C11981"><!-- --></a> ACFSK-00097：数据库文件的块大小（2K字节）不受支持。该文件具有ACFS标识符％2，并且位于路径％3（设备％4）上安装的文件系统上。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试打开配置了2K字节块大小的数据库文件被拒绝，因为ACFS不支持块大小为2K。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果尝试创建新数据库文件，请使用ACFS支持的块大小。如果尝试使用现有文件，请在数据库中使用ACFS支持的块大小重新创建它。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-782B9954-A511-4D93-B674-4EA72C9BDF6A"><!-- --></a> ACFSK-00098：压缩数据库文件的块大小（4K字节）不受支持。该文件具有ACFS标识符％2，并且位于路径％3（设备％4）上安装的文件系统上。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试打开配置了4K字节块大小的压缩数据库文件被拒绝，因为ACFS不支持压缩数据库文件的块大小为4K。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果尝试创建新的压缩数据库文件，请使用ACFS支持的块大小。如果尝试使用现有文件，请在数据库中使用ACFS支持的块大小重新创建它。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-9AD00784-9B25-4BBF-BE27-0E96DE727BE4__GUID-86D491B9-9EC0-447D-84DA-EEC7D72C0A57"><!-- --></a> ACFSK-00099：不允许访问ACFS压缩的数据库文件。该文件具有ACFS标识符％2，并且位于路径％3（设备％4）上安装的文件系统上。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>信息</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
               </dl>
            </div>
         </div>
      </article>
   </body>
</html><html id="05671.character-set-migration.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>字符集迁移</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Globalization Support Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Globalization Support Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-globalization-support-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:55:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96349-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="OCI-programming-in-global-environment.html" title="Previous" type="text/html"></link>
      <link rel="next" href="customizing-locale-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Globalization Support Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NLSPG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="OCI-programming-in-global-environment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="customizing-locale-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库全球化支持指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">字符集迁移</li>
            </ol>
            <a id="GUID-53A6A5B1-6F79-44AE-9205-C32D9BA6B69A" name="GUID-53A6A5B1-6F79-44AE-9205-C32D9BA6B69A"></a><a id="NLSPG011"></a>
            
            <h2 id="NLSPG-GUID-53A6A5B1-6F79-44AE-9205-C32D9BA6B69A" class="sect2"><span class="enumeration_chapter">11</span>字符集迁移</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论字符集转换和字符集迁移。本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="character-set-migration.html#GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635">字符集迁移概述</a></p>
                  </li>
                  <li>
                     <p><a href="character-set-migration.html#GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8">更改现有数据库的数据库字符集</a></p>
                  </li>
                  <li>
                     <p><a href="character-set-migration.html#GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13">修复数据库字符集元数据</a></p>
                  </li>
                  <li>
                     <p><a href="character-set-migration.html#GUID-56D71786-F68F-496F-97B2-E3412B93E13E">语言和字符集文件扫描程序</a></p>
                  </li>
               </ul>
            </div><a id="NLSPG460"></a><div class="props_rev_3"><a id="GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635" name="GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635"></a><h3 id="NLSPG-GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635" class="sect3"><span class="enumeration_section">11.1</span>字符集迁移概述</h3>
               <div>
                  <p><a id="d85035e166" class="indexterm-anchor"></a><a id="d85035e170" class="indexterm-anchor"></a><a id="d85035e172" class="indexterm-anchor"></a><a id="d85035e176" class="indexterm-anchor"></a>为数据库选择合适的字符集是一个重要的决定。选择数据库字符集时，请考虑以下因素：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您需要存储的数据类型</p>
                     </li>
                     <li>
                        <p>数据库现在和将来需要适应的语言</p>
                     </li>
                     <li>
                        <p>每个字符集的不同大小要求以及相应的性能影响</p>
                     </li>
                  </ul>
                  <p>Oracle建议选择Unicode，以实现其通用性以及与当前和未来技术和语言要求的兼容性。Unicode标准中定义的字符集支持所有具有重要用途的当代书面语言和一些历史脚本。它还支持各种符号，例如，用于技术，科学和音乐符号的符号。它是许多技术的本机或推荐字符集，例如Java，Windows，HTML或XML。没有其他字符集是如此普遍。此外，在业界的大力支持下，Unicode的采用迅速增加。</p>
                  <p>Oracle的Unicode实现AL32UTF8提供1字节的ASCII字符编码，欧洲和中东语言的字符编码为2字节，南亚和东亚语言的字符为3字节。因此，Unicode的存储要求通常高于同一语言的传统字符集的存储要求。</p>
                  <p>相关主题是为现有数据库选择新的字符集。更改现有数据库的数据库字符集称为<span class="bold">字符集迁移</span> 。在这种情况下，Oracle也建议迁移到Unicode，以实现其通用性和兼容性。从一个数据库字符集迁移到另一个数据库字符集时，还应计划最大限度地减少以下来源的数据丢失：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="character-set-migration.html#GUID-8F973339-3D66-4C6D-A045-249A81007092">数据截断</a></p>
                     </li>
                     <li>
                        <p><a href="character-set-migration.html#GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A">字符集转换问题</a></p>
                        <div class="infoboxnotealso" id="GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635__GUID-192B41A7-1702-4B01-8093-1D8222436065">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="choosing-character-set.html#GUID-BF26E01D-AB92-48FC-855A-69A5B3AF9A92">选择一个字符集</a></p>
                        </div>
                     </li>
                  </ul>
               </div><a id="NLSPG857"></a><a id="NLSPG461"></a><div class="props_rev_3"><a id="GUID-8F973339-3D66-4C6D-A045-249A81007092" name="GUID-8F973339-3D66-4C6D-A045-249A81007092"></a><h4 id="NLSPG-GUID-8F973339-3D66-4C6D-A045-249A81007092" class="sect4"><span class="enumeration_section">11.1.1</span>数据截断</h4>
                  <div>
                     <p>什么时候<a id="d85035e291" class="indexterm-anchor"></a>数据库是使用字节语义创建的， <code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>数据类型的大小以字节为单位，而不是字符。例如，表定义中的规范<code class="codeph">CHAR(20)</code>允许20个字节用于存储字符数据。当数据库字符集使用单字节字符编码方案时，存储字符时不会发生数据丢失，因为字符数等于字节数。如果数据库字符集使用多字节字符集，则字节数不再等于字符数，因为字符可以包含一个或多个字节。
                     </p>
                     <p>在迁移到新字符集期间，验证现有<code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>列的列宽是很重要的，因为它们可能需要扩展以支持需要多字节存储的编码。如果转换导致数据扩展，则可能会发生截断数据。
                     </p>
                     <p>下表显示了一个示例<a id="d85035e313" class="indexterm-anchor"></a><a id="d85035e317" class="indexterm-anchor"></a>单字节字符通过转换成为多字节字符时的数据扩展。
                     </p>
                     <div class="tblformal" id="GUID-8F973339-3D66-4C6D-A045-249A81007092__G1007573">
                        <p class="titleintable">表11-1单字节和多字节编码</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="单字节和多字节编码" width="100%" border="1" summary="This table shows examples of data expansion when single-byte characters become multibyte characters through conversion." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d85035e333">字符</th>
                                 <th align="left" valign="bottom" id="d85035e336">WE8MSWIN 1252编码</th>
                                 <th align="left" valign="bottom" id="d85035e339">AL32UTF8编码</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d85035e344" headers="d85035e333 ">
                                    <p>一个</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e344 d85035e336 ">
                                    <p>E4</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e344 d85035e339 ">
                                    <p>C3 A4</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d85035e354" headers="d85035e333 ">
                                    <p>ö</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e354 d85035e336 ">
                                    <p>F6</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e354 d85035e339 ">
                                    <p>C3 B6</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d85035e364" headers="d85035e333 ">
                                    <p>©</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e364 d85035e336 ">
                                    <p>A9</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e364 d85035e339 ">
                                    <p>C2 A9</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d85035e374" headers="d85035e333 ">
                                    <p>€</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e374 d85035e336 ">
                                    <p>80</p>
                                 </td>
                                 <td align="left" valign="top" headers="d85035e374 d85035e339 ">
                                    <p>E2 82 AC</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>上表的第一列显示了所选字符。第二列显示WE8MSWIN1252字符集中字符的十六进制表示。第三列显示AL32UTF8字符集中每个字符的十六进制表示形式。每对字母和数字代表一个字节。例如， <code class="codeph">ä</code> （ <code class="codeph">a</code>元音变音）是单字节字符（ <code class="codeph">E4</code>在WE8MSWIN1252），但它成为一个两个字节的字符（ <code class="codeph">C3 A4</code> ）在AL32UTF8。此外，欧元符号的编码从一个字节（ <code class="codeph">80</code> ）扩展到三个字节（ <code class="codeph">E2 82 AC</code> ）。
                     </p>
                     <p>如果新字符集中的数据要求存储大于数据类型支持的字节大小，则必须更改架构。您可能需要使用<code class="codeph">CLOB</code>列。
                     </p>
                     <div class="infoboxnotealso" id="GUID-8F973339-3D66-4C6D-A045-249A81007092__GUID-EA0269D4-ABA3-4813-8000-7391A2EAB568">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="choosing-character-set.html#GUID-B3C74175-7F77-49A6-9CC9-1F6F70F3A69D">长度语义</a> ”</span></p>
                     </div>
                  </div><a id="NLSPG462"></a><div class="props_rev_3"><a id="GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D" name="GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D"></a><h5 id="NLSPG-GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D" class="sect5"><span class="enumeration_section">11.1.1.1</span>数据截断引起的其他问题</h5>
                     <div>
                        <p><a id="d85035e488" class="indexterm-anchor"></a><a id="d85035e492" class="indexterm-anchor"></a>数据截断可能会导致以下问题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在数据库数据字典中，模式对象名称的长度不能超过30个字节。如果模式对象的名称在新数据库字符集中超过30个字节，则必须重命名该模式对象。例如，泰国国家字符集中的一个泰语字符需要1个字节。在AL32UTF8中，它需要3个字节。如果已定义名称为11个泰语字符的表，则在将数据库字符集更改为AL32UTF8时，表名必须缩短为10个或更少的泰语字符。</p>
                           </li>
                           <li>
                              <p>如果是现有的Oracle用户名<a id="d85035e504" class="indexterm-anchor"></a><a id="d85035e508" class="indexterm-anchor"></a>或者密码是根据新字符集中大小变化的字符创建的，因此在迁移到新字符集后，由于身份验证失败，用户将无法登录。发生这种情况是因为在迁移到新字符集期间，可能无法更新存储在数据字典中的加密用户名和密码。例如，如果当前数据库字符集为WE8MSWIN1252且新数据库字符集为AL32UTF8，则用户名<code class="codeph">scött</code> （带有变音符号的<code class="codeph">o</code> ）的长度从5个字节更改为6个字节。在AL32UTF8中，由于用户名不同， <code class="codeph">scött</code>无法再登录。Oracle建议用户名和密码基于ASCII字符。如果不是，则必须在迁移到新字符集后重置受影响的用户名和密码。
                              </p>
                           </li>
                           <li>
                              <p>当<code class="codeph">CHAR</code>数据包含在迁移到新字符集后展开的字符时， <a id="d85035e528" class="indexterm-anchor"></a><a id="d85035e532" class="indexterm-anchor"></a>默认情况下，在数据库导出期间不会删除空间填充。这意味着在使用新字符集导入数据库时将拒绝这些行。解决方法是设置<a id="d85035e537" class="indexterm-anchor"></a><a id="d85035e539" class="indexterm-anchor"></a>导入<code class="codeph">CHAR</code>数据之前， <code class="codeph">BLANK_TRIMMING</code>初始化参数为<code class="codeph">TRUE</code> 。
                              </p>
                              <div class="infoboxnotealso" id="GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D__GUID-8BC52DBC-E71F-4BF1-A398-061B3431A0AE">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关<code class="codeph">BLANK_TRIMMING</code>初始化参数的详细信息，请<code class="codeph">BLANK_TRIMMING</code> <a href="../refrn/BLANK_TRIMMING.html#REFRN10011" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="NLSPG463"></a><div class="props_rev_3"><a id="GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A" name="GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A"></a><h4 id="NLSPG-GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A" class="sect4"><span class="enumeration_section">11.1.2</span>字符集转换问题</h4>
                  <div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="character-set-migration.html#GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7">使用导出和导入实用程序产生的替换字符</a></p>
                        </li>
                        <li>
                           <p><a href="character-set-migration.html#GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574">通过错误地设置客户端的NLS_LANG参数导致的无效数据</a></p>
                        </li>
                        <li>
                           <p><a href="character-set-migration.html#GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD">从单字节到多字节字符集和Oracle数据泵的转换</a></p>
                        </li>
                     </ul>
                  </div><a id="NLSPG858"></a><a id="NLSPG464"></a><div class="props_rev_3"><a id="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7" name="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7"></a><h5 id="NLSPG-GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7" class="sect5"><span class="enumeration_section">11.1.2.1</span>使用导出和导入实用程序产生的替换字符</h5>
                     <div>
                        <p><a id="d85035e727" class="indexterm-anchor"></a><a id="d85035e731" class="indexterm-anchor"></a>导出和导入实用程序可以将字符集从原始数据库字符集转换为新的数据库字符集。但是，字符集转换有时会导致数据丢失或数据损坏。例如，如果要从字符集A迁移到字符集B，则目标字符集B应该是字符集A的超集。目标字符集B是包含字符中定义的所有字符的<span class="bold">超集</span> 。设置A.字符集B中不可用的字符将转换为替换字符，通常指定为<code class="codeph">?</code> 或<code class="codeph">¿</code>或作为与不可用字符相关的字符。例如， <code class="codeph">ä</code> （ <code class="codeph">a</code>元音变音）可以被替换为<code class="codeph">a</code> 。替换字符由目标字符集定义。
                        </p>
                        <div class="infoboxnote" id="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7__GUID-699D135A-1412-42CF-B502-2AEE1A490FD7">
                           <p class="notep1">注意：</p>
                           <p>目标字符集B应该是字符集A的超集的要求有一个例外。如果您的数据不包含字符集A但不在字符集B中的字符，那么目标字符集不需要成为字符集A的超集，以避免数据丢失或数据损坏。</p>
                        </div>
                        <p>下图显示了将版权和欧元符号转换为字符集转换的示例<code class="codeph">?</code> 和<code class="codeph">ä</code>被转换为<code class="codeph">a</code> 。
                        </p>
                        <div class="figure" id="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7__I1006012">
                           <p class="titleinfigure">图11-1字符集转换中的替换字符</p><img src="img/nlspg020.gif" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/nlspg020.html"><br><a href="img_text/nlspg020.html">“图11-1字符集转换中的替换字符”的说明</a></div>
                        <!-- class="figure" -->
                        <p>要降低丢失数据的风险，请选择具有相似字符库的目标字符集。迁移到Unicode可能是最佳选择，因为AL32UTF8包含大多数旧版字符集中的字符。</p>
                     </div>
                  </div><a id="NLSPG859"></a><a id="NLSPG860"></a><a id="NLSPG465"></a><div class="props_rev_3"><a id="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574" name="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574"></a><h5 id="NLSPG-GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574" class="sect5"><span class="enumeration_section">11.1.2.2通过</span>错误地设置客户端的NLS_LANG参数导致的无效数据</h5>
                     <div>
                        <p>另一个可能导致数据丢失的字符集迁移方案是迁移包含无效数据的数据库。无效数据通常发生在数据库中，因为在客户端上未正确设置<code class="codeph">NLS_LANG</code>参数。<code class="codeph">NLS_LANG</code>值应反映客户端操作系统代码页。例如，在英语Windows环境中，代码页为WE8MSWIN1252。正确设置<code class="codeph">NLS_LANG</code>参数后，数据库可以自动转换来自客户端操作系统的传入数据。如果未正确设置<code class="codeph">NLS_LANG</code>参数，则无法正确转换进入数据库的数据。例如，假设数据库字符集是AL32UTF8，客户端是英语Windows操作系统，客户端上的<code class="codeph">NLS_LANG</code>设置是AL32UTF8。进入数据库的数据在WE8MSWIN1252中编码，并且不会转换为AL32UTF8数据，因为客户端上的<code class="codeph">NLS_LANG</code>设置与数据库字符集匹配。因此，Oracle假定不需要转换，并且将无效数据输入数据库。
                        </p>
                        <p><a id="d85035e872" class="indexterm-anchor"></a><a id="d85035e874" class="indexterm-anchor"></a>这可能导致两种可能的数据不一致问题。当数据库包含来自与数据库字符集不同但在两个字符集中都存在相同代码点的字符集的数据时，会出现一个问题。例如，如果数据库字符集为WE8ISO8859P1且中文Windows NT客户端的<code class="codeph">NLS_LANG</code>设置为SIMPLIFIED CHINESE_CHINA.WE8ISO8859P1，则所有多字节中文数据（来自ZHS16GBK字符集）将存储为单字节WE8ISO8859P1数据的倍数。这意味着Oracle将这些字符视为单字节WE8ISO8859P1字符。因此，所有SQL字符串操作函数（如SUBSTR或LENGTH）都基于字节而不是字符。构成ZHS16GBK数据的所有字节都是合法的WE8ISO8859P1代码。如果将此类数据库迁移到另一个字符集（如AL32UTF8），则转换字符代码就像它们在WE8ISO8859P1中一样。这样，ZHS16GBK字符的两个字节中的每一个都被单独转换，在AL32UTF8中产生无意义的值。下图显示了此错误字符集替换的示例。
                        </p>
                        <div class="figure" id="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574__I1006027">
                           <p class="titleinfigure">图11-2不正确的字符集替换</p><img src="img/nlspg021.gif" alt="下面是图11-2的描述" title="下面是图11-2的描述" longdesc="img_text/nlspg021.html"><br><a href="img_text/nlspg021.html">“图11-2不正确的字符集替换”的说明</a></div>
                        <!-- class="figure" -->
                        <p>第二个可能的问题是从数据库中的混合字符集中获取数据。例如，如果数据字符集是WE8MSWIN1252，并且使用德语和希腊语的两个单独的Windows客户端都使用WE8MSWIN1252作为<code class="codeph">NLS_LANG</code>字符集，则数据库包含德语和希腊语的混合<a id="d85035e892" class="indexterm-anchor"></a><a id="d85035e896" class="indexterm-anchor"></a>字符。下图显示了不同客户端如何在同一数据库中使用不同的字符集。
                        </p>
                        <div class="figure" id="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574__I1006038">
                           <p class="titleinfigure">图11-3混合字符集</p><img src="img/nlspg022.gif" alt="下面是图11-3的描述" title="下面是图11-3的描述" longdesc="img_text/nlspg022.html"><br><a href="img_text/nlspg022.html">“图11-3混合字符集”的描述</a></div>
                        <!-- class="figure" -->
                        <p>要使数据库字符集迁移成功，这两种情况都需要手动干预，因为Oracle数据库无法确定所存储数据的字符集。不正确的数据转换可能导致数据损坏，因此在尝试将数据迁移到新字符集之前，请执行数据库的完整备份。有关使用Unicode迁移助手程序（DMU）软件在字符集迁移到Unicode期间处理无效字符数据的详细信息，请参阅<span class="q">“ <a href="character-set-migration.html#GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8">更改现有数据库的数据库字符集</a> ”</span>主题。
                        </p>
                     </div>
                  </div><a id="NLSPG466"></a><div class="props_rev_3"><a id="GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD" name="GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD"></a><h5 id="NLSPG-GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD" class="sect5"><span class="enumeration_section">11.1.2.3</span>从单字节到多字节字符集和Oracle数据泵的转换</h5>
                     <div>
                        <p>如果正在使用Oracle Data Pump，并且执行了从单字节到多字节的字符集迁移，那么<a id="d85035e992" class="indexterm-anchor"></a>必须重新加载Data Pump PL / SQL包。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="NLSPG467"></a><div class="props_rev_3"><a id="GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8" name="GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8"></a><h3 id="NLSPG-GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8" class="sect3"><span class="enumeration_section">11.2</span>更改现有数据库的数据库字符集</h3>
               <div>
                  <p><a id="d85035e1068" class="indexterm-anchor"></a><a id="d85035e1072" class="indexterm-anchor"></a><a id="d85035e1076" class="indexterm-anchor"></a>数据库字符集迁移是一个复杂的过程，通常涉及三个阶段：数据扫描，数据清理和数据转换。
                  </p>
                  <p>在更改数据库字符集之前，必须确定可能的数据库字符集转换问题和截断数据。此步骤称为数据扫描。数据扫描标识在更改数据库字符集之前将数据迁移到新字符编码方案所需的工作量。在数据扫描期间可以找到的一些示例是需要扩展列宽度的模式对象的数量以及目标字符库中不存在的数据的范围。此信息有助于确定转换数据库字符集的最佳方法。</p>
                  <p>在确定潜在的数据问题后，需要对其进行适当的清理，以确保在数据转换期间保持数据完整性。数据清理步骤可能需要大量时间和精力，具体取决于发现的数据问题的规模和复杂性。可能需要多次迭代数据扫描和清理才能正确处理所有数据异常。</p>
                  <p>数据转换是将字符数据从源字符集转换为目标字符集表示的过程。不正确的数据转换可能导致数据损坏，因此在尝试将数据迁移到新字符集之前，请执行数据库的完整备份。</p>
                  <p>迁移数据库字符集有两种方法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="character-set-migration.html#GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8">使用Unicode的数据库迁移助手迁移字符数据</a></p>
                     </li>
                     <li>
                        <p><a href="character-set-migration.html#GUID-75E21F87-13EA-4319-8448-73B2A1CB564B">使用完全导出和导入迁移字符数据</a></p>
                     </li>
                  </ul>
               </div><a id="NLSPG979"></a><div class="props_rev_3"><a id="GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8" name="GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8"></a><h4 id="NLSPG-GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8" class="sect4"><span class="enumeration_section">11.2.1</span>使用Unicode的数据库迁移助手迁移字符数据</h4>
                  <div>
                     <p>Unicode数据库迁移助手（DMU）提供<a id="d85035e1183" class="indexterm-anchor"></a><a id="d85035e1187" class="indexterm-anchor"></a>直观且用户友好的GUI，可帮助您通过最小化手动工作负载的界面简化迁移过程到Unicode，并确保正确有效地执行迁移任务。
                     </p>
                     <p>DMU的一些优点是它具有以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>指导您完成工作流程</p>
                           <p>DMU的一个重要优势是它提供了一个逻辑工作流程来指导您完成迁移字符集的整个过程。</p>
                        </li>
                        <li>
                           <p>提供处理某些问题的建议</p>
                           <p>当您遇到某些问题时，DMU可以帮助您，例如在扫描或清理数据期间出现错误或故障。</p>
                        </li>
                        <li>
                           <p>支持数据的选择性转换</p>
                           <p>通过DMU，您只能转换表，列和行级别必须转换的数据。</p>
                        </li>
                        <li>
                           <p>提供进度监控</p>
                           <p>DMU提供GUI以可视化步骤的进展情况。</p>
                        </li>
                        <li>
                           <p>提供互动可视化功能</p>
                           <p>通过DMU，您可以以交互方式分析数据并在GUI中查看结果。它还使您能够在GUI中查看数据本身，并从已识别的迁移问题中以交互方式清除它。</p>
                        </li>
                        <li>
                           <p>提供仅支持内联转换的工具</p>
                           <p>通过DMU，Oracle数据库支持数据库内容的内联转换。与其他现有转换方法相比，这提供了性能和安全优势。</p>
                        </li>
                        <li>
                           <p>允许安排清理操作，以便以后在转换步骤中执行</p>
                           <p>推迟清理操作（例如数据类型迁移）可确保生产数据库和应用程序在实际迁移停机时间窗口之前不受影响。</p>
                        </li>
                     </ul>
                     <p>此版本的Unicode数据库迁移助手对于可以转换的数据库有一些限制。特别是，它不会在数据字典中转换具有某些类型的可转换数据的数据库。可以使用导出/导入迁移方法来克服这些限制。</p>
                     <p>在当前数据库版本中，DMU安装在<code class="codeph">$ORACLE_HOME/dmu</code>目录下。
                     </p>
                     <div class="infoboxnotealso" id="GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8__GUID-4070BBE6-B2E0-4C36-98FD-42995EB89D8A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/nlspg&amp;id=DUMAG113" target="_blank"><span class="italic">适用于Unicode的Oracle数据库迁移助手指南</span></a></p>
                     </div>
                  </div>
               </div><a id="NLSPG468"></a><div class="props_rev_3"><a id="GUID-75E21F87-13EA-4319-8448-73B2A1CB564B" name="GUID-75E21F87-13EA-4319-8448-73B2A1CB564B"></a><h4 id="NLSPG-GUID-75E21F87-13EA-4319-8448-73B2A1CB564B" class="sect4"><span class="enumeration_section">11.2.2</span>使用完全导出和导入迁移字符数据</h4>
                  <div>
                     <p>完全导出和导入也可用于将数据库转换为新的字符集。由于必须设置单独的目标实例，因此可能更耗时且占用资源。如果您计划将数据迁移到非强制阻止的非Unicode字符集，则可以使用DMU在数据库中查找无效的字符表示问题，并使用导出和导入进行数据转换。请注意，如果迁移不是Unicode，则DMU将无法正确识别数据扩展问题（列和数据类型限制违规）。它也不会识别源数据库字符集中存在但在非Unicode目标字符集中不存在的字符。</p>
                     <div class="infoboxnotealso" id="GUID-75E21F87-13EA-4319-8448-73B2A1CB564B__GUID-76975F25-7A71-4C19-8C5B-B950460D989F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关导出和导入实用<a href="../sutil/oracle-data-pump-overview.html#SUTIL-GUID-17FAE261-0972-4220-A2E4-44D479F519D4" target="_blank"><span class="italic">程序</span></a>的详细信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL-GUID-17FAE261-0972-4220-A2E4-44D479F519D4" target="_blank"><span class="italic">Oracle数据库实用</span></a>程序</p>
                     </div>
                  </div>
               </div>
            </div><a id="NLSPG980"></a><div class="props_rev_3"><a id="GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13" name="GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13"></a><h3 id="NLSPG-GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13" class="sect3"><span class="enumeration_section">11.3</span>修复数据库字符集元数据</h3>
               <div>
                  <div class="section">
                     <p>如果您的数据库处于通常称为传递配置的位置，其中客户端参数集（通常通过<code class="codeph">NLS_LANG</code>客户端设置）定义为等于数据库字符集，则可以存储数据库中的字符数据在声明的数据库字符集的不同字符集中。在此方案中，建议的解决方案是使用DMU假定的数据库字符集功能将数据库迁移到Unicode，以指示数据的实际字符集。如果由于业务或技术限制而无法立即迁移到Unicode，则至少需要更正数据库字符集声明以匹配数据库内容。
                     </p>
                     <p>使用适用于Unicode版本1.2的数据库迁移助手，您可以使用<code class="codeph">CSREPAIR</code>脚本在这种情况下修复数据库字符集元数据。<code class="codeph">CSREPAIR</code>脚本与DMU客户端一起使用并访问DMU存储库。只有在DMU执行完整数据库扫描后，才能将数据库字符集声明更改为数据的真实字符集，方法是将“假定数据库字符集”属性设置为目标字符集，并且不报告任何无效表示问题，它验证数据库中的所有现有数据是否根据假定的数据库字符集定义。请注意， <code class="codeph">CSREPAIR</code>仅更改数据字典元数据中的数据库字符集声明，并且不转换任何数据库数据。
                     </p>
                     <p>您可以在DMU安装的<code class="codeph">admin</code>子目录下找到<code class="codeph">CSREPAIR</code>脚本。使用<code class="codeph">CSREPAIR</code>脚本时的要求是：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>必须首先在DMU中执行成功的完整数据库扫描，并将“假定数据库字符集”属性设置为数据的实际字符集。在这种情况下，假定的数据库字符集必须与当前数据库字符集不同，否则不会执行任何操作。如果DMU报告存在无效数据，则<code class="codeph">CSREPAIR</code>脚本将不会继续。但是，如果扫描中存在无变化或可转换数据，它将继续进行。</span></li>
                     <li><span>假定数据库字符集中的目标字符集必须是US7ASCII的二进制超集。</span></li>
                     <li><span>仅允许从单字节到单字节字符集或多字节到多字节字符集的修复，因为不会尝试转换<code class="codeph">CLOB</code>数据。</span></li>
                     <li><span>如果在列级别设置假定字符集，则该值必须与假定的数据库字符集相同。否则， <code class="codeph">CSREPAIR</code>将无法运行。</span></li>
                     <li><span>您必须具有<code class="codeph">SYSDBA</code>权限才能运行<code class="codeph">CSREPAIR</code> 。</span></li>
                  </ol>
               </div><a id="NLSPG981"></a><div class="props_rev_3"><a id="GUID-43495C8E-FD91-4F9E-BA85-27BB696533F9" name="GUID-43495C8E-FD91-4F9E-BA85-27BB696533F9"></a><h4 id="NLSPG-GUID-43495C8E-FD91-4F9E-BA85-27BB696533F9" class="sect4"><span class="enumeration_section">11.3.1</span>示例：使用CSREPAIR</h4>
                  <div>
                     <div class="section">
                        <p>典型示例是通过直通配置将WE8MSWIN1252数据存储在WE8ISO8859P1数据库中。要更正从WE8ISO8859P1到WE8MSWIN1252的数据库字符集，请执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>设置DMU并连接到目标WE8ISO8859P1数据库。</span></li>
                        <li class="stepexpand"><span>打开DMU中的“数据库属性”选项卡。</span></li>
                        <li class="stepexpand"><span>将Assumed Database Character Set属性设置为WE8MSWIN1252。</span></li>
                        <li class="stepexpand"><span>使用DMU执行完整数据库扫描。</span></li>
                        <li class="stepexpand"><span>打开数据库扫描报告，确认“无效表示”类别下没有报告数据。</span></li>
                        <li class="stepexpand"><span>退出DMU客户端。</span></li>
                        <li class="stepexpand"><span>启动SQL * Plus实用程序并以具有<code class="codeph">SYSDBA</code>权限的用户身份进行连接。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">CSREPAIR</code>脚本：</span><div>
                              <p><code class="codeph">SQL&gt; @@ CSREPAIR.PLB</code></p>
                              <p>完成后，您应该收到消息：</p>
                              <p>数据库字符集已成功更改为WE8MSWIN1252。您必须立即重新启动数据库。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新启动数据库。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="NLSPG982"></a><div class="props_rev_3"><a id="GUID-56D71786-F68F-496F-97B2-E3412B93E13E" name="GUID-56D71786-F68F-496F-97B2-E3412B93E13E"></a><h3 id="NLSPG-GUID-56D71786-F68F-496F-97B2-E3412B93E13E" class="sect3"><span class="enumeration_section">11.4</span>语言和字符集文件扫描程序</h3>
               <div>
                  <p>语言和<a id="d85035e1648" class="indexterm-anchor"></a><a id="d85035e1650" class="indexterm-anchor"></a><a id="d85035e1652" class="indexterm-anchor"></a>字符集文件扫描程序（ <code class="codeph">LCSSCAN</code> ）是一种基于统计的高性能实用程序，用于确定未知文件文本的语言和字符集。它可以自动识别各种语言和字符集对。对于每个文本，语言和字符集检测引擎设置一系列概率，每个概率对应于语言和字符集对。最具统计可能性的对识别主导语言和字符集。
                  </p>
                  <p>文本的纯度会影响语言和字符集检测的准确性。理想的情况是单一语言的文学文本，没有拼写或语法错误。这些类型的文本可能需要100个字符或更多数据，并且可以以非常高的置信度返回结果。另一方面，一些技术文档在被识别之前可能需要更长的段。包含多种语言或字符集或文本（如地址，电话号码或编程语言代码）的文档可能会产生不良结果。例如，如果文档同时嵌入了法语和德语，则可以统计地减少猜测任一语言的准确性。纯文本和HTML文件都被接受。如果格式已知，则应设置<code class="codeph">FORMAT</code>参数以提高准确性。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="character-set-migration.html#GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26">LCSSCAN命令的语法</a></p>
                     </li>
                     <li>
                        <p><a href="character-set-migration.html#GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148">示例：使用LCSSCAN命令</a></p>
                     </li>
                     <li>
                        <p><a href="character-set-migration.html#GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D">获取语言和字符集文件扫描程序的命令行帮助</a></p>
                     </li>
                     <li>
                        <p><a href="character-set-migration.html#GUID-99DA1573-0D35-44AD-B178-0AD9724975AD">支持的语言和字符集</a></p>
                     </li>
                     <li>
                        <p><a href="character-set-migration.html#GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477">LCSSCAN错误消息</a></p>
                     </li>
                  </ul>
               </div><a id="NLSPG984"></a><a id="NLSPG985"></a><a id="NLSPG986"></a><a id="NLSPG987"></a><a id="NLSPG988"></a><a id="NLSPG983"></a><div class="props_rev_3"><a id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26" name="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26"></a><h4 id="NLSPG-GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26" class="sect4"><span class="enumeration_section">11.4.1</span> LCSSCAN命令的语法</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">LCSSCAN</code>命令启动语言和字符集文件扫描程序。其语法如下：</p><pre class="oac_no_warn" dir="ltr">LCSSCAN [RESULTS = <span class="italic">number</span> ] [FORMAT = <span class="italic">file_type</span> ] [BEGIN = <span class="italic">number</span> ] [END = <span class="italic">number</span> ] FILE = <span class="italic">file_name</span>
</pre><p>参数将在本节的其余部分中介绍。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-6EAD44DF-557D-4D8C-BD68-AE1F96EB4B71">结果</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该<a id="d85035e1800" class="indexterm-anchor"></a> <code class="codeph">RESULTS</code>参数是可选的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-18AACD93-8345-4E44-BAB5-56B1E6C8B3AA">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the properties of the RESULTS parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d85035e1815">属性</th>
                                 <th align="left" valign="bottom" width="72%" id="d85035e1818">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1823" headers="d85035e1815 ">
                                    <p><span class="bold">默认值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1823 d85035e1818 ">
                                    <p><code class="codeph">1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1832" headers="d85035e1815 ">
                                    <p><span class="bold">最低价值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1832 d85035e1818 ">
                                    <p><code class="codeph">1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1841" headers="d85035e1815 ">
                                    <p><span class="bold">最大价值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1841 d85035e1818 ">
                                    <p><code class="codeph">3</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1850" headers="d85035e1815 ">
                                    <p><span class="bold">目的</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1850 d85035e1818 ">
                                    <p>返回的语言和字符集对的数量。它们按概率顺序列出。第一种选择的比较权重无法量化。此参数的建议值是默认值<code class="codeph">1</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-F5D1F3BE-4BE8-4FF8-B831-9414E5C8B51D">格式</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">FORMAT</code>参数是可选的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-A5F25753-0E82-43EE-A788-EE5BA6AACD2F">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the properties of the FORMAT parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85035e1877">属性</th>
                                 <th align="left" valign="bottom" width="76%" id="d85035e1880">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85035e1885" headers="d85035e1877 ">
                                    <p><span class="bold">默认值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85035e1885 d85035e1880 ">
                                    <p><code class="codeph">文本</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85035e1894" headers="d85035e1877 ">
                                    <p><span class="bold">目的</span></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85035e1894 d85035e1880 ">
                                    <p>此参数标识要扫描的文件类型。可能的值是<code class="codeph">html</code> ， <code class="codeph">text</code>和<code class="codeph">auto</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-ECC92F2B-D005-49B2-8E52-67231A20EF00">开始</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该<a id="d85035e1916" class="indexterm-anchor"></a> <code class="codeph">BEGIN</code>参数是可选的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-46324B91-6DC2-4B8C-9F49-E3E56B108FF8">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the properties of the BEGIN parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d85035e1931">属性</th>
                                 <th align="left" valign="bottom" width="72%" id="d85035e1934">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1939" headers="d85035e1931 ">
                                    <p><span class="bold">默认值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1939 d85035e1934 ">
                                    <p><code class="codeph">1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1948" headers="d85035e1931 ">
                                    <p><span class="bold">最低价值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1948 d85035e1934 ">
                                    <p><code class="codeph">1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1957" headers="d85035e1931 ">
                                    <p><span class="bold">最大价值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1957 d85035e1934 ">
                                    <p>文件中的字节数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e1965" headers="d85035e1931 ">
                                    <p><span class="bold">目的</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e1965 d85035e1934 ">
                                    <p><code class="codeph">LCSSCAN</code>开始扫描过程的输入文件的字节。默认值是输入文件的第一个字节。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-89187DA2-5D79-41D1-9832-07170FBB2DAE">结束</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该<a id="d85035e1982" class="indexterm-anchor"></a> <code class="codeph">END</code>参数是可选的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-FB91296D-9E65-4B75-82DB-FB96D58D342B">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the properties of the END parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d85035e1998">属性</th>
                                 <th align="left" valign="bottom" width="72%" id="d85035e2001">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e2006" headers="d85035e1998 ">
                                    <p><span class="bold">默认值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e2006 d85035e2001 ">
                                    <p>文件结束</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e2014" headers="d85035e1998 ">
                                    <p><span class="bold">最低价值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e2014 d85035e2001 ">
                                    <p><code class="codeph">3</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e2023" headers="d85035e1998 ">
                                    <p><span class="bold">最大价值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e2023 d85035e2001 ">
                                    <p>文件中的字节数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e2031" headers="d85035e1998 ">
                                    <p><span class="bold">目的</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e2031 d85035e2001 ">
                                    <p><code class="codeph">LCSSCAN</code>扫描的输入文件的最后一个字节。默认值是输入文件的最后一个字节。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-547313C6-F53E-41D2-AFCC-935C0477A523">文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该<a id="d85035e2047" class="indexterm-anchor"></a> <code class="codeph">FILE</code>参数是必需的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-12D00DEF-164E-4E04-97C8-D11BAEE6A400">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the properties of the FILE parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d85035e2063">属性</th>
                                 <th align="left" valign="bottom" width="72%" id="d85035e2066">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e2071" headers="d85035e2063 ">
                                    <p><span class="bold">默认值</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e2071 d85035e2066 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d85035e2079" headers="d85035e2063 ">
                                    <p><span class="bold">目的</span></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d85035e2079 d85035e2066 ">
                                    <p>指定要扫描的文本文件的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="NLSPG990"></a><a id="NLSPG991"></a><a id="NLSPG992"></a><a id="NLSPG993"></a><a id="NLSPG994"></a><a id="NLSPG989"></a><div class="props_rev_3"><a id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148" name="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148"></a><h4 id="NLSPG-GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148" class="sect4"><span class="enumeration_section">11.4.2</span>示例：使用LCSSCAN命令</h4>
                  <div>
                     <div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-B8B16A3C-061B-4754-BF29-971D842638A7">
                        <p class="titleinexample">示例11-1仅在LCSSCAN命令中指定文件名</p><pre class="oac_no_warn" dir="ltr">LCSSCAN FILE = example.txt</pre><p>在此示例中，扫描整个<code class="codeph">example.txt</code>文件，因为尚未指定<code class="codeph">BEGIN</code>和<code class="codeph">END</code>参数。将返回一个语言和字符集对，因为尚未指定<code class="codeph">RESULTS</code>参数。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-8D6AAC29-D29F-4116-9B0D-B1CC0FD37C29">
                        <p class="titleinexample">示例11-2将格式指定为HTML</p><pre class="oac_no_warn" dir="ltr">LCSSCAN FILE = example.html FORMAT = html</pre><p>在此示例中，扫描整个<code class="codeph">example.html</code>文件，因为尚未指定<code class="codeph">BEGIN</code>和<code class="codeph">END</code>参数。扫描将在扫描之前剥离HTML标记，因此结果更准确。将返回一个语言和字符集对，因为尚未指定<code class="codeph">RESULTS</code>参数。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-EBB00532-958E-4073-B759-BB6B496149C2">
                        <p class="titleinexample">例11-3为LCSSCAN指定RESULTS和BEGIN参数</p><pre class="oac_no_warn" dir="ltr">LCSSCAN结果= 2 BEGIN = 50 FILE = example.txt</pre><p>扫描过程从文件的第50个字节开始，并继续到文件的末尾。将返回两个语言和字符集对。</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-F11759EE-70F6-4057-BB2B-0E9041260942">
                        <p class="titleinexample">例11-4为LCSSCAN指定RESULTS和END参数</p><pre class="oac_no_warn" dir="ltr">LCSSCAN RESULTS = 3 END = 100 FILE = example.txt</pre><p>扫描过程从文件的开头开始，到文件的第100个字节结束。将返回三种语言和字符集对。</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-5BEAA436-DEB6-4938-BE9F-3FBAEC187232">
                        <p class="titleinexample">例11-5为LCSSCAN指定BEGIN和END参数</p><pre class="oac_no_warn" dir="ltr">LCSSCAN BEGIN = 50 END = 100 FILE = example.txt</pre><p>扫描过程从第50个字节开始，到文件的第100个字节结束。将返回一个语言和字符集对，因为尚未指定<code class="codeph">RESULTS</code>参数。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="NLSPG995"></a><div class="props_rev_3"><a id="GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D" name="GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D"></a><h4 id="NLSPG-GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D" class="sect4"><span class="enumeration_section">11.4.3</span>获取语言和字符集文件扫描程序的命令行帮助</h4>
                  <div>
                     <div class="section">
                        <p>至<a id="d85035e2308" class="indexterm-anchor"></a><a id="d85035e2312" class="indexterm-anchor"></a>获取语言和字符集文件扫描程序参数的摘要，输入以下命令：</p><pre class="oac_no_warn" dir="ltr">LCSSCAN HELP = y</pre><p>结果输出显示语言和字符集扫描程序参数的摘要。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="NLSPG996"></a><div class="props_rev_3"><a id="GUID-99DA1573-0D35-44AD-B178-0AD9724975AD" name="GUID-99DA1573-0D35-44AD-B178-0AD9724975AD"></a><h4 id="NLSPG-GUID-99DA1573-0D35-44AD-B178-0AD9724975AD" class="sect4"><span class="enumeration_section">11.4.4</span>支持的语言和字符集</h4>
                  <div>
                     <p>语言和字符集文件扫描程序支持每种语言的多个字符集。</p>
                     <p>当语言的二进制值与具有子集/超集关系的两个或多个编码匹配时，将返回子集字符集。例如，如果语言是德语并且所有字符都是7位，则返回US7ASCII而不是WE8MSWIN1252，WE8ISO8859P15或WE8ISO8859P1。</p>
                     <p>当字符集确定为UTF-8时，默认情况下返回Oracle字符集UTF8，除非在文本中检测到4字节字符（增补字符）。如果检测到4字节字符，则将字符集报告为AL32UTF8。</p>
                     <div class="infoboxnotealso" id="GUID-99DA1573-0D35-44AD-B178-0AD9724975AD__GUID-07CE4340-B53E-4CED-9242-E9283C84C728">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="appendix-A-locale-data.html#GUID-20E0601E-18D9-474C-868D-1DA9A29A1D26">语言和字符集检测支持</a> ”，</span>用于支持的语言和字符集列表</p>
                     </div>
                  </div>
               </div><a id="NLSPG997"></a><div class="props_rev_3"><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477" name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477"></a><h4 id="NLSPG-GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477" class="sect4"><span class="enumeration_section">11.4.5</span> LCSSCAN错误消息</h4>
                  <div>
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-5FBE744A-E01D-405B-9BC9-0399829AB494"><!-- --></a> LCD-00001发生未知错误。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>访问内部结构时出错。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>将此错误报告给Oracle支持。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-5A49DEC6-5B92-4711-A6BD-CCF9C41A31A5"><!-- --></a> LCD-00002无法加载NLS数据。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>访问<code class="codeph">$ORACLE_HOME/nls/data</code>出错。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>检查以确保<code class="codeph">$ORACLE_HOME/nls/data</code>存在且可访问。如果没有找到，请检查<code class="codeph">$ORA_NLS10</code>目录。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-5ABA23BA-4B83-498A-A891-2C07B2D6092F"><!-- --></a> LCD-00003读取配置文件时发生错误。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>访问<code class="codeph">$ORACLE_HOME/nls/data</code>出错。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>检查以确保<code class="codeph">$ORACLE_HOME/nls/data</code>存在且可访问。如果没有找到，请检查<code class="codeph">$ORA_NLS10</code>目录。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-46D1EC26-AFC5-4675-9591-2338DA307FF2"><!-- --></a> LCD-00004开始或结束偏移设置不正确。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>开始和结束偏移必须是大于0的整数。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>将偏移更改为正数。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-BA7783EB-8B2B-491A-96DD-46D2781A7940"><!-- --></a> LCD-00005结束偏移设置不正确。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>结束偏移量必须大于起始偏移量。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>将结束偏移更改为大于起始偏移。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-2E497639-1AE4-460D-B342-56576309D442"><!-- --></a> LCD-00006打开输入文件时出错。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>找不到文件或无法打开文件。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>检查指定文件的名称。确保指定了完整的文件名，并且该文件未在使用中。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-8A75F87F-94B5-43DD-96F0-00B32D98CC28"><!-- --></a> LCD-00007初始偏移设置不正确。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>起始偏移量必须小于文件中的字节数。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">操作：</span>检查文件的大小并指定较小的起始偏移量。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p> </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-9C47FBF1-99AD-4BDC-BFA8-112053484B9A"><!-- --></a> LCD-00008未返回任何结果。
                           </dt>
                           <dd>
                              <p><span class="keyword">原因：</span>输入的文本不足以产生结果。
                              </p>
                           </dd>
                           <dd class="ddexpand">
                              <p><span class="keyword">行动：</span>需要输入更大的文本样本以产生可靠的结果。
                              </p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00109.transaction-guard.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用Transaction Guard</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="editions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="editions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-part.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Transaction Guard</li>
            </ol>
            <a id="GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB" name="GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB"></a><a id="ADFNS318"></a><a id="ADFNS8000"></a>
            
            <h2 id="ADFNS-GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB" class="sect2"><span class="enumeration_chapter">28</span>使用Transaction Guard</h2>
         </header>
         <div class="ind">
            <div>
               <p><span class="bold">Transaction Guard</span>为应用程序提供了一个通用工具，用于在计划内和计划外中断时最多执行一次。应用程序使用逻辑事务ID来确定中断后数据库会话中打开的最后一个事务的提交结果。如果没有Transaction Guard，尝试在中断后重播操作的应用程序可能会通过提交重复事务而导致逻辑损坏。Application Continuity使用Transaction Guard进行自动和透明的事务重放。
               </p>
               <p>Transaction Guard提供以下好处：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>保留返回的结果 - 已提交或未提交，以便可以依赖它</p>
                  </li>
                  <li>
                     <p>确保每个事务的已知提交结果</p>
                  </li>
                  <li>
                     <p>可用于为希望重新提交自身的应用程序提供最多一次的事务执行</p>
                  </li>
                  <li>
                     <p>Application Continuity用于自动和透明的事务重放</p>
                  </li>
               </ul>
               <p>本章假定您熟悉使用Transaction Guard的技术或产品环境的主要相关概念和技术。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB__GUID-40FDFA41-BFC2-40D0-B638-929417A81019">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="transaction-guard.html#GUID-C4CB46C6-EC27-42EA-9CE5-4467079A27E5">Transaction Guard解决的问题</a></p>
                  </li>
                  <li>
                     <p><a href="transaction-guard.html#GUID-2FA3A95E-D3A7-4E39-B6FC-F1F5C0970CFD">Transaction Guard提供的解决方案</a></p>
                  </li>
                  <li>
                     <p><a href="transaction-guard.html#GUID-A8E098A7-580A-4ABD-9C83-84E526A05655">交易警卫概念和范围</a></p>
                  </li>
                  <li>
                     <p><a href="transaction-guard.html#GUID-6868526F-C6BD-4886-A191-7A866673D31A" title="如果您使用的是Oracle RAC或Oracle RAC One，请使用srvctl命令创建和修改服务。如果您使用的是Oracle RAC或Oracle RAC One，请使用srvctl命令创建和修改服务。">Transaction Guard的数据库配置</a></p>
                  </li>
                  <li>
                     <p><a href="transaction-guard.html#GUID-70A0E0F0-1B2D-4CBC-A318-C52FC2099B88">开发使用Transaction Guard的应用程序</a></p>
                  </li>
                  <li>
                     <p><a href="transaction-guard.html#GUID-1FAF5D75-6E7A-4AB8-868C-5A9D4847D6E9">交易保护及其与应用连续性的关系</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB__GUID-36FDCB09-5877-4E8F-814C-9093E370802D">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="../jjdbc/transaction-guard.html#JJDBC29121" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a> ，了解有关将Transaction Guard与Oracle Java数据库连接（JDBC）一起使用的更多信息</p>
                     </li>
                     <li>
                        <p><a href="../lnoci/index.html" target="_blank"><span class="italic">“Oracle调用接口程序员指南”</span></a> ，了解有关将Transaction Guard与OCI一起使用的更多信息</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADFNS319"></a><div class="props_rev_3"><a id="GUID-C4CB46C6-EC27-42EA-9CE5-4467079A27E5" name="GUID-C4CB46C6-EC27-42EA-9CE5-4467079A27E5"></a><h3 id="ADFNS-GUID-C4CB46C6-EC27-42EA-9CE5-4467079A27E5" class="sect3">交易守卫解决的问题</h3>
               <div>
                  <p>在没有Transaction Guard的应用程序中，在中断后恢复应用程序的一个基本问题是发送回客户端的提交消息不是持久的。如果客户端和服务器之间存在中断，则客户端会看到一条错误消息，指示通信失败。如果提交执行任何提交操作，程序调用已完成并执行所有预期提交和会话状态更改，或者如果调用失败，或者更糟糕的是，仍然运行与客户端断开连接，则此错误不会通知应用程序。</p>
                  <p>如果没有Transaction Guard，在与服务器通信失败后，以保证和可扩展的方式确定上次提交操作的结果是不可能或极其困难的。如果应用程序必须确定是否已提交到数据库，则应用程序必须添加自定义异常代码以查询应用程序中每个可能提交点的结果。鉴于系统可能在任何地方发生故障，这几乎是不切实际的，因为查询必须特定于每个提交。在应用程序构建并投入生产之后，这是完全不切实际的。此外，查询无法给出正确的答案，因为事务可以在执行该查询后立即提交。实际上，在通信失败之后，服务器可能仍在运行提交尚未意识到客户端已断开连接。对于数据库中的PL / SQL或Java，对于程序提交，也没有关于该提交是否已完成或在中途中止的记录。虽然这样的程序可能已经提交，但可能没有为该程序进行后续工作。</p>
                  <p>未能识别上次提交已提交，或将很快提交或尚未完成，可能导致尝试重播的应用程序，从而导致重复的事务提交和其他形式的“逻辑损坏”，因为软件可能会尝试重新发布已经坚持改变。</p>
                  <p>如果没有Transaction Guard，如果已启动事务并且已发出提交，则发送回客户端的提交消息不会持久。客户端不知道事务是否已提交。如果非事务状态不正确或已经提交，则无法有效地重新提交事务。在没有保证提交和完成信息的情况下，重新提交可能导致多次应用事务并且在具有错误状态的会话中。</p>
               </div>
            </div><a id="ADFNS320"></a><div class="props_rev_3"><a id="GUID-2FA3A95E-D3A7-4E39-B6FC-F1F5C0970CFD" name="GUID-2FA3A95E-D3A7-4E39-B6FC-F1F5C0970CFD"></a><h3 id="ADFNS-GUID-2FA3A95E-D3A7-4E39-B6FC-F1F5C0970CFD" class="sect3">交易守卫提供的解决方案</h3>
               <div>
                  <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.1）开始，Transaction Guard为应用程序提供了新的集成工具，用于自动和透明地实现幂等性，并且可以扩展。其主要特点如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>的耐久性<code class="codeph">COMMIT</code>通过保存在提交用于所有支持的事务处理类型对数据库（Oracle数据库<span class="italic">12c的</span>第1版（12.1.0.1）或更高版本）的逻辑事务标识符（LTXID）的结果。这包括使用自动提交，PL / SQL内部，远程事务，单阶段XA事务以及无法使用通用方法识别的标注执行的事务的幂等性。
                        </p>
                     </li>
                     <li>
                        <p>使用LTXID支持最多一次执行语义，这样当LTXID识别出飞行中的该事务的多个副本时，不能复制受逻辑事务标识符保护的数据库事务。</p>
                     </li>
                     <li>
                        <p>阻止提交正在进行的工作以确保无论中断情况如何，受LTXID保护的同一事务的另一次提交都无法提交。</p>
                     </li>
                     <li>
                        <p>确定在LTXID上提交的工作是作为顶级调用（客户端到服务器）的一部分提交的，还是嵌入在服务器的过程（例如PL / SQL）中。嵌入式提交状态表示在提交完成时，执行提交的整个过程尚未完成。除非该过程本身返回到数据库引擎，否则无法保证在提交之外的任何工作都已完成。</p>
                     </li>
                     <li>
                        <p>确定提交解决方案所针对的数据库是在原始提交之前，同步还是在其后面，以及在客户端提交的事务提交顺序中存在间隙时拒绝。如果服务器或客户端在LTXID序列上不同步，则尝试获取结果被视为错误。</p>
                     </li>
                     <li>
                        <p>在LTXID更改时触发的JDBC瘦客户端驱动程序的回调。这可以由更高层应用程序（如WebLogic Server和第三方）使用，以便在需要时保持当前的LTXID可供使用。</p>
                     </li>
                     <li>
                        <p>跨全局不同数据库以及整合到多租户基础架构中的数据库之间的命名空间唯一性。这包括Oracle Real Application Clusters（Oracle RAC）和RAC One，Data Guard和Multitenant数据库。</p>
                     </li>
                     <li>
                        <p>跨全局数据库以及整合到多租户基础架构中的数据库之间的服务名称唯一性。这可确保将连接正确定向到事务信息。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADFNS323"></a><a id="ADFNS322"></a><div class="props_rev_3"><a id="GUID-A8E098A7-580A-4ABD-9C83-84E526A05655" name="GUID-A8E098A7-580A-4ABD-9C83-84E526A05655"></a><h3 id="ADFNS-GUID-A8E098A7-580A-4ABD-9C83-84E526A05655" class="sect3">交易警卫概念和范围</h3>
               <div>
                  <p>本节介绍了Transaction Guard的一些关键概念，以及Transaction Guard涵盖和未涵盖的内容。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-A8E098A7-580A-4ABD-9C83-84E526A05655__GUID-B9D86B39-5809-47AB-941F-EC2DAC78661D">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="transaction-guard.html#GUID-7A9030F2-FC39-4A72-8CEE-92CDD2FA59AD">逻辑事务标识符（LTXID）</a></p>
                        </li>
                        <li>
                           <p><a href="transaction-guard.html#GUID-1E1094F5-F8B2-49C3-B2C6-CF7AC2A3C9F7">最多执行一次</a></p>
                        </li>
                        <li>
                           <p><a href="transaction-guard.html#GUID-2EA7BC0E-FA8B-43D6-89D5-45AFA040CCC4">交易保护范围</a></p>
                        </li>
                        <li>
                           <p><a href="transaction-guard.html#GUID-25E7E67C-49F6-4C1C-8227-075C2450ED85">交易保护除外</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A8E098A7-580A-4ABD-9C83-84E526A05655__GUID-0F04430B-47B8-450E-AFD8-EC64DD735439">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关Transaction Guard如何工作的更多信息，请参阅<a href="../cncpt/transactions.html#CNCPT89217" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                           </li>
                           <li>
                              <p><a href="../jjdbc/transaction-guard.html#JJDBC29121" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a> ，了解有关将Transaction Guard与Oracle Java数据库连接（JDBC）一起使用的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS324"></a><div class="props_rev_3"><a id="GUID-7A9030F2-FC39-4A72-8CEE-92CDD2FA59AD" name="GUID-7A9030F2-FC39-4A72-8CEE-92CDD2FA59AD"></a><h4 id="ADFNS-GUID-7A9030F2-FC39-4A72-8CEE-92CDD2FA59AD" class="sect4">逻辑事务标识符（LTXID）</h4>
                  <div>
                     <p>应用程序使用称为<span class="bold">逻辑事务标识符（LTXID）</span>的概念来确定中断后数据库会话中打开的最后一个事务的结果。逻辑事务ID存储在OCI会话句柄和JDBC Thin和ODP.NET驱动程序的连接对象中。逻辑事务ID是最多一次语义的基础。
                     </p>
                     <p>Transaction Guard协议确保：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个逻辑事务的执行是唯一的。</p>
                        </li>
                        <li>
                           <p>在支持的提交时检测到重复，以确保对于所有提交点，不得绕过协议。</p>
                        </li>
                        <li>
                           <p>提交事务时，逻辑事务ID将在重试保留期间保持不变（默认值= 24小时，最长值= 30天）。</p>
                        </li>
                        <li>
                           <p>获取结果时，将阻止LTXID，以通过强制执行未提交状态来确保该LTXID的早期版本无法提交。如果已提交或强制使用具有相同LTXID的早期版本，则阻止LTXID将返回相同的结果。</p>
                        </li>
                     </ul>
                     <p>在会话建立时自动分配逻辑会话号。它是一个不透明的结构，应用程序无法读取。对于可伸缩性，每个LTXID都带有一个称为提交编号的运行编号，当为数据库的每次往返提交数据库事务时，该编号会增加。此运行提交编号从零开始。</p>
                  </div>
               </div><a id="ADFNS325"></a><div class="props_rev_3"><a id="GUID-1E1094F5-F8B2-49C3-B2C6-CF7AC2A3C9F7" name="GUID-1E1094F5-F8B2-49C3-B2C6-CF7AC2A3C9F7"></a><h4 id="ADFNS-GUID-1E1094F5-F8B2-49C3-B2C6-CF7AC2A3C9F7" class="sect4">最多执行一次</h4>
                  <div>
                     <p>Transaction Guard使用逻辑事务标识符（LTXID）来避免重复事务。这种确保最多一次执行事务的能力被称为<span class="italic">交易幂等性</span> 。LTXID在提交时保留，并在回滚后重用。在正常运行时期间，LTXID会自动保存在客户端和服务器的会话中，以用于每个数据库事务。在提交时，LTXID作为提交事务的一部分而持久化。
                     </p>
                     <p>最多一次的协议要求数据库在同意重播的保留期内保持LTXID。默认保留期为24小时，但您可能需要更短或更长的时间，可以想象甚至一周或更长时间。保留期越长，最多一次检查在重放时使用旧LTXID阻止旧事务的时间越长。每项服务都提供该设置。当涉及多个数据库时（如使用Data Guard和Active Data Guard的情况），LTXID将通过使用重做复制到涉及的每个数据库。</p>
                     <p>为Oracle JDBC Thin（具有类似的OCI，OCCI和ODP.NET客户端API）提供的<code class="codeph">getLTXID</code> API允许应用程序检索在死会话中使用的逻辑事务标识符。这是确定最后一笔交易的状态所必需的。
                     </p>
                     <p><code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code> PL / SQL子程序允许应用程序查找指定逻辑事务标识符的操作结果。调用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>可能涉及服务器阻止LTXID提交以便结果已知。如果使用该LTXID的交易正在进行或即将提交，则这是一项要求。使用Transaction Guard的应用程序在发生可恢复的错误后获取LTXID，然后在尝试重放之前调用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-1E1094F5-F8B2-49C3-B2C6-CF7AC2A3C9F7__NOTE-125-CBD01D09">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code> PL / SQL子程序的更多信息，请<a href="../arpls/DBMS_APP_CONT.html#ARPLS74292" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                     </div>
                  </div>
               </div><a id="ADFNS326"></a><div class="props_rev_3"><a id="GUID-2EA7BC0E-FA8B-43D6-89D5-45AFA040CCC4" name="GUID-2EA7BC0E-FA8B-43D6-89D5-45AFA040CCC4"></a><h4 id="ADFNS-GUID-2EA7BC0E-FA8B-43D6-89D5-45AFA040CCC4" class="sect4">交易保护范围</h4>
                  <div>
                     <p>您可以在系统中的每个数据库上使用Transaction Guard，包括在单实例数据库，Real Application Clusters，Data Guard和Active Data Guard之间重新启动和故障转移。</p>
                     <p>以下Oracle Database 12c配置支持Transaction Guard：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>单实例Oracle RDBMS</p>
                        </li>
                        <li>
                           <p>真正的应用集群</p>
                        </li>
                        <li>
                           <p>Data Guard</p>
                        </li>
                        <li>
                           <p>Active Data Guard</p>
                        </li>
                        <li>
                           <p>多租户包括拔出/插入和12.2重定位到PDB / CDB，但不包括“with clone”选项</p>
                        </li>
                        <li>
                           <p>用于上述数据库配置的全局数据服务</p>
                        </li>
                     </ul>
                     <p>Transaction Guard支持针对Oracle Database 12c的以下事务类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>本地交易</p>
                        </li>
                        <li>
                           <p>数据定义语言（DDL）事务</p>
                        </li>
                        <li>
                           <p>数据控制语言（DCL）事务</p>
                        </li>
                        <li>
                           <p>分布式事务</p>
                        </li>
                        <li>
                           <p>远程交易</p>
                        </li>
                        <li>
                           <p>并行交易</p>
                        </li>
                        <li>
                           <p>成功承诺（自动提交）</p>
                        </li>
                        <li>
                           <p>带有嵌入式提交支持的客户端驱动程序的PL / SQL</p>
                        </li>
                        <li>
                           <p>从Oracle Database 12c第2版（12.2.0.1）开始，使用单阶段优化的XA事务（包括XA提交标志TMONEPHASE和读取优化）</p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER SESSION SET</code> Container with Service子句，服务使用Transaction Guard</p>
                        </li>
                     </ul>
                     <p>Transaction Guard支持以下客户端驱动程序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>12 <span class="italic">c</span> JDBC type 4驱动程序</p>
                        </li>
                        <li>
                           <p>12 <span class="italic">c</span> OCI和OCCI客户端驱动程序</p>
                        </li>
                        <li>
                           <p>12 <span class="italic">c</span> Oracle Data Provider for .NET（ODP.NET），非托管驱动程序</p>
                        </li>
                        <li>
                           <p>12 <span class="italic">c</span> ODP.NET，ODAC 12 <span class="italic">c</span>版本4或更高版本中的托管驱动程序</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-71235BCD-DC4B-4466-BE65-8B0B02392666" name="GUID-71235BCD-DC4B-4466-BE65-8B0B02392666"></a><h4 id="ADFNS-GUID-71235BCD-DC4B-4466-BE65-8B0B02392666" class="sect4">具有XA事务的事务处理保护</h4>
                  <div>
                     <p></p>
                     <p>从Oracle Database 12.2发行版开始，Transaction Guard支持XA事务以确定一个阶段事务的结果。Transaction Guard支持在<code class="codeph">commit</code>操作期间使用TMONEPHASE的本地事务和XA事务。当应用程序发出使用<code class="codeph">TMTWOPHASE</code>的XA事务时，事务处理保护会为该事务禁用自身，并自动重新启用以为下一个事务做好准备。这允许Transaction Guard支持以下XA事务：</p>
                     <div class="p">
                        <ol>
                           <li>
                              <p>使用<code class="codeph">autocommit</code>本地事务</p>
                           </li>
                           <li>
                              <p>使用显式<code class="codeph">commit</code>本地事务 
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">TMONEPHASE</code>标志提交的XA事务</p>
                           </li>
                        </ol>
                     </div>
                     <p>TP监视器和应用程序可以使用Transaction Guard获取这些事务类型的<code class="codeph">commit</code>操作的结果。事务保护为外部管理的<code class="codeph">TMTWOPHASE</code>提交操作禁用自身，并自动为下一个事务重新启用。如果Transaction Guard API与<code class="codeph">TMTWOPHASE</code>事务一起使用， <code class="codeph">TMTWOPHASE</code>在禁用Transaction Guard时返回警告消息。TP监视器拥有<code class="codeph">TMTWOPHASE</code>事务的提交结果。此功能允许TP监视器返回<code class="codeph">TMONEPHASE</code>操作的明确结果。
                     </p>
                  </div>
               </div><a id="ADFNS331"></a><div class="props_rev_3"><a id="GUID-25E7E67C-49F6-4C1C-8227-075C2450ED85" name="GUID-25E7E67C-49F6-4C1C-8227-075C2450ED85"></a><h4 id="ADFNS-GUID-25E7E67C-49F6-4C1C-8227-075C2450ED85" class="sect4">交易保护除外</h4>
                  <div>
                     <p>Transaction Guard故意排除递归事务和自治事务，以便可以重新执行它们。</p>
                     <p>从Oracle Database 12 <span class="italic">c</span> Release 2开始，Transaction Guard也不包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>两个XA事务在外部进行管理。使用XA事务时，Transaction Guard维护单阶段XA事务的提交结果，并为外部管理的两阶段事务静默禁用自身，因为此结果由TP监视器拥有。</p>
                        </li>
                        <li>
                           <p>Active Data Guard，具有用于转发事务的读/写数据库链接</p>
                        </li>
                        <li>
                           <p>Golden Gate和Logical Standby用于确定逻辑数据库失败时的结果。Golden Gate和Logical Standby端点可以使用Transaction Guard</p>
                        </li>
                        <li>
                           <p>启用Transaction Guard后无法执行完全数据库导入。使用不带Transaction Guard的管理服务进行完整数据库导入。不排除用户和对象导入。</p>
                        </li>
                        <li>
                           <div class="p">TAF和Application Continuity在内部处理Transaction Guard。不要在以下位置对应用程序中的Transaction Guard进行编码：<ul style="list-style-type:disc">
                                 <li>
                                    <p>来自TAF的失败回归</p>
                                 </li>
                                 <li>
                                    <p>TAF回调TAF或OCI和ODP.NET的应用程序连续性</p>
                                 </li>
                                 <li>
                                    <p>适用于Java的Application Continuity的JDBC初始化回调</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                     <p>Transaction Guard排除了由复制技术维护的数据库之间的故障转移：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>复制到金门</p>
                        </li>
                        <li>
                           <p>复制到逻辑备用</p>
                        </li>
                        <li>
                           <p>PDB克隆子句（不包括PDB在线重定位12c第2版及更高版本）</p>
                        </li>
                        <li>
                           <p>所有第三方复制解决方案</p>
                        </li>
                     </ul>
                     <p>如果使用任何复制技术（如Golden Gate，Logical Standby或第三方复制）使用数据库副本，则在此配置中可能不会在主数据库和辅助数据库之间使用Transaction Guard。</p>
                     <p>您可以在参与复制的每个数据库上使用Transaction Guard。在这种情况下，每个数据库必须使用不同的数据库唯一标识符。使用V $ DATABASE获取每个数据库的DBID。</p>
                  </div>
               </div>
            </div><a id="ADFNS334"></a><a id="ADFNS332"></a><div class="props_rev_3"><a id="GUID-6868526F-C6BD-4886-A191-7A866673D31A" name="GUID-6868526F-C6BD-4886-A191-7A866673D31A"></a><h3 id="ADFNS-GUID-6868526F-C6BD-4886-A191-7A866673D31A" class="sect3">Transaction Guard的数据库配置</h3>
               <div>
                  <p>本节包含与配置数据库以使用Transaction Guard相关的信息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-6868526F-C6BD-4886-A191-7A866673D31A__GUID-BD749D70-AF7C-4D68-A529-230C822753AC">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="transaction-guard.html#GUID-7BBE0843-3820-4FFA-8C8F-01E5CAAF4F95">配置清单</a></p>
                        </li>
                        <li>
                           <p><a href="transaction-guard.html#GUID-92B85642-BA82-47A6-BFFF-F73DCCCB9CB5">交易历史表</a></p>
                        </li>
                        <li>
                           <p><a href="transaction-guard.html#GUID-35C1F88A-FDA2-4918-B73E-11F95E0E9BAA" title="如果您使用的是Oracle RAC或Oracle RAC One，请使用srvctl命令创建和修改服务。如果您使用的是Oracle RAC或Oracle RAC One，请使用srvctl命令创建和修改服务。">服务参数</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS335"></a><div class="props_rev_3"><a id="GUID-7BBE0843-3820-4FFA-8C8F-01E5CAAF4F95" name="GUID-7BBE0843-3820-4FFA-8C8F-01E5CAAF4F95"></a><h4 id="ADFNS-GUID-7BBE0843-3820-4FFA-8C8F-01E5CAAF4F95" class="sect4">配置清单</h4>
                  <div>
                     <p>要将Transaction Guard与应用程序一起使用，您必须执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.1）或更高版本。
                           </p>
                        </li>
                        <li>
                           <p>使用应用程序服务进行所有数据库工作。如果使用的是Oracle RAC，则使用<code class="codeph">srvctl</code>命令创建服务;如果不使用Oracle RAC，则使用<code class="codeph">DBMS_SERVICE.CREATE_SERVICE</code> PL / SQL子程序创建服务。</p>
                           <p><span class="italic"><span class="bold">不要</span></span>使用默认的数据库服务，因为这些服务是管理的目的，不能被操纵。也就是说，不要使用设置为<span class="italic">db_name</span>或<span class="italic">db_unique_name</span>的服务名称。
                           </p>
                        </li>
                        <li>
                           <p>将<code class="codeph">DBMS_APP_CONT</code>包的权限授予将调用<code class="codeph">GET_LTXID_OUTCOME</code>的数据库用户：</p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON DBMS_APP_CONT TO <span class="italic">&lt;user-name&gt;</span> ;</pre></li>
                        <li>
                           <p>如果将Transaction Guard与DDL语句一起使用，则增加<code class="codeph">DDL_LOCK_TIMEOUT</code> ..
                           </p>
                        </li>
                     </ul>
                     <p>要将Transaction Guard与应用程序一起使用，Oracle建议您执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>找到并定义事务历史记录表以获得最佳性能。</p>
                        </li>
                        <li>
                           <p>如果您使用的是Oracle RAC或Oracle Data Guard，请确保将FAN配置为在出错时快速与中断客户端进行通信。</p>
                        </li>
                        <li>
                           <p>设置以下参数： <code class="codeph">AQ_HA_NOTIFICATIONS = TRUE</code> （如果使用OCI FAN）。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-7BBE0843-3820-4FFA-8C8F-01E5CAAF4F95__NOTE-125-CBD0908D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">DDL_LOCK_TIMEOUT</code>更多信息，请<code class="codeph">DDL_LOCK_TIMEOUT</code> <a href="../refrn/DDL_LOCK_TIMEOUT.html#REFRN10267" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="transaction-guard.html#GUID-92B85642-BA82-47A6-BFFF-F73DCCCB9CB5">交易历史表</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS337"></a><div class="props_rev_3"><a id="GUID-92B85642-BA82-47A6-BFFF-F73DCCCB9CB5" name="GUID-92B85642-BA82-47A6-BFFF-F73DCCCB9CB5"></a><h4 id="ADFNS-GUID-92B85642-BA82-47A6-BFFF-F73DCCCB9CB5" class="sect4">交易历史表</h4>
                  <div>
                     <p>事务历史表维护逻辑事务标识符（LTXID）到数据库事务的映射。只有具有DBA权限的数据库用户才能访问此表。它由Oracle数据库自动维护，用户不得直接针对事务历史记录表发出DDL或DML语句。</p>
                     <p>在数据库创建和升级时，默认情况下会在SYSAUX表空间中创建事务历史记录表（LTXID_TRANS）。使用最后一个分区的存储添加实例时会添加新分区。但是，如果此表空间的位置不是性能的最佳位置，则DBA可以将分区移动到另一个表空间。例如，以下语句更改事务历史记录表以将其移动到名为<code class="codeph">FastPace</code>的表空间：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE LTXID_TRANS移动分区LTXID_TRANS_4表空间FastPace存储（初始10G接下来的10G minextents 1 maxextents 121）;</pre><div class="infoboxnotealso" id="GUID-92B85642-BA82-47A6-BFFF-F73DCCCB9CB5__GUID-B5B110DB-C32D-4AAC-BD6B-6715CBB0FFBB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">ALTER TABLE</code>语句的信息，请<a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS339"></a><a id="ADFNS340"></a><a id="ADFNS342"></a><a id="ADFNS338"></a><div class="props_rev_3"><a id="GUID-35C1F88A-FDA2-4918-B73E-11F95E0E9BAA" name="GUID-35C1F88A-FDA2-4918-B73E-11F95E0E9BAA"></a><h4 id="ADFNS-GUID-35C1F88A-FDA2-4918-B73E-11F95E0E9BAA" class="sect4">服务参数</h4>
                  <div>
                     <p>配置提交结果和保留的服务。</p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">COMMIT_OUTCOME = TRUE RETENTION_TIMEOUT = <span class="italic">&lt;retention-value&gt;</span>
</pre><p><code class="codeph">COMMIT_OUTCOME</code>确定在执行提交后是否可以访问事务提交结果。此功能使提交的结果持久，并且应用程序使用它来强制执行在中断之前执行的最后一个事务的状态。该功能由Oracle重放驱动程序和WebLogic Server在内部使用，并且可供其他应用程序使用以确定结果。<code class="codeph">COMMIT_OUTCOME</code>可能的值为<code class="codeph">FALSE</code> （默认值）和<code class="codeph">TRUE</code> ，并且值必须为<code class="codeph">TRUE</code>才能使Transaction Guard生效。
                     </p>
                     <p>以下注意事项适用于<code class="codeph">COMMIT_OUTCOME</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>过程要求<code class="codeph">COMMIT_OUTCOME</code>为<code class="codeph">TRUE</code> 。</p>
                        </li>
                        <li>
                           <p><code class="codeph">COMMIT_OUTCOME</code>对Active Data Guard和只读数据库没有影响。使用带有读/写Active Guard的Transaction Guard与不转发DML的数据库链接相结合。
                           </p>
                        </li>
                        <li>
                           <p>用户定义的数据库服务允许<code class="codeph">COMMIT_OUTCOME</code> 。排除了对数据库服务的使用，因为此服务不会切换到Data Guard，也无法在主数据库的计划中断时启动，停止或禁用。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">RETENTION_TIMEOUT</code>与<code class="codeph">COMMIT_OUTCOME</code>结合使用以设置保留提交结果的时间量。保留超时值以秒为单位指定;默认值为86400（24小时），最大值为2592000（30天）。您可以使用srvctl命令或<code class="codeph">DBMS_SERVICE</code> PL / SQL包指定保留超时值。
                     </p>
                     <div class="infoboxnotealso" id="GUID-35C1F88A-FDA2-4918-B73E-11F95E0E9BAA__GUID-2453CA3E-5AF0-4371-8CDA-AA22ABF264DA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#ADMIN5013" target="_blank"><code class="codeph">srvctl add service</code></a>和<a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#ADMIN5047" target="_blank"><code class="codeph">srvctl modify service</code></a>命令的信息，请<a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#ADMIN5013" target="_blank"><code class="codeph">srvctl add service</code></a> <span class="italic">“Oracle数据库管理员指南”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBMS_SERVICE</code>包的信息，请<code class="codeph">DBMS_SERVICE</code> <a href="../arpls/DBMS_SERVICE.html#ARPLS092" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>过程的详细信息，请参阅<a href="../arpls/DBMS_APP_CONT.html#ARPLS73456" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DD955A62-9BBA-4829-97ED-31926D82F057" name="GUID-DD955A62-9BBA-4829-97ED-31926D82F057"></a><h5 id="ADFNS-GUID-DD955A62-9BBA-4829-97ED-31926D82F057" class="sect5">示例：为服务器池添加和修改服务</h5>
                     <div>
                        <p>如果您使用的是Oracle RAC或Oracle RAC One，请使用<code class="codeph">srvctl</code>命令创建和修改服务。
                        </p>
                        <p><a href="transaction-guard.html#GUID-DD955A62-9BBA-4829-97ED-31926D82F057__BABFDBGJ">例28-1</a>显示了<code class="codeph">srvctl</code>的用法。您还可以使用全局数据服务（GDSCTL）。
                        </p>
                        <div class="example" id="GUID-DD955A62-9BBA-4829-97ED-31926D82F057__BABFDBGJ">
                           <p class="titleinexample">示例28-1为服务器池添加和修改服务</p><pre class="oac_no_warn" dir="ltr">srvctl add service -database orcl -service GOLD -poolname ora。Srvpool -commit_outcome TRUE -retention 604800 srvctl修改服务-database orcl -service GOLD -commit_outcome TRUE -retention 604800</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2E3CBDBF-5F6A-4BCF-947F-A3E3C455AE00" name="GUID-2E3CBDBF-5F6A-4BCF-947F-A3E3C455AE00"></a><h5 id="ADFNS-GUID-2E3CBDBF-5F6A-4BCF-947F-A3E3C455AE00" class="sect5">示例：添加管理员托管服务</h5>
                     <div>
                        <p>如果您使用的是Oracle RAC或Oracle RAC One，请使用<code class="codeph">srvctl</code>命令创建和修改服务。
                        </p>
                        <p><a href="transaction-guard.html#GUID-2E3CBDBF-5F6A-4BCF-947F-A3E3C455AE00__BABECCJJ">例28-2</a>显示了<code class="codeph">srvctl</code>的用法。您还可以使用全球数据服务（GDSCTL）</p>
                        <div class="example" id="GUID-2E3CBDBF-5F6A-4BCF-947F-A3E3C455AE00__BABECCJJ">
                           <p class="titleinexample">示例28-2添加管理员托管服务</p><pre class="oac_no_warn" dir="ltr">srvctl add service -database codedb -service GOLD -preferred serv1 -available serv2 -commit_outcome TRUE -retention 604800</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8B241409-D9B7-434D-B3DA-6EE9A5B11A0A" name="GUID-8B241409-D9B7-434D-B3DA-6EE9A5B11A0A"></a><h5 id="ADFNS-GUID-8B241409-D9B7-434D-B3DA-6EE9A5B11A0A" class="sect5">示例：修改服务（PL / SQL）</h5>
                     <div>
                        <p>如果您使用的是单实例数据库，请使用<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code> PL / SQL过程来修改服务并使用FAN。</p>
                        <p><a href="transaction-guard.html#GUID-8B241409-D9B7-434D-B3DA-6EE9A5B11A0A__BABIGBHI">示例28-3</a>修改了服务（但替换了<code class="codeph">&lt;service-name&gt;</code>的实际服务名称）。
                        </p>
                        <div class="example" id="GUID-8B241409-D9B7-434D-B3DA-6EE9A5B11A0A__BABIGBHI">
                           <p class="titleinexample">示例28-3修改服务（PL / SQL）</p><pre class="pre codeblock"><code>DECLARE params dbms_service.svc_parameter_array; BEGIN params（'COMMIT_OUTCOME'）：='true'; PARAMS（ 'RETENTION_TIMEOUT'）：= 604800; PARAMS（ 'aq_ha_notifications'）：= '真'; dbms_service.modify_service（' <span class="italic">&lt;service-name&gt;</span> '，params）;结束; /</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS351"></a><a id="ADFNS344"></a><div class="props_rev_3"><a id="GUID-70A0E0F0-1B2D-4CBC-A318-C52FC2099B88" name="GUID-70A0E0F0-1B2D-4CBC-A318-C52FC2099B88"></a><h3 id="ADFNS-GUID-70A0E0F0-1B2D-4CBC-A318-C52FC2099B88" class="sect3">开发使用Transaction Guard的应用程序</h3>
               <div>
                  <div class="section">
                     <p>要使用Transaction Guard，请查看<a href="transaction-guard.html#GUID-7BBE0843-3820-4FFA-8C8F-01E5CAAF4F95">配置清单中</a>的要求和建议，并在发生可恢复错误时在错误处理中执行以下步骤：</p>
                     <div class="infoboxnote" id="GUID-70A0E0F0-1B2D-4CBC-A318-C52FC2099B88__GUID-3880AC05-B4A5-4147-8D50-43E8A4ABCD0F">
                        <p class="notep1">注意：</p>如果您使用的是TAF，请跳至<a href="transaction-guard.html#GUID-23BD4194-D13F-41F3-87D0-A8766E15E44D">事务保护和透明应用程序故障转移</a> 。
                     </div>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>检查错误是否是导致数据库会话不可用的可恢复错误。</span></li>
                     <li><span>使用客户端驱动程序提供的API（以前失败的会话获取LTXID <code class="codeph">getLTXID</code>为JDBC， <code class="codeph">OCI_ATTR_GET</code>与LTXID的OCI和<code class="codeph">LogicalTransactionId</code>为ODP.NET）。</span></li>
                     <li><span>使用该会话自己的LTXID获取新会话。</span></li>
                     <li><span>使用从API获取的LTXID调用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code> PL / SQL过程。返回状态告诉驱动程序最后一个事务是<code class="codeph">COMMITTED (TRUE/FALSE)</code>还是<code class="codeph">USER_CALL_COMPLETED (TRUE/FALSE)</code> 。如果客户端和数据库不同步（例如，不是相同的数据库或已还原的数据库），则此PL / SQL函数将返回错误。</span></li>
                     <li><span>应用程序可以将结果返回给用户来决定。应用程序可以重放自己。如果重放本身导致中断，则重放会话的LTXID用于<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>过程。</span></li>
                  </ol>
               </div><a id="ADFNS376"></a><div class="props_rev_3"><a id="GUID-B63610D4-BC72-42FB-A8AA-23E2B7429249" name="GUID-B63610D4-BC72-42FB-A8AA-23E2B7429249"></a><h4 id="ADFNS-GUID-B63610D4-BC72-42FB-A8AA-23E2B7429249" class="sect4">典型的交易保护用法</h4>
                  <div>
                     <p>以下伪代码显示了Transaction Guard的典型用法：</p><pre class="oac_no_warn" dir="ltr">接收FAN down事件（或可恢复的错误）FAN中止死会话如果可恢复错误（OCI的新OCI_ATTRIBUTE，对于JDBC是可恢复的）使用getLTXID或从您的回调获取来自死会话的最后一个LTXID获取新会话使用最后一个LTXID调用GET_LTXID_OUTCOME获取COMMITTED和USER_CALL_COMPLETED状态如果COMMITTED和USER_CALL_COMPLETED然后返回结果ELSEIF COMMITTED而不是USER_CALL_COMPLETED然后返回结果并发出警告（未返回绑定或行计数等详细信息）ELSEIF NOT COMMITTED清理并重新提交请求，或返回未提交的结果客户端</pre></div>
               </div><a id="ADFNS1031"></a><a id="ADFNS1030"></a><div class="props_rev_3"><a id="GUID-FA7D4C7B-1E43-45F7-B22F-B38B054E739E" name="GUID-FA7D4C7B-1E43-45F7-B22F-B38B054E739E"></a><h4 id="ADFNS-GUID-FA7D4C7B-1E43-45F7-B22F-B38B054E739E" class="sect4">使用LTXID的详细信息</h4>
                  <div>
                     <p>对于重放和返回结果，应用程序或第三方容器需要访问要在服务器上为每个会话提交的下一个LTXID。在可恢复的中断之后，可以使用API（ <code class="codeph">getLTXID</code> JDBC的<code class="codeph">OCI_ATTR_GET</code>和具有LTXID for OCI的OCI_ATTR_GET）从失败的会话获取LTXID。
                     </p>
                     <p>JDBC Thin驱动程序还提供了一个回调，该回调在从数据库接收的每个提交编号更改时执行。如果需要进行故障转移，第三方容器可以使用此回调来保存当前的LTXID以备使用。在每个会话中，当前的LTXID正在使用中，因此回调可以覆盖之前的回调。</p>
                     <p>如果故障转移级联而未完成（即，如果在从一次故障恢复期间发生另一次故障），则应用程序<span class="italic"><span class="bold">必须</span></span>获取然后将当前会话中生效的LTXID传递到<code class="codeph">GET_LTXID_OUTCOME</code> 。</p>
                     <p><a href="transaction-guard.html#GUID-FA7D4C7B-1E43-45F7-B22F-B38B054E739E__BABIABIB" title="LTXID条件或情况，应用程序操作和下一个要使用的LTXID">表28-1</a>显示了需要执行某些与LTXID相关的操作的几个条件或情况，以及每个应用程序操作和下一个LTXID要使用的操作。
                     </p>
                     <div class="tblformal" id="GUID-FA7D4C7B-1E43-45F7-B22F-B38B054E739E__BABIABIB">
                        <p class="titleintable">表28-1 LTXID条件或情况，应用程序操作和下一个要使用的LTXID</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LTXID条件或情境，应用程序操作和下一个要使用的LTXID" width="100%" border="1" summary="LTXID Conditions or Situations, Application Actions, and Next LTXID to Use" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d171031e2611">条件或情况</th>
                                 <th align="left" valign="bottom" width="33%" id="d171031e2614">申请行动</th>
                                 <th align="left" valign="bottom" width="42%" id="d171031e2617">下一个要使用的LTXID（容器的LTXID更改回调 - 仅限JDBC瘦）</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d171031e2622" headers="d171031e2611 ">
                                    <p>应用程序收到可恢复的错误并调用<code class="codeph">GET_LTXID_OUTCOME</code>来确定事务状态。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d171031e2622 d171031e2614 ">
                                    <p>应用程序采用新连接（使用自己的LTXID-B 0）并使用上次失败会话（LTXID-A）的LTXID调用<code class="codeph">GET_LTXID_OUTCOME</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="42%" headers="d171031e2622 d171031e2617 ">
                                    <p>新LTXID-B 0</p>
                                    <p>还在注册时使用JDBC回调进行设置</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d171031e2640" headers="d171031e2611 ">
                                    <p>应用程序发现上次会话事务状态为<code class="codeph">COMMITTED</code>和<code class="codeph">USER_CALL_COMPLETED</code> 。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d171031e2640 d171031e2614 ">
                                    <p>将提交状态返回给客户端;应用程序可能会继续。</p>
                                 </td>
                                 <td align="left" valign="top" width="42%" headers="d171031e2640 d171031e2617 ">
                                    <p>（不适用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d171031e2656" headers="d171031e2611 ">
                                    <p>应用程序发现上次会话事务状态为<code class="codeph">COMMITTED</code>而不是<code class="codeph">USER_CALL_COMPLETED</code> 。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d171031e2656 d171031e2614 ">
                                    <p>将已提交状态返回给客户端并退出 - 由于调用中的工作未完成，某些应用程序无法进行。 （例如，未返回out绑定或行计数）。应用程序是否可以继续取决于应用程序。</p>
                                 </td>
                                 <td align="left" valign="top" width="42%" headers="d171031e2656 d171031e2617 ">
                                    <p>（不适用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d171031e2672" headers="d171031e2611 ">
                                    <p>应用程序发现上次会话事务状态为“未<code class="codeph">NOT COMMITTED</code> 。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d171031e2672 d171031e2614 ">
                                    <p>应用程序将结果返回给用户，或者根据需要进行清理，然后在有效的新会话LTXID-B 0上使用LTXID重新提交。</p>
                                    <p>如果新请求执行任何提交，则服务器返回具有LTXID-B 2并且增加的提交消息。</p>
                                 </td>
                                 <td align="left" valign="top" width="42%" headers="d171031e2672 d171031e2617 ">
                                    <p>新LTXID-B 2 ..ñ</p>
                                    <p>还在注册时使用JDBC回调进行设置</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d171031e2689" headers="d171031e2611 ">
                                    <p>如果应用程序已决定重播，则会收到可恢复的错误。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d171031e2689 d171031e2614 ">
                                    <p>应用程序采用新连接（使用LTXID-C 0）并使用LAST会话的LTXID（LTXID-B N）调用<code class="codeph">GET_LTXID_OUTCOME</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="42%" headers="d171031e2689 d171031e2617 ">
                                    <p>新会话中的LTXID-C 0。</p>
                                    <p>还在注册时使用JDBC回调进行设置</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d171031e2704" headers="d171031e2611 ">
                                    <p>如果应用程序已决定重播，则会收到另一个可恢复的错误。</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d171031e2704 d171031e2614 ">
                                    <p>应用程序采用新连接（使用LTXID-D 0）并使用LAST会话的LTXID（LTXID-C N）再次调用<code class="codeph">GET_LTXID_OUTCOME</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="42%" headers="d171031e2704 d171031e2617 ">
                                    <p>新会话中的LTXID-D 0。</p>
                                    <p>还在注册时使用JDBC回调进行设置</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-23BD4194-D13F-41F3-87D0-A8766E15E44D" name="GUID-23BD4194-D13F-41F3-87D0-A8766E15E44D"></a><h4 id="ADFNS-GUID-23BD4194-D13F-41F3-87D0-A8766E15E44D" class="sect4">事务保护和透明应用程序故障转移</h4>
                  <div>
                     <p></p>
                     <p>使用Transaction Guard启用透明应用程序故障转移（TAF）时，TAF会为开发人员处理错误。使用TAF时不要对Transaction Guard进行编码，因为它已从Oracle Database 12 <span class="italic">c</span> Release 1（12.1.0.1）开始嵌入了Transaction Guard代码。当使用TAF和Transaction Guard时，开发人员可以使用以下TAF错误进行回滚并安全地重新提交，或者返回未提交的错误。
                     </p>
                     <div class="p">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ORA-25402</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-25408</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ORA-25405</code></p>
                           </li>
                        </ul>
                     </div>
                     <p>当启用TAF时，开发人员不得直接使用<code class="codeph">GET_LTXID_OUTCOME</code>过程，因为TAF已在处理Transaction Guard。
                     </p>
                     <div class="infoboxnote" id="GUID-23BD4194-D13F-41F3-87D0-A8766E15E44D__GUID-C914F069-60B3-4585-9ED7-EEFF685EA608">
                        <p class="notep1">注意：</p>
                        <p>会话失败时不调用TAF（这包括操作系统级别的“kill -9”或<code class="codeph">ALTER SYSTEM KILL</code>会话）。在以下条件下调用TAF：</p>
                        <div class="p">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">INSTANCE</code>失败</p>
                              </li>
                              <li>
                                 <p><code class="codeph">FAN NODE DOWN</code>活动</p>
                              </li>
                              <li>
                                 <p><code class="codeph">SHUTDOWN</code>交易</p>
                              </li>
                              <li>
                                 <p>断开<code class="codeph">POST_TRANSACTION</code></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8BA4F2BD-D12F-4CA2-8D58-623810D45B66" name="GUID-8BA4F2BD-D12F-4CA2-8D58-623810D45B66"></a><h4 id="ADFNS-GUID-8BA4F2BD-D12F-4CA2-8D58-623810D45B66" class="sect4">在ODP.NET中使用Transaction Guard</h4>
                  <div>
                     <p>以下规则适用于在ODP.NET中使用Transaction Guard：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在两个ODP.NET提供程序中升级到XA后，LTXID不可用。</p>
                        </li>
                        <li>
                           <p>从Oracle Database 12c第2版（12.2.0.1）开始，ODP.NET根据应用程序的可用性和处理能力处理应用程序的Transaction Guard。使用ODP.NET时，只有当ODP.NET无法代表应用程序获取提交结果时，LTXID才会暴露给应用程序。例如，在向Data Guard的扩展故障转移期间。</p>
                        </li>
                        <li>
                           <p>开发人员不得在TAF回调或JDBC初始化回调中编写Transaction Guard。交易警卫是为您处理的。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS1086"></a><div class="props_rev_3"><a id="GUID-D6581DF9-A210-46D4-9595-9CA822D2B8FF" name="GUID-D6581DF9-A210-46D4-9595-9CA822D2B8FF"></a><h4 id="ADFNS-GUID-D6581DF9-A210-46D4-9595-9CA822D2B8FF" class="sect4">连接池LTXID用法</h4>
                  <div>
                     <p>连接池为管理LTXID创建了不同的用例，因为连接和会话已预先建立和共享。在最简单的连接池和中间层模型中，每个会话句柄（客户端会话）上都存在LTXID。它在签出时从连接池与应用程序请求相关联，并在签入时与应用程序请求取消关联回池。在签出和签入之间，会话上的LTXID由该应用程序请求独占。签入后，LTXID属于空闲的池化会话。它与下一个检出该连接的应用程序请求相关联。</p>
                     <p>以这种方式使用Transaction Guard：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以支持当前HTTP请求的重复检测和故障转移</p>
                        </li>
                        <li>
                           <p>允许取消（实际<code class="codeph">Cancel</code>操作而不是<span class="uicontrol bold">Ctrl-C</span> ）超时请求，以及应用程序可选的重新提交</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1256CC67-2F1B-4C3F-9E76-C0AB81EECAF6" name="GUID-1256CC67-2F1B-4C3F-9E76-C0AB81EECAF6"></a><h4 id="ADFNS-GUID-1256CC67-2F1B-4C3F-9E76-C0AB81EECAF6" class="sect4">改进了XA单阶段优化的承诺结果</h4>
                  <div>
                     <p></p>
                     <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）开始，Transaction Guard与事务处理监视器（TPM）一起使用，以确定使用单阶段优化（TMONEPLHASE标志）时提交操作的结果。Transaction Guard使用<code class="codeph">GET_LTXID_OUTCOME</code>包来帮助TPM确定与资源管理器的连接是否丢失或是否返回了模糊错误。
                     </p>
                     <p></p>
                     <div class="tblformal" id="GUID-1256CC67-2F1B-4C3F-9E76-C0AB81EECAF6__TRANSACTIONMANAGERCONDITIONSSITUATI-4DB5AA6A">
                        <p class="titleintable">表28-2事务管理器条件/情况和操作</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="事务管理器条件/情况和操作" width="100%" border="1" summary="This table shows various transaction conditions or situations that are addressed by the Transaction Manager." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d171031e3205">条件或情况</th>
                                 <th align="left" valign="bottom" id="d171031e3208">事务管理器操作</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d171031e3213" headers="d171031e3205 ">
                                    <p>如果事务已回滚，则尚未发出<code class="codeph">Commit</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d171031e3213 d171031e3208 ">
                                    <p>事务管理器返回<code class="codeph">rollback</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d171031e3225" headers="d171031e3205 ">
                                    <p>已发出<code class="codeph">Commit</code> ，如果返回模糊结果。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d171031e3225 d171031e3208 ">
                                    <p>事务管理器可以使用事务防护（XA）来确定错误可恢复时的结果。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d171031e3234" headers="d171031e3205 ">
                                    <p>如果事务是<code class="codeph">COMMITTED</code> 。</p>
                                 </td>
                                 <td align="left" valign="top" headers="d171031e3234 d171031e3208 ">
                                    <p>事务管理器返回<code class="codeph">COMMITTED</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d171031e3247" headers="d171031e3205 ">
                                    <p>如果交易<code class="codeph">UNCOMMITTED</code> 。</p>
                                 </td>
                                 <td align="left" valign="top" headers="d171031e3247 d171031e3208 ">
                                    <p>事务管理器借用新连接并重新发出<code class="codeph">COMMIT</code> 。原来<code class="codeph">LTXID</code>通过调用阻塞<code class="codeph">GET_LTXID_OUTCOME</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADFNS365"></a><div class="props_rev_3"><a id="GUID-0466C5BB-9CC8-43B4-B46A-D51324660B48" name="GUID-0466C5BB-9CC8-43B4-B46A-D51324660B48"></a><h4 id="ADFNS-GUID-0466C5BB-9CC8-43B4-B46A-D51324660B48" class="sect4">交易保护开发的附加要求</h4>
                  <div>
                     <p>Transaction Guard是开发人员在可恢复错误之后使用以提供已知结果的工具。当返回错误指示最后一个会话已死时，必须使用它。</p>
                     <p>在以下情况下， <span class="italic">不得</span>使用Transaction Guard API：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不要在当前会话中使用<code class="codeph">GET_LTXID_OUTCOME</code> 。它将返回错误。
                           </p>
                        </li>
                        <li>
                           <p>不要对没有收到可恢复错误的会话使用<code class="codeph">GET_LTXID_OUTCOME</code> ，即实时会话。它会阻止该会话提交。
                           </p>
                        </li>
                        <li>
                           <p>不要使用来自其他用户或其他数据库的<code class="codeph">GET_LTXID_OUTCOME</code> 。它将返回错误。
                           </p>
                        </li>
                        <li>
                           <p>请勿获取LTXID并将其保存以供日后使用，而不是立即使用。<code class="codeph">GET_LTXID_OUTCOME</code>的结果仅对上次打开或已完成的事务有效。如果它与同一会话中的早期事务一起使用，则会返回错误。
                           </p>
                        </li>
                        <li>
                           <p>如果应用程序使用TAF，请不要对Transaction Guard进行编码。使用新的TAF错误代码来返回结果。</p>
                           <div class="p">
                              <div class="infoboxnote" id="GUID-0466C5BB-9CC8-43B4-B46A-D51324660B48__GUID-7A2A8BFC-D55A-4ED0-81BF-2B4F12EBC190">
                                 <p class="notep1">注意：</p>此规则不适用于应用程序连续性。
                              </div>
                           </div>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-0466C5BB-9CC8-43B4-B46A-D51324660B48__NOTE-124-CBD14D6A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="transaction-guard.html#GUID-23BD4194-D13F-41F3-87D0-A8766E15E44D">事务保护和透明应用程序故障转移</a>有关TAF的更多信息</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1062"></a><div class="props_rev_3"><a id="GUID-1FAF5D75-6E7A-4AB8-868C-5A9D4847D6E9" name="GUID-1FAF5D75-6E7A-4AB8-868C-5A9D4847D6E9"></a><h3 id="ADFNS-GUID-1FAF5D75-6E7A-4AB8-868C-5A9D4847D6E9" class="sect3">交易保护及其与应用连续性的关系</h3>
               <div>
                  <p>Transaction Guard为每个数据库事务提供唯一标识符（LTXID）。此标识符可用于查询事务的提交结果，也可用于确保事务仅应用一次。Transaction Guard由Application Continuity使用并由其自动启用，但也可以单独启用。Transaction Guard可防止应用程序连续性重播的事务被多次应用。如果应用程序已实现应用程序级重放，则需要将应用程序与事务防护集成以提供幂等性。</p>
                  <p>对于不需要编码的解决方案，请将应用程序配置为使用应用程序连续性。为了开发自己的重放，应用程序开发人员使用Transaction Guard进行编码。您可以为Transaction Guard和Application Continuity编写一个应用程序。Application Continuity首先生效，自定义Transaction Guard代码仅在Application Continuity无法重播时生效。它不需要同时使用，但是，如果应用程序同时使用Transaction Guard和Application Continuity，它们是兼容的。如果应用程序希望在Application Continuity之外添加Transaction Guard API，则Transaction Guard可以在禁用重放或不成功时返回提交结果。</p>
                  <div class="infoboxnotealso" id="GUID-1FAF5D75-6E7A-4AB8-868C-5A9D4847D6E9__GUID-6224A83B-0F82-4137-8DB3-545F77DBCD31">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../racad/design-and-deployment-techniques.html#RACAD967" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”，</span></a>以获取有关使用Oracle RAC的事务防护和应用程序连续性的信息</p>
                        </li>
                        <li>
                           <p>有关使用JDBC连接数据库的信息，请参见<a href="../jjdbc/introducing-JDBC.html#JJDBC-GUID-864DB502-5E50-4044-8132-33D6AAF8927A" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                        </li>
                        <li>
                           <p><a href="../lnoci/managing-scalable-platforms.html#LNOCI08100" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> ，了解有关使用Oracle Call Interface（OCI）连接数据库的信息</p>
                        </li>
                        <li>
                           <p>有关ODP.Net驱动程序的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ODPNT-GUID-635BAE6C-7D0B-4CF2-ADD8-8DB531B9C52E" target="_blank"><span class="italic">适用于Microsoft Windows的Oracle数据提供程序开发人员指南</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="09630.creating-oracle-data-guard-logical-standby.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks."></meta>
      <meta name="description" content="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks."></meta>
      <title>创建逻辑备用数据库</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="creating-oracle-data-guard-physical-standby.html" title="Previous" type="text/html"></link>
      <link rel="next" href="creating-oracle-data-guard-far-sync-instance.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-oracle-data-guard-physical-standby.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="creating-oracle-data-guard-far-sync-instance.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建逻辑备用数据库</li>
            </ol>
            <a id="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E" name="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E"></a><a id="SBYDB00300"></a>
            
            <h2 id="SBYDB-GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E" class="sect2"><span class="enumeration_chapter">4</span>创建逻辑备用数据库</h2>
         </header>
         <div class="ind">
            <div>
               <p>创建逻辑备用数据库涉及许多步骤，包括先决条件和创建后任务。</p>
               <p>有关创建逻辑备用数据库的信息，请参阅以下主题。<a id="d10791e72" class="indexterm-anchor"></a><a id="d10791e76" class="indexterm-anchor"></a></p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579" title="在创建逻辑备用数据库之前，必须首先确保已正确配置主数据库。">创建逻辑备用数据库的先决条件</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027" title="这些是您创建逻辑备用数据库时执行的任务。">创建逻辑备用数据库的分步说明</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C">创作后的步骤</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" title="您可以创建多租户容器数据库（CDB）的逻辑备用数据库，就像创建常规主数据库的逻辑备用数据库一样。">创建CDB的逻辑备用</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E__GUID-F13D846B-013D-42F8-B9F4-C658F70C212D">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11117" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关创建和使用服务器参数文件的信息</p>
                     </li>
                     <li>
                        <p>Oracle Enterprise Manager Cloud Control联机帮助系统，提供有关使用Oracle Data Guard代理图形用户界面（GUI）自动创建逻辑备用数据库的信息。</p>
                     </li>
                  </ul>
               </div>
               <div class="infoboxnote" id="GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E__GUID-311085FA-B5ED-4CA6-9D06-3A7C0249ED76">
                  <p class="notep1">注意：</p>
                  <p>如果您在多租户容器数据库（CDB）环境中工作，请参阅<a href="creating-oracle-data-guard-logical-standby.html#GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" title="您可以创建多租户容器数据库（CDB）的逻辑备用数据库，就像创建常规主数据库的逻辑备用数据库一样。">创建CDB的逻辑备用，</a>以获取有关非CDB环境的行为差异的信息。例如，在CDB环境中，许多DBA视图都有类似的CDB视图，您应该使用它们。例如，视图<code class="codeph">CDB_LOGSTDBY_NOT_UNIQUE</code>包含与<code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code>视图中显示的数据相同的数据，但它有一个指示PDB名称的附加列。
                  </p>
               </div>
            </div><a id="SBYDB5020"></a><a id="SBYDB4730"></a><div class="props_rev_3"><a id="GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579" name="GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579"></a><h3 id="SBYDB-GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579" class="sect3"><span class="enumeration_section">4.1</span>创建逻辑备用数据库的前提条件</h3>
               <div>
                  <p>在创建逻辑备用数据库之前，必须首先确保已正确配置主数据库。</p>
                  <p>在主数据库上执行以下任务以准备创建逻辑备用数据库：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C" title="在设置逻辑备用数据库之前，请确保逻辑备用数据库可以维护主数据库中的数据类型和表。">确定对表的数据类型和存储属性的支持</a></p>
                     </li>
                     <li>
                        <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-C238335E-8383-43F1-B5B1-709A2A619C30" title="主数据库生成的重做记录中包含的ROWID不能用于标识逻辑备用数据库中的相应行。">确保可以唯一标识主数据库中的表行</a></p>
                     </li>
                  </ul>
                  <p>逻辑备用数据库使用备用重做日志（SRL）进行从主数据库接收的重做，并在将更改应用于备用数据库时写入联机重做日志（ORL）。因此，逻辑备用数据库通常需要额外的<code class="codeph">ARC</code> <span class="italic">n</span>进程来同时归档SRL和ORL。此外，由于ORL的归档优先于SRL的归档，因此在非常高的工作负载期间，逻辑备用数据库上可能需要更多的SRL。
                  </p>
                  <div class="infoboxnote" id="GUID-ACF65D75-F057-4C09-9D59-DFAE7D647579__GUID-2FB1B496-0F09-4C15-BA29-8E87292802DA">
                     <p class="notep1">注意：</p>逻辑备用数据库必须以<code class="codeph">ARCHIVELOG</code>模式运行才能执行备用重做日志存档。
                     <p>有关存档的信息，请参见“ <a href="../admin/managing-archived-redo-log-files.html#ADMIN008" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                     </p>
                  </div>
               </div><a id="SBYDB4731"></a><div class="props_rev_3"><a id="GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C" name="GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C"></a><h4 id="SBYDB-GUID-5F1713AF-8813-4132-A9F7-D91A84231C9C" class="sect4"><span class="enumeration_section">4.1.1</span>确定对表的数据类型和存储属性的支持</h4>
                  <div>
                     <p>在设置逻辑备用数据库之前，请确保逻辑备用数据库可以维护主数据库中的数据类型和表。</p>
                     <div class="section">
                        <p>有关可用于确定是否存在任何不受支持的数据类型或存储属性的特定SQL查询的信息，请参阅<a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-291FD74A-165A-4E80-9E1F-66996F1FC6CA" title="在创建逻辑备用数据库之前，必须在主数据库上标识不受支持的数据库对象。">不支持的表</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB00308"></a><div class="props_rev_3"><a id="GUID-C238335E-8383-43F1-B5B1-709A2A619C30" name="GUID-C238335E-8383-43F1-B5B1-709A2A619C30"></a><h4 id="SBYDB-GUID-C238335E-8383-43F1-B5B1-709A2A619C30" class="sect4"><span class="enumeration_section">4.1.2</span>确保可以唯一标识主数据库中的表行</h4>
                  <div>
                     <p>主数据库生成的重做记录中包含的ROWID不能用于标识逻辑备用数据库中的相应行。</p>
                     <div class="section">
                        <p>这是因为逻辑备用数据库中的物理组织与主数据库的物理组织不同，即使逻辑备用数据库是从主数据库的备份副本创建的。</p>
                        <p>Oracle使用主键或唯一约束/索引补充日志记录来逻辑标识逻辑备用数据库中的已修改行。启用数据库范围的主键和唯一约束/索引补充日志记录时，每个<code class="codeph">UPDATE</code>语句还会写入重做日志中所需的列值，以唯一标识逻辑备用数据库中的已修改行。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果表定义了主键，则将主键与修改后的列一起记录为<code class="codeph">UPDATE</code>语句的一部分，以标识已修改的行。
                              </p>
                           </li>
                           <li>
                              <p>在没有主键的情况下，将最短的非空唯一约束/索引与修改的列一起记录为<code class="codeph">UPDATE</code>语句的一部分，以标识修改的行。
                              </p>
                           </li>
                           <li>
                              <p>如果没有主键且没有非空唯一约束/索引，则将声明最大长度为4000字节的所有列记录为<code class="codeph">UPDATE</code>语句的一部分，以帮助标识已修改的行。对支持的数据类型有一些要求和限制。有关更多信息，请参阅以下部分：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-BD53979B-3120-45CD-803F-2E6675A9DAFD" title="逻辑备用数据库支持多种表存储类型。">支持的表存储类型</a></p>
                                 </li>
                                 <li>
                                    <p><a href="data-type-ddl-support-on-logical-standby-databases.html#GUID-55806A96-6216-41A2-AB52-20704DAAF5C7" title="如果表仅包含这些数据类型，则逻辑备用数据库不支持它。">不支持的表存储类型</a></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>基于函数的索引即使声明为唯一索引，也不能用于唯一标识已修改的行。但是，逻辑备用数据库支持复制已定义基于函数的索引的表，只要可以唯一标识已修改的行即可。</p>
                           </li>
                        </ul>
                        <p>Oracle建议您尽可能向主数据库中的表添加主键或非空唯一索引，以确保SQL Apply可以有效地将重做数据更新应用于逻辑备用数据库。</p>
                        <p>执行以下步骤以确保SQL Apply可以唯一标识正在逻辑备用数据库中复制的每个表的行。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>查询<code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code>视图以显示SQL Apply可能无法唯一标识的表列表。例如：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT OWNER，TABLE_NAME FROM DBA_LOGSTDBY_NOT_UNIQUE 2&gt; WHERE（OWNER，TABLE_NAME）NOT IN 3&gt;（SELECT DISTINCT OWNER，TABLE_NAME FROM DBA_LOGSTDBY_UNSUPPORTED）4&gt; AND BAD_COLUMN ='Y';</pre><p>此查询可能需要几分钟才能运行。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果您的应用程序确保表中的行是唯一的，那么您可以在表上创建禁用的主键<code class="codeph">RELY</code>约束。这避免了在主数据库上维护主键的开销。</span></li>
                     </ol>
                     <div class="section">
                        <p>要在主数据库表上创建禁用的<code class="codeph">RELY</code>约束， <a id="d10791e491" class="indexterm-anchor"></a>使用带有<code class="codeph">RELY DISABLE</code>子句的<code class="codeph">ALTER TABLE</code>语句。以下示例在名为<code class="codeph">mytab</code>的表上创建禁用的<code class="codeph">RELY</code>约束，可以使用<code class="codeph">id</code>和<code class="codeph">name</code>列唯一标识行：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLE mytab ADD PRIMARY KEY（id，name）RELY DISABLE;</pre><p>指定<code class="codeph">RELY</code>约束时，系统假定行是唯一的。因为您告诉系统依赖于信息，但是在对表执行的每个修改中都没有对其进行验证，因此必须小心选择禁用<code class="codeph">RELY</code>约束的列，以便唯一标识表中的每一行。如果不存在此类唯一性，则SQL Apply无法正确维护表。
                        </p>
                        <p>要提高SQL Apply的性能，请在列中添加唯一约束/索引，以标识逻辑备用数据库上的行。如果不这样做，将导致在SQL Apply对表执行的<code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句期间进行全表扫描。
                        </p>
                        <div class="infoboxnotealso" id="GUID-C238335E-8383-43F1-B5B1-709A2A619C30__GUID-713EB1CD-C32C-4D2F-919A-5348816FB65B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code>视图的信息，请<a href="../refrn/DBA_LOGSTDBY_NOT_UNIQUE.html#REFRN23123" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER TABLE</code>语句语法的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-10287018-12F8-4727-AB2D-C720571AF4B6" title="在主数据库上，如果表没有主键或唯一索引，并且您确定行是唯一的，则创建主键RELY约束。">创建一个主键RELY约束</a> ，了解有关<code class="codeph">RELY</code>约束和行动，你可以采取增加逻辑备用数据库上的性能</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB5021"></a><a id="SBYDB00310"></a><div class="props_rev_3"><a id="GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027" name="GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027"></a><h3 id="SBYDB-GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027" class="sect3"><span class="enumeration_section">4.2</span>创建逻辑备用数据库的逐步说明</h3>
               <div>
                  <p>这些是您创建逻辑备用数据库时执行的任务。</p>
                  <div class="tblformalwide" id="GUID-2A3EDE02-DE51-4813-891C-248AA5F1C027__BEIFEFEE">
                     <p class="titleintable">表4-1创建逻辑备用数据库</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="创建逻辑备用数据库" width="100%" border="1" summary="This 2 column table describes the steps to create a logical standby database. Column 1 is the task. Column 2 is the database. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="49%" id="d10791e670">任务</th>
                              <th align="left" valign="bottom" width="51%" id="d10791e673">数据库</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e678" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF" title="首先创建物理备用数据库，然后将其转换为逻辑备用数据库，从而创建逻辑备用数据库。">创建物理备用数据库</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e678 d10791e673 ">
                                 <p>主</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e690" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7" title="您可以在新物理备用数据库上运行Redo Apply任意长的时间，然后再将其转换为逻辑备用数据库。">停止物理备用数据库上的重做应用</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e690 d10791e673 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e702" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F" title="作为创建逻辑备用数据库的一部分，您必须准备主数据库以支持逻辑备用数据库。">准备主数据库以支持逻辑备用数据库</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e702 d10791e673 ">
                                 <p>主</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e714" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F" title="必须执行一些必要的任务才能使物理备用数据库转换为逻辑备用数据库。">过渡到逻辑备用数据库</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e714 d10791e673 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e726" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-68777C01-83F6-4CCF-9BA2-547ED180138D" title="使用ALTER DATABASE SQL语句打开新创建的逻辑备用数据库。">打开逻辑备用数据库</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e726 d10791e673 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="49%" id="d10791e741" headers="d10791e670 ">
                                 <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1" title="创建逻辑备用数据库后，验证它是否正常运行非常重要。">验证逻辑备用数据库是否正常执行</a></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d10791e741 d10791e673 ">
                                 <p>支持</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="SBYDB4732"></a><div class="props_rev_3"><a id="GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF" name="GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF"></a><h4 id="SBYDB-GUID-39D01B49-BA52-488E-B418-4BCFDE7692AF" class="sect4"><span class="enumeration_section">4.2.1</span>创建逻辑备用任务1：创建物理备用数据库</h4>
                  <div>
                     <p>首先创建物理备用数据库，然后将其转换为逻辑备用数据库，从而创建逻辑备用数据库。</p>
                     <div class="section">
                        <p>按照<a href="creating-oracle-data-guard-physical-standby.html#GUID-B511FB6E-E3E7-436D-94B5-071C37550170" title="您可以使用异步重做传输和实时应用（默认的Oracle Data Guard配置）以最高性能模式手动创建物理备用数据库。">创建物理备用数据库</a>中的说明创建物理备用数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4733"></a><div class="props_rev_3"><a id="GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7" name="GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7"></a><h4 id="SBYDB-GUID-CDD78A3A-EB1C-493D-A0EF-ED6EBABDF0B7" class="sect4"><span class="enumeration_section">4.2.2</span>创建逻辑备用任务2：在物理备用数据库上停止重做应用</h4>
                  <div>
                     <p>您可以在新物理备用数据库上运行Redo Apply任意长的时间，然后再将其转换为逻辑备用数据库。</p>
                     <div class="section">
                        <p>但是，在转换为逻辑备用数据库之前，请在物理备用数据库上停止Redo Apply。停止重做应用是必要的，以避免在包含LogMiner字典的重做之外应用更改（ <a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.">在重做数据</a>中<a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="必须在重做数据中内置LogMiner字典，以便SQL Apply的LogMiner组件可以正确解释它在重做中看到的更改。">构建字典中</a>描述）。
                        </p>
                        <p>要停止重做应用，请在物理备用数据库上发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4734"></a><div class="props_rev_3"><a id="GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F" name="GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F"></a><h4 id="SBYDB-GUID-BA252F0F-B5B9-4AA6-8593-250A7FA7283F" class="sect4"><span class="enumeration_section">4.2.3</span>创建逻辑备用任务3：准备主数据库以支持逻辑备用数据库</h4>
                  <div>
                     <p>作为创建逻辑备用数据库的一部分，您必须准备主数据库以支持逻辑备用数据库。</p>
                     <p>请参阅以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-408C8876-F7CC-4112-9C08-58352577ECB4" title="准备切换主数据库的角色时，可能必须修改某些参数。">准备主数据库以进行角色转换</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="必须在重做数据中内置LogMiner字典，以便SQL Apply的LogMiner组件可以正确解释它在重做中看到的更改。">在重做数据中构建字典</a></p>
                        </li>
                     </ul>
                  </div><a id="SBYDB5022"></a><a id="SBYDB4735"></a><div class="props_rev_3"><a id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4" name="GUID-408C8876-F7CC-4112-9C08-58352577ECB4"></a><h5 id="SBYDB-GUID-408C8876-F7CC-4112-9C08-58352577ECB4" class="sect5"><span class="enumeration_section">4.2.3.1</span>为角色转换准备主数据库</h5>
                     <div>
                        <p>准备切换主数据库的角色时，可能必须修改某些参数。</p>
                        <div class="section">
                           <p>在“ <a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="在主数据库上，您可以定义在数据库处于主要角色时控制重做传输服务的初始化参数。">设置主数据库初始化参数”中</a> ，设置多个备用角色初始化参数，以便在主数据库转换为<span class="italic">物理</span>备用角色时生效。
                           </p>
                           <div class="infoboxnote" id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4__GUID-D5FB5416-B7D7-48AA-834B-6195A83E89A2">
                              <p class="notep1">注意：</p>
                              <p>仅当您计划执行切换时，才需要执行此步骤。</p>
                           </div>
                           <p>如果您计划将主数据库转换为<span class="italic">逻辑</span>备用角色，则还必须修改<a href="creating-oracle-data-guard-logical-standby.html#GUID-408C8876-F7CC-4112-9C08-58352577ECB4__I91919">示例4-1</a>中以粗体字体显示的参数，以便在角色转换后不需要更改任何参数：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>更改原始<code class="codeph">LOG_ARCHIVE_DEST_1</code>目标中的<code class="codeph">VALID_FOR</code>属性，仅从联机重做日志而不是备用重做日志中归档重做数据。
                                 </p>
                              </li>
                              <li>
                                 <p>在主数据库中包含<code class="codeph">LOG_ARCHIVE_DEST_3</code>目标。此参数仅在主数据库转换为逻辑备用角色时生效。
                                 </p>
                              </li>
                           </ul>
                           <p>下表描述了由<a href="creating-oracle-data-guard-logical-standby.html#GUID-408C8876-F7CC-4112-9C08-58352577ECB4__I91919">示例4-1中</a>显示的已更改的初始化参数定义的归档处理。
                           </p>
                           <div class="tblformalwide" id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4__GUID-DBB3E671-47EA-4401-88EE-691B17BFA568">
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This 3 column table describes how archiving behavior for the Chicago database is controlled by LOG_ARCHIVE_DEST_n parameter when in the primary or the logical standby database role.." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="28%" id="d10791e1138">的LOG_ARCHIVE_DEST_n</th>
                                       <th align="left" valign="bottom" width="33%" id="d10791e1141">当芝加哥数据库以主要角色运行时</th>
                                       <th align="left" valign="bottom" width="38%" id="d10791e1144">当芝加哥数据库以逻辑备用角色运行时</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="28%" id="d10791e1149" headers="d10791e1138 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1149 d10791e1141 ">
                                          <p>指示将主数据库生成的重做数据从本地联机重做日志文件归档到<code class="codeph">/arch1/chicago/</code>的本地归档重做日志文件。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d10791e1149 d10791e1144 ">
                                          <p>指示将逻辑备用数据库生成的重做数据从本地联机重做日志文件归档到<code class="codeph">/arch1/chicago/</code>的本地归档重做日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="28%" id="d10791e1166" headers="d10791e1138 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_3</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1166 d10791e1141 ">
                                          <p>被忽略了;仅当<code class="codeph">chicago</code>以备用角色运行时， <code class="codeph">LOG_ARCHIVE_DEST_3</code>才有效。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d10791e1166 d10791e1144 ">
                                          <p>指示将重做数据从备用重做日志文件归档到<code class="codeph">/arch2/chicago/</code>的本地归档重做日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-408C8876-F7CC-4112-9C08-58352577ECB4__I91919">
                           <p class="titleinexample">示例4-1主数据库：逻辑备用角色初始化参数</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1 ='LOCATION = / arch1 / chicago / VALID_FOR =（ <span class="bold">ONLINE_LOGFILES</span> ，ALL_ROLES）DB_UNIQUE_NAME =芝加哥' <span class="bold">LOG_ARCHIVE_DEST_3 =</span> <span class="bold">'LOCATION = / arch2 / chicago /</span> <span class="bold">VALID_FOR =（STANDBY_LOGFILES，STANDBY_ROLE）</span> <span class="bold">DB_UNIQUE_NAME =芝加哥'</span> <span class="bold">LOG_ARCHIVE_DEST_STATE_3 = ENABLE</span>
</pre><p>要动态设置这些初始化参数，请使用SQL <code class="codeph">ALTER SYSTEM SET</code>语句并包含<code class="codeph">SCOPE=BOTH</code>子句，以便更改立即生效并在数据库关闭并再次启动后保持不变。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="SBYDB4736"></a><div class="props_rev_3"><a id="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" name="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3"></a><h5 id="SBYDB-GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" class="sect5"><span class="enumeration_section">4.2.3.2</span>在重做数据中构建字典</h5>
                     <div>
                        <p>必须在重做数据中内置LogMiner字典，以便SQL Apply的LogMiner组件可以正确解释它在重做中看到的更改。</p>
                        <div class="section">
                           <p>作为构建LogMiner字典的一部分，将自动设置补充日志记录以记录主键和唯一约束/索引列。补充日志记录信息确保每个更新包含足够的信息，以逻辑方式标识由语句修改的每一行。</p>
                           <p>要构建LogMiner字典，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.BUILD;</pre><p><code class="codeph">DBMS_LOGSTDBY.BUILD</code>过程等待所有现有事务完成。在主数据库上执行的长时间运行事务会影响此命令的及时性。
                           </p>
                           <div class="infoboxnote" id="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3__GUID-5E22C5B2-F247-423F-9A26-C172D71B2BF0">
                              <p class="notep1">注意：</p>
                              <p>在使用Oracle Database <span class="italic">11g</span>第2版（11.2）或更高版本创建的数据库中，补充日志记录信息会自动传播到任何现有的物理备用数据库。但是，对于早期版本中的数据库，或者如果数据库是使用早期版本创建的，然后升级到11.2，则必须检查在物理备用数据库中是否启用了补充日志记录（如果它也在主数据库中启用）。如果未在物理备用数据库上启用，则在执行切换或故障转移之前，必须在所有现有物理备用数据库上启用补充日志记录。为此，请在每个物理备用数据库上发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE添加补充日志数据（PRIMARY KEY，UNIQUE INDEX）列;</pre><p>如果不这样做，那么如果对其中一个物理备用数据库执行切换或故障转移，则同一Oracle Data Guard配置中的任何逻辑备用数据库都将不可用。如果已发生切换或故障转移并且未启用补充日志记录，则必须重新创建所有逻辑备用数据库。</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3__GUID-3927954B-64E8-437B-BFA0-FB0E76B39EE5">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS66834" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>的<code class="codeph">DBMS_LOGSTDBY.BUILD</code> PL / SQL包</p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/UNDO_RETENTION.html#REFRN10225" target="_blank"><span class="italic">Oracle数据库参考中</span></a>的<code class="codeph">UNDO_RETENTION</code>初始化参数</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="SBYDB4737"></a><div class="props_rev_3"><a id="GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F" name="GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F"></a><h4 id="SBYDB-GUID-69BC7C26-F66F-4CB5-BBF6-08350C3E615F" class="sect4"><span class="enumeration_section">4.2.4</span>创建逻辑备用任务4：转换到逻辑备用数据库</h4>
                  <div>
                     <p>必须执行一些必要的任务才能使物理备用数据库转换为逻辑备用数据库。</p>
                     <p>以下主题描述了这些任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8" title="重做日志包含将物理备用数据库转换为逻辑备用数据库所需的信息。">转换为逻辑备用数据库</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739">调整逻辑备用数据库的初始化参数</a></p>
                        </li>
                     </ul>
                  </div><a id="SBYDB4738"></a><div class="props_rev_3"><a id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8" name="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8"></a><h5 id="SBYDB-GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8" class="sect5"><span class="enumeration_section">4.2.4.1</span>转换为逻辑备用数据库</h5>
                     <div>
                        <p>重做日志包含将物理备用数据库转换为逻辑备用数据库所需的信息。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8__GUID-1D8D1ACD-06B1-47AC-8FAD-5AB07FE8F633">
                              <p class="notep1">注意：</p>
                              <p>如果您有Oracle RAC物理备用数据库，则关闭除一个实例以外的所有数据库，将<code class="codeph">CLUSTER_DATABASE</code>设置为<code class="codeph">FALSE</code> ，并在<code class="codeph">MOUNT EXCLUSIVE</code>模式下将备用数据库作为单个实例启动，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET CLUSTER_DATABASE = FALSE SCOPE = SPFILE; SQL&gt; SHUTDOWN ABORT; SQL&gt; STARTUP MOUNT EXCLUSIVE;</pre></div>
                           <p>要继续将重做数据应用于物理备用数据库，直到它准备好转换为逻辑备用数据库，请发出以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; <a id="d10791e1559" class="indexterm-anchor"></a> ALTER DATABASE RECOVER TO LOGICAL STANDBY <span class="italic">db_name</span> ;</pre><p>对于<span class="italic">db_name</span> ，请指定与主数据库不同的数据库名称，以标识新的逻辑备用数据库。如果在发出此语句时使用服务器参数文件（spfile），则数据库将使用有关新逻辑备用数据库的相应信息更新该文件。如果您没有使用spfile，则数据库会发出一条消息，提醒您在关闭数据库后设置<code class="codeph">DB_NAME</code>参数的名称。
                           </p>
                           <div class="infoboxnote" id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8__GUID-EF5F2825-F586-4617-9E53-192099643DDA">
                              <p class="notep1">注意：</p>
                              <p>如果要在执行滚动升级的上下文中创建逻辑备用数据库<a id="d10791e1578" class="indexterm-anchor"></a>使用物理备用数据库的Oracle软件，然后发出以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER TO LOGICAL STANDBY KEEP IDENTITY;</pre><p>使用<code class="codeph">KEEP IDENTITY</code>子句创建的逻辑备用数据库<a id="d10791e1590" class="indexterm-anchor"></a>保留与其主数据库相同的<code class="codeph">DB_NAME</code>和<code class="codeph">DBID</code> 。这样的逻辑备用数据库只能参与一个切换操作，因此只应在具有物理备用数据库的滚动升级的上下文中创建。
                              </p>
                              <p>仅当正在升级的数据库正在运行Oracle Database 11.1或更高版本时， <code class="codeph">KEEP IDENTITY</code>子句才可用。
                              </p>
                           </div>
                           <p>该语句等待，应用重做数据，直到在日志文件中找到LogMine r字典。这可能需要几分钟，具体取决于<a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.">重做数据</a>中的<a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="A LogMiner dictionary must be built into the redo data so that the LogMiner component of SQL Apply can properly interpret changes it sees in the redo.">构建字典</a>中<a href="creating-oracle-data-guard-logical-standby.html#GUID-E5D227F2-C456-44F3-AEEA-2C8340439EF3" title="必须在重做数据中内置LogMiner字典，以便SQL Apply的LogMiner组件可以正确解释它在重做中看到的更改。">生成的</a>重做需要多长时间才能传输到备用数据库，以及需要应用多少重做数据。如果未在主数据库上成功执行字典构建，则此命令永远不会完成。您可以通过发出来取消SQL语句<a id="d10791e1622" class="indexterm-anchor"></a><a id="d10791e1626" class="indexterm-anchor"></a>来自另一个SQL会话的<code class="codeph">ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL</code>语句。
                           </p>
                           <div class="infoboxnote" id="GUID-715EBEC1-21B9-4DA9-80A5-ED58033F94C8__GUID-4B5A4365-5F88-4AAD-8F1E-DF9E45A5219A">
                              <p class="notep1">警告：</p>
                              <p>在之前的Oracle数据库<span class="italic">11克</span>的版本中，你需要你打开逻辑备用数据库之前创建一个新的密码文件。这不再需要。在逻辑备用数据库中创建新密码文件会导致重做传输服务无法正常工作。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB5023"></a><a id="SBYDB4739"></a><div class="props_rev_3"><a id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739" name="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739"></a><h5 id="SBYDB-GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739" class="sect5"><span class="enumeration_section">4.2.4.2</span>调整逻辑备用数据库的初始化参数</h5>
                     <div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-B8EC917A-CE11-414F-8F36-3D612E811DA8">
                              <p class="notep1">注意：</p>
                              <p>如果您从Oracle RAC物理备用数据库开始，则将<code class="codeph">CLUSTER_DATABASE</code>设置回<code class="codeph">TRUE</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET CLUSTER_DATABASE = TRUE SCOPE = SPFILE;</pre></div>
                           <p>在逻辑备用数据库上，关闭实例并发出<code class="codeph">STARTUP MOUNT</code>语句以启动并装入数据库。不要打开数据库;它应该对用户访问保持关闭，直到创建过程的后期。例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN; SQL&gt; STARTUP MOUNT;</pre><p>您需要修改<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数，因为与物理备用数据库不同，逻辑备用数据库是开放式数据库，可生成重做数据并具有多个日志文件（联机重做日志文件，归档重做日志文件和备用重做日志文件）。最好为以下各项指定单独的本地目的地：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>存档的重做日志文件，用于存储逻辑备用数据库生成的重做数据。在<a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">例4-2中</a> ，这被配置为<code class="codeph">LOG_ARCHIVE_DEST_1=LOCATION=/arch1/boston</code>目的地。
                                 </p>
                              </li>
                              <li>
                                 <p>存档的重做日志文件，用于存储从主数据库接收的重做数据。在<a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">例4-2中</a> ，这被配置为<code class="codeph">LOG_ARCHIVE_DEST_3=LOCATION=/arch2/boston</code>目的地。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">例4-2</a>显示了为逻辑备用数据库修改的初始化参数。显示的参数在Boston逻辑备用数据库以主数据库角色或备用数据库角色运行时有效。
                           </p>
                           <div class="infoboxnote" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-8941C4D9-CA66-4639-8C05-D2E8AF4317AE">
                              <p class="notep1">注意：</p>
                              <p>如果数据库兼容性设置为11.1或更高版本，则可以使用快速恢复区域来存储远程存档日志。为此，您只需设置以下参数（假设您已设置<code class="codeph">DB_RECOVERY_FILE_DEST</code>和<code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code>参数）：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1 ='LOCATION = USE_DB_RECOVERY_FILE_DEST DB_UNIQUE_NAME = boston'</pre><p>由于您使用的是快速恢复区域，因此无需指定<code class="codeph">VALID_FOR</code>参数。它的默认值是（ <code class="codeph">ALL_LOGFILES,ALL_ROLES</code> ），在这种情况下，这是所需的行为。<code class="codeph">LOG_ARCHIVE_DEST_1</code>用于所有日志文件，包括联机（主）和备用。
                              </p>
                           </div>
                           <p>下表描述了由<a href="creating-oracle-data-guard-logical-standby.html#GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">示例4-2中</a>显示的初始化参数定义的归档处理。
                           </p>
                           <div class="tblformalwide" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-B07FCDBE-0319-41D0-B92F-2C10A2DF7765">
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This 3 column table describes the archival processing when the Boston database is in the primary and in the logical standby database role." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="30%" id="d10791e1804">的LOG_ARCHIVE_DEST_n</th>
                                       <th align="left" valign="bottom" width="33%" id="d10791e1807">当波士顿数据库以主要角色运行时</th>
                                       <th align="left" valign="bottom" width="37%" id="d10791e1810">当波士顿数据库以逻辑备用角色运行时</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d10791e1815" headers="d10791e1804 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_1</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1815 d10791e1807 ">
                                          <p>指示将主数据库生成的重做数据从本地联机重做日志文件归档到<code class="codeph">/arch1/boston/</code>的本地归档重做日志文件。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="37%" headers="d10791e1815 d10791e1810 ">
                                          <p>指示将逻辑备用数据库生成的重做数据从本地联机重做日志文件归档到<code class="codeph">/arch1/boston/</code>的本地归档重做日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d10791e1832" headers="d10791e1804 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_2</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1832 d10791e1807 ">
                                          <p>指示将重做数据传输到远程逻辑备用数据库<code class="codeph">chicago</code> 。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="37%" headers="d10791e1832 d10791e1810 ">
                                          <p>被忽略了;仅当<code class="codeph">boston</code>以主要角色运行时， <code class="codeph">LOG_ARCHIVE_DEST_2</code>才有效。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d10791e1852" headers="d10791e1804 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_3</code></p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d10791e1852 d10791e1807 ">
                                          <p>被忽略了;仅当<code class="codeph">boston</code>以备用角色运行时， <code class="codeph">LOG_ARCHIVE_DEST_3</code>才有效。
                                          </p>
                                       </td>
                                       <td align="left" valign="top" width="37%" headers="d10791e1852 d10791e1810 ">
                                          <p>指示将从主数据库接收的重做数据归档到<code class="codeph">/arch2/boston/</code>的本地归档重做日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__GUID-4D1D29EB-4F20-40D8-BDBE-FB85AC68CC9B">
                              <p class="notep1">注意：</p>
                              <p>将物理备用数据库转换为逻辑备用数据库后，不会<code class="codeph">DB_FILE_NAME_CONVERT</code>初始化参数。如有必要，请注册跳过处理程序，并通过将主数据库数据文件的路径名转换为备用数据文件路径名来为SQL Apply提供替换DDL字符串。有关<code class="codeph">SKIP</code>过程的信息，请参阅<a href="../arpls/DBMS_LOGSTDBY.html#ARPLS363" target="_blank"><code class="codeph">DBMS_LOGSTDBY</code></a>包。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-31F89C7C-174C-49E4-9A5E-3B9F538BD739__I87417">
                           <p class="titleinexample">示例4-2修改逻辑备用数据库的初始化参数</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1 ='LOCATION = / arch1 / boston / VALID_FOR =（ONLINE_LOGFILES，ALL_ROLES）DB_UNIQUE_NAME = boston'LOG_ARCHIVE_DEST_2 ='SERVICE =芝加哥ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME =芝加哥'LOG_ARCHIVE_DEST_3 ='LOCATION = / arch2 / boston / VALID_FOR =（STANDBY_LOGFILES，STANDBY_ROLE）DB_UNIQUE_NAME = boston'OGOG_ARCHIVE_DEST_STATE_1 = ENABLE LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_STATE_3 = ENABLE</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="SBYDB4740"></a><div class="props_rev_3"><a id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D" name="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D"></a><h4 id="SBYDB-GUID-68777C01-83F6-4CCF-9BA2-547ED180138D" class="sect4"><span class="enumeration_section">4.2.5</span>创建逻辑备用任务5：打开逻辑备用数据库</h4>
                  <div>
                     <p>使用<code class="codeph">ALTER DATABASE</code> SQL语句打开新创建的逻辑备用数据库。
                     </p>
                     <div class="section">
                        <p>例如，发出以下语句（如果使用<code class="codeph">KEEP</code> <code class="codeph">IDENTITY</code>选项创建逻辑备用数据库，则不提供<code class="codeph">RESETLOGS</code>选项）：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE OPEN RESETLOGS;</pre><div class="infoboxnote" id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D__GUID-F2C47D1B-C918-419C-9E78-8F5BE945DEBB">
                           <p class="notep1">注意：</p>
                           <p>如果您从Oracle RAC物理备用数据库开始，那么此时您可以启动所有其他备用实例。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D__GUID-B64C5B78-0AAA-4321-817F-B9460BEDAAF3">
                           <p class="notep1">警告：</p>
                           <p>如果要将逻辑备用数据库与主数据库放在同一计算机系统上，则必须在首次启动SQL Apply之前发出以下SQL语句，以便SQL Apply跳过在主数据库上执行的文件操作。这是必要的原因是SQL Apply可以访问与主数据库相同的目录结构，如果SQL Apply尝试重新执行某些特定于文件的操作，则可能会损坏属于主数据库的数据文件。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXECUTE DBMS_LOGSTDBY.SKIP（'ALTER TABLESPACE'）;</pre><p>SQL Apply将忽略在将物理备用数据库与主数据库放在同一系统上时设置的<code class="codeph">DB_FILENAME_CONVERT</code>参数。有关<code class="codeph">DBMS_LOGSTDBY.SKIP</code>以及逻辑备用数据库上下文中的等效行为的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS363" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                           </p>
                        </div>
                        <p>由于这是第一次打开数据库，因此会自动调整数据库的全局名称以匹配新的<code class="codeph">DB_NAME</code>初始化参数。（如果使用<code class="codeph">KEEP</code> <code class="codeph">IDENTITY</code>选项创建逻辑备用数据库，则不是这样。）
                        </p>
                        <div class="infoboxnote" id="GUID-68777C01-83F6-4CCF-9BA2-547ED180138D__GUID-43C93E0C-DBE7-4812-9330-96376901BC11">
                           <p class="notep1">注意：</p>
                           <p>如果要创建逻辑备用数据库以执行Oracle数据库软件的滚动升级，并且您担心SQL Apply可能不支持的对象更新，那么Oracle建议您使用<code class="codeph">DBMS_LOGSTDBY</code> PL / SQL过程。在逻辑备用数据库中，运行以下过程以捕获信息并将其记录为<code class="codeph">DBA_LOGSTDBY_EVENTS</code>表中的事件：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_LOGSTDBY.APPLY_SET（'MAX_EVENTS_RECORDED'，DBMS_LOGSTDBY.MAX_EVENTS）; EXEC DBMS_LOGSTDBY.APPLY_SET（'RECORD_UNSUPPORTED_OPERATIONS'，'TRUE'）;</pre><p>这将捕获有关逻辑备用数据库不支持的主数据库上运行的任何事务的信息。升级完成后，在将生产切换到新版本之前，请检查此表。如果没有记录任何内容，那么你知道所有内容都被复制了。如果记录了某些内容，则可以选择采取纠正措施或放弃升级。</p>
                           <p><span class="bold">也可以看看：</span></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-D6EEF87A-211C-476C-9CBC-126858F7026A" title="可以将DBA_LOGSTDBY_EVENTS视图视为包含SQL Apply上下文中发生的最新有趣事件的循环日志。">自定义在DBA_LOGSTDBY_EVENTS查看记录事件</a>有关详细信息， <code class="codeph">DBA_LOGSTDBY_EVENTS</code>视图</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_LOGSTDBY</code>包的完整信息，请参阅<a href="../arpls/DBMS_LOGSTDBY.html#ARPLS363" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p>发出以下语句以开始将重做数据应用于逻辑备用数据库：<a id="d10791e2062" class="indexterm-anchor"></a><a id="d10791e2068" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">SQL&gt; <a id="d10791e2074" class="indexterm-anchor"></a><a id="d10791e2078" class="indexterm-anchor"></a><a id="d10791e2082" class="indexterm-anchor"></a> ALTER DATABASE START LOGICAL STANDBY立即申请;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4741"></a><div class="props_rev_3"><a id="GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1" name="GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1"></a><h4 id="SBYDB-GUID-930CFC64-4EFD-4CF3-A5D0-062FBBD069E1" class="sect4"><span class="enumeration_section">4.2.6</span>创建逻辑备用任务6：验证逻辑备用数据库是否正常运行</h4>
                  <div>
                     <p>创建逻辑备用数据库后，验证它是否正常运行非常重要。</p>
                     <div class="section">
                        <p>请参阅以下主题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p> <a href="oracle-data-guard-redo-transport-services.html#GUID-0EC71C7D-A80B-40AA-93E5-28BB7E24ED31" title="Oracle Data Guard配置要求配置和监视Oracle重做传输服务。">重做运输服务</a></p>
                           </li>
                           <li>
                              <p><a href="managing-oracle-data-guard-logical-standby-databases.html#GUID-4177C717-4244-4E33-ACE7-15D53EAB2443" title="了解这些概念将有助于您成功管理逻辑备用数据库。">管理逻辑备用数据库</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB4742"></a><div class="props_rev_3"><a id="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C" name="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C"></a><h3 id="SBYDB-GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C" class="sect3"><span class="enumeration_section">4.3</span>创建逻辑备用：创建后步骤</h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C__GUID-A811AFEC-58F3-443D-996E-AA3FEF5BC345">
                        <p class="notep1">注意：</p>
                        <p>物理备用数据库到逻辑备用数据库的转换分两个阶段进行：</p>
                        <ol>
                           <li>
                              <p>作为<code class="codeph">ALTER DATABASE RECOVER TO LOGICAL STANDBY</code>语句的一部分（除非已指定<code class="codeph">KEEP IDENTITY</code>子句），否则将<code class="codeph">ALTER DATABASE RECOVER TO LOGICAL STANDBY</code>的DBID。
                              </p>
                           </li>
                           <li>
                              <p>作为第一次成功调用<code class="codeph">ALTER DATABASE START LOGICAL STANDBY APPLY</code>语句的一部分，更新控制文件以使其与新创建的逻辑备用数据库的控制文件一致。
                              </p>
                              <p>成功调用<code class="codeph">ALTER DATABASE START LOGICAL STANDBY APPLY</code>语句后，请对逻辑备用数据库进行完整备份，因为从主数据库获取的备份不能用于还原逻辑备用数据库。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <p>此时，逻辑备用数据库正在运行，可以提供最高性能级别的数据保护。以下列表描述了您可以对逻辑备用数据库进行的其他准备工作：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>升级数据保护模式</p>
                           <p>Oracle Data Guard配置最初设置为最高性能模式（默认值）。</p>
                        </li>
                        <li>
                           <p>启用闪回数据库</p>
                           <p>闪回数据库无需在故障转移后重新创建主数据库。闪回数据库使您能够在最近的某个时间将数据库返回到其状态，这比传统的时间点恢复快得多，因为它不需要从备份恢复数据文件，也不需要重做数据的广泛应用。您可以在主数据库，备用数据库或两者上启用闪回数据库。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-DC0A53BC-D29E-4878-BF3F-0AC4503AFA3C__GUID-B6358017-F28E-4EF0-AFD4-AC8617E35C79">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="examples-of-using-oracle-data-guard.html#GUID-1163448F-6B18-4A44-AA8D-7CDF0D1360FB" title="After a failover occurs, the original primary database can no longer participate in the Oracle Data Guard configuration until it is repaired and established as a standby database in the new configuration.">使用闪回数据库</a>和<a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="If an error occurrs on the primary database in an Oracle Data Guard configuration in which the standby database is using real-time apply, then the same error is applied on the standby database. if Flashback Database is enabled, you can revert the primary and standby databases back to their pre-error condition.">使用闪回数据库</a> <a href="examples-of-using-oracle-data-guard.html#GUID-1163448F-6B18-4A44-AA8D-7CDF0D1360FB" title="发生故障转移后，原始主数据库无法再参与Oracle Data Guard配置，直到在新配置中将其修复并建立为备用数据库。">将失败的主数据库转换为备用数据库</a> <a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="如果备用数据库使用实时应用的Oracle Data Guard配置中的主数据库发生错误，则在备用数据库上应用相同的错误。如果启用了闪回数据库，则可以将主数据库和备用数据库还原为其错误前的状态。">之后发布Open Resetlogs语句，</a>以了解如何在Oracle Data Guard环境中使用闪回数据库的方案。
                              </p>
                           </li>
                           <li>
                              <p>有关闪回数据库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV71000" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB5139"></a><div class="props_rev_3"><a id="GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" name="GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2"></a><h3 id="SBYDB-GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2" class="sect3"><span class="enumeration_section">4.4</span>创建CDB的逻辑备用</h3>
               <div>
                  <p>您可以创建多租户容器数据库（CDB）的逻辑备用数据库，就像创建常规主数据库的逻辑备用数据库一样。</p>
                  <p>以下是在创建和使用CDB的逻辑备用数据库时需要注意的一些行为差异：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库角色在CDB级别定义，而不是在可插拔数据库（PDB）容器级别定义。</p>
                     </li>
                     <li>
                        <p>如果执行切换或故障转移操作，则整个CDB将进行角色更改。</p>
                     </li>
                     <li>
                        <p>与角色更改相关的任何DDL必须在连接到CDB的根容器时执行。</p>
                     </li>
                     <li>
                        <p>与常规逻辑备用数据库一样，CDB的逻辑备用数据库操作单个进程池，用于挖掘重做流一次，但共享责任以更新所有PDB和CDB的根容器。</p>
                     </li>
                     <li>
                        <p>您不需要在主服务器和备用服务器上拥有相同的PDB集。但是，仅复制主数据库和备用数据库中同一容器中存在的表。</p>
                     </li>
                     <li>
                        <p>通常，在根容器中执行修改全局配置属性的逻辑备用PL / SQL接口，例如<code class="codeph">DBMS_LOGSTDBY.APPLY_SET</code> 。然而， <code class="codeph">DBMS_LOGSTDBY.INSTANTIATE_TABLE</code>必须调用其中感兴趣的表所在的容器内，并<code class="codeph">DBMS_LOGSTDBY.SKIP</code>程序必须调用感兴趣的容器内。</p>
                     </li>
                     <li>
                        <p>增强了逻辑备用视图以在适当的位置提供容器名称。许多DBA视图都有类似的CDB视图，其名称以CDB开头。例如，视图<code class="codeph">CDB_LOGSTDBY_NOT_UNIQUE</code>包含与<code class="codeph">DBA_LOGSTDBY_NOT_UNIQUE</code>视图中显示的数据相同的数据，但它有一个指示PDB名称的附加列。在根中查询<code class="codeph">CDB_LOGSTDBY_NOT_UNIQUE</code>视图时，它显示CDB中所有数据库的数据。</p>
                     </li>
                     <li>
                        <p>在CDB的逻辑备用数据库中，SQL语句的语法通常与非容器数据库的语法相同。但是，某些声明（包括以下声明）的效果可能会有所不同：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER DATABASE RECOVER TO LOGICAL STANDBY</code>仅在CDB中起作用;它不允许在PDB中使用。</p>
                           </li>
                           <li>
                              <p>角色与整个CDB相关联;个人PDB没有自己的角色。因此，与逻辑备用数据库关联的以下角色更改DDL会影响整个CDB：</p>
                              <p><code class="codeph">ALTER DATABASE [PREPARE | COMMIT]切换到SWITCHOVER</code> 
                              </p>
                              <p><code class="codeph">ALTER DATABASE激活LOGICAL STANDBY</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER DATABASE [START|STOP] LOGICAL STANDBY APPLY</code>仅在根容器中起作用并影响整个CDB。 PDB上不允许使用此声明。</p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER DATABASE GUARD</code>仅在根容器中起作用并影响整个CDB。例如，如果发出<code class="codeph">ALTER DATABASE GUARD ALL</code>语句，则根目录和所有PDB中的用户活动将受到限制。
                              </p>
                           </li>
                           <li>
                              <p>要管理多租户环境，您必须具有<code class="codeph">CDB_DBA</code>角色。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E2BB4836-32D1-4D57-9B32-75B1239170E2__GUID-22CA4301-DC88-4EC8-A090-D7966107018F">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关CDB的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=CNCPT89249" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关在容器中使用<code class="codeph">DBMS_LOGSTDBY.SKIP</code>过程的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS66850" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="06887.ALL_SQLSET_PLANS.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="ALL_SQLSET_PLANS describes captured plans for statements in the SQL tuning sets accessible to the current user."></meta>
      <meta name="description" content="ALL_SQLSET_PLANS describes captured plans for statements in the SQL tuning sets accessible to the current user."></meta>
      <title>ALL_SQLSET_PLANS</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Reference"></meta>
      <meta property="og:description" content="ALL_SQLSET_PLANS describes captured plans for statements in the SQL tuning sets accessible to the current user."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-10T14:59:27-08:00"></meta>
      <meta name="dcterms.title" content="Database Reference"></meta>
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96196-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ALL_SQLSET_BINDS.html" title="Previous" type="text/html"></link>
      <link rel="next" href="ALL_SQLSET_REFERENCES.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="REFRN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ALL_SQLSET_BINDS.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="ALL_SQLSET_REFERENCES.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="static-data-dictionary-views.html" property="item" typeof="WebPage"><span property="name">静态数据字典视图</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="static-data-dictionary-views-2.html" property="item" typeof="WebPage"><span property="name">静态数据字典视图：ALL_PART_COL_STATISTICS到DATABASE_PROPERTIES</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ALL_SQLSET_PLANS</li>
            </ol>
            <a id="GUID-309AA564-C8B6-4D57-BF45-5DE16880F95A" name="GUID-309AA564-C8B6-4D57-BF45-5DE16880F95A"></a><a id="REFRN20531"></a>
            
            <h2 id="REFRN-GUID-309AA564-C8B6-4D57-BF45-5DE16880F95A" class="sect2"><span class="enumeration_section">3.82</span> ALL_SQLSET_PLANS</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">ALL_SQLSET_PLANS</code>描述了当前用户可访问的SQL调优集中语句的捕获计划。
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-309AA564-C8B6-4D57-BF45-5DE16880F95A__GUID-F0E5CBD7-8F2C-416E-A1A7-7D070CD6A62B">相关观点</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DBA_SQLSET_PLANS</code>描述数据库中SQL调优集中捕获的计划。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_SQLSET_PLANS</code>描述了当前用户拥有的SQL调优集中语句的捕获计划。此视图不显示<code class="codeph">SQLSET_OWNER</code>列。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-309AA564-C8B6-4D57-BF45-5DE16880F95A__GUID-DBA82E21-5A73-49A3-BEA7-51B0C4630C6C">
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This table describes the columns for this database view" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="24%" id="d583950e188">柱</th>
                           <th align="left" valign="bottom" width="18%" id="d583950e191">数据类型</th>
                           <th align="left" valign="bottom" width="14%" id="d583950e194">空值</th>
                           <th align="left" valign="bottom" width="45%" id="d583950e197">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e202" headers="d583950e188 ">
                              <p><code class="codeph">SQLSET_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e202 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e202 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e202 d583950e197 ">
                              <p>语句的SQL调整集的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e218" headers="d583950e188 ">
                              <p><code class="codeph">SQLSET_OWNER</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e218 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e218 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e218 d583950e197 ">
                              <p>SQL调优集所有者的用户名</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e233" headers="d583950e188 ">
                              <p><code class="codeph">SQLSET_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e233 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e233 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e233 d583950e197 ">
                              <p>为语句设置的SQL调整的ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e249" headers="d583950e188 ">
                              <p><code class="codeph">CON_DBID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e249 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e249 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e249 d583950e197 ">
                              <p>PDB的数据库ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e265" headers="d583950e188 ">
                              <p><code class="codeph">SQL_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e265 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（13）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e265 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e265 d583950e197 ">
                              <p>库高速缓存中父游标的SQL标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e281" headers="d583950e188 ">
                              <p><code class="codeph">FORCE_MATCHING_SIGNATURE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e281 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e281 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e281 d583950e197 ">
                              <p><code class="codeph">CURSOR_SHARING</code>参数设置为<code class="codeph">FORCE</code>时使用的签名</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e302" headers="d583950e188 ">
                              <p><code class="codeph">PLAN_HASH_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e302 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e302 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e302 d583950e197 ">
                              <p>光标的SQL计划的数字表示。将一个<code class="codeph">PLAN_HASH_VALUE</code>与另一个进行比较可以轻松识别两个计划是否相同（而不是逐行比较两个计划）。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e321" headers="d583950e188 ">
                              <p><code class="codeph">SQL_SEQ</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e321 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e321 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e321 d583950e197 ">
                              <p>SQL序列</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e337" headers="d583950e188 ">
                              <p><code class="codeph">STATEMENT_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e337 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e337 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e337 d583950e197 ">
                              <p>声明ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e352" headers="d583950e188 ">
                              <p><code class="codeph">plan_id的数据类型</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e352 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e352 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e352 d583950e197 ">
                              <p>计划ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e367" headers="d583950e188 ">
                              <p><code class="codeph">TIMESTAMP</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e367 d583950e191 ">
                              <p><code class="codeph">日期</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e367 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e367 d583950e197 ">
                              <p>日期和时间时间戳</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e383" headers="d583950e188 ">
                              <p><code class="codeph">备注</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e383 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e383 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e383 d583950e197 ">
                              <p>备注</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e398" headers="d583950e188 ">
                              <p><code class="codeph">操作</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e398 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e398 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e398 d583950e197 ">
                              <p>在此步骤中执行的内部操作的名称（例如， <code class="codeph">TABLE ACCESS</code> ）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e416" headers="d583950e188 ">
                              <p><code class="codeph">OPTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e416 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（255）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e416 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e416 d583950e197 ">
                              <p>“ <code class="codeph">OPERATION</code>列中描述的<code class="codeph">OPERATION</code>变体（例如， <code class="codeph">FULL</code> ）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e437" headers="d583950e188 ">
                              <p><code class="codeph">OBJECT_NODE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e437 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e437 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e437 d583950e197 ">
                              <p>用于引用对象的数据库链接的名称（表名或视图名称）。对于使用并行执行的本地查询，此列描述了操作输出的使用顺序。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e452" headers="d583950e188 ">
                              <p><code class="codeph">OBJECT_OWNER</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e452 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e452 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e452 d583950e197 ">
                              <p>拥有包含表或索引的模式的用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e467" headers="d583950e188 ">
                              <p><code class="codeph">OBJECT_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e467 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e467 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e467 d583950e197 ">
                              <p>表或索引的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e482" headers="d583950e188 ">
                              <p><code class="codeph">OBJECT_ALIAS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e482 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（261）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e482 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e482 d583950e197 ">
                              <p>对象的别名</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e497" headers="d583950e188 ">
                              <p><code class="codeph">OBJECT_INSTANCE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e497 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e497 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e497 d583950e197 ">
                              <p>对象的实例编号</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e512" headers="d583950e188 ">
                              <p><code class="codeph">OBJECT_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e512 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e512 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e512 d583950e197 ">
                              <p>对象的类型</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e527" headers="d583950e188 ">
                              <p><code class="codeph">优化器</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e527 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（255）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e527 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e527 d583950e197 ">
                              <p>计划中第一行（语句行）的优化程序的当前模式，例如<code class="codeph">CHOOSE</code> 。当操作是数据库访问（例如， <code class="codeph">TABLE ACCESS</code> ）时，此列指示是否分析对象。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e548" headers="d583950e188 ">
                              <p><code class="codeph">SEARCH_COLUMNS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e548 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e548 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e548 d583950e197 ">
                              <p>具有开始和停止键的索引列数（即具有匹配谓词的列数）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e564" headers="d583950e188 ">
                              <p><code class="codeph">ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e564 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e564 d583950e194 ">
                              <p><code class="codeph">不是NULL</code></p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e564 d583950e197 ">
                              <p>分配给执行计划中每个步骤的编号</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e580" headers="d583950e188 ">
                              <p><code class="codeph">PARENT_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e580 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e580 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e580 d583950e197 ">
                              <p>对当前步骤的输出进行操作的下一个执行步骤的ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e595" headers="d583950e188 ">
                              <p><code class="codeph">深度</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e595 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e595 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e595 d583950e197 ">
                              <p>树中操作的深度（或级别）。没有必要发出<code class="codeph">CONNECT BY</code>语句来获取级别信息，该级别信息通常用于缩进<code class="codeph">PLAN_TABLE</code>表中的行。根操作（语句）是级别0。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e616" headers="d583950e188 ">
                              <p><code class="codeph">位置</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e616 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e616 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e616 d583950e197 ">
                              <p>具有相同<code class="codeph">PARENT_ID</code>所有操作的处理<code class="codeph">PARENT_ID</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e634" headers="d583950e188 ">
                              <p><code class="codeph">成本</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e634 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e634 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e634 d583950e197 ">
                              <p>优化程序基于成本的方法估算的操作成本。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e649" headers="d583950e188 ">
                              <p><code class="codeph">CARDINALITY</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e649 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e649 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e649 d583950e197 ">
                              <p>由基于成本的优化器估算操作产生的行数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e664" headers="d583950e188 ">
                              <p><code class="codeph">BYTES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e664 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e664 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e664 d583950e197 ">
                              <p>由基于成本的优化器估计操作产生的字节数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e679" headers="d583950e188 ">
                              <p><code class="codeph">OTHER_TAG</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e679 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（255）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e679 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e679 d583950e197 ">
                              <p>描述<code class="codeph">OTHER</code>列的内容。有关值的信息，请参见“ <a href="../tgsql/generating-and-displaying-execution-plans.html#TGSQL271" target="_blank"><span><cite>Oracle数据库SQL调优指南”</cite></span></a> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e703" headers="d583950e188 ">
                              <p><code class="codeph">PARTITION_START</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e703 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（255）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e703 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e703 d583950e197 ">
                              <p>启动一系列已访问分区的分区</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e718" headers="d583950e188 ">
                              <p><code class="codeph">PARTITION_STOP</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e718 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（255）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e718 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e718 d583950e197 ">
                              <p>停止一系列访问的分区的分区</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e733" headers="d583950e188 ">
                              <p><code class="codeph">PARTITION_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e733 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e733 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e733 d583950e197 ">
                              <p>计算<code class="codeph">PARTITION_START</code>和<code class="codeph">PARTITION_STOP</code>列的值对的步骤</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e755" headers="d583950e188 ">
                              <p><code class="codeph">其他</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e755 d583950e191 ">
                              <p><code class="codeph">长</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e755 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e755 d583950e197 ">
                              <p>用户可能认为有用的执行步骤的其他信息。有关值的信息，请参见“ <a href="../tgsql/generating-and-displaying-execution-plans.html#TGSQL271" target="_blank"><span><cite>Oracle数据库SQL调优指南”</cite></span></a> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e776" headers="d583950e188 ">
                              <p><code class="codeph">分配</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e776 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e776 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e776 d583950e197 ">
                              <p>存储用于将生产者查询服务器中的行分发到使用者查询服务器的方法</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e791" headers="d583950e188 ">
                              <p><code class="codeph">CPU_COST</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e791 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e791 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e791 d583950e197 ">
                              <p>由优化程序基于成本的方法估计的操作的CPU成本。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e806" headers="d583950e188 ">
                              <p><code class="codeph">IO_COST</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e806 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e806 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e806 d583950e197 ">
                              <p>由优化器基于成本的方法估计的操作的I / O成本。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e821" headers="d583950e188 ">
                              <p><code class="codeph">TEMP_SPACE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e821 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e821 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e821 d583950e197 ">
                              <p>由优化程序基于成本的方法估计的操作的临时空间使用（排序或散列连接）。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e836" headers="d583950e188 ">
                              <p><code class="codeph">ACCESS_PREDICATES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e836 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e836 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e836 d583950e197 ">
                              <p>用于在访问结构中定位行的谓词。例如，启动或停止索引范围扫描的谓词。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e851" headers="d583950e188 ">
                              <p><code class="codeph">FILTER_PREDICATES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e851 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e851 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e851 d583950e197 ">
                              <p>用于在生成行之前过滤行的谓词</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e866" headers="d583950e188 ">
                              <p><code class="codeph">投影</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e866 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e866 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e866 d583950e197 ">
                              <p>操作产生的表达</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e881" headers="d583950e188 ">
                              <p><code class="codeph">时间</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e881 d583950e191 ">
                              <p><code class="codeph">NUMBER（38）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e881 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e881 d583950e197 ">
                              <p>由优化程序基于成本的方法估计的操作的经过时间（以秒为单位）。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e896" headers="d583950e188 ">
                              <p><code class="codeph">QBLOCK_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e896 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e896 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e896 d583950e197 ">
                              <p>查询块的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e911" headers="d583950e188 ">
                              <p><code class="codeph">OTHER_XML</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e911 d583950e191 ">
                              <p><code class="codeph">CLOB</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e911 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e911 d583950e197 ">
                              <p>提供特定于执行计划执行步骤的额外信息。此列的内容使用XML构建，因为可以在那里存储多条信息。这包括：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>用于解析查询的模式的名称</p>
                                 </li>
                                 <li>
                                    <p>生成解释计划的Oracle数据库的版本号</p>
                                 </li>
                                 <li>
                                    <p>与执行计划关联的哈希值</p>
                                 </li>
                                 <li>
                                    <p>大纲的名称（如果有）或用于构建执行计划的SQL配置文件</p>
                                 </li>
                                 <li>
                                    <p>指示是否使用动态统计数据来制定计划</p>
                                 </li>
                                 <li>
                                    <p>大纲数据，一组可用于重新生成同一计划的优化程序提示</p>
                                 </li>
                              </ul>
                              <p>有关值的更多信息，请参见“ <a href="../tgsql/generating-and-displaying-execution-plans.html#TGSQL271" target="_blank"><span><cite>Oracle数据库SQL调优指南”</cite></span></a> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e954" headers="d583950e188 ">
                              <p><code class="codeph">EXECUTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e954 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e954 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e954 d583950e197 ">
                              <p>计划执行的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e969" headers="d583950e188 ">
                              <p><code class="codeph">STARTS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e969 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e969 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e969 d583950e197 ">
                              <p>此操作已启动的次数，累计在过去的执行中</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e984" headers="d583950e188 ">
                              <p><code class="codeph">OUTPUT_ROWS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e984 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e984 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e984 d583950e197 ">
                              <p>行源生成的行数，在过去的执行中累积</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e999" headers="d583950e188 ">
                              <p><code class="codeph">CR_BUFFER_GETS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e999 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e999 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e999 d583950e197 ">
                              <p>以一致模式接收的缓冲区数，在过去的执行中累积。通常以一致的模式检索缓冲区以进行查询。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1014" headers="d583950e188 ">
                              <p><code class="codeph">CU_BUFFER_GETS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1014 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1014 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1014 d583950e197 ">
                              <p>在当前模式下检索的缓冲区数，在过去的执行中累积。在当前模式下检索缓冲区，例如<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1038" headers="d583950e188 ">
                              <p><code class="codeph">DISK_READS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1038 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1038 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1038 d583950e197 ">
                              <p>在过去的执行过程中累积的操作执行的物理磁盘读取次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1053" headers="d583950e188 ">
                              <p><code class="codeph">DISK_WRITES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1053 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1053 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1053 d583950e197 ">
                              <p>在过去的执行中累积的操作执行的物理磁盘写入次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1068" headers="d583950e188 ">
                              <p><code class="codeph">ELAPSED_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1068 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1068 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1068 d583950e197 ">
                              <p>与此操作相对应的经过时间（以微秒为单位），累计在过去的执行中</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1083" headers="d583950e188 ">
                              <p><code class="codeph">LAST_STARTS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1083 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1083 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1083 d583950e197 ">
                              <p>上次执行期间此操作已启动的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1098" headers="d583950e188 ">
                              <p><code class="codeph">LAST_OUTPUT_ROWS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1098 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1098 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1098 d583950e197 ">
                              <p>上次执行期间行源生成的行数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1113" headers="d583950e188 ">
                              <p><code class="codeph">LAST_CR_BUFFER_GETS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1113 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1113 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1113 d583950e197 ">
                              <p>在上次执行期间以一致模式检索的缓冲区数。通常以一致的模式检索缓冲区以进行查询。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1129" headers="d583950e188 ">
                              <p><code class="codeph">LAST_CU_BUFFER_GETS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1129 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1129 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1129 d583950e197 ">
                              <p>在上次执行期间以当前模式检索的缓冲区数。在当前模式下检索缓冲区，例如<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1153" headers="d583950e188 ">
                              <p><code class="codeph">LAST_DISK_READS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1153 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1153 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1153 d583950e197 ">
                              <p>上次执行期间操作执行的物理磁盘读取次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1168" headers="d583950e188 ">
                              <p><code class="codeph">LAST_DISK_WRITES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1168 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1168 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1168 d583950e197 ">
                              <p>在上次执行期间由操作执行的物理磁盘写入次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1183" headers="d583950e188 ">
                              <p><code class="codeph">LAST_ELAPSED_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1183 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1183 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1183 d583950e197 ">
                              <p>在上次执行期间，与此操作对应的经过时间（以微秒为单位）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1198" headers="d583950e188 ">
                              <p><code class="codeph">政策</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1198 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（10）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1198 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1198 d583950e197 ">
                              <p>该工作区的规模调整政策：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">手册</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">汽车</code></p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1222" headers="d583950e188 ">
                              <p><code class="codeph">ESTIMATED_OPTIMAL_SIZE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1222 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1222 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1222 d583950e197 ">
                              <p>此工作区在内存中执行操作所需的估计大小（以KB为单位）（最佳执行）。这可以从优化程序统计信息或先前的执行中派生。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1237" headers="d583950e188 ">
                              <p><code class="codeph">ESTIMATED_ONEPASS_SIZE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1237 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1237 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1237 d583950e197 ">
                              <p>此工作区在单次传递中执行操作所需的估计大小（以KB为单位）。这可以从优化程序统计信息或先前的执行中派生。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1252" headers="d583950e188 ">
                              <p><code class="codeph">LAST_MEMORY_USED</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1252 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1252 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1252 d583950e197 ">
                              <p>在上次执行游标期间此工作区使用的内存大小（以KB为单位）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1267" headers="d583950e188 ">
                              <p><code class="codeph">LAST_EXECUTION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1267 d583950e191 ">
                              <p><code class="codeph">VARCHAR2（10）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1267 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1267 d583950e197 ">
                              <p>指示在上次执行游标期间，此工作区是使用<code class="codeph">OPTIMAL</code> ， <code class="codeph">ONE</code> <code class="codeph">PASS</code>还是在<code class="codeph">ONE</code> <code class="codeph">PASS</code>内存要求（ <code class="codeph">MULTI</code> - <code class="codeph">PASS</code> ）下运行</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1304" headers="d583950e188 ">
                              <p><code class="codeph">LAST_DEGREE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1304 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1304 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1304 d583950e197 ">
                              <p>在上次执行游标期间使用的并行度</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1319" headers="d583950e188 ">
                              <p><code class="codeph">TOTAL_EXECUTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1319 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1319 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1319 d583950e197 ">
                              <p>此工作区域处于活动状态的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1335" headers="d583950e188 ">
                              <p><code class="codeph">OPTIMAL_EXECUTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1335 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1335 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1335 d583950e197 ">
                              <p>此工作区以最佳模式运行的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1350" headers="d583950e188 ">
                              <p><code class="codeph">ONEPASS_EXECUTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1350 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1350 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1350 d583950e197 ">
                              <p>此工作区在一次通过模式下运行的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1365" headers="d583950e188 ">
                              <p><code class="codeph">MULTIPASSES_EXECUTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1365 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1365 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1365 d583950e197 ">
                              <p>此工作区域运行低于一次通过内存要求的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1380" headers="d583950e188 ">
                              <p><code class="codeph">ACTIVE_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1380 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1380 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1380 d583950e197 ">
                              <p>此工作区域的平均活动时间（以百分之一秒为单位）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1395" headers="d583950e188 ">
                              <p><code class="codeph">MAX_TEMPSEG_SIZE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1395 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1395 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1395 d583950e197 ">
                              <p>由此工作区实例化创建的最大临时段大小（以字节为单位）。如果此工作区从未溢出到磁盘，则此列为null。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d583950e1410" headers="d583950e188 ">
                              <p><code class="codeph">LAST_TEMPSEG_SIZE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d583950e1410 d583950e191 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d583950e1410 d583950e194 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d583950e1410 d583950e197 ">
                              <p>在此工作区的最后一个实例中创建的临时段大小（以字节为单位）。如果此工作区的最后一个实例未溢出到磁盘，则此列为null。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-309AA564-C8B6-4D57-BF45-5DE16880F95A__GUID-80151590-18FA-4647-A8B4-72B4B18EEF6D">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="DBA_SQLSET_PLANS.html#GUID-D5717906-E051-46C2-B265-606344B5EFF5" title="DBA_SQLSET_PLANS描述数据库中SQL调优集中捕获的计划。其列与ALL_SQLSET_PLANS中的列相同。">DBA_SQLSET_PLANS</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="USER_SQLSET_PLANS.html#GUID-042DC804-60E8-4881-AC38-7D951F784430" title="USER_SQLSET_PLANS描述了当前用户拥有的SQL调优集中语句的捕获计划。它的列（SQLSET_OWNER除外）与ALL_SQLSET_PLANS中的列相同。">USER_SQLSET_PLANS</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="06056.config-sqlserver-gateway.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>为SQL Server配置Oracle数据库网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), Oracle Solaris on x86-64 (64-Bit), and HP-UX Itanium"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-installation-and-configuration-guide-aix-5l-based-systems-64-bit-hp-ux-itanium-solaris-operating-system-sparc-64-bit-linux-x86-and-linux-x86-64.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:11:50-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="install-sqlserver-gateway.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-odbc-gateway.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64"></meta>
    <meta name="dcterms.isVersionOf" content="OTGIS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="install-sqlserver-gateway.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-odbc-gateway.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-sqlserver-gateway.html" property="item" typeof="WebPage"><span property="name">安装和配置SQL Server的Oracle Database Gateway</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">为SQL Server配置Oracle数据库网关</li>
            </ol>
            <a id="GUID-1503C3E7-6A58-449D-B6F7-3D95CD4A636F" name="GUID-1503C3E7-6A58-449D-B6F7-3D95CD4A636F"></a><a id="OTGIS900"></a>
            
            <h2 id="OTGIS-GUID-1503C3E7-6A58-449D-B6F7-3D95CD4A636F" class="sect2"><span class="enumeration_chapter">9</span>为SQL Server配置Oracle数据库网关</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装网关后，执行以下任务以配置SQL Server的Oracle Database Gateway：</p>
               <ol>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-77F52D66-6325-4B24-A69F-99FE10C2DB48">配置网关初始化参数文件</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-C7E48634-3FB1-4401-8B54-D1A4BC92B1E5">为网关配置Oracle Net</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-BEA5348F-6CE4-47D4-84A1-CE9537633D76">配置Oracle数据库以进行网关访问</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-80D00A76-CFDA-40EE-82A9-03D0121040BF">创建数据库链接</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-89C4407C-4AA9-4BD4-A5A5-BE785C46BA2F">配置两阶段提交</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-8DE67926-7533-423C-A24A-C4FED8DFD043">为数据字典支持创建SQL Server视图</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-BA3E2194-0464-45AE-9FFA-9B58AF46D44A">加密网关初始化参数值</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-B0B3CF32-DFBF-4885-B6E8-95DAB4251EB8">配置网关以访问多个SQL Server数据库</a></p>
                  </li>
               </ol>
            </div><a id="OTGIS1015"></a><div class="props_rev_3"><a id="GUID-77F52D66-6325-4B24-A69F-99FE10C2DB48" name="GUID-77F52D66-6325-4B24-A69F-99FE10C2DB48"></a><h3 id="OTGIS-GUID-77F52D66-6325-4B24-A69F-99FE10C2DB48" class="sect3">配置网关初始化参数文件</h3>
               <div>
                  <div class="section">
                     <p>执行以下任务以配置网关初始化参数文件。<a id="d24911e108" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-D0E93DC3-86C1-46E3-A083-DBE7FA77A68B">选择网关的系统标识符</a></span></li>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912">自定义初始化参数文件</a></span></li>
                  </ol>
               </div><a id="OTGIS1016"></a><div class="props_rev_3"><a id="GUID-D0E93DC3-86C1-46E3-A083-DBE7FA77A68B" name="GUID-D0E93DC3-86C1-46E3-A083-DBE7FA77A68B"></a><h4 id="OTGIS-GUID-D0E93DC3-86C1-46E3-A083-DBE7FA77A68B" class="sect4">选择网关的系统标识符</h4>
                  <div>
                     <div class="section">
                        <p>该<a id="d24911e162" class="indexterm-anchor"></a>网关系统标识符<a id="d24911e167" class="indexterm-anchor"></a> （SID）是标识网关实例的字母数字字符串。对于要访问的每个SQL Server数据库，您需要一个网关实例，因此需要一个网关SID。SID用作初始化参数文件的文件名的一部分。默认SID是<span class="bold"></span> <code class="codeph">dg4msql</code> 。
                        </p>
                        <p>您可以定义网关SID，但使用默认的dg4msql更容易，因为您不需要更改初始化参数文件名。但是，如果要访问两个SQL Server数据库，则需要两个网关SID，一个用于网关的每个实例。如果您只有一个SQL Server数据库并且希望有时使用一组网关参数设置来访问它，而其他时候使用不同的网关参数设置，那么您将需要多个网关SID用于单个SQL Server数据库。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1017"></a><div class="props_rev_3"><a id="GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912" name="GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912"></a><h4 id="OTGIS-GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912" class="sect4">自定义初始化参数文件</h4>
                  <div>
                     <div class="section">
                        <p><a id="d24911e210" class="indexterm-anchor"></a>启动网关时，初始化参数文件必须可用。在安装过程中，将创建以下默认初始化参数文件：</p><pre class="oac_no_warn" dir="ltr"><a id="d24911e216" class="indexterm-anchor"></a> $ ORACLE_HOME / dg4msql /管理/ initdg4msql.ora</pre><p>其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。
                        </p>
                        <p>此初始化文件用于默认网关SID。如果未使用dg4msql作为网关SID，则必须使用在上一步中<a href="config-sqlserver-gateway.html#GUID-D0E93DC3-86C1-46E3-A083-DBE7FA77A68B">选择</a>的SID重命名初始化参数文件选择<a href="config-sqlserver-gateway.html#GUID-D0E93DC3-86C1-46E3-A083-DBE7FA77A68B">网关的系统标识符</a> 。此默认初始化参数文件足以启动网关，验证安装是否成功以及运行演示脚本。
                        </p>
                        <p>可以使用许多初始化参数来修改网关行为。有关可以设置的初始化参数的完整列表，请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a> 。对初始化参数所做的更改仅在下一个网关会话中生效。最重要的参数是<code class="codeph">HS_FDS_CONNECT_INFO</code> ，它描述了与非Oracle系统的连接。
                        </p>
                        <p>默认初始化参数文件已有此参数的条目。<code class="codeph">HS_FDS_CONNECT_INFO</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> [[： <span class="italic">port_number</span> ] | / [ <span class="italic">instance_name</span> ]] [/ <span class="italic">database_name</span> ]</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912__GUID-D94E6F24-F06B-4361-A470-6594670727CF">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d24911e268">变量</th>
                                    <th align="left" valign="bottom" width="76%" id="d24911e271">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d24911e276" headers="d24911e268 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d24911e276 d24911e271 ">
                                       <p>是托管SQL Server数据库的计算机的主机名或IP地址。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d24911e285" headers="d24911e268 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d24911e285 d24911e271 ">
                                       <p>是SQL Server数据库的端口号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d24911e294" headers="d24911e268 ">
                                       <p><span class="italic"><code class="codeph">INSTANCE_NAME</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d24911e294 d24911e271 ">
                                       <p>是在计算机上运行的SQL Server实例。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d24911e303" headers="d24911e268 ">
                                       <p><span class="italic"><code class="codeph">数据库名称</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d24911e303 d24911e271 ">
                                       <p>是SQL Server数据库数据库名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>可以使用变量<span class="italic"><code class="codeph">port_number</code></span>或<span class="italic"><code class="codeph">instance_name</code></span>中的任何一个，但不能同时使用它们。可选地，它们都可以省略。变量<span class="italic"><code class="codeph">database_name</code></span>始终是可选的。省略特定值时需要斜杠（ <code class="codeph">/</code> ）。例如，以下所有条目均有效：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> / <span class="italic">instance_name</span> / <span class="italic">database_name</span> HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> // <span class="italic">database_name</span> HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> ： <span class="italic">port_name</span> // <span class="italic">database_name</span> HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> / <span class="italic">instance_name</span> HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> 
</pre><p>此版本的网关可以支持IPv6。如果要指定IPv6地址格式，则必须用方括号括起来指示与端口号的分隔。例如，</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = [2001：将0db8：20C：F1FF：FEC6：38AF]：1300 // SQL_DB1</pre><div class="infoboxnotealso" id="GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912__GUID-55CEAF80-BFE7-4AD7-BD58-129C93CD0E32">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4089" target="_blank"><span class="italic">Oracle数据库异构连接用户指南</span></a> ，了解有关自定义初始化参数文件的更多信息。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS1018"></a><div class="props_rev_3"><a id="GUID-C7E48634-3FB1-4401-8B54-D1A4BC92B1E5" name="GUID-C7E48634-3FB1-4401-8B54-D1A4BC92B1E5"></a><h3 id="OTGIS-GUID-C7E48634-3FB1-4401-8B54-D1A4BC92B1E5" class="sect3">为网关配置Oracle Net</h3>
               <div>
                  <div class="section">
                     <p>网关要求Oracle Net与Oracle数据库通信。配置网关后，执行以下任务以配置Oracle Net以使用网关：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-43B467F1-6778-4F55-9110-C1EC26464212">为网关配置Oracle Net Listener</a></span></li>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-B938B041-3482-49ED-8D7B-5D8B1EA150F9">停止并启动Gateway的Oracle Net Listener</a></span></li>
                  </ol>
               </div><a id="OTGIS1019"></a><div class="props_rev_3"><a id="GUID-43B467F1-6778-4F55-9110-C1EC26464212" name="GUID-43B467F1-6778-4F55-9110-C1EC26464212"></a><h4 id="OTGIS-GUID-43B467F1-6778-4F55-9110-C1EC26464212" class="sect4">为网关配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Net Listener侦听来自Oracle数据库的传入请求。要使Oracle Net Listener监听网关，必须将有关网关的信息添加到Oracle Net Listener配置文件<code class="codeph">listener.ora</code> 。默认情况下，此文件位于<code class="codeph">$ORACLE_HOME/network/admin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。
                        </p>
                        <p>必须将以下条目添加到<code class="codeph">listener.ora</code>文件中：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle Net Listener侦听的Oracle Net地址列表</p>
                           </li>
                           <li>
                              <p>Oracle Net Listener响应传入连接请求而启动的网关的可执行文件名</p>
                           </li>
                        </ul>
                        <p><code class="codeph">$ORACLE_HOME/dg4msql/admin</code>目录中提供了<code class="codeph">listener.ora</code>条目（ <code class="codeph">listener.ora.sample</code> ）的示例，其中<code class="codeph">$</code> <code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="OTGIS1020"></a><div class="props_rev_3"><a id="GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712" name="GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712"></a><h5 id="OTGIS-GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712" class="sect5">listener.ora文件条目的语法</h5>
                     <div>
                        <p>Oracle数据库使用Oracle Net和任何支持的协议适配器与网关通信。以下是Oracle Net Listener使用TCP / IP协议适配器侦听的地址的语法：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712__GUID-E82C428D-92D8-48B9-950E-0FEB23039B4C">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d24911e557">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d24911e560">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e565" headers="d24911e557 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e565 d24911e560 ">
                                       <p>是安装网关的计算机的名称。此版本支持IPv6格式。有关详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETRF008" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e579" headers="d24911e557 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e579 d24911e560 ">
                                       <p>指定Oracle Net Listener使用的端口号。如果在同一台机器上运行其他侦听器，则<span class="italic">port_number</span>的值必须与其他侦听器的端口号不同。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>要指示Oracle Net Listener启动网关以响应传入的连接请求，请在<code class="codeph">listener.ora</code>文件中添加一个条目。
                        </p>
                        <div class="infoboxnote" id="GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712__GUID-C534DB45-FF0C-4700-9595-147C0644564E">
                           <p class="notep1">注意：</p>
                           <p>您必须在<code class="codeph">listener.ora</code>文件和将在下一步中配置的<code class="codeph">tnsnames.ora</code>文件中使用相同的SID值。
                           </p>
                        </div>
                        <p>对于Linux，将使用Kerberos身份验证：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（ENVS = LD_PRELOAD = <span class="italic">kerberos_system_libs</span> ）（PROGRAM = dg4msql）））</pre><p>对于Linux，不使用Kerberos身份验证时：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><p>对于AIX和Solaris SPARC：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><p>对于HP-UX Itanium：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / dg4msql / driver / lib： <span class="italic">oracle_home_directory</span> / lib）（PROGRAM = dg4msql）））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712__GUID-8580AD53-9750-44BE-BA6B-83F8F9CE820D">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d24911e664">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d24911e667">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e672" headers="d24911e664 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e672 d24911e667 ">
                                       <p>指定网关的SID，并匹配<code class="codeph">tnsnames.ora</code>文件中连接描述符条目中指定的网关SID。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e684" headers="d24911e664 ">
                                       <p><span class="italic"><code class="codeph">oracle_home_directory</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e684 d24911e667 ">
                                       <p>指定网关所在的Oracle主目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e693" headers="d24911e664 ">
                                       <p><code class="codeph">dg4msql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e693 d24911e667 ">
                                       <p>指定SQL Server的Oracle数据库网关的可执行文件名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e701" headers="d24911e664 ">
                                       <p><code class="codeph"><span class="codeinlineitalic">kerberos_system_libs</span></code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e701 d24911e667 ">
                                       <p>系统的路径提供了Kerberos实现。例如： <code class="codeph">libgssapi_krb5.so.XY</code> ， <code class="codeph">libkrb5.so.X</code> ， <code class="codeph">libk5crypto.so.X</code> ， <code class="codeph">libkrb5support.so.X</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果您已有现有的Oracle Net Listener，请将以下语法添加到现有<code class="codeph">listener.ora</code>文件中的<code class="codeph">SID_LIST</code> ：</p>
                        <p>对于AIX，Solaris SPARC和Linux：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =。。）（SID_DESC =。。）（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><p>对于HP-UX Itanium：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =。。）（SID_DESC =。。）（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / dg4msql / driver / lib： <span class="italic">oracle_home_directory</span> / lib）（PROGRAM = dg4msql）））</pre><div class="infoboxnotealso" id="GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712__GUID-D6A38499-609D-4665-92CD-9E60169F15F1">
                           <p class="notep1">也可以看看：</p>
                           <p>有关更改<code class="codeph">listener.ora</code>文件的信息，请参见“ <span class="italic">Oracle Net管理员指南”</span> 。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OTGIS1220"></a><a id="OTGIS1021"></a><div class="props_rev_3"><a id="GUID-B938B041-3482-49ED-8D7B-5D8B1EA150F9" name="GUID-B938B041-3482-49ED-8D7B-5D8B1EA150F9"></a><h4 id="OTGIS-GUID-B938B041-3482-49ED-8D7B-5D8B1EA150F9" class="sect4">停止并启动Gateway的Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>您必须停止并重新启动Oracle Net Listener才能启动新设置，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将PATH环境变量设置为<code class="codeph">$ORACLE_HOME/bin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。</span><div>
                              <p>例如，在Linux平台上，如果您有Bourne或Korn Shell，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">$ PATH = $ ORACLE_HOME / bin：$ PATH; export PATH $ LD_LIBRARY_PATH = $ ORACLE_HOME / lib：$ LD_LIBRARY_PATH; export LD_LIBRARY_PATH</pre><p>如果您有C Shell，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">$ setenv PATH $ ORACLE_HOME / bin：$ PATH $ setenv LD_LIBRARY_PATH $ ORACLE_HOME / lib：$ LD_LIBRARY_PATH</pre><p><a href="config-sqlserver-gateway.html#GUID-B938B041-3482-49ED-8D7B-5D8B1EA150F9__CHDHDICB" title="摘要">表9-1</a>指定了用于不同平台的参数值：</p>
                              <div class="tblformal" id="GUID-B938B041-3482-49ED-8D7B-5D8B1EA150F9__CHDHDICB">
                                 <p class="titleintable">表9-1基于UNIX的平台的SQL Server参数值的Oracle数据库网关</p>
                                 <table cellpadding="4" cellspacing="0" class="Formal" title="适用于基于UNIX的平台的SQL Server参数值的Oracle Database Gateway" width="90%" border="1" summary="summary" frame="hsides" rules="rows">
                                    <thead>
                                       <tr align="left" valign="top">
                                          <th align="left" valign="bottom" width="39%" id="d24911e834">平台</th>
                                          <th align="left" valign="bottom" width="61%" id="d24911e837">参数值</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d24911e842" headers="d24911e834 ">
                                             <p>Oracle Solaris（SPARC）64位和x86-64（64位）上的Oracle Solaris</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d24911e842 d24911e837 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH_64 = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d24911e850" headers="d24911e834 ">
                                             <p>HP-UX Itanium</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d24911e850 d24911e837 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d24911e858" headers="d24911e834 ">
                                             <p>Linux x86 64位</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d24911e858 d24911e837 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d24911e866" headers="d24911e834 ">
                                             <p>POWER Systems上的IBM AIX（64位）</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d24911e866 d24911e837 ">
                                             <p><code class="codeph">LIBPATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- class="inftblhruleinformal" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果侦听器已在运行，请使用<code class="codeph">lsnrctl</code>命令停止侦听器，然后使用新设置启动它，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ lsnrctl停止$ lsnrctl start</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用新设置检查侦听器的状态，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ lsnrctl状态</pre><p>以下是<code class="codeph">lsnrctl</code>状态检查的部分输出：</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">。。。服务摘要......服务“dg4msql”有1个实例。实例“dg4msql”，状态为UNKNOWN，有1个此服务的处理程序...命令成功完成</pre><p>在此示例中，服务名称为<code class="codeph">dg4msql</code> ，这是安装期间分配的默认SID值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS1022"></a><div class="props_rev_3"><a id="GUID-BEA5348F-6CE4-47D4-84A1-CE9537633D76" name="GUID-BEA5348F-6CE4-47D4-84A1-CE9537633D76"></a><h3 id="OTGIS-GUID-BEA5348F-6CE4-47D4-84A1-CE9537633D76" class="sect3">配置Oracle数据库以进行网关访问</h3>
               <div>
                  <p>在使用网关访问SQL Server数据之前，必须配置Oracle数据库以启用与Oracle Net上的网关通信。</p>
                  <p>要配置Oracle数据库，必须将连接描述符添加到<code class="codeph">tnsnames.ora</code>文件中。默认情况下，此文件位于<code class="codeph">$ORACLE_HOME/network/admin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装Oracle数据库的目录。您无法使用Oracle Net Assistant或Oracle Net Easy Config工具来配置<code class="codeph">tnsnames.ora</code>文件。您必须手动编辑该文件。
                  </p>
                  <p><code class="codeph">$ORACLE_HOME/dg4msql/admin</code>目录中提供了<code class="codeph">tnsnames.ora</code>条目（ <code class="codeph">tnsnames.ora.sample</code> ）的示例，其中<code class="codeph">$</code> <code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                  </p>
               </div><a id="OTGIS1023"></a><div class="props_rev_3"><a id="GUID-03832FB9-79F2-431C-9C59-E082FA3D7F2D" name="GUID-03832FB9-79F2-431C-9C59-E082FA3D7F2D"></a><h4 id="OTGIS-GUID-03832FB9-79F2-431C-9C59-E082FA3D7F2D" class="sect4">配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>编辑<code class="codeph">tnsnames.ora</code>文件以添加网关的连接描述符。以下是使用TCP / IP协议的Oracle Net条目的语法：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-03832FB9-79F2-431C-9C59-E082FA3D7F2D__GUID-B23B5C11-DD5B-490C-AC78-54D131A109DA">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d24911e1027">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d24911e1030">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e1035" headers="d24911e1027 ">
                                       <p><span class="italic"><code class="codeph">connect_descriptor</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e1035 d24911e1030 ">
                                       <p>是创建数据库链接时指定的连接对象的描述，例如dg4msql。</p>
                                       <p>检查sqlnet.ora <span class="bold"> </span>用于以下参数设置的文件：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">names.directory_path =（TNSNAMES）</code></p>
                                          </li>
                                       </ul>
                                       <p><span class="bold">注意</span> ：sqlnet.ora文件通常存储在<code class="codeph">$ORACLE_HOME/network/admin</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e1061" headers="d24911e1027 ">
                                       <p><code class="codeph">TCP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e1061 d24911e1030 ">
                                       <p>是用于TCP / IP连接的TCP协议。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e1069" headers="d24911e1027 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e1069 d24911e1030 ">
                                       <p>指定运行网关的计算机。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e1078" headers="d24911e1027 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e1078 d24911e1030 ">
                                       <p>匹配正在侦听网关的Oracle Net Listener使用的端口号。Oracle Net Listener的端口号可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。请参阅<a href="config-sqlserver-gateway.html#GUID-378D0F0D-EDFA-45B3-9C45-FB2E3BAE8712">listener.ora文件条目的语法</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e1094" headers="d24911e1027 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e1094 d24911e1030 ">
                                       <p>指定网关的SID，并匹配正在侦听网关的Oracle Net Listener的<code class="codeph">listener.ora</code>文件中指定的SID。有关更多信息，请参阅<a href="config-sqlserver-gateway.html#GUID-43B467F1-6778-4F55-9110-C1EC26464212">为网关配置Oracle Net Listener</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d24911e1110" headers="d24911e1027 ">
                                       <p><code class="codeph">（HS = OK）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d24911e1110 d24911e1030 ">
                                       <p>指定此连接描述符连接到非Oracle系统。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-03832FB9-79F2-431C-9C59-E082FA3D7F2D__GUID-7AAD7871-2E60-4305-BFA7-573735EF501C">
                           <p class="notep1">也可以看看：</p>
                           <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1280"></a><div class="props_rev_3"><a id="GUID-660EF702-E5A5-420B-9B10-16C7091DD08D" name="GUID-660EF702-E5A5-420B-9B10-16C7091DD08D"></a><h4 id="OTGIS-GUID-660EF702-E5A5-420B-9B10-16C7091DD08D" class="sect4">为多个侦听器配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>要确保更高的可用性，您可以指定多个<a id="d24911e1175" class="indexterm-anchor"></a> connect de scriptor中的监听器。
                        </p><pre class="oac_no_warn" dir="ltr"> <a id="d24911e1183" class="indexterm-anchor"></a> <span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_1</span> ）（PORT = <span class="italic">port_number_1</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_2</span> ）（PORT = <span class="italic">port_number_2</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>这表明，如果<span class="italic"><code class="codeph">host_name_1</code></span>和<span class="italic"><code class="codeph">port_number_1</code></span>的侦听器不可用，则<span class="italic"><code class="codeph">host_name_2</code></span>和<span class="italic"><code class="codeph">port_number_2</code></span>的第二个侦听器将接管。
                        </p>
                        <div class="infoboxnotealso" id="GUID-660EF702-E5A5-420B-9B10-16C7091DD08D__GUID-93E9432F-A52D-464F-B3AC-D57C3F42040D">
                           <p class="notep1">也可以看看：</p>
                           <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS1024"></a><div class="props_rev_3"><a id="GUID-80D00A76-CFDA-40EE-82A9-03D0121040BF" name="GUID-80D00A76-CFDA-40EE-82A9-03D0121040BF"></a><h3 id="OTGIS-GUID-80D00A76-CFDA-40EE-82A9-03D0121040BF" class="sect3">创建数据库链接</h3>
               <div>
                  <div class="section">
                     <p>连接到Oracle数据库的任何Oracle客户端都可以通过网关访问SQL Server数据。Oracle客户端和Oracle数据库可以驻留在不同的计算机上。网关仅接受来自Oracle数据库的连接。</p>
                     <p>首次在Oracle会话中使用时，通过数据库链接建立与网关的连接。在此上下文中，连接是指Oracle数据库与网关之间的连接。在Oracle会话结束之前，连接将保持建立状态。另一个会话或用户可以访问相同的数据库链接，并获得与网关和SQL Server数据库的不同连接。</p>
                     <p>数据库链接在网关会话期间处于活动状态。如果要在会话期间关闭数据库链接，可以使用<code class="codeph">ALTER SESSION</code>语句执行此操作。
                     </p>
                     <p>要访问SQL Server，您必须创建数据库链接。公共数据库链接是最常见的数据库链接。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> CONNECT TO 2“ <span class="italic">user”</span> IDENTIFIED BY <span class="italic">“password”</span> <span class="italic">USING'tns_name_entry</span> ';</pre><p>哪里：</p>
                     <div class="tblformal" id="GUID-80D00A76-CFDA-40EE-82A9-03D0121040BF__GUID-F29FEBE9-AB0D-4F66-BA1C-4E265FB2FD12">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d24911e1307">变量</th>
                                 <th align="left" valign="bottom" width="75%" id="d24911e1310">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d24911e1315" headers="d24911e1307 ">
                                    <p><span class="italic"><code class="codeph">DBLINK</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d24911e1315 d24911e1310 ">
                                    <p>是完整的数据库链接名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d24911e1324" headers="d24911e1307 ">
                                    <p><span class="italic"><code class="codeph">tns_name_entry</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d24911e1324 d24911e1310 ">
                                    <p>指定<code class="codeph">tnsnames.ora</code>文件中指定的标识网关的Oracle Net连接描述符</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>创建数据库链接后，您可以验证与SQL Server数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM DUAL @dblink;</pre><div class="infoboxnotealso" id="GUID-80D00A76-CFDA-40EE-82A9-03D0121040BF__GUID-B5E67B05-7811-478F-8CAC-C6B136D22533">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用数据库链接的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=ADMIN12083" target="_blank"><span><cite>参见Oracle数据库管理员指南</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS1025"></a><div class="props_rev_3"><a id="GUID-89C4407C-4AA9-4BD4-A5A5-BE785C46BA2F" name="GUID-89C4407C-4AA9-4BD4-A5A5-BE785C46BA2F"></a><h3 id="OTGIS-GUID-89C4407C-4AA9-4BD4-A5A5-BE785C46BA2F" class="sect3">配置两阶段提交</h3>
               <div>
                  <div class="section">
                     <p><a id="d24911e1381" class="indexterm-anchor"></a>网关支持以下事务功能：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">COMMIT_CONFIRM</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">只读</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SINGLE_SITE</code></p>
                        </li>
                     </ul>
                     <p>使用<code class="codeph">HS_TRANSACTION_MODEL</code>初始化参数设置事务模型。<a id="d24911e1405" class="indexterm-anchor"></a><a id="d24911e1409" class="indexterm-anchor"></a>默认情况下，网关以<code class="codeph">COMMIT_CONFIRM</code>事务模式运行。当事务更新SQL Server数据库时，网关将成为提交点站点。在验证事务中的所有Oracle数据库已成功准备事务之后，Oracle数据库将提交SQL Server数据库中的工作单元。只有一个网关实例可以作为提交点站点参与Oracle两阶段提交事务。
                     </p>
                     <div class="infoboxnotealso" id="GUID-89C4407C-4AA9-4BD4-A5A5-BE785C46BA2F__GUID-EAB03D71-6339-4082-A1F4-80F0482299AE">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4068" target="_blank"><span class="italic">“Oracle数据库异构连接用户指南”</span></a> ，了解有关两阶段提交过程的信息。
                        </p>
                     </div>
                     <p>要启用<code class="codeph">COMMIT_CONFIRM</code>事务模式，请执行以下任务：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C">创建恢复帐户和密码</a></span></li>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9">创建事务日志表</a></span></li>
                  </ol>
                  <div class="section">
                     <p>名为<code class="codeph">HS_TRANSACTION_LOG</code>的日志表是记录两阶段提交事务的地方。或者，用户可以通过设置网关初始化参数<code class="codeph">HS_FDS_TRANSACTION_LOG</code>参数来指定不同的表名。此表需要与恢复帐户位于同一模式中。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIS1026"></a><div class="props_rev_3"><a id="GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C" name="GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C"></a><h4 id="OTGIS-GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C" class="sect4">创建恢复帐户和密码</h4>
                  <div>
                     <div class="section">
                        <p>对于网关来恢复分布式事务，a <a id="d24911e1484" class="indexterm-anchor"></a>必须在SQL Server数据库中设置恢复帐户和密码。默认情况下，两者都有<a id="d24911e1489" class="indexterm-anchor"></a>帐户的用户名和密码是<code class="codeph">RECOVER</code> 。可以使用网关初始化参数<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>更改帐户的名称。可以使用网关初始化参数<code class="codeph">HS_FDS_RECOVERY_PWD</code>更改帐户密码。</p>
                        <div class="infoboxnote" id="GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C__GUID-587E5AFB-6D7C-4D18-9EE5-DA81FEF54231">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议您不要使用默认值<code class="codeph">RECOVER</code>作为用户名和密码。此外，将纯文本作为用户名和密码存储在初始化文件中并不是一个好的安全策略。现在有一个名为<code class="codeph">dg4pwd</code>的实用程序应该用于加密。有关更多详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">，</a>请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">“</a> <span class="italic">Oracle数据库异构连接用户指南</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">”</a>中的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">第4.2.3节“加密初始化参数”</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL Server数据库中设置用户帐户。用户名和密码都必须是有效的SQL Server用户名和密码。</span></li>
                        <li class="stepexpand"><span>在初始化参数文件中，设置以下网关初始化参数：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>指向您设置用于恢复的SQL Server用户帐户的用户名。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">HS_FDS_RECOVERY_PWD</code>到您为恢复设置的SQL Server用户帐户的密码。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C__GUID-4135B22D-D651-48CC-B0F1-3E40EBD09E89">
                                       <p class="notep1">也可以看看：</p>
                                       <p>有关编辑<a href="config-sqlserver-gateway.html#GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912">初始化参数文件</a>的信息，请<a href="config-sqlserver-gateway.html#GUID-E2ED307B-B50E-481D-8C3D-EAB0FDB5B912">自定义</a>初始化参数文件。有关<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>和<code class="codeph">HS_FDS_RECOVERY_PWD</code> ，请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a> 。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="OTGIS1027"></a><div class="props_rev_3"><a id="GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9" name="GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9"></a><h4 id="OTGIS-GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9" class="sect4">创建事务日志表</h4>
                  <div>
                     <div class="section">
                        <p>配置网关进行两阶段提交时，a <a id="d24911e1601" class="indexterm-anchor"></a>必须在SQL Server数据库中创建表以记录事务。网关使用事务日志表来检查网关在SQL Server数据库中启动并在表中注册的失败事务的状态。
                        </p>
                        <div class="infoboxnote" id="GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9__GUID-E59EB236-A9A7-4257-AA71-5ACA07A3794A">
                           <p class="notep1">注意：</p>
                           <p>事务日志表的更新不能是Oracle分布式事务的一部分。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9__GUID-A4DD2C4A-8C60-45CC-9EC9-DA158FAA8516">
                           <p class="notep1">注意：</p>
                           <p>事务日志表中的信息是恢复过程所必需的<span class="italic"> </span>不得改变。桌子<span class="italic"> </span>必须仅由网关使用，访问或更新。
                           </p>
                        </div>
                        <p>该表名为<code class="codeph">HS_TRANSACTION_LOG</code> ，由两列组成， <code class="codeph">GLOBAL_TRAN_ID</code> ，数据类型<code class="codeph">CHAR(64) NOT NULL</code>和<code class="codeph">TRAN_COMMENT</code> ，数据类型<code class="codeph">CHAR(255)</code> 。
                        </p>
                        <p>通过使用<code class="codeph">HS_FDS_TRANSACTION_LOG</code>初始化参数指定其他名称，可以使用除<code class="codeph">HS_TRANSACTION_LOG</code>之外的日志表的其他名称。
                        </p>
                        <div class="infoboxnotealso" id="GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9__GUID-BC777F62-A867-45E6-9603-6727E584E582">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化</a>有关<code class="codeph">HS_FDS_TRANSACTION_LOG</code>初始化参数的信息的参数。
                           </p>
                        </div>
                        <p>在<a href="config-sqlserver-gateway.html#GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C">创建恢复帐户和密码</a>中<a href="config-sqlserver-gateway.html#GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C">创建</a>的用户帐户中<a href="config-sqlserver-gateway.html#GUID-58EED2A0-97C9-41DB-8583-391CEB717B6C">创建</a>事务日志表。由于事务日志表用于记录网关事务的状态，因此该表必须驻留在进行SQL Server更新的数据库中。此外，必须在恢复帐户的所有者下创建事务日志表。
                        </p>
                        <div class="infoboxnote" id="GUID-FD61F5C4-2FC3-40F0-9E84-397A75C65EF9__GUID-906079BB-077B-45C2-B6EB-6E4B01F58CF4">
                           <p class="notep1">注意：</p>
                           <p>要使用事务日志表，必须为该网关的用户授予对该表的特权。</p>
                        </div>
                        <p>要创建事务日志表，请使用位于<code class="codeph">$ORACLE_HOME/dg4msql/admin</code>目录中的<code class="codeph">dg4msql_tx.sql</code>脚本，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。使用isql执行脚本，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ isql -Urecovery_account -Precovery_account_password [-Sserver] -idg4msql_tx.sql</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS1028"></a><div class="props_rev_3"><a id="GUID-8DE67926-7533-423C-A24A-C4FED8DFD043" name="GUID-8DE67926-7533-423C-A24A-C4FED8DFD043"></a><h3 id="OTGIS-GUID-8DE67926-7533-423C-A24A-C4FED8DFD043" class="sect3">为数据字典支持创建SQL Server视图</h3>
               <div>
                  <div class="section">
                     <p>要启用Oracle数据字典转换支持，请使用位于<code class="codeph">$ORACLE_HOME/dg4msql/admin</code>目录中的<code class="codeph">dg4msql_cvw.sql</code>脚本，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。您必须在要通过网关访问的每个SQL Server数据库上运行此脚本。使用isql执行脚本，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ isql -Usa_user -Psa_pwd [-Sserver] [-ddatabase] -e -i dg4msql_cvw.sql</pre><p>其中sa_user和sa_pwd分别是SQL Server系统管理员用户标识和密码。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS1029"></a><div class="props_rev_3"><a id="GUID-BA3E2194-0464-45AE-9FFA-9B58AF46D44A" name="GUID-BA3E2194-0464-45AE-9FFA-9B58AF46D44A"></a><h3 id="OTGIS-GUID-BA3E2194-0464-45AE-9FFA-9B58AF46D44A" class="sect3">加密网关初始化参数值</h3>
               <div>
                  <div class="section">
                     <p>网关使用用户标识和密码来访问远程数据库中的信息。必须在网关初始化文件中定义一些用户标识和密码，以处理资源恢复等功能。在当前具有安全意识的环境中，具有可在初始化文件中访问的纯文本密码被认为是不安全的。<code class="codeph">dg4pwd</code>加密实用程序已添加为异构服务的一部分，以帮助提高安全性。此网关可以访问此实用程序。包含敏感值的初始化参数可以以加密形式存储。
                     </p>
                     <div class="infoboxnotealso" id="GUID-BA3E2194-0464-45AE-9FFA-9B58AF46D44A__GUID-011E35C2-F134-4B96-BDDE-B31972487BA2">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用此实用程序的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank"><span class="italic">参见“Oracle数据库异构连接用户指南”</span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS1030"></a><div class="props_rev_3"><a id="GUID-B0B3CF32-DFBF-4885-B6E8-95DAB4251EB8" name="GUID-B0B3CF32-DFBF-4885-B6E8-95DAB4251EB8"></a><h3 id="OTGIS-GUID-B0B3CF32-DFBF-4885-B6E8-95DAB4251EB8" class="sect3">配置网关以访问多个SQL Server数据库</h3>
               <div>
                  <p>配置网关以访问多个SQL Server数据库的任务类似于为单个数据库配置网关的任务。配置示例假定以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用默认SID <code class="codeph">dg4msql</code>安装和配置网关</p>
                     </li>
                     <li>
                        <p><code class="codeph">ORACLE_HOME</code>环境变量设置为安装网关的目录</p>
                     </li>
                     <li>
                        <p>网关配置为一个名为<code class="codeph">db1</code> SQL Server数据库</p>
                     </li>
                     <li>
                        <p>正在添加具有IP地址204.179.79.15的主机上名为<code class="codeph">db2</code>和<code class="codeph">db3</code>两个SQL Server数据库</p>
                     </li>
                  </ul>
               </div><a id="OTGIS1221"></a><a id="OTGIS1222"></a><a id="OTGIS1031"></a><div class="props_rev_3"><a id="GUID-DA1A8810-E30C-4B43-9251-DEDE19838BAA" name="GUID-DA1A8810-E30C-4B43-9251-DEDE19838BAA"></a><h4 id="OTGIS-GUID-DA1A8810-E30C-4B43-9251-DEDE19838BAA" class="sect4">多个SQL Server数据库示例：配置网关</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA1A8810-E30C-4B43-9251-DEDE19838BAA__GUID-0B5A1C3D-F22D-4D51-854B-56AFF369D390">为每个SQL Server数据库选择一个系统ID</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>每个SQL Server数据库都需要一个单独的网关实例。每个实例都需要自己的网关系统ID（SID）。对于此示例，为访问SQL Server数据库的实例选择网关SID：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">dg4msql2</code> <span class="bold"> </span>用于访问数据库<code class="codeph">db2</code>的网关</p>
                           </li>
                           <li>
                              <p><code class="codeph">dg4msql3</code>用于访问数据库<code class="codeph">db3</code>的网关</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA1A8810-E30C-4B43-9251-DEDE19838BAA__GUID-A884BB1E-E4FC-4096-BF89-304476E0A3C8">创建两个初始化参数文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>通过复制原始初始化参数文件<code class="codeph">$ORACLE_HOME/dg4msql/admin/initdg4msql.ora</code>两次，为<code class="codeph">db2</code>的网关SID命名一个，为<code class="codeph">db3</code>的网关SID命名另一个，为网关的每个实例创建一个初始化参数文件：</p><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME / dg4msql / admin $ cp initdg4msql.ora initdg4msql2.ora $ cp initdg4msql.ora initdg4msql3.ora</pre><p>更改新文件中<code class="codeph">HS_FDS_CONNECT_INFO</code>参数的值。
                        </p>
                        <p>对于<code class="codeph">init</code> <code class="codeph">dg4msql</code> <code class="codeph">2.ora</code> ，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = 204.179.79.15：1433 // db2的</pre><p>对于<code class="codeph">init</code> <code class="codeph">dg4msql</code> <code class="codeph">3.ora</code> ，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = 204.179.79.15：1433 // DB3</pre><div class="infoboxnote" id="GUID-DA1A8810-E30C-4B43-9251-DEDE19838BAA__GUID-B64E633F-9C8D-4DE0-BD84-81CEA0F2A756">
                           <p class="notep1">注意：</p>
                           <p>如果您有相同SQL Server数据库的多个网关SID，因为您希望在不同时间使用不同的网关参数设置，请遵循相同的过程。您可以创建多个初始化参数文件，每个文件具有不同的SID和不同的参数设置。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1223"></a><a id="OTGIS1032"></a><div class="props_rev_3"><a id="GUID-72F32D3E-801C-4BD8-BDE3-18B54F8695A8" name="GUID-72F32D3E-801C-4BD8-BDE3-18B54F8695A8"></a><h4 id="OTGIS-GUID-72F32D3E-801C-4BD8-BDE3-18B54F8695A8" class="sect4">多个SQL Server数据库示例：配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-72F32D3E-801C-4BD8-BDE3-18B54F8695A8__GUID-2879B0B1-436A-4118-938D-65543CDA650B">将条目添加到listener.ora</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在Oracle Net Listener配置文件中添加两个新条目， <span class="bold"> </span> <code class="codeph">listener.ora</code> 。即使多个网关实例访问同一数据库，您也必须为每个网关实例提供一个条目。
                        </p>
                        <p>以下示例首先显示原始安装网关的条目，然后显示新条目：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = dg4msql）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql））（SID_DESC =（SID_NAME = dg4msql2）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql））（SID_DESC =（SID_NAME = dg4msql3） ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><p>其中， <code class="codeph">oracle_home_directory</code>是网关所在的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1033"></a><div class="props_rev_3"><a id="GUID-56AC12D9-AC70-43F6-9D96-4AA757BC18DF" name="GUID-56AC12D9-AC70-43F6-9D96-4AA757BC18DF"></a><h4 id="OTGIS-GUID-56AC12D9-AC70-43F6-9D96-4AA757BC18DF" class="sect4">多个SQL Server数据库示例：停止和启动Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>如果侦听器已在运行，请使用<code class="codeph">lsnrctl</code>命令停止侦听器，然后使用新设置启动它，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ lsnrctl停止$ lsnrctl start</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1034"></a><div class="props_rev_3"><a id="GUID-746F76C5-9704-4D73-B145-8838EF48C837" name="GUID-746F76C5-9704-4D73-B145-8838EF48C837"></a><h4 id="OTGIS-GUID-746F76C5-9704-4D73-B145-8838EF48C837" class="sect4">多个SQL Server数据库示例：为Gateway Access配置Oracle数据库</h4>
                  <div>
                     <div class="section">
                        <p>例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="config-sqlserver-gateway.html#GUID-929CD69E-4CF1-4BAC-9827-63EA2A7EDA42">为多个网关实例配置Oracle Net</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="OTGIS1035"></a><div class="props_rev_3"><a id="GUID-929CD69E-4CF1-4BAC-9827-63EA2A7EDA42" name="GUID-929CD69E-4CF1-4BAC-9827-63EA2A7EDA42"></a><h5 id="OTGIS-GUID-929CD69E-4CF1-4BAC-9827-63EA2A7EDA42" class="sect5">为多个网关实例配置Oracle Net</h5>
                     <div>
                        <div class="section">
                           <p>将两个连接描述符条目添加到<code class="codeph">tnsnames.ora</code>文件中。即使网关实例访问同一数据库，您也必须为每个网关实例创建一个条目。
                           </p>
                           <p>以下SQL Server示例首先显示原始安装网关的条目，然后显示新网关实例的两个条目：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">old_db_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4msql））（HS = OK）） <span class="italic">new_db2_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4msql2））（HS = OK）） <span class="italic">new_db3_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name ））（CONNECT_DATA =（SID = dg4msql3））（HS = OK））</pre><p><code class="codeph">PORT</code>的值是正在侦听网关的Oracle Net Listener的TCP / IP端口号。该数字可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。<code class="codeph">HOST</code>的值是运行网关的计算机的名称。该名称也可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OTGIS1036"></a><div class="props_rev_3"><a id="GUID-DB989135-CEE5-449D-8D46-404673A7C4C1" name="GUID-DB989135-CEE5-449D-8D46-404673A7C4C1"></a><h4 id="OTGIS-GUID-DB989135-CEE5-449D-8D46-404673A7C4C1" class="sect4">多个SQL Server数据库示例：访问SQL Server数据</h4>
                  <div>
                     <div class="section">
                        <p>输入以下内容<code class="codeph">dg4msql2</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK MSQL2 CONNECT TO 2“ <span class="italic">user2”</span> IDENTIFIED BY <span class="italic">“password2”</span> USING'new_db2_using';</pre><p>输入以下内容<code class="codeph">dg4msql3</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK MSQL3 CONNECT TO 2“ <span class="italic">user3</span> ”IDENTIFIED BY <span class="italic">“password3”</span> USING'new_db3_using';</pre><p>创建数据库链接后，您可以验证与新SQL Server数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ MSQL2;</pre><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ MSQL3;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="12673.oracle-data-pump-legacy-mode.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Data Pump legacy mode lets you use original Export and Import parameters on the Data Pump Export and Data Pump Import command lines."></meta>
      <meta name="description" content="Data Pump legacy mode lets you use original Export and Import parameters on the Data Pump Export and Data Pump Import command lines."></meta>
      <title>数据泵传统模式</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Utilities "></meta>
      <meta property="og:description" content="Data Pump legacy mode lets you use original Export and Import parameters on the Data Pump Export and Data Pump Import command lines."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Utilities"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-utilities.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T19:07:17-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96081-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="datapump-import-utility.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-data-pump-performance-tips.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Utilities"></meta>
    <meta name="dcterms.isVersionOf" content="SUTIL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="datapump-import-utility.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-data-pump-performance-tips.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">公用事业</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-pump.html" property="item" typeof="WebPage"><span property="name">Oracle Data Pump</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据泵传统模式</li>
            </ol>
            <a id="GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9" name="GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9"></a><a id="SUTIL959"></a>
            
            <h2 id="SUTIL-GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9" class="sect2"><span class="enumeration_chapter">4</span>数据泵传统模式</h2>
         </header>
         <div class="ind">
            <div>
               <p>Data Pump传统模式允许您在“数据泵导出”和“数据泵导入”命令行中使用原始“导出”和“导入”参数。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-B8001F9D-F424-4E53-A470-69A293E23699">Oracle Data Pump传统模式用例</a><br>Oracle Data Pump在遇到旧版导出或导入参数时进入旧版模式，以便您可以继续使用现有脚本。
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE">参数映射</a><br>描述原始导出和导入参数如何映射到提供类似功能的数据泵导出和导入参数。
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719">数据泵传统模式下文件位置的管理</a><br>原始导出和导入以及数据泵导出和导入的区别在于可以写入和读取转储文件和日志文件的位置，因为原始版本是基于客户端的，而数据泵是基于服务器的。
                  </li>
                  <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-998125C5-D00F-4E04-9359-B4835696902E">调整数据泵日志文件和错误的现有脚本</a><br>描述如何调整Data Pump日志文件和错误的现有脚本。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-data-pump.html#GUID-501A9908-BCC5-434C-8853-9A6096766B5A">Oracle Data Pump</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-B8001F9D-F424-4E53-A470-69A293E23699" name="GUID-B8001F9D-F424-4E53-A470-69A293E23699"></a><h3 id="SUTIL-GUID-B8001F9D-F424-4E53-A470-69A293E23699" class="sect3"><span class="enumeration_section">4.1</span> Oracle Data Pump旧模式用例</h3>
               <div>
                  <p>Oracle Data Pump在遇到旧版导出或导入参数时进入旧版模式，以便您可以继续使用现有脚本。</p>
                  <p>如果您使用原始导出（ <code class="codeph">exp</code> ）和导入（ <code class="codeph">imp</code> ），那么您可能已经使用了多年的脚本。Data Pump提供了一种传统模式，允许您继续将现有脚本与Oracle Data Pump一起使用。
                  </p>
                  <p>当Oracle Data Pump确定在命令行或脚本中存在原始导出或导入所特有的参数时，它将进入旧模式。当Data Pump处理参数时，将显示类似的Oracle Data Pump Export或Oracle Data Pump Import参数。Oracle强烈建议您查看新语法并在时间允许的情况下更改脚本。</p>
                  <div class="infoboxnote" id="GUID-B8001F9D-F424-4E53-A470-69A293E23699__GUID-E3A688EF-FCBF-457A-A91B-4187F5346EEF">
                     <p class="notep1">注意：</p>
                     <p>Oracle Data Pump导出和导入实用程序仅以Oracle Data Pump格式创建和读取转储文件和日志文件。它们永远不会创建或读取与原始导出或导入兼容的转储文件。如果您使用原始导出创建了转储文件，则必须使用原始导入将数据导入数据库。</p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9" title="Data Pump传统模式允许您在“数据泵导出”和“数据泵导入”命令行中使用原始“导出”和“导入”参数。">数据泵传统模式</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL960"></a><div class="props_rev_3"><a id="GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE" name="GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE"></a><h3 id="SUTIL-GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE" class="sect3"><span class="enumeration_section">4.2</span>参数映射</h3>
               <div>
                  <p>描述原始导出和导入参数如何映射到提供类似功能的数据泵导出和导入参数。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-28EBC856-5EE8-4C66-8677-3D5723CC5CCF">使用数据泵的原始导出参数</a><br>数据泵导出在映射到相应的数据泵参数时接受原始导出参数。
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-C36B6B69-E55C-4278-AF6D-C9E2306AAE06">使用数据泵的原始导入参数</a><br>数据泵导入在映射到相应的数据泵参数时接受原始导入参数。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE__GUID-F303F819-DB7B-4598-BDA1-95157E934BB6">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-data-pump-export-utility.html#GUID-5F7380CE-A619-4042-8D13-1F7DDE429991" title="Oracle Data Pump Export实用程序用于将数据和元数据卸载到一组称为转储文件集的操作系统文件中。">数据泵导出</a></p>
                        </li>
                        <li>
                           <p><a href="datapump-import-utility.html#GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" title="使用Oracle Data Pump Import，您可以将导出转储文件集加载到目标数据库中，或直接从源数据库加载目标数据库而不插入任何文件。">数据泵导入</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-original-export-utility.html#GUID-901CBBE0-65FB-439E-942D-F2038C18BCD2" title="原始Export实用程序（exp）将数据从Oracle数据库写入二进制格式的操作系统文件。">原始出口</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-original-import-utility.html#GUID-B21D5F0E-8C64-4601-9F16-25806677737B" title="原始导入实用程序（imp）导入使用原始导出实用程序创建的转储文件。">原装进口</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9" title="Data Pump传统模式允许您在“数据泵导出”和“数据泵导入”命令行中使用原始“导出”和“导入”参数。">数据泵传统模式</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL3305"></a><a id="SUTIL961"></a><div class="props_rev_3"><a id="GUID-28EBC856-5EE8-4C66-8677-3D5723CC5CCF" name="GUID-28EBC856-5EE8-4C66-8677-3D5723CC5CCF"></a><h4 id="SUTIL-GUID-28EBC856-5EE8-4C66-8677-3D5723CC5CCF" class="sect4"><span class="enumeration_section">4.2.1</span>使用数据泵的原始导出参数</h4>
                  <div>
                     <p>数据泵导出在映射到相应的数据泵参数时接受原始导出参数。</p>
                     <div class="section">
                        <p>此表描述了Data Pump Export如何解释原始导出参数。此表中不包括原始“导出”和“数据泵导出”中具有相同名称和功能的参数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-28EBC856-5EE8-4C66-8677-3D5723CC5CCF__G1013199">
                        <p class="titleintable">表4-1数据泵导出如何处理原始导出参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="数据泵导出如何处理原始导出参数" width="100%" border="1" summary="Original Export parameters compared to Data Pump Export parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d42059e283">原始出口参数</th>
                                 <th align="left" valign="bottom" id="d42059e286">数据泵输出参数采取的操作</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e291" headers="d42059e283 ">
                                    <p><code class="codeph">缓冲</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e291 d42059e286 ">
                                    <p>该参数被忽略。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e299" headers="d42059e283 ">
                                    <p><code class="codeph">压缩</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e299 d42059e286 ">
                                    <p>该参数被忽略。在原始导出中， <code class="codeph">COMPRESS</code>参数影响了初始范围的管理方式。设置<code class="codeph">COMPRESS=n</code>导致原始导出使用当前存储参数作为初始和下一个范围。
                                    </p>
                                    <p>Data Pump Export <code class="codeph">COMPRESSION</code>参数用于指定数据在转储文件中的压缩方式，与原始的Export <code class="codeph">COMPRESS</code>参数无关。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e321" headers="d42059e283 ">
                                    <p><code class="codeph">一致的</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e321 d42059e286 ">
                                    <p>Data Pump Export确定当前时间并使用<code class="codeph">FLASHBACK_TIME</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e332" headers="d42059e283 ">
                                    <p><code class="codeph">约束</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e332 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">CONSTRAINTS=n</code> ，则数据泵导出使用<code class="codeph">EXCLUDE=CONSTRAINTS</code> 。</p>
                                    <p>默认行为是将约束包含在导出的一部分中。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e348" headers="d42059e283 ">
                                    <p><code class="codeph">直接</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e348 d42059e286 ">
                                    <p>该参数被忽略。Data Pump Export会自动选择最佳导出方法。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e356" headers="d42059e283 ">
                                    <p><code class="codeph">反馈</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e356 d42059e286 ">
                                    <p>使用数据泵导出<code class="codeph">STATUS=30</code>命令。请注意，这不是直接映射，因为<code class="codeph">STATUS</code>命令返回导出作业的状态以及正在处理的行。
                                    </p>
                                    <p>在原始导出中，在<code class="codeph">FEEDBACK</code>命令指定的一定数量的行之后给出<code class="codeph">FEEDBACK</code> 。在数据泵导出中，状态按<code class="codeph">STATUS</code>指定的那么多秒给出。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e378" headers="d42059e283 ">
                                    <p><code class="codeph">文件</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e378 d42059e286 ">
                                    <p>Data Pump Export尝试确定为<code class="codeph">FILE</code>参数指定或默认的路径，并确定是否存在架构具有读写访问权限的目录对象。
                                    </p>
                                    <p>有关<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="Original Export and Import and Data Pump Export and Import differ on where dump files and log files can be written to and read from because the original version is client-based and Data Pump is server-based.">Data Pump</a>如何处理原始Export <code class="codeph">FILE</code>参数的详细信息，请参阅<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="原始导出和导入以及数据泵导出和导入的区别在于可以写入和读取转储文件和日志文件的位置，因为原始版本是基于客户端的，而数据泵是基于服务器的。">Data Pump Legacy模式中的文件位置管理</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e401" headers="d42059e283 ">
                                    <p><code class="codeph">赠款</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e401 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">GRANTS=n</code> ，则数据泵导出使用<code class="codeph">EXCLUDE=GRANT</code> 。</p>
                                    <p>如果原始导出使用<code class="codeph">GRANTS=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是Data Pump Export的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e420" headers="d42059e283 ">
                                    <p><code class="codeph">指标</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e420 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">INDEXES=n</code> ，则数据泵导出使用<code class="codeph">EXCLUDE=INDEX</code>参数。
                                    </p>
                                    <p>如果原始导出使用<code class="codeph">INDEXES=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导出的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e439" headers="d42059e283 ">
                                    <p><code class="codeph">LOG</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e439 d42059e286 ">
                                    <p>Data Pump Export尝试确定为<code class="codeph">LOG</code>参数指定或默认的路径，并确定是否存在架构具有读写访问权限的目录对象。
                                    </p>
                                    <p>有关<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="Original Export and Import and Data Pump Export and Import differ on where dump files and log files can be written to and read from because the original version is client-based and Data Pump is server-based.">Data Pump</a>如何处理原始Export <code class="codeph">LOG</code>参数的详细信息，请参阅<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="原始导出和导入以及数据泵导出和导入的区别在于可以写入和读取转储文件和日志文件的位置，因为原始版本是基于客户端的，而数据泵是基于服务器的。">数据泵传统模式中的文件位置管理</a> 。
                                    </p>
                                    <p>日志文件的内容将是数据泵导出操作的内容。有关日志文件位置和内容的信息，请参阅<a href="oracle-data-pump-legacy-mode.html#GUID-0E1DC195-6F4F-4E2D-ABEA-99CBD973C87C" title="数据泵导出和导入不会生成与原始导出和导入创建的格式相同的日志文件。">日志文件</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e471" headers="d42059e283 ">
                                    <p><code class="codeph">OBJECT_CONSISTENT</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e471 d42059e286 ">
                                    <p>忽略此参数，因为数据泵导出处理确保每个对象在导出时处于一致状态。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e480" headers="d42059e283 ">
                                    <p><code class="codeph">所有者</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e480 d42059e286 ">
                                    <p>使用Data Pump <code class="codeph">SCHEMAS</code>参数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e491" headers="d42059e283 ">
                                    <p><code class="codeph">RECORDLENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e491 d42059e286 ">
                                    <p>忽略此参数，因为Data Pump Export会自动处理缓冲区大小调整。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e499" headers="d42059e283 ">
                                    <p><code class="codeph">RESUMABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e499 d42059e286 ">
                                    <p>此参数将被忽略，因为Data Pump Export会自动为已被授予<code class="codeph">EXP_FULL_DATABASE</code>角色的用户提供此功能。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e510" headers="d42059e283 ">
                                    <p><code class="codeph">RESUMABLE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e510 d42059e286 ">
                                    <p>此参数将被忽略，因为Data Pump Export会自动为已被授予<code class="codeph">EXP_FULL_DATABASE</code>角色的用户提供此功能。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e521" headers="d42059e283 ">
                                    <p><code class="codeph">RESUMABLE_TIMEOUT</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e521 d42059e286 ">
                                    <p>此参数将被忽略，因为Data Pump Export会自动为已被授予<code class="codeph">EXP_FULL_DATABASE</code>角色的用户提供此功能。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e532" headers="d42059e283 ">
                                    <p><code class="codeph">ROWS</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e532 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">ROWS=y</code> ，则数据泵导出使用<code class="codeph">CONTENT=ALL</code>参数。
                                    </p>
                                    <p>如果原始导出使用<code class="codeph">ROWS=n</code> ，则数据泵导出使用<code class="codeph">CONTENT=METADATA_ONLY</code>参数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e554" headers="d42059e283 ">
                                    <p><code class="codeph">统计</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e554 d42059e286 ">
                                    <p>忽略此参数，因为作为数据泵导出操作的一部分，始终为表保存统计信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e562" headers="d42059e283 ">
                                    <p><code class="codeph">TABLESPACES</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e562 d42059e286 ">
                                    <p>如果原始导出也指定了<code class="codeph">TRANSPORT_TABLESPACE=n</code> ，则数据泵导出将忽略<code class="codeph">TABLESPACES</code>参数。
                                    </p>
                                    <p>如果原始导出也指定了<code class="codeph">TRANSPORT_TABLESPACE=y</code> ，则数据泵导出将采用为<code class="codeph">TABLESPACES</code>参数列出的名称，并在数据泵导出<code class="codeph">TRANSPORT_TABLESPACES</code>参数上使用它们。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e587" headers="d42059e283 ">
                                    <p><code class="codeph">TRANSPORT_TABLESPACE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e587 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">TRANSPORT_TABLESPACE=n</code> （默认值），则数据泵导出使用<code class="codeph">TABLESPACES</code>参数。
                                    </p>
                                    <p>如果原始导出使用<code class="codeph">TRANSPORT_TABLESPACE=y</code> ，则数据泵导出使用<code class="codeph">TRANSPORT_TABLESPACES</code>参数，仅导出元数据。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e609" headers="d42059e283 ">
                                    <p><code class="codeph">TRIGGERS</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e609 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">TRIGGERS=n</code> ，则数据泵导出使用<code class="codeph">EXCLUDE=TRIGGER</code>参数。
                                    </p>
                                    <p>如果原始导出使用<code class="codeph">TRIGGERS=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是Data Pump Export的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e628" headers="d42059e283 ">
                                    <p><code class="codeph">TTS_FULL_CHECK</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e628 d42059e286 ">
                                    <p>如果原始导出使用<code class="codeph">TTS_FULL_CHECK=y</code> ，则数据泵导出使用<code class="codeph">TRANSPORT_FULL_CHECK</code>参数。
                                    </p>
                                    <p>如果原始导出使用<code class="codeph">TTS_FULL_CHECK=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导出的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e648" headers="d42059e283 ">
                                    <p><code class="codeph">VOLSIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e648 d42059e286 ">
                                    <p>使用原始Export <code class="codeph">VOLSIZE</code>参数时，表示为转储文件指定的位置是磁带设备。数据泵导出转储文件格式不支持磁带设备。因此，此操作以错误终止。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE" title="描述原始导出和导入参数如何映射到提供类似功能的数据泵导出和导入参数。">参数映射</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL3306"></a><a id="SUTIL962"></a><div class="props_rev_3"><a id="GUID-C36B6B69-E55C-4278-AF6D-C9E2306AAE06" name="GUID-C36B6B69-E55C-4278-AF6D-C9E2306AAE06"></a><h4 id="SUTIL-GUID-C36B6B69-E55C-4278-AF6D-C9E2306AAE06" class="sect4"><span class="enumeration_section">4.2.2</span>使用数据泵的原始导入参数</h4>
                  <div>
                     <p>数据泵导入在映射到相应的数据泵参数时接受原始导入参数。</p>
                     <div class="section">
                        <p>此表描述了数据泵导入如何解释原始导入参数。此表中不包括原始“导入”和“数据泵导入”中具有相同名称和功能的参数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-C36B6B69-E55C-4278-AF6D-C9E2306AAE06__G1016603">
                        <p class="titleintable">表4-2数据泵导入如何处理原始导入参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="数据泵导入如何处理原始导入参数" width="100%" border="1" summary="Original Import parameters compared to Data Pump Import parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d42059e716">原始导入参数</th>
                                 <th align="left" valign="bottom" id="d42059e719">数据泵导入参数采取的操作</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e724" headers="d42059e716 ">
                                    <p><code class="codeph">缓冲</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e724 d42059e719 ">
                                    <p>该参数被忽略。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e732" headers="d42059e716 ">
                                    <p><code class="codeph">CHARSET</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e732 d42059e719 ">
                                    <p>此参数在几个版本之前已被支持，不应再使用。它将导致数据泵导入操作中止。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e740" headers="d42059e716 ">
                                    <p><code class="codeph">承诺</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e740 d42059e719 ">
                                    <p>该参数被忽略。数据泵导入在处理完每个表后自动执行提交。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e748" headers="d42059e716 ">
                                    <p><code class="codeph">COMPILE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e748 d42059e719 ">
                                    <p>该参数被忽略。数据泵导入在创建后编译过程。出于依赖性原因，必要时可以执行重新编译。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e756" headers="d42059e716 ">
                                    <p><code class="codeph">约束</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e756 d42059e719 ">
                                    <p>如果原始导入使用<code class="codeph">CONSTRAINTS=n</code> ，则数据泵导入使用<code class="codeph">EXCLUDE=CONSTRAINT</code>参数。
                                    </p>
                                    <p>如果原始导入使用<code class="codeph">CONSTRAINTS=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导入的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e775" headers="d42059e716 ">
                                    <p><code class="codeph">DATAFILES</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e775 d42059e719 ">
                                    <p>使用数据泵导入<code class="codeph">TRANSPORT_DATAFILES</code>参数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e786" headers="d42059e716 ">
                                    <p><code class="codeph">破坏</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e786 d42059e719 ">
                                    <p>如果原始导入使用<code class="codeph">DESTROY=y</code> ，则数据泵导入使用<code class="codeph">REUSE_DATAFILES</code> <code class="codeph">=y</code>参数。
                                    </p>
                                    <p>如果原始导入使用<code class="codeph">DESTROY=n</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导入的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e807" headers="d42059e716 ">
                                    <p><code class="codeph">反馈</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e807 d42059e719 ">
                                    <p>使用数据泵导入<code class="codeph">STATUS=30</code>命令。请注意，这不是直接映射，因为<code class="codeph">STATUS</code>命令返回导入作业的状态以及正在处理的行。
                                    </p>
                                    <p>在原始导入中，在<code class="codeph">FEEDBACK</code>命令指定的一定数量的行之后给出<code class="codeph">FEEDBACK</code> 。在数据泵导入中，状态按<code class="codeph">STATUS.</code>指定的那么多秒给出<code class="codeph">STATUS.</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e828" headers="d42059e716 ">
                                    <p><code class="codeph">文件</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e828 d42059e719 ">
                                    <p>Data Pump Import尝试确定为<code class="codeph">FILE</code>参数指定或默认的路径，并确定架构是否具有读写访问权限的目录对象。
                                    </p>
                                    <p>有关<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="Original Export and Import and Data Pump Export and Import differ on where dump files and log files can be written to and read from because the original version is client-based and Data Pump is server-based.">Data Pump</a>如何处理原始Import <code class="codeph">FILE</code>参数的详细信息，请参阅<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="原始导出和导入以及数据泵导出和导入的区别在于可以写入和读取转储文件和日志文件的位置，因为原始版本是基于客户端的，而数据泵是基于服务器的。">Data Pump传统模式中的文件位置管理</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e851" headers="d42059e716 ">
                                    <p><code class="codeph">文件大小</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e851 d42059e719 ">
                                    <p>忽略此参数，因为该信息已包含在数据泵转储文件集中。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e859" headers="d42059e716 ">
                                    <p><code class="codeph">FROMUSER</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e859 d42059e719 ">
                                    <p>使用数据泵导入<code class="codeph">SCHEMAS</code>参数。如果在没有使用<code class="codeph">TOUSER</code>情况下使用<code class="codeph">FROMUSER</code> ，则导入具有<code class="codeph">IMP_FULL_DATABASE</code>角色的模式会导致Data Pump Import尝试创建模式，然后导入该模式的对象。导入没有<code class="codeph">IMP_FULL_DATABASE</code>角色的模式只能从转储文件集中导入自己的模式。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e883" headers="d42059e716 ">
                                    <p><code class="codeph">赠款</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e883 d42059e719 ">
                                    <p>如果原始导入使用<code class="codeph">GRANTS=n</code> ，则数据泵导入使用<code class="codeph">EXCLUDE=OBJECT_GRANT</code>参数。
                                    </p>
                                    <p>如果原始导入使用<code class="codeph">GRANTS=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导入的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e902" headers="d42059e716 ">
                                    <p><code class="codeph">忽视</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e902 d42059e719 ">
                                    <p>如果原始导入使用<code class="codeph">IGNORE=y</code> ，则数据泵导入使用<code class="codeph">TABLE_EXISTS_ACTION=APPEND</code>参数。这导致表数据的处理继续。
                                    </p>
                                    <p>如果原始导入使用<code class="codeph">IGNORE=n</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导入的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e921" headers="d42059e716 ">
                                    <p><code class="codeph">指标</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e921 d42059e719 ">
                                    <p>如果原始导入使用<code class="codeph">INDEXES=n</code> ，则数据泵导入使用<code class="codeph">EXCLUDE=INDEX</code>参数。
                                    </p>
                                    <p>如果原始导入使用<code class="codeph">INDEXES=y</code> ，则忽略该参数，并且不需要重新映射该参数，因为这是数据泵导入的默认行为。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e940" headers="d42059e716 ">
                                    <p><code class="codeph">INDEXFILE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e940 d42059e719 ">
                                    <p>使用Data Pump Import <code class="codeph">SQLFILE={directory-object:}filename</code>和<code class="codeph">INCLUDE=INDEX</code>参数。
                                    </p>
                                    <p>在查找为<code class="codeph">FILE</code>参数描述的目录对象时，也会对<code class="codeph">INDEXFILE</code>参数进行相同的方法和尝试。
                                    </p>
                                    <p>如果在原始Import上未指定目录对象，则Data Pump Import将使用<code class="codeph">DIRECTORY</code>参数指定的目录对象。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e967" headers="d42059e716 ">
                                    <p><code class="codeph">LOG</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e967 d42059e719 ">
                                    <p>Data Pump Import尝试确定为<code class="codeph">LOG</code>参数指定或默认的路径，并确定是否存在架构具有读写访问权限的目录对象。
                                    </p>
                                    <p>有关<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="Original Export and Import and Data Pump Export and Import differ on where dump files and log files can be written to and read from because the original version is client-based and Data Pump is server-based.">Data Pump</a>如何处理原始Import <code class="codeph">LOG</code>参数的详细信息，请参阅<a href="oracle-data-pump-legacy-mode.html#GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" title="原始导出和导入以及数据泵导出和导入的区别在于可以写入和读取转储文件和日志文件的位置，因为原始版本是基于客户端的，而数据泵是基于服务器的。">数据泵传统模式中的文件位置管理</a> 。
                                    </p>
                                    <p>日志文件的内容将是数据泵导入操作的内容。有关日志文件位置和内容的信息，请参阅<a href="oracle-data-pump-legacy-mode.html#GUID-0E1DC195-6F4F-4E2D-ABEA-99CBD973C87C" title="数据泵导出和导入不会生成与原始导出和导入创建的格式相同的日志文件。">日志文件</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e999" headers="d42059e716 ">
                                    <p><code class="codeph">RECORDLENGTH</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e999 d42059e719 ">
                                    <p>忽略此参数，因为Data Pump在内部处理有关记录长度的问题。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1007" headers="d42059e716 ">
                                    <p><code class="codeph">RESUMABLE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1007 d42059e719 ">
                                    <p>忽略此参数，因为已为已被授予<code class="codeph">IMP_FULL_DATABASE</code>角色的用户自动提供此功能。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1018" headers="d42059e716 ">
                                    <p><code class="codeph">RESUMABLE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1018 d42059e719 ">
                                    <p>忽略此参数，因为已为已被授予<code class="codeph">IMP_FULL_DATABASE</code>角色的用户自动提供此功能。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1029" headers="d42059e716 ">
                                    <p><code class="codeph">RESUMABLE_TIMEOUT</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1029 d42059e719 ">
                                    <p>忽略此参数，因为已为已被授予<code class="codeph">IMP_FULL_DATABASE</code>角色的用户自动提供此功能。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1040" headers="d42059e716 ">
                                    <p><code class="codeph">ROWS = N</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1040 d42059e719 ">
                                    <p>如果原始导入使用<code class="codeph">ROWS=n</code> ，则数据泵导入使用<code class="codeph">CONTENT=METADATA_ONLY</code>参数。
                                    </p>
                                    <p>如果原始导入使用<code class="codeph">ROWS=y</code> ，则数据泵导入使用<code class="codeph">CONTENT=ALL</code>参数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1062" headers="d42059e716 ">
                                    <p><code class="codeph">节目</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1062 d42059e719 ">
                                    <p>如果指定了<code class="codeph">SHOW=y</code> ，则数据泵导入<code class="codeph">SQLFILE=[directory_object:]file_name</code>参数用于将导入操作的DDL写入文件。只有DDL（不是转储文件的全部内容）才会写入指定的文件。（请注意，输出不会像原始导入一样显示在屏幕上。）
                                    </p>
                                    <p>该文件的名称将是在<code class="codeph">DUMPFILE</code>参数上指定的文件名（或原始的Import <code class="codeph">FILE</code>参数，该参数将重新映射到<code class="codeph">DUMPFILE</code> ）。如果列出了多个转储文件名，则使用列表中的第一个文件名。该文件将位于<code class="codeph">DIRECTORY</code>参数或<code class="codeph">DUMPFILE</code>参数中包含的目录对象上指定的目录对象位置。（ <code class="codeph">DUMPFILE</code>参数上指定的目录对象优先。）
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1098" headers="d42059e716 ">
                                    <p><code class="codeph">统计</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1098 d42059e719 ">
                                    <p>忽略此参数，因为作为数据泵导入操作的一部分，始终为表保存统计信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1106" headers="d42059e716 ">
                                    <p><code class="codeph">STREAMS_CONFIGURATION</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1106 d42059e719 ">
                                    <p>忽略此参数，因为Data Pump Import会自动确定它;它不需要指定。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1114" headers="d42059e716 ">
                                    <p><code class="codeph">STREAMS_INSTANTIATION</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1114 d42059e719 ">
                                    <p>忽略此参数，因为Data Pump Import会自动确定它;它不需要指定</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1122" headers="d42059e716 ">
                                    <p><code class="codeph">TABLESPACES</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1122 d42059e719 ">
                                    <p>如果原始导入还指定了<code class="codeph">TRANSPORT_TABLESPACE=n</code> （默认值），则数据泵导入将忽略<code class="codeph">TABLESPACES</code>参数。
                                    </p>
                                    <p>如果原始导入也指定了<code class="codeph">TRANSPORT_TABLESPACE=y</code> ，则数据泵导入将获取为此<code class="codeph">TABLESPACES</code>参数提供的名称，并将它们应用于数据泵导入<code class="codeph">TRANSPORT_TABLESPACES</code>参数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1147" headers="d42059e716 ">
                                    <p><code class="codeph">TOID_NOVALIDATE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1147 d42059e719 ">
                                    <p>该参数被忽略。OID不再用于类型验证。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1155" headers="d42059e716 ">
                                    <p><code class="codeph">TOUSER</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1155 d42059e719 ">
                                    <p>使用数据泵导入<code class="codeph">REMAP_SCHEMA</code>参数。导入的对象可能多于原始导入的对象。此外，如果数据泵导入尚不存在，则可以创建目标模式。
                                    </p>
                                    <p>还必须在原始Import中指定<code class="codeph">FROMUSER</code>参数，否则操作将失败。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1171" headers="d42059e716 ">
                                    <p><code class="codeph">TRANSPORT_TABLESPACE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1171 d42059e719 ">
                                    <p>将忽略<code class="codeph">TRANSPORT_TABLESPACE</code>参数，但如果您还指定了<code class="codeph">DATAFILES</code>参数，则导入作业将继续加载元数据。如果未指定<code class="codeph">DATAFILES</code>参数，则返回<code class="codeph">ORA-39002:invalid operation</code>错误消息。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1191" headers="d42059e716 ">
                                    <p><code class="codeph">TTS_OWNERS</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1191 d42059e719 ">
                                    <p>忽略此参数，因为此信息会自动存储在数据泵转储文件集中。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d42059e1199" headers="d42059e716 ">
                                    <p><code class="codeph">VOLSIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d42059e1199 d42059e719 ">
                                    <p>使用原始Import <code class="codeph">VOLSIZE</code>参数时，表示为转储文件指定的位置是磁带设备。数据泵导入转储文件格式不支持磁带设备。因此，此操作以错误终止。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-595EE08A-0928-4262-BAF8-627B5BE5E3CE" title="描述原始导出和导入参数如何映射到提供类似功能的数据泵导出和导入参数。">参数映射</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL963"></a><div class="props_rev_3"><a id="GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" name="GUID-514F8E50-3D5C-40B5-97A0-8B554C405719"></a><h3 id="SUTIL-GUID-514F8E50-3D5C-40B5-97A0-8B554C405719" class="sect3"><span class="enumeration_section">4.3</span>数据泵传统模式下文件位置的管理</h3>
               <div>
                  <p>原始导出和导入以及数据泵导出和导入的区别在于可以写入和读取转储文件和日志文件的位置，因为原始版本是基于客户端的，而数据泵是基于服务器的。</p>
                  <p>原始导出和导入使用<code class="codeph">FILE</code>和<code class="codeph">LOG</code>参数分别指定转储文件和日志文件名。这些文件名始终引用客户端系统本地的文件，它们也可能包含路径规范。
                  </p>
                  <p>Data Pump Export and Import使用<code class="codeph">DUMPFILE</code>和<code class="codeph">LOGFILE</code>参数分别指定转储文件和日志文件名。这些文件名始终引用服务器系统本地的文件，并且不能包含任何路径信息。相反，目录对象用于间接指定路径信息。服务器必须可以访问目录对象定义的路径值。通过<code class="codeph">DIRECTORY</code>参数为数据泵作业指定目录对象。也可以将目录对象添加到传递给<code class="codeph">DUMPFILE</code>和<code class="codeph">LOGFILE</code>参数的文件名中。对于特权用户，如果未在命令行中指定默认目录对象，Data Pump支持使用默认目录对象。此默认目录对象<code class="codeph">DATA_PUMP_DIR</code>在安装时设置。
                  </p>
                  <p>如果启用了数据泵传统模式，并且命令行中存在原始的Export <code class="codeph">FILE=</code> <span class="italic"><code class="codeph">filespec</code></span>参数和/或<code class="codeph">LOG=</code> <span class="italic"><code class="codeph">filespec</code></span>参数，则使用以下优先规则来确定文件的位置：</p>
                  <div class="infoboxnote" id="GUID-514F8E50-3D5C-40B5-97A0-8B554C405719__GUID-7E68F8C6-4F7A-4FB9-8E17-6D39C9E77C6D">
                     <p class="notep1">注意：</p>
                     <p>如果<code class="codeph">FILE</code>参数和<code class="codeph">LOG</code>参数都存在于命令行中，则优先级规则将分别应用于每个参数。
                     </p>
                     <p>此外，当使用原始导出/导入和数据泵导出/导入参数的混合时，将对其应用单独的规则。例如，假设您有以下命令：</p><pre class="oac_no_warn" dir="ltr">expdp系统FILE = / user / disk / foo.dmp LOGFILE = foo.log DIRECTORY = dpump_dir</pre><p>如本节所述，数据泵传统模式文件管理规则将应用于<code class="codeph">FILE</code>参数。正常（即非传统模式）数据泵文件管理规则（如<a href="oracle-data-pump-overview.html#GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5" title="Data Pump是基于服务器而不是基于客户端的。相对于基于服务器的目录路径，访问转储文件，日志文件和SQL文件。">Dump_Log_和SQL文件的默认位置中所述）</a>将应用于<code class="codeph">LOGFILE</code>参数。
                     </p>
                  </div>
                  <ol>
                     <li>
                        <p>如果将路径位置指定为文件规范的一部分，则Data Pump会尝试查找执行导出作业的模式可访问的目录对象，该导出作业的路径位置与文件规范的路径位置匹配。如果找不到这样的目录对象，则返回错误。例如，假设已定义了名为<code class="codeph">USER_DUMP_FILES</code>的基于服务器的目录对象，其路径值为<code class="codeph">'/disk1/user1/dumpfiles/'</code> ，并且已对<code class="codeph">hr</code>模式授予对此目录对象的读写访问权限。以下命令使Data Pump查找基于服务器的目录对象，其路径值包含<code class="codeph">'/disk1/user1/dumpfiles/'</code>并且<code class="codeph">hr</code>模式已被授予读写访问权限：</p><pre class="oac_no_warn" dir="ltr">expdp hr FILE = / disk1 / user1 / dumpfiles / hrdata.dmp</pre><p>在这种情况下，Data Pump使用目录对象<code class="codeph">USER_DUMP_FILES</code> 。路径值（在此示例中为<code class="codeph">'/disk1/user1/dumpfiles/'</code> ）必须引用Oracle数据库可访问的服务器系统上的路径。
                        </p>
                        <p>如果将路径位置指定为文件规范的一部分，则忽略使用<code class="codeph">DIRECTORY</code>参数提供的任何目录对象。例如，如果发出以下命令，则Data Pump不会将<code class="codeph">DPUMP_DIR</code>目录对象用于file参数，而是查找基于服务器的目录对象，其路径值包含<code class="codeph">'/disk1/user1/dumpfiles/'</code>并且<code class="codeph">hr</code>模式已被授予读写访问权限：</p><pre class="oac_no_warn" dir="ltr">expdp hr FILE = / disk1 / user1 / dumpfiles / hrdata.dmp DIRECTORY = dpump_dir</pre></li>
                     <li>
                        <p>如果未指定路径位置作为文件规范的一部分，则使用<code class="codeph">DIRECTORY</code>参数指定的目录对象。例如，如果发出以下命令，则Data Pump <code class="codeph">DPUMP_DIR</code>为<code class="codeph">DPUMP_DIR</code>目录对象定义的路径位置应用于<code class="codeph">hrdata.dmp</code>文件：</p><pre class="oac_no_warn" dir="ltr">expdp hr FILE = hrdata.dmp DIRECTORY = dpump_dir</pre></li>
                     <li>
                        <p>如果没有指定路径位置作为文件规范的一部分，并且<code class="codeph">DIRECTORY</code>参数没有命名目录对象，则Data Pump按所示顺序执行以下操作：</p>
                        <ol type="a">
                           <li>
                              <p>Data Pump查找是否存在<code class="codeph">DATA_PUMP_DIR_</code> <span class="italic"><code class="codeph">schema_name</code></span>形式的目录对象，其中<span class="italic"><code class="codeph">schema_name</code></span>是执行数据泵作业的模式。例如，以下命令将导致Data Pump查找是否存在名为<code class="codeph">DATA_PUMP_DIR_HR</code>的基于服务器的目录对象：</p><pre class="oac_no_warn" dir="ltr">expdp hr FILE = hrdata.dmp</pre><p>还必须已授予<code class="codeph">hr</code>模式对此目录对象的读写访问权限。如果这样的目录对象不存在，则该过程转到步骤b。
                              </p>
                           </li>
                           <li>
                              <p>Data Pump查找是否存在基于客户端的环境变量<code class="codeph">DATA_PUMP_DIR</code> 。例如，假设已定义名为<code class="codeph">DUMP_FILES1</code>的基于服务器的目录对象，并且已授予<code class="codeph">hr</code>模式对其的读写访问权限。然后在客户端系统上，可以将环境变量<code class="codeph">DATA_PUMP_DIR</code>设置为指向<code class="codeph">DUMP_FILES1</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">setenv DATA_PUMP_DIR DUMP_FILES1 expdp hr FILE = hrdata.dmp</pre><p>然后，Data Pump将基于服务的目录对象<code class="codeph">DUMP_FILES1</code>用于<code class="codeph">hrdata.dmp</code>文件。
                              </p>
                              <p>如果不存在基于客户端的环境变量<code class="codeph">DATA_PUMP_DIR</code> ，则该过程转到步骤c。
                              </p>
                           </li>
                           <li>
                              <p>如果正在执行数据泵作业的模式具有DBA特权，则使用缺省数据泵目录对象<code class="codeph">DATA_PUMP_DIR</code> 。此默认目录对象在安装时建立。例如，以下命令使Data Pump尝试使用默认的<code class="codeph">DATA_PUMP_DIR</code>目录对象，假设系统具有DBA权限：</p><pre class="oac_no_warn" dir="ltr">expdp系统FILE = hrdata.dmp</pre></li>
                        </ol>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-514F8E50-3D5C-40B5-97A0-8B554C405719__GUID-66CA598D-1128-4F1A-AE86-C034B2AB79FA">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="oracle-data-pump-overview.html#GUID-EEB32B50-8A00-40B0-8787-CC2C8BA05DC5" title="Data Pump是基于服务器而不是基于客户端的。相对于基于服务器的目录路径，访问转储文件，日志文件和SQL文件。">Dump_Log_和SQL文件的默认位置，</a>以获取有关正常数据泵条件下的数据泵文件管理规则（即非传统模式）的信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9" title="Data Pump传统模式允许您在“数据泵导出”和“数据泵导入”命令行中使用原始“导出”和“导入”参数。">数据泵传统模式</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL964"></a><div class="props_rev_3"><a id="GUID-998125C5-D00F-4E04-9359-B4835696902E" name="GUID-998125C5-D00F-4E04-9359-B4835696902E"></a><h3 id="SUTIL-GUID-998125C5-D00F-4E04-9359-B4835696902E" class="sect3"><span class="enumeration_section">4.4</span>调整数据泵日志文件和错误的现有脚本</h3>
               <div>
                  <p>描述如何调整Data Pump日志文件和错误的现有脚本。</p>
                  <p>数据泵旧版模式要求您查看和更新为原始导出和导入编写的现有脚本，因为文件格式和错误报告存在差异。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-0E1DC195-6F4F-4E2D-ABEA-99CBD973C87C">日志文件</a><br>数据泵导出和导入不会生成与原始导出和导入创建的格式相同的日志文件。
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-1721DF7B-CFEA-4883-AC83-30BFD311D21B">错误案例</a><br>数据泵导出和导入可能不会产生与原始导出和导入生成的错误相同的错误。
                     </li>
                     <li class="ulchildlink"><a href="oracle-data-pump-legacy-mode.html#GUID-448EEE9A-EAF1-404B-BDC0-B4A70E616D1F">退出状态</a><br>数据泵导出和导入具有增强的退出状态值，以允许脚本更好地确定导出和导入作业失败的成功。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-B4A887AD-1E1D-4305-A6D8-DC16D3B28BA9" title="Data Pump传统模式允许您在“数据泵导出”和“数据泵导入”命令行中使用原始“导出”和“导入”参数。">数据泵传统模式</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL965"></a><div class="props_rev_3"><a id="GUID-0E1DC195-6F4F-4E2D-ABEA-99CBD973C87C" name="GUID-0E1DC195-6F4F-4E2D-ABEA-99CBD973C87C"></a><h4 id="SUTIL-GUID-0E1DC195-6F4F-4E2D-ABEA-99CBD973C87C" class="sect4"><span class="enumeration_section">4。4。1</span>日志文件</h4>
                  <div>
                     <p>数据泵导出和导入不会生成与原始导出和导入创建的格式相同的日志文件。</p>
                     <p>必须更新解析原始导出和导入输出的任何脚本，以处理数据泵导出和导入使用的日志文件格式。例如，消息<code class="codeph">Successfully Terminated</code>不会出现在Data Pump日志文件中。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-998125C5-D00F-4E04-9359-B4835696902E" title="描述如何调整Data Pump日志文件和错误的现有脚本。">调整数据泵日志文件和错误的现有脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL966"></a><div class="props_rev_3"><a id="GUID-1721DF7B-CFEA-4883-AC83-30BFD311D21B" name="GUID-1721DF7B-CFEA-4883-AC83-30BFD311D21B"></a><h4 id="SUTIL-GUID-1721DF7B-CFEA-4883-AC83-30BFD311D21B" class="sect4"><span class="enumeration_section">4.4.2</span>错误案例</h4>
                  <div>
                     <p>数据泵导出和导入可能不会产生与原始导出和导入生成的错误相同的错误。</p>
                     <p>例如，如果Data Pump Export忽略的参数在原始Export中具有超出范围的值，则会向日志文件写入一条信息性消息，指出该参数被忽略。不执行任何值检查，因此不会生成错误消息。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-998125C5-D00F-4E04-9359-B4835696902E" title="描述如何调整Data Pump日志文件和错误的现有脚本。">调整数据泵日志文件和错误的现有脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL967"></a><div class="props_rev_3"><a id="GUID-448EEE9A-EAF1-404B-BDC0-B4A70E616D1F" name="GUID-448EEE9A-EAF1-404B-BDC0-B4A70E616D1F"></a><h4 id="SUTIL-GUID-448EEE9A-EAF1-404B-BDC0-B4A70E616D1F" class="sect4"><span class="enumeration_section">4.4.3</span>退出状态</h4>
                  <div>
                     <p>数据泵导出和导入具有增强的退出状态值，以允许脚本更好地确定导出和导入作业失败的成功。</p>
                     <p>如有必要，应检查并更新任何查看退出状态的脚本。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-data-pump-legacy-mode.html#GUID-998125C5-D00F-4E04-9359-B4835696902E" title="描述如何调整Data Pump日志文件和错误的现有脚本。">调整数据泵日志文件和错误的现有脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="06016.manage-advm-asmcmd.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes."></meta>
      <meta name="description" content="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes."></meta>
      <title>使用ASMCMD管理Oracle ADVM</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="manage-acfs-advm-asmca.html" title="Previous" type="text/html"></link>
      <link rel="next" href="manage-acfs-advm-commands.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="manage-acfs-advm-asmca.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="manage-acfs-advm-commands.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-acfs-advm.html" property="item" typeof="WebPage"><span property="name">Oracle自动存储管理群集文件系统</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用ASMCMD管理Oracle ADVM</li>
            </ol>
            <a id="GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" name="GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF"></a><a id="OSTMG95495"></a>
            
            <h2 id="OSTMG-GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" class="sect2"><span class="enumeration_chapter">15</span>使用ASMCMD管理Oracle ADVM</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。</p>
               <p>本章介绍Oracle自动存储管理（Oracle ASM）命令行实用程序（ASMCMD）卷管理命令。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="manage-advm-asmcmd.html#GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6" title="本主题提供Oracle ADVM卷管理命令的摘要。">ASMCMD卷管理命令</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF__GUID-E52A0CC5-84C1-4E9D-AB30-051769BB5FFF">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关Oracle ASM动态卷管理器（Oracle ADVM）的信息，请参见<a href="overview-advm.html#GUID-B7A61F3B-C22A-4021-A846-F5EA749E79FF" title="Oracle ASM动态卷管理器（Oracle ADVM）为客户端提供卷管理服务和标准磁盘设备驱动程序接口。">Oracle ASM Dynamic Volume Manager概述</a></p>
                     </li>
                     <li>
                        <p><a href="alter-diskgroups.html#GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E" title="您可以在磁盘组中创建Oracle ASM动态卷管理器（Oracle ADVM）卷。">管理磁盘组中的Oracle ADVM卷，</a>以获取有关使用SQL语句管理Oracle ADVM卷的信息</p>
                     </li>
                     <li>
                        <p><a href="about-asmcmd.html#GUID-995198B7-9235-4FCF-988E-A48B3B62B405" title="在运行ASMCMD实用程序之前，您应该查看本主题中的信息。">关于ASMCMD</a>有关使用ASMCMD的信息</p>
                     </li>
                  </ul>
               </div>
            </div><a id="OSTMG94738"></a><a id="OSTMG01647"></a><div class="props_rev_3"><a id="GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6" name="GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6"></a><h3 id="OSTMG-GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6" class="sect3">ASMCMD卷管理命令</h3>
               <div>
                  <p>本主题提供Oracle ADVM卷管理命令的摘要。</p>
                  <p><a href="manage-advm-asmcmd.html#GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6__CIHBFCHC" title="ASMCMD命令Oracle ADVM卷管理命令摘要">表15-1</a>列出了Oracle ADVM卷管理命令以及简要说明。要成功运行这些命令，必须运行本地Oracle ASM实例，并且必须已在Oracle ASM实例中创建并装入此命令所需的磁盘组。
                  </p>
                  <div class="tblformalwide" id="GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6__CIHBFCHC">
                     <p class="titleintable">表15-1 ASMCMD卷管理命令摘要</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="ASMCMD卷管理命令摘要" width="100%" border="1" summary="ASMCMD Command Summary of the Oracle ADVM volume management commands" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="37%" id="d126799e357">命令</th>
                              <th align="left" valign="bottom" width="63%" id="d126799e360">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e365" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6">volcreate</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e365 d126799e360 ">
                                 <p>在指定的磁盘组中创建Oracle ADVM卷。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e373" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578">voldelete</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e373 d126799e360 ">
                                 <p>删除Oracle ADVM卷。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e381" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A">voldisable</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e381 d126799e360 ">
                                 <p>禁用已装入磁盘组中的Oracle ADVM卷。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e389" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B">volenable</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e389 d126799e360 ">
                                 <p>在已装入的磁盘组中启用Oracle ADVM卷。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e397" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE">volinfo可</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e397 d126799e360 ">
                                 <p>显示有关Oracle ADVM卷的信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e405" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9">volresize</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e405 d126799e360 ">
                                 <p>调整Oracle ADVM卷的大小。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e413" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54">volset</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e413 d126799e360 ">
                                 <p>设置已装入磁盘组中Oracle ADVM卷的属性。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="37%" id="d126799e421" headers="d126799e357 ">
                                 <p><a href="manage-advm-asmcmd.html#GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3">volstat</a></p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d126799e421 d126799e360 ">
                                 <p>报告卷I / O统计信息。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="OSTMG94740"></a><a id="OSTMG94741"></a><a id="OSTMG94742"></a><a id="OSTMG94743"></a><a id="OSTMG94744"></a><a id="OSTMG94739"></a><div class="props_rev_3"><a id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6" name="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6"></a><h4 id="OSTMG-GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6" class="sect4">volcreate</h4>
                  <div>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__GUID-5BD69530-3870-42E6-8093-9262A12B646D">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在指定的磁盘组中创建Oracle ADVM卷。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__GUID-F61473AF-66C3-4074-B6FC-116FFDF5534C">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">volcreate -G <span class="italic">diskgroup</span> -s size [--column <span class="italic">number</span> ] [ <span class="italic">--width stripe_width</span> ] [--redundancy {high | mirror | unprotected}] [--primary {hot | cold}] [ -  secondary {hot | cold} ] <span class="italic">量</span></pre><p><a href="manage-advm-asmcmd.html#GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__CIHDBGHI" title="此表列出了volcreate命令的选项以及每个选项的说明">表15-2</a>说明了<code class="codeph">volcreate</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__CIHDBGHI">
                        <p class="titleintable">表15-2 volcreate命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="volcreate命令的选项" width="100%" border="1" summary="This table lists the options for the volcreate command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d126799e631">选项</th>
                                 <th align="left" valign="bottom" width="62%" id="d126799e634">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e639" headers="d126799e631 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e639 d126799e634 ">
                                    <p>包含卷的磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e651" headers="d126799e631 ">
                                    <p><code class="codeph">-s</code> <span class="italic"><code class="codeph">size</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e651 d126799e634 ">
                                    <p>要以<code class="codeph">K</code> ， <code class="codeph">M</code> ， <code class="codeph">G</code>或<code class="codeph">T</code>为单位创建的卷的大小。该值必须是正整数。单位名称必须附加到指定的编号。数字和单位名称之间不允许有空格。例如： <code class="codeph">200M</code>或<code class="codeph">20G</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e681" headers="d126799e631 ">
                                    <p><code class="codeph">--column</code> <span class="italic"><code class="codeph">number</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e681 d126799e634 ">
                                    <p>条带集中的列数。值范围为<code class="codeph">1</code>到<code class="codeph">8</code> 。默认值为<code class="codeph">8</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e702" headers="d126799e631 ">
                                    <p><code class="codeph">--width</code> <span class="italic"><code class="codeph">stripe</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e702 d126799e634 ">
                                    <p>卷的条纹宽度，单位为<code class="codeph">K</code>或<code class="codeph">M</code>该值的范围为4 KB到1 MB，以2的幂为间隔。默认值为<code class="codeph">1M</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e723" headers="d126799e631 ">
                                    <p><code class="codeph">--redundancy</code> { <code class="codeph">high</code> | <code class="codeph">mirror</code> | <code class="codeph">unprotected</code> }</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e723 d126799e634 ">
                                    <p>Oracle ADVM卷的冗余，只能为普通冗余磁盘组指定。如果未指定冗余，则设置默认为磁盘组的冗余级别，这是建议的设置。值的范围如下： <code class="codeph">unprotected</code>用于非镜像冗余， <code class="codeph">mirror</code>用于双镜像冗余，或<code class="codeph">high</code>用于三镜像冗余。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e750" headers="d126799e631 ">
                                    <p><code class="codeph">--primary</code> { <code class="codeph">hot|cold</code> }</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e750 d126799e634 ">
                                    <p>主要范围（ <code class="codeph">hot</code>区或<code class="codeph">cold</code>区）的数据放置规范。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e768" headers="d126799e631 ">
                                    <p><code class="codeph">--secondary</code> { <code class="codeph">hot|cold</code> }</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e768 d126799e634 ">
                                    <p>次要范围的数据放置规范，无论是<code class="codeph">hot</code>区还是<code class="codeph">cold</code>区。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e786" headers="d126799e631 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e786 d126799e634 ">
                                    <p>卷的名称。仅允许使用字母数字字符和下划线。连字符是不允许的。第一个字符必须是字母。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnotewarn" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__GUID-3FCAFE64-3EA9-496D-B924-604394A53A3A">
                           <p class="notep1">警告：</p>
                           <p>指定<code class="codeph">--redundancy</code> <code class="codeph">unprotected</code>意味着Oracle ASM镜像不可用于与Oracle ADVM体积数据恢复。磁盘组的冗余设置（ <code class="codeph">normal</code> ）不为未受保护的Oracle ADVM卷提供镜像。不建议在生产环境中使用<code class="codeph">unprotected</code>配置，因为间歇性存储访问失败会导致数据丢失。强烈建议备份。
                           </p>
                        </div>
                        <p>创建Oracle ADVM卷时，将创建一个卷设备名称，其中包含唯一的Oracle ADVM永久磁盘组编号，该编号将连接到卷名的末尾。唯一编号可以是一到三位数。</p>
                        <p>在Linux上，卷设备名称的格式为<span class="italic"><code class="codeph">volume_name</code></span> <code class="codeph">-</code> <span class="italic"><code class="codeph">nnn</code></span> ，例如<code class="codeph">volume1-123</code> 。Windows上的卷设备名称格式为<code class="codeph">asm-</code> <span class="italic"><code class="codeph">volume_name</code></span> <code class="codeph">-</code> <span class="italic"><code class="codeph">nnn</code></span> ，如<code class="codeph">asm-volume1-123</code> 。
                        </p>
                        <p>在Linux平台上，卷名必须小于或等于11个字母数字字符，以字母字符开头。在AIX平台上，卷名必须小于或等于二十三个字母数字字符，以字母字符开头。在Windows和Solaris平台上，卷名必须小于或等于三十个字母数字字符，以字母字符开头。</p>
                        <p>您可以使用<code class="codeph">volinfo</code>命令确定卷设备名称。
                        </p>
                        <p>如果<code class="codeph">--column</code>选项设置为<code class="codeph">1</code> ，则禁用条带化并且条带宽度等于默认卷范围大小（64 MB）。建议将<code class="codeph">--column</code>选项设置为8（默认值），以便使用数据库数据文件和其他文件获得最佳性能。
                        </p>
                        <p>成功创建卷会自动启用卷设备。</p>
                        <p>卷设备文件用作安装文件系统或应用程序直接使用的任何其他磁盘或逻辑卷。</p>
                        <p>创建加速器卷时，请在磁盘组上创建卷，其存储空间明显快于主卷的存储空间。</p>
                        <p></p>
                        <p>在AIX上创建Oracle ADVM卷之前，请确保已创建必要的用户授权。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__GUID-E41D2D62-C4E6-46AC-B025-E0B501C93CBD">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是<code class="codeph">volcreate</code>命令的示例，该命令在<code class="codeph">data</code>磁盘组中创建<code class="codeph">volume1</code> ，其大小设置为10千兆字节。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__GUID-30E0927C-1CCF-4FF3-8F3C-EDB4E8A345BB">
                        <p class="titleinexample">示例15-1使用ASMCMD volcreate命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volcreate -G data -s 10G --width 1M --column 8 volume1 ASMCMD [+]&gt; volinfo -G data volume1磁盘组名称：DATA卷名称：VOLUME1卷设备：/ dev / asm / volume1-123状态：ENABLED大小（MB）：10240调整大小单位（MB）：64冗余：MIRROR条带列：8条纹宽度（K）：1024用法：Mountpath：</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CD9ABAB4-A19D-4C54-9484-D78CE52631E6__GUID-67B8C979-BA4B-4DA3-9DED-9DA790A54149">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="steps-manage-acfs.html#GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" title="您可以使用本主题中的步骤创建Oracle ACFS文件系统。">创建Oracle ACFS文件系统</a>以获取有关装入卷设备文件的信息</p>
                              </li>
                              <li>
                                 <p><a href="manage-advm-asmcmd.html#GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE">VOLINFO</a>有关信息<code class="codeph">volinfo</code>命令。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="acfs-advanced-topics.html#GUID-8D71BD92-78F9-40DF-8418-A000E201218B" title="本主题将讨论Oracle ADVM的限制。">甲骨文ADVM的限制</a>有关Oracle ADVM限制的信息</p>
                              </li>
                              <li>
                                 <p>有关加速器音量的信息，请参阅<a href="acfs-commands-linux.html#GUID-458DC5C6-2218-4C6F-866B-1B9DAB7C278D">mkfs</a></p>
                              </li>
                              <li>
                                 <p><a href="mirroring-diskgroup-redundancy.html#GUID-C93FC8D9-5FB8-452B-860F-EFB4D3DE95BD">镜像，冗余和故障组选项，</a>以获取有关冗余设置的信息</p>
                              </li>
                              <li>
                                 <p><a href="acfs-commands-aix.html#GUID-4A441AED-DFA4-4000-853A-63EF90BAF799" title="本主题提供AIX操作系统的Oracle ACFS命令的摘要。">用于AIX环境的Oracle ACFS命令行工具，</a>以获取有关AIX上的用户授权的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OSTMG94746"></a><a id="OSTMG94747"></a><a id="OSTMG94748"></a><a id="OSTMG94749"></a><a id="OSTMG94750"></a><a id="OSTMG94745"></a><div class="props_rev_3"><a id="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578" name="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578"></a><h4 id="OSTMG-GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578" class="sect4">voldelete</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578__GUID-35B29B7E-60AB-45C4-ABAB-E6849B50A85B">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>删除Oracle ADVM卷。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578__GUID-7AB56720-F222-460F-AC00-48008AD146B5">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">voldelete -G <span class="italic">磁盘组</span> <span class="italic">卷</span></pre><p><a href="manage-advm-asmcmd.html#GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578__CIHCAFJE" title="此表列出了volcreate命令的选项以及每个选项的说明">表15-3</a>说明了<code class="codeph">voldelete</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578__CIHCAFJE">
                        <p class="titleintable">表15-3 voldelete命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="voldelete命令的选项" width="100%" border="1" summary="This table lists the options for the volcreate command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d126799e1122">选项</th>
                                 <th align="left" valign="bottom" width="75%" id="d126799e1125">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e1130" headers="d126799e1122 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e1130 d126799e1125 ">
                                    <p>包含卷的磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e1142" headers="d126799e1122 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e1142 d126799e1125 ">
                                    <p>卷的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>要成功运行此命令，必须运行本地Oracle ASM实例，并且必须在Oracle ASM实例中装入此命令所需的磁盘组。在删除卷之前，必须确保没有与卷关联的活动文件系统。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578__GUID-FBC696A1-757A-45DA-A53C-6711EF19F6D3">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是从<code class="codeph">data</code>磁盘组中删除<code class="codeph">volume1</code>的<code class="codeph">voldelete</code>命令的示例。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BE0EB02B-1933-4AD0-A79E-3B2240210578__GUID-0DB7674E-436D-4BE4-B22F-1FDE4F45BFF5">
                        <p class="titleinexample">示例15-2使用ASMCMD voldelete命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; voldelete -G数据卷1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OSTMG94752"></a><a id="OSTMG94753"></a><a id="OSTMG94754"></a><a id="OSTMG94755"></a><a id="OSTMG94756"></a><a id="OSTMG94751"></a><div class="props_rev_3"><a id="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A" name="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A"></a><h4 id="OSTMG-GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A" class="sect4">voldisable</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A__GUID-C4CEA502-A437-429C-875B-AE1938856248">目的</p>
                        <p>禁用已装入磁盘组中的Oracle ADVM卷，并删除本地节点上的卷设备。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A__GUID-7737DE96-F683-48E5-94F6-93B4E85199E7">语法和说明</p><pre class="oac_no_warn" dir="ltr">voldisable {--all | {-G <span class="italic">diskgroup</span> {-a | <span class="italic">音量</span> }}}</pre><p><a href="manage-advm-asmcmd.html#GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A__CIHBJDIF" title="此表列出了volcreate命令的选项以及每个选项的说明">表15-4</a>说明了<code class="codeph">voldisable</code>命令的选项。
                        </p>
                        <div class="tblformal" id="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A__CIHBJDIF">
                           <p class="titleintable">表15-4 voldisable命令的选项</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="voldisable命令的选项" width="100%" border="1" summary="This table lists the options for the volcreate command, along with a description for each" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d126799e1360">选项</th>
                                    <th align="left" valign="bottom" width="75%" id="d126799e1363">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d126799e1368" headers="d126799e1360 ">
                                       <p><code class="codeph">- 所有</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d126799e1368 d126799e1363 ">
                                       <p>指定所有磁盘组中的所有卷。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d126799e1376" headers="d126799e1360 ">
                                       <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d126799e1376 d126799e1363 ">
                                       <p>包含卷的磁盘组的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d126799e1388" headers="d126799e1360 ">
                                       <p><code class="codeph">-一个</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d126799e1388 d126799e1363 ">
                                       <p>指定指定磁盘组中的所有卷。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d126799e1396" headers="d126799e1360 ">
                                       <p><span class="italic"><code class="codeph">体积</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d126799e1396 d126799e1363 ">
                                       <p>卷的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>您可以在关闭Oracle ASM实例或卸载磁盘组之前禁用卷，以验证操作是否可以正常完成，而不会因打开卷文件而包含强制选项。禁用卷还会阻止卷或设备文件上的任何后续打开，因为它不再存在。</p>
                        <p>在禁用卷之前，必须确保没有与卷关联的活动文件系统。必须先卸载Oracle ACFS文件系统，然后才能禁用该卷。请参阅<a href="steps-manage-acfs.html#GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" title="本主题讨论取消注册或卸载文件系统以及禁用卷的操作。">取消注册，卸载和禁用卷和Oracle ACFS文件系统</a> 。
                        </p>
                        <p>您可以在不先禁用卷的情况下删除卷。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A__GUID-AB844E48-C596-4181-8E23-E69520B4B8CF">例子</p>
                        <p>以下是禁用<code class="codeph">data</code>磁盘组中的<code class="codeph">volume1</code>的<code class="codeph">voldisable</code>命令的示例。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-369B7B5F-9B26-4AEF-B21E-B8B03BBE248A__GUID-7A28761E-1FE7-449A-84A0-ADEE3903CED3">
                        <p class="titleinexample">示例15-3使用ASMCMD voldisable命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; voldisable -G数据卷1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OSTMG94758"></a><a id="OSTMG94759"></a><a id="OSTMG94760"></a><a id="OSTMG94761"></a><a id="OSTMG94762"></a><a id="OSTMG94757"></a><div class="props_rev_3"><a id="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B" name="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B"></a><h4 id="OSTMG-GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B" class="sect4">volenable</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B__GUID-0D79F400-CA6E-467A-BB9B-9E97A1283789">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在已装入的磁盘组中启用Oracle ADVM卷。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B__GUID-B0C6CC33-0E54-4F69-B109-711DB62260B6">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">volenable {--all | {-G <span class="italic">diskgroup</span> {-a | <span class="italic">音量</span> }}}</pre><p><a href="manage-advm-asmcmd.html#GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B__CIHECFCJ" title="此表列出了volcreate命令的选项以及每个选项的说明">表15-5</a>说明了<code class="codeph">volenable</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B__CIHECFCJ">
                        <p class="titleintable">表15-5 volenable命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="可执行命令的选项" width="100%" border="1" summary="This table lists the options for the volcreate command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d126799e1624">选项</th>
                                 <th align="left" valign="bottom" width="75%" id="d126799e1627">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e1632" headers="d126799e1624 ">
                                    <p><code class="codeph">- 所有</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e1632 d126799e1627 ">
                                    <p>指定所有磁盘组中的所有卷。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e1640" headers="d126799e1624 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e1640 d126799e1627 ">
                                    <p>包含卷的磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e1652" headers="d126799e1624 ">
                                    <p><code class="codeph">-一个</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e1652 d126799e1627 ">
                                    <p>指定指定磁盘组中的所有卷。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e1660" headers="d126799e1624 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e1660 d126799e1627 ">
                                    <p>卷的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>创建卷时启用卷。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B__GUID-E5694574-B607-4DCA-A3FC-7DB26D930049">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是启用<code class="codeph">data</code>磁盘组中的<code class="codeph">volume1</code>的<code class="codeph">volenable</code>命令的示例。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-95BBF7E6-0C5A-45B4-B5B4-CF3E2046DB7B__GUID-A8E66AF1-ABFA-4B96-9830-A381EDF0D124">
                        <p class="titleinexample">示例15-4使用ASMCMD volenable命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volenable -G数据卷1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OSTMG94764"></a><a id="OSTMG94765"></a><a id="OSTMG94766"></a><a id="OSTMG94767"></a><a id="OSTMG94768"></a><a id="OSTMG94763"></a><div class="props_rev_3"><a id="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE" name="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE"></a><h4 id="OSTMG-GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE" class="sect4">volinfo可</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE__GUID-48B4CAA6-145A-4F89-BDA9-F33938D16CED">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>显示有关Oracle ADVM卷的信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE__GUID-C7065BBD-7BED-47D8-AF7F-B563E88F7209">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">volinfo {--all | {-G <span class="italic">diskgroup</span> {-a | <span class="italic">volume</span> }}} volinfo {--show_diskgroup | --show_volume} <span class="italic">volumedevice</span></pre><p><a href="manage-advm-asmcmd.html#GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE__CIHHFEIH" title="此表列出了volcreate命令的选项以及每个选项的说明">表15-6</a>说明了<code class="codeph">volinfo</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE__CIHHFEIH">
                        <p class="titleintable">表15-6 volinfo命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="volinfo命令的选项" width="100%" border="1" summary="This table lists the options for the volcreate command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d126799e1883">选项</th>
                                 <th align="left" valign="bottom" width="62%" id="d126799e1886">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1891" headers="d126799e1883 ">
                                    <p><code class="codeph">- 所有</code></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1891 d126799e1886 ">
                                    <p>指定所有磁盘组中的所有卷。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1899" headers="d126799e1883 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1899 d126799e1886 ">
                                    <p>包含卷的磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1911" headers="d126799e1883 ">
                                    <p><code class="codeph">-一个</code></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1911 d126799e1886 ">
                                    <p>指定指定磁盘组中的所有卷。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1919" headers="d126799e1883 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1919 d126799e1886 ">
                                    <p>卷的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1928" headers="d126799e1883 ">
                                    <p><code class="codeph">--show_diskgroup</code></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1928 d126799e1886 ">
                                    <p>仅返回磁盘组名称。卷设备名称是必需的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1936" headers="d126799e1883 ">
                                    <p><code class="codeph">--show_volume</code></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1936 d126799e1886 ">
                                    <p>仅返回卷名称。卷设备名称是必需的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e1944" headers="d126799e1883 ">
                                    <p><span class="italic"><code class="codeph">volumedevice</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e1944 d126799e1886 ">
                                    <p>卷设备的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE__GUID-99F1EC40-DFA3-4632-84B3-2F1196294FEE">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>第一示例显示有关信息<code class="codeph">volume1</code>的体积<code class="codeph">data</code>磁盘组。此示例是在Linux环境中生成的。第二个示例显示有关<code class="codeph">data</code>磁盘组中<code class="codeph">volume1</code>卷的信息，该信息是在Windows环境中生成的。
                        </p>
                        <p><code class="codeph">Mountpath</code>字段包含当前装入卷的路径或上次装入卷的位置。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F9B4940E-B3F5-45BA-BB68-83328597B6DE__GUID-D7E7FF6A-F600-494E-9EBE-820A61FDFD06">
                        <p class="titleinexample">示例15-5使用ASMCMD volinfo命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volinfo -G数据卷1磁盘组名称：DATA卷名称：VOLUME1卷设备：/ dev / asm / volume1-123状态：ENABLED大小（MB）：10240调整大小单位（MB）：64冗余：MIRROR条带列：8条带宽度（K）：1024用法：ACFS Mountpath：/ acfsmounts / acfs1 ASMCMD [+]&gt; volinfo -G data -a磁盘组名称：DATA卷名称：VOLUME1卷设备：\\。\ asm-volume1-311状态：ENABLED大小（MB）：10240调整大小单位（MB）：64冗余：MIRROR条带列：8条带宽度（K）：1024用法：ACFS装载路径：C：\ oracle \ acfsmounts \ acfs1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OSTMG94770"></a><a id="OSTMG94771"></a><a id="OSTMG94772"></a><a id="OSTMG94773"></a><a id="OSTMG94774"></a><a id="OSTMG94769"></a><div class="props_rev_3"><a id="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9" name="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9"></a><h4 id="OSTMG-GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9" class="sect4">volresize</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9__GUID-91974F3B-3D98-4B7E-B5D1-BDF41D90232E">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>调整Oracle ADVM卷的大小。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9__GUID-9B2EF1C3-F6EC-4956-93F2-95305B483F70">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">volresize -G <span class="italic">diskgroup</span> -s <span class="italic">size</span> [-f] <span class="italic">volume</span></pre><p><a href="manage-advm-asmcmd.html#GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9__CIHJIEHA" title="此表列出了volsize命令的选项以及每个选项的说明">表15-7</a>说明了<code class="codeph">volresize</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9__CIHJIEHA">
                        <p class="titleintable">表15-7 volresize命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="volresize命令的选项" width="100%" border="1" summary="This table lists the options for the volsize command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d126799e2171">选项</th>
                                 <th align="left" valign="bottom" width="75%" id="d126799e2174">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e2179" headers="d126799e2171 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e2179 d126799e2174 ">
                                    <p>包含卷的磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e2191" headers="d126799e2171 ">
                                    <p><code class="codeph">-F</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e2191 d126799e2174 ">
                                    <p>强制缩小不是Oracle ACFS卷的卷并禁止显示任何警告消息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e2199" headers="d126799e2171 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e2199 d126799e2174 ">
                                    <p>卷的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d126799e2208" headers="d126799e2171 ">
                                    <p><code class="codeph">-s</code> <span class="italic"><code class="codeph">size</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d126799e2208 d126799e2174 ">
                                    <p>体积的新尺寸，单位为<code class="codeph">K</code> ， <code class="codeph">M</code> ， <code class="codeph">G</code>或<code class="codeph">T</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>如果卷安装在非Oracle ACFS文件系统上，则在调整大小之前先卸载文件系统。如果新大小小于当前大小，则会警告您可能存在数据损坏。除非指定了<code class="codeph">-f</code> （强制）选项，否则系统将提示您是否继续该操作。
                        </p>
                        <p>如果卷上有Oracle ACFS文件系统，则无法使用<code class="codeph">volresize</code>命令调整卷的大小。您必须使用<code class="codeph">acfsutil</code> <code class="codeph">size</code>命令，该命令还会调整卷和文件系统的大小。有关信息，请参阅<span class="q">“ <a href="acfs-commands-utilities.html#GUID-79A8333D-4E1C-4788-944D-EC86E4278C00">acfsutil大小</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9__GUID-99B01F50-CF6F-48BB-80D7-A14D2F3611D2">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是<code class="codeph">volresize</code>命令的示例，该命令将<code class="codeph">data</code>磁盘组中的<code class="codeph">volume1</code>大小调整为20千兆字节。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E5762528-EEA2-4B7D-AE49-647A18CE31A9__GUID-254F146B-DFD8-43CF-A812-B041A54EF4A9">
                        <p class="titleinexample">示例15-6使用ASMCMD volresize命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volresize -G data -s 20G volume1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OSTMG94776"></a><a id="OSTMG94777"></a><a id="OSTMG94778"></a><a id="OSTMG94779"></a><a id="OSTMG94780"></a><a id="OSTMG94775"></a><div class="props_rev_3"><a id="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54" name="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54"></a><h4 id="OSTMG-GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54" class="sect4">volset</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54__GUID-2021BE97-CE5A-40E7-ACDE-8A55D9F8EB37">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>设置已装入磁盘组中Oracle ADVM卷的属性。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54__GUID-F1D5DA61-50C6-4B63-9C9C-8CE4B4982330">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">volset -G <span class="italic">diskgroup</span> [--usagestring <span class="italic">string</span> ] [--mountpath <span class="italic">mount_path</span> ] [--primary {hot | cold}] [ -  secondary {hot | cold}] <span class="italic">volume</span></pre><p><a href="manage-advm-asmcmd.html#GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54__CIHHHEED" title="此表列出了volset命令的选项以及每个选项的说明">表15-8</a>说明了<code class="codeph">volset</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54__CIHHHEED">
                        <p class="titleintable">表15-8 volset命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="volset命令的选项" width="100%" border="1" summary="This table lists the options for the volset command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d126799e2467">选项</th>
                                 <th align="left" valign="bottom" width="62%" id="d126799e2470">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2475" headers="d126799e2467 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2475 d126799e2470 ">
                                    <p>包含卷的磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2487" headers="d126799e2467 ">
                                    <p><code class="codeph">--usagestring</code> <span class="italic"><code class="codeph">string</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2487 d126799e2470 ">
                                    <p>用于标记卷的可选用法字符串，最多可包含30个字符。当卷连接到Oracle ACFS文件系统时，此字符串设置为<code class="codeph">ACFS</code> ，不应更改。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2502" headers="d126799e2467 ">
                                    <p><code class="codeph">--mountpath</code> <span class="italic"><code class="codeph">mount_path</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2502 d126799e2470 ">
                                    <p>用于标记卷的可选字符串及其安装路径字符串，最多可包含1024个字符。在安装文件系统时设置此字符串，不应更改。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2514" headers="d126799e2467 ">
                                    <p><code class="codeph">--primary</code> { <code class="codeph">hot|cold</code> }</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2514 d126799e2470 ">
                                    <p>主要范围（ <code class="codeph">hot</code>区或<code class="codeph">cold</code>区）的数据放置规范。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2532" headers="d126799e2467 ">
                                    <p><code class="codeph">--secondary</code> { <code class="codeph">hot|cold</code> }</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2532 d126799e2470 ">
                                    <p>次要范围的数据放置规范，无论是<code class="codeph">hot</code>区还是<code class="codeph">cold</code>区。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2550" headers="d126799e2467 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2550 d126799e2470 ">
                                    <p>卷的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>运行<code class="codeph">mkfs</code>命令创建文件系统时，usage字段设置为<code class="codeph">ACFS</code> ，如果已设置，则<code class="codeph">mountpath</code>字段将重置为空字符串。<code class="codeph">usage</code>字段应保留在<code class="codeph">ACFS</code> 。</p>
                        <p>运行<code class="codeph">mount</code>命令以装入文件系统时， <code class="codeph">mountpath</code>字段将设置为装载路径值，以标识文件系统的装入点。在<code class="codeph">mount</code>命令设置值之后，不应更新<code class="codeph">mountpath</code>字段。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54__GUID-B9C01B1A-8866-4D20-9156-3D3FCA90C952">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是<code class="codeph">volset</code>命令的示例，该命令设置与文件系统无关的卷的<code class="codeph">usage</code>字符串。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-90B51639-AF51-4FA9-8BC1-09765D9ECD54__GUID-C429A8B6-71C3-48E9-A4F0-E19C42D7CA8E">
                        <p class="titleinexample">示例15-7使用ASMCMD volset命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volset -G data --usagestring'没有文件系统创建'volume1</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OSTMG94782"></a><a id="OSTMG94783"></a><a id="OSTMG94784"></a><a id="OSTMG94785"></a><a id="OSTMG94786"></a><a id="OSTMG94781"></a><div class="props_rev_3"><a id="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3" name="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3"></a><h4 id="OSTMG-GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3" class="sect4">volstat</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3__GUID-E26DB9D4-DC1F-4F3B-BC05-53C7DCBC0367">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>报告Oracle ADVM卷的I / O统计信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3__GUID-65625DFF-9BCF-4CB0-B20F-821C26522829">语法和说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">volstat [-G <span class="italic">diskgroup</span> ] [ <span class="italic">音量</span> ]</pre><p><a href="manage-advm-asmcmd.html#GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3__CIHCGJCG" title="此表列出了volstat命令的选项以及每个选项的说明">表15-9</a>说明了<code class="codeph">volstat</code>命令的选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3__CIHCGJCG">
                        <p class="titleintable">表15-9 volstat命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="volstat命令的选项" width="100%" border="1" summary="This table lists the options for the volstat command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d126799e2797">选项</th>
                                 <th align="left" valign="bottom" width="62%" id="d126799e2800">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2805" headers="d126799e2797 ">
                                    <p><code class="codeph">-G</code> <span class="italic"><code class="codeph">diskgroup</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2805 d126799e2800 ">
                                    <p>包含卷的已装入磁盘组的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d126799e2817" headers="d126799e2797 ">
                                    <p><span class="italic"><code class="codeph">体积</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d126799e2817 d126799e2800 ">
                                    <p>卷的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>使用<code class="codeph">volstat</code>命令时，以下内容适用。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果未指定磁盘组且指定了卷名，则会搜索所有已装入的磁盘组以查找指定的卷名。</p>
                           </li>
                           <li>
                              <p>如果指定了磁盘组名称并且省略了卷名，则会显示指定磁盘组的所有卷。</p>
                           </li>
                           <li>
                              <p>如果省略磁盘组名称和卷名称，则会显示所有磁盘组上的所有卷。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3__GUID-A9C5F68B-CB23-48F9-80AE-6F608BC2B7E4">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是<code class="codeph">volstat</code>命令的示例，该命令显示有关<code class="codeph">data</code>磁盘组中卷的<code class="codeph">data</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6CACFAF7-C557-478B-9DB4-00653588E7A3__GUID-9C086DE6-3179-4A5F-A877-018F77348C16">
                        <p class="titleinexample">示例15-8使用ASMCMD volstat命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volstat -G数据DISKGROUP NUMBER / NAME：1 / DATA --------------------------------- ------ VOLUME_NAME READS BYTES_READ READ_TIME READ_ERRS写BYTES_WRITTEN WRITE_TIME WRITE_ERRS ----------------------------------- -------------------------- VOLUME1 10085 2290573312 22923 0 1382 5309440 1482 0</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="06000.configure-acfs-replication.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The requirements for Oracle ACFS snapshot-based replication are discussed in this section."></meta>
      <meta name="description" content="The requirements for Oracle ACFS snapshot-based replication are discussed in this section."></meta>
      <title>配置基于Oracle ACFS快照的复制</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="The requirements for Oracle ACFS snapshot-based replication are discussed in this section."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="acfs-advanced-topics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="manage-flex-asm.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="acfs-advanced-topics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="manage-flex-asm.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-advanced-topics.html" property="item" typeof="WebPage"><span property="name">高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置基于Oracle ACFS快照的复制</li>
            </ol>
            <a id="GUID-1BB7CD34-399B-496C-B458-DA3E68F48D31" name="GUID-1BB7CD34-399B-496C-B458-DA3E68F48D31"></a>
            
            <h2 id="OSTMG-GUID-1BB7CD34-399B-496C-B458-DA3E68F48D31" class="sect2"><span class="enumeration_chapter">18</span>配置基于Oracle ACFS快照的复制</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节将讨论Oracle ACFS基于快照的复制的要求。</p>
               <p>本章介绍如何配置12.2或更高版本提供的基于Oracle ACFS快照的复制。与版本12.2之前的Oracle ACFS复制安装一样，基于快照的复制的总体功能目标是确保将主群集的更新复制到备用群集。但是，基于快照的复制技术使用主存储位置的快照，并使用标准<code class="codeph">ssh</code>命令将连续快照之间的差异传输到备用存储位置。版本12.2之前的Oracle ACFS复制功能不断复制，基于Oracle网络技术，特别是网络基础技术（NFT），以确保主群集和备用群集之间的连接。
               </p>
               <p>Oracle ACFS复制的设计和实现方面的这一变化在复制的配置和使用方式上引入了一些差异。例如，使用<code class="codeph">ssh</code>需要在执行复制的主节点和备用节点上相应地设置主机密钥和用户密钥。
               </p>
               <p>Oracle ACFS复制还提供角色转换功能，您可以通过使主群集和备用群集根据需要与另一个群集进行通信来进行配置。在角色转换中，备用数据库承担主要角色，主要角色成为备用角色。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4">配置ssh以与Oracle ACFS复制一起使用</a></p>
                  </li>
                  <li>
                     <p><a href="configure-acfs-replication.html#GUID-D2CADB0B-E03D-4576-90DD-F1214362798D">在Windows上安装ssh和Cygwin</a></p>
                  </li>
                  <li>
                     <p><a href="configure-acfs-replication.html#GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7">升级到Oracle ACFS基于快照的复制</a></p>
                  </li>
               </ul>
               <p>有关Oracle ACFS复制的概述，请参阅<a href="understand-acfs-admin.html#GUID-8522E0B6-BE6E-4BE3-B7C7-5EA2ED4A602C" title="Oracle ACFS基于快照的复制可以将Oracle ACFS文件系统通过网络复制到远程站点，从而为文件系统提供灾难恢复功能。">Oracle ACFS复制</a> 。有关Oracle ACFS复制命令的信息，请参阅<a href="acfs-commands-replication.html#GUID-F40FA4A4-2ED0-461F-A1E0-5F886DA7FC0A" title="本主题提供了基于Oracle ACFS快照的复制命令的摘要。">Oracle ACFS命令行工具以进行复制</a> 。
               </p>
            </div>
            <div class="sect2"><a id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4" name="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4"></a><h3 id="OSTMG-GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4" class="sect3">配置ssh以与Oracle ACFS复制一起使用</h3>
               <div>
                  <p>本主题介绍如何配置<code class="codeph">ssh</code>以供12.2或更高版本提供的Oracle ACFS基于快照的复制使用。
                  </p>
                  <p>Oracle ACFS基于快照的复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输。为了支持完整的复制功能， <code class="codeph">ssh</code>必须可以在群集之间的任何一个方向上使用 - 从主群集到备用群集，从备用群集到主群集。
                  </p>
                  <p>本主题中的过程描述如何在一个方向上配置<code class="codeph">ssh</code>以进行复制 - 从主数据库到备用数据库。要完全配置<code class="codeph">ssh</code> ，必须在主服务器和备用服务器角色相反的情况下再次执行指令。第一次执行这些说明时，请完成为主群集和备用群集编写的步骤。第二次，反转主要和备用角色。执行标注在<span class="italic">主</span>群集上为您的需要备用群集上的步骤，并进行标记为需要您的主群集上的<span class="italic">备用</span>群集上的步骤。必须执行两次的过程描述如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__CHOOSINGANORACLEACFSREPLICATIONUSER-04CFEE35">选择Oracle ACFS复制用户</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__DISTRIBUTINGKEYSFORORACLEACFSREPLIC-0530A539">分发Oracle ACFS复制的密钥</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGAPUBLICKEYFORROOTFROMTHEPRIM-052F3C38">从主群集获取root的公钥</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGHOSTKEYSFORTHESTANDBYCLUSTER-052F3FCF">获取备用群集的主机密钥</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONPERMISSIONSFORSSH-RELATEDFIL-052F42E6">有关ssh相关文件权限的说明</a></p>
                     </li>
                     <li>
                        <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONSSHDCONFIGURATION-052F45A9">有关sshd配置的说明</a></p>
                     </li>
                  </ul>
                  <p>完成所有必要的步骤后，您可以使用<a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__VALIDATINGYOURSSH-RELATEDKEYCONFIGU-052F498A">验证ssh相关密钥配置中</a>描述的说明来确认您已在两个方向上正确配置了<code class="codeph">ssh</code> 。
                  </p>
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__CHOOSINGANORACLEACFSREPLICATIONUSER-04CFEE35">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-E1D91EB6-3D57-48DA-957B-43D004839291">选择Oracle ACFS复制用户</p>
                     <p>Oracle ACFS基于快照的复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输，因此必须谨慎管理在备用数据库上执行复制的用户身份。在复制过程中，运行复制的主节点上的<code class="codeph">root</code>用户（或Windows上的本地<code class="codeph">SYSTEM</code> ）使用<code class="codeph">ssh</code>登录复制中涉及的备用节点。
                     </p>
                     <p>因为<code class="codeph">ssh</code>不建议在备用节点上以<code class="codeph">root</code>用户身份登录，所以应该使用具有最低权限的用户身份。所选用户应具有Oracle ASM管理权限。通常，首次安装Oracle软件时指定给Oracle安装程序的用户属于所需的组，因此可以方便地选择作为复制用户。在此讨论中，复制用户被标识为<span class="italic">repluser</span> ;但是，您可以使用您选择的实际用户名替换<span class="italic">repluser</span> 。有关Oracle ASM的用户权限的信息，请参阅<a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限</a> 。有关运行Oracle ACFS <code class="codeph">acfsutil</code>命令的信息，请参阅<a href="steps-manage-acfs.html#GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" title="本主题概述了Oracle ACFS acfsutil命令的使用。">关于使用Oracle ACFS命令行工具</a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-5D336002-E430-4C35-A4A6-E8092C4E2ECD">
                        <p class="notep1">注意：</p>
                        <p>必须为主群集和备用群集上的<span class="italic">repluser</span>指定相同的用户和组标识。此外，主群集和备用群集上的用户名和数字<code class="codeph">uids</code>之间以及组名和数字<code class="codeph">gids</code>之间的映射必须相同。这是确保在两个群集上以相同方式使用数值所必需的，因为复制仅将数值从主数据库传输到备用数据库。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__DISTRIBUTINGKEYSFORORACLEACFSREPLIC-0530A539">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-C4685F1C-426C-4492-A882-191B7993F60D">分发Oracle ACFS复制的密钥</p>
                     <p>为Oracle ACFS复制分发密钥的过程包括从主群集获取公钥，获取备用群集的主机密钥，确保为<code class="codeph">ssh</code>相关文件正确配置<code class="codeph">sshd</code>根据需要配置<code class="codeph">sshd</code> ，以及最后验证<code class="codeph">ssh</code>配置。
                     </p>
                     <div class="infoboxnote" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-DF9DC152-83DC-4DFA-A5CE-DA276608CB11">
                        <p class="notep1">注意：</p>
                        <p>创建主机密钥时，请确保为完全限定的域主机名和本地主机名创建密钥。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGAPUBLICKEYFORROOTFROMTHEPRIM-052F3C38">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-F03646CD-F88D-4CD6-9342-F3B8C34C2222">从主群集获取root的公钥</p>
                     <p>必须知道在主群集的每个节点上定义的<code class="codeph">root</code>公钥，以便备用群集的每个节点上的<span class="italic">repluser</span> 。
                     </p>
                     <p>要使密钥已知，每个备用节点上必须存在目录<code class="codeph">~repluser/.ssh</code> 。如果此目录不存在，则创建它仅具有<span class="italic">repluser</span>访问权限。确保<code class="codeph">.ssh</code>目录的<code class="codeph">ls</code>命令显示类似于以下内容的输出：</p><pre class="oac_no_warn" dir="ltr">repluser @ standby $ ls -ld~ / .ssh drwx ------ 2 repluser dba 4096 Jan 27 17:01 .ssh</pre><p>如果在给定主节点上定义了<code class="codeph">root</code>公钥，则它位于<code class="codeph">.pub</code>文件中，例如<code class="codeph">/root/.ssh/id_rsa.pub</code> 。如果存在公钥文件，则将其内容添加到授权在作为复制运行的备用<span class="italic">数据库</span>的每个节点上作为<span class="italic">repluser</span>登录的密钥集。将密钥附加到每个备用节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> ，必要时创建此文件。
                     </p>
                     <p>如果公钥文件不存在，请通过以<code class="codeph">root</code>身份运行以下命令在主服务器上生成公钥和私钥对。
                     </p><pre class="oac_no_warn" dir="ltr">#ssh-keygen -t rsa</pre><p>您可以按回车键以响应命令发出的每个提示。将生成的<code class="codeph">.pub</code>文件复制到每个备用节点。
                     </p>
                     <p>你必须共享相同的公钥/私钥对对的选项<code class="codeph">root</code>在所有节点的主群集或建立每个主节点不同的密钥对。如果相同的公钥在主群集中的所有节点上对<code class="codeph">root</code>有效，则只有该密钥必须添加到备用群集的每个节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> 。如果每个主节点都有自己的<code class="codeph">root</code>公钥，则必须将所有公钥添加到该文件中。在任何一种情况下，您都可以通过将备用数据库的给定节点上更新的<code class="codeph">authorized_keys2</code>文件复制到群集的其他节点来最小化工作。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GETTINGHOSTKEYSFORTHESTANDBYCLUSTER-052F3FCF">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-C78516CB-C930-469E-8ED1-45CEF5A17F1B">获取备用群集的主机密钥</p>
                     <p>必须在可以运行复制的每个主节点上知道可以运行复制的每个备用节点的主机密钥。生成正确密钥的一种方法是以<code class="codeph">root</code>身份从每个主节点到每个备用节点手动运行<code class="codeph">ssh</code> 。如果尚未知道正确的主机密钥，则会显示警告，您可以启用<code class="codeph">ssh</code>来添加密钥。
                     </p>
                     <p>请注意， <code class="codeph">ssh</code>连接中涉及两个用户。当主节点上的<code class="codeph">ssh</code>以<code class="codeph">root</code>身份连接到备用节点时， <code class="codeph">ssh</code>将作为<span class="italic">repluser</span>登录备用节点。备用数据库上由<code class="codeph">ssh</code>运行的任何命令都以<span class="italic">repluser</span>的权限运行，而不是以<code class="codeph">root</code>权限运行。
                     </p>
                     <p>由于主节点以<code class="codeph">root</code>用户身份连接到备用节点，因此必须将备用节点的主机密钥添加到<code class="codeph">root</code>用户的<code class="codeph">known_hosts</code>文件中，而不是用于<span class="italic">repluser</span>的文件。以下是获取主机密钥的示例：</p><pre class="oac_no_warn" dir="ltr">[root @ primary usm] #sssh repluser @ standby date无法建立主机'standby（10.137.13.85）'的真实性。RSA密钥指纹是1b：a9：c6：68：47：b4：ec：7c：df：3a：f0：2a：6f：cf：a7：0a。您确定要继续连接（是/否）吗？</pre><p>如果您回答<code class="codeph">yes</code> ，则<code class="codeph">ssh</code>设置完成。主机备用主机密钥被存储在所述<code class="codeph">known_hosts</code>文件（ <code class="codeph">~root/.ssh/known_hosts</code>上的主机<span class="italic">主</span>用户） <code class="codeph">root</code> 。
                     </p>
                     <p>在给定主节点上完成备用节点的主机密钥设置后，如果使用虚拟IP地址（VIP）与备用群集通信，则需要执行其他步骤。您必须在引用备用群集中的主机的<code class="codeph">known_hosts</code>文件的每一行的开头添加VIP名称或地址。例如，如果您使用名称为<code class="codeph">standby12_vip</code>的VIP，并且您的<code class="codeph">known_hosts</code>文件包含以下两行引用您的备用数据库：</p><pre class="oac_no_warn" dir="ltr">standby1,10.242.20.22 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP standby2,10.242.20.23 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>要启用VIP，您可以修改这两行，如下所示：</p><pre class="oac_no_warn" dir="ltr">
<span class="bold">standby12_vip，standby1,10.242.20.22 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP <span class="bold">standby12_vip，standby2,10.242.20.23 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>最终，必须在主群集中的每个节点上执行在主群集的第一个节点上执行的主机密钥配置;每个主节点上必须存在上述序列的结果或等价物。最小化实现此配置所需的手动操作的一种方法是更新主群集的一个节点上的<code class="codeph">known_hosts</code>文件，然后将更新的文件复制到群集的其他节点。
                     </p>
                     <div class="infoboxnote" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-5E9BEBF3-D353-4C3C-B343-DA65EE35014C">
                        <p class="notep1">注意：</p>
                        <p>默认情况下，复制通过<code class="codeph">ssh</code>启用严格的主机密钥检查，以确保主节点在运行<code class="codeph">ssh</code>时连接到预期的备用节点或群集。但是，如果您确定不需要此检查，例如主群集和备用群集通过专用网络进行通信的情况，则可以禁用<code class="codeph">ssh</code>使用严格主机密钥检查。有关禁用严格主机密钥检查的信息，请参阅<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令的<code class="codeph">-o sshStrictKey=no</code>选项。如果禁用严格的主机密钥检查，则不需要设置主机密钥。有关<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令的信息，请参阅<a href="acfs-commands-replication.html#GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD">acfsutil repl init</a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONPERMISSIONSFORSSH-RELATEDFIL-052F42E6">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-D427A8C6-7947-4CDB-83E6-F3CF53E79D5D">有关ssh相关文件权限的说明</p>
                     <p>要使<code class="codeph">ssh</code>使用您已建立的密钥，必须确保在相关<code class="codeph">.ssh</code>目录和目录包含的某些文件的每个节点上正确设置权限。在每个主节点上，这指的是<code class="codeph">root</code>的<code class="codeph">.ssh</code>目录。在每个备用节点上，要检查的<code class="codeph">.ssh</code>目录是用于<span class="italic">repluser的目录</span> 。
                     </p>
                     <p>有关应该为每个<code class="codeph">.ssh</code>目录和目录中的密钥文件提供的权限的详细信息，请参阅<code class="codeph">ssh</code>实现的文档，例如<code class="codeph">ssh(1)</code>手册页的<code class="codeph">FILES</code>部分。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__NOTESONSSHDCONFIGURATION-052F45A9">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-02ED30E2-D4F1-4C24-A449-B7264C02A287">有关sshd配置的说明</p>
                     <p>开始使用复制后，会经常启动<code class="codeph">ssh</code>以执行复制操作。在某些平台上， <code class="codeph">ssh</code>守护程序<code class="codeph">sshd</code>可以配置为每次建立<code class="codeph">ssh</code>连接时通过<code class="codeph">syslog</code>或类似工具记录消息。为避免这种情况，可以修改服务器配置文件<code class="codeph">/etc/ssh/sshd_config</code>以指定较低的日志记录频率。控制日志记录的参数称为<code class="codeph">LogLevel</code> 。连接消息在<code class="codeph">INFO</code>级别发出。任何较低的<code class="codeph">LogLevel</code>设置（例如<code class="codeph">ERROR</code> ）都会禁止这些消息。例如，您可以通过将以下行添加到文件来禁止日志消息：</p><pre class="oac_no_warn" dir="ltr">LogLevel错误</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__VALIDATINGYOURSSH-RELATEDKEYCONFIGU-052F498A">
                     <p class="subhead2" id="GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4__GUID-FEA106F4-08E5-4326-A329-894F45B09935">验证与ssh相关的密钥配置</p>
                     <p>在主群集和备用群集上为<code class="codeph">ssh</code>建立主机密钥和用户密钥后，可以使用命令<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> <code class="codeph">-u</code>来验证密钥。您在每个群集的每个节点上以<code class="codeph">root</code>身份运行此命令。它将远程集群上的所有主机名或地址作为参数，本地集群将来可能会使用这些主机名或地址来执行复制。
                     </p>
                     <p>如果您没有使用VIP连接到远程集群，那么对于给定的复制关系，只有一个远程主机名或地址被提供给<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> 。但是，如果将来的关系涉及其他远程主机地址，请在运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> <code class="codeph">-u</code>命令时指定完整的远程地址集。
                     </p>
                     <p>如果使用VIP连接到远程群集，则应指定VIP可能处于活动状态的所有远程主机的名称或主机特定地址。请勿指定VIP名称或与VIP关联的地址。当复制使用<code class="codeph">ssh</code>连接到VIP时，返回的主机密钥是与VIP当前处于活动状态的主机关联的密钥。在这种情况下， <code class="codeph">ssh</code>仅使用单个远程节点的主机名或地址。
                     </p>
                     <p>要在主群集的每个节点上运行的验证命令具有以下格式：</p><pre class="oac_no_warn" dir="ltr">#acfsutil repl info -c -u repluser standby1 [standby2 ...] standby-mountpoint</pre><p>在命令中， <code class="codeph">standby <span class="codeinlineitalic">n</span></code>指定备用群集主机名或地址。验证命令确认用户<span class="italic">repluser</span>可以使用<code class="codeph">ssh</code>连接到给定的每个备用主机名或地址，方式与复制初始化相同。如果使用VIP（例如<code class="codeph">standby12_vip</code> ）连接到群集，请使用相同的命令格式。不要指定VIP的名称。</p>
                     <p></p>
                     <p>如果计划禁用严格主机密钥检查，则可以通过在命令行中添加<code class="codeph">-o sshStrictKey=no</code>选项来跳过此检查。
                     </p>
                     <p>确认主群集的每个节点都可以连接到备用群集的所有节点后，再次运行验证命令。这次在备用群集的每个节点上运行该命令。使用以下格式为主群集的所有节点指定主机名或IP地址：</p><pre class="oac_no_warn" dir="ltr">#acfsutil repl info -c -u repluser primary1 [primary2 ...] primary-mountpoint</pre><p>在命令中， <code class="codeph">primary <span class="codeinlineitalic">n</span></code>指定主群集主机名或地址。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D" name="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D"></a><h3 id="OSTMG-GUID-D2CADB0B-E03D-4576-90DD-F1214362798D" class="sect3">在Windows上安装ssh和Cygwin</h3>
               <div>
                  <p>本节介绍如何在Microsoft Windows主机上安装Cygwin并启动<code class="codeph">ssh</code>守护程序。仅当您要在Windows主机上使用基于Oracle ACFS快照的复制时，此信息才适用。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-234B1C81-531E-41D6-BAB0-2F8D3FE4D7B2">针对Oracle ACFS复制的Cygwin要求</p>
                     <p>Oracle ACFS基于快照的复制使用<code class="codeph">ssh</code>将复制相关数据从主群集传输到备用群集。在Microsoft Windows上运行的主机上使用复制时，必须安装Cygwin并在主机上启动<code class="codeph">ssh</code>守护程序，如本节所述。
                     </p>
                     <p>Cygwin本质上是一个在Microsoft Windows主机上提供类似Linux的环境的实用程序。从技术上讲，它是一个DLL（ <code class="codeph">cygwin1.dll</code> ），充当Linux API层，提供大量的Linux API功能。安装Cygwin后，可以在主机上配置<code class="codeph">ssh</code>守护程序。Oracle ACFS复制已通过Cygwin 2.0认证和支持。
                     </p>
                     <p><code class="codeph">ssh</code>守护程序使Oracle ACFS复制能够建立从运行复制的主群集到运行复制的备用群集的<code class="codeph">ssh</code>连接。
                     </p>
                     <div class="infoboxnote" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-99AC42CF-96A5-41B3-8DAB-EA04B61BD846">
                        <p class="notep1">注意：</p>
                        <p>这些用于安装<code class="codeph">ssh</code>守护程序的指令会生成一个守护程序，该守护程序仅可用于以特定用户<span class="italic">repluser</span>身份登录和运行命令。与其他任何用户一样，在登录和运行命令时，守护程序无法正常工作。这种限制源于两个因素：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>为Oracle ACFS定义的用户必须是基于域的用户。</p>
                           </li>
                           <li>
                              <p>为基于域的用户启用<code class="codeph">ssh</code>守护程序的通用使用涉及创建域策略，该策略为该用户提供一些非常强大的权限，包括允许用户充当<span class="italic">可信计算库的</span>一部分的<code class="codeph">SeTcbPrivilege</code> 。在大多数企业环境中不太可能允许创建此类策略，因此这些策略的使用不包含在这些说明中。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-89207EDC-DEE6-4787-B070-368261B17086">安装Cygwin之前的步骤</p>
                     <p>在开始使用<code class="codeph">ssh</code>之前，请确保您没有通过执行以下步骤中的检查来使用<code class="codeph">OpenSSH</code>和<code class="codeph">MKSNT</code> 。
                     </p>
                     <p>请注意，本节中描述的导航步骤可能因不同的Microsoft Windows操作系统而异。</p>
                     <ol>
                        <li>
                           <p>确保<code class="codeph">OpenSSH\bin</code>和存储<code class="codeph">mksnt</code>可执行文件的任何目录不在<code class="codeph">PATH</code>环境变量中。如果是，请通过执行以下操作将其从路径字符串中删除：</p>
                           <ol type="a">
                              <li>
                                 <p>右键单击“ <span class="uicontrol bold">我的电脑”，</span>然后转到“ <span class="uicontrol bold">属性”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="uicontrol bold">系统属性”</span>窗口中，单击“ <span class="uicontrol bold">高级”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在此选项卡中，单击“ <span class="uicontrol bold">环境变量”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>搜索<code class="codeph">PATH</code>系统变量，选择它，如果<code class="codeph">PATH</code>字符串中存在<code class="codeph">OpenSSH\bin</code>或<code class="codeph">mksnt</code>相关值，请单击“ <span class="uicontrol bold">编辑”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“编辑系统变量”对话框中，从<code class="codeph">PATH</code>字符串中删除这些值，然后单击“ <span class="uicontrol bold">确定”</span> 。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>如果<code class="codeph">ssh</code> <code class="codeph">daemon</code>从<code class="codeph">OpenSSH</code> ， <code class="codeph">MKS</code>或任何其他源运行，请停止并禁用它。如果<code class="codeph">ssh</code>守护程序正在运行，请执行以下操作停止并禁用它：</p>
                           <ol type="a">
                              <li>
                                 <p>右键单击“ <span class="uicontrol bold">我的电脑”</span> ，然后选择“ <span class="uicontrol bold">管理”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="uicontrol bold">计算机管理”</span>窗口的左窗格中，展开“ <span class="uicontrol bold">服务和应用程序”</span> ，然后选择“ <span class="uicontrol bold">服务”</span> 。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>在右窗格中，右键单击<code class="codeph">ssh</code>守护程序/ <code class="codeph">MKS Secure Shell</code>服务，然后单击出现的菜单上的“ <span class="uicontrol bold">停止”</span>条目。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在同一窗格中，右键单击<code class="codeph">ssh</code>守护程序/ <code class="codeph">MKS Secure Shell</code>服务，然后单击出现的菜单上的“ <span class="uicontrol bold">属性”</span>条目。在打开的对话框中，选择“ <span class="uicontrol bold">已禁用”</span>作为“ <span class="uicontrol bold">启动”</span>类型，然后单击“ <span class="uicontrol bold">确定”</span> 。</p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-40EE4B4F-3EC1-4032-A977-6F49F3B56BBE">安装Cygwin</p>
                     <p>要在Microsoft Windows主机上安装Cygwin，请执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>访问以下URL，然后单击<span class="uicontrol bold">Install Cygwin</span> ：</p><pre class="oac_no_warn" dir="ltr">http://www.cygwin.com/</pre></li>
                        <li>
                           <p>根据您运行的Microsoft Windows版本，下载32位版本或64位版本的Cygwin安装程序可执行文件。</p>
                        </li>
                        <li>
                           <p>运行安装程序可执行文件，然后单击<span class="uicontrol bold">下一步</span>继续。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择安装类型”</span>屏幕上，选择“ <span class="uicontrol bold">从Internet安装”</span> ，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择安装目录”</span>屏幕上，输入<code class="codeph">C:\cygwin</code>作为<span class="uicontrol bold">根目录</span> ，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择本地程序包目录”</span>屏幕上，选择本地计算机上要存储下载的安装文件的目录，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择连接类型”</span>屏幕上，选择适当的设置以连接到Internet，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">选择下载站点”</span>屏幕上，从可用列表中选择任何站点，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“选择包”屏幕上，确保选择以下包，然后单击“ <span class="uicontrol bold">下一步”</span> 。从<span class="uicontrol bold">存档</span>类别中，选择<span class="uicontrol bold">解压缩</span>和<span class="uicontrol bold">压缩</span> 。从<span class="uicontrol bold">Net</span>类别中，选择<span class="uicontrol bold">openssh</span>和<span class="uicontrol bold">openssl</span> 。选择包并单击“ <span class="uicontrol bold">下一步”后</span> ，将显示“ <span class="uicontrol bold">解析依赖关系”</span>屏幕。单击“ <span class="uicontrol bold">下一步”</span>继续。
                           </p>
                        </li>
                        <li>
                           <p>在“ <span class="uicontrol bold">安装状态”和“创建图标”</span>屏幕上，不要进行任何更改。单击“ <span class="uicontrol bold">完成”</span>以完成安装过程。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-51C95050-C99D-409D-8DEA-95B4EAF37FDE">配置ssh</p>
                     <p>本节介绍在主机上安装Cygwin后如何为Oracle ACFS复制配置<code class="codeph">ssh</code> 。
                     </p>
                     <div><span class="bold">选择复制用户</span><p>Oracle ACFS复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输，因此需要明确指定执行复制的用户身份。在复制过程中，主节点上的特权用户使用<code class="codeph">ssh</code>登录复制中涉及的备用节点。<code class="codeph">ssh</code>不希望以备用节点上的特权用户身份登录。相反，应该使用最低权限的用户身份。所选用户必须是基于域的用户，并且必须是<code class="codeph">ORA_ASMADMIN</code>组的成员。
                        </p>
                        <p>在本讨论中， <span class="italic">repladmin</span>和<span class="italic">repluser</span>用于指复制用户;但是，您可以将<span class="italic">repladmin</span>和<span class="italic">repladmin</span>替换<span class="italic">为</span>您选择的实际用户名。<span class="italic">repladmin</span>用户是指在主数据库和备用数据库上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令的用户。该用户必须是<code class="codeph">Administrators</code>组的成员。<span class="italic">repluser</span>用户是指<code class="codeph">ssh</code>用于登录备用数据库的用户。此用户必须是基于域的用户，并且必须是<code class="codeph">ORA_ASMADMIN</code>组的成员，但不是<code class="codeph">Administrators</code>组的成员。如果已存在使用Oracle RAC的合适用户，则应将该用户用作<span class="italic">repluser</span> 。
                        </p>
                        <p>有关Oracle ASM的用户权限的信息，请参阅<a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限</a> 。有关运行Oracle ACFS <code class="codeph">acfsutil</code>命令的信息，请参阅<a href="steps-manage-acfs.html#GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" title="本主题概述了Oracle ACFS acfsutil命令的使用。">关于使用Oracle ACFS命令行工具</a> 。
                        </p>
                     </div>
                     <div><span class="bold">配置步骤</span><p>配置<code class="codeph">ssh</code> ，您可能需要运行<code class="codeph">cygwin.bat</code>脚本。在Microsoft Windows Server 2008和Microsoft Windows Vista上运行<code class="codeph">cygwin.bat</code>时，请确保以管理员模式调用批处理文件。为此，请右键单击<code class="codeph">cygwin.bat</code>文件，然后选择<code class="codeph">Run as administrator</code> 。
                        </p>
                        <p>要配置<code class="codeph">ssh</code>并测试Cygwin设置，请按照下列步骤操作：</p>
                        <ol>
                           <li>
                              <p>安装Cygwin后，导航到<code class="codeph">C:\cygwin</code>目录，使用任何编辑器以编辑模式打开Cygwin.bat文件，并在调用<code class="codeph">bash</code> shell之前添加以下行。
                              </p><pre class="oac_no_warn" dir="ltr">设置CYGWIN = binmode ntsec</pre><p>以下行是添加上一行后<code class="codeph">Cygwin.bat</code>文件的可能内容：</p><pre class="oac_no_warn" dir="ltr">@echo off C：chdir C：\ cygwin \ bin set CYGWIN = binmode ntsec bash --login -i</pre></li>
                           <li>
                              <p>要验证是否正确安装了Cygwin（ <code class="codeph">cygrunsrv</code> ），请运行<code class="codeph">C:\cygwin\Cygwin.bat</code> ，然后运行以下命令：</p><pre class="oac_no_warn" dir="ltr">cygrunsrv -h</pre><p>如果正确安装了Cygwin，则屏幕上会显示所有Cygwin帮助选项。如果该命令返回错误消息，则可能必须重新安装Cygwin。</p>
                           </li>
                           <li>
                              <p>在Windows级别定义<span class="italic">repladmin</span>和<span class="italic">repluser</span>标识。
                              </p>
                              <p>您也可以使用现有用户来代替这些角色。如果为这些角色定义新标识，请注意以下事项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="italic">repladmin</span>用户必须是Administrators组的成员。建议<span class="italic">repladmin</span>也是基于域的用户。如果<span class="italic">repladmin</span>是本地用户，则应在所有主节点上使用相同的组成员身份定义它。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic">repluser</span>用户必须是基于域的用户，并且必须是<code class="codeph">ORA_ASMADMIN</code>组的成员。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>配置<code class="codeph">sshd</code>服务。运行<code class="codeph">C:\cygwin\Cygwin.bat</code> ，并执行以下命令：</p><pre class="oac_no_warn" dir="ltr">SSH-主机配置</pre><p>运行该命令后，系统会提示您以下问题。适当的回答以粗体显示。其他输出也可能出现，但此处未显示。</p><pre class="oac_no_warn" dir="ltr">***查询：是否应该使用StrictModes？（是/否） <span class="bold">是</span> ***查询：是否应使用权限分离？&lt;是/否&gt;： <span class="bold">是</span> ***查询：新的本地帐户'sshd'？&lt;是/否&gt;： <span class="bold">是</span> ***查询：您是否要将sshd作为服务安装？***查询：&lt;如果它已作为服务安装，则说“否”&gt; &lt;是/否&gt;： <span class="bold">是</span> ***查询：输入守护程序的CYGWIN值：[] <span class="bold">binmode ntsec</span></pre><p>现在<code class="codeph">ssh-host-config</code>输出一些关于使用无密码登录所需的用户帐户的注释。Oracle ACFS复制需要此功能。<span class="italic">应将repluser</span>帐户指定为此帐户。
                              </p><pre class="oac_no_warn" dir="ltr">***信息：找到了以下特权帐户：'cyg_server'。***信息：此脚本计划使用'cyg_server'。***信息：'cyg_server'仅供注册服务使用。***查询：您想使用其他名称吗？（是/否） <span class="bold">是的</span></pre><p>您应该对提示回答“ <span class="uicontrol bold">是</span> ”，并应将<span class="italic">repluser</span>指定为运行<code class="codeph">sshd</code>的名称。然后，系统会提示您以下问题。
                              </p><pre class="oac_no_warn" dir="ltr">***查询：输入新用户名： <span class="bold">repluser</span> ***查询：重新输入： <span class="bold">repluser</span> ***警告：指定的帐户“repluser”没有***警告：所需权限或组成员身份。这可能***警告：如果不纠正会导致问题;继续...***查询：请输入用户'repluser'的密码：***查询：重新输入：</pre><p>以上假设用户<span class="italic">repluser</span>已存在。您可以忽略有关缺少权限或组成员身份的警告输出。如果配置成功，将显示以下消息。
                              </p><pre class="oac_no_warn" dir="ltr">主机配置完成。玩得开心！</pre></li>
                           <li>
                              <p>确保目录<code class="codeph">/var/empty</code>存在并由<span class="italic">repluser</span>拥有。
                              </p>
                           </li>
                           <li>
                              <p>确保Cygwin知道<span class="italic">repluser</span>和<span class="italic">repladmin</span>用户。
                              </p>
                              <p>备份<code class="codeph">c:\cygwin\etc\passwd</code>文件，然后以编辑模式打开文件。从此文件中删除引用<span class="italic">repladmin</span>或<span class="italic">repluser</span>用户的所有行。对于每个用户，请运行以下命令。假设两个用户都是基于域的用户。
                              </p><pre class="oac_no_warn" dir="ltr">/ bin / mkpasswd -d -u repladmin &gt;&gt; / etc / passwd</pre><p>确保为<code class="codeph">/etc/passwd</code>每个用户命名的主目录存在。如有必要，请创建它。例如，如果<code class="codeph">/home/repladmin</code>是为用户<span class="italic">repladmin</span>显示的目录，请执行以下操作以创建必要的目录。
                              </p><pre class="oac_no_warn" dir="ltr">mkdir -p / home / repladmin chown repladmin / home / repladmin</pre></li>
                           <li>
                              <p>确保<code class="codeph">ssh</code>守护程序启动，并配置为自动启动：</p>
                              <ol type="a">
                                 <li>
                                    <p>右键单击“ <span class="uicontrol bold">我的电脑”</span> ，然后选择“ <span class="uicontrol bold">管理”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在“ <span class="uicontrol bold">计算机管理”</span>窗口的左窗格中，展开“ <span class="uicontrol bold">服务和应用程序”</span> ，然后选择“ <span class="uicontrol bold">服务”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在右窗格中，右键单击<span class="uicontrol bold">CYGWIN</span> <span class="uicontrol bold">sshd</span>服务，然后单击出现的菜单上的“ <span class="uicontrol bold">属性”</span>条目。在打开的对话框中，选择“ <span class="uicontrol bold">自动”</span>作为“ <span class="uicontrol bold">启动”</span>类型，然后单击“ <span class="uicontrol bold">确定”</span> 。</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>如果<code class="codeph">ssh</code>守护程序未启动，请查看<code class="codeph">c:\cygwin\var\log\sshd.log</code>文件以获取与启动过程失败相关的信息。
                        </p>
                     </div>
                     <div><span class="bold">从主服务器获取repladmin的公钥</span><p>必须知道在主群集的每个节点上定义的<span class="italic">repladmin的</span>公钥，以便备用群集的每个节点上的<span class="italic">repluser</span>都知道。
                        </p>
                        <p>要使密钥已知，每个备用节点上必须存在目录<code class="codeph">~repluser/.ssh</code> 。如果此目录不存在，则创建它仅具有<span class="italic">repluser</span>访问权限。确保<code class="codeph">.ssh</code>目录的<code class="codeph">ls</code>命令显示类似于以下内容的输出：</p><pre class="oac_no_warn" dir="ltr">repluser @ standby $ ls -ld~ / .ssh drwx ------ + 1 repluser Domain Users 4096 2016-02-23 11:27 .ssh</pre><p>如果在给定主节点上定义了<span class="italic">repladmin的</span>公钥，则它驻留在<code class="codeph">.pub</code>文件中，例如<code class="codeph">~repladmin/.ssh/id_rsa.pub</code> 。如果存在公钥文件，则将其内容添加到授权在作为复制运行的备用<span class="italic">数据库</span>的每个节点上作为<span class="italic">repluser</span>登录的密钥集。将密钥附加到每个备用节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> ，必要时创建此文件。
                        </p>
                        <p>如果公钥文件不存在，请通过运行以下命令作为<span class="italic">repladmin</span>在主服务器上生成公钥和私钥对。
                        </p><pre class="oac_no_warn" dir="ltr">#ssh-keygen -t rsa</pre><p>您可以按回车键以响应命令发出的每个提示。将生成的<code class="codeph">.pub</code>文件复制到每个备用节点。
                        </p>
                        <p>您可以选择在主群集中的所有节点上为<span class="italic">repladmin</span>共享相同的公钥/私钥对，或者为每个主节点建立不同的密钥对。如果相同的公钥在主群集中的所有节点上对<span class="italic">repladmin</span>有效，则只需将该密钥添加到备用群集的每个节点上的文件<code class="codeph">~repluser/.ssh/authorized_keys2</code> 。如果每个主节点都有自己的<span class="italic">repladmin</span>公钥，则必须将所有公钥添加到该文件中。在任何一种情况下，您都可以通过将备用数据库的给定节点上更新的<code class="codeph">authorized_keys2</code>文件复制到群集的其他节点来最小化工作。
                        </p>
                     </div>
                     <div><span class="bold">获取备用主机密钥</span><p>必须在可以运行复制的每个主节点上知道可以运行复制的每个备用节点的主机密钥。生成正确密钥的一种方法是手动运行<code class="codeph">ssh</code>作为每个主节点到每个备用节点的<span class="italic">repladmin</span>用户。如果尚未知道正确的主机密钥，则会显示警告，您可以启用<code class="codeph">ssh</code>来添加密钥。
                        </p>
                        <p>请注意， <code class="codeph">ssh</code>连接中涉及两个用户。当主节点上的<code class="codeph">ssh</code>作为<span class="italic">repladmin</span>连接到备用节点时， <code class="codeph">ssh</code>在备用节点上以<span class="italic">repluser</span>身份<span class="italic">登录</span> 。备用数据库上由<code class="codeph">ssh</code>运行的任何命令都以<span class="italic">repluser</span>的权限运行，而不是使用<span class="italic">repladmin</span>权限。
                        </p>
                        <p>由于主节点以用户<span class="italic">repladmin</span>连接到备用节点，因此备用节点的主机密钥必须添加到<span class="italic">repladmin</span>用户的<code class="codeph">known_hosts</code>文件中，而不是<span class="italic">repluser</span>的文件。以下是获取主机密钥的示例：</p><pre class="oac_no_warn" dir="ltr">[repladmin @ primary usm] #sssh repluser @ standby date无法建立主机'standby（10.137.13.85）'的真实性。RSA密钥指纹是1b：a9：c6：68：47：b4：ec：7c：df：3a：f0：2a：6f：cf：a7：0a。您确定要继续连接（是/否）吗？</pre><p>如果您回答<code class="codeph">yes</code> ，则<code class="codeph">ssh</code>设置完成。主机备用主机密钥被存储在所述<code class="codeph">known_hosts</code>文件（ <code class="codeph">~repladmin/.ssh/known_hosts</code>上的主机<span class="italic">主</span>用户<span class="italic">repladmin）。</span>
                        </p>
                        <p>在给定主节点上完成备用节点的主机密钥设置后，如果使用虚拟IP地址（VIP）与备用群集通信，则需要执行其他步骤。您必须在引用备用群集中的主机的<code class="codeph">known_hosts</code>文件的每一行的开头添加VIP名称或地址。例如，如果您使用名称为<code class="codeph">standby12_vip</code>的VIP，并且您的<code class="codeph">known_hosts</code>文件包含以下两行引用您的备用数据库：</p><pre class="oac_no_warn" dir="ltr">standby1,10.242.20.22 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP standby2,10.242.20.23 SSH-RSA AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>要启用VIP，您可以修改这两行，如下所示：</p><pre class="oac_no_warn" dir="ltr">
<span class="bold">standby12_vip，standby1,10.242.20.22 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQC3pM2YTd4UUiEWEoCKDGgaTgsmPkQToDrdtU + JtVIq / 96muivU BaJUK83aqzeNIQkh + hUULsUdgKoKT5bxrWYqhY6AlTEqNgBHjBrJt9C73BbQd9y48jsc2G + WQWyuI / + + S1Q hIJdBNMxvMBQAfisPWWUcaIx9Y / JzlPgF6lRP2cbfqAzixDot9fqRrAKL3G6A75A / 6TbwmEW07d1zqOv l7ZGyeDYf5zQ72F / V0P9UgMEt / 5DmcYTn3kTVGjOTbnRBe4A4lY4rVw5c + nZBDFre66XtORfQgwQB5ztW / PI 08GYbcIszKoZx2HST9AZxYIAgcrnNYG2Ae0K6QLxxxScP <span class="bold">standby12_vip，standby2,10.242.20.23 SSH-RSA</span> AAAAB3NzaC1yc2EAAAADAQABAAABAQDIszcjzNtKN03SY8Kl846skFTVP1HF / ykswbmkctEjL6KTWTW + NR U4MGbvkBqqdXxuPCR7aoGO2U3PEOg1UVf3DWUoux8IRvqKU + dJcdTibMFkDAIhTnzb14gZ / lRTjn + GYsuP5 Qz2vgL / U0ki887mZCRjWVL1b5FNH8sXBUV2QcD7bjF98VXF6n4gd5UiIC3jv6l2nVTKDwtNHpUTS1dQAi + 1D tr0AieZTsuxXMaDdUZHgKDotjciMB3mCkKm / u3IFoioDqdZE4 + vITX9G7DBN4CVPXawp + b5Kg8X9P + 08Eehu tMlBJ5lafy1bxoVlXUDLVIIFBJNKrsqBvxxxpS7</pre><p>最终，必须在主群集中的每个节点上执行在主群集的第一个节点上执行的主机密钥配置;每个主节点上必须存在上述序列的结果或等价物。最小化实现此配置所需的手动操作的一种方法是更新主群集的一个节点上的<code class="codeph">known_hosts</code>文件，然后将更新的文件复制到群集的其他节点。
                        </p>
                        <div class="infoboxnote" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__GUID-5E9BEBF3-D353-4C3C-B343-DA65EE35014C">
                           <p class="notep1">注意：</p>
                           <p>默认情况下，复制通过<code class="codeph">ssh</code>启用严格的主机密钥检查，以确保主节点在运行<code class="codeph">ssh</code>时连接到预期的备用节点或群集。但是，如果您确定不需要此检查，例如主群集和备用群集通过专用网络进行通信的情况，则可以禁用<code class="codeph">ssh</code>使用严格主机密钥检查。有关禁用严格主机密钥检查的信息，请参阅<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令的<code class="codeph">/o sshStrictKey=no</code>选项。如果禁用严格的主机密钥检查，则不需要设置主机密钥。有关<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令的信息，请参阅<a href="acfs-commands-replication.html#GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD">acfsutil repl init</a> 。
                           </p>
                        </div>
                     </div>
                     <div><span class="bold">为SYSTEM用户添加密钥</span><p>Oracle ACFS复制使用在主群集的节点上运行的守护程序来控制复制进度。使用标识<code class="codeph">NT_AUTHORITY\SYSTEM</code>自动启动此守护程序。使用此守护程序，使用<code class="codeph">ssh</code>复制可以将主数据传输并应用到备用站点。
                        </p>
                        <p>守护程序启动的进程具有守护程序的标识。如果用户是<code class="codeph">NT_AUTHORITY\SYSTEM</code> ，那就是用户通过<code class="codeph">ssh</code>实际联系备用数据库。 <code class="codeph">ssh</code>在主目录中搜索<code class="codeph">SYSTEM</code>用户，以便向备用数据库显示公钥，并在那里检查以验证备用数据库提供的主机密钥。
                        </p>
                        <p>要使守护程序成功使用<code class="codeph">ssh</code> ，应将主服务器上为<span class="italic">repladmin</span>设置的<code class="codeph">.ssh</code>目录的内容复制到<code class="codeph">SYSTEM</code>主目录中的<code class="codeph">.ssh</code>目录中。使用此目录的位置，该位置与用于其他主目录的位置并行。
                        </p>
                        <p>例如，如果用户<span class="italic">repladmin</span>主目录是<code class="codeph">/home/repladmin</code> ，然后用<code class="codeph">/home/SYSTEM</code>作为主目录<code class="codeph">SYSTEM</code> 。像这样创建<code class="codeph">.ssh</code>目录，同时以<span class="italic">repladmin</span>身份登录。
                        </p>
                        <p>首先，为<code class="codeph">SYSTEM</code>创建主目录（如果它尚不存在）：</p><pre class="oac_no_warn" dir="ltr">$ mkdir / home / SYSTEM</pre><p>接下来，将<span class="italic">repladmin</span>的<code class="codeph">.ssh</code>目录复制到<code class="codeph">SYSTEM</code>的目录中：</p><pre class="oac_no_warn" dir="ltr">$ cd $ HOME $ cp -p -R .ssh / home / SYSTEM</pre></div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D2CADB0B-E03D-4576-90DD-F1214362798D__TESTINGYOURCYGWINSETUP-DDC2192C">测试您的Cygwin设置</p>
                     <p>现在测试你的Cygwin设置。使用具有<code class="codeph">ssh</code>客户端的其他计算机，以用户<span class="italic">repladmin</span>执行以下命令：</p><pre class="oac_no_warn" dir="ltr">ssh -l repluser主机地址日期</pre><p>其中<code class="codeph">host-address</code>是指刚配置<code class="codeph">ssh</code>的主机。例如：</p><pre class="oac_no_warn" dir="ltr">ssh -l repluser standby1.us.example.com日期</pre><p>如果已成功完成安装并配置步骤，则应在不提示输入密码的情况下运行上一个命令。</p>
                     <p>如果在配置<code class="codeph">ssh</code>后遇到进程fork失败，内存泄漏错误或文件访问错误，请查看以下链接以获取解决方法：</p><pre class="oac_no_warn" dir="ltr">http://cygwin.com/faq.html</pre><p>如果您无法找到问题的解决方法，请使用以下链接向Cygwin社区报告您的问题：</p><pre class="oac_no_warn" dir="ltr">http://cygwin.com/problems.html</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7" name="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7"></a><h3 id="OSTMG-GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7" class="sect3">升级到Oracle ACFS基于快照的复制</h3>
               <div>
                  <p>本节介绍升级到Oracle ACFS基于快照的复制。借助Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2），基于Oracle ACFS快照的复制成为受支持的Oracle ACFS复制实施。如果您具有12.2之前版本的复制环境，则在升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）时，必须将现有复制安装升级到基于快照的复制。
                  </p>
                  <div class="infoboxnote" id="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7__GUID-5B0317C4-D820-4409-9041-377DB52D83FE">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>复制升级过程开始后，必须完成。该过程无法回滚。</p>
                        </li>
                        <li>
                           <p>在升级到基于快照的复制之前，应启用Oracle Flex ASM，并在必要时执行密码文件转换。</p>
                        </li>
                     </ul>
                  </div>
                  <p>当实例升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）时，必须为任何现有实例启用Oracle Flex ASM。如果实例中存在密码文件以支持复制，则必须启用该文件以在新的Oracle Flex ASM实例中使用。例如，如果实例的先前<code class="codeph">ORACLE_SID</code>设置为<code class="codeph">ASM</code>且当前<code class="codeph">ORACLE_SID</code>设置为<code class="codeph">APX1</code> ，则必须执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>将现有的<code class="codeph">orapw+ASM</code>文件复制到<code class="codeph">+APX1</code>版本</p><pre class="oac_no_warn" dir="ltr">$ cp /oraroot/app/12.2.0/has0626/dbs/orapw+ASM /oraroot/app/12.2.0/has0626/dbs/orapw+APX1</pre></li>
                     <li>在<code class="codeph">dbs</code>目录中创建一个名为<code class="codeph">init+APX1.ora</code>的新文本文件，并将以下行添加到新文件中：<pre class="oac_no_warn" dir="ltr">remote_login_passwordfile =独家</pre></li>
                     <li>
                        <p>重新启动Oracle ASM代理（APX）实例。</p><pre class="oac_no_warn" dir="ltr">$ asmcmd shutdown --target APX --immediate</pre><p>确保将环境变量<code class="codeph">ORACLE_SID</code>设置为Oracle ASM代理（APX）实例。然后重启实例。
                        </p><pre class="oac_no_warn" dir="ltr">$ asmcmd startup --pfile init + APX1.ora</pre></li>
                  </ol>
                  <p>基于快照的复制使用<code class="codeph">ssh</code>作为主群集和备用群集之间的传输。在开始升级过程之前，必须配置<code class="codeph">ssh</code>中所描述<a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4">配置SSH的使用有了Oracle ACFS复制</a> 。
                  </p>
                  <p>在升级到基于快照的复制之前，必须将备用群集系统升级到Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）。此群集升级应在24小时内完成。备用群集在此升级过程中继续运行现有复制。接下来，升级到主群集上的Oracle Grid Infrastructure 12 <span class="italic">c第</span> 2版（12.2）。此升级也应在24小时内完成。在此升级期间，主群集将继续运行在12.2之前安装的现有复制。完成Oracle Grid Infrastructure 12 <span class="italic">c</span>发布2（12.2）升级备用和主群集后，不支持在12.2之前安装的现有复制实施。
                  </p>
                  <p>在升级两个群集之后，必须立即将与要复制的文件系统关联的<code class="codeph">COMPATIBLE.ADVM</code>磁盘组属性设置为<code class="codeph">12.2.0.0.0</code> 。现在您已准备好转换到基于快照的复制。可以使用以下选项之一进行转换：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>终止现有复制并初始化以使用基于快照的复制。如果要复制的数据量很小（小于几百千兆字节），建议使用此选项。如果您的主文件系统不能轻易限制为仅安装在一个节点上，或者主服务器上的活动无法轻松停顿，则此选项也可能更为可取。</p>
                     </li>
                     <li>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code>命令以升级现有复制环境，而不终止和初始化复制。通过启用基于快照的复制从现有复制已停止的位置继续，此选项可避免将主文件系统的全部内容传输到备用数据库的需要。当复制大量数据时，此选项很有用。由于升级过程传输的数据非常少，因此您可以期望该过程快速完成。
                        </p>
                     </li>
                  </ul>
                  <p>以下列表提供了有关运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code>命令选项以升级到基于快照的复制的详细信息。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在开始复制升级过程之前，必须确保主文件系统仅安装在主群集的一个节点上。另外，强烈建议您停顿所有应用程序更新到主文件系统，然后运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">sync</code> <code class="codeph">apply</code>一个最终的时间，以确保在主所有的改变都被复制。
                        </p>
                     </li>
                     <li>
                        <p>升级过程的第一步是在主群集上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">prepare</code>命令。此命令指定将用于基于快照的复制的用户和主机或接口名称，以及主装入点。用户名和主机名使用<code class="codeph">-s</code>选项给出，与用于基于快照的复制的<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令完全相同。
                        </p>
                     </li>
                     <li>
                        <p>此过程的下一步是通过运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">standby</code>命令来升级备用群集上的复制。此命令指定用于基于快照的复制的用户以及备用安装点。用户名使用<code class="codeph">-u</code>选项给出，与用于基于快照的复制的<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code>命令完全相同。
                        </p>
                     </li>
                     <li>
                        <p>此过程的最后一步是在主群集上运行a <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">primary</code>命令。这是自动终止先前复制部署并启动基于快照的复制的命令。此命令接受<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令为基于快照的复制接受的任何命令行选项，但<code class="codeph">-m</code>和<code class="codeph">-s</code>选项除外，因为该信息是从现在终止的先前复制环境获取的。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">primary</code>命令完成后，基于快照的复制应在受影响的主群集和备用群集之间处于活动状态，就像在12.2版本中使用基于快照的复制运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code>命令一样。您可以在主群集和备用群集上使用命令<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>来确认每个群集上的复制状态。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-990E0BAF-AD12-4DB2-9423-AE8DE4A121D7__GUID-0F4AD5A2-37E2-4827-B35B-0BE4D2AB4AE5">
                     <p class="notep1">注意：</p>
                     <p>如果在运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">standby</code>或<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">upgrade</code> <code class="codeph">primary</code>时发生错误，请考虑以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>根据错误，复制可能看起来未初始化（ <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code>可能指示该情况），直到升级命令成功完成。
                           </p>
                        </li>
                        <li>
                           <p>要继续升级，您应该更正失败的升级命令指示的任何错误，然后只需重新发出失败的命令。该命令可以多次重发。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
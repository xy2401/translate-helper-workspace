<html id="06058.config-teradata-gateway.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>为Teradata配置Oracle数据库网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), Oracle Solaris on x86-64 (64-Bit), and HP-UX Itanium"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-installation-and-configuration-guide-aix-5l-based-systems-64-bit-hp-ux-itanium-solaris-operating-system-sparc-64-bit-linux-x86-and-linux-x86-64.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:11:50-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="install-teradata-gateway.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-sqlserver-gateway.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64"></meta>
    <meta name="dcterms.isVersionOf" content="OTGIS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="install-teradata-gateway.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-sqlserver-gateway.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-teradata-gateway.html" property="item" typeof="WebPage"><span property="name">为Teradata安装和配置Oracle Database Gateway</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">为Teradata配置Oracle数据库网关</li>
            </ol>
            <a id="GUID-2C527C91-A7AB-46C1-9AE9-F6B0F8F4CF3B" name="GUID-2C527C91-A7AB-46C1-9AE9-F6B0F8F4CF3B"></a><a id="OTGIS700"></a>
            
            <h2 id="OTGIS-GUID-2C527C91-A7AB-46C1-9AE9-F6B0F8F4CF3B" class="sect2"><span class="enumeration_chapter">7</span>为Teradata配置Oracle数据库网关</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装网关后，执行以下任务以配置Teradata的Oracle数据库网关：</p>
               <ol>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-FC22971F-6EA5-4C2D-A82D-F23F88B4B271">配置网关初始化参数文件</a></p>
                  </li>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-77B087E9-81A8-499B-9BCA-FEE75046D55F">为网关配置Oracle Net</a></p>
                  </li>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-8AA98DC9-7161-4B69-B742-5EBC2897071A">配置Oracle数据库以进行网关访问</a></p>
                  </li>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-498CD897-F7F6-4D81-993B-BDDAAF87CC87">创建数据库链接</a></p>
                  </li>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-53CFD0AD-17F5-41D2-A35F-83A3804D8A07">配置两阶段提交</a></p>
                  </li>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-93EE34C4-32D8-471D-BEB8-9B70C5DFD392">加密网关初始化参数值</a></p>
                  </li>
                  <li>
                     <p><a href="config-teradata-gateway.html#GUID-77F3E772-3AF7-43DB-9666-BC251832F58B">配置网关以访问多个Teradata数据库</a></p>
                  </li>
               </ol>
            </div><a id="OTGIS986"></a><div class="props_rev_3"><a id="GUID-FC22971F-6EA5-4C2D-A82D-F23F88B4B271" name="GUID-FC22971F-6EA5-4C2D-A82D-F23F88B4B271"></a><h3 id="OTGIS-GUID-FC22971F-6EA5-4C2D-A82D-F23F88B4B271" class="sect3">配置网关初始化参数文件</h3>
               <div>
                  <div class="section">
                     <p>执行以下任务以配置网关初始化参数文件：<a id="d18800e103" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-teradata-gateway.html#GUID-1665C038-40F1-4372-A86B-1D7052BF87C9">选择网关的系统标识符</a></span></li>
                     <li><span><a href="config-teradata-gateway.html#GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8">自定义初始化参数文件</a></span></li>
                  </ol>
               </div><a id="OTGIS987"></a><div class="props_rev_3"><a id="GUID-1665C038-40F1-4372-A86B-1D7052BF87C9" name="GUID-1665C038-40F1-4372-A86B-1D7052BF87C9"></a><h4 id="OTGIS-GUID-1665C038-40F1-4372-A86B-1D7052BF87C9" class="sect4">选择网关的系统标识符</h4>
                  <div>
                     <p>该<a id="d18800e156" class="indexterm-anchor"></a>网关系统标识符<a id="d18800e161" class="indexterm-anchor"></a> （SID）是标识网关实例的字母数字字符串。对于要访问的每个Teradata数据库，您需要一个网关实例，因此需要一个网关SID。SID用作初始化参数文件的文件名的一部分。默认SID是<span class="bold"></span> <code class="codeph">dg4tera</code> 。
                     </p>
                     <p>您可以定义网关SID，但使用默认的<code class="codeph">dg4tera</code>更容易，因为您不需要更改初始化参数文件名。但是，如果要访问两个Teradata数据库，则需要两个网关SID，一个用于网关的每个实例。如果您只有一个Teradata数据库并且希望有时使用一组网关参数设置来访问它，而其他时候使用不同的网关参数设置，那么您将需要多个网关SID用于单个Teradata数据库。
                     </p>
                  </div>
               </div><a id="OTGIS988"></a><div class="props_rev_3"><a id="GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8" name="GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8"></a><h4 id="OTGIS-GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8" class="sect4">自定义初始化参数文件</h4>
                  <div>
                     <div class="section">
                        <p><a id="d18800e207" class="indexterm-anchor"></a>启动网关时，初始化参数文件必须可用。在安装过程中，将创建以下默认初始化参数文件：</p><pre class="oac_no_warn" dir="ltr"><a id="d18800e213" class="indexterm-anchor"></a> $ ORACLE_HOME / dg4tera /管理/ initdg4tera.ora</pre><p>其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。
                        </p>
                        <p>此初始化文件用于默认网关SID。如果不使用<code class="codeph">dg4tera</code>作为网关SID，则必须使用在上一步中<a href="config-teradata-gateway.html#GUID-1665C038-40F1-4372-A86B-1D7052BF87C9">选择</a>的SID重命名初始化参数文件。选择<a href="config-teradata-gateway.html#GUID-1665C038-40F1-4372-A86B-1D7052BF87C9">网关的系统标识符</a> 。此默认初始化参数文件足以启动网关，验证安装是否成功以及运行演示脚本。
                        </p>
                        <p>可以使用许多初始化参数来修改网关行为。有关可以设置的初始化参数的完整列表，请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a> 。对初始化参数所做的更改仅在下一个网关会话中生效。最重要的参数是<code class="codeph">HS_FDS_CONNECT_INFO</code> ，它描述了与非Oracle系统的连接。
                        </p>
                        <p>默认初始化参数文件已有此参数的条目。<code class="codeph">HS_FDS_CONNECT_INFO</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = <span class="italic">host_alias</span> ： <span class="italic">port_number</span> [/ <span class="italic">database_name</span> ]</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8__GUID-8F6F6A76-2238-4CE8-9C0A-4B31D176D1EC">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d18800e265">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d18800e268">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e273" headers="d18800e265 ">
                                       <p><span class="italic"><code class="codeph">host_alias</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e273 d18800e268 ">
                                       <p>是托管Teradata数据库的计算机的主机别名或IP地址。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e282" headers="d18800e265 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e282 d18800e268 ">
                                       <p>是Teradata数据库服务器的端口号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e291" headers="d18800e265 ">
                                       <p><span class="italic"><code class="codeph">数据库名称</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e291 d18800e268 ">
                                       <p>是Teradata数据库名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>此版本的网关可以支持IPv6。如果要指定IPv6地址格式，则必须用方括号括起来指示与端口号的分隔。例如，</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = [2001：将0db8：20C：F1FF：FEC6：38AF]：1300 / MY_DB</pre><div class="infoboxnotealso" id="GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8__GUID-EF18131D-B4C5-46BF-9DC8-7AA826164182">
                           <p class="notep1">也可以看看：</p>
                           <p>有关自定义初始化参数文件的详细信息，请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4089" target="_blank"><span class="italic">Oracle数据库异构连接管理员指南</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS989"></a><div class="props_rev_3"><a id="GUID-77B087E9-81A8-499B-9BCA-FEE75046D55F" name="GUID-77B087E9-81A8-499B-9BCA-FEE75046D55F"></a><h3 id="OTGIS-GUID-77B087E9-81A8-499B-9BCA-FEE75046D55F" class="sect3">为网关配置Oracle Net</h3>
               <div>
                  <div class="section">
                     <p>网关要求Oracle Net与Oracle数据库通信。配置网关后，执行以下任务以配置Oracle Net以使用网关：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-teradata-gateway.html#GUID-0085C036-64AE-4E3D-9324-1E5D256D76F4">为网关配置Oracle Net Listener</a></span></li>
                     <li><span><a href="config-teradata-gateway.html#GUID-A3FBD96B-F775-4337-AF7D-0B8BBE3707A3">停止并启动Gateway的Oracle Net Listener</a></span></li>
                  </ol>
               </div><a id="OTGIS990"></a><div class="props_rev_3"><a id="GUID-0085C036-64AE-4E3D-9324-1E5D256D76F4" name="GUID-0085C036-64AE-4E3D-9324-1E5D256D76F4"></a><h4 id="OTGIS-GUID-0085C036-64AE-4E3D-9324-1E5D256D76F4" class="sect4">为网关配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Net Listener侦听来自Oracle数据库的传入请求。要使Oracle Net Listener监听网关，必须将有关网关的信息添加到Oracle Net Listener配置文件<code class="codeph">listener.ora</code> 。默认情况下，此文件位于<code class="codeph">$ORACLE_HOME/network/admin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。
                        </p>
                        <p>必须将以下条目添加到<code class="codeph">listener.ora</code>文件中：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle Net Listener侦听的Oracle Net地址列表。</p>
                           </li>
                           <li>
                              <p>Oracle Net Listener响应传入连接请求而启动的网关的可执行文件名。</p>
                           </li>
                        </ul>
                        <p><code class="codeph">$ORACLE_HOME/dg4tera/admin</code>目录中提供了<code class="codeph">listener.ora</code>条目（ <code class="codeph">listener.ora.sample</code> ）的示例，其中<code class="codeph">$</code> <code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="OTGIS991"></a><div class="props_rev_3"><a id="GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D" name="GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D"></a><h5 id="OTGIS-GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D" class="sect5">listener.ora文件条目的语法</h5>
                     <div>
                        <p>Oracle数据库使用Oracle Net和任何支持的协议适配器与网关通信。以下是Oracle Net Listener使用TCP / IP协议适配器侦听的地址的语法：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D__GUID-96AB0104-2D7D-4A05-81ED-DA4552ED1257">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d18800e493">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d18800e496">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e501" headers="d18800e493 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e501 d18800e496 ">
                                       <p>是安装网关的计算机的名称。此版本支持IPv6格式。有关详细信息，请参阅<a href="../netrf/index.html" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e515" headers="d18800e493 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e515 d18800e496 ">
                                       <p>指定Oracle Net Listener使用的端口号。如果在同一台机器上运行其他侦听器，则<span class="italic">port_number</span>的值必须与其他侦听器的端口号不同。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>要指示Oracle Net Listener启动网关以响应传入的连接请求，请在<code class="codeph">listener.ora</code>文件中添加一个条目。
                        </p>
                        <div class="infoboxnote" id="GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D__GUID-E926CA59-D1A6-4F68-A6B2-D6B50336055A">
                           <p class="notep1">注意：</p>
                           <p>您必须在<code class="codeph">listener.ora</code>文件和将在下一步中配置的<code class="codeph">tnsnames.ora</code>文件中使用相同的SID值。
                           </p>
                        </div>
                        <p>对于Linux x86 64bit：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4tera）（ENVS = LD_PRELOAD = <span class="italic">kerberos_system_libs</span> ，LD_LIBRARY_PATH = <span class="italic">teradata_client_library_directory</span> ： <span class="italic">oracle_home_directory / lib：/ usr / lib</span> ）））</pre><p>对于Solaris SPARC：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = gateway_sid）（ORACLE_HOME = oracle_home_directory）（PROGRAM = dg4tera）（ENVS = LD_LIBRARY_PATH = teradata_client_library_directory：oracle_home_directory / lib：/ usr / lib）））</pre><p>对于AIX：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid）（ORACLE_HOME</span> = <span class="italic">oracle_home_directory）（PROGRAM</span> = dg4tera）（ENVS = LIBPATH = <span class="italic"><span class="italic">teradata_client_library_directory：oracle_home_directory</span></span> / lib中：/ usr / lib中/ lib_64）））</pre><p>对于HP-UX Itanium：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4tera）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / dg4tera / driver / lib： <span class="italic">oracle_home_directory</span> / lib： <span class="italic">teradata_client_library_directory</span> ：/ usr / lib / hpux64）） ）</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D__GUID-AC148E96-37A6-409F-AE88-DEF8293C31C8">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d18800e609">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d18800e612">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e617" headers="d18800e609 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e617 d18800e612 ">
                                       <p>指定网关的SID。匹配<code class="codeph">tnsnames.ora</code>文件中连接描述符条目中指定的网关SID。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e629" headers="d18800e609 ">
                                       <p><span class="italic"><code class="codeph">oracle_home_directory</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e629 d18800e612 ">
                                       <p>指定网关所在的Oracle主目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e638" headers="d18800e609 ">
                                       <p><span class="italic"><code class="codeph">teradata_client_library_directory</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e638 d18800e612 ">
                                       <p>指定Teradata客户端目录所在的目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e647" headers="d18800e609 ">
                                       <p><code class="codeph">dg4tera</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e647 d18800e612 ">
                                       <p>指定Teradata的Oracle数据库网关的可执行文件名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e655" headers="d18800e609 ">
                                       <p><code class="codeph"><span class="codeinlineitalic">kerberos_system_libs</span></code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e655 d18800e612 ">
                                       <p>系统的路径提供了Kerberos实现。例如： <code class="codeph">libgssapi_krb5.so.XY</code> ， <code class="codeph">libkrb5.so.X</code> ， <code class="codeph">libk5crypto.so.X</code> ， <code class="codeph">libkrb5support.so.X</code>等</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果您已有现有的Oracle Net Listener，请将以下语法添加到现有<code class="codeph">listener.ora</code>文件中的<code class="codeph">SID_LIST</code> 。请注意，下面提供的语法适用于HP-UX Itanium。有关其他平台，请参阅上一节。
                        </p>
                        <p>对于HP-UX Itanium：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =。。）（SID_DESC =。。）（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / dg4sybs / driver / lib： <span class="italic">oracle_home_directory</span> / lib）（PROGRAM = dg4sybs）））</pre><div class="infoboxnotealso" id="GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D__GUID-6EEF0018-0076-4B41-A4DB-CD9CDA2FD2E6">
                           <p class="notep1">也可以看看：</p>
                           <p>有关更改<code class="codeph">listener.ora</code>文件的信息，请参阅<a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG294" target="_blank"><span class="italic">“Oracle Net Services管理员指南”</span></a> 。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OTGIS1212"></a><a id="OTGIS992"></a><div class="props_rev_3"><a id="GUID-A3FBD96B-F775-4337-AF7D-0B8BBE3707A3" name="GUID-A3FBD96B-F775-4337-AF7D-0B8BBE3707A3"></a><h4 id="OTGIS-GUID-A3FBD96B-F775-4337-AF7D-0B8BBE3707A3" class="sect4">停止并启动Gateway的Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>您必须停止并重新启动Oracle Net Listener才能启动新设置，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将<code class="codeph">PATH</code>环境变量设置为<code class="codeph">$ORACLE_HOME/bin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。</span><div>
                              <p>例如，在Linux平台上，如果您有Bourne或Korn Shell，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">$ PATH = $ ORACLE_HOME / bin：$ PATH; export PATH $ LD_LIBRARY_PATH = $ ORACLE_HOME / lib：$ LD_LIBRARY_PATH; export LD_LIBRARY_PATH</pre><p>如果您有C Shell，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">$ setenv PATH $ ORACLE_HOME / bin：$ PATH $ setenv LD_LIBRARY_PATH $ ORACLE_HOME / lib：$ LD_LIBRARY_PATH</pre><p><a href="config-teradata-gateway.html#GUID-A3FBD96B-F775-4337-AF7D-0B8BBE3707A3__BGBCBBDI" title="摘要">表7-1</a>指定了用于不同平台的参数值：</p>
                              <div class="tblformal" id="GUID-A3FBD96B-F775-4337-AF7D-0B8BBE3707A3__BGBCBBDI">
                                 <p class="titleintable">表7-1基于UNIX的平台的Teradata参数值的Oracle数据库网关</p>
                                 <table cellpadding="4" cellspacing="0" class="Formal" title="基于UNIX平台的Teradata参数值的Oracle Database Gateway" width="90%" border="1" summary="summary" frame="hsides" rules="rows">
                                    <thead>
                                       <tr align="left" valign="top">
                                          <th align="left" valign="bottom" width="39%" id="d18800e783">平台</th>
                                          <th align="left" valign="bottom" width="61%" id="d18800e786">参数值</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d18800e791" headers="d18800e783 ">
                                             <p>Oracle Solaris（SPARC）64位</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d18800e791 d18800e786 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH_64 = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d18800e799" headers="d18800e783 ">
                                             <p>HP-UX Itanium</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d18800e799 d18800e786 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d18800e807" headers="d18800e783 ">
                                             <p>Linux x86 64位</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d18800e807 d18800e786 ">
                                             <p><code class="codeph">LD_LIBRARY_PATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                       <tr align="left" valign="top">
                                          <td align="left" valign="top" width="39%" id="d18800e815" headers="d18800e783 ">
                                             <p>POWER Systems上的IBM AIX（64位）</p>
                                          </td>
                                          <td align="left" valign="top" width="61%" headers="d18800e815 d18800e786 ">
                                             <p><code class="codeph">LIBPATH = $ ORACLE_HOME / lib目录</code></p>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <!-- class="inftblhruleinformal" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果侦听器已在运行，请使用<code class="codeph">lsnrctl</code>命令停止侦听器，然后使用新设置启动它，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ lsnrctl停止$ lsnrctl start</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用新设置检查侦听器的状态，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ lsnrctl状态</pre><p>以下是<code class="codeph">lsnrctl</code>状态检查的部分输出：</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">。。。服务摘要......服务“dg4tera”有1个实例。实例“dg4tera”，状态为UNKNOWN，有1个处理程序用于此服务...命令成功完成</pre><p>在此示例中，服务名称为<code class="codeph">dg4tera</code> ，这是安装期间分配的默认SID值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS993"></a><div class="props_rev_3"><a id="GUID-8AA98DC9-7161-4B69-B742-5EBC2897071A" name="GUID-8AA98DC9-7161-4B69-B742-5EBC2897071A"></a><h3 id="OTGIS-GUID-8AA98DC9-7161-4B69-B742-5EBC2897071A" class="sect3">配置Oracle数据库以进行网关访问</h3>
               <div>
                  <div class="section">
                     <p>在使用网关访问Teradata数据之前，必须配置Oracle数据库以启用与Oracle Net上的网关通信。</p>
                     <p>要配置Oracle数据库，必须将连接描述符添加到<code class="codeph">tnsnames.ora</code>文件中。默认情况下，此文件位于<code class="codeph">$ORACLE_HOME/network/admin</code> ，其中<code class="codeph">$ORACLE_HOME</code>是安装Oracle数据库的目录。您无法使用Oracle Net Assistant或Oracle Net Easy Config工具来配置<code class="codeph">tnsnames.ora</code>文件。您必须手动编辑该文件。
                     </p>
                     <p><code class="codeph">$ORACLE_HOME/dg4tera/admin</code>目录中提供了<code class="codeph">tnsnames.ora</code>条目（ <code class="codeph">tnsnames.ora.sample</code> ）的示例，其中<code class="codeph">$</code> <code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIS994"></a><div class="props_rev_3"><a id="GUID-2E378355-91F4-4109-9E2E-691F93F8625C" name="GUID-2E378355-91F4-4109-9E2E-691F93F8625C"></a><h4 id="OTGIS-GUID-2E378355-91F4-4109-9E2E-691F93F8625C" class="sect4">配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>编辑<code class="codeph">tnsnames.ora</code>文件以添加网关的连接描述符。以下是使用TCP / IP协议的Oracle Net条目的语法：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-2E378355-91F4-4109-9E2E-691F93F8625C__GUID-9FC7E96C-0320-4FEF-B74E-5A3393A552EE">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d18800e977">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d18800e980">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e985" headers="d18800e977 ">
                                       <p><span class="italic"><code class="codeph">connect_descriptor</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e985 d18800e980 ">
                                       <p>是创建数据库链接时指定的连接对象的描述，例如<code class="codeph">dg4tera</code> 。
                                       </p>
                                       <p>检查<code class="codeph">sqlnet.ora</code>文件以获取以下参数设置：</p><pre class="oac_no_warn" dir="ltr">names.directory_path =（TNSNAMES）</pre><p><span class="bold">注意：</span> <code class="codeph">sqlnet.ora</code>文件通常存储在<code class="codeph">$ORACLE_HOME/network/admin</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e1014" headers="d18800e977 ">
                                       <p><code class="codeph">TCP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e1014 d18800e980 ">
                                       <p>是用于TCP / IP连接的TCP协议。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e1022" headers="d18800e977 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e1022 d18800e980 ">
                                       <p>指定运行网关的计算机。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e1031" headers="d18800e977 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e1031 d18800e980 ">
                                       <p>匹配正在侦听网关的Oracle Net Listener使用的端口号。Oracle Net Listener的端口号可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。请参阅<a href="config-teradata-gateway.html#GUID-59A148C5-E89C-4A7A-880E-E92ED4A04A1D">listener.ora文件条目的语法</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e1047" headers="d18800e977 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e1047 d18800e980 ">
                                       <p>指定网关的SID，并匹配正在侦听网关的Oracle Net Listener的<code class="codeph">listener.ora</code>文件中指定的SID。有关更多信息，请参阅<a href="config-teradata-gateway.html#GUID-0085C036-64AE-4E3D-9324-1E5D256D76F4">为网关配置Oracle Net Listener</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d18800e1063" headers="d18800e977 ">
                                       <p><code class="codeph">（HS = OK）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d18800e1063 d18800e980 ">
                                       <p>指定此连接描述符连接到非Oracle系统。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-2E378355-91F4-4109-9E2E-691F93F8625C__GUID-20E01AF5-20A3-412C-B6E7-D954BF079B85">
                           <p class="notep1">也可以看看：</p>
                           <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="../netag/configuring-naming-methods.html#NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1279"></a><div class="props_rev_3"><a id="GUID-57309533-4623-4F60-94F8-07B19D03467A" name="GUID-57309533-4623-4F60-94F8-07B19D03467A"></a><h4 id="OTGIS-GUID-57309533-4623-4F60-94F8-07B19D03467A" class="sect4">为多个侦听器配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>要确保更高的可用性，您可以指定多个<a id="d18800e1128" class="indexterm-anchor"></a> connect de scriptor中的监听器。
                        </p><pre class="oac_no_warn" dir="ltr"> <a id="d18800e1136" class="indexterm-anchor"></a> <span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_1</span> ）（PORT = <span class="italic">port_number_1</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_2</span> ）（PORT = <span class="italic">port_number_2</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>这表明，如果<span class="italic"><code class="codeph">host_name_1</code></span>和<span class="italic"><code class="codeph">port_number_1</code></span>的侦听器不可用，则<span class="italic"><code class="codeph">host_name_2</code></span>和<span class="italic"><code class="codeph">port_number_2</code></span>的第二个侦听器将接管。
                        </p>
                        <div class="infoboxnotealso" id="GUID-57309533-4623-4F60-94F8-07B19D03467A__GUID-D91CF4E9-70F4-4235-B872-78B722F770C9">
                           <p class="notep1">也可以看看：</p>
                           <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS995"></a><div class="props_rev_3"><a id="GUID-498CD897-F7F6-4D81-993B-BDDAAF87CC87" name="GUID-498CD897-F7F6-4D81-993B-BDDAAF87CC87"></a><h3 id="OTGIS-GUID-498CD897-F7F6-4D81-993B-BDDAAF87CC87" class="sect3">创建数据库链接</h3>
               <div>
                  <div class="section">
                     <p>连接到Oracle数据库的任何Oracle客户端都可以通过网关访问Teradata数据。Oracle客户端和Oracle数据库可以驻留在不同的计算机上。网关仅接受来自Oracle数据库的连接。</p>
                     <p>首次在Oracle会话中使用时，通过数据库链接建立与网关的连接。在此上下文中，连接是指Oracle数据库与网关之间的连接。在Oracle会话结束之前，连接将保持建立状态。另一个会话或用户可以访问相同的数据库链接，并获得与网关和Teradata数据库的不同连接。</p>
                     <p>数据库链接在网关会话期间处于活动状态。如果要在会话期间关闭数据库链接，可以使用<code class="codeph">ALTER SESSION</code>语句执行此操作。
                     </p>
                     <p>要访问Teradata服务器，您必须创建数据库链接。公共数据库链接是最常见的数据库链接。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> CONNECT TO 2“ <span class="italic">user”</span> IDENTIFIED BY <span class="italic">“password”</span> <span class="italic">USING'tns_name_entry</span> ';</pre><p>哪里：</p>
                     <div class="tblformal" id="GUID-498CD897-F7F6-4D81-993B-BDDAAF87CC87__GUID-DAE172EE-BC51-415E-8820-D5262C85DA0C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d18800e1260">变量</th>
                                 <th align="left" valign="bottom" width="75%" id="d18800e1263">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d18800e1268" headers="d18800e1260 ">
                                    <p><span class="italic"><code class="codeph">DBLINK</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d18800e1268 d18800e1263 ">
                                    <p>是完整的数据库链接名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d18800e1277" headers="d18800e1260 ">
                                    <p><span class="italic"><code class="codeph">tns_name_entry</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d18800e1277 d18800e1263 ">
                                    <p>指定<code class="codeph">tnsnames.ora</code>文件中指定的标识网关的Oracle Net连接描述符</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>创建数据库链接后，您可以验证与Teradata数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM DUAL @dblink;</pre><div class="infoboxnotealso" id="GUID-498CD897-F7F6-4D81-993B-BDDAAF87CC87__GUID-6CFAABED-C8BB-482D-A13F-CA22B0F9D63A">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用数据库链接的详细信息，请<a href="../admin/distributed-database-concepts.html#ADMIN12083" target="_blank"><span><cite>参见Oracle数据库管理员指南</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIS996"></a><div class="props_rev_3"><a id="GUID-53CFD0AD-17F5-41D2-A35F-83A3804D8A07" name="GUID-53CFD0AD-17F5-41D2-A35F-83A3804D8A07"></a><h3 id="OTGIS-GUID-53CFD0AD-17F5-41D2-A35F-83A3804D8A07" class="sect3">配置两阶段提交</h3>
               <div>
                  <div class="section">
                     <p><a id="d18800e1334" class="indexterm-anchor"></a>网关支持以下事务功能：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">COMMIT_CONFIRM</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">只读</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SINGLE_SITE</code></p>
                        </li>
                     </ul>
                     <p><a id="d18800e1354" class="indexterm-anchor"></a><a id="d18800e1358" class="indexterm-anchor"></a>使用<code class="codeph">HS_TRANSACTION_MODEL</code>初始化参数设置事务模型。默认情况下，网关以<code class="codeph">COMMIT_CONFIRM</code>事务模式运行。当事务更新Teradata数据库时，网关将成为提交点站点。在验证事务中的所有Oracle数据库是否已成功准备事务之后，Oracle数据库将在Teradata数据库中提交工作单元。只有一个网关实例可以作为提交点站点参与Oracle两阶段提交事务。
                     </p>
                     <div class="infoboxnotealso" id="GUID-53CFD0AD-17F5-41D2-A35F-83A3804D8A07__GUID-4FF829FF-DC53-4E26-85C1-F32FC95048BC">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4068" target="_blank"><span class="italic">“Oracle数据库异构连接用户指南”</span></a> ，了解有关两阶段提交过程的信息。
                        </p>
                     </div>
                     <p>要启用<code class="codeph">COMMIT_CONFIRM</code>事务模式，请执行以下任务：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-teradata-gateway.html#GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF">创建恢复帐户和密码</a></span></li>
                     <li><span><a href="config-teradata-gateway.html#GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE">创建事务日志表</a></span></li>
                  </ol>
                  <div class="section">
                     <p>名为<code class="codeph">HS_TRANSACTION_LOG</code>的日志表是记录两阶段提交事务的地方。或者，用户可以通过设置网关初始化参数<code class="codeph">HS_FDS_TRANSACTION_LOG</code>参数来指定不同的表名。此表需要与恢复帐户位于同一模式中。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIS997"></a><div class="props_rev_3"><a id="GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF" name="GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF"></a><h4 id="OTGIS-GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF" class="sect4">创建恢复帐户和密码</h4>
                  <div>
                     <div class="section">
                        <p>对于网关来恢复分布式事务，a <a id="d18800e1436" class="indexterm-anchor"></a>必须在Teradata数据库中设置恢复帐户和密码。默认情况下，两者都有<a id="d18800e1441" class="indexterm-anchor"></a>帐户的用户名和密码是<code class="codeph">RECOVER</code> 。可以使用网关初始化参数<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>更改帐户的名称。可以使用网关初始化参数<code class="codeph">HS_FDS_RECOVERY_PWD</code>更改帐户密码。</p>
                        <div class="infoboxnote" id="GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF__GUID-1BCEA7F3-3773-4D9C-AB82-369BAB15E843">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议您不要使用默认值<code class="codeph">RECOVER</code>作为用户名和密码。此外，将纯文本作为用户名和密码存储在初始化文件中并不是一个好的安全策略。现在有一个名为<code class="codeph">dg4pwd</code>的实用程序应该用于加密。有关更多详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">，</a>请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">“</a> <span class="italic">Oracle数据库异构连接用户指南</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">”</a>中的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4010" target="_blank">第4.2.3节“加密初始化参数”</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在Teradata数据库中设置用户帐户。用户名和密码都必须是有效的Teradata用户名和密码。</span></li>
                        <li class="stepexpand"><span>在初始化参数文件中，设置以下网关初始化参数：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>为您设置用于恢复的Teradata用户帐户的用户名。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">HS_FDS_RECOVERY_PWD</code>为您设置用于恢复的Teradata用户帐户的密码。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF__GUID-F82233B4-8914-4FBE-AE35-B25294405B68">
                                       <p class="notep1">也可以看看：</p>
                                       <p>有关编辑<a href="config-teradata-gateway.html#GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8">初始化参数文件</a>的信息，请<a href="config-teradata-gateway.html#GUID-E53D69AD-0114-4D15-9894-02A8EFC124C8">自定义</a>初始化参数文件。有关<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>和<code class="codeph">HS_FDS_RECOVERY_PWD</code> ，请参阅<a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化参数</a> 。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="OTGIS998"></a><div class="props_rev_3"><a id="GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE" name="GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE"></a><h4 id="OTGIS-GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE" class="sect4">创建事务日志表</h4>
                  <div>
                     <div class="section">
                        <p>配置网关进行两阶段提交时，a <a id="d18800e1553" class="indexterm-anchor"></a>必须在Teradata数据库中创建表以记录事务。网关使用事务日志表来检查网关在Teradata数据库中启动并在表中注册的失败事务的状态。
                        </p>
                        <div class="infoboxnote" id="GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE__GUID-5B4D8D71-3F1B-4BC4-B669-9FD5E9A8BD37">
                           <p class="notep1">注意：</p>
                           <p>事务日志表的更新不能是Oracle分布式事务的一部分。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE__GUID-192FE926-2AD5-40FF-950D-27F104186BAE">
                           <p class="notep1">注意：</p>
                           <p>事务日志表中的信息是恢复过程所必需的<span class="italic"> </span>不得改变。桌子<span class="italic"> </span>必须仅由网关使用，访问或更新。
                           </p>
                        </div>
                        <p>该表名为<code class="codeph">HS_TRANSACTION_LOG</code> <span class="bold">，</span>由两列组成， <code class="codeph">GLOBAL_TRAN_ID</code> ，数据类型<code class="codeph">CHAR(64)</code>和<code class="codeph">TRAN_COMMENT</code> ，数据类型<code class="codeph">CHAR(255)</code> 。
                        </p>
                        <p>通过使用<code class="codeph">HS_FDS_TRANSACTION_LOG</code>初始化参数指定其他名称<span class="bold">，</span>可以使用除<code class="codeph">HS_TRANSACTION_LOG</code>之外的日志表的其他名称。
                        </p>
                        <div class="infoboxnotealso" id="GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE__GUID-96FD3DEA-85B8-48DA-9FA9-BEDC01671BA1">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="initialization-parameters-for-gateways.html#GUID-82BEBA7B-5B1A-46F6-9ADC-7375C17A9E1F">初始化</a>有关<code class="codeph">HS_FDS_TRANSACTION_LOG</code>初始化参数的信息的参数。
                           </p>
                        </div>
                        <p>在<a href="config-teradata-gateway.html#GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF">创建恢复帐户和密码</a>中<a href="config-teradata-gateway.html#GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF">创建</a>的用户帐户中<a href="config-teradata-gateway.html#GUID-44B352BC-7B24-4179-922F-A2AEA55CABAF">创建</a>事务日志表。由于事务日志表用于记录网关事务的状态，因此该表必须驻留在发生Teradata更新的数据库中。此外，必须在恢复帐户的所有者下创建事务日志表。
                        </p>
                        <div class="infoboxnote" id="GUID-3A563D6E-6C8B-4098-9737-86EC6CC027CE__GUID-D88E6F78-B2E3-425B-A5A0-E7C306B375F0">
                           <p class="notep1">注意：</p>
                           <p>要使用事务日志表，必须为该网关的用户授予对该表的特权。</p>
                        </div>
                        <p>要创建事务日志表，请使用位于<code class="codeph">$ORACLE_HOME/dg4tera/admin</code>目录中的<code class="codeph">dg4tera_tx.sql</code>脚本，其中<code class="codeph">$ORACLE_HOME</code>是安装网关的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIS999"></a><div class="props_rev_3"><a id="GUID-93EE34C4-32D8-471D-BEB8-9B70C5DFD392" name="GUID-93EE34C4-32D8-471D-BEB8-9B70C5DFD392"></a><h3 id="OTGIS-GUID-93EE34C4-32D8-471D-BEB8-9B70C5DFD392" class="sect3">加密网关初始化参数值</h3>
               <div>
                  <p>网关使用用户标识和密码来访问远程数据库中的信息。必须在网关初始化文件中定义一些用户标识和密码，以处理资源恢复等功能。在当前具有安全意识的环境中，具有可在初始化文件中访问的纯文本密码被认为是不安全的。<code class="codeph">dg4pwd</code>加密实用程序已添加为异构服务的一部分，以帮助提高安全性。此网关可以访问此实用程序。包含敏感值的初始化参数可以以加密形式存储。
                  </p>
                  <div class="infoboxnotealso" id="GUID-93EE34C4-32D8-471D-BEB8-9B70C5DFD392__GUID-2E27CE53-E65C-4662-A9CB-E4AC5C0DDDAE">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用此实用程序的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgis&amp;id=HETER4068" target="_blank"><span class="italic">参见“Oracle数据库异构连接管理员指南”</span></a> 。
                     </p>
                  </div>
               </div>
            </div><a id="OTGIS1000"></a><div class="props_rev_3"><a id="GUID-77F3E772-3AF7-43DB-9666-BC251832F58B" name="GUID-77F3E772-3AF7-43DB-9666-BC251832F58B"></a><h3 id="OTGIS-GUID-77F3E772-3AF7-43DB-9666-BC251832F58B" class="sect3">配置网关以访问多个Teradata数据库</h3>
               <div>
                  <p>配置网关以访问多个Teradata数据库的任务类似于为单个数据库配置网关的任务。配置示例假定以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>网关安装并配置为默认SID为<code class="codeph">dg4tera</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ORACLE_HOME</code>环境变量设置为安装网关的目录。
                        </p>
                     </li>
                     <li>
                        <p>网关配置为一个名为<code class="codeph">db1</code> Teradata数据库。
                        </p>
                     </li>
                     <li>
                        <p>正在添加两个名为<code class="codeph">db2</code>和<code class="codeph">db3</code> Teradata数据库，这些数据库位于IP地址为204.179.79.15的主机上。
                        </p>
                     </li>
                  </ul>
               </div><a id="OTGIS1213"></a><a id="OTGIS1214"></a><a id="OTGIS1001"></a><div class="props_rev_3"><a id="GUID-98886429-2D6C-4A30-B8A2-E5072E88EBBA" name="GUID-98886429-2D6C-4A30-B8A2-E5072E88EBBA"></a><h4 id="OTGIS-GUID-98886429-2D6C-4A30-B8A2-E5072E88EBBA" class="sect4">多个Teradata数据库示例：配置网关</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-98886429-2D6C-4A30-B8A2-E5072E88EBBA__GUID-3CB66687-F2E7-4C1E-B7F6-8181C42C0E7C">为每个Teradata数据库选择一个系统ID</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>每个Teradata数据库都需要一个单独的网关实例。每个实例都需要自己的网关系统ID（SID）。对于此示例，为访问Teradata数据库的实例选择网关SID：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">dg4tera2</code> <span class="bold"> </span>用于访问数据库<code class="codeph">db2</code>的网关。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">dg4tera3</code>用于访问数据库<code class="codeph">db3</code>的网关。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98886429-2D6C-4A30-B8A2-E5072E88EBBA__GUID-95BD7E18-884D-480B-9580-6A555075A906">创建两个初始化参数文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>通过复制原始初始化参数文件，为每个网关实例创建一个初始化参数文件： <code class="codeph">$ORACLE_HOME/dg4tera/admin/initdg4tera.ora</code> ，两次，用<code class="codeph">db2</code>的网关SID命名一个，用<code class="codeph">db3</code>的网关SID命名另一个：</p><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME / dg4tera / admin $ cp initdg4tera.ora initdg4tera2.ora $ cp initdg4tera.ora initdg4tera3.ora</pre><p>更改新文件中<code class="codeph">HS_FDS_CONNECT_INFO</code>参数的值。
                        </p>
                        <p>对于<code class="codeph">init</code> <code class="codeph">dg4tera</code> <code class="codeph">2.ora</code> ，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = 204.179.79.15：1025 / DB2</pre><p>对于<code class="codeph">init</code> <code class="codeph">dg4tera</code> <code class="codeph">3.ora</code> ，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = 204.179.79.15：1025 / DB3</pre><div class="infoboxnote" id="GUID-98886429-2D6C-4A30-B8A2-E5072E88EBBA__GUID-DCDF2407-9801-49FA-BB17-D8726275AE69">
                           <p class="notep1">注意：</p>
                           <p>如果您为同一Teradata数据库有多个网关SID，因为您希望在不同时间使用不同的网关参数设置，请遵循相同的过程。您可以创建多个初始化参数文件，每个文件具有不同的SID和不同的参数设置。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1215"></a><a id="OTGIS1002"></a><div class="props_rev_3"><a id="GUID-D61C23C5-1427-488B-B7AF-5C3B4D1D43E4" name="GUID-D61C23C5-1427-488B-B7AF-5C3B4D1D43E4"></a><h4 id="OTGIS-GUID-D61C23C5-1427-488B-B7AF-5C3B4D1D43E4" class="sect4">多个Teradata数据库示例：配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-D61C23C5-1427-488B-B7AF-5C3B4D1D43E4__GUID-77CF385F-1E6E-47BA-9C6B-458FDCA7337A">将条目添加到listener.ora</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在Oracle Net Listener配置文件中添加两个新条目， <span class="bold"> </span> <code class="codeph">listener.ora</code> 。即使多个网关实例访问同一数据库，您也必须为每个网关实例提供一个条目。
                        </p>
                        <p>以下示例首先显示原始安装网关的条目，然后显示新条目。</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = dg4tera）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4tera）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / lib： <span class="italic">teradata_client_library_directory</span> ：/ usr / lib））（SID_DESC =（SID_NAME = dg4tera2）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4tera）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / lib： <span class="italic">teradata_client_library_directory</span> ：/ usr / lib））（SID_DESC =（SID_NAME = dg4tera3）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4tera）（ENVS = LD_LIBRARY_PATH = <span class="italic">oracle_home_directory</span> / lib： <span class="italic">teradata_client_library_directory</span> ：/ usr / lib）））</pre><p>其中， <code class="codeph">oracle_home_directory</code>是网关所在的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1003"></a><div class="props_rev_3"><a id="GUID-9F0AA48F-1993-487C-B33A-3B93ED223049" name="GUID-9F0AA48F-1993-487C-B33A-3B93ED223049"></a><h4 id="OTGIS-GUID-9F0AA48F-1993-487C-B33A-3B93ED223049" class="sect4">多个Teradata数据库示例：停止并启动Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>如果侦听器已在运行，请使用<code class="codeph">lsnrctl</code>命令停止侦听器，然后使用新设置启动它，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ lsnrctl停止$ lsnrctl start</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIS1004"></a><div class="props_rev_3"><a id="GUID-77168CA0-5ABF-48DB-A4CE-F66B4D1EAA37" name="GUID-77168CA0-5ABF-48DB-A4CE-F66B4D1EAA37"></a><h4 id="OTGIS-GUID-77168CA0-5ABF-48DB-A4CE-F66B4D1EAA37" class="sect4">多个Teradata数据库示例：为网关访问配置Oracle数据库</h4>
                  <div>
                     <p>例：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="config-teradata-gateway.html#GUID-599101D3-7079-48D1-8DD2-A1F21AE84DC5">为多个网关实例配置Oracle Net</a></p>
                        </li>
                     </ul>
                  </div><a id="OTGIS1005"></a><div class="props_rev_3"><a id="GUID-599101D3-7079-48D1-8DD2-A1F21AE84DC5" name="GUID-599101D3-7079-48D1-8DD2-A1F21AE84DC5"></a><h5 id="OTGIS-GUID-599101D3-7079-48D1-8DD2-A1F21AE84DC5" class="sect5">为多个网关实例配置Oracle Net</h5>
                     <div>
                        <div class="section">
                           <p>将两个连接描述符条目添加到<code class="codeph">tnsnames.ora</code> <span class="bold"> </span>文件。即使网关实例访问同一数据库，您也必须为每个网关实例创建一个条目。
                           </p>
                           <p>以下Teradata示例首先显示原始安装网关的条目，然后显示新网关实例的两个条目：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">old_db_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4tera））（HS = OK）） <span class="italic">new_db2_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4tera2））（HS = OK）） <span class="italic">new_db3_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name ））（CONNECT_DATA =（SID = dg4tera3））（HS = OK））</pre><p><code class="codeph">PORT</code>的值是正在侦听网关的Oracle Net Listener的TCP / IP端口号。该数字可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。<code class="codeph">HOST</code>的值是运行网关的计算机的名称。该名称也可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OTGIS1006"></a><div class="props_rev_3"><a id="GUID-63A065B4-B974-42B7-8BB6-8831150690EC" name="GUID-63A065B4-B974-42B7-8BB6-8831150690EC"></a><h4 id="OTGIS-GUID-63A065B4-B974-42B7-8BB6-8831150690EC" class="sect4">多个Teradata数据库示例：访问Teradata数据</h4>
                  <div>
                     <div class="section">
                        <p>输入以下内容以创建<code class="codeph">dg4tera2</code>网关的数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK TERA2 CONNECT TO 2 <span class="italic">“user2”</span> IDENTIFIED BY <span class="italic">“password2</span> ”USING'new_db2_using';</pre><p>输入以下内容<code class="codeph">dg4tera3</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK TERA3 CONNECT TO 2“ <span class="italic">user3”</span> IDENTIFIED BY“ <span class="italic">password3”</span> USING'new_db3_using';</pre><p>创建数据库链接后，您可以验证与新Teradata数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ TERA2;</pre><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ TERA3;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13032.automatic-performance-diagnostics.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>自动性能诊断</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00"></meta>
      <meta name="dcterms.title" content="Database Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96347-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="gathering-database-statistics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="comparing-database-performance-over-time.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="gathering-database-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="comparing-database-performance-over-time.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库性能调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-diagnosing-and-tuning-database-performance.html" property="item" typeof="WebPage"><span property="name">诊断和调整数据库性能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">自动性能诊断</li>
            </ol>
            <a id="GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" name="GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D"></a><a id="TGDBA026"></a>
            
            <h2 id="TGDBA-GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" class="sect2"><span class="enumeration_chapter">7</span>自动性能诊断</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍用于性能诊断和调优的Oracle数据库自动功能。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" title="从Oracle Database 12c开始，默认情况下在多租户容器数据库（CDB）的根容器中启用ADDM。从Oracle Database 19c开始，您还可以在可插拔数据库（PDB）中使用ADDM。默认情况下，ADDM在可插拔数据库（PDB）中不起作用，因为默认情况下在PDB中禁用自动AWR快照。要在PDB中使用ADDM，必须通过将AWR_PDB_AUTOFLUSH_ENABLED初始化参数设置为TRUE且AWR快照间隔大于0来在PDB中启用自动AWR快照。">自动数据库诊断监视器概述</a></p>
                  </li>
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD">设置ADDM</a></p>
                  </li>
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679">使用ADDM诊断数据库性能问题</a></p>
                  </li>
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129">ADDM视图</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D__GUID-7C5438DD-C87F-4C91-ADF3-99690F5980DF">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">Oracle数据库2天+性能调整指南</span></a> ，了解有关使用Oracle Enterprise Manager云控制（云控制）使用自动数据库诊断监视器诊断和调整数据库的信息</p>
               </div>
            </div><a id="TGDBA02602"></a><div class="props_rev_3"><a id="GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" name="GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43"></a><h3 id="TGDBA-GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" class="sect3"><span class="enumeration_section">7.1</span>自动数据库诊断监视器概述</h3>
               <div>
                  <p>自动工作负载存储库（AWR）存储Oracle数据库的性能相关静态。自动数据库诊断监视器（ADDM）是一种诊断工具，可定期分析AWR数据，查找任何性能问题的根本原因，提供纠正问题的建议，并识别系统的非问题区域。由于AWR是历史性能数据的存储库，因此ADDM可以在事件发生后分析性能问题，通常可以节省时间和资源来重现问题。</p>
                  <p>在大多数情况下，ADDM输出应该是DBA在收到性能问题通知时的第一个位置。ADDM具有以下优点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>默认情况下每小时自动执行一次性能诊断</p>
                     </li>
                     <li>
                        <p>基于数十年调整专业知识的问题诊断</p>
                     </li>
                     <li>
                        <p>基于时间的问题影响和推荐效益量化</p>
                     </li>
                     <li>
                        <p>鉴别根本原因，而不是症状</p>
                     </li>
                     <li>
                        <p>处理问题根源的建议</p>
                     </li>
                     <li>
                        <p>识别系统的非问题区域</p>
                     </li>
                     <li>
                        <p>诊断过程中系统的最小开销</p>
                     </li>
                  </ul>
                  <p>调整是一个迭代过程，修复一个问题可能会导致瓶颈转移到系统的另一部分。即使具有ADDM分析的优势，也可能需要多个调整周期才能达到可接受的系统性能。ADDM的优势适用于生产系统之外;在开发和测试系统上，ADDM可以提供性能问题的早期预警。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743">ADDM分析</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335">将ADDM与Oracle Real Application Clusters一起使用</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5" title="从Oracle Database 12c开始，默认情况下在多租户容器数据库（CDB）的根容器中启用ADDM。从Oracle Database 19c开始，您还可以在可插拔数据库（PDB）中使用ADDM。">在多租户环境中使用ADDM</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D">实时ADDM分析</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-824AA656-C199-437D-926B-A8F05590A65C">ADDM分析结果</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8">查看ADDM分析结果：示例</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43__GUID-C40BBFE1-3E0D-4ACD-8CDD-DA6EA621883C">
                     <p class="notep1">注意：</p>
                     <p>将ADDM功能与可插拔数据库（PDB）一起使用时，数据可见性和权限要求可能会有所不同。有关可管理性功能（包括ADDM功能）如何在多租户容器数据库（CDB）中工作的信息，请参阅<a href="../multi/administering-a-cdb-with-sql-plus.html#MULTI-GUID-DF42C0D3-8968-4810-9327-9D176337D356" target="_blank"><span class="italic">Oracle Multitenant管理员指南</span></a> 。
                     </p>
                  </div>
               </div><a id="TGDBA94240"></a><div class="props_rev_3"><a id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743" name="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743"></a><h4 id="TGDBA-GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743" class="sect4"><span class="enumeration_section">7.1.1</span> ADDM分析</h4>
                  <div>
                     <p>可以对一对AWR快照和来自同一数据库的一组实例执行ADDM分析。这对AWR快照定义分析的时间段，实例集定义分析目标。</p>
                     <p>如果您使用的是Oracle Real Application Clusters（Oracle RAC），那么ADDM有三种分析模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库</p>
                           <p>在数据库模式下，ADDM会分析数据库的所有实例。</p>
                        </li>
                        <li>
                           <p>例</p>
                           <p>在实例模式下，ADDM分析数据库的特定实例。</p>
                        </li>
                        <li>
                           <p>局部</p>
                           <p>在“部分”模式下，ADDM分析所有数据库实例的子集。</p>
                        </li>
                     </ul>
                     <p>如果您不使用Oracle RAC，则ADDM只能在实例模式下运行，因为只存在一个数据库实例。</p>
                     <p>每次拍摄AWR快照并将结果保存在数据库中时，都会执行ADDM分析。ADDM分析的时间段由最后两个快照（默认为最后一个小时）定义。ADDM将始终在“实例”模式下分析指定的实例。对于非Oracle RAC或单实例环境，在实例模式下执行的分析与数据库范围的分析相同。如果您使用的是Oracle RAC，则ADDM还会在数据库模式下分析整个数据库，如<span class="q">“ <a href="automatic-performance-diagnostics.html#GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335">将ADDM与Oracle Real Application Clusters一起使用</a> ”中所述</span> 。
                     </p>
                     <p>ADDM完成分析后，您可以使用Cloud Control或<code class="codeph">DBMS_ADDM</code>程序<code class="codeph">DBMS_ADDM</code>程序或<code class="codeph">DBA_ADDM_*</code>和<code class="codeph">DBA_ADVISOR_*</code>视图查看ADDM结果。
                     </p>
                     <p>自顶向下进行ADDM分析，首先识别症状，然后对其进行细化以找出性能问题的根本原因。分析的目标是减少单个吞吐量<a id="d19268e302" class="indexterm-anchor"></a>度量称为<code class="codeph">DB</code> <code class="codeph">time</code> 。<code class="codeph">DB</code> <code class="codeph">time</code>是数据库性能的基本衡量指标，是数据库处理用户请求所花费的累积时间。它包括所有非空闲用户前台会话的等待时间和CPU时间。<code class="codeph">DB</code> <code class="codeph">time</code>显示在<code class="codeph">V$SESS_TIME_MODEL</code>和<code class="codeph">V$SYS_TIME_MODEL</code>视图中。
                     </p>
                     <p><a id="d19268e333" class="indexterm-anchor"></a>通过减少<code class="codeph">DB</code> <code class="codeph">time</code> ，数据库能够使用相同的资源支持更多用户请求，从而提高吞吐量。ADDM报告的问题按其负责的<code class="codeph">DB</code> <code class="codeph">time</code>量排序。不负责大部分<code class="codeph">DB</code> <code class="codeph">time</code>系统区域被报告为非问题区域。
                     </p>
                     <p><a id="d19268e358" class="indexterm-anchor"></a> ADDM考虑的问题类型包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>CPU瓶颈 - 系统CPU是否受Oracle数据库或其他应用程序的约束？</p>
                        </li>
                        <li>
                           <p>小型内存结构 -  Oracle数据库内存结构（例如SGA，PGA和缓冲区缓存）是否足够大？</p>
                        </li>
                        <li>
                           <p>I / O容量问题 -  I / O子系统是否按预期运行？</p>
                        </li>
                        <li>
                           <p>高负载SQL语句 - 是否存在消耗过多系统资源的SQL语句？</p>
                        </li>
                        <li>
                           <p>高负载PL / SQL执行和编译，以及高负载的Java使用</p>
                        </li>
                        <li>
                           <p>Oracle RAC特定问题 - 什么是全局缓存热块和对象;是否有任何互连延迟问题？</p>
                        </li>
                        <li>
                           <p>应用程序对Oracle数据库的次优使用 - 是否存在连接管理不良，解析过多或应用程序级锁争用问题？</p>
                        </li>
                        <li>
                           <p>数据库配置问题 - 是否存在日志文件大小调整，归档问题，过多检查点或次优参数设置的证据？</p>
                        </li>
                        <li>
                           <p>并发问题 - 是否存在缓冲区繁忙问题？</p>
                        </li>
                        <li>
                           <p>各种问题领域的热门对象和热门SQL</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743__GUID-3542A93D-ECC0-4F4B-A19B-1224454CCFDE">
                        <p class="notep1">注意：</p>
                        <p>这不是ADDM在其分析中考虑的所有问题类型的完整列表。</p>
                     </div>
                     <p>ADDM还记录了系统的非问题区域。例如，在早期阶段识别并且从调整考虑中移除不会显着影响系统性能的等待事件类，从而节省将花费在不影响整体系统性能的项目上的时间和精力。</p>
                     <div class="infoboxnotealso" id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743__GUID-1F6C4CE9-1BEF-487B-8DAA-5C08C7FB1342">
                        <p class="notep1">也可以看看：</p>
                        <ul id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743__UL_UHM_G4R_3GB" style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">V$SESS_TIME_MODEL</code>和<code class="codeph">V$SYS_TIME_MODEL</code>视图的信息，请<a href="../refrn/V-SESS_TIME_MODEL.html#REFRN30340" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="measuring-database-performance.html#GUID-BC858042-CD71-4717-A614-C0B0A4FE6F2D">时间模型统计</a> ”</span>用于讨论时间模型统计和<code class="codeph">DB</code> <code class="codeph">time</code></p>
                           </li>
                           <li>
                              <p>有关服务器进程的信息，请参阅<a href="../cncpt/process-architecture.html#CNCPT008" target="_blank"><span class="italic">Oracle Database Concepts</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA94241"></a><div class="props_rev_3"><a id="GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335" name="GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335"></a><h4 id="TGDBA-GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335" class="sect4"><span class="enumeration_section">7.1.2</span>将ADDM与Oracle Real Application Clusters一起使用</h4>
                  <div>
                     <p>如果您使用的是Oracle RAC，请在数据库分析模式下运行ADDM以分析数据库的所有实例的吞吐量性能。在数据库模式下，ADDM将DB时间视为所有数据库实例的数据库时间总和。使用数据库分析模式，您可以在单个报告中查看对整个数据库有意义的所有发现，而不是为每个实例查看单独的报告。</p>
                     <p>数据库模式报告包括有关数据库资源（例如I / O和互连）的发现。如果报告对整个数据库具有重要意义，该报告还汇总了各种实例的结果。例如，如果单个实例上的CPU负载足够高以影响整个数据库，则查找将显示在数据库模式分析中，该分析指向负责该问题的特定实例。</p>
                     <div class="infoboxnotealso" id="GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335__GUID-9952D424-4565-41EE-9003-5063A7A607A1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关将ADDM与Oracle RAC一起使用的信息，请参见<a href="../racad/monitoring-performance.html#RACAD-GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”</span></a></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5" name="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5"></a><h4 id="TGDBA-GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5" class="sect4"><span class="enumeration_section">7.1.3</span>在多租户环境中使用ADDM</h4>
                  <div>
                     <p>从Oracle Database 12c开始，默认情况下在多租户容器数据库（CDB）的根容器中启用ADDM。从Oracle Database 19c开始，您还可以在可插拔数据库（PDB）中使用ADDM。</p>
                     <div class="section">
                        <p>在CDB中，ADDM的工作方式与在非CDB中工作的方式相同，也就是说，每次在CDB根或PDB上执行AWR快照时都会执行ADDM分析，并且ADDM结果存储在CDB根或PDB上。拍摄快照的同一数据库系统。ADDM分析的时间段由最后两个快照（默认为最后一个小时）定义。</p>
                        <p>ADDM完成分析后，您可以使用以下任一方法查看ADDM结果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用企业管理器云控制（云控制）</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBA_ADDM_*</code>和<code class="codeph">DBA_ADVISOR_*</code>视图</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__GUID-B6B811FC-9517-4045-BEAC-E44FC7B9B380">
                           <p class="notep1">注意：</p>
                           <ul id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_KJX_XP4_JGB" style="list-style-type:disc">
                              <li>默认情况下，在CDB根目录中启用ADDM。</li>
                              <li>默认情况下，ADDM在PDB中不起作用，因为PDB中默认禁用自动AWR快照。要在PDB中使用ADDM，必须在PDB中启用自动AWR快照。</li>
                              <li>当前容器为CDB根的用户可以查看整个CDB的ADDM结果。 ADDM结果可包括有关多个PDB的信息。如果PDB未插入，则不包括与PDB相关的ADDM结果。当前容器是PDB时，无法查看存储在CDB根目录中的ADDM结果。</li>
                              <li>PDB上的ADDM结果仅提供PDB特定的发现和建议。当前容器是PDB的用户只能查看当前PDB的ADDM结果。ADDM结果排除了适用于CDB整体的发现，例如，与缓冲区高速缓存大小相关的I / O问题。</li>
                              <li>在PDB上启用AWR快照不会更改CDB根目录上的ADDM报告。</li>
                              <li>无法从CDB根访问PDB上的AWR数据。</li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__GUID-188AF643-808E-4966-AB84-BA9EE1340262">PDB级ADDM限制</p>
                        <p>与非CDB不同，ADDM不会在PDB中报告以下问题，因为这些问题适用于CDB整体而不适用于单个PDB：</p>
                        <ul id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_UM1_X24_JGB" style="list-style-type:disc">
                           <li>
                              <p>I / O问题归因于：</p>
                              <ul id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_HRX_DM4_JGB" style="list-style-type:disc">
                                 <li>尺寸过小的缓冲区缓存</li>
                                 <li>矮小的溪流池</li>
                                 <li>过多的临时写入</li>
                                 <li>过多的检查点写道</li>
                                 <li>过度的撤销写入</li>
                                 <li>过多的PQ检查点写入</li>
                                 <li>过多的截断写入</li>
                                 <li>过多的表空间DDL检查点</li>
                                 <li>I / O容量限制</li>
                              </ul>
                           </li>
                           <li>
                              <p>由于以下原因导致的SQL难解析问题：</p>
                              <ul id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_GQF_QM4_JGB" style="list-style-type:disc">
                                 <li>光标老化</li>
                                 <li>内存不足解析</li>
                              </ul>
                           </li>
                           <li>
                              <p>SGA规模问题</p>
                           </li>
                        </ul>
                        <p>ADDM也不会在PDB中报告以下问题，因为这些问题无法在PDB级别解决：</p>
                        <ul id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_VM1_X24_JGB" style="list-style-type:disc">
                           <li>
                              <p>群集消息传递相关的问题，例如网络延迟，拥塞，争用和丢失的块</p>
                           </li>
                           <li>
                              <p>日志文件开关等待归档和检查点不完整</p>
                           </li>
                           <li>
                              <p>太多的空闲缓冲区等待</p>
                           </li>
                           <li>
                              <p>日志缓冲区上的争用等待</p>
                           </li>
                           <li>
                              <p>由于CPU瓶颈而等待</p>
                           </li>
                           <li>
                              <p>操作系统VM分页</p>
                           </li>
                           <li>
                              <p>会话槽等待事件</p>
                           </li>
                           <li>
                              <p>CPU量子等待事件</p>
                           </li>
                           <li>
                              <p>与RMAN相关的等待事件，例如PQ排队等待事件，PGA限制等待事件和I / O队列等待事件</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__GUID-C9D0AA36-7691-4DE2-B757-FD842DBAF217">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_JDP_V24_JGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="automatic-performance-diagnostics.html#GUID-5A4F4896-6F95-461F-84E3-8E40F6036752" title="默认情况下，ADDM在可插拔数据库（PDB）中不起作用，因为默认情况下在PDB中禁用自动AWR快照。要在PDB中使用ADDM，必须通过将AWR_PDB_AUTOFLUSH_ENABLED初始化参数设置为TRUE且AWR快照间隔大于0来在PDB中启用自动AWR快照。">在可插拔数据库中启用ADDM</a> ”，</span>以获取有关如何在PDB中启用ADDM的信息</p>
                              </li>
                              <li>
                                 <p>有关ADDM视图<code class="codeph">DBA_ADDM_*</code>和<code class="codeph">DBA_ADVISOR_*</code>详细信息，请参阅<span class="q">“ <a href="automatic-performance-diagnostics.html#GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129">ADDM视图</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="automatic-performance-diagnostics.html#GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679">使用ADDM诊断数据库性能问题</a> ”</span> ，了解有关如何使用<code class="codeph">DBMS_ADDM</code>程序<code class="codeph">DBMS_ADDM</code>程序在Oracle数据库中运行ADDM的信息</p>
                              </li>
                              <li>
                                 <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">Oracle Database 2 Day +性能调整指南</span></a> ，了解有关如何使用Cloud Control在Oracle数据库中运行ADDM的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752" name="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752"></a><h5 id="TGDBA-GUID-5A4F4896-6F95-461F-84E3-8E40F6036752" class="sect5"><span class="enumeration_section">7.1.3.1</span>在可插拔数据库中启用ADDM</h5>
                     <div>
                        <p>默认情况下，ADDM在可插拔数据库（PDB）中不起作用，因为默认情况下在PDB中禁用自动AWR快照。要在PDB中使用ADDM，必须通过将<code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code>初始化参数设置为<code class="codeph">TRUE</code>且AWR快照间隔大于0来在PDB中启用自动AWR快照。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752__GUID-DD3E22CF-F0CF-4B77-91B8-E2D6FE1C97E2">要在PDB中启用ADDM：</p>
                           <ol>
                              <li>
                                 <p>使用以下命令在PDB中将<code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code>初始化参数设置为<code class="codeph">TRUE</code> ：</p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET AWR_PDB_AUTOFLUSH_ENABLED = TRUE;</code></pre></li>
                              <li>
                                 <p>使用命令在PDB中将AWR快照间隔设置为大于0，如以下示例所示：</p><pre class="pre codeblock"><code>SQL&gt; EXEC dbms_workload_repository.modify_snapshot_settings（interval =&gt; 60）;</code></pre></li>
                           </ol>
                           <div class="infoboxnotealso" id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752__GUID-B599EB38-C7DD-454C-9703-43CB5036F49C">
                              <p class="notep1">也可以看看：</p>
                              <ul id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752__UL_WK1_XC4_JGB" style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code>初始化参数的详细信息，请<code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> <a href="../refrn/AWR_PDB_AUTOFLUSH_ENABLED.html#REFRN-GUID-08FA21BC-8FB1-4C51-BEEA-139C734D17A7" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS</code>过程的详细信息，请<code class="codeph">DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS</code> <a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS-GUID-E2B46878-1BDB-4789-8A21-016A625530F1" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA95368"></a><div class="props_rev_3"><a id="GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D" name="GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D"></a><h4 id="TGDBA-GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D" class="sect4"><span class="enumeration_section">7.1.4</span>实时ADDM分析</h4>
                  <div>
                     <p>介绍了Oracle企业管理器云控制（云控制<span class="italic">）12℃，</span>实时ADDM可以帮助你分析和解决传统上需要重新启动数据库反应迟钝或挂数据库的问题。实时ADDM运行一组预定义标准来分析数据库的当前性能。分析问题后，Real-Time ADDM可帮助您解决已发现的问题，例如死锁，挂起，共享池争用和其他异常情况，而无需重新启动数据库。
                     </p>
                     <p>本节介绍实时ADDM，包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="automatic-performance-diagnostics.html#GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A">实时ADDM连接模式</a></p>
                        </li>
                        <li>
                           <p><a href="automatic-performance-diagnostics.html#GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6">实时ADDM触发器</a></p>
                        </li>
                        <li>
                           <p><a href="automatic-performance-diagnostics.html#GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8">实时ADDM触发控制</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D__GUID-DABECB6A-B020-4925-AA78-5604FDAE4D58">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../tdppt/resolving-transient-performance-problems.html#TDPPT523" target="_blank"><span class="italic">“Oracle数据库2天+性能调整指南”</span></a> ，了解有关将实时ADDM与云控制配合使用的信息</p>
                     </div>
                  </div><a id="TGDBA95369"></a><div class="props_rev_3"><a id="GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A" name="GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A"></a><h5 id="TGDBA-GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A" class="sect5"><span class="enumeration_section">7.1.4.1</span>实时ADDM连接模式</h5>
                     <div>
                        <p>根据数据库状态，使用Cloud Control连接到数据库时，Real-Time ADDM使用两种不同类型的连接模式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>正常连接</p>
                              <p>在此模式下，Real-Time ADDM执行与数据库的常规JDBC连接。此模式旨在在某些连接可用时对数据库执行广泛的性能分析。</p>
                           </li>
                           <li>
                              <p>诊断连接</p>
                              <p>在此模式下，实时ADDM执行与数据库的无锁存连接。此模式适用于无法进行普通JDBC连接时的极端挂起情况。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TGDBA95371"></a><a id="TGDBA95370"></a><div class="props_rev_3"><a id="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6" name="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6"></a><h5 id="TGDBA-GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6" class="sect5"><span class="enumeration_section">7.1.4.2</span>实时ADDM触发器</h5>
                     <div>
                        <p>从Oracle Database 12 <span class="italic">c开始</span> ，Real-Time ADDM主动检测瞬态数据库性能问题。为此，Real-Time ADDM每3秒自动运行一次，并使用内存中数据来诊断数据库中的任何性能峰值。
                        </p>
                        <p>检测到性能问题时，实时ADDM会自动触发分析，如以下步骤所述：</p>
                        <ol>
                           <li>
                              <p>可管理性监视器进程（MMON）每3秒执行一次操作，以获取没有锁定或锁存的性能统计信息。</p>
                           </li>
                           <li>
                              <p>如果检测到<a href="automatic-performance-diagnostics.html#GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__BABEDDIC" title="列出触发实时ADDM分析的问题和条件。">表7-1</a>中列出的任何问题，MMON进程将检查这些统计信息并触发实时ADDM分析。
                              </p>
                           </li>
                           <li>
                              <p>MMON从属进程创建报告并将其存储在AWR中。</p>
                              <p>要查看报告的元数据，请使用<code class="codeph">DBA_HIST_REPORTS</code>视图。
                              </p>
                           </li>
                        </ol>
                        <p><a href="automatic-performance-diagnostics.html#GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__BABEDDIC" title="列出触发实时ADDM分析的问题和条件。">表7-1</a>列出了触发实时ADDM分析的问题和条件。
                        </p>
                        <div class="tblformal" id="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__BABEDDIC">
                           <p class="titleintable">表7-1实时ADDM的触发问题和条件</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="触发实时ADDM的问题和条件" width="100%" border="1" summary="Lists the issues and conditions that trigger an Real-Time ADDM analysis." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d19268e1029">问题</th>
                                    <th align="left" valign="bottom" width="69%" id="d19268e1032">条件</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1037" headers="d19268e1029 ">
                                       <p>高负荷</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1037 d19268e1032 ">
                                       <p>平均活动会话数大于CPU核心数的3倍</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1044" headers="d19268e1029 ">
                                       <p>I / O绑定</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1044 d19268e1032 ">
                                       <p>基于单块读取性能的I / O对活动会话的影响</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1051" headers="d19268e1029 ">
                                       <p>CPU绑定</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1051 d19268e1032 ">
                                       <p>活动会话大于总负载的10％，CPU利用率大于50％</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1058" headers="d19268e1029 ">
                                       <p>过度分配的内存</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1058 d19268e1032 ">
                                       <p>内存分配超过物理内存的95％</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1065" headers="d19268e1029 ">
                                       <p>互连绑定</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1065 d19268e1032 ">
                                       <p>基于单块互连传输时间</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1072" headers="d19268e1029 ">
                                       <p>会话限制</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1072 d19268e1032 ">
                                       <p>会话限制接近100％</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1079" headers="d19268e1029 ">
                                       <p>流程限制</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1079 d19268e1032 ">
                                       <p>工艺限制接近100％</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1086" headers="d19268e1029 ">
                                       <p>洪会议</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1086 d19268e1032 ">
                                       <p>Hung会话占总会话数的10％以上</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1093" headers="d19268e1029 ">
                                       <p>检测到死锁</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1093 d19268e1032 ">
                                       <p>检测到任何死锁</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__GUID-EB6A5DA3-3D88-499E-BB01-9F50ED38F4EE">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">DBA_HIST_REPORTS</code>视图的信息，请<a href="../refrn/DBA_HIST_REPORTS.html#REFRN23881" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA95372"></a><div class="props_rev_3"><a id="GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8" name="GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8"></a><h5 id="TGDBA-GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8" class="sect5"><span class="enumeration_section">7.1.4.3</span>实时ADDM触发控制</h5>
                     <div>
                        <p>为确保自动触发器不会消耗太多系统资源并使系统不堪重负，Real-Time ADDM采用以下控件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>报告间隔时间</p>
                              <p>如果通过自动触发器在过去5分钟内创建了实时ADDM报告，则不会生成新报告。</p>
                           </li>
                           <li>
                              <p>Oracle RAC控件</p>
                              <p>自动触发器是数据库实例的本地触发器。对于Oracle RAC，只有一个数据库实例可以在给定时间创建实时ADDM报告，因为在实际生成报告之前需要锁定并且MMON从属进程执行查询。</p>
                           </li>
                           <li>
                              <p>重复的触发器</p>
                              <p>对于任何问题的自动触发必须具有100％或更高的影响，并且在过去45分钟内具有相同的触发问题。例如，如果针对具有8个会话影响的活动会话触发报告，则为了在接下来的45分钟内触发另一个报告，必须至少有16个活动会话。在这种情况下，报告的数据库问题随着时间的推移变得越来越严重。另一方面，如果每45分钟生成一次相同的报告，则数据库会遇到持续存在的问题，并且会产生一致的影响。</p>
                           </li>
                           <li>
                              <p>新发现的问题</p>
                              <p>如果检测到新问题（之前未在过去45分钟内检测到），则会生成新报告。例如，如果为8个活动会话触发报告并且检测到新的死锁问题，则无论新的活动会话加载如何，都会生成新报告。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA94242"></a><div class="props_rev_3"><a id="GUID-824AA656-C199-437D-926B-A8F05590A65C" name="GUID-824AA656-C199-437D-926B-A8F05590A65C"></a><h4 id="TGDBA-GUID-824AA656-C199-437D-926B-A8F05590A65C" class="sect4"><span class="enumeration_section">7.1.5</span> ADDM分析结果</h4>
                  <div>
                     <p>除了问题诊断之外，ADDM还建议了可能的解决方案。<a id="d19268e1234" class="indexterm-anchor"></a> ADDM分析结果表示为一组<a id="d19268e1239" class="indexterm-anchor"></a>发现。有关ADDM分析结果的示例，请参见<a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">示例7-1</a> 。每个ADDM发现都属于以下类型之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>问题发现描述了数据库性能问题的根本原因。</p>
                        </li>
                        <li>
                           <p>症状发现包含经常导致一个或多个问题发现的信息。</p>
                        </li>
                        <li>
                           <p>信息结果用于报告与理解数据库性能相关的信息，但不构成性能问题（例如数据库的非问题区域和自动数据库维护的活动）。</p>
                        </li>
                        <li>
                           <p>警告结果包含有关可能影响ADDM分析完整性或准确性的问题的信息（例如AWR中缺少数据）。</p>
                        </li>
                     </ul>
                     <p>每个问题发现都是通过影响来量化的，该影响是对发现性能问题引起的<code class="codeph">DB</code> <code class="codeph">time</code>部分的估计。问题发现可以与用于减少性能问题影响的建议列表相关联。建议的类型包括<a id="d19268e1267" class="indexterm-anchor"></a> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>硬件更改：添加CPU或更改I / O子系统配置</p>
                        </li>
                        <li>
                           <p>数据库配置：更改初始化参数设置</p>
                        </li>
                        <li>
                           <p>架构更改：对表或索引进行哈希分区，或使用自动段空间管理（ASSM）</p>
                        </li>
                        <li>
                           <p>应用程序更改：对序列使用缓存选项或使用绑定变量</p>
                        </li>
                        <li>
                           <p>使用其他顾问程序：在高负载SQL上运行SQL Tuning Advisor或在热对象上运行Segment Advisor</p>
                        </li>
                     </ul>
                     <p>建议清单可以包含解决同一问题的各种备选方案;您不必应用所有建议来解决特定问题。每个建议都有一个好处，即在实施建议<code class="codeph">time</code>可以节省的<code class="codeph">DB</code> <code class="codeph">time</code>部分的估计值。<a id="d19268e1296" class="indexterm-anchor"></a>建议由行动和理由组成。您必须应用建议的所有操作才能获得估计的收益。基本原理用于解释为什么建议采取一系列行动，并提供额外信息以实施建议的建议。
                     </p>
                  </div>
               </div><a id="TGDBA94244"></a><a id="TGDBA94243"></a><div class="props_rev_3"><a id="GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8" name="GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8"></a><h4 id="TGDBA-GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8" class="sect4"><span class="enumeration_section">7.1.6</span>查看ADDM分析结果：示例</h4>
                  <div>
                     <p><a id="d19268e1353" class="indexterm-anchor"></a><a id="d19268e1357" class="indexterm-anchor"></a>请考虑<a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">示例7-1中</a> ADDM报告的以下部分。
                     </p>
                     <div class="example" id="GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">
                        <p class="titleinexample">例7-1 ADDM报告示例</p><pre class="oac_no_warn" dir="ltr">发现1：31％影响（7798秒）------------------------------------ SQL语句没有由于文字的使用而共享。这导致额外的硬解析，这耗费了大量的数据库时间。建议1：应用程序分析，31％的好处（7798秒）操作：调查应用程序逻辑，以便可能使用绑定变量而不是文字。或者，您可以将参数“cursor_sharing”设置为“force”。RATIONALE：发现使用PLAN_HASH_VALUE 3106087033的SQL语句使用文字。查看V $ SQL以获取此类SQL语句的示例。
</pre><p>在<a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">示例7-1中</a> ，发现指向特定的根本原因，即SQL语句中文字的使用，估计在分析期间对总<code class="codeph">DB</code> <code class="codeph">time</code>的影响约为31％。
                        </p>
                        <p>该发现有一个与之相关的建议，由一个动作和一个基本原理组成。该操作指定了所发现问题的解决方案，并且估计在分析期间最多可获得31％的<code class="codeph">DB</code> <code class="codeph">time</code> 。请注意，收益是作为总<code class="codeph">DB</code> <code class="codeph">time</code>的一部分给出的，而不是作为发现影响的一部分。该基本原理提供了有关跟踪使用文字并导致此性能问题的潜在SQL语句的其他信息。使用可能存在问题的SQL语句的指定计划哈希值，DBA可以快速检查一些示例语句。
                        </p>
                        <p>当特定问题有多种原因时，ADDM可能会报告多个问题和症状结果。在这种情况下，这些多个发现的影响可能包含相同的<code class="codeph">DB</code> <code class="codeph">time</code>部分。由于研究结果的性能问题可能会重叠，因此研究结果的影响总和可能会超过<code class="codeph">DB</code> <code class="codeph">time</code> 100％。例如，如果系统执行多次读取，则ADDM可能会报告由于I / O活动作为一个发现而导致负责50％ <code class="codeph">DB</code> <code class="codeph">time</code>的SQL语句，以及作为另一个发现负责75％ <code class="codeph">DB</code> <code class="codeph">time</code>的小型缓冲区高速缓存。
                        </p>
                        <p>当多个建议与问题发现相关联时，建议可能包含解决问题的替代方案。在这种情况下，建议的好处总和可能高于发现的影响。</p>
                        <p>适当时，ADDM操作可能有多种解决方案供您选择。在该示例中，最有效的解决方案是使用绑定变量。但是，通常很难修改应用程序。更改<code class="codeph">CURSOR_SHARING</code>初始化参数的值更容易实现，并且可以提供显着的改进。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="TGDBA94245"></a><div class="props_rev_3"><a id="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD" name="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD"></a><h3 id="TGDBA-GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD" class="sect3"><span class="enumeration_section">7.2</span>设置ADDM</h3>
               <div>
                  <div class="section">
                     <p><a id="d19268e1478" class="indexterm-anchor"></a><a id="d19268e1482" class="indexterm-anchor"></a>默认情况下启用自动数据库诊断监视，并由<code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code>和<code class="codeph">STATISTICS_LEVEL</code>初始化参数控制。
                     </p>
                     <p><code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code>参数应设置为<code class="codeph">DIAGNOSTIC</code>或<code class="codeph">DIAGNOSTIC+TUNING</code>以启用自动数据库诊断监控。默认设置为<code class="codeph">DIAGNOSTIC+TUNING</code> 。将<code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code>设置为<code class="codeph">NONE</code>将禁用ADDM。</p>
                     <p>应将<code class="codeph">STATISTICS_LEVEL</code>参数设置为<code class="codeph">TYPICAL</code>或<code class="codeph">ALL</code>以启用自动数据库诊断监视。默认设置为<code class="codeph">TYPICAL</code> 。将<code class="codeph">STATISTICS_LEVEL</code>设置为<code class="codeph">BASIC</code>会禁用许多Oracle数据库功能，包括ADDM，因此强烈建议不要这样做。
                     </p>
                     <div class="infoboxnotealso" id="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD__GUID-2E1A5D98-918C-4051-B784-B060C1F9C4B4">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<a href="../refrn/CONTROL_MANAGEMENT_PACK_ACCESS.html#REFRN-GUID-A5CA11BA-AE1F-4A2E-9C59-A98BA1F4E5C2" target="_blank"><code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code></a>和<a href="../refrn/STATISTICS_LEVEL.html#REFRN-GUID-16B23F95-8644-407A-A6C8-E85CADFA61FF" target="_blank"><code class="codeph">STATISTICS_LEVEL</code></a>初始化参数的信息，请<span class="italic">参见Oracle数据库参考</span></p>
                     </div>
                     <p>I / O性能的ADDM分析部分取决于单个参数<code class="codeph">DBIO_EXPECTED</code> ，它描述了I / O子系统的预期性能。<code class="codeph">DBIO_EXPECTED</code>的值是以微秒为单位读取单个数据库块所需的平均时间。Oracle数据库使用默认值10毫秒，这是大多数现代硬盘驱动器的适当值。如果您的硬件明显不同 - 例如非常旧的硬件或非常快的RAM磁盘 - 那么请考虑使用不同的值。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD__GUID-83877CCB-3119-4D64-932C-C2CDEEEC3217">要确定DBIO_EXPECTED参数的正确设置：</p>
                     <ol>
                        <li>
                           <p>测量为您的硬件读取的单个数据库块的平均读取时间。</p>
                           <p>请注意，此测量适用于随机I / O，包括使用标准硬盘驱动器时的搜索时间。硬盘驱动器的典型值介于5000和20000微秒之间。</p>
                        </li>
                        <li>
                           <p><a id="d19268e1569" class="indexterm-anchor"></a><a id="d19268e1573" class="indexterm-anchor"></a>为所有后续ADDM执行设置一次值。
                           </p>
                           <p>例如，如果测量值为8000微秒，则应以SYS用户身份执行以下命令：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_ADVISOR.SET_DEFAULT_TASK_PARAMETER（'ADDM'，'DBIO_EXPECTED'，8000）;</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TGDBA94246"></a><div class="props_rev_3"><a id="GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679" name="GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679"></a><h3 id="TGDBA-GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679" class="sect3"><span class="enumeration_section">7.3</span>使用ADDM诊断数据库性能问题</h3>
               <div>
                  <p>要诊断数据库性能问题，请首先查看每次执行AWR快照时自动创建的ADDM分析结果。如果需要进行不同的分析（例如更长的分析周期，使用不同的<code class="codeph">DBIO_EXPECTED</code>设置或更改分析模式），则可以按照本节中的说明手动运行ADDM。
                  </p>
                  <p>ADDM可以分析任何两个AWR快照（在同一个数据库上），只要两个快照仍然存储在AWR中（尚未清除）。ADDM只能分析在开始快照之前启动的实例，并保持运行直到结束快照。此外，ADDM不会分析在生成AWR快照时遇到重大错误的实例。在这种情况下，ADDM将分析未遇到这些问题的最大实例子集。</p>
                  <p>诊断监控的主要界面是云控制。尽可能使用Cloud Control运行ADDM，如<a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide中所述</span></a> 。如果Cloud Control不可用，则使用<code class="codeph">DBMS_ADDM</code>程序包运行ADDM。要运行<code class="codeph">DBMS_ADDM</code> API，必须为用户授予<code class="codeph">ADVISOR</code>权限。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1">在数据库模式下运行ADDM</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9">在实例模式下运行ADDM</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-848B8796-EDDC-4700-BCB9-261C9D21D853">在部分模式下运行ADDM</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942">显示ADDM报告</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679__GUID-87349219-CB01-45B5-BB94-8BCA9CDD1824">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">DBMS_ADDM</code>程序包的信息，请<code class="codeph">DBMS_ADDM</code> <a href="../arpls/DBMS_ADDM.html#ARPLS232" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a></p>
                  </div>
               </div><a id="TGDBA94247"></a><div class="props_rev_3"><a id="GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1" name="GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1"></a><h4 id="TGDBA-GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1" class="sect4"><span class="enumeration_section">7.3.1</span>在数据库模式下运行ADDM</h4>
                  <div>
                     <div class="section">
                        <p>对于Oracle RAC配置，您可以在数据库模式下运行ADDM以分析数据库的所有实例。对于单实例配置，您仍可以在数据库模式下运行ADDM; ADDM的行为就像在实例模式下运行一样。</p>
                        <p>要在数据库模式下运行ADDM，请使用<code class="codeph">DBMS_ADDM</code> 。 <code class="codeph">ANALYZE_DB</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_ADDM.ANALYZE_DB（task_name IN OUT VARCHAR2，begin_snapshot IN NUMBER，end_snapshot IN NUMBER，db_id IN NUMBER：= NULL）;结束; /</pre><p><code class="codeph">task_name</code>参数指定将创建的分析任务的名称。<code class="codeph">begin_snapshot</code>参数指定分析期间中开始快照的快照编号。<code class="codeph">end_snapshot</code>参数指定分析周期中结束快照的快照编号。<code class="codeph">db_id</code>参数指定要分析的数据库的数据库标识符。如果未指定，则此参数默认为您当前连接的数据库的数据库标识符。
                        </p>
                        <p>以下示例在数据库分析模式下创建ADDM任务，并执行该任务以在快照137和145定义的时间段内诊断整个数据库的性能：</p><pre class="oac_no_warn" dir="ltr">VAR tname VARCHAR2（30）;开始：tname：='ADDM为晚上7点到晚上9点'; DBMS_ADDM.ANALYZE_DB（：tname，137,145）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94248"></a><div class="props_rev_3"><a id="GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9" name="GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9"></a><h4 id="TGDBA-GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9" class="sect4"><span class="enumeration_section">7.3.2</span>在实例模式下运行ADDM</h4>
                  <div>
                     <div class="section">
                        <p>要分析数据库的特定实例，可以在实例模式下运行ADDM。要在实例模式下运行ADDM，请使用<code class="codeph">DBMS_ADDM</code> 。 <code class="codeph">ANALYZE_INST</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_ADDM.ANALYZE_INST（task_name IN OUT VARCHAR2，begin_snapshot IN NUMBER，end_snapshot IN NUMBER，instance_number IN NUMBER：= NULL，db_id IN NUMBER：= NULL）;结束; /</pre><p><code class="codeph">task_name</code>参数指定将创建的分析任务的名称。<code class="codeph">begin_snapshot</code>参数指定分析期间中开始快照的快照编号。<code class="codeph">end_snapshot</code>参数指定分析周期中结束快照的快照编号。<code class="codeph">instance_number</code>参数指定将要分析的实例的实例编号。如果未指定，则此参数默认为您当前连接的实例的实例编号。<code class="codeph">db_id</code>参数指定要分析的数据库的数据库标识符。如果未指定，则此参数默认为您当前连接的数据库的数据库标识符。
                        </p>
                        <p>以下示例在实例分析模式下创建ADDM任务，并执行该任务以在快照137和145定义的时间段内诊断实例编号1的性能：</p><pre class="oac_no_warn" dir="ltr">VAR tname VARCHAR2（30）;开始：tname：='我的ADDM为晚上7点到晚上9点'; DBMS_ADDM.ANALYZE_INST（：tname，137,145,1）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94249"></a><div class="props_rev_3"><a id="GUID-848B8796-EDDC-4700-BCB9-261C9D21D853" name="GUID-848B8796-EDDC-4700-BCB9-261C9D21D853"></a><h4 id="TGDBA-GUID-848B8796-EDDC-4700-BCB9-261C9D21D853" class="sect4"><span class="enumeration_section">7.3.3</span>在部分模式下运行ADDM</h4>
                  <div>
                     <div class="section">
                        <p>要分析所有数据库实例的子集，可以在“部分”模式下运行ADDM。要在部分模式下运行ADDM，请使用<code class="codeph">DBMS_ADDM</code> 。 <code class="codeph">ANALYZE_PARTIAL</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_ADDM.ANALYZE_PARTIAL（task_name IN OUT VARCHAR2，instance_numbers IN VARCHAR2，begin_snapshot IN NUMBER，end_snapshot IN NUMBER，db_id IN NUMBER：= NULL）;结束; /</pre><p><code class="codeph">task_name</code>参数指定将创建的分析任务的名称。<code class="codeph">instance_numbers</code>参数指定将要分析的实例的实例数的逗号分隔列表。<code class="codeph">begin_snapshot</code>参数指定分析期间中开始快照的快照编号。<code class="codeph">end_snapshot</code>参数指定分析周期中结束快照的快照编号。<code class="codeph">db_id</code>参数指定要分析的数据库的数据库标识符。如果未指定，则此参数默认为您当前连接的数据库的数据库标识符。
                        </p>
                        <p>以下示例在部分分析模式下创建ADDM任务，并在快照137和145定义的时间段内执行该任务以诊断实例编号1,2和4的性能：</p><pre class="oac_no_warn" dir="ltr">VAR tname VARCHAR2（30）;开始：tname：='我的ADDM为晚上7点到晚上9点'; DBMS_ADDM.ANALYZE_PARTIAL（：tname，'1,2,4'，137,145）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94250"></a><div class="props_rev_3"><a id="GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942" name="GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942"></a><h4 id="TGDBA-GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942" class="sect4"><span class="enumeration_section">7.3.4</span>显示ADDM报告</h4>
                  <div>
                     <div class="section">
                        <p>要显示已执行ADDM任务的文本报告，请使用<code class="codeph">DBMS_ADDM</code> 。 <code class="codeph">GET_REPORT</code>功能：</p><pre class="oac_no_warn" dir="ltr">DBMS_ADDM.GET_REPORT（task_name IN VARCHAR2 RETURN CLOB）;</pre><p>以下示例使用<code class="codeph">tname</code>变量显示由其任务名称指定的ADDM任务的文本报告：</p><pre class="oac_no_warn" dir="ltr">SET LONG 1000000 PAGESIZE 0; SELECT DBMS_ADDM.GET_REPORT（：tname）FROM DUAL;</pre><p>请注意，报表的返回类型是<code class="codeph">CLOB</code> ，格式设置为适合80行的大小。有关在ADDM报告中查看<span class="q"><a href="automatic-performance-diagnostics.html#GUID-824AA656-C199-437D-926B-A8F05590A65C">ADDM分析结果的信息</a></span> ，请参阅<span class="q">“ <a href="automatic-performance-diagnostics.html#GUID-824AA656-C199-437D-926B-A8F05590A65C">ADDM分析结果</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TGDBA94251"></a><div class="props_rev_3"><a id="GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129" name="GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129"></a><h3 id="TGDBA-GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129" class="sect3"><span class="enumeration_section">7.4</span> ADDM视图</h3>
               <div>
                  <div class="section">
                     <p>通常，您应该使用Cloud Control或<code class="codeph">DBMS_ADDM</code>程序<code class="codeph">DBMS_ADDM</code>程序查看ADDM分析。
                     </p>
                     <p>但是，您也可以使用<code class="codeph">DBA_ADDM_*</code>和<code class="codeph">DBA_ADVISOR_*</code>视图获取ADDM信息。这组意见包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_FINDINGS</code> 
                           </p>
                           <p>此视图显示所有顾问发现的所有结果。显示每个发现以及相关的查找ID，名称和类型。对于具有多个执行的任务，还会列出与每个查找关联的每个任务执行的名称。</p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADDM_FINDINGS</code></p>
                           <p>此视图包含相关<code class="codeph">DBA_ADVISOR_FINDINGS</code>视图中显示的结果的子集。此视图仅显示所有顾问发现的ADDM结果。将显示每个ADDM查找结果，其中包含相关的查找ID，名称和类型。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_FINDING_NAMES</code></p>
                           <p>此视图列出了使用顾问程序框架注册的所有查找名称。</p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_RECOMMENDATIONS</code> 
                           </p>
                           <p>此视图显示已完成诊断任务的结果，并提供每次执行中发现的问题的建议。建议应按<code class="codeph">RANK</code>专栏的顺序进行审查，因为这会传达建议问题的严重程度。<code class="codeph">BENEFIT</code>列显示执行推荐后您可以预期的系统优势。对于具有多个执行的任务，还会列出与每个顾问程序任务关联的每个任务执行的名称。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_TASKS</code> 
                           </p>
                           <p>此视图提供有关现有任务的基本信息，例如任务ID，任务名称以及创建任务的时间。对于具有多个执行的任务，还会列出与每个顾问程序任务关联的最后一个或当前执行的名称和类型。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129__GUID-6D554325-E510-4612-9093-2DC4F5A7951C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">DBA_ADDM_*</code>和<code class="codeph">DBA_ADVISOR_*</code>视图的更多信息，请<code class="codeph">DBA_ADDM_*</code> <a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="automatic-performance-diagnostics.html#GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942">显示ADDM报告</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04335.intro-to-SQLJ.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SQLJ简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQLJ Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQLJ Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlj-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T08:20:03-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96458-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="getting-started.html" title="Previous" type="text/html"></link>
      <link rel="next" href="key-programming-considerations.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQLJ Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JSQLJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="key-programming-considerations.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQLJ开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQLJ简介</li>
            </ol>
            <a id="GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48" name="GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48"></a><a id="JSQLJ136"></a>
            
            <h2 id="JSQLJ-GUID-B3A3C319-5C61-40C6-B3FB-37C2BD98AD48" class="sect2"><span class="enumeration_chapter">3</span> SQLJ简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章概述了SQLJ的功能和方案。讨论了以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B">SQLJ概述</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743">SQLJ组件概述</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676">SQLJ标准的Oracle扩展概述</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-79F6A0F5-6BCB-4509-8015-B6263933E152">基本翻译步骤和运行时处理</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B">SQLJ示例代码</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA">替代部署方案</a></p>
                  </li>
                  <li>
                     <p><a href="intro-to-SQLJ.html#GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5">替代发展方案</a></p>
                  </li>
               </ul>
            </div><a id="JSQLJ137"></a><div class="props_rev_3"><a id="GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B" name="GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B"></a><h3 id="JSQLJ-GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B" class="sect3">SQLJ概述</h3>
               <div>
                  <p>本节介绍SQLJ的基本概念，并讨论Oracle数据库应用程序中Java和PL / SQL之间的互补关系。</p>
                  <p>SQLJ使应用程序程序员能够以与Java设计理念兼容的方式在Java代码中嵌入SQL语句。SQLJ程序是一个包含嵌入式SQL语句的Java程序，符合国际标准化组织（ISO）标准SQLJ语言参考语法。Oracle SQLJ实现支持ISO SQLJ标准。该标准仅涵盖<span class="bold">静态SQL</span>操作，这些操作是在用户运行应用程序时不会实时更改的预定义SQL操作。Oracle SQLJ实现还提供了支持<span class="bold">动态SQL</span>操作的扩展，这些操作<span class="italic">不是</span>预定义的，操作可以实时更改。也可以在SQLJ应用程序中通过Java数据库连接（JDBC）代码或PL / SQL代码使用动态SQL操作。典型应用程序包含比动态SQL操作更多的静态SQL操作。
                  </p>
                  <p>SQLJ由转换程序和运行时组件组成，可以平滑地集成到您的开发环境中。您可以使用<code class="codeph">sqlj</code>前端实用程序在一个步骤中运行转换程序来翻译，编译和自定义代码。转换过程用对SQLJ运行时的调用替换嵌入式SQL语句，SQLJ运行时处理SQL语句。在ISO SQLJ标准中，这通常（但不一定）通过调用JDBC驱动程序来执行。要访问Oracle数据库，通常使用Oracle JDBC驱动程序。运行SQLJ应用程序时，将启动运行时以处理SQL操作。
                  </p>
                  <p>SQLJ转换器在概念上与其他Oracle预编译器类似，使您能够检查SQL语法，根据模式中可用的内容验证SQL操作，并检查Java类型与相应数据库类型的兼容性。通过这种方式，您可以在开发期间捕获错误，而不是用户在运行时捕获错误。翻译人员检查以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>嵌入式SQL语句的语法</p>
                     </li>
                     <li>
                        <p>SQL构造，针对指定的数据库模式，以确保特定SQL实体集中的一致性（可选）</p>
                        <p>例如，它验证表名和列名。</p>
                     </li>
                     <li>
                        <p>数据类型，以确保Java和SQL之间交换的数据具有兼容的类型和正确的类型转换</p>
                     </li>
                  </ul>
                  <p>直接在Java代码中嵌入SQL语句的SQLJ方法非常方便和简洁，它可以降低需要数据库连接的Java程序的开发和维护成本。</p>
                  <p>Java程序可以通过JDBC或SQLJ调用PL / SQL存储过程和匿名块。特别是，SQLJ提供了从SQLJ语句中调用存储过程和函数的语法，并且还支持SQLJ语句中的嵌入式PL / SQL匿名块。</p>
                  <div class="infoboxnote" id="GUID-7EDDF612-2C7C-4023-90F8-DCF291811D1B__GUID-7C2120C3-2878-45FA-B401-4257803015C5">
                     <p class="notep1">注意：</p>
                     <p>在SQLJ语句中使用PL / SQL匿名块是支持SQLJ应用程序中的动态SQL操作的一种方法。但是，Oracle SQLJ实现包含直接支持动态SQL的扩展。</p>
                  </div>
               </div>
            </div><a id="JSQLJ138"></a><div class="props_rev_3"><a id="GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743" name="GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743"></a><h3 id="JSQLJ-GUID-C824BC0E-4EE3-4F0D-9969-2F19B018E743" class="sect3">SQLJ组件概述</h3>
               <div>
                  <p>本节介绍Oracle SQLJ实现中的两个主要SQLJ组件。它包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189">SQLJ翻译功能</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6">SQLJ运行时</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ139"></a><div class="props_rev_3"><a id="GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189" name="GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189"></a><h4 id="JSQLJ-GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189" class="sect4">SQLJ翻译功能</h4>
                  <div>
                     <p>此组件是在创建SQLJ源代码后运行的预编译器。</p>
                     <p>翻译器以纯Java编写，支持编程语法，使您能够在SQLJ可执行语句中嵌入SQL语句。SQLJ可执行语句和SQLJ声明之前是<code class="codeph">#sql</code>标记，可以在SQLJ源代码文件中穿插Java语句。SQLJ源代码文件名必须具有<code class="codeph">.sqlj</code>扩展名。以下是SQLJ语句示例：</p><pre class="oac_no_warn" dir="ltr">#sql {INSERT INTO employees（first_name，salary）VALUES（'Joe'，43000）};</pre><p>翻译器生成<code class="codeph">.java</code>文件。
                     </p>
                     <p>您可以使用<code class="codeph">sqlj</code>命令行实用程序调用转换程序。在命令行上，指定需要翻译的文件和任何所需的SQLJ选项设置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-BDC15EAD-5848-43A6-8261-19D3BD12C189__GUID-AFEDAB80-A310-4341-92FC-DF6002F01781">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="translator-command-line-and-options.html#GUID-5161125F-E86D-472D-BC57-67AB9E0B08EB">翻译命令行和选项</a></p>
                     </div>
                  </div>
               </div><a id="JSQLJ140"></a><div class="props_rev_3"><a id="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6" name="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6"></a><h4 id="JSQLJ-GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6" class="sect4">SQLJ运行时</h4>
                  <div>
                     <p>该组件也是用纯Java编写的，每次运行SQLJ应用程序时都会自动调用。</p>
                     <p>Oracle JDBC调用直接生成到已翻译的代码中，并且SQLJ运行时扮演的角色要小得多。</p>
                     <div class="infoboxnotealso" id="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6__GUID-AD315FB0-CDB2-4059-83FC-20664E7B6F00">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-AFF5C519-028E-4554-98E8-B8FF103515D1">SQLJ运行时</a> ”</span></p>
                     </div>
                     <div class="infoboxnote" id="GUID-FADAA0D5-A849-4E26-BEFE-47D7073D21B6__GUID-09F95188-9764-4D7E-B710-60165E789B70">
                        <p class="notep1">注意：</p>
                        <p>自Oracle Database <span class="italic">10g</span>第1版以来，SQLJ仅支持Oracle JDBC驱动程序。</p>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ142"></a><div class="props_rev_3"><a id="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676" name="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676"></a><h3 id="JSQLJ-GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676" class="sect3">SQLJ标准的Oracle扩展概述</h3>
               <div>
                  <p>Oracle SQLJ实现支持ISO SQLJ标准。使用ISO SQLJ标准功能需要符合Java2平台企业版（J2EE）的Java Development Kit（JDK）6或更高版本的环境。SQLJ转换器接受比ISO SQLJ标准指定的更广泛的SQL语法。</p>
                  <div class="infoboxnote" id="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676__GUID-38D90CD2-04C6-46F9-B745-A28F1F06F7F8">
                     <p class="notep1">注意：</p>
                     <p>Oracle SQLJ实现需要JDK 6或JDK 7的运行时环境。</p>
                  </div>
                  <p>ISO SQLJ标准不仅解决了SQL的SQL-92 Entry级别方言，而且还支持超出此范围的扩展。Oracle SQLJ实现支持Oracle SQL方言，它是SQL-92 Entry级别的超集。如果需要创建与其他数据库一起使用的SQLJ程序，请避免使用不在SQL-92的Entry级别中的SQL语法和SQL类型，因此在其他环境中可能不受支持。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6">SQLJ类型扩展</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-54E27173-C5B1-402A-B673-ABFDB7693461">SQLJ功能扩展</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-18FAF725-041B-4CAF-BB03-FE3F780A8676__GUID-DBD9C238-50FA-4BD4-92B9-1614F572EB35">
                     <p class="notep1">也可以看看：</p>
                     <p>有关Oracle数据库提供的SQLJ扩展的信息，请<a href="type-support.html#GUID-5890BFD9-7FF0-4ED3-BBDB-9CC1B729E2C9">键入Support</a> ， <a href="objects-collections-and-OPAQUE-types.html#GUID-93B64A3E-4928-4039-BC10-D7B05E768BFF">Objects_ Collections_和OPAQUE Types</a></p>
                  </div>
               </div><a id="JSQLJ143"></a><div class="props_rev_3"><a id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6" name="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6"></a><h4 id="JSQLJ-GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6" class="sect4">SQLJ类型扩展</h4>
                  <div>
                     <div class="section">
                        <p>Oracle SQLJ实现支持以下Java类型作为SQLJ标准的扩展：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">oracle.sql.*</code>类的实例作为SQL数据的包装器。
                              </p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-8FC73C14-F619-43C0-AB85-C70114B1FA6E">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="type-support.html#GUID-9C82F6F4-197C-4B80-8491-B3CF03861384">支持JDBC 2.0 LOB类型和Oracle类型扩展</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>自定义Java类，对象引用和集合。例如，实现<code class="codeph">oracle.sql.类<code class="codeph">oracle.sql.ORAData</code>接口或JDBC标准<code class="codeph">java.sql.SQLdata</code>接口。
                              </p>
                              <div class="infoboxnote" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-42D1ECC0-3903-4697-B574-5F710E589F32">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">SQLData</code>接口是标准的。实现它的类由JDBC驱动程序和其他供应商的数据库支持。
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-C05B9042-4CF2-424E-8724-3A059CDC370E">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="objects-collections-and-OPAQUE-types.html#GUID-7B1AEDD4-C53B-47C9-973E-DD23EAA7608E">自定义Java类</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>流实例： <code class="codeph">BinaryStream</code>和<code class="codeph">CharacterStream</code> ，后者替换不推荐使用的<code class="codeph">AsciiStream</code>和<code class="codeph">UnicodeStream</code> ，用作输出参数。
                              </p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-3AFF9339-564F-4D8E-8B8C-742D7820BAA6">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="type-support.html#GUID-5C678045-D184-41AB-B339-9E1E12FE4D46">支持Streams</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>迭代器和结果集实例作为输入或输出参数。SQLJ标准仅在结果表达式或转换语句中指定它们。</p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-FD2623CD-C35C-4978-BF7B-981192D43291">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="basic-language-features.html#GUID-D3CC3825-1F5D-45AF-9E96-5848B98B7D21">使用迭代器和结果集作为主机变量</a> ”</span>和<span class="q">“ <a href="basic-language-features.html#GUID-F45F4FF0-6D2A-455D-A8A0-0BC3770845B2">使用迭代器和结果集作为存储函数返回</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>Unicode字符类型： <code class="codeph">NString</code> ， <code class="codeph">NCHAR</code> ， <code class="codeph">NCLOB</code>和<code class="codeph">NcharCharacterStream</code> ，后者取代了不推荐使用的<code class="codeph">NcharAsciiStream</code>和<code class="codeph">NcharUnicodeStream</code> 。
                              </p>
                              <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-EACE920B-6F91-4281-8401-D1077BEE8DFC">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077">SQLJ扩展全球化支持</a> ”</span></p>
                              </div>
                           </li>
                        </ul>
                        <p>在应用程序运行时，使用任何这些扩展都需要在转换期间生成特定于Oracle的代码或Oracle自定义，以及Oracle SQLJ运行时和Oracle JDBC驱动程序。如果要在其他环境中使用代码，请不要使用这些或其他类型。要确保您的应用程序是可移植的，请使用SQLJ <code class="codeph">-warn=portable</code>标志。
                        </p>
                        <div class="infoboxnotealso" id="GUID-144356A4-0E03-4586-B1CD-2A34D4285FF6__GUID-3189FE4E-943C-42F5-8754-CF27AD84C5F4">
                           <p class="notep1">也可以看看：</p>
                           <p>请参阅<span class="q">“ <a href="translator-command-line-and-options.html#GUID-5161125F-E86D-472D-BC57-67AB9E0B08EB">转换器命令行和选项</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ144"></a><div class="props_rev_3"><a id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461" name="GUID-54E27173-C5B1-402A-B673-ABFDB7693461"></a><h4 id="JSQLJ-GUID-54E27173-C5B1-402A-B673-ABFDB7693461" class="sect4">SQLJ功能扩展</h4>
                  <div>
                     <p>Oracle SQLJ实现还支持以下扩展功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>特定于Oracle的代码生成</p>
                           <p>这直接生成JDBC代码。程序执行期间绕过了大部分SQLJ运行时功能。</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-6A9515AD-2A18-4632-8812-81F93BB5E597">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>SQLJ语句中的动态SQL</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-8EC515DE-A5FB-4597-8BCB-FFDBCFFCCD83">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="advanced-language-features.html#GUID-1A237022-5F1E-4C29-87D3-8E913F59C3FA">支持动态SQL</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>具有其他导航方法的可滚动结果集迭代器，以及来自结果集迭代器和可滚动结果集迭代器的<code class="codeph">FETCH</code>语法</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-EB175895-72BE-4F48-AE21-72AE26CA0140">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“可<a href="advanced-language-features.html#GUID-398B03B4-138D-41E6-A34B-B4911ACF7A18">滚动迭代器</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>列和参数大小定义的优化标志</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-B88857F9-82D0-4716-BEA3-DAD572D99CCD">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="performance-and-debugging.html#GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50">列定义</a> ”</span> ， <span class="q">“ <a href="performance-and-debugging.html#GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D">参数大小定义</a> ”</span>和<span class="q">“ <a href="translator-command-line-and-options.html#GUID-51E9826F-8FD9-48CD-9423-9DA8CDC10180">代码生成_优化_和CHAR比较的选项</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>修改的转换器行为的标志，例如通过标识符绑定主机表达式或在<code class="codeph">WHERE</code>子句的<code class="codeph">CHAR</code>比较中计算空白填充</p>
                        </li>
                        <li>
                           <p>SQLJ语句缓存连接上下文</p>
                           <div class="infoboxnotealso" id="GUID-54E27173-C5B1-402A-B673-ABFDB7693461__GUID-B9095FBA-BBDA-4B6A-81F3-F0F62223F314">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="performance-and-debugging.html#GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A">声明缓存</a> ”</span></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="JSQLJ145"></a><div class="props_rev_3"><a id="GUID-79F6A0F5-6BCB-4509-8015-B6263933E152" name="GUID-79F6A0F5-6BCB-4509-8015-B6263933E152"></a><h3 id="JSQLJ-GUID-79F6A0F5-6BCB-4509-8015-B6263933E152" class="sect3">基本翻译步骤和运行时处理</h3>
               <div>
                  <p>SQLJ源代码包含标准Java源代码和SQLJ类声明以及包含嵌入式SQL语句的SQLJ可执行语句的混合。SQLJ源文件具有<code class="codeph">.sqlj</code>文件扩展名。文件名必须是合法的Java标识符。如果源文件声明了公共类，则文件名必须与此类的名称匹配。如果源文件未声明公共类，则文件名应与第一个定义的类的名称匹配。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4">SQLJ翻译步骤</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0">译者输入输出综述</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0">SQLJ运行时处理</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ147"></a><a id="JSQLJ148"></a><a id="JSQLJ146"></a><div class="props_rev_3"><a id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4" name="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4"></a><h4 id="JSQLJ-GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4" class="sect4">SQLJ翻译步骤</h4>
                  <div>
                     <div class="section">
                        <p>编写<code class="codeph">.sqlj</code>文件后，必须运行SQLJ来处理文件。下面的示例显示SQLJ以最简单的形式运行，没有带有公共类<code class="codeph">Foo</code>的<code class="codeph">Foo.sqlj</code>源文件的命令行选项：</p><pre class="oac_no_warn" dir="ltr">％sqlj Foo.sqlj</pre><p>此命令根据平台运行前端脚本或实用程序。脚本或实用程序读取命令行，调用Java虚拟机（JVM）并将参数传递给它。JVM调用SQLJ转换器并充当前端。</p>
                        <div class="figure" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-0B49E7D8-4C57-4CE1-83AC-1AB534FB5196">
                           <p class="titleinfigure">图3-1控制流程</p><img src="img/flow_of_control.gif" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/flow_of_control.html"><br><a href="img_text/flow_of_control.html">“图3-1控制流程”的描述</a></div>
                        <!-- class="figure" -->
                        <p>发生以下事件序列，假设每个步骤完成且没有错误：</p>
                        <ol>
                           <li>
                              <p>JVM调用SQLJ转换器。</p>
                           </li>
                           <li>
                              <p>翻译器解析<code class="codeph">.sqlj</code>文件中的SQLJ和Java代码，检查正确的SQLJ语法并查找声明的SQL数据类型与相应的Java主机变量之间的类型不匹配。<a id="d6042e662" class="indexterm-anchor"></a> <span class="bold">宿主变量</span>是Java本地变量，在SQL操作中用作输入或输出参数。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-8AAC5066-1FFD-4911-8C09-645A8E45559B">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="basic-language-features.html#GUID-7B85631F-98E1-4A9A-BBC1-181A53D0D03D">Java Host_ Context_和结果表达式</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>根据SQLJ选项设置，转换程序不会调用联机语义检查程序，脱机解析程序或两者。这是为了验证嵌入式SQL和PL / SQL语句的语法，并检查代码中的数据库元素是否与适当的数据库模式一起使用，以进行在线检查。即使两者都没有指定，也会执行一些基本的检查。</p>
                              <p>指定联机检查后，SQLJ将连接到指定的数据库模式，以验证数据库是否支持应用程序使用的所有数据库表，存储过程和SQL语法。它还验证SQLJ应用程序中的主机变量类型是否与相应数据库列的数据类型兼容。</p>
                           </li>
                           <li>
                              <p>对于特定于Oracle的SQLJ代码生成（ <code class="codeph">-codegen=oracle</code> ，这是默认的），SQL操作将直接转换为Oracle JDBC调用。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-4CF14C0C-1F89-4CEC-98A8-00DBF84FF371">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                              </div>
                              <p>生成的Java代码放入包含以下内容的<code class="codeph">.java</code>输出文件中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>来自<code class="codeph">.sqlj</code>源文件的任何类定义和Java代码</p>
                                 </li>
                                 <li>
                                    <p>作为SQLJ迭代器和连接上下文声明的结果创建的类定义</p>
                                    <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-81FBF5C3-5F4B-4EB8-AA60-C889397CC974">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="basic-language-features.html#GUID-74A36C5C-B63E-4489-A464-47387ABCB24E">SQLJ声明概述</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>调用Oracle JDBC驱动程序以实现嵌入式SQL操作的操作</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>JVM调用Java编译器，该编译器通常（但不一定）是随Sun Microsystems JDK提供的标准<code class="codeph">javac</code> 。</p>
                           </li>
                           <li>
                              <p>编译器编译在步骤4中生成的Java源文件，并根据需要生成Java <code class="codeph">.class</code>文件。这将包括每个定义的类的<code class="codeph">.class</code>文件，每个SQLJ声明。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-C7882D07-F495-4768-B542-35123A091656">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-D48A9F0A-67FD-4B49-B219-7EC6FEE1F4E3">内部翻译操作</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-514BD678-C238-4104-9080-7C688C8DC71E">一般SQLJ笔记</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在翻译和运行SQLJ应用程序时请考虑以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span>前面是一个非常通用的例子。</span>也可以在命令行上指定要编译的现有<code class="codeph">.java</code>文件，也可以用于类型解析。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9DD78C77-83EA-4F21-9A17-08027BCE08C4__GUID-9EEE21E6-ABC1-4662-B95E-80809DFFE904">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-F40E0AE9-4103-4878-B21B-7B0BC275F67C">翻译命令行和属性文件</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>您的应用程序在运行时需要Oracle JDBC驱动程序，即使您的代码不使用Oracle特定的功能。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ149"></a><div class="props_rev_3"><a id="GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0" name="GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0"></a><h4 id="JSQLJ-GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0" class="sect4">译者输入输出综述</h4>
                  <div>
                     <p>本节总结了SQLJ转换器的输入内容，输出内容以及输出的位置。本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243">译者输入</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3">译者输出</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7">输出文件位置</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-68C57EA9-1ECC-424A-902C-25C087DB9AA0__GUID-F9378DF4-DE07-41E0-AC5D-186A7F3A45AA">
                        <p class="notep1">注意：</p>
                        <p>这个讨论提到了迭代器类和连接上下文类声明。迭代器类似于JDBC结果集，连接上下文用于数据库连接。</p>
                     </div>
                  </div><a id="JSQLJ150"></a><div class="props_rev_3"><a id="GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243" name="GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243"></a><h5 id="JSQLJ-GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243" class="sect5">译者输入</h5>
                     <div>
                        <p>SQLJ转换器将一个或多个<code class="codeph">.sqlj</code>源文件作为输入，可以在命令行中指定。主<code class="codeph">.sqlj</code>文件的名称基于它定义的公共类，如果有的话，在它定义的第一个类上。
                        </p>
                        <p>如果主<code class="codeph">.sqlj</code>文件定义了<code class="codeph">MyClass</code>类，那么源文件名必须是：</p><pre class="oac_no_warn" dir="ltr">MyClass.sqlj</pre><p>如果没有公共类定义，那么它也必须是文件名，但<code class="codeph">MyClass</code>是第一个定义的类。您必须在单独的<code class="codeph">.sqlj</code>文件中定义每个公共类。运行SQLJ时，还可以在命令行或属性文件中指定多个SQLJ选项。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F6F8C7BD-70B8-4C22-B98F-CD44962D3243__GUID-0D1E18EC-9EC8-47F1-8FD6-C48F13D2EC51">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-F40E0AE9-4103-4878-B21B-7B0BC275F67C">翻译命令行和属性文件</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="JSQLJ151"></a><div class="props_rev_3"><a id="GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3" name="GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3"></a><h5 id="JSQLJ-GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3" class="sect5">译者输出</h5>
                     <div>
                        <p>转换步骤为应用程序中的每个<code class="codeph">.sqlj</code>文件生成一个Java源文件，假设源代码使用SQLJ可执行语句。
                        </p>
                        <p>SQLJ生成Java源文件，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Java源文件是<code class="codeph">.java</code>文件，其基本名称与<code class="codeph">.sqlj</code>文件相同。
                              </p>
                              <p>例如，翻译器生成<code class="codeph">MyClass.java</code>对应于<code class="codeph">MyClass.sqlj</code> ，它定义了<code class="codeph">MyClass</code>类。输出<code class="codeph">.java</code>文件还包含<code class="codeph">.sqlj</code>文件中声明的任何迭代器或连接上下文类的类定义。
                              </p>
                           </li>
                        </ul>
                        <p>编译步骤将Java源文件编译为多个类文件。为<code class="codeph">.sqlj</code>源文件中定义的每个类生成一个<code class="codeph">.class</code>文件。如果声明了任何SQLJ迭代器或连接上下文，则会生成其他<code class="codeph">.class</code>文件。此外，将为代码中的任何内部类或匿名类生成单独的<code class="codeph">.class</code>文件。
                        </p>
                        <div class="infoboxnotealso" id="GUID-AB5D0342-DC8A-4435-8B40-8EE70875DBB3__GUID-37857346-500D-47E0-B9FA-491264A01A9C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="basic-language-features.html#GUID-74A36C5C-B63E-4489-A464-47387ABCB24E">SQLJ声明概述</a> ”</span></p>
                        </div>
                        <p><code class="codeph">.class</code>文件的名称如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>定义的每个类的类文件包含具有<code class="codeph">.class</code>扩展名的类的名称。例如，转换器输出文件<code class="codeph">MyClass.java</code>被编译到<code class="codeph">MyClass.class</code>类文件中。
                              </p>
                           </li>
                           <li>
                              <p>转换程序根据您声明它们的方式命名迭代器类和连接上下文类。例如，如果声明迭代器<code class="codeph">MyIter</code> ，则编译器将生成相应的<code class="codeph">MyIter.class</code>类文件。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="JSQLJ152"></a><div class="props_rev_3"><a id="GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7" name="GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7"></a><h5 id="JSQLJ-GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7" class="sect5">输出文件位置</h5>
                     <div>
                        <p>默认情况下，SQLJ将生成的<code class="codeph">.java</code>文件放在与<code class="codeph">.sqlj</code>文件相同的目录中。您可以使用SQLJ <code class="codeph">-dir</code>选项指定其他<code class="codeph">.java</code>文件位置。
                        </p>
                        <p>默认情况下，SQLJ将生成的<code class="codeph">.class</code>和<code class="codeph">.ser</code>文件放在与生成的<code class="codeph">.java</code>文件相同的目录中。您可以使用SQLJ <code class="codeph">-d</code>选项为<code class="codeph">.class</code>和<code class="codeph">.ser</code>文件指定其他位置。此选项设置将传递给Java编译器，以便<code class="codeph">.class</code>文件和<code class="codeph">.ser</code>文件位于同一位置。
                        </p>
                        <p>对于<code class="codeph">-d</code>和<code class="codeph">-dir</code>选项，必须指定已存在的目录。
                        </p>
                        <div class="infoboxnotealso" id="GUID-88DCEAAC-F9CD-43BD-BC31-CE3F3745FBD7__GUID-D6289D57-8356-40B9-8221-47FD8126FCDE">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-93FF52FC-8C29-488C-B82D-FFA8A6C5A03B">输出文件和目录的选项</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="JSQLJ153"></a><div class="props_rev_3"><a id="GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0" name="GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0"></a><h4 id="JSQLJ-GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0" class="sect4">SQLJ运行时处理</h4>
                  <div>
                     <p>本节讨论程序执行期间的运行时处理。</p>
                     <p>使用默认的<code class="codeph">-codegen=oracle</code>设置进行翻译时，程序在运行时执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行特定于Oracle的应用程序编程接口（API），以确保批处理支持以及正确创建和关闭Oracle JDBC语句</p>
                        </li>
                        <li>
                           <p>直接调用Oracle JDBC API以注册，传递和检索参数和结果集</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A5327908-94E5-4D54-AD9D-4CDDE6181BD0__GUID-C1866CA4-A09F-46C9-B856-DF283F70524E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ155"></a><div class="props_rev_3"><a id="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B" name="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B"></a><h3 id="JSQLJ-GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B" class="sect3">SQLJ示例代码</h3>
               <div>
                  <p>本节将对同一示例代码的两个版本进行并排比较，其中一个版本用SQLJ编写，另一个版本用JDBC编写。本节的目的是指出SQLJ和JDBC之间的编码要求的差异。本节包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF">示例代码的SQLJ版本</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8">示例代码的JDBC版本</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B__GUID-C09DF325-5EF3-49DF-99E0-159129459E19">
                     <p class="notep1">注意：</p>
                     <p>此处使用的SQLJ语句和功能的详细信息将在本手册的后面部分进行介绍，但此示例在此处仍然有用，可以为您提供比较和对比SQLJ和JDBC的一般概念。当您更熟悉SQLJ概念和功能时，可以再次查看它。</p>
                  </div>
                  <p>在该示例中，定义了两种方法： <code class="codeph">getEmployeeAddress()</code> ，它根据员工的编号从表中选择并返回员工的地址; <code class="codeph">updateAddress()</code> ，它获取检索到的地址，调用存储过程，并返回更新的地址到数据库。
                  </p>
                  <p>在示例代码的两个版本中，进行了以下假设：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>已运行SQL脚本以在数据库中创建架构并填充表。示例代码的两个版本都引用此脚本创建的对象和表。</p>
                     </li>
                     <li>
                        <p>存在<code class="codeph">UPDATE_ADDRESS()</code> PL / SQL存储函数，它更新给定地址。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">Connection</code>对象（对于JDBC）和默认连接上下文（对于SQLJ）先前已由调用者创建。
                        </p>
                     </li>
                     <li>
                        <p>例外由呼叫者处理。</p>
                     </li>
                     <li>
                        <p>传递给<code class="codeph">updateAddress()</code>方法的address参数<code class="codeph">addr</code>的值可以为<code class="codeph">null</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-439F143B-3A71-4C4E-94A3-2B32A91CAC9B__GUID-F1752B66-FA84-4F38-9260-1E292ED87885">
                           <p class="notep1">注意：</p>
                           <p>示例代码的JDBC和SQLJ版本只是部分样本，不能独立运行。两者中都没有<code class="codeph">main()</code>方法。
                           </p>
                        </div>
                     </li>
                  </ul>
               </div><a id="JSQLJ157"></a><a id="JSQLJ158"></a><a id="JSQLJ159"></a><a id="JSQLJ160"></a><a id="JSQLJ161"></a><a id="JSQLJ162"></a><a id="JSQLJ163"></a><a id="JSQLJ156"></a><div class="props_rev_3"><a id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF" name="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF"></a><h4 id="JSQLJ-GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF" class="sect4">示例代码的SQLJ版本</h4>
                  <div>
                     <p>定义从数据库检索员工地址，更新地址并将其返回数据库的方法的示例代码的SQLJ版本如下：</p><pre class="oac_no_warn" dir="ltr">import java.sql。*; / **这是你要在SQLJ中做的事情** / public class SimpleDemoSQLJ //第6行{// DO TO：make一个main来调用这个公共地址getEmployeeAddress（int empno）//第10行抛出SQLException {Address addr ; //第13行#sql {SELECT office_addr INTO：addr FROM employees WHERE empnumber =：empno};返回地址; } //第18行公共地址updateAddress（地址addr）抛出SQLException {#sql addr = {VALUES（UPDATE_ADDRESS（：addr））}; //第22行返回addr; }}</pre><div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-5807968D-8FA9-471A-861E-506D16AC66E0">第10行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">getEmployeeAddress()</code>方法不需要显式的<code class="codeph">Connection</code>对象。SQLJ可以使用默认的连接上下文实例，该实例应该在应用程序的早期某处初始化。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-4963BA2B-1C56-44A9-AA25-4FC2F95AAFD7">第13-15行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">getEmployeeAddress()</code>方法根据员工编号检索员工地址。如果员工编号与传入<code class="codeph">getEmployeeAddress()</code>那个（ <code class="codeph">empno</code> ）匹配，请使用标准SQLJ <code class="codeph">SELECT</code> <code class="codeph">INTO</code>语法从<code class="codeph">employee</code>表中选择员工的地址。这需要声明将接收数据的<code class="codeph">Address</code>对象（ <code class="codeph">addr</code> ）。<code class="codeph">empno</code>和<code class="codeph">addr</code>变量用作输入主变量。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-3A7A0A63-8B75-410A-9294-5B94A818D772">第16行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">getEmployeeAddress()</code>方法返回<code class="codeph">addr</code>对象。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-047CAC9E-2A9F-442B-AC6D-F9246D866FBB">第19行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">updateAddress()</code>方法还使用默认连接上下文实例。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-905EEA92-A07C-4FE2-B04A-F3BA9014FA8C">第19-22行</p>
                     </div>
                     <!-- class="section" -->
                     <p>该地址将传递给<code class="codeph">updateAddress()</code>方法，该方法将其传递给数据库。数据库更新地址并将其传回。地址的实际更新由<code class="codeph">UPDATE_ADDRESS()</code>存储函数执行。使用标准SQLJ函数调用语法来接收<code class="codeph">UPDATE_ADDRESS()</code>返回的<code class="codeph">addr</code>地址对象。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-9BCEB741-B9D5-4D7C-95DF-B9C1BB9F3A9E">第23行</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">updateAddress()</code>方法返回<code class="codeph">addr</code>对象。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DF3C2511-A96E-44C4-9841-DE0346DE33AF__GUID-BC2C219E-193D-47A9-A423-0B265BF058C4">SQLJ版本代码的特定功能</p>
                     </div>
                     <!-- class="section" -->
                     <p>请注意示例代码的SQLJ版本的以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不需要显式连接。SQLJ可以使用先前在应用程序中初始化的默认连接上下文。</p>
                        </li>
                        <li>
                           <p>不需要数据类型转换。</p>
                        </li>
                        <li>
                           <p>SQLJ不需要<code class="codeph">_SQL_TYPECODE</code> ， <code class="codeph">_SQL_NAME</code>或工厂的知识。
                           </p>
                        </li>
                        <li>
                           <p>隐式处理<code class="codeph">NULL</code>值数据。
                           </p>
                        </li>
                        <li>
                           <p>不需要用于资源管理的显式代码（例如，结束语句或结果集）。</p>
                        </li>
                        <li>
                           <p>与使用参数标记的JDBC相比，SQLJ嵌入了主机变量。</p>
                        </li>
                        <li>
                           <p>不需要长SQL语句的字符串连接。</p>
                        </li>
                        <li>
                           <p>您不必注册输出参数。</p>
                        </li>
                        <li>
                           <p>SQLJ语法更简单。例如，支持<code class="codeph">SELECT INTO</code>语句，并且不使用ODBC样式的转义。
                           </p>
                        </li>
                        <li>
                           <p>您不必实现自己的语句缓存。默认情况下，SQLJ将自动缓存<code class="codeph">#sql</code>语句。这样可以提高性能，例如，如果重复调用<code class="codeph">getEmployeeAddress()</code>和<code class="codeph">updateAddress()</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSQLJ164"></a><div class="props_rev_3"><a id="GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8" name="GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8"></a><h4 id="JSQLJ-GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8" class="sect4">示例代码的JDBC版本</h4>
                  <div>
                     <p>如果您熟悉JDBC，那么您可以检查以下示例代码的JDBC版本，该版本定义了从数据库检索员工地址，更新地址并将其返回到数据库的方法。</p>
                     <div class="infoboxnote" id="GUID-3BBCA271-5A46-4CCB-B1FB-33C96158FAA8__GUID-605117A3-1CD9-4AD5-8F5A-99AC241701F1">
                        <p class="notep1">注意：</p>
                        <p>注释行中的<code class="codeph">TO DO</code>项指示您可能希望添加其他代码的位置，以增加代码示例的有用性。
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">import java.sql。*; import oracle.jdbc。*; / **这是你在JDBC中必须做的事情** / public class SimpleDemoJDBC //第7行{// DO TO：make一个调用这个公共地址的main getEmployeeAddress（int empno，Connection conn）抛出SQLException //第13行{地址地址; PreparedStatement pstmt = //第16行conn.prepareStatement（“SELECT office_addr FROM employees”+“WHERE empnumber =？“）; pstmt.setInt（1，empno）; OracleResultSet rs =（OracleResultSet）pstmt.executeQuery（）; rs.next（）; //第21行// TO DO：假如果为false（结果集不包含数据）？addr =（Address）rs.getORAData（1，Address.getORADataFactory（））; //要做：如果有额外的行怎么办？rs.close（）; //第25行pstmt.close（）;返回地址; //第27行} public Address updateAddress（Address addr，Connection conn）抛出SQLException //第30行{OracleCallableStatement cstmt =（OracleCallableStatement）conn.prepareCall（“{？=调用UPDATE_ADDRESS（？）}“;; //第34行cstmt.registerOutParameter（1，地址。_SQL_TYPECODE，地址。_SQL_NAME）; //第36行if（addr == null）{cstmt.setNull（2，Address。_SQL_TYPECODE，地址。_SQL_NAME）; } else {cstmt.setORAData（2，addr）; } cstmt.executeUpdate（）; //第43行addr =（地址）cstmt.getORAData（1，Address.getORADataFactory（））; cstmt.close（）; //第45行返回addr; }}</pre></div>
               </div>
            </div><a id="JSQLJ175"></a><div class="props_rev_3"><a id="GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA" name="GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA"></a><h3 id="JSQLJ-GUID-24B99BA3-A097-447B-82F6-E234FFD7B9CA" class="sect3">替代部署方案</h3>
               <div>
                  <p>虽然本手册主要讨论为客户端SQLJ应用程序编写，但您可能会发现从applet运行SQLJ代码很有用。</p>
               </div><a id="JSQLJ176"></a><div class="props_rev_3"><a id="GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C" name="GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C"></a><h4 id="JSQLJ-GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C" class="sect4">在Applet中运行SQLJ</h4>
                  <div>
                     <p>因为SQLJ运行时是纯Java，所以可以在applet和应用程序中使用SQLJ源代码。但是，有一些考虑因素。</p>
                     <div class="infoboxnotealso" id="GUID-DDFECBEB-E853-4163-A704-5D487AE85B3C__GUID-414C71BA-B514-45CC-9F7D-426EF96580B6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../jjdbc/index.html" target="_blank"><span><cite>Oracle数据库JDBC开发人员指南</cite></span></a></p>
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584">一般开发和部署注意事项</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7">一般最终用户注意事项</a></p>
                        </li>
                        <li>
                           <p><a href="intro-to-SQLJ.html#GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64">Java环境和Java插件</a></p>
                        </li>
                     </ul>
                  </div><a id="JSQLJ177"></a><div class="props_rev_3"><a id="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584" name="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584"></a><h5 id="JSQLJ-GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584" class="sect5">一般开发和部署注意事项</h5>
                     <div>
                        <p>以下一般注意事项适用于在applet中使用SQLJ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须使用applet打包所有SQLJ运行时包。包裹是：</p><pre class="oac_no_warn" dir="ltr">sqlj.runtime sqlj.runtime.ref sqlj.runtime.error</pre><p>如果您使用Oracle自定义，还要打包以下内容：</p><pre class="oac_no_warn" dir="ltr">oracle.sqlj.runtime oracle.sqlj.runtime.error</pre><p>这些包随Oracle安装一起包含在<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/lib</code>目录中的多个运行时库之一中。
                              </p>
                              <div class="infoboxnotealso" id="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584__GUID-EEAE96FC-4A21-4215-8E41-9E4A9BCEC28C">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="getting-started.html#GUID-59D43923-4D2A-42FB-8F03-9CF1F3B60C67">使用Oracle SQLJ实现的要求</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>您必须为数据库连接指定纯Java JDBC驱动程序，例如Oracle JDBC Thin驱动程序。</p>
                           </li>
                           <li>
                              <p>您必须为applet中的每个SQLJ可执行语句显式指定连接上下文实例。这是一个要求，因为您可以想象在一个浏览器中运行两个SQLJ小程序，因此，在同一个JVM中。</p>
                              <div class="infoboxnotealso" id="GUID-A3166984-C5A5-46DF-B29C-4F3A21C86584__GUID-BF407659-5BBD-4278-8301-EFDDF5AB21F6">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="key-programming-considerations.html#GUID-02A50813-2D4D-4DC1-AD1A-014AF1EDC03D">连接注意事项</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>默认转换程序设置<code class="codeph">-codegen=oracle</code>生成特定于Oracle的代码。这将消除在运行时使用Java反射，从而提高跨不同浏览器环境的可移植性。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="JSQLJ178"></a><div class="props_rev_3"><a id="GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7" name="GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7"></a><h5 id="JSQLJ-GUID-5EB10A9A-F953-4915-ADB5-CBB0D93741F7" class="sect5">一般最终用户注意事项</h5>
                     <div>
                        <p>当最终用户运行SQLJ applet时，其<code class="codeph">CLASSPATH</code>类可能与使用applet下载的类冲突。因此，Oracle建议最终用户在运行applet之前清除其<code class="codeph">CLASSPATH</code> 。
                        </p>
                     </div>
                  </div><a id="JSQLJ179"></a><div class="props_rev_3"><a id="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64" name="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64"></a><h5 id="JSQLJ-GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64" class="sect5">Java环境和Java插件</h5>
                     <div>
                        <p>以下是有关Java环境和Oracle特定功能使用的一些其他注意事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>SQLJ需要JDK 6或JDK 7的运行时环境。用户无法在没有插件的早期JDK版本的浏览器中运行SQLJ小程序。一种选择是使用Sun Microsystems提供的Java插件。有关信息，请参阅以下内容：</p>
                              <p><a href="http://www.oracle.com/technetwork/java/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/java/index.html</code></a></p>
                           </li>
                           <li>
                              <p>使用Oracle特定功能的Applet需要Oracle SQLJ运行时才能运行。Oracle SQLJ运行时由<code class="codeph">oracle.sqlj.下的SQLJ运行时库文件中的类组成<code class="codeph">oracle.sqlj.*</code> 。Oracle SQLJ <code class="codeph">runtime.jar</code>库需要Java Reflection API， <code class="codeph">java.lang.reflect.*</code> 。大多数浏览器不支持Reflection API或强加安全限制，但Sun Microsystems Java插件提供对Reflection API的支持。</p>
                              <div class="infoboxnote" id="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64__GUID-0F25EAAD-1605-448D-A5C1-A576BA0B2886">
                                 <p class="notep1">注意：</p>
                                 <p>术语“Oracle特定功能”是指使用Oracle类型扩展（在<a href="type-support.html#GUID-5890BFD9-7FF0-4ED3-BBDB-9CC1B729E2C9">类型支持中</a>讨论）和使用需要特定于Oracle的代码生成的SQLJ功能，或者对于ISO SQLJ标准代码生成，需要定制应用程序对抗Oracle数据库实例。（例如，在<a href="basic-language-features.html#GUID-D93359BA-4F29-49C2-8AAE-23F8BBCE8BE5">基本语言功能中</a>讨论的<code class="codeph">SET</code>语句也是如此。）
                                 </p>
                              </div>
                           </li>
                        </ul>
                        <p>上述问题可归纳如下，重点关注使用Internet Explorer和Netscape浏览器的用户：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>SQLJ和JDBC版本应该匹配。例如，要使用SQLJ 9.0.0运行时，必须具有Oracle 9.0.0或更早版本的JDBC驱动程序。</p>
                              <div class="infoboxnotealso" id="GUID-48C29710-7EBB-4D2F-AD7A-F7E1A401AE64__GUID-509F1E71-34A0-440B-92B7-DE149ECB63E1">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="getting-started.html#GUID-59D43923-4D2A-42FB-8F03-9CF1F3B60C67">使用Oracle SQLJ实现的要求</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>如果在SQLJ语句中使用对象类型，JDBC 2.0类型，REF CURSOR或<code class="codeph">CAST</code>语句，则必须遵循以下选择：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>翻译applet时使用默认的<code class="codeph">-codegen=oracle</code>设置。
                                    </p>
                                 </li>
                                 <li>
                                    <p>确保您使用的浏览器支持JDK 6并允许反射。</p>
                                 </li>
                                 <li>
                                    <p>通过浏览器Java插件运行您的applet。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ181"></a><div class="props_rev_3"><a id="GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5" name="GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5"></a><h3 id="JSQLJ-GUID-8F7DF27B-A577-47F3-B93B-9E38A1CC55B5" class="sect3">替代发展方案</h3>
               <div>
                  <p>本书中的讨论假定您在UNIX环境中手动编码以进行英语部署。但是，您可以在其他平台和集成开发环境（IDE）上使用SQLJ。还有全球化支持部署到其他语言。本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6">SQLJ全球化支持</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1">Oracle JDeveloper 10g和其他IDE中的SQLJ</a></p>
                     </li>
                     <li>
                        <p><a href="intro-to-SQLJ.html#GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19">Windows注意事项</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ182"></a><div class="props_rev_3"><a id="GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6" name="GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6"></a><h4 id="JSQLJ-GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6" class="sect4">SQLJ全球化支持</h4>
                  <div>
                     <p>Oracle SQLJ实现支持本机语言和字符编码基于Java内置的全球化支持功能。</p>
                     <p>JVM的标准<code class="codeph">user.language</code>和<code class="codeph">file.encoding</code>属性确定转换器和运行时消息的适当语言和编码。的SQLJ <code class="codeph">-encoding</code>选项确定在翻译过程中解释并生成源文件的编码。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E899FCDF-3B6D-4098-8864-964DD876C4E6__GUID-3E27AE47-5F5B-4871-9E2C-32FF01D713C1">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-run-time-functionality.html#GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6">翻译和运行时的全球化支持</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="JSQLJ183"></a><div class="props_rev_3"><a id="GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1" name="GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1"></a><h4 id="JSQLJ-GUID-D6B8A198-C2B1-416A-BDC0-558A8B1F7FF1" class="sect4">Oracle JDeveloper <span class="italic">10g</span>和其他IDE中的SQLJ</h4>
                  <div>
                     <p>Oracle SQLJ实现包括一个编程API，因此可以嵌入到IDE中，例如Oracle JDeveloper <span class="italic">10g</span> 。IDE具有类似于前端<code class="codeph">sqlj</code>脚本的角色，调用转换器，语义检查器，编译器和定制器（如果适用）。
                     </p>
                     <p>JDeveloper是一个基于Jave的跨平台可视化开发环境，适用于Java编程。JDeveloper Suite使开发人员能够跨Oracle Internet平台使用Java构建多层，可扩展的Internet应用程序。该套件的核心产品JDeveloper IDE擅长创建，调试和部署基于组件的应用程序。</p>
                     <p>JDeveloper附带了Oracle JDBC OCI和Thin驱动程序。JDeveloper的编译功能包括一个集成的SQLJ转换器，以便您的SQLJ应用程序在编译时自动转换。</p>
                  </div>
               </div><a id="JSQLJ184"></a><div class="props_rev_3"><a id="GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19" name="GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19"></a><h4 id="JSQLJ-GUID-4B4D56E6-02C4-4A69-B1C2-929AB5B3EE19" class="sect4">Windows注意事项</h4>
                  <div>
                     <p>如果您使用的是Microsoft Windows环境而不是UNIX环境，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>本手册使用UNIX语法。在Microsoft Windows上使用特定于平台的文件名和目录分隔符（适用于您的平台），因为JVM需要特定于平台的格式的文件名和路径。即使您使用允许不同文件名语法的shell（例如<code class="codeph">ksh</code> ）也是如此。
                           </p>
                        </li>
                        <li>
                           <p>对于UNIX，Oracle SQLJ实现提供了一个用于调用SQLJ转换器的前端脚本<code class="codeph">sqlj</code> 。在Microsoft Windows上，Oracle提供了一个可执行文件<code class="codeph">sqlj.exe</code> 。在Microsoft Windows上使用脚本是不可行的，因为这些平台上的<code class="codeph">.bat</code>文件不支持参数中的嵌入等号（=），参数上的字符串操作或文件名参数中的通配符。
                           </p>
                        </li>
                        <li>
                           <p>如何设置环境变量是特定于操作系统的。可能还存在特定于操作系统的限制。在Windows 95中，使用“ <code class="codeph">System</code>控制面板中的“ <code class="codeph">Environment</code>选项卡。此外，由于Windows 95在变量设置中不支持“=”字符，因此SQLJ支持在设置<code class="codeph">SQLJ_OPTIONS</code>使用“＃”而不是“=”， <code class="codeph">SQLJ_OPTIONS</code>是SQLJ可用于选项设置的环境变量。请参阅有关环境变量的设置和语法的操作系统文档，并了解任何大小限制。
                           </p>
                        </li>
                        <li>
                           <p>与您使用的任何操作系统和环境一样，请注意特定限制。特别是，完整的扩展SQLJ命令行不得超过最大命令行大小，Windows 95为250个字符，Windows NT为4000个字符。请参阅操作系统文档。</p>
                        </li>
                     </ul>
                     <p>有关其他信息，请参阅Windows的发行说明。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00201.DBFS-hierarchical-store.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBFS Hierarchical Store and related store wallet management work together to store less frequently used data."></meta>
      <meta name="description" content="The DBFS Hierarchical Store and related store wallet management work together to store less frequently used data."></meta>
      <title>DBFS分层存储</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content="The DBFS Hierarchical Store and related store wallet management work together to store less frequently used data."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBFS-securefiles-store.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBFS-content-API.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBFS-securefiles-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBFS-content-API.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-file-system.html" property="item" typeof="WebPage"><span property="name">数据库文件系统（DBFS）</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBFS分层存储</li>
            </ol>
            <a id="GUID-375BEA1D-F37C-4647-B3CF-03A4FDCF7161" name="GUID-375BEA1D-F37C-4647-B3CF-03A4FDCF7161"></a><a id="ADLOB006"></a>
            
            <h2 id="ADLOB-GUID-375BEA1D-F37C-4647-B3CF-03A4FDCF7161" class="sect2"><span class="enumeration_chapter">22</span> DBFS分层存储</h2>
         </header>
         <div class="ind">
            <div>
               <p>DBFS分层存储和相关的商店钱包管理协同工作以存储不常使用的数据。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-5FE7399B-878E-4308-A22E-7C4D270C64D3" title="Oracle DBFS分层存储包（DBMS_DBFS_HS）是DBMS_DBFS_CONTENT的存储提供程序，它支持DBFS内容的分层存储。">关于分层存储包_ DBMS_DBFS_HS</a></p>
                  </li>
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-412817A0-5745-4031-9518-200E5F977030" title="DBMS_DBFS_HS包必须与DBMS_DBFS_CONTENT包一起使用，以使用DBFS链接管理SecureFiles LOB的分层存储管理。">使用DBFS分层存储的方法</a></p>
                  </li>
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-858DB4D4-3CBD-4761-8813-DE075E8ABFB8" title="您可以管理Hierarchical Store钱包并设置，注册和安装分层存储。">设置商店</a></p>
                  </li>
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-92FCE08F-B9EA-4A96-BE9D-866327422A76" title="Hierarchical Store可用作独立文件系统或SecureFiles LOB的归档解决方案。">使用分层存储</a></p>
                  </li>
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-3BE7F481-16AB-4584-8339-220D9EAC8684" title="数据库文件系统链接允许将SecureFiles LOB存储在与平常不同的位置。">数据库文件系统链接</a></p>
                  </li>
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-09F628B0-1448-4364-A9BE-5E2385D4F6C3" title="DBMS_DBFS_HS包是一个服务提供者，它允许使用磁带或Amazon S3 Web服务作为数据存储。">DBMS_DBFS_HS包</a></p>
                  </li>
                  <li>
                     <p><a href="DBFS-hierarchical-store.html#GUID-B1824096-15BC-4BA4-8F9B-18E21ABBBF1C" title="BFS分层存储有几种类型的视图。">DBFS分层存储的视图</a></p>
                  </li>
               </ul>
            </div><a id="ADLOB46068"></a><div class="props_rev_3"><a id="GUID-5FE7399B-878E-4308-A22E-7C4D270C64D3" name="GUID-5FE7399B-878E-4308-A22E-7C4D270C64D3"></a><h3 id="ADLOB-GUID-5FE7399B-878E-4308-A22E-7C4D270C64D3" class="sect3">关于分层存储包，DBMS_DBFS_HS</h3>
               <div>
                  <p>甲骨文DBFS分层存储包（ <code class="codeph">DBMS_DBFS_HS</code> ）为存储提供了<code class="codeph">DBMS_DBFS_CONTENT</code>一个支持DBFS内容分级存储。
                  </p>
                  <p>该软件包将内容存储在两个外部存储设备中：磁带和Amazon S3 Web服务，以及数据库中的关联元数据（或属性）。DBFS HS可以将频繁访问的内容缓存在数据库表中以提高性能。</p>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-412817A0-5745-4031-9518-200E5F977030" name="GUID-412817A0-5745-4031-9518-200E5F977030"></a><h3 id="ADLOB-GUID-412817A0-5745-4031-9518-200E5F977030" class="sect3">使用DBFS分层存储的方法</h3>
               <div>
                  <p><code class="codeph">DBMS_DBFS_HS</code>包必须与<code class="codeph">DBMS_DBFS_CONTENT</code>包一起使用，以使用DBFS链接管理SecureFiles LOB的分层存储管理。
                  </p>
                  <p>使用此软件包，可以将不常使用的数据迁移到更便宜的外部设备（如磁带），从而显着降低存储成本。</p>
                  <p>所述<code class="codeph">DBMS_DBFS_HS</code>包也可以被插入到<code class="codeph">DBMS_DBFS_CONTENT</code>封装，作为一个存储提供，以实现磁带的文件系统中，如果相关联的外部存储装置是胶带，或云文件系统中，如果相关联的外部存储装置是亚马逊S3存储服务。
                  </p>
                  <p><code class="codeph">DBMS_DBFS_HS</code>包使您能够在为数据库表或内容实现信息生命周期管理（ILM）时将磁带用作存储层。该软件包还支持其他形式的存储目标，包括Amazon S3等Web服务。此服务使用户能够将数据存储在磁带和其他形式的存储上的数据库中。磁带或Amazon S3上的数据是Oracle数据库的一部分，所有标准API都可以访问它，但只能通过数据库访问它。
                  </p>
                  <p><code class="codeph">DBMS_DBFS_HS</code>具有管理外部存储设备和与每个存储关联的缓存所需的其他接口。
                  </p>
                  <p>要使用包<code class="codeph">DBMS_DBFS_HS</code> ，必须授予<code class="codeph">DBFS_ROLE</code>角色。
                  </p>
                  <div class="infoboxnotealso" id="GUID-412817A0-5745-4031-9518-200E5F977030__GUID-3814361D-59FD-45DE-BB02-2ED751694388">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">DBMS_DBFS_HS</code>包的详细信息，请<code class="codeph">DBMS_DBFS_HS</code> <a href="../arpls/DBMS_DBFS_HS.html#ARPLS72088" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                  </div>
               </div>
            </div><a id="ADLOB46095"></a><div class="props_rev_3"><a id="GUID-858DB4D4-3CBD-4761-8813-DE075E8ABFB8" name="GUID-858DB4D4-3CBD-4761-8813-DE075E8ABFB8"></a><h3 id="ADLOB-GUID-858DB4D4-3CBD-4761-8813-DE075E8ABFB8" class="sect3">设置商店</h3>
               <div>
                  <p>您可以管理Hierarchical Store钱包并设置，注册和安装分层存储。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-CBBD02CC-C20D-43C8-80B1-45EB55BDF712" title="使用命令行实用程序mkstore创建和管理钱包。">管理HS Store钱包</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-E4E4FD6C-092B-412A-A47C-45CB8E0DB2E9" title="设置分层文件系统存储需要创建，注册和安装存储。">Creating_ Registering_和挂载商店</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46075"></a><div class="props_rev_3"><a id="GUID-CBBD02CC-C20D-43C8-80B1-45EB55BDF712" name="GUID-CBBD02CC-C20D-43C8-80B1-45EB55BDF712"></a><h4 id="ADLOB-GUID-CBBD02CC-C20D-43C8-80B1-45EB55BDF712" class="sect4">管理HS Store钱包</h4>
                  <div>
                     <p>使用命令行实用程序<code class="codeph">mkstore</code>创建和管理钱包。
                     </p>
                     <div class="section">
                        <p>使用以下命令创建钱包：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建一个钱包</p><pre class="oac_no_warn" dir="ltr">mkstore -wrl <span class="italic">wallet_location -create</span></pre></li>
                           <li>
                              <p>添加<code class="codeph">KEY</code>别名</p>
                              <p>通过将<code class="codeph">access_key</code>和<code class="codeph">secret_key</code>别名括在单引号中来指定它们。
                              </p><pre class="oac_no_warn" dir="ltr">mkstore -wrl <span class="italic">WALLET_LOCATION</span> -createCredential <span class="italic">别名</span> <span class="italic">“access_key</span> <span class="italic">'SECRET_KEY'</span></pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">mkstore -wrl / home / user1 / mywallet -createCredential mykey'abc''xyz'</pre></li>
                           <li>
                              <p>删除KEY别名</p><pre class="oac_no_warn" dir="ltr">mkstore -wrl <span class="italic">wallet_location</span> -deleteCredential <span class="italic">别名</span>
</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">mkstore -wrl / home / user1 / mywallet -deleteCredential mykey</pre></li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-CBBD02CC-C20D-43C8-80B1-45EB55BDF712__GUID-B29A1083-6C69-4B59-AC8A-CA6CB25B7C20">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../dbimi/using-oracle-wallet-manager.html#DBIMI160" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a> ，了解有关创建和管理钱包的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46161"></a><a id="ADLOB46185"></a><div class="props_rev_3"><a id="GUID-E4E4FD6C-092B-412A-A47C-45CB8E0DB2E9" name="GUID-E4E4FD6C-092B-412A-A47C-45CB8E0DB2E9"></a><h4 id="ADLOB-GUID-E4E4FD6C-092B-412A-A47C-45CB8E0DB2E9" class="sect4">创建，注册和挂载存储</h4>
                  <div>
                     <p>设置分层文件系统存储需要创建，注册和安装存储。</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E4E4FD6C-092B-412A-A47C-45CB8E0DB2E9__GUID-E37F7157-EC45-4E45-BB34-17BFC6BCC26C">创建，注册和安装商店。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>调用<code class="codeph">createStore</code> 。</span><div><pre class="oac_no_warn" dir="ltr">DBMS_DBFS_HS.createStore（store_name，store_type，tbl_name，tbs_name，cache_size，lob_cache_quota，optimal_tarball_size，schema_name）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下界面设置强制和可选属性：</span><div><pre class="oac_no_warn" dir="ltr">DBMS_DBFS_HS.setStoreProperty（StoreName，PropertyName，PropertyValue）;</pre><p>对于<code class="codeph">store_type</code> = <code class="codeph">STORETYPE_TAPE</code> ，强制属性为：</p><pre class="oac_no_warn" dir="ltr">PROPNAME_DEVICELIBRARY，PROPNAME_MEDIAPOOL，PROPNAME_CACHESIZE。 PROPNAME_CACHESIZE已由createStore设置。
</pre><p>您可以使用<code class="codeph">reconfigCache</code>更改<code class="codeph">PROPNAME_CACHESIZE</code>的值。
                              </p>
                              <p>可选属性包括：</p><pre class="oac_no_warn" dir="ltr">PROPNAME_OPTTARBALLSIZE，PROPNAME_READCHUNKSIZE，PROPNAME_WRITECHUNKSIZE，PROPNAME_STREAMABLE。</pre><p>对于<code class="codeph">store_type</code> = <code class="codeph">STORETYPE_AMAZONS3</code>强制属性为：</p><pre class="oac_no_warn" dir="ltr">PROPNAME_DEVICELIBRARY，PROPNAME_CACHESIZE，PROPNAME_S3HOST，PROPNAME_BUCKET，PROPNAME_LICENSEID，PROPNAME_WALLET。</pre><p><code class="codeph">PROPNAME_CACHESIZE</code>由<code class="codeph">createStore</code>设置。您可以使用<code class="codeph">reconfigCache</code>更改<code class="codeph">PROPNAME_CACHESIZE</code>的值。
                              </p>
                              <p>可选属性包括：</p><pre class="oac_no_warn" dir="ltr">PROPNAME_OPTTARBALLSIZE，PROPNAME_READCHUNKSIZE，PROPNAME_WRITECHUNKSIZE，PROPNAME_STREAMABLE，PROPNAME_HTTPPROXY。</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令向DBFS Content API注册商店：</span><div><pre class="oac_no_warn" dir="ltr">DBMS_DBFS_CONTENT.registerStore（store_name，provider_name，provider_package）;</pre><p>注意： <code class="codeph">provider_package</code>是<code class="codeph">dbms_dbfs_hs</code>包。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用以下方法挂载商店以进</span><div><pre class="oac_no_warn" dir="ltr">DBMS_DBFS_CONTENT.mountStore（store_name，store_mount，singleton，principal，owner，acl，asof，read_only）;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADLOB46096"></a><div class="props_rev_3"><a id="GUID-92FCE08F-B9EA-4A96-BE9D-866327422A76" name="GUID-92FCE08F-B9EA-4A96-BE9D-866327422A76"></a><h3 id="ADLOB-GUID-92FCE08F-B9EA-4A96-BE9D-866327422A76" class="sect3">使用分层存储</h3>
               <div>
                  <p>Hierarchical Store可用作独立文件系统或SecureFiles LOB的归档解决方案。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-FF564A86-9245-446C-9085-B3B3145C0617" title="使用DBMS_DBFS_CONTENT包在商店中创建，更新，读取和删除文件系统条目。">使用分层存储作为文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-AF266437-9F64-424D-A42D-F17573D1B195" title="使用DBMS_LOB包将磁带或S3存储中的SecureFiles LOB存档。">使用Hierarchical Store作为SecureFiles LOB的归档解决方案</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-AD96CBC0-1B5B-4278-8D79-85FB8EC41DE5" title="您可以删除分层存储。">删除分层存储</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-74892CE7-5B14-4501-ABBA-1714C20A61F2" title="DBFS分层存储可以以压缩形式存储其文件。">压缩以与分层存储一起使用</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-0ADB68C1-B49F-4984-9D0A-324FAB7547E9" title="此示例程序配置并使用磁带存储。">程序示例使用磁带</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-EE3C969D-C6DE-49B5-8694-1AF22E143E4D" title="此示例程序配置并使用Amazon S3存储。">使用Amazon S3的程序示例</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46097"></a><div class="props_rev_3"><a id="GUID-FF564A86-9245-446C-9085-B3B3145C0617" name="GUID-FF564A86-9245-446C-9085-B3B3145C0617"></a><h4 id="ADLOB-GUID-FF564A86-9245-446C-9085-B3B3145C0617" class="sect4">使用分层存储作为文件系统</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_DBFS_CONTENT</code>包在<code class="codeph">DBMS_DBFS_CONTENT</code>中创建，更新，读取和删除文件系统条目。
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-FF564A86-9245-446C-9085-B3B3145C0617__REFERTODBFSCONTENTAPIFORDETAILS.-DFE7A85D">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="DBFS-content-API.html#GUID-630BE6DB-0178-4EE4-8D7D-824BA886F68E" title="您可以使应用程序在多个不同的编程环境中使用数据库文件系统（DBFS）。">DBFS内容API</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46098"></a><div class="sect3"><a id="GUID-AF266437-9F64-424D-A42D-F17573D1B195" name="GUID-AF266437-9F64-424D-A42D-F17573D1B195"></a><h4 id="ADLOB-GUID-AF266437-9F64-424D-A42D-F17573D1B195" class="sect4">使用Hierarchical Store作为SecureFiles LOB的归档解决方案</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_LOB</code>包将磁带或S3存储中的SecureFiles LOB存档。
                     </p>
                     <p><code class="codeph">DBMS_LOB</code>包将SecureFiles LOB归档到磁带或S3存储中，如<span class="q">“ <a href="using-oracle-LOBs-storage.html#GUID-DD9F53E4-3A56-43BF-AAA0-9BE2692DC81A" title="有一些PL / SQL包可以与BasicFiles LOB和SecureFiles LOB一起使用。">LOB和DBFS的PL / SQL包</a> ”中所述</span> 。
                     </p>
                     <p>要释放缓存中的空间或强制将缓存驻留内容写入外部存储设备，请调用：</p><pre class="oac_no_warn" dir="ltr">DBMS_DBFS_HS.storePush（STORE_NAME）;</pre></div>
               </div><a id="ADLOB46099"></a><div class="props_rev_3"><a id="GUID-AD96CBC0-1B5B-4278-8D79-85FB8EC41DE5" name="GUID-AD96CBC0-1B5B-4278-8D79-85FB8EC41DE5"></a><h4 id="ADLOB-GUID-AD96CBC0-1B5B-4278-8D79-85FB8EC41DE5" class="sect4">删除分层存储</h4>
                  <div>
                     <p>您可以删除分层存储。</p>
                     <div class="section">
                        <p>要删除分层存储，请调用：</p><pre class="oac_no_warn" dir="ltr">DBMS_DBFS_HS.dropStore（store_name，opt_flags）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46074"></a><div class="props_rev_3"><a id="GUID-74892CE7-5B14-4501-ABBA-1714C20A61F2" name="GUID-74892CE7-5B14-4501-ABBA-1714C20A61F2"></a><h4 id="ADLOB-GUID-74892CE7-5B14-4501-ABBA-1714C20A61F2" class="sect4">压缩以与分层存储一起使用</h4>
                  <div>
                     <p>DBFS分层存储可以以压缩形式存储其文件。</p>
                     <p>DBFS分层存储能够使用<code class="codeph">SETPROPERTY</code>方法和属性<code class="codeph">PROPNAME_COMPRESSLVL</code>以压缩格式存储其文件以指定压缩级别。
                     </p>
                     <p>有效值为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">PROPVAL_COMPLVL_NONE</code> ：无压缩</p>
                        </li>
                        <li>
                           <p><code class="codeph">PROPVAL_COMPLVL_LOW</code> ： <code class="codeph">LOW</code>压缩</p>
                        </li>
                        <li>
                           <p><code class="codeph">PROPVAL_COMPLVL_MEDIUM</code> ： <code class="codeph">MEDIUM</code>压缩</p>
                        </li>
                        <li>
                           <p><code class="codeph">PROPVAL_COMPLVL_HIGH</code> ： <code class="codeph">HIGH</code>压缩</p>
                        </li>
                     </ul>
                     <p>通常，压缩级别<code class="codeph">LOW</code>表现最佳，并且仍然提供良好的压缩比。压缩级别<code class="codeph">MEDIUM</code>和<code class="codeph">HIGH</code>提供了明显更好的压缩比，但压缩时间可能相应更长。当写性能至关重要时，Oracle建议使用<code class="codeph">NONE</code>或<code class="codeph">LOW</code> ，例如DBFS HS存储中的文件经常更新时。如果空间很重要并且需要尽可能好的压缩比，请使用<code class="codeph">MEDIUM</code>或<code class="codeph">HIGH</code> 。</p>
                     <p>文件在从缓存中分页到临时区域时被压缩（在它们随后被推入后端磁带或S3存储之前）。因此，通过在暂存区域中存储较小的文件并有效地增加暂存区域的总可用容量，压缩也会受益。</p>
                  </div>
               </div><a id="ADLOB46101"></a><div class="props_rev_3"><a id="GUID-0ADB68C1-B49F-4984-9D0A-324FAB7547E9" name="GUID-0ADB68C1-B49F-4984-9D0A-324FAB7547E9"></a><h4 id="ADLOB-GUID-0ADB68C1-B49F-4984-9D0A-324FAB7547E9" class="sect4">程序示例使用磁带</h4>
                  <div>
                     <p>此示例程序配置并使用磁带存储。</p>
                     <p>在该示例中，您必须在某些位置替换有效值，如&lt;...&gt;所示，以使程序成功运行。</p>
                     <div class="infoboxnotealso" id="GUID-0ADB68C1-B49F-4984-9D0A-324FAB7547E9__GUID-299E4456-63BE-4C01-B23A-1A1DFACF0F84">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72088" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> <code class="codeph">DBMS_DBFS_HS</code>文档，以获取有关方法及其参数的完整详细信息</p>
                     </div><pre class="oac_no_warn" dir="ltr">Rem示例配置和使用磁带存储。Rem Rem hsuser应该是已被授予Rem dbfs_role角色的有效数据库用户。connect hsuser / hsuser Rem以下块设置STORETYPE_TAPE存储，其中Rem DBMS_DBFS_HS充当存储提供程序。声明storename varchar2（32）; tblname varchar2（30）; tbsname varchar2（30）; lob_cache_quota number：= 0.8; cachesz数; ots数;开始cachesz：= 50 * 1048576; ots：= 1048576; storename：='tapestore10'; tblname：='tapetbl10'; tbsname：='&lt;TBS_3&gt;'; - 替换有效的表空间名称 - 创建商店。- 这里tbsname是用于存储的表空间， -  tblname是包含所有商店实体的表， -  cachesz是商店用于缓存内容的空间 - 在表空间中， -  lob_cache_quota是分数cachesz已分配 - 级别1缓存和 -  ots是累积的最小内容量 - 在存储在磁带上的二级缓存中dbms_dbfs_hs.createStore（storename，dbms_dbfs_hs。STORETYPE_TAPE，tblname，tbsname，cachesz，lob_cache_quota，ots）; dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_SBTLIBRARY，'&lt;ORACLE_HOME / work / libobkuniq.so&gt;'）; - 替换ORACLE_HOME路径dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_MEDIAPOOL，'&lt;0&gt;'）; - 替换有效值dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_COMPRESSLEVEL，'NONE'）; - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息，请访问dbms_dbfs_content.registerstore（storename，'tapeprvder10'，'dbms_dbfs_hs'）; - 有关此方法的详细信息，请参阅DBMS_DBFS_CONTENT文档 -  dbms_dbfs_content.mountstore（storename，'tapemnt10'）;结束 ; / Rem以下代码块执行文件操作Rem使用DBMS_DBFS_CONTENT对存储配置的Rem在上一个代码块中连接hsuser / hsuser declare path varchar2（256）; path_pre varchar2（256）; mount_point varchar2（32）; store_name varchar2（32）; prop1 dbms_dbfs_content_properties_t; prop2 dbms_dbfs_content_properties_t; mycontent blob：= empty_blob（）; buffer varchar2（1050）; rawbuf raw（1050）; outcontent blob：= empty_blob（）; itemtype整数; pflag整数; filecnt整数; iter整数;偏移整数; rawlen整数; begin mount_point：='/ tapemnt10'; store_name：='tapestore10'; path_pre：= mount_point ||'/ file'; - 我们在以下循环文件中创建10个空文件：= 0;当filecnt = 10时循环退出; path：= path_pre || to_char（filecnt）; mycontent：= empty_blob（）; prop1：= null; - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.createFile（path，prop1，mycontent）; - 创建文件提交; filecnt：= filecnt + 1;结束循环; - 我们使用内容填充新创建的文件 - 在以下循环中pflag：= dbms_dbfs_content.prop_data + dbms_dbfs_content.prop_std + dbms_dbfs_content.prop_opt; buffer：='Oracle提供集成管理'|| '使用'||管理Oracle数据库的解决方案'独特的自上而下的应用程序管理'|| “方法。随着新的自我管理'|| '能力，Oracle消除了时间 - '|| '消费，容易出错的行政'|| '任务，所以数据库管理员可以'|| “专注于战略业务目标”|| '而不是性能和可用性'|| '消防演习。Oracle管理包'|| '数据库提供了显着的成本和时间 - '|| '节省管理Oracle的能力'|| “数据库。独立研究表明'|| 'Oracle数据库容易40％'|| '管理DB2和38％以上'|| 'SQL Server。“; rawbuf：= utl_raw.cast_to_raw（buffer）; rawlen：= utl_raw.length（rawbuf）; offset：= 1; filecnt：= 0;当filecnt = 10时循环退出; path：= path_pre || to_char（filecnt）; prop1：= null; - 将缓冲区附加到文件 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.putpath（path，prop1，rawlen，offset，rawbuf）;承诺filecnt：= filecnt + 1;结束循环; - 清除1级缓存dbms_dbfs_hs.flushCache（store_name）;承诺 - 对偶数文件执行写操作。- 对奇数文件进行读操作。filecnt：= 0;当filecnt = 10时循环退出; path：= path_pre || to_char（filecnt）;如果mod（filecnt，2）= 0则 - 获取可写文件 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.getPath（path，prop2，outcontent，itemtype，pflag，null，true）; buffer：='敏捷企业希望能够'|| '迅速采用新技术，无论是'|| '操作系统，服务器或'|| '软件，帮助他们保持领先'|| '竞赛。但是，经常更改'|| '在'||中引入了一段不稳定的时期'任务关键型IT系统。甲骨文'|| '真正的应用程序测试 - 使用Oracle'|| '数据库11g企业版 - 允许'|| '企业要迅速采用新'|| '技术同时消除'|| '与变革有关的风险。甲骨文'|| '真实应用测试结合了'|| '工作负载捕获和重放功能'|| '用SQL性能分析器'|| '帮助你测试现实生活中的变化'|| '工作量，然后帮助你微调'|| '将它们放入'||之前的变化'生产。Oracle Real Application'|| '测试支持旧版本的'|| 'Oracle数据库，让客户运行'|| 'Oracle数据库9i和Oracle数据库'|| '10g可以用它来加速'|| '数据库升级。“; rawbuf：= utl_raw.cast_to_raw（buffer）; rawlen：= utl_raw.length（rawbuf）; - 修改文件内容 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_lob.write（outcontent，rawlen，10，rawbuf）;承诺else  - 读取文件 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.getPath（path，prop2，outcontent，itemtype，pflag）;万一 ; filecnt：= filecnt + 1;结束循环; - 删除前2个文件filecnt：= 0;当filecnt = 2时循环退出; path：= path_pre || to_char（filecnt）; - 删除文件 - 有关此方法的详细信息，请参阅DBMS_DBFS_CONTENT文档 -  dbms_dbfs_content.deleteFile（path）;承诺filecnt：= filecnt + 1;结束循环; - 将数据库中暂存的内容移动到磁带存储dbms_dbfs_hs.storePush（store_name）;承诺结束 ; /</pre></div>
               </div><a id="ADLOB46100"></a><div class="sect3"><a id="GUID-EE3C969D-C6DE-49B5-8694-1AF22E143E4D" name="GUID-EE3C969D-C6DE-49B5-8694-1AF22E143E4D"></a><h4 id="ADLOB-GUID-EE3C969D-C6DE-49B5-8694-1AF22E143E4D" class="sect4">使用Amazon S3的程序示例</h4>
                  <div>
                     <p>此示例程序配置并使用Amazon S3存储。</p>
                     <p>必须在某些位置替换有效值（由&lt;...&gt;表示）才能使程序成功运行。</p>
                     <div class="infoboxnotealso" id="GUID-EE3C969D-C6DE-49B5-8694-1AF22E143E4D__GUID-EA9073DB-084A-4A0A-AF45-075FDBA5CF1F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72088" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> <code class="codeph">DBMS_DBFS_HS</code>文档，以获取有关方法及其参数的完整详细信息</p>
                     </div><pre class="oac_no_warn" dir="ltr">Rem示例配置和使用Amazon S3存储。Rem Rem hsuser应该是已被授予Rem dbfs_role角色的有效数据库用户。connect hsuser / hsuser Rem以下块设置STORETYPE_AMAZONS3存储，其中Rem DBMS_DBFS_HS充当存储提供者。声明storename varchar2（32）; tblname varchar2（30）; tbsname varchar2（30）; lob_cache_quota number：= 0.8; cachesz数; ots数;开始cachesz：= 50 * 1048576; ots：= 1048576; storename：='s3store10'; tblname：='s3tbl10'; tbsname：='&lt;TBS_3&gt;'; - 替换有效的表空间名称 - 创建商店。- 这里tbsname是用于存储的表空间， -  tblname是包含所有商店实体的表， -  cachesz是商店用于缓存内容的空间 - 在表空间中， -  lob_cache_quota是分数cachesz已分配 - 级别1缓存和 -  ots是累积的最小内容量 - 在存储在AmazonS3中的二级缓存中dbms_dbfs_hs.createStore（storename，dbms_dbfs_hs。STORETYPE_AMAZONS3，tblname，tbsname，cachesz，lob_cache_quota，ots）; dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_SBTLIBRARY，'&lt;ORACLE_HOME / work / libosbws11.so&gt;'）; - 替换ORACLE_HOME路径dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_S3HOST，'s3.amazonaws.com'）; dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_BUCKET，'oras3bucket10'）; dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_WALLET，'LOCATION = file：&lt;ORACLE_HOME&gt; / work / wlt CREDENTIAL_ALIAS = a_key'）; - 替换ORACLE_HOME路径dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_LICENSEID，'&lt;xxxxxxxxxxxxxxxx&gt;'）; - 替换有效的SBT许可证ID dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_HTTPPROXY，'&lt;http://www-proxy.mycompany.com:80/&gt;'）; - 替换有效值。如果未使用代理，则无需设置此属性。dbms_dbfs_hs.setstoreproperty（storename，dbms_dbfs_hs。PROPNAME_COMPRESSLEVEL，'NONE'）; dbms_dbfs_hs.createbucket（storename）; - 有关此方法的详细信息，请参阅DBMS_DBFS_CONTENT文档 -  dbms_dbfs_content.registerstore（storename，'s3prvder10'，'dbms_dbfs_hs'）; - 有关此方法的详细信息，请参阅DBMS_DBFS_CONTENT文档 -  dbms_dbfs_content.mountstore（storename，'s3mnt10'）;结束 ; / Rem以下代码块执行文件操作Rem使用DBMS_DBFS_CONTENT对存储配置的Rem在上一个代码块中连接hsuser / hsuser declare path varchar2（256）; path_pre varchar2（256）; mount_point varchar2（32）; store_name varchar2（32）; prop1 dbms_dbfs_content_properties_t; prop2 dbms_dbfs_content_properties_t; mycontent blob：= empty_blob（）; buffer varchar2（1050）; rawbuf raw（1050）; outcontent blob：= empty_blob（）; itemtype整数; pflag整数; filecnt整数; iter整数;偏移整数; rawlen整数; begin mount_point：='/ s3mnt10'; store_name：='s3store10'; path_pre：= mount_point ||'/ file'; - 我们在以下循环文件中创建10个空文件：= 0;当filecnt = 10时循环退出; path：= path_pre || to_char（filecnt）; mycontent：= empty_blob（）; prop1：= null; - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.createFile（path，prop1，mycontent）; - 创建文件提交; filecnt：= filecnt + 1;结束循环; - 我们使用内容填充新创建的文件 - 在以下循环中pflag：= dbms_dbfs_content.prop_data + dbms_dbfs_content.prop_std + dbms_dbfs_content.prop_opt; buffer：='Oracle提供集成管理'|| '使用'||管理Oracle数据库的解决方案'独特的自上而下的应用程序管理'|| “方法。随着新的自我管理'|| '能力，Oracle消除了时间 - '|| '消费，容易出错的行政'|| '任务，所以数据库管理员可以'|| “专注于战略业务目标”|| '而不是性能和可用性'|| '消防演习。Oracle管理包'|| '数据库提供了显着的成本和时间 - '|| '节省管理Oracle的能力'|| “数据库。独立研究表明'|| 'Oracle数据库容易40％'|| '管理DB2和38％以上'|| 'SQL Server。“; rawbuf：= utl_raw.cast_to_raw（buffer）; rawlen：= utl_raw.length（rawbuf）; offset：= 1; filecnt：= 0;当filecnt = 10时循环退出; path：= path_pre || to_char（filecnt）; prop1：= null; - 将缓冲区附加到文件 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.putpath（path，prop1，rawlen，offset，rawbuf）;承诺filecnt：= filecnt + 1;结束循环; - 清除1级缓存dbms_dbfs_hs.flushCache（store_name）;承诺 - 对偶数文件执行写操作。- 对奇数文件进行读操作。filecnt：= 0;当filecnt = 10时循环退出; path：= path_pre || to_char（filecnt）;如果mod（filecnt，2）= 0则 - 获取可写文件 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.getPath（path，prop2，outcontent，itemtype，pflag，null，true）; buffer：='敏捷企业希望能够'|| '迅速采用新技术，无论是'|| '操作系统，服务器或'|| '软件，帮助他们保持领先'|| '竞赛。但是，经常更改'|| '在'||中引入了一段不稳定的时期'任务关键型IT系统。甲骨文'|| '真正的应用程序测试 - 使用Oracle'|| '数据库11g企业版 - 允许'|| '企业要迅速采用新'|| '技术同时消除'|| '与变革有关的风险。甲骨文'|| '真实应用测试结合了'|| '工作负载捕获和重放功能'|| '用SQL性能分析器'|| '帮助你测试现实生活中的变化'|| '工作量，然后帮助你微调'|| '将它们放入'||之前的变化'生产。Oracle Real Application'|| '测试支持旧版本的'|| 'Oracle数据库，让客户运行'|| 'Oracle数据库9i和Oracle数据库'|| '10g可以用它来加速'|| '数据库升级。“; rawbuf：= utl_raw.cast_to_raw（buffer）; rawlen：= utl_raw.length（rawbuf）; - 修改文件内容 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_lob.write（outcontent，rawlen，10，rawbuf）;承诺else  - 读取文件 - 请参阅DBMS_DBFS_CONTENT文档 - 有关此方法的详细信息dbms_dbfs_content.getPath（path，prop2，outcontent，itemtype，pflag）;万一 ; filecnt：= filecnt + 1;结束循环; - 删除前2个文件filecnt：= 0;当filecnt = 2时循环退出; path：= path_pre || to_char（filecnt）; - 删除文件 - 有关此方法的详细信息，请参阅DBMS_DBFS_CONTENT文档 -  dbms_dbfs_content.deleteFile（path）;承诺filecnt：= filecnt + 1;结束循环; - 将在数据库中暂存的内容移动到Amazon S3商店dbms_dbfs_hs.storePush（store_name）;承诺结束 ; /</pre></div>
               </div>
            </div><a id="ADLOB45974"></a><div class="props_rev_3"><a id="GUID-3BE7F481-16AB-4584-8339-220D9EAC8684" name="GUID-3BE7F481-16AB-4584-8339-220D9EAC8684"></a><h3 id="ADLOB-GUID-3BE7F481-16AB-4584-8339-220D9EAC8684" class="sect3">数据库文件系统链接</h3>
               <div>
                  <p>数据库文件系统链接允许将SecureFiles LOB存储在与平常不同的位置。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-9B7775D5-ED13-4156-8655-E955D0D7BC2F" title="DBFS链接允许将SecureFiles LOB透明地存储在与通常存储LOB的段不同的位置。而是在段中存储指向LOB的链接。">关于数据库文件系统链接</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-4817D6E3-DF45-482B-A5A8-FB6792CEC505" title="数据库文件系统链接需要通过使用DBFS内容包DBMS_DBFS_CONTENT来创建数据库文件系统。">如何创建数据库文件系统链接</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-147629A9-FCC4-481E-B46B-DE0D4366B797" title="API DBMS_LOB.COPY_DBFS_LINK（DSTLOB，SRCLOB，FLAGS）提供了复制链接的SecureFiles LOB的功能。">数据库文件系统链接复制</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-92F203A6-5A72-4775-AC57-BFA8012A4D2D" title="您可以将DBFS链接从源表复制到目标表。">在表之间复制链接的LOB</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-71728CBF-089E-43FD-BAC9-1BCC1227E7D4" title="联机重定义将复制存储在正在重新定义的表中的任何SecureFiles LOB中的任何DBFS链接。">在线重新定义和DBFS链接</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-67FBF9BD-3FCC-40E3-8E5F-C895F985F7A7" title="即使数据未缓存在数据库中，DBFS链接也可以从链接的SecureFiles LOB读取。">透明阅读</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45975"></a><a id="ADLOB46147"></a><div class="props_rev_3"><a id="GUID-9B7775D5-ED13-4156-8655-E955D0D7BC2F" name="GUID-9B7775D5-ED13-4156-8655-E955D0D7BC2F"></a><h4 id="ADLOB-GUID-9B7775D5-ED13-4156-8655-E955D0D7BC2F" class="sect4">关于数据库文件系统链接</h4>
                  <div>
                     <p>DBFS链接允许将SecureFiles LOB透明地存储在与通常存储LOB的段不同的位置。而是在段中存储指向LOB的链接。</p>
                     <p>段中的链接必须引用使用DBFS在访问时定位LOB的路径。这意味着LOB可以存储在另一个文件系统，磁带系统，云端或可以使用DBFS访问的任何其他位置。</p>
                     <p>当用户或应用程序尝试使用DBFS链接访问已存储在段外部的SecureFiles LOB时，行为可能会有所不同，具体取决于尝试的操作以及保存LOB的DBFS存储库的特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读：</p>
                           <p>如果LOB尚未缓存在数据库的本地区域中，则可以直接从保存LOB的DBFS内容存储中读取LOB，如果内容存储允许基于<code class="codeph">PROPNAME_STREAMABLE</code>参数的设置进行流访问。如果内容存储库不允许流式访问，则首先将整个LOB读入数据库中的本地区域，在该区域中将其存储一段时间以供将来访问。
                           </p>
                        </li>
                        <li>
                           <p>写：</p>
                           <p>如果LOB尚未缓存在数据库的本地区域中，则首先将其读入数据库，根据需要进行修改，然后写回到DBFS链接中为相关LOB定义的DBFS内容存储库。</p>
                        </li>
                        <li>
                           <p>删除：</p>
                           <p>删除通过DBFS链接存储的SecureFiles LOB时，将从表中删除DBFS链接，但不会从DBFS内容存储库中删除LOB本身。或者，基于所讨论的DBFS内容存储库的特征/设置，它更复杂。</p>
                        </li>
                     </ul>
                     <p>DBFS链接允许使用SecureFiles LOB与DBFS分层存储（DBFS HS）一起实现分层存储管理（HSM）。HSM是一个过程，通过该过程，数据库将很少使用或未使用的数据从更快，更昂贵和更小的存储移动到更慢，更便宜和更高容量的存储。</p>
                     <div class="figure" id="GUID-9B7775D5-ED13-4156-8655-E955D0D7BC2F__GUID-79E69764-D05F-489F-B1E6-C81781D176E8">
                        <p class="titleinfigure">图22-1数据库文件系统链接</p><img src="img/adlob202.gif" width="288" alt="下面是图22-1的描述" title="下面是图22-1的描述" longdesc="img_text/adlob202.html"><br><a href="img_text/adlob202.html">“图22-1数据库文件系统链接”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="ADLOB45976"></a><div class="props_rev_3"><a id="GUID-4817D6E3-DF45-482B-A5A8-FB6792CEC505" name="GUID-4817D6E3-DF45-482B-A5A8-FB6792CEC505"></a><h4 id="ADLOB-GUID-4817D6E3-DF45-482B-A5A8-FB6792CEC505" class="sect4">如何创建数据库文件系统链接</h4>
                  <div>
                     <p>数据库文件系统链接需要通过使用DBFS内容包<code class="codeph">DBMS_DBFS_CONTENT</code>创建数据库文件系统。</p>
                     <p>Oracle提供了几种创建DBFS链接的方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将SecureFiles LOB数据移动到指定的DBFS路径名中，并将引用存储到LOB中的新位置。</p>
                           <p>使用LOB和DBFS路径名参数调用<code class="codeph">DBMS_LOB.MOVE_TO_DBFS_LINK()</code> ，并且系统创建指定的DBFS HSM存储（如果它不存在），将数据从SecureFiles LOB复制到指定的DBFS HSM存储中，从SecureFiles LOB中删除数据，以及存储文件路径名，以便通过此LOB进行后续访问。</p>
                        </li>
                        <li>
                           <p>复制或创建对现有文件的引用。</p>
                           <p>调用<code class="codeph">DBMS_LOB.COPY_DBFS_LINK()</code>以从现有DBFS链接复制链接。如果目标SecureFiles LOB中有任何数据，系统将删除此数据并将引用的副本存储到目标SecureFiles LOB中的链接。</p>
                        </li>
                        <li>
                           <p>调用<code class="codeph">DBMS_LOB.SET_DBFS_LINK()</code> ，它假定链接的数据存储在指定的DBFS路径名中。
                           </p>
                           <p>系统将删除指定SecureFiles LOB中的数据，并将链接存储到DBFS路径名。</p>
                        </li>
                     </ul>
                     <p>创建DBFS链接会影响可以执行的操作以及操作方式。如果底层LOB已移入DBFS链接，则修改LOB内容的任何<code class="codeph">DBMS_LOB</code>操作都将引发异常。在进行这些调用之前，应用程序必须通过调用<code class="codeph">DBMS_LOB.COPY_FROM_LINK()</code>显式地将DBFS链接替换为LOB。
                     </p>
                     <p>完成后，如果需要，应用程序可以使用<code class="codeph">DBMS_LOB.MOVE_TO_DBFS_LINK()</code>将更新的LOB移回DBFS。如果DBFS链接位于支持流式传输的文件系统中，则Oracle Database <span class="italic">11g</span>第2版之前存在的其他<code class="codeph">DBMS_LOB</code>操作将以透明方式工作。请注意，如果不支持或禁用流式传输，则这些操作会失败。
                     </p>
                     <p>如果直接通过DBFS接口修改DBFS链接文件，则更改将反映在SecureFiles LOB的后续读取中。如果通过DBFS接口删除文件，则后续读取会发生异常。</p>
                     <p>对于数据库，DBA可能不希望在导出和导入期间存储SecureFiles LOB HSM中存储的所有数据。Oracle只能导出和导入数据库文件系统链接。链接是完全限定的标识符，当输入到SecureFiles LOB或在不同数据库中的SecureFiles LOB上注册时，它们提供对存储数据的访问。导出和导入链接的能力类似于符号链接的常见文件系统功能。</p>
                     <p>只要源，存储的数据可用，或者直到在导入的系统上进行第一次检索，新导入的链接才可用。该应用程序负责存储数据保留。如果应用程序系统从仍然具有对它的引用的存储中删除数据，则在引用SecureFiles LOB尝试访问数据时，数据库将引发异常。Oracle还支持在作为缓存副本迁移到DBFS存储之后继续将数据保留在数据库中。应用程序可以根据其保留策略清除这些副本。</p>
                  </div>
               </div><a id="ADLOB45977"></a><div class="props_rev_3"><a id="GUID-147629A9-FCC4-481E-B46B-DE0D4366B797" name="GUID-147629A9-FCC4-481E-B46B-DE0D4366B797"></a><h4 id="ADLOB-GUID-147629A9-FCC4-481E-B46B-DE0D4366B797" class="sect4">数据库文件系统链接复制</h4>
                  <div>
                     <p>API <code class="codeph">DBMS_LOB.COPY_DBFS_LINK(DSTLOB,</code> <code class="codeph">SRCLOB</code> ， <code class="codeph">FLAGS</code> <code class="codeph">)</code>提供了复制链接的SecureFiles LOB的功能。</p>
                     <p>sBy默认情况下，在此操作期间不从DBFS HSM Store获取LOB;这是一个按引用复制的操作，它导出DBFS路径名（在源端）并导入它（在目标端）。<code class="codeph">flags</code>参数可以指示目标在数据库中具有本地副本，并引用DBFS HSM存储中的LOB数据。
                     </p>
                  </div>
               </div><a id="ADLOB45978"></a><div class="props_rev_3"><a id="GUID-92F203A6-5A72-4775-AC57-BFA8012A4D2D" name="GUID-92F203A6-5A72-4775-AC57-BFA8012A4D2D"></a><h4 id="ADLOB-GUID-92F203A6-5A72-4775-AC57-BFA8012A4D2D" class="sect4">在表之间复制链接的LOB</h4>
                  <div>
                     <p>您可以将DBFS链接从源表复制到目标表。</p>
                     <div class="section">
                        <p>使用以下代码将存储在源表中任何SecureFiles LOB中的任何DBFS链接复制到目标表。</p>
                        <p><code class="codeph">创建表...AS SELECT (CTAS)</code>和<code class="codeph">INSERT TABLE ...AS SELECT（ITAS）</code> 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45979"></a><div class="props_rev_3"><a id="GUID-71728CBF-089E-43FD-BAC9-1BCC1227E7D4" name="GUID-71728CBF-089E-43FD-BAC9-1BCC1227E7D4"></a><h4 id="ADLOB-GUID-71728CBF-089E-43FD-BAC9-1BCC1227E7D4" class="sect4">在线重新定义和DBFS链接</h4>
                  <div>
                     <p>联机重定义将复制存储在正在重新定义的表中的任何SecureFiles LOB中的任何DBFS链接。</p>
                     <p>联机重定义将复制存储在正在重新定义的表中的任何SecureFiles LOB中的任何DBFS链接。</p>
                  </div>
               </div><a id="ADLOB45980"></a><div class="props_rev_3"><a id="GUID-67FBF9BD-3FCC-40E3-8E5F-C895F985F7A7" name="GUID-67FBF9BD-3FCC-40E3-8E5F-C895F985F7A7"></a><h4 id="ADLOB-GUID-67FBF9BD-3FCC-40E3-8E5F-C895F985F7A7" class="sect4">透明阅读</h4>
                  <div>
                     <p>即使数据未缓存在数据库中，DBFS链接也可以从链接的SecureFiles LOB读取。</p>
                     <p>您可以从当前存储数据的内容存储库中读取数据，并将该数据流回用户应用程序，就像从SecureFiles LOB段读取数据一样。这允许无需首次调用<code class="codeph">DBMS_LOB.COPY_FROM_DBFS_LINK()</code>即可无缝访问DBFS链接数据。
                     </p>
                     <p>是否可以为特定SecureFiles LOB提供透明读取由数据所在的<code class="codeph">DBFS_CONTENT</code>存储区确定。始终为<code class="codeph">DBFS_SFS</code>存储启用此功能，默认情况下为<code class="codeph">DBFS_HS</code>存储启用此功能。要禁用<code class="codeph">DBFS_HS</code>存储的透明读取，请将<code class="codeph">PROPNAME_STREAMABLE</code>参数设置为<code class="codeph">FALSE</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-67FBF9BD-3FCC-40E3-8E5F-C895F985F7A7__GUID-EA2B7E26-BE1C-492B-80C9-11ABD62A7679">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72174" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADLOB46070"></a><div class="props_rev_3"><a id="GUID-09F628B0-1448-4364-A9BE-5E2385D4F6C3" name="GUID-09F628B0-1448-4364-A9BE-5E2385D4F6C3"></a><h3 id="ADLOB-GUID-09F628B0-1448-4364-A9BE-5E2385D4F6C3" class="sect3">DBMS_DBFS_HS包</h3>
               <div>
                  <p><code class="codeph">DBMS_DBFS_HS</code>包是一个服务提供者，它允许使用磁带或Amazon S3 Web服务作为数据存储。
                  </p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-6EC61353-06C9-4D8F-B5E2-FBAD80981868" title="DBMS_DBFS_HS PL / SQL包常量非常详细。">DBMS_DBFS_HS包的常量</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8" title="DBMS_DBFS_HSpackage中有许多方法。">DBMS_DBFS_HS包的方法</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46069"></a><div class="props_rev_3"><a id="GUID-6EC61353-06C9-4D8F-B5E2-FBAD80981868" name="GUID-6EC61353-06C9-4D8F-B5E2-FBAD80981868"></a><h4 id="ADLOB-GUID-6EC61353-06C9-4D8F-B5E2-FBAD80981868" class="sect4">DBMS_DBFS_HS包的常量</h4>
                  <div>
                     <p><code class="codeph">DBMS_DBFS_HS</code> PL / SQL包常量非常详细。
                     </p>
                     <div class="infoboxnotealso" id="GUID-6EC61353-06C9-4D8F-B5E2-FBAD80981868__SEEORACLEDATABASEPLSQLPACKAGESANDTY-DFE7D10C">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">DBMS_DBFS_HS</code> PL / SQL包使用的常量的详细信息，请参阅<a href="../arpls/DBMS_DBFS_HS.html#ARPLS72148" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="ADLOB46160"></a><a id="ADLOB46186"></a><div class="props_rev_3"><a id="GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8" name="GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8"></a><h4 id="ADLOB-GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8" class="sect4">DBMS_DBFS_HS包的方法</h4>
                  <div>
                     <p><code class="codeph">DBMS_DBFS_HS</code>包中有许多方法。
                     </p>
                     <div class="section">
                        <p><a href="DBFS-hierarchical-store.html#GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8__CHDEECJD" title="DBMS_DBFS_HS包的方法。第1列是方法，第2列是其简要说明。">表22-1</a>总结了<code class="codeph">DBMS_DBFS_HS</code> PL / SQL包方法。
                        </p>
                        <div class="infoboxnotealso" id="GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8__ORACLEDATABASEPLSQLPACKAGESANDTYPES-DFE7F8AC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72088" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-80C9663D-F6A0-4075-AC86-EEF8CA1A38F8__CHDEECJD">
                        <p class="titleintable">表22-1 DBMS_DBFS_HS PL / SQL包的方法</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_DBFS_HS PL / SQL包的方法" width="100%" border="1" summary="Methods of the DBMS_DBFS_HS package. Column 1 is the method, and Column 2 is its brief description." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d90648e2364">方法</th>
                                 <th align="left" valign="bottom" width="69%" id="d90648e2367">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2372" headers="d90648e2364 ">
                                    <p><code class="codeph">CLEANUPUNUSEDBACKUPFILES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2372 d90648e2367 ">
                                    <p>如果没有当前内容，则删除在外部存储设备上创建的文件。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72155" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2385" headers="d90648e2364 ">
                                    <p><code class="codeph">CREATEBUCKET</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2385 d90648e2367 ">
                                    <p>创建AWS桶，与<code class="codeph">STORETYPE_AMAZON3</code>商店一起使用。
                                    </p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72165" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2401" headers="d90648e2364 ">
                                    <p><code class="codeph">CREATESTORE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2401 d90648e2367 ">
                                    <p>创建DBFS HS存储。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72160" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2415" headers="d90648e2364 ">
                                    <p><code class="codeph">DEREGSTORECOMMAND</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2415 d90648e2367 ">
                                    <p>删除与商店关联的命令（消息）。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72161" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2428" headers="d90648e2364 ">
                                    <p><code class="codeph">DROPSTORE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2428 d90648e2367 ">
                                    <p>删除以前创建的DBFS HS存储。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72163" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2441" headers="d90648e2364 ">
                                    <p><code class="codeph">FLUSHCACHE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2441 d90648e2367 ">
                                    <p>将1级缓存刷新到2级缓存，增加1级空间。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72175" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2454" headers="d90648e2364 ">
                                    <p><code class="codeph">GETSTOREPROPERTY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2454 d90648e2367 ">
                                    <p>检索数据库中商店的属性值。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72165" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2467" headers="d90648e2364 ">
                                    <p><code class="codeph">RECONFIGCACHE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2467 d90648e2367 ">
                                    <p>重新配置存储使用的数据库缓存的参数。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72167" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2480" headers="d90648e2364 ">
                                    <p><code class="codeph">REGISTERSTORECOMMAND</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2480 d90648e2367 ">
                                    <p>注册存储的命令（消息），以便将它们发送到外部存储设备的介质管理器。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72177" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2494" headers="d90648e2364 ">
                                    <p><code class="codeph">SENDCOMMAND</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2494 d90648e2367 ">
                                    <p>将命令（消息）发送到外部存储设备的介质管理器。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72171" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2507" headers="d90648e2364 ">
                                    <p><code class="codeph">SETSTOREPROPERTY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2507 d90648e2367 ">
                                    <p>将名称/值属性与已注册的分层存储关联。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72173" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d90648e2521" headers="d90648e2364 ">
                                    <p><code class="codeph">STOREPUSH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d90648e2521 d90648e2367 ">
                                    <p>将本地缓存的数据推送到存档存储。</p>
                                    <p><a href="../arpls/DBMS_DBFS_HS.html#ARPLS72165" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="ADLOB46206"></a><div class="props_rev_3"><a id="GUID-B1824096-15BC-4BA4-8F9B-18E21ABBBF1C" name="GUID-B1824096-15BC-4BA4-8F9B-18E21ABBBF1C"></a><h3 id="ADLOB-GUID-B1824096-15BC-4BA4-8F9B-18E21ABBBF1C" class="sect3">DBFS分层存储的视图</h3>
               <div>
                  <p>BFS分层存储有几种类型的视图。</p>
                  <p>DBFS分层存储有几种类型的视图。</p>
                  <div class="infoboxnotealso" id="GUID-B1824096-15BC-4BA4-8F9B-18E21ABBBF1C__GUID-94E840F2-A61D-4E6A-81DC-D630B5825042">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/USER_DBFS_HS_FILES.html#REFRN26780" target="_blank"><span class="italic">Oracle Database Reference</span></a> ，了解这些视图的列和数据类型</p>
                  </div>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-27819CF9-55BE-4E35-A559-AF28F0E54BEE" title="DBFS Hierarchical Store有几个视图可用。">DBA视图</a></p>
                     </li>
                     <li>
                        <p><a href="DBFS-hierarchical-store.html#GUID-201E3899-9363-4F56-83BD-BE597E7B986B" title="DBFS分层存储有几种可用的视图。">用户视图</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46207"></a><div class="props_rev_3"><a id="GUID-27819CF9-55BE-4E35-A559-AF28F0E54BEE" name="GUID-27819CF9-55BE-4E35-A559-AF28F0E54BEE"></a><h4 id="ADLOB-GUID-27819CF9-55BE-4E35-A559-AF28F0E54BEE" class="sect4">DBA视图</h4>
                  <div>
                     <p>DBFS Hierarchical Store有几个视图可用。</p>
                     <div class="section">
                        <p>可以使用DBFS Hierarchical Store的这些视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBA_DBFS_HS</code></p>
                              <p>此视图显示所有数据库文件系统（DBFS）分层存储</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_DBFS_HS_PROPERTIES</code></p>
                              <p>此视图显示所有数据库文件系统（DBFS）分层存储的可修改属性。</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_DBFS_HS_FIXED_PROPERTIES</code></p>
                              <p>此视图显示所有数据库文件系统（DBFS）分层存储的不可修改属性。</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_DBFS_HS_COMMANDS</code></p>
                              <p>此视图显示所有数据库文件系统（DBFS）分层存储的所有已注册存储命令。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46088"></a><div class="props_rev_3"><a id="GUID-201E3899-9363-4F56-83BD-BE597E7B986B" name="GUID-201E3899-9363-4F56-83BD-BE597E7B986B"></a><h4 id="ADLOB-GUID-201E3899-9363-4F56-83BD-BE597E7B986B" class="sect4">用户视图</h4>
                  <div>
                     <p>DBFS分层存储有几种可用的视图。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">USER_DBFS_HS</code></p>
                              <p>此视图显示当前用户拥有的所有数据库文件系统（DBFS）分层存储。</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_DBFS_HS_PROPERTIES</code></p>
                              <p>此视图显示当前用户拥有的所有数据库文件系统（DBFS）分层存储的可修改属性。</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_DBFS_HS_FIXED_PROPERTIES</code></p>
                              <p>此视图显示当前用户拥有的所有数据库文件系统（DBFS）分层存储的不可修改属性。</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_DBFS_HS_COMMANDS</code> 
                              </p>
                              <p>此视图显示当前用户拥有的所有数据库文件系统（DBFS）分层存储的所有已注册存储命令。</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_DBFS_HS_FILES</code></p>
                              <p>此视图显示当前用户拥有的数据库文件系统（DBFS）分层存储中的文件及其在后端设备上的位置。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="06359.about-rman-commands.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>关于RMAN命令</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="release-changes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="rman-commands-at-sign-to-quit.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="release-changes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="rman-commands-at-sign-to-quit.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">关于RMAN命令</li>
            </ol>
            <a id="GUID-0385D88E-6D36-41AC-BEA0-DD7F5C97D253" name="GUID-0385D88E-6D36-41AC-BEA0-DD7F5C97D253"></a><a id="RCMRF001"></a>
            
            <h2 id="RCMRF-GUID-0385D88E-6D36-41AC-BEA0-DD7F5C97D253" class="sect2"><span class="enumeration_chapter">1</span>关于RMAN命令</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="about-rman-commands.html#GUID-BF60D16B-0A61-4226-BEF7-339B1A73824D" title="本书提供了语法描述，用于图形形式的RMAN命令行结构或Backus Naur Form（BNF）。">RMAN语法图</a></p>
                  </li>
                  <li>
                     <p><a href="about-rman-commands.html#GUID-9B7F162A-B3D8-4241-AA8E-3AAA72048550" title="RMAN语言是自由格式的。关键字必须至少用一个空格字符（例如空格，制表符或换行符）分隔。">RMAN命令的格式</a></p>
                  </li>
                  <li>
                     <p><a href="about-rman-commands.html#GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675" title="RMAN语言包含在RMAN命令中使用或已经使用的保留字。通常，避免使用与RMAN命令语言中的主要含义冲突的保留字。">RMAN保留字</a></p>
                  </li>
                  <li>
                     <p><a href="about-rman-commands.html#GUID-5439AD1C-7BDD-4271-A320-B7657DC996D5" title="RMAN命令可以在RMAN提示符下，在RUN命令内执行，或两者都执行。">RMAN命令摘要</a></p>
                  </li>
                  <li>
                     <p><a href="about-rman-commands.html#GUID-F3B3D81D-78C8-4534-8E63-1F0D6E974F40" title="RMAN子条款用于多个命令。">RMAN子条款摘要</a></p>
                  </li>
               </ul>
            </div><a id="RCMRF89973"></a><a id="RCMRF1954"></a><div class="props_rev_3"><a id="GUID-BF60D16B-0A61-4226-BEF7-339B1A73824D" name="GUID-BF60D16B-0A61-4226-BEF7-339B1A73824D"></a><h3 id="RCMRF-GUID-BF60D16B-0A61-4226-BEF7-339B1A73824D" class="sect3"><span class="enumeration_section">1.1</span> RMAN语法图</h3>
               <div>
                  <p>本书提供了语法描述，用于图形形式的RMAN命令行结构或Backus Naur Form（BNF）。</p>
                  <p>本节仅介绍RMAN约定。有关如何解释语法图和BNF表示法的一般信息，请参阅<a href="../sqlrf/How-to-Read-Syntax-Diagrams.html#SQLRF018" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                  </p>
                  <p>Recovery Manager语法图使用线条和箭头显示语法结构，如以下<code class="codeph">CATALOG</code>命令示例所示。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BF60D16B-0A61-4226-BEF7-339B1A73824D__GUID-CA06C513-7501-44A0-95DC-0FBE75C40F0B"><span class="italic">catalog</span> :: =</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-BF60D16B-0A61-4226-BEF7-339B1A73824D__GUID-317500A5-9D2A-4C77-B8AF-8EDFEDCD7610"><img src="img/catalog.gif" width="452" alt="catalog.eps的描述如下" title="catalog.eps的描述如下" longdesc="img_text/catalog.html"><br><a href="img_text/catalog.html">插图catalog.eps的描述</a></div>
                     <!-- class="figure" -->
                     <p>本节介绍语法图的组件，并提供如何编写RMAN命令的示例。语法图由以下项组成：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="about-rman-commands.html#GUID-CBA29F28-05EC-499C-93C7-091D7C2D427A" title="关键字在Recovery Manager语法中具有特殊含义。">RMAN语法中的关键字</a></p>
                        </li>
                        <li>
                           <p><a href="about-rman-commands.html#GUID-55CE1FB1-8D85-42C6-8D3E-AA962F4EA31F" title="语法图中的占位符表示非关键字。">RMAN语法中的占位符</a></p>
                        </li>
                        <li>
                           <p><a href="about-rman-commands.html#GUID-EF23D6BA-F6AC-4589-9BB5-A369D2BFC45C" title="RMAN语法图包含一些括在必需或可选引号中的占位符值。">RMAN语法中的引号</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="RCMRF1955"></a><div class="props_rev_3"><a id="GUID-CBA29F28-05EC-499C-93C7-091D7C2D427A" name="GUID-CBA29F28-05EC-499C-93C7-091D7C2D427A"></a><h4 id="RCMRF-GUID-CBA29F28-05EC-499C-93C7-091D7C2D427A" class="sect4"><span class="enumeration_section">1.1.1</span> RMAN语法中的关键字</h4>
                  <div>
                     <p>关键字在Recovery Manager语法中具有特殊含义。</p>
                     <p>在语法图中，关键字以矩形框和大写字体显示，如示例图中的“ <code class="codeph">CATALOG</code> ”一词。在文本和代码示例中使用时，RMAN关键字以大写，等宽字体显示，例如， <span class="bold"> </span> <code class="codeph">CATALOG</code> <code class="codeph"> </code> <code class="codeph">DATAFILECOPY</code> 。您必须完全按照语法图中显示的方式在RMAN语句中使用关键字，除非它们可以是大写或小写。
                     </p>
                  </div>
               </div><a id="RCMRF1956"></a><div class="props_rev_3"><a id="GUID-55CE1FB1-8D85-42C6-8D3E-AA962F4EA31F" name="GUID-55CE1FB1-8D85-42C6-8D3E-AA962F4EA31F"></a><h4 id="RCMRF-GUID-55CE1FB1-8D85-42C6-8D3E-AA962F4EA31F" class="sect4"><span class="enumeration_section">1.1.2</span> RMAN语法中的占位符</h4>
                  <div>
                     <p>语法图中的占位符表示非关键字。</p>
                     <p>在语法图中，占位符显示在椭圆中，如示例图中的<span class="italic">整数</span>一词所示。在文本中描述时，RMAN占位符以小写斜体显示，例如<code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code> 。
                     </p>
                     <p>占位符通常是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库对象的名称（ <span class="italic">tablespace_name</span> ）</p>
                        </li>
                        <li>
                           <p>Oracle数据类型名称（ <span class="italic">date_string</span> ）</p>
                        </li>
                        <li>
                           <p>子条款（ <span class="italic">datafileSpec</span> ）</p>
                        </li>
                     </ul>
                     <p>当您在语法图中看到占位符时，请在RMAN语句中替换相应类型的对象或表达式。例如，要将<code class="codeph">DUPLICATE TARGET DATABASE TO</code>写入<span class="italic">'database_name'</span>命令，请使用要为图中的<span class="italic">database_name</span>占位符创建的重复数据库的名称（如<code class="codeph">dupdb</code> 。
                     </p>
                     <p><a id="d4023e520" class="indexterm-anchor"></a><a id="d4023e524" class="indexterm-anchor"></a><a id="d4023e526" class="indexterm-anchor"></a><a id="d4023e528" class="indexterm-anchor"></a><a id="d4023e530" class="indexterm-anchor"></a><a id="d4023e534" class="indexterm-anchor"></a><a id="d4023e536" class="indexterm-anchor"></a> RMAN引用字符串中唯一与系统无关的有效环境变量是问号（ <code class="codeph">?</code> ）对于Oracle主目录和SID的at符号（ <code class="codeph">@</code> ）。但是，您可以在引用的字符串中使用目标系统上特定于操作系统的环境变量。环境变量由数据库服务器而不是RMAN客户端解释。
                     </p>
                     <p>下表显示了语法图中显示的占位符，并提供了可在语句中替换它们的值的示例。</p>
                     <div class="tblformal" id="GUID-55CE1FB1-8D85-42C6-8D3E-AA962F4EA31F__GUID-86FB5DD4-010D-411D-A11B-AF58C3BDAA8F">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Describes variables that appear in RMAN syntax" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d4023e556">占位符</th>
                                 <th align="left" valign="bottom" width="43%" id="d4023e559">描述</th>
                                 <th align="left" valign="bottom" width="29%" id="d4023e562">例子</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d4023e567" headers="d4023e556 ">
                                    <p>引用的字符串，例如<code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code> ， <code class="codeph">'</code> <span class="italic"><code class="codeph">tablespace_name</code></span> <code class="codeph">'</code> ， <code class="codeph">'</code> <span class="italic"><code class="codeph">channel_name</code></span> <code class="codeph">'</code> ， <code class="codeph">'</code> <span class="italic"><code class="codeph">channel_parms</code></span> <code class="codeph">'</code></p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d4023e567 d4023e559 ">
                                    <p>单引号或双引号中包含的字符串。带引号的字符串可能包含空格，标点符号以及RMAN和SQL关键字。</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d4023e567 d4023e562 ">
                                    <p><code class="codeph">“？/dbs/cf.f”</code></p>
                                    <p><code class="codeph">'DEV1'</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d4023e613" headers="d4023e556 ">
                                    <p>不带引号的字符串如<span class="italic"><code class="codeph">channel_id</code></span> ， <span class="italic"><code class="codeph">tag_name</code></span> ， <span class="italic"><code class="codeph">date_string</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d4023e613 d4023e559 ">
                                    <p>一系列字符，不包含空格，不包含标点字符，以字母字符开头。</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d4023e613 d4023e562 ">
                                    <p><code class="codeph">CH1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d4023e635" headers="d4023e556 ">
                                    <p><span class="italic"><code class="codeph">整数</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="43%" headers="d4023e635 d4023e559 ">
                                    <p>任何只有数字字符的序列。</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d4023e635 d4023e562 ">
                                    <p><code class="codeph">67843</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="RCMRF1957"></a><div class="props_rev_3"><a id="GUID-EF23D6BA-F6AC-4589-9BB5-A369D2BFC45C" name="GUID-EF23D6BA-F6AC-4589-9BB5-A369D2BFC45C"></a><h4 id="RCMRF-GUID-EF23D6BA-F6AC-4589-9BB5-A369D2BFC45C" class="sect4"><span class="enumeration_section">1.1.3</span> RMAN语法中的引号</h4>
                  <div>
                     <p>RMAN语法图包含一些括在必需或可选引号中的占位符值。</p>
                     <p><a id="d4023e730" class="indexterm-anchor"></a><a id="d4023e732" class="indexterm-anchor"></a>语法图显示单引号，但在所有情况下，双引号在RMAN语法中也有效。例如，您可以指定<code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code>或<code class="codeph">"</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">"</code> 。
                     </p>
                  </div>
               </div>
            </div><a id="RCMRF1958"></a><div class="props_rev_3"><a id="GUID-9B7F162A-B3D8-4241-AA8E-3AAA72048550" name="GUID-9B7F162A-B3D8-4241-AA8E-3AAA72048550"></a><h3 id="RCMRF-GUID-9B7F162A-B3D8-4241-AA8E-3AAA72048550" class="sect3"><span class="enumeration_section">1.2</span> RMAN命令的格式</h3>
               <div>
                  <p>RMAN语言是自由格式的。关键字必须至少用一个空格字符（例如空格，制表符或换行符）分隔。</p>
                  <p><a id="d4023e834" class="indexterm-anchor"></a><a id="d4023e836" class="indexterm-anchor"></a> RMAN命令以与RMAN命令中描述的命令相对应的关键字开始<a href="rman-commands-at-sign-to-quit.html#GUID-8757D5C8-9360-4696-B5EF-5E6D0F8E5440">：@（at符号）到QUIT</a> ，后跟参数并以分号结尾，如语法图所示。
                  </p>
                  <p>以下示例显示了RMAN备份命令：</p><pre class="oac_no_warn" dir="ltr">备份数据库;</pre><p>命令可以跨越多行。例如，您可以在单独的行中重写前面命令中的每个关键字，如下所示：</p><pre class="oac_no_warn" dir="ltr">备份数据库;</pre><p>单行中RMAN命令的最大长度为4000个字符。当命令超过此长度时，您可以将命令拆分为多个命令，也可以使用多行命令（使用Enter键使命令跨越多行）。例如，如果备份多个数据文件的<code class="codeph">BACKUP</code>命令超过4000个字符，则可以将此命令拆分为两个单独的<code class="codeph">BACKUP</code>命令，或者使单个<code class="codeph">BACKUP</code>命令跨越多个行。
                  </p>
                  <p><a id="d4023e863" class="indexterm-anchor"></a>您可以在行中的任何位置使用井号（ <code class="codeph">#</code> ）插入注释。在<code class="codeph">#</code>字符之后，该行的其余部分被忽略。例如：</p><pre class="oac_no_warn" dir="ltr">＃每天运行此命令一次备份INCREMENTAL LEVEL 1用于恢复COPY＃使用增量更新备份WITH TAG“DAILY_BACKUP”＃daily backup routine DATABASE;</pre></div>
            </div><a id="RCMRF89974"></a><a id="RCMRF89975"></a><a id="RCMRF909"></a><div class="props_rev_3"><a id="GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675" name="GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675"></a><h3 id="RCMRF-GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675" class="sect3"><span class="enumeration_section">1.3</span>关于RMAN保留字</h3>
               <div>
                  <p>RMAN语言包含在RMAN命令中使用或已经使用的保留字。通常，避免使用与RMAN命令语言中的主要含义冲突的保留字。</p>
                  <div class="section">
                     <p>如果必须使用保留字作为RMAN命令的参数（例如，作为文件名，表空间名称，标记名称等），则用单引号或双引号将其括起来。否则，RMAN无法正确解析您的命令并生成错误。<a href="about-rman-commands.html#GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675__CHDJDFGI">例1-1</a>显示了RMAN命令中RMAN保留字的正确和错误使用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675__CHDJDFGI">
                     <p class="titleinexample">例1-1使用保留字作为RMAN命令的参数</p><pre class="oac_no_warn" dir="ltr">ALLOCATE CHANNEL备份设备类型磁盘; ＃错误的ALLOCATE CHANNEL“备份”设备类型磁盘; ＃correct BACKUP DATABASE TAG full; ＃错误的BACKUP DATABASE TAG'full'; ＃正确</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-0EBC8675-D9D1-4E67-AA2A-4991C79E1675__GUID-51976B1A-C05C-417C-AAC9-5978ACB7181D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="rman-reserved-words.html#GUID-70EC82A8-19E0-40B6-BBAB-E30475639276" title="本节列出了RMAN保留字。">RMAN保留字</a>以获取所有当前保留字的列表</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="RCMRF89976"></a><a id="RCMRF1921"></a><div class="props_rev_3"><a id="GUID-5439AD1C-7BDD-4271-A320-B7657DC996D5" name="GUID-5439AD1C-7BDD-4271-A320-B7657DC996D5"></a><h3 id="RCMRF-GUID-5439AD1C-7BDD-4271-A320-B7657DC996D5" class="sect3"><span class="enumeration_section">1.4</span> RMAN命令摘要</h3>
               <div>
                  <p>RMAN命令可以在RMAN提示符下，在<code class="codeph">RUN</code>命令内执行，或两者都执行。
                  </p>
                  <div class="section">
                     <p>以前的RMAN版本中的所有命令都适用于当前版本，但现在不推荐使用某些命令和选项（请参阅<a href="deprecated-rman-syntax.html#GUID-E2B27FFB-FAF1-4622-94E5-E4D51D61E86B" title="This appendix describes Recovery Manager syntax that is deprecated and describes preferred syntax if any exists.">不</a>推荐的<a href="deprecated-rman-syntax.html#GUID-E2B27FFB-FAF1-4622-94E5-E4D51D61E86B" title="本附录描述了不推荐使用的Recovery Manager语法，并描述了首选语法（如果存在）。">RMAN语法</a> ）。有关RMAN客户端的命令行选项，请参阅<code class="codeph"><a href="RMAN.html#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code> 。 <a href="about-rman-commands.html#GUID-5439AD1C-7BDD-4271-A320-B7657DC996D5__CHDDIHID" title="简要描述所有RMAN命令">表1-1</a>提供了RMAN命令的功能摘要。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-5439AD1C-7BDD-4271-A320-B7657DC996D5__CHDDIHID">
                     <p class="titleintable">表1-1 <span class="bold">Recovery Manager命令</span></p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Recovery Manager命令" width="100%" border="1" summary="Briefly describes all RMAN commands" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d4023e1170">命令</th>
                              <th align="left" valign="bottom" width="70%" id="d4023e1173">目的</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1178" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="at-sign.html#GUID-7A3919FE-140B-4F50-BA2F-3CEE3285E771">@（在牌子上）</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1178 d4023e1173 ">
                                 <p>运行命令文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1188" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="double-at-sign.html#GUID-E2B8B99B-73CB-4D4E-8065-0B9F44AF8A52">@@（双重标志）</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1188 d4023e1173 ">
                                 <p>在与当前正在运行的另一个命令文件相同的目录中运行命令文件。的<code class="codeph">@@</code>命令从不同<code class="codeph">@</code>命令从命令文件中运行，只有当。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1204" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="ADVISE-FAILURE.html#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C">建议失败</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1204 d4023e1173 ">
                                 <p>显示修复选项。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1214" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">分配频道</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1214 d4023e1173 ">
                                 <p>建立一个通道，它是RMAN和数据库实例之间的连接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1224" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="ALLOCATE-CHANNEL-FOR-MAINTENANCE.html#GUID-6F9887A0-1D48-4332-8E59-6FA2EFE67824">分配维护通道</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1224 d4023e1173 ">
                                 <p>分配通道以准备发出维护命令，例如<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1239" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1239 d4023e1173 ">
                                 <p>备份数据库文件，数据库文件副本，存档日志或备份集。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1249" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CATALOG.html#GUID-6E337759-9860-463A-BF7C-8512B272B8E1">目录</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1249 d4023e1173 ">
                                 <p>将有关文件副本和用户管理的备份的信息添加到存储库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1259" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">更改</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1259 d4023e1173 ">
                                 <p>将备份片段，映像副本或归档重做日志标记为具有<code class="codeph">UNAVAILABLE</code>或<code class="codeph">AVAILABLE</code>状态;删除备份或副本的存储库记录;覆盖备份或副本的保留策略;使用<code class="codeph">DB_UNIQUE_NAME</code>更新目标数据库的恢复目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1278" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">配置</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1278 d4023e1173 ">
                                 <p>配置持久性RMAN设置。这些设置适用于所有RMAN会话，直到显式更改或禁用。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1288" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1288 d4023e1173 ">
                                 <p>在RMAN与目标，辅助或恢复目录数据库之间建立连接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1298" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CONVERT.html#GUID-AD252F46-DD9E-4E2C-BF0E-DF2A4C7590C9">兑换</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1298 d4023e1173 ">
                                 <p>转换数据文件格式，以跨平台传输表空间和数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1309" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CREATE-CATALOG.html#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC">创建目录</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1309 d4023e1173 ">
                                 <p>创建恢复目录的架构。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1319" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CREATE-SCRIPT.html#GUID-4741C1E1-C365-4597-BF2F-8679145B4946">创建脚本</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1319 d4023e1173 ">
                                 <p>创建存储的脚本并将其存储在恢复目录中。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1329" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="CROSSCHECK.html#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D">CROSSCHECK</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1329 d4023e1173 ">
                                 <p>确定RMAN管理的文件（如存档日志，数据文件副本和备份片段）是否仍存在于磁盘或磁带上。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1339" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">删除</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1339 d4023e1173 ">
                                 <p>删除备份和副本，从恢复目录中删除对它们的引用，并将其控制文件记录更新为<code class="codeph">DELETED</code>状态。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1352" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="DELETE-SCRIPT.html#GUID-FD104F0A-1A3E-45BA-A37E-648A1B0DADA0">删除脚本</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1352 d4023e1173 ">
                                 <p>从恢复目录中删除存储的脚本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1362" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="DESCRIBE.html#GUID-8D256DA7-D553-4886-BDD0-B920524FE0D1">描述</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1362 d4023e1173 ">
                                 <p>列出表或视图的列定义。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1372" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="DROP-CATALOG.html#GUID-A406A103-5EC2-4087-B317-F4ACDFC99A02">DROP CATALOG</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1372 d4023e1173 ">
                                 <p>从恢复目录中删除架构。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1382" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="DROP-DATABASE.html#GUID-6553DD22-C68F-465C-B45D-FBD09D7E30CF">DROP DATABASE</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1382 d4023e1173 ">
                                 <p>从磁盘中删除目标数据库并取消注册。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1392" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">重复</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1392 d4023e1173 ">
                                 <p>使用目标数据库的备份来创建可用于测试目的或创建备用数据库的重复数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1402" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="EXECUTE-SCRIPT.html#GUID-553B5C55-0BA6-4B47-86A9-0BCF839CCE04">执行脚本</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1402 d4023e1173 ">
                                 <p>运行RMAN存储的脚本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1412" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="EXIT.html#GUID-4A316732-92C9-48CC-8FD9-D59DB5D78E3A">出口</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1412 d4023e1173 ">
                                 <p>退出RMAN可执行文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1423" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="FLASHBACK-DATABASE.html#GUID-584AC79A-40C5-45CA-8C63-DED3BE3A4511">FLASHBACK数据库</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1423 d4023e1173 ">
                                 <p>将数据库返回到之前的状态或SCN。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1433" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="GRANT.html#GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2">GRANT</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1433 d4023e1173 ">
                                 <p>授予恢复目录用户权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1443" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="HOST.html#GUID-0E990CCC-3D9C-4AEB-8AE2-4DA7E9B7D7D2">主办</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1443 d4023e1173 ">
                                 <p>从RMAN中调用操作系统命令行子shell或运行特定的操作系统命令。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1453" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="IMPORT-CATALOG.html#GUID-70D3A403-822A-40E7-B1BC-C7649F441058">进口目录</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1453 d4023e1173 ">
                                 <p>将元数据从一个恢复目录导入另一个恢复目录。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1463" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1463 d4023e1173 ">
                                 <p>生成备份集或副本的详细列表。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1473" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="PRINT-SCRIPT.html#GUID-FB2882A0-48C0-4D00-8ED6-9F6B2CD15FEC">打印脚本</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1473 d4023e1173 ">
                                 <p>显示存储的脚本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1483" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="QUIT.html#GUID-B9E73011-0E55-4B76-ADB1-6B1273D5F605">放弃</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1483 d4023e1173 ">
                                 <p>退出RMAN可执行文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1493" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">恢复</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1493 d4023e1173 ">
                                 <p>将重做日志文件和增量备份应用于从备份或数据文件副本还原的数据文件或数据块，以将其更新到指定时间。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1503" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="REGISTER-DATABASE.html#GUID-F52FDFAD-C13E-4076-9589-58FB2ACB0691">注册数据库</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1503 d4023e1173 ">
                                 <p>在恢复目录中注册目标数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1513" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RELEASE-CHANNEL.html#GUID-E5B046B9-FE5E-46B4-ABDB-455DB433AECD">发布频道</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1513 d4023e1173 ">
                                 <p>释放使用<code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">ALLOCATE CHANNEL</a></code>命令或<code class="codeph"><a href="ALLOCATE-CHANNEL-FOR-MAINTENANCE.html#GUID-6F9887A0-1D48-4332-8E59-6FA2EFE67824">ALLOCATE CHANNEL FOR MAINTENANCE</a></code>命令分配的<code class="codeph"><a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE">ALLOCATE CHANNEL</a></code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1533" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="REPAIR-FAILURE.html#GUID-8BF5A460-940A-41D0-9A8B-C14A303DEA98">修复失败</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1533 d4023e1173 ">
                                 <p>修复自动诊断存储库中记录的一个或多个故障。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1544" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="REPLACE-SCRIPT.html#GUID-2C86EDA9-63BE-4F21-9138-AF75597D5ADF">更换脚本</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1544 d4023e1173 ">
                                 <p>替换存储在恢复目录中的现有脚本。如果脚本不存在，则<code class="codeph">REPLACE</code> <code class="codeph">SCRIPT</code>创建它。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1560" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="REPORT.html#GUID-8352987F-533A-4146-A157-F091103169B0">报告</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1560 d4023e1173 ">
                                 <p>对恢复目录的内容执行详细分析。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1570" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RESET-DATABASE.html#GUID-C0C00F35-F21F-4657-AE9B-652C4DCE5817">重置数据库</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1570 d4023e1173 ">
                                 <p>通知RMAN已执行SQL语句<code class="codeph">ALTER DATABASE OPEN RESETLOGS</code>并且已创建目标数据库的新化身，或将目标数据库重置为先前的化身。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1583" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">恢复</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1583 d4023e1173 ">
                                 <p>将文件从备份集或磁盘副本还原到默认位置或新位置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1593" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RESYNC-CATALOG.html#GUID-DF91BD12-A00D-49CC-99C5-E8EDD0094CCE">RESYNC目录</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1593 d4023e1173 ">
                                 <p>执行完全重新同步，创建快照控制文件，然后将该快照控制文件中的任何新信息或已更改信息复制到恢复目录。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1603" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="REVOKE.html#GUID-4F83C820-E3C2-46A2-B954-1EF589A4B9C8">撤消</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1603 d4023e1173 ">
                                 <p>撤消恢复目录用户的权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1613" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RMAN.html#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1613 d4023e1173 ">
                                 <p>从操作系统命令行启动RMAN。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1623" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">跑</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1623 d4023e1173 ">
                                 <p>执行一个或多个RMAN命令的序列，这些命令是在<code class="codeph">RUN</code>的括号内执行的一个或多个语句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1636" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SEND.html#GUID-4AD68AC8-1A0A-4FDC-90D5-BDA278393D97">发送</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1636 d4023e1173 ">
                                 <p>将特定于供应商的引用字符串发送到一个或多个特定通道。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1646" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">组</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1646 d4023e1173 ">
                                 <p>设置在RUN块或会话期间影响RMAN行为的各种属性的值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1656" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SHOW.html#GUID-6C2AF43B-FADD-41AF-9408-852A69538E2F">节目</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1656 d4023e1173 ">
                                 <p>显示当前的<code class="codeph">CONFIGURE</code>设置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1670" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SHUTDOWN.html#GUID-AD7BC13C-E8B7-4CB2-BACB-D2F98DB0E58F">关掉</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1670 d4023e1173 ">
                                 <p>关闭目标数据库。此命令等同于SQL * Plus <code class="codeph">SHUTDOWN</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1683" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SPOOL.html#GUID-5B739051-429E-4C72-B96F-4A7E5A7C2A49">SPOOL</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1683 d4023e1173 ">
                                 <p>将RMAN输出写入日志文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1693" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SQL.html#GUID-D55D7184-60DA-4B11-B483-8F14726AFE43">SQL</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1693 d4023e1173 ">
                                 <p>从Recovery Manager中执行SQL语句或PL / SQL过程。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1703" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SQL-Quoted.html#GUID-D8D11F06-005D-40EE-B041-BC46C52E71AE">SQL（引用）</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1703 d4023e1173 ">
                                 <p>从Recovery Manager中执行SQL语句。有关改进的语法，请参阅SQL命令。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1713" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="STARTUP.html#GUID-96DFEF80-A2D1-493C-8CFF-BF0CB4BE281D">启动</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1713 d4023e1173 ">
                                 <p>启动目标数据库。此命令等同于SQL * Plus <code class="codeph">STARTUP</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1726" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C">开关</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1726 d4023e1173 ">
                                 <p>指定数据文件副本现在是<strong class="term">当前数据文件</strong> ，即控制文件指向的数据文件。此命令等同于应用于数据文件的SQL语句<code class="codeph">ALTER DATABASE RENAME FILE</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1742" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="TRANSPORT-TABLESPACE.html#GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D">TRANSPORT TABLESPACE</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1742 d4023e1173 ">
                                 <p>从备份为一个或多个表空间创建可传输表空间集。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1752" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="UNREGISTER.html#GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB">UNREGISTER</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1752 d4023e1173 ">
                                 <p>从恢复目录中取消注册数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1762" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="UPGRADE-CATALOG.html#GUID-E6080FD7-5C15-4659-8D4E-C56E6D9004D1">升级目录</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1762 d4023e1173 ">
                                 <p>将恢复目录架构从旧版本升级到RMAN可执行文件所需的版本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d4023e1772" headers="d4023e1170 ">
                                 <p><code class="codeph"><a href="VALIDATE.html#GUID-ECE57997-40CE-4029-A434-320441D2AD1E">VALIDATE</a></code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d4023e1772 d4023e1173 ">
                                 <p>检查备份集并报告其数据是否完好。RMAN扫描指定备份集中的所有备份片段并查看校验和以验证是否可以成功还原内容。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="RCMRF89977"></a><a id="RCMRF1959"></a><div class="props_rev_3"><a id="GUID-F3B3D81D-78C8-4534-8E63-1F0D6E974F40" name="GUID-F3B3D81D-78C8-4534-8E63-1F0D6E974F40"></a><h3 id="RCMRF-GUID-F3B3D81D-78C8-4534-8E63-1F0D6E974F40" class="sect3"><span class="enumeration_section">1.5</span> RMAN子条款摘要</h3>
               <div>
                  <p>RMAN子条款用于多个命令。</p>
                  <div class="section">
                     <p>子条款在单独的章节中记录，以避免不必要的重复。使用这些子条款的命令的描述包括对<a href="rman-subclauses.html#GUID-9CA7EDD1-A347-4801-8A20-2F1071D92AA4">RMAN子条款中的子</a>条目条目的交叉引用。<a href="about-rman-commands.html#GUID-F3B3D81D-78C8-4534-8E63-1F0D6E974F40__CHDJAIIC" title="简要描述在多个命令中使用的子条款">表1-2</a>总结了RMAN子条款。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-F3B3D81D-78C8-4534-8E63-1F0D6E974F40__CHDJAIIC">
                     <p class="titleintable">表1-2 <span class="bold">Recovery Manager子条款</span></p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Recovery Manager子条款" width="100%" border="1" summary="Briefly describes the subclauses that are used in multiple commands" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d4023e1894">子条款</th>
                              <th align="left" valign="bottom" width="67%" id="d4023e1897">指定。 。 。</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1902" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1902 d4023e1897 ">
                                 <p>通道控制选项，例如<code class="codeph">PARMS</code>和<code class="codeph">FORMAT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1918" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703">archivelogRecordSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1918 d4023e1897 ">
                                 <p>一系列存档的重做日志文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1929" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="completedTimeSpec.html#GUID-BC83D915-FF57-467D-A606-5B699F2EF4DE">completedTimeSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1929 d4023e1897 ">
                                 <p>备份或复制完成的时间范围</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1940" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="connectStringSpec.html#GUID-DAA7D54B-1954-4AA3-A423-E1AB9F68A2FD">connectStringSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1940 d4023e1897 ">
                                 <p>用于连接目标，恢复目录或辅助数据库的用户名，密码和网络服务名称。必须连接才能对用户进行身份验证并识别数据库</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1951" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1951 d4023e1897 ">
                                 <p>按文件名或绝对文件号的数据文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1962" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="dbObject.html#GUID-C5C5EC3A-1B4E-4591-8E70-715E4BDC9FF8">DBOBJECT</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1962 d4023e1897 ">
                                 <p>数据库或数据库的一部分。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1973" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1973 d4023e1897 ">
                                 <p>备份或复制的存储设备类型</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e1984" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="fileNameConversionSpec.html#GUID-486FE88C-2B48-40C7-B29A-8AC669F29FA3">fileNameConversionSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e1984 d4023e1897 ">
                                 <p>在<code class="codeph">BACKUP AS COPY</code> ， <code class="codeph">CONVERT</code>和<code class="codeph">DUPLICATE</code>期间将源转换为目标文件名的模式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2003" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="forDbUniqueNameOption.html#GUID-D1D9CFED-9A57-438A-A80C-D8B7B6E131BE">forDbUniqueNameOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2003 d4023e1897 ">
                                 <p>Data Guard环境中的所有数据库或具有指定<code class="codeph">DB_UNIQUE_NAME</code>的数据库</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2016" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="foreignFileSpec.html#GUID-38CC0715-B32B-4394-92FB-3E0CB7C3ABE3">foreignFileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2016 d4023e1897 ">
                                 <p>要恢复的数据库对象的名称以及包含这些对象的备份集</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2027" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="foreignlogRecordSpecifier.html#GUID-122E19A7-5BCC-434C-BE2A-9D4F248EA02C">foreignlogRecordSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2027 d4023e1897 ">
                                 <p>一系列外部归档重做日志文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2039" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="formatSpec.html#GUID-E51F637A-57E0-4B06-803F-3F879DF5BEED">formatSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2039 d4023e1897 ">
                                 <p>备份或副本的文件名格式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2050" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="keepOption.html#GUID-36E9008E-48A5-4AB9-8C9D-2D477342594B">keepOption</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2050 d4023e1897 ">
                                 <p>备份或副本是否受当前保留策略的约束</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2061" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="listObjList.html#GUID-73596ED4-99FE-45B8-B333-FECC698E1374">listObjList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2061 d4023e1897 ">
                                 <p><code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code>命令要显示的项目</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2077" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="maintQualifier.html#GUID-6AF4DA92-BBBD-4931-96D2-766D9D29EA3F">maintQualifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2077 d4023e1897 ">
                                 <p>维护命令的其他选项，例如<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>和<code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2097" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="maintSpec.html#GUID-933AD976-5FCC-4684-80BB-264F6FC8A06B">maintSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2097 d4023e1897 ">
                                 <p>由<code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code> ， <code class="codeph"><a href="CROSSCHECK.html#GUID-07E07E7E-9A29-4901-9739-FFC472029A7D">CROSSCHECK</a></code>和<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>等维护命令操作的文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2122" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="obsOperandList.html#GUID-261A8B55-89DD-46DC-B7C4-6951E131FBAA">obsOperandList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2122 d4023e1897 ">
                                 <p>根据指定条件过时的备份</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2133" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="recordSpec.html#GUID-92F09EC0-5E30-47C0-834E-5A24FAE98F14">recordSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2133 d4023e1897 ">
                                 <p>维护命令操作的对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2144" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="sizeSpec.html#GUID-146EDBEE-BCED-4BD4-A720-8E51AA8DC577">sizeSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2144 d4023e1897 ">
                                 <p>数据大小</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2155" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="tempfileSpec.html#GUID-783EB37D-C3F1-4245-BDF1-E463F65A1AE4">tempfileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2155 d4023e1897 ">
                                 <p>按路径或文件编号的临时文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d4023e2166" headers="d4023e1894 ">
                                 <p><span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d4023e2166 d4023e1897 ">
                                 <p>时间上限，SCN或日志序列号。此子句通常用于指定不完全恢复的所需时间点</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05011.sample-programs.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>示例程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="embedded-SQL-statements-and-directives.html" title="Previous" type="text/html"></link>
      <link rel="next" href="integration-with-Microsoft-Visual-Studio.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="embedded-SQL-statements-and-directives.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="integration-with-Microsoft-Visual-Studio.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="appendixes.html" property="item" typeof="WebPage"><span property="name">附录</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">示例程序</li>
            </ol>
            <a id="GUID-B3880B56-46A7-47C6-AC71-C8343656FAD5" name="GUID-B3880B56-46A7-47C6-AC71-C8343656FAD5"></a><a id="LNPCC5122"></a>
            
            <h2 id="LNPCC-GUID-B3880B56-46A7-47C6-AC71-C8343656FAD5" class="sect2"><span class="enumeration_chapter">F</span>示例程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何使用此版本附带的示例程序使用Pro * C / C ++构建Oracle数据库应用程序。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="sample-programs.html#GUID-A52BD4F7-857B-4086-B510-059754DE5806">示例程序说明</a></p>
                  </li>
                  <li>
                     <p><a href="sample-programs.html#GUID-9DDD96DB-3982-4913-9901-9B15EC6EDD94">构建演示表</a></p>
                  </li>
                  <li>
                     <p><a href="sample-programs.html#GUID-325C3348-A8D7-4429-BF48-A5C83C010C1E">关于构建示例程序</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC5124"></a><a id="LNPCC5123"></a><div class="props_rev_3"><a id="GUID-A52BD4F7-857B-4086-B510-059754DE5806" name="GUID-A52BD4F7-857B-4086-B510-059754DE5806"></a><h3 id="LNPCC-GUID-A52BD4F7-857B-4086-B510-059754DE5806" class="sect3"><span class="enumeration_section">F.1</span>示例程序描述</h3>
               <div>
                  <div class="section">
                     <p><a id="d142934e189" class="indexterm-anchor"></a>安装Pro * C / C ++时，Oracle Universal Installer <code class="codeph">\precomp\demo\proc</code>一组Pro * C / C ++示例程序复制到<span class="italic"><code class="codeph">ORACLE_BASE\ORACLE_HOME</code></span> <code class="codeph">\precomp\demo\proc</code>目录。这些样本程序列于<a href="sample-programs.html#GUID-A52BD4F7-857B-4086-B510-059754DE5806__BABHJJEC" title="示例程序列表">表F-1中，</a>并在后续章节中描述。
                     </p>
                     <p>构建时，Oracle提供的示例程序生成<code class="codeph">.exe</code>可执行文件。
                     </p>
                     <p>对于某些示例程序，如表的Notes列中所示，在预编译和运行示例程序之前，必须在示例目录中运行SQL脚本。SQL脚本设置正确的表和数据，以便示例程序正确运行。这些SQL脚本位于<span class="italic"><code class="codeph">ORACLE_BASE</code></span> <code class="codeph">\</code> <span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\precomp\demo\sql</code>目录中。
                     </p>
                     <p>Oracle Corporation建议您构建并运行这些示例程序，以验证Pro * C / C ++是否已成功安装并正常运行。您可以在使用它们后删除它们。</p>
                     <p>您可以使用名为<code class="codeph">pcmake.bat</code>的批处理文件或使用Microsoft Visual Studio构建示例程序。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-FAD4DD3F-6796-4071-A9BB-D7E0827258ED">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="sample-programs.html#GUID-325C3348-A8D7-4429-BF48-A5C83C010C1E">关于构建示例程序</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-A52BD4F7-857B-4086-B510-059754DE5806__BABHJJEC">
                     <p class="titleintable">表F-1示例程序</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="示例程序" width="100%" border="1" summary="List of sample programs" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d142934e249">示例程序</th>
                              <th align="left" valign="bottom" width="20%" id="d142934e252">源文件</th>
                              <th align="left" valign="bottom" width="20%" id="d142934e255">Pro * C / C ++ GUI项目文件</th>
                              <th align="left" valign="bottom" width="20%" id="d142934e258">MSVC编译器项目文件</th>
                              <th align="left" valign="bottom" width="20%" id="d142934e263">笔记</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e268" headers="d142934e249 ">
                                 <p><code class="codeph">ANSIDYN1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e268 d142934e252 ">
                                 <p><code class="codeph">ansidyn1.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e268 d142934e255 ">
                                 <p><code class="codeph">ansidyn1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e268 d142934e258 ">
                                 <p><code class="codeph">ansidyn1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e268 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e288" headers="d142934e249 ">
                                 <p><code class="codeph">ANSIDYN2</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e288 d142934e252 ">
                                 <p><code class="codeph">ansidyn2.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e288 d142934e255 ">
                                 <p><code class="codeph">ansidyn2.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e288 d142934e258 ">
                                 <p><code class="codeph">ansidyn2.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e288 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e308" headers="d142934e249 ">
                                 <p><code class="codeph">COLDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e308 d142934e252 ">
                                 <p><code class="codeph">coldemo1.h coldemo1.pc coldemo1.sql coldemo1.typ</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e308 d142934e255 ">
                                 <p><code class="codeph">coldemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e308 d142934e258 ">
                                 <p><code class="codeph">coldemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e308 d142934e263 ">
                                 <p>在构建<code class="codeph">coldemo1</code>之前运行<code class="codeph">coldemo1.sql</code>和Object Type Translator。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e340" headers="d142934e249 ">
                                 <p><code class="codeph">CPDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e340 d142934e252 ">
                                 <p><code class="codeph">cpdemo1.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e340 d142934e255 ">
                                 <p><code class="codeph">cpdemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e340 d142934e258 ">
                                 <p><code class="codeph">cpdemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e340 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e360" headers="d142934e249 ">
                                 <p><code class="codeph">CPDEMO2</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e360 d142934e252 ">
                                 <p><code class="codeph">cpdemo2.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e360 d142934e255 ">
                                 <p><code class="codeph">cpdemo2.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e360 d142934e258 ">
                                 <p><code class="codeph">cpdemo2.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e360 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e380" headers="d142934e249 ">
                                 <p><code class="codeph">CPPDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e380 d142934e252 ">
                                 <p><code class="codeph">cppdemo1.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e380 d142934e255 ">
                                 <p><code class="codeph">cppdemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e380 d142934e258 ">
                                 <p><code class="codeph">cppdemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e380 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e400" headers="d142934e249 ">
                                 <p><code class="codeph">CPPDEMO2</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e400 d142934e252 ">
                                 <p><code class="codeph">cppdemo2.pc empclass.pc cppdemo2.sql empclass.h</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e400 d142934e255 ">
                                 <p><code class="codeph">cppdemo2.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e400 d142934e258 ">
                                 <p><code class="codeph">cppdemo2.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e400 d142934e263 ">
                                 <p>运行<code class="codeph">cppdemo2.sql</code>建设之前<code class="codeph">cppdemo2</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e432" headers="d142934e249 ">
                                 <p><code class="codeph">CPPDEMO3</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e432 d142934e252 ">
                                 <p><code class="codeph">cppdemo3.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e432 d142934e255 ">
                                 <p><code class="codeph">cppdemo3.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e432 d142934e258 ">
                                 <p><code class="codeph">cppdemo3.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e432 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e452" headers="d142934e249 ">
                                 <p><code class="codeph">CVDEMO</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e452 d142934e252 ">
                                 <p><code class="codeph">cv_demo.pc cv_demo.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e452 d142934e255 ">
                                 <p><code class="codeph">cv_demo.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e452 d142934e258 ">
                                 <p><code class="codeph">cv_demo.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e452 d142934e263 ">
                                 <p>运行<code class="codeph">cv_demo.sql</code>建设之前<code class="codeph">cv_demo</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e480" headers="d142934e249 ">
                                 <p><code class="codeph">EMPCLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e480 d142934e252 ">
                                 <p><code class="codeph">cppdemo2.pc empclass.pc cppdemo2.sql empclass.h</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e480 d142934e255 ">
                                 <p><code class="codeph">empclass.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e480 d142934e258 ">
                                 <p><code class="codeph">empclass.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e480 d142934e263 ">
                                 <p>运行<code class="codeph">cppdemo2.sql</code>建设之前<code class="codeph">empclass</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e512" headers="d142934e249 ">
                                 <p><code class="codeph">LOBDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e512 d142934e252 ">
                                 <p><code class="codeph">lobdemo1.h lobdemo1.pc lobdemo1.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e512 d142934e255 ">
                                 <p><code class="codeph">lobdemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e512 d142934e258 ">
                                 <p><code class="codeph">lobdemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e512 d142934e263 ">
                                 <p>运行<code class="codeph">lobdemo1.sql</code>建设之前<code class="codeph">lobdemo1</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e543" headers="d142934e249 ">
                                 <p><code class="codeph">MLTTHRD1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e543 d142934e252 ">
                                 <p><code class="codeph">mltthrd1.pc mltthrd1.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e543 d142934e255 ">
                                 <p><code class="codeph">mltthrd1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e543 d142934e258 ">
                                 <p><code class="codeph">mltthrd1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e543 d142934e263 ">
                                 <p>运行<code class="codeph">mltthrd1.sql</code>建设之前<code class="codeph">mltthrd1</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e571" headers="d142934e249 ">
                                 <p><code class="codeph">NAVDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e571 d142934e252 ">
                                 <p><code class="codeph">navdemo1.h navdemo1.pc navdemo1.sql navdemo1.typ</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e571 d142934e255 ">
                                 <p><code class="codeph">navdemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e571 d142934e258 ">
                                 <p><code class="codeph">navdemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e571 d142934e263 ">
                                 <p>在构建<code class="codeph">navdemo1</code>之前运行<code class="codeph">navdemo1.sql</code>和Object Type Translator。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e603" headers="d142934e249 ">
                                 <p><code class="codeph">OBJDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e603 d142934e252 ">
                                 <p><code class="codeph">objdemo1.h objdemo1.pc objdemo1.sql objdemo1.typ</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e603 d142934e255 ">
                                 <p><code class="codeph">objdemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e603 d142934e258 ">
                                 <p><code class="codeph">objdemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e603 d142934e263 ">
                                 <p>在构建<code class="codeph">objdemo1</code>之前运行<code class="codeph">objdemo1.sql</code>和Object Type Translator。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e635" headers="d142934e249 ">
                                 <p><code class="codeph">ORACA</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e635 d142934e252 ">
                                 <p><code class="codeph">oraca.pc oracatst.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e635 d142934e255 ">
                                 <p><code class="codeph">oraca.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e635 d142934e258 ">
                                 <p><code class="codeph">oraca.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e635 d142934e263 ">
                                 <p>运行<code class="codeph">oracatst.sql</code>建设之前<code class="codeph">oraca</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e663" headers="d142934e249 ">
                                 <p><code class="codeph">PLSSAM</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e663 d142934e252 ">
                                 <p><code class="codeph">plssam.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e663 d142934e255 ">
                                 <p><code class="codeph">plssam.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e663 d142934e258 ">
                                 <p><code class="codeph">plssam.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e663 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e683" headers="d142934e249 ">
                                 <p><code class="codeph">样品</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e683 d142934e252 ">
                                 <p><code class="codeph">sample.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e683 d142934e255 ">
                                 <p><code class="codeph">sample.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e683 d142934e258 ">
                                 <p><code class="codeph">sample.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e683 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e703" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e703 d142934e252 ">
                                 <p><code class="codeph">sample1.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e703 d142934e255 ">
                                 <p><code class="codeph">sample1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e703 d142934e258 ">
                                 <p><code class="codeph">sample1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e703 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e723" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE2</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e723 d142934e252 ">
                                 <p><code class="codeph">sample2.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e723 d142934e255 ">
                                 <p><code class="codeph">sample2.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e723 d142934e258 ">
                                 <p><code class="codeph">sample2.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e723 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e743" headers="d142934e249 ">
                                 <p><code class="codeph">样本3</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e743 d142934e252 ">
                                 <p><code class="codeph">sample3.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e743 d142934e255 ">
                                 <p><code class="codeph">sample3.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e743 d142934e258 ">
                                 <p><code class="codeph">sample3.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e743 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e763" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE4</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e763 d142934e252 ">
                                 <p><code class="codeph">sample4.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e763 d142934e255 ">
                                 <p><code class="codeph">sample4.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e763 d142934e258 ">
                                 <p><code class="codeph">sample4.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e763 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e783" headers="d142934e249 ">
                                 <p><code class="codeph">实例5</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e783 d142934e252 ">
                                 <p><code class="codeph">sample5.pc exampbld.sql examplod.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e783 d142934e255 ">
                                 <p><code class="codeph">sample5.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e783 d142934e258 ">
                                 <p><code class="codeph">sample5.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e783 d142934e263 ">
                                 <p>运行<code class="codeph">exampbld.sql</code> ，然后运行<code class="codeph">examplod.sql</code>建设之前， <code class="codeph">sample5</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e817" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE6</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e817 d142934e252 ">
                                 <p><code class="codeph">sample6.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e817 d142934e255 ">
                                 <p><code class="codeph">sample6.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e817 d142934e258 ">
                                 <p><code class="codeph">sample6.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e817 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e837" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE7</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e837 d142934e252 ">
                                 <p><code class="codeph">sample7.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e837 d142934e255 ">
                                 <p><code class="codeph">sample7.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e837 d142934e258 ">
                                 <p><code class="codeph">sample7.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e837 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e857" headers="d142934e249 ">
                                 <p><code class="codeph">样品8</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e857 d142934e252 ">
                                 <p><code class="codeph">sample8.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e857 d142934e255 ">
                                 <p><code class="codeph">sample8.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e857 d142934e258 ">
                                 <p><code class="codeph">sample8.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e857 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e877" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE9</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e877 d142934e252 ">
                                 <p><code class="codeph">sample9.pc calldemo.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e877 d142934e255 ">
                                 <p><code class="codeph">sample9.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e877 d142934e258 ">
                                 <p><code class="codeph">sample9.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e877 d142934e263 ">
                                 <p>运行<code class="codeph">calldemo.sql</code>建设之前<code class="codeph">sample9</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e905" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE10</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e905 d142934e252 ">
                                 <p><code class="codeph">sample10.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e905 d142934e255 ">
                                 <p><code class="codeph">sample10.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e905 d142934e258 ">
                                 <p><code class="codeph">sample10.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e905 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e925" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE11</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e925 d142934e252 ">
                                 <p><code class="codeph">sample11.pc sample11.sql</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e925 d142934e255 ">
                                 <p><code class="codeph">sample11.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e925 d142934e258 ">
                                 <p><code class="codeph">sample11.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e925 d142934e263 ">
                                 <p>运行<code class="codeph">sample11.sql</code>建设之前<code class="codeph">sample11</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e953" headers="d142934e249 ">
                                 <p><code class="codeph">SAMPLE12</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e953 d142934e252 ">
                                 <p><code class="codeph">sample12.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e953 d142934e255 ">
                                 <p><code class="codeph">sample12.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e953 d142934e258 ">
                                 <p><code class="codeph">sample12.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e953 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e973" headers="d142934e249 ">
                                 <p><code class="codeph">SCDEMO1</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e973 d142934e252 ">
                                 <p><code class="codeph">scdemo1.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e973 d142934e255 ">
                                 <p><code class="codeph">scdemo1.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e973 d142934e258 ">
                                 <p><code class="codeph">scdemo1.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e973 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e993" headers="d142934e249 ">
                                 <p><code class="codeph">SCDEMO2</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e993 d142934e252 ">
                                 <p><code class="codeph">scdemo2.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e993 d142934e255 ">
                                 <p><code class="codeph">scdemo2.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e993 d142934e258 ">
                                 <p><code class="codeph">scdemo2.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e993 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e1013" headers="d142934e249 ">
                                 <p><code class="codeph">SQLVCP</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1013 d142934e252 ">
                                 <p><code class="codeph">sqlvcp.pc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1013 d142934e255 ">
                                 <p><code class="codeph">sqlvcp.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1013 d142934e258 ">
                                 <p><code class="codeph">sqlvcp.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1013 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d142934e1033" headers="d142934e249 ">
                                 <p><code class="codeph">WINSAM</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1033 d142934e252 ">
                                 <p><code class="codeph">resource.h winsam.h winsam.ico winsam.pc winsam.rc</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1033 d142934e255 ">
                                 <p><code class="codeph">winsam.pre</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1033 d142934e258 ">
                                 <p><code class="codeph">winsam.dsp</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d142934e1033 d142934e263 ">
                                 <p>-</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><a id="d142934e1062" class="indexterm-anchor"></a>以下小节描述了示例程序的功能。
                     </p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-B297D84C-5534-4DAC-B2D5-F70B672ABC39"><!-- --></a> ANSIDYN1</dt>
                        <dd>
                           <p>演示使用ANSI动态SQL处理在运行时之前不知道的SQL语句。该程序旨在演示使用ANSI动态SQL的最简单（尽管不是最有效）的方法。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-08DC2C42-5B4C-4B98-808D-83F816714387"><!-- --></a> ANSIDYN2</dt>
                        <dd>
                           <p>演示使用ANSI动态SQL处理在运行时之前不知道的SQL语句。该程序使用Oracle扩展进行批处理和引用语义。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-A142E726-4DB9-44F3-9364-F350C92FE84B"><!-- --></a> COLDEMO1</dt>
                        <dd>
                           <p>获取加州县的人口普查信息。该程序演示了浏览集合类型数据库列的各种方法。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-D6449CAC-C842-468A-BECF-A6841501054A"><!-- --></a> CPDEMO1</dt>
                        <dd>
                           <p>演示如何使用连接池功能。它还显示了如何使用不同的连接池选项来优化性能。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-6543D877-9BF7-46F8-A186-4924559A0608"><!-- --></a> CPDEMO2</dt>
                        <dd>
                           <p>使用相对复杂的SQL语句集演示连接池功能，并显示性能增益取决于程序使用的SQL语句的类型。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-DCC9AB7D-E2F4-4671-B74A-EAEEAD7D6B97"><!-- --></a> CPPDEMO1</dt>
                        <dd>
                           <p>提示用户输入员工编号，然后在<code class="codeph">emp</code>表中查询员工的姓名，工资和佣金。该程序使用指示符变量（在指标结构中）来确定佣金是否为<code class="codeph">NULL</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-8340F853-48EE-4C3A-A3DC-CC1F6F810B62"><!-- --></a> CPPDEMO2</dt>
                        <dd>
                           <p>从<code class="codeph">emp</code>表中检索给定部门中所有员工的姓名<a id="d142934e1119" class="indexterm-anchor"></a> （动态SQL方法3）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-7AA4FD37-59EB-4E2D-829B-30BBE74D9434"><!-- --></a> CPPDEMO3</dt>
                        <dd>
                           <p>查找所有销售人员并打印他们的姓名和总收入（包括佣金）。该程序是C ++继承的一个例子。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-CCF28449-60F6-4DD3-9ABF-39F6C7566B31"><!-- --></a> CVDEMO</dt>
                        <dd>
                           <p>声明并打开引用游标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-72D0B666-20F2-4810-BF17-2BBBAEFEB504"><!-- --></a> EMPCLASS</dt>
                        <dd>
                           <p>编写<code class="codeph">EMPCLASS</code>和<code class="codeph">CPPDEMO2</code>文件是为了提供如何在C ++框架内编写Pro * C / C ++程序的示例。<code class="codeph">EMPCLASS</code>在<code class="codeph">emp</code>表上封装特定查询，并使用游标变量实现。<code class="codeph">EMPCLASS</code>实例化该查询的实例，并通过属于<code class="codeph">emp</code>类的C ++成员函数提供游标变量功能（即： <code class="codeph">open</code> ， <code class="codeph">fetch</code> ， <code class="codeph">close</code> ）。<code class="codeph">empclass.pc</code>文件<span class="italic">不是</span>独立的演示程序。它被编写为由<code class="codeph">cppdemo2</code>演示程序使用。要使用<code class="codeph">emp</code>类，您必须编写一个驱动程序（ <code class="codeph">cppdemo2.pc</code> ），该驱动程序声明了<code class="codeph">emp</code>类的实例并发出对该类的成员函数的调用。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-C530EAE6-53B3-4AAB-AD03-7A0896825D52"><!-- --></a> LOBDEMO1</dt>
                        <dd>
                           <p>根据人员的社会安全号码，将犯罪记录提取并添加到数据库中。该程序演示了访问和存储的机制<a id="d142934e1195" class="indexterm-anchor"></a><a id="d142934e1197" class="indexterm-anchor"></a>大型对象（LOB）到表并通过<code class="codeph">DBMS_LOB</code>包提供的存储过程操作LOB。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-068BE4F3-68BD-44FC-B706-6E9D23271107"><!-- --></a> MLTTHRD1</dt>
                        <dd>
                           <p>演示如何将线程与预编译器结合使用。该程序创建与线程一样多的会话。</p>
                           <div class="infoboxnotealso" id="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-233459F2-16EA-45E3-807E-7A3C91550CCD">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="multithreaded-applications.html#GUID-76B52DE9-54B7-4F3C-9905-AADE6420BE84">多线程应用程序</a> ”</span></p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-D1424FD7-7DBC-410D-BE01-245E4AE72106"><!-- --></a> NAVDEMO1</dt>
                        <dd>
                           <p>演示对象缓存中对象的导航访问。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-F2390DE9-8563-458F-A7C2-C0F1D7E6C23A"><!-- --></a> OBJDEMO1</dt>
                        <dd>
                           <p>演示使用<a id="d142934e1228" class="indexterm-anchor"></a>对象。该程序操纵对象类型<span class="italic">人员</span>和<span class="italic">地址</span> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-BAED7ACC-D231-4176-8623-90B669D07DD2"><!-- --></a> ORACA</dt>
                        <dd>
                           <p>演示如何使用ORACA在运行时确定各种性能参数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-1C509DD3-33E8-4284-9F9C-164B2C969A5F"><!-- --></a> PLSSAM</dt>
                        <dd>
                           <p>演示使用<a id="d142934e1251" class="indexterm-anchor"></a>嵌入式PL / SQL块。此程序会提示您输入已驻留在数据库中的员工姓名。然后执行PL / SQL块，返回四个<code class="codeph">SELECT</code>语句的结果。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-55ED0827-204A-4899-B3D1-D1B68CD521BA"><!-- --></a>示例</dt>
                        <dd>
                           <p>将新员工记录添加到人员数据库并检查数据库完整性。使用当前最大员工编号+10自动选择数据库中的员工编号。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-5DF238D5-0C3A-4473-BB79-9A6B05F085B8"><!-- --></a> SAMPLE1</dt>
                        <dd>
                           <p>登录到Oracle数据库，提示用户输入员工编号，在数据库中查询员工的姓名，工资和佣金，并显示结果。程序继续，直到用户输入0作为员工编号。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-B9A2D4B8-46F0-40E1-97C0-A9117726DF7A"><!-- --></a> SAMPLE2</dt>
                        <dd>
                           <p>登录Oracle数据库，声明并打开游标，获取所有销售人员的姓名，工资和佣金，显示结果并关闭游标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-EF7D4085-0847-41C0-9153-35714986261F"><!-- --></a> SAMPLE3</dt>
                        <dd>
                           <p>登录到Oracle数据库，声明并打开游标，使用数组批量提取，并使用<code class="codeph">print_rows()</code>函数打印结果。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-0DCB2A9E-9264-4E5E-9ED0-E35037479608"><!-- --></a> SAMPLE4</dt>
                        <dd>
                           <p>使用<code class="codeph">LONG VARRAW</code>外部数据类型演示类型等效的使用。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-9194E839-FCEF-4DE9-8587-9597737D8F4F"><!-- --></a> SAMPLE5</dt>
                        <dd>
                           <p>提示用户输入帐号和借记金额。该程序验证帐号是否有效以及是否有足够的资金来支付提款，然后才能记入帐户。该程序显示了嵌入式SQL的使用。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-B1AEF44A-BFE7-4BF3-8A2D-A1590482DFC1"><!-- --></a> SAMPLE6</dt>
                        <dd>
                           <p>创建表，插入行，提交插入和删除表<a id="d142934e1306" class="indexterm-anchor"></a> （动态SQL方法1）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-D136CFA0-C0F4-41C5-82B3-8D46B3424E37"><!-- --></a> SAMPLE7</dt>
                        <dd>
                           <p>在<code class="codeph">emp</code>表中插入两行并删除它们<a id="d142934e1320" class="indexterm-anchor"></a> （动态SQL方法2）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-BA161A76-2253-4E7B-8D80-627DB46BA7CF"><!-- --></a> SAMPLE8</dt>
                        <dd>
                           <p>从<code class="codeph">emp</code>表中检索给定部门中所有员工的姓名<a id="d142934e1334" class="indexterm-anchor"></a> （动态SQL方法3）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-78D66A7B-8C6C-4640-A870-9C5E0A051EDB"><!-- --></a> SAMPLE9</dt>
                        <dd>
                           <p>使用<code class="codeph">scott/tiger</code>帐户连接到Oracle数据库。程序声明了几个主机阵列和调用PL / SQL存储过程（ <code class="codeph">GET_EMPLOYEES</code>在<code class="codeph">CALLDEMO</code>包）。PL / SQL过程返回<code class="codeph">ASIZE</code>值。程序一直调用<code class="codeph">GET_EMPLOYEES</code> ，每次都获取<code class="codeph">ASIZE</code>数组，并打印值，直到检索完所有行。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-8B83FE61-ED75-49CB-8D09-9912FA096100"><!-- --></a> SAMPLE10</dt>
                        <dd>
                           <p>使用您的用户名和密码连接到Oracle数据库，并提示输入SQL语句。您可以输入任何合法的SQL语句，但必须使用常规SQL语法，而不是嵌入式SQL。您的陈述已得到处理。如果该语句是查询，则显示提取的行<a id="d142934e1370" class="indexterm-anchor"></a> （动态SQL方法4）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-464CAC60-CA1B-483E-B8F9-FA8AC3CA8BEB"><!-- --></a> SAMPLE11</dt>
                        <dd>
                           <p>使用游标变量从<code class="codeph">emp</code>表中获取。光标在存储的PL / SQL过程<code class="codeph">open_cur</code>中在<code class="codeph">EMP_DEMO_PKG</code>包中<code class="codeph">EMP_DEMO_PKG</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-484F0FCB-E9B0-4560-8F6F-1F08053DD345"><!-- --></a> SAMPLE12</dt>
                        <dd>
                           <p>演示如何使用动态SQL方法4进行数组提取。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-49963571-5FD0-4490-8389-8A8FE0504136"><!-- --></a> SCDEMO1</dt>
                        <dd>
                           <p>演示如何将可滚动游标与Oracle动态SQL方法4一起使用。可滚动游标也可以与ANSI动态SQL方法4一起使用。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-715E2D86-84F6-4743-AE8F-18C32C4EF9F4"><!-- --></a> SCDEMO2</dt>
                        <dd>
                           <p>演示可滚动游标与主机阵列的使用。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-87104FD2-1902-4875-B1BB-C68411E92171"><!-- --></a> SQLVCP</dt>
                        <dd>
                           <p>演示如何使用<a id="d142934e1414" class="indexterm-anchor"></a> <code class="codeph">sqlvcp()</code>函数用于确定<code class="codeph">VARCHAR</code>结构的实际大小。然后将该大小用作偏移量，以递增遍历<code class="codeph">VARCHARs</code>数组的指针。
                           </p>
                           <p>该程序还演示了如何使用<a id="d142934e1427" class="indexterm-anchor"></a> <code class="codeph">SQLStmtGetText()</code>函数用于检索最后执行的SQL语句的文本。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A52BD4F7-857B-4086-B510-059754DE5806__GUID-3AB08C18-2227-4267-BEB9-1A1BAFCF41CE"><!-- --></a> WINSAM</dt>
                        <dd>
                           <p>将新员工记录添加到人员数据库并检查数据库完整性。您可以根据需要输入任意数量的员工姓名，并通过在“ <span class="italic">员工记录”</span>对话框中选择相应的按钮来执行SQL命令。这是示例程序的GUI版本。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC5125"></a><div class="props_rev_3"><a id="GUID-9DDD96DB-3982-4913-9901-9B15EC6EDD94" name="GUID-9DDD96DB-3982-4913-9901-9B15EC6EDD94"></a><h3 id="LNPCC-GUID-9DDD96DB-3982-4913-9901-9B15EC6EDD94" class="sect3"><span class="enumeration_section">F.2</span>构建演示表</h3>
               <div>
                  <div class="section">
                     <p><a id="d142934e1465" class="indexterm-anchor"></a>要运行示例程序，您必须拥有一个包含用户名<code class="codeph">scott</code>和密码<code class="codeph">tiger</code>的数据库帐户。此外，您必须拥有包含示例表<code class="codeph">emp</code>和<code class="codeph">dept.</code>的数据库<code class="codeph">dept.</code> 此帐户包含在Oracle Database <span class="italic">10g</span>服务器的starter数据库中。如果您的数据库上不存在该帐户，请在运行示例程序之前创建该帐户。如果数据库不包含<code class="codeph">emp</code>和<code class="codeph">dept</code>表，则可以使用<code class="codeph">demobld.sql</code>脚本创建它们。
                     </p>
                     <p>要构建示例表：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动SQL * Plus</span></li>
                     <li class="stepexpand"><span>用户名<code class="codeph">scott</code>连接密码<code class="codeph">tiger</code> 。</span></li>
                     <li class="stepexpand"><span>运行<code class="codeph">demobld.sql</code>脚本：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ <span class="italic">ORACLE_BASE</span> \ <span class="italic">ORACLE_HOME</span> \ sqlplus \ demo \ demobld.sql;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnpcc&amp;id=NTQRF" target="_blank"><span><cite>适用于Microsoft Windows的Oracle数据库管理员参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCC5126"></a><div class="props_rev_3"><a id="GUID-325C3348-A8D7-4429-BF48-A5C83C010C1E" name="GUID-325C3348-A8D7-4429-BF48-A5C83C010C1E"></a><h3 id="LNPCC-GUID-325C3348-A8D7-4429-BF48-A5C83C010C1E" class="sect3"><span class="enumeration_section">F.3</span>关于构建示例程序</h3>
               <div>
                  <p>您可以通过两种方式构建示例程序：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用提供的<code class="codeph">pcmake.bat</code>文件</p>
                     </li>
                     <li>
                        <p>使用Microsoft Visual Studio</p>
                     </li>
                  </ul>
               </div><a id="LNPCC5127"></a><div class="props_rev_3"><a id="GUID-D58997A7-8C86-47A5-9CFD-0F5632F1D6D7" name="GUID-D58997A7-8C86-47A5-9CFD-0F5632F1D6D7"></a><h4 id="LNPCC-GUID-D58997A7-8C86-47A5-9CFD-0F5632F1D6D7" class="sect4"><span class="enumeration_section">F.3.1</span>使用pcmake.bat</h4>
                  <div>
                     <div class="section">
                        <p>用于编译Pro * C / C ++演示的<code class="codeph">pcmake.bat</code>文件位于以下位置：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_BASE \ ORACLE_HOME</span> \ precomp \ demo \ proc</pre><pre class="oac_no_warn" dir="ltr"></pre><p>此批处理文件旨在说明如何在命令提示符下构建Pro * C / C ++应用程序。</p>
                        <p>要使用此批处理文件，必须安装Microsoft Visual Studio。必须设置环境变量<code class="codeph">MSVCDir</code> 。Pro * C / C ++命令行选项和链接器选项因应用程序而异。
                        </p>
                        <p>您可以使用此文件构建演示，例如构建<code class="codeph">sample1</code> ：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>导航到演示文件的位置，并在命令提示符处输入以下内容：</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; CD <span class="italic">ORACLE_BASE \ ORACLE_HOME</span> \ precomp \ demo \ proc \ sample1</pre><pre class="oac_no_warn" dir="ltr"></pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下内容：</span><div><pre class="oac_no_warn" dir="ltr">％pcmake sample1</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="LNPCC5128"></a><div class="props_rev_3"><a id="GUID-4B0335E6-5091-4480-9B0A-DCEE8F4318CE" name="GUID-4B0335E6-5091-4480-9B0A-DCEE8F4318CE"></a><h3 id="LNPCC-GUID-4B0335E6-5091-4480-9B0A-DCEE8F4318CE" class="sect3"><span class="enumeration_section">F.4</span>使用Microsoft Visual Studio</h3>
               <div>
                  <div class="section">
                     <p><a id="d142934e1659" class="indexterm-anchor"></a><a id="d142934e1661" class="indexterm-anchor"></a> Microsoft Visual Studio项目文件的扩展名为<code class="codeph">.dsp</code> 。<span class="italic"><code class="codeph">ORACLE_BASE\ORACLE_HOME</code></span> <code class="codeph">\precomp\demo\proc</code>目录中的<code class="codeph">.dsp</code>文件指导并控制预编译，编译和链接示例程序所需的步骤。
                     </p>
                     <p>Pro * C / C ++，SQL * Plus和<a id="d142934e1678" class="indexterm-anchor"></a><a id="d142934e1680" class="indexterm-anchor"></a>对象类型转换器已集成到Microsoft Visual Studio示例项目文件中。在编译之前，您不必单独运行Pro * C / C ++，SQL * Plus和对象类型转换器。
                     </p>
                     <p>要构建示例程序：</p>
                     <ol>
                        <li>
                           <p>打开Microsoft Visual Studio项目文件，例如<code class="codeph">sample1.dsp</code> 。
                           </p>
                        </li>
                        <li>
                           <p><a id="d142934e1694" class="indexterm-anchor"></a><a id="d142934e1698" class="indexterm-anchor"></a>检查项目文件中的路径以确保它们与系统的配置相对应。如果他们不这样做，请相应地更改路径。如果所有组件的路径不正确，您的系统可能会生成错误消息。
                           </p>
                           <div class="infoboxnote" id="GUID-4B0335E6-5091-4480-9B0A-DCEE8F4318CE__GUID-EBC9A365-781E-4124-BAD4-79678B6F373A">
                              <p class="notep1">注意：</p>
                              <p>所有示例程序都是使用<code class="codeph">C:\oracle\ora92</code>作为默认驱动器创建的。<a id="d142934e1709" class="indexterm-anchor"></a></p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>选择“ <span class="bold">生成”&gt;“全部重建”</span> 。Microsoft Visual Studio创建可执行文件。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="sample-programs.html#GUID-9BA634D8-32A9-45D2-8F01-753ABCAD5600">设置示例.pre文件的路径</a></li>
                        <li><a href="the-Object-type.html#GUID-502C3781-C88E-46B8-9EB2-9A93E0B4E7AE">对象类型转换器</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCC5129"></a><div class="props_rev_3"><a id="GUID-9BA634D8-32A9-45D2-8F01-753ABCAD5600" name="GUID-9BA634D8-32A9-45D2-8F01-753ABCAD5600"></a><h3 id="LNPCC-GUID-9BA634D8-32A9-45D2-8F01-753ABCAD5600" class="sect3"><span class="enumeration_section">F.5</span>设置示例.pre文件的路径</h3>
               <div>
                  <div class="section">
                     <p><a id="d142934e1753" class="indexterm-anchor"></a><a id="d142934e1757" class="indexterm-anchor"></a><a id="d142934e1761" class="indexterm-anchor"></a>默认情况下，示例<code class="codeph">.pre</code>文件在<code class="codeph">C:\oracle\ora92</code>目录中搜索相应的<code class="codeph">.pc</code>文件，其中<code class="codeph">C:\</code>是您正在使用的驱动器， <code class="codeph">oracle\ora92</code>表示Oracle主<code class="codeph">oracle\ora92</code>的位置。如果计算机上的Oracle主目录和Oracle主目录不同，则必须将目录路径更改为正确的路径。
                     </p>
                     <p>要更改示例.pre文件的目录路径：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>在Pro * C / C ++中，打开<code class="codeph">.pre</code>文件。</span></li>
                     <li><span>双击“输入文件”区域中的文件名以显示“输入文件”对话框。</span></li>
                     <li><span>将目录路径更改为正确的路径。</span></li>
                     <li><span>单击<span class="bold">打开</span> 。</span></li>
                  </ol>
                  <div class="section">
                     <p></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04093.Oracle-collections.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用Oracle Collections</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JDBC Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00"></meta>
      <meta name="dcterms.title" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96471-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="Oracle-object-references.html" title="Previous" type="text/html"></link>
      <link rel="next" href="resultset.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Oracle-object-references.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="resultset.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="data-access-and-manipulation.html" property="item" typeof="WebPage"><span property="name">数据访问和操作</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Collections</li>
            </ol>
            <a id="GUID-338038DB-AE3A-4C82-BB8F-8C87F2D130C4" name="GUID-338038DB-AE3A-4C82-BB8F-8C87F2D130C4"></a><a id="JJDBC28574"></a>
            
            <h2 id="JJDBC-GUID-338038DB-AE3A-4C82-BB8F-8C87F2D130C4" class="sect2"><span class="enumeration_chapter">16</span>使用Oracle Collections</h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d57778e21" class="indexterm-anchor"></a><a id="d57778e25" class="indexterm-anchor"></a>本章介绍Oracle标准Java数据库连接（JDBC）的扩展，它允许您访问和操作映射到Java阵列及其数据的Oracle集合。讨论了以下主题：</p>
               <div class="infoboxnote" id="GUID-338038DB-AE3A-4C82-BB8F-8C87F2D130C4__GUID-27A720D7-E1ED-4394-882E-F160C869C3FA">
                  <p class="notep1">注意：</p>
                  <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用ARRAY</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleArray</code>接口，它是<code class="codeph">oracle.jdbc</code>包的一部分。Oracle建议您尽可能使用<code class="codeph">java.sql</code>包中提供的方法，以<code class="codeph">java.sql</code> Oracle特定扩展的<code class="codeph">oracle.jdbc</code>包中提供的标准兼容性和方法。有关<code class="codeph">oracle.jdbc.更多信息，请参阅MoS Note 1364193.1 <code class="codeph">oracle.jdbc.OracleArray</code>接口。
                  </p>
               </div>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="Oracle-collections.html#GUID-76466A35-B189-4A20-B068-578BD0939CD1">Oracle集合扩展</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-collections.html#GUID-E57699B6-491C-4430-90EB-8FF1912440DA">集合功能概述</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-collections.html#GUID-00517CE4-DC23-4D01-B878-9C50E19B3B0F">ARRAY性能扩展方法</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-collections.html#GUID-BC05FE69-643F-44AF-8D86-2E181F7E6628">创建和使用数组</a></p>
                  </li>
                  <li>
                     <p><a href="Oracle-collections.html#GUID-22D90043-E417-4BC3-A838-0DBA954AF2AA">使用类型映射来映射数组元素</a></p>
                  </li>
               </ul>
            </div><a id="JJDBC28575"></a><div class="props_rev_3"><a id="GUID-76466A35-B189-4A20-B068-578BD0939CD1" name="GUID-76466A35-B189-4A20-B068-578BD0939CD1"></a><h3 id="JJDBC-GUID-76466A35-B189-4A20-B068-578BD0939CD1" class="sect3"><span class="enumeration_section">16.1</span> Oracle集合扩展</h3>
               <div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="Oracle-collections.html#GUID-1EDB1964-71FF-4AB1-BD7D-86F15D609D4D">Oracle集合概述</a></p>
                     </li>
                     <li>
                        <p><a href="Oracle-collections.html#GUID-5015B2F4-54A8-4B55-A02F-E10D66887003">物化集合中的选择</a></p>
                     </li>
                     <li>
                        <p><a href="Oracle-collections.html#GUID-13E05667-1EFB-464F-B91F-32E99543DD3F">创建集合</a></p>
                     </li>
                     <li>
                        <p><a href="Oracle-collections.html#GUID-D2501ACA-FF2D-4973-B700-7A1024404948">创建多级集合类型</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-1EDB1964-71FF-4AB1-BD7D-86F15D609D4D" name="GUID-1EDB1964-71FF-4AB1-BD7D-86F15D609D4D"></a><h4 id="JJDBC-GUID-1EDB1964-71FF-4AB1-BD7D-86F15D609D4D" class="sect4"><span class="enumeration_section">16.1.1</span> Oracle集合概述</h4>
                  <div>
                     <p>Oracle协作（数据库中的变量数组（VARRAY）或嵌套表）映射到Java中的数组。JDBC 2.0 arr ays用于在Java中实现Oracle集合。术语集合和数组有时可互换使用。但是，集合更适合数据库端，而数组更适合JDBC应用程序端。
                     </p>
                     <p>Oracle仅支持<a id="d57778e163" class="indexterm-anchor"></a><a id="d57778e165" class="indexterm-anchor"></a>命名集合，您可以在其中指定SQL类型名称以描述集合类型。JDBC使您可以将数组用作以下任何一种：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">SELECT</code>子句中的列</p>
                        </li>
                        <li>
                           <p><code class="codeph">IN</code>或<code class="codeph">OUT</code>绑定变量</p>
                        </li>
                        <li>
                           <p>Oracle对象中的属性</p>
                        </li>
                        <li>
                           <p>其他数组的元素</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="JJDBC28576"></a><div class="props_rev_3"><a id="GUID-5015B2F4-54A8-4B55-A02F-E10D66887003" name="GUID-5015B2F4-54A8-4B55-A02F-E10D66887003"></a><h4 id="JJDBC-GUID-5015B2F4-54A8-4B55-A02F-E10D66887003" class="sect4"><span class="enumeration_section">16.1.2</span>实现集合的选择</h4>
                  <div>
                     <p>在您的应用程序中，您可以选择将集合具体化为<code class="codeph">oracle.sql.的实例<code class="codeph">oracle.sql.ARRAY</code>类，它是弱类型的，或者实现它是您事先创建的自定义Java类的实例，它是强类型的。用于集合的自定义Java类称为cus tom集合类。自定义集合类必须实现Oracle <code class="codeph">oracle.jdbc.OracleData</code>接口。此外，自定义类或伴随类必须实现<code class="codeph">oracle.jdbc.OracleDataFactory</code> 。标准的<code class="codeph">java.sql.SQLData</code>接口仅用于映射SQL对象类型。
                     </p>
                     <p><code class="codeph">oracle.sql.ARRAY</code>类实现标准<code class="codeph">java.sql.Array</code>接口。
                     </p>
                     <p><code class="codeph">ARRAY</code>类包括作为整体检索数组，检索数组元素的子集以及检索数组元素的SQL基类型名称的功能。但是，您无法写入数组，因为没有setter方法。
                     </p>
                     <p>与<code class="codeph">ARRAY</code>类一样，自定义集合类使您可以检索全部或部分数组并获取SQL基本类型名称。它们还具有强类型的优点，可以帮助您在编译期间找到编码错误，这些编码错误可能直到运行时才会被发现。
                     </p>
                     <div class="infoboxnote" id="GUID-5015B2F4-54A8-4B55-A02F-E10D66887003__GUID-784F5C91-A81F-4277-A272-D2FC108607CF">
                        <p class="notep1">注意：</p>
                        <p>访问VARRAY和访问嵌套表之间的代码没有区别。<code class="codeph">ARRAY</code>类方法可以确定它们是应用于VARRAY还是嵌套表，并通过采取适当的操作进行响应。
                        </p>
                     </div>
                  </div>
               </div><a id="JJDBC28577"></a><div class="props_rev_3"><a id="GUID-13E05667-1EFB-464F-B91F-32E99543DD3F" name="GUID-13E05667-1EFB-464F-B91F-32E99543DD3F"></a><h4 id="JJDBC-GUID-13E05667-1EFB-464F-B91F-32E99543DD3F" class="sect4"><span class="enumeration_section">16.1.3</span>创建集合</h4>
                  <div>
                     <div class="section">
                        <p>由于Oracle仅支持命名集合，因此必须声明特定的<code class="codeph">VARRAY</code>类型名称或嵌套的表类型名称。VARRAY和嵌套表本身不是类型，而是类型的类别。
                        </p>
                        <p>使用SQL <code class="codeph">CREATE TYPE</code>语句创建SQL类型名称时，会为其分配SQL类型名称：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE &lt; <span class="italic">sql_type_name</span> &gt; AS &lt; <span class="italic">datatype</span> &gt;;</pre><p>VARRAY是一个不同大小的数组。它有一组有序的数据元素，所有元素都具有相同的数据类型。每个元素都有一个索引，它是一个与VARRAY中元素位置相对应的数字。 VARRAY中元素的数量是VARRAY的大小。声明<code class="codeph">VARRAY</code>类型时，必须指定最大大小。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE myNumType AS VARRAY（10）OF NUMBER;</pre><p>此语句将<code class="codeph">myNumType</code>定义为SQL类型名称，该名称描述可包含不超过10个元素的<code class="codeph">myNumType</code>值<code class="codeph">NUMBER</code>值。
                        </p>
                        <p>嵌套表是一组无序的数据元素，所有数据类型都相同。数据库将嵌套表存储在具有单个列的单独表中，该列的类型是内置类型或对象类型。如果表是对象类型，则它也可以被视为多列表，对象类型的每个属性都有一列。您可以按如下方式创建嵌套表：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE myNumList AS TABLE OF integer;</pre><p>此语句将<code class="codeph">myNumList</code>标识为SQL类型名称，该名称定义用于<code class="codeph">INTEGER</code>类型的嵌套表的表类型。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28578"></a><div class="props_rev_3"><a id="GUID-D2501ACA-FF2D-4973-B700-7A1024404948" name="GUID-D2501ACA-FF2D-4973-B700-7A1024404948"></a><h4 id="JJDBC-GUID-D2501ACA-FF2D-4973-B700-7A1024404948" class="sect4"><span class="enumeration_section">16.1.4</span>创建多级集合类型</h4>
                  <div>
                     <div class="section">
                        <p>在JDBC中创建新的多级集合类型的最常用方法是将SQL <code class="codeph">CREATE TYPE</code>语句传递给<code class="codeph">java.sql.的<code class="codeph">execute</code>方法<code class="codeph">java.sql.Statement</code>课。以下代码创建一个级别的嵌套表<code class="codeph">first_level</code>和一个两级嵌套表<code class="codeph">second_level</code> ：</p><pre class="oac_no_warn" dir="ltr">Connection conn = .... //创建数据库//连接语句stmt = conn.createStatement（）; //打开一个数据库// cursor stmt.execute（“CREATE TYPE first_level AS TABLE OF NUMBER”）; //创建一个数字stmt.execute的嵌套//表（“CREATE TYPE second_level AS TABLE OF first_level”）; //创建一个//两级嵌套表... //这里的其他操作stmt.close（）; //释放// resource conn.close（）; //关闭//数据库连接</pre><p>一旦创建了多级集合类型，它们就可以用作基表的两列以及对象类型的属性。</p>
                        <div class="infoboxnote" id="GUID-D2501ACA-FF2D-4973-B700-7A1024404948__GUID-5D0769DC-78A0-4B80-A442-702A2185F5C7">
                           <p class="notep1">注意：</p>
                           <p>多级集合类型仅适用于Oracle9 <span class="italic">i</span>及更高版本。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28580"></a><a id="JJDBC28581"></a><a id="JJDBC28579"></a><div class="props_rev_3"><a id="GUID-E57699B6-491C-4430-90EB-8FF1912440DA" name="GUID-E57699B6-491C-4430-90EB-8FF1912440DA"></a><h3 id="JJDBC-GUID-E57699B6-491C-4430-90EB-8FF1912440DA" class="sect3"><span class="enumeration_section">16.2</span>集合功能概述</h3>
               <div>
                  <div class="section">
                     <p>您可以通过结果集或可调用语句在数组实例中获取集合数据，并将其作为绑定变量传递回预准备语句或可调用语句中。</p>
                     <p><code class="codeph">oracle.sql.ARRAY</code>类，它实现标准的<code class="codeph">java.sql.Array</code>接口，提供访问和更新Oracle集合数据的必要功能。
                     </p>
                     <p>本节介绍Array Getter和Setter方法。使用以下结果集，可调用语句和预准备语句方法来检索集合并将其作为Java数组传递。</p>
                     <div class="infoboxnote" id="GUID-E57699B6-491C-4430-90EB-8FF1912440DA__GUID-A1E8F2AA-B5BE-4916-8481-B043026B32CB">
                        <p class="notep1">注意：</p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用ARRAY</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleArray</code>接口，它是<code class="codeph">oracle.jdbc</code>包的一部分。Oracle建议您尽可能使用<code class="codeph">java.sql</code>包中提供的方法，以<code class="codeph">java.sql</code> Oracle特定扩展的<code class="codeph">oracle.jdbc</code>包中提供的标准兼容性和方法。有关<code class="codeph">oracle.jdbc.更多信息，请参阅MoS Note 1364193.1 <code class="codeph">oracle.jdbc.OracleArray</code>接口。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E57699B6-491C-4430-90EB-8FF1912440DA__GUID-C760E9B9-5EDC-4354-B4CC-A830A3FB886D">结果集和可调用语句Getter方法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>的<code class="codeph">OracleResultSet</code>和<code class="codeph">OracleCallableStatement</code>接口支持<code class="codeph">getARRAY</code>和<code class="codeph">getArray</code>方法来检索<code class="codeph">ARRAY</code>对象作为输出参数，无论是作为<code class="codeph">oracle.sql.ARRAY</code>实例或<code class="codeph">java.sql.Array</code>实例。您还可以使用<code class="codeph">getObject</code>方法。这些方法将<code class="codeph">String</code>列名或<code class="codeph">int</code>列索引作为输入。
                     </p>
                     <div class="infoboxnote" id="GUID-E57699B6-491C-4430-90EB-8FF1912440DA__GUID-BFEF1A4E-F3E5-4585-89AB-EE6BCA3A05FD">
                        <p class="notep1">注意：</p>
                        <p>Oracle JDBC驱动程序缓存数组和结构描述符。这提供了巨大的性能优势;但是，这意味着如果更改数据库中数组类型的基础类型定义，则该数组类型的高速缓存描述符将变为陈旧，并且您的应用程序将收到<code class="codeph">SQLException</code> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E57699B6-491C-4430-90EB-8FF1912440DA__GUID-4077765D-C4F8-4A3E-B2CD-13364B0F57F9">准备和可调用语句设置器方法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>该<code class="codeph">OraclePreparedStatement</code>和<code class="codeph">OracleCallableStatement</code>类支持<code class="codeph">setARRAY</code>和<code class="codeph">setArray</code>方法采取更新的<code class="codeph">ARRAY</code>对象作为绑定变量，并将它们传递到数据库。您还可以使用<code class="codeph">setObject</code>方法。这些方法将<code class="codeph">String</code>参数名称或<code class="codeph">int</code>参数索引以及<code class="codeph">oracle.sql.作为输入<code class="codeph">oracle.sql.ARRAY</code>实例或<code class="codeph">java.sql.Array</code>实例。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC28585"></a><div class="props_rev_3"><a id="GUID-00517CE4-DC23-4D01-B878-9C50E19B3B0F" name="GUID-00517CE4-DC23-4D01-B878-9C50E19B3B0F"></a><h3 id="JJDBC-GUID-00517CE4-DC23-4D01-B878-9C50E19B3B0F" class="sect3"><span class="enumeration_section">16.3</span> ARRAY性能扩展方法</h3>
               <div>
                  <div class="section">
                     <p>本节讨论以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="Oracle-collections.html#GUID-C51FE01E-CB73-4BFB-A0A3-3474C5DE5E6A">关于访问oracle.sql。ARRAY元素作为Java原始类型的数组</a></p>
                        </li>
                        <li>
                           <p><a href="Oracle-collections.html#GUID-33CC8F2C-4E73-412B-990E-D4293173E199">ARRAY自动元素缓冲</a></p>
                        </li>
                        <li>
                           <p><a href="Oracle-collections.html#GUID-98DAE89F-6100-4D1F-8E65-546E7943A191">ARRAY自动索引</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC28586"></a><div class="props_rev_3"><a id="GUID-C51FE01E-CB73-4BFB-A0A3-3474C5DE5E6A" name="GUID-C51FE01E-CB73-4BFB-A0A3-3474C5DE5E6A"></a><h4 id="JJDBC-GUID-C51FE01E-CB73-4BFB-A0A3-3474C5DE5E6A" class="sect4"><span class="enumeration_section">16.3.1</span>关于访问oracle.sql。ARRAY元素作为Java原始类型的数组</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">oracle.sql.ARRAY</code>类包含将数组元素作为Java基元类型返回的方法。这些方法使您能够比作为<code class="codeph">Datum</code>实例访问它们然后转换每个<code class="codeph">Datum</code>更有效地访问集合元素<a id="d57778e592" class="indexterm-anchor"></a>实例到其Java原始值。
                        </p>
                        <div class="infoboxnote" id="GUID-C51FE01E-CB73-4BFB-A0A3-3474C5DE5E6A__GUID-425AD159-0FD8-47BD-B324-5E8129160CDF">
                           <p class="notep1">注意：</p>
                           <p>这些<code class="codeph">oracle.sql.专门方法<code class="codeph">oracle.sql.ARRAY</code>类仅限于数字集合。
                           </p>
                        </div>
                        <p>使用第一个签名的每个方法都将集合元素作为<span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">[]</code>返回，其中<span class="italic"><code class="codeph">XXX</code></span>是Java基元类型。使用第二个签名的每个方法都返回一个集合的片段，其中包含从<code class="codeph">count</code>指定的元素<code class="codeph">count</code> ，从<code class="codeph">index</code>位置开始。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28587"></a><div class="props_rev_3"><a id="GUID-33CC8F2C-4E73-412B-990E-D4293173E199" name="GUID-33CC8F2C-4E73-412B-990E-D4293173E199"></a><h4 id="JJDBC-GUID-33CC8F2C-4E73-412B-990E-D4293173E199" class="sect4"><span class="enumeration_section">16.3.2</span> ARRAY自动元素缓冲</h4>
                  <div>
                     <p>Oracle JDBC驱动程序提供了公共方法来启用和禁用<code class="codeph">ARRAY</code>内容的缓冲。
                     </p>
                     <p><code class="codeph">oracle.sql.包含以下方法<code class="codeph">oracle.sql.ARRAY</code>课程：<code class="codeph"></code></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">setAutoBuffering</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">getAutoBuffering</code></p>
                        </li>
                     </ul>
                     <p>当<code class="codeph">getAttributes</code>和<code class="codeph">getArray</code>方法多次访问<code class="codeph">ARRAY</code>元素时，建议在JDBC应用程序中启用自动缓冲，假设<code class="codeph">ARRAY</code>数据能够适应Java虚拟机（JVM）内存而不会溢出。
                     </p>
                     <div class="infoboxnote" id="GUID-33CC8F2C-4E73-412B-990E-D4293173E199__GUID-9448147D-D099-471B-A7D9-9EA37BBBAB02">
                        <p class="notep1">注意：</p>
                        <p>缓冲转换后的元素可能会导致JDBC应用程序消耗大量内存。</p>
                     </div>
                     <p>启用自动缓冲时， <code class="codeph">oracle.sql.ARRAY</code>对象保留所有转换元素的本地副本。保留此数据，以便第二次访问此信息不需要通过数据格式转换过程。
                     </p>
                  </div>
               </div><a id="JJDBC28588"></a><div class="props_rev_3"><a id="GUID-98DAE89F-6100-4D1F-8E65-546E7943A191" name="GUID-98DAE89F-6100-4D1F-8E65-546E7943A191"></a><h4 id="JJDBC-GUID-98DAE89F-6100-4D1F-8E65-546E7943A191" class="sect4"><span class="enumeration_section">16.3.3</span> ARRAY自动索引</h4>
                  <div>
                     <div class="section">
                        <p>如果数组处于自动索引模式，则数组对象维护索引表以加速数组元素访问。</p>
                        <p><code class="codeph">oracle.sql.ARRAY</code>类包含以下支持自动数组索引的方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">setAutoIndexing（布尔）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">setAutoIndexing（boolean，int）</code></p>
                           </li>
                        </ul>
                        <p>默认情况下，不启用自动索引。对于JDBC应用程序，如果可以通过<code class="codeph">getArray</code>和<code class="codeph">getResultSet</code>方法对数组元素进行随机访问，则为<code class="codeph">ARRAY</code>对象启用自动索引。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28589"></a><div class="props_rev_3"><a id="GUID-BC05FE69-643F-44AF-8D86-2E181F7E6628" name="GUID-BC05FE69-643F-44AF-8D86-2E181F7E6628"></a><h3 id="JJDBC-GUID-BC05FE69-643F-44AF-8D86-2E181F7E6628" class="sect3"><span class="enumeration_section">16.4</span>创建和使用数组</h3>
               <div>
                  <p>本节讨论如何创建数组对象以及如何检索集合对象并将其作为数组对象传递，包括以下主题。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="Oracle-collections.html#GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971">创建ARRAY对象</a></p>
                     </li>
                     <li>
                        <p><a href="Oracle-collections.html#GUID-ED588B9D-376A-4037-9C46-62642261E62D">检索数组及其元素</a></p>
                     </li>
                     <li>
                        <p><a href="Oracle-collections.html#GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6">将数组传递给语句对象</a></p>
                     </li>
                  </ul>
               </div><a id="JJDBC28591"></a><a id="JJDBC28592"></a><a id="JJDBC28590"></a><div class="props_rev_3"><a id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971" name="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971"></a><h4 id="JJDBC-GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971" class="sect4"><span class="enumeration_section">16.4.1</span>创建ARRAY对象</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__GUID-FA6524BD-94F4-4267-BFEB-79C71B2C0640">
                           <p class="notep1">注意：</p>
                           <p>Oracle JDBC不支持<code class="codeph">java.sql.的JDBC 4.0方法<code class="codeph">createArrayOf</code>方法<code class="codeph">java.sql.Connection</code>界面。此方法仅允许匿名数组类型，而所有Oracle数组类型都已命名。使用Oracle特定方法<code class="codeph">oracle.jdbc.而是OracleConnection.createARRAY</code> 。
                           </p>
                        </div>
                        <p>本节介绍如何创建<code class="codeph">ARRAY</code>对象。本节包括以下主题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="Oracle-collections.html#GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__i1056527">创建ARRAY对象的步骤</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__BABHIJHB">例16-1</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__i1056527">
                        <p class="subhead3" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__GUID-63581558-994D-4D2F-9BE4-3E142B8BD9C2">创建ARRAY对象的步骤</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>从Oracle Database <span class="italic">11g</span>第1版开始，您可以使用<code class="codeph">oracle.jdbc.的<code class="codeph">createARRAY</code>工厂方法<code class="codeph">oracle.jdbc.OracleConnection</code>接口创建数组对象。创建数组的工厂方法定义如下：</p><pre class="oac_no_warn" dir="ltr">public ARRAY createARRAY（java.lang。String typeName，java.lang。对象元素）抛出SQLException</pre><p>其中， <code class="codeph">typeName</code>是创建的对象的SQL类型的名称，而<code class="codeph">elements</code>是创建的对象的元素。
                        </p>
                        <p>执行以下操作以创建数组：<a id="d57778e854" class="indexterm-anchor"></a><a id="d57778e856" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句创建一个集合，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TYPE元素AS varray（22）OF NUMBER（5,2）;</pre><p><code class="codeph">elements</code>内容的两种可能性是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>一组Java原语。例如， <code class="codeph">int[]</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>一组Java对象，例如<span class="italic"><code class="codeph">xxx</code></span> <code class="codeph">[]</code> ，其中<span class="italic"><code class="codeph">xxx</code></span>是Java类的名称。例如， <code class="codeph">Integer[]</code> 。
                                    </p>
                                    <div class="infoboxnote" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__GUID-D9D54940-C7B1-4A46-974F-0CFCED523F53">
                                       <p class="notep1">注意：</p>
                                       <p><code class="codeph">OraclePreparedStatement</code>类的<code class="codeph">setARRAY</code> ， <code class="codeph">setArray</code>和<code class="codeph">setObject</code>方法采用<code class="codeph">oracle.sql.类型的对象<code class="codeph">oracle.sql.ARRAY</code>作为参数，而不是对象数组。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>构造<code class="codeph">ARRAY</code>对象<a id="d57778e925" class="indexterm-anchor"></a>通过传递指定数组的用户定义的SQL类型名称的Java字符串和包含您希望数组包含的各个元素的Java对象。</span><div><pre class="oac_no_warn" dir="ltr">ARRAY array = oracle.jdbc。OracleConnection.createARRAY（sql_type_name，elements）;</pre></div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__GUID-C206255F-92D8-485B-AFA2-024913C943C6">
                        <div class="infoboxnote" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__GUID-05883EBC-F574-41CC-AFA4-EE2C7944C19C">
                           <p class="notep1">注意：</p>
                           <p>集合类型的名称与元素的类型名称不同。例如：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">CREATE TYPE person AS object</code> <code class="codeph">(c1 NUMBER(5), c2 VARCHAR2(30));</code> <code class="codeph">CREATE TYPE array_of_persons AS varray(10)</code> OF person;</pre><p>在前面的语句中，集合类型的名称是<code class="codeph">ARRAY_OF_PERSON</code> 。集合元素的SQL类型名称是<code class="codeph">PERSON</code> 。</p>
                        </div>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-10D24D4A-4A0F-41DE-96CE-B9EED2583971__BABHIJHB">
                        <p class="titleinexample">示例16-1创建多级集合</p>
                        <p>与单级集合一样，JDBC应用程序可以创建<code class="codeph">oracle.sql.ARRAY</code>实例表示多级集合，然后将实例发送到数据库。用于创建单级集合的相同<code class="codeph">createARRAY</code>工厂方法也可用于创建多级集合。要创建单级集合，元素是一维Java数组，而要创建多级集合，元素可以是<code class="codeph">oracle.sql.数组<code class="codeph">oracle.sql.ARRAY[]</code>元素或嵌套的Java数组或组合。
                        </p>
                        <p>以下代码显示了如何使用嵌套Java数组创建集合类型：</p><pre class="oac_no_warn" dir="ltr">//将多级集合元素准备为嵌套的Java数组int [] [] [] elements = {{{1}，{1,2}}，{{2}，{2,3}}，{{3} ，{3,4}}}; //使用工厂方法ARRAY array = oracle.jdbc创建ARRAY。OracleConnection.createARRAY（sql_type_name，elements）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="JJDBC28595"></a><div class="props_rev_3"><a id="GUID-ED588B9D-376A-4037-9C46-62642261E62D" name="GUID-ED588B9D-376A-4037-9C46-62642261E62D"></a><h4 id="JJDBC-GUID-ED588B9D-376A-4037-9C46-62642261E62D" class="sect4"><span class="enumeration_section">16.4.2</span>检索数组及其元素</h4>
                  <div>
                     <div class="section">
                        <p>本节首先讨论如何从结果集中检索整个<code class="codeph">ARRAY</code>实例，然后讨论如何从<code class="codeph">ARRAY</code>实例中检索元素。本节包括以下主题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="Oracle-collections.html#GUID-54680CDD-B176-4E5C-9153-96740C48116E">关于检索数组</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE">数据检索方法</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-E2AE8600-F9A9-458B-83B8-C01BCAD51365">比较数据检索方法</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-4872A6DE-E029-44CF-AF71-4C70979B8F63">根据类型映射检索结构化对象数组的元素</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-6D8BD317-1F52-4CF6-8E4A-096989E8D2A6">检索数组元素的子集</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-BCD2C704-39EA-4B52-B3CB-E192F715ED84">将数组元素检索到oracle.sql中。基准数组</a></p>
                           </li>
                           <li>
                              <p><a href="Oracle-collections.html#GUID-A374A861-2770-418F-9CF6-DBB807CE282C">关于访问多级集合元素</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC28596"></a><div class="props_rev_3"><a id="GUID-54680CDD-B176-4E5C-9153-96740C48116E" name="GUID-54680CDD-B176-4E5C-9153-96740C48116E"></a><h5 id="JJDBC-GUID-54680CDD-B176-4E5C-9153-96740C48116E" class="sect5"><span class="enumeration_section">16.4.2.1</span>关于检索数组</h5>
                     <div>
                        <div class="section">
                           <p>您可以通过将结果集转换为<code class="codeph">OracleResultSet</code>并使用<code class="codeph">getARRAY</code>方法从结果集中检索SQL数组，该方法返回<code class="codeph">oracle.sql.ARRAY</code>对象。如果要避免转换结果集，则可以使用<code class="codeph">java.sql.指定的标准<code class="codeph">getObject</code>方法<code class="codeph">java.sql.ResultSet</code>接口并将输出转换为<code class="codeph">oracle.sql.ARRAY</code> 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28598"></a><a id="JJDBC28599"></a><a id="JJDBC28600"></a><a id="JJDBC28597"></a><div class="props_rev_3"><a id="GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE" name="GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE"></a><h5 id="JJDBC-GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE" class="sect5"><span class="enumeration_section">16.4.2.2</span>数据检索方法</h5>
                     <div>
                        <div class="section">
                           <p>一旦有了<code class="codeph">ARRAY</code>对象，就可以使用<code class="codeph">oracle.sql.的这三个重载方法之一来检索数据<code class="codeph">oracle.sql.ARRAY</code>课程：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">的getArray</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">getOracleArray</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">的getResultSet</code></p>
                              </li>
                           </ul>
                           <p>Oracle还提供了一些方法，使您可以检索数组或子集的所有元素。</p>
                           <div class="infoboxnote" id="GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE__GUID-2DDFB233-7A77-47C4-91F0-B0761B9DE5E4">
                              <p class="notep1">注意：</p>
                              <p>如果您正在使用一组结构化对象，Oracle会提供这三种方法的版本，使您能够指定类型映射，以便您可以选择如何将对象映射到Java。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE__GUID-6E425040-5336-45E5-A6CF-843BA6E0269E">getOracleArray</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><code class="codeph">getOracleArray</code>方法是特定于Oracle的扩展，未在标准<code class="codeph">Array</code>接口中指定。<code class="codeph">getOracleArray</code>方法将数组的元素值检索到<code class="codeph">Datum[]</code>数组中。元素是<code class="codeph">oracle.sql.*</code>数据类型，对应于原始数组中数据的SQL类型。
                           </p>
                           <p>对于结构化对象数组，此方法将使用<code class="codeph">oracle.jdbc.元素的OracleStruct</code>实例。
                           </p>
                           <p>Oracle还提供了<code class="codeph">getOracleArray(</code> <span class="italic"><code class="codeph">index</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">count</code></span> <code class="codeph">)</code> <code class="codeph">method</code>来获取数组元素的子集。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE__GUID-D1C707D7-533E-4679-A0B2-645E1CB583F3">的getResultSet</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><code class="codeph">getResultSet</code>方法返回一个结果集，该结果集包含<code class="codeph">ARRAY</code>对象指定的数组元素。结果集为每个数组元素包含一行，每行包含两列。第一列将索引存储到该元素的数组中，第二列存储元素值。在VARRAYs的情况下，索引表示元素在数组中的位置。对于嵌套表（根据定义无序），索引仅反映特定查询中元素的返回顺序。
                           </p>
                           <p>Oracle建议在从嵌套表中获取数据时使用<code class="codeph">getResultSet</code> 。嵌套表可以包含无限数量的元素。该方法返回的<code class="codeph">ResultSet</code>对象最初指向第一行数据。您可以使用<code class="codeph">next</code>方法和相应的<code class="codeph">get</code> <span class="italic"><code class="codeph">XXX</code></span>方法<code class="codeph">get</code>嵌套表的内容。相反， <code class="codeph">getArray</code>返回嵌套表的全部内容。
                           </p>
                           <p><code class="codeph">getResultSet</code>方法使用连接的缺省类型映射来确定Oracle对象的SQL类型与其对应的Java数据类型之间的映射。如果您不想使用连接的默认类型映射，则可以使用该方法的另一个版本<code class="codeph">getResultSet(</code> <span class="italic"><code class="codeph">map</code></span> <code class="codeph">)</code>来指定备用类型映射。
                           </p>
                           <p>Oracle还提供了<code class="codeph">getResultSet(</code> <span class="italic"><code class="codeph">index</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">count</code></span> <code class="codeph">)</code>和<code class="codeph">getResultSet(</code> <span class="italic"><code class="codeph">index</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">count</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">map</code></span> <code class="codeph">)</code>方法来检索数组元素的子集。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3BA98572-FD68-4137-B87E-0DC2AAAC65EE__GUID-1F2E7FD9-E75B-4390-B855-6511903382F8">的getArray</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><code class="codeph">getArray</code>方法是一个标准的JDBC方法，它将数组元素作为<code class="codeph">java.lang.返回<code class="codeph">java.lang.Object</code> ，您可以根据需要进行投射。元素将转换为与原始数组中的数据的SQL类型对应的Java类型。
                           </p>
                           <p>Oracle还提供了一个<code class="codeph">getArray(</code> <span class="italic"><code class="codeph">index</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">count</code></span> <code class="codeph">)</code>方法来检索数组元素的子集。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28601"></a><div class="props_rev_3"><a id="GUID-E2AE8600-F9A9-458B-83B8-C01BCAD51365" name="GUID-E2AE8600-F9A9-458B-83B8-C01BCAD51365"></a><h5 id="JJDBC-GUID-E2AE8600-F9A9-458B-83B8-C01BCAD51365" class="sect5"><span class="enumeration_section">16.4.2.3</span>比较数据检索方法</h5>
                     <div>
                        <div class="section">
                           <p>如果使用<code class="codeph">getOracleArray</code>返回数组元素，则使用<code class="codeph">oracle.sql.的该方法<code class="codeph">oracle.sql.Datum</code>实例避免了从SQL到Java的数据转换费用。<code class="codeph">Datum</code>类或其任何子类实例中的非字符数据保持原始SQL格式。
                           </p>
                           <p>如果使用<code class="codeph">getResultSet</code>返回原始数据类型的数组，则JDBC驱动程序返回一个<code class="codeph">ResultSet</code>对象，该对象为每个元素包含元素和元素值的数组索引。例如：</p><pre class="oac_no_warn" dir="ltr">ResultSet rset = intArray.getResultSet（）;</pre><p>在这种情况下，结果集为每个数组元素包含一行，每行包含两列。第一列将索引存储到数组中，第二列存储元素值。</p>
                           <p>如果数组的元素是映射到Java类型的SQL类型，则<code class="codeph">getArray</code>返回此Java类型的元素数组。<code class="codeph">getArray</code>方法的返回类型是<code class="codeph">java.lang.Object</code> 。因此，必须先投射结果才能使用它。
                           </p><pre class="oac_no_warn" dir="ltr">BigDecimal [] values =（BigDecimal []）intArray.getArray（）;</pre><p>这里<code class="codeph">intArray</code>是一个<code class="codeph">oracle.sql.ARRAY</code> ，对应于<code class="codeph">NUMBER</code>类型的VARRAY。 <code class="codeph">values</code>数组包含<code class="codeph">java.math.类型的元素数组<code class="codeph">java.math.BigDecimal</code> ，因为默认情况下，根据Oracle JDBC驱动程序，SQL <code class="codeph">NUMBER</code>数据类型映射到Java <code class="codeph">BigDecimal</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-E2AE8600-F9A9-458B-83B8-C01BCAD51365__GUID-54762DD9-E0C6-4FFD-BCBE-4B016C1CB9F9">
                              <p class="notep1">注意：</p>
                              <p>使用<code class="codeph">BigDecimal</code>是Java中的资源密集型操作。由于Oracle JDBC默认将数字SQL数据映射到<code class="codeph">BigDecimal</code> ，因此使用<code class="codeph">getArray</code>可能会影响性能，因此不建议用于数字集合。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28602"></a><div class="props_rev_3"><a id="GUID-4872A6DE-E029-44CF-AF71-4C70979B8F63" name="GUID-4872A6DE-E029-44CF-AF71-4C70979B8F63"></a><h5 id="JJDBC-GUID-4872A6DE-E029-44CF-AF71-4C70979B8F63" class="sect5"><span class="enumeration_section">16.4.2.4</span>根据类型映射检索结构化对象数组的元素</h5>
                     <div>
                        <div class="section">
                           <p>默认情况下，如果您正在使用其元素为结构化对象的数组，并且使用<code class="codeph">getArray</code>或<code class="codeph">getResultSet</code> ，则数组中的Oracle对象将根据默认映射映射到其对应的Java数据类型。这是因为这些方法使用默认值<a id="d57778e1419" class="indexterm-anchor"></a>键入连接的映射以确定映射。
                           </p>
                           <p>但是，如果您不想要默认行为，则可以使用<code class="codeph">getArray(</code> <span class="italic"><code class="codeph">map</code></span> <code class="codeph">)</code>或<code class="codeph">getResultSet(</code> <span class="italic"><code class="codeph">map</code></span> <code class="codeph">)</code>方法指定包含备用映射的类型映射。如果类型映射中的条目对应于数组中的Oracle对象，则数组中的每个对象都映射到类型映射中指定的相应Java类型。例如：</p><pre class="oac_no_warn" dir="ltr">Object [] object =（Object []）objArray.getArray（map）;</pre><p>其中<code class="codeph">objArray</code>是一个<code class="codeph">oracle.sql.ARRAY</code>对象和<code class="codeph">map</code>是<code class="codeph">java.util.Map</code>对象。
                           </p>
                           <p>如果类型映射不包含特定Oracle对象的条目，则该元素将作为<code class="codeph">oracle.jdbc.返回<code class="codeph">oracle.jdbc.OracleStruct</code>对象。
                           </p>
                           <p><code class="codeph">getResultSet(</code> <span class="italic"><code class="codeph">map</code></span> <code class="codeph">)</code>方法的行为与<code class="codeph">getArray(</code> <span class="italic"><code class="codeph">map</code></span> <code class="codeph">)</code>方法类似。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="Oracle-collections.html#GUID-22D90043-E417-4BC3-A838-0DBA954AF2AA">使用类型映射来映射数组元素</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="JJDBC28603"></a><div class="props_rev_3"><a id="GUID-6D8BD317-1F52-4CF6-8E4A-096989E8D2A6" name="GUID-6D8BD317-1F52-4CF6-8E4A-096989E8D2A6"></a><h5 id="JJDBC-GUID-6D8BD317-1F52-4CF6-8E4A-096989E8D2A6" class="sect5"><span class="enumeration_section">16.4.2.5</span>检索数组元素的子集</h5>
                     <div>
                        <div class="section">
                           <p>如果您不想检索数组的全部内容，则可以使用<code class="codeph">getArray</code> ， <code class="codeph">getResultSet</code>和<code class="codeph">getOracleArray</code>签名来检索子集。检索的子集<a id="d57778e1524" class="indexterm-anchor"></a>数组，传入索引和计数以指示要在数组中启动的位置以及要检索的元素数。如前所述，您可以指定类型映射或使用连接的默认类型映射转换为Java类型。例如：</p><pre class="oac_no_warn" dir="ltr">Object object = arr.getArray（ <span class="italic">index</span> ， <span class="italic">count</span> ， <span class="italic">map</span> ）; Object object = arr.getArray（ <span class="italic">index</span> ， <span class="italic">count</span> ）;</pre><p>使用<code class="codeph">getResultSet</code>类似示例是：</p><pre class="oac_no_warn" dir="ltr">ResultSet rset = arr.getResultSet（ <span class="italic">index</span> ， <span class="italic">count</span> ， <span class="italic">map</span> ）; ResultSet rset = arr.getResultSet（ <span class="italic">index</span> ， <span class="italic">count</span> ）;</pre><p>使用<code class="codeph">getOracleArray</code>的类似示例是：</p><pre class="oac_no_warn" dir="ltr">Datum [] arr = arr.getOracleArray（ <span class="italic">index</span> ， <span class="italic">count</span> ）;</pre><p>其中<span class="italic"><code class="codeph">arr</code></span>是<code class="codeph">oracle.sql.ARRAY</code>对象， <span class="italic"><code class="codeph">index</code></span>是<code class="codeph">long</code>类型， <span class="italic"><code class="codeph">count</code></span>是<code class="codeph">int</code>类型， <span class="italic"><code class="codeph">map</code></span>是<code class="codeph">java.util.Map</code>对象。
                           </p>
                           <div class="infoboxnote" id="GUID-6D8BD317-1F52-4CF6-8E4A-096989E8D2A6__GUID-8CD191CC-F240-4147-A6E4-320C66589320">
                              <p class="notep1">注意：</p>
                              <p>检索数组的子集没有性能优势，而不是整个数组。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28604"></a><div class="props_rev_3"><a id="GUID-BCD2C704-39EA-4B52-B3CB-E192F715ED84" name="GUID-BCD2C704-39EA-4B52-B3CB-E192F715ED84"></a><h5 id="JJDBC-GUID-BCD2C704-39EA-4B52-B3CB-E192F715ED84" class="sect5"><span class="enumeration_section">16.4.2.6将</span>数组元素检索到oracle.sql中。基准数组</h5>
                     <div>
                        <div class="section">
                           <p>使用<code class="codeph">getOracleArray</code>返回<code class="codeph">oracle.sql.Datum[]</code>数组。返回数组的元素是<code class="codeph">oracle.sql.*</code>类型，对应于原始数组元素的SQL数据类型。例如：</p><pre class="oac_no_warn" dir="ltr">Datum arraydata [] = arr.getOracleArray（）;</pre><p><code class="codeph">arr</code>是一个<code class="codeph">oracle.sql.ARRAY</code>对象。
                           </p>
                           <p>该<a id="d57778e1661" class="indexterm-anchor"></a>以下示例假定已创建连接对象<code class="codeph">conn</code>和语句对象<code class="codeph">stmt</code> 。在该示例中，创建了一个SQL类型名称为<code class="codeph">NUM_ARRAY</code>的数组，用于存储<code class="codeph">NUMBER</code>数据的VARRAY。<code class="codeph">NUM_ARRAY</code>又存储在表<code class="codeph">VARRAY_TABLE</code> 。</p>
                           <p>查询选择<code class="codeph">VARRAY_TABLE</code>的内容。结果集转换为<code class="codeph">OracleResultSet</code> 。应用<code class="codeph">getARRAY</code>方法将数组数据检索到<code class="codeph">my_array</code> ，这是一个<code class="codeph">oracle.sql.ARRAY</code>对象。
                           </p>
                           <p>因为<code class="codeph">my_array</code>的类型是<code class="codeph">oracle.sql.ARRAY</code> ，您可以将方法<code class="codeph">getSQLTypeName</code>和<code class="codeph">getBaseType</code>应用于它，以返回数组中每个元素的SQL类型的名称及其整数代码。
                           </p>
                           <p>然后程序打印阵列的内容。由于<code class="codeph">NUM_ARRAY</code>的内容属于SQL数据类型<code class="codeph">NUMBER</code> ，因此<code class="codeph">my_array</code>的元素属于<code class="codeph">BigDecimal</code>类型。在使用元素之前，必须首先将它们<code class="codeph">BigDecimal</code>为<code class="codeph">BigDecimal</code> 。在<code class="codeph">for</code>循环中，数组的各个值转换为<code class="codeph">BigDecimal</code>并打印到标准输出。
                           </p><pre class="oac_no_warn" dir="ltr">stmt.execute（“CREATE TYPE num_varray AS VARRAY（10）OF NUMBER（12,2）”）; stmt.execute（“CREATE TABLE varray_table（col1 num_varray）”）; stmt.execute（“INSERT INTO varray_table VALUES（num_varray（100,200））”）; ResultSet rs = stmt.executeQuery（“SELECT * FROM varray_table”）; ARRAY my_array =（（OracleResultSet）rs）.getARRAY（1）; //返回SQL类型名称，整数代码，//和System.out.println列的长度（“Array的类型为”+ array.getSQLTypeName（））; System.out.println（“数组元素的类型为代码”+ array.getBaseType（））; System.out.println（“Array is length”+ array.length（））; //获取数组元素BigDecimal [] values =（BigDecimal []）my_array.getArray（）; for（int i = 0; i &lt;values.length; i ++）{BigDecimal out_value =（BigDecimal）values [i]; System.out.println（“&gt;&gt; index”+ i +“=”+ out_value.intValue（））; }</pre><p>请注意，如果使用<code class="codeph">getResultSet</code>来获取数组，则必须先获取结果集对象，然后使用<code class="codeph">next</code>方法迭代它。请注意，在<code class="codeph">getInt</code>方法中使用参数索引来检索元素索引和元素值。
                           </p><pre class="oac_no_warn" dir="ltr">ResultSet rset = my_array.getResultSet（）; while（rset.next（））{//第一列包含元素索引，第二列包含元素值System.out.println（“&gt;&gt; index”+ rset.getInt（1）+“=” + rset.getInt（2））; }</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28605"></a><div class="props_rev_3"><a id="GUID-A374A861-2770-418F-9CF6-DBB807CE282C" name="GUID-A374A861-2770-418F-9CF6-DBB807CE282C"></a><h5 id="JJDBC-GUID-A374A861-2770-418F-9CF6-DBB807CE282C" class="sect5"><span class="enumeration_section">16.4.2.7</span>关于访问多级集合元素</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">oracle.sql.ARRAY</code>类提供了三个重载的方法来访问集合元素。JDBC驱动程序扩展了这些方法以支持多级集合。这些方法是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">getArray</code>方法</p>
                              </li>
                              <li>
                                 <p><code class="codeph">getOracleArray</code>方法</p>
                              </li>
                              <li>
                                 <p><code class="codeph">getResultSet</code>方法</p>
                              </li>
                           </ul>
                           <p><code class="codeph">getArray</code>方法返回一个包含集合元素的Java数组。数组元素类型由集合元素类型和JDBC默认转换矩阵确定。
                           </p>
                           <p>例如， <code class="codeph">getArray</code>方法返回<code class="codeph">java.math.用于收集SQL <code class="codeph">NUMBER</code> BigDecimal</code>数组。 <code class="codeph">getOracleArray</code>方法返回一个<code class="codeph">Datum</code>数组，该数组以<code class="codeph">Datum</code>格式保存集合元素。对于多级集合， <code class="codeph">getArray</code>和<code class="codeph">getOracleArray</code>方法都返回<code class="codeph">oracle.sql.的Java数组<code class="codeph">oracle.sql.ARRAY</code>元素。
                           </p>
                           <p><code class="codeph">getResultSet</code>方法返回一个包装多级集合元素的<code class="codeph">ResultSet</code>对象。对于多级集合，JDBC应用程序使用<code class="codeph">ResultSet</code>类的<code class="codeph">getObject</code> ， <code class="codeph">getARRAY</code>或<code class="codeph">getArray</code>方法将集合元素作为<code class="codeph">oracle.sql.实例进行访问<code class="codeph">oracle.sql.ARRAY</code> 。</p>
                           <p>以下代码显示了如何使用<code class="codeph">getOracleArray</code> ， <code class="codeph">getArray</code>和<code class="codeph">getResultSet</code>方法：</p><pre class="oac_no_warn" dir="ltr">连接conn = ...; //建立JDBC连接语句stmt = conn.createStatement（）; ResultSet rset = stmt.executeQuery（“从tab2选择col2，其中idx = 1”）; while（rset.next（））{ARRAY varray3 =（ARRAY）rset.getObject（1）; Object varrayElems = varray3.getArray（1）; //访问“varray3”的数组元素Datum [] varray3Elems =（Datum []）varrayElems; for（int i = 0; i &lt;varray3Elems.length; i ++）{ARRAY varray2 =（ARRAY）varray3Elems [i]; Datum [] varray2Elems = varray2.getOracleArray（）; //访问“varray2”的数组元素（int j = 0; j &lt;varray2Elems.length; j ++）{ARRAY varray1 =（ARRAY）varray2Elems [j]; ResultSet varray1Elems = varray1.getResultSet（）; //访问“varray1”的数组元素while（varray1Elems.next（））System.out.println（“idx =”+ varray1Elems.getInt（1）+“value =”+ varray1Elems.getInt（2））; rset.close（）; stmt.close（）; conn.close（）;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="JJDBC28607"></a><a id="JJDBC28608"></a><a id="JJDBC28606"></a><div class="props_rev_3"><a id="GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6" name="GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6"></a><h4 id="JJDBC-GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6" class="sect4"><span class="enumeration_section">16.4.3将</span>数组传递给语句对象</h4>
                  <div>
                     <div class="section">
                        <p>本节讨论如何将数组传递给预准备语句对象或可调用语句对象。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6__GUID-D37888C2-7F18-4112-8662-53D81AE5D3F4">将数组传递给准备好的语句</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将数组传递给预准备语句，如下所示。</p>
                        <div class="infoboxnote" id="GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6__GUID-277EE1DF-C607-4EB8-B182-7DF81BE4ADAD">
                           <p class="notep1">注意：</p>
                           <p>您可以将数组用作<code class="codeph">IN</code>或<code class="codeph">OUT</code>绑定变量。
                           </p>
                        </div>
                        <ol>
                           <li>
                              <p>将要传递给<code class="codeph">oracle.sql.准备语句的数组定义为<code class="codeph">oracle.sql.ARRAY</code>对象。
                              </p><pre class="oac_no_warn" dir="ltr">ARRAY array = oracle.jdbc。OracleConnection.createARRAY（sql_type_name，elements）;</pre><p><code class="codeph">sql_type_name</code>是一个Java字符串，指定数组的用户定义的SQL类型名称， <span class="italic"><code class="codeph">elements</code></span>是<code class="codeph">java.lang.包含元素的Java数组的Object</code> 。
                              </p>
                           </li>
                           <li>
                              <p>创建一个<code class="codeph">java.sql.包含要运行的SQL语句的PreparedStatement</code>对象。
                              </p>
                           </li>
                           <li>
                              <p>将准备好的语句转换为<code class="codeph">OraclePreparedStatement</code> ，并使用<code class="codeph">setARRAY</code>将数组传递给<code class="codeph">OraclePreparedStatement</code>准备语句。
                              </p><pre class="oac_no_warn" dir="ltr">（OraclePreparedStatement）stmt.setARRAY（ <span class="italic">parameterIndex</span> ， <span class="italic">array</span> ）;</pre><p><span class="italic"><code class="codeph">parameterIndex</code></span>是参数索引， <span class="italic"><code class="codeph">array</code></span>是<code class="codeph">oracle.sql.您之前构建的ARRAY</code>对象。
                              </p>
                           </li>
                           <li>
                              <p>运行准备好的语句。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCCFF59D-D84C-410B-B681-BA5AA6285EC6__GUID-8C72E0CE-F7A1-4C97-BC1B-FA8FF70E893A">将数组传递给可调用语句</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>检索一个<a id="d57778e1978" class="indexterm-anchor"></a>收集作为PL / SQL块中的<code class="codeph">OUT</code>参数，执行以下操作以注册<code class="codeph">OUT</code>参数的绑定类型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将可调用语句转换为<code class="codeph">OracleCallableStatement</code> ，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">OracleCallableStatement ocs =（OracleCallableStatement）conn.prepareCall（“{？= call func（）}“）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">registerOutParameter</code>方法的以下形式注册<code class="codeph">OUT</code>参数：</span><div><pre class="oac_no_warn" dir="ltr">ocs.registerOutParameter（int <span class="italic">param_index</span> ，int <span class="italic">sql_type</span> ，string <span class="italic">sql_type_name</span> ）;</pre><p><span class="italic"><code class="codeph">param_index</code></span>是参数索引， <span class="italic"><code class="codeph">sql_type</code></span>是SQL类型代码， <span class="italic"><code class="codeph">sql_type_name</code></span>是数组类型的名称。在这种情况下， <span class="italic"><code class="codeph">sql_type</code></span>是<code class="codeph">OracleTypes.ARRAY</code> 。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行呼叫，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">ocs.execute（）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>获取值，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">oracle.sql。ARRAY array = ocs.getARRAY（1）;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="JJDBC28609"></a><div class="props_rev_3"><a id="GUID-22D90043-E417-4BC3-A838-0DBA954AF2AA" name="GUID-22D90043-E417-4BC3-A838-0DBA954AF2AA"></a><h3 id="JJDBC-GUID-22D90043-E417-4BC3-A838-0DBA954AF2AA" class="sect3"><span class="enumeration_section">16.5</span>使用类型映射映射数组元素</h3>
               <div>
                  <div class="section">
                     <p>如果你的<a id="d57778e2077" class="indexterm-anchor"></a><a id="d57778e2081" class="indexterm-anchor"></a> array包含Oracle对象，然后您可以使用类型映射将数组中的对象与相应的Java类相关联。如果未指定类型映射，或者类型映射不包含特定Oracle对象的条目，则每个元素都将作为<code class="codeph">oracle.jdbc.返回<code class="codeph">oracle.jdbc.OracleStruct</code>对象。
                     </p>
                     <p>如果希望类型映射确定数组中的Oracle对象与其关联的Java类之间的映射，则必须向映射添加适当的条目。</p>
                     <p>以下示例说明如何使用类型映射将数组元素映射到自定义Java对象类。在这种情况下，数组是嵌套表。该示例首先定义具有name属性和employee number属性的<code class="codeph">EMPLOYEE</code>对象。<code class="codeph">EMPLOYEE_LIST</code>是<code class="codeph">EMPLOYEE</code>对象的嵌套表类型。然后创建<code class="codeph">EMPLOYEE_TABLE</code>以存储公司内部门的名称以及与每个部门相关联的员工。在<code class="codeph">EMPLOYEE_TABLE</code> ，员工以<code class="codeph">EMPLOYEE_LIST</code>表的形式存储。
                     </p><pre class="oac_no_warn" dir="ltr">stmt.execute（“CREATE TYPE EMPLOYEE AS OBJECT（EmpName VARCHAR2（50），EmpNo INTEGER））”）; stmt.execute（“CREATE TYPE EMPLOYEE_LIST ASMP OF EMPLOYEE”）; stmt.execute（“CREATE TABLE EMPLOYEE_TABLE（DeptName VARCHAR2（20），Employees EMPLOYEE_LIST）NESTED TABLE Employees STORE AS ntable1”）; stmt.execute（“INSERT INTO EMPLOYEE_TABLE VALUES（”SALES“，EMPLOYEE_LIST（EMPLOYEE（'Susan Smith'，123），EMPLOYEE（'Lee Brown'，124））））;）;</pre><p>如果要将属于<code class="codeph">SALES</code>部门的所有员工检索到自定义对象类<code class="codeph">EmployeeObj</code>的实例数组中，则必须在类型映射中添加一个条目，以指定<code class="codeph">EMPLOYEE</code> SQL类型和<code class="codeph">EmployeeObj</code>自定义对象类之间的映射。
                     </p>
                     <p>为此，首先创建语句和结果集对象，然后在结果集中选择与<code class="codeph">SALES</code>部门关联的<code class="codeph">EMPLOYEE_LIST</code> 。将结果集转换为<code class="codeph">OracleResultSet</code>以便您可以使用<code class="codeph">getARRAY</code>方法将<code class="codeph">EMPLOYEE_LIST</code>检索到<code class="codeph">ARRAY</code>对象（以下示例中为<code class="codeph">employeeArray</code> ）。
                     </p>
                     <p>此示例中的<code class="codeph">EmployeeObj</code>自定义对象类实现<code class="codeph">SQLData</code>接口。
                     </p><pre class="oac_no_warn" dir="ltr">Statement s = conn.createStatement（）; OracleResultSet rs =（OracleResultSet）s.executeQuery（“SELECT Employees FROM employee_table WHERE DeptName ='SALES'”）; //获取数组对象ARRAY employeeArray =（（OracleResultSet）rs）.getARRAY（1）;</pre><p>现在您已拥有<code class="codeph">EMPLOYEE_LIST</code>对象，获取现有类型映射并添加将<code class="codeph">EMPLOYEE</code> SQL类型映射到<code class="codeph">EmployeeObj</code> Java类型的条目。
                     </p><pre class="oac_no_warn" dir="ltr">//添加类型映射条目以将SQL类型//“EMPLOYEE”映射到Java类型“EmployeeObj”Map map = conn.getTypeMap（）; map.put（“EMPLOYEE”，Class.forName（“EmployeeObj”））;</pre><p>接下来，从<code class="codeph">EMPLOYEE_LIST</code>检索SQL <code class="codeph">EMPLOYEE</code>对象。为此，请调用<code class="codeph">employeeArray</code>数组对象的<code class="codeph">getArray</code>方法。此方法返回一个对象数组。<code class="codeph">getArray</code>方法将<code class="codeph">EMPLOYEE</code>对象返回到<code class="codeph">employees</code>对象数组中。
                     </p><pre class="oac_no_warn" dir="ltr">//检索数组元素Object [] employees =（Object []）employeeArray.getArray（）;</pre><p>最后，创建一个循环，将每个<code class="codeph">EMPLOYEE</code> SQL对象分配给<code class="codeph">EmployeeObj</code> Java对象<code class="codeph">emp</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">//每个数组元素都映射到EmployeeObj对象。for（int i = 0; i &lt;employees.length; i ++）{EmployeeObj emp =（EmployeeObj）employees [i]; ...}</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13260.SDO_TOPO-reference.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The MDSYS.SDO_TOPO package contains subprograms (functions and procedures) that constitute part of the PL/SQL application programming interface (API) for the Spatial and Graph Topology Data Model feature. This package mainly contains subprograms for creating and managing topologies."></meta>
      <meta name="description" content="The MDSYS.SDO_TOPO package contains subprograms (functions and procedures) that constitute part of the PL/SQL application programming interface (API) for the Spatial and Graph Topology Data Model feature. This package mainly contains subprograms for creating and managing topologies."></meta>
      <title>SDO_TOPO包子程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Topology Data Model and Network Data Model Graph Developer&#39;s Guide"></meta>
      <meta property="og:description" content="The MDSYS.SDO_TOPO package contains subprograms (functions and procedures) that constitute part of the PL/SQL application programming interface (API) for the Spatial and Graph Topology Data Model feature. This package mainly contains subprograms for creating and managing topologies."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Topology Data Model and Network Data Model Graph Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-topology-data-model-and-network-data-model-graph-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T12:24:53-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94802-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="editing-topologies.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SDO_TOPO_MAP-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Topology Data Model and Network Data Model Graph Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TOPOL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="editing-topologies.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SDO_TOPO_MAP-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">拓扑数据模型和网络数据模型图开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="topology-data-model.html" property="item" typeof="WebPage"><span property="name">拓扑数据模型</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SDO_TOPO包子程序</li>
            </ol>
            <a id="GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" name="GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04"></a><a id="TOPOL200"></a>
            
            <h2 id="TOPOL-GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" class="sect2"><span class="enumeration_chapter">3</span> SDO_TOPO包子程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。</p>
               <p><a id="d16946e23" class="indexterm-anchor"></a><a id="d16946e27" class="indexterm-anchor"></a>要使用本章中的子程序，必须在<a href="topology-data-model-overview.html#GUID-3F069A32-CCDC-4DBA-87A5-21D501DBBD6D" title="Oracle Spatial and Graph的拓扑数据模型功能使您可以处理拓扑中有关节点，边和面的数据。">拓扑数据模型概述中</a>了解有关拓扑的概念信息。
               </p>
               <p>另一个包SDO_TOPO_MAP主要包含与编辑拓扑相关的子程序。SDO_TOPO_MAP包的参考信息在<a href="SDO_TOPO_MAP-reference.html#GUID-7DDDFF77-C1B6-43A3-8F7A-684F03B4F0F0" title="MDSYS.SDO_TOPO_MAP包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。">SDO_TOPO_MAP包子程序中</a> 。
               </p>
               <p>本章的其余部分提供了有关SDO_TOPO子程序的参考信息，按字母顺序列出。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-56C1B565-72E4-43BD-B46C-096D3C878B30">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-FCF18F45-89D5-4394-9339-323DBA235147">SDO_TOPO.CREATE_TOPOLOGY</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56">SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559">SDO_TOPO.DROP_TOPOLOGY</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4">SDO_TOPO.GET_FACE_BOUNDARY</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-697D0367-D5AF-498A-8AFE-08CFB486627C">SDO_TOPO.GET_TOPO_OBJECTS</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-3C5C023B-079D-4225-802B-CE9B952D82DC">SDO_TOPO.INITIALIZE_AFTER_IMPORT</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1">SDO_TOPO.INITIALIZE_METADATA</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-F49486FC-1125-4C51-8F23-4E8332C935AB">SDO_TOPO.PREPARE_FOR_EXPORT</a><br></li>
                  <li class="ulchildlink"><a href="SDO_TOPO-reference.html#GUID-2131609B-F033-4712-9EA5-FC04B466DEF7">SDO_TOPO.RELATE</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="topology-data-model.html#GUID-568DB747-C605-43E8-A8B4-8FA268B9D687" title="本部分介绍Oracle Spatial and Graph的拓扑数据模型功能。">拓扑数据模型</a></p>
                  </div>
               </div>
            </div>
            <a id="TOPOL825"></a><div class="props_rev_3"><a id="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30" name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30"></a><h3 id="TOPOL-GUID-56C1B565-72E4-43BD-B46C-096D3C878B30" class="sect3"><span class="enumeration_section">3.1</span> SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-D43BC61A-9AB3-470A-863D-175EE2301636">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER（拓扑IN VARCHAR2，table_name IN VARCHAR2，column_name IN VARCHAR2，topo_geometry_layer_type IN VARCHAR2，relation_table_storage IN VARCHAR2 DEFAULT NULL，child_layer_id IN NUMBER DEFAULT NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-69D77589-4C91-46B5-B57C-6ABD303CC8A9">描述</p>
                     <p>将拓扑几何图层添加到拓扑中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-202901F6-58BC-4D90-8C94-751DFAF48759">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-B2503EF1-4DEB-4D53-ADA9-B9AB484CED7C"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>要在其中添加包含指定列中的拓扑几何的拓扑几何图层的拓扑。必须使用<a href="SDO_TOPO-reference.html#GUID-FCF18F45-89D5-4394-9339-323DBA235147">SDO_TOPO.CREATE_TOPOLOGY</a>过程创建拓扑。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-95C2673B-DE66-4FA4-8B3E-D6AAB7F7AACB"><!-- --></a> table_name</dt>
                        <dd>
                           <p>包含<code class="codeph">column_name</code>指定的列的拓扑几何图层表的名称。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-E886C4F5-D35E-4F69-9421-DAD006430F73"><!-- --></a> column_name</dt>
                        <dd>
                           <p>列的名称（类型为SDO_TOPO_GEOMETRY），包含要添加到拓扑中的拓扑几何图层中的拓扑几何。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-05CF0B8F-72F0-41D5-A10B-19BA5DF83179"><!-- --></a> topo_geometry_layer_type</dt>
                        <dd>
                           <p>拓扑几何图层的类型：POINT，LINE，CURVE，POLYGON或COLLECTION。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-7C9B70C3-4107-4CD6-95BC-01B86C2846C7"><!-- --></a> relation_table_storage</dt>
                        <dd>
                           <p>内部用于创建&lt;topology-name&gt; _RELATION $表的物理存储参数（在<a href="topology-data-model-overview.html#GUID-46B81706-7812-4E79-972A-7024D0A28191">关系信息表中</a>描述）。必须是与CREATE TABLE语句一起使用的有效字符串。例如： <code class="codeph">TABLESPACE tbs_3 STORAGE (INITIAL 100K NEXT 200K)</code> 。如果未指定此参数，则使用默认物理存储值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-4CE2F58C-BAC7-4645-B82F-A7AA0D246C5C"><!-- --></a> child_layer_id</dt>
                        <dd>
                           <p>如果拓扑具有拓扑几何图层层次结构，则此图层的子拓扑几何图层的图层ID编号。（拓扑几何图层层次结构在<a href="topology-data-model-overview.html#GUID-048DC942-FC27-4977-AB98-2451E4A4910F" title="在某些拓扑中，拓扑几何图层（要素图层）在拓扑层次结构中具有一个或多个父子关系。也就是说，最顶层的层由层次结构中下一层的子层中的特征组成;子图层可能包含其子层中下一层更远的特征;等等。">拓扑几何图层层次</a>结构中进行了解释。）如果未指定此参数，并且拓扑具有拓扑几何图层层次结构，则拓扑几何图层将添加到层次结构的最低级别（级别0）。
                           </p>
                           <p>如果拓扑没有拓扑几何图层层次结构，则在添加任何拓扑几何图层时不要指定此参数。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-698B5974-8751-4E0F-B661-4BC2D335D0FA">使用说明</p>
                     <p>对给定拓扑的第一次调用此过程将创建&lt;topology-name&gt; _RELATION $表，该表在“ <a href="topology-data-model-overview.html#GUID-46B81706-7812-4E79-972A-7024D0A28191">关系信息表”中进行了</a>描述。
                     </p>
                     <p>此过程自动执行提交操作，因此无法回滚。要删除刚刚创建的拓扑，请调用<a href="SDO_TOPO-reference.html#GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56">SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER</a>过程。
                     </p>
                     <p>该过程为拓扑几何中的空间<code class="codeph">tg_type</code>创建空间索引，并在拓扑几何中<code class="codeph">tg_type</code>和<code class="codeph">tg_id</code>组合的B树索引。
                     </p>
                     <p>授予CONNECT和RESOURCE角色的用户还必须被授予CREATE VIEW权限才能调用该过程。这是必要的，因为对Oracle Database <span class="italic">10g</span>第2版有效，CONNECT角色权限减少功能从CONNECT角色中删除了以下权限：CREATE CLUSTER，CREATE DATABASE LINK，CREATE SEQUENCE，ALTER SESSION，CREATE SYNONYM，CREATE TABLE和CREATE VIEW 。</p>
                     <p>拓扑几何图层表（ <code class="codeph">table_name</code>参数）不能是对象表。
                     </p>
                     <p>如果<code class="codeph">topology</code> ， <code class="codeph">table_name</code>或<code class="codeph">column_name</code>不存在，或者<code class="codeph">topo_geometry_layer_type</code>不是受支持的值之一，则会<code class="codeph">topo_geometry_layer_type</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-56C1B565-72E4-43BD-B46C-096D3C878B30__GUID-202D5769-379F-4875-AF5A-7F45451BEE92">例子</p>
                     <p>以下示例将拓扑几何图层添加到<code class="codeph">CITY_DATA</code>拓扑中。拓扑几何图层由LAND_PARCELS表的FEATURE列中的多边形几何图形组成。（该示例引用了<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER（'CITY_DATA'，'LAND_PARCELS'，'FEATURE'，'POLYGON'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL826"></a><div class="props_rev_3"><a id="GUID-FCF18F45-89D5-4394-9339-323DBA235147" name="GUID-FCF18F45-89D5-4394-9339-323DBA235147"></a><h3 id="TOPOL-GUID-FCF18F45-89D5-4394-9339-323DBA235147" class="sect3"><span class="enumeration_section">3.2</span> SDO_TOPO.CREATE_TOPOLOGY</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-41CCD9C0-CCF5-478F-907A-987341931364">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.CREATE_TOPOLOGY（拓扑IN VARCHAR2，容差IN NUMBER，srid IN NUMBER DEFAULT NULL，node_table_storage IN VARCHAR2 DEFAULT NULL，edge_table_storage IN VARCHAR2 DEFAULT NULL，face_table_storage IN VARCHAR2 DEFAULT NULL，history_table_storage IN VARCHAR2 DEFAULT NULL。digits_right_of_decimal IN VARCHAR2 DEFAULT 16）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-9F28787B-052B-44B4-8588-50485F277F98">描述</p>
                     <p>创建拓扑。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-A7D16C27-DE75-40FB-AFC9-D409C8A013FD">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-0A5E6EA3-8FD4-4886-91F8-202544E242F2"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>要创建的拓扑的名称。不得超过20个字符。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-B7BE165D-2758-48D1-91EC-3F13DECC5C39"><!-- --></a>容差</dt>
                        <dd>
                           <p>与拓扑中的拓扑几何关联的容差值。（容差在<a href="topology-data-model-overview.html#GUID-997D8EC4-F0D8-4978-B2D4-310E08C76F36">拓扑数据模型</a>中的<a href="topology-data-model-overview.html#GUID-997D8EC4-F0D8-4978-B2D4-310E08C76F36">容差中</a>解释。）
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-41E3C495-764F-4C80-9D0B-7076C64E1AE5"><!-- --></a> srid</dt>
                        <dd>
                           <p>与拓扑中的所有拓扑几何图层关联的坐标系（空间参照系）。默认值为null：没有关联坐标系;否则，它必须是SDO_COORD_REF_SYS表的SRID列中的值（在<a href="../spatl/coordinate-systems-concepts.html#SPATL652" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide中描述</span></a> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-27B07806-5455-44C5-8234-AB4D8EE1EE65"><!-- --></a> node_table_storage</dt>
                        <dd>
                           <p>内部用于创建&lt;topology-name&gt; _NODE $表的物理存储参数（在<a href="topology-data-model-overview.html#GUID-E08A62FC-ABF2-4672-94A0-EC28C9C13D4F">节点信息表中</a>描述）。必须是与CREATE TABLE语句一起使用的有效字符串。例如： <code class="codeph">TABLESPACE tbs_3 STORAGE (INITIAL 100K NEXT 200K)</code> 。如果未指定此参数，则使用默认物理存储值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-E4E75B97-E7F6-4B8C-BBF2-898327CDCB50"><!-- --></a> edge_table_storage</dt>
                        <dd>
                           <p>内部用于创建&lt;topology-name&gt; _EDGE $表的物理存储参数（在<a href="topology-data-model-overview.html#GUID-8B9601CA-F743-48EA-B3C3-442D22A0C627">边缘信息表中</a>描述）。必须是与CREATE TABLE语句一起使用的有效字符串。例如： <code class="codeph">TABLESPACE tbs_3 STORAGE (INITIAL 100K NEXT 200K)</code> 。如果未指定此参数，则使用默认物理存储值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-D3B24656-F81F-415B-8463-D043A78715DE"><!-- --></a> face_table_storage</dt>
                        <dd>
                           <p>内部使用的物理存储参数用于创建&lt;topology-name&gt; _FACE $表（在<a href="topology-data-model-overview.html#GUID-FDD3C33D-B85C-4270-8F6E-BDF3F74512E3">面信息表中</a>描述）。必须是与CREATE TABLE语句一起使用的有效字符串。例如： <code class="codeph">TABLESPACE tbs_3 STORAGE (INITIAL 100K NEXT 200K)</code> 。如果未指定此参数，则使用默认物理存储值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-1C153690-0D57-4B73-8754-3BF19EC5DD44"><!-- --></a> history_table_storage</dt>
                        <dd>
                           <p>内部用于创建&lt;topology-name&gt; _HISTORY $表的物理存储参数（在<a href="topology-data-model-overview.html#GUID-68020A3E-978F-4EB7-AAA8-8DABA17533BF">历史信息表中</a>描述）。必须是与CREATE TABLE语句一起使用的有效字符串。例如： <code class="codeph">TABLESPACE tbs_3 STORAGE (INITIAL 100K NEXT 200K)</code> 。如果未指定此参数，则使用默认物理存储值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-0ECBB0B7-A8B6-43C9-8720-19C99F0681B5"><!-- --></a> digits_right_of_decimal</dt>
                        <dd>
                           <p>将要素添加到现有拓扑时，任何坐标位置表达式中小数点右侧允许的位数。所有传入的功能（作为参数传递给Java API中的<code class="codeph">addLinearGeometry</code> ， <code class="codeph">addPolygonGeometry</code>或<code class="codeph">addPointGeometry</code>方法或等效的PL / SQL子程序）将自动捕捉（截断）到<code class="codeph">addPolygonGeometry</code>指定的小数点右边的位数。参数。默认值为16。
                           </p>
                           <p>应根据输入数据的准确性将此值设置为与小数点右边的最后一位数相匹配。提供该机制是为了在特征插入过程中提高计算几何的稳定性，并最小化条子多边形的产生和其他不希望的结果。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-B52D3877-058C-4ABF-8F8F-0D13E4DEE5CF">使用说明</p>
                     <p>此过程创建&lt;拓扑名称&gt; _EDGE $，&lt;topology-name&gt; _NODE $，&lt;topology-name&gt; _FACE $和&lt;topology-name&gt; _HISTORY $表，这些表在<a href="topology-data-model-overview.html#GUID-86DFC29E-32D2-4F6C-9A17-6493B5946A99" title="要使用空间和图形拓扑功能，必须首先将数据插入特殊的边，节点和面图表，这些表由创建拓扑时由空间和图形创建。">拓扑数据模型表</a>中描述，并创建这些表的主键上的B树索引。此过程还会为拓扑创建元数据。
                     </p>
                     <p>在<code class="codeph">srid</code>参数中，您可以指定大地坐标系;但是，拓扑上的所有空间和图形内部操作都将使用笛卡尔（非大地测量）算术运算。（ <a href="../spatl/coordinate-systems-concepts.html#SPATL616" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a>中讨论了大地坐标系和非大地坐标系。）
                     </p>
                     <p>节点，边，面和历史表是在没有分区的情况下创建的;但是，您可以更改这些表中的任何一个以使其分区。您还可以在分区表上创建分区空间索引，如<a href="../spatl/indexing-querying-spatial-data.html#SPATL586" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide中所述</span></a> 。
                     </p>
                     <p>此过程自动执行提交操作，因此无法回滚。要删除刚刚创建的拓扑，请调用<a href="SDO_TOPO-reference.html#GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559">SDO_TOPO.DROP_TOPOLOGY</a>过程。
                     </p>
                     <p>如果拓扑已存在，则会引发异常。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FCF18F45-89D5-4394-9339-323DBA235147__GUID-C286A016-5E2B-46D0-AEF7-E1C05D5645CF">例子</p>
                     <p>以下示例创建名为<code class="codeph">CITY_DATA</code>的拓扑。此拓扑中的空间几何具有公差值0.5并使用<code class="codeph">WGS 84</code>坐标系（经度和纬度，SRID值8307）。（该示例引用了<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.CREATE_TOPOLOGY（'CITY_DATA'，0.5,8307）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL827"></a><div class="props_rev_3"><a id="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56" name="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56"></a><h3 id="TOPOL-GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56" class="sect3"><span class="enumeration_section">3.3</span> SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-2F0B7467-E3AA-429A-BFD3-F446ACAAD7E6">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER（拓扑IN VARCHAR2，table_name IN VARCHAR2，column_name IN VARCHAR2）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-B6EED532-9BF1-47AD-8C9D-2B3C4711A963">描述</p>
                     <p>从拓扑中删除拓扑几何图层。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-CA4666D9-A7C5-441A-8A69-A521A2691306">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-70ADF56C-8DA6-4E36-AB2B-23CAB12B1700"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>从中删除包含指定列中的拓扑几何的拓扑几何图层的拓扑。必须使用<a href="SDO_TOPO-reference.html#GUID-FCF18F45-89D5-4394-9339-323DBA235147">SDO_TOPO.CREATE_TOPOLOGY</a>过程创建拓扑。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-58942AC7-17BF-4423-B29C-DBD0ECCF2149"><!-- --></a> table_name</dt>
                        <dd>
                           <p>包含<code class="codeph">column_name</code>指定的列的表的名称。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-C6205E2A-E7AE-40F0-A6DF-51A57795747A"><!-- --></a> column_name</dt>
                        <dd>
                           <p>包含要从拓扑中删除的拓扑几何图层中的拓扑几何的列的名称。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-6DBD4438-5636-4578-89E6-1BB8BECE4CB8">使用说明</p>
                     <p>此过程从&lt;topology-name&gt; _RELATION $表（在“ <a href="topology-data-model-overview.html#GUID-46B81706-7812-4E79-972A-7024D0A28191">关系信息表”中</a>描述）中删除与指定拓扑几何图层关联的数据。如果此过程正在从拓扑中删除唯一剩余的拓扑几何图层，则它还会删除&lt;topology-name&gt; _RELATION $表。
                     </p>
                     <p>此过程自动执行提交操作，因此无法回滚。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56__GUID-9150F383-98D6-4B5F-B250-3078A0CCA846">例子</p>
                     <p>以下示例从名为<code class="codeph">CITY_DATA</code>的拓扑中删除基于LAND_PARCELS表的FEATURE列中几何的拓扑几何图层。 （该示例涉及<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER（'CITY_DATA'，'LAND_PARCELS'，'FEATURE'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL828"></a><div class="props_rev_3"><a id="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559" name="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559"></a><h3 id="TOPOL-GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559" class="sect3"><span class="enumeration_section">3.4</span> SDO_TOPO.DROP_TOPOLOGY</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559__GUID-FC704BC7-7CC1-484C-A825-2533ABDBCFDC">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.DROP_TOPOLOGY（拓扑IN VARCHAR2）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559__GUID-405D0772-43BE-4639-AB0E-735D7DC21953">描述</p>
                     <p>删除拓扑。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559__GUID-D4F0C6ED-825A-4436-8EE7-8749086DC713">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559__GUID-86CC072D-63F4-4241-82AB-EE9F3F1C0876"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>要删除的拓扑的名称。必须使用<a href="SDO_TOPO-reference.html#GUID-FCF18F45-89D5-4394-9339-323DBA235147">SDO_TOPO.CREATE_TOPOLOGY</a>过程创建拓扑。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559__GUID-5F06E252-759C-4517-A178-71B661BE2A63">使用说明</p>
                     <p>此过程将删除&lt;topology-name&gt; _EDGE $，&lt;topology-name&gt; _NODE $，&lt;topology-name&gt; _FACE $，&lt;topology-name&gt; _NODE $，&lt;topology-name&gt; _RELATION $和&lt;topology-name&gt; _HISTORY $表（在<a href="topology-data-model-overview.html#GUID-86DFC29E-32D2-4F6C-9A17-6493B5946A99" title="要使用空间和图形拓扑功能，必须首先将数据插入特殊的边，节点和面图表，这些表由创建拓扑时由空间和图形创建。">拓扑数据模型表中</a>描述）。
                     </p>
                     <p>如果没有与拓扑关联的拓扑图层，则会从空间和图形元数据中删除拓扑。</p>
                     <p>此过程自动执行提交操作，因此无法回滚。</p>
                     <p>无法删除拥有拓扑的数据库用户。因此，在使用DROP USER之前......拥有拓扑的数据库用户的CASCADE语句，您必须以该用户身份连接并执行SDO_TOPO.DROP_TOPOLOGY过程。</p>
                     <p>如果拓扑包含来自任何拓扑几何图层的任何拓扑几何，则会引发异常。如果遇到此异常，请使用每个拓扑几何图层的<a href="SDO_TOPO-reference.html#GUID-DADC4BCA-1BF9-4EE8-8F56-95BFE0865F56">SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER</a>过程删除拓扑中的所有拓扑几何图层，然后删除拓扑。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-87D033E1-F0BC-4360-94AE-B7671AC3E559__GUID-AF7D3DFA-9584-468D-ABAE-83ACEB0469D1">例子</p>
                     <p>以下示例删除名为<code class="codeph">CITY_DATA</code>的拓扑。 （该示例涉及<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.DROP_TOPOLOGY（'CITY_DATA'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL829"></a><div class="props_rev_3"><a id="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4" name="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4"></a><h3 id="TOPOL-GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4" class="sect3"><span class="enumeration_section">3.5</span> SDO_TOPO.GET_FACE_BOUNDARY</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-61361863-E96D-4BD9-8E9C-D46520FB92B1">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.GET_FACE_BOUNDARY（拓扑IN VARCHAR2，face_id IN NUMBER，all_edges IN VARCHAR2 DEFAULT'FALSE'）RETURN SDO_LIST_TYPE;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-9A309F7F-952F-4AD2-80CA-023F8D2ED2A3">描述</p>
                     <p>返回指定面的边的带符号ID编号列表。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-64CD8F04-9C27-482C-92FE-F6A00FB47C0C">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-118E31FB-9D7D-4E37-A28A-BC47028BF809"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>包含面的拓扑的名称。不得超过20个字符。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-1A525537-C19B-4275-A6DC-47556AF5230D"><!-- --></a> face_id</dt>
                        <dd>
                           <p>面部的面部ID值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-F59AD255-2B60-42D5-A166-6ADC50E8EC91"><!-- --></a> all_edges</dt>
                        <dd>
                           <p><code class="codeph">TRUE</code>包括绑定面部的所有边（即，在一面或两面都有面）; <code class="codeph">FALSE</code> （默认值）仅包括构成面部外部边界的边。（请参阅此功能的示例。）
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-6AC37E76-8ABF-4B84-A507-7EDA2B6C488A">使用说明</p>
                     <p>没有。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C7CEBC7-1284-4F7C-9BEC-DD3DB40680C4__GUID-A824DCA1-2A1B-4AB2-8E4A-F355899A86D7">例子</p>
                     <p>以下示例返回面ID值为1的面的边ID号。第一个示例接受<code class="codeph">all_edges</code>参数的默认值' <code class="codeph">FALSE'</code> 。第二个示例为<code class="codeph">all_edges</code>指定<code class="codeph">'TRUE'</code> ，列表包括边界边的ID编号和面上的两个隔离边。（这些示例涉及<a href="topology-data-model-overview.html#GUID-637E97AE-C81B-444E-9683-89A143F803F3" title="本主题介绍了执行拓扑数据模型操作的简化PL / SQL示例。">拓扑示例（PL / SQL）中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">- 使用face_id 1获取面部边界。SELECT SDO_TOPO.GET_FACE_BOUNDARY（'CITY_DATA'，1）FROM DUAL; SDO_TOPO.GET_FACE_BOUNDARY（'CITY_DATA'，1）---------------------------------------- ---------------------------------------- SDO_LIST_TYPE（1） - 指定'TRUE'对于all_edges参数。从DUAL中选择SDO_TOPO.GET_FACE_BOUNDARY（'CITY_DATA'，1，'TRUE'）; SDO_TOPO.GET_FACE_BOUNDARY（'CITY_DATA'，1，'TRUE'）------------------------------------ -------------------------------------------- SDO_LIST_TYPE（1，-26 ，25）</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL830"></a><div class="props_rev_3"><a id="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C" name="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C"></a><h3 id="TOPOL-GUID-697D0367-D5AF-498A-8AFE-08CFB486627C" class="sect3"><span class="enumeration_section">3.6</span> SDO_TOPO.GET_TOPO_OBJECTS</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-5FFD8CA8-185B-4C0D-8EA5-7C877B001C55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.GET_TOPO_OBJECTS（拓扑IN VARCHAR2，几何IN IN SDO_GEOMETRY）返回SDO_TOPO_OBJECT_ARRAY;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.GET_TOPO_OBJECTS（拓扑IN VARCHAR2，top__geometry_layer_id IN NUMBER，topo_geometry_id IN NUMBER）返回SDO_TOPO_OBJECT_ARRAY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-B7A4F058-F739-4B66-8158-6D531A70367C">描述</p>
                     <p>返回与指定几何对象或拓扑几何对象交互的SDO_TOPO_OBJECT对象数组。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-FF583725-C1B5-4701-BC23-4365228631E6">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-D495E392-42A9-4882-B4B5-CD70852A544A"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>拓扑的名称。不得超过20个字符。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-A7ABF3E0-C6F1-4277-92F6-5C45501F1301"><!-- --></a>几何</dt>
                        <dd>
                           <p>要检查的几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-822792AA-3DB4-4219-9132-BB1634570AB1"><!-- --></a> topo_geometry_layer_id</dt>
                        <dd>
                           <p>包含要检查的拓扑几何对象的拓扑几何图层的ID号。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-B655AB42-5C18-4B78-B152-1A664EA46F15"><!-- --></a> topo_geometry_id</dt>
                        <dd>
                           <p>要检查的拓扑几何对象的ID号。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-C9989C7A-D376-4DCE-9AFF-287399DA58FB">使用说明</p>
                     <p>SDO_TOPO_OBJECT_ARRAY数据类型在<a href="topology-data-model-overview.html#GUID-361B6FCB-898A-49EB-B7E6-A688D32AA514">“插入操作的构造函数：指定拓扑元素”中进行了描述</a> 。
                     </p>
                     <p>对于具有拓扑几何图层层次结构的拓扑，此函数适用于层次结构的所有级别，并且它始终返回叶级（最低级别）对象。（拓扑几何图层层次结构在<a href="topology-data-model-overview.html#GUID-048DC942-FC27-4977-AB98-2451E4A4910F" title="在某些拓扑中，拓扑几何图层（要素图层）在拓扑层次结构中具有一个或多个父子关系。也就是说，最顶层的层由层次结构中下一层的子层中的特征组成;子图层可能包含其子层中下一层更远的特征;等等。">拓扑几何图层层次</a>结构中进行了解释。）
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-697D0367-D5AF-498A-8AFE-08CFB486627C__GUID-E31265A5-8DAE-40CB-B7A9-88F0DC8B6208">例子</p>
                     <p>以下示例返回与<code class="codeph">CITY_DATA</code>拓扑中的地块P2交互的拓扑几何对象。（该示例引用了<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">-  CITY_DATA图层，地块（topo_geometry_ layer_id = 1）， -  parcel P2（topo_geometry_id = 2）SELECT SDO_TOPO.GET_TOPO_OBJECTS（'CITY_DATA'，1,2）FROM DUAL; SDO_TOPO.GET_TOPO_OBJECTS（'CITY_DATA'，1,2）（TOPO_ID，TOPO_TYPE）--------------------------------- ----------------------------------------------- SDO_TOPO_OBJECT_ARRAY（SDO_TOPO_OBJECT （9,1），SDO_TOPO_OBJECT（10,1），SDO_TOPO_OB JECT（13,1），SDO_TOPO_OBJECT（14,1），SDO_TOPO_OBJECT（17,1），SDO_TOPO_OBJECT（18,1），SDO_TOPO_OBJECT（6,2），SDO_TOPO_OBJECT （7,2），SDO_TOPO_OBJECT（8,2），SDO_TO PO_OBJECT（9,2），SDO_TOPO_OBJECT（10,2），SDO_TOPO_OBJECT（11,2），SDO_TOPO_OBJECT（12,2），SDO_TOPO_OBJECT（13,2），SDO_TOPO_OBJECT （14,2），SDO_TOPO_OBJECT（17,2），SDO_TOPO_OBJECT（18,2），SDO_TOPO_OBJECT（19,2），SDO_TOPO_OBJECT（20,2），SDO_TOP O_OBJECT（-6,2），SDO_TOPO_OBJECT（-7,2） ，SDO_TOPO_OBJECT（-8,2），SDO_TOPO_OBJECT（-9,2），SDO_TOPO_OBJECT（-10,2），SDO_TOPO_OBJECT（-11,2），SDO_TOPO_OBJECT（-12,2），SDO_TOPO_OBJECT（-13,2），SDO_TOPO_OBJECT （-14,2），SDO_TOPO_OBJECT（-17,2），S DO_TOPO_OBJECT（-18,2），SDO_TOPO_OBJECT（-19,2），SDO_TOPO_OBJECT（-20,2），SDO_TO PO_OBJECT（-1,3），SDO_TOPO_OBJECT （3,3），SDO_TOPO _OBJECT（4,3），SDO_TOPO_OBJECT（5,3），SDO_TOPO_OBJECT（6,3），SDO_TOPO_OBJECT（7,3），SDO_TOPO_OBJECT（8,3））</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL831"></a><div class="props_rev_3"><a id="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC" name="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC"></a><h3 id="TOPOL-GUID-3C5C023B-079D-4225-802B-CE9B952D82DC" class="sect3"><span class="enumeration_section">3.7</span> SDO_TOPO.INITIALIZE_AFTER_IMPORT</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC__GUID-D4444904-E197-472C-8B65-F06B27A7E973">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.INITIALIZE_AFTER_IMPORT（拓扑IN VARCHAR2）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC__GUID-6725B143-C47C-4C3A-B6A4-D181F1CFE91B">描述</p>
                     <p>创建（初始化）从另一个数据库导入的拓扑。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC__GUID-BCE395E9-1560-420B-980A-D7347B4FA608">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC__GUID-4CFF5C96-DEAE-4DF7-BC01-FA0423EDAE02"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>要创建的拓扑的名称。必须已从源数据库导出拓扑。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC__GUID-D058952E-A4F7-446C-875F-305C58C1BDC2">使用说明</p>
                     <p>此过程创建指定的拓扑和所有相关的数据库结构，调整（如果需要）所有要素表中的拓扑ID值，并以正确的顺序创建要素图层。</p>
                     <p>在调用此过程之前，请以拥有要创建的拓扑的架构的用户身份连接到数据库。</p>
                     <p>按照<a href="topology-data-model-overview.html#GUID-2D284F68-529F-4772-9C96-2E2FCC72AA70" title="You can export a topology from one database and import it into a new topology with the same name, structures, and data in another database, as long as the target database does not already contain a topology with the same name as the exported topology.">导出和导入拓扑中</a>所述的所有其他必需步骤后，必须使用此过程，如<a href="topology-data-model-overview.html#GUID-2D284F68-529F-4772-9C96-2E2FCC72AA70" title="您可以从一个数据库导出拓扑，并将其导入到另一个数据库中具有相同名称，结构和数据的新拓扑中，只要目标数据库尚未包含与导出的拓扑同名的拓扑。">导出和导入拓扑数据中所述</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3C5C023B-079D-4225-802B-CE9B952D82DC__GUID-BD34FEA6-64FD-4A2D-B61C-ECCEBE55EE36">例子</p>
                     <p>以下示例使用导入表中的信息（包括CITY_DATA_EXP $）创建名为<code class="codeph">CITY_DATA</code>的拓扑。（该示例引用了<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.INITIALIZE_AFTER_IMPORT（'CITY_DATA'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL832"></a><div class="props_rev_3"><a id="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1" name="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1"></a><h3 id="TOPOL-GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1" class="sect3"><span class="enumeration_section">3.8</span> SDO_TOPO.INITIALIZE_METADATA</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1__GUID-19B58BB2-A27F-45D8-9EEA-94FA7BDC0AEA">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.INITIALIZE_METADATA（拓扑IN VARCHAR2）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1__GUID-5C091D87-162A-4ADA-858E-136395F4F370">描述</p>
                     <p>初始化拓扑元数据：设置节点，边和面的表的序列信息，并在这些表上创建（或重新创建）所需的索引。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1__GUID-BED96A35-F27F-4430-BCFB-F92A4D17C71B">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1__GUID-1A1A2941-8C0C-41BA-86C8-7533890599DA"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>要为其初始化序列的拓扑的名称。必须使用<a href="SDO_TOPO-reference.html#GUID-FCF18F45-89D5-4394-9339-323DBA235147">SDO_TOPO.CREATE_TOPOLOGY</a>过程创建拓扑。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1__GUID-B7EC22E3-86FF-44DA-B368-C2E53D1B91C7">使用说明</p>
                     <p>在将数据加载到节点，边或面表之后，应该运行此过程，以使用高于这些表中存储的最高ID值的数值2初始化这些表的序列。这可确保不会尝试在这些表中重用唯一ID值。（ <a href="topology-data-model-overview.html#GUID-86DFC29E-32D2-4F6C-9A17-6493B5946A99" title="要使用空间和图形拓扑功能，必须首先将数据插入特殊的边，节点和面图表，这些表由创建拓扑时由空间和图形创建。">拓扑数据模型表</a>中描述了节点，边和面）。
                     </p>
                     <p>此过程在节点，边和面表中的几何或MBR几何列上创建空间索引。如果在批量加载操作之前删除了索引，则在批量加载后运行此过程将重新创建这些索引。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AFBA8147-9A4F-4B0F-9617-7D435A5D37A1__GUID-8D13804C-489B-4ACA-B3D4-E324FB65F5CE">例子</p>
                     <p>以下示例初始化名为<code class="codeph">CITY_DATA</code>的拓扑的元数据。 （该示例涉及<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.INITIALIZE_METADATA（'CITY_DATA'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL833"></a><div class="props_rev_3"><a id="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB" name="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB"></a><h3 id="TOPOL-GUID-F49486FC-1125-4C51-8F23-4E8332C935AB" class="sect3"><span class="enumeration_section">3.9</span> SDO_TOPO.PREPARE_FOR_EXPORT</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB__GUID-A0211390-49EF-4886-A694-EE729BB05A9D">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.PREPARE_FOR_EXPORT（拓扑IN VARCHAR2）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB__GUID-BC384C15-D1A3-4F56-A2DB-A912A3451036">描述</p>
                     <p>准备要导出到另一个数据库的拓扑。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB__GUID-64A7DDE2-E0A5-4A86-BAD3-774308378B9D">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB__GUID-F63BB309-B3AF-41C3-A816-8BC3E8746FE0"><!-- --></a>拓扑</dt>
                        <dd>
                           <p>要为导出准备的拓扑的名称。必须使用<a href="SDO_TOPO-reference.html#GUID-FCF18F45-89D5-4394-9339-323DBA235147">SDO_TOPO.CREATE_TOPOLOGY</a>过程创建拓扑。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB__GUID-5FEFB157-DA65-4836-848C-FF00970E14EE">使用说明</p>
                     <p>此过程准备要导出到另一个数据库（目标数据库）的当前数据库（源数据库）中的指定拓扑。</p>
                     <p>此过程在当前模式中创建一个表，其表格格式为&lt;topology-name&gt; _EXP $。此表包含与USER_SDO_TOPO_INFO和ALL_SDO_TOPO_INFO视图相同的列。<a href="topology-data-model-overview.html#GUID-56497D68-DA87-4F71-BDB0-44856FF1EF67__BABFBAFF" title="xxx_SDO_TOPO_INFO视图中的列">表1-8</a>中的<a href="topology-data-model-overview.html#GUID-56497D68-DA87-4F71-BDB0-44856FF1EF67">xxx_SDO_TOPO_INFO视图</a>中描述了这些列。
                     </p>
                     <p>在调用此过程之前，请以拓扑的所有者身份连接到数据库。</p>
                     <p>有关导出和导入拓扑的信息（包括要遵循的步骤），请参阅<a href="topology-data-model-overview.html#GUID-2D284F68-529F-4772-9C96-2E2FCC72AA70" title="您可以从一个数据库导出拓扑，并将其导入到另一个数据库中具有相同名称，结构和数据的新拓扑中，只要目标数据库尚未包含与导出的拓扑同名的拓扑。">导出和导入拓扑数据</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F49486FC-1125-4C51-8F23-4E8332C935AB__GUID-5E5271BD-CFE6-4E87-8385-A14264B20F8F">例子</p>
                     <p>以下示例准备名为<code class="codeph">CITY_DATA</code>的拓扑以导出到目标数据库。（该示例引用了<a href="topology-data-model-overview.html#GUID-5CE0150C-4468-4AC9-9D80-78A17679C285">拓扑数据构建的拓扑中的</a>定义和数据。）
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_TOPO.PREPARE_FOR_EXPORT（'CITY_DATA'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TOPOL834"></a><div class="props_rev_3"><a id="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7" name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7"></a><h3 id="TOPOL-GUID-2131609B-F033-4712-9EA5-FC04B466DEF7" class="sect3"><span class="enumeration_section">3.10</span> SDO_TOPO.RELATE</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-B935359A-A876-406F-9C3D-93094E5877B2">格式</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.RELATE（geom1 IN SDO_TOPO_GEOMETRY，geom2 IN SDO_TOPO_GEOMETRY，掩码IN VARCHAR2）RETURN VARCHAR2;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.RELATE（feature1 IN SDO_TOPO_GEOMETRY，feature2 IN SDO_GEOMETRY，mask IN VARCHAR2）RETURN VARCHAR2;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_TOPO.RELATE（geom IN SDO_TOPO_GEOMETRY，topo_elem_array IN SDO_TOPO_OBJECT_ARRAY，掩码IN VARCHAR2）RETURN VARCHAR2;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-7ED920F1-00A9-40BE-991A-E49BBB4438CD">描述</p>
                     <p>检查两个拓扑几何对象，拓扑几何和空间几何，或拓扑几何和拓扑对象数组（SDO_TOPO_OBJECT_ARRAY对象），以确定它们的空间关系。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-6A7B99E5-45BC-4C61-A523-E505BE1F7902">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-20DB5EC4-5D7E-41D9-A2E0-25FE33A3811D"><!-- --></a> geom1</dt>
                        <dd>
                           <p>拓扑几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-5B20FA2C-440D-45C9-91F9-0C2F0C61A349"><!-- --></a> geom2</dt>
                        <dd>
                           <p>拓扑几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-E4761D8F-AB27-4FD0-92E8-8BC212C6D447"><!-- --></a> feature1</dt>
                        <dd>
                           <p>拓扑几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-AF4CCD45-D50D-4491-B4A1-31081EADB8CD"><!-- --></a> feature2</dt>
                        <dd>
                           <p>空间几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-7C215825-C76E-4ED8-8EEE-2491892DC93F"><!-- --></a> geom</dt>
                        <dd>
                           <p>拓扑几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-93D6AF94-B9E8-40EB-B179-6571B45E265C"><!-- --></a> topo_elem_array</dt>
                        <dd>
                           <p>拓扑对象数组（类型为SDO_TOPO_OBJECT_ARRAY，在<a href="topology-data-model-overview.html#GUID-361B6FCB-898A-49EB-B7E6-A688D32AA514">“插入操作的构造函数：指定拓扑元素”中描述</a> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-844EC6AA-932D-4EA8-858F-3D32FA2E10A0"><!-- --></a>面具</dt>
                        <dd>
                           <p>指定要检查的一个或多个关系。请参阅“使用说明”中的关键字列表。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-5B9B7096-816D-40E2-9C3C-1953137F612E">使用说明</p>
                     <p>如果要检查大量对象，拓扑运算符（在<a href="topology-data-model-overview.html#GUID-D658E5C8-7D9A-409F-90F2-E7A67C209C0C">拓扑运算</a>符中描述）提供比SDO_TOPO.RELATE函数更好的性能;但是，如果只检查两个对象或一个小数字，SDO_TOPO.RELATE函数可以提供更好的性能。此外，有时您可能需要使用SDO_TOPO.RELATE函数而不是拓扑运算符。例如，您不能使用拓扑运算符指定DETERMINE掩码关键字。
                     </p>
                     <p>可以在<code class="codeph">mask</code>参数中指定以下关键字以确定两个对象之间的空间关系：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>ANYINTERACT：如果对象不是不相交的，则返回TRUE。</p>
                        </li>
                        <li>
                           <p>CONTAINS：如果第二个对象完全在第一个对象内并且对象边界不接触，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>COVEREDBY：如果第一个对象完全在第二个对象内并且对象边界在一个或多个点处触摸，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>COVERS：如果第二个对象完全在第一个对象内并且边界在一个或多个地方触摸，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>DETERMINE：返回与几何最匹配的一个关系关键字。</p>
                        </li>
                        <li>
                           <p>DISJOINT：如果对象没有公共边界或内部点，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>EQUAL：如果对象共享其边界和内部的每个点（包括对象中的任何孔），则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>INSIDE：如果第一个对象完全在第二个对象内并且对象边界不接触，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>ON：如果一条线（第一个对象）的边界和内部完全位于多边形（第二个对象）的边界上，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>OVERLAPBDYDISJOINT：如果对象重叠，则返回TRUE，但它们的边界不相互作用;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>OVERLAPBDYINTERSECT：如果对象重叠，则返回TRUE，并且它们的边界在一个或多个位置相交;否则，返回FALSE。</p>
                        </li>
                        <li>
                           <p>TOUCH：如果两个对象共享一个公共边界点但没有内部点，则返回TRUE;否则，返回FALSE。</p>
                        </li>
                     </ul>
                     <p>可以使用逻辑布尔运算符OR组合<code class="codeph">mask</code>值（DETERMINE除外）。例如，'INSIDE + TOUCH'返回字符串TRUE或FALSE，具体取决于测试结果。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2131609B-F033-4712-9EA5-FC04B466DEF7__GUID-56B5D80A-F119-4C87-B2C2-CCF37ADA5085">例子</p>
                     <p>以下示例查找CITY_STREETS表中的每个拓扑几何对象与<code class="codeph">P3</code>地块（即哪些街道与该地块交互）之间是否存在ANYINTERACT关系。（该示例引用<a href="topology-data-model-overview.html#GUID-637E97AE-C81B-444E-9683-89A143F803F3" title="本主题介绍了执行拓扑数据模型操作的简化PL / SQL示例。">拓扑示例（PL / SQL）中的</a>定义和数据。输出重新格式化以便于阅读。）
                     </p><pre class="oac_no_warn" dir="ltr">SELECT c.feature_name，SDO_TOPO.RELATE（c.feature，l.feature，'anyinteract'）Any_Interaction FROM city_streets c，land_parcels l WHERE l.feature_name ='P3'; FEATURE_NAME ANY_INTERACTION ------------ --------------- R1 TRUE R2 FALSE R3 FALSE R4 FALSE</pre><p>以下示例查找CITY_STREETS表中的每个拓扑几何对象与恰好与名为P3的地块特征相同的SDO_TOPO_OBJECT_ARRAY对象之间是否存在ANYINTERACT关系。（此示例使用<a href="topology-data-model-overview.html#GUID-637E97AE-C81B-444E-9683-89A143F803F3" title="本主题介绍了执行拓扑数据模型操作的简化PL / SQL示例。">拓扑示例（PL / SQL）中的</a>定义和数据。）输出与前面的示例中的输出相同，并且为了可读性而重新格式化。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT c.feature_name，SDO_TOPO.RELATE（c.feature，SDO_TOPO_OBJECT_ARRAY（SDO_TOPO_OBJECT（5,3），SDO_TOPO_OBJECT（8,3）），'anyinteract'）Any_Interaction FROM city_streets c，land_parcels l WHERE l.feature_name ='P3'; FEATURE_NAME ANY_INTERACTION ------------ --------------- R1 TRUE R2 FALSE R3 FALSE R4 FALSE</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_TOPO-reference.html#GUID-6DEA5715-0B61-4C9C-BA3B-E258F7EB8E04" title="MDSYS.SDO_TOPO包中包含子程序（函数和过程），这些子程序构成了空间和图形拓扑数据模型功能的PL / SQL应用程序编程接口（API）的一部分。该软件包主要包含用于创建和管理拓扑的子程序。">SDO_TOPO包子程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="00566.jms-point-to-point.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle Java消息服务点对点</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="jms-basic-operation.html" title="Previous" type="text/html"></link>
      <link rel="next" href="jms-publish-subscribe.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jms-basic-operation.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="jms-publish-subscribe.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Java消息服务点对点</li>
            </ol>
            <a id="GUID-B9B45B9C-86F2-4FCD-8EFE-B24D21451693" name="GUID-B9B45B9C-86F2-4FCD-8EFE-B24D21451693"></a><a id="ADQUE1300"></a>
            
            <h2 id="ADQUE-GUID-B9B45B9C-86F2-4FCD-8EFE-B24D21451693" class="sect2"><span class="enumeration_chapter">13</span> Oracle Java消息服务点对点</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题描述了特定于点对点操作的Oracle数据库高级队列（AQ） <a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS）操作界面的组件。<a href="jms-shared-interfaces.html#GUID-B53CE112-EBD2-48FD-BC3B-1090F5E29BD0">Oracle Java消息服务共享接口</a>中描述了由点对点和发布/订阅<a href="jms-shared-interfaces.html#GUID-B53CE112-EBD2-48FD-BC3B-1090F5E29BD0">共享的组件</a> 。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-259F7C12-A393-454D-A2A8-52B28B10B7CC">使用用户名/密码创建连接</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-A0281EBD-B453-42F6-9C8D-1D7C425276CD">使用默认ConnectionFactory参数创建连接</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-FFD4E5B3-9CB8-4A22-BD06-5CC961762459">使用用户名/密码创建QueueConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B">使用Open JDBC Connection创建QueueConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-48A8F5A3-6BE7-47A5-AAE8-23458E4BA332">使用默认ConnectionFactory参数创建QueueConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3">使用Open OracleOCIConnectionPool创建QueueConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-B555FE46-E029-4961-8AEE-DA8C3415C192">创建会话</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-D96EEBAA-53C9-49E4-93AF-8A9F75C86919">创建QueueSession</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-33102292-AAF5-40DC-AEF3-2F65CFF5947F">创建QueueSender</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B">使用具有默认发送选项的QueueSender发送消息</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA">通过指定发送选项使用QueueSender发送消息</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA">为标准JMS类型消息创建QueueBrowser</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1">为标准JMS类型消息创建QueueBrowser_锁定消息</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9">为Oracle对象类型消息创建QueueBrowser</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9">为Oracle对象类型Messages_锁定消息创建QueueBrowser</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-30DF26F0-8284-4291-9662-1B11968E15AA">为标准JMS类型消息创建QueueReceiver</a></p>
                  </li>
                  <li>
                     <p><a href="jms-point-to-point.html#GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1">为Oracle对象类型消息创建QueueReceiver</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3006"></a><div class="props_rev_3"><a id="GUID-259F7C12-A393-454D-A2A8-52B28B10B7CC" name="GUID-259F7C12-A393-454D-A2A8-52B28B10B7CC"></a><h3 id="ADQUE-GUID-259F7C12-A393-454D-A2A8-52B28B10B7CC" class="sect3"><span class="enumeration_section">13.1</span>使用用户名/密码创建连接</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。连接createConnection（java.lang。字符串用户名，java.lang。字符串密码）抛出JMSException</pre><p>此方法使用指定的用户名和密码创建支持点对点和发布/订阅操作的连接。此方法是新方法，支持JMS 1.1版规范。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-259F7C12-A393-454D-A2A8-52B28B10B7CC__GUID-E1279112-1B51-47CB-A4B6-7543F6CCB6E6">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e206">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e209">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e214" headers="d85658e206 ">
                                    <p><code class="codeph">用户名</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e214 d85658e209 ">
                                    <p>连接到数据库以进行排队的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e222" headers="d85658e206 ">
                                    <p><code class="codeph">密码</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e222 d85658e209 ">
                                    <p>用于创建与服务器的连接的密码</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3007"></a><div class="props_rev_3"><a id="GUID-A0281EBD-B453-42F6-9C8D-1D7C425276CD" name="GUID-A0281EBD-B453-42F6-9C8D-1D7C425276CD"></a><h3 id="ADQUE-GUID-A0281EBD-B453-42F6-9C8D-1D7C425276CD" class="sect3"><span class="enumeration_section">13.2</span>使用默认ConnectionFactory参数创建连接</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。连接createConnection（）抛出JMSException</pre><p>此方法使用默认的<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">ConnectionFactory</span></a>参数创建支持点对点和发布/订阅操作的<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">连接</span></a> 。此方法是新方法，支持JMS 1.1版规范。如果<code class="codeph">ConnectionFactory</code>属性不包含默认用户名和密码，则会抛出JMSException。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3009"></a><a id="ADQUE3008"></a><div class="props_rev_3"><a id="GUID-FFD4E5B3-9CB8-4A22-BD06-5CC961762459" name="GUID-FFD4E5B3-9CB8-4A22-BD06-5CC961762459"></a><h3 id="ADQUE-GUID-FFD4E5B3-9CB8-4A22-BD06-5CC961762459" class="sect3"><span class="enumeration_section">13.3</span>使用用户名/密码创建QueueConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueConnection createQueueConnection（java.lang。字符串用户名，java.lang。字符串密码）抛出JMSException</pre><p>此方法使用指定的用户名和密码创建<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a>连接。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-FFD4E5B3-9CB8-4A22-BD06-5CC961762459__GUID-DFC0C21C-0FCC-4134-8CA4-2282931C7EAD">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e368">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e371">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e376" headers="d85658e368 ">
                                    <p><code class="codeph">用户名</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e376 d85658e371 ">
                                    <p>连接到数据库以进行排队的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e384" headers="d85658e368 ">
                                    <p><code class="codeph">密码</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e384 d85658e371 ">
                                    <p>用于创建与服务器的连接的密码</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FFD4E5B3-9CB8-4A22-BD06-5CC961762459__GUID-B394BDC8-2A48-49B9-BEB4-03179EB63ABD">
                     <p class="titleinexample">示例13-1使用用户名/密码创建QueueConnection</p><pre class="oac_no_warn" dir="ltr">QueueConnectionFactory qc_fact = AQjmsFactory.getQueueConnectionFactory（“sun123”，“oratest”，5521，“thin”）; QueueConnection qc_conn = qc_fact.createQueueConnection（“jmsuser”，“jmsuser”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3011"></a><a id="ADQUE3012"></a><a id="ADQUE3010"></a><div class="props_rev_3"><a id="GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B" name="GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B"></a><h3 id="ADQUE-GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B" class="sect3"><span class="enumeration_section">13.4</span>使用Open JDBC连接创建QueueConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。QueueConnection createQueueConnection（java.sql。连接jdbc_connection）抛出JMSException</pre><p>此方法使用打开的JDBC连接创建队列连接。它是静态的，具有以下参数：</p>
                     <div class="tblformal" id="GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B__GUID-9B7D30E8-CF9F-499A-A2F8-A4BC0582C886">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e464">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e467">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e472" headers="d85658e464 ">
                                    <p><code class="codeph">jdbc_connection</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e472 d85658e467 ">
                                    <p>与数据库的有效打开连接</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果用户想要使用现有JDBC连接（例如，从连接池）进行JMS操作，则可以使用<a href="jms-point-to-point.html#GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B__CHDCJCDF">示例13-2中</a>的方法。在这种情况下，JMS不会打开新连接，而是使用提供的JDBC连接来创建JMS <code class="codeph">QueueConnection</code>对象。
                     </p>
                     <p>从数据库内的Java存储过程使用JMS时， <a href="jms-point-to-point.html#GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B__CHDCHGJJ">示例13-3</a>中的方法是创建JMS <code class="codeph">QueueConnection</code>的唯一方法（JDBC Server驱动程序）</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B__CHDCJCDF">
                     <p class="titleinexample">示例13-2使用Open JDBC连接创建QueueConnection</p><pre class="oac_no_warn" dir="ltr">连接db_conn; / *以前打开的JDBC连接* / QueueConnection qc_conn = AQjmsQueueConnectionFactory.createQueueConnection（db_conn）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1EEA21E3-3107-4C0F-A574-C161383DC54B__CHDCHGJJ">
                     <p class="titleinexample">示例13-3从Java内部数据库过程创建QueueConnection</p><pre class="oac_no_warn" dir="ltr">OracleDriver ora = new OracleDriver（）; QueueConnection qc_conn = AQjmsQueueConnectionFactory.createQueueConnection（ora.defaultConnection（））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3013"></a><div class="props_rev_3"><a id="GUID-48A8F5A3-6BE7-47A5-AAE8-23458E4BA332" name="GUID-48A8F5A3-6BE7-47A5-AAE8-23458E4BA332"></a><h3 id="ADQUE-GUID-48A8F5A3-6BE7-47A5-AAE8-23458E4BA332" class="sect3"><span class="enumeration_section">13.5</span>使用默认ConnectionFactory参数创建QueueConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueConnection createQueueConnection（）抛出JMSException</pre><p>此方法使用默认的<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">ConnectionFactory</span></a>参数创建队列连接。如果队列连接工厂属性不包含默认用户名和密码，则会抛出JMSException。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3015"></a><a id="ADQUE3014"></a><div class="props_rev_3"><a id="GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3" name="GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3"></a><h3 id="ADQUE-GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3" class="sect3"><span class="enumeration_section">13.6</span>使用Open OracleOCIConnectionPool创建QueueConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。QueueConnection createQueueConnection（oracle.jdbc.pool。OracleOCIConnectionPool cpool）抛出JMSException</pre><p>此方法使用打开的<code class="codeph">OracleOCIConnectionPool</code>创建队列连接。它是静态的，具有以下参数：</p>
                     <div class="tblformal" id="GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3__GUID-FF42E8FD-24FA-4F02-A635-8F35219EB082">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e636">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e639">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e644" headers="d85658e636 ">
                                    <p><code class="codeph">CPOOL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e644 d85658e639 ">
                                    <p>有效打开数据库的OCI连接池</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果用户想要使用现有的<code class="codeph">OracleOCIConnectionPool</code>实例进行JMS操作，则可以使用<a href="jms-point-to-point.html#GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3__CHDDFEHD">示例13-4中</a>的方法。在这种情况下，JMS不会打开新的<code class="codeph">OracleOCIConnectionPool</code>实例，而是使用提供的<code class="codeph">OracleOCIConnectionPool</code>实例来创建JMS QueueConnection对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F28796A2-F7DD-4D1A-95B0-E1B6B8E1F6D3__CHDDFEHD">
                     <p class="titleinexample">示例13-4使用Open OracleOCIConnectionPool创建QueueConnection</p><pre class="oac_no_warn" dir="ltr">OracleOCIConnectionPool cpool; / *以前创建的OracleOCIConnectionPool * / QueueConnection qc_conn = AQjmsQueueConnectionFactory.createQueueConnection（cpool）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3016"></a><div class="props_rev_3"><a id="GUID-B555FE46-E029-4961-8AEE-DA8C3415C192" name="GUID-B555FE46-E029-4961-8AEE-DA8C3415C192"></a><h3 id="ADQUE-GUID-B555FE46-E029-4961-8AEE-DA8C3415C192" class="sect3"><span class="enumeration_section">13.7</span>创建会话</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。Session createSession（boolean transacted，int ack_mode）抛出JMSException</pre><p>此方法创建一个<code class="codeph">Session</code> ，它支持点对点和发布/订阅操作。此方法是新方法，支持JMS 1.1版规范。支持交易和<a href="glossary.html#GUID-D93C8E9C-D211-4780-B671-CBA864C62E5A"><span class="xrefglossterm">非</span></a>交易会话。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-B555FE46-E029-4961-8AEE-DA8C3415C192__GUID-84079F6B-18C0-49B0-95B9-4AFFDFC1B402">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e746">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e749">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e754" headers="d85658e746 ">
                                    <p><code class="codeph">交易</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e754 d85658e749 ">
                                    <p>如果设置为true，则会话是<a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">事务性的</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e765" headers="d85658e746 ">
                                    <p><code class="codeph">ack_mode</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e765 d85658e749 ">
                                    <p>指示消费者或客户端是否会确认收到的任何消息。如果会话是事务性的，则忽略它。法律价值观是<code class="codeph">Session.AUTO_ACKNOWLEDGE</code> ， <code class="codeph">Session.CLIENT_ACKNOWLEDGE</code>和<code class="codeph">Session.DUPS_OK_ACKNOWLEDGE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3018"></a><a id="ADQUE3017"></a><div class="props_rev_3"><a id="GUID-D96EEBAA-53C9-49E4-93AF-8A9F75C86919" name="GUID-D96EEBAA-53C9-49E4-93AF-8A9F75C86919"></a><h3 id="ADQUE-GUID-D96EEBAA-53C9-49E4-93AF-8A9F75C86919" class="sect3"><span class="enumeration_section">13.8</span>创建QueueSession</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueSession createQueueSession（boolean transacted，int ack_mode）抛出JMSException</pre><p>此方法创建<code class="codeph">QueueSession</code> 。支持交易和非交易会话。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-D96EEBAA-53C9-49E4-93AF-8A9F75C86919__GUID-7A0A4285-27BC-45BD-973A-649C137C7087">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e851">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e854">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e859" headers="d85658e851 ">
                                    <p><code class="codeph">交易</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e859 d85658e854 ">
                                    <p>如果设置为true，则会话是<a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">事务性的</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e870" headers="d85658e851 ">
                                    <p><code class="codeph">ack_mode</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e870 d85658e854 ">
                                    <p>指示消费者或客户端是否会确认收到的任何消息。如果会话是事务性的，则忽略它。法律价值观是<code class="codeph">Session.AUTO_ACKNOWLEDGE</code> ， <code class="codeph">Session.CLIENT_ACKNOWLEDGE</code>和<code class="codeph">Session.DUPS_OK_ACKNOWLEDGE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D96EEBAA-53C9-49E4-93AF-8A9F75C86919__GUID-FAEF0774-EB72-4D47-A649-42BE07B8AFD8">
                     <p class="titleinexample">示例13-5创建Transactional QueueSession</p><pre class="oac_no_warn" dir="ltr">QueueConnection qc_conn; QueueSession q_sess = qc_conn.createQueueSession（true，0）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3019"></a><div class="props_rev_3"><a id="GUID-33102292-AAF5-40DC-AEF3-2F65CFF5947F" name="GUID-33102292-AAF5-40DC-AEF3-2F65CFF5947F"></a><h3 id="ADQUE-GUID-33102292-AAF5-40DC-AEF3-2F65CFF5947F" class="sect3"><span class="enumeration_section">13.9</span>创建QueueSender</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueSender createSender（javax.jms。队列队列）抛出JMSException</pre><p>此方法创建<code class="codeph">QueueSender</code> 。如果创建的发件人没有默认队列，则必须在每个<a href="glossary.html#GUID-23702F6A-28F1-42D5-BBF6-CCFAACD2B784"><span class="xrefglossterm">发送</span></a>操作上指定目标队列。它有以下参数：</p>
                     <div class="tblformal" id="GUID-33102292-AAF5-40DC-AEF3-2F65CFF5947F__GUID-E54F7FAD-5450-491C-838D-04D2D3EC59AB">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e965">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e968">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e973" headers="d85658e965 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e973 d85658e968 ">
                                    <p>目标队列的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3021"></a><a id="ADQUE3022"></a><a id="ADQUE3020"></a><div class="props_rev_3"><a id="GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B" name="GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B"></a><h3 id="ADQUE-GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B" class="sect3"><span class="enumeration_section">13.10</span>使用具有默认发送选项的QueueSender发送消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void send（javax.jms。队列队列，javax.jms。消息消息）抛出JMSException</pre><p>此方法使用具有默认发送选项的<code class="codeph">QueueSender</code>发送<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a> 。此操作使用消息<code class="codeph">priority</code> （ <code class="codeph">1</code> ）和<code class="codeph">timeToLive</code> （ <code class="codeph">infinite</code> ）的默认值。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B__GUID-BEA6A8E4-151B-439F-83D3-FA99696B53C5">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1072">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1075">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1080" headers="d85658e1072 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1080 d85658e1075 ">
                                    <p>队列发送此消息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1088" headers="d85658e1072 ">
                                    <p><code class="codeph">信息</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1088 d85658e1075 ">
                                    <p>要发送的消息</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果已使用默认队列创建<code class="codeph">QueueSender</code> ，则可能不一定在<code class="codeph">send()</code>调用中提供队列参数。如果在<code class="codeph">send()</code>操作中指定了队列，则此值将覆盖<code class="codeph">QueueSender</code>的默认队列。
                     </p>
                     <p>如果在没有默认队列的情况下创建了<code class="codeph">QueueSender</code> ，则必须在每次<code class="codeph">send()</code>调用中指定queue参数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B__GUID-D979E279-A2E7-439E-998C-10B7192D1C4F">
                     <p class="titleinexample">示例13-6创建发送消息到任何队列的发件人</p><pre class="oac_no_warn" dir="ltr">/ *创建发件人以将消息发送到任何队列* / QueueSession jms_sess; QueueSender sender1; TextMessage消息; sender1 = jms_sess.createSender（null）; sender1.send（queue，message）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9F0F0893-2FDA-4582-AACF-A4CB47D9491B__GUID-22F5F95F-5274-404A-8D11-32E283EDE8C1">
                     <p class="titleinexample">示例13-7创建发送者以将消息发送到特定队列</p><pre class="oac_no_warn" dir="ltr">/ *创建发送者以将消息发送到特定队列* / QueueSession jms_sess; QueueSender sender2;队列billed_orders_que; TextMessage消息; sender2 = jms_sess.createSender（billed_orders_que）; sender2.send（队列，消息）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3024"></a><a id="ADQUE3025"></a><a id="ADQUE3023"></a><div class="props_rev_3"><a id="GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA" name="GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA"></a><h3 id="ADQUE-GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA" class="sect3"><span class="enumeration_section">13.11</span>通过指定发送选项使用QueueSender发送消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void send（javax.jms。队列队列，javax.jms。消息消息，int deliveryMode，int priority，long timeToLive）抛出JMSException</pre><p>此方法通过指定发送选项使用<code class="codeph">QueueSender</code>发送消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA__GUID-FCEA11A8-2598-40DE-A30F-C1A87C4D633B">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1202">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1205">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1210" headers="d85658e1202 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1210 d85658e1205 ">
                                    <p>队列发送此消息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1218" headers="d85658e1202 ">
                                    <p><code class="codeph">信息</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1218 d85658e1205 ">
                                    <p>要发送的消息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1226" headers="d85658e1202 ">
                                    <p><code class="codeph">deliveryMode</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1226 d85658e1205 ">
                                    <p>交货方式使用</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1234" headers="d85658e1202 ">
                                    <p><code class="codeph">优先</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1234 d85658e1205 ">
                                    <p>此消息的优先级</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1242" headers="d85658e1202 ">
                                    <p><code class="codeph">传输TimeToLive</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1242 d85658e1205 ">
                                    <p>消息生存期（以毫秒为单位）（零为无限制）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果已使用默认队列创建<code class="codeph">QueueSender</code> ，则可能不一定在<code class="codeph">send()</code>调用中提供队列参数。如果在<code class="codeph">send()</code>操作中指定了队列，则此值将覆盖<code class="codeph">QueueSender</code>的默认队列。
                     </p>
                     <p>如果在没有默认队列的情况下创建了<code class="codeph">QueueSender</code> ，则必须在每次<code class="codeph">send()</code>调用中指定queue参数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA__GUID-3AEB0289-0C5E-4E98-A959-961BA0296F97">
                     <p class="titleinexample">示例13-8通过指定发送选项使用QueueSender发送消息1</p><pre class="oac_no_warn" dir="ltr">/ *创建发送者以将消息发送到任何队列* / / *发送消息到new_orders_que，优先级为2，timetoLive为100000毫秒* / QueueSession jms_sess; QueueSender sender1; TextMessage mesg;队列new_orders_que sender1 = jms_sess.createSender（null）; sender1.send（new_orders_que，mesg，DeliveryMode。PERSISTENT，2,100000）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5CB52FD8-6CAD-4D31-8919-E79AD46DC2AA__GUID-E63CADAC-B128-42E0-B24A-AF1CAEDC6466">
                     <p class="titleinexample">示例13-9通过指定发送选项使用QueueSender发送消息2</p><pre class="oac_no_warn" dir="ltr">/ *创建发送方以将消息发送到特定队列* / / *发送优先级为1且timetoLive为400000毫秒的消息* / QueueSession jms_sess; QueueSender sender2;队列billed_orders_que; TextMessage mesg; sender2 = jms_sess.createSender（billed_orders_que）; sender2.send（mesg，DeliveryMode。PERSISTENT，1,400000）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3027"></a><a id="ADQUE3028"></a><a id="ADQUE3026"></a><div class="props_rev_3"><a id="GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA" name="GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA"></a><h3 id="ADQUE-GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA" class="sect3"><span class="enumeration_section">13.12</span>为标准JMS类型消息创建QueueBrowser</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueBrowser createBrowser（javax.jms。队列队列，java.lang。String messageSelector）抛出JMSException</pre><p>此方法为具有文本，流，对象，字节或MapMessage消息主体的队列创建<code class="codeph">QueueBrowser</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA__GUID-062B77D2-6528-44A6-8602-A50A018E669B">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1361">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1364">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1369" headers="d85658e1361 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1369 d85658e1364 ">
                                    <p>队列访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1377" headers="d85658e1361 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1377 d85658e1364 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>使用<code class="codeph">java.util.方法<code class="codeph">java.util.Enumeration</code>以查看消息列表。
                     </p>
                     <div class="infoboxnotealso" id="GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA__GUID-D0A9F9F4-CBD1-4D4A-A666-59EB02188400">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA__GUID-AB2DA02B-CBD5-44DC-B9BA-B26C459982F3">
                     <p class="titleinexample">示例13-10在没有选择器的情况下创建QueueBrowser</p><pre class="oac_no_warn" dir="ltr">/ *创建一个没有选择器的浏览器* / QueueSession jms_session; QueueBrowser浏览器;队列队列; browser = jms_session.createBrowser（queue）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-00F1339A-7FE9-4046-A5F4-0B1B898BB5CA__GUID-0D2568B7-BFBF-4B14-B9A1-135BCA13D28A">
                     <p class="titleinexample">示例13-11使用指定的选择器创建QueueBrowser</p><pre class="oac_no_warn" dir="ltr">/ *为具有指定选择器的队列创建浏览器* / QueueSession jms_session; QueueBrowser浏览器;队列队列; / *创建一个浏览器来查看具有correlationID = RUSH * / browser = jms_session.createBrowser（queue，“JMSCorrelationID ='RUSH'”）的消息;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3030"></a><a id="ADQUE3031"></a><a id="ADQUE3029"></a><div class="props_rev_3"><a id="GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1" name="GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1"></a><h3 id="ADQUE-GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1" class="sect3"><span class="enumeration_section">13.13</span>为标准JMS类型消息创建QueueBrowser，锁定消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueBrowser createBrowser（javax.jms。队列队列，java.lang。String messageSelector，boolean locked）抛出JMSException</pre><p>此方法使用TextMessage，StreamMessage，ObjectMessage，BytesMessage或MapMessage消息正文为队列创建<code class="codeph">QueueBrowser</code> ，在浏览时锁定消息。在浏览会话结束事务之前，其他使用者无法删除锁定的消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1__GUID-33F620F3-DB9E-415E-8830-402934A35222">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1486">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1489">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1494" headers="d85658e1486 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1494 d85658e1489 ">
                                    <p>队列访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1502" headers="d85658e1486 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1502 d85658e1489 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1513" headers="d85658e1486 ">
                                    <p><code class="codeph">锁定</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1513 d85658e1489 ">
                                    <p>如果设置为true，则消息在浏览时被锁定（类似于SELECT for UPDATE）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1__GUID-9BE6F0F4-1B49-497E-BABD-45D4D29BA74C">
                     <p class="titleinexample">示例13-12在没有选择器的情况下创建QueueBrowser，锁定消息</p><pre class="oac_no_warn" dir="ltr">/ *创建一个没有选择器的浏览器* / QueueSession jms_session; QueueBrowser浏览器;队列队列; browser = jms_session.createBrowser（queue，null，true）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-ACC96569-4677-4056-A1D9-4F0A45A5ABE1__GUID-F0C3075D-54FA-4008-BA85-D7B7E944B077">
                     <p class="titleinexample">示例13-13使用指定的选择器创建QueueBrowser，锁定消息</p><pre class="oac_no_warn" dir="ltr">/ *为具有指定选择器的队列创建浏览器* / QueueSession jms_session; QueueBrowser浏览器;队列队列; / *创建一个浏览器，以锁定模式查看具有correlationID = RUSH的消息* / browser = jms_session.createBrowser（queue，“JMSCorrelationID ='RUSH'”，true）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3033"></a><a id="ADQUE3032"></a><div class="props_rev_3"><a id="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9" name="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9"></a><h3 id="ADQUE-GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9" class="sect3"><span class="enumeration_section">13.14</span>为Oracle对象类型消息创建QueueBrowser</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueBrowser createBrowser（javax.jms。队列队列，java.lang。String messageSelector，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法为Oracle <a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型</span></a>消息的队列创建<code class="codeph">QueueBrowser</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9__GUID-9D5F8B62-E9CC-462E-B82B-DB0F4B6FCBF6">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1612">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1615">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1620" headers="d85658e1612 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1620 d85658e1615 ">
                                    <p>队列访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1628" headers="d85658e1612 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1628 d85658e1615 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1639" headers="d85658e1612 ">
                                    <p>payload_factory</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1639 d85658e1615 ">
                                    <p>用于映射到Oracle ADT的java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>可以使用<code class="codeph">getFactory</code>静态方法获取映射到SQL对象有效内容的特定java类的<code class="codeph">CustomDatumFactory</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9__GUID-6227EF79-D175-4CFA-BFBC-82FA98A027E4">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                        </p>
                     </div>
                     <p>假设队列<code class="codeph">test_queue</code>具有<code class="codeph">SCOTT.EMPLOYEE</code>类型的有效负载，并且Jpublisher为此Oracle对象类型生成的java类称为Employee。Employee类实现<code class="codeph">CustomDatum</code>接口。可以使用<code class="codeph">Employee.getFactory()</code>方法获取此类的<code class="codeph">CustomDatumFactory</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9__GUID-DD3835EB-8564-44E5-A86D-36FDB46E3F76">
                        <p class="notep1">注意：</p>
                        <p>分片队列不支持对象类型消息</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9__GUID-EAA7E16F-405D-4598-B7F0-76E18671DECD">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-430F8F54-AB2C-4A71-A4E6-B9BB3119F8E9__GUID-A6248E0E-E528-49F0-8B2C-D094964FA627">
                     <p class="titleinexample">示例13-14为ADTMessages创建QueueBrowser</p><pre class="oac_no_warn" dir="ltr">/ *使用类型为EMPLOYEE * / QueueSession jms_session QueueBrowser浏览器的AdtMessage消息为Queue创建浏览器;队列test_queue; browser =（（AQjmsSession）jms_session）.createBrowser（test_queue，“corrid ='EXPRESS'”，Employee.getFactory（））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3035"></a><a id="ADQUE3034"></a><div class="props_rev_3"><a id="GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9" name="GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9"></a><h3 id="ADQUE-GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9" class="sect3"><span class="enumeration_section">13.15</span>为Oracle对象类型消息创建QueueBrowser，锁定消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueBrowser createBrowser（javax.jms。队列队列，java.lang。String messageSelector，java.lang。Object payload_factory，boolean locked）抛出JMSException</pre><p>此方法为Oracle对象类型消息的队列创建<code class="codeph">QueueBrowser</code> ，在浏览时锁定消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9__GUID-37358DBA-102C-468E-A919-00CD73E707AA">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1757">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1760">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1765" headers="d85658e1757 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1765 d85658e1760 ">
                                    <p>队列访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1773" headers="d85658e1757 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1773 d85658e1760 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1784" headers="d85658e1757 ">
                                    <p>payload_factory</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1784 d85658e1760 ">
                                    <p>用于映射到Oracle ADT的java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1796" headers="d85658e1757 ">
                                    <p><code class="codeph">锁定</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1796 d85658e1760 ">
                                    <p>如果设置为true，则消息在浏览时被锁定（类似于SELECT for UPDATE）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9__GUID-4302C9C7-6953-447D-A938-1078E1325C83">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9__GUID-85CB580A-9432-4816-B271-FB309A9AEDE2">
                        <p class="notep1">注意：</p>
                        <p>分片队列不支持对象类型消息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-37DC1888-39BD-463C-A503-BFE66AFE98B9__GUID-63E484AB-3C5A-48A0-AC0F-ADB56A22AC92">
                     <p class="titleinexample">示例13-15为AdtMessages创建QueueBrowser，锁定消息</p><pre class="oac_no_warn" dir="ltr">/ *在锁定模式下使用类型为EMPLOYEE *的AdtMessage消息为Queue创建一个浏览器/ QueueSession jms_session QueueBrowser browser;队列test_queue; browser =（（AQjmsSession）jms_session）.createBrowser（test_queue，null，Employee.getFactory（），true）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3037"></a><a id="ADQUE3038"></a><a id="ADQUE3036"></a><div class="props_rev_3"><a id="GUID-30DF26F0-8284-4291-9662-1B11968E15AA" name="GUID-30DF26F0-8284-4291-9662-1B11968E15AA"></a><h3 id="ADQUE-GUID-30DF26F0-8284-4291-9662-1B11968E15AA" class="sect3"><span class="enumeration_section">13.16</span>为标准JMS类型消息创建QueueReceiver</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueReceiver createReceiver（javax.jms。队列队列，java.lang。String messageSelector）抛出JMSException</pre><p>此方法为标准JMS类型消息的队列创建<code class="codeph">QueueReceiver</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-30DF26F0-8284-4291-9662-1B11968E15AA__GUID-6641BC94-7668-42A4-B323-C97F63D9467C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e1898">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e1901">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1906" headers="d85658e1898 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1906 d85658e1901 ">
                                    <p>队列访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e1914" headers="d85658e1898 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e1914 d85658e1901 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-30DF26F0-8284-4291-9662-1B11968E15AA__GUID-2834BFB3-74B9-439A-B0AF-1D9CB87C791D">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-30DF26F0-8284-4291-9662-1B11968E15AA__GUID-5F9C5056-1532-44AE-B760-482FA953D457">
                     <p class="titleinexample">示例13-16在没有选择器的情况下创建QueueReceiver</p><pre class="oac_no_warn" dir="ltr">/ *创建一个没有选择器的接收器* / QueueSession jms_session QueueReceiver接收器;队列队列; receiver = jms_session.createReceiver（queue）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-30DF26F0-8284-4291-9662-1B11968E15AA__GUID-6A56A071-1686-4A72-897D-F76D7430B1A7">
                     <p class="titleinexample">示例13-17使用指定的选择器创建QueueReceiver</p><pre class="oac_no_warn" dir="ltr">/ *为具有指定选择器的队列创建接收器* / QueueSession jms_session; QueueReceiver接收器;队列队列; / *创建Receiver以接收具有以EXP * / browser = jms_session.createReceiver（queue，“JMSCorrelationID LIKE'EXP％'”）开头的correlationID的消息;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3040"></a><a id="ADQUE3039"></a><div class="props_rev_3"><a id="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1" name="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1"></a><h3 id="ADQUE-GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1" class="sect3"><span class="enumeration_section">13.17</span>为Oracle对象类型消息创建QueueReceiver</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。QueueReceiver createReceiver（javax.jms。队列队列，java.lang。String messageSelector，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法为Oracle对象类型消息的队列创建<code class="codeph">QueueReceiver</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1__GUID-B2EBD4EA-EFCD-4C42-8FD4-88CFA757D851">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d85658e2017">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d85658e2020">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e2025" headers="d85658e2017 ">
                                    <p><code class="codeph">队列</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e2025 d85658e2020 ">
                                    <p>队列访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e2033" headers="d85658e2017 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e2033 d85658e2020 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d85658e2044" headers="d85658e2017 ">
                                    <p>payload_factory</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d85658e2044 d85658e2020 ">
                                    <p>用于映射到Oracle ADT的java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>可以使用<code class="codeph">getFactory</code>静态方法获取映射到SQL对象类型有效内容的特定Java类的<code class="codeph">CustomDatumFactory</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1__GUID-671EB893-CD4E-4A0F-8875-33130FFA5687">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                        </p>
                     </div>
                     <p>假设队列<code class="codeph">test_queue</code>具有<code class="codeph">SCOTT.EMPLOYEE</code>类型的有效负载，并且Jpublisher为此Oracle对象类型生成的java类称为Employee。Employee类实现<code class="codeph">CustomDatum</code>接口。可以使用Employee.getFactory（）方法获取此类的<code class="codeph">ORADataFactory</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1__GUID-BC2EC1B6-976A-4F7A-93C4-C2E61921AE7A">
                        <p class="notep1">注意：</p>
                        <p>分片队列不支持对象类型消息</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1__GUID-290D7279-638C-4836-8ACC-30589DC29610">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F0E83FE0-F4E0-4871-A9AF-6C9D2479B5C1__GUID-2E809BD2-CC37-46D5-9459-3156515FC566">
                     <p class="titleinexample">示例13-18为AdtMessage消息创建QueueReceiver</p><pre class="oac_no_warn" dir="ltr">/ *使用EMPLOYEE * / QueueSession jms_session QueueReceiver接收器类型的AdtMessage消息为队列创建接收器;队列test_queue; browser =（（AQjmsSession）jms_session）.createReceiver（test_queue，“JMSCorrelationID ='MANAGER'，Employee.getFactory（））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04743.cartridge-services-parameter-manager-interface.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists and describes cartridge services parameter manager interface functions."></meta>
      <meta name="description" content="Lists and describes cartridge services parameter manager interface functions."></meta>
      <title>墨盒服务 - 参数管理器界面</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists and describes cartridge services parameter manager interface functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="cartridge-services-maintaining-context.html" title="Previous" type="text/html"></link>
      <link rel="next" href="cartridge-services-file-io-interface.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cartridge-services-maintaining-context.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="cartridge-services-file-io-interface.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oci-cartridge-functions.html" property="item" typeof="WebPage"><span property="name">OCI墨盒功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">墨盒服务 - 参数管理器界面</li>
            </ol>
            <a id="GUID-D181F020-3E65-4ED3-B948-C1B2B61BBC77" name="GUID-D181F020-3E65-4ED3-B948-C1B2B61BBC77"></a><a id="LNOCI17552"></a><a id="LNOCI194"></a>
            
            <h2 id="LNOCI-GUID-D181F020-3E65-4ED3-B948-C1B2B61BBC77" class="sect2"><span class="enumeration_section">29.5</span>盒式磁带服务 - 参数管理器接口</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出并描述了盒式服务参数管理器接口函数。</p>
               <div class="section">
                  <p><a href="cartridge-services-parameter-manager-interface.html#GUID-D181F020-3E65-4ED3-B948-C1B2B61BBC77__CIHJDJBE" title="该表有2列。第1列是函数名称，第2列描述其用途。">表29-4</a>列出了本节中介绍的参数管理器接口函数。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-D181F020-3E65-4ED3-B948-C1B2B61BBC77__CIHJDJBE">
                  <p class="titleintable">表29-4参数管理器接口函数</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="参数管理器接口函数" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="61%" id="d287048e201">功能</th>
                           <th align="left" valign="bottom" width="39%" id="d287048e204">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e209" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26" title="处理给定文件中的键及其值。">OCIExtractFromFile（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e209 d287048e204 ">
                              <p>处理给定文件中的键及其值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e221" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2" title="生成参数列表中由index表示的参数的值列表。">OCIExtractFromList（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e221 d287048e204 ">
                              <p>为参数列表中的<code class="codeph">index</code>表示的参数生成值列表</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e236" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56" title="处理给定字符串中的键及其值。">OCIExtractFromStr（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e236 d287048e204 ">
                              <p>处理给定字符串中的键及其值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e248" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A" title="初始化参数管理器。">OCIExtractInit（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e248 d287048e204 ">
                              <p>初始化参数管理器</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e260" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083" title="释放当前用于参数存储，键定义存储和参数值列表的内存，并重新初始化结构。">OCIExtractReset（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e260 d287048e204 ">
                              <p>重新初始化记忆</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e272" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584" title="使用参数管理器注册有关键的信息。">OCIExtractSetKey（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e272 d287048e204 ">
                              <p>使用参数管理器注册有关密钥的信息</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e284" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286" title="通知参数管理器要注册的密钥数。">OCIExtractSetNumKeys（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e284 d287048e204 ">
                              <p>通知参数管理器要注册的密钥数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e296" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-74ED029F-C330-433C-89AE-000E293DCB19" title="释放所有动态分配的存储。">OCIExtractTerm（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e296 d287048e204 ">
                              <p>释放所有动态分配的存储</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e308" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-0AE3107F-8193-4514-BC71-4235DC7B9867" title="获取指定键的布尔值。">OCIExtractToBool（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e308 d287048e204 ">
                              <p>获取指定键的布尔值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e320" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC" title="获取指定键的整数值。">OCIExtractToInt（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e320 d287048e204 ">
                              <p>获取指定键的整数值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e332" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81" title="从存储在内存中的参数结构生成参数列表。">OCIExtractToList（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e332 d287048e204 ">
                              <p>从存储在内存中的参数结构中生成参数列表</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e345" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-EBD9C859-D842-4949-9919-A6F8D5390880" title="获取指定键的OCINumber值。">OCIExtractToOCINum（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e345 d287048e204 ">
                              <p>获取指定键的数字值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="61%" id="d287048e357" headers="d287048e201 ">
                              <p><a href="cartridge-services-parameter-manager-interface.html#GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72" title="获取指定键的字符串值。">OCIExtractToStr（）</a></p>
                           </td>
                           <td align="left" valign="top" width="39%" headers="d287048e357 d287048e204 ">
                              <p>获取指定键的字符串值</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-D181F020-3E65-4ED3-B948-C1B2B61BBC77__GUID-7D082548-5323-46C9-BD34-0CDDECC40D55">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用这些功能的详细信息，请<a href="../addci/using-cartridge-services.html#ADDCI4668" target="_blank"><span><cite>参见“Oracle数据库数据盒带开发人员指南”</cite></span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div><a id="LNOCI17558"></a><div class="props_rev_3"><a id="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26" name="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26"></a><h3 id="LNOCI-GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26" class="sect3"><span class="enumeration_section">29.5.1</span> OCIExtractFromFile（）</h3>
               <div>
                  <p>处理给定文件中的键及其值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-D236D51E-F145-4644-B381-192179323C95">目的</p>
                     <p>处理给定文件中的键及其值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-6728B657-74DF-4D30-B8C0-1727D403ECF8">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIExtractFromFile（void * hndl，OCIError * err，ub4 flag，OraText * filename）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-B8B3D5AF-34A6-4336-B454-3960104F4AEC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-04CD6F03-A58A-4AB3-9D16-000852C4AB74"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-2DEA0D97-FD87-471B-8EB3-2A8D4D6FABA1"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-B80FDA5F-D8AA-4239-96AA-379383E41F72"><!-- --></a>标志（IN）</dt>
                        <dd>
                           <p>为零或设置以下一个或多个位：</p>
                           <p><code class="codeph">OCI_EXTRACT_CASE_SENSITIVE</code></p>
                           <p><code class="codeph">OCI_EXTRACT_UNIQUE_ABBREVS</code></p>
                           <p><code class="codeph">OCI_EXTRACT_APPEND_VALUES</code></p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-C4035E46-8180-4E37-9124-4AD072F9CAA3"><!-- --></a>文件名（IN）</dt>
                        <dd>
                           <p><code class="codeph">NULL</code> -terminated文件名字符串。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-2E0F70DC-301D-4AC0-B28D-E0290CB8FE88">评论</p>
                     <p>在调用此例程之前，必须调用<code class="codeph">OCIExtractSetNumKeys()</code>和<code class="codeph">OCIExtractSetKey()</code>函数来定义所有键。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26__GUID-3A2133CE-DD93-4299-A5D0-A7C875D1A273">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286" title="通知参数管理器要注册的密钥数。">OCIExtractSetNumKeys（）</a></li>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584" title="使用参数管理器注册有关键的信息。">OCIExtractSetKey（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17565"></a><div class="props_rev_3"><a id="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2" name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2"></a><h3 id="LNOCI-GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2" class="sect3"><span class="enumeration_section">29.5.2</span> OCIExtractFromList（）</h3>
               <div>
                  <p>生成参数列表中由index表示的参数的值列表。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-5AF2A2E9-9F94-4E49-8F5D-05FAF268D62E">目的</p>
                     <p>生成参数列表中由index表示的参数的值列表。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-CD306DFB-E937-4C2E-9D52-C553EEFCB563">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractFromList（void * hndl，OCIError * err，uword index，OraText ** name，ub1 * type，uword * numvals，void *** values）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-E19CBD72-5B77-4459-A924-4FCA6338D826">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-9D4C08F1-007F-441B-B06F-426377547665"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-7E34CC51-DCDE-438C-B2A7-475CBCF8B15C"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-DF3898A8-53B8-45B4-9B74-34065E7B1261"><!-- --></a>索引（IN）</dt>
                        <dd>
                           <p>从参数列表中检索哪个参数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-40A2DE58-D1F4-42C5-B2E0-7BD8D35A4574"><!-- --></a>名称（OUT）</dt>
                        <dd>
                           <p>当前参数的键名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-B700419F-4127-4C49-ACA4-EA7A310C819B"><!-- --></a>类型（OUT）</dt>
                        <dd>
                           <p>当前参数的类型：</p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_STRING</code></p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_INTEGER</code> 
                           </p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_OCINUM</code> 
                           </p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_BOOLEAN</code></p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-F7428F21-1AFB-4113-984D-5A6E4B421A8F"><!-- --></a>数字（OUT）</dt>
                        <dd>
                           <p>此参数的值数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-6729CBD9-F4BA-42EB-9BC6-F81DFFDDC11F"><!-- --></a>值（OUT）</dt>
                        <dd>
                           <p>此参数的值。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-F2559011-981F-49BE-9C8E-7AE3872A402C">评论</p>
                     <p>必须在调用此例程之前调用<code class="codeph">OCIExtractToList()</code>以从存储在内存中的参数结构生成参数列表。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-689F4C5D-8686-4DF5-B58C-5EAE12ACB9F2__GUID-3A511029-1958-408C-A584-C7B9B1149FC3">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81" title="从存储在内存中的参数结构生成参数列表。">OCIExtractToList（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17559"></a><div class="props_rev_3"><a id="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56" name="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56"></a><h3 id="LNOCI-GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56" class="sect3"><span class="enumeration_section">29.5.3</span> OCIExtractFromStr（）</h3>
               <div>
                  <p>处理给定字符串中的键及其值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-BB25529A-AE3F-4E6A-8759-23E72254FD71">目的</p>
                     <p>处理给定字符串中的键及其值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-316EC300-A9AE-47E7-B5E5-8BD7C3F19D60">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractFromStr（void * hndl，OCIError * err，ub4 flag，OraText * input）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-1290C8DC-CF1F-4FE6-8874-D1EE499C5D6E">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-43669760-4F84-4A3C-B4C7-7B246989E934"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-57CE3640-D9D5-49B4-9127-29733CAE32C7"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。对于诊断信息，请调用<code class="codeph">OCIErrorGet()</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-7D171F2E-4C99-4D5B-9DD9-B22624CE8A7E"><!-- --></a>标志（IN）</dt>
                        <dd>
                           <p>为零或设置以下一个或多个位：</p>
                           <p><code class="codeph">OCI_EXTRACT_CASE_SENSITIVE</code> 
                           </p>
                           <p><code class="codeph">OCI_EXTRACT_UNIQUE_ABBREVS</code> 
                           </p>
                           <p><code class="codeph">OCI_EXTRACT_APPEND_VALUES</code></p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-58F75F2E-9129-4D24-8191-290B0619E7EF"><!-- --></a>输入（IN）</dt>
                        <dd>
                           <p><code class="codeph">NULL</code> -terminated输入字符串。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-825752DE-BBD7-499C-B549-A08D11442856">评论</p>
                     <p>在调用此例程之前，必须调用<code class="codeph">OCIExtractSetNumKeys()</code>和<code class="codeph">OCIExtractSetKey()</code>函数来定义所有键。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56__GUID-BB65A21E-59A3-4940-A46D-6FE74528E97B">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286" title="通知参数管理器要注册的密钥数。">OCIExtractSetNumKeys（）</a></li>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584" title="使用参数管理器注册有关键的信息。">OCIExtractSetKey（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17553"></a><div class="props_rev_3"><a id="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A" name="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A"></a><h3 id="LNOCI-GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A" class="sect3"><span class="enumeration_section">29.5.4</span> OCIExtractInit（）</h3>
               <div>
                  <p>初始化参数管理器。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-7D202929-2F84-4EC6-A323-A712F893C463">目的</p>
                     <p>初始化参数管理器。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-5769C5AC-6CBB-46D0-8EBC-C235732535F5">句法</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">sword OCIExtractInit( void *hndl,</code> <code class="codeph">OCIError *err);</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-5B4048CB-6C79-475C-AE99-39B924F5B60A">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-4DFC734C-7F5F-44CB-BD88-B9798F483635"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-8D8A78C5-3940-424F-86A1-9939DC72E2E3"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-16C2B922-69FB-41BF-8FED-6715ECF991E0">评论</p>
                     <p>必须在调用任何其他参数管理器例程之前调用此函数，并且必须仅调用一次。全球化支持信息存储在参数管理器上下文中，并用于后续对<code class="codeph">OCIExtract</code>函数的调用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DDE39238-5893-4BA5-BCCF-3F08401B092A__GUID-5443557E-8E0D-4451-B53D-6B9CF3D61841">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17555"></a><div class="props_rev_3"><a id="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083" name="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083"></a><h3 id="LNOCI-GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083" class="sect3"><span class="enumeration_section">29.5.5</span> OCIExtractReset（）</h3>
               <div>
                  <p>释放当前用于参数存储，键定义存储和参数值列表的内存，并重新初始化结构。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083__GUID-1AF25571-A96C-47A6-9DFA-1A82BC5B7706">目的</p>
                     <p>释放当前用于参数存储，键定义存储和参数值列表的内存，并重新初始化结构。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083__GUID-C7FEF736-F504-4F48-BEC3-D78CC170A019">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractReset（void * hndl，OCIError * err）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083__GUID-81A3397B-6B9C-49AA-8B93-F3493D0EBF45">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083__GUID-AD4F4F10-365C-443F-81E8-6E8B6C671020"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083__GUID-F6C6F453-5F1B-4666-AEAE-136C3630A2FE"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-380FF56E-D6E9-4417-9F75-3801A8BC7083__GUID-22DB3775-1EC9-4320-A11B-1CEFDA90395D">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> ，</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17557"></a><div class="props_rev_3"><a id="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584" name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584"></a><h3 id="LNOCI-GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584" class="sect3"><span class="enumeration_section">29.5.6</span> OCIExtractSetKey（）</h3>
               <div>
                  <p>使用参数管理器注册有关键的信息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-38D88EEF-B1AF-49E7-A1CC-3C7F88EF692C">目的</p>
                     <p>使用参数管理器注册有关键的信息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-107800A2-C0A0-463C-A8D2-2CF7F6EBB299">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractSetKey（void * hndl，OCIError * err，const text * name，ub1 type，ub4 flag，const void * defval，const sb4 * intrange，const text * strlist）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-E51BC9AC-41B2-4D9A-8AAA-905D18EA8459">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-2560B99F-BD3B-4F79-848F-28C82C80F6D5"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-9F19C390-F598-488D-8E5B-E69823046A7B"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-1234FCC9-07DD-4064-85EE-8D3DAB668EE2"><!-- --></a>名称（IN）</dt>
                        <dd>
                           <p>密钥的名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-49F8EF54-0393-4334-807B-0DBA9BDB6293"><!-- --></a>类型（IN）</dt>
                        <dd>
                           <p>密钥的类型：</p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_INTEGER</code></p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_OCINUM</code> 
                           </p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_STRING</code> 
                           </p>
                           <p><code class="codeph">OCI_EXTRACT_TYPE_BOOLEAN</code></p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-C2D9116A-CDFE-423F-BDC0-E3C6E60F5481"><!-- --></a>标志（IN）</dt>
                        <dd>
                           <p>如果密钥可以采用多个值，则设置为<code class="codeph">OCI_EXTRACT_MULTIPLE</code>否则设置为0。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-03AC17F3-300F-4402-8BC4-D83FB2386CDA"><!-- --></a> defval（IN）</dt>
                        <dd>
                           <p>设置为密钥的默认值。如果没有默认值，它可以为<code class="codeph">NULL</code> 。字符串默认值必须是（text *）类型，整数默认值必须是（sb4 *）类型，布尔值默认值必须是（ub1 *）类型。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-F1FEB7A2-A7C2-48C9-9E98-C3538C325CC1"><!-- --></a> intrange（IN）</dt>
                        <dd>
                           <p>允许的整数值范围的起始值和结束值;如果键不是整数类型或者所有整数值都可接受，则可以为<code class="codeph">NULL</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-60CE08C7-7529-41C7-BEEC-908C43511D08"><!-- --></a> strlist（IN）</dt>
                        <dd>
                           <p>键的所有可接受的文本字符串列表以0（或<code class="codeph">NULL</code> ）结尾。如果键不是字符串类型或者所有文本值都可接受，则可以为<code class="codeph">NULL</code> 。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-CAD0B5D2-B34B-47D9-9F2C-2B8AF2D9C6E8">评论</p>
                     <p>必须在调用<code class="codeph">OCIExtractSetNumKeys()</code>和调用<code class="codeph">OCIExtractFromFile()</code>或<code class="codeph">OCIExtractFromStr()</code>之前调用此例程。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584__GUID-7D0ADC02-CA9E-47B2-9301-2B172EE1401A">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286" title="通知参数管理器要注册的密钥数。">OCIExtractSetNumKeys（）</a></li>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-92A380D5-7DB9-425D-AE6B-7C52F5839C26" title="处理给定文件中的键及其值。">OCIExtractFromFile（）</a></li>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-B40FDD52-9EDC-47B9-B166-01A7527ECB56" title="处理给定字符串中的键及其值。">OCIExtractFromStr（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17556"></a><div class="props_rev_3"><a id="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286" name="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286"></a><h3 id="LNOCI-GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286" class="sect3"><span class="enumeration_section">29.5.7</span> OCIExtractSetNumKeys（）</h3>
               <div>
                  <p>通知参数管理器要注册的密钥数。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-DE187281-29F8-48A6-873F-A51ABDE3F049">目的</p>
                     <p>通知参数管理器要注册的密钥数。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-E674BEE6-F510-4B89-84BC-96E0EE47E10B">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIExtractSetNumKeys（void * hndl，CIError * err，uword numkeys）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-99497730-457A-4CAD-83C8-D8C16B1F4153">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-F47F8268-3C4B-46A0-B0BC-B50DCCD54AC9"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-93FB05E3-9B6F-471D-8F81-F3717CF407C2"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-C2E03D2C-7547-4250-BA35-1642665A4864"><!-- --></a>数字（IN）</dt>
                        <dd>
                           <p>要使用<code class="codeph">OCIExtractSetKey()</code>注册的密钥数。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-588A22BD-A90A-4656-BC00-099D0F7D0D1B">评论</p>
                     <p>必须在第一次调用<code class="codeph">OCIExtractSetKey()</code>之前调用此例程。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8DBC3B12-0E34-4515-8869-2C3D4406A286__GUID-317A3BBC-9D2A-4782-8A46-645AE3E6A0EE">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cartridge-services-parameter-manager-interface.html#GUID-5CBA5C77-7A92-41A9-96E7-24BE4F2DF584" title="使用参数管理器注册有关键的信息。">OCIExtractSetKey（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17554"></a><div class="props_rev_3"><a id="GUID-74ED029F-C330-433C-89AE-000E293DCB19" name="GUID-74ED029F-C330-433C-89AE-000E293DCB19"></a><h3 id="LNOCI-GUID-74ED029F-C330-433C-89AE-000E293DCB19" class="sect3"><span class="enumeration_section">29.5.8</span> OCIExtractTerm（）</h3>
               <div>
                  <p>释放所有动态分配的存储。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-076CF1EC-9C75-4972-9FD5-3552B12138BD">目的</p>
                     <p>释放所有动态分配的存储。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-A5B777D6-6BB2-4DAD-B0B9-E492E1157ED0">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractTerm（void * hndl，OCIError * err）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-C5820CFC-E23B-4539-B78F-80B189B10558">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-D0C76E23-34A7-442C-89F2-D1CA62829222"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-E2DF5EBE-B121-4DF9-B882-37AB67A9B747"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-6B14AAF3-D246-4C2A-8334-DF0CFFD449BC">评论</p>
                     <p>此功能可以执行其他内部簿记功能。必须在不再使用参数管理器时调用它，并且必须只调用一次。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-74ED029F-C330-433C-89AE-000E293DCB19__GUID-29E8E055-4017-415B-B2DF-FC2A5F015E11">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17561"></a><div class="props_rev_3"><a id="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867" name="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867"></a><h3 id="LNOCI-GUID-0AE3107F-8193-4514-BC71-4235DC7B9867" class="sect3"><span class="enumeration_section">29.5.9</span> OCIExtractToBool（）</h3>
               <div>
                  <p>获取指定键的布尔值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-392E9CC0-FC9C-4C02-9C18-E215CBFE2012">目的</p>
                     <p><code class="codeph">valno</code> '的值（从0开始）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-B8C44709-7D27-4606-8289-38204DA8590B">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIExtractToBool（void * hndl，OCIError * err，OraText * keyname，uword valno，ub1 * retval）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-69215006-75EE-4829-9AFD-5CCF5F88820E">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-1F655AEE-7064-42E3-894F-C41FD4A7A0D6"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-F46AFBBA-888D-4DCF-893B-64FE29D3DF36"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-C825E117-417B-4F64-88F3-2F5FB32703C9"><!-- --></a> keyname（IN）</dt>
                        <dd>
                           <p>关键名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-878E8EA8-8A32-4C10-8B65-02805CBCCB82"><!-- --></a> valno（IN）</dt>
                        <dd>
                           <p>获得此密钥的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-75EBEBC6-6961-445B-BF9E-B13F93C12495"><!-- --></a> retval（OUT）</dt>
                        <dd>
                           <p>实际的布尔值。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0AE3107F-8193-4514-BC71-4235DC7B9867__GUID-3805D163-A6AE-49F9-97DC-1787F371338A">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ; <code class="codeph">OCI_NO_DATA</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                     <p><code class="codeph">OCI_NO_DATA</code>表示该密钥没有<code class="codeph">valno</code> '值。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17560"></a><div class="props_rev_3"><a id="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC" name="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC"></a><h3 id="LNOCI-GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC" class="sect3"><span class="enumeration_section">29.5.10</span> OCIExtractToInt（）</h3>
               <div>
                  <p>获取指定键的整数值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-CAC0D4E8-F4AF-49C5-B39A-7833B8ACBD97">目的</p>
                     <p><code class="codeph">valno</code> '的值（从0开始）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-3B78E714-0235-4F77-BACB-609ABAFF0C63">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractToInt（void * hndl，OCIError * err，OraText * keyname，uword valno，sb4 * retval）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-CF60EA86-936A-4A6A-997A-AFA538489F22">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-8C71B7A2-2960-4A41-8263-812C809E91A8"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-522E439D-DC2F-48D0-BECB-D33E40AEC1C4"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-ADA3A894-ABDC-47E0-BEDC-8271C47BB62B"><!-- --></a> keyname（IN）</dt>
                        <dd>
                           <p>Keyname（IN）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-28DB276A-C114-4C95-87E2-96247AF0F1AA"><!-- --></a> valno（IN）</dt>
                        <dd>
                           <p>获得此密钥的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-7BD35EF4-911B-4212-9B85-C18F35A45391"><!-- --></a> retval（OUT）</dt>
                        <dd>
                           <p>实际的整数值。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4628BDB9-F793-4555-BB0E-77F396DF31CC__GUID-26721301-F9FC-48A7-A86B-027E64D6823F">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ; <code class="codeph">OCI_NO_DATA</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                     <p><code class="codeph">OCI_NO_DATA</code>表示该密钥没有<code class="codeph">valno</code> '值。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17564"></a><div class="props_rev_3"><a id="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81" name="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81"></a><h3 id="LNOCI-GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81" class="sect3"><span class="enumeration_section">29.5.11</span> OCIExtractToList（）</h3>
               <div>
                  <p>从存储在内存中的参数结构生成参数列表。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-5220F286-B6E3-4798-9A78-340B313B8B3B">目的</p>
                     <p>必须在调用<code class="codeph">OCIExtractValues()</code>之前调用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-170B45C4-12BA-45A9-9F7B-878089C5D671">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractToList（void * hndl，OCIError * err，uword * numkeys）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-1B602428-342F-464D-8292-A810DA2FA0EB">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-AAF93148-9D7A-40AE-9045-DA0B945B62EC"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-18D4EEC5-8F60-4BA8-B7A4-7727E79D838D"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-023918C8-AE82-4F25-892F-569162E76981"><!-- --></a>数字键（OUT）</dt>
                        <dd>
                           <p>存储在内存中的不同键的数量。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-374ACDA7-EFBB-4851-8B41-0AF0CE163D81__GUID-210B1DB3-9DC2-40BE-87B4-F83285C5F056">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17563"></a><div class="props_rev_3"><a id="GUID-EBD9C859-D842-4949-9919-A6F8D5390880" name="GUID-EBD9C859-D842-4949-9919-A6F8D5390880"></a><h3 id="LNOCI-GUID-EBD9C859-D842-4949-9919-A6F8D5390880" class="sect3"><span class="enumeration_section">29.5.12</span> OCIExtractToOCINum（）</h3>
               <div>
                  <p>获取指定键的OCINumber值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-6C76CA2F-B5AF-4B57-80F0-E8AA6787741B">目的</p>
                     <p><code class="codeph">valno</code> '的值（从0开始）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-E591E512-ECF4-4867-BD60-C6A88DEF0DD5">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIExtractToOCINum（void * hndl，OCIError * err，OraText * keyname，uword valno，OCINumber * retval）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-C3F679DF-CF2D-4CBE-BD88-E709BF5274EC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-A1F89EDD-39DD-495A-9A21-174F6690D308"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-C71FB960-5F5A-4674-8954-D7BF8BA8462A"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-12242B6E-3EB1-43F7-A45B-44FC0B2A3ABF"><!-- --></a>键名（IN）</dt>
                        <dd>
                           <p>关键名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-FDC568C5-2A18-4A84-89F8-43256EED3EB3"><!-- --></a> valno（IN）</dt>
                        <dd>
                           <p>获得此密钥的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-9ADB7828-67F8-4603-83CF-A65384BD72CA"><!-- --></a> retval（OUT）</dt>
                        <dd>
                           <p>实际的OCINumber值。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBD9C859-D842-4949-9919-A6F8D5390880__GUID-88E83CA9-EBB9-4BAA-B9B7-D4CC9828C20F">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ; <code class="codeph">OCI_NO_DATA</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                     <p><code class="codeph">OCI_NO_DATA</code>表示该密钥没有<code class="codeph">valno</code> '值。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17562"></a><div class="props_rev_3"><a id="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72" name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72"></a><h3 id="LNOCI-GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72" class="sect3"><span class="enumeration_section">29.5.13</span> OCIExtractToStr（）</h3>
               <div>
                  <p>获取指定键的字符串值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-F7A3B725-0CF2-40A6-95CB-345D2AB867EA">目的</p>
                     <p><code class="codeph">valno</code> '的值（从0开始）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-4BB298E8-C4AB-4A6F-8916-9DD8C7E43DB2">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIExtractToStr（void * hndl，OCIError * err，OraText * keyname，uword valno，OraText * retval，uword buflen）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-56F29650-ED0C-413B-9310-E20FD08EB391">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-10AFBD8E-CF7C-4DB0-AD40-087C9CDAD940"><!-- --></a> hndl（IN）</dt>
                        <dd>
                           <p>OCI环境或用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-25B46C92-5FFB-4173-94E4-616746DF6F66"><!-- --></a>错误（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误， <code class="codeph">OCI_ERROR</code> <code class="codeph">err</code>记录，此函数返回<code class="codeph">OCI_ERROR</code> 。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-569229A0-C6E1-4687-806F-D3CEA1028C01"><!-- --></a> keyname（IN）</dt>
                        <dd>
                           <p>关键名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-2375CF14-EAB3-489C-96E4-91CCD167AF89"><!-- --></a> valno（IN）</dt>
                        <dd>
                           <p>获得此密钥的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-9843A9D7-9A8E-489B-B7AF-F10314DAE97E"><!-- --></a> retval（OUT）</dt>
                        <dd>
                           <p>实际的<code class="codeph">NULL</code> -terminated字符串值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-3F3F3DFA-6F7E-403E-B3C7-40CAFC7184F3"><!-- --></a> buflen</dt>
                        <dd>
                           <p>用于<code class="codeph">retval</code>的缓冲区的长度。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-81A04F73-53D0-43C3-A63A-B3F943BABE72__GUID-F997E4D0-4044-44B4-84B0-7DB2CFECBB56">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ; <code class="codeph">OCI_NO_DATA</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                     <p><code class="codeph">OCI_NO_DATA</code>表示该密钥没有<code class="codeph">valno</code> '值。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="00505.operations-on-collection-data-types.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>集合数据类型的操作</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="multilevel-collection-types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="partitioning-table-that-contain-oracle-objects.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="multilevel-collection-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="partitioning-table-that-contain-oracle-objects.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="support-for-collection-data-types.html" property="item" typeof="WebPage"><span property="name">支持收集数据类型</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">集合数据类型的操作</li>
            </ol>
            <a id="GUID-0240B84A-0691-49E2-8DBB-BDBF69C9FABA" name="GUID-0240B84A-0691-49E2-8DBB-BDBF69C9FABA"></a><a id="ADOBJ00212"></a>
            
            <h2 id="ADOBJ-GUID-0240B84A-0691-49E2-8DBB-BDBF69C9FABA" class="sect2"><span class="enumeration_section">5.3</span>收集数据类型的操作</h2>
         </header>
         <div class="ind">
            <div>
               <p>集合数据类型的操作包括查询和比较。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="operations-on-collection-data-types.html#GUID-972A2EB4-C1CD-4FCA-8D5E-BCF7AC3ECF94" title="查询SELECT列表中的集合列会将集合的元素嵌套在与集合关联的结果行中。您可以取消收集查询的结果。TABLE表达式可以包含集合的子查询。您可以在CURSOR表达式中使用TABLE表达式。未经许可的查询也可以与多级集合一起使用，包括varrays和嵌套表。">收集查询</a></p>
                  </li>
                  <li>
                     <p><a href="operations-on-collection-data-types.html#GUID-C025E6AE-509C-4A0C-AA14-7AF26E140695">集合上的DML操作</a></p>
                  </li>
                  <li>
                     <p><a href="operations-on-collection-data-types.html#GUID-980EB386-E7B5-49CD-8A54-838405D990C4">使用BULK COLLECT返回整个结果集</a></p>
                  </li>
                  <li>
                     <p><a href="operations-on-collection-data-types.html#GUID-B0C65E4A-9CF0-49BA-AFDD-62B792BCF5E5">比较嵌套表的条件</a></p>
                  </li>
                  <li>
                     <p><a href="operations-on-collection-data-types.html#GUID-8D7F01A5-BF07-4C4A-A4EE-490D899794FC">嵌套表的多集操作</a></p>
                  </li>
               </ul>
            </div><a id="ADOBJ7261"></a><div class="props_rev_3"><a id="GUID-972A2EB4-C1CD-4FCA-8D5E-BCF7AC3ECF94" name="GUID-972A2EB4-C1CD-4FCA-8D5E-BCF7AC3ECF94"></a><h3 id="ADOBJ-GUID-972A2EB4-C1CD-4FCA-8D5E-BCF7AC3ECF94" class="sect3"><span class="enumeration_section">5.3.1</span>收集查询</h3>
               <div>
                  <p>查询包含集合类型作为列或属性的表有两种常规方法。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将集合嵌套在包含它们的结果行中。</p>
                     </li>
                     <li>
                        <p>分配或取消集合，以便每个集合元素单独出现在一行上。</p>
                     </li>
                  </ul>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26" title="查询SELECT列表中的集合列会将集合的元素嵌套在与集合关联的结果行中。">嵌套收集查询的结果</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A" title="您可以取消收集查询的结果。">收集查询的无法解决的结果</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-67C2AA68-EBD2-4BBF-823A-F1D5FE536314" title="TABLE表达式可以包含集合的子查询。">包含表表达式子查询的无法查询</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-01DD8EBB-D4EF-4E68-A3C2-4A7DBB50B004" title="您可以在CURSOR表达式中使用TABLE表达式。">在CURSOR表达式中使用表表达式</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-C5545A83-683A-47FD-80D2-8CD242F69568" title="未经许可的查询也可以与多级集合一起使用，包括varrays和嵌套表。">多级集合的无法查询</a></p>
                     </li>
                  </ul>
               </div><a id="ADOBJ7263"></a><a id="ADOBJ7262"></a><div class="props_rev_3"><a id="GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26" name="GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26"></a><h4 id="ADOBJ-GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26" class="sect4"><span class="enumeration_section">5.3.1.1</span>嵌套查询的结果</h4>
                  <div>
                     <p>查询<code class="codeph">SELECT</code>列表中的集合列会将集合的元素嵌套在与集合关联的结果行中。
                     </p>
                     <div class="section">
                        <p><a href="operations-on-collection-data-types.html#GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26__BHBIIDCC">例5-16中</a>的查询使用<a href="collection-data-types.html#GUID-F23E2476-DCD9-4D23-8C9E-80E77BA53ED7__CHDDFHFB">例5-3</a>中显示的<code class="codeph">department_persons</code>表。
                        </p>
                        <p>列<code class="codeph">dept_emps</code>是<code class="codeph">person_typ</code>类型的嵌套表集合。<code class="codeph">dept_emps</code>集合列显示在<code class="codeph">SELECT</code>列表中，就像普通的标量列一样</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26__BHBIIDCC">
                        <p class="titleinexample">示例5-16收集查询的嵌套结果</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和Ex。5-3 SELECT d.dept_emps FROM department_persons d;</pre><p>这些查询检索此嵌套的员工集合。</p><pre class="pre codeblock"><code>DEPT_EMPS（IDNO，NAME，PHONE）------------------------------------------ ------------------- PEOPLE_TYP（PERSON_TYP（1，'John Smith'，'1-650-555-0135'），PERSON_TYP（2，'Diane Smith'， '1-650-555-0135'））</code></pre><p>如果<code class="codeph">SELECT</code>列表中的对象类型列包含集合属性，则结果也会嵌套，即使该集合未在<code class="codeph">SELECT</code>列表本身中明确列出。例如，查询<code class="codeph">SELECT</code> <code class="codeph">*</code> <code class="codeph">FROM</code> <code class="codeph">department_persons</code>会生成嵌套结果。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7265"></a><a id="ADOBJ7264"></a><div class="props_rev_3"><a id="GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A" name="GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A"></a><h4 id="ADOBJ-GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A" class="sect4"><span class="enumeration_section">5.3.1.2</span>收集查询的未解决结果</h4>
                  <div>
                     <p>您可以取消收集查询的结果。</p>
                     <div class="section">
                        <p>无问题的集合查询结果很有用，因为并非所有工具或应用程序都能以嵌套格式处理结果。要使用需要传统格式的工具查看Oracle集合数据，必须将行的集合属性替换或展平为一个或多个关系行。您可以使用带有集合的<code class="codeph">TABLE</code>表达式来执行此操作。<code class="codeph">TABLE</code>表达式使您能够像表一样在<code class="codeph">FROM</code>子句中查询集合。实际上，您将嵌套表与包含嵌套表的行一起加入。
                        </p>
                        <p><code class="codeph">TABLE</code>表达式可用于查询任何集合值表达式，包括变量和参数等瞬态值。
                        </p>
                        <div class="infoboxnotealso" id="GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A__GUID-2D7AF179-F02F-4616-A30D-3D8DE21A7716">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">TABLE</code>表达式和取消集合的更多信息，请<a href="../sqlrf/SELECT.html#SQLRF30047" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                        <p><a href="operations-on-collection-data-types.html#GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A__BHBFDFDJ">示例5-17中</a>的查询与<a href="operations-on-collection-data-types.html#GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26__BHBIIDCC">示例5-16中</a>的查询一样，检索员工集合，但此处集合已取消。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A__BHBFDFDJ">
                        <p class="titleinexample">例5-17收集查询的未解决结果</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-3 SELECT e。* FROM department_persons d，TABLE（d.dept_emps）e;</pre><p>输出：</p><pre class="pre codeblock"><code>IDNO NAME PHONE ---------- ------------------------------ ------- -------- 1 John Smith 1-650-555-0135 2 Diane Smith 1-650-555-0135</code></pre><p><a href="operations-on-collection-data-types.html#GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A__BHBFDFDJ">例5-17</a>显示<code class="codeph">TABLE</code>表达式可以有自己的表别名。<code class="codeph">TABLE</code>表达式的表别名出现在<code class="codeph">SELECT</code>列表中，用于选择<code class="codeph">TABLE</code>表达式返回的列。
                        </p>
                        <p><code class="codeph">TABLE</code>表达式使用另一个表别名来指定包含<code class="codeph">TABLE</code>表达式引用的集合列的<code class="codeph">TABLE</code> 。表达式<code class="codeph">TABLE(d.dept_emps)</code>将<code class="codeph">department_persons</code>表指定为包含<code class="codeph">dept_emps</code>集合列。要引用表列， <code class="codeph">TABLE</code>表达式可以使用<code class="codeph">FROM</code>子句中左侧出现的任何表的表别名。这称为左相关。
                        </p>
                        <p>在<a href="operations-on-collection-data-types.html#GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A__BHBFDFDJ">示例5-17中</a> ，仅在<code class="codeph">FROM</code>子句中列出了<code class="codeph">department_persons</code>表，以便为要使用的<code class="codeph">TABLE</code>表达式提供表别名。除了<code class="codeph">TABLE</code>表达式引用的列之外， <code class="codeph">department_persons</code>表中的列不会出现在结果中。
                        </p>
                        <p>以下示例仅为具有雇员的部门生成行。</p><pre class="oac_no_warn" dir="ltr">SELECT d.dept_no，e。* FROM department_persons d，TABLE（d.dept_emps）e;</pre><p>要为有或没有员工的部门获取行，可以使用外连接语法：</p><pre class="oac_no_warn" dir="ltr">SELECT d.dept_no，e。* FROM department_persons d，TABLE（d.dept_emps）（+）e;</pre><p>（+）表示<code class="codeph">department_persons</code>和<code class="codeph">e.dept_emps</code>之间的依赖连接应为<code class="codeph">NULL</code> -augmented。也就是说，输出中有一些<code class="codeph">department_persons</code>行， <code class="codeph">e.dept_emps</code>为<code class="codeph">NULL</code>或为空，对应于<code class="codeph">e.dept_emps</code> <code class="codeph">NULL</code>值。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7267"></a><a id="ADOBJ7266"></a><div class="props_rev_3"><a id="GUID-67C2AA68-EBD2-4BBF-823A-F1D5FE536314" name="GUID-67C2AA68-EBD2-4BBF-823A-F1D5FE536314"></a><h4 id="ADOBJ-GUID-67C2AA68-EBD2-4BBF-823A-F1D5FE536314" class="sect4"><span class="enumeration_section">5.3.1.3</span>包含表表达式子查询的内联查询</h4>
                  <div>
                     <p><code class="codeph">TABLE</code>表达式可以包含集合的子查询。
                     </p>
                     <div class="section">
                        <p>这是<span class="q">“ <a href="operations-on-collection-data-types.html#GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A" title="您可以取消收集查询的结果。">Unnesting Results of Collection Queries</a> ”中</span>的示例的替代方法，它显示了包含集合名称的<code class="codeph">TABLE</code>表达式。
                        </p>
                        <p><a href="operations-on-collection-data-types.html#GUID-67C2AA68-EBD2-4BBF-823A-F1D5FE536314__CIHECAFA">例5-18</a>返回部门号为<code class="codeph">101</code>的员工集合。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-67C2AA68-EBD2-4BBF-823A-F1D5FE536314__CIHECAFA">
                        <p class="titleinexample">示例5-18使用包含集合子查询的表表达式</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-3 SELECT * FROM TABLE（SELECT d.dept_emps FROM department_persons d WHERE d.dept_no = 101）;</pre><p><code class="codeph">TABLE</code>表达式中的子查询具有以下限制：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>子查询必须返回集合类型。</p>
                           </li>
                           <li>
                              <p>子查询的<code class="codeph">SELECT</code>列表必须只包含一个项目。
                              </p>
                           </li>
                           <li>
                              <p>子查询必须只返回一个集合;它不能返回多行的集合。例如，仅当table <code class="codeph">department_persons</code>只包含一行时，子查询<code class="codeph">SELECT</code> <code class="codeph">dept_emps</code> <code class="codeph">FROM</code> <code class="codeph">department_persons</code>才会在<code class="codeph">TABLE</code>表达式中成功。如果表包含多行，则子查询会产生错误。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7268"></a><div class="props_rev_3"><a id="GUID-01DD8EBB-D4EF-4E68-A3C2-4A7DBB50B004" name="GUID-01DD8EBB-D4EF-4E68-A3C2-4A7DBB50B004"></a><h4 id="ADOBJ-GUID-01DD8EBB-D4EF-4E68-A3C2-4A7DBB50B004" class="sect4"><span class="enumeration_section">5.3.1.4</span>在CURSOR表达式中使用表表达式</h4>
                  <div>
                     <p>您可以在<code class="codeph">CURSOR</code>表达式中使用<code class="codeph">TABLE</code>表达式。
                     </p>
                     <div class="section">
                        <p><a href="operations-on-collection-data-types.html#GUID-01DD8EBB-D4EF-4E68-A3C2-4A7DBB50B004__CIHJEAJF">例5-19</a>显示了在<code class="codeph">CURSOR</code>表达式中嵌入的<code class="codeph">SELECT</code>的<code class="codeph">FROM</code>子句中使用的<code class="codeph">TABLE</code>表达式。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-01DD8EBB-D4EF-4E68-A3C2-4A7DBB50B004__CIHJEAJF">
                        <p class="titleinexample">例5-19在CURSOR表达式中使用表表达式</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-3 SELECT d.dept_no，CURSOR（SELECT * FROM TABLE（d.dept_emps））FROM department_persons d WHERE d.dept_no = 101;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7270"></a><a id="ADOBJ7269"></a><div class="props_rev_3"><a id="GUID-C5545A83-683A-47FD-80D2-8CD242F69568" name="GUID-C5545A83-683A-47FD-80D2-8CD242F69568"></a><h4 id="ADOBJ-GUID-C5545A83-683A-47FD-80D2-8CD242F69568" class="sect4"><span class="enumeration_section">5.3.1.5</span>与多级集合Unnesting查询</h4>
                  <div>
                     <p>未经许可的查询也可以与多级集合一起使用，包括varrays和嵌套表。</p>
                     <div class="section">
                        <p> <a href="operations-on-collection-data-types.html#GUID-C5545A83-683A-47FD-80D2-8CD242F69568__CIHCEAEG">示例5-20</a>显示了嵌套表的多级嵌套表集合上的取消查询。从表<code class="codeph">region_tab</code> ，每个区域都有一个嵌套的<code class="codeph">countries</code>地区表，每个国家/地区都有一个嵌套的<code class="codeph">locations</code>表，查询将返回所有<code class="codeph">regions</code> ， <code class="codeph">countries</code> <code class="codeph">regions</code>和<code class="codeph">locations</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C5545A83-683A-47FD-80D2-8CD242F69568__CIHCEAEG">
                        <p class="titleinexample">示例5-20使用TABLE函数进行多级集合的无法查询</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-10和5-15 SELECT r.region_name，c.country_name，l.location_id FROM region_tab r，TABLE（r.countries）c，TABLE（c.locations）l; - 优化以下查询以针对位置表运行SELECT l.location_id，l.city FROM region_tab r，TABLE（r.countries）c，TABLE（c.locations）l;</pre><p>输出应如下：</p><pre class="oac_no_warn" dir="ltr">REGION_NAME COUNTRY_NAME LOCATION_ID ------------------------- ---------------------- ------------------ -----------欧洲意大利1000欧洲意大利1100欧洲瑞士2900欧洲瑞士3000欧洲英国2400欧洲英国2500欧洲选择英国2600 7行。
</pre><pre class="oac_no_warn" dir="ltr">LOCATION_ID CITY ----------- ------------------------------ 1000 Roma 1100 Venice 2900 Geneva 3000 Bern 2400 London 2500 Oxford 2600 Stretford 7行入选。
</pre><p>由于第二个<code class="codeph">SELECT</code>列表中<code class="codeph">region_tab</code>显示基表<code class="codeph">region_tab</code>列，因此优化查询以直接针对<code class="codeph">locations</code>存储表运行。
                        </p>
                        <p>外连接语法也可以用于多级集合的查询。</p>
                        <div class="infoboxnotealso" id="GUID-C5545A83-683A-47FD-80D2-8CD242F69568__GUID-5EDE9054-1E1A-4C3E-B77C-4B78226AA3F3">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="design-considerations-for-collections.html#GUID-CD77D40B-CCAC-4F38-9BD9-C904F35618DA" title="您可以根据刚创建的home_phones（）函数查询人员及其家庭电话号码列表。">使用无条件查询以关系形式查看对象数据</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7271"></a><div class="props_rev_3"><a id="GUID-C025E6AE-509C-4A0C-AA14-7AF26E140695" name="GUID-C025E6AE-509C-4A0C-AA14-7AF26E140695"></a><h3 id="ADOBJ-GUID-C025E6AE-509C-4A0C-AA14-7AF26E140695" class="sect3"><span class="enumeration_section">5.3.2</span>集合的DML操作</h3>
               <div>
                  <p>Oracle在集合上支持<span>以下</span> DML操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>插入和更新，为整个集合提供新值</p>
                     </li>
                     <li>
                        <p>嵌套表和多级嵌套表的单独或分段更新，包括插入，删除和更新元素</p>
                     </li>
                  </ul>
                  <p>Oracle不支持<code class="codeph">VARRAY</code>列的分段更新。但是， <code class="codeph">VARRAY</code>列可以插入或更新为原子单元。本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4">对嵌套表执行分段操作</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6">更新嵌套表</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-14C5B6B0-2ED1-46D2-AADF-950D4C80A311">在多级嵌套表上执行分段操作</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-D46B7174-A1DF-4416-A23B-362930467B07">执行分段INSERT到内部嵌套表</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-C6FEAA24-85E5-44B5-B801-BF9D2DA84699">在VARRAY和嵌套表上执行原子更改</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46">将集合更新为原子数据项</a></p>
                     </li>
                  </ul>
               </div><a id="ADOBJ7273"></a><a id="ADOBJ7272"></a><div class="props_rev_3"><a id="GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4" name="GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4"></a><h4 id="ADOBJ-GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4" class="sect4"><span class="enumeration_section">5.3.2.1</span>对嵌套表执行分段操作</h4>
                  <div>
                     <div class="section">
                        <p>对于嵌套表列的分段操作，请使用<code class="codeph">TABLE</code>表达式。
                        </p>
                        <p><code class="codeph">TABLE</code>表达式使用子查询来提取嵌套表，以便<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句应用于嵌套表而不是顶级表。
                        </p>
                        <p><code class="codeph">CAST</code>运营商也很有帮助。使用它们，您可以使用SQL表示法对嵌套表执行集合操作，而无需将嵌套表实际存储在数据库中。
                        </p>
                        <p><a href="operations-on-collection-data-types.html#GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4__CIHJHIGG">例5-21中</a>的DML语句演示了嵌套表列的分段操作。
                        </p>
                        <div class="infoboxnotealso" id="GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4__GUID-71BCD007-9C27-4504-9D1B-21FE27D4CCF2">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p> <a href="../sqlrf/CAST.html#SQLRF00613" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="functions-and-operators-useful-with-objects.html#GUID-6CD85D07-1E06-4E42-A582-68F478040A39">投</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C7FC0A7A-F958-4790-8711-4983350BEDD4__CIHJHIGG">
                        <p class="titleinexample">例5-21集合的分段操作</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-3 INSERT INTO TABLE（SELECT d.dept_emps FROM department_persons d WHERE d.dept_no = 101）VALUES（5，'Kevin Taylor'，'1-408-555-0199'）; UPDATE TABLE（SELECT d.dept_emps FROM department_persons d WHERE d.dept_no = 101）e SET VALUE（e）= person_typ（5，'Kevin Taylor'，'1-408-555-0199'）WHERE e.idno = 5; DELETE FROM TABLE（SELECT d.dept_emps FROM department_persons d WHERE d.dept_no = 101）e WHERE e.idno = 5;</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADOBJ7274"></a><div class="sect4"><a id="GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6" name="GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6"></a><h5 id="ADOBJ-GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6" class="sect5"><span class="enumeration_section">5.3.2.1.1</span>更新嵌套表</h5>
                     <div>
                        <p>您可以使用<code class="codeph">VALUE</code>返回对象实例行以进行更新。
                        </p>
                        <p><a href="operations-on-collection-data-types.html#GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6__CIHJDAFI">示例5-22</a>显示了用于返回对象实例行以进行更新的<code class="codeph">VALUE</code> ：</p>
                        <div class="example" id="GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6__CIHJDAFI">
                           <p class="titleinexample">示例5-22使用VALUE更新嵌套表</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。5-1,5-3 UPDATE TABLE（SELECT d.dept_emps FROM department_persons d WHERE d.dept_no = 101）p SET VALUE（p）= person_typ（2，'Diane Smith'，'1-650-555-0148'）在哪里p.idno = 2;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADOBJ7276"></a><a id="ADOBJ7275"></a><div class="props_rev_3"><a id="GUID-14C5B6B0-2ED1-46D2-AADF-950D4C80A311" name="GUID-14C5B6B0-2ED1-46D2-AADF-950D4C80A311"></a><h4 id="ADOBJ-GUID-14C5B6B0-2ED1-46D2-AADF-950D4C80A311" class="sect4"><span class="enumeration_section">5.3.2.2</span>对多级嵌套表执行分段操作</h4>
                  <div>
                     <div class="section">
                        <p>分段DML仅适用于多级嵌套表，而不适用于多级varrays。</p>
                        <p>您可以在VARRAY和嵌套表多级集合上以原子方式执行DML操作，如<span class="q">“</span>将集合<span class="q"><a href="operations-on-collection-data-types.html#GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46">更新为原子数据项</a> ”中所述</span> 。
                        </p>
                        <p><a href="operations-on-collection-data-types.html#GUID-14C5B6B0-2ED1-46D2-AADF-950D4C80A311__CIHEEEBD">例5-23</a>显示了嵌套表的<code class="codeph">countries</code>嵌套表上的分段插入操作。该示例插入一个新的国家/地区，其中包含自己的<code class="codeph">location_typ</code>嵌套表：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-14C5B6B0-2ED1-46D2-AADF-950D4C80A311__CIHEEEBD">
                        <p class="titleinexample">例5-23多级集合上的分段插入</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-10和5-15 INSERT INTO TABLE（SELECT FROM FROM region_tab r WHERE r.region_id = 2）VALUES（'CA'，'Canada'，nt_location_typ（location_typ（1800，'147 Spadina Ave'，'M5V 2L7'， '安大略省多伦多市'）））;</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADOBJ7277"></a><div class="props_rev_3"><a id="GUID-D46B7174-A1DF-4416-A23B-362930467B07" name="GUID-D46B7174-A1DF-4416-A23B-362930467B07"></a><h5 id="ADOBJ-GUID-D46B7174-A1DF-4416-A23B-362930467B07" class="sect5"><span class="enumeration_section">5.3.2.2.1对内</span>嵌套表执行分段INSERT</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用分段插入到内部嵌套表中以进行单独添加。</p>
                           <p><a href="operations-on-collection-data-types.html#GUID-D46B7174-A1DF-4416-A23B-362930467B07__CIHDABBA">示例5-24</a>执行分段插入内嵌套表以添加国家/地区的位置。与前面的示例类似，此示例使用包含子查询的<code class="codeph">TABLE</code>表达式，该子查询选择内部嵌套表以指定插入的目标。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D46B7174-A1DF-4416-A23B-362930467B07__CIHDABBA">
                           <p class="titleinexample">示例5-24分段插入内嵌套表</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-10和5-15 INSERT INTO TABLE（SELECT c.locations FROM TABLE（SELECT r.countries FROM region_tab r WHERE r.region_id = 2）c WHERE c.country_id ='US'）VALUES（1700，'2004 Lakeview Rd '，'98199'，'西雅图'，'华盛顿'）; SELECT r.region_name，c.country_name，l.location_id FROM region_tab r，TABLE（r.countries）c，TABLE（c.locations）l;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADOBJ7279"></a><a id="ADOBJ7278"></a><div class="sect3"><a id="GUID-C6FEAA24-85E5-44B5-B801-BF9D2DA84699" name="GUID-C6FEAA24-85E5-44B5-B801-BF9D2DA84699"></a><h4 id="ADOBJ-GUID-C6FEAA24-85E5-44B5-B801-BF9D2DA84699" class="sect4"><span class="enumeration_section">5.3.2.3</span>对VARRAY和嵌套表执行原子更改</h4>
                  <div>
                     <p>您可以对嵌套表和<code class="codeph">VARRAY</code>进行原子更改。
                     </p>
                     <p>注意：虽然嵌套表也可以分段方式更改，但varrays不能。</p>
                     <p><a href="operations-on-collection-data-types.html#GUID-C6FEAA24-85E5-44B5-B801-BF9D2DA84699__BEIGEIFE">例5-25</a>显示了如何使用PL / SQL语句操作SQL varray对象类型。在此示例中，varrays在PL / SQL变量和SQL表之间传输。您可以插入包含集合的表行，更新行以替换其集合，并选择集合到PL / SQL变量中。
                     </p>
                     <p>但是，您无法直接使用SQL更新或删除单个varray元素;你必须从表中选择varray，在PL / SQL中更改它，然后更新表以包含新的varray。您也可以使用嵌套表执行此操作，但嵌套表可以选择执行分段更新和删除。</p>
                     <div class="example" id="GUID-C6FEAA24-85E5-44B5-B801-BF9D2DA84699__BEIGEIFE">
                        <p class="titleinexample">示例5-25对Varrays使用INSERT，UPDATE，DELETE和SELECT语句</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE dnames_var是VARCHAR2的VARRAY（7）（30）; / CREATE TABLE depts（区域VARCHAR2（25），dept_names dnames_var）; BEGIN <span class="bold">INSERT</span> INTO支持VALUES（'Europe'，dnames_var（'Shipping'，'Sales'，'Finance'））; <span class="bold">INSERT</span> INTO支持VALUES（'Americas'，dnames_var（'Sales'，'Finance'，'Shipping'））; <span class="bold">INSERT</span> INTO支持VALUES（'Asia'，dnames_var（'Finance'，'Payroll'，'Shipping'，'Sales'））;承诺;结束; / DECLARE new_dnames dnames_var：= dnames_var（'Benefits'，'Advertising'，'Contracting'，'Executive'，'Marketing'）; some_dnames dnames_var; BEGIN <span class="bold">UPDATE</span> depts SET dept_names = new_dnames WHERE region ='Europe';承诺; <span class="bold">SELECT</span> dept_names INTO some_dnames FROM depts WHERE region ='Europe'; FOR I IN some_dnames。FIRST .. some_dnames。LAST LOOP DBMS_OUTPUT.PUT_LINE（'dept_names ='|| some_dnames（i））;结束循环;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7281"></a><a id="ADOBJ7280"></a><div class="props_rev_3"><a id="GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46" name="GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46"></a><h4 id="ADOBJ-GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46" class="sect4"><span class="enumeration_section">5.3.2.4将</span>集合更新为原子数据项</h4>
                  <div>
                     <div class="section">
                        <p>多级集合（ <code class="codeph">VARRAY</code>和嵌套表）也可以使用<code class="codeph">UPDATE</code>语句以原子方式<code class="codeph">UPDATE</code> 。例如，假设<code class="codeph">v_country</code>是一个声明为嵌套表类型为<code class="codeph">nt_country_typ</code>的<code class="codeph">countries</code>的变量。
                        </p>
                        <p><a href="operations-on-collection-data-types.html#GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46__CIHEHGBH">例如5-26</a>更新<code class="codeph">region_tab</code>通过设置<code class="codeph">countries</code>收集为单位的值<code class="codeph">v_country</code> 。
                        </p>
                        <p><span class="q">“ <a href="multilevel-collection-types.html#GUID-FB2298CD-F748-4DF6-96F1-CD09C9349D83" title="通过调用相应类型的构造函数来创建多级集合类型，就像单级集合和其他对象类型一样。">多级集合的构造函数</a> ”一节</span>显示了如何使用<code class="codeph">INSERT</code>语句插入整个多级集合。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9D817AE2-45FE-437D-BE35-CFE01BB0AC46__CIHEHGBH">
                        <p class="titleinexample">示例5-26使用UPDATE插入整个多级集合</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-10和5-15 INSERT INTO region_tab（region_id，region_name）VALUES（2，'Americas'）; DECLARE v_country nt_country_typ; BEGIN v_country：= nt_country_typ（country_typ（'US'，'United States of America'，nt_location_typ（location_typ（1500，'2011 Interiors Blvd'，'99236'，'San Francisco'，'California'），location_typ（1600，' 2007 Zagora St'，'50090'，'South Brunswick'，'New Jersey'））））; <span class="bold">UPDATE</span> region_tab r SET r.countries = v_country WHERE r.region_id = 2;结束; /  - 调用：SELECT r.region_name，c.country_name，l.location_id FROM region_tab r，TABLE（r.countries）c，TABLE（c.locations）l WHERE r.region_id = 2;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7283"></a><a id="ADOBJ7282"></a><div class="props_rev_3"><a id="GUID-980EB386-E7B5-49CD-8A54-838405D990C4" name="GUID-980EB386-E7B5-49CD-8A54-838405D990C4"></a><h3 id="ADOBJ-GUID-980EB386-E7B5-49CD-8A54-838405D990C4" class="sect3"><span class="enumeration_section">5.3.3</span>使用BULK COLLECT返回整个结果集</h3>
               <div>
                  <div class="section">
                     <p>PL / SQL <code class="codeph">BULK</code> <code class="codeph">COLLECT</code>子句是使用DML语句的替代方法，处理起来可能非常耗时。您可以在一个操作中返回整个结果集。
                     </p>
                     <p>在<a href="operations-on-collection-data-types.html#GUID-980EB386-E7B5-49CD-8A54-838405D990C4__BABBJBHD">示例5-27中</a> ， <code class="codeph">BULK</code> <code class="codeph">COLLECT</code>与包含对象类型的多级集合一起使用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-980EB386-E7B5-49CD-8A54-838405D990C4__BABBJBHD">
                     <p class="titleinexample">示例5-27将BULK COLLECT与集合一起使用</p><pre class="oac_no_warn" dir="ltr">- 与本章中的其他示例无关CREATE TYPE dnames_var IS VARRAY（7）OF VARCHAR2（30）; / CREATE TABLE depts（区域VARCHAR2（25），dept_names dnames_var）; BEGIN INSERT INTO支持VALUES（'Europe'，dnames_var（'Shipping'，'Sales'，'Finance'））; INSERT INTO支持VALUES（'Americas'，dnames_var（'Sales'，'Finance'，'Shipping'））; INSERT INTO支持VALUES（'Asia'，dnames_var（'Finance'，'Payroll'，'Shipping'，'Sales'））;承诺;结束; / DECLARE TYPE dnames_tab是dnames_var的表; v_depts dnames_tab; BEGIN SELECT dept_names <span class="bold">BULK COLLECT</span> INTO v_depts FROM depts; DBMS_OUTPUT.PUT_LINE（v_depts。计数）; - 打印3 END; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7284"></a><div class="props_rev_3"><a id="GUID-B0C65E4A-9CF0-49BA-AFDD-62B792BCF5E5" name="GUID-B0C65E4A-9CF0-49BA-AFDD-62B792BCF5E5"></a><h3 id="ADOBJ-GUID-B0C65E4A-9CF0-49BA-AFDD-62B792BCF5E5" class="sect3"><span class="enumeration_section">5.3.4</span>比较嵌套表的条件</h3>
               <div>
                  <p>使用某些条件，您可以比较嵌套表，包括多级嵌套表。没有比较varrays的机制。</p>
                  <p>本节中的SQL示例使用在<a href="collection-data-types.html#GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF__I477859">示例5-5中</a>创建的嵌套表，并包含在<a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462__CHDBCCHJ">示例5-1中</a>创建的对象。
                  </p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-CA49765F-A854-438B-9FE7-FDB88B414F82">比较平等和不平等条件</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-550D7EE4-78CA-4195-987A-96D5FAAB33EB">比较IN条件</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-02FD4549-336D-4B70-8A13-9CF5D0D3B42B">比较Multiset条件的子集</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84">确定嵌套表的成员</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-2BECC439-CE71-473C-9D9B-6AC20EA675E9">确定空条件</a></p>
                     </li>
                     <li>
                        <p><a href="operations-on-collection-data-types.html#GUID-67BEBA3F-7A6E-4389-8258-AA7513F5A97E">确定设定条件</a></p>
                     </li>
                  </ul>
               </div><a id="ADOBJ7286"></a><a id="ADOBJ7285"></a><div class="props_rev_3"><a id="GUID-CA49765F-A854-438B-9FE7-FDB88B414F82" name="GUID-CA49765F-A854-438B-9FE7-FDB88B414F82"></a><h4 id="ADOBJ-GUID-CA49765F-A854-438B-9FE7-FDB88B414F82" class="sect4"><span class="enumeration_section">5.3.4.1</span>比较平等和非平等条件</h4>
                  <div>
                     <div class="section">
                        <p>等于（=）和不等于（&lt;&gt;）条件确定输入嵌套表是否相同，将结果作为布尔值返回。</p>
                        <p>如果两个嵌套表具有相同的命名类型，具有相同的基数，并且它们的元素相等，则它们是相等的。元素是否相等取决于它们是否等于元素自己的相等定义，除了需要map方法的对象类型。平等是在元素的现有顺序中确定的，因为嵌套表是无序的。</p>
                        <p>在<a href="operations-on-collection-data-types.html#GUID-CA49765F-A854-438B-9FE7-FDB88B414F82__CIHFECIH">示例5-28中</a> ，嵌套表包含<code class="codeph">person_typ</code>对象，这些对象具有关联的map方法。见<a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462__CHDBCCHJ">例5-1</a> 。由于<code class="codeph">WHERE</code>子句中的两个嵌套表不相等，因此不会选择任何行。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-CA49765F-A854-438B-9FE7-FDB88B414F82__CIHFECIH">
                        <p class="titleinexample">示例5-28使用与嵌套表的等式比较</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT p.name FROM students，TABLE（physics_majors）p WHERE math_majors = physics_majors;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7288"></a><a id="ADOBJ7287"></a><div class="props_rev_3"><a id="GUID-550D7EE4-78CA-4195-987A-96D5FAAB33EB" name="GUID-550D7EE4-78CA-4195-987A-96D5FAAB33EB"></a><h4 id="ADOBJ-GUID-550D7EE4-78CA-4195-987A-96D5FAAB33EB" class="sect4"><span class="enumeration_section">5.3.4.2</span>比较IN条件</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">IN</code>条件检查嵌套表是否在嵌套表的列表中，并将结果作为布尔值返回。如果嵌套表是空嵌套表，则返回NULL。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-550D7EE4-78CA-4195-987A-96D5FAAB33EB__GUID-FC564F34-3A36-47A5-8026-F924B388E792">
                        <p class="titleinexample">示例5-29使用IN与嵌套表进行比较</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT p.idno，p.name FROM students，TABLE（physics_majors）p WHERE physics_majors IN（math_majors，chem_majors）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7290"></a><a id="ADOBJ7289"></a><div class="props_rev_3"><a id="GUID-02FD4549-336D-4B70-8A13-9CF5D0D3B42B" name="GUID-02FD4549-336D-4B70-8A13-9CF5D0D3B42B"></a><h4 id="ADOBJ-GUID-02FD4549-336D-4B70-8A13-9CF5D0D3B42B" class="sect4"><span class="enumeration_section">5.3.4.3</span>比较Multiset条件的子集</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SUBMULTISET</code> <code class="codeph">[OF]</code>条件检查嵌套表是否是另一个嵌套表的子集，并将结果作为布尔值返回。<code class="codeph">OF</code>关键字是可选的，不会更改<code class="codeph">SUBMULTISET</code>的功能。</p>
                        <p>此条件仅针对嵌套表实现。</p>
                        <div class="infoboxnotealso" id="GUID-02FD4549-336D-4B70-8A13-9CF5D0D3B42B__GUID-843E2B62-FD36-40A4-8ABD-A2213E17FFDB">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="operations-on-collection-data-types.html#GUID-8D7F01A5-BF07-4C4A-A4EE-490D899794FC">嵌套表的多重操作</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-02FD4549-336D-4B70-8A13-9CF5D0D3B42B__GUID-AF7A4C01-7D66-435F-8BF6-D3A116DCB560">
                        <p class="titleinexample">例5-30在嵌套表上测试条件的子模式</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT p.idno，p.name FROM students，TABLE（physics_majors）p WHERE physics_majors subsMULTISET of math_majors;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7292"></a><a id="ADOBJ7293"></a><a id="ADOBJ7291"></a><div class="props_rev_3"><a id="GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84" name="GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84"></a><h4 id="ADOBJ-GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84" class="sect4"><span class="enumeration_section">5.3.4.4</span>确定嵌套表的成员</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">MEMBER</code> <code class="codeph">[OF]</code>或<code class="codeph">NOT</code> <code class="codeph">MEMBER</code> <code class="codeph">[OF]</code>条件测试元素是否是嵌套表的成员，将结果作为布尔值返回。<code class="codeph">OF</code>关键字是可选的，对输出没有影响。
                        </p>
                        <p>在<a href="operations-on-collection-data-types.html#GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84__CIHBFJFF">例5-31中</a> ， <code class="codeph">person_typ</code>是与嵌套表<code class="codeph">math_majors</code>的元素相同类型的元素。
                        </p>
                        <p><a href="operations-on-collection-data-types.html#GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84__CHDDBHGA">例5-32</a>给出了<code class="codeph">MEMBER</code> <code class="codeph">OF</code>条件的另一种方法，它对大型集合的执行效率更高。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84__CIHBFJFF">
                        <p class="titleinexample">例5-31在嵌套表上使用MEMBER OF</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT毕业从学生WHERE person_typ（12，'Bob Jones'，'1-650-555-0130'）数学专业成员;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7B34CDAD-CF7D-4BBF-90DE-338527A18B84__CHDDBHGA">
                        <p class="titleinexample">例5-32在嵌套表上使用MEMBER OF的替代方法</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT毕业从学生WHERE person_typ（12，'Bob Jones'，'1-650-555-0130'）中（从TABLE（math_majors）p中选择值（p））;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7295"></a><a id="ADOBJ7294"></a><div class="props_rev_3"><a id="GUID-2BECC439-CE71-473C-9D9B-6AC20EA675E9" name="GUID-2BECC439-CE71-473C-9D9B-6AC20EA675E9"></a><h4 id="ADOBJ-GUID-2BECC439-CE71-473C-9D9B-6AC20EA675E9" class="sect4"><span class="enumeration_section">5.3.4.5</span>确定空条件</h4>
                  <div>
                     <div class="section">
                        <p>无论任何元素是否为NULL， <code class="codeph">IS</code> <code class="codeph">[NOT]</code> <code class="codeph">EMPTY</code>条件都会检查给定的嵌套表是空还是非空。如果为嵌套表指定了NULL，则结果为NULL。结果作为布尔值返回。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2BECC439-CE71-473C-9D9B-6AC20EA675E9__GUID-4E458735-1081-40BB-9178-E34985CF6577">
                        <p class="titleinexample">例5-33在嵌套表上使用IS NOT</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT p.idno，p.name FROM students，TABLE（physics_majors）p WHERE physics_majors IS NOT EMPTY;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7297"></a><a id="ADOBJ7296"></a><div class="props_rev_3"><a id="GUID-67BEBA3F-7A6E-4389-8258-AA7513F5A97E" name="GUID-67BEBA3F-7A6E-4389-8258-AA7513F5A97E"></a><h4 id="ADOBJ-GUID-67BEBA3F-7A6E-4389-8258-AA7513F5A97E" class="sect4"><span class="enumeration_section">5.3.4.6</span>确定设定条件</h4>
                  <div>
                     <div class="section">
                        <p>的<code class="codeph">IS</code> <code class="codeph">[NOT]</code> <code class="codeph">A</code> <code class="codeph">SET</code>条件检查给定的嵌套表是否是由独特的元件的，返回一个布尔值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-67BEBA3F-7A6E-4389-8258-AA7513F5A97E__GUID-1C3DBAD8-2930-4975-8612-220BF206B4D2">
                        <p class="titleinexample">示例5-34在嵌套表上使用IS A SET</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT p.idno，p.name FROM students，TABLE（physics_majors）p WHERE physics_majors IS A SET;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7298"></a><div class="sect2"><a id="GUID-8D7F01A5-BF07-4C4A-A4EE-490D899794FC" name="GUID-8D7F01A5-BF07-4C4A-A4EE-490D899794FC"></a><h3 id="ADOBJ-GUID-8D7F01A5-BF07-4C4A-A4EE-490D899794FC" class="sect3"><span class="enumeration_section">5.3.5</span>嵌套表的多集操作</h3>
               <div>
                  <p>您可以对嵌套表使用<a href="glossary.html#GUID-9FC615B7-02EA-4FCD-9B90-15530E4F3E21"><span class="xrefglossterm">多集运算符</span></a> 。多重集合操作不适用于varrays。
                  </p>
                  <p>本节中的SQL示例使用<a href="collection-data-types.html#GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF__I477859">示例5-5中</a>创建的嵌套表和<a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462__CHDBCCHJ">示例5-1中</a>创建的对象。
                  </p>
                  <div class="infoboxnotealso" id="GUID-8D7F01A5-BF07-4C4A-A4EE-490D899794FC__GUID-DB462D25-85A5-4515-95F1-DD9A0058D45E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="functions-and-operators-useful-with-objects.html#GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77">对象有用的函数和操作符</a> ”，</span>用于描述其他操作</p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/Operators.html#SQLRF003" target="_blank"><span class="italic">Oracle数据库SQL语言参考。</span></a>有关在嵌套表中使用运算符的更多信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADOBJ7300"></a><a id="ADOBJ7299"></a><div class="props_rev_3"><a id="GUID-C4339B0D-13FE-4052-A7FE-6E2E563DDBFC" name="GUID-C4339B0D-13FE-4052-A7FE-6E2E563DDBFC"></a><h4 id="ADOBJ-GUID-C4339B0D-13FE-4052-A7FE-6E2E563DDBFC" class="sect4"><span class="enumeration_section">5.3.5.1</span> CARDINALITY</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CARDINALITY</code>函数返回嵌套表中的元素数。返回类型为<code class="codeph">NUMBER</code> 。如果嵌套表是空集合，则返回<code class="codeph">NULL</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C4339B0D-13FE-4052-A7FE-6E2E563DDBFC__GUID-25911636-302C-4749-B09A-FE2542EA3143">
                        <p class="titleinexample">例5-35确定嵌套表的CARDINALITY</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT CARDINALITY（math_majors）来自学生;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>有关<code class="codeph">CARDINALITY</code>函数的更多信息，请参见<a href="../sqlrf/CARDINALITY.html#SQLRF06305" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7301"></a><div class="props_rev_3"><a id="GUID-A2786900-25DD-4C35-B5C4-AA322BBB9848" name="GUID-A2786900-25DD-4C35-B5C4-AA322BBB9848"></a><h4 id="ADOBJ-GUID-A2786900-25DD-4C35-B5C4-AA322BBB9848" class="sect4"><span class="enumeration_section">5.3.5.2</span>收集</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">COLLECT</code>函数是一个聚合函数，它从一组元素创建一个多集。该函数将元素类型的列作为输入，并从所选行创建多集。要获取此函数的结果，必须在<code class="codeph">CAST</code>函数中使用它来指定<code class="codeph">COLLECT</code>的输出类型。</p>
                        <div class="infoboxnotealso" id="GUID-A2786900-25DD-4C35-B5C4-AA322BBB9848__GUID-1EB425CE-8DAF-4572-9C9A-BDC30C94FAF5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">COLLECT</code>函数的示例，请参阅<span class="q">“ <a href="functions-and-operators-useful-with-objects.html#GUID-6CD85D07-1E06-4E42-A582-68F478040A39">CAST</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">COLLECT</code>函数的更多信息，请参见<a href="../sqlrf/COLLECT.html#SQLRF06304" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7303"></a><a id="ADOBJ7302"></a><div class="props_rev_3"><a id="GUID-204D944C-1F4A-4065-A1FF-7E8DA21BFFE1" name="GUID-204D944C-1F4A-4065-A1FF-7E8DA21BFFE1"></a><h4 id="ADOBJ-GUID-204D944C-1F4A-4065-A1FF-7E8DA21BFFE1" class="sect4"><span class="enumeration_section">5.3.5.3</span> MULTISET除外</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">MULTISET</code> <code class="codeph">EXCEPT</code>运算符输入两个嵌套表并返回一个嵌套表，其元素位于第一个嵌套表中，但不在第二个嵌套表中。输入嵌套表和输出嵌套表都将具有相同的嵌套表类型。
                        </p>
                        <p><code class="codeph">ALL</code>或<code class="codeph">DISTINCT</code>选项可与操作员一起使用。默认值为<code class="codeph">ALL</code> 。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>随着<code class="codeph">ALL</code>选项， <code class="codeph">ntab1</code> <code class="codeph">MULTISET</code> <code class="codeph">EXCEPT</code> <code class="codeph">ALL</code> <code class="codeph">ntab2</code> ，在所有元素<code class="codeph">ntab1</code>比其他<code class="codeph">ntab2</code>是结果的一部分。如果发生特定元件<span class="italic"><code class="codeph">m</code></span>倍<code class="codeph">ntab1</code>和<span class="italic"><code class="codeph">n</code></span>在倍<code class="codeph">ntab2</code> ，结果显示（ <span class="italic"><code class="codeph">m</code></span> - <span class="italic"><code class="codeph">n</code></span> ）的元件的出现，如果<span class="italic"><code class="codeph">m</code></span>大于<span class="italic"><code class="codeph">n</code></span> ，否则， <code class="codeph">0</code>出现的元件的。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DISTINCT</code>选项，无论出现的次数如何，都会消除<code class="codeph">ntab2</code>存在且<code class="codeph">ntab1</code>中也存在的任何元素。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-204D944C-1F4A-4065-A1FF-7E8DA21BFFE1__GUID-F19B4196-3B58-455C-AF74-DBAC7FC543F6">
                        <p class="titleinexample">示例5-36在嵌套表上使用MULTISET EXCEPT操作</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT math_majors MULTISET EXCEPT physics_majors FROM students WHERE graduation = '01 -JUN-03';</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-204D944C-1F4A-4065-A1FF-7E8DA21BFFE1__GUID-38B25DF7-1C07-45C1-AA8C-30F6FAD95B37">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">MULTISET</code> <code class="codeph">EXCEPT</code>运算符的更多信息，请参见<a href="../sqlrf/Multiset-Operators.html#SQLRF0032" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7305"></a><a id="ADOBJ7304"></a><div class="props_rev_3"><a id="GUID-0D4BE067-0A83-4EE3-9F28-1CF100220CF4" name="GUID-0D4BE067-0A83-4EE3-9F28-1CF100220CF4"></a><h4 id="ADOBJ-GUID-0D4BE067-0A83-4EE3-9F28-1CF100220CF4" class="sect4"><span class="enumeration_section">5.3.5.4</span> MULTISET INTERSECT</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">MULTISET</code> <code class="codeph">INTERSECT</code>运算符返回一个嵌套表，其值对于两个输入嵌套表是通用的。输入嵌套表和输出嵌套表都是等效的类型名称。
                        </p>
                        <p>有两个与运算符关联的选项： <code class="codeph">ALL</code>或<code class="codeph">DISTINCT</code> 。默认值为<code class="codeph">ALL</code> 。与<code class="codeph">ALL</code>选项，如果一个特定的值时，发生<span class="italic"><code class="codeph">m</code></span>在倍<code class="codeph">ntab1</code>和<span class="italic"><code class="codeph">n</code></span>在倍<code class="codeph">ntab2</code> ，结果含有元素<code class="codeph">MIN</code> （ <span class="italic"><code class="codeph">m</code></span> ， <span class="italic"><code class="codeph">n</code></span> ）次。使用<code class="codeph">DISTINCT</code>选项，可以消除结果中的重复项，包括<code class="codeph">NULL</code>值的重复项（如果存在）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0D4BE067-0A83-4EE3-9F28-1CF100220CF4__GUID-DF85B62A-49A9-451B-BC50-22FE52E6FAFC">
                        <p class="titleinexample">示例5-37在嵌套表上使用MULTISET INTERSECT操作</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT math_majors MULTISET INTERSECT physics_majors FROM students WHERE graduation = '01 -JUN-03';</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0D4BE067-0A83-4EE3-9F28-1CF100220CF4__GUID-357D829A-320A-4CD1-9BE4-0C618AB89C53">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">MULTISET</code> <code class="codeph">INTERSECT</code>运算符的更多信息，请参阅<a href="../sqlrf/Multiset-Operators.html#SQLRF0032" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7307"></a><a id="ADOBJ7306"></a><div class="props_rev_3"><a id="GUID-4861552D-787F-457A-BAFF-D44390FB77ED" name="GUID-4861552D-787F-457A-BAFF-D44390FB77ED"></a><h4 id="ADOBJ-GUID-4861552D-787F-457A-BAFF-D44390FB77ED" class="sect4"><span class="enumeration_section">5.3.5.5</span> MULTISET UNION</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">MULTISET</code> <code class="codeph">UNION</code>运算符返回一个嵌套表，其值是两个输入嵌套表的值。输入嵌套表和输出嵌套表都是等效的类型名称。
                        </p>
                        <p>有两个与运算符关联的选项： <code class="codeph">ALL</code>或<code class="codeph">DISTINCT</code> 。默认值为<code class="codeph">ALL</code> 。使用<code class="codeph">ALL</code>选项， <code class="codeph">ntab1</code>和<code class="codeph">ntab2</code>中的所有元素都是结果的一部分，包括<code class="codeph">NULL</code>的所有副本。如果发生特定元件<span class="italic"><code class="codeph">m</code></span>在倍<code class="codeph">ntab1</code>和<span class="italic"><code class="codeph">n</code></span>倍<code class="codeph">ntab2</code> ，结果含有该元素（ <span class="italic"><code class="codeph">m</code></span> + <span class="italic"><code class="codeph">n</code></span> ）次。使用<code class="codeph">DISTINCT</code>选项，可以消除结果中的重复项，包括<code class="codeph">NULL</code>值的重复项（如果存在）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4861552D-787F-457A-BAFF-D44390FB77ED__GUID-9FE3F470-882F-4B77-8F54-BCF2406607A0">
                        <p class="titleinexample">示例5-38在嵌套表上使用MULTISET UNION操作</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT math_majors MULTISET UNION DISTINCT physics_majors FROM students WHERE graduation = '01 -JUN-03';</pre></div>
                     <!-- class="example" -->
                     <div class="section"><pre class="pre codeblock"><code>PEOPLE_TYP（PERSON_TYP（12，'Bob Jones'，'1-650-555-0130'），PERSON_TYP（31，'Sarah Chen'，'1-415-555-0120'），PERSON_TYP（45，'Chris Woods' ，'1-408-555-0128'））</code></pre><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT math_majors MULTISET UNION ALL physics_majors FROM students WHERE graduation = '01 -JUN-03';</pre><p>输出：</p><pre class="pre codeblock"><code>PEOPLE_TYP（PERSON_TYP（12，'Bob Jones'，'1-650-555-0130'），PERSON_TYP（31，'Sarah Chen'，'1-415-555-0120'），PERSON_TYP（45，'Chris Woods' ，'1-408-555-0128'），PERSON_TYP（12，'Bob Jones'，'1-650-555-0130'），PERSON_TYP（45，'Chris Woods'，'1-408-555-0128' ））</code></pre><div class="infoboxnotealso" id="GUID-4861552D-787F-457A-BAFF-D44390FB77ED__GUID-55CF0316-4422-47D1-902B-7A534C204FAF">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">MULTISET</code> <code class="codeph">UNION</code>运算符的更多信息，请参见<a href="../sqlrf/Multiset-Operators.html#SQLRF51170" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7309"></a><a id="ADOBJ7308"></a><div class="props_rev_3"><a id="GUID-4F040601-814A-42B8-82F3-EAB6854246ED" name="GUID-4F040601-814A-42B8-82F3-EAB6854246ED"></a><h4 id="ADOBJ-GUID-4F040601-814A-42B8-82F3-EAB6854246ED" class="sect4"><span class="enumeration_section">5.3.5.6</span> POWERMULTISET</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">POWERMULTISET</code>函数生成来自给定多集的所有非空子<code class="codeph">POWERMULTISET</code> 。<code class="codeph">POWERMULTISET</code>函数的输入可以是任何计算为多集的表达式。multiset参数的基数限制为32。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4F040601-814A-42B8-82F3-EAB6854246ED__GUID-40072ADA-640E-4A76-80AF-5918E797D0D7">
                        <p class="titleinexample">例5-39在Multiset上使用POWERMULTISET操作</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT * FROM TABLE（POWERMULTISET（people_typ（person_typ（12，'Bob Jones'，'1-650-555-0130'），person_typ（31，'Sarah Chen'，'1-415- 555-0120'），person_typ（45，'Chris Woods'，'1-415-555-0124'））））;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-4F040601-814A-42B8-82F3-EAB6854246ED__GUID-8C2B61F3-7EFB-4FBB-A5E8-1036497FF7B2">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">POWERMULTISET</code>函数的更多信息，请参见<a href="../sqlrf/POWERMULTISET.html#SQLRF06306" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7311"></a><a id="ADOBJ7310"></a><div class="props_rev_3"><a id="GUID-E28EB6DB-E989-4EBF-AE47-9BFFF723ED43" name="GUID-E28EB6DB-E989-4EBF-AE47-9BFFF723ED43"></a><h4 id="ADOBJ-GUID-E28EB6DB-E989-4EBF-AE47-9BFFF723ED43" class="sect4"><span class="enumeration_section">5.3.5.7</span> POWERMULTISET_BY_CARDINALITY</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">POWERMULTISET_BY_CARDINALITY</code>函数返回指定基数的嵌套表的所有非空子<code class="codeph">POWERMULTISET_BY_CARDINALITY</code> 。输出是嵌套表的行。
                        </p>
                        <p><code class="codeph">POWERMULTISET_BY_CARDINALITY(x, l)</code>等效于<code class="codeph">TABLE(POWERMULTISET(x))</code> <code class="codeph">p</code> ，其中<code class="codeph">CARDINALITY(value(p))</code> <code class="codeph">=</code> <code class="codeph">l</code> ，其中<span class="italic"><code class="codeph">x</code></span>是多集，l是指定的基数。
                        </p>
                        <p><code class="codeph">POWERMULTISET_BY_CARDINALITY</code>的第一个输入参数可以是任何求值为嵌套表的表达式。length参数必须是正整数，否则返回错误。嵌套表参数的基数限制为32。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E28EB6DB-E989-4EBF-AE47-9BFFF723ED43__GUID-4E0210BD-41FA-423B-BD34-9AAF76086DAB">
                        <p class="titleinexample">例5-40使用POWERMULTISET_BY_CARDINALITY函数</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT * FROM TABLE（POWERMULTISET_BY_CARDINALITY（people_typ（person_typ（12，'Bob Jones'，'1-650-555-0130'），person_typ（31，'Sarah Chen'，'1-415- 555-0120'），person_typ（45，'Chris Woods'，'1-415-555-0124'）），2））;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-E28EB6DB-E989-4EBF-AE47-9BFFF723ED43__GUID-128EA772-8245-448F-979C-E81C5682A319">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">POWERMULTISET_BY_CARDINALITY</code>函数的详细信息，请参阅<a href="../sqlrf/POWERMULTISET_BY_CARDINALITY.html#SQLRF06307" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7313"></a><a id="ADOBJ7312"></a><div class="props_rev_3"><a id="GUID-D7713B2B-333E-448F-804A-95C15999BAF3" name="GUID-D7713B2B-333E-448F-804A-95C15999BAF3"></a><h4 id="ADOBJ-GUID-D7713B2B-333E-448F-804A-95C15999BAF3" class="sect4"><span class="enumeration_section">5.3.5.8</span> SET</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET</code>函数通过消除重复项将嵌套表转换为集合，并返回其元素彼此不同的嵌套表。返回的嵌套表与输入嵌套表具有相同的命名类型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D7713B2B-333E-448F-804A-95C15999BAF3__GUID-65FD4F91-51D7-4139-9885-DA5C7C53B157">
                        <p class="titleinexample">示例5-41在嵌套表上使用SET函数</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 5-1和5-5 SELECT SET（physics_majors）来自学生WHERE毕业= '01 -JUN-03';</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-D7713B2B-333E-448F-804A-95C15999BAF3__GUID-B939EFFD-87B4-4037-8607-44B16078EC04">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">SET</code>函数的更多信息，请参见<a href="../sqlrf/SET.html#SQLRF06308" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04779.multithreaded-extproc-agent.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="What is the multithreaded extproc agent?"></meta>
      <meta name="description" content="What is the multithreaded extproc agent?"></meta>
      <title>多线程extproc代理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="What is the multithreaded extproc agent?"></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="deprecated-oci-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="deprecated-oci-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">多线程extproc代理</li>
            </ol>
            <a id="GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69" name="GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69"></a><a id="LNOCI72987"></a><a id="LNOCI00099"></a>
            
            <h2 id="LNOCI-GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69" class="sect2"><span class="enumeration_chapter">F</span>多线程extproc代理</h2>
         </header>
         <div class="ind">
            <div>
               <p>什么是多线程extproc代理？</p>
               <p>本附录解释了多线程<code class="codeph">extproc</code>代理是什么，它如何有助于分布式数据库系统的整体效率，以及如何管理它。
               </p>
               <div class="section">
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" title="本节介绍多线程extproc代理如何提高外部过程的效率。">为什么使用多线程extproc代理？</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" title="当代理控制实用程序agtctl为SID启动多线程extproc代理时，agtctl会创建监视器线程。如何使用调度程序线程？如何使用任务线程？">多线程extproc代理体系结构</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程extproc代理。">管理多线程extproc代理</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="LNOCI72988"></a><a id="LNOCI945"></a><div class="props_rev_3"><a id="GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" name="GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D"></a><h3 id="LNOCI-GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" class="sect3"><span class="enumeration_section">F.1</span>为什么使用多线程extproc代理？
               </h3>
               <div>
                  <p>本节介绍多线程<code class="codeph">extproc</code>代理如何提高外部过程的效率。
                  </p>
                  <p></p>
                  <div class="section">
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" title="默认情况下，为每个用户会话启动extproc代理，并且extproc代理进程仅在用户会话结束时终止。">专用代理体系结构的挑战</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" title="Oracle数据库共享服务器体系结构假设即使打开了数千个用户会话，在任何给定时间只有一小部分这些连接处于活动状态。">多线程的优势</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNOCI946"></a><div class="props_rev_3"><a id="GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" name="GUID-987D764A-73B0-4E72-A62F-AEF105F947B2"></a><h4 id="LNOCI-GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" class="sect4"><span class="enumeration_section">F.1.1</span>专用代理体系结构的挑战</h4>
                  <div>
                     <p>默认情况下，为每个用户会话启动<code class="codeph">extproc</code>代理，并且<code class="codeph">extproc</code>代理进程仅在用户会话结束时终止。
                     </p>
                     <p>该体系结构可能消耗不必要的大量系统资源。例如，假设有数千个用户会话同时产生<code class="codeph">extproc</code>代理进程。因为一个<code class="codeph">extproc</code>代理过程开始为每个会话，几千<code class="codeph">extproc</code>代理进程同时运行。所述<code class="codeph">extproc</code>不管每个单独的是否代理进程操作<code class="codeph">extproc</code>代理处理是目前活跃。因此， <code class="codeph">extproc</code>代理进程和开放连接可能消耗不成比例的系统资源。当会话连接到Oracle数据库时，通过以共享服务器模式启动服务器来解决此问题。共享服务器模式允许数据库连接由少量服务器进程共享。
                     </p>
                  </div>
               </div><a id="LNOCI947"></a><div class="props_rev_3"><a id="GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" name="GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739"></a><h4 id="LNOCI-GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" class="sect4"><span class="enumeration_section">F.1.2</span>多线程的优势</h4>
                  <div>
                     <p>Oracle数据库共享服务器体系结构假设即使打开了数千个用户会话，在任何给定时间只有一小部分这些连接处于活动状态。</p>
                     <p>在共享服务器模式下，有一个共享服务器进程池。用户会话连接到将请求的任务放入队列的调度程序进程。任务由第一个可用的共享服务器进程选取。共享服务器进程的数量通常少于用户会话数。</p>
                     <p>多线程<code class="codeph">extproc</code>代理提供与外部过程的连接类似的功能。多线程<code class="codeph">extproc</code>代理体系结构使用共享代理线程池。用户会话请求的任务将放入队列中，并由第一个可用的多线程<code class="codeph">extproc</code>代理线程获取。由于在给定时刻只有一小部分用户连接处于活动状态，因此使用多线程<code class="codeph">extproc</code>架构可以更有效地使用系统资源。
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI949"></a><a id="LNOCI948"></a><div class="props_rev_3"><a id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" name="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6"></a><h3 id="LNOCI-GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" class="sect3"><span class="enumeration_section">F.2</span>多线程extproc代理体系结构</h3>
               <div>
                  <p>在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程<code class="codeph">extproc</code>代理。这是使用代理控制实用程序<code class="codeph">agtctl</code> 。此实用程序还用于配置代理程序和关闭代理程序。
                  </p>
                  <p>在系统上运行的每个Oracle Net侦听器都侦听一组SID的传入连接请求。如果传入的Oracle Net连接字符串中的SID是侦听器正在侦听的SID，则该侦听器将处理该连接。此外，如果为SID启动了多线程<code class="codeph">extproc</code>代理，则侦听器将请求传递给该<code class="codeph">extproc</code>代理。
                  </p>
                  <p>在多线程<code class="codeph">extproc</code>代理的体系结构中，每个传入的连接请求都由不同类型的线程处理：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>单个<span class="bold">监视器</span>线程。监视器线程负责：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>保持与听众的沟通</p>
                           </li>
                           <li>
                              <p>监控进程的负载</p>
                           </li>
                           <li>
                              <p>需要时启动和停止线程</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>几个<span class="bold">调度程序</span>线程。调度程序线程负责：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>处理与Oracle数据库的通信</p>
                           </li>
                           <li>
                              <p>将任务请求传递给任务线程</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>几个<span class="bold">任务</span>线程。任务线程处理来自Oracle数据库进程的请求。
                        </p>
                     </li>
                  </ul>
                  <p><a href="multithreaded-extproc-agent.html#GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__CFABDEFF">图F-1</a>说明了多线程<code class="codeph">extproc</code>代理的体系结构。用户会话1和2发出对某些DLL中的函数的调用请求。这些请求通过异构服务提供给多线程<code class="codeph">extproc</code>代理。这些请求由代理的调度程序线程处理，然后将它们传递给任务线程。实际处理请求的任务线程负责加载相应的DLL并调用其中的函数。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>来自用户会话的所有请求都由同一个调度程序线程处理。例如，调度程序1处理与用户会话1的通信，并且调度程序2处理与用户会话2的通信。这是会话生命周期的情况。</p>
                     </li>
                     <li>
                        <p>各个请求可以由不同的任务线程提供服务。例如，任务线程1可以处理来自用户会话1的请求，并且稍后处理来自用户会话2的请求。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-29667D27-03E8-48A6-A431-335D98616321">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../admin/managing-processes.html#ADMIN00501" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> 。有关管理外部程序流程的详细信息</p>
                  </div>
                  <div class="figure" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__CFABDEFF">
                     <p class="titleinfigure">图F-1多线程extproc代理体系结构</p><img src="img/adfns100.gif" alt="下面是图F-1的描述" title="下面是图F-1的描述" longdesc="img_text/adfns100.html"><br><a href="img_text/adfns100.html">“图F-1多线程extproc代理体系结构”的描述</a></div>
                  <!-- class="figure" -->
                  <p>这三种线程类型分别大致对应于Oracle数据库多线程服务器PMON，调度程序和共享服务器进程。</p>
                  <div class="infoboxnote" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-89EBAE1D-2CF0-475F-A765-207162ACEE26">
                     <p class="notep1">注意：</p>
                     <p>来自用户会话的所有请求都通过相同的调度程序线程，但可以由不同的任务线程进行服务。此外，多个任务线程可以使用与外部过程相同的连接。</p>
                  </div>
                  <p>这些主题更详细地解释了每种类型的线程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" title="当代理控制实用程序agtctl为SID启动多线程extproc代理时，agtctl会创建监视器线程。">监控线程</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" title="如何使用调度程序线程？">调度程序线程</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" title="如何使用任务线程？">任务线程</a></p>
                        <div class="infoboxnotealso" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-2672BD6D-72BE-405B-B74B-236A9D0EF4CC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="One multithreaded extproc agent must be started for each system identifier (SID) before attempting to connect to the external procedure.">管理多线程extproc代理</a>以获取有关使用代理控制实用程序<code class="codeph">agtctl</code>启动和停止多线程<code class="codeph">exproc</code> <a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程extproc代理。">代理</a>的更多信息</p>
                        </div>
                     </li>
                  </ul>
               </div><a id="LNOCI950"></a><div class="props_rev_3"><a id="GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" name="GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59"></a><h4 id="LNOCI-GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" class="sect4"><span class="enumeration_section">F.2.1</span>监控线程</h4>
                  <div>
                     <p>当代理控制实用程序<code class="codeph">agtctl</code>为SID启动多线程<code class="codeph">extproc</code>代理时， <code class="codeph">agtctl</code>会创建监视器线程。
                     </p>
                     <p>监视器线程执行以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建调度程序和任务线程。</p>
                        </li>
                        <li>
                           <p>使用处理此<code class="codeph">extproc</code>代理连接的所有侦听器注册调度程序线程。当此SID的调度程序正在运行时，侦听器在获取传入连接时不会启动进程。相反，侦听器提供与此同一个调度程序的连接。
                           </p>
                        </li>
                        <li>
                           <p>监视其他线程并将有关调度程序线程的负载信息发送到处理此<code class="codeph">extproc</code>代理程序连接的所有侦听器进程，从而使侦听器能够为最少负载的调度程序提供传入连接。
                           </p>
                        </li>
                        <li>
                           <p>继续监视它创建的每个线程。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI951"></a><div class="props_rev_3"><a id="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" name="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62"></a><h4 id="LNOCI-GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" class="sect4"><span class="enumeration_section">F.2.2</span>调度程序线程</h4>
                  <div>
                     <p>如何使用调度程序线程？</p>
                     <p>Dispatcher线程执行以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>接受来自Oracle数据库服务器的传入连接和任务请求。</p>
                        </li>
                        <li>
                           <p>将传入的请求放在队列中以供任务线程获取。</p>
                        </li>
                        <li>
                           <p>将请求的结果发送回发出请求的服务器。</p>
                           <div class="infoboxnote" id="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62__GUID-B48BF8C6-CCAC-4A30-AE51-4B57555DF418">
                              <p class="notep1">注意：</p>
                              <p>在用户会话与调度程序建立连接之后，来自该用户会话的所有请求都将转到同一个调度程序，直到用户会话结束。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI952"></a><div class="props_rev_3"><a id="GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" name="GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F"></a><h4 id="LNOCI-GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" class="sect4"><span class="enumeration_section">F.2.3</span>任务线程</h4>
                  <div>
                     <p>如何使用任务线程？</p>
                     <p>任务线程执行以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>从队列中提取请求。</p>
                        </li>
                        <li>
                           <p>执行必要的操作。</p>
                        </li>
                        <li>
                           <p>将结果放在队列中以供调度员接收。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNOCI72989"></a><a id="LNOCI954"></a><a id="LNOCI953"></a><div class="props_rev_3"><a id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8" name="GUID-35A467BD-A506-424F-A35F-CF814514A9F8"></a><h3 id="LNOCI-GUID-35A467BD-A506-424F-A35F-CF814514A9F8" class="sect3"><span class="enumeration_section">F.3</span>管理多线程extproc代理</h3>
               <div>
                  <p>在尝试连接到外部过程之前，必须为每个系统标识符（SID）启动一个多线程<code class="codeph">extproc</code>代理。
                  </p>
                  <div class="section">
                     <p></p>
                     <p>多线程<code class="codeph">extproc</code>代理由名为<code class="codeph">agtctl</code>的代理控制实用程序启动，停止和配置，该实用程序的工作方式与<code class="codeph">lsnrctl</code>类似。但是，与读取配置文件（ <code class="codeph">listener.ora</code> ）的<code class="codeph">lsnrctl</code>不同， <code class="codeph">agtctl</code>获取配置信息并将其写入控制文件。
                     </p>
                     <p>在启动<code class="codeph">agtctl</code>之前，请确保Oracle Listener正在运行。然后使用<code class="codeph">agtctl</code>命令设置<code class="codeph">agtctl</code>配置参数（如果您不想要它们的默认值）并启动<code class="codeph">agtctl</code> ，如<a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">示例F-1所示</a> 。
                     </p>
                     <p>您可以在单行命令模式或shell模式下使用<code class="codeph">agtctl</code>命令。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8__GUID-CD94BCB4-1127-4BF5-BC6A-08062535D0F7">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" title="什么是Agent Control Utility命令以及它们用于什么？">代理控制实用程序（agtctl）命令</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" title="本节介绍agtctl命令的用法。">关于在单行命令模式下使用agtctl</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" title="发出AGTCTL&gt;命令时，会产生提示AGTCTL&gt;。">使用Shell模式命令</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874" title="多线程extproc代理控制的配置参数有什么作用？">多线程extproc代理控制的配置参数</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">
                     <p class="titleinexample">示例F-1设置配置参数并启动agtctl</p><pre class="oac_no_warn" dir="ltr">agtctl set max_dispatchers 2 ep_agt1 agtctl set tcp_dispatchers 1 ep_agt1 agtctl set max_task_threads 2 ep_agt1 agtctl set max_sessions 5 ep_agt1 agtctl unset listener_address ep_agt1 agtctl set listener_address“（address =（protocol = ipc）（key = extproc））”ep_agt1 agtctl startup extproc ep_agt1</pre></div>
                  <!-- class="example" -->
               </div><a id="LNOCI956"></a><a id="LNOCI955"></a><div class="props_rev_3"><a id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" name="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351"></a><h4 id="LNOCI-GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" class="sect4"><span class="enumeration_section">F.3.1</span>代理控制实用程序（agtctl）命令</h4>
                  <div>
                     <p>什么是Agent Control Utility命令以及它们用于什么？</p>
                     <div class="section">
                        <p>您可以使用<a href="multithreaded-extproc-agent.html#GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__G1006650" title="该表有2列。第1列是命令名，第2列是其描述。">表F-1中</a>显示的命令启动和停止<code class="codeph">agtctl</code>并创建和维护其控制文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__G1006650">
                        <p class="titleintable">表F-1代理控制实用程序（agtctl）命令</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="代理控制实用程序（agtctl）命令" width="100%" border="1" summary="This table has 2 columns. Column 1 is the command name and column 2 is its description. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d390030e2332">命令</th>
                                 <th align="left" valign="bottom" width="83%" id="d390030e2335">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2340" headers="d390030e2332 ">
                                    <p><code class="codeph">启动</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2340 d390030e2335 ">
                                    <p>启动多线程<code class="codeph">extproc</code>代理</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2351" headers="d390030e2332 ">
                                    <p><code class="codeph">关掉</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2351 d390030e2335 ">
                                    <p>停止多线程<code class="codeph">extproc</code>代理</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2362" headers="d390030e2332 ">
                                    <p><code class="codeph">组</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2362 d390030e2335 ">
                                    <p>设置多线程<code class="codeph">extproc</code>代理的配置参数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2373" headers="d390030e2332 ">
                                    <p><code class="codeph">未设置</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2373 d390030e2335 ">
                                    <p>使参数恢复为其默认值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2381" headers="d390030e2332 ">
                                    <p><code class="codeph">节目</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2381 d390030e2335 ">
                                    <p>显示配置参数的值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2389" headers="d390030e2332 ">
                                    <p><code class="codeph">删除</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2389 d390030e2335 ">
                                    <p>从控制文件中删除特定SID的条目</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2397" headers="d390030e2332 ">
                                    <p><code class="codeph">出口</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2397 d390030e2335 ">
                                    <p>退出shell模式</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2405" headers="d390030e2332 ">
                                    <p><code class="codeph">救命</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2405 d390030e2335 ">
                                    <p>列出可用命令</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>这些命令可以通过以下两种方式之一发出：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以从UNIX或DOS shell发出命令。此模式称为单行命令模式。</p>
                           </li>
                           <li>
                              <p>您可以输入<code class="codeph">agtctl</code>并显示<code class="codeph">AGTCTL&gt;</code>提示。然后，您可以从<code class="codeph">agtctl</code> shell中输入命令。此模式称为shell模式。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">agtctl</code>命令的语法和参数取决于它们的发布模式。
                        </p>
                        <div class="infoboxnote" id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__GUID-AF2A0F3E-5DE4-493F-AF9C-FA1786F26C44">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>所有命令都区分大小写。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">agtctl</code>实用程序将其控制文件放在由两个环境变量<code class="codeph">AGTCTL_ADMIN</code>或<code class="codeph">TNS_ADMIN</code>之一指定的目录中。确保至少设置了其中一个环境变量，并指定了代理可以访问的目录。
                                 </p>
                              </li>
                              <li>
                                 <p>如果多线程<code class="codeph">extproc</code>代理要求设置环境变量，或者在为专用模式下工作的代理配置<code class="codeph">listener.ora</code>条目时使用<code class="codeph">ENVS</code>参数，则必须在UNIX或DOS shell中设置所有必需的环境变量。运行<code class="codeph">agtctl</code>实用程序。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNOCI957"></a><div class="props_rev_3"><a id="GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" name="GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A"></a><h4 id="LNOCI-GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" class="sect4"><span class="enumeration_section">F.3.2</span>关于在单线命令模式下使用agtctl</h4>
                  <div>
                     <p>本节介绍<code class="codeph">agtctl</code>命令的<code class="codeph">agtctl</code> 。
                     </p>
                     <p>它们以单行命令模式呈现。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-936FB274-B853-4C58-904E-099207584BA2" title="在启动代理之前，请设置多线程extproc代理的配置参数。">设置多线程extproc代理的配置参数</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" title="使用startup命令启动多线程extproc代理。">启动多线程extproc代理</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" title="使用shutdown命令停止多线程extproc代理。">关闭多线程extproc代理</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" title="要检查配置参数的值，请使用show命令。">检查配置参数的值</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" title="您可以使用unset命令将配置参数重置为其默认值。">将配置参数重置为其默认值</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" title="delete命令从控制文件中删除指定SID的条目。">从控制文件中删除特定SID的条目</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" title="使用help命令查看agtctl的可用命令列表或查看特定命令的语法。">请求帮助</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI959"></a><a id="LNOCI960"></a><a id="LNOCI958"></a><div class="props_rev_3"><a id="GUID-936FB274-B853-4C58-904E-099207584BA2" name="GUID-936FB274-B853-4C58-904E-099207584BA2"></a><h5 id="LNOCI-GUID-936FB274-B853-4C58-904E-099207584BA2" class="sect5"><span class="enumeration_section">F.3.2.1</span>设置多线程extproc代理的配置参数</h5>
                     <div>
                        <p>在启动代理之前，请设置多线程<code class="codeph">extproc</code>代理的配置参数。
                        </p>
                        <div class="section">
                           <p>如果未特别设置配置参数，则使用默认值。配置参数及其默认值如<a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="该表有3列。第1列是参数名称，第2列是其描述，第3列是默认值。">表F-2所示</a> 。
                           </p>
                           <p>使用<code class="codeph">set</code>命令设置多线程<code class="codeph">extproc</code>代理配置参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-936FB274-B853-4C58-904E-099207584BA2__GUID-AEF74EB6-16B9-48EB-873C-AF3CC04D9958">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl set <span class="italic">parameter</span> <span class="italic">parameter_value agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span>是您正在设置的参数。
                           </p>
                           <p><span class="italic"><code class="codeph">parameter_value</code></span>是分配给该参数的值。
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span>是此代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-936FB274-B853-4C58-904E-099207584BA2__GUID-E8B8311C-243E-4731-A8CA-A894A751EB0F">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl set max_dispatchers 5 salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI962"></a><a id="LNOCI963"></a><a id="LNOCI961"></a><div class="props_rev_3"><a id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" name="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99"></a><h5 id="LNOCI-GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" class="sect5"><span class="enumeration_section">F.3.2.2</span>启动多线程extproc代理</h5>
                     <div>
                        <p>使用<code class="codeph">startup</code>命令启动多线程<code class="codeph">extproc</code>代理。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99__GUID-DB206A2C-A4B3-4418-8A4E-F29B85F44B47">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl启动extproc <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span>是此多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99__GUID-D5134E8C-1B57-48F0-BCFD-7B0947724D05">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl启动extproc salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI965"></a><a id="LNOCI966"></a><a id="LNOCI964"></a><div class="props_rev_3"><a id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" name="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB"></a><h5 id="LNOCI-GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" class="sect5"><span class="enumeration_section">F.3.2.3</span>关闭多线程extproc代理</h5>
                     <div>
                        <p>使用<code class="codeph">shutdown</code>命令停止多线程<code class="codeph">extproc</code>代理。
                        </p>
                        <div class="section">
                           <p>关闭有三种形式：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>正常（默认）</p>
                                 <p><code class="codeph">agtctl</code>要求多线程<code class="codeph">extproc</code>代理正常终止自身。所有会话完成当前操作，然后关闭。
                                 </p>
                              </li>
                              <li>
                                 <p>即时</p>
                                 <p><code class="codeph">agtctl</code>告诉多线程<code class="codeph">extproc</code>代理立即终止。无论当前会话的状态如何，代理都会立即退出。
                                 </p>
                              </li>
                              <li>
                                 <p>退出</p>
                                 <p>在没有与多线程<code class="codeph">extproc</code>代理进行通信的情况下， <code class="codeph">agtctl</code>发出系统调用来阻止它。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB__GUID-F26E13BE-41B2-4B37-8C09-E94C6045ABCD">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl shutdown [immediate | abort] <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span>是多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB__GUID-095F9D77-B573-4C32-AD3E-309CB16E513C">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl shutdown immediate salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI968"></a><a id="LNOCI969"></a><a id="LNOCI967"></a><div class="props_rev_3"><a id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" name="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020"></a><h5 id="LNOCI-GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" class="sect5"><span class="enumeration_section">F.3.2.4</span>检查配置参数的值</h5>
                     <div>
                        <p>要检查配置参数的值，请使用<code class="codeph">show</code>命令。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020__GUID-D7592730-42FB-4F67-83E2-F5C1D29A532A">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl show <span class="italic">parameter</span> <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span>是您正在检查的参数。
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span>是此多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020__GUID-D3A821C0-F3CA-415A-9486-2264E1AFC3AF">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl show max_dispatchers salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI971"></a><a id="LNOCI972"></a><a id="LNOCI970"></a><div class="props_rev_3"><a id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" name="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB"></a><h5 id="LNOCI-GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" class="sect5"><span class="enumeration_section">F.3.2.5</span>将配置参数重置为默认值</h5>
                     <div>
                        <p>您可以使用<code class="codeph">unset</code>命令将配置参数重置为其默认值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB__GUID-6834B026-4EAC-4FAC-8F01-CFAC8DCBFEBC">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl unset <span class="italic">参数</span> <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span>是您要重置（或更改）的参数。
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span>是此多线程<code class="codeph">extproc</code>代理服务的SID。必须为单行命令模式指定。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB__GUID-7C0D4D97-067A-4DBD-87D7-1877FCF47E71">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl unset max_dispatchers salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI974"></a><a id="LNOCI975"></a><a id="LNOCI973"></a><div class="props_rev_3"><a id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" name="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E"></a><h5 id="LNOCI-GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" class="sect5"><span class="enumeration_section">F.3.2.6</span>从控制文件中删除特定SID的条目</h5>
                     <div>
                        <p><code class="codeph">delete</code>命令从控制文件中删除指定SID的条目。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E__GUID-FEDB3F4D-44D7-452F-8CD2-F286AC420E5D">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl删除<span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span>是要删除的SID条目。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E__GUID-5C1B144A-D35B-4F8F-8B24-6E21E2470B4D">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl删除salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI977"></a><a id="LNOCI978"></a><a id="LNOCI976"></a><div class="props_rev_3"><a id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" name="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20"></a><h5 id="LNOCI-GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" class="sect5"><span class="enumeration_section">F.3.2.7</span>请求帮助</h5>
                     <div>
                        <p>使用<code class="codeph">help</code>命令查看<code class="codeph">agtctl</code>的可用命令列表或查看特定命令的语法。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20__GUID-0ECE3EAC-3846-4723-9BA4-998B54F42220">句法</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl help [ <span class="italic">command</span> ]</pre><p><span class="italic"><code class="codeph">command</code></span>是要查看其语法的命令的名称。默认为所有<code class="codeph">agtctl</code>命令。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20__GUID-3DD8C14C-5096-4A34-A4F4-5468009D63CE">例</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl帮助设置</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNOCI979"></a><div class="props_rev_3"><a id="GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" name="GUID-C75B07CD-875C-40D0-B59E-4E83440BE424"></a><h4 id="LNOCI-GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" class="sect4"><span class="enumeration_section">F.3.3</span>使用Shell模式命令</h4>
                  <div>
                     <p>发出<code class="codeph">AGTCTL&gt;</code>命令时，会产生提示<code class="codeph">AGTCTL&gt;</code> 。
                     </p>
                     <div class="section">
                        <p>在<a id="d390030e4520" class="indexterm-anchor"></a> shell模式，输入以下命令启动<code class="codeph">agtctl</code> ：</p><pre class="oac_no_warn" dir="ltr">agtctl</pre><p>此后，因为您要从<code class="codeph">agtctl</code> shell中发出命令，所以不需要在命令字符串前加上<code class="codeph">agtctl</code> 。
                        </p>
                        <p>输入以下命令设置代理SID的名称：</p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set agent_sid <span class="italic">agent_sid</span>
</pre><p>假定所有后续命令都是指定的SID，直到更改<code class="codeph">agent_sid</code>值。与单行命令模式不同，您不在命令字符串中指定<span class="italic"><code class="codeph">agent_sid</code></span> 。
                        </p>
                        <p>您可以按如下方式设置错误消息的语言：</p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt;设置语言<span class="italic">语言</span>
</pre><p>命令本身与单行命令模式的命令相同。要退出shell模式，请输入<code class="codeph">exit</code> 。
                        </p>
                        <div class="p">以下示例使用shell模式命令：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="multithreaded-extproc-agent.html#GUID-4795A79D-D5C0-428A-97AE-C0638691F960" title="如何设置shutdown_address配置参数的值。">示例：设置配置参数</a></p>
                              </li>
                              <li>
                                 <p><a href="multithreaded-extproc-agent.html#GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" title="如何启动多线程extproc代理。">示例：启动多线程extproc代理</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNOCI980"></a><div class="props_rev_3"><a id="GUID-4795A79D-D5C0-428A-97AE-C0638691F960" name="GUID-4795A79D-D5C0-428A-97AE-C0638691F960"></a><h5 id="LNOCI-GUID-4795A79D-D5C0-428A-97AE-C0638691F960" class="sect5"><span class="enumeration_section">F.3.3.1</span>示例：设置配置参数</h5>
                     <div>
                        <p>如何设置<code class="codeph">shutdown_address</code>配置参数的值。
                        </p>
                        <div class="section">
                           <p>此示例为<code class="codeph">shutdown_address</code>配置参数设置值。
                           </p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set shutdown_address（address =（protocol = ipc）（key = oraDBsalesDB））</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI981"></a><div class="props_rev_3"><a id="GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" name="GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E"></a><h5 id="LNOCI-GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" class="sect5"><span class="enumeration_section">F.3.3.2</span>示例：启动多线程extproc代理</h5>
                     <div>
                        <p>如何启动多线程<code class="codeph">extproc</code>代理。
                        </p>
                        <div class="section">
                           <p>此示例启动多线程<code class="codeph">extproc</code>代理。
                           </p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt;启动extproc</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNOCI983"></a><a id="LNOCI984"></a><a id="LNOCI985"></a><a id="LNOCI986"></a><a id="LNOCI982"></a><div class="props_rev_3"><a id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874" name="GUID-94F87818-35D8-46F6-BDC9-C032782D3874"></a><h4 id="LNOCI-GUID-94F87818-35D8-46F6-BDC9-C032782D3874" class="sect4"><span class="enumeration_section">F.3.4</span>多线程extproc代理控制的配置参数</h4>
                  <div>
                     <p>多线程extproc代理控制的配置参数有什么作用？</p>
                     <div class="section">
                        <p><a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="该表有3列。第1列是参数名称，第2列是其描述，第3列是默认值。">表F-2</a>描述并提供了代理控制实用程序的配置参数的默认值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685">
                        <p class="titleintable">表F-2 agtctl的配置参数</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="agtctl的配置参数" width="100%" border="1" summary="This table has 3 columns. Column 1 is the parameter name, column 2 is its description, and column 3 is the default value. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d390030e5191">参数</th>
                                 <th align="left" valign="bottom" width="26%" id="d390030e5194">描述</th>
                                 <th align="left" valign="bottom" width="44%" id="d390030e5197">默认值</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5202" headers="d390030e5191 ">
                                    <p><code class="codeph">MAX_DISPATCHERS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5202 d390030e5194 ">
                                    <p>最大调度员数量</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5202 d390030e5197 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5213" headers="d390030e5191 ">
                                    <p><code class="codeph">tcp_dispatchers</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5213 d390030e5194 ">
                                    <p>监听TCP的调度员数量（其余使用IPC）</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5213 d390030e5197 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5224" headers="d390030e5191 ">
                                    <p><code class="codeph">max_task_threads</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5224 d390030e5194 ">
                                    <p>最大任务线程数</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5224 d390030e5197 ">
                                    <p>2</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5235" headers="d390030e5191 ">
                                    <p><code class="codeph">MAX_SESSIONS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5235 d390030e5194 ">
                                    <p>每个任务线程的最大会话数</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5235 d390030e5197 ">
                                    <p>五</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5246" headers="d390030e5191 ">
                                    <p><code class="codeph">listener_address</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5246 d390030e5194 ">
                                    <p>听众正在收听的地址（注册时需要）</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5246 d390030e5197 "><pre class="oac_no_warn" dir="ltr">（ADDRESS_LIST =（ADDRESS =（PROTOCOL = IPC）（KEY = PNPKEY））（ADDRESS =（PROTOCOL = IPC）（KEY = <span class="italic">listener_sid</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = 127.0.0.1）（PORT = 1521） ）））</pre><p>注意： <span class="italic"><code class="codeph">listener_sid</code></span>是<span class="italic"><code class="codeph">listener_sid</code></span>正在<span class="italic"><code class="codeph">listener_sid</code></span>的Oracle数据库上的地址的IPC密钥。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5266" headers="d390030e5191 ">
                                    <p><code class="codeph">shutdown_address</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5266 d390030e5194 ">
                                    <p>地址代理用于与侦听器通信。这是代理侦听所有通信的地址，包括来自<code class="codeph">agtctl</code>关闭消息。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5266 d390030e5197 "><pre class="oac_no_warn" dir="ltr">（ADDRESS =（PROTOCOL = IPC）（KEY = <span class="italic">listener_sid</span> || <span class="italic">agent_sid</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = 127.0.0.1）（PORT = 1521））</pre><p>笔记：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">agent_sid</code></span>是多线程<code class="codeph">extproc</code>代理的SID。
                                          </p>
                                       </li>
                                       <li>
                                          <p>||表示<span class="italic"><code class="codeph">listener_sid</code></span>和<span class="italic"><code class="codeph">agent_sid</code></span>连接成一个字符串。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-E372FB10-504F-42C8-97B6-8B5071C1AD66">max_dispatchers，tcp_dispatchers，max_task_threads和max_sessions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要提高性能，您可能需要更改部分或全部参数<code class="codeph">max_dispatchers</code> ， <code class="codeph">tcp_dispatchers</code> ， <code class="codeph">max_task_threads</code>和<code class="codeph">max_sessions</code> 。
                        </p>
                        <p>您可以使用以下公式计算<code class="codeph">max_dispatchers</code> ， <code class="codeph">tcp_dispatchers</code> ， <code class="codeph">max_task_threads</code>的最佳值：</p><pre class="oac_no_warn" dir="ltr">max_dispatchers = CEIL（ <span class="italic">x</span> / <span class="italic">y</span> ）tcp_dispatchers = CEIL（ <span class="italic">x_tcpip</span> / <span class="italic">y</span> ）max_task_threads = CEIL（ <span class="italic">x</span> / max_sessions）</pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CEIL</code>是一个SQL函数，它返回大于或等于其参数的最小整数。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">x</code></span>是可以同时连接到<code class="codeph">extproc</code>的最大会话数。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">y</code></span>是系统可以为每个调度程序支持的最大连接数。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">x_tcpip</code></span>是TCP / IP可以同时连接到<code class="codeph">extproc</code>的最大会话数。</p>
                              <p>（ <span class="italic"><code class="codeph">x</code></span> - <span class="italic"><code class="codeph">x_tcpip</code></span>是IPC可以同时连接到<code class="codeph">extproc</code>的最大会话数。）
                              </p>
                           </li>
                        </ul>
                        <p>没有用于计算<code class="codeph">max_sessions</code>的最佳值的<code class="codeph">max_sessions</code> ，这会影响<code class="codeph">max_task_threads</code> 。
                        </p>
                        <p>您必须根据硬件的功能微调这些参数设置，并确保并发线程不会耗尽您的操作系统。</p>
                        <p><code class="codeph">max_dispatchers</code>的值必须至少为1（这是默认值）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-97B42414-7874-47B4-918F-2B629DAE30FC">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>可以同时连接到<code class="codeph">extproc</code> （ <code class="codeph">x</code> ）的最大会话数为650。
                              </p>
                           </li>
                           <li>
                              <p>TCP / IP（ <span class="italic"><code class="codeph">x_tcpip</code></span> ）可以同时连接到<code class="codeph">extproc</code>的最大会话数为400。
                              </p>
                              <p>（IPC可以同时连接到<code class="codeph">extproc</code>的最大会话数为650-400 = 250。）
                              </p>
                           </li>
                           <li>
                              <p>系统可为每个调度程序支持的最大连接数（ <span class="italic"><code class="codeph">y</code></span> ）为100。
                              </p>
                           </li>
                           <li>
                              <p>每个任务线程的最大会话数（ <code class="codeph">max_sessions</code> ）为20。
                              </p>
                           </li>
                        </ul>
                        <p>这些参数的最佳值为：</p><pre class="oac_no_warn" dir="ltr">max_dispatchers = CEIL（650/100）= CEIL（6.5）= 7 tcp_dispatchers = CEIL（400/100）= CEIL（4）= 4 max_task_threads = CEIL（650/20）= CEIL（32.5）= 33</pre><p>也就是说，最佳：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>调度员的最大数量是七。</p>
                           </li>
                           <li>
                              <p>七个调度员中有四个正在监听TCP / IP，其余三个正在监听IPC。</p>
                           </li>
                           <li>
                              <p>最大任务线程数为33。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-DC265E0F-776D-4563-800C-A15051E84FCF">listener_address和shutdown_address</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>配置参数<code class="codeph">listener_address</code>和<code class="codeph">shutdown_address</code>的值由<code class="codeph">ADDRESS</code>指定，如<a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="该表有3列。第1列是参数名称，第2列是其描述，第3列是默认值。">表F-2</a>和<a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">示例F-1所示</a> 。在<code class="codeph">ADDRESS</code> ，您可以指定参数<code class="codeph">HOST</code> ，它可以是IPv6或IPv4地址或主机名。如果<code class="codeph">HOST</code>是主机名，则可选<code class="codeph">ADDRESS</code>参数<code class="codeph">IP</code>这些值是相关的：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-ED9A3503-2CED-4A16-AF3E-B655290C28DE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the IP values that are relevant when HOST is a host name, and gives their meanings." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d390030e5520">IP价值</th>
                                 <th align="left" valign="bottom" width="83%" id="d390030e5523">含义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5528" headers="d390030e5520 ">
                                    <p><code class="codeph">第一</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5528 d390030e5523 ">
                                    <p>侦听主机名DNS解析返回的第一个IP地址。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5536" headers="d390030e5520 ">
                                    <p><code class="codeph">V4_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5536 d390030e5523 ">
                                    <p>仅侦听系统中的IPv4接口。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5544" headers="d390030e5520 ">
                                    <p><code class="codeph">V6_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5544 d390030e5523 ">
                                    <p>仅侦听系统中的IPv6接口。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>例如， <code class="codeph">listener_address</code>或<code class="codeph">shutdown_address</code>值将其限制为IPv6接口：</p><pre class="oac_no_warn" dir="ltr">“（ADDRESS =（PROTOCOL = tcp）（主机=销售额）（PORT = 1521） <span class="bold">（IP = V6_ONLY）</span> ）”</pre><div class="infoboxnotealso" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-743DB926-8EC4-4A59-AC35-FF75948C7E81">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../netag/understanding-communication-layers.html#NETAG999" target="_blank"><span><cite>有关Oracle数据库中</cite></span></a> IPv6支持的详细信息，请参见<a href="../netag/understanding-communication-layers.html#NETAG999" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
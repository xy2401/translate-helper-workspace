<html id="03619.PRCH-01000.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>PRCH-01000到PRCH-01079</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Error Messages"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Error Messages"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-error-messages.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T07:32:34-07:00"></meta>
      <meta name="dcterms.title" content="Database Error Messages"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95938-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="PRCG-01000.html" title="Previous" type="text/html"></link>
      <link rel="next" href="PRCI-01000.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ERRMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PRCG-01000.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="PRCI-01000.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库错误消息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PRCH-01000到PRCH-01079</li>
            </ol>
            <a id="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D" name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D"></a>
            
            <h2 id="ERRMG-GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D" class="sect2"><span class="enumeration_chapter">110</span> PRCH-01000至PRCH-01079</h2>
         </header>
         <div class="ind">
            <div>
               <dl>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-1558DF71-D957-4BF4-B466-B1D56D1CFBDB"><!-- --></a> PRCH-01000：无法停止从Oracle主目录{0}运行的资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止指定Oracle主目录中的一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看提供无法停止的资源的详细信息的基础错误消息，检查单个资源停止失败的原因和操作，并为每个未能停止的资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-3928C563-C7AB-4F1F-88ED-6A38BF6D2E6A"><!-- --></a> PRCH-01001：无法在Oracle主目录{0}中启动资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试在指定的Oracle主目录中启动一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看基础错误消息，这些消息提供无法启动的资源的详细信息，检查单个资源启动失败的原因和操作，并为无法启动的每个资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-FC851346-91F7-48A3-8DF9-DEC4A742A641"><!-- --></a> PRCH-01002：无法停止从CRS主页{0}运行的资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止指定CRS主目录中的一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看基础错误消息，这些消息提供无法停止的资源的详细信息，检查单个资源停止失败的原因和操作，并为每个未能停止的资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-8590CC9B-5BC1-4DD4-B6E2-14BD1A3A667F"><!-- --></a> PRCH-01003：无法在CRS主页{0}中启动资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试在指定的CRS主目录中启动一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看基础错误消息，这些消息提供无法启动的资源的详细信息，检查单个资源启动失败的原因和操作，并为无法启动的每个资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-1AD21C8D-3486-44F0-AF4D-250931D5B206"><!-- --></a> PRCH-01004：无法停止服务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止服务资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以获取可能的原因，如果需要，请使用命令'srvctl stop service -db &lt;db_unique_name&gt;'来停止服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-D52CAE94-79A3-4795-8AD3-397A058A5885"><!-- --></a> PRCH-01005：无法停止数据库</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止数据库资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop database -db &lt;db_unique_name&gt;'来停止数据库。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-94DED893-1F49-426C-A4B3-769516E81FD1"><!-- --></a> PRCH-01006：无法停止监听器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止侦听器资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop listener'来停止侦听器。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-7797ED91-6E4B-4CD3-8FDD-7C84CB398A97"><!-- --></a> PRCH-01007：无法停止监听器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止侦听器资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop listener'来停止侦听器。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-FC61C2A3-9C45-439D-9DE2-68DA12A2426B"><!-- --></a> PRCH-01008：无法启动服务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动服务资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start service -db &lt;db_unique_name&gt;'启动服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-375CB5E6-56D0-4E18-A3B0-CABEE253B80F"><!-- --></a> PRCH-01009：无法启动数据库</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动数据库资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start database -db &lt;db_unique_name&gt;'启动数据库。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-1DCAB97E-B411-4787-BFEC-3D8C4AEE5577"><!-- --></a> PRCH-01010：无法启动监听器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动侦听器资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start listener'启动侦听器。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-39B2917F-E08D-4EA4-80B9-E37A2326B02B"><!-- --></a> PRCH-01011：无法启动监听器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动侦听器资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start listener'启动侦听器。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-880CAC80-BDB5-4026-8590-F2B6D7A0F49D"><!-- --></a> PRCH-01012：无法阻止EONS</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止EONS资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop nodeapps'来停止EONS资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-E79B0B00-9AFE-446C-AFF7-F7DEE6E2C1D7"><!-- --></a> PRCH-01013：无法启动EONS</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动EONS资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start nodeapps'启动EONS资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-995C6D91-BC8E-4A96-9294-EF640A14D47A"><!-- --></a> PRCH-01014：无法停止ONS</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止ONS资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop nodeapps'来停止ONS资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-F42FEDB9-4BE9-41C9-8D33-DCDBDF724129"><!-- --></a> PRCH-01015：无法启动ONS</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动ONS资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start nodeapps'启动ONS资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-F695A781-5830-4330-9EE4-4609DE068E26"><!-- --></a> PRCH-01016：无法停止GSD资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止GSD资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop nodeapps'来停止GSD资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-B272312A-4E22-4E4F-8569-8C17BDE61E99"><!-- --></a> PRCH-01017：无法启动GSD资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动GSD资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start nodeapps'启动GSD资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-B646F904-8426-494B-ABBB-23FFA337948D"><!-- --></a> PRCH-01018：无法停止VIP资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止VIP资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop vip -node &lt;node_name&gt;'来停止VIP资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-FE6A2106-5E77-447A-B44C-D1A6E9C2E38A"><!-- --></a> PRCH-01019：无法启动VIP资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动VIP资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start vip -node &lt;node_name&gt;'启动VIP资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-644FBF05-ECA8-4591-89E6-DA8CABB88A60"><!-- --></a> PRCH-01020：无法停止网络资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止网络资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看错误消息以查找可能的原因，更正错误并使用命令'srvctl stop nodeapps'来停止网络资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-AA786969-E2E0-471C-BC81-1B0A35C070C2"><!-- --></a> PRCH-01021：无法启动网络资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动网络资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start nodeapps'启动网络资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-2F094B2D-9AC1-4D51-8094-8F819E060194"><!-- --></a> PRCH-01022：无法停止SCAN VIP资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止SCAN VIP资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop scan'来停止SCAN VIP资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-E14C07CF-120F-4A0A-B2C3-037202FFD12F"><!-- --></a> PRCH-01023：无法启动SCAN VIP资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动SCAN VIP资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start scan'启动SCAN VIP资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-D1B23FD5-3E65-4A0C-A267-7DAC8125AB4E"><!-- --></a> PRCH-01024：无法停止SCAN侦听器资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止SCAN侦听器资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop scan_listener'来停止SCAN侦听器资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-4D46049A-7D52-4E43-8262-C3EC147565D5"><!-- --></a> PRCH-01025：无法启动SCAN侦听器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动SCAN侦听器资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start scan_listener'启动SCAN侦听器资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-A17EBD40-F281-47AB-87A9-B2532AF3AEB3"><!-- --></a> PRCH-01026：无法停止ASM</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止ASM资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop asm'来停止ASM资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-1A795212-5A9D-43F1-B0C4-8F621DF2E3B0"><!-- --></a> PRCH-01027：无法启动ASM</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动ASM资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start asm'启动ASM资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-8F2B2B03-8207-4A57-A7E4-AB6D79F196E2"><!-- --></a> PRCH-01028：一个或多个资源无法启动：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看基础错误消息，这些消息提供无法启动的资源的详细信息，检查单个资源启动失败的原因和操作，并为无法启动的每个资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-A395BAA7-2164-4D10-977B-EE7958B518BC"><!-- --></a> PRCH-01029：一个或多个资源未能停止：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看提供无法停止的资源的详细信息的基础错误消息，检查单个资源停止失败的原因和操作，并为每个未能停止的资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-40D40CFA-412A-451B-9603-D756FF6B710B"><!-- --></a> PRCH-01030：一个或多个资源未能停止：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的资源错误消息及其文档，并更正指示的问题。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-918EC7FF-C100-4209-A888-B2E667AB3C90"><!-- --></a> PRCH-01031：一个或多个资源无法启动：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动一个或多个资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看基础错误消息，这些消息提供无法启动的资源的详细信息，检查单个资源启动失败的原因和操作，并为无法启动的每个资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-DEA3E9C9-0411-4BF8-BA93-979E77ADA4DF"><!-- --></a> PRCH-01032：无法停止GNS资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止GNS资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop gns'来停止GNS资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-ABDA7335-AE16-4418-9430-B4CDA6CA0D9C"><!-- --></a> PRCH-01033：无法启动GNS资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动GNS资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start gns'启动GNS资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-92E59AB7-69DC-4657-AED8-8D65589250C5"><!-- --></a> PRCH-01034：无法停止磁盘组资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止磁盘组资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop diskgroup -diskgroup &lt;dg_name&gt;'来停止磁盘组资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-17D5CEE2-85AC-4FCF-A67C-3216805804DF"><!-- --></a> PRCH-01035：无法启动磁盘组资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动磁盘组资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start diskgroup -diskgroup &lt;dg_name&gt;'启动磁盘组资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-B91D7265-90B4-4EB0-BC0E-BE551457FD3F"><!-- --></a> PRCH-01036：状态文件“{0}”不存在</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>找不到当前操作所需的状态文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保文件系统中存在指定的文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-BCA7F266-D2B6-44B8-BB24-36A4FA809E47"><!-- --></a> PRCH-01037：文件系统对象“{0}”不是文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>预计该文件的内容不是文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重试'srvctl stop home'以生成此文件。如果问题仍然存在，请与Oracle支持服务联系。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-DA231DC8-E580-4B27-A4C2-4FC10A94981A"><!-- --></a> PRCH-01038：“{0}”是不可读的文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>用户没有读取权限来打开文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>修改文件权限以使文件可读或从具有所需权限的OS用户标识执行命令。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-773C4686-9A9D-4941-AB7A-1CEE9784BD57"><!-- --></a> PRCH-01039：无法停止CVU资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试停止CVU资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl stop cvu'来停止CVU资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-5D7D34C2-BBA9-49E2-9E29-F94B7B76D490"><!-- --></a> PRCH-01040：无法启动CVU资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动CVU资源失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并使用命令'srvctl start cvu'启动CVU资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-0E4E51FD-45EE-43C8-BD34-776CE17FB998"><!-- --></a> PRCH-01041：检查服务状态“{0}”时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的服务的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-21891FE6-99CE-4FA4-AF94-6A95F3BBE832"><!-- --></a> PRCH-01042：检查数据库“{0}”的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的数据库的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-0455C9AC-9106-4EBC-93FB-968327CDE6D3"><!-- --></a> PRCH-01043：检查数据库实例“{0}”的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的数据库实例的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-7D4E6A6E-500B-42C3-B9A1-A820D2E83C3F"><!-- --></a> PRCH-01044：检查侦听器“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的侦听器的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-E1563352-6322-4215-9F88-9FC78B0ECFF8"><!-- --></a> PRCH-01045：检查VIP“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的VIP的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-7D729C02-3E61-43F0-BCC3-AE7B23B4D038"><!-- --></a> PRCH-01046：检查SCAN VIP“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的SCAN VIP的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-3C701002-2645-468E-8C7E-4AC75D8E5663"><!-- --></a> PRCH-01047：检查SCAN侦听器“{0}”的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的SCAN侦听器的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-02354315-5D60-42F3-B2A6-E0E9E643E472"><!-- --></a> PRCH-01048：检查CVU资源“{0}”的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的CVU资源的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-C07CB160-72DF-40F7-8FE2-09E5984B35E4"><!-- --></a> PRCH-01049：检查磁盘组“{0}”的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的磁盘组的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-CE7D6F38-BA48-425D-861D-5DE51DCC2716"><!-- --></a> PRCH-01050：检查ASM“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的ASM的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-8300FBC8-50F7-436C-B29D-18E1A1ED803E"><!-- --></a> PRCH-01051：检查GNS“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的GNS的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-31D21ECB-65A9-4CCA-944E-9C9EB43883CB"><!-- --></a> PRCH-01052：检查GSD“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的GSD的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-3B7863A5-D246-44BD-8E9F-579081868272"><!-- --></a> PRCH-01053：检查网络“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的网络的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-979647AF-37E4-460C-9379-A1FAE981768E"><!-- --></a> PRCH-01054：检查ONS“{0}”状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查列出的ONS的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-ABBC9C5A-8A52-4FAE-BFBF-9D23A2B841AA"><!-- --></a> PRCH-01055：无法创建或打开文件“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>状态文件处理失败，原因是：指定的文件是目录而不是文件，文件不存在但无法创建，或文件存在但无法打开。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通过<span class="keyword">以下方式</span>启用状态文件处理：不指定目录名称，确保目录可写，或确保可以覆盖现有状态文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-50643062-B053-4C0D-B15E-777EF741D26C"><!-- --></a> PRCH-01056：无法写入文件“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试写入给定文件失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果状态文件已存在，请确保它是可写的。否则，请确保状态文件路径的父目录是可写的。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-6FEDAADA-FFFD-45AA-97E2-0C444EDD2E40"><!-- --></a> PRCH-01057：数据库“{0}”的Clusterware资源不存在。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>具有给定名称的数据库的Oracle Clusterware资源不存在。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保存在具有给定名称的数据库的Oracle Clusterware资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-CD0AF92F-78D0-46A8-BC54-D675AC527BCD"><!-- --></a> PRCH-01058：检查CRS主页{0}的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查CRS主目录的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-4CC57AFF-7C47-449E-81B1-1F433CD4F336"><!-- --></a> PRCH-01059：检查Oracle主目录{0}的状态时失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查Oracle主目录的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以查找可能的原因，更正错误并重试。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-ADE8646B-0401-4C1B-B68B-E62B107D1C3C"><!-- --></a> PRCH-01060：一个或多个资源的状态检查失败：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查一个或多个资源的状态失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看基础错误消息，这些消息提供哪些资源无法查询其状态的详细信息，检查单个资源启动失败的原因和操作，并为无法启动的每个资源执行步骤。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-AB459F2A-0C76-4D35-839C-8C498292C6B0"><!-- --></a> PRCH-01061：状态文件中指定的以下资源不存在：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试启动指定状态文件中的一个或多个资源失败，因为它们不存在。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保提供了正确的状态文件。如有必要，请重新生成文件，或对其进行编辑以删除过时的资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-E90760EA-2DDD-496F-A758-0ECD17BE27DD"><!-- --></a> PRCH-01062：无法识别Oracle主目录{0}的版本</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检索指定Oracle主目录的版本失败，原因是命令'srvctl -V'未能执行或Oracle主目录版本大于当前软件版本。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查随附的错误消息以获取详细信息。如果适用，请指定版本低于或等于当前软件版本的Oracle主目录，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-EF3B9737-04DE-4354-9D73-365DFDAD956E"><!-- --></a> PRCH-01063：主页类型{0}无效。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试设置Oracle主目录类型失败，因为指定的主目录类型无效。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>指定有效的主类型（ADMIN或POLICY）。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-46CB5DC1-266D-4E3C-9F07-FD7B90F8CFA3"><!-- --></a> PRCH-01064：无法设置或修改POLICY类型Oracle主资源的节点列表</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试设置或修改Oracle主目录可用的节点列表失败，因为POLICY类型的Oracle主目录资源不支持设置或修改节点列表操作。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>指定ADMIN类型的Oracle主页资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-302CB13E-CAD3-4B00-A63A-136928C71584"><!-- --></a> PRCH-01065：已存在名为{0}的Oracle主资源。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>已为指定名称创建了Oracle主资源。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>提供其他名称或删除以前的资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-BE1865C2-CCFE-425A-AB8F-6CDB9CE8F6D5"><!-- --></a> PRCH-01066：无效的叶节点{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试设置或修改Oracle主目录可用的节点列表失败，因为一个或多个指定节点是叶节点，ADMIN类型Oracle主目录不支持这些节点。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>指定不带叶节点的节点列表。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-5A8E38A8-C910-422D-815A-40B8B8AB0215"><!-- --></a> PRCH-01067：ADMIN类型Oracle主目录的空节点列表无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试设置或修改Oracle主目录可用的节点列表失败，因为未指定节点列表，这是ADMIN类型Oracle主目录所必需的。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>指定节点列表。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-7585BA79-4662-40CB-9540-DA2206CDA8DE"><!-- --></a> PRCH-01068：POLICY类型Oracle主目录的无效节点列表</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试创建或修改POLICY类型的Oracle主目录失败，因为指定了节点列表，但POLICY类型的Oracle主目录不支持该列表。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重复操作而不指定节点列表。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-B708D052-40C3-42DC-BFA7-81188AA3B5A6"><!-- --></a> PRCH-01069：无法修改Oracle主资源，因为它正在运行</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试修改指定的Oracle主资源的配置失败，因为资源正在运行。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>停止指定的Oracle主资源并重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-A2512903-D3BD-4B85-8D24-E6C4E12E144D"><!-- --></a> PRCH-01070：Oracle Restart环境的无效节点操作选项</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试创建或修改Oracle主目录失败，因为指定了一个或多个可选节点输入（节点列表，-addnode或-deletenode），Oracle Restart环境不支持该输入。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重复操作而不指定节点列表，-addnode或-deletenode选项。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-DEE12DE1-4804-41EC-85B4-4FAE76443E41"><!-- --></a> PRCH-01071：Oracle Restart环境的Oracle主类型无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试创建或修改Oracle主目录失败，因为指定了主目录类型。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重复操作而不指定主页类型。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-B79E4094-3907-43A1-AE46-3FC87341748E"><!-- --></a> PRCH-01072：节点{0}已在Oracle主节点列表中注册。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试将节点添加到Oracle主目录可用的节点列表失败，因为指定的节点已在列表中注册。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重复指定其他节点的操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-8A3CDF68-6CE8-4F56-A79A-A6E6A8611588"><!-- --></a> PRCH-01073：节点列表为空。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从Oracle主目录可用的节点列表中删除节点失败，因为节点列表为空。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>没有</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-D80645FB-EC15-4E4E-9ED5-5F3F6B4AE262"><!-- --></a> PRCH-01074：节点{0}未在节点列表中注册。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从Oracle主目录可用的节点列表中删除节点失败，因为指定的节点未在节点列表中注册。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重复操作，指定在节点列表中注册的节点。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-4293516C-F781-429D-990B-628D0560787A"><!-- --></a> PRCH-01075：节点{0}中的Oracle主路径冲突</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试为Oracle主目录创建服务器类别失败，因为一个或多个Oracle自动存储管理群集文件系统（Oracle ACFS）文件系统跨一个或多个节点共享指定的Oracle主路径装入点。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>验证Oracle ACFS文件系统配置以避免冗余节点。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-216891D8-7672-4542-B7B5-09F9F1C6F414"><!-- --></a> PRCH-01076：Oracle家庭资源未在Oracle Clusterware中注册。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> Oracle家庭资源未在Oracle Clusterware中注册。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用命令'srvctl add oraclehome'创建Oracle主资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-BEA84B82-A4E7-4160-A3EF-1004E48042E1"><!-- --></a> PRCH-01077：为路径“{0}”找到多个Oracle主页资源</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试添加新的Oracle主资源失败，因为指示的路径包含Oracle主资源。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重试指定正确Oracle主路径的操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-E9DCE84E-8DB4-4FA5-B868-E2A90B0C4D29"><!-- --></a> PRCH-01078：路径“{0}”不存在Oracle主资源。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>具有指定路径的Oracle主资源未在Oracle Clusterware中注册。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用命令'srvctl add oraclehome'创建Oracle主资源。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-49E9B06F-6B31-46F0-A335-84E3CBD6C11D__GUID-B7C5C96B-9780-4840-965D-C35285E2A70E"><!-- --></a> PRCH-01079：从节点列表中删除最后一个节点的操作无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试修改Oracle主目录失败，因为指定的节点是最后剩余的节点。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>请勿修改Oracle主资源中的最后一个节点。

                     </p>
                     
                  </dd>
               </dl>
            </div>
         </div>
      </article>
   </body>
</html><html id="00675.user-defined-repository-metadata.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create your own metadata to associate with XML data stored in Oracle XML DB Repository."></meta>
      <meta name="description" content="You can create your own metadata to associate with XML data stored in Oracle XML DB Repository."></meta>
      <title>用户定义的存储库元数据</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can create your own metadata to associate with XML data stored in Oracle XML DB Repository."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="repository-access-using-protocols.html" title="Previous" type="text/html"></link>
      <link rel="next" href="XML-DB-repository-events.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="repository-access-using-protocols.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="XML-DB-repository-events.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">用户定义的存储库元数据</li>
            </ol>
            <a id="GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" name="GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E"></a><a id="ADXDB2560"></a>
            
            <h2 id="ADXDB-GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" class="sect2"><span class="enumeration_chapter">29</span>用户定义的存储库元数据</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-812175D3-2558-4A84-A038-DF8FD932B7E6">元数据和XML概述</a><br>您使用的数据通常与不属于内容的其他信息相关联。要以不同方式处理它，您可以使用此类<strong class="term">元数据</strong>对<strong class="term">数据</strong>进行分组或分类。
                  </li>
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227">使用XML模式定义资源元数据</a><br>在向照片资源添加用户元数据之前，必须使用XML Schema定义此类元数据的结构。为照片资源元数据的每种（技术，类别）创建并注册XML模式。
                  </li>
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C">资源元数据的添加，修改和删除</a><br>您可以使用包<code class="codeph">DBMS_XDB_REPOS</code> ，SQL DML语句<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>或WebDAV协议方法<code class="codeph">PROPPATCH</code> PL / SQL过程添加，更新和删除用户定义的资源元数据。</li>
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-71218C70-98BE-4336-A63D-129A1B4BD30A">查询基于XML模式的资源元数据</a><br>您可以在查询资源元数据时使用元数据列<code class="codeph">RESID</code> ，以使用关联数据加入元数据。
                  </li>
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-BB7CA0E0-E4A8-496C-BECF-46150BF27865">二进制图像元数据中的XML图像元数据</a><br>数码相机包括图像元数据作为它们产生的图像文件的一部分。
                  </li>
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-9D74E515-7FB4-4FE4-B503-3F920AF3071C">添加基于非架构的资源元数据</a><br>您存储，是<span class="italic">不是</span>基于XML Schema作为用户定义的资源元数据<code class="codeph">CLOB</code>下实例<code class="codeph">Resource</code>相关的资源要素。
                  </li>
                  <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-C224ED8C-338C-41D5-B714-4B9D403E600E">PL / SQL程序影响资源元数据</a><br>您可以使用PL / SQL程序<code class="codeph">DBMS_XMLSCHEMA.registerSchema</code> ， <code class="codeph">DBMS_XDBZ.enable_hierarchy</code> ， <code class="codeph">DBMS_XDBZ.disable_hierarchy</code> ， <code class="codeph">DBMS_XDBZ.is_hierarchy_enabled</code> ， <code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code> ， <code class="codeph">DBMS_XDB_REPOS.deleteResourceMetadata</code> ， <code class="codeph">DBMS_XDB_REPOS.purgeResourceMetadata</code>和<code class="codeph">DBMS_XDB_REPOS.updateResourceMetadata</code>执行资源元数据操作。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5569"></a><div class="props_rev_3"><a id="GUID-812175D3-2558-4A84-A038-DF8FD932B7E6" name="GUID-812175D3-2558-4A84-A038-DF8FD932B7E6"></a><h3 id="ADXDB-GUID-812175D3-2558-4A84-A038-DF8FD932B7E6" class="sect3"><span class="enumeration_section">29.1</span>元数据和XML概述</h3>
               <div>
                  <p>您使用的数据通常与不属于内容的其他信息相关联。要以不同方式处理它，您可以使用此类<strong class="term">元数据</strong>对<strong class="term">数据</strong>进行分组或分类。
                  </p>
                  <p>例如，您可能拥有一组数码照片，您可能会将元数据与每张照片相关联，例如有关照片特征（颜色构成，焦距）或背景（位置，主题类型：风景，人物）的信息。</p>
                  <p>Oracle XML DB存储库<strong class="term">资源</strong>是包含元数据和数据的XML文档。数据是元素<code class="codeph">Contents</code> 。资源中的所有其他元素都包含元数据。资源的数据可以是XML，但不一定是。
                  </p>
                  <p>您可以将Oracle XML DB存储库中的资源与您定义的元数据相关联。除了此类<span class="italic">用户定义的元数据之外</span> ，每个存储库资源还具有Oracle XML DB自动创建并使用（透明地）管理资源的关联元数据。此类<span class="italic">系统定义的元数据</span>包括诸如每个资源的所有者和创建日期之类的属性。
                  </p>
                  <p>除系统定义的元数据外，您可以决定应将哪些资源信息视为数据，哪些资源信息应视为元数据。对于照片资源，关于照片的补充信息通常不被认为是照片数据的一部分，照片数据是二进制图像。但是，对于文本，您有时可以选择是否在资源内容（数据）中包含特定信息或将其保持独立并将其与内容作为元数据相关联 - 该选择通常受使用或生成数据的应用程序的影响。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-A8AB40C5-A1ED-4FC5-8377-01EEA7A4E8FC">元数据的种类 - 术语的使用</a><br>术语“元数据”以各种方式在XML的上下文中使用，包括XML模式定义，XML标记和补充资源内容的Oracle XML DB存储库资源信息。
                     </li>
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-CAE23F8E-CF58-429A-BF69-21B5F49C5E98">用户定义的资源元数据</a><br><span class="italic">用户定义的资源元数据</span>本身<span class="italic">表示为XML</span> ：它是与其他XML数据相关联的XML数据，描述它或提供补充的相关信息。
                     </li>
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-24ED504A-B966-422A-8A8C-9CD94C85C8BA">场景：照片集的元数据</a><br>用于说明基于模式的资源元数据的使用的场景使用与存储在存储库资源中的摄影图像文件相关联的元数据。您可以创建任意数量的不同类型的元数据以与同一资源相关联。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5570"></a><div class="props_rev_3"><a id="GUID-A8AB40C5-A1ED-4FC5-8377-01EEA7A4E8FC" name="GUID-A8AB40C5-A1ED-4FC5-8377-01EEA7A4E8FC"></a><h4 id="ADXDB-GUID-A8AB40C5-A1ED-4FC5-8377-01EEA7A4E8FC" class="sect4"><span class="enumeration_section">29.1.1</span>元数据的种类 - 术语的使用</h4>
                  <div>
                     <p>术语“元数据”以各种方式在XML的上下文中使用，包括XML模式定义，XML标记和补充资源内容的Oracle XML DB存储库资源信息。</p>
                     <p>除资源元数据（系统定义和用户定义）外，术语“元数据”有时用于指代以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>XML <span class="italic">模式</span>是描述一类XML文档的元数据。
                           </p>
                        </li>
                        <li>
                           <p>XML <span class="italic">标记</span> （元素或属性名称）是用于标记和组织元素内容或属性值的元数据。
                           </p>
                        </li>
                     </ul>
                     <p>您可以通过以下任何方式将元数据与作为存储库资源内容的XML文档相关联：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以将包含元数据信息的其他XML元素添加到资源<span class="italic">内容中</span> 。例如，您可以将数字图像数据包装在XML文档中，该文档还包含描述照片的元素。在这种情况下，数据及其元数据通过位于同一资源的内容中而相关联。应用程序将两者分开并正确关联它们。
                           </p>
                        </li>
                        <li>
                           <p>您可以将特定资源的元数据信息作为<span class="italic">单独资源</span>的内容添加到存储库。在这种情况下，应用程序将此资源视为元数据并将其与数据相关联。
                           </p>
                        </li>
                        <li>
                           <p>您可以将<span class="italic">资源的元</span>数据信息添加为存储库<span class="italic">资源元数据</span> 。在这种情况下，Oracle XML DB会识别元数据。应用程序可以通过查询存储库来<span class="italic">发现</span>此元数据。他们不需要单独告知其存在及其与数据的关联。
                           </p>
                        </li>
                     </ul>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-812175D3-2558-4A84-A038-DF8FD932B7E6" title="您使用的数据通常与不属于内容的其他信息相关联。要以不同方式处理它，您可以使用此类元数据对数据进行分组或分类。">元数据和XML概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5571"></a><div class="props_rev_3"><a id="GUID-CAE23F8E-CF58-429A-BF69-21B5F49C5E98" name="GUID-CAE23F8E-CF58-429A-BF69-21B5F49C5E98"></a><h4 id="ADXDB-GUID-CAE23F8E-CF58-429A-BF69-21B5F49C5E98" class="sect4"><span class="enumeration_section">29.1.2</span>用户定义的资源元数据</h4>
                  <div>
                     <p><span class="italic">用户定义的资源元数据</span>本身<span class="italic">表示为XML</span> ：它是与其他XML数据相关联的XML数据，描述它或提供补充的相关信息。
                     </p>
                     <p>用户定义的资源元数据可以是基于XML模式的，也可以不是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic">基于模式的</span>资源元数据存储在单独的（外联）表中。这些资源与资源OID相关，资源OID存储在元数据表的隐藏对象列<code class="codeph">RESID</code>中。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">不是</span>基于模式，即资源元数据被存储在资源表，资源文件的一部分<code class="codeph">XDB.XDB$RESOURCE</code> 。</p>
                        </li>
                     </ul>
                     <p>您可以利用基于模式的元数据，尤其是对资源执行高效查询和DML操作。在本章中，您将学习如何执行涉及基于模式的资源元数据的以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建并注册定义特定类型资源的元数据的<span class="italic">XML模式</span> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">将</span>元数据<span class="italic">添加</span>到存储库资源，并<span class="italic">更新</span> （修改）此类元数据。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">查询</span>资源元数据以查找关联的内容。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">删除</span>与资源关联的特定元数据，并<span class="italic">清除</span>与资源关联的所有元数据。
                           </p>
                        </li>
                     </ul>
                     <p>此外，您还将学习如何将非基于模式的元数据添加到资源。</p>
                     <p>您通常可以像使用资源数据一样使用用户定义的资源元数据。特别是，版本控制和访问控制管理适用。</p>
                     <p>资源元数据的典型用途包括工作流应用程序，强制用户权限管理，跟踪资源所有权以及控制资源有效性日期。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-812175D3-2558-4A84-A038-DF8FD932B7E6" title="您使用的数据通常与不属于内容的其他信息相关联。要以不同方式处理它，您可以使用此类元数据对数据进行分组或分类。">元数据和XML概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5572"></a><div class="props_rev_3"><a id="GUID-24ED504A-B966-422A-8A8C-9CD94C85C8BA" name="GUID-24ED504A-B966-422A-8A8C-9CD94C85C8BA"></a><h4 id="ADXDB-GUID-24ED504A-B966-422A-8A8C-9CD94C85C8BA" class="sect4"><span class="enumeration_section">29.1.3</span>场景：照片集的元数据</h4>
                  <div>
                     <p>用于说明基于模式的资源元数据的使用的场景使用与存储在存储库资源中的摄影图像文件相关联的元数据。您可以创建任意数量的不同类型的元数据以与同一资源相关联。</p>
                     <p>对于图像文件，示例创建元数据以获取有关以下内容的信息：1）照片的技术方面和2）照片主题或照片可能放置的用途。这两种关联的元数据用于查询照片资源。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-812175D3-2558-4A84-A038-DF8FD932B7E6" title="您使用的数据通常与不属于内容的其他信息相关联。要以不同方式处理它，您可以使用此类元数据对数据进行分组或分类。">元数据和XML概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5574"></a><a id="ADXDB5575"></a><a id="ADXDB5573"></a><div class="props_rev_3"><a id="GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227" name="GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227"></a><h3 id="ADXDB-GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227" class="sect3"><span class="enumeration_section">29.2</span>使用XML模式定义资源元数据</h3>
               <div>
                  <p>在向照片资源添加用户元数据之前，必须使用XML Schema定义此类元数据的结构。为照片资源元数据的每种（技术，类别）创建并注册XML模式。</p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__GUID-8BB4B7B5-9538-46CE-908D-16AC79E09828">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="user-defined-repository-metadata.html#GUID-24ED504A-B966-422A-8A8C-9CD94C85C8BA" title="用于说明基于模式的资源元数据的使用的场景使用与存储在存储库资源中的摄影图像文件相关联的元数据。您可以创建任意数量的不同类型的元数据以与同一资源相关联。">场景：照片集的元数据，</a>用于获取有关示例用户定义的元数据场景的一般信息</p>
                     </div>
                     <p><a href="user-defined-repository-metadata.html#GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__BABCEEAA">例29-1中</a>的XML模式定义了用于描述照片图像文件技术方面的元数据。它使用PL / SQL过程<code class="codeph">DBMS_XMLSCHEMA.registerSchema</code>来注册XML模式。要将此模式标识为定义存储库资源<span class="italic">元数据</span> ，它使用<code class="codeph">ENABLE_HIERARCHY_RESMETADATA</code>作为参数<code class="codeph">enableHierarchy</code>的值。资源内容（数据）是使用值<code class="codeph">ENABLE_HIERARCHY_CONTENTS</code> （默认值）定义的。
                     </p>
                     <p><a href="user-defined-repository-metadata.html#GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__BABCEEAA">例29-1</a>中定义的属性是图像高度，宽度，颜色深度，标题和简要说明。
                     </p>
                     <p><a href="user-defined-repository-metadata.html#GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__BABHHHFC">示例29-2中</a>的XML模式定义了用于对照片图像文件进行分类的元数据：描述其内容或可能的用途。这个简单的示例定义了一个名为<code class="codeph">Category</code>的单一通用属性。
                     </p>
                     <p>请注意，元数据的XML模式定义中没有任何内容限制该信息与任何特定类型的数据相关联。您可以将任何类型的元数据与任何类型的资源相关联。并且多种类型的元数据可以与同一资源相关联。</p>
                     <p>另请注意，XML模式本身并未将其关联数据定义为元数据 - 通过<code class="codeph">enableHierarchy</code>值<code class="codeph">ENABLE_HIERARCHY_RESMETADATA</code>进行此表征的模式<span class="italic">注册</span> 。如果使用<code class="codeph">enableHierarchy</code>值<code class="codeph">ENABLE_HIERARCHY_CONTENTS</code> （默认值）注册了相同的模式，那么它将不定义资源的元数据，而是定义具有相同信息的资源<span class="italic">内容</span> 。相同的XML模式不能在同一名称下多次注册。
                     </p>
                     <div class="infoboxnote" id="GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__GUID-2773A2E9-886B-4425-BB59-567D29899CE6">
                        <p class="notep1">注意：</p>
                        <p>默认情况下，如果用户元数据是基于XML模式的， <code class="codeph">CLOB</code>对象关系存储;如果是非基于XML模式，则作为<code class="codeph">CLOB</code>实例存储。您可以通过将XML模式注册的<code class="codeph">OPTIONS</code>参数设置为<code class="codeph">REGISTER_BINARYXML</code>来存储为二进制XML。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__BABCEEAA">
                     <p class="titleinexample">示例29-1为技术照片信息注册XML架构</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;' <span class="bold">imagetechnique.xsd</span> '，SCHEMADOC =&gt;'&lt;xsd：schema targetNamespace =“inamespace”xmlns：xsd =“http://www.w3.org/2001/XMLSchema”xmlns：xdb = “http://xmlns.oracle.com/xdb”xmlns =“inamespace”&gt; &lt;xsd：element name =“ <span class="bold">ImgTechMetadata</span> ”xdb：defaultTable =“ <span class="bold">IMGTECHMETADATATABLE</span> ”&gt; &lt;xsd：complexType&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“ <span class="bold">Height</span> ”type =“xsd：float”/&gt; &lt;xsd：element name =“ <span class="bold">Width</span> ”type =“xsd：float”/&gt; &lt;xsd：element name =“ <span class="bold">ColorDepth</span> ”type =“xsd：integer”/&gt; &lt;xsd：element name =“ <span class="bold">Title</span> ”type =“xsd：string”/&gt; &lt;xsd：element name =“ <span class="bold">Description</span> ”type =“xsd：string”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ XSD：元件&gt; &lt;/ XSD：架构&gt;”，enableHierarchy =&gt; DBMS_XMLSCHEMA <span class="bold">ENABLE_HIERARCHY_RESMETADATA）;</span>结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-D299AF6E-5A5B-4757-B424-B558D0B5B227__BABHHHFC">
                     <p class="titleinexample">示例29-2注册用于照片分类的XML模式</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;' <span class="bold">imagecategories.xsd</span> '，SCHEMADOC =&gt;'&lt;xsd：schema targetNamespace =“ <span class="bold">cnamespace</span> ”xmlns：xsd =“http://www.w3.org/2001/XMLSchema”xmlns：xdb = “http://xmlns.oracle.com/xdb”xmlns =“cnamespace”&gt; &lt;xsd：element name =“ <span class="bold">ImgCatMetadata</span> ”xdb：defaultTable =“ <span class="bold">IMGCATMETADATATABLE</span> ”&gt; &lt;xsd：complexType&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“ <span class="bold">Categories</span> ”type =“CategoriesType”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：element&gt; &lt;xsd：complexType name =“CategoriesType”&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“ <span class="bold">Category</span> ”type =“xsd：string”maxOccurs =“unbounded”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：schema&gt;'，enableHierarchy =&gt; DBMS_XMLSCHEMA.ENABLE_HIERARCHY_RESMETADATA）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5576"></a><div class="props_rev_3"><a id="GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C" name="GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C"></a><h3 id="ADXDB-GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C" class="sect3"><span class="enumeration_section">29.3</span>资源元数据的添加，修改和删除</h3>
               <div>
                  <p>您可以使用包<code class="codeph">DBMS_XDB_REPOS</code> ，SQL DML语句<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>或WebDAV协议方法<code class="codeph">PROPPATCH</code> PL / SQL过程添加，更新和删除用户定义的资源元数据。</p>
                  <p>您可以通过以下任何方式添加，更新和删除用户定义的资源元数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<code class="codeph">DBMS_XDB_REPOS</code>包中使用PL / SQL过程：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">appendResourceMetadata</code> - 向资源添加元数据</p>
                           </li>
                           <li>
                              <p><code class="codeph">updateResourceMetadata</code> - 修改资源元数据</p>
                           </li>
                           <li>
                              <p><code class="codeph">deleteResourceMetadata</code> - 从资源中删除特定元数据</p>
                           </li>
                           <li>
                              <p><code class="codeph">purgeResourceMetadata</code> - 从资源中删除<span class="italic">所有</span>元数据</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>使用SQL DML语句<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>直接更新资源</p>
                     </li>
                     <li>
                        <p>使用WebDAV协议方法<code class="codeph">PROPPATCH</code></p>
                     </li>
                  </ul>
                  <p>您可以使用SQL DM语句和WebDAV方法<code class="codeph">PROPPATCH</code>以与添加元数据相同的方式更新或删除元数据。如果为其中一个操作提供完整的<code class="codeph">Resource</code>元素，请记住每个资源元数据属性必须是元素<code class="codeph">Resource</code>的子元素（不仅仅是子元素） - 如果您想要多个相同类型的元数据元素，则必须收集它们作为单个父元数据元素的子元素。此类顶级用户定义的资源元数据属性之间的顺序并不重要，并且不一定由Oracle XML DB维护。</p>
                  <p><code class="codeph">DBMS_XDB_REPOS</code>包中的单独PL / SQL过程的<code class="codeph">DBMS_XDB_REPOS</code>类似。每个都可以与基于XML模式或非基于模式的元数据一起使用。某些过程的某些表单（签名）仅适用于基于模式的元数据。程序<code class="codeph">appendResourceMetadata</code>和<code class="codeph">deleteResourceMetadata</code>在此处举例说明。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0">使用APPENDRESOURCEMETADATA添加元数据</a><br>您可以使用过程<code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code>将用户定义的元数据添加到资源。
                     </li>
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-15C67AA1-B53C-4B4E-A768-46236D528593">使用DELETERESOURCEMETADATA删除元数据</a><br>您可以使用过程<code class="codeph">DBMS_XDB_REPOS.deleteResourceMetadata</code>删除与资源关联的特定元数据。要删除与资源关联的<span class="italic">所有</span>元数据，可以使用过程<code class="codeph">DBMS_XDB_REPOS.purgeResourceMetadata</code> 。
                     </li>
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-2A4F858D-D2C1-49AC-8A2C-87AA419D9596">使用SQL DML添加元数据</a><br>使用过程<code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code>添加，更新或删除资源元数据的替代方法是使用DML语句<code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>直接更新<code class="codeph">RESOURCE_VIEW</code> 。</li>
                     <li class="ulchildlink"><a href="user-defined-repository-metadata.html#GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD">使用WebDAV PROPPATCH添加元数据</a><br>使用过程<code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code>添加资源元数据的替代方法是使用WebDAV方法<code class="codeph">PROPPATCH</code> 。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C__GUID-A393D061-0F6B-4DE9-80B1-E209AA525198">
                     <p class="notep1">也可以看看：</p>
                     <p>有关PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>的过程的信息，请参阅<a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74188" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5578"></a><a id="ADXDB5579"></a><a id="ADXDB5577"></a><div class="props_rev_3"><a id="GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0" name="GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0"></a><h4 id="ADXDB-GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0" class="sect4"><span class="enumeration_section">29.3.1</span>使用APPENDRESOURCEMETADATA添加元数据</h4>
                  <div>
                     <p>您可以使用过程<code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code>将用户定义的元数据添加到资源。
                     </p>
                     <div class="section">
                        <p><a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACFBID">示例29-3</a>创建了一个照片资源，并向其添加了类型为<code class="codeph">ImgTechMetadata</code>的基于XML模式的元数据，记录了有关该照片的技术信息。
                        </p>
                        <p><a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACDCJD">示例29-4</a>将类型为<code class="codeph">ImgTechMetadata</code>元数据添加到与<a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACFBID">示例29-3</a>相同的资源中，将照片放在多个用户定义的内容类别中。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACFBID">
                        <p class="titleinexample">示例29-3向资源添加元数据 - 技术照片信息</p><pre class="oac_no_warn" dir="ltr">DECLARE returnbool BOOLEAN; BEGIN returnbool：= DBMS_XDB_REPOS.createResource（'/ public /horse_with_pig.jpg'，bfilename（'MYDIR'，'horse_with_pig.jpg'））; DBMS_XDB_REPOS。 <span class="bold">appendResourceMetadata</span> （'/ public <span class="bold">/horse_with_pig.jpg'，XMLType（'&lt;i：ImgTechMetadata</span> xmlns：i =“inamespace”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation = “inamespace <span class="bold">imagetechnique.xsd</span> ”&gt; &lt;高度&gt; 1024 &lt;/高度&gt; &lt;宽度&gt; 768 &lt;/宽度&gt; &lt;ColorDepth&gt; 24 &lt;/ ColorDepth&gt; &lt;标题&gt;猪骑马&lt;/ Title&gt; &lt;描述&gt;骑猪的图片马在海滩上，在酒店窗外拍摄。&lt;/ Description&gt; &lt;/ i：ImgTechMetadata&gt;'））;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACDCJD">
                        <p class="titleinexample">示例29-4向资源添加元数据 - 照片内容类别</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XDB_REPOS.appendResourceMetadata（'/ public <span class="bold">/horse_with_pig.jpg'，XMLType（'&lt;c：ImgCatMetadata</span> xmlns：c =“cnamespace”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi ：schemaLocation =“cnamespace <span class="bold">imagecategories.xsd</span> ”&gt; &lt;Categories&gt; &lt;Category&gt; Vacation &lt;/ Category&gt; &lt;Category&gt; Animals &lt;/ Category&gt; &lt;Category&gt;幽默&lt;/ Category&gt; &lt;Category&gt; 2005 &lt;/ Category&gt; &lt;/ Categories&gt; &lt; / C：ImgCatMetadata&gt;'））;结束; / PL / SQL过程成功完成。SELECT * FROM imgcatmetadatatable; SYS_NC_ROWINFO $ ------------------------------------------------ -------------------------------- &lt;c：ImgCatMetadata xmlns：c =“cnamespace”xmlns：xsi =“http： //www.w3.org/2001/XMLSche ma-instance“xsi：schemaLocation =”cnamespace imagecategories.xsd“&gt; &lt;Categories&gt; &lt;Category&gt; Vacation &lt;/ Category&gt; &lt;Category&gt; Animals &lt;/ Category&gt; &lt;Category&gt;幽默&lt; / Category&gt; &lt;Category&gt; 2005 &lt;/ Category&gt; &lt;/ Categories&gt; &lt;/ c：ImgCatMetadata&gt;选择了1行。</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C" title="您可以使用包DBMS_XDB_REPOS，SQL DML语句INSERT，UPDATE和DELETE或WebDAV协议方法PROPPATCH中的PL / SQL过程添加，更新和删除用户定义的资源元数据。">资源元数据的添加，修改和删除</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5581"></a><a id="ADXDB5580"></a><div class="props_rev_3"><a id="GUID-15C67AA1-B53C-4B4E-A768-46236D528593" name="GUID-15C67AA1-B53C-4B4E-A768-46236D528593"></a><h4 id="ADXDB-GUID-15C67AA1-B53C-4B4E-A768-46236D528593" class="sect4"><span class="enumeration_section">29.3.2</span>使用DELETERESOURCEMETADATA删除元数据</h4>
                  <div>
                     <p>您可以使用过程<code class="codeph">DBMS_XDB_REPOS.deleteResourceMetadata</code>删除与资源关联的特定元数据。要删除与资源关联的<span class="italic">所有</span>元数据，可以使用过程<code class="codeph">DBMS_XDB_REPOS.purgeResourceMetadata</code> 。
                     </p>
                     <div class="section">
                        <p><a href="user-defined-repository-metadata.html#GUID-15C67AA1-B53C-4B4E-A768-46236D528593__BABEJIGD">例29-5</a>删除了<a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACDCJD">例29-4中</a>添加到照片资源的类别元数据。默认情况下，将删除元数据的资源链接（ <code class="codeph">REF</code> ）和该链接标识的元数据表。可选参数可用于指定仅删除链接。然后保留元数据表，但与资源无关。在此示例中，使用默认行为。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-15C67AA1-B53C-4B4E-A768-46236D528593__BABEJIGD">
                        <p class="titleinexample">示例29-5从资源中删除特定元数据</p><pre class="pre codeblock"><code>BEGIN DBMS_XDB_REPOS。 <span class="bold">deleteResourceMetadata</span> （'/public/horse_with_pig.jpg'，'cnamespace'，'ImgCatMetadata'）;结束; / PL / SQL过程成功完成。SELECT * FROM imgcatmetadatatable;没有选择任何行</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C" title="您可以使用包DBMS_XDB_REPOS，SQL DML语句INSERT，UPDATE和DELETE或WebDAV协议方法PROPPATCH中的PL / SQL过程添加，更新和删除用户定义的资源元数据。">资源元数据的添加，修改和删除</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5583"></a><a id="ADXDB5582"></a><div class="props_rev_3"><a id="GUID-2A4F858D-D2C1-49AC-8A2C-87AA419D9596" name="GUID-2A4F858D-D2C1-49AC-8A2C-87AA419D9596"></a><h4 id="ADXDB-GUID-2A4F858D-D2C1-49AC-8A2C-87AA419D9596" class="sect4"><span class="enumeration_section">29.3.3</span>使用SQL DML添加元数据</h4>
                  <div>
                     <p>使用过程<code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code>添加，更新或删除资源元数据的替代方法是使用DML语句<code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>直接更新<code class="codeph">RESOURCE_VIEW</code> 。</p>
                     <div class="section">
                        <p><a href="user-defined-repository-metadata.html#GUID-2A4F858D-D2C1-49AC-8A2C-87AA419D9596__CIAGJEDB">例29-6</a>说明了以这种方式添加资源元数据。它通过使用SQL语句<code class="codeph">UPDATE</code>将元数据直接插入<code class="codeph">RESOURCE_VIEW</code>来说明如何完成与<a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACFBID">例29-3</a>相同的<a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACFBID">操作</a> 。可以类似地使用其他SQL DML语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2A4F858D-D2C1-49AC-8A2C-87AA419D9596__CIAGJEDB">
                        <p class="titleinexample">示例29-6使用带有RESOURCE_VIEW的DML向元数据添加元数据</p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW SET RES = XMLQuery（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) declare namespace c =“cnamespace”;（：:) copy $ tmp：修改插入节点&lt;c：ImgCatMetadata xmlns：c =“cnamespace”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“cnamespace imagecategories.xsd”&gt; &lt;Categories &gt; &lt;Category&gt;假期&lt;/ Category&gt; &lt;Category&gt;动物&lt;/ Category&gt; &lt;Category&gt;幽默&lt;/ Category&gt; &lt;Category&gt; 2005 &lt;/ Category&gt; &lt;/ Categories&gt; &lt;/ c：ImgCatMetadata&gt; into $ tmp / r：Resource return $ tmp'PASSING RES RETURNING CONTENT）WHERE equals_path（RES，'/ public / horses_with_pig.jpg'）= 1; / SELECT * FROM imgcatmetadatatable; SYS_NC_ROWINFO $ ------------------------------------------------ -------------------------------- &lt;c：ImgCatMetadata xmlns：c =“cnamespace”xmlns：xsi =“http： //www.w3.org/2001/XMLSche ma-instance“xsi：schemaLocation =”cnamespace imagecategories.xsd“&gt; &lt;Categories&gt; &lt;Category&gt; Vacation &lt;/ Category&gt; &lt;Category&gt; Animals &lt;/ Category&gt; &lt;Category&gt;幽默&lt; / Category&gt; &lt;Category&gt; 2005 &lt;/ Category&gt; &lt;/ Categories&gt; &lt;/ c：ImgCatMetadata&gt;选择了1行。
</code></pre><p>以下查询使用<code class="codeph">RESOURCE_VIEW</code>提取插入的元数据，而不是直接使用元数据表<code class="codeph">imgcatmetadatatable</code> 。（为清楚起见，此处显示的结果非常清晰。）
                        </p><pre class="pre codeblock"><code>SELECT XMLQuery（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) declare namespace c =“cnamespace”;（：:) / r：Resource / c：ImgCatMetadata来自RESOURCE_VIEW的'传递RES返回内容'WHERE equals_path（RES，'/ public / guard_with_pig.jpg'）= 1; XMLQUERY（'DECLARENAMESPACER =“HTTP://XMLNS.ORACLE.COM/XDB/XDBRESOURCE.XSD”;（：:) DE ---------------------- -------------------------------------------------- -------- &lt;c：ImgCatMetadata xmlns：c =“cnamespace”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“cnamespace imagecategories.xsd” &gt; &lt;Categories&gt; &lt;Category&gt; Vacation &lt;/ Category&gt; &lt;Category&gt; Animals &lt;/ Category&gt; &lt;Category&gt; Humor &lt;/ Category&gt; &lt;Category&gt; 2005 &lt;/ Category&gt; &lt;/ Categories&gt; &lt;/ c：ImgCatMetadata&gt;选择1行。</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C" title="您可以使用包DBMS_XDB_REPOS，SQL DML语句INSERT，UPDATE和DELETE或WebDAV协议方法PROPPATCH中的PL / SQL过程添加，更新和删除用户定义的资源元数据。">资源元数据的添加，修改和删除</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5584"></a><a id="ADXDB2565"></a><div class="props_rev_3"><a id="GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD" name="GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD"></a><h4 id="ADXDB-GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD" class="sect4"><span class="enumeration_section">29.3.4</span>使用WebDAV PROPPATCH添加元数据</h4>
                  <div>
                     <p>使用过程<code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code>添加资源元数据的替代方法是使用WebDAV方法<code class="codeph">PROPPATCH</code> 。</p>
                     <div class="section">
                        <p>这在<a href="user-defined-repository-metadata.html#GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD__CIAJIIEF">例29-7中</a>说明。您可以类似地更新和删除元数据。
                        </p>
                        <p><a href="user-defined-repository-metadata.html#GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD__CIAJIIEF">例29-7</a>显示了如何通过使用WebDAV方法<code class="codeph">PROPPATCH</code>插入元数据来完成与<a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACDCJD">例子29-4</a>相同的<a href="user-defined-repository-metadata.html#GUID-F2E53FE2-75E7-4CBE-AA66-D5A5176001F0__CIACDCJD">操作</a> 。使用适当的工具，您的应用程序会创建这样一个<code class="codeph">PROPPATCH</code> WebDAV请求，并将其发送到WebDAV服务器进行处理。
                        </p>
                        <p>要更新用户定义的元数据，请以相同的方式继续。要<span class="italic">删除</span>用户定义的元数据，WebDAV请求类似，但它有<code class="codeph">D:remove</code>代替<code class="codeph">D:set</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-065AB9FE-AC85-4AA3-861E-A97AE739E1FD__CIAJIIEF">
                        <p class="titleinexample">示例29-7使用WebDAV PROPPATCH添加元数据</p><pre class="pre codeblock"><code>PROPPATCH /public/horse_with_pig.jpg HTTP / 1.1主机：www.example.com Content-Type：text / xml; charset =“utf-8”内容长度：609授权：基本dGRhZHhkYl9tZXRhOnRkYWR4ZGJfbWV0YQ ==连接：关闭&lt;？xml version =“1.0”encoding =“utf-8”？&gt; &lt;D： <span class="bold">propertyupdate</span> xmlns：D =“ <span class="bold">DAV：</span> ”xmlns：Z =“http://www.w3.com/standards/z39.50/”&gt; &lt;D： <span class="bold">set</span> &gt; &lt;D： <span class="bold">prop</span> &gt; &lt;c：ImgCatMetadata xmlns：c =“cnamespace”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“cnamespace imagecategories.xsd”&gt; &lt;Categories&gt; &lt;Category&gt; Vacation &lt;/ Category&gt; &lt;Category&gt;动物&lt;/ Category&gt; &lt;Category&gt;幽默&lt;/ Category&gt; &lt;Category&gt; 2005 &lt;/ Category&gt; &lt;/ Categories&gt; &lt;/ c：ImgCatMetadata&gt; &lt;/ D：prop&gt; &lt;/ D：set&gt; &lt;/ D： propertyupdate&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-351751BE-25B8-4F4A-9706-5D54A1D93D4C" title="您可以使用包DBMS_XDB_REPOS，SQL DML语句INSERT，UPDATE和DELETE或WebDAV协议方法PROPPATCH中的PL / SQL过程添加，更新和删除用户定义的资源元数据。">资源元数据的添加，修改和删除</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5586"></a><a id="ADXDB5585"></a><div class="props_rev_3"><a id="GUID-71218C70-98BE-4336-A63D-129A1B4BD30A" name="GUID-71218C70-98BE-4336-A63D-129A1B4BD30A"></a><h3 id="ADXDB-GUID-71218C70-98BE-4336-A63D-129A1B4BD30A" class="sect3"><span class="enumeration_section">29.4</span>查询基于XML模式的资源元数据</h3>
               <div>
                  <p>您可以在查询资源元数据时使用元数据列<code class="codeph">RESID</code> ，以使用关联数据加入元数据。
                  </p>
                  <div class="section">
                     <p>使用<code class="codeph">enableHierarchy</code>值<code class="codeph">ENABLE_HIERARCHY_RESMETADATA</code>注册XML模式时，会自动将另一列<code class="codeph">RESID</code>添加到用于存储元数据的<code class="codeph">XMLType</code>表中。此列存储与元数据关联的资源的对象标识符（OID）。查询元数据时可以使用列<code class="codeph">RESID</code> ，以使用关联数据加入元数据。
                     </p>
                     <p>您可以通过以下方式查询元数据：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>查询<code class="codeph">RESOURCE_VIEW</code>以获取元数据。例如：</p><pre class="pre codeblock"><code>SELECT count（*）FROM RESOURCE_VIEW WHERE XMLExists（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) declare namespace c =“cnamespace”;（：:) / r：资源/ c：ImgCatMetadata / Categories / Category [text（）=“Vacation”]'PASSING RES）; COUNT（*）----------选择了1行。
</code></pre></li>
                        <li>
                           <p>直接在基于XML模式的表中查询用户定义的元数据，并将此元数据连接回资源表，确定要选择的资源。使用元数据表的列<code class="codeph">RESID</code>执行此操作。例如：</p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM RESOURCE_VIEW rs， <span class="bold">imgcatmetadatatable ct</span> WHERE XMLExists（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) declare namespace c =“cnamespace”;（ ：:) / r：资源/ c：ImgCatMetadata / Categories / Category'PASSING RES）和<span class="bold">rs。RESID = ct。RESID</span> ; COUNT（*）----------选择了1行。
</code></pre></li>
                     </ul>
                     <p>出于性能原因，Oracle建议直接查询用户定义的元数据。所述的直接查询<code class="codeph">RESOURCE_VIEW</code> <span class="italic">不能</span>单独使用XPath重写<span class="italic">进行优化</span> ，因为没有办法确定是否指定类似的元件<code class="codeph">Category</code>被存储在<code class="codeph">CLOB</code>值或外的线的表。
                     </p>
                     <p>要进一步提高性能，请在要查询的每个元数据列上创建索引。</p>
                     <p><a href="user-defined-repository-metadata.html#GUID-71218C70-98BE-4336-A63D-129A1B4BD30A__BABEHBGB">示例29-8</a>查询两种照片资源元数据，检索被分类为度假照片的资源的路径并且具有标题“Pig Riding Horse”。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-71218C70-98BE-4336-A63D-129A1B4BD30A__BABEHBGB">
                     <p class="titleinexample">示例29-8查询基于XML模式的资源元数据</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW rs，imgcatmetadatatable ct，imgtechmetadatatable tt WHERE XMLExists（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) declare namespace c =“cnamespace”;（ ：:) / r：资源/ c：ImgCatMetadata / Categories / Category [text（）=“Vacation”]'PASSING RES）和XMLExists（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource .xsd“;（：:)声明命名空间i =”inamespace“;（：:) / r：资源/ i：ImgTechMetadata / Title [text（）=”Pig Riding Horse“]'PASSING RES）和rs。RESID = ct。RESID和rs。RESID = tt。渣油; ANY_PATH -------------------------- /public/horse_with_pig.jpg选择了1行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5587"></a><div class="props_rev_3"><a id="GUID-BB7CA0E0-E4A8-496C-BECF-46150BF27865" name="GUID-BB7CA0E0-E4A8-496C-BECF-46150BF27865"></a><h3 id="ADXDB-GUID-BB7CA0E0-E4A8-496C-BECF-46150BF27865" class="sect3"><span class="enumeration_section">29.5</span>二进制图像元数据的XML图像元数据</h3>
               <div>
                  <p>数码相机包括图像元数据作为它们产生的图像文件的一部分。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>EXIF  - 可交换图像文件格式</p>
                     </li>
                     <li>
                        <p>IPTC-NAA IIM  - 国际新闻电信委员会 - 美国报业协会信息交换模型</p>
                     </li>
                     <li>
                        <p>XMP  - 可扩展元数据平台</p>
                     </li>
                  </ul>
                  <p>EXIF是数码相机的元数据标准。EXIF元数据存储在TIFF和JPEG图像文件中。IPTC和XMP元数据通常由桌面图像处理软件嵌入到图像文件中。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5589"></a><a id="ADXDB5588"></a><div class="props_rev_3"><a id="GUID-9D74E515-7FB4-4FE4-B503-3F920AF3071C" name="GUID-9D74E515-7FB4-4FE4-B503-3F920AF3071C"></a><h3 id="ADXDB-GUID-9D74E515-7FB4-4FE4-B503-3F920AF3071C" class="sect3"><span class="enumeration_section">29.6</span>添加基于非模式的资源元数据</h3>
               <div>
                  <p>您存储，是<span class="italic">不是</span>基于XML Schema作为用户定义的资源元数据<code class="codeph">CLOB</code>下实例<code class="codeph">Resource</code>相关的资源要素。
                  </p>
                  <div class="section">
                     <p>资源的默认XML模式具有顶级元素<span class="bold"><code class="codeph">any</code></span> （使用<code class="codeph">maxOccurs= "unbounded"</code> ），它允许任何有效的XML数据作为资源表<code class="codeph">XDB.XDB$RESOURCE</code>资源文档的一部分。</p>
                     <p>以下框架显示了非基于模式的资源元数据的结构和位置：</p><pre class="pre codeblock"><code>&lt;资源xmlns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”&lt;所有者&gt; DESELBY &lt;/ Owner&gt; ... &lt;！ - 其他系统定义的元数据 - &gt; &lt;！ - 内容资源&gt; &lt;目录&gt; ...&lt;/ Contents&gt; &lt;！ - 用户定义的元数据（出现在不同的命名空间中） - &gt; <span class="bold">&lt;MyOwnMetadata xmlns =“http://www.example.com/custommetadata”&gt;</span> <span class="bold">&lt;MyElement1&gt; value1 &lt;/ MyElement1&gt;</span> <span class="bold">&lt;MyElement2&gt; value2 &lt;/ MyElement2&gt;</span> <span class="bold">&lt;/ MyOwnMetadata&gt;</span> &lt;/ Resource&gt;</code></pre><p>您可以使用前面介绍的用于访问基于XML模式的资源元数据的任何方法来设置和访问属于除<code class="codeph">XDBResource.xsd</code>的命名空间的非基于模式的资源元数据。
                     </p>
                     <p><a href="user-defined-repository-metadata.html#GUID-9D74E515-7FB4-4FE4-B503-3F920AF3071C__BABEDFFF">例29-9</a>说明了SQL DML操作的情况，将用户定义的元数据直接添加到<code class="codeph">&lt;RESOURCE&gt;</code> <span class="italic">文档</span> 。它显示了如何使用SQL DML将非基于模式的元数据添加到资源。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9D74E515-7FB4-4FE4-B503-3F920AF3071C__BABEDFFF">
                     <p class="titleinexample">示例29-9将非基于模式的元数据添加到资源</p><pre class="pre codeblock"><code>DECLARE res BOOLEAN; BEGIN res：= DBMS_XDB_REPOS.createResource（'/ public / NurseryRhyme.txt'，bfilename（'MYDIR'，'tdadxdb-xdb_repos_meta-011.txt'），nls_charset_id（'AL32UTF8'））; UPDATE RESOURCE_VIEW SET RES = XMLQuery（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) declare namespace n =“nurserynamespace”;（：:) copy $ tmp： =。修改插入节点&lt;n：NurseryMetadata&gt; &lt;Author&gt; Mother Goose &lt;/ Author&gt; &lt;/ n：NurseryMetadata&gt;到$ tmp / r：资源返回$ tmp'PASSING RES RETURNING CONTENT）WHERE equals_path（RES，'/ public / NurseryRhyme.txt'）= 1;结束; / PL / SQL过程成功完成。SELECT XMLSerialize（DOCUMENT rs。RES AS CLOB）FROM RESOURCE_VIEW rs WHERE equals_path（RES，'/ public / NurseryRhyme.txt'）= 1; XMLSERIALIZE（DOCUMENTRS.RESASCLOB）-------------------------------------------- ------------------------------------ &lt;Resource xmlns =“http://xmlns.oracle.com /xdb/XDBResource.xsd“Hidden =”false“Inv alid =”false“Container =”false“CustomRslv =”false“VersionHistory =”false“StickyR ef =”true“&gt; &lt;CreationDate&gt; 2005-05-24T13：51 ：48.043234 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2005-05-24T13：51：48.290144 &lt;/ ModificationDate&gt; &lt;DisplayName&gt; NurseryRhyme.txt &lt;/ DisplayName&gt; &lt;Language&gt; en-US &lt;/ Language&gt; &lt;CharacterSet&gt; UTF-8 &lt;/ CharacterSet&gt; &lt;ContentType&gt; text / plain &lt;/ ContentType&gt; &lt;RefCount&gt; 1 &lt;/ RefCount&gt; &lt;ACL&gt; &lt;acl description =“Public：PUBLIC的所有权限”xmlns =“http：//xmlns.oracl e.com/xdb /acl.xsd“xmlns：xsi =”http://www.w3.org/2001/XMLSchema-instance“xsi：sch emaLocation =”http://xmlns.oracle.com/xdb/acl.xsd http：/ /xmlns.oracle.com/xdb/acl.xsd“shared =”true“&gt; &lt;ace&gt; &lt;principal&gt; PUBLIC &lt;/ principal&gt; &lt;grant&gt; true &lt;/ grant&gt; &lt;privilege&gt; &lt;all /&gt; &lt;/ privilege&gt; &lt; / ace&gt; &lt;/ acl&gt; &lt;/ ACL&gt; &lt;Owner&gt; TDADXDB_META &lt;/ Owner&gt; &lt;Creator&gt; TDADXDB_META &lt;/ Creator&gt; &lt;LastModifier&gt; TDADXDB_META &lt;/ LastModifier&gt; &lt;SchemaElement&gt; http://xmlns.oracle.com/xdb/XDBSchema.xsd#text &lt;/ SchemaElement&gt; &lt;Contents&gt; &lt;text&gt;玛丽有一只小羊羔它的羊毛是白色如雪，玛丽去的地方，羊羔肯定要去&lt;/ text&gt; &lt;/ Contents&gt; &lt;n：NurseryMetadata xmlns：n =“nurserynamespace”&gt; &lt;作者xmlns =“”&gt;鹅妈妈&lt;/ Author&gt; &lt;/ n ：NurseryMetadata&gt; &lt;/ Resource&gt;选择1行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5590"></a><div class="props_rev_3"><a id="GUID-C224ED8C-338C-41D5-B714-4B9D403E600E" name="GUID-C224ED8C-338C-41D5-B714-4B9D403E600E"></a><h3 id="ADXDB-GUID-C224ED8C-338C-41D5-B714-4B9D403E600E" class="sect3"><span class="enumeration_section">29.7</span>影响资源元数据的PL / SQL过程</h3>
               <div>
                  <p>您可以使用PL / SQL程序<code class="codeph">DBMS_XMLSCHEMA.registerSchema</code> ， <code class="codeph">DBMS_XDBZ.enable_hierarchy</code> ， <code class="codeph">DBMS_XDBZ.disable_hierarchy</code> ， <code class="codeph">DBMS_XDBZ.is_hierarchy_enabled</code> ， <code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code> ， <code class="codeph">DBMS_XDB_REPOS.deleteResourceMetadata</code> ， <code class="codeph">DBMS_XDB_REPOS.purgeResourceMetadata</code>和<code class="codeph">DBMS_XDB_REPOS.updateResourceMetadata</code>执行资源元数据操作。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DBMS_XMLSCHEMA.registerSchema</code> - 注册XML模式。参数<code class="codeph">ENABLEHIERARCHY</code>会影响资源元数据。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDBZ.enable_hierarchy</code> - 为<code class="codeph">XMLType</code>表或视图启用存储库支持。使用参数<code class="codeph">HIERARCHY_TYPE</code> ，其值为<code class="codeph">DBMS_XDBZ.ENABLE_HIERARCHY_RESMETADATA</code>以启用资源元数据。这会添加列<code class="codeph">RESID</code>以跟踪与元数据关联的资源。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDBZ.disable_hierarchy</code> - 禁用<code class="codeph">XMLType</code>表或视图的所有存储库支持。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDBZ.is_hierarchy_enabled</code> - 使用参数<code class="codeph">HIERARCHY_TYPE</code>测试当前是否为指定的<code class="codeph">XMLType</code>表或视图启用了指定的层次结构类型。<code class="codeph">HIERARCHY_TYPE</code>值<code class="codeph">DBMS_XDBZ.IS_ENABLED_RESMETADATA</code>测试是否启用了资源元数据。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDB_REPOS.appendResourceMetadata</code> - 向资源添加元数据。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDB_REPOS.deleteResourceMetadata</code> - 从资源中删除指定的元数据。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDB_REPOS.purgeResourceMetadata</code> - 从资源中删除所有用户定义的元数据。对于基于模式的资源，除了取消链接之外，可以使用可选参数<code class="codeph">DELETE_OPTION</code>来指定是否删除元数据信息。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_XDB_REPOS.updateResourceMetadata</code> - 更新资源的元数据。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C224ED8C-338C-41D5-B714-4B9D403E600E__GUID-002227CC-7A19-4613-B874-449BD20F2CCB">
                     <p class="notep1">也可以看看：</p>
                     <p>有关这些PL / SQL过程的详细信息，请<a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74188" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">用户定义的存储库元数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="04222.using-JMX.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用JMX管理您的应用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96468-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-Runtime-exec.html" title="Previous" type="text/html"></link>
      <link rel="next" href="threading-in-database.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JJDEV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-Runtime-exec.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="threading-in-database.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Java-applications-in-database.html" property="item" typeof="WebPage"><span property="name">Oracle数据库上的Java应用程序</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用JMX管理您的应用程序</li>
            </ol>
            <a id="GUID-DCBEAE2C-7C92-4AE5-8069-CD4E5FFDAFB4" name="GUID-DCBEAE2C-7C92-4AE5-8069-CD4E5FFDAFB4"></a><a id="JJDEV13114"></a>
            
            <h2 id="JJDEV-GUID-DCBEAE2C-7C92-4AE5-8069-CD4E5FFDAFB4" class="sect2"><span class="enumeration_section">2.11</span>使用JMX管理应用程序</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>本节包含以下主题：</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-JMX.html#GUID-793A9AB1-EF01-49E5-89B6-9AC50FE07554">JMX概述</a></p>
                     </li>
                     <li>
                        <p><a href="using-JMX.html#GUID-FDE7091A-893B-4776-8ACB-036196C16CC8">在会话中启用和启动JMX</a></p>
                     </li>
                     <li>
                        <p><a href="using-JMX.html#GUID-6C30D28C-D9C6-4C76-8A8A-A76DD73746DA">设置Oracle JVM JMX默认值和可配置性</a></p>
                     </li>
                     <li>
                        <p><a href="using-JMX.html#GUID-03FE6094-E90E-48A0-B170-12A53AE5398A">对dbms_java.start_jmx_agent的SQL调用示例</a></p>
                     </li>
                     <li>
                        <p><a href="using-JMX.html#GUID-C8B6059B-0A46-418B-B64B-CCB2EBA7EB57">使用JConsole监视和控制Oracle JVM</a></p>
                     </li>
                     <li>
                        <p><a href="using-JMX.html#GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE">重要安全说明</a></p>
                     </li>
                     <li>
                        <p><a href="using-JMX.html#GUID-5C0D0285-3D74-43CF-A9B6-E220464C7273">JMX的共享服务器限制</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV13115"></a><div class="props_rev_3"><a id="GUID-793A9AB1-EF01-49E5-89B6-9AC50FE07554" name="GUID-793A9AB1-EF01-49E5-89B6-9AC50FE07554"></a><h3 id="JJDEV-GUID-793A9AB1-EF01-49E5-89B6-9AC50FE07554" class="sect3"><span class="enumeration_section">2.11.1</span> JMX概述</h3>
               <div>
                  <p>JMX（Java Management Extensions）是一种Java技术，提供用于管理和监视应用程序，系统对象，设备，面向服务的网络和JVM（Java虚拟机）的工具。此API允许动态构造和更改其类。因此，您可以使用此技术在创建，安装和实施资源时监视和管理资源。JMX API还包括远程访问，因此远程管理程序可以与正在运行的应用程序进行交互以实现这些目的。</p>
                  <p>在JMX中，给定资源由一个或多个称为MBean（Managed Beans）的Java对象进行检测。这些MBean在核心托管对象服务器（称为MBean服务器）中注册，该服务器充当管理代理程序，可以在为Java编程语言启用的大多数设备上运行。JMX代理由MBean服务器和一组用于处理MBean的服务组成，MBean服务器在其中注册MBean。</p>
                  <div class="infoboxnotealso" id="GUID-793A9AB1-EF01-49E5-89B6-9AC50FE07554__GUID-306923B2-2AED-4AF9-A289-74492BC782C5">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html</code></a></p>
                        </li>
                        <li>
                           <p><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html" target="_blank"><code class="codeph">http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html</code></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="JJDEV13116"></a><div class="props_rev_3"><a id="GUID-FDE7091A-893B-4776-8ACB-036196C16CC8" name="GUID-FDE7091A-893B-4776-8ACB-036196C16CC8"></a><h3 id="JJDEV-GUID-FDE7091A-893B-4776-8ACB-036196C16CC8" class="sect3"><span class="enumeration_section">2.11.2</span>在会话中启用和启动JMX</h3>
               <div>
                  <div class="section">
                     <p>为了帮助在运行Java的会话中启用和运行JMX服务，提供了<code class="codeph">JMXSERVER</code>角色和<code class="codeph">dbms_java.start_jmx_agent</code>过程。<code class="codeph">JMXSERVER</code>角色被授予特定的Java权限，使您可以在会话中启动和运行MBeanServer和JMX代理。过程<code class="codeph">dbms_java.start_jmx_agent</code>在特定会话中启动代理，该会话通常在会话期间保持活动状态。执行以下操作以启用和启动JMX：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>从<code class="codeph">SYS</code>或<code class="codeph">SYSTEM</code>获取<code class="codeph">JMXSERVER</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt;将jmxserver授予HR;</pre><p>其中， <code class="codeph">HR</code>是用户名。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>调用过程<code class="codeph">dbms_java.start_jmx_agent</code>以在会话中启动JMX。可以使用以下参数调用<code class="codeph">dbms_java.start_jmx_agent</code>过程：</span><div>
                           <p><code class="codeph">port</code> ：JMX侦听器的端口。此参数的值设置Java属性<code class="codeph">com.sun.management.jmxremote.port</code> 。
                           </p>
                           <p><code class="codeph">ssl</code> ：设置Java属性<code class="codeph">com.sun.management.jmxremote.ssl</code>的值。忽略<code class="codeph">true</code>和<code class="codeph">false</code>值的大小写。
                           </p>
                           <p><code class="codeph">auth</code> ：属性<code class="codeph">com.sun.management.jmxremote.authenticate</code>的值，否则是以分号分隔的Java身份验证和授权服务（JAAS）凭据列表。该值不区分大小写。
                           </p>
                           <p>这些参数中的每一个都可以为<code class="codeph">null</code>或省略，其中<code class="codeph">null</code>为默认值。当参数为<code class="codeph">null</code> ，它不会更改会话中相应属性的先前存在的值。
                           </p>
                           <div class="infoboxnote" id="GUID-FDE7091A-893B-4776-8ACB-036196C16CC8__GUID-62F0D3F7-FB22-49B3-954E-251D9FBD6F03">
                              <p class="notep1">注意：</p>
                              <p>与<code class="codeph">dbms_java.start_jmx_agent</code>参数对应的Java属性来自标准Java 5.0 JMX文档中指定的Java属性集。有关Java JMX属性的完整列表，请参阅</p>
                              <p><a href="http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html</code></a></p>
                           </div>
                           <p><code class="codeph">dbms_java.start_jmx_agent</code>过程启动代理程序，以激活OJVM JMX服务器和侦听程序。JMX服务器在当前会话中作为一个或多个守护程序线程运行，并且通常在会话期间可用。在会话中启动JMX代理后，可以监视在会话中运行的Java代码。
                           </p>
                           <p><code class="codeph">dbms_java.start_jmx_agent</code>过程是Java方法<code class="codeph">oracle.aurora.rdbms.的PL / SQL包装器<code class="codeph">oracle.aurora.rdbms.JMXAgent.startOJVMAgent</code> ，它本身也可以从Java存储过程以编程方式调用。<code class="codeph">startOJVMAgent</code>方法启动JMX Server和JMX连接守护程序线程，然后退出。在专用服务器上，这些线程可以在会话期间保持活动状态，但在呼叫之间的时间间隔内进入惰性状态。当这些间隔很短时，相同的套接字连接将以透明方式恢复。这使JConsole等客户端可以在多个调用之间保持连接。
                           </p>
                           <p>使用<code class="codeph">EXIT_CALL_WHEN_ALL_THREADS_TERMINATE</code>策略可以实现不同的JMX监视模式。通过将呼叫退出策略设置为<code class="codeph">OracleRuntime.EXIT_CALL_WHEN_ALL_THREADS_TERMINATE</code> ，您可以将会话配置为在调用<code class="codeph">startOJVMAgent</code>方法的调用中连续运行JMX服务器，直到以编程方式退出Java调用。当从JMX客户端作为特定MBean的操作启动各种Java任务时，此模式很方便。这样，连续JMX管理和监视由这些操作驱动。请参阅JVM JMX演示以获取此类bean，例如<code class="codeph">jmxserv.Load</code> 。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-JMX.html#GUID-5C0D0285-3D74-43CF-A9B6-E220464C7273">JMX的共享服务器限制</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13117"></a><div class="props_rev_3"><a id="GUID-6C30D28C-D9C6-4C76-8A8A-A76DD73746DA" name="GUID-6C30D28C-D9C6-4C76-8A8A-A76DD73746DA"></a><h3 id="JJDEV-GUID-6C30D28C-D9C6-4C76-8A8A-A76DD73746DA" class="sect3"><span class="enumeration_section">2.11.3</span>设置Oracle JVM JMX默认值和可配置性</h3>
               <div>
                  <div class="section">
                     <p>激活<code class="codeph">dbms_java.start_jmx_agent</code> ，属性<code class="codeph">com.sun.management.jmxremote</code>设置为<code class="codeph">true</code> 。在调用<code class="codeph">start_jmx_agent</code>之前，JMXSERVER特权用户可以通过以下方式预设各种管理属性：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用PL / SQL函数<code class="codeph">dbms_java.set_property</code></p>
                        </li>
                        <li>
                           <p>调用方法<code class="codeph">java.lang.System.setProperty</code></p>
                        </li>
                     </ul>
                     <p><code class="codeph">JMXSERVER</code>角色用户还可以预设Java属性<code class="codeph">com.sun.management.config.file</code>指定的数据库驻留Java资源中的属性。在未设置<code class="codeph">com.sun.management.config.file</code>时尝试的此资源的默认名称是<code class="codeph">lib.management.management.properties</code> 。此资源机制是基于标准文件的JMX配置管理的Oracle JVM扩展。这种机制对于Oracle JVM来说是优越的，因为它提供了更多的安全性和每个模式管理。当架构中不存在资源时，尝试将文件读取作为后备。未设置<code class="codeph">com.sun.management.config.file</code>时尝试的默认文件路径是<code class="codeph">$(java.home)/lib/management/management.properties</code> 。在Oracle Database 12 <span class="italic">c中，</span>此文件包含以下预设：</p><pre class="oac_no_warn" dir="ltr">com.sun.management.jmxremote.ssl.need.client.auth = true com.sun.management.jmxremote.authenticate = false</pre><p><code class="codeph">com.sun.management.jmxremote.ssl.need.client.auth</code>属性与<code class="codeph">com.sun.management.jmxremote.ssl</code>一起，将JMX设置为具有客户端和服务器证书的双向加密SSL身份验证。<code class="codeph">com.sun.management.jmxremote.ssl</code>的默认值为<code class="codeph">true</code> 。此配置是默认配置，优先于JAAS密码身份验证。
                     </p>
                     <div class="infoboxnote" id="GUID-6C30D28C-D9C6-4C76-8A8A-A76DD73746DA__GUID-20F891D5-C54A-482C-8746-1201DC7D57BD">
                        <p class="notep1">注意：</p>
                        <p>有关更多信息，请访问以下</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html</code></a></p>
                           </li>
                           <li>
                              <p><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html" target="_blank"><code class="codeph">http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html</code></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnote" id="GUID-6C30D28C-D9C6-4C76-8A8A-A76DD73746DA__GUID-6B326810-D42F-4DBC-B5C6-3FE91E3680C5">
                        <p class="notep1">注意：</p>
                        <p>出于安全原因，Oracle JVM不支持为密码提供基于文件的存储的默认JMX登录模块。因此，如果必须使用JAAS密码身份验证而不是SSL客户端身份验证，则将临时JAAS凭据作为<code class="codeph">auth</code>参数安全地传递给<code class="codeph">dbms_java.start_jmx_agent</code>如本节所示，或者将JMX配置为使用安全的自定义LDAP登录模块。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13118"></a><div class="props_rev_3"><a id="GUID-03FE6094-E90E-48A0-B170-12A53AE5398A" name="GUID-03FE6094-E90E-48A0-B170-12A53AE5398A"></a><h3 id="JJDEV-GUID-03FE6094-E90E-48A0-B170-12A53AE5398A" class="sect3"><span class="enumeration_section">2.11.4</span>对dbms_java.start_jmx_agent的SQL调用示例</h3>
               <div>
                  <div class="section">
                     <p>以下是启动JMX服务器的一些示例：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用前面部分中描述的默认设置或先前在同一会话中设置的值启动JMX服务器和侦听器：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（）;</pre></li>
                        <li>
                           <p>使用前面部分中描述的默认设置或先前在同一会话中设置的值启动JMX服务器和侦听器：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（null，null，null）;</pre></li>
                        <li>
                           <p>在端口9999上启动JMX服务器和侦听器，其他JMX设置具有默认值或在同一会话中先前设置的值：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（'9999'）;</pre></li>
                        <li>
                           <p>在端口9999上启动JMX服务器和侦听器，其他JMX设置具有默认值或在同一会话中先前设置的值：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（'9999'，null，null）;</pre></li>
                        <li>
                           <p>使用JMX设置启动JMX服务器和侦听器，该设置具有默认值或先前在同一会话中设置的值以及JAAS凭据<code class="codeph">monitorRole/1z2x</code>和<code class="codeph">controlRole/2p3o</code> ：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（null，null，'monitorRole / 1z2x; controlRole / 2p3o'）;</pre><p>这些凭证是暂时的。属性<code class="codeph">com.sun.management.jmxremote.authenticate</code>设置为<code class="codeph">true</code> 。
                           </p>
                        </li>
                        <li>
                           <p>在没有SSL且没有JAAS身份验证的情况下在端口9999上启动JMX侦听器。仅用于开发或演示。</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（'9999'，'false'，'false'）;</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-JMX.html#GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE">重要安全说明</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13119"></a><div class="props_rev_3"><a id="GUID-C8B6059B-0A46-418B-B64B-CCB2EBA7EB57" name="GUID-C8B6059B-0A46-418B-B64B-CCB2EBA7EB57"></a><h3 id="JJDEV-GUID-C8B6059B-0A46-418B-B64B-CCB2EBA7EB57" class="sect3"><span class="enumeration_section">2.11.5</span>使用JConsole监视和控制Oracle JVM</h3>
               <div>
                  <div class="section">
                     <p>本节介绍如何使用JConsole（一种标准JMX客户端工具）来监视和控制Oracle JVM。 JConsole是标准Java JDK的一部分。</p>
                     <p>本节讨论以下主题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-JMX.html#GUID-399ADF16-AA1F-491E-8FAC-667E33B3D8E7">使用jconsole命令</a></p>
                        </li>
                        <li>
                           <p><a href="using-JMX.html#GUID-22A8F168-81B8-4CFF-B2F9-1EE281BC1502">关于使用JConsole界面</a></p>
                        </li>
                        <li>
                           <p><a href="using-JMX.html#GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8">OracleRuntime MBean</a></p>
                        </li>
                        <li>
                           <p><a href="using-JMX.html#GUID-78F07301-66B6-44A5-8F12-08C8406223B2">内存阈值</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-C8B6059B-0A46-418B-B64B-CCB2EBA7EB57__GUID-7E6C74C3-6944-456A-AAA1-2BCA338039BA">
                        <p class="notep1">注意：</p>
                        <p>要使用JConsole监视数据库中的Java，您应该有一个运行JMX Agent的服务器端Java会话。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-JMX.html#GUID-FDE7091A-893B-4776-8ACB-036196C16CC8">在会话中启用和启动JMX</a></li>
                     </ul>
                  </div>
               </div>
               <a id="JJDEV13120"></a><div class="props_rev_3"><a id="GUID-399ADF16-AA1F-491E-8FAC-667E33B3D8E7" name="GUID-399ADF16-AA1F-491E-8FAC-667E33B3D8E7"></a><h4 id="JJDEV-GUID-399ADF16-AA1F-491E-8FAC-667E33B3D8E7" class="sect4"><span class="enumeration_section">2.11.5.1</span>使用jconsole命令</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">jconsole</code>命令语法启动JConsole。启动JConsole工具的最简单格式如下：</p><pre class="oac_no_warn" dir="ltr">jconsole [hostName：portNum]</pre><p>哪里：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">hostname</code>是运行应用程序的系统的名称</p>
                           </li>
                           <li>
                              <p><code class="codeph">portNum</code>是JMX侦听器的端口号</p>
                           </li>
                        </ul>
                        <p>在以下示例中，我们通过默认端口9999连接到名为<code class="codeph">example.com</code>的主机。此模式假定不进行身份验证和加密。此模式仅适用于演示或测试，可用于连接使用以下命令启动的Oracle JVM JMX会话：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.start_jmx_agent（ <span class="italic">portNum</span> ，false，false）;</pre><p>请记住，只有当服务器的守护程序线程正在运行且未处于休眠状态时，您才能从JConsole连接到Oracle JVM并与之交互。这意味着会话中应该有一个活动的Java调用，它在指定的端口上运行JMX服务器。在后续Java调用之间的时间间隔内，JMX服务器会保留其状态和统计信息，但无法与JConsole通信。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-JMX.html#GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE">重要安全说明</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDEV13121"></a><div class="props_rev_3"><a id="GUID-22A8F168-81B8-4CFF-B2F9-1EE281BC1502" name="GUID-22A8F168-81B8-4CFF-B2F9-1EE281BC1502"></a><h4 id="JJDEV-GUID-22A8F168-81B8-4CFF-B2F9-1EE281BC1502" class="sect4"><span class="enumeration_section">2.11.5.2</span>关于使用JConsole接口</h4>
                  <div>
                     <div class="section">
                        <p>JConsole界面包含以下选项卡：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>摘要标签</p>
                              <p>它显示有关Oracle JVM的摘要信息以及JMX监视的值。</p>
                           </li>
                           <li>
                              <p>内存选项卡</p>
                              <p>它显示有关内存使用情况的信息</p>
                           </li>
                           <li>
                              <p>线程选项卡</p>
                              <p>它显示有关线程使用的信息。</p>
                           </li>
                           <li>
                              <p>“类”选项卡</p>
                              <p>它显示有关类加载的信息。</p>
                           </li>
                           <li>
                              <p>MBeans选项卡</p>
                              <p>它显示有关MBean的信息。</p>
                           </li>
                           <li>
                              <p>VM选项卡</p>
                              <p>它显示有关Oracle JVM的信息。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-22A8F168-81B8-4CFF-B2F9-1EE281BC1502__GUID-5C12EE87-218C-473F-A974-523F6EAA263A">
                           <p class="notep1">注意：</p>
                           <p>在Oracle Database <span class="italic">12c</span>第1版（12.1）中，收集并传递给JConsole的数据仅限于运行JMX代理的Oracle JVM会话。此数据不包括可能在Oracle JVM中运行的其他会话的属性。 <code class="codeph">OracleRuntime</code> MBean是一个例外，它提供有关Oracle JVM的许多WholeJVM_属性和操作的信息。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-JMX.html#GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8">OracleRuntime MBean</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDEV13124"></a><a id="JJDEV13123"></a><div class="props_rev_3"><a id="GUID-4C7FCC57-9A13-4BEA-8A2F-7500E1AE7800" name="GUID-4C7FCC57-9A13-4BEA-8A2F-7500E1AE7800"></a><h4 id="JJDEV-GUID-4C7FCC57-9A13-4BEA-8A2F-7500E1AE7800" class="sect4"><span class="enumeration_section">2.11.5.3</span>关于查看Oracle JVM摘要信息</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用JConsole接口的Summary选项卡查看Oracle JVM摘要信息。此选项卡显示有关线程使用情况，内存消耗，类加载以及其他VM和操作系统细节的关键监视信息。</p>
                        <p>如果JConsole成功连接到运行JMX代理的Oracle JVM会话，则“概述”选项卡将显示以下图像：</p>
                        <div class="figure" id="GUID-4C7FCC57-9A13-4BEA-8A2F-7500E1AE7800__GUID-910ECBE3-BECD-4CF7-9830-AF68AB0B9FCE">
                           <p class="titleinfigure">图2-6 JConsole接口的Overview选项卡</p><img width="483" src="img/summary_tab.gif" alt="下面是图2-6的描述" title="下面是图2-6的描述" longdesc="img_text/summary_tab.html"><br><a href="img_text/summary_tab.html">“图2-6 JConsole界面的概述选项卡”的描述</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-JMX.html#GUID-4C7FCC57-9A13-4BEA-8A2F-7500E1AE7800__BABBHEFH" title="摘要选项卡字段的说明。">表2-10</a>提供了“概述”选项卡中显示的字段的说明。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4C7FCC57-9A13-4BEA-8A2F-7500E1AE7800__BABBHEFH">
                        <p class="titleintable">表2-10 JConsole界面中“概述”选项卡字段的说明</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="JConsole界面中的Overview选项卡字段的描述" width="100%" border="1" summary="Description of the Summary tab field." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d14592e1286">领域</th>
                                 <th align="left" valign="bottom" width="69%" id="d14592e1289">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1294" headers="d14592e1286 ">
                                    <p>正常运行时间</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1294 d14592e1289 ">
                                    <p>Oracle JVM会话运行的持续时间。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1301" headers="d14592e1286 ">
                                    <p>处理CPU时间</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1301 d14592e1289 ">
                                    <p>Oracle Database <span class="italic">12c</span>第1版（12.1）中的Oracle JVM会话未收集此信息。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1311" headers="d14592e1286 ">
                                    <p>直播线程</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1311 d14592e1289 ">
                                    <p>当前活动守护程序和非守护程序线程的数量。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1318" headers="d14592e1286 ">
                                    <p>峰</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1318 d14592e1289 ">
                                    <p>自Oracle JVM启动以来最多的活动线程数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1325" headers="d14592e1286 ">
                                    <p>守护程序线程</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1325 d14592e1289 ">
                                    <p>当前活动守护程序线程数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1332" headers="d14592e1286 ">
                                    <p>总计已开始</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1332 d14592e1289 ">
                                    <p>自Oracle JVM启动以来启动的线程总数。它包括守护进程，非守护进程和终止线程。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1339" headers="d14592e1286 ">
                                    <p>当前堆大小</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1339 d14592e1289 ">
                                    <p>堆当前占用的千字节数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1346" headers="d14592e1286 ">
                                    <p>承诺的记忆</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1346 d14592e1289 ">
                                    <p>分配给堆使用的内存总量。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1353" headers="d14592e1286 ">
                                    <p>最大堆大小</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1353 d14592e1289 ">
                                    <p>堆占用的最大千字节数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1360" headers="d14592e1286 ">
                                    <p>待完成的对象</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1360 d14592e1289 ">
                                    <p>待完成的对象数量。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1367" headers="d14592e1286 ">
                                    <p>垃圾收集器信息</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1367 d14592e1289 ">
                                    <p>有关垃圾收集器的信息，包括名称，执行的集合数以及执行垃圾收集所花费的总时间。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1375" headers="d14592e1286 ">
                                    <p>加载当前类</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1375 d14592e1289 ">
                                    <p>当前加载到内存中以供执行的类数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1382" headers="d14592e1286 ">
                                    <p>已加载的课程总数</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1382 d14592e1289 ">
                                    <p>自会话启动以来加载到会话内存中的类总数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1389" headers="d14592e1286 ">
                                    <p>卸载总类</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1389 d14592e1289 ">
                                    <p>从内存中卸载的类数。对于Oracle Database 12 <span class="italic">c</span>第1版（12.1），通常为零。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1399" headers="d14592e1286 ">
                                    <p>物理内存总量</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1399 d14592e1289 ">
                                    <p>Oracle Database <span class="italic">12c</span>第1版（12.1）中的Oracle JVM会话未收集此信息。因此，显示的值为零。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1409" headers="d14592e1286 ">
                                    <p>免费物理内存</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1409 d14592e1289 ">
                                    <p>Oracle Database <span class="italic">12c</span>第1版（12.1）中的Oracle JVM会话未收集此信息。因此，显示的值为零。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d14592e1419" headers="d14592e1286 ">
                                    <p>承诺的虚拟内存</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d14592e1419 d14592e1289 ">
                                    <p>Oracle Database <span class="italic">12c</span>第1版（12.1）中的Oracle JVM会话未收集此信息。因此，显示的值为零。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="JJDEV13126"></a><div class="props_rev_3"><a id="GUID-92C9ACC2-387F-432D-8D1A-6CDDA20B9AB9" name="GUID-92C9ACC2-387F-432D-8D1A-6CDDA20B9AB9"></a><h4 id="JJDEV-GUID-92C9ACC2-387F-432D-8D1A-6CDDA20B9AB9" class="sect4"><span class="enumeration_section">2.11.5.4</span>关于监视内存消耗</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用JConsole接口的Memory选项卡来监视内存消耗。此选项卡提供有关内存消耗和内存池的信息。Memory选项卡如图2-7所示。</p>
                        <div class="figure" id="GUID-92C9ACC2-387F-432D-8D1A-6CDDA20B9AB9__BABIJHFD">
                           <p class="titleinfigure">图2-7 JConsole接口的Memory选项卡</p><img src="img/memory_tab.gif" width="445" alt="下面是图2-7的描述" title="下面是图2-7的描述" longdesc="img_text/memory_tab.html"><br><a href="img_text/memory_tab.html">“图2-7 JConsole接口的Memory选项卡”的描述</a></div>
                        <!-- class="figure" -->
                        <p>“内存”选项卡上的图表显示了整个内存空间以及特定内存池的Oracle JVM内存使用情况与时间的关系。可用于Oracle JVM的内存池反映了Oracle JVM的内部组织，并对应于Oracle JVM内存管理器的对象内存。此版本的Oracle数据库中的可用内存池是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>新一代空间</p>
                              <p>这是最初为大多数对象分配内存的内存池。这个池也被称为伊甸园空间。</p>
                           </li>
                           <li>
                              <p>老一代空间</p>
                              <p>此内存池包含在Eden Space中的垃圾收集过程中幸存的对象。这个游泳池也被称为生存空间。</p>
                           </li>
                           <li>
                              <p>Malloc /自由空间</p>
                              <p>此内存池包含以malloc / free方式为其分配和释放内存的对象。</p>
                           </li>
                           <li>
                              <p>迁移空间结束</p>
                              <p>此内存池包含在会话结束迁移后仍然存在的对象。</p>
                           </li>
                           <li>
                              <p>专用会话空间</p>
                              <p>此内存池用于在Oracle Dedicated Sessions模式下为会话对象分配内存。</p>
                           </li>
                           <li>
                              <p>分页会话空间</p>
                              <p>此内存池用于将内存分配给大型和分页的会话对象。</p>
                           </li>
                           <li>
                              <p>运行空间</p>
                              <p>此内存池用于为临时和辅助对象分配内存。</p>
                           </li>
                           <li>
                              <p>堆栈空间</p>
                              <p>此内存池用于将内存分配给临时对象，为其分配内存并以类似堆栈的方式释放内存。</p>
                           </li>
                        </ul>
                        <p>“内存”选项卡中的“详细信息”区域显示包含以下内容的当前内存矩阵：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用过的</p>
                              <p>此矩阵表示运行会话的进程当前使用的内存量。</p>
                           </li>
                           <li>
                              <p>承诺</p>
                              <p>此矩阵表示保证可供Oracle JVM使用的内存量，就好像已分配内存一样。承诺内存量可能会随时间而变化。但是，Committed内存总是大于或等于Used memory。</p>
                           </li>
                           <li>
                              <p>马克斯</p>
                              <p>此矩阵表示可用于内存管理的最大内存量。它通常对应于Oracle JVM的初始配置。</p>
                           </li>
                        </ul>
                        <p>“内存”选项卡右下角的条形图显示了各个内存池占用的内存。当使用的内存超过内存使用量阈值时，条形变为红色。您可以通过<code class="codeph">MemoryMXBean</code>的属性设置内存使用量阈值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-JMX.html#GUID-78F07301-66B6-44A5-8F12-08C8406223B2">内存阈值</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDEV13128"></a><div class="props_rev_3"><a id="GUID-039B5F6A-E5EB-4D64-88EA-16E73677A903" name="GUID-039B5F6A-E5EB-4D64-88EA-16E73677A903"></a><h4 id="JJDEV-GUID-039B5F6A-E5EB-4D64-88EA-16E73677A903" class="sect4"><span class="enumeration_section">2.11.5.5</span>关于监视线程使用</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用JConsole接口的“线程”选项卡来监视线程使用情况。</p>
                        <div class="figure" id="GUID-039B5F6A-E5EB-4D64-88EA-16E73677A903__GUID-C855D29D-9925-4926-A54D-7F0D00470A2B">
                           <p class="titleinfigure">图2-8 JConsole接口的“线程”选项卡</p><img width="447" src="img/thread_tab.gif" alt="下面是图2-8的描述" title="下面是图2-8的描述" longdesc="img_text/thread_tab.html"><br><a href="img_text/thread_tab.html">“图2-8 JConsole接口的”线程“选项卡”的说明</a></div>
                        <!-- class="figure" -->
                        <p>“线程”选项卡上的图表显示了活动线程数与时间的关系，特定颜色代表特定类型的线程：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>洋红色表示线程总数</p>
                           </li>
                           <li>
                              <p>红色表示线程的峰值数</p>
                           </li>
                           <li>
                              <p>蓝色表示活动线程数</p>
                           </li>
                        </ul>
                        <p>此选项卡上的线程列表显示活动线程。在列表中选择一个线程，以在右窗格中显示有关该线程的信息。此信息包括线程的名称，状态和堆栈跟踪。</p>
                        <p>Filter字段有助于缩小线程。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13130"></a><div class="props_rev_3"><a id="GUID-0D4841B7-E7A8-4A4B-AE8F-9AE43E49EC2B" name="GUID-0D4841B7-E7A8-4A4B-AE8F-9AE43E49EC2B"></a><h4 id="JJDEV-GUID-0D4841B7-E7A8-4A4B-AE8F-9AE43E49EC2B" class="sect4"><span class="enumeration_section">2.11.5.6</span>关于监控类加载</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用JConsole接口的Classes选项卡来监视类加载。此选项卡上的图表显示了加载的类数与时间的关系。</p>
                        <div class="figure" id="GUID-0D4841B7-E7A8-4A4B-AE8F-9AE43E49EC2B__GUID-026CA565-9EE1-45B3-B640-2269D77E5A40">
                           <p class="titleinfigure">图2-9 JConsole接口的Classes选项卡</p><img width="451" src="img/classes_tab.gif" alt="下面是图2-9的描述" title="下面是图2-9的描述" longdesc="img_text/classes_tab.html"><br><a href="img_text/classes_tab.html">“图2-9 JConsole接口的Classes选项卡”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13133"></a><a id="JJDEV13134"></a><a id="JJDEV13135"></a><a id="JJDEV13132"></a><div class="props_rev_3"><a id="GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772" name="GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772"></a><h4 id="JJDEV-GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772" class="sect4"><span class="enumeration_section">2.11.5.7</span>关于监视和管理MBean</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用MBeans选项卡来监视和管理MBean。此选项卡显示有关使用平台MBean服务器注册的所有MBean的信息。</p>
                        <p>MBean选项卡左窗格中的树称为MBean树，它显示所有MBean，根据其对象名称进行组织。在MBean树中选择MBean时，其属性，操作，通知和其他信息将显示在右窗格中。例如，在<a href="using-JMX.html#GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__CEGBGEDE">图2-10中</a> ，我们在左侧的MBean树中选择了<code class="codeph">Old Generation</code> MemoryPool MBean，并在右侧显示了<code class="codeph">Old Generation</code> MemoryPool MBean的属性。
                        </p>
                        <div class="figure" id="GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__CEGBGEDE">
                           <p class="titleinfigure">图2-10显示MBean的属性</p><img width="387" src="img/mbeans_tab.gif" alt="下面是图2-10的描述" title="下面是图2-10的描述" longdesc="img_text/mbeans_tab.html"><br><a href="img_text/mbeans_tab.html">“图2-10显示MBean的属性”的描述</a></div>
                        <!-- class="figure" -->
                        <p>您可以设置属性的值（如果它是可写的）。可写值以蓝色显示。例如，在<a href="using-JMX.html#GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__CEGBGEDE">图2-10中</a> ，属性<code class="codeph">CollectionUaageThreshold</code>和<code class="codeph">UsageThreshold</code>是可写的。
                        </p>
                        <p>您还可以通过双击属性值来显示属性值与时间的图表。例如，如果单击<code class="codeph">GCManager</code> MBean的<code class="codeph">CollectionTime</code>属性的值，则会看到类似于<a href="using-JMX.html#GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__BABHFJIC">图2-11</a>的图表：</p>
                        <div class="figure" id="GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__BABHFJIC">
                           <p class="titleinfigure">图2-11显示属性值的图表</p><img width="499" src="img/chart.gif" alt="下面是图2-11的描述" title="下面是图2-11的描述" longdesc="img_text/chart.html"><br><a href="img_text/chart.html">“图2-11显示属性值的图表”的描述</a></div>
                        <!-- class="figure" -->
                        <p>您可以通过单击属性来显示复杂属性的详细信息。例如，您可以显示Memory Pools的<code class="codeph">Usage</code>和<code class="codeph">PeakUsage</code>属性的详细信息， <a href="using-JMX.html#GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__BABEDCDH">如图2-12</a>所示：</p>
                        <div class="figure" id="GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__BABEDCDH">
                           <p class="titleinfigure">图2-12在MBeans选项卡中显示复杂属性的详细信息</p><img width="421" src="img/complex_attr.gif" alt="下面是图2-12的描述" title="下面是图2-12的描述" longdesc="img_text/complex_attr.html"><br><a href="img_text/complex_attr.html">“图2-12在MBeans选项卡中显示复杂属性的详细信息”的说明</a></div>
                        <!-- class="figure" -->
                        <p>MBean的Operations选项卡提供可管理性界面。例如，可以通过单击“ <span class="bold">执行垃圾收集”</span>在内存池或内存管理器上调用<span class="bold">垃圾收集</span> 。Oracle JVM的JMX演示，即<code class="codeph">javavm/demo/jmx/</code> ，提供了几个加载到Oracle JVM中的其他自定义MBean。下面是一个示例，显示了<code class="codeph">DBProps</code> Mbean的<code class="codeph">getProp</code>操作的结果：</p>
                        <div class="figure" id="GUID-6B3DB0B4-3FA4-47BD-B2BF-9EBB60709772__GUID-8B6367C5-8202-468F-9D33-7A08E7F0276B">
                           <p class="titleinfigure">图2-13 JConsole接口的MBeans选项卡的“操作”选项卡</p><img width="509" src="img/operations.gif" alt="下面是图2-13的描述" title="下面是图2-13的描述" longdesc="img_text/operations.html"><br><a href="img_text/operations.html">“图2-13 JConsole接口的MBeans选项卡的操作选项卡”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13137"></a><div class="props_rev_3"><a id="GUID-6D9785E9-0961-43AB-B9F7-49655A9150FC" name="GUID-6D9785E9-0961-43AB-B9F7-49655A9150FC"></a><h4 id="JJDEV-GUID-6D9785E9-0961-43AB-B9F7-49655A9150FC" class="sect4"><span class="enumeration_section">2.11.5.8</span>关于查看虚拟机信息</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用JConsole界面的VM选项卡查看VM信息。</p>
                        <div class="figure" id="GUID-6D9785E9-0961-43AB-B9F7-49655A9150FC__GUID-09037EF2-8938-4AF3-B03E-0B8FF7ACB8A4">
                           <p class="titleinfigure">图2-14 JConsole接口的VM选项卡</p><img width="450" src="img/vm_tab.gif" alt="下面是图2-14的描述" title="下面是图2-14的描述" longdesc="img_text/vm_tab.html"><br><a href="img_text/vm_tab.html">“图2-14 JConsole接口的VM选项卡”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13139"></a><a id="JJDEV13140"></a><a id="JJDEV13141"></a><a id="JJDEV13142"></a><a id="JJDEV13138"></a><div class="props_rev_3"><a id="GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8" name="GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8"></a><h4 id="JJDEV-GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8" class="sect4"><span class="enumeration_section">2.11.5.9</span> OracleRuntime MBean</h4>
                  <div>
                     <div class="section">
                        <p>从Oracle Database <span class="italic">11g</span>第2版（11.2）开始，在调用<code class="codeph">dbms_java.start_jmx_agent</code>过程时，将新的MBean <code class="codeph">OracleRuntime</code>添加到Oracle JVM平台MBean列表中。此MBean特定于Oracle JVM。</p>
                        <p><code class="codeph">OracleRuntime</code> MBean的Attributes选项卡公开了<code class="codeph">oracle.aurora.vm.操作的大多数参数<code class="codeph">oracle.aurora.vm.OracleRuntime</code>类。<a href="using-JMX.html#GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABGEHFG">图2-15</a>显示了<code class="codeph">OracleRuntime</code> MBean的Attributes选项卡。
                        </p>
                        <div class="figure" id="GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABGEHFG">
                           <p class="titleinfigure">图2-15 OracleRuntime MBean的“属性”选项卡</p><img width="506" src="img/oracleruntimembean1.gif" alt="下面是图2-15的描述" title="下面是图2-15的描述" longdesc="img_text/oracleruntimembean1.html"><br><a href="img_text/oracleruntimembean1.html">“图2-15 OracleRuntime MBean的属性选项卡”的说明</a></div>
                        <!-- class="figure" -->
                        <p>以黑色显示的参数是只读的，不能修改。例如， <code class="codeph">JavaPoolSize</code> ， <code class="codeph">Platform</code>等。蓝色值是读/写，这意味着您可以修改它们。<code class="codeph">OracleRuntime</code> MBean的大多数属性都是本地会话的本地属性。
                        </p>
                        <p><code class="codeph">OracleRuntime</code> MBean的<code class="codeph">WholeJVM_</code>属性是全局的。这些属性反映了从<code class="codeph">v$session</code>和<code class="codeph">v$sesstat</code>性能视图收集的数据库实例中所有启用Java的会话的Oracle JVM内存使用情况统计信息的总数。<a href="using-JMX.html#GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABICDGG">图2-16</a>显示了<code class="codeph">OracleRuntime</code> MBean的<code class="codeph">WholeJVM_</code>属性。
                        </p>
                        <div class="figure" id="GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABICDGG">
                           <p class="titleinfigure">图2-16 OracleRuntime MBean</p><img width="502" src="img/oracleruntimembean2.gif" alt="下面是图2-16的描述" title="下面是图2-16的描述" longdesc="img_text/oracleruntimembean2.html"><br><a href="img_text/oracleruntimembean2.html">“图2-16 OracleRuntime MBean”的说明</a></div>
                        <!-- class="figure" -->
                        <p><code class="codeph">OracleRuntime</code> MBean的Operations选项卡公开了<code class="codeph">OracleRuntime</code>许多操作<code class="codeph">oracle.aurora.vm.OracleRuntime</code>类。
                        </p>
                        <p>此外，可以使用<code class="codeph">sessionsRunningJava</code>和<code class="codeph">sessionDetailsBySID</code>操作监视特定Java活动数据库会话的各个内存消耗统计信息， <a href="using-JMX.html#GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABJFCEC">如图2-17</a>和<a href="using-JMX.html#GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABHDBFC">图2-18所示</a> 。
                        </p>
                        <div class="figure" id="GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABJFCEC">
                           <p class="titleinfigure">图2-17操作sessionsRunningJava</p><img width="500" src="img/oracleruntimembean3.gif" alt="下面是图2-17的描述" title="下面是图2-17的描述" longdesc="img_text/oracleruntimembean3.html"><br><a href="img_text/oracleruntimembean3.html">“图2-17操作sessionsRunningJava”的描述</a></div>
                        <!-- class="figure" -->
                        <div class="figure" id="GUID-EEB89F85-D68D-48A7-B28D-59F40E1314C8__BABHDBFC">
                           <p class="titleinfigure">图2-18操作sessionDetailsBySID</p><img width="505" src="img/oracleruntimembean4.gif" alt="下面是图2-18的描述" title="下面是图2-18的描述" longdesc="img_text/oracleruntimembean4.html"><br><a href="img_text/oracleruntimembean4.html">“图2-18操作sessionDetailsBySID”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13144"></a><a id="JJDEV13145"></a><a id="JJDEV13143"></a><div class="props_rev_3"><a id="GUID-78F07301-66B6-44A5-8F12-08C8406223B2" name="GUID-78F07301-66B6-44A5-8F12-08C8406223B2"></a><h4 id="JJDEV-GUID-78F07301-66B6-44A5-8F12-08C8406223B2" class="sect4"><span class="enumeration_section">2.11.5.10</span>内存阈值</h4>
                  <div>
                     <p>使用阈值是内存池的可管理属性。集合使用阈值是某些垃圾收集内存池的可管理属性。您可以将其中每个设置为正值，以启用池的相应阈值检查。将阈值设置为零会禁用内存池的阈值检查。默认情况下，禁用所有Oracle JVM池的阈值检查。</p>
                     <p>使用阈值和集合使用阈值在MBeans选项卡中设置。例如，如果从左窗格中的树中选择“旧生成”内存池，并将此内存池的使用率阈值设置为20兆字节，将集合阈值设置为1兆字节，则一段时间后，阈值计数将显示阈值交叉事件的数量<a href="using-JMX.html#GUID-78F07301-66B6-44A5-8F12-08C8406223B2__BABCIIBF">如图2-19</a>所示：</p>
                     <div class="figure" id="GUID-78F07301-66B6-44A5-8F12-08C8406223B2__BABCIIBF">
                        <p class="titleinfigure">图2-19在MBeans选项卡中设置使用率阈值和集合使用阈值</p><img width="486" src="img/memory_threshold.gif" alt="下面是图2-19的描述" title="下面是图2-19的描述" longdesc="img_text/memory_threshold.html"><br><a href="img_text/memory_threshold.html">“图2-19在MBeans选项卡中设置使用率阈值和集合使用阈值”的说明</a></div>
                     <!-- class="figure" -->
                     <p>当旧代内存池的内存使用量超过20兆字节时，表示JConsole界面中的旧代内存池的部分条形变为红色。红色部分表示已用内存超出使用阈值的部分。表示堆内存的条也变为红色， <a href="using-JMX.html#GUID-78F07301-66B6-44A5-8F12-08C8406223B2__BABHDHFJ">如图2-20</a>所示：</p>
                     <div class="figure" id="GUID-78F07301-66B6-44A5-8F12-08C8406223B2__BABHDHFJ">
                        <p class="titleinfigure">图2-20当使用的内存超过使用率阈值时，JConsole接口的“内存”选项卡</p><img width="485" src="img/exceed_usage.gif" alt="下面是图2-20的描述" title="下面是图2-20的描述" longdesc="img_text/exceed_usage.html"><br><a href="img_text/exceed_usage.html">“当使用的内存超过使用阈值时，图2-20 JConsole接口的内存选项卡”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="JJDEV13146"></a><div class="props_rev_3"><a id="GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE" name="GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE"></a><h3 id="JJDEV-GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE" class="sect3"><span class="enumeration_section">2.11.6</span>重要安全说明</h3>
               <div>
                  <div class="section">
                     <p>通过使用禁用的SSL和身份验证启动远程侦听器，您违反了一般安全准则，从而使服务器容易受到攻击。因此，始终建议不要在生产环境中使用此类模式。支持此模式以与JDK兼容并进行开发; Oracle JVM中JMX的任何生产用途都必须使用安全的JMX连接。</p>
                     <p>向<code class="codeph">dbms_java.set_property</code> ， <code class="codeph">System.setProperty</code>或<code class="codeph">dbms_java.start_jmx_agent</code>提供与安全相关的属性值时，请使用非echo侦听器，或通过安全应用程序层（如Oracle Application Server）的加密JDBC连接调用这些值。不要将密码存储在明文文件中。使用Oracle Wallet创建和管理证书。使用客户端证书进行SSL身份验证以提高安全性
                     </p>
                     <div class="infoboxnotealso" id="GUID-3E6BB95F-9749-400C-A8BA-6677AB4FCDDE__GUID-97475714-5930-49AD-84A1-65DFAF47C48A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../dbseg/introduction-to-oracle-database-security.html#DBSEG-GUID-41040F53-D7A6-48FA-A92A-0C23118BC8A0" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13633"></a><div class="props_rev_3"><a id="GUID-5C0D0285-3D74-43CF-A9B6-E220464C7273" name="GUID-5C0D0285-3D74-43CF-A9B6-E220464C7273"></a><h3 id="JJDEV-GUID-5C0D0285-3D74-43CF-A9B6-E220464C7273" class="sect3"><span class="enumeration_section">2.11.7</span> JMX的共享服务器限制</h3>
               <div>
                  <div class="section">
                     <p>在专用模式服务器上，会话期间支持JMX连接。共享服务器JMX连接通常仅限于一次调用。导致此限制的主要因素是JMX连接本质上依赖于操作系统资源（如线程和套接字）。这些资源不能在共享服务器调用边界中存在。因此，仅在单个呼叫期间完全支持JMX连接。</p>
                     <div class="infoboxnote" id="GUID-5C0D0285-3D74-43CF-A9B6-E220464C7273__GUID-F8524F4B-2029-4A26-BA5A-04B9A0C3D317">
                        <p class="notep1">注意：</p>
                        <p>此限制仅影响代理连接，而不影响在其中注册的MBeanSrver和Mbeans的状态。MBeanSrver和Mbeans的状态，特别是统计信息，在共享服务器调用边界之间是持久的。</p>
                     </div>
                     <p>如果使用专用服务器模式不可行，您仍可按照以下准则建立JMX连接并监视共享服务器：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>规划在单个Java调用中发生的所有JMX管理和监视活动。</p>
                        </li>
                        <li>
                           <p>不要通过调用<code class="codeph">DBMS_JAVA.set_property</code>函数来设置<code class="codeph">com.sun.management.jmxremote.port</code>属性，也不要使用<code class="codeph">DBMS_JAVA.start_jmx_agent</code>方法，因为这些调用会激活JMX并引入共享服务器调用边界。而是通过调用<code class="codeph">oracle.aurora.rdbms.启动JMX代理<code class="codeph">oracle.aurora.rdbms.JMXAgent.startOJVMAgent</code>方法直接来自要监视的Java代码。应将<code class="codeph">com.sun.management.jmxremote.port</code>属性的值传递给<code class="codeph">startOJVMAgent</code>方法。除<code class="codeph">com.sun.management.jmxremote.port</code>属性之外的与JMX相关的属性不会唤醒JMX代理，可以使用任何方法进行设置。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="shared-server-consideration.html#GUID-94B10C5C-91C0-48EC-9C41-98FE4C2E2F9E">共享服务器注意事项</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="01252.general-considerations-of-using-transparent-data-encryption.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="When you use Transparent Data Encryption, you should consider factors such as security, performance, and storage overheads."></meta>
      <meta name="description" content="When you use Transparent Data Encryption, you should consider factors such as security, performance, and storage overheads."></meta>
      <title>使用透明数据加密的一般注意事项</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Security Guide "></meta>
      <meta property="og:description" content="When you use Transparent Data Encryption, you should consider factors such as security, performance, and storage overheads."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96301-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-keystores-encryption-keys-in-isolated-mode.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-transparent-data-encryption-with-other-oracle-features.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ASOAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-keystores-encryption-keys-in-isolated-mode.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-transparent-data-encryption-with-other-oracle-features.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">使用透明数据加密</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用透明数据加密的一般注意事项</li>
            </ol>
            <a id="GUID-F02C9CBF-0374-408B-8655-F7531B681D41" name="GUID-F02C9CBF-0374-408B-8655-F7531B681D41"></a><a id="ASOAG10478"></a>
            
            <h2 id="ASOAG-GUID-F02C9CBF-0374-408B-8655-F7531B681D41" class="sect2"><span class="enumeration_chapter">7</span>使用透明数据加密的一般注意事项</h2>
         </header>
         <div class="ind">
            <div>
               <p>使用透明数据加密时，应考虑安全性，性能和存储开销等因素。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2A7F5371-3F24-4956-8F51-3568DEF885EB">加密数据的压缩和重复数据删除</a><br>通过表空间加密，Oracle数据库在加密表空间之前压缩表和索引。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F">透明数据加密的安全注意事项</a><br>与所有Oracle数据库功能一样，您应该在创建TDE策略时考虑安全性。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B">透明数据加密的性能和存储开销</a><br>透明数据加密的性能可能会有所不同。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-401720E6-463B-4473-ACE8-AF1B6127821F">修改您的应用程序以使用透明数据加密</a><br>您可以修改应用程序以使用透明数据加密。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-AE301545-A8FF-4FDD-B493-F4D5ADF42245">ALTER SYSTEM和orapki如何映射到管理密钥管理</a><br><code class="codeph">ALTER SYSTEM</code>语句中的许多子句对应于<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-5600990E-F520-4F10-BF68-63756E595262">使用透明数据加密和PKI加密</a><br>PKI加密已弃用，但如果您仍在使用它，则必须考虑几个问题。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-A29FA261-ECDB-4B99-A864-8FFD95568813">数据从外部文件加载到具有加密列的表</a><br>您可以使用SQL * Loader执行从文件到具有加密列的表的数据加载。
                  </li>
                  <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-A637AB50-2A54-4248-8DC2-F50729C38B97">透明数据加密和数据库关闭操作</a><br>在关闭数据库之前，应确保打开软件或硬件密钥库。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="asopart1.html" title="第一部分介绍了如何使用透明数据加密。">使用透明数据加密</a></p>
                  </div>
               </div>
            </div>
            <a id="ASOAG10358"></a><div class="props_rev_3"><a id="GUID-2A7F5371-3F24-4956-8F51-3568DEF885EB" name="GUID-2A7F5371-3F24-4956-8F51-3568DEF885EB"></a><h3 id="ASOAG-GUID-2A7F5371-3F24-4956-8F51-3568DEF885EB" class="sect3">加密数据的压缩和重复数据删除</h3>
               <div>
                  <p>通过表空间加密，Oracle数据库在加密表空间之前压缩表和索引。</p>
                  <p>这可确保您从压缩中获得最大的空间和性能优势，同时还可以获得静态加密的安全性。在<code class="codeph">CREATE TABLESPACE</code> SQL语句中，包括<code class="codeph">COMPRESS</code>和<code class="codeph">ENCRYPT</code>子句。
                  </p>
                  <p>使用列加密，Oracle数据库在加密列后压缩数据。这意味着压缩对加密列的效果最小。有一个值得注意的例外：如果列是SecureFiles LOB，并且使用SecureFiles LOB加密实现加密，并且使用SecureFiles LOB压缩和重复数据删除实现压缩（可能还有重复数据删除），则在加密之前执行压缩。与表空间加密的<code class="codeph">CREATE TABLESPACE</code>语句类似，包括<code class="codeph">COMPRESS</code>和<code class="codeph">ENCRYPT</code>子句。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-2A7F5371-3F24-4956-8F51-3568DEF885EB__GUID-621659FF-09B0-4C4E-B9F4-515B9A97B448">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关高级压缩选件的详细信息<a href="../bradv/configuring-rman-client-advanced.html#BRADV187" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关SecureFiles LOB存储的信息，请参见<a href="../adlob/using-oracle-LOBs-storage.html#ADLOB45162" target="_blank"><span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关SecureFiles压缩的信息，请参见<a href="../adlob/using-oracle-LOBs-storage.html#ADLOB46109" target="_blank"><span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG9552"></a><div class="props_rev_3"><a id="GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F" name="GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F"></a><h3 id="ASOAG-GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F" class="sect3">透明数据加密的安全注意事项</h3>
               <div>
                  <p>与所有Oracle数据库功能一样，您应该在创建TDE策略时考虑安全性。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-ED481093-51B0-42F2-BADB-E5E55889AD47">透明数据加密一般安全建议</a><br>透明数据加密（TDE）的安全考虑因素在更广泛的系统安全性范围内运行。
                     </li>
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-9E283E61-E4CA-4E3A-A99C-4F31ABE0787F">透明数据加密列加密特定建议</a><br>使用TDE时，其他安全注意事项适用于正常的数据库和网络操作。</li>
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-8DBBE636-3166-4828-92C1-12C93194C17D">管理明文片段的安全性</a><br>您应该删除随时间推移可能出现的旧明文片段。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10359"></a><div class="sect3"><a id="GUID-ED481093-51B0-42F2-BADB-E5E55889AD47" name="GUID-ED481093-51B0-42F2-BADB-E5E55889AD47"></a><h4 id="ASOAG-GUID-ED481093-51B0-42F2-BADB-E5E55889AD47" class="sect4">透明数据加密一般安全建议</h4>
                  <div>
                     <p>透明数据加密（TDE）的安全考虑因素在更广泛的系统安全性范围内运行。</p>
                     <p>请遵循以下一般准则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>确定数据库中数据的敏感程度，所需的保护以及要解决的风险级别。例如，可以使用AES256算法加密需要更强保护的高度敏感数据。可以使用无<a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">盐</span></a>或<code class="codeph">nomac</code>选项来保护不那么敏感的数据库，以实现性能优势。
                           </p>
                        </li>
                        <li>
                           <p>评估数据和密钥库保护可接受的成本和收益。密钥保护决定了要使用的密钥库的类型：自动登录软件密钥库，基于密码的软件密钥库或硬件密钥库。</p>
                        </li>
                        <li>
                           <p>考虑为TDE和数据库分别设置安全管理员。</p>
                        </li>
                        <li>
                           <p>考虑为TDE提供单独的独占密钥库。</p>
                        </li>
                        <li>
                           <p>为加密数据实施受保护的备份过程。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F" title="与所有Oracle数据库功能一样，您应该在创建TDE策略时考虑安全性。">透明数据加密的安全注意事项</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10360"></a><div class="props_rev_3"><a id="GUID-9E283E61-E4CA-4E3A-A99C-4F31ABE0787F" name="GUID-9E283E61-E4CA-4E3A-A99C-4F31ABE0787F"></a><h4 id="ASOAG-GUID-9E283E61-E4CA-4E3A-A99C-4F31ABE0787F" class="sect4">透明数据加密列加密特定建议</h4>
                  <div>
                     <p>使用TDE时，其他安全注意事项适用于正常的数据库和网络操作。</p>
                     <p>加密列数据在数据文件，撤消日志，重做日志和系统全局区域（SGA）的缓冲区高速缓存中保持加密状态。但是，在表达式评估期间解密数据，使得解密数据可以出现在磁盘上的交换文件中。特权操作系统用户可以查看此数据。</p>
                     <p>使用TDE加密的列值以加密形式存储在数据文件中。但是，这些数据文件可能仍然包含一些<a href="glossary.html#GUID-268B0C3E-D1AD-482D-939C-A9A6522A8E8D"><span class="xrefglossterm">明文</span></a>片段，称为幻像拷贝，由表上的过去数据操作遗留下来。这类似于在操作系统删除文件后在磁盘上查找数据。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F" title="与所有Oracle数据库功能一样，您应该在创建TDE策略时考虑安全性。">透明数据加密的安全注意事项</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10361"></a><div class="props_rev_3"><a id="GUID-8DBBE636-3166-4828-92C1-12C93194C17D" name="GUID-8DBBE636-3166-4828-92C1-12C93194C17D"></a><h4 id="ASOAG-GUID-8DBBE636-3166-4828-92C1-12C93194C17D" class="sect4">管理明文片段的安全性</h4>
                  <div>
                     <p>您应该删除随时间推移可能出现的旧明文片段。</p>
                     <div class="section">
                        <p>旧的<a href="glossary.html#GUID-268B0C3E-D1AD-482D-939C-A9A6522A8E8D"><span class="xrefglossterm">明文</span></a>片段可能存在一段时间，直到数据库覆盖包含这些值的块。如果特权操作系统用户绕过数据库的访问控制，则他们可能能够直接访问包含表空间的数据文件中的这些值。
                        </p>
                        <p>为了最大限度地降低风</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>在新数据文件中创建新表空间。</p>
                              <p>您可以使用<code class="codeph">CREATE TABLESPACE</code>语句来创建此表空间。
                              </p>
                           </li>
                           <li>
                              <p>将包含加密列的表移动到新表空间。你可以使用<code class="codeph">ALTER TABLE.....MOVE</code>声明。
                              </p>
                              <p>对原始表空间中的所有对象重复此步骤。</p>
                           </li>
                           <li>
                              <p>删除原始表空间。</p>
                              <p>您可以使用<code class="codeph">DROP TABLESPACE</code> <span class="italic"><code class="codeph">tablespace</code></span> <code class="codeph">INCLUDING CONTENTS KEEP DATAFILES</code>语句。Oracle建议您使用特定于平台的实用程序安全地删除数据文件。
                              </p>
                           </li>
                           <li>
                              <p>使用特定于平台和特定于文件系统的实用程序来安全地删除旧数据文件。此类实用程序的示例包括<code class="codeph">shred</code> （在Linux上）和<code class="codeph">sdelete</code> （在Windows上）。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-0D1A22F0-8F5F-4EB6-8E37-84A6055A1D5F" title="与所有Oracle数据库功能一样，您应该在创建TDE策略时考虑安全性。">透明数据加密的安全注意事项</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ASOAG9549"></a><div class="props_rev_3"><a id="GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" name="GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B"></a><h3 id="ASOAG-GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" class="sect3">透明数据加密的性能和存储开销</h3>
               <div>
                  <p>透明数据加密的性能可能会有所不同。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-13FCC847-A665-4BE4-AF3F-AD9F455D6295">透明数据加密的性能开销</a><br>透明数据加密表空间加密具有较小的关联性能开销。
                     </li>
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-24F03ED5-D3E1-4868-879F-834A4440B94B">透明数据加密的存储开销</a><br>TDE表空间加密没有存储开销，但TDE列加密具有一些相关的存储开销。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG9550"></a><div class="props_rev_3"><a id="GUID-13FCC847-A665-4BE4-AF3F-AD9F455D6295" name="GUID-13FCC847-A665-4BE4-AF3F-AD9F455D6295"></a><h4 id="ASOAG-GUID-13FCC847-A665-4BE4-AF3F-AD9F455D6295" class="sect4">透明数据加密的性能开销</h4>
                  <div>
                     <p>透明数据加密表空间加密具有较小的关联性能开销。</p>
                     <p>对应用程序的实际性能影响可能有所不同仅当从加密列检索数据或将数据插入加密列时，TDE列加密才会影响性能。对于涉及未加密列的操作，即使这些列位于包含加密列的表中，也不会降低性能。访问加密列中的数据涉及较小的性能开销，并且您观察到的确切开销可能会有所不同。</p>
                     <p>总性能开销取决于加密列的数量及其访问频率。最适合加密的列是包含最敏感数据的列。</p>
                     <p>对现有表启用加密会导致完整表更新，就像修改表特性的任何其他<code class="codeph">ALTER TABLE</code>操作一样。在对大型现有表启用加密之前，请记住对数据库服务器的潜在性能和重做日志影响。
                     </p>
                     <p>在启用加密，重新生成<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表键</span></a>或正在更改加密算法时，写入操作暂时无法访问<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">表</span></a> 。您可以使用联机表重定义来确保该表在此类过程中可用于写入操作。
                     </p>
                     <p>如果在非常大的表上启用TDE列加密，则可能需要增加重做日志大小以适应操作。</p>
                     <p>加密索引列比加密没有索引的列需要更多时间。如果必须加密在其上构建索引的列，则可以尝试删除索引，使用<code class="codeph">NO SALT</code>加密列，然后重新创建索引。
                     </p>
                     <p>如果索引加密列，则会在加密值上创建索引。在查询加密列中的值时，Oracle数据库会透明地加密SQL查询中使用的值。然后，它使用加密值执行索引查找。</p>
                     <div class="infoboxnote" id="GUID-13FCC847-A665-4BE4-AF3F-AD9F455D6295__GUID-715968D0-7652-411E-94AD-A42AB225191D">
                        <p class="notep1">注意：</p>
                        <p>如果必须对索引的加密列执行范围扫描，则使用TDE表空间加密代替TDE列加密。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-13FCC847-A665-4BE4-AF3F-AD9F455D6295__GUID-B4D8DE68-23D0-4843-B996-1438FE7B8382">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-transparent-data-encryption.html#GUID-936CC3D2-8102-454C-AC49-D0126929D738" title="外部表功能使您可以访问外部源中的数据，就像数据位于数据库表中一样。">在外部表中创建加密列</a></p>
                           </li>
                           <li>
                              <p>有关在线重新定义表的信息，请参见<a href="../admin/managing-tables.html#ADMIN01514" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" title="透明数据加密的性能可能会有所不同。">透明数据加密的性能和存储开销</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG9551"></a><div class="props_rev_3"><a id="GUID-24F03ED5-D3E1-4868-879F-834A4440B94B" name="GUID-24F03ED5-D3E1-4868-879F-834A4440B94B"></a><h4 id="ASOAG-GUID-24F03ED5-D3E1-4868-879F-834A4440B94B" class="sect4">透明数据加密的存储开销</h4>
                  <div>
                     <p>TDE表空间加密没有存储开销，但TDE列加密具有一些相关的存储开销。</p>
                     <p>加密列数据必须具有比<a href="glossary.html#GUID-268B0C3E-D1AD-482D-939C-A9A6522A8E8D"><span class="xrefglossterm">明文</span></a>数据更多的存储空间。此外，TDE将加密值填充为16字节的倍数。这意味着如果信用卡号码需要9个字节进行存储，那么加密的信用卡值将需要额外的7个字节。
                     </p>
                     <p>每个加密值还与20字节完整性检查相关联。如果您使用<code class="codeph">NOMAC</code>参数的加密列，则不适用。如果数据是用<a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">salt</span></a>加密的，那么每个加密值都需要额外的16个字节的存储空间。
                     </p>
                     <p>每个加密值的最大存储开销为1到52个字节。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-936CC3D2-8102-454C-AC49-D0126929D738" title="外部表功能使您可以访问外部源中的数据，就像数据位于数据库表中一样。">在外部表中创建加密列</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" title="透明数据加密的性能可能会有所不同。">透明数据加密的性能和存储开销</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10342"></a><div class="props_rev_3"><a id="GUID-401720E6-463B-4473-ACE8-AF1B6127821F" name="GUID-401720E6-463B-4473-ACE8-AF1B6127821F"></a><h3 id="ASOAG-GUID-401720E6-463B-4473-ACE8-AF1B6127821F" class="sect3">修改您的应用程序以使用透明数据加密</h3>
               <div>
                  <p>您可以修改应用程序以使用透明数据加密。</p>
                  <div class="section">
                     <ol>
                        <li>
                           <p>为TDE配置软件或硬件密钥库，然后设置主加密密钥。</p>
                           <p>有关更多信息，请参阅以下部分：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列来验证是否已创建主加密密钥。
                           </p>
                        </li>
                        <li>
                           <p>识别需要透明数据加密保护的敏感列（例如包含信用卡数据的列）。</p>
                        </li>
                        <li>
                           <p>决定是使用TDE列加密还是TDE表空间加密。</p>
                           <p>有关更多信息，请参阅以下部分：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="introduction-to-transparent-data-encryption.html#GUID-547EA215-9576-4C61-A414-3DA3287692A4" title="透明数据加密（TDE）列加密可保护存储在表列中的机密数据，如信用卡和社会保险号。">透明数据加密列加密的工作原理</a></p>
                              </li>
                              <li>
                                 <p><a href="introduction-to-transparent-data-encryption.html#GUID-688B2CA5-EB00-4BEE-9486-9046670CCA70" title="透明数据加密（TDE）表空间加密使您可以加密整个表空间。">透明数据加密表空间加密的工作原理</a></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>打开密钥库。</p>
                           <p>有关更多信息，请参阅以下部分：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。">第3步：打开硬件密钥库</a></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>加密列或表空间。</p>
                           <p>有关更多信息，请参阅以下部分：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG10467"></a><a id="ASOAG10408"></a><div class="props_rev_3"><a id="GUID-AE301545-A8FF-4FDD-B493-F4D5ADF42245" name="GUID-AE301545-A8FF-4FDD-B493-F4D5ADF42245"></a><h3 id="ASOAG-GUID-AE301545-A8FF-4FDD-B493-F4D5ADF42245" class="sect3">ALTER SYSTEM和orapki如何映射到管理密钥管理</h3>
               <div>
                  <p><code class="codeph">ALTER SYSTEM</code>语句中的许多子句对应于<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句。
                  </p>
                  <p><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-AE301545-A8FF-4FDD-B493-F4D5ADF42245__CIHHJJCC" title="ALTER SYSTEM如何映射到管理密钥管理">表7-1</a>将<code class="codeph">ALTER SYSTEM</code>语句的透明数据加密用法与先前版本的<code class="codeph">orapki</code>实用程序与<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句进行了比较。
                  </p>
                  <div class="tblformalwide" id="GUID-AE301545-A8FF-4FDD-B493-F4D5ADF42245__CIHHJJCC">
                     <p class="titleintable">表7-1 ALTER SYSTEM和orapki如何映射到管理密钥管理</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="ALTER SYSTEM和orapki如何映射到管理密钥管理" width="100%" border="1" summary="How ALTER SYSTEM Maps to ADMINISTER KEY MANAGEMENT" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="22%" id="d45546e1303">行为</th>
                              <th align="left" valign="bottom" width="33%" id="d45546e1306">ALTER SYSTEM或orapki</th>
                              <th align="left" valign="bottom" width="45%" id="d45546e1309">管理员密钥管理</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1314" headers="d45546e1303 ">
                                 <p>创建密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1314 d45546e1306 ">
                                 <p>对于软件密钥库（在以前的版本中称为钱包）：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ENCRYPTION KEY [“ <span class="italic">certificate_ID</span> ”]由<span class="italic">keystore_password</span>标识;</pre><p>对于硬件密钥库，配置硬件安全模块后可以使用密钥库。</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1314 d45546e1309 ">
                                 <p>对于软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理密钥管理密钥库创建<span class="italic">“keystore_location”</span> IDENTIFIED BY <span class="italic">software_keystore_password</span></pre><p>对于硬件密钥库，配置硬件安全模块后可以使用密钥库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1343" headers="d45546e1303 ">
                                 <p>创建自动登录密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1343 d45546e1306 "><pre class="oac_no_warn" dir="ltr">orapki钱包创建-wallet <span class="italic">wallet_location</span> -auto_login [-pwd <span class="italic">密码</span> ]</pre></td>
                              <td align="left" valign="top" width="45%" headers="d45546e1343 d45546e1309 ">
                                 <p>对于软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE [LOCAL] AUTO_LOGIN密钥库FROM IDENTIFIED BY <span class="italic">software_keystore_password</span>密钥库<span class="italic">'keystore_location';</span></pre><p>此类密钥库仅适用于软件密钥库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1369" headers="d45546e1303 ">
                                 <p>打开密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1369 d45546e1306 "><pre class="oac_no_warn" dir="ltr">更改系统设置加密钱包由<span class="italic">密码</span>识别;</pre></td>
                              <td align="left" valign="top" width="45%" headers="d45546e1369 d45546e1309 "><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN由<span class="italic">keystore_password</span>标识[CONTAINER = ALL |当前];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1385" headers="d45546e1303 ">
                                 <p>关闭密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1385 d45546e1306 "><pre class="oac_no_warn" dir="ltr">更改系统设置加密钱包关闭由<span class="italic">密码</span>识别;</pre></td>
                              <td align="left" valign="top" width="45%" headers="d45546e1385 d45546e1309 ">
                                 <p>对于软件和硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE CLOSE由<span class="italic">keystore_password</span>识别[CONTAINER = ALL |当前];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1403" headers="d45546e1303 ">
                                 <p>从硬件密钥库迁移到软件密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1403 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1403 d45546e1309 "><pre class="oac_no_warn" dir="ltr">管理员密钥管理集由<span class="italic">software_keystore_password</span>标识的加密密钥REVERSE MIGRATE使用“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”[WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1425" headers="d45546e1303 ">
                                 <p>从软件密钥库迁移到硬件密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1425 d45546e1306 "><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ENCRYPTION KEY由“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”标识MIGRATE使用<span class="italic">wallet_password</span> ;</pre></td>
                              <td align="left" valign="top" width="45%" headers="d45546e1425 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集由“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”标识的加密密钥MIGRATE使用<span class="italic">software_keystore_password</span> ;</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1453" headers="d45546e1303 ">
                                 <p>更改密钥库密码</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1453 d45546e1306 "><pre class="oac_no_warn" dir="ltr">orapki钱包change_pwd -wallet <span class="italic">wallet_location</span> [-oldpwd <span class="italic">密码</span> ] [-newpwd <span class="italic">密码</span> ]</pre></td>
                              <td align="left" valign="top" width="45%" headers="d45546e1453 d45546e1309 ">
                                 <p>对于基于密码的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理ALTER存储密码IDENTIFIED BY <span class="italic">software_keystore_old_password</span> SET <span class="italic">software_keystore_new_password</span> [WITH BACKUP [USING <span class="italic">'backup_identifier']];</span></pre><p>对于硬件密钥库，关闭密钥库，在硬件安全模块界面中更改密钥库，然后重新打开密钥库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1485" headers="d45546e1303 ">
                                 <p>备份基于密码的软件密钥库</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1485 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1485 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理BACKUP密钥库[USING <span class="italic">'backup_identifier</span> '] IDENTIFIED BY <span class="italic">software_keystore_password</span> [TO' <span class="italic">keystore_location'];</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1504" headers="d45546e1303 ">
                                 <p>将两个软件密钥库合并到第三个新密钥库中</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1504 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1504 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE密钥库<span class="italic">'keystore1_location'[IDENTIFIED</span> BY <span class="italic">software_keystore1_password]</span> AND密钥库<span class="italic">'keystore2_location'[IDENTIFIED</span> BY <span class="italic">software_keystore2_password]</span> INTO IDENTIFIED BY <span class="italic">software_keystore3_password</span>新的密钥库<span class="italic">'keystore3_location';</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1533" headers="d45546e1303 ">
                                 <p>将一个软件密钥库合并到另一个现有密钥库中</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1533 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1533 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE密钥库<span class="italic">'keystore1_location'[IDENTIFIED</span> BY <span class="italic">software_keystore1_password]</span> INTO IDENTIFIED BY <span class="italic">software_keystore2_password</span> EXISTNG密钥库<span class="italic">'keystore2_location'[WITH</span> BACKUP [USING <span class="italic">'backup_identifier']];</span></pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1558" headers="d45546e1303 ">
                                 <p>设置或重新加密主加密密钥</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1558 d45546e1306 ">
                                 <p>对于软件钱包：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ENCRYPTION KEY [“ <span class="italic">certificate_ID</span> ”]由<span class="italic">keystore_password</span>标识;</pre><p>对于硬件安全模块：</p><pre class="oac_no_warn" dir="ltr">由“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”标识的ALTER SYSTEM SET ENCRYPTION键</pre><p><span class="bold">注意：重新生成</span> <code class="codeph">ALTER SYSTEM SET ENCRYPTION KEY</code> ， <code class="codeph">ALTER SYSTEM SET ENCRYPTION KEY</code>语句不会更新<code class="codeph">V$ENCRYPTION_KEYS</code>动态视图。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1558 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集加密密钥[使用标记' <span class="italic">标记</span> ']由<span class="italic">keystore_password</span> IDENTIFIED WITH BACKUP [使用' <span class="italic">backup_identifier</span> '] [CONTAINER = ALL |当前];</pre><p>重新加密密钥后，将更新<code class="codeph">V$ENCRYPTION_KEYS</code>动态视图。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1611" headers="d45546e1303 ">
                                 <p>为以后的用户创建主加密密钥</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1611 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1611 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理创建密钥[使用标记' <span class="italic">标记</span> '] IDENTIFIED BY <span class="italic">keystore_password</span> [WITH BACKUP [ <span class="italic">USING'backup_identifier</span> ']] [CONTAINER =（ALL | CURRENT）];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1630" headers="d45546e1303 ">
                                 <p>激活主加密密钥</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1630 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1630 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理使用密钥' <span class="italic">key_identifier</span> '[使用标签' <span class="italic">标签</span> ']通过<span class="italic">keystore_password</span>标识[WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1652" headers="d45546e1303 ">
                                 <p>为主加密密钥创建自定义标记</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1652 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1652 d45546e1309 "><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理设置标记' <span class="italic">标记</span> ' <span class="italic">FOR'master_key_identifier</span> '标识为<span class="italic">keystore_password</span> [WITH BACKUP [ <span class="italic">USING'backup_identifier</span> ']];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1674" headers="d45546e1303 ">
                                 <p>导出主加密密钥</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1674 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1674 d45546e1309 "><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出[加密]密钥“ <span class="italic">export_secret</span> ”到“ <span class="italic">file_path</span> ”由<span class="italic">software_keystore_password</span>识别[WITH IDENTIFIER <span class="italic">IN'key_id1</span> '，' <span class="italic">key_id2</span> '，' <span class="italic">key_idn</span> '| （ <span class="italic">SQL_query</span> ）]</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1706" headers="d45546e1303 ">
                                 <p>导入主加密密钥</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1706 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1706 d45546e1309 "><pre class="oac_no_warn" dir="ltr">管理员密钥管理导入[加密]密钥为“ <span class="italic">import_secret</span> ”| <span class="italic">FROM'file_name</span> '由<span class="italic">software_keystore_password</span>标识[WITH BACKUP [ <span class="italic">USING'backup_identifier</span> ']];</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d45546e1728" headers="d45546e1303 ">
                                 <p>将Oracle数据库机密存储在密钥库中</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d45546e1728 d45546e1306 ">
                                 <p>无法使用</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d45546e1728 d45546e1309 ">
                                 <p>对于软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密|更新秘密|删除秘密“ <span class="italic">秘密</span> ”为客户' <span class="italic">client_identifier</span> '[使用标签' <span class="italic">标签</span> ']由<span class="italic">keystore_password</span>识别[WITH BACKUP [使用' <span class="italic">backup_identifier</span> '];</pre><p>对于硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密|更新秘密|删除秘密“ <span class="italic">秘密</span> ”为客户' <span class="italic">client_identifier</span> '[使用标签' <span class="italic">标签</span> ']标识为“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”[WITH BACKUP [ <span class="italic">USING'backup_identifier</span> '];</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG10447"></a><div class="props_rev_3"><a id="GUID-5600990E-F520-4F10-BF68-63756E595262" name="GUID-5600990E-F520-4F10-BF68-63756E595262"></a><h3 id="ASOAG-GUID-5600990E-F520-4F10-BF68-63756E595262" class="sect3">使用透明数据加密和PKI加密</h3>
               <div>
                  <p>PKI加密已弃用，但如果您仍在使用它，则必须考虑几个问题。</p>
                  <div class="infoboxnote" id="GUID-5600990E-F520-4F10-BF68-63756E595262__GUID-F51266EE-499D-43D0-B1D0-C84E1E6E0796">
                     <p class="notep1">注意：</p>
                     <p>不推荐使用PKI加密和透明数据加密。要配置透明数据加密，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL语句。
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-EE33CECD-B9A6-4996-8E87-612DBF60E489">软件主加密密钥与PKI密钥对一起使用</a><br>主加密密钥可以是指定用于加密的PKI证书的现有密钥对。
                     </li>
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-4A7209B9-0B3E-424E-AAE2-DE635D3AACD7">具有PKI加密的TDE表空间和硬件密钥库</a><br>PKI加密是一种加密系统，它使用两个密钥（公钥和私钥）来加密数据。
                     </li>
                     <li class="ulchildlink"><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-72A07686-B782-40E3-99A6-9EF8E885EE87">备份和恢复PKI密钥对</a><br>对于软件密钥库，透明数据加密支持使用PKI非对称密钥对作为列加密的主加密密钥。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10448"></a><div class="props_rev_3"><a id="GUID-EE33CECD-B9A6-4996-8E87-612DBF60E489" name="GUID-EE33CECD-B9A6-4996-8E87-612DBF60E489"></a><h4 id="ASOAG-GUID-EE33CECD-B9A6-4996-8E87-612DBF60E489" class="sect4">软件主加密密钥与PKI密钥对一起使用</h4>
                  <div>
                     <p>主加密密钥可以是指定用于加密的PKI证书的现有密钥对。</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果您已在组织中部署PKI，则可以使用PKI服务，例如密钥托管和恢复。但是，使用当前PKI算法的加密比对称密钥加密需要更多的系统资源。在访问数据库中的加密列时，使用PKI密钥对作为主加密密钥可能会导致性能下降。</p>
                        </li>
                        <li>
                           <p>对于基于PKI的密钥，不会强制执行证书吊销列表，因为强制执行证书吊销可能会导致无法访问数据库中的所有加密信息。但是，您无法使用相同的证书再次创建主加密密钥。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-5600990E-F520-4F10-BF68-63756E595262" title="PKI加密已弃用，但如果您仍在使用它，则必须考虑几个问题。">使用透明数据加密和PKI加密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10449"></a><div class="props_rev_3"><a id="GUID-4A7209B9-0B3E-424E-AAE2-DE635D3AACD7" name="GUID-4A7209B9-0B3E-424E-AAE2-DE635D3AACD7"></a><h4 id="ASOAG-GUID-4A7209B9-0B3E-424E-AAE2-DE635D3AACD7" class="sect4">具有PKI加密的TDE表空间和硬件密钥库</h4>
                  <div>
                     <p>PKI加密是一种加密系统，它使用两个密钥（公钥和私钥）来加密数据。</p>
                     <p></p>
                     <p>您不能将基于PKI的加密与TDE表空间加密或硬件密钥库一起使用。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-5600990E-F520-4F10-BF68-63756E595262" title="PKI加密已弃用，但如果您仍在使用它，则必须考虑几个问题。">使用透明数据加密和PKI加密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG9547"></a><div class="props_rev_3"><a id="GUID-72A07686-B782-40E3-99A6-9EF8E885EE87" name="GUID-72A07686-B782-40E3-99A6-9EF8E885EE87"></a><h4 id="ASOAG-GUID-72A07686-B782-40E3-99A6-9EF8E885EE87" class="sect4">备份和恢复PKI密钥对</h4>
                  <div>
                     <p>对于软件密钥库，透明数据加密支持使用PKI非对称密钥对作为列加密的主加密密钥。</p>
                     <p>这使数据库能够使用领先的证书颁发机构供应商提供的现有密钥备份，托管和恢复功能。</p>
                     <p>在当前密钥托管或恢复系统中，具有密钥恢复功能的证书颁发机构通常存储私钥的版本或帮助恢复私钥的一条信息。如果私钥丢失，则可以通过联系证书颁发机构并启动密钥恢复过程来恢复原始密钥和证书。</p>
                     <p>通常，密钥恢复过程是自动的，并且要求用户向证书颁发机构提供某些认证凭证。除了恢复的密钥及其相关证书是可以导入密钥库的PKCS＃12文件之外，TDE对密钥恢复过程没有任何限制。此要求与主要证书颁发机构的密钥恢复机制一致。</p>
                     <p>获取具有原始证书和私钥的PKCS＃12文件后，必须在与前一个密钥库相同的位置创建一个空密钥库。然后，您可以使用相同的实用程序将PKCS＃12文件导入新的密钥库。选择一个强密码来保护密钥库。</p>
                     <p>使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句创建密钥库并导入正确的加密密钥后，登录到数据库并在SQL提示符下运行以下<code class="codeph">ALTER SYSTEM</code>语句以完成恢复过程：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ENCRYPTION键“ <span class="italic">cert_id</span> ”由<span class="italic">keystore_password</span>标识;</pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">cert_id</code></span>是要用作主加密密钥的证书的证书ID。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">keystore_password</code></span>是您创建的密码。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-72A07686-B782-40E3-99A6-9EF8E885EE87__GUID-EEB13062-BFCE-4E8D-9502-1E53CB8BD64D">
                        <p class="notep1">注意：</p>
                        <p>必须使用<code class="codeph">ALTER SYSTEM</code>语句仅为PKI密钥对重新生成加密密钥。此限制不适用于非PKI加密密钥。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-5600990E-F520-4F10-BF68-63756E595262" title="PKI加密已弃用，但如果您仍在使用它，则必须考虑几个问题。">使用透明数据加密和PKI加密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-A29FA261-ECDB-4B99-A864-8FFD95568813" name="GUID-A29FA261-ECDB-4B99-A864-8FFD95568813"></a><h3 id="ASOAG-GUID-A29FA261-ECDB-4B99-A864-8FFD95568813" class="sect3">数据从外部文件加载到具有加密列的表</h3>
               <div>
                  <p>您可以使用SQL * Loader执行从文件到具有加密列的表的数据加载。</p>
                  <p>请注意，使用SQL * Loader时，不能在<code class="codeph">ORACLE_LOADER</code>类型的外部表的列定义中包含<code class="codeph">ENCRYPT</code>子句，但可以将其包含在<code class="codeph">ORACLE_DATAPUMP</code>类型的外部表的列定义中。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ORACLE_LOADER</code>类型的外部表</p>
                        <p>您不能在<code class="codeph">ORACLE_LOADER</code>类型的外部表的列定义中包含<code class="codeph">ENCRYPT</code>子句的原因是因为具有<code class="codeph">ORACLE_LOADER</code>类型的外部表的内容必须来自用户指定的明文“后备文件”，并且此类纯文本文件不能包含任何TDE加密数据。
                        </p>
                        <p>如果在<code class="codeph">ORACLE_LOADER</code>类型的外部表的定义中使用<code class="codeph">ENCRYPT</code>子句，则在查询此外部表中的TDE加密列时，查询将失败。这是因为TDE期望外部数据已加密，并在加载时自动尝试解密。此操作失败，因为“后备文件”仅包含明文。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ORACLE_DATAPUMP</code>类型的外部表</p>
                        <p>您可以对<code class="codeph">ORACLE_DATAPUMP</code>类型的外部表使用TDE列加密。这是因为对于<code class="codeph">ORACLE_DATAPUMP</code>类型的外部表，“后备文件”始终由Oracle数据库创建（在卸载操作期间），因此支持填充加密数据。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-A637AB50-2A54-4248-8DC2-F50729C38B97" name="GUID-A637AB50-2A54-4248-8DC2-F50729C38B97"></a><h3 id="ASOAG-GUID-A637AB50-2A54-4248-8DC2-F50729C38B97" class="sect3">透明数据加密和数据库关闭操作</h3>
               <div>
                  <p>在关闭数据库之前，应确保打开软件或硬件密钥库。</p>
                  <p>在数据库关闭操作期间可能需要主加密密钥。数据库关闭操作会自动关闭软件或硬件密钥库。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></li>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。">第3步：打开硬件密钥库</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="general-considerations-of-using-transparent-data-encryption.html#GUID-F02C9CBF-0374-408B-8655-F7531B681D41" title="使用透明数据加密时，应考虑安全性，性能和存储开销等因素。">使用透明数据加密的一般注意事项</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03808.optimizing-queries-with-join-groups.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="A join group is a user-created dictionary object that lists one or more columns that can be meaningfully joined."></meta>
      <meta name="description" content="A join group is a user-created dictionary object that lists one or more columns that can be meaningfully joined."></meta>
      <title>使用连接组优化连接</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database In-Memory Guide"></meta>
      <meta property="og:description" content="A join group is a user-created dictionary object that lists one or more columns that can be meaningfully joined."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database In-Memory Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00"></meta>
      <meta name="dcterms.title" content="Database In-Memory Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96137-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="optimizing-in-memory-expressions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="optimizing-in-memory-aggregation.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="optimizing-in-memory-expressions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="optimizing-in-memory-aggregation.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库内存指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-optimizations-for-in-memory-queries.html" property="item" typeof="WebPage"><span property="name">优化内存中查询</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用连接组优化连接</li>
            </ol>
            <a id="GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" name="GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797"></a>
            
            <h2 id="INMEM-GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" class="sect2"><span class="enumeration_chapter">8</span>使用加入组优化联接</h2>
         </header>
         <div class="ind">
            <div>
               <p><strong class="term">连接组</strong>是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-5FC74CA4-FD3E-4A17-A40D-9EE4EC61F355">关于内存中的连接</a><br>联接是数据仓库工作负载不可或缺的一部分。当正在连接的表存储在内存中时，IM列存储增强了连接的性能。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55">关于加入群组</a><br>启用IM列存储后，数据库可以使用连接组来优化IM列存储中填充的表的连接。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-5322DCBB-EC1A-435F-A552-C71A8879DE5B">加入群组的目的</a><br>在某些查询中，连接组消除了解压缩和散列列值的性能开销。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-7972FD49-0418-4196-9069-A4F44D16A9F1">加入群组的工作原理</a><br>在连接组中，数据库使用相同的公共字典压缩连接组中的所有列。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-B09C155D-FE48-408F-AD69-5EAD85372E64">散列连接使用常用字典编码时</a><br>加入连接组中的列通常会看到性能优势。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74">创建加入组</a><br>使用<code class="codeph">CREATE INMEMORY JOIN GROUP</code>语句定义连接组。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1">监控加入组使用情况</a><br>要确定查询是否使用连接组，可以使用图形SQL监视器报告（推荐）或使用<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML</code>函数的SQL查询。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="advanced-optimizations-for-in-memory-queries.html#GUID-33034151-7BD7-4186-B336-C693FBB27634" title="本部分介绍如何使用内存表达式，连接组和内存中聚合来优化查询。它还解释了IM列存储如何重新填充已修改的数据。">优化内存中查询</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-5FC74CA4-FD3E-4A17-A40D-9EE4EC61F355" name="GUID-5FC74CA4-FD3E-4A17-A40D-9EE4EC61F355"></a><h3 id="INMEM-GUID-5FC74CA4-FD3E-4A17-A40D-9EE4EC61F355" class="sect3"><span class="enumeration_section">8.1</span>关于内存中连接</h3>
               <div>
                  <p>联接是数据仓库工作负载不可或缺的一部分。当正在连接的表存储在内存中时，IM列存储增强了连接的性能。</p>
                  <p>由于更快的扫描和连接处理，使用Bloom过滤器的复杂多表连接和简单连接可从IM列存储中受益。在数据仓库环境中，最常用的连接涉及事实表和一个或多个维度表。</p>
                  <p>在IM列存储中填充表时，以下联接运行得更快：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>适合使用Bloom过滤器的连接</p>
                     </li>
                     <li>
                        <p>使用一个事实表连接多个小维度表</p>
                     </li>
                     <li>
                        <p>两个具有主键 - 外键关系的表之间的连接</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55" name="GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55"></a><h3 id="INMEM-GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55" class="sect3"><span class="enumeration_section">8.2</span>关于加入组</h3>
               <div>
                  <p>启用IM列存储后，数据库可以使用连接组来优化IM列存储中填充的表的连接。</p>
                  <p>连接组是一组列，在这些列上经常连接一组表。列集包含一列或多列，最多255列。表集包括一个或多个内部表。不支持外部表。</p>
                  <p>连接组中的列可以位于相同或不同的表中。例如，如果<code class="codeph">sales</code>和<code class="codeph">times</code>表经常在<code class="codeph">time_id</code>列上加入，那么您可以为<code class="codeph">(times(time_id), sales(time_id))</code>创建一个连接组。如果<code class="codeph">employees</code>表经常在<code class="codeph">employee_id</code>列上加入自身，那么加入组可以是<code class="codeph">(employees(employee_id))</code> 。
                  </p>
                  <div class="infoboxnote" id="GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55__GUID-A998E38C-24D3-4007-A36F-4F8A9E30BF3D">
                     <p class="notep1">注意：</p>
                     <p>同一列不能是多个连接组的成员。</p>
                  </div>
                  <p>创建连接组时，数据库将使连接组中引用的表的当前In-Memory内容无效。随后的<a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">重新填充</span></a>使数据库使用<a href="glossary.html#GUID-D04AB5B8-A58B-4494-A54F-09CEBC113460"><span class="xrefglossterm">公共字典</span></a>重新编码表的IMCU。因此，Oracle建议您首先创建连接组，然后填充表。
                  </p>
                  <p>使用<code class="codeph">CREATE INMEMORY JOIN GROUP</code>语句创建连接组。要向连接组添加列或从连接组中删除列，请使用<code class="codeph">ALTER INMEMORY JOIN GROUP</code>语句。使用<code class="codeph">DROP INMEMORY JOIN GROUP</code>语句删除连接组。
                  </p>
                  <div class="infoboxnote" id="GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55__GUID-1126C22A-11D9-4682-96EB-3EC4AF8CB094">
                     <p class="notep1">注意：</p>
                     <p>在<span>Oracle Active Data Guard中</span> ，备用数据库忽略连接组定义。备用数据库不使用通用词典，并执行查询，就像连接组不存在一样。
                     </p>
                  </div>
                  <div class="example" id="GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55__GUID-B3380351-7EC3-44A4-B197-53787C717631">
                     <p class="titleinexample">示例8-1创建加入组</p>
                     <p>此示例创建名为<code class="codeph">deptid_jg</code>的连接组，其中包含<code class="codeph">hr.employees</code>和<code class="codeph">hr.departments</code>表中的<code class="codeph">department_id</code>列。
                     </p><pre class="pre codeblock"><code>CREATE INMEMORY JOIN GROUP deptid_jg（hr.employees（department_id），hr.departments（department_id））;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-5322DCBB-EC1A-435F-A552-C71A8879DE5B" name="GUID-5322DCBB-EC1A-435F-A552-C71A8879DE5B"></a><h3 id="INMEM-GUID-5322DCBB-EC1A-435F-A552-C71A8879DE5B" class="sect3"><span class="enumeration_section">8.3</span>加入群组的目的</h3>
               <div>
                  <p>在某些查询中，连接组消除了解压缩和散列列值的性能开销。</p>
                  <p>如果没有连接组，如果优化器使用散列连接但不能使用Bloom过滤器，或者Bloom过滤器不能有效地过滤行，则数据库必须解压缩IMCU并使用昂贵的散列连接。为了说明问题，假设星型模式具有<code class="codeph">sales</code>事实表和<code class="codeph">vehicles</code>维度表。以下查询连接这些表，但不过滤输出，这意味着数据库无法使用Bloom过滤器：</p><pre class="pre codeblock"><code>SELECT v.year，v.name，s.sales_price FROM vehicles v，sales s WHERE v.name = s.name;</code></pre><p>下图说明了数据库如何连接两个数据集。</p>
                  <div class="figure" id="GUID-5322DCBB-EC1A-435F-A552-C71A8879DE5B__GUID-F6A22D09-F119-45D9-BBDE-1E9E34631E75">
                     <p class="titleinfigure">图8-1没有加入组的哈希加入</p><img src="img/inmem_3v_004.png" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/inmem_3v_004.html"><br><a href="img_text/inmem_3v_004.html">“图8-1没有加入组的哈希加入”的描述</a></div>
                  <!-- class="figure" -->
                  <p>数据库执行散列连接，如下所示：</p>
                  <ol>
                     <li>
                        <p>扫描<code class="codeph">vehicles</code>表，解压缩满足谓词的行（在这种情况下，所有行都满足谓词，因为不存在过滤器），并将行发送到散列连接</p>
                     </li>
                     <li>
                        <p>根据解压缩的行在PGA中构建哈希表</p>
                     </li>
                     <li>
                        <p>扫描<code class="codeph">sales</code>表并应用任何过滤器（在这种情况下，查询不指定过滤器）</p>
                     </li>
                     <li>
                        <p>处理匹配来自IMCU的行，然后将行发送到连接</p>
                        <p>当散列连接可以使用探测端的行集（在本例中为<code class="codeph">sales</code>表）时，表扫描发送的行集采用压缩形式。根据是否利用本地字典或连接组从构建端查找匹配的行，散列连接将解压缩行或使其保持未压缩状态。
                        </p>
                     </li>
                     <li>
                        <p>使用连接列探测哈希表，在这种情况下，连接列是车辆名称</p>
                     </li>
                  </ol>
                  <p>如果<code class="codeph">v.name</code>和<code class="codeph">s.name</code>列上存在连接组，则数据库可以使前面的步骤更有效，从而消除了解压缩和过滤开销。加入组的好处是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库对压缩数据进行操作。</p>
                     </li>
                     <li>
                        <p>数据库避免对连接键进行散列并探测散列表，这需要比较探测行和散列行的连接键。</p>
                        <p>当存在连接组时，数据库将每个连接列值的代码存储在<a href="glossary.html#GUID-D04AB5B8-A58B-4494-A54F-09CEBC113460"><span class="xrefglossterm">公共字典中</span></a> 。数据库使用字典代码构建连接组数组。每个数组元素都指向存储在散列区域中的构建方行（通常是PGA内存）。在探测期间，每个探测行都有一个与连接键关联的代码。数据库使用此代码搜索数组以确定数组元素中是否存在指针。如果指针存在，则存在匹配;否则，没有匹配。
                        </p>
                     </li>
                     <li>
                        <p>字典代码密集且具有固定长度，这使得它们节省空间。</p>
                     </li>
                     <li>
                        <p>当无法使用Bloom过滤器时，有时可以使用连接组优化查询。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7972FD49-0418-4196-9069-A4F44D16A9F1" name="GUID-7972FD49-0418-4196-9069-A4F44D16A9F1"></a><h3 id="INMEM-GUID-7972FD49-0418-4196-9069-A4F44D16A9F1" class="sect3"><span class="enumeration_section">8.4</span>加入组如何工作</h3>
               <div>
                  <p>在连接组中，数据库使用相同的公共字典压缩连接组中的所有列。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-88A573DD-99D3-48D7-8310-B46F70184793">加入组如何使用公共字典</a><br><strong class="term">公共字典</strong>是表级特定于实例的字典代码集。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-94A4125F-E7DA-4462-8F8D-65AB8CB2BB63">加入组如何优化扫描</a><br>关键优化是加入公共字典代码而不是列值，从而避免使用哈希表进行连接。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-88A573DD-99D3-48D7-8310-B46F70184793" name="GUID-88A573DD-99D3-48D7-8310-B46F70184793"></a><h4 id="INMEM-GUID-88A573DD-99D3-48D7-8310-B46F70184793" class="sect4"><span class="enumeration_section">8.4.1</span>加入组如何使用公共字典</h4>
                  <div>
                     <p><strong class="term">公共字典</strong>是表级特定于实例的字典代码集。
                     </p>
                     <p>当在基础列上定义连接组时，数据库会自动在IM列存储中创建公共字典。公共字典使连接列能够共享相同的字典代码。</p>
                     <p>常用字典具有以下优点：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用来自公共字典的代码对本地字典中的值进行编码，该代码提供压缩并提高IMCU的缓存效率</p>
                        </li>
                        <li>
                           <p>允许联接使用字典代码来构造和探测散列连接期间使用的数据结构</p>
                        </li>
                        <li>
                           <p>使优化器能够获取基数，列值分布等统计信息</p>
                        </li>
                     </ul>
                     <p>下图说明了与<code class="codeph">sales.name</code>和<code class="codeph">vehicles.name</code>列上创建的连接组对应的常用字典。
                     </p>
                     <div class="figure" id="GUID-88A573DD-99D3-48D7-8310-B46F70184793__GUID-EDFD9FE8-3916-46BF-9F9D-227869F4B166">
                        <p class="titleinfigure">图8-2加入组的通用字典</p><img src="img/inmem_pb_001a.png" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/inmem_pb_001a.html"><br><a href="img_text/inmem_pb_001a.html">“图8-2加入组的通用字典”的说明</a></div>
                     <!-- class="figure" -->
                     <p>当数据库使用公共字典时，每个CU的本地字典不存储原始值： <code class="codeph">AUDI</code> ， <code class="codeph">BMW</code> ， <code class="codeph">CADILLAC</code> ， <code class="codeph">FORD</code>等。相反，本地字典存储<span class="italic">对</span>存储在公共字典中的值的<span class="italic">引用</span> 。例如， <span class="italic">本地</span>词典可能存储<code class="codeph">Audi</code>的值<code class="codeph">101</code>和<code class="codeph">BMW</code> <code class="codeph">220</code> 。 <span class="italic">常用</span>字典可能存储<code class="codeph">Audi</code>值<code class="codeph">0</code>和<code class="codeph">BMW</code> <code class="codeph">1</code>值。本地字典中的<code class="codeph">101</code> （AUDI）是指向公共字典中的<code class="codeph">0</code> （AUDI）的指针。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-7972FD49-0418-4196-9069-A4F44D16A9F1" title="在连接组中，数据库使用相同的公共字典压缩连接组中的所有列。">加入组如何工作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-94A4125F-E7DA-4462-8F8D-65AB8CB2BB63" name="GUID-94A4125F-E7DA-4462-8F8D-65AB8CB2BB63"></a><h4 id="INMEM-GUID-94A4125F-E7DA-4462-8F8D-65AB8CB2BB63" class="sect4"><span class="enumeration_section">8.4.2</span>加入组如何优化扫描</h4>
                  <div>
                     <p>关键优化是加入公共字典代码而不是列值，从而避免使用哈希表进行连接。</p>
                     <p>请考虑以下查询，该查询使用连接组在<code class="codeph">name</code>列上加入<code class="codeph">vehicles</code>和<code class="codeph">sales</code> ：</p><pre class="pre codeblock"><code>SELECT v.year，v.name，s.sales_price FROM vehicles v，sales s WHERE v.name = s.name AND v.name IN（'Audi'，'BMW'，'Porsche'，'VW'）;</code></pre><p>下图说明了连接如何从在连接组上创建的公共字典中获益。</p>
                     <div class="figure" id="GUID-94A4125F-E7DA-4462-8F8D-65AB8CB2BB63__GUID-F6A22D09-F119-45D9-BBDE-1E9E34631E75">
                        <p class="titleinfigure">图8-3使用Join Group加入Hash</p><img src="img/inmem_3v_005.png" alt="下面是图8-3的描述" title="下面是图8-3的描述" longdesc="img_text/inmem_3v_005.html"><br><a href="img_text/inmem_3v_005.html">“图8-3使用加入组加入哈希”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-94A4125F-E7DA-4462-8F8D-65AB8CB2BB63__GUID-62904BC2-650D-4E6C-A559-4182D2B7E5DE"></div>
                     <!-- class="figure" -->
                     <p>如上图所示，数据库对压缩数据执行散列连接，如下所示：</p>
                     <ol>
                        <li>
                           <p>扫描<code class="codeph">vehicles</code>表，并将字典代码（不是原始列值）发送到散列连接： <code class="codeph">0</code> （奥迪）， <code class="codeph">1</code> （宝马）， <code class="codeph">2</code> （凯迪拉克），等等</p>
                        </li>
                        <li>
                           <p>在PGA中构建一系列不同的常用字典代码</p>
                        </li>
                        <li>
                           <p>扫描<code class="codeph">sales</code>表并应用任何过滤器（在这种情况下，过滤器仅适用于德国汽车）</p>
                        </li>
                        <li>
                           <p>以压缩格式将匹配行发送到联接</p>
                        </li>
                        <li>
                           <p>在数组中查找相应的值而不是探测哈希表，从而避免在连接键列上计算哈希函数的需要</p>
                        </li>
                     </ol>
                     <p>在此示例中， <code class="codeph">vehicles</code>表仅有七行。<code class="codeph">vehicles.name</code>列具有以下值：</p><pre class="pre codeblock"><code>奥迪宝马凯迪拉克福特保时捷特斯拉大众</code></pre><p>公共字典为每个不同的值分配字典代码。从概念上讲，常用字典如下所示：</p><pre class="pre codeblock"><code>奥迪0宝马1凯迪拉克2福特3保时捷4特斯拉5大众6</code></pre><p>数据库扫描<code class="codeph">vehicles.name</code> ，从第一个IMCU中的第一个字典代码开始，到最后一个IMCU中的最后一个代码结束。它为与过滤器匹配的每一行（仅限德国汽车）存储<code class="codeph">1</code>对于与过滤器不匹配的每行存储<code class="codeph">0</code> 。从概念上讲，数组可能如下所示：</p><pre class="pre codeblock"><code>array [0]：1 array [1]：1 array [2]：0 array [3]：0 array [4]：1 array [5]：0 array [6]：1</code></pre><p>数据库现在扫描<code class="codeph">sales</code>事实表。为简化示例，假设<code class="codeph">sales</code>表只有6行。数据库按如下方式扫描行（每个值的公共字典代码显示在括号中）：</p><pre class="pre codeblock"><code>凯迪拉克（2）凯迪拉克（2）宝马（1）福特（3）奥迪（0）特斯拉（5）</code></pre><p>然后数据库通过<code class="codeph">vehicles.name</code>数组继续查找匹配项。如果行匹配，则数据库将匹配的行及其关联的公共字典代码发送，并从<code class="codeph">vehicles.name</code>和<code class="codeph">sales.name</code> IMCU中检索相应的列值：</p><pre class="pre codeblock"><code>2  - &gt; array [2]为0，所以没有join 2  - &gt; array [2]为0，所以没有join 1  - &gt; array [1]是1，所以join 3  - &gt; array [3]是0，所以没有join 0  - &gt; array [0]为1，所以join 5  - &gt; array [5]为0，所以没有连接</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-7972FD49-0418-4196-9069-A4F44D16A9F1" title="在连接组中，数据库使用相同的公共字典压缩连接组中的所有列。">加入组如何工作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B09C155D-FE48-408F-AD69-5EAD85372E64" name="GUID-B09C155D-FE48-408F-AD69-5EAD85372E64"></a><h3 id="INMEM-GUID-B09C155D-FE48-408F-AD69-5EAD85372E64" class="sect3"><span class="enumeration_section">8.5</span>当散列连接使用常用字典编码时</h3>
               <div>
                  <p>加入连接组中的列通常会看到性能优势。</p>
                  <p>在创建连接组时，数据库执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>缓存连接键列的字典值的哈希值</p>
                     </li>
                     <li>
                        <p>缓存连接键列的<code class="codeph">NUMBER</code>数据的二进制表示</p>
                     </li>
                     <li>
                        <p>使用相同的通用字典对列进行编码</p>
                     </li>
                  </ul>
                  <p>连接组中的列的连接<span class="italic">始终</span>使用前两个优化来提高性能。例如，如果优化程序选择散列连接，则查询使用缓存的散列值来探测bloom过滤器。如果查询使用IM聚合连接，则查询使用缓存的二进制数来索引关键向量。
                  </p>
                  <p>散列连接可以使用也可以不使用字典编码。当字典编码出现在散列连接的至少一列中时，查询可以通过以下方式利用编码：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>加入群组感知哈希联接</p>
                        <p>散列连接中的两个列在运行时期间携带公共字典编码数据。执行计划必须证明并行哈希联接计划，而不从哈希<span class="italic">双方</span>参与任何分配加入，或串行哈希联接计划。
                        </p>
                     </li>
                     <li>
                        <p>编码感知的散列连接</p>
                        <p>散列连接中的一个事实表列在运行时期间携带字典编码数据。执行计划必须显示并行散列连接，而不显示散列连接右侧的任何分布，或者显示串行散列连接计划。在某些情况下，如果公共字典具有良好的压缩率，并且并行散列连接计划无法利用加入组感知的散列连接（例如，在并行广播 - 无计划中），则查询可以使用编码 - 公共字典的识别散列连接。</p>
                     </li>
                  </ul>
                  <p>在SQL监视器报告中，以下字段显示字典用法：已<code class="codeph">Columnar Encodings Observed</code> ，以及<code class="codeph">Columnar Encodings Leveraged</code> 。统计数据是累积的。在并行散列连接中，这些字段汇总了从执行行源所涉及的所有从属进程收集的统计信息。在IMCU中的本地字典的上下文中，统计信息显示从右子行源观察到的编码ID的数量以及由连接利用的编码的数量。如果单个进程上的散列连接利用公共字典，则<code class="codeph">Columnar Encodings Leveraged</code>显示在连接中利用的编码数。<code class="codeph"></code></p>
                  <p>下表显示了<code class="codeph">Columnar Encodings Observed</code>和<code class="codeph">Columnar Encodings Leveraged</code>的可能值，以及这些组合的含义。
                  </p>
                  <div class="tblformal" id="GUID-B09C155D-FE48-408F-AD69-5EAD85372E64__GUID-33F19E11-C1EB-4FB3-8E8C-35C2A70FA52D">
                     <p class="titleintable">表8-1 SQL监视器报告中的联接组使用情况</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="在SQL监视器报告中加入组使用" border="1" summary="This table describes when a hash join uses dictionary encodings" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d24838e1395">观察到柱状编码</th>
                              <th align="left" valign="bottom" id="d24838e1397">柱状编码杠杆</th>
                              <th align="left" valign="bottom" id="d24838e1399">编码感知哈希加入使用？</th>
                              <th align="left" valign="bottom" id="d24838e1401">加入Group-Aware Hash Join使用？</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d24838e1405" headers="d24838e1395 ">
                                 <p>不存在</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1405 d24838e1397 ">
                                 <p>不存在</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1405 d24838e1399 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1405 d24838e1401 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d24838e1418" headers="d24838e1395 ">
                                 <p>正值</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1418 d24838e1397 ">
                                 <p>不存在</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1418 d24838e1399 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1418 d24838e1401 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d24838e1431" headers="d24838e1395 ">
                                 <p>正值</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1431 d24838e1397 ">
                                 <p>正值</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1431 d24838e1399 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1431 d24838e1401 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d24838e1444" headers="d24838e1395 ">
                                 <p>不存在</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1444 d24838e1397 ">
                                 <p>正值</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1444 d24838e1399 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d24838e1444 d24838e1401 ">
                                 <p>是</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>例如，如果报告显示<code class="codeph">Columnar Encodings Leveraged</code>字段为<code class="codeph">4</code> （例如，因为并行度为4）但是<code class="codeph">Columnar Encodings Observed</code>字段不存在，则查询利用连接组进行散列连接。如果<code class="codeph">Columnar Encodings Observed</code>字段为<code class="codeph">4</code>但<code class="codeph">Columnar Encodings Leveraged</code>字段不存在，则存在字典编码，但查询未使用它们。
                  </p>
                  <p>各种因素可以防止查询引入编码感知的散列连接。因素包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>公共字典的压缩比是次优的。</p>
                     </li>
                     <li>
                        <p>该查询观察到从表扫描传递的太多行集而没有公共字典。</p>
                     </li>
                     <li>
                        <p>构建端行长度太大。</p>
                     </li>
                     <li>
                        <p>构建端行不能适合PGA内存。</p>
                     </li>
                     <li>
                        <p>构建方具有重复的连接键。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B09C155D-FE48-408F-AD69-5EAD85372E64__GUID-7FFF20F7-9A99-40A3-968F-284A2B25FBEC">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="optimizing-queries-with-join-groups.html#GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1" title="要确定查询是否使用连接组，可以使用图形SQL监视器报告（推荐）或使用DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML函数的SQL查询。">监控加入组使用情况</a> ”</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74" name="GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74"></a><h3 id="INMEM-GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74" class="sect3"><span class="enumeration_section">8.6</span>创建加入组</h3>
               <div>
                  <p>使用<code class="codeph">CREATE INMEMORY JOIN GROUP</code>语句定义连接组。
                  </p>
                  <div class="section">
                     <p>连接组的候选者是经常在连接谓词中配对的列。典型示例包括连接事实和维度表的列，或将表连接到自身的列。</p>
                     <p><code class="codeph">CREATE INMEMORY JOIN GROUP</code>语句立即定义连接组，这意味着其元数据在数据字典中可见。数据库不会立即构建公共字典。相反，数据库在下次在IM列存储中填充或重新填充连接组中引用的表时构建公共字典。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74__GUID-FD391BEF-F6C8-4F48-8C1F-CC77A158B6EE">方针</p>
                     <p>创建，修改或删除连接组通常会使连接组中引用的所有基础表无效。因此，Oracle建议您<span class="italic">在</span>最初填充表<span class="italic">之前</span>创建连接组。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74__GUID-F9BF7619-09C1-4475-9F73-83AA019B4083">要创建连接组：</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>使用以下格式的语句创建连接组：</p><pre class="pre codeblock"><code>CREATE INMEMORY JOIN GROUP <span class="italic">join_group_name</span> （ <span class="italic">table1</span> （ <span class="italic">col1</span> ）， <span class="italic">table2</span> （ <span class="italic">col2</span> ））;</code></pre><p>例如，以下语句创建名为<code class="codeph">sales_products_jg</code>的连接组：</p><pre class="pre codeblock"><code>CREATE INMEMORY JOIN GROUP sales_products_jg（sales（prod_id），products（prod_id））;</code></pre></li>
                        <li>
                           <p>（可选）通过查询数据字典查看连接组定义（包括样本输出）：</p><pre class="pre codeblock"><code>COL JOINGROUP_NAME FORMAT a18 COL TABLE_NAME FORMAT a8 COL COLUMN_NAME FORMAT a7 SELECT JOINGROUP_NAME，TABLE_NAME，COLUMN_NAME，GD_ADDRESS FROM DBA_JOINGROUPS; JOINGROUP_NAME TABLE_NA COLUMN_ GD_ADDRESS ------------------ -------- ------- ------------- --- SALES_PRODUCTS_JG SALES PROD_ID 00000000A142AE50 SALES_PRODUCTS_JG PRODUCTS PROD_ID 00000000A142AE50</code></pre></li>
                        <li>
                           <p>填充连接组中引用的表，如果当前填充它们，则重新填充它们。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74__GUID-433C0743-8571-4517-AB19-5F33402BCDAA">
                     <p class="titleinexample">示例8-2使用加入组优化查询</p>
                     <p>在此示例中，您以<code class="codeph">SYSTEM</code>身份登录到数据库，然后在<code class="codeph">sales</code>和<code class="codeph">products</code>的<code class="codeph">prod_id</code>列上创建一个连接组， <code class="codeph">prod_id</code>列尚未填充到IM列存储中：</p><pre class="pre codeblock"><code>CREATE INMEMORY JOIN GROUP sh.sales_products_jg（sh.sales（prod_id），sh.products（prod_id））;</code></pre><p>您为IM列存储中的填充启用了<code class="codeph">sh.sales</code>和<code class="codeph">sh.products</code>表：</p><pre class="pre codeblock"><code>ALTER TABLE sh.sales INMEMORY; ALTER TABLE sh.products INMEMORY;</code></pre><p>以下查询表明尚未在IM列存储中填充表（包括示例输出）：</p><pre class="pre codeblock"><code>COL所有者格式a3 COL姓名格式a10 COL状态格式a20选择所有者，SEGMENT_NAME名称，来自V $ IM_SEGMENTS的POPULATE_STATUS状态;没有选择任何行</code></pre><p>查询两个表以在IM列存储中填充它们：</p><pre class="pre codeblock"><code>SELECT / * + FULL（s）NO_PARALLEL（s）* / COUNT（*）FROM sh.sales s; SELECT / * + FULL（p）NO_PARALLEL（p）* / COUNT（*）FROM sh.products p;</code></pre><p>以下查询表明现在在IM列存储中填充了表（包括样本输出）：</p><pre class="pre codeblock"><code>COL所有者格式a3 COL名称格式a10 COL分区格式a13 COL状态格式a20选择所有者，SEGMENT_NAME NAME，PARTITION_NAME PARTITION，POPULATE_STATUS状态，BYTES_NOT_POPULATED自V $ IM_SEGMENTS;自己的名字分区状态BYTES_NOT_POPULATED --- ---------- ------------- ------------------- -  ------------------- SH SALES SALES_Q3_1998已完成0 SH SALES SALES_Q4_2001已完成0 SH SALES SALES_Q4_1999已完成0 SH产品已完成0 SH SALES SALES_Q1_2001已完成0 SH SALES SALES_Q1_1999已完成0 SH SALES SALES_Q2_2000竣工0 SH SALES SALES_Q2_1998竣工0 SH SALES SALES_Q3_2001竣工0 SH SALES SALES_Q3_1999竣工0 SH SALES SALES_Q4_2000竣工0 SH SALES SALES_Q4_1998竣工0 SH SALES SALES_Q1_2000竣工0 SH SALES SALES_Q1_1998竣工0 SH SALES SALES_Q2_2001竣工0 SH SALES SALES_Q2_1999竣工0 SH SALES SALES_Q3_2000已完成0</code></pre><p>查询<code class="codeph">DBA_JOINGROUPS</code>以获取有关连接组的信息（包括样本输出）：</p><pre class="pre codeblock"><code>COL JOINGROUP_NAME FORMAT a18 COL TABLE_NAME FORMAT a8 COL COLUMN_NAME FORMAT a7 SELECT JOINGROUP_NAME，TABLE_NAME，COLUMN_NAME，GD_ADDRESS FROM DBA_JOINGROUPS; JOINGROUP_NAME TABLE_NA COLUMN_ GD_ADDRESS ------------------ -------- ------- ------------- --- SALES_PRODUCTS_JG SALES PROD_ID 00000000A142AE50 SALES_PRODUCTS_JG PRODUCTS PROD_ID 00000000A142AE50</code></pre><p>前面的输出显示连接组<code class="codeph">sales_products_jg</code>连接在同一个公共字典地址上。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-67D6F161-BEAD-495F-94C1-86D47B8A8E74__GUID-7612DCEE-ACBA-4551-8203-B86FFE6734BF">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../sqlrf/CREATE-INMEMORY-JOIN-GROUP.html#SQLRF-GUID-87CA7034-4F80-4D46-8EE1-5CC865C2D676" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a>了解<code class="codeph">CREATE INMEMORY JOIN GROUP</code>语句</p>
                        </li>
                        <li>
                           <p><a href="../refrn/DBA_JOINGROUPS.html#GUID-285814BC-3BE0-47DA-8832-779229D5A93A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">DBA_JOINGROUPS</code>视图</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1" name="GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1"></a><h3 id="INMEM-GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1" class="sect3"><span class="enumeration_section">8.7</span>监控加入组使用情况</h3>
               <div>
                  <p>要确定查询是否使用连接组，可以使用图形SQL监视器报告（推荐）或使用<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML</code>函数的SQL查询。
                  </p>
                  <div class="section">
                     <p><span class="q">“ <a href="optimizing-queries-with-join-groups.html#GUID-B09C155D-FE48-408F-AD69-5EAD85372E64" title="加入连接组中的列通常会看到性能优势。">当Hash Join使用常用字典编码时</a> ”</span>解释了如何解释SQL Monitor输出。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1__GUID-6F09B066-9BAC-4AAA-92CB-4B7D7D240221">先决条件</p>
                     <p>要监视连接组，您必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>必须存在连接组。</p>
                        </li>
                        <li>
                           <p>必须<span class="italic">在</span>创建连接组<span class="italic">后</span>填充连接组引用的列。
                           </p>
                        </li>
                        <li>
                           <p>您必须执行可能使用连接组的连接查询。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1__GUID-6D62F80B-334C-4684-99D9-028A3CD859BD">监控加入组使用情况：</p>
                     <ol>
                        <li>
                           <p>以具有必要权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>创建一个SQL * Plus变量来存储SQL ID，如下所示：</p><pre class="pre codeblock"><code>VAR b_sqlid VARCHAR2（13）</code></pre></li>
                        <li>
                           <p>执行连接到连接组中的列的查询。</p>
                        </li>
                        <li>
                           <p>使用以下技术：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>图形SQL监视器报告</p>
                                 <p>SQL Monitor报告在Enterprise Manager中可用。在SQL * Plus中，您可以使用<code class="codeph">DBMS_SQL_MONITOR.REPORT_SQL_MONITOR</code>生成SQL监视器报告，如下所示：</p><pre class="pre codeblock"><code>SET TRIMSPOOL ON SET TRIM ON SET PAGES 0 SET LINESIZE 1000 SET LONG 1000000 SET LONGCHUNKSIZE 1000000 SPOOL /tmp/long_sql.htm SELECT DBMS_SQL_MONITOR.REPORT_SQL_MONITOR（sql_id =&gt;： <span class="bold">b_sqlid</span> ，report_level =&gt;'ALL'，TYPE =&gt;'active'）来自双重; SPOOL OFF</code></pre><p>在浏览器中访问报表，然后单击散列联接上的双筒望远镜图标以查看联接组统计信息。</p>
                              </li>
                              <li>
                                 <p>命令行查询</p>
                                 <p>在查询中使用<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML</code>函数，如以下示例所示：</p><pre class="pre codeblock"><code>SELECT encoding_hj.rowsource_id row_source_id，CASE WHEN encoding_hj.encodings_observed IS NULL AND encoding_hj.encodings_leveraged IS NOT NULL那么'加入组被利用'|| encoding_hj.encodings_leveraged || “进程”ELSE'加入组未被利用'END columnar_encoding_usage_info FROM（SELECT DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML（session_id =&gt;  -  1，sql_id =&gt;： <span class="bold">b_sqlid</span> ）。EXTRACT（q'＃// operation [@ name ='HASH JOIN'和@ parent_id]＃'）xmldata FROM DUAL）hj_operation_data，XMLTABLE（'/ operation'PASSING hj_operation_data.xmldata COLUMNS“ROWSOURCE_ID”NUMBER PATH' @ id'， “ENCODINGS_LEVERAGED”NUMBER PATH'rwsstats / stat [@ id =“9”]'，“ENCODINGS_OBSERVED”NUMBER PATH'rwsstats / stat [@ id =“10”]'）encoding_hj;</code></pre></li>
                           </ul>
                        </li>
                     </ol>
                     <p>以下部分演示了获取连接组使用信息的两种技术：</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC">使用SQL监视器报告监视连接组：示例</a><br>您的目标是使用图形SQL监视器报告来确定查询是否利用了连接组。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-queries-with-join-groups.html#GUID-8F56486B-B706-4A5B-96CA-FD7C46D1CEB1">从命令行监视加入组：示例</a><br>您的目标是使用命令行工具来确定查询是否利用了连接组。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-3E5491C4-B345-4A8E-8B1B-8DC150C8A797" title="连接组是用户创建的字典对象，它列出了一个或多个可以有意义连接的列。">使用连接组优化连接</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC" name="GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC"></a><h4 id="INMEM-GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC" class="sect4"><span class="enumeration_section">8.7.1</span>使用SQL监视器报告监视连接组：示例</h4>
                  <div>
                     <p>您的目标是使用图形SQL监视器报告来确定查询是否利用了连接组。</p>
                     <div class="section">
                        <p>在此示例中，您在<code class="codeph">sh.products</code>和<code class="codeph">sh.sales</code>表的<code class="codeph">prod_id</code>列上创建连接组，然后在此列上连接这些表。您授予<code class="codeph">sh</code>帐户管理权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC__MONITORINGAJOINGROUP-4943C700">
                        <p class="titleinexample">示例8-3使用SQL监视器报告监视加入组</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以用户<code class="codeph">sh</code>身份登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>创建一个SQL * Plus变量来存储SQL ID，如下所示：</p><pre class="pre codeblock"><code>VAR b_sqlid VARCHAR2（13）</code></pre></li>
                           <li>
                              <p>将<code class="codeph">INMEMORY</code>属性应用于<code class="codeph">sh.products</code>和<code class="codeph">sh.sales</code>表，如下所示：</p><pre class="pre codeblock"><code>ALTER TABLE销售没有INMEMORY; ALTER TABLE产品无INMEMORY; ALTER TABLE销售INMEMORY MEMCOMPRESS FOR QUERY; ALTER TABLE产品INMEMORY MEMCOMPRESS FOR QUERY;</code></pre></li>
                           <li>
                              <p>在<code class="codeph">prod_id</code>上创建一个连接组：</p><pre class="pre codeblock"><code>CREATE INMEMORY JOIN GROUP jgrp_products_sales（products（prod_id），sales（prod_id））;</code></pre></li>
                           <li>
                              <p>扫描表以在IM列存储中填充它们：</p><pre class="pre codeblock"><code>SELECT / * + FULL（s）* / COUNT（*）FROM sales s; SELECT / * + FULL（p）* / COUNT（*）FROM products p;</code></pre></li>
                           <li>
                              <p>执行加入<code class="codeph">prod_id</code>列的<code class="codeph">prod_id</code> ，然后聚合产品销售：</p><pre class="pre codeblock"><code>SELECT / * + USE_HASH（销售）LEADING（产品销售）MONITOR * / products.prod_id，products.prod_category_id，SUM（sales.amount_sold）FROM产品，销售WHERE products.prod_id = sales.prod_id GROUP BY products.prod_category_id，产品。 PROD_ID;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR</code>生成基于HTML的SQL监视器报告。</p>
                              <p>例如，使用以下内容创建SQL脚本，并在SQL * Plus中运行它：</p><pre class="pre codeblock"><code>SET TRIMSPOOL ON SET TRIM ON SET PAGES 0 SET LINESIZE 1000 SET LONG 1000000 SET LONGCHUNKSIZE 1000000 SPOOL /tmp/jg_report.htm SELECT DBMS_SQL_MONITOR.REPORT_SQL_MONITOR（sql_id =&gt;：b_sqlid，report_level =&gt;'ALL'，TYPE =&gt;'active'）来自双重; SPOOL OFF</code></pre></li>
                           <li>
                              <p>在浏览器中打开HTML报告。</p>
                              <p>以下示例报告显示了联接的执行计划。散列连接中的双筒望远镜打开一个窗口，显示其他统计信息。</p>
                              <div class="figure" id="GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC__GUID-288CAD91-6046-4B7C-AAAE-D3ED916DA306">
                                 <p class="titleinfigure">图8-4受监控的SQL执行详细信息页面</p><img src="img/sql_monitor_jg.png" alt="下面是图8-4的描述" title="下面是图8-4的描述" longdesc="img_text/sql_monitor_jg.html"><br><a href="img_text/sql_monitor_jg.html">“图8-4受监控的SQL执行详细信息页面”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>单击双筒望远镜图标以打开显示加入组统计信息的窗口。</p>
                              <p>以下示例窗口显示统计信息：</p>
                              <div class="figure" id="GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC__GUID-8613B645-AD08-40AC-A381-67982FA82335"><img src="img/other_plan_line_stats.png" alt="other_plan_line_stats.png的描述如下" title="other_plan_line_stats.png的描述如下" longdesc="img_text/other_plan_line_stats.html"><br><a href="img_text/other_plan_line_stats.html">插图说明other_plan_line_stats.png</a></div>
                              <!-- class="figure" -->
                              <p>由于<code class="codeph">Columnar Encodings Leveraged</code>是一个正值，并且不存在<code class="codeph">Columnar Encodings Observed</code> ，因此使用了连接组。
                              </p>
                           </li>
                           <li>
                              <p>（可选）在示例后清理：</p><pre class="pre codeblock"><code>DROP INMEMORY JOIN GROUP jgrp_products_sales; ALTER TABLE销售没有INMEMORY; ALTER TABLE产品无INMEMORY;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A1CEDB0F-5ADF-42B1-82F7-EB3D895E20DC__GUID-D82CCE85-3ABB-4DE9-A617-6CC4E6A592F1">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="optimizing-queries-with-join-groups.html#GUID-B09C155D-FE48-408F-AD69-5EAD85372E64" title="加入连接组中的列通常会看到性能优势。">当哈希联接使用常用字典编码时</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#GUID-DA3BD815-42EE-4CF4-8C59-9C40332D66C5" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML</code>函数</p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-SESSION.html#GUID-28E2DC75-E157-4C0A-94AB-117C205789B9" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$SESSION</code>视图</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1" title="要确定查询是否使用连接组，可以使用图形SQL监视器报告（推荐）或使用DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML函数的SQL查询。">监控加入组使用情况</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-8F56486B-B706-4A5B-96CA-FD7C46D1CEB1" name="GUID-8F56486B-B706-4A5B-96CA-FD7C46D1CEB1"></a><h4 id="INMEM-GUID-8F56486B-B706-4A5B-96CA-FD7C46D1CEB1" class="sect4"><span class="enumeration_section">8.7.2</span>从命令行监控加入组：示例</h4>
                  <div>
                     <p>您的目标是使用命令行工具来确定查询是否利用了连接组。</p>
                     <div class="section">
                        <p>在此示例中，您在<code class="codeph">sh.products</code>和<code class="codeph">sh.sales</code>表的<code class="codeph">prod_id</code>列上创建连接组，然后在此列上连接这些表。您授予<code class="codeph">sh</code>帐户管理权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8F56486B-B706-4A5B-96CA-FD7C46D1CEB1__MONITORINGAJOINGROUP-4943C700">
                        <p class="titleinexample">示例8-4从命令行监视加入组</p>
                        <ol>
                           <li>
                              <p>以<code class="codeph">sh</code>登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>创建一个SQL * Plus变量来存储SQL ID，如下所示：</p><pre class="pre codeblock"><code>VAR b_sqlid VARCHAR2（13）</code></pre></li>
                           <li>
                              <p>将<code class="codeph">INMEMORY</code>属性应用于<code class="codeph">sh.products</code>和<code class="codeph">sh.sales</code>表，如下所示：</p><pre class="pre codeblock"><code>ALTER TABLE销售没有INMEMORY; ALTER TABLE产品无INMEMORY; ALTER TABLE销售INMEMORY MEMCOMPRESS FOR QUERY; ALTER TABLE产品INMEMORY MEMCOMPRESS FOR QUERY;</code></pre></li>
                           <li>
                              <p>在<code class="codeph">prod_id</code>上创建一个连接组：</p><pre class="pre codeblock"><code>CREATE INMEMORY JOIN GROUP jgrp_products_sales（products（prod_id），sales（prod_id））;</code></pre></li>
                           <li>
                              <p>扫描表以在IM列存储中填充它们：</p><pre class="pre codeblock"><code>SELECT / * + FULL（s）* / COUNT（*）FROM sales s; SELECT / * + FULL（p）* / COUNT（*）FROM products p;</code></pre></li>
                           <li>
                              <p>执行加入<code class="codeph">prod_id</code>列的<code class="codeph">prod_id</code> ，然后聚合产品销售：</p><pre class="pre codeblock"><code>SELECT / * + USE_HASH（销售）LEADING（产品销售）MONITOR * / products.prod_id，products.prod_category_id，SUM（sales.amount_sold）FROM产品，销售WHERE products.prod_id = sales.prod_id GROUP BY products.prod_category_id，产品。 PROD_ID;</code></pre></li>
                           <li>
                              <p>获取上述聚合查询的SQL ID：</p><pre class="pre codeblock"><code>BEGIN SELECT PREV_SQL_ID INTO：b_sqlid FROM V $ SESSION WHERE SID = USERENV（'SID'）;结束;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML</code>确定数据库是否使用了连接组。
                              </p>
                              <p>例如，执行以下查询：</p><pre class="pre codeblock"><code>COL row_source_id FORMAT 999 COL columnar_encoding_usage_info FORMAT A40 SELECT encoding_hj.rowsource_id row_source_id，CASE WHEN encoding_hj.encodings_observed IS NULL AND encoding_hj.encodings_leveraged IS NOT NULL那么'加入组被利用'|| encoding_hj.encodings_leveraged || “进程”ELSE'加入组未被利用'END columnar_encoding_usage_info FROM（SELECT DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML（session_id =&gt;  -  1，sql_id =&gt;：b_sqlid）。EXTRACT（q'＃// operation [@ name ='HASH JOIN'和@ parent_id]＃'）xmldata FROM DUAL）hj_operation_data，XMLTABLE（'/ operation'PASSING hj_operation_data.xmldata COLUMNS“ROWSOURCE_ID”NUMBER PATH' @ id'， “ENCODINGS_LEVERAGED”NUMBER PATH'rwsstats / stat [@ id =“9”]'，“ENCODINGS_OBSERVED”NUMBER PATH'rwsstats / stat [@ id =“10”]'）encoding_hj;</code></pre><p>以下示例输出显示在查询中利用了连接组：</p><pre class="pre codeblock"><code>ROW_SOURCE_ID COLUMNAR_ENCODING_USAGE_INFO ------------- ----------------------------------- ----- 2加入组被用于1个进程</code></pre></li>
                           <li>
                              <p>（可选）在示例后清理：</p><pre class="pre codeblock"><code>DROP INMEMORY JOIN GROUP jgrp_products_sales; ALTER TABLE销售没有INMEMORY; ALTER TABLE产品无INMEMORY;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8F56486B-B706-4A5B-96CA-FD7C46D1CEB1__GUID-D82CCE85-3ABB-4DE9-A617-6CC4E6A592F1">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="optimizing-queries-with-join-groups.html#GUID-B09C155D-FE48-408F-AD69-5EAD85372E64" title="加入连接组中的列通常会看到性能优势。">当哈希联接使用常用字典编码时</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#GUID-DA3BD815-42EE-4CF4-8C59-9C40332D66C5" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解<code class="codeph">DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML</code>函数</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-28E2DC75-E157-4C0A-94AB-117C205789B9" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$SESSION</code>视图</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-queries-with-join-groups.html#GUID-5E6B9757-ADA2-408D-8FA4-274D36AE22E1" title="要确定查询是否使用连接组，可以使用图形SQL监视器报告（推荐）或使用DBMS_SQLTUNE.REPORT_SQL_MONITOR_XML函数的SQL查询。">监控加入组使用情况</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13238.database-gateway-sybase-features.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Sybase网关功能和限制</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content=" User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-sybase-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T17:28:14-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18237-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="database-gateway-sybase-introduction.html" title="Previous" type="text/html"></link>
      <link rel="next" href="database-gateway-sybase-case-studies.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for Sybase User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TGSYU"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-gateway-sybase-introduction.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="database-gateway-sybase-case-studies.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Sybase网关功能和限制</li>
            </ol>
            <a id="GUID-CFB6D407-A926-4763-B6E7-F2F6705CFB16" name="GUID-CFB6D407-A926-4763-B6E7-F2F6705CFB16"></a><a id="TGSYU200"></a>
            
            <h2 id="TGSYU-GUID-CFB6D407-A926-4763-B6E7-F2F6705CFB16" class="sect2"><span class="enumeration_chapter">2</span> Sybase Gateway功能和限制</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装和配置网关后，可以使用网关访问Sybase数据，将Sybase命令从应用程序传递到Sybase数据库，执行分布式查询以及复制数据。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A" title="远程插入行源功能允许远程插入，要求本地Oracle数据通过Oracle数据库和Oracle数据库网关工作。此功能要求Oracle数据库和Oracle Database Gateway为12.2或更高版本。">远程插入Rowsource</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-1B2EA918-D70D-4D1B-9228-15F925D01C05">使用传递功能</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-3A2CB44E-5A6F-45B7-A67B-BF043CEEAF8F">执行存储过程和函数</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-15E36EB6-400C-40A2-B9C1-02E8E7F1C5C1">CHAR语义学</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-5B78184A-33B2-42E4-AF70-4571BAE38FF4">多字节字符集比率抑制</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-6C58A72D-6DC2-400B-8633-6B849D96C0C1">IPv6支持</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-5F63126A-637A-46F4-AB73-59EE3B17AB46">网关会话IDLE超时</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-FD4FEED3-3EAF-4EB1-A135-ED757DD185E5">Sybase的数据库兼容性问题</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-F68B4168-F105-4F4E-ABC6-8D08DF973331">已知的限制</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sybase-features.html#GUID-43A40ADA-3E5E-4F32-A070-2D472F234F01">已知问题</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A" name="GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A"></a><h3 id="TGSYU-GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A" class="sect3">远程插入Rowsource</h3>
               <div>
                  <p>远程插入行源功能允许远程插入，要求本地Oracle数据通过Oracle数据库和Oracle数据库网关工作。此功能要求Oracle数据库和Oracle Database Gateway为12.2或更高版本。</p>
                  <p>通过Oracle数据库设计，必须在数据库链接站点执行某些分布式语句。但在某些情况下，执行这些查询所需的数据必须从原始Oracle数据库中获取。在同构连接下，远程Oracle数据库将回调源Oracle数据库以获取此类数据。但是在异构连接中，这是不可行的，因为这意味着外部数据存储必须查询只能由发出查询的Oracle实例提供的回调函数或数据。通常，这些类型的语句不能通过Oracle数据库网关支持。</p>
                  <p>以下类别的SQL语句会导致回调：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>任何带有子选择的DML，它指的是Oracle数据库中的一个表。</p>
                     </li>
                     <li>
                        <p>任何<code class="codeph">DELETE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或“ <code class="codeph">SELECT...FOR UPDATE..."</code>包含需要在原始Oracle数据库中执行的SQL函数或语句的SQL语句。
                        </p>
                        <p>这些SQL函数包括<code class="codeph">USER</code> ， <code class="codeph">USERENV</code>和<code class="codeph">SYSDATE</code> ;并涉及从原始Oracle数据库中选择数据。
                        </p>
                     </li>
                     <li>
                        <p>任何涉及Oracle数据库中的表以及远程表中的<code class="codeph">LONG</code>或<code class="codeph">LOB</code>列的SQL语句。
                        </p>
                     </li>
                  </ul>
                  <p>可以通过远程插入行源功能工作的远程<code class="codeph">INSERT</code>语句的示例如下：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO <span class="italic">gateway_table</span> @gateway_link select * from <span class="italic">local_table</span> ;</pre></div>
            </div><a id="TGSYU704"></a><div class="props_rev_3"><a id="GUID-1B2EA918-D70D-4D1B-9228-15F925D01C05" name="GUID-1B2EA918-D70D-4D1B-9228-15F925D01C05"></a><h3 id="TGSYU-GUID-1B2EA918-D70D-4D1B-9228-15F925D01C05" class="sect3">使用传递功能</h3>
               <div>
                  <div class="section">
                     <p>网关可以使用<code class="codeph">DBMS_HS_PASSTHROUGH</code>程序包将Sybase命令或语句从应用程序传递到Sybase数据库。
                     </p>
                     <p>使用PL / SQL块中的<code class="codeph">DBMS_HS_PASSTHROUGH</code>包指定要传递给Sybase数据库的语句，如下所示：</p><pre class="oac_no_warn" dir="ltr">DECLARE num_rows INTEGER; BEGIN num_rows：= DBMS_HS_PASSTHROUGH.EXECUTE_IMMEDIATE@SYBS（' <span class="italic">command</span> '）;结束; /</pre><p>其中<span class="italic">command</span>不能是以下之一：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">开始交易</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">承诺</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ROLLBACK</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">保存</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">关掉</code></p>
                        </li>
                        <li>
                           <p>Sybase工具命令</p>
                        </li>
                     </ul>
                     <p><code class="codeph">DBMS_HS_PASSTHROUGH</code>包支持传递绑定值和执行<code class="codeph">SELECT</code>语句。
                     </p>
                     <div class="infoboxnote" id="GUID-1B2EA918-D70D-4D1B-9228-15F925D01C05__GUID-4BA2BFB1-C137-406A-B7E6-3842E1254053">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">TRUNCATE</code>不能用于传递语句。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-1B2EA918-D70D-4D1B-9228-15F925D01C05__GUID-0BB80AD8-C642-4EDA-9EA1-AB15E59939EF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_HS_PASSTHROUGH.html#ARPLS017" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsyu&amp;id=HETER003" target="_blank">第3章，Oracle数据库网关的功能，</a> <span class="italic">Oracle数据库异构连接用户指南</span> ，以获取有关<code class="codeph">DBMS_HS_PASSTHROUGH</code>包的更多信息。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TGSYU705"></a><div class="props_rev_3"><a id="GUID-3A2CB44E-5A6F-45B7-A67B-BF043CEEAF8F" name="GUID-3A2CB44E-5A6F-45B7-A67B-BF043CEEAF8F"></a><h3 id="TGSYU-GUID-3A2CB44E-5A6F-45B7-A67B-BF043CEEAF8F" class="sect3">执行存储过程和函数</h3>
               <div>
                  <div class="section">
                     <p>使用过程功能，网关可以执行Sybase数据库中定义的存储过程。没有必要重新链接网关或将过程定义到网关，但过程的访问权限必须允许网关访问。</p>
                     <p>标准PL / SQL语句用于执行存储过程。</p>
                     <p>网关支持三种互斥模式的存储过程：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>普通模式：只能访问<code class="codeph">IN</code> / <code class="codeph">OUT</code>参数</p>
                        </li>
                        <li>
                           <p>返回值模式：具有所有存储过程的返回值</p>
                        </li>
                        <li>
                           <p>结果集模式：输出值可用作最后结果集</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="TGSYU706"></a><div class="props_rev_3"><a id="GUID-4EBE98C4-3A4C-4996-968D-1B30AE79396F" name="GUID-4EBE98C4-3A4C-4996-968D-1B30AE79396F"></a><h4 id="TGSYU-GUID-4EBE98C4-3A4C-4996-968D-1B30AE79396F" class="sect4">返回值和存储过程</h4>
                  <div>
                     <p>默认情况下，所有存储过程和函数都不会向用户返回返回值。要启用返回值，请在初始化参数文件中设置<code class="codeph">HS_FDS_PROC_IS_FUNC</code>参数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-4EBE98C4-3A4C-4996-968D-1B30AE79396F__GUID-5E021613-FACF-4BC8-98CF-99D8904BE91D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="database-gateway-sybase-initialization-parameters.html#GUID-F1D90A28-69A0-4D6B-9A46-AA52A0D7246B">初始化</a>有关编辑初始化参数文件和<code class="codeph">HS_FDS_PROC_IS_FUNC</code>参数的<code class="codeph">HS_FDS_PROC_IS_FUNC</code>参数。
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-4EBE98C4-3A4C-4996-968D-1B30AE79396F__GUID-08F68BA8-8FAE-49A5-9A7E-70ED126CA230">
                        <p class="notep1">注意：</p>
                        <p>如果设置<code class="codeph">HS_FDS_PROC_IS_FUNC</code>网关初始化参数，则必须更改所有现有存储过程的过程execute语句的语法。
                        </p>
                     </div>
                     <p>在以下示例中，将员工姓名<code class="codeph">JOHN SMYTHE</code>传递给Sybase存储过程<code class="codeph">REVISE_SALARY</code> 。存储过程从Sybase数据库中检索工资值，以计算<code class="codeph">JOHN SMYTHE</code>的新年薪。 <code class="codeph">RESULT</code>返回的修订工资用于更新Oracle数据库表中的<code class="codeph">EMP</code> ：</p><pre class="oac_no_warn" dir="ltr">DECLARE INPUT VARCHAR2（15）;结果编号（8,2）; BEGIN INPUT：='JOHN SMYTHE';结果：= REVISE_SALARY @ SYBS（INPUT）; UPDATE EMP SET SAL =结果ENAME =：INPUT;结束; /</pre><p>过程功能自动将非Oracle数据类型转换为PL / SQL数据类型和从PL / SQL数据类型转换。</p>
                  </div>
               </div><a id="TGSYU707"></a><div class="props_rev_3"><a id="GUID-3FB9797A-BFFA-48B2-BBB6-A7FDBC13C192" name="GUID-3FB9797A-BFFA-48B2-BBB6-A7FDBC13C192"></a><h4 id="TGSYU-GUID-3FB9797A-BFFA-48B2-BBB6-A7FDBC13C192" class="sect4">结果集和存储过程</h4>
                  <div>
                     <p>Oracle Database Gateway for Sybase为返回结果集的存储过程提供支持。</p>
                     <p>默认情况下，所有存储过程和函数都不会将结果集返回给用户。要启用结果集，请在初始化参数文件中设置<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>参数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-3FB9797A-BFFA-48B2-BBB6-A7FDBC13C192__GUID-4F66410E-4F2E-4317-BE25-B9430CD26B3D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="database-gateway-sybase-initialization-parameters.html#GUID-F1D90A28-69A0-4D6B-9A46-AA52A0D7246B">初始化</a>有关编辑初始化参数文件和<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>参数的<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>参数。有关Oracle对非Oracle数据库中的结果集的支持的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsyu&amp;id=HETER4061" target="_blank"><span class="italic">Oracle数据库异构连接用户指南”</span></a> 。
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-3FB9797A-BFFA-48B2-BBB6-A7FDBC13C192__GUID-F722595D-74E6-4D2F-A378-D432BF232D7C">
                        <p class="notep1">注意：</p>
                        <p>如果设置<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>网关初始化参数，则必须更改所有现有存储过程的过程execute语句的语法，否则将发生错误。
                        </p>
                     </div>
                     <p>通过Oracle Database Gateway for Sybase访问带有结果集的存储过程时，您将处于异构服务的顺序模式。</p>
                     <p>Oracle Database Gateway for Sybase在过程描述期间将以下信息返回到异构服务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>远程存储过程的所有输入参数</p>
                        </li>
                        <li>
                           <p>没有输出参数</p>
                        </li>
                        <li>
                           <p>类型引用游标的一个out参数（对应于存储过程返回的第一个结果集）</p>
                        </li>
                     </ul>
                     <p>客户端程序必须使用虚拟包函数<code class="codeph">dbms_hs_result_set.get_next_result_set</code>来获取后续结果集的引用游标。返回的最后一个结果集是过程中的out参数。
                     </p>
                     <p>访问结果集的限制如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>必须按照将它们放置在线路上的顺序检索远程存储过程返回的结果集</p>
                        </li>
                        <li>
                           <p>在执行存储过程时，将关闭先前执行的存储过程返回的所有结果集（无论数据是否已完全</p>
                        </li>
                     </ul>
                     <p>在以下示例中，执行Sybase存储过程以从Sybase获取<code class="codeph">emp</code>和<code class="codeph">dept</code>表的内容：</p><pre class="oac_no_warn" dir="ltr">创建过程REFCURPROC（@ arg1 varchar（255），@ arg2 varchar（255）输出）作为select @ arg2 = @ arg1 select * from EMP select * from DEPT go</pre><p>此存储过程将输入参数arg1分配给输出参数arg2，在ref cursor rc1中打开查询<code class="codeph">SELECT * FROM EMP</code> ，并在ref cursor <code class="codeph">rc2</code>打开查询<code class="codeph">SELECT * FROM DEPT</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-3FB9797A-BFFA-48B2-BBB6-A7FDBC13C192__GUID-433E3623-2510-4620-B296-E113DB245E16">
                        <p class="notep1">注意：</p>
                        <p>必须在创建存储过程之前设置链接模式。在Sybase中发出以下命令： <code class="codeph">set chained on</code></p>
                     </div>
                  </div><a id="TGSYU708"></a><div class="props_rev_3"><a id="GUID-937C769C-3F43-491A-A2AA-79930359A995" name="GUID-937C769C-3F43-491A-A2AA-79930359A995"></a><h5 id="TGSYU-GUID-937C769C-3F43-491A-A2AA-79930359A995" class="sect5">OCI程序从顺序模式的结果集中获取</h5>
                     <div>
                        <p>以下示例显示了在顺序模式下从结果集中提取OCI程序：</p><pre class="oac_no_warn" dir="ltr">OCIEnv * ENVH; OCISvcCtx * SVCH; OCIStmt * STMH; OCIError * ERRH; OCIBind * BNDH [3]; OraText arg1 [20]; OraText arg2 [255]; OCIResult * rset; OCIStmt * rstmt; ub2 rcode [3]; ub2 rlens [3]; sb2 inds [3]; OraText * stmt =（OraText *）“begin refcurproc @ SYBS（：1，：2，：3）; end;”; OraText * n_rs_stm =（OraText *）“begin：ret：= DBMS_HS_RESULT_SET.GET_NEXT_RESULT_SET@SYBS; end;”; / *准备过程调用语句* / / *处理初始化代码跳过* / OCIStmtPrepare（STMH，ERRH，stmt，strlen（stmt），OCI_NTV_SYNTAX，OCI_DEFAULT）; / *绑定过程参数* / inds [0] = 0; strcpy（（char *）arg1，“Hello World”）; rlens [0] = strlen（arg1）; OCIBindByPos（STMH，＆BNDH [0]，ERRH，1，（dvoid *）arg1,20，SQLT_CHR，（dvoid *）＆（inds [0]），＆（rlens [0]），＆（rcode [0]） ，0，（ub4 *）0，OCI_DEFAULT）; inds [1] = -1; OCIBindByPos（STMH，＆BNDH [1]，ERRH，1，（dvoid *）arg2,20，SQLT_CHR，（dvoid *）＆（inds [1]），＆（rlens [1]），＆（rcode [1]） ，0，（ub4 *）0，OCI_DEFAULT）; inds [2] = 0; rlens [2] = 0; OCIDescriptorAlloc（ENVH，（dvoid **）＆rset，OCI_DTYPE_RSET，0，（dvoid **）0）; OCIBindByPos（STMH，＆BNDH [2]，ERRH，2，（dvoid *）rset，0，SQLT_RSET，（dvoid *）＆（inds [2]），＆（rlens [2]），＆（rcode [2]） ，0，（ub4 *）0，OCI_DEFAULT）; / *执行过程* / OCIStmtExecute（SVCH，STMH，ERRH，1,0，（CONST OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT）; / *将结果集转换为语句句柄* / OCIResultSetToStmt（rset，ERRH）; rstmt =（OCIStmt *）rset; / *在此之后，用户可以从rstmt * / / * get get_next_result_set调用来获取next_result set * / / *准备获取下一个结果集过程调用* / OCIStmtPrepare（STMH，ERRH，n_rs_stm，strlen（n_rs_stm），OCI_NTV_SYNTAX ，OCI_DEFAULT）; / *绑定返回值* / OCIBindByPos（STMH，＆BNDH [1]，ERRH，1，（dvoid *）rset，0，SQLT_RSET，（dvoid *）＆（inds [1]），＆（rlens [1]）， ＆（rcode [1]），0，（ub4 *）0，OCI_DEFAULT）; / *执行语句获取下一个结果集* / OCIStmtExecute（SVCH，STMH，ERRH，1,0，（CONST OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT）; / *将下一个结果集转换为语句句柄* / OCIResultSetToStmt（rset，ERRH）; rstmt =（OCIStmt *）rset; / *现在rstmt将指向远程存储过程返回的第二个结果集* / / *重复执行get_next_result_set以获取输出参数* /</pre></div>
                  </div><a id="TGSYU709"></a><div class="props_rev_3"><a id="GUID-F7875611-3416-435A-9867-70224E16CB83" name="GUID-F7875611-3416-435A-9867-70224E16CB83"></a><h5 id="TGSYU-GUID-F7875611-3416-435A-9867-70224E16CB83" class="sect5">从顺序模式的结果集中获取PL / SQL程序</h5>
                     <div>
                        <p>假设表<code class="codeph">loc_emp</code>是一个与Sybase emp表完全相同的本地表。同样的假设适用于<code class="codeph">loc_dept</code> 。 <code class="codeph">outargs</code>是一个表，其列对应于Sybase存储过程的out参数。
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换包rcpackage是类型RCTYPE是ref游标;结束rcpackage; /</pre><pre class="oac_no_warn" dir="ltr">声明rc1 rcpackage.rctype; rec1 loc_emp％rowtype; rc2 rcpackage.rctype; rec2 loc_dept％rowtype; rc3 rcpackage.rctype; rec3 outargs％rowtype; out_arg varchar2（255）; begin  - 执行过程out_arg：= null; refcurproc @ SYBS（'Hello World'，out_arg，rc1）; - 从远程emp表中获取20行，并将它们插入到loc_emp中，以便在1 ... 20循环中将rc1提取到rec1;插入loc_emp（rec1.empno，rec1.ename，rec1.job，rec1.mgr，rec1.hiredate，rec1.sal，rec1.comm，rec1.deptno）;结束循环; - 关闭参考光标关闭rc1; - 获取存储过程返回的下一个结果集rc2：= dbms_hs_result_set.get_next_result_set@SYBS; - 从远程dept表中获取5行，并将它们插入到loc_dept中，用于i中的1 ... 5循环获取rc2到rec2;插入loc_dept值（rec2.deptno，rec2.dname，rec2.loc）;结束循环; - 关闭引用光标关闭rc2; - 从远程存储过程获取输出参数 - 由于我们处于顺序模式，它们将以结果集的形式返回rc3：= dbms_hs_result_set.get_next_result_set@SYBS; - 获取它们并将它们插入到outarguments表中，将rc3读入rec3;插入outargs（rec3.outarg，rec3.retval）; - 关闭参考光标关闭rc3;结束; /</pre></div>
                  </div>
               </div>
            </div><a id="TGSYU825"></a><div class="props_rev_3"><a id="GUID-15E36EB6-400C-40A2-B9C1-02E8E7F1C5C1" name="GUID-15E36EB6-400C-40A2-B9C1-02E8E7F1C5C1"></a><h3 id="TGSYU-GUID-15E36EB6-400C-40A2-B9C1-02E8E7F1C5C1" class="sect3">CHAR语义学</h3>
               <div>
                  <p>此功能允许网关可选地在<code class="codeph">CHAR</code>语义模式下运行。此功能不是将Sybase <code class="codeph">CHAR</code>列描述为<code class="codeph">CHAR(n BYTE)</code> ，而是将它们描述为<code class="codeph">CHAR(n CHAR)</code>和<code class="codeph">VARCHAR(n CHAR)</code> 。该概念类似于Oracle数据库<code class="codeph">CHAR</code> Semantics。您需要指定<code class="codeph">HS_NLS_LENGTH_SEMANTICS=CHAR</code>网关参数以激活此选项。有关更多详细信息，请参阅<a href="database-gateway-sybase-initialization-parameters.html#GUID-F1D90A28-69A0-4D6B-9A46-AA52A0D7246B">初始化参数</a> 。
                  </p>
               </div>
            </div><a id="TGSYU826"></a><div class="props_rev_3"><a id="GUID-5B78184A-33B2-42E4-AF70-4571BAE38FF4" name="GUID-5B78184A-33B2-42E4-AF70-4571BAE38FF4"></a><h3 id="TGSYU-GUID-5B78184A-33B2-42E4-AF70-4571BAE38FF4" class="sect3">多字节字符集比率抑制</h3>
               <div>
                  <p>此功能可选地禁止从Sybase数据库扩展到涉及多字节字符集的Oracle数据库的比率。默认情况下，Oracle网关采用最差的比率来防止数据被截断或缓冲区大小不足。但是，如果您具有Sybase数据库的特定知识并且不希望进行扩展，则可以指定<code class="codeph">HS_KEEP_REMOTE_COLUMN_SIZE</code>参数以禁止扩展。有关更多详细信息，请参阅<a href="database-gateway-sybase-initialization-parameters.html#GUID-F1D90A28-69A0-4D6B-9A46-AA52A0D7246B">初始化参数</a> 。
                  </p>
               </div>
            </div><a id="TGSYU827"></a><div class="props_rev_3"><a id="GUID-6C58A72D-6DC2-400B-8633-6B849D96C0C1" name="GUID-6C58A72D-6DC2-400B-8633-6B849D96C0C1"></a><h3 id="TGSYU-GUID-6C58A72D-6DC2-400B-8633-6B849D96C0C1" class="sect3">IPv6支持</h3>
               <div>
                  <p>除了Oracle数据库和网关之间的完全IPv6支持外，此网关和Sybase数据库之间也支持IPv6。有关更多详细信息，请参阅<a href="database-gateway-sybase-initialization-parameters.html#GUID-F1D90A28-69A0-4D6B-9A46-AA52A0D7246B">初始化参数中</a>的<code class="codeph">HS_FDS_CONNECT_INFO</code>参数。
                  </p>
               </div>
            </div><a id="TGSYU828"></a><div class="props_rev_3"><a id="GUID-5F63126A-637A-46F4-AB73-59EE3B17AB46" name="GUID-5F63126A-637A-46F4-AB73-59EE3B17AB46"></a><h3 id="TGSYU-GUID-5F63126A-637A-46F4-AB73-59EE3B17AB46" class="sect3">网关会话IDLE超时</h3>
               <div>
                  <p>您可以选择使用网关参数<code class="codeph">HS_IDLE_TIMEOUT</code>自动终止长空闲网关会话。具体来说，当网关会话空闲超过指定的时间限制时，网关会话将终止，并回滚任何挂起的更新。
                  </p>
               </div>
            </div><a id="TGSYU710"></a><div class="props_rev_3"><a id="GUID-FD4FEED3-3EAF-4EB1-A135-ED757DD185E5" name="GUID-FD4FEED3-3EAF-4EB1-A135-ED757DD185E5"></a><h3 id="TGSYU-GUID-FD4FEED3-3EAF-4EB1-A135-ED757DD185E5" class="sect3">Sybase的数据库兼容性问题</h3>
               <div>
                  <p>Sybase和Oracle数据库在某些方面的功能不同，导致兼容性问题，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-762CE1AA-7851-4CA6-939A-9C2E6DA3FB86">链式模式</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-ED529C72-88A0-40EE-931A-BFFDDD88BE59">列定义</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-3A4D7100-8846-43E3-8D8E-6A56F8123AD5">命名规则</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-FA7F6492-C872-4278-B51F-825CA36C4DA6">数据类型</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-6A362818-FAC8-41AB-BAA1-86B8E0C01883">查询</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-1DE3B1D7-BD6D-43B6-8127-BF4220DA3436">锁定</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-166C6B2E-C5B2-433B-AA4B-7FCA54EC162B">Sybase标识符长度限制</a></p>
                     </li>
                  </ul>
               </div><a id="TGSYU711"></a><div class="props_rev_3"><a id="GUID-762CE1AA-7851-4CA6-939A-9C2E6DA3FB86" name="GUID-762CE1AA-7851-4CA6-939A-9C2E6DA3FB86"></a><h4 id="TGSYU-GUID-762CE1AA-7851-4CA6-939A-9C2E6DA3FB86" class="sect4">链式模式</h4>
                  <div>
                     <p><a id="d2102e882" class="indexterm-anchor"></a><a id="d2102e884" class="indexterm-anchor"></a>网关支持ANSI标准链接模式。必须为此模式编写Sybase存储过程。以链式模式运行允许网关将Oracle两阶段提交保护扩展到更新Oracle和Sybase数据库的事务。
                     </p>
                  </div>
               </div><a id="TGSYU712"></a><div class="props_rev_3"><a id="GUID-ED529C72-88A0-40EE-931A-BFFDDD88BE59" name="GUID-ED529C72-88A0-40EE-931A-BFFDDD88BE59"></a><h4 id="TGSYU-GUID-ED529C72-88A0-40EE-931A-BFFDDD88BE59" class="sect4">列定义</h4>
                  <div>
                     <p><a id="d2102e920" class="indexterm-anchor"></a>缺省情况下，Sybase表列不能包含空值，除非在列定义中指定了<code class="codeph">NULL</code> 。根据ANSI标准，可以将Sybase数据库选项“默认情况下允许空值”设置为true，以将默认列定义更改为<code class="codeph">NULL</code> 。</p>
                     <p>对于Oracle表，除非在列定义中指定<code class="codeph">NOT NULL</code>否则列中允许使用空值。
                     </p>
                  </div>
               </div><a id="TGSYU713"></a><div class="props_rev_3"><a id="GUID-3A4D7100-8846-43E3-8D8E-6A56F8123AD5" name="GUID-3A4D7100-8846-43E3-8D8E-6A56F8123AD5"></a><h4 id="TGSYU-GUID-3A4D7100-8846-43E3-8D8E-6A56F8123AD5" class="sect4">命名规则</h4>
                  <div>
                     <p>命名规则问题包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-87A010B5-4DB6-4B03-9618-90EF3B1853ED">命名对象的规则</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-2466F5F3-E009-40D4-8021-C17FFE60C20F">区分大小写</a></p>
                        </li>
                     </ul>
                  </div><a id="TGSYU714"></a><div class="props_rev_3"><a id="GUID-87A010B5-4DB6-4B03-9618-90EF3B1853ED" name="GUID-87A010B5-4DB6-4B03-9618-90EF3B1853ED"></a><h5 id="TGSYU-GUID-87A010B5-4DB6-4B03-9618-90EF3B1853ED" class="sect5">命名对象的规则</h5>
                     <div>
                        <p>Oracle和Sybase使用不同的数据库对象命名规则。例如，每个对象名称允许的最大字符数可以不同。此外，使用单引号和双引号，区分大小写以及使用字母数字字符都可以不同。</p>
                        <div class="infoboxnotealso" id="GUID-87A010B5-4DB6-4B03-9618-90EF3B1853ED__GUID-68DFD59B-AD31-4BE0-AD9C-FB59E9F2F532">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle数据库参考</span></a>和Sybase文档。
                           </p>
                        </div>
                     </div>
                  </div><a id="TGSYU715"></a><div class="props_rev_3"><a id="GUID-2466F5F3-E009-40D4-8021-C17FFE60C20F" name="GUID-2466F5F3-E009-40D4-8021-C17FFE60C20F"></a><h5 id="TGSYU-GUID-2466F5F3-E009-40D4-8021-C17FFE60C20F" class="sect5">区分大小写</h5>
                     <div>
                        <p>除非您使用双引号字符包围标识符，否则Oracle数据库默认为大写。例如，要引用名为<code class="codeph">emp</code>的Sybase表，请输入带双引号字符的名称，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM“emp”@SYBS;</pre><p>但是，要从Oracle应用程序引用<code class="codeph">SCOTT</code>拥有的名为<code class="codeph">emp</code>的Sybase表，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM“Scott”。“emp”@SYBS;</pre><p>如果名为<code class="codeph">emp</code>的Sybase表由<code class="codeph">SCOTT</code>拥有（表所有者名称为大写字母），则可以输入不带双引号字符的所有者名称，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM SCOTT。“emp”@SYBS;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM scott。“emp”@SYBS;</pre><p>Oracle建议您使用双引号字符包围所有Sybase对象名称，并使用Sybase数据字典中显示的对象名称的确切字母大小写。参照中列出的支持的Oracle数据字典的表或视图时，则不需要此约定<a href="database-gateway-sybase-data-dictionary.html#GUID-E2DD24BF-4852-4B60-8494-26E4D0B000DD">数据字典</a> 。
                        </p>
                        <p>如果无法根据这些约定更改现有应用程序，请在Oracle中创建视图以将Sybase名称与正确的字母大小写相关联。例如，要仅使用大写名称从现有Oracle应用程序引用Sybase表<code class="codeph">emp</code> ，请定义以下视图：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE VIEW EMP（EMPNO，ENAME，SAL，HIREDATE）AS SELECT“empno”，“ename”，“sal”，“hiredate”FROM“emp”@SYBS;</pre><p>使用此视图，应用程序可以发出如下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT EMPNO，ENAME FROM EMP;</pre><p>使用视图是一种解决方案，它复制源自Sybase数据字典的数据字典信息。只要在Sybase数据库中更改了相应表的数据定义，就必须准备好更新Oracle视图定义。</p>
                     </div>
                  </div>
               </div><a id="TGSYU716"></a><div class="props_rev_3"><a id="GUID-FA7F6492-C872-4278-B51F-825CA36C4DA6" name="GUID-FA7F6492-C872-4278-B51F-825CA36C4DA6"></a><h4 id="TGSYU-GUID-FA7F6492-C872-4278-B51F-825CA36C4DA6" class="sect4">数据类型</h4>
                  <div>
                     <p>数据类型问题包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-7A240833-3297-455C-9E73-4F0FDC430CF9">二进制文字表示法</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-8D591454-5203-45BC-A53F-153CD43FCC86">数据类型转换</a></p>
                        </li>
                     </ul>
                  </div><a id="TGSYU717"></a><div class="props_rev_3"><a id="GUID-7A240833-3297-455C-9E73-4F0FDC430CF9" name="GUID-7A240833-3297-455C-9E73-4F0FDC430CF9"></a><h5 id="TGSYU-GUID-7A240833-3297-455C-9E73-4F0FDC430CF9" class="sect5">二进制文字表示法</h5>
                     <div>
                        <p>Oracle SQL使用由单引号括起的十六进制数字来表示要比较或插入到定义为数据类型<code class="codeph">RAW</code>列中的文字值。</p>
                        <p><a id="d2102e1185" class="indexterm-anchor"></a>此表示法未转换为与Sybase <code class="codeph">VARBINARY</code>和<code class="codeph">BINARY</code>数据类型兼容的语法（0x后跟十六进制数字，由单引号括起）。
                        </p>
                        <p>例如，不支持以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO BINARY_TAB @ SYBS VALUES（'0xff'）</pre><p>其中<code class="codeph">BINARY_TAB</code>包含数据类型为<code class="codeph">VARBINARY</code>或<code class="codeph">BINARY</code>的列。插入或更新<code class="codeph">VARBINARY</code>和<code class="codeph">BINARY</code>数据类型时使用绑定变量。
                        </p>
                     </div>
                  </div><a id="TGSYU718"></a><div class="props_rev_3"><a id="GUID-8D591454-5203-45BC-A53F-153CD43FCC86" name="GUID-8D591454-5203-45BC-A53F-153CD43FCC86"></a><h5 id="TGSYU-GUID-8D591454-5203-45BC-A53F-153CD43FCC86" class="sect5">数据类型转换</h5>
                     <div>
                        <p>Sybase不支持隐式日期转换。此类转换必须明确。</p>
                        <p>例如，网关为以下<code class="codeph">SELECT</code>语句发出错误：</p><pre class="oac_no_warn" dir="ltr">SELECT TATE_COL FROM TEST @ SYBS WHERE DATE_COL =“1-JAN-2001”;</pre><p>要避免隐式转换出现问题，请添加显式转换，如下所示：</p><pre class="oac_no_warn" dir="ltr">从TEST @ SYBS WHERE DATE_COL = TO_DATE（“1-JAN-2001”）中选择DATE_COL</pre><div class="infoboxnotealso" id="GUID-8D591454-5203-45BC-A53F-153CD43FCC86__GUID-5A582B33-C014-4797-9066-61466323DF3D">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="database-gateway-sybase-data-type-conversion.html#GUID-815363B3-5372-4C85-AF55-BFB5EA0F7F98">数据类型转换</a>有关数据类型限制的更多信息。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="TGSYU719"></a><div class="props_rev_3"><a id="GUID-6A362818-FAC8-41AB-BAA1-86B8E0C01883" name="GUID-6A362818-FAC8-41AB-BAA1-86B8E0C01883"></a><h4 id="TGSYU-GUID-6A362818-FAC8-41AB-BAA1-86B8E0C01883" class="sect4">查询</h4>
                  <div>
                     <p>查询问题包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-554E8EB3-2FB2-4640-B069-1FDC392D9420">行选择</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-11D2483A-E45F-44B2-A8BD-4DC419632FF9">空字符串</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-0F1F8A14-703C-4CD7-91E4-4C66560B4EDF">空绑定变量</a></p>
                        </li>
                     </ul>
                  </div><a id="TGSYU720"></a><div class="props_rev_3"><a id="GUID-554E8EB3-2FB2-4640-B069-1FDC392D9420" name="GUID-554E8EB3-2FB2-4640-B069-1FDC392D9420"></a><h5 id="TGSYU-GUID-554E8EB3-2FB2-4640-B069-1FDC392D9420" class="sect5">行选择</h5>
                     <div>
                        <p>Sybase在返回任何行之前评估所有选定行的查询条件。如果一个或多个行的评估过程中存在错误，则即使其余行满足条件，也不会返回任何行。</p>
                        <p>Oracle逐行评估查询条件，并在评估成功时返回一行。返回行直到一行未通过评估。</p>
                     </div>
                  </div><a id="TGSYU721"></a><div class="props_rev_3"><a id="GUID-11D2483A-E45F-44B2-A8BD-4DC419632FF9" name="GUID-11D2483A-E45F-44B2-A8BD-4DC419632FF9"></a><h5 id="TGSYU-GUID-11D2483A-E45F-44B2-A8BD-4DC419632FF9" class="sect5">空字符串</h5>
                     <div>
                        <p>Oracle将SQL语句中的空字符串作为空值处理。Sybase将空字符串作为空字符串处理。</p>
                        <p>比较空字符串时，网关将文字空字符串传递给Sybase数据库，而不进行任何转换。如果您希望空字符串表示空值，Sybase不会以这种方式处理该语句;它使用空字符串。</p>
                        <p>您可以通过在SQL语句中使用<code class="codeph">NULL</code>或<code class="codeph">IS NULL</code>而不是空字符串语法来避免此问题，如下例所示：</p><pre class="oac_no_warn" dir="ltr">SELECT * from“emp”@SYBS，其中“ename”为IS NULL;</pre><p>选择一个空字符串</p>
                        <p>对于<code class="codeph">VARCHAR</code>列，网关将空字符串作为<code class="codeph">NULL</code>值返回到Oracle数据库。
                        </p>
                        <p>对于<code class="codeph">CHAR</code>列，网关返回列的完整大小，每个字符为空格（''）。
                        </p>
                     </div>
                  </div><a id="TGSYU722"></a><div class="props_rev_3"><a id="GUID-0F1F8A14-703C-4CD7-91E4-4C66560B4EDF" name="GUID-0F1F8A14-703C-4CD7-91E4-4C66560B4EDF"></a><h5 id="TGSYU-GUID-0F1F8A14-703C-4CD7-91E4-4C66560B4EDF" class="sect5">空绑定变量</h5>
                     <div>
                        <p>对于<code class="codeph">VARCHAR</code>绑定变量，网关将空绑定变量作为<code class="codeph">NULL</code>值传递给Sybase数据库。
                        </p>
                     </div>
                  </div>
               </div><a id="TGSYU723"></a><div class="props_rev_3"><a id="GUID-1DE3B1D7-BD6D-43B6-8127-BF4220DA3436" name="GUID-1DE3B1D7-BD6D-43B6-8127-BF4220DA3436"></a><h4 id="TGSYU-GUID-1DE3B1D7-BD6D-43B6-8127-BF4220DA3436" class="sect4">锁定</h4>
                  <div>
                     <p>Sybase数据库的锁定模型与Oracle模型有很大不同。网关依赖于Sybase的基本行为，因此通过网关访问Sybase的Oracle应用程序可能会受到以下可能情况的影响：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读访问可能会阻止写访问</p>
                        </li>
                        <li>
                           <p>写访问可能会阻止读访问</p>
                        </li>
                        <li>
                           <p>语句级读取一致性无法保证</p>
                           <div class="infoboxnotealso" id="GUID-1DE3B1D7-BD6D-43B6-8127-BF4220DA3436__GUID-4164D2C6-B5A7-4AFB-ACE3-87E01AF66931">
                              <p class="notep1">也可以看看：</p>
                              <p>有关Sybase锁定模型的信息，请参见Sybase文档。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGSYU829"></a><div class="props_rev_3"><a id="GUID-166C6B2E-C5B2-433B-AA4B-7FCA54EC162B" name="GUID-166C6B2E-C5B2-433B-AA4B-7FCA54EC162B"></a><h4 id="TGSYU-GUID-166C6B2E-C5B2-433B-AA4B-7FCA54EC162B" class="sect4">Sybase标识符长度限制</h4>
                  <div>
                     <p>默认情况下，网关将始终引用标识符。但是，某些Sybase版本对于表或列名称等标识符的限制为30个字符，并且在检查此限制时，引号被视为名称的一部分。因此，使用引号时，只能指定28个字符。为了支持这些Sybase版本中的最大长度限制，您需要在网关初始化参数文件中指定<code class="codeph">HS_FDS_QUOTE_IDENTIFIER=FALSE</code> 。设置此初始化参数将使网关发送不带引号的标识符。但是，它具有排除使用包含点（。）或空格的标识符的副作用，并且标识符将遵循所使用的Sybase数据库的区分大小写。
                     </p>
                  </div>
               </div>
            </div><a id="TGSYU724"></a><div class="props_rev_3"><a id="GUID-F68B4168-F105-4F4E-ABC6-8D08DF973331" name="GUID-F68B4168-F105-4F4E-ABC6-8D08DF973331"></a><h3 id="TGSYU-GUID-F68B4168-F105-4F4E-ABC6-8D08DF973331" class="sect3">已知的限制</h3>
               <div>
                  <p>如果遇到本节或<span class="q">“ <a href="database-gateway-sybase-features.html#GUID-43A40ADA-3E5E-4F32-A070-2D472F234F01">已知问题</a> ”中</span>未列出的不兼容问题，请与Oracle支持服务联系。以下部分描述了已知的限制，并包括在可能的情况下处理它们的建议：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-C5D89B64-1A0C-4343-88A0-871B2FDA381B">交易诚信</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-AD2A40D0-EDEB-4973-89F6-62F1254E69CC">交易能力</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-B4C4699D-084D-4A17-BE95-9261CF0566C9">PL / SQL游标循环中的COMMIT或ROLLBACK关闭打开游标</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-1206D772-5969-4CDA-B321-C27C97AF2AEF">存储过程</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-8BDE3120-0401-42AD-889D-D6EC12C1FBE3">传递功能</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-3E756805-B67F-49D2-A4FB-3E2C87676758">Sybase NCHAR和NVARCHAR数据类型</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-FE84730A-B9AD-4399-8A79-1FC21346AE7C">SQL语法</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-DA57D529-D68B-4D91-99D8-83330D1C0FA9">带有小写表名的SQL * Plus COPY命令</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-9AB95238-30AC-4AB7-8D7C-7B0E8B8A3AD1">数据库链接</a></p>
                     </li>
                  </ul>
                  <p>以下限制也适用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>当负数用作<code class="codeph">SUBSTR</code>函数中的第二个参数时，将返回不正确的结果。这是由于Oracle <code class="codeph">SUBSTR</code>功能与Sybase中的等效功能不兼容。
                        </p>
                        <div class="infoboxnote" id="GUID-F68B4168-F105-4F4E-ABC6-8D08DF973331__GUID-60C6EBC9-0132-4451-99AD-8956476EEBED">
                           <p class="notep1">注意：</p>
                           <p>如果您对这些限制有任何疑问或疑虑，请联系Oracle支持服务。</p>
                        </div>
                     </li>
                  </ul>
               </div><a id="TGSYU725"></a><div class="props_rev_3"><a id="GUID-C5D89B64-1A0C-4343-88A0-871B2FDA381B" name="GUID-C5D89B64-1A0C-4343-88A0-871B2FDA381B"></a><h4 id="TGSYU-GUID-C5D89B64-1A0C-4343-88A0-871B2FDA381B" class="sect4">交易诚信</h4>
                  <div>
                     <p>在以下情况下，网关无法保证事务完整性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当网关处理的语句导致目标数据库中的隐式提交时</p>
                        </li>
                        <li>
                           <p>目标数据库配置为在自动提交模式下工作时</p>
                           <div class="infoboxnote" id="GUID-C5D89B64-1A0C-4343-88A0-871B2FDA381B__GUID-88C634D4-2E9B-4E22-BDF1-510A0F8DDDE3">
                              <p class="notep1">注意：</p>
                              <p>Oracle强烈建议如下：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果您知道执行特定语句会导致目标数据库中的隐式提交，请确保在其自己的事务中执行此语句。</p>
                                 </li>
                                 <li>
                                    <p>不要将目标数据库配置为在自动提交模式下工作。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGSYU726"></a><div class="props_rev_3"><a id="GUID-AD2A40D0-EDEB-4973-89F6-62F1254E69CC" name="GUID-AD2A40D0-EDEB-4973-89F6-62F1254E69CC"></a><h4 id="TGSYU-GUID-AD2A40D0-EDEB-4973-89F6-62F1254E69CC" class="sect4">交易能力</h4>
                  <div>
                     <p><a id="d2102e1726" class="indexterm-anchor"></a>网关不支持保存点。如果涉及网关的分布式更新事务正在进行并且用户尝试创建保存点，则会发生以下错误：</p><pre class="oac_no_warn" dir="ltr"><a id="d2102e1730" class="indexterm-anchor"></a> ORA-02070：数据库dblink在此上下文中不支持savepoint <a id="d2102e1733" class="indexterm-anchor"></a>
</pre><p><a id="d2102e1739" class="indexterm-anchor"></a>默认情况下，网关配置为<code class="codeph">COMMIT_CONFIRM</code> ，它始终是<a id="d2102e1745" class="indexterm-anchor"></a>事务更新Sybase数据库时的提交点站点。
                     </p>
                  </div>
               </div><a id="TGSYU727"></a><div class="props_rev_3"><a id="GUID-B4C4699D-084D-4A17-BE95-9261CF0566C9" name="GUID-B4C4699D-084D-4A17-BE95-9261CF0566C9"></a><h4 id="TGSYU-GUID-B4C4699D-084D-4A17-BE95-9261CF0566C9" class="sect4">PL / SQL游标循环中的COMMIT或ROLLBACK关闭打开游标</h4>
                  <div>
                     <p>在PL / SQL游标循环中发出的任何<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>关闭所有打开的游标，这可能导致以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-1002：取消顺序</pre><p>要防止此错误，请在游标循环外移动<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>语句。
                     </p>
                  </div>
               </div><a id="TGSYU728"></a><div class="props_rev_3"><a id="GUID-1206D772-5969-4CDA-B321-C27C97AF2AEF" name="GUID-1206D772-5969-4CDA-B321-C27C97AF2AEF"></a><h4 id="TGSYU-GUID-1206D772-5969-4CDA-B321-C27C97AF2AEF" class="sect4">存储过程</h4>
                  <div>
                     <p>通过嵌入提交或回滚的存储过程发出的更改不能由Oracle事务管理器或Oracle <code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>命令控制。
                     </p>
                     <p>通过Oracle Database Gateway for Sybase访问带有结果集的存储过程时，必须使用异构服务的顺序模式。</p>
                     <p>通过Oracle Database Gateway for Sybase访问具有多个结果集的存储过程时，必须先读取所有结果集，然后再继续。</p>
                     <p>必须将存储过程的输出参数初始化为<code class="codeph">NULL</code>值。
                     </p>
                     <p>Oracle Database Gateway for Sybase在传递查询中不支持带输出参数的输出参数或存储过程。</p>
                  </div>
               </div><a id="TGSYU729"></a><div class="props_rev_3"><a id="GUID-8BDE3120-0401-42AD-889D-D6EC12C1FBE3" name="GUID-8BDE3120-0401-42AD-889D-D6EC12C1FBE3"></a><h4 id="TGSYU-GUID-8BDE3120-0401-42AD-889D-D6EC12C1FBE3" class="sect4">传递功能</h4>
                  <div>
                     <p>Sybase使用网关执行的DDL语句<a id="d2102e1896" class="indexterm-anchor"></a>如果它们位于多语句事务中，则传递功能可能会失败。设置Sybase选项“ddl in tran”以允许事务中的DDL语句。
                     </p>
                     <p>Oracle建议您放置一个<a id="d2102e1901" class="indexterm-anchor"></a>使用传递功能执行此类语句时，DDL语句在其自己的事务中。必须在DDL语句之后发出显式<code class="codeph">COMMIT</code> 。
                     </p>
                     <p><a id="d2102e1908" class="indexterm-anchor"></a>如果通过网关传递的SQL语句导致Sybase数据库中的隐式提交，则Oracle事务管理器不会意识到提交，并且Oracle <code class="codeph">ROLLBACK</code>命令不能用于回滚事务。
                     </p>
                  </div>
               </div><a id="TGSYU730"></a><div class="props_rev_3"><a id="GUID-3E756805-B67F-49D2-A4FB-3E2C87676758" name="GUID-3E756805-B67F-49D2-A4FB-3E2C87676758"></a><h4 id="TGSYU-GUID-3E756805-B67F-49D2-A4FB-3E2C87676758" class="sect4">Sybase NCHAR和NVARCHAR数据类型</h4>
                  <div>
                     <p>网关无法选择使用Sybase <code class="codeph">NCHAR</code>或<code class="codeph">NVARCHAR</code>数据类型定义的列。
                     </p>
                  </div>
               </div><a id="TGSYU731"></a><div class="props_rev_3"><a id="GUID-FE84730A-B9AD-4399-8A79-1FC21346AE7C" name="GUID-FE84730A-B9AD-4399-8A79-1FC21346AE7C"></a><h4 id="TGSYU-GUID-FE84730A-B9AD-4399-8A79-1FC21346AE7C" class="sect4">SQL语法</h4>
                  <div>
                     <p>SQL语法的限制如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-A82DE02F-345F-4647-A62E-91F4F41CF91E">条款的当前条款</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-7C089AEA-A094-4242-A58E-776B96C9F4E7">通过条款连接</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-F2163EA1-E8CE-4140-B2EA-D3448866F071">ROWID</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-A0E56148-7576-4A73-93DA-4EDAB603339B">INSERT语句中的子查询</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sybase-features.html#GUID-2B5F7861-B8A6-496B-A1EB-79A814117790">解释计划声明</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-FE84730A-B9AD-4399-8A79-1FC21346AE7C__GUID-7985B3F7-A3B6-43C6-B609-B671A1BFAB99">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="database-gateway-sybase-supported-sqlsyntax-function.html#GUID-55F1375A-ACD9-4606-BE3B-AA63FEE172AE">支持的SQL语法和函数</a> ，以获取有关SQL语法限制的更多信息。
                        </p>
                     </div>
                  </div><a id="TGSYU732"></a><div class="props_rev_3"><a id="GUID-A82DE02F-345F-4647-A62E-91F4F41CF91E" name="GUID-A82DE02F-345F-4647-A62E-91F4F41CF91E"></a><h5 id="TGSYU-GUID-A82DE02F-345F-4647-A62E-91F4F41CF91E" class="sect5">条款的当前条款</h5>
                     <div>
                        <p>网关不支持带有<code class="codeph">WHERE CURRENT OF</code>子句的<code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句，因为它们依赖于Oracle <a id="d2102e2061" class="indexterm-anchor"></a> <code class="codeph">ROWID</code>实现。要通过网关更新或删除特定行，必须使用条件样式<code class="codeph">WHERE</code>子句。
                        </p>
                     </div>
                  </div><a id="TGSYU733"></a><div class="props_rev_3"><a id="GUID-7C089AEA-A094-4242-A58E-776B96C9F4E7" name="GUID-7C089AEA-A094-4242-A58E-776B96C9F4E7"></a><h5 id="TGSYU-GUID-7C089AEA-A094-4242-A58E-776B96C9F4E7" class="sect5">通过条款连接</h5>
                     <div>
                        <p>网关不支持<code class="codeph">SELECT</code>语句中的<code class="codeph">CONNECT BY</code>子句。
                        </p>
                     </div>
                  </div><a id="TGSYU734"></a><div class="props_rev_3"><a id="GUID-F2163EA1-E8CE-4140-B2EA-D3448866F071" name="GUID-F2163EA1-E8CE-4140-B2EA-D3448866F071"></a><h5 id="TGSYU-GUID-F2163EA1-E8CE-4140-B2EA-D3448866F071" class="sect5">ROWID</h5>
                     <div>
                        <p>不支持Oracle <code class="codeph">ROWID</code>实现。
                        </p>
                     </div>
                  </div><a id="TGSYU735"></a><div class="props_rev_3"><a id="GUID-A0E56148-7576-4A73-93DA-4EDAB603339B" name="GUID-A0E56148-7576-4A73-93DA-4EDAB603339B"></a><h5 id="TGSYU-GUID-A0E56148-7576-4A73-93DA-4EDAB603339B" class="sect5">INSERT语句中的子查询</h5>
                     <div>
                        <p><code class="codeph">INSERT</code>语句的子查询不能对同一个表使用多个别名。例如，不支持以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO“emp_target”@SYBS SELECT a。“empno”FROM“emp_source”@SYBS a，“emp_source”@SYBS b WHERE b。“empno”= 9999</pre></div>
                  </div><a id="TGSYU736"></a><div class="props_rev_3"><a id="GUID-2B5F7861-B8A6-496B-A1EB-79A814117790" name="GUID-2B5F7861-B8A6-496B-A1EB-79A814117790"></a><h5 id="TGSYU-GUID-2B5F7861-B8A6-496B-A1EB-79A814117790" class="sect5">解释计划声明</h5>
                     <div>
                        <p>不支持<code class="codeph">EXPLAIN PLAN</code>语句。
                        </p>
                     </div>
                  </div>
               </div><a id="TGSYU738"></a><div class="props_rev_3"><a id="GUID-DA57D529-D68B-4D91-99D8-83330D1C0FA9" name="GUID-DA57D529-D68B-4D91-99D8-83330D1C0FA9"></a><h4 id="TGSYU-GUID-DA57D529-D68B-4D91-99D8-83330D1C0FA9" class="sect4">带有小写表名的SQL * Plus COPY命令</h4>
                  <div>
                     <p>您需要使用双引号来包装小写表名。</p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">复制自tkhouser / tkhouser @ inst1使用select * from“tkhodept”@ holink2插入loc_tkhodept;</pre></div>
               </div><a id="TGSYU739"></a><div class="props_rev_3"><a id="GUID-9AB95238-30AC-4AB7-8D7C-7B0E8B8A3AD1" name="GUID-9AB95238-30AC-4AB7-8D7C-7B0E8B8A3AD1"></a><h4 id="TGSYU-GUID-9AB95238-30AC-4AB7-8D7C-7B0E8B8A3AD1" class="sect4">数据库链接</h4>
                  <div>
                     <p>网关不是多线程的，不支持共享数据库链接。每个网关会话都会生成一个单独的网关进程，并且无法共享连接。</p>
                  </div>
               </div>
            </div><a id="TGSYU740"></a><div class="props_rev_3"><a id="GUID-43A40ADA-3E5E-4F32-A070-2D472F234F01" name="GUID-43A40ADA-3E5E-4F32-A070-2D472F234F01"></a><h3 id="TGSYU-GUID-43A40ADA-3E5E-4F32-A070-2D472F234F01" class="sect3">已知问题</h3>
               <div>
                  <p>本节介绍已知问题，并包括在可能的情况下进行纠正的建议。如果您对问题有任何疑问或疑虑，请联系Oracle支持服务。可在线获取当前的问题列表。有关访问列表的信息，请与当地的Oracle办事处联系。</p>
                  <p>已知问题如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-22D3B18B-3414-4BDA-8CCB-109DE9763939">加密格式登录</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-DFBCD7A4-742B-40A2-8CEC-9BC22C1131A8">日期算术</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-9B6A69F6-3D35-498F-9122-E4D22CE2C827">Sybase IMAGE和TEXT数据类型</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-9FCA8C8C-BEAD-4155-84FC-B73D8CD0DE07">字符串函数</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-0081DC7C-A0DD-4848-83E2-A069C6386C3E">架构名称和PL / SQL</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-8FAA9284-10BB-49D3-B4BF-E300EA76C798">数据字典视图和PL / SQL</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sybase-features.html#GUID-C0B7E445-BF8F-478E-80E2-90DCF980DDF2">存储过程</a></p>
                     </li>
                  </ul>
               </div><a id="TGSYU741"></a><div class="props_rev_3"><a id="GUID-22D3B18B-3414-4BDA-8CCB-109DE9763939" name="GUID-22D3B18B-3414-4BDA-8CCB-109DE9763939"></a><h4 id="TGSYU-GUID-22D3B18B-3414-4BDA-8CCB-109DE9763939" class="sect4">加密格式登录</h4>
                  <div>
                     <p>Oracle数据库不再支持初始化参数<code class="codeph">DBLINK_ENCRYPT_LOGIN</code> 。直到版本7.3，此参数的默认TRUE值阻止了通过网络发送登录用户ID的密码（以明文形式）。更高版本会自动加密密码。
                     </p>
                  </div>
               </div><a id="TGSYU742"></a><div class="props_rev_3"><a id="GUID-DFBCD7A4-742B-40A2-8CEC-9BC22C1131A8" name="GUID-DFBCD7A4-742B-40A2-8CEC-9BC22C1131A8"></a><h4 id="TGSYU-GUID-DFBCD7A4-742B-40A2-8CEC-9BC22C1131A8" class="sect4">日期算术</h4>
                  <div>
                     <p>以下SQL表达式无法与网关正常运行：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">date</span> + <span class="italic">numbernumber</span> + <span class="italic">datedate  -  numberdate1  -  date2</span>
</pre><p>具有前面表达式的语句将发送到Sybase数据库，而不进行任何转换。由于Sybase不支持这些日期算术函数，因此语句会返回错误。</p>
                  </div>
               </div><a id="TGSYU743"></a><div class="props_rev_3"><a id="GUID-9B6A69F6-3D35-498F-9122-E4D22CE2C827" name="GUID-9B6A69F6-3D35-498F-9122-E4D22CE2C827"></a><h4 id="TGSYU-GUID-9B6A69F6-3D35-498F-9122-E4D22CE2C827" class="sect4">Sybase IMAGE和TEXT数据类型</h4>
                  <div>
                     <p>使用<code class="codeph">IMAGE</code>和<code class="codeph">TEXT</code>数据类型时，以下限制适用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不支持的SQL函数不能在访问定义为Sybase数据类型<code class="codeph">IMAGE</code>或<code class="codeph">TEXT</code>的列的SQL语句中使用。</p>
                        </li>
                        <li>
                           <p>当数据长度超过80个字符时，不能使用SQL * Plus从定义为Sybase数据类型<code class="codeph">IMAGE</code>或<code class="codeph">TEXT</code>的列中选择数据。Oracle建议使用Pro * C或Oracle Call Interface在Sybase数据库中访问此类数据。
                           </p>
                        </li>
                        <li>
                           <p>无法通过传递查询读取<code class="codeph">IMAGE</code>和<code class="codeph">TEXT</code>数据。
                           </p>
                        </li>
                     </ul>
                     <p>网关不支持<code class="codeph">DBMS_SQL</code>包的PL / SQL函数<code class="codeph">COLUMN_VALUE_LONG</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-9B6A69F6-3D35-498F-9122-E4D22CE2C827__GUID-90E0CA7F-B5FF-4172-86F6-96294885E095">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="database-gateway-sybase-supported-sqlsyntax-function.html#GUID-55F1375A-ACD9-4606-BE3B-AA63FEE172AE">支持的SQL语法和函数</a> ，以获取有关SQL语法限制的更多信息。
                        </p>
                     </div>
                  </div>
               </div><a id="TGSYU744"></a><div class="props_rev_3"><a id="GUID-9FCA8C8C-BEAD-4155-84FC-B73D8CD0DE07" name="GUID-9FCA8C8C-BEAD-4155-84FC-B73D8CD0DE07"></a><h4 id="TGSYU-GUID-9FCA8C8C-BEAD-4155-84FC-B73D8CD0DE07" class="sect4">字符串函数</h4>
                  <div>
                     <p>如果使用“ <code class="codeph">||</code> ”连接数字文字<a id="d2102e2574" class="indexterm-anchor"></a>运算符在使用网关查询Sybase数据库时，结果是算术加法。例如，以下语句的结果为18：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT 9 || 9 FROM DUAL @ SYBS;</pre><p>使用Oracle查询Oracle数据库时，结果为<code class="codeph">99</code> 。
                     </p>
                  </div>
               </div><a id="TGSYU745"></a><div class="props_rev_3"><a id="GUID-0081DC7C-A0DD-4848-83E2-A069C6386C3E" name="GUID-0081DC7C-A0DD-4848-83E2-A069C6386C3E"></a><h4 id="TGSYU-GUID-0081DC7C-A0DD-4848-83E2-A069C6386C3E" class="sect4">架构名称和PL / SQL</h4>
                  <div>
                     <p>如果在PL / SQL块的SQL语句中没有为Sybase数据库对象添加其模式名称，则会出现以下错误消息：</p><pre class="oac_no_warn" dir="ltr">必须声明ORA-6550 PLS-201标识符<span class="italic">table_name</span> 。
</pre><p>更改SQL语句以包括对象的模式名称。</p>
                  </div>
               </div><a id="TGSYU746"></a><div class="props_rev_3"><a id="GUID-8FAA9284-10BB-49D3-B4BF-E300EA76C798" name="GUID-8FAA9284-10BB-49D3-B4BF-E300EA76C798"></a><h4 id="TGSYU-GUID-8FAA9284-10BB-49D3-B4BF-E300EA76C798" class="sect4">数据字典视图和PL / SQL</h4>
                  <div>
                     <p>您不能在PL / SQL块内的SQL语句中引用数据字典视图。</p>
                  </div>
               </div><a id="TGSYU747"></a><div class="props_rev_3"><a id="GUID-C0B7E445-BF8F-478E-80E2-90DCF980DDF2" name="GUID-C0B7E445-BF8F-478E-80E2-90DCF980DDF2"></a><h4 id="TGSYU-GUID-C0B7E445-BF8F-478E-80E2-90DCF980DDF2" class="sect4">存储过程</h4>
                  <div>
                     <p>返回结果集的存储过程的返回值不正确。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01142.DBMS_XDB_CONSTANTS.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_XDB_CONSTANTS package provides an interface to commonly used constants. Users should use constants instead of dynamic strings to avoid typographical errors."></meta>
      <meta name="description" content="The DBMS_XDB_CONSTANTS package provides an interface to commonly used constants. Users should use constants instead of dynamic strings to avoid typographical errors."></meta>
      <title>DBMS_XDB_CONSTANTS</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_XDB_CONSTANTS package provides an interface to commonly used constants. Users should use constants instead of dynamic strings to avoid typographical errors."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_XDB_CONFIG.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_XDB_REPOS.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_XDB_CONFIG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_XDB_REPOS.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_XDB_CONSTANTS</li>
            </ol>
            <a id="GUID-DA296C1A-98DF-45B5-BD70-1EC44047BF8D" name="GUID-DA296C1A-98DF-45B5-BD70-1EC44047BF8D"></a><a id="ARPLS73572"></a><a id="ARPLS73572"></a>
            
            <h2 id="ARPLS-GUID-DA296C1A-98DF-45B5-BD70-1EC44047BF8D" class="sect2"><span class="enumeration_chapter">189</span> DBMS_XDB_CONSTANTS</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_XDB_CONSTANTS</code>包提供常用常量的接口。用户应使用常量而不是动态字符串来避免印刷错误。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_XDB_CONSTANTS.html#GUID-1474799E-7600-4006-B1BF-BFFFBA7F0F97" title="由XDB拥有，DBMS_XDB_CONSTANTS包必须由SYS或XDB创建。 EXECUTE特权被授予PUBLIC。此包中的子程序使用当前用户的权限执行。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XDB_CONSTANTS.html#GUID-99BA6C2C-0F44-457E-BE8A-35DF5BD08FA0" title="该表列出了DBMS_XDB_CONSTANTS子程序并简要描述了它们。">DBMS_XDB_CONSTANTS子程序的摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS73575"></a><a id="ARPLS73575"></a><div class="props_rev_3"><a id="GUID-1474799E-7600-4006-B1BF-BFFFBA7F0F97" name="GUID-1474799E-7600-4006-B1BF-BFFFBA7F0F97"></a><h3 id="ARPLS-GUID-1474799E-7600-4006-B1BF-BFFFBA7F0F97" class="sect3"><span class="enumeration_section">189.1</span> DBMS_XDB_CONSTANTS安全模型</h3>
               <div>
                  <p>由<code class="codeph">XDB</code>拥有， <code class="codeph">DBMS_XDB_CONSTANTS</code>包必须由<code class="codeph">SYS</code>或<code class="codeph">XDB</code>创建。 <code class="codeph">EXECUTE</code>特权被授予<code class="codeph">PUBLIC</code> 。此包中的子程序使用当前用户的权限执行。
                  </p>
               </div>
            </div><a id="ARPLS74705"></a><a id="ARPLS74706"></a><a id="ARPLS74706"></a><a id="ARPLS74705"></a><div class="props_rev_3"><a id="GUID-99BA6C2C-0F44-457E-BE8A-35DF5BD08FA0" name="GUID-99BA6C2C-0F44-457E-BE8A-35DF5BD08FA0"></a><h3 id="ARPLS-GUID-99BA6C2C-0F44-457E-BE8A-35DF5BD08FA0" class="sect3"><span class="enumeration_section">189.2</span> DBMS_XDB_CONSTANTS子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_XDB_CONSTANTS</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-99BA6C2C-0F44-457E-BE8A-35DF5BD08FA0__GUID-A1867BA1-79CA-44A5-BCEA-06D836C5B33D">
                     <p class="titleintable">表189-1 DBMS_XDB_CONSTANTS包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XDB_CONSTANTS包子程序" width="100%" border="1" summary="This table lists the DBMS_XDB_CONSTANTS subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="38%" id="d1149547e335">子程序</th>
                              <th align="left" valign="bottom" width="62%" id="d1149547e338">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e343" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-1C2AF7C4-2326-46FD-A9C3-97542289936E" title="该函数返回&#39;AL32UTF8&#39;。">ENCODING_DEFAULT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e343 d1149547e338 ">
                                 <p>返回<code class="codeph">'AL32UTF8'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e360" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-BB774B2A-9DD5-4DA3-B64F-343B3EFC79BA" title="该函数返回&#39;WE8ISO8859P1&#39;。">ENCODING_ISOLATIN1功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e360 d1149547e338 ">
                                 <p>返回<code class="codeph">'WE8ISO8859P1'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e377" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-3465DD06-907B-424B-9D21-FC2F929F9228" title="该函数返回&#39;AL32UTF8&#39;。">ENCODING_UTF8功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e377 d1149547e338 ">
                                 <p>返回<code class="codeph">'AL32UTF8'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e394" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-F6F2381B-4E90-4524-A0C5-AF7A6EB26235" title="该函数返回&#39;WE8MSWIN1252&#39;。">ENCODING_WIN1252功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e394 d1149547e338 ">
                                 <p>返回<code class="codeph">'WE8MSWIN1252'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e411" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-CE58183B-24CB-4871-BBA1-DF6C58C14295" title="此函数返回&#39;http://xmlns.oracle.com/xdb/acl.xsd&#39;。">NAMESPACE_ACL功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e411 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e428" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-AF5B29C9-7238-48C1-85A5-269F4360AB9D" title="此函数返回&#39;http://xmlns.oracle.com/xdbuserMetaData&#39;。">NAMESPACE_METADATA函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e428 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdbuserMetaData'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e445" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-DD8EC21B-AAFA-4FE9-97E7-35D5F308E293" title="此函数返回&#39;http://xmlns.oracle.com&#39;。">NAMESPACE_ORACLE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e445 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e462" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-978C7ABB-4837-4BA4-88D9-6B5161F41D10" title="此函数返回&#39;http://xmlns.oracle.com/xdb&#39;。">NAMESPACE_ORACLE_XDB函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e462 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e479" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-C363732E-3C14-456B-A2A0-1C8EB1F41027" title="此函数返回&#39;/XDBResource.xsd&#39;">NAMESPACE_RESOURCE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e479 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBResource.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e495" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-9504B5E4-BAF3-475D-AABE-306B977957C6" title="此函数返回&#39;http://xmlns.oracle.com/resourceEvent&#39;。">NAMESPACE_RESOURCE_EVENT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e495 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/resourceEvent'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e512" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-A63F12E6-7467-4E7E-B4F5-30ABD9C43B71" title="此函数返回&#39;http://xmlns.oracle.com/XDBResConfig.xsd&#39;。">NAMESPACE_RESOURCE_CONFIG功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e512 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/XDBResConfig.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e530" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-1E95D6BA-9E18-4219-BB73-3BC5771EA46A" title="此函数返回&#39;http://xmlns.oracle.com/xdb/XDBSchema.xsd&#39;。">NAMESPACE_XDBSCHEMA功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e530 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e547" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-66E058AB-F454-4DAA-A46F-651874041AC3" title="此函数返回&#39;http://xmlns.oracle.com/xdb/xdiff.xsd&#39;。">NAMESPACE_XMLDIFF函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e547 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/xdiff.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e564" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-E5CABD5E-5C1F-4E10-A374-C81C4CE8BE0D" title="该函数返回&#39;http://www.w3.org/2001/XMLSchema-instance&#39;。">NAMESPACE_XMLINSTANCE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e564 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://www.w3.org/2001/XMLSchema-instance'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e581" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-9CCD2DF6-E4EE-4B6B-95CB-012E96100EDA" title="该函数返回&#39;http://www.w3.org/2001/XMLSchema&#39;。">NAMESPACE_XMLSCHEMA功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e581 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://www.w3.org/2001/XMLSchema'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e598" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-8D5CC0AE-7E44-4E9A-8E16-608BE0252CB4" title="此函数返回&#39;xmlns：acl =&#39;http://xmlns.oracle.com/acs.xsd&#39;。">NSPREFIX_ACL_ACL功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e598 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:acl= 'http://xmlns.oracle.com/acs.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e615" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-C4FE5538-4346-4AE4-9CAA-CF4A86F3FFB3" title="此函数返回&#39;&#39;xmlns：rc =" http:="" xmlns.oracle.com="" xdb="" xdbresconfig.xs="&#39;." ="">NSPREFIX_RESCONFIG_RC功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e615 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:rc="http://xmlns.oracle.com/xdb/XDBResConfig.xsd"'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e632" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-C37F76CC-CB08-4ABC-B197-7FEC9B8D0DD7" title="此函数返回&#39;xmlns：r =" http:="" xmlns.oracle.com="" xdbresource.xsd'="=">NSPREFIX_RESOURCE_R功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e632 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:r="http://xmlns.oracle.com/XDBResource.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e649" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-4222FE64-26AE-4745-A096-1C72AF7DF855" title="此函数返回&#39;http://xmlns.oracle.com/xdb&#39;。">NSPREFIX_XDB_XDB函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e649 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e666" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-035083C5-DB0B-456D-8F7B-15E2563E8522" title="此函数返回&#39;xmlns：xsi =" 2001="" http:="" www.w3.org="" xmlschema-instanc="&#39;." ="">NSPREFIX_XMLINSTANCE_XSI功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e666 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e683" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-8935FEEA-C4AE-467F-AABB-3676F6EC83E5" title="此函数返回&#39;xmlns：xd =" http:="" xmlns.oracle.com="" xdb="" xdiff.xs="&#39;." ="">NSPREFIX_XMLDIFF_XD功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e683 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:xd="http://xmlns.oracle.com/xdb/xdiff.xsd"'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e700" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-85CCD7D8-E0E5-428D-8769-2BA6132A6B60" title="此函数返回&#39;xmlns：xsd =" 2001="" http:="" www.w3.org="" xmlschem="&#39;." ="">NSPREFIX_XMLSCHEMA_XSD功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e700 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:xsd="http://www.w3.org/2001/XMLSchema"'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e718" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-9939C761-2263-456B-BFFE-503FC0BADD09" title="此函数返回&#39;http://xmlns.oracle.com/xdb/acl.xsd&#39;。">SCHEMAURL_ACL功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e718 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e735" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-D1AB3274-2695-4CBB-B9FD-0DE0E7ABAD5A" title="此函数返回&#39;http://xmlns.oracle.com/xdb/acl.xsd#acl&#39;。">SCHEMAELEM_RES_ACL功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e735 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd#acl'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e752" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-6CBC30AD-871C-476E-ABAD-62CF75252207" title="此函数返回&#39;http://xmlns.oracle.com/xdb/XDBSchema.xsd#binary&#39;。">SCHEMAELEM_RESCONTENT_BINARY函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e752 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd#binary'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e769" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-2BD2A9FD-83EE-4ADF-AD76-C7C9380A9088" title="此函数返回&#39;http://xmlns.oracle.com/xdb/XDBSchema.xsd#text&#39;。">SCHEMAELEM_RESCONTENT_TEXT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e769 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd#text'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e786" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-1E8F7828-FAE7-441A-9C03-FB8DCA952A6D" title="此函数返回&#39;http://xmlns.oracle.com/xdb/XDBResource.xsd&#39;。">SCHEMAURL_RESOURCE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e786 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBResource.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e803" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-BD183F9C-1DB4-4809-8D98-448502063395" title="此函数返回&#39;http://xmlns.oracle.com/xdb/XDBSchema.xsd&#39;。">SCHEMAURL_XDBSCHEMA功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e803 d1149547e338 ">
                                 <p>返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e820" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-B8B8F730-4278-4194-8CB7-3FEAAC943D4C" title="此函数返回&#39;xmlns：xsd =" 2001="" http:="" www.w3.org="" xmlschem="=" http://xmlns.oracle.com/xdb&#39;="">XDBSCHEMA_PREFIXES函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e820 d1149547e338 ">
                                 <p>返回<code class="codeph">'xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xdb="http://xmlns.oracle.com/xdb'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e837" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-B2BB8155-CD89-4450-911A-05997A387092" title="此函数返回&#39;attribute&#39;。">XSD_ATTRIBUTE功能</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e837 d1149547e338 ">
                                 <p>返回<code class="codeph">'attribute'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e854" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-1EFE9DD1-31A5-4CA7-A779-B7A3EC839918" title="此函数返回&#39;complexType&#39;。">XSD_COMPLEX_TYPE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e854 d1149547e338 ">
                                 <p>返回<code class="codeph">'complexType'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e871" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-0BD3C080-D31F-4E44-A31A-8409A052DCB2" title="此函数返回&#39;element&#39;。">XSD_ELEMENT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e871 d1149547e338 ">
                                 <p>返回<code class="codeph">'element'</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d1149547e888" headers="d1149547e335 ">
                                 <p><a href="DBMS_XDB_CONSTANTS.html#GUID-277B6F16-30D3-4504-8747-93C490DBAB3F" title="此函数返回&#39;group&#39;">XSD_GROUP函数</a></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d1149547e888 d1149547e338 ">
                                 <p>返回<code class="codeph">'group'</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS74707"></a><a id="ARPLS74707"></a><div class="props_rev_3"><a id="GUID-1C2AF7C4-2326-46FD-A9C3-97542289936E" name="GUID-1C2AF7C4-2326-46FD-A9C3-97542289936E"></a><h4 id="ARPLS-GUID-1C2AF7C4-2326-46FD-A9C3-97542289936E" class="sect4"><span class="enumeration_section">189.2.1</span> ENCODING_DEFAULT函数</h4>
                  <div>
                     <p>该函数返回<code class="codeph">'AL32UTF8'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1C2AF7C4-2326-46FD-A9C3-97542289936E__GUID-25F1E0D5-55FF-4B69-B21E-727B013FC603">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.ENCODING_DEFAULT RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1C2AF7C4-2326-46FD-A9C3-97542289936E__GUID-CAA3F5B4-DB32-4438-A542-531C8C385A08">回报价值</p>
                        <p><code class="codeph">'AL32UTF8'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74708"></a><a id="ARPLS74708"></a><div class="props_rev_3"><a id="GUID-BB774B2A-9DD5-4DA3-B64F-343B3EFC79BA" name="GUID-BB774B2A-9DD5-4DA3-B64F-343B3EFC79BA"></a><h4 id="ARPLS-GUID-BB774B2A-9DD5-4DA3-B64F-343B3EFC79BA" class="sect4"><span class="enumeration_section">189.2.2</span> ENCODING_ISOLATIN1功能</h4>
                  <div>
                     <p>该函数返回<code class="codeph">'WE8ISO8859P1'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BB774B2A-9DD5-4DA3-B64F-343B3EFC79BA__GUID-2A6B0F38-B3E0-4F0C-A603-6F18EAF026C9">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.ENCODING_ISOLATIN1 RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BB774B2A-9DD5-4DA3-B64F-343B3EFC79BA__GUID-F5FC2966-8A9C-4A20-B248-12B884564D5E">回报价值</p>
                        <p><code class="codeph">'WE8ISO8859P1'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74709"></a><a id="ARPLS74709"></a><div class="props_rev_3"><a id="GUID-3465DD06-907B-424B-9D21-FC2F929F9228" name="GUID-3465DD06-907B-424B-9D21-FC2F929F9228"></a><h4 id="ARPLS-GUID-3465DD06-907B-424B-9D21-FC2F929F9228" class="sect4"><span class="enumeration_section">189.2.3</span> ENCODING_UTF8功能</h4>
                  <div>
                     <p>该函数返回<code class="codeph">'AL32UTF8'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3465DD06-907B-424B-9D21-FC2F929F9228__GUID-D8132663-EAAD-4096-85A2-0DC4DE04BE02">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.ENCODING_UTF8 RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3465DD06-907B-424B-9D21-FC2F929F9228__GUID-46322841-BF8F-4131-81E5-7A6E1118F4B4">回报价值</p>
                        <p><code class="codeph">'AL32UTF8'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74710"></a><a id="ARPLS74710"></a><div class="props_rev_3"><a id="GUID-F6F2381B-4E90-4524-A0C5-AF7A6EB26235" name="GUID-F6F2381B-4E90-4524-A0C5-AF7A6EB26235"></a><h4 id="ARPLS-GUID-F6F2381B-4E90-4524-A0C5-AF7A6EB26235" class="sect4"><span class="enumeration_section">189.2.4</span> ENCODING_WIN1252功能</h4>
                  <div>
                     <p>该函数返回<code class="codeph">'WE8MSWIN1252'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F6F2381B-4E90-4524-A0C5-AF7A6EB26235__GUID-CD822FC5-8640-414E-857B-4AAE9F2BB377">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.ENCODING_WIN1252 RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6F2381B-4E90-4524-A0C5-AF7A6EB26235__GUID-40C4DA25-8978-484E-9EDF-E9CBEC677701">回报价值</p>
                        <p><code class="codeph">'WE8MSWIN1252'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74711"></a><a id="ARPLS74711"></a><div class="props_rev_3"><a id="GUID-CE58183B-24CB-4871-BBA1-DF6C58C14295" name="GUID-CE58183B-24CB-4871-BBA1-DF6C58C14295"></a><h4 id="ARPLS-GUID-CE58183B-24CB-4871-BBA1-DF6C58C14295" class="sect4"><span class="enumeration_section">189.2.5</span> NAMESPACE_ACL功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CE58183B-24CB-4871-BBA1-DF6C58C14295__GUID-FDDE250E-8361-4804-A8C9-3EE3E52C2B9A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_ACL RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CE58183B-24CB-4871-BBA1-DF6C58C14295__GUID-4F5AC8A7-EA3B-424E-9DCA-9154D1A0F689">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74712"></a><a id="ARPLS74712"></a><div class="props_rev_3"><a id="GUID-AF5B29C9-7238-48C1-85A5-269F4360AB9D" name="GUID-AF5B29C9-7238-48C1-85A5-269F4360AB9D"></a><h4 id="ARPLS-GUID-AF5B29C9-7238-48C1-85A5-269F4360AB9D" class="sect4"><span class="enumeration_section">189.2.6</span> NAMESPACE_METADATA函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdbuserMetaData'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AF5B29C9-7238-48C1-85A5-269F4360AB9D__GUID-8BE27226-3889-4B34-B166-99A011046FC7">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_METADATA RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF5B29C9-7238-48C1-85A5-269F4360AB9D__GUID-9A4C5068-FB8F-427E-A6B8-4BD24AE06DCC">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdbuserMetaData'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74713"></a><a id="ARPLS74713"></a><div class="props_rev_3"><a id="GUID-DD8EC21B-AAFA-4FE9-97E7-35D5F308E293" name="GUID-DD8EC21B-AAFA-4FE9-97E7-35D5F308E293"></a><h4 id="ARPLS-GUID-DD8EC21B-AAFA-4FE9-97E7-35D5F308E293" class="sect4"><span class="enumeration_section">189.2.7</span> NAMESPACE_ORACLE功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DD8EC21B-AAFA-4FE9-97E7-35D5F308E293__GUID-0B6060D5-F30B-4982-BB64-F596DC42751F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_ORACLE RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DD8EC21B-AAFA-4FE9-97E7-35D5F308E293__GUID-8BB86399-35C7-42D7-AB8C-D3ABEA4CD5A7">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74714"></a><a id="ARPLS74714"></a><div class="props_rev_3"><a id="GUID-978C7ABB-4837-4BA4-88D9-6B5161F41D10" name="GUID-978C7ABB-4837-4BA4-88D9-6B5161F41D10"></a><h4 id="ARPLS-GUID-978C7ABB-4837-4BA4-88D9-6B5161F41D10" class="sect4"><span class="enumeration_section">189.2.8</span> NAMESPACE_ORACLE_XDB函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-978C7ABB-4837-4BA4-88D9-6B5161F41D10__GUID-D44C626C-901B-4A3F-B496-7ABD3253DB2E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_ORACLE_XDB RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-978C7ABB-4837-4BA4-88D9-6B5161F41D10__GUID-B75B1989-FCA7-4134-A767-A35335A51971">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74715"></a><a id="ARPLS74715"></a><div class="props_rev_3"><a id="GUID-C363732E-3C14-456B-A2A0-1C8EB1F41027" name="GUID-C363732E-3C14-456B-A2A0-1C8EB1F41027"></a><h4 id="ARPLS-GUID-C363732E-3C14-456B-A2A0-1C8EB1F41027" class="sect4"><span class="enumeration_section">189.2.9</span> NAMESPACE_RESOURCE功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'/XDBResource.xsd'</code></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C363732E-3C14-456B-A2A0-1C8EB1F41027__GUID-0F745A0C-9488-4EA0-AE5B-F80DF0C9BF25">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_RESOURCE RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C363732E-3C14-456B-A2A0-1C8EB1F41027__GUID-70CED1B8-77B4-410F-9BA1-0C33AD965B5F">回报价值</p>
                        <p><code class="codeph">“http://xmlns.oracle.com/xdb/XDBResource.xsd</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74716"></a><a id="ARPLS74716"></a><div class="props_rev_3"><a id="GUID-9504B5E4-BAF3-475D-AABE-306B977957C6" name="GUID-9504B5E4-BAF3-475D-AABE-306B977957C6"></a><h4 id="ARPLS-GUID-9504B5E4-BAF3-475D-AABE-306B977957C6" class="sect4"><span class="enumeration_section">189.2.10</span> NAMESPACE_RESOURCE_EVENT函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/resourceEvent'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9504B5E4-BAF3-475D-AABE-306B977957C6__GUID-92DFA81E-E047-4AD4-B0BE-700A67D5A9FB">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_RESOURCE_EVENT RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9504B5E4-BAF3-475D-AABE-306B977957C6__GUID-400E7FAD-DC85-47E9-985D-3B2C4317B35C">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/resourceEvent'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74717"></a><a id="ARPLS74717"></a><div class="props_rev_3"><a id="GUID-A63F12E6-7467-4E7E-B4F5-30ABD9C43B71" name="GUID-A63F12E6-7467-4E7E-B4F5-30ABD9C43B71"></a><h4 id="ARPLS-GUID-A63F12E6-7467-4E7E-B4F5-30ABD9C43B71" class="sect4"><span class="enumeration_section">189.2.11</span> NAMESPACE_RESOURCE_CONFIG函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/XDBResConfig.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A63F12E6-7467-4E7E-B4F5-30ABD9C43B71__GUID-35C6F7C2-E72D-4B07-9679-F8225F86E79F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_RESOURCE_CONFIG RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A63F12E6-7467-4E7E-B4F5-30ABD9C43B71__GUID-FAD59964-4AF4-4842-A048-C5888F83EC81">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/XDBResConfig.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74718"></a><a id="ARPLS74718"></a><div class="props_rev_3"><a id="GUID-1E95D6BA-9E18-4219-BB73-3BC5771EA46A" name="GUID-1E95D6BA-9E18-4219-BB73-3BC5771EA46A"></a><h4 id="ARPLS-GUID-1E95D6BA-9E18-4219-BB73-3BC5771EA46A" class="sect4"><span class="enumeration_section">189.2.12</span> NAMESPACE_XDBSCHEMA功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1E95D6BA-9E18-4219-BB73-3BC5771EA46A__GUID-7D3AF82C-9376-4AE3-8FA9-B8EF3B541B17">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_XDBSCHEMA RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E95D6BA-9E18-4219-BB73-3BC5771EA46A__GUID-35AEAA84-A81D-4845-BB3D-C1A7CACAC6E1">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74719"></a><a id="ARPLS74719"></a><div class="props_rev_3"><a id="GUID-66E058AB-F454-4DAA-A46F-651874041AC3" name="GUID-66E058AB-F454-4DAA-A46F-651874041AC3"></a><h4 id="ARPLS-GUID-66E058AB-F454-4DAA-A46F-651874041AC3" class="sect4"><span class="enumeration_section">189.2.13</span> NAMESPACE_XMLDIFF函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/xdiff.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-66E058AB-F454-4DAA-A46F-651874041AC3__GUID-6F1BDB2D-6103-4354-951C-BFFD97ACF79C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_XMLDIFF RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-66E058AB-F454-4DAA-A46F-651874041AC3__GUID-3C5D32C5-D354-45E7-8602-8E378F32B402">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/xdiff.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74720"></a><a id="ARPLS74720"></a><div class="props_rev_3"><a id="GUID-E5CABD5E-5C1F-4E10-A374-C81C4CE8BE0D" name="GUID-E5CABD5E-5C1F-4E10-A374-C81C4CE8BE0D"></a><h4 id="ARPLS-GUID-E5CABD5E-5C1F-4E10-A374-C81C4CE8BE0D" class="sect4"><span class="enumeration_section">189.2.14</span> NAMESPACE_XMLINSTANCE函数</h4>
                  <div>
                     <p>该函数返回<code class="codeph">'http://www.w3.org/2001/XMLSchema-instance'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E5CABD5E-5C1F-4E10-A374-C81C4CE8BE0D__GUID-6259B300-3DC6-482A-B767-C62646994D21">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NAMESPACE_XMLINSTANCE RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5CABD5E-5C1F-4E10-A374-C81C4CE8BE0D__GUID-F812E2A1-F91D-4849-9E98-324B8CD17581">回报价值</p>
                        <p><code class="codeph">'http://www.w3.org/2001/XMLSchema-instance'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74721"></a><a id="ARPLS74721"></a><div class="props_rev_3"><a id="GUID-9CCD2DF6-E4EE-4B6B-95CB-012E96100EDA" name="GUID-9CCD2DF6-E4EE-4B6B-95CB-012E96100EDA"></a><h4 id="ARPLS-GUID-9CCD2DF6-E4EE-4B6B-95CB-012E96100EDA" class="sect4"><span class="enumeration_section">189.2.15</span> NAMESPACE_XMLSCHEMA功能</h4>
                  <div>
                     <p>该函数返回<code class="codeph">'http://www.w3.org/2001/XMLSchema'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9CCD2DF6-E4EE-4B6B-95CB-012E96100EDA__GUID-1303AB25-B0F2-4A47-B30D-673CCD66832E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS。 NAMESPACE_XMLSCHEMA RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9CCD2DF6-E4EE-4B6B-95CB-012E96100EDA__GUID-28C5A25D-9633-4AC6-8BF6-5278DAF26E26">回报价值</p>
                        <p><code class="codeph">'http://www.w3.org/2001/XMLSchema'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74722"></a><a id="ARPLS74722"></a><div class="props_rev_3"><a id="GUID-8D5CC0AE-7E44-4E9A-8E16-608BE0252CB4" name="GUID-8D5CC0AE-7E44-4E9A-8E16-608BE0252CB4"></a><h4 id="ARPLS-GUID-8D5CC0AE-7E44-4E9A-8E16-608BE0252CB4" class="sect4"><span class="enumeration_section">189.2.16</span> NSPREFIX_ACL_ACL功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'xmlns:acl= 'http://xmlns.oracle.com/acs.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8D5CC0AE-7E44-4E9A-8E16-608BE0252CB4__GUID-3C65A26B-0A3F-4D63-A43B-0DBD6318024B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_ACL_ACL RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8D5CC0AE-7E44-4E9A-8E16-608BE0252CB4__GUID-400FEFF7-3622-46A4-83D2-579E60E72C68">回报价值</p>
                        <p><code class="codeph">'xmlns：acl ='http://xmlns.oracle.com/acs.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74723"></a><a id="ARPLS74723"></a><div class="props_rev_3"><a id="GUID-C4FE5538-4346-4AE4-9CAA-CF4A86F3FFB3" name="GUID-C4FE5538-4346-4AE4-9CAA-CF4A86F3FFB3"></a><h4 id="ARPLS-GUID-C4FE5538-4346-4AE4-9CAA-CF4A86F3FFB3" class="sect4"><span class="enumeration_section">189.2.17</span> NSPREFIX_RESCONFIG_RC功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">''xmlns:rc="http://xmlns.oracle.com/xdb/XDBResConfig.xsd"'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C4FE5538-4346-4AE4-9CAA-CF4A86F3FFB3__GUID-A83D98CF-232B-4D7D-9066-C921D2A9C7E0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_RESCONFIG_RC RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C4FE5538-4346-4AE4-9CAA-CF4A86F3FFB3__GUID-17467439-4F34-4B75-83A1-CA38FBB02735">回报价值</p>
                        <p><code class="codeph">返回''xmlns：rc =“http://xmlns.oracle.com/xdb/XDBResConfig.xsd”'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74724"></a><a id="ARPLS74724"></a><div class="props_rev_3"><a id="GUID-C37F76CC-CB08-4ABC-B197-7FEC9B8D0DD7" name="GUID-C37F76CC-CB08-4ABC-B197-7FEC9B8D0DD7"></a><h4 id="ARPLS-GUID-C37F76CC-CB08-4ABC-B197-7FEC9B8D0DD7" class="sect4"><span class="enumeration_section">189.2.18</span> NSPREFIX_RESOURCE_R功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'xmlns:r="http://xmlns.oracle.com/XDBResource.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C37F76CC-CB08-4ABC-B197-7FEC9B8D0DD7__GUID-F0783089-642C-42CB-BD96-7AA2AE036DFA">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_RESOURCE_R RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C37F76CC-CB08-4ABC-B197-7FEC9B8D0DD7__GUID-A06F9435-16F3-4635-BD5E-F3E2FC707387">回报价值</p>
                        <p><code class="codeph">'的xmlns：R =“http://xmlns.oracle.com/XDBResource.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74725"></a><a id="ARPLS74725"></a><div class="props_rev_3"><a id="GUID-4222FE64-26AE-4745-A096-1C72AF7DF855" name="GUID-4222FE64-26AE-4745-A096-1C72AF7DF855"></a><h4 id="ARPLS-GUID-4222FE64-26AE-4745-A096-1C72AF7DF855" class="sect4"><span class="enumeration_section">189.2.19</span> NSPREFIX_XDB_XDB功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4222FE64-26AE-4745-A096-1C72AF7DF855__GUID-4BB1A843-1EB0-436F-A3CA-9EA92280D056">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_XDB_XDB RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4222FE64-26AE-4745-A096-1C72AF7DF855__GUID-9CDDC270-DA55-42D9-BEE1-87385066932B">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74726"></a><a id="ARPLS74726"></a><div class="props_rev_3"><a id="GUID-035083C5-DB0B-456D-8F7B-15E2563E8522" name="GUID-035083C5-DB0B-456D-8F7B-15E2563E8522"></a><h4 id="ARPLS-GUID-035083C5-DB0B-456D-8F7B-15E2563E8522" class="sect4"><span class="enumeration_section">189.2.20</span> NSPREFIX_XMLINSTANCE_XSI功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-035083C5-DB0B-456D-8F7B-15E2563E8522__GUID-69384276-4E4B-4F72-8EBC-ACA9774199ED">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_XMLINSTANCE_XSI RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-035083C5-DB0B-456D-8F7B-15E2563E8522__GUID-621D1D62-81DC-4182-8CC0-D86434127277">回报价值</p>
                        <p><code class="codeph">'xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</code> '</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74727"></a><a id="ARPLS74727"></a><div class="props_rev_3"><a id="GUID-8935FEEA-C4AE-467F-AABB-3676F6EC83E5" name="GUID-8935FEEA-C4AE-467F-AABB-3676F6EC83E5"></a><h4 id="ARPLS-GUID-8935FEEA-C4AE-467F-AABB-3676F6EC83E5" class="sect4"><span class="enumeration_section">189.2.21</span> NSPREFIX_XMLDIFF_XD功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'xmlns:xd="http://xmlns.oracle.com/xdb/xdiff.xsd"'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8935FEEA-C4AE-467F-AABB-3676F6EC83E5__GUID-AB2F1487-F9BD-4EBC-92D0-B98824BB813F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_XMLDIFF_XD RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8935FEEA-C4AE-467F-AABB-3676F6EC83E5__GUID-100D7CFB-EC53-46C5-9862-3479F1B46462">回报价值</p>
                        <p><code class="codeph">'的xmlns：XD = “http://xmlns.oracle.com/xdb/xdiff.xsd”'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74728"></a><a id="ARPLS74728"></a><div class="props_rev_3"><a id="GUID-85CCD7D8-E0E5-428D-8769-2BA6132A6B60" name="GUID-85CCD7D8-E0E5-428D-8769-2BA6132A6B60"></a><h4 id="ARPLS-GUID-85CCD7D8-E0E5-428D-8769-2BA6132A6B60" class="sect4"><span class="enumeration_section">189.2.22</span> NSPREFIX_XMLSCHEMA_XSD功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'xmlns:xsd="http://www.w3.org/2001/XMLSchema"'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-85CCD7D8-E0E5-428D-8769-2BA6132A6B60__GUID-86541120-CEB9-4CBB-8994-AEB6796AD44B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.NSPREFIX_XMLSCHEMA_XSD RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-85CCD7D8-E0E5-428D-8769-2BA6132A6B60__GUID-CB9E2F54-A0A4-4E67-8E96-20DF1164949B">回报价值</p>
                        <p><code class="codeph">'的xmlns：XSD = “http://www.w3.org/2001/XMLSchema”'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74729"></a><a id="ARPLS74729"></a><div class="props_rev_3"><a id="GUID-9939C761-2263-456B-BFFE-503FC0BADD09" name="GUID-9939C761-2263-456B-BFFE-503FC0BADD09"></a><h4 id="ARPLS-GUID-9939C761-2263-456B-BFFE-503FC0BADD09" class="sect4"><span class="enumeration_section">189.2.23</span> SCHEMAURL_ACL功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9939C761-2263-456B-BFFE-503FC0BADD09__GUID-B232D3C6-4A34-4A98-8160-902E1E347FFD">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.SCHEMAURL_ACL RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9939C761-2263-456B-BFFE-503FC0BADD09__GUID-EBAA6D41-2CC2-44D1-83E1-191CD5CD1FB8">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74730"></a><a id="ARPLS74730"></a><div class="props_rev_3"><a id="GUID-D1AB3274-2695-4CBB-B9FD-0DE0E7ABAD5A" name="GUID-D1AB3274-2695-4CBB-B9FD-0DE0E7ABAD5A"></a><h4 id="ARPLS-GUID-D1AB3274-2695-4CBB-B9FD-0DE0E7ABAD5A" class="sect4"><span class="enumeration_section">189.2.24</span> SCHEMAELEM_RES_ACL功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd#acl'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D1AB3274-2695-4CBB-B9FD-0DE0E7ABAD5A__GUID-D4DE7474-F454-49D7-809C-CCBED3238C57">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.SCHEMAELEM_RES_ACL RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D1AB3274-2695-4CBB-B9FD-0DE0E7ABAD5A__GUID-83A4D0C8-E3AD-47D0-8804-E0EB9145217D">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/acl.xsd#acl'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74731"></a><a id="ARPLS74731"></a><div class="props_rev_3"><a id="GUID-6CBC30AD-871C-476E-ABAD-62CF75252207" name="GUID-6CBC30AD-871C-476E-ABAD-62CF75252207"></a><h4 id="ARPLS-GUID-6CBC30AD-871C-476E-ABAD-62CF75252207" class="sect4"><span class="enumeration_section">189.2.25</span> SCHEMAELEM_RESCONTENT_BINARY函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd#binary'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6CBC30AD-871C-476E-ABAD-62CF75252207__GUID-C09462AC-3685-4E06-88A1-41B453ED4740">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.SCHEMAELEM_RESCONTENT_BINARY RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6CBC30AD-871C-476E-ABAD-62CF75252207__GUID-2C4F72B5-783D-430B-8DB7-ADFF4DAC0754">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd#binary'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74732"></a><a id="ARPLS74732"></a><div class="props_rev_3"><a id="GUID-2BD2A9FD-83EE-4ADF-AD76-C7C9380A9088" name="GUID-2BD2A9FD-83EE-4ADF-AD76-C7C9380A9088"></a><h4 id="ARPLS-GUID-2BD2A9FD-83EE-4ADF-AD76-C7C9380A9088" class="sect4"><span class="enumeration_section">189.2.26</span> SCHEMAELEM_RESCONTENT_TEXT函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd#text'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2BD2A9FD-83EE-4ADF-AD76-C7C9380A9088__GUID-D74F8E06-EAD9-4448-82A0-1F6A2A5AF42D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.SCHEMAELEM_RESCONTENT_TEXT RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2BD2A9FD-83EE-4ADF-AD76-C7C9380A9088__GUID-AA748354-27E8-4743-B852-89238A5B16E1">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd#text'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74733"></a><a id="ARPLS74733"></a><div class="props_rev_3"><a id="GUID-1E8F7828-FAE7-441A-9C03-FB8DCA952A6D" name="GUID-1E8F7828-FAE7-441A-9C03-FB8DCA952A6D"></a><h4 id="ARPLS-GUID-1E8F7828-FAE7-441A-9C03-FB8DCA952A6D" class="sect4"><span class="enumeration_section">189.2.27</span> SCHEMAURL_RESOURCE功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBResource.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1E8F7828-FAE7-441A-9C03-FB8DCA952A6D__GUID-A9AEA047-5AA8-400C-A506-A9D48FB8B857">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.SCHEMAURL_RESOURCE RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E8F7828-FAE7-441A-9C03-FB8DCA952A6D__GUID-9907D3FB-A060-454E-8F4C-3EC6361DA608">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/XDBResource.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74734"></a><a id="ARPLS74734"></a><div class="props_rev_3"><a id="GUID-BD183F9C-1DB4-4809-8D98-448502063395" name="GUID-BD183F9C-1DB4-4809-8D98-448502063395"></a><h4 id="ARPLS-GUID-BD183F9C-1DB4-4809-8D98-448502063395" class="sect4"><span class="enumeration_section">189.2.28</span> SCHEMAURL_XDBSCHEMA功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BD183F9C-1DB4-4809-8D98-448502063395__GUID-AD59369C-84AA-4A09-A1F2-72E1E5C8CFA7">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.SCHEMAURL_XDBSCHEMA RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BD183F9C-1DB4-4809-8D98-448502063395__GUID-5F27AC77-17EB-49F9-8CE0-A81C9CA72CE7">回报价值</p>
                        <p><code class="codeph">'http://xmlns.oracle.com/xdb/XDBSchema.xsd'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74735"></a><a id="ARPLS74735"></a><div class="props_rev_3"><a id="GUID-B8B8F730-4278-4194-8CB7-3FEAAC943D4C" name="GUID-B8B8F730-4278-4194-8CB7-3FEAAC943D4C"></a><h4 id="ARPLS-GUID-B8B8F730-4278-4194-8CB7-3FEAAC943D4C" class="sect4"><span class="enumeration_section">189.2.29</span> XDBSCHEMA_PREFIXES函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xdb="http://xmlns.oracle.com/xdb'</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B8B8F730-4278-4194-8CB7-3FEAAC943D4C__GUID-D431BBDA-B29F-4C20-B288-6FEA345931F3">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.XDBSCHEMA_PREFIXES RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B8B8F730-4278-4194-8CB7-3FEAAC943D4C__GUID-256D573E-3F80-49A2-80D3-40FF6E34130B">回报价值</p>
                        <p><code class="codeph">'xmlns：xsd =“http://www.w3.org/2001/XMLSchema”xmlns：xdb =“http://xmlns.oracle.com/xdb”</code> 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74736"></a><a id="ARPLS74736"></a><div class="props_rev_3"><a id="GUID-B2BB8155-CD89-4450-911A-05997A387092" name="GUID-B2BB8155-CD89-4450-911A-05997A387092"></a><h4 id="ARPLS-GUID-B2BB8155-CD89-4450-911A-05997A387092" class="sect4"><span class="enumeration_section">189.2.30</span> XSD_ATTRIBUTE功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'attribute'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B2BB8155-CD89-4450-911A-05997A387092__GUID-4AA1FE5F-4497-43A9-B707-B4E5D17C7AC0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.XSD_ATTRIBUTE RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B2BB8155-CD89-4450-911A-05997A387092__GUID-6EB74624-EA6D-4299-8202-1752F9DD8EFD">回报价值</p>
                        <p><code class="codeph">'属性'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74737"></a><a id="ARPLS74737"></a><div class="props_rev_3"><a id="GUID-1EFE9DD1-31A5-4CA7-A779-B7A3EC839918" name="GUID-1EFE9DD1-31A5-4CA7-A779-B7A3EC839918"></a><h4 id="ARPLS-GUID-1EFE9DD1-31A5-4CA7-A779-B7A3EC839918" class="sect4"><span class="enumeration_section">189.2.31</span> XSD_COMPLEX_TYPE函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'complexType'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1EFE9DD1-31A5-4CA7-A779-B7A3EC839918__GUID-E6952D94-0D1C-43BC-9261-201661017073">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.XSD_COMPLEX_TYPE RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1EFE9DD1-31A5-4CA7-A779-B7A3EC839918__GUID-677C8AAB-4BF1-4118-9AB4-3F062AD33F50">回报价值</p>
                        <p><code class="codeph">“复杂类型”</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74738"></a><a id="ARPLS74738"></a><div class="props_rev_3"><a id="GUID-0BD3C080-D31F-4E44-A31A-8409A052DCB2" name="GUID-0BD3C080-D31F-4E44-A31A-8409A052DCB2"></a><h4 id="ARPLS-GUID-0BD3C080-D31F-4E44-A31A-8409A052DCB2" class="sect4"><span class="enumeration_section">189.2.32</span> XSD_ELEMENT函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'element'</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0BD3C080-D31F-4E44-A31A-8409A052DCB2__GUID-FCB7B3C5-BA7E-43F3-AC0A-996914E74F90">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS。 XSD_ELEMENT RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0BD3C080-D31F-4E44-A31A-8409A052DCB2__GUID-262E856B-381E-410E-BFE5-6D31E279FB0E">回报价值</p>
                        <p><code class="codeph">'元件'</code> 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74739"></a><a id="ARPLS74739"></a><div class="props_rev_3"><a id="GUID-277B6F16-30D3-4504-8747-93C490DBAB3F" name="GUID-277B6F16-30D3-4504-8747-93C490DBAB3F"></a><h4 id="ARPLS-GUID-277B6F16-30D3-4504-8747-93C490DBAB3F" class="sect4"><span class="enumeration_section">189.2.33</span> XSD_GROUP函数</h4>
                  <div>
                     <p>此函数返回<code class="codeph">'group'</code></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-277B6F16-30D3-4504-8747-93C490DBAB3F__GUID-20E60B9D-0B72-45C3-B406-2F23C60F9438">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XDB_CONSTANTS.XSD_GROUP RETURN VARCHAR2 DETERMINISTIC;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-277B6F16-30D3-4504-8747-93C490DBAB3F__GUID-C3454A2D-880C-4B36-B580-224861AA68C5">回报价值</p>
                        <p><code class="codeph">'组'</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="09302.V-SQL_PLAN_MONITOR.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="V$SQL_PLAN_MONITOR displays plan level monitoring statistics for each SQL statement found in V$SQL_MONITOR."></meta>
      <meta name="description" content="V$SQL_PLAN_MONITOR displays plan level monitoring statistics for each SQL statement found in V$SQL_MONITOR."></meta>
      <title>V $ SQL_PLAN_MONITOR</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Reference"></meta>
      <meta property="og:description" content="V$SQL_PLAN_MONITOR displays plan level monitoring statistics for each SQL statement found in V$SQL_MONITOR."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-10T14:59:27-08:00"></meta>
      <meta name="dcterms.title" content="Database Reference"></meta>
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96196-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="V-SQL_PLAN.html" title="Previous" type="text/html"></link>
      <link rel="next" href="V-SQL_PLAN_STATISTICS.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="REFRN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="V-SQL_PLAN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="V-SQL_PLAN_STATISTICS.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="dynamic-performance-views.html" property="item" typeof="WebPage"><span property="name">动态性能视图</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="dynamic-performance-v-views-3.html" property="item" typeof="WebPage"><span property="name">动态性能（V $）浏览次数：V $ SCHEDULER_RUNNING_JOBS至V $ ZONEMAP_USAGE_STATS</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">V $ SQL_PLAN_MONITOR</li>
            </ol>
            <a id="GUID-85354ECB-7E2E-4D4B-AE78-243A4BB6E523" name="GUID-85354ECB-7E2E-4D4B-AE78-243A4BB6E523"></a><a id="REFRN30480"></a>
            
            <h2 id="REFRN-GUID-85354ECB-7E2E-4D4B-AE78-243A4BB6E523" class="sect2"><span class="enumeration_section">9.59</span> V $ SQL_PLAN_MONITOR</h2>
         </header>
         <div class="ind">
            <div>
               <div><span><code class="codeph">V$SQL_PLAN_MONITOR</code>显示在<code class="codeph">V$SQL_MONITOR</code>找到的每个SQL语句的计划级别监视统计信息。</span> <code class="codeph">V$SQL_PLAN_MONITOR</code>每一行对应于正在监视的执行计划的操作。与<code class="codeph">V$SQL_MONITOR</code> ， <code class="codeph">V$SQL_PLAN_MONITOR</code>中公开的统计信息通常在语句执行时每秒更新一次。这些统计信息的回收与<code class="codeph">V$SQL_MONITOR</code>相同。</div>
               <div class="section">
                  <p>为了消除SQL计划监视的开销，为计划的每个操作收集的统计信息不记录计时信息，如已用时间，CPU时间或I / O时间。取而代之的是，这个定时信息可以相当准确地通过加入估计<code class="codeph">V$SQL_PLAN_MONITOR</code>与<code class="codeph">V$ACTIVE_SESSION_HISTORY</code>上<code class="codeph">SQL_ID</code> ， <code class="codeph">SQL_EXEC_START</code> ， <code class="codeph">SQL_EXEC_ID</code>和<code class="codeph">SQL_PLAN_LINE_ID</code> （简单地命名为<code class="codeph">PLAN_LINE_ID</code>在<code class="codeph">V$SQL_PLAN_MONITOR</code> ）。该连接的结果是计划中每个操作执行的活动的样本，从中可以推导出CPU时间和等待时间的估计。这可以通过打破<code class="codeph">V$SQL_MONITOR</code>中的语句级别监视时间统计信息来实现，该统计信息与在相应活动类型的<code class="codeph">V$ACTIVE_SESSION_HISTORY</code>中找到的样本数量成比例。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-85354ECB-7E2E-4D4B-AE78-243A4BB6E523__GUID-0B4C1723-5A61-43DE-96A9-3FFBE4A47C15">
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This table describes the columns for this database view" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="24%" id="d2095259e220">柱</th>
                           <th align="left" valign="bottom" width="18%" id="d2095259e223">数据类型</th>
                           <th align="left" valign="bottom" width="58%" id="d2095259e226">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e231" headers="d2095259e220 ">
                              <p><code class="codeph">CON_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e231 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e231 d2095259e226 ">
                              <p>数据所属容器的ID。可能的值包括：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">0</code> ：此值用于包含与整个CDB相关的数据的行。此值还用于非CDB中的行。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">1</code> ：此值用于包含仅与根有关的数据的行</p>
                                 </li>
                                 <li>
                                    <p><span class="italic">n</span> ：其中<span class="italic">n</span>是包含数据的行的适用容器ID</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e262" headers="d2095259e220 ">
                              <p><code class="codeph">键</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e262 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e262 d2095259e226 ">
                              <p>使用<code class="codeph">V$SQL_MONITOR</code>有效连接<code class="codeph">V$SQL_PLAN_MONITOR</code>外键（请参阅<code class="codeph">V$SQL_MONITOR</code> ）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e283" headers="d2095259e220 ">
                              <p><code class="codeph">状态</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e283 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（19）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e283 d2095259e226 ">
                              <p>SQL执行状态：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">EXECUTING</code> -  SQL语句仍在执行</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DONE (ERROR)</code> - 执行因错误而终止</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DONE (FIRST N ROWS)</code> - 在获取所有行之前，应用程序终止执行</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DONE (ALL ROWS)</code> - 执行终止并获取所有行</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DONE</code> - 执行终止（并行执行）</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e321" headers="d2095259e220 ">
                              <p><code class="codeph">FIRST_REFRESH_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e321 d2095259e223 ">
                              <p><code class="codeph">日期</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e321 d2095259e226 ">
                              <p>监视SQL语句的时间已开始</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e333" headers="d2095259e220 ">
                              <p><code class="codeph">LAST_REFRESH_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e333 d2095259e223 ">
                              <p><code class="codeph">日期</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e333 d2095259e226 ">
                              <p>上次更新SQL语句的统计信息的时间</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e345" headers="d2095259e220 ">
                              <p><code class="codeph">FIRST_CHANGE_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e345 d2095259e223 ">
                              <p><code class="codeph">日期</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e345 d2095259e226 ">
                              <p>第一次通过此操作生成一行</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e357" headers="d2095259e220 ">
                              <p><code class="codeph">LAST_CHANGE_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e357 d2095259e223 ">
                              <p><code class="codeph">日期</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e357 d2095259e226 ">
                              <p>上次此操作生成一行</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e369" headers="d2095259e220 ">
                              <p><code class="codeph">REFRESH_COUNT</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e369 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e369 d2095259e226 ">
                              <p>统计信息已刷新的次数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e381" headers="d2095259e220 ">
                              <p><code class="codeph">SID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e381 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e381 d2095259e226 ">
                              <p>会话标识符正在执行（或已执行）正在监视的SQL语句</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e393" headers="d2095259e220 ">
                              <p><code class="codeph">PROCESS_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e393 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（5）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e393 d2095259e226 ">
                              <p>进程名称标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e405" headers="d2095259e220 ">
                              <p><code class="codeph">SQL_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e405 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（13）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e405 d2095259e226 ">
                              <p>SQL标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e418" headers="d2095259e220 ">
                              <p><code class="codeph">SQL_EXEC_START</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e418 d2095259e223 ">
                              <p><code class="codeph">日期</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e418 d2095259e226 ">
                              <p>执行开始的时间</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e430" headers="d2095259e220 ">
                              <p><code class="codeph">SQL_EXEC_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e430 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e430 d2095259e226 ">
                              <p>执行标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e442" headers="d2095259e220 ">
                              <p><code class="codeph">SQL_PLAN_HASH_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e442 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e442 d2095259e226 ">
                              <p>SQL计划哈希值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e454" headers="d2095259e220 ">
                              <p><code class="codeph">SQL_CHILD_ADDRESS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e454 d2095259e223 ">
                              <p><code class="codeph">RAW（4 | 8）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e454 d2095259e226 ">
                              <p>子光标的地址</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e466" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_PARENT_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e466 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e466 d2095259e226 ">
                              <p>对当前步骤的输出进行操作的下一个执行步骤的ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e478" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_LINE_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e478 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e478 d2095259e226 ">
                              <p>计划条目的行号</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e490" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_OPERATION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e490 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（30）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e490 d2095259e226 ">
                              <p>计划操作名称（来自<code class="codeph">V$SQL_PLAN</code> ）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e505" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_OPTIONS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e505 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（30）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e505 d2095259e226 ">
                              <p>计划选项名称（来自<code class="codeph">V$SQL_PLAN</code> ）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e520" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_OBJECT_OWNER</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e520 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e520 d2095259e226 ">
                              <p>拥有包含表或索引的模式的用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e532" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_OBJECT_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e532 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e532 d2095259e226 ">
                              <p>表或索引的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e544" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_OBJECT_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e544 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（80）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e544 d2095259e226 ">
                              <p>对象的类型</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e557" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_DEPTH</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e557 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e557 d2095259e226 ">
                              <p>树中操作的深度（或级别）。没有必要发出<code class="codeph">CONNECT BY</code>语句来获取级别信息，该级别信息通常用于缩进<code class="codeph">PLAN_TABLE</code>表中的行。根操作（语句）是级别0。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e575" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_POSITION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e575 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e575 d2095259e226 ">
                              <p>具有相同<code class="codeph">PARENT_ID</code>所有操作的处理<code class="codeph">PARENT_ID</code></p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e589" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_COST</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e589 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e589 d2095259e226 ">
                              <p>优化程序基于成本的方法估算的操作成本。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e601" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_CARDINALITY</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e601 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e601 d2095259e226 ">
                              <p>通过基于成本的优化器估计操作产生的行数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e613" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_BYTES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e613 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e613 d2095259e226 ">
                              <p>通过基于成本的优化器估计操作产生的字节数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e625" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_TIME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e625 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e625 d2095259e226 ">
                              <p>由优化程序基于成本的方法估计的操作的经过时间（以秒为单位）。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e637" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_PARTITION_START</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e637 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（256）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e637 d2095259e226 ">
                              <p>启动一系列已访问分区的分区</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e649" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_PARTITION_STOP</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e649 d2095259e223 ">
                              <p><code class="codeph">VARCHAR2（256）</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e649 d2095259e226 ">
                              <p>停止一系列访问的分区的分区</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e661" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_CPU_COST</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e661 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e661 d2095259e226 ">
                              <p>由优化程序基于成本的方法估计的操作的CPU成本。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e673" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_IO_COST</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e673 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e673 d2095259e226 ">
                              <p>由优化器基于成本的方法估计的操作的I / O成本。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e685" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_TEMP_SPACE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e685 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e685 d2095259e226 ">
                              <p>由优化程序基于成本的方法估计的操作（排序或散列连接）的临时空间使用情况。对于使用基于规则的方法的语句，此列为NULL。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e698" headers="d2095259e220 ">
                              <p><code class="codeph">STARTS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e698 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e698 d2095259e226 ">
                              <p>执行此操作的次数。例如，当一个操作位于嵌套循环连接的右侧时（对于该嵌套循环连接的左输入的每一行一次），执行多次操作。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e710" headers="d2095259e220 ">
                              <p><code class="codeph">OUTPUT_ROWS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e710 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e710 d2095259e226 ">
                              <p>自执行开始以来此操作生成的行数。对于此操作的所有执行，累计此数字。除以STARTS列的值以计算每次执行操作的平均行数。请注意， <code class="codeph">STARTS</code>列中的值等于或高于<code class="codeph">OUTPUT_ROWS</code>列中的值。该值通常相等，但根据内部优化，可能会看到更高的值。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e728" headers="d2095259e220 ">
                              <p><code class="codeph">IO_INTERCONNECT_BYTES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e728 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e728 d2095259e226 ">
                              <p>Oracle数据库与存储系统之间交换的I / O字节数。仅在Oracle开始监视执行后才维护。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e740" headers="d2095259e220 ">
                              <p><code class="codeph">PHYSICAL_READ_REQUESTS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e740 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e740 d2095259e226 ">
                              <p>受监控SQL发出的物理读取I / O请求数。仅在Oracle开始监视执行后才维护。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e752" headers="d2095259e220 ">
                              <p><code class="codeph">PHYSICAL_READ_BYTES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e752 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e752 d2095259e226 ">
                              <p>受监视的SQL从磁盘读取的字节数。仅在Oracle开始监视执行后才维护。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e764" headers="d2095259e220 ">
                              <p><code class="codeph">PHYSICAL_WRITE_REQUESTS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e764 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e764 d2095259e226 ">
                              <p>受监控SQL发出的物理写入I / O请求数。仅在Oracle开始监视执行后才维护。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e776" headers="d2095259e220 ">
                              <p><code class="codeph">PHYSICAL_WRITE_BYTES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e776 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e776 d2095259e226 ">
                              <p>受监视的SQL写入磁盘的字节数。仅在Oracle开始监视执行后才维护。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e788" headers="d2095259e220 ">
                              <p><code class="codeph">WORKAREA_MEM</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e788 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e788 d2095259e226 ">
                              <p>执行查询时操作使用的内存量（以字节为单位）;如果执行完成，则为NULL。这仅适用于使用工作区的操作，例如sort，hash-join，group-by等。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e800" headers="d2095259e220 ">
                              <p><code class="codeph">WORKAREA_MAX_MEM</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e800 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e800 d2095259e226 ">
                              <p><code class="codeph">WORKAREA_MEM</code>最大值（以字节为单位）;如果操作未使用工作区，则为NULL。执行完成后，此值将保留执行语句期间此操作所消耗的最大内存量。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e815" headers="d2095259e220 ">
                              <p><code class="codeph">WORKAREA_TEMPSEG</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e815 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e815 d2095259e226 ">
                              <p>执行查询时操作使用的临时空间量（以字节为单位）;如果操作未溢出到磁盘或执行完成，则为NULL</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e827" headers="d2095259e220 ">
                              <p><code class="codeph">WORKAREA_MAX_TEMPSEG</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e827 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e827 d2095259e226 ">
                              <p><code class="codeph">WORKAREA_TEMPSEG</code>最大值（以字节为单位）;如果此操作从未溢出到磁盘，则为NULL。执行完成后，此值将保留此操作在整个执行期间消耗的最大临时空间量。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e843" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_GROUP_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e843 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e843 d2095259e226 ">
                              <p>计划行统计信息组标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">GROUP_ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e861" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_1_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e861 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e861 d2095259e226 ">
                              <p>该计划行的统计数字1的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e879" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_1_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e879 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e879 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e891" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_1_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e891 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e891 d2095259e226 ">
                              <p>该计划行的统计数字1的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e903" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_2_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e903 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e903 d2095259e226 ">
                              <p>该计划行的统计数字2的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e921" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_2_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e921 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e921 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e933" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_2_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e933 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e933 d2095259e226 ">
                              <p>该计划行的统计数字2的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e945" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_3_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e945 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e945 d2095259e226 ">
                              <p>该计划行的统计数字3的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e963" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_3_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e963 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e963 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e975" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_3_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e975 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e975 d2095259e226 ">
                              <p>该计划行的统计数字3的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e987" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_4_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e987 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e987 d2095259e226 ">
                              <p>该计划行的统计数字4的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1006" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_4_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1006 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1006 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1018" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_4_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1018 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1018 d2095259e226 ">
                              <p>该计划行的统计数字4的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1030" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_5_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1030 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1030 d2095259e226 ">
                              <p>该计划行的统计数字5的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1048" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_5_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1048 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1048 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1060" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_5_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1060 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1060 d2095259e226 ">
                              <p>该计划行的统计数字5的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1072" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_6_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1072 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1072 d2095259e226 ">
                              <p>该计划行的统计数字6的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1090" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_6_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1090 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1090 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1102" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_6_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1102 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1102 d2095259e226 ">
                              <p>该计划行的统计数字6的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1114" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_7_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1114 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1114 d2095259e226 ">
                              <p>该计划行的统计数字7的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1132" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_7_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1132 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1132 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1144" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_7_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1144 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1144 d2095259e226 ">
                              <p>该计划行的统计数字7的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1157" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_8_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1157 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1157 d2095259e226 ">
                              <p>该计划行的统计数字8的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1175" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_8_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1175 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1175 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1187" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_8_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1187 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1187 d2095259e226 ">
                              <p>该计划行的统计数字8的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1199" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_9_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1199 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1199 d2095259e226 ">
                              <p>该计划行的统计数字9的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1217" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_9_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1217 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1217 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1229" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_9_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1229 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1229 d2095259e226 ">
                              <p>该计划行的统计数字9的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1241" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_10_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1241 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1241 d2095259e226 ">
                              <p>该计划行的统计数字10的统计标识符（请参阅<code class="codeph">V$SQL_MONITOR_STATNAME</code> <code class="codeph">ID</code>列）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1259" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_10_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1259 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1259 d2095259e226 ">
                              <p>保留供内部使用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1271" headers="d2095259e220 ">
                              <p><code class="codeph">OTHERSTAT_10_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1271 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1271 d2095259e226 ">
                              <p>该计划行的统计数字10的值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1283" headers="d2095259e220 ">
                              <p><code class="codeph">OTHER_XML</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1283 d2095259e223 ">
                              <p><code class="codeph">CLOB</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1283 d2095259e226 ">
                              <p>提供特定于执行计划执行步骤的额外信息。此列的内容使用XML构建，因为它允许存储多条信息，包括以下内容：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>用于解析查询的模式的名称</p>
                                 </li>
                                 <li>
                                    <p>生成解释计划的Oracle数据库的版本号</p>
                                 </li>
                                 <li>
                                    <p>与执行计划关联的哈希值</p>
                                 </li>
                                 <li>
                                    <p>大纲的名称（如果有）或用于构建执行计划的SQL配置文件</p>
                                 </li>
                                 <li>
                                    <p>指示是否使用动态统计数据来制定计划</p>
                                 </li>
                                 <li>
                                    <p>大纲数据，一组可用于重新生成同一计划的优化程序提示</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d2095259e1314" headers="d2095259e220 ">
                              <p><code class="codeph">PLAN_OPERATION_INACTIVE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d2095259e1314 d2095259e223 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="58%" headers="d2095259e1314 d2095259e226 ">
                              <p>指示此计划操作是否是最终解决计划的一部分</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-85354ECB-7E2E-4D4B-AE78-243A4BB6E523__GUID-0F6A5EC4-9A62-4B98-AC3C-BB9D24B82401">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="V-SQL_MONITOR_STATNAME.html#GUID-0548ED49-A959-4BFA-A8E0-36881CBCFA20" title="V $ SQL_MONITOR_STATNAME提供有关在V $ SQL_PLAN_MONITOR中公开的计划行统计信息的信息。计划行统计信息由其组ID（列GROUP_ID）及其ID（列ID）标识。">V $ SQL_MONITOR_STATNAME</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="13482.vldb-backup.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Backup and recovery is a crucial and important job for a DBA to protect business data."></meta>
      <meta name="description" content="Backup and recovery is a crucial and important job for a DBA to protect business data."></meta>
      <title>备份和恢复VLDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="VLDB and Partitioning Guide"></meta>
      <meta property="og:description" content="Backup and recovery is a crucial and important job for a DBA to protect business data."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="VLDB and Partitioning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00"></meta>
      <meta name="dcterms.title" content="VLDB and Partitioning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96199-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="parallel-exec-tips.html" title="Previous" type="text/html"></link>
      <link rel="next" href="vldb-storage.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="parallel-exec-tips.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="vldb-storage.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB和分区指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">备份和恢复VLDB</li>
            </ol>
            <a id="GUID-8B6DB99C-5265-480B-B227-DBCFBCBD4D98" name="GUID-8B6DB99C-5265-480B-B227-DBCFBCBD4D98"></a><a id="VLDBG008"></a>
            
            <h2 id="VLDBG-GUID-8B6DB99C-5265-480B-B227-DBCFBCBD4D98" class="sect2"><span class="enumeration_chapter">9</span>备份和恢复VLDB</h2>
         </header>
         <div class="ind">
            <div>
               <p>备份和恢复是DBA保护业务数据的关键且重要的工作。</p>
               <p>随着数据存储每年变得越来越大，DBA不断面临着确保关键数据得到备份以及可以快速，轻松地恢复以满足业务需求的挑战。非常大的数据库是独特的，因为它们很大并且数据可能来自许多资源。OLTP和数据仓库系统具有一些独特的特征。通常，非常大的OLTP系统的可用性考虑因素与小型OLTP系统的考虑因素没有区别。假设允许的固定停机时间，大型OLTP系统比小型OLTP系统需要更多的硬件资源。</p>
               <p>本章针对超大型数据库提出了一种有效的备份和恢复策略，通过使用区分数据仓库和OLTP系统的一些特殊特性来减少支持备份和恢复所需的总体资源。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="vldb-backup.html#GUID-836E38BE-FD44-42FC-AB7C-FD58108DC83C" title="数据仓库是一个旨在支持分析和决策的系统。">数据仓库</a></p>
                  </li>
                  <li>
                     <p><a href="vldb-backup.html#GUID-9FA8366F-9413-4239-9FF3-CB492686C8BA" title="通常，备份和恢复是指在保护数据库免受数据丢失和在任何类型的数据丢失后重建数据库所涉及的各种策略和过程。">Oracle备份和恢复</a></p>
                  </li>
                  <li>
                     <p><a href="vldb-backup.html#GUID-79223C42-48E1-4036-AD74-4856A24935D5" title="数据仓库恢复类似于OLTP系统。">数据仓库备份和恢复</a></p>
                  </li>
                  <li>
                     <p><a href="vldb-backup.html#GUID-E6542B38-2388-4152-AFBC-C1CA03837D93" title="设计备份和恢复策略可能是一项复杂且具有挑战性的任务。">数据仓库恢复方法</a></p>
                  </li>
               </ul>
            </div><a id="VLDBG1552"></a><div class="props_rev_3"><a id="GUID-836E38BE-FD44-42FC-AB7C-FD58108DC83C" name="GUID-836E38BE-FD44-42FC-AB7C-FD58108DC83C"></a><h3 id="VLDBG-GUID-836E38BE-FD44-42FC-AB7C-FD58108DC83C" class="sect3">数据仓库</h3>
               <div>
                  <p>数据仓库是一个旨在支持分析和决策的系统。</p>
                  <p>在典型的企业中，数百或数千个用户可能依赖数据仓库来提供信息，以帮助他们了解业务并做出更好的决策。因此，可用性是数据仓库的关键要求。本章讨论数据仓库可用性的一个关键方面：数据丢失后的数据恢复。</p>
                  <p>在详细了解备份和恢复技术之前，讨论备份和恢复数据仓库的具体技术非常重要。特别是，一个合理的问题可能是：数据仓库的备份和恢复策略是否应该像其他所有数据库系统一样？</p>
                  <p>DBA最初应该通过应用OLTP系统中使用的相同技术来处理数据仓库备份和恢复任务：DBA必须决定要保护哪些信息并在需要介质恢复时快速恢复，根据数据的重要性和数据确定数据的优先级。它改变的程度。但是，数据仓库通常会出现的问题是，对于100 GB OLTP系统而言，高效且经济高效的方法可能不适用于10 TB数据仓库。备份和恢复可能需要100倍的时间或需要100倍的存储空间。</p>
                  <div class="infoboxnotealso" id="GUID-836E38BE-FD44-42FC-AB7C-FD58108DC83C__GUID-DE3EC844-6FCC-4CB4-81D1-DB543B28F90C">
                     <p class="notep1">也可以看看：</p>
                     <p>有关数据仓库的更多信息，请<a href="../dwhsg/introduction-data-warehouse-concepts.html#DWHSG-GUID-452FBA23-6976-4590-AA41-1369647AD14D" target="_blank"><span><cite>参见“Oracle数据库数据仓库指南”</cite></span></a></p>
                  </div>
               </div><a id="VLDBG1553"></a><div class="props_rev_3"><a id="GUID-38705383-2C31-48BE-8EA5-ECAD0F479B89" name="GUID-38705383-2C31-48BE-8EA5-ECAD0F479B89"></a><h4 id="VLDBG-GUID-38705383-2C31-48BE-8EA5-ECAD0F479B89" class="sect4">数据仓库特征</h4>
                  <div>
                     <p>数据仓库和OLTP系统之间存在几个主要差异，这些差异会对备份和恢复产生重大影响。</p>
                     <p>这些差异是：</p>
                     <ol>
                        <li>
                           <p>数据仓库通常比OLTP系统大得多。超过10兆兆字节的数据仓库并不罕见，最大的数据仓库增长到数量级。因此，可伸缩性是数据仓库备份和恢复的一个特别重要的考虑因素。</p>
                        </li>
                        <li>
                           <p>数据仓库的可用性要求通常低于OLTP系统。虽然数据仓库对企业至关重要，但与在一天内恢复相比，在几小时内恢复多个TB的能力也会产生相当大的成本。有些组织可能会确定，如果发生故障需要恢复大部分数据仓库，他们可以容忍一天或更长时间的中断，如果他们可以节省备份硬件和存储的大量支出。</p>
                        </li>
                        <li>
                           <p>数据仓库通常通过称为ETL（提取，转换，加载）过程的受控进程进行更新，这与用户自行修改数据的OLTP系统不同。由于数据修改是在受控过程中完成的，因此数据仓库的更新通常是已知的，并且可以从重做日志以外的来源重现。</p>
                        </li>
                        <li>
                           <p>数据仓库包含历史信息，通常，数据仓库中较旧部分的旧数据是静态的。例如，数据仓库可以跟踪五年的历史销售数据。虽然最近一年的数据可能仍有待修改（由于退货，重述等），但过去四年的数据可能完全是静态的。静态数据的优点是不需要经常备份。</p>
                        </li>
                     </ol>
                     <p>在设计针对数据仓库优化的备份和恢复策略时，这四个特征是关键考虑因素。</p>
                  </div>
               </div>
            </div><a id="VLDBG1554"></a><div class="props_rev_3"><a id="GUID-9FA8366F-9413-4239-9FF3-CB492686C8BA" name="GUID-9FA8366F-9413-4239-9FF3-CB492686C8BA"></a><h3 id="VLDBG-GUID-9FA8366F-9413-4239-9FF3-CB492686C8BA" class="sect3">Oracle备份和恢复</h3>
               <div>
                  <p>通常，备份和恢复是指在保护数据库免受数据丢失和在任何类型的数据丢失后重建数据库所涉及的各种策略和过程。</p>
                  <p>备份是代表性的数据副本。此副本可以包括数据库的重要部分，例如控制文件，归档重做日志和数据文件。备份通过提供恢复原始数据的方法来保护数据免受应用程序错误的影响，并可防止意外数据丢失。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="vldb-backup.html#GUID-8B4CA295-6392-48C3-868E-0C5BD687FDCC" title="在开始认真考虑备份和恢复策略之前，必须确定与备份和恢复操作相关的物理数据结构。">用于恢复数据的物理数据库结构</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-E037DA35-38AD-42D2-8D6D-D66568333429" title="备份分为物理备份和逻辑备份。">备份类型</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-003FB14B-0FD7-4E45-A136-854803A2702B" title="Oracle数据库提供了多种工具来管理Oracle数据库的备份和恢复。">备份工具</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1555"></a><div class="props_rev_3"><a id="GUID-8B4CA295-6392-48C3-868E-0C5BD687FDCC" name="GUID-8B4CA295-6392-48C3-868E-0C5BD687FDCC"></a><h4 id="VLDBG-GUID-8B4CA295-6392-48C3-868E-0C5BD687FDCC" class="sect4">用于恢复数据的物理数据库结构</h4>
                  <div>
                     <p>在开始认真考虑备份和恢复策略之前，必须确定与备份和恢复操作相关的物理数据结构。</p>
                     <p>这些组件包括构成Oracle数据存储数据的文件和其他结构，并保护数据存储免受可能的故障的影响。恢复Oracle数据库需要三个基本组件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="vldb-backup.html#GUID-32A8CC6B-E800-4EC8-B1B9-A10638848BD0" title="Oracle数据库由一个或多个称为表空间的逻辑存储单元组成。Oracle数据库中的每个表空间都包含一个或多个称为数据文件的文件，这些文件是位于或附加到运行Oracle数据库的主机操作系统的物理文件。">数据文件</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-862076BF-4F81-44BC-BEB3-2180785888D4" title="重做日志记录对数据库的数据文件所做的所有更改。">重做日志</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-1624A713-7AC0-4647-96AE-48E67FCF5079" title="控制文件包含数据库物理结构及其状态的关键记录。">控制文件</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1556"></a><div class="props_rev_3"><a id="GUID-32A8CC6B-E800-4EC8-B1B9-A10638848BD0" name="GUID-32A8CC6B-E800-4EC8-B1B9-A10638848BD0"></a><h5 id="VLDBG-GUID-32A8CC6B-E800-4EC8-B1B9-A10638848BD0" class="sect5">数据文件</h5>
                     <div>
                        <p>Oracle数据库由一个或多个称为表空间的逻辑存储单元组成。Oracle数据库中的每个表空间都包含一个或多个称为数据文件的文件，这些文件是位于或附加到运行Oracle数据库的主机操作系统的物理文件。</p>
                        <p>数据库中的数据共同存储在构成数据库的每个表空间的数据文件中。最简单的Oracle数据库将有一个表空间，存储在一个数据文件中。数据库的数据文件副本是任何备份策略的关键部分。从VLDB备份和恢复的角度来看，数据文件的庞大规模是主要挑战。</p>
                     </div>
                  </div><a id="VLDBG1557"></a><div class="props_rev_3"><a id="GUID-862076BF-4F81-44BC-BEB3-2180785888D4" name="GUID-862076BF-4F81-44BC-BEB3-2180785888D4"></a><h5 id="VLDBG-GUID-862076BF-4F81-44BC-BEB3-2180785888D4" class="sect5">重做日志</h5>
                     <div>
                        <p>重做日志记录对数据库的数据文件所做的所有更改。</p>
                        <p>通过一组完整的重做日志和较旧的数据文件副本，Oracle可以重新应用重做日志中记录的更改，以便在备份时间和最后一个重做日志结束之间的任何时刻重新创建数据库。每次在Oracle数据库中更改数据时，在将更改应用于数据文件之前，首先将该更改记录在联机重做日志中。</p>
                        <p>Oracle数据库至少需要两个联机重做日志组。在每个组中，至少有一个联机重做日志成员，一个单独的重做日志文件，其中记录了更改。每隔一段时间，Oracle数据库就会通过联机重做日志组进行轮换，在当前联机重做日志中存储更改，而不使用的组可以复制到归档位置，在这些位置称为归档重做日志（或统称为归档重做日志）日志）。出于高可用性原因，生产系统应始终每组使用多个联机重做成员，最好是在不同的存储系统上。保留归档重做日志是备份策略的主要部分，因为它包含对数据文件的所有更新的记录。备份策略通常涉及将归档的重做日志复制到磁盘或磁带以进行长期存储。</p>
                     </div>
                  </div><a id="VLDBG1558"></a><div class="props_rev_3"><a id="GUID-1624A713-7AC0-4647-96AE-48E67FCF5079" name="GUID-1624A713-7AC0-4647-96AE-48E67FCF5079"></a><h5 id="VLDBG-GUID-1624A713-7AC0-4647-96AE-48E67FCF5079" class="sect5">控制文件</h5>
                     <div>
                        <p>控制文件包含数据库物理结构及其状态的关键记录。</p>
                        <p>存储在控制文件中的几种类型的信息与备份和恢复有关：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>从故障中恢复或执行介质恢复所需的数据库信息</p>
                           </li>
                           <li>
                              <p>数据库结构信息，例如数据文件详细信息</p>
                           </li>
                           <li>
                              <p>重做日志详细信息</p>
                           </li>
                           <li>
                              <p>存档的日志记录</p>
                           </li>
                           <li>
                              <p>过去RMAN备份的记录</p>
                           </li>
                        </ul>
                        <p>Oracle数据库数据文件恢复过程部分由控制文件中的状态信息引导，例如数据库检查点，当前联机重做日志文件和数据文件头检查点。丢失控制文件使得从数据丢失中恢复更加困难。应定期备份控制文件，以保留最新的数据库结构更改，并简化恢复。</p>
                     </div>
                  </div>
               </div><a id="VLDBG1559"></a><div class="props_rev_3"><a id="GUID-E037DA35-38AD-42D2-8D6D-D66568333429" name="GUID-E037DA35-38AD-42D2-8D6D-D66568333429"></a><h4 id="VLDBG-GUID-E037DA35-38AD-42D2-8D6D-D66568333429" class="sect4">备份类型</h4>
                  <div>
                     <p>备份分为物理备份和逻辑备份。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">物理</span> <span class="bold">备份</span>是用于存储和恢复数据库的物理文件的备份，例如数据文件，控制文件和归档重做日志。最终，每个物理备份都是将数据库信息存储到其他某个位置的文件的副本，无论是在磁盘上还是在脱机存储上，如磁带。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">逻辑</span> <span class="bold">备份</span>包含使用Oracle Data Pump（导出/导入）实用程序从数据库中提取的逻辑数据（例如，表或存储过程）。数据存储在二进制文件中，可以导入Oracle数据库。
                           </p>
                        </li>
                     </ul>
                     <p>物理备份是任何备份和恢复策略的基础。在许多情况下，逻辑备份是物理备份的有用补充，但如果没有物理备份，则不足以防止数据丢失。</p>
                     <p>从备份重建全部或部分数据库的内容通常涉及两个阶段：从备份中检索数据文件的副本，并从备份（从存档和联机重做日志）开始重新应用对文件的更改，以实现数据库到期望的恢复时间点。从备份还原数据文件或控制文件是从磁带，磁盘或其他介质上的备份位置检索文件，并使其可供Oracle数据库使用。要恢复数据文件，将获取数据文件的已还原副本，并将数据库重做日志中记录的更改应用于该文件。要恢复整个数据库，请对其每个数据文件执行恢复。</p>
                  </div>
               </div><a id="VLDBG1560"></a><div class="props_rev_3"><a id="GUID-003FB14B-0FD7-4E45-A136-854803A2702B" name="GUID-003FB14B-0FD7-4E45-A136-854803A2702B"></a><h4 id="VLDBG-GUID-003FB14B-0FD7-4E45-A136-854803A2702B" class="sect4">备份工具</h4>
                  <div>
                     <p>Oracle数据库提供了多种工具来管理Oracle数据库的备份和恢复。</p>
                     <p>每个工具都可以选择几种基本的备份方法。方法包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="vldb-backup.html#GUID-69A6FC62-06CB-48BD-AAC6-F5F1BE00E504" title="Oracle Recovery Manager（RMAN）是一种命令行，是Oracle首选的有效备份和恢复Oracle数据库的方法。">Oracle Recovery Manager（RMAN）</a></p>
                           <p>RMAN通过维护有关所有备份和所需恢复相关文件的大量元数据记录，减少与备份策略相关的管理工作。在还原和恢复操作中，RMAN使用此信息来消除用户识别所需文件的需要。RMAN是高效的，支持文件多路复用和并行流，并在备份和恢复时验证物理和（可选）逻辑损坏的块。</p>
                           <p>可以使用<code class="codeph">V$BACKUP</code>视图生成备份活动报告。
                           </p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-BEF89467-A14D-4B90-A6C6-37BDAABFE2F9" title="可以使用Oracle Data Pump（导出/导入）实用程序来补充物理备份，以对数据进行逻辑备份。">Oracle Data Pump</a></p>
                           <p>Oracle Data Pump提供Oracle数据库内容的高速，并行，批量数据和元数据移动。此实用程序通过将数据从Oracle数据库写入操作系统文件来进行逻辑备份。以后可以将此数据导入Oracle数据库。</p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-E2A62C86-11FB-4B51-89F9-326228ABB228" title="如果您不想使用Recovery Manager，则可以使用操作系统命令（例如UNIX dd或tar命令）进行备份。">用户管理的备份</a></p>
                           <p>通过执行特定于您的操作系统的命令手动备份数据库。</p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1561"></a><div class="props_rev_3"><a id="GUID-69A6FC62-06CB-48BD-AAC6-F5F1BE00E504" name="GUID-69A6FC62-06CB-48BD-AAC6-F5F1BE00E504"></a><h5 id="VLDBG-GUID-69A6FC62-06CB-48BD-AAC6-F5F1BE00E504" class="sect5">Oracle Recovery Manager（RMAN）</h5>
                     <div>
                        <p>Oracle Recovery Manager（RMAN）是一种命令行，是Oracle首选的有效备份和恢复Oracle数据库的方法。</p>
                        <p>RMAN旨在与服务器密切配合，在备份和恢复期间提供块级损坏检测。RMAN通过文件多路复用和备份集压缩优化备份期间的性能和空间消耗，并通过提供的媒体管理库（MML）API与领先的磁带和存储介质产品集成。</p>
                        <p>RMAN在备份或恢复之前和之后处理所有底层数据库过程，释放对操作系统和SQL * Plus脚本的依赖。它为跨不同主机操作系统的备份任务提供通用接口，并提供用户管理方法无法提供的功能，如数据文件和表空间级备份和恢复，备份和恢复数据流并行化，增量备份，自动备份控制文件的数据库结构更改，备份保留策略和所有备份的详细历史记录。</p>
                        <div class="infoboxnotealso" id="GUID-69A6FC62-06CB-48BD-AAC6-F5F1BE00E504__GUID-09BEB90C-9B5C-40E9-88B1-3E7E090B609B">
                           <p class="notep1">也可以看看：</p>
                           <p>有关RMAN的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/vldbg&amp;id=BRADV8001" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </div>
                     </div>
                  </div><a id="VLDBG1564"></a><div class="props_rev_3"><a id="GUID-BEF89467-A14D-4B90-A6C6-37BDAABFE2F9" name="GUID-BEF89467-A14D-4B90-A6C6-37BDAABFE2F9"></a><h5 id="VLDBG-GUID-BEF89467-A14D-4B90-A6C6-37BDAABFE2F9" class="sect5">Oracle Data Pump</h5>
                     <div>
                        <p>可以使用Oracle Data Pump（导出/导入）实用程序来补充物理备份，以对数据进行逻辑备份。</p>
                        <p>逻辑备份存储有关为数据库创建的模式对象的信息。Oracle Data Pump将数据和元数据加载到一组操作系统文件中，这些文件可以在同一系统上导入或移动到另一个系统并在那里导入。</p>
                        <p>转储文件集由一个或多个包含表数据，数据库对象元数据和控制信息的磁盘文件组成。文件以二进制格式写入。在导入操作期间，数据泵导入实用程序使用这些文件来查找转储文件集中的每个数据库对象。</p>
                     </div>
                  </div><a id="VLDBG1565"></a><div class="props_rev_3"><a id="GUID-E2A62C86-11FB-4B51-89F9-326228ABB228" name="GUID-E2A62C86-11FB-4B51-89F9-326228ABB228"></a><h5 id="VLDBG-GUID-E2A62C86-11FB-4B51-89F9-326228ABB228" class="sect5">用户管理的备份</h5>
                     <div>
                        <p>如果您不想使用Recovery Manager，则可以使用操作系统命令（例如UNIX <code class="codeph">dd</code>或<code class="codeph">tar</code>命令）进行备份。
                        </p>
                        <p>要创建用户管理的联机备份，必须手动将数据库置于热备份模式。热备份模式会对联机日志文件执行额外的写入操作，从而增加其大小。</p>
                        <p>通过编写脚本也可以自动执行备份操作。您可以立即备份整个数据库，也可以备份单个表空间，数据文件，控制文件或归档日志。可以使用各个表空间，数据文件，控制文件和存档日志的备份来补充整个数据库备份。</p>
                        <p>操作系统命令或第三方备份软件可以执行数据库备份。相反，必须使用第三方软件来还原数据库的备份。</p>
                     </div>
                  </div>
               </div>
            </div><a id="VLDBG1566"></a><div class="props_rev_3"><a id="GUID-79223C42-48E1-4036-AD74-4856A24935D5" name="GUID-79223C42-48E1-4036-AD74-4856A24935D5"></a><h3 id="VLDBG-GUID-79223C42-48E1-4036-AD74-4856A24935D5" class="sect3">数据仓库备份和恢复</h3>
               <div>
                  <p>数据仓库恢复类似于OLTP系统。</p>
                  <p>但是，数据仓库可能不需要从备份中恢复所有数据，或者完全失败，在用户访问开始之前恢复整个数据库。高效快速地恢复数据仓库始于精心规划的备份。</p>
                  <p>接下来的几节将帮助您确定应备份哪些数据，并指导您使用能够在最短的时间内恢复关键数据的方法和工具。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="vldb-backup.html#GUID-76435B39-EF7E-418B-9C33-0C43B088178A" title="恢复时间目标（RTO）是您希望能够恢复数据的持续时间。">恢复时间目标（RTO）</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-AD7289B0-0D01-4382-AA5D-CBE458ADDF91" title="恢复点目标（RPO）是在对组织造成不利伤害之前可能丢失的最大数据量。">恢复点目标（RPO）</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1567"></a><div class="props_rev_3"><a id="GUID-76435B39-EF7E-418B-9C33-0C43B088178A" name="GUID-76435B39-EF7E-418B-9C33-0C43B088178A"></a><h4 id="VLDBG-GUID-76435B39-EF7E-418B-9C33-0C43B088178A" class="sect4">恢复时间目标（RTO）</h4>
                  <div>
                     <p><span class="bold">恢复</span> <span class="bold">时间</span> <span class="bold">目标</span> （RTO）是您希望能够恢复数据的持续时间。
                     </p>
                     <p>您的备份和恢复计划应设计为满足贵公司为其数据仓库选择的RTO。例如，您可以确定5％的数据必须在12小时内可用，50％的数据必须在2天内完全丢失数据后可用，其余数据在5天内可用。在这种情况下，您有两个RTO。您的总RTO是7.5天。</p>
                     <p>要确定您的RTO应该是什么，您必须首先确定数据不可用的影响。要建立RTO，请执行以下四个步骤：</p>
                     <ol>
                        <li>
                           <p>分析和识别：了解您的恢复准备情况，风险区域和不可用数据的业务成本。在数据仓库中，您应该识别必须在中断后的<span class="italic">n</span>天内恢复的关键数据。
                           </p>
                        </li>
                        <li>
                           <p>设计：将恢复要求转换为备份和恢复策略。这可以通过将数据组织成逻辑关系和关键性来实现。</p>
                        </li>
                        <li>
                           <p>构建和集成：将解决方案部署并集成到您的环境中以备份和恢复数据。记录备份和恢复计划。</p>
                        </li>
                        <li>
                           <p>管理和发展：定期测试您的恢复计划。随着数据，IT基础架构和业务流程的变化，实施变更管理流程以优化和更新解决方案。</p>
                        </li>
                     </ol>
                  </div>
               </div><a id="VLDBG1568"></a><div class="props_rev_3"><a id="GUID-AD7289B0-0D01-4382-AA5D-CBE458ADDF91" name="GUID-AD7289B0-0D01-4382-AA5D-CBE458ADDF91"></a><h4 id="VLDBG-GUID-AD7289B0-0D01-4382-AA5D-CBE458ADDF91" class="sect4">恢复点目标（RPO）</h4>
                  <div>
                     <p>恢复点目标（RPO）是在对组织造成不利伤害之前可能丢失的最大数据量。</p>
                     <p>RPO表示业务流程或组织的数据丢失容忍度。这种数据丢失通常以时间来衡量，例如，数据丢失5小时或2天。零RPO意味着在发生媒体丢失时不应丢失已提交的数据，而24小时RPO可以容忍一天的数据丢失。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="vldb-backup.html#GUID-1EC8332F-35B1-4441-8E03-67D29247E526" title="数据仓库最明显的特征是数据库的大小。">更多数据意味着更长的备份窗口</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-E573779F-B18F-4080-A60E-5C33E36F129C" title="在数据仓库中，有时可能没有完全使用数据库。">分而治之</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1569"></a><div class="props_rev_3"><a id="GUID-1EC8332F-35B1-4441-8E03-67D29247E526" name="GUID-1EC8332F-35B1-4441-8E03-67D29247E526"></a><h5 id="VLDBG-GUID-1EC8332F-35B1-4441-8E03-67D29247E526" class="sect5">更多数据意味着更长的备份窗口</h5>
                     <div>
                        <p>数据仓库最明显的特征是数据库的大小。</p>
                        <p>这可以超过100的太字节。硬件是快速备份和恢复的限制因素。但是，今天的磁带存储继续发展以适应必须卸载到磁带的数据量（例如，在内部使用磁盘和标准磁带访问接口的虚拟磁带库的出现）。RMAN可以并行地完全使用所有可用的磁带设备，以最大限度地提高备份和恢复性能。</p>
                        <p>实质上，备份大型数据库所需的时间可以从以下最小吞吐量中获得：生产磁盘，主机总线适配器（HBA）和网络到磁带设备，以及磁带驱动器流规范*磁带驱动器的数量。如果使用RMAN备份加密或压缩，主机CPU也可能是整体备份性能的限制因素。在充足的硬件资源的情况下，可以调整备份和恢复窗口以满足任何业务需求。</p>
                     </div>
                  </div><a id="VLDBG1570"></a><div class="props_rev_3"><a id="GUID-E573779F-B18F-4080-A60E-5C33E36F129C" name="GUID-E573779F-B18F-4080-A60E-5C33E36F129C"></a><h5 id="VLDBG-GUID-E573779F-B18F-4080-A60E-5C33E36F129C" class="sect5">分而治之</h5>
                     <div>
                        <p>在数据仓库中，有时可能没有完全使用数据库。</p>
                        <p>虽然这个时间窗口可能是几个连续的小时，但仅备份整个数据库是不够的。您可能需要考虑在几天内分解数据库备份。RMAN使您可以指定允许运行给定备份作业的时间。使用<code class="codeph">BACKUP</code> <code class="codeph">DURATION</code> ，您可以选择尽快运行备份并以更慢的速度运行备份，以最大限度地减少备份可能对数据库施加的负载。
                        </p>
                        <p>在以下示例中，RMAN将备份最近7天内未备份的所有数据库文件，运行4小时，并尽快读取块。</p><pre class="oac_no_warn" dir="ltr">备份数据库自'sysdate  -  7'部分持续时间4:00后最小时间;</pre><p>每次运行此RMAN命令时，它都会备份最近7天内未备份的数据文件。您无需每晚手动指定要备份的表空间或数据文件。在几天的过程中，将备份所有数据库文件。</p>
                        <p>虽然这是一种简单的数据库备份方法，但它易于实现，并且可以更灵活地备份大量数据。在恢复期间，RMAN可能会指向多个不同的存储设备以执行还原操作。因此，您的恢复时间可能会更长。</p>
                     </div>
                  </div>
               </div>
            </div><a id="VLDBG1571"></a><div class="props_rev_3"><a id="GUID-E6542B38-2388-4152-AFBC-C1CA03837D93" name="GUID-E6542B38-2388-4152-AFBC-C1CA03837D93"></a><h3 id="VLDBG-GUID-E6542B38-2388-4152-AFBC-C1CA03837D93" class="sect3">数据仓库恢复方法</h3>
               <div>
                  <p>设计备份和恢复策略可能是一项复杂且具有挑战性的任务。</p>
                  <p>当您有数百TB的数据必须受到保护并因故障而被恢复时，策略可能非常复杂。本节包含几个可以实现的最佳实践，以简化备份和恢复的管理。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="vldb-backup.html#GUID-DE407D9D-F392-4436-89B8-960ADD4AE300" title="归档重做日志对于恢复至关重要，因为它们不会丢失数据，因为它们构成了对数据库的更改记录。">最佳实践1：使用ARCHIVELOG模式</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-6AF7DEE0-8916-42C6-8EDA-A0464C5DA57B" title="许多数据仓库是在早期版本的Oracle数据库中开发的，可能没有集成RMAN进行备份和恢复。">最佳实践2：使用RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-6D73D7DA-7F4F-4CC3-A4EC-7A84F7ACF2B7" title="通过仅读取和写入自上次完全备份或增量备份以来更改的块，启用块更改跟踪可以更快地完成增量备份。">最佳实践3：使用块更改跟踪</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-FA70B6EF-0C8B-435B-98C9-CDEBCDCED145" title="随着大文件表空间的出现，数据仓库有机会将大量数据文件整合到更少，更好管理的数据文件中。">最佳实践4：使用RMAN多节备份</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-70595966-7453-4EAD-AE6F-6CDEF4C7049F" title="数据仓库面临的一个重要问题是典型数据仓库的庞大规模。即使使用强大的备份硬件，备份仍可能需要几个小时。">最佳实践5：利用只读表空间</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-42825ED1-C4C5-449B-870F-D2C8627CBF86" title="通常，数据仓库的高优先级是性能。数据仓库不仅必须为在线用户提供良好的查询性能，而且数据仓库在提取，转换和加载（ETL）过程中也必须高效，以便可以在最短的时间内加载大量数据。数据仓库使用的一种常见优化是使用NOLOGGING模式执行批量数据操作。">最佳实践6：计划备份/恢复策略中的NOLOGGING操作</a></p>
                     </li>
                     <li>
                        <p><a href="vldb-backup.html#GUID-12293CA0-65A8-469F-BEDE-4D502B250724" title="从备份和恢复的角度来看，并非数据仓库中的所有表空间都具有同等重要性。">最佳实践7：并非所有表空间都应该同等对待</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1572"></a><div class="props_rev_3"><a id="GUID-DE407D9D-F392-4436-89B8-960ADD4AE300" name="GUID-DE407D9D-F392-4436-89B8-960ADD4AE300"></a><h4 id="VLDBG-GUID-DE407D9D-F392-4436-89B8-960ADD4AE300" class="sect4">最佳实践1：使用ARCHIVELOG模式</h4>
                  <div>
                     <p>归档重做日志对于恢复至关重要，因为它们不会丢失数据，因为它们构成了对数据库的更改记录。</p>
                     <p>Oracle数据库可以以两种模式运行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ARCHIVELOG</code></p>
                           <p>Oracle数据库归档填充的联机重做日志文件，然后在循环中重用它们。</p>
                        </li>
                        <li>
                           <p><code class="codeph">NOARCHIVELOG</code></p>
                           <p>在重新使用循环之前，Oracle数据库不会归档已填充的联机重做日志文件。</p>
                        </li>
                     </ul>
                     <p>在<code class="codeph">ARCHIVELOG</code>模式下运行数据库具有以下好处：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以从实例和介质故障中恢复数据库。</p>
                        </li>
                        <li>
                           <p>可以在数据库打开并可供使用时执行备份。</p>
                        </li>
                        <li>
                           <p>Oracle数据库支持多路复用存档日志，以避免存档日志中出现任何可能的单点故障。</p>
                        </li>
                        <li>
                           <p>可以使用更多恢复选项，例如执行表空间时间点恢复（TSPITR）的功能。</p>
                        </li>
                        <li>
                           <p>存档的重做日志可以传输并应用于物理备用数据库，该数据库是主数据库的精确副本。</p>
                        </li>
                     </ul>
                     <p>在<code class="codeph">NOARCHIVELOG</code>模式下运行数据库会产生以下后果：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>只有在干净关闭后关闭数据库时，才能备份数据库。</p>
                        </li>
                        <li>
                           <p>通常，唯一的介质恢复选项是将整个数据库还原到完成或增量备份的时间点，这可能导致最近的事务丢失。</p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1573"></a><div class="props_rev_3"><a id="GUID-5905FBA5-9F21-4FAC-AA64-71FCF074635D" name="GUID-5905FBA5-9F21-4FAC-AA64-71FCF074635D"></a><h5 id="VLDBG-GUID-5905FBA5-9F21-4FAC-AA64-71FCF074635D" class="sect5">停机时间可以接受吗？</h5>
                     <div>
                        <p>设计备份计划以最大限度地减少数据库中断非常重要。</p>
                        <p>可以在打开或关闭数据库时进行Oracle数据库备份。计划的数据库停机时间可能会对运营造成破坏，特别是在支持多个时区用户的全球企业中，每天最多24小时。</p>
                        <p>根据业务，一些企业可以承受停机时间。如果整体业务策略需要很少或不需要停机，那么备份策略应该实现在线备份。永远不需要删除数据库进行备份。联机备份要求数据库处于<code class="codeph">ARCHIVELOG</code>模式。
                        </p>
                        <p>考虑到数据仓库的大小（以及因此备份数据仓库的时间量），对数据仓库进行脱机备份通常是不可行的，如果使用<code class="codeph">NOARCHIVELOG</code>模式，这将是必需的。
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1574"></a><div class="props_rev_3"><a id="GUID-6AF7DEE0-8916-42C6-8EDA-A0464C5DA57B" name="GUID-6AF7DEE0-8916-42C6-8EDA-A0464C5DA57B"></a><h4 id="VLDBG-GUID-6AF7DEE0-8916-42C6-8EDA-A0464C5DA57B" class="sect4">最佳实践2：使用RMAN</h4>
                  <div>
                     <p>许多数据仓库是在早期版本的Oracle数据库中开发的，可能没有集成RMAN进行备份和恢复。</p>
                     <p>然而，正如有很多理由利用<code class="codeph">ARCHIVELOG</code>模式一样，有一个类似的引人注目的理由列表采用RMAN。考虑以下：</p>
                     <ol>
                        <li>
                           <p>无故障备份和恢复</p>
                        </li>
                        <li>
                           <p>腐败块检测</p>
                        </li>
                        <li>
                           <p>归档日志验证和管理</p>
                        </li>
                        <li>
                           <p>阻止媒体恢复（BMR）</p>
                        </li>
                        <li>
                           <p>轻松与媒体管理器集成</p>
                        </li>
                        <li>
                           <p>备份和还原优化</p>
                        </li>
                        <li>
                           <p>备份和还原验证</p>
                        </li>
                        <li>
                           <p>无需停机的备份</p>
                        </li>
                        <li>
                           <p>增量备份</p>
                        </li>
                        <li>
                           <p>广泛的报道</p>
                        </li>
                     </ol>
                  </div>
               </div><a id="VLDBG1575"></a><div class="props_rev_3"><a id="GUID-6D73D7DA-7F4F-4CC3-A4EC-7A84F7ACF2B7" name="GUID-6D73D7DA-7F4F-4CC3-A4EC-7A84F7ACF2B7"></a><h4 id="VLDBG-GUID-6D73D7DA-7F4F-4CC3-A4EC-7A84F7ACF2B7" class="sect4">最佳实践3：使用块更改跟踪</h4>
                  <div>
                     <p>通过仅读取和写入自上次完全备份或增量备份以来更改的块，启用块更改跟踪可以更快地完成增量备份。</p>
                     <p>对于数据仓库，如果数据库通常经历低到中等百分比的更改，这将非常有用。</p>
                     <div class="infoboxnotealso" id="GUID-6D73D7DA-7F4F-4CC3-A4EC-7A84F7ACF2B7__GUID-FDE85183-87ED-491F-8258-DC122A535892">
                        <p class="notep1">也可以看看：</p>
                        <p>有关块更改跟踪的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/vldbg&amp;id=BRADV8001" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="VLDBG1576"></a><div class="props_rev_3"><a id="GUID-FA70B6EF-0C8B-435B-98C9-CDEBCDCED145" name="GUID-FA70B6EF-0C8B-435B-98C9-CDEBCDCED145"></a><h4 id="VLDBG-GUID-FA70B6EF-0C8B-435B-98C9-CDEBCDCED145" class="sect4">最佳实践4：使用RMAN多节备份</h4>
                  <div>
                     <p>随着大文件表空间的出现，数据仓库有机会将大量数据文件整合到更少，更好管理的数据文件中。</p>
                     <p>对于备份非常大的数据文件，RMAN提供多节备份作为在文件本身内并行化备份操作的方法，以便并行备份文件的各个部分，而不是基于每个文件进行备份。</p>
                     <p>例如，一个TB数据文件可以划分为10个100 GB备份，每个部分并行备份，而不是整个备份为一个文件的TB文件。大数据文件的总体备份时间可以大大减少。</p>
                     <div class="infoboxnotealso" id="GUID-FA70B6EF-0C8B-435B-98C9-CDEBCDCED145__GUID-F28215A7-7FFF-46F5-A141-CC01F58F4CD8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关配置多节备份的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/vldbg&amp;id=BRADV8001" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="VLDBG1577"></a><div class="props_rev_3"><a id="GUID-70595966-7453-4EAD-AE6F-6CDEF4C7049F" name="GUID-70595966-7453-4EAD-AE6F-6CDEF4C7049F"></a><h4 id="VLDBG-GUID-70595966-7453-4EAD-AE6F-6CDEF4C7049F" class="sect4">最佳实践5：利用只读表空间</h4>
                  <div>
                     <p>数据仓库面临的一个重要问题是典型数据仓库的庞大规模。即使使用强大的备份硬件，备份仍可能需要几个小时。</p>
                     <p>提高备份性能的一个重要考虑因素是最大限度地减少要备份的数据量。只读表空间是减少要在数据仓库中备份的数据量的最简单机制。即使使用增量备份，如果表空间设置为只读，备份和恢复也会更快。</p>
                     <p>只读表空间的优点是数据必须只备份一次。如果数据仓库包含五年的历史数据，并且前四年的数据可以只读，那么从理论上讲，数据库的常规备份将只备份20％的数据。这可以大大减少备份数据仓库所需的时间。</p>
                     <p>大多数数据仓库将其数据存储在按时间进行范围分区的表中。在典型的数据仓库中，数据通常在30天到一年的范围内有效。在此期间，历史数据仍然可以更新和更改（例如，零售商可以接受自购买之日起最多30天的退货，以便销售数据记录在此期间可能会发生变化）。但是，在数据达到某个年龄后，通常会知道它是静态的。</p>
                     <p>通过利用分区，用户可以将其数据的静态部分设置为只读。目前，Oracle支持只读表空间而不是只读分区或表。要利用只读表空间并减少备份窗口，应设计一种在只读表空间中存储常量数据分区的策略。以下是实现滚动窗口的两种策略：</p>
                     <ol>
                        <li>
                           <p>当分区中的数据成熟到完全静态时，实现定期调度的进程将分区从当前的读写表空间移动到表空间，然后可以将其设置为只读。</p>
                        </li>
                        <li>
                           <p>创建一系列表空间，每个表空间包含少量分区，并定期将表空间从读写更改为只读，因为该表空间中的数据会老化。</p>
                        </li>
                     </ol>
                     <p>一个考虑因素是备份数据只是恢复过程的一半。如果您配置磁带系统以便它可以在4小时内备份数据仓库的读写部分，那么推论是磁带系统可能需要20个小时来恢复数据库，如果需要完全恢复，则80％数据库是只读的。</p>
                  </div>
               </div><a id="VLDBG1578"></a><div class="props_rev_3"><a id="GUID-42825ED1-C4C5-449B-870F-D2C8627CBF86" name="GUID-42825ED1-C4C5-449B-870F-D2C8627CBF86"></a><h4 id="VLDBG-GUID-42825ED1-C4C5-449B-870F-D2C8627CBF86" class="sect4">最佳实践6：计划备份/恢复策略中的NOLOGGING操作</h4>
                  <div>
                     <p>通常，数据仓库的高优先级是性能。数据仓库不仅必须为在线用户提供良好的查询性能，而且数据仓库在提取，转换和加载（ETL）过程中也必须高效，以便可以在最短的时间内加载大量数据。数据仓库使用的一种常见优化是使用<code class="codeph">NOLOGGING</code>模式执行批量数据操作。
                     </p>
                     <p></p>
                     <p>支持<code class="codeph">NOLOGGING</code>模式的数据库操作是直接路径加载和插入操作，索引创建和表创建。当操作在<code class="codeph">NOLOGGING</code>模式下运行时，数据不会写入重做日志（或者更准确地说，只有一小组元数据被写入重做日志）。此模式在数据仓库中广泛使用，可将批量数据操作的性能提高多达50％。
                     </p>
                     <p>但是，权衡是使用传统的恢复机制无法恢复<code class="codeph">NOLOGGING</code>操作，因为支持恢复的必要数据从未写入日志文件。此外，即使那些操作没有使用<code class="codeph">NOLOGGING</code>模式，对发生了<code class="codeph">NOLOGGING</code>操作的数据的后续操作也不能恢复。由于<code class="codeph">NOLOGGING</code>操作提供的性能提升，通常建议数据仓库在其ETL过程中使用<code class="codeph">NOLOGGING</code>模式。
                     </p>
                     <p>在设计备份和恢复策略时，必须考虑<code class="codeph">NOLOGGING</code>操作的存在。当数据库依赖于<code class="codeph">NOLOGGING</code>操作时，传统的恢复策略（从最新的磁带备份恢复并应用存档的日志文件）不再适用，因为日志文件无法恢复<code class="codeph">NOLOGGING</code>操作。
                     </p>
                     <p>要记住的第一个原则是，在<code class="codeph">NOLOGGING</code>操作发生时不要进行备份。Oracle数据库当前不强制执行此规则，因此DBA必须安排备份作业和ETL作业，以使<code class="codeph">NOLOGGING</code>操作不与备份操作重叠。
                     </p>
                     <p>存在<code class="codeph">NOLOGGING</code>操作时有两种备份和恢复方法：ETL或增量备份。如果您未在数据仓库中使用<code class="codeph">NOLOGGING</code>操作，则不必选择任一选项：您可以使用存档日志恢复数据仓库。但是，与基于归档日志的恢复方法相比，这些选项可能会提供一些性能优势。您还可以使用闪回日志和保证还原点将数据库闪回到以前的某个时间点。
                     </p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="vldb-backup.html#GUID-D4A6BA18-4B9D-4C8A-9228-A7A347B6EB42" title="ETL过程使用多个Oracle功能和一组方法将数据加载（重新加载）到数据仓库中。">提取，转换和加载</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-894D16AF-2719-4C42-95D0-9A8E0E156343" title="一种方法是进行常规数据库备份，并存储必要的数据文件以重新创建整周的ETL过程。">提取，转换和加载策略</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-8BB8C9D9-FF95-49B5-9E3B-F768459AB3EA" title="在NOLOGGING操作存在的情况下，更自动化的备份和恢复策略使用RMAN的增量备份功能。">增量备份</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-4FDB71A7-3761-4899-9BCA-1E97FB17BF9B" title="使用此方法的典型备份和恢复策略是每周末备份数据仓库，然后在ETL过程完成后每晚对数据仓库进行增量备份。">增量方法</a></p>
                        </li>
                        <li>
                           <p><a href="vldb-backup.html#GUID-F4F3145C-A462-4963-ACF6-BA66C5E9DD70" title="闪回数据库是一种快速，连续的时间点恢复方法，用于修复广泛的逻辑错误。">闪回数据库和保证还原点</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1579"></a><div class="props_rev_3"><a id="GUID-D4A6BA18-4B9D-4C8A-9228-A7A347B6EB42" name="GUID-D4A6BA18-4B9D-4C8A-9228-A7A347B6EB42"></a><h5 id="VLDBG-GUID-D4A6BA18-4B9D-4C8A-9228-A7A347B6EB42" class="sect5">提取，转换和加载</h5>
                     <div>
                        <p>ETL过程使用多个Oracle功能和一组方法将数据加载（重新加载）到数据仓库中。</p>
                        <p>这些功能包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>可传输的表空间</p>
                              <p>可传输表空间允许用户跨Oracle数据库快速移动表空间。这是在数据库之间移动批量数据的最有效方法。Oracle数据库提供跨平台传输表空间的功能。如果源平台和目标平台具有不同的字节顺序，则RMAN将正在传输的表空间转换为目标格式。</p>
                           </li>
                           <li>
                              <p>使用SQL * Loader</p>
                              <p>SQL * Loader将外部平面文件中的数据加载到Oracle数据库的表中。它具有强大的数据解析引擎，对数据文件中的数据格式几乎没有限制。</p>
                           </li>
                           <li>
                              <p>数据泵（导出/导入）</p>
                              <p>Oracle Data Pump支持从一个数据库到另一个数据库的高速数据和元数据移动。该技术是Oracle Data Pump Export和Data Pump Import实用程序的基础。</p>
                           </li>
                           <li>
                              <p>外部表格</p>
                              <p>外部表功能是对现有SQL * Loader功能的补充。它使您可以访问外部源中的数据，就像它在数据库中的表中一样。外部表还可以与Data Pump驱动程序一起使用，以使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> <code class="codeph">*</code> <code class="codeph">FROM</code>从数据库导出数据，然后将数据导入Oracle数据库。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="VLDBG1580"></a><div class="props_rev_3"><a id="GUID-894D16AF-2719-4C42-95D0-9A8E0E156343" name="GUID-894D16AF-2719-4C42-95D0-9A8E0E156343"></a><h5 id="VLDBG-GUID-894D16AF-2719-4C42-95D0-9A8E0E156343" class="sect5">提取，转换和加载策略</h5>
                     <div>
                        <p>一种方法是进行常规数据库备份，并存储必要的数据文件以重新创建整周的ETL过程。</p>
                        <p>如果需要恢复，可以从最新的备份中恢复数据仓库。然后，通过应用存档的重做日志（如在传统的恢复方案中所做的那样）而不是向前滚动，可以通过重新运行ETL过程来前滚数据仓库。这种范例假设可以轻松地重放ETL过程，这通常涉及为每个ETL过程存储一组提取文件。</p>
                        <p>此方法的示例实现是每周末备份数据仓库，然后存储必要的文件以支持每晚的ETL过程。最多必须重新应用7天的ETL处理才能恢复数据库。数据仓库管理员可以根据磁带的恢复速度和以前ETL运行的性能数据，轻松地预测恢复数据仓库的时间长度。</p>
                        <p>从本质上讲，数据仓库管理员在使用<code class="codeph">NOLOGGING</code>操作的ETL过程中获得了更好的性能，其代价是稍微复杂一些，自动恢复过程也不那么自动化。许多数据仓库管理员发现这是一个理想的权衡。
                        </p>
                        <p>这种方法的一个缺点是数据仓库管理员负担跟踪数据仓库中发生的所有相关更改。此方法不捕获超出ETL过程的更改。例如，在某些数据仓库中，用户可以创建自己的表和数据结构。这些变化在恢复过程中丢失了。</p>
                        <p>必须将此限制传达给最终用户。或者，也可以强制最终用户在单独的表空间中创建所有私有数据库对象，并且在恢复期间，DBA可以使用常规恢复恢复此表空间，同时使用重新运行ETL过程的方法恢复数据库的其余部分。</p>
                     </div>
                  </div><a id="VLDBG1581"></a><div class="props_rev_3"><a id="GUID-8BB8C9D9-FF95-49B5-9E3B-F768459AB3EA" name="GUID-8BB8C9D9-FF95-49B5-9E3B-F768459AB3EA"></a><h5 id="VLDBG-GUID-8BB8C9D9-FF95-49B5-9E3B-F768459AB3EA" class="sect5">增量备份</h5>
                     <div>
                        <p>在<code class="codeph">NOLOGGING</code>操作存在的情况下，更自动化的备份和恢复策略使用RMAN的增量备份功能。
                        </p>
                        <p>增量备份提供了自上次备份以来仅备份更改的块的功能。数据文件的增量备份在逐个块的基础上捕获数据更改，而不是要求备份数据文件中的所有已使用块。除非更改了数据文件中的每个块，否则生成的备份集通常比完整数据文件备份更小且更有效。</p>
                        <p>启用块更改跟踪时，Oracle数据库会跟踪所有数据库更改的物理位置。RMAN自动使用更改跟踪文件来确定在增量备份期间必须读取哪些块。块更改跟踪文件大约是数据库总大小的1/30000。</p>
                        <div class="infoboxnotealso" id="GUID-8BB8C9D9-FF95-49B5-9E3B-F768459AB3EA__GUID-15C766EE-97C7-456A-880F-59ADC195C6A1">
                           <p class="notep1">也可以看看：</p>
                           <p>有关块更改跟踪及其启用方式的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/vldbg&amp;id=BRADV8001" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </div>
                     </div>
                  </div><a id="VLDBG1582"></a><div class="props_rev_3"><a id="GUID-4FDB71A7-3761-4899-9BCA-1E97FB17BF9B" name="GUID-4FDB71A7-3761-4899-9BCA-1E97FB17BF9B"></a><h5 id="VLDBG-GUID-4FDB71A7-3761-4899-9BCA-1E97FB17BF9B" class="sect5">增量方法</h5>
                     <div>
                        <p>使用此方法的典型备份和恢复策略是每周末备份数据仓库，然后在ETL过程完成后每晚对数据仓库进行增量备份。</p>
                        <p>与常规备份一样，增量备份不得与<code class="codeph">NOLOGGING</code>操作同时运行。要恢复数据仓库，将恢复数据库备份，然后重新应用每晚的增量备份。
                        </p>
                        <p>虽然<code class="codeph">NOLOGGING</code>操作未在存档日志捕获，从数据<code class="codeph">NOLOGGING</code>操作是存在于增量备份。此外，与以前的方法不同，可以使用RMAN管理此备份和恢复策略。</p>
                     </div>
                  </div><a id="VLDBG1583"></a><div class="props_rev_3"><a id="GUID-F4F3145C-A462-4963-ACF6-BA66C5E9DD70" name="GUID-F4F3145C-A462-4963-ACF6-BA66C5E9DD70"></a><h5 id="VLDBG-GUID-F4F3145C-A462-4963-ACF6-BA66C5E9DD70" class="sect5">闪回数据库和保证还原点</h5>
                     <div>
                        <p>闪回数据库是一种快速，连续的时间点恢复方法，用于修复广泛的逻辑错误。</p>
                        <p>闪回数据库依赖于额外的日志记录，称为闪回日志，这些日志记录在快速恢复区域中创建，并根据恢复需要保留用户定义的时间间隔。这些日志在更新时跟踪原始块图像。</p>
                        <p>执行闪回数据库操作时，只恢复和恢复与更改的数据对应的块映像，而传统的数据文件还原必须在恢复开始之前恢复备份中的所有块。闪回日志与重做日志成比例地创建。</p>
                        <p>对于非常大且活跃的数据库，保留所有需要的闪回日志以进行连续时间点恢复可能是不可行的。但是，可能需要在批处理运行期间为逻辑错误创建特定的时间点快照（例如，在夜间批处理作业之前）。对于此方案，可以在不启用闪回日志记录的情况下创建保证还原点。</p>
                        <p>创建保证还原点后，将保留闪回日志，以使闪回数据库满足保证还原点，而无需其他时间点，从而节省空间。例如，可以创建保证的还原点，然后创建一个nologging批处理作业。只要在保证还原点的创建时间的最后一小时内没有先前的nologging操作，闪回数据库到保证还原点就会撤消nologging批处理作业。要在nologging批处理作业完成后闪回一段时间，请在批处理作业结束后至少一小时创建保证还原点。</p>
                        <p>在此方案中估计闪回日志空间以确保还原点取决于您希望保留还原点的天数中数据库的更改量。例如，要保证2天的保证还原点并且您希望更改100 GB的数据库，那么为闪回日志计划100 GB。100 GB是指在创建保证还原点后更改的数据库子集，而不是更改频率。</p>
                     </div>
                  </div>
               </div><a id="VLDBG1584"></a><div class="props_rev_3"><a id="GUID-12293CA0-65A8-469F-BEDE-4D502B250724" name="GUID-12293CA0-65A8-469F-BEDE-4D502B250724"></a><h4 id="VLDBG-GUID-12293CA0-65A8-469F-BEDE-4D502B250724" class="sect4">最佳实践7：并非所有表空间都应该同等对待</h4>
                  <div>
                     <p>从备份和恢复的角度来看，并非数据仓库中的所有表空间都具有同等重要性。</p>
                     <p>数据库管理员可以在必要时使用此信息来设计更有效的备份和恢复策略。备份和恢复的基本粒度是表空间，因此不同的表空间可能具有不同的备份和恢复策略。</p>
                     <p>在最基本的层面上，永远不需要备份临时表空间（RMAN强制执行的规则）。此外，在某些数据仓库中，可能存在专用于临时空间的表空间，供用户存储临时表和增量结果。这些表空间不是显式临时表空间，而是基本上用作临时表空间。根据业务需求，可能不需要备份和还原这些表空间;相反，对于这些表空间的丢失，用户将重新创建自己的数据对象。</p>
                     <p>在许多数据仓库中，某些数据比其他数据更重要。例如，数据仓库中的销售数据可能至关重要，在恢复情况下，此数据必须尽快联机。但是，在同一个数据仓库中，存储来自公司网站的点击流数据的表可能对企业来说不那么重要。如果数据库文件丢失，企业可能会容忍这些数据离线几天，或者甚至可以容纳数天的点击流数据丢失。在这种情况下，必须经常备份包含销售数据的表空间，而包含点击流数据的表空间只需每周或两周备份一次。</p>
                     <p>虽然最简单的备份和恢复方案是将数据库中的每个表空间都视为相同，但Oracle数据库为DBA提供了根据需要为每个表空间设计备份和恢复方案的灵活性。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13444.create-composite-partition-table.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="When creating a composite partitioned table, you use the PARTITION and SUBPARTITION clauses of the CREATE TABLE SQL statement."></meta>
      <meta name="description" content="When creating a composite partitioned table, you use the PARTITION and SUBPARTITION clauses of the CREATE TABLE SQL statement."></meta>
      <title>创建表时指定复合分区</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="VLDB and Partitioning Guide"></meta>
      <meta property="og:description" content="When creating a composite partitioned table, you use the PARTITION and SUBPARTITION clauses of the CREATE TABLE SQL statement."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="VLDB and Partitioning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00"></meta>
      <meta name="dcterms.title" content="VLDB and Partitioning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96199-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="partition-create-tables-indexes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="maintenance-partition-can-be-performed.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="partition-create-tables-indexes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="maintenance-partition-can-be-performed.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB和分区指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="partition-admin.html" property="item" typeof="WebPage"><span property="name">分区管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建表时指定复合分区</li>
            </ol>
            <a id="GUID-CB1047B0-EBD7-4919-AC77-346BB48A98C4" name="GUID-CB1047B0-EBD7-4919-AC77-346BB48A98C4"></a><a id="VLDBG1094"></a>
            
            <h2 id="VLDBG-GUID-CB1047B0-EBD7-4919-AC77-346BB48A98C4" class="sect2">创建表时指定复合分区</h2>
         </header>
         <div class="ind">
            <div>
               <p>创建复合分区表时，可以使用<code class="codeph">CREATE TABLE</code> SQL语句的<code class="codeph">PARTITION</code>和<code class="codeph">SUBPARTITION</code>子句。
               </p>
               <p>要创建复合分区表，首先使用<code class="codeph">PARTITION</code> <code class="codeph">BY</code> { <code class="codeph">HASH</code> | <code class="codeph">RANGE</code> [ <code class="codeph">INTERVAL</code> ] | <code class="codeph">CREATE TABLE</code>语句的<code class="codeph">LIST</code> }子句。接下来，指定一个<code class="codeph">SUBPARTITION BY</code>子句，该子句遵循与<code class="codeph">PARTITION BY</code>子句类似的语法和规则。
               </p>
               <p>讨论了以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="create-composite-partition-table.html#GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C" title="复合hash- *分区允许沿两个维度进行散列分区。">创建复合哈希 -  *分区表</a></p>
                  </li>
                  <li>
                     <p><a href="create-composite-partition-table.html#GUID-92F34170-30CD-40E3-9899-67A2DA49429F" title="interval- *复合分区的概念类似于range- *分区的概念。">创建复合间隔 -  *分区表</a></p>
                  </li>
                  <li>
                     <p><a href="create-composite-partition-table.html#GUID-795E1D0E-A298-404B-B66C-4832A63264F1" title="list-hash，list-list和list-range复合分区的概念类似于range-hash，range-list和range-range partitioning的概念。">创建复合列表 -  *分区表</a></p>
                  </li>
                  <li>
                     <p><a href="create-composite-partition-table.html#GUID-BFBFC6FA-65FD-4FFA-A6F3-47FB4ACEE60C" title="本主题介绍了创建复合范围*分区表的方法。">创建复合范围 -  *分区表</a></p>
                  </li>
                  <li>
                     <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定子分区模板以描述复合分区表</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C" name="GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C"></a><h3 id="VLDBG-GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C" class="sect3">创建复合哈希 -  *分区表</h3>
               <div>
                  <p>复合hash- *分区允许沿两个维度进行散列分区。</p>
                  <p>复合散列哈希分区策略具有复合哈希 -  *分区表的最大业务价值。该技术有利于沿两个维度实现分区连接。</p>
                  <p>在以下示例中，在创建复合散列哈希分区表时指定了子分区数;但是，没有指定名称。系统生成的名称分配给分区和子分区，分区和子分区存储在表的默认表空间中。</p>
                  <div class="infoboxnote" id="GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C__VIEWANDRUNARELATEDEXAMPLEONORACLELI-6582E293">
                     <p class="notep1">实时SQL：</p>
                     <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/vldbg/partitioning/composite-hash-hash-partitioning-example.html" target="_blank"><span class="italic">：创建复合哈希哈希分区表</span></a> 。
                     </p>
                  </div>
                  <div class="example" id="GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C__GUID-38047322-24F3-4BEB-81B1-B27068465524">
                     <p class="titleinexample">示例4-17创建复合散列哈希分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE departments_courses_hash（department_id NUMBER（4）NOT NULL，department_name VARCHAR2（30），course_id NUMBER（4）NOT NULL）PARASHTION by HASH（department_id）SUBPARTITION by HASH（course_id）SUBPARTITIONS 32 PARTITIONS 16;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-9ECF0F94-57BB-45F8-824F-48B320F23D9C__TOLEARNMOREABOUTHOWTOUSEASUBPARTITI-AFD0459F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="VLDBG1102"></a><div class="props_rev_3"><a id="GUID-92F34170-30CD-40E3-9899-67A2DA49429F" name="GUID-92F34170-30CD-40E3-9899-67A2DA49429F"></a><h3 id="VLDBG-GUID-92F34170-30CD-40E3-9899-67A2DA49429F" class="sect3">创建复合间隔 -  *分区表</h3>
               <div>
                  <p>interval- *复合分区的概念类似于range- *分区的概念。</p>
                  <p>但是，您扩展<code class="codeph">PARTITION BY RANGE</code>子句以包括<code class="codeph">INTERVAL</code>定义。您必须使用<code class="codeph">PARTITION</code>子句指定至少一个范围分区。范围分区键值确定范围分区的高值（称为转换点），数据库自动为该转换点之外的数据创建间隔分区。
                  </p>
                  <p>在数据库创建间隔时，将创建interval- *分区表中的间隔子分区。您只能使用子分区模板指定未来子分区的定义。</p>
                  <p>以下主题显示了不同interval- *复合分区方法的示例。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-EC3C51AF-2F56-4617-A12B-4540D5C17F33" title="您可以通过在PARTITION子句中指定多个哈希分区或使用子分区模板来创建具有多个哈希分区的区间哈希分区表。">创建复合区间哈希分区表</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-8F38C8B0-3999-4F4E-8AF2-F41C2F764F47" title="要为将来的间隔列表分区定义列表子分区，必须使用子分区模板。">创建复合区间列表分区表</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-E204E851-9B8F-4283-B7D5-88D93DE09B14" title="要为将来的区间范围分区定义范围子分区，必须使用子分区模板。">创建复合区间范围分区表</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-92F34170-30CD-40E3-9899-67A2DA49429F__GUID-A751E780-EB0C-4F06-B52C-A7EE182126C2">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                  </div>
               </div><a id="VLDBG1103"></a><div class="props_rev_3"><a id="GUID-EC3C51AF-2F56-4617-A12B-4540D5C17F33" name="GUID-EC3C51AF-2F56-4617-A12B-4540D5C17F33"></a><h4 id="VLDBG-GUID-EC3C51AF-2F56-4617-A12B-4540D5C17F33" class="sect4">创建复合区间哈希分区表</h4>
                  <div>
                     <p>您可以通过在<code class="codeph">PARTITION</code>子句中指定多个哈希分区或使用子分区模板来创建具有多个哈希分区的区间哈希分区表。
                     </p>
                     <div class="section">
                        <p>如果您不使用这些方法中的任何一种，则将来的间隔分区只会获得一个哈希子分区。</p>
                        <p>以下示例显示<code class="codeph">sales</code>表，在<code class="codeph">time_id</code>上使用每月间隔分区的间隔，以及<code class="codeph">cust_id</code>使用哈希子分区。此示例指定多个哈希分区，而不对单个哈希分区分配任何特定的表空间。
                        </p>
                        <div class="infoboxnote" id="GUID-EC3C51AF-2F56-4617-A12B-4540D5C17F33__VIEWANDRUNARELATEDEXAMPLEONORACLELI-65836DC7">
                           <p class="notep1">实时SQL：</p>
                           <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/vldbg/partitioning/composite-interval-hash-partitioning-example.html" target="_blank"><span class="italic">：创建复合区间哈希分区表</span></a> 。
                           </p>
                        </div><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售额（prod_id NUMBER（6），cust_id NUMBER，time_id DATE，channel_id CHAR（1），promo_id NUMBER（6），quantity_sold NUMBER（3），amount_sold NUMBER（10,2））PARTITION BY RANGE（time_id）INTERVAL（ NUMTOYMINTERVAL（1，'MONTH'））HASH（cust_id）SUBPARTITIONS 4的分区（分段在2000之前的值不到（TO_DATE（'01 -JAN-2000'，'dd-MON-yyyy'）））PARALLEL;</pre><p>下一个示例显示了相同的<code class="codeph">sales</code>表，在<code class="codeph">time_id</code>上使用每月间隔进行分区的间隔，再次使用<code class="codeph">cust_id</code>哈希子分区。但是，这次，各个散列分区存储在单独的表空间中。子分区模板用于为将来的哈希子分区定义表空间分配。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售额（prod_id NUMBER（6），cust_id NUMBER，time_id DATE，channel_id CHAR（1），promo_id NUMBER（6），quantity_sold NUMBER（3），amount_sold NUMBER（10,2））PARTITION BY RANGE（time_id）INTERVAL（ NUMTOYMINTERVAL（1，'MONTH'））SUBPARTITION by hash（cust_id）SUBPARTITION模板（SUBPARTITION p1 TABLESPACE ts1，SUBPARTITION p2 TABLESPACE ts2，SUBPARTITION p3 TABLESPACE ts3，SUBPARTITION P4 TABLESPACE ts4）（PAR_TION before_2000 VALUES少于（TO_DATE（'01  - JAN-2000'，'dd-MON-yyyy'）））PARALLEL;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14055"></a><a id="VLDBG1104"></a><div class="props_rev_3"><a id="GUID-8F38C8B0-3999-4F4E-8AF2-F41C2F764F47" name="GUID-8F38C8B0-3999-4F4E-8AF2-F41C2F764F47"></a><h4 id="VLDBG-GUID-8F38C8B0-3999-4F4E-8AF2-F41C2F764F47" class="sect4">创建复合区间列表分区表</h4>
                  <div>
                     <p>要为将来的间隔列表分区定义列表子分区，必须使用子分区模板。</p>
                     <div class="section">
                        <p>如果不使用子分区模板，则为每个间隔分区创建的唯一子分区是<code class="codeph">DEFAULT</code>子分区。
                        </p>
                        <p><a href="create-composite-partition-table.html#GUID-8F38C8B0-3999-4F4E-8AF2-F41C2F764F47__CHDCJDAD">示例4-18</a>显示了<code class="codeph">sales_interval_list</code>表，使用<code class="codeph">sales_date</code>上的每月间隔进行分区的时间间隔，以及<code class="codeph">channel_id</code>列表子分区。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8F38C8B0-3999-4F4E-8AF2-F41C2F764F47__CHDCJDAD">
                        <p class="titleinexample">示例4-18创建复合间隔列表分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE sales_interval_list（product_id NUMBER（6），customer_id NUMBER，channel_id CHAR（1），promo_id NUMBER（6），sales_date DATE，quantity_sold INTEGER，amount_sold NUMBER（10,2））PARTITION BY RANGE（sales_date）INTERVAL（NUMTOYMINTERVAL（1） ，'MONTH'））按列表进行子操作（channel_id）子目录模板（子目录p_catalog值（'C'），子目标p_internet值（'I'），子目标p_partners值（'P'），子目录p_direct_sales值（'S'） ，SUBPARTITION p_tele_sales VALUES（'T'））（PAR_TION before_2017 VALUES少于（TO_DATE（'01 -JAN-2017'，'dd-MON-yyyy'）））PARALLEL; SELECT TABLE_NAME，PARTITION_NAME，SUBPARTITION_NAME FROM USER_TAB_SUBPARTITIONS WHERE TABLE_NAME ='SALES_INTERVAL_LIST';</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="VLDBG14056"></a><a id="VLDBG1105"></a><div class="props_rev_3"><a id="GUID-E204E851-9B8F-4283-B7D5-88D93DE09B14" name="GUID-E204E851-9B8F-4283-B7D5-88D93DE09B14"></a><h4 id="VLDBG-GUID-E204E851-9B8F-4283-B7D5-88D93DE09B14" class="sect4">创建复合区间范围分区表</h4>
                  <div>
                     <p>要为将来的区间范围分区定义范围子分区，必须使用子分区模板。</p>
                     <div class="section">
                        <p>如果不使用子分区模板，则为每个间隔分区创建的唯一子分区是具有<code class="codeph">MAXVALUE</code>上边界的范围子分区。
                        </p>
                        <p><a href="create-composite-partition-table.html#GUID-E204E851-9B8F-4283-B7D5-88D93DE09B14__CHDIFGBB">实施例4-19</a>示出了<code class="codeph">sales</code>表中，使用关于每日间隔的时间间隔分配<code class="codeph">time_id</code> ，与由范围子分区<code class="codeph">amount_sold</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E204E851-9B8F-4283-B7D5-88D93DE09B14__CHDIFGBB">
                        <p class="titleinexample">示例4-19创建复合区间范围分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售额（prod_id NUMBER（6），cust_id NUMBER，time_id DATE，channel_id CHAR（1），promo_id NUMBER（6），quantity_sold NUMBER（3），amount_sold NUMBER（10,2））PARTITION BY RANGE（time_id）INTERVAL（ NUMTODSINTERVAL（1，'DAY'））RANGE（amount_sold）SUBPARTITION模板（SUBPARTITION p_low值小于（1000），SubPARTITION p_medium值小于（4000），SubPARTITION p_high VALUE少于（8000），SubPARTITION p_ultimate VALUE少于（最大值））（分段在2000之前的值不到（TO_DATE（'01 -JAN-2000'，'dd-MON-yyyy'）））PARALLEL;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="VLDBG1098"></a><div class="props_rev_3"><a id="GUID-795E1D0E-A298-404B-B66C-4832A63264F1" name="GUID-795E1D0E-A298-404B-B66C-4832A63264F1"></a><h3 id="VLDBG-GUID-795E1D0E-A298-404B-B66C-4832A63264F1" class="sect3">创建复合列表 -  *分区表</h3>
               <div>
                  <p>list-hash，list-list和list-range复合分区的概念类似于range-hash，range-list和range-range partitioning的概念。</p>
                  <p>但是，对于list- *复合分区，您可以指定<code class="codeph">PARTITION BY LIST</code>来定义分区策略。
                  </p>
                  <p>list- *复合分区表的列表分区类似于非复合范围分区表。此组织允许<code class="codeph">PARTITION</code>子句的可选子条款指定特定于分区段的物理和其他属性，包括表空间。如果未在分区级别覆盖，则分区将继承其基础表的属性。
                  </p>
                  <p><code class="codeph">SUBPARTITION</code>或<code class="codeph">SUBPARTITIONS</code>子句中的子分区描述类似于<code class="codeph">SUBPARTITIONS</code> *复合分区方法。
                  </p>
                  <p>以下主题显示了不同list- *复合分区方法的示例。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-E4131251-C76F-4DA0-8235-294C40F836B1" title="本主题中的示例显示如何创建复合列表 - 散列分区表。">创建复合列表 - 哈希分区表</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-7854B907-B11C-41A6-A7AC-E01D063198B6" title="本主题中的示例显示如何创建复合列表列表分区表。">创建复合列表 - 列表分区表</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-84DF5438-912C-40FD-895B-B624C57C1862" title="本主题中的示例显示如何创建复合列表范围分区表。">创建复合列表范围分区表</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-795E1D0E-A298-404B-B66C-4832A63264F1__TOLEARNMOREABOUTHOWTOUSEASUBPARTITI-AFD1687A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                        </li>
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-A87BDD8B-45E9-4910-8BE4-7747C3AE4449" title="范围哈希分区表的分区仅是逻辑结构，因为它们的数据存储在其子分区的段中。">关于创建复合范围哈希分区表</a>有关列表哈希复合分区方法的子分区定义的更多信息</p>
                        </li>
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-BE937517-A04E-45B9-A5C9-D7957B8D65F3" title="对于非复合范围分区表，范围列表复合分区表的范围分区被描述为相同。">关于创建复合范围列表分区表</a>有关列表 - 列表复合分区方法的子分区定义的更多信息</p>
                        </li>
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61" title="范围范围复合分区表的范围分区类似于非复合范围分区表。">创建复合范围范围分区表</a> ，以获取有关列表范围复合分区方法的子分区定义的更多信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="VLDBG14051"></a><a id="VLDBG1099"></a><div class="props_rev_3"><a id="GUID-E4131251-C76F-4DA0-8235-294C40F836B1" name="GUID-E4131251-C76F-4DA0-8235-294C40F836B1"></a><h4 id="VLDBG-GUID-E4131251-C76F-4DA0-8235-294C40F836B1" class="sect4">创建复合列表 - 哈希分区表</h4>
                  <div>
                     <p>本主题中的示例显示如何创建复合列表 - 散列分区表。</p>
                     <div class="section">
                        <p><a href="create-composite-partition-table.html#GUID-E4131251-C76F-4DA0-8235-294C40F836B1__CHDJFCCD">示例4-20</a>显示了一个<code class="codeph">accounts</code>表，该表是按区域划分的列表，并使用客户标识符的散列进行子分区。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E4131251-C76F-4DA0-8235-294C40F836B1__CHDJFCCD">
                        <p class="titleinexample">示例4-20创建复合列表 - 散列分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE帐户（ID NUMBER，account_number NUMBER，customer_id NUMBER，余额NUMBER，branch_id NUMBER，区域VARCHAR（2），状态VARCHAR2（1））PARTITION BY LIST（区域）SUBPARTITION by HASH（customer_id）SUBPARTITIONS 8（PARTITION p_northwest VALUES（ 'OR'，'WA'），PARTITION p_southwest VALUES（'AZ'，'UT'，'NM'），PARTITION p_northeast VALUES（'NY'，'VM'，'NJ'），PARTITION p_southeast VALUES（'FL' ，'GA'），PARTITION p_northcentral VALUES（'SD'，'WI'），PARTITION p_southcentral VALUES（'OK'，'TX'））;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="VLDBG14052"></a><a id="VLDBG1100"></a><div class="props_rev_3"><a id="GUID-7854B907-B11C-41A6-A7AC-E01D063198B6" name="GUID-7854B907-B11C-41A6-A7AC-E01D063198B6"></a><h4 id="VLDBG-GUID-7854B907-B11C-41A6-A7AC-E01D063198B6" class="sect4">创建复合列表 - 列表分区表</h4>
                  <div>
                     <p>本主题中的示例显示如何创建复合列表列表分区表。</p>
                     <div class="section">
                        <p><a href="create-composite-partition-table.html#GUID-7854B907-B11C-41A6-A7AC-E01D063198B6__CHDGDCID">示例4-21</a>显示了一个<code class="codeph">accounts</code>表，该表是按区域划分的列表，并使用按帐户状态列表进行子分区。
                        </p>
                        <div class="infoboxnote" id="GUID-7854B907-B11C-41A6-A7AC-E01D063198B6__VIEWANDRUNARELATEDEXAMPLEONORACLELI-6B564683">
                           <p class="notep1">实时SQL：</p>
                           <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/vldbg/partitioning/composite-list-list-partitioning-example.html" target="_blank"><span class="italic">：创建复合列表 - 列表分区表</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7854B907-B11C-41A6-A7AC-E01D063198B6__CHDGDCID">
                        <p class="titleinexample">示例4-21创建复合列表列表分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE帐户（ID NUMBER，account_number NUMBER，customer_id NUMBER，余额NUMBER，branch_id NUMBER，区域VARCHAR（2），状态VARCHAR2（1））PARTITION BY LIST（区域）按列表排序（状态）（PARTITION p_northwest VALUES（'OR） '，'WA'）（SUBPARTITION p_nw_bad VALUES（'B'），SUBPARTITION p_nw_average VALUES（'A'），SUBPARTITION p_nw_good VALUES（'G'）），PARTITION p_southwest VALUES（'AZ'，'UT'，'NM' ）（SUBPARTITION p_sw_bad VALUES（'B'），SUBPARTITION p_sw_average VALUES（'A'），SUBPARTITION p_sw_good VALUES（'G'）），PARTITION p_northeast VALUES（'NY'，'VM'，'NJ'）（SUBPARTITION p_ne_bad VALUES （'B'），SUBPARTITION p_ne_average VALUES（'A'），SUBPARTITION p_ne_good VALUES（'G'）），PARTITION p_southeast VALUES（'FL'，'GA'）（SUBPARTITION p_se_bad VALUES（'B'），SUBPARTITION p_se_average VALUES （'A'），SUBPARTITION p_se_good值（'G'）），PARTITION p_northcentral VALUES（'SD'，'WI'）（SUBPARTITION p_nc_bad VALUES（'B'），SUBPARTITION p_nc_average VALUES（'A'） ，SUBPARTITION p_nc_good值（'G'）），PARTITION p_southcentral VALUES（'OK'，'TX'）（SUBPARTITION p_sc_bad VALUES（'B'），SUBPARTITION p_sc_average VALUES（'A'），SUBPARTITION p_sc_good VALUES（'G'） ））;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="VLDBG14053"></a><a id="VLDBG1101"></a><div class="props_rev_3"><a id="GUID-84DF5438-912C-40FD-895B-B624C57C1862" name="GUID-84DF5438-912C-40FD-895B-B624C57C1862"></a><h4 id="VLDBG-GUID-84DF5438-912C-40FD-895B-B624C57C1862" class="sect4">创建复合列表范围分区表</h4>
                  <div>
                     <p>本主题中的示例显示如何创建复合列表范围分区表。</p>
                     <div class="section">
                        <p><a href="create-composite-partition-table.html#GUID-84DF5438-912C-40FD-895B-B624C57C1862__CHDEAECF">示例4-22</a>显示了一个<code class="codeph">accounts</code>表，该表是按区域划分的列表，并使用按帐户余额的范围进行子分区，并启用行移动。不同列表分区的子分区可以指定不同的范围。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-84DF5438-912C-40FD-895B-B624C57C1862__CHDEAECF">
                        <p class="titleinexample">示例4-22创建复合列表范围分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE帐户（ID NUMBER，account_number NUMBER，customer_id NUMBER，余额NUMBER，branch_id NUMBER，区域VARCHAR（2），状态VARCHAR2（1））按列表划分（区域）按范围排序（余额）（PARTITION p_northwest VALUES（'OR） '，'WA'）（SUBPARTITION p_nw_low值小于（1000），SUBPARTITION p_nw_average值小于（10000），SubPARTITION p_nw_high值小于（100000），SubPARTITION p_nw_extraordinary VALUES少于（MAXVALUE）），PARTITION p_southwest VALUES（'AZ '，'UT'，'NM'）（SUBPARTITION p_sw_low值小于（1000），SUBPARTITION p_sw_average值小于（10000），SubPARTITION p_sw_high值小于（100000），SubPARTITION p_sw_extraordinary值小于（MAXVALUE）），PARTITION p_northeast VALUES（'NY'，'VM'，'NJ'）（SUBPARTITION p_ne_low VALUE少于（1000），SubPARTITION p_ne_average VALUE少于（10000），SubPARTITION p_ne_high值低于（100000），SubPARTITION p_ne_extraordinary VALUES少于（MAX） VALUE）），PARTITION p_southeast VALUES（'FL'，'GA'）（SUBPARTITION p_se_low VALUE少于（1000），SubPARTITION p_se_average VALUE少于（10000），SubPARTITION p_se_high值少于（100000），SubPARTITION p_se_extraordinary VALUES少于（ MAXVALUE）），PARTITION p_northcentral VALUES（'SD'，'WI'）（SUBPARTITION p_nc_low值小于（1000），SUBPARTITION p_nc_average值小于（10000），SUBPARTITION p_nc_high值小于（100000），SubPARTITION p_nc_extraordinary VALUES少于（ MAXVALUE）），PARTITION p_southcentral VALUES（'OK'，'TX'）（SUBPARTITION p_sc_low值小于（1000），SUBPARTITION p_sc_average值小于（10000），SubPARTITION p_sc_high值小于（100000），SubPARTITION p_sc_extraordinary VALUES（仅）（ MAXVALUE）））启用行程;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-BFBFC6FA-65FD-4FFA-A6F3-47FB4ACEE60C" name="GUID-BFBFC6FA-65FD-4FFA-A6F3-47FB4ACEE60C"></a><h3 id="VLDBG-GUID-BFBFC6FA-65FD-4FFA-A6F3-47FB4ACEE60C" class="sect3">创建复合范围 -  *分区表</h3>
               <div>
                  <p>本主题介绍了创建复合范围*分区表的方法。</p>
                  <p>以下主题显示了不同range- *复合分区方法的示例。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-A87BDD8B-45E9-4910-8BE4-7747C3AE4449" title="范围哈希分区表的分区仅是逻辑结构，因为它们的数据存储在其子分区的段中。">关于创建复合范围哈希分区表</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-BE937517-A04E-45B9-A5C9-D7957B8D65F3" title="对于非复合范围分区表，范围列表复合分区表的范围分区被描述为相同。">关于创建复合范围列表分区表</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61" title="范围范围复合分区表的范围分区类似于非复合范围分区表。">创建复合范围范围分区表</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BFBFC6FA-65FD-4FFA-A6F3-47FB4ACEE60C__TOLEARNMOREABOUTHOWTOUSEASUBPARTITI-AFD25FB4">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                  </div>
               </div><a id="VLDBG1095"></a><div class="props_rev_3"><a id="GUID-A87BDD8B-45E9-4910-8BE4-7747C3AE4449" name="GUID-A87BDD8B-45E9-4910-8BE4-7747C3AE4449"></a><h4 id="VLDBG-GUID-A87BDD8B-45E9-4910-8BE4-7747C3AE4449" class="sect4">关于创建复合范围哈希分区表</h4>
                  <div>
                     <p>范围哈希分区表的分区仅是逻辑结构，因为它们的数据存储在其子分区的段中。</p>
                     <p>与分区一样，这些子分区共享相同的逻辑属性。与范围分区表中的范围分区不同，子分区不能具有与拥有分区不同的物理属性，尽管它们不需要驻留在同一个表空间中。</p>
                     <p>讨论了以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-A596B6B1-62C7-4701-A872-BDC5632CEE43" title="本主题中的示例显示如何使用相同的表空间创建复合范围哈希分区表。">使用相同的表空间创建复合范围哈希分区表</a></p>
                        </li>
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-143C7E5F-11D4-4E61-9024-4BB40FF85A14" title="本主题中的示例显示如何使用不同的表空间创建复合范围哈希分区表。">使用不同的表空间创建复合范围哈希分区表</a></p>
                        </li>
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-C59B7CCE-B946-4545-B234-1C54CBAC323D" title="本主题中的示例显示如何跨多个表空间创建本地索引。">跨多个表空间创建本地索引</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A87BDD8B-45E9-4910-8BE4-7747C3AE4449__TOLEARNHOWUSINGASUBPARTITIONTEMPLAT-AFD34188">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                     </div>
                  </div><a id="VLDBG14048"></a><div class="props_rev_3"><a id="GUID-A596B6B1-62C7-4701-A872-BDC5632CEE43" name="GUID-A596B6B1-62C7-4701-A872-BDC5632CEE43"></a><h5 id="VLDBG-GUID-A596B6B1-62C7-4701-A872-BDC5632CEE43" class="sect5">使用相同的表空间创建复合范围哈希分区表</h5>
                     <div>
                        <p>本主题中的示例显示如何使用相同的表空间创建复合范围哈希分区表。</p>
                        <div class="section">
                           <p><a href="create-composite-partition-table.html#GUID-A596B6B1-62C7-4701-A872-BDC5632CEE43__CHDGECFB">例4-23中</a>的语句创建了一个范围哈希分区表。创建四个范围分区，每个分区包含八个子分区。由于子分区未命名，因此会分配系统生成的名称，但<code class="codeph">STORE IN</code>子句将它们分配到4个指定的表空间（ <code class="codeph">ts1</code> ， <code class="codeph">ts2</code> ， <code class="codeph">ts3</code> ， <code class="codeph">ts4</code> ）。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-A596B6B1-62C7-4701-A872-BDC5632CEE43__CHDGECFB">
                           <p class="titleinexample">示例4-23使用一个STORE IN子句创建复合范围 - 散列分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售（prod_id NUMBER（6），cust_id NUMBER，time_id DATE，channel_id CHAR（1），promo_id NUMBER（6），quantity_sold NUMBER（3），amount_sold NUMBER（10,2））PARTITION BY RANGE（time_id）SUBPARTITION BY HASH（cust_id）SUBPARTITIONS 8 STORE IN（ts1，ts2，ts3，ts4）（PARTITION sales_q1_2006的价值不到（截止日期（'01-APR-2006'，'dd-MON-yyyy'）），PARTITION sales_q2_2006价值低于（ TO_DATE（'01 -JUL-2006'，'dd-MON-yyyy'）），PARTITION sales_q3_2006价值低于（截止日期（'01 -OCT-2006'，'dd-MON-yyyy'）），PARTITION sales_q4_2006 VALUES LESS （截止日期（'01 -JAN-2007'，'dd-MON-yyyy'）））;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-143C7E5F-11D4-4E61-9024-4BB40FF85A14" name="GUID-143C7E5F-11D4-4E61-9024-4BB40FF85A14"></a><h5 id="VLDBG-GUID-143C7E5F-11D4-4E61-9024-4BB40FF85A14" class="sect5">使用不同的表空间创建复合范围哈希分区表</h5>
                     <div>
                        <p>本主题中的示例显示如何使用不同的表空间创建复合范围哈希分区表。</p>
                        <div class="section">
                           <p>为范围分区指定的属性适用于该分区的所有子分区。您可以为每个范围分区指定不同的属性，如果应该分布该分区的子分区的表空间列表与其他分区的子表空间列表不同，则可以在分区级别指定<code class="codeph">STORE IN</code>子句。以下示例说明了这一点。
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees_range_hash（department_id NUMBER（4）NOT NULL，last_name VARCHAR2（25），job_id VARCHAR2（10））PARTITION BY RANGE（department_id）SUBPARTITION BY HASH（last_name）SUBPARTITIONS 8 STORE IN（ts1，ts3，ts5，ts7）（分区p1值小于（1000），分区p2值小于（2000）存储（ts2，ts4，ts6，ts8），分区p3值小于（MAXVALUE）（子站点p3_s1表格ts4，子站点p3_s2表格ts5））;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-C59B7CCE-B946-4545-B234-1C54CBAC323D" name="GUID-C59B7CCE-B946-4545-B234-1C54CBAC323D"></a><h5 id="VLDBG-GUID-C59B7CCE-B946-4545-B234-1C54CBAC323D" class="sect5">跨多个表空间创建本地索引</h5>
                     <div>
                        <p>本主题中的示例显示如何跨多个表空间创建本地索引。</p>
                        <div class="section">
                           <p>以下语句是在表上创建本地索引的示例，其中索引段分布在表空间<code class="codeph">ts7</code> ， <code class="codeph">ts8</code>和<code class="codeph">ts9</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX employee_ix ON employees_range_hash（department_id）LOCAL STORE IN（ts7，ts8，ts9）;</pre><p>此本地索引与基表进行了均分，因此它包含与基表一样多的分区。每个索引分区包含与对应的基表分区一样多的子分区。基表的给定子分区中的行的索引条目存储在索引的相应子分区中。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="VLDBG1096"></a><div class="props_rev_3"><a id="GUID-BE937517-A04E-45B9-A5C9-D7957B8D65F3" name="GUID-BE937517-A04E-45B9-A5C9-D7957B8D65F3"></a><h4 id="VLDBG-GUID-BE937517-A04E-45B9-A5C9-D7957B8D65F3" class="sect4">关于创建复合范围列表分区表</h4>
                  <div>
                     <p>对于非复合范围分区表，范围列表复合分区表的范围分区被描述为相同。</p>
                     <p>此组织允许<code class="codeph">PARTITION</code>子句的可选子条款指定特定于分区段的物理和其他属性，包括表空间。如果未在分区级别覆盖，则分区将继承其基础表的属性。
                     </p>
                     <p><code class="codeph">SUBPARTITION</code>子句中的列表子分区描述描述为非复合列表分区，但可以指定的唯一物理属性是表空间（可选）。子分区从分区描述继承所有其他物理属性。
                     </p>
                     <p>讨论了以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-50581F67-E90A-49E4-A445-2332910D8608" title="本主题中的示例显示如何创建复合范围列表分区表。">创建复合范围列表分区表</a></p>
                        </li>
                        <li>
                           <p><a href="create-composite-partition-table.html#GUID-9028BE6A-9CC3-4625-83D6-7A6233477176" title="本主题中的示例显示如何在指定表空间时创建复合范围列表分区表。">创建复合范围列表分区表指定表空间</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-BE937517-A04E-45B9-A5C9-D7957B8D65F3__GUID-F85C82F0-1A72-412C-A50F-82BE92771665">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                     </div>
                  </div><a id="VLDBG14049"></a><div class="props_rev_3"><a id="GUID-50581F67-E90A-49E4-A445-2332910D8608" name="GUID-50581F67-E90A-49E4-A445-2332910D8608"></a><h5 id="VLDBG-GUID-50581F67-E90A-49E4-A445-2332910D8608" class="sect5">创建复合范围列表分区表</h5>
                     <div>
                        <p>本主题中的示例显示如何创建复合范围列表分区表。</p>
                        <div class="section">
                           <p><a href="create-composite-partition-table.html#GUID-50581F67-E90A-49E4-A445-2332910D8608__CHDFIFJG">示例4-24</a>说明了如何使用范围列表分区。该示例按季度和每季度跟踪产品的销售数据，按指定的状态对其进行分组。
                           </p>
                           <p>通过检查行的分区列的值是否落在特定分区范围内，将行映射到分区。然后，通过标识其描述符值列表包含与子分区列值匹配的值的子分区，将该行映射到该分区内的子分区。例如，以下列表描述了如何插入一些示例行。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>（10,4532130，'23-Jan-1999'，8934.10，'WA'）映射到子分区<code class="codeph">q1_1999_northwest</code></p>
                              </li>
                              <li>
                                 <p>（20,5671621，'15-May-1999'，49021.21，'OR'）映射到子分区<code class="codeph">q2_1999_northwest</code></p>
                              </li>
                              <li>
                                 <p>（30,9977612，'07 -Sep-1999'，30987.90，'FL'）映射到子分区<code class="codeph">q3_1999_southeast</code></p>
                              </li>
                              <li>
                                 <p>（40,9977612，'29 -Nov-1999'，67891.45，'TX'）映射到子分区<code class="codeph">q4_1999_southcentral</code></p>
                              </li>
                              <li>
                                 <p>（40,4532130，'2000年1月5日'，897231.55，'TX'）没有映射到表中的任何分区并显示错误</p>
                              </li>
                              <li>
                                 <p>（50,5671621，'17 -Dec-1999'，76123.35，'CA'）不映射到表中的任何子分区并显示错误</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-50581F67-E90A-49E4-A445-2332910D8608__VIEWANDRUNARELATEDEXAMPLEONORACLELI-2CE23B0B">
                              <p class="notep1">实时SQL：</p>
                              <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/vldbg/partitioning/composite-range-list-partitioning-example.html" target="_blank"><span class="italic">：创建复合范围列表分区表</span></a> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-50581F67-E90A-49E4-A445-2332910D8608__CHDFIFJG">
                           <p class="titleinexample">示例4-24创建复合范围列表分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE quarterly_regional_sales（deptno number，item_no varchar2（20），txn_date date，txn_amount number，state varchar2（2））TABLESPACE ts4 PARTITION BY RANGE（txn_date）SUBPARTITION BY LIST（state）（PARTITION q1_1999 VALUE不到（TO_DATE（'1） -APR-1999'，'DD-MON-YYYY'））（SUBPARTITION q1_1999_northwest VALUES（'OR'，'WA'），SUBPARTITION q1_1999_southwest VALUES（'AZ'，'UT'，'NM'），SUBPARTITION q1_1999_northeast VALUES（ 'NY'，'VM'，'NJ'），SUBPARTITION q1_1999_southeast VALUES（'FL'，'GA'），SUBPARTITION q1_1999_northcentral VALUES（'SD'，'WI'），SUBPARTITION q1_1999_southcentral VALUES（'OK'，'TX' ）），PARTITION q2_1999少于（1999年7月1日'，'DD-MON-YYYY'））（提交q2_1999_northwest VALUES（'OR'，'WA'），SUBPARTITION q2_1999_southwest VALUES（'AZ'， 'UT'，'NM'），SUBPARTITION q2_1999_northeast VALUES（'NY'，'VM'，'NJ'），SUBPARTITION q2_1999_southeast VALUES（'FL'，'GA'），SUBPARTITION q2_1999_northcentral VALUES（'SD'，'WI'） ），SUBPARTITION q2_1999_southcentral VALUES （'OK'，'TX'）），PARTITION q3_1999价值低于（7月1日（'1-OCT-1999'，'DD-MON-YYYY'））（提交q3_1999_northwest VALUES（'OR'，'WA'）， SUBPARTITION q3_1999_southwest VALUES（'AZ'，'UT'，'NM'），SUBPARTITION q3_1999_northeast VALUES（'NY'，'VM'，'NJ'），SUBPARTITION q3_1999_southeast VALUES（'FL'，'GA'），SUBPARTITION q3_1999_northcentral VALUES （'SD'，'WI'），SUBPARTITION q3_1999_southcentral VALUES（'OK'，'TX'）），PARTITION q4_1999价值低于（4月1日（'1-JAN-2000'，'DD-MON-YYYY'））（ SUBPARTITION q4_1999_northwest VALUES（'OR'，'WA'），SUBPARTITION q4_1999_southwest VALUES（'AZ'，'UT'，'NM'），SUBPARTITION q4_1999_northeast VALUES（'NY'，'VM'，'NJ'），SUBPARTITION q4_1999_southeast VALUES （'FL'，'GA'），SUBPARTITION q4_1999_northcentral VALUES（'SD'，'WI'），SUBPARTITION q4_1999_southcentral VALUES（'OK'，'TX'）））;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-9028BE6A-9CC3-4625-83D6-7A6233477176" name="GUID-9028BE6A-9CC3-4625-83D6-7A6233477176"></a><h5 id="VLDBG-GUID-9028BE6A-9CC3-4625-83D6-7A6233477176" class="sect5">创建复合范围列表分区表指定表空间</h5>
                     <div>
                        <p>本主题中的示例显示如何在指定表空间时创建复合范围列表分区表。</p>
                        <div class="section">
                           <p>范围列表分区表的分区仅是逻辑结构，因为它们的数据存储在其子分区的段中。列表子分区与列表分区具有相同的特征。您可以指定默认子分区，就像为列表分区指定默认分区一样。</p>
                           <p>以下示例创建一个表，指定分区和子分区级别的表空间。每个分区中的子分区数不尽相同，并指定了默认子分区。此示例导致以下子分区描述：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>所有子分区都从表空间级别默认值继承其表空间以外的物理属性。这是因为为分区或子分区指定的唯一物理属性是表空间。没有指定表级物理属性，因此表空间级别默认值在所有级别都是继承的。</p>
                              </li>
                              <li>
                                 <p>分区<code class="codeph">q1_1999</code>的前4 <code class="codeph">q1_1999</code>分区都包含在<code class="codeph">tbs_1</code> ，除了子分区<code class="codeph">q1_others</code> ，它存储在<code class="codeph">tbs_4</code>并包含所有不映射到任何其他分区的行。
                                 </p>
                              </li>
                              <li>
                                 <p>分区<code class="codeph">q2_1999</code>的6 <code class="codeph">q2_1999</code>分区都存储在<code class="codeph">tbs_2</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>分区<code class="codeph">q3_1999</code>的前2 <code class="codeph">q3_1999</code>分区都包含在<code class="codeph">tbs_3</code> ，除了子分区<code class="codeph">q3_others</code> ，它存储在<code class="codeph">tbs_4</code>并包含所有不映射到任何其他分区的行。
                                 </p>
                              </li>
                              <li>
                                 <p>分区<code class="codeph">q4_1999</code>没有子分区描述。这导致创建一个默认子分区并将其存储在<code class="codeph">tbs_4</code> 。子分区名称是以<code class="codeph">SYS_SUBP</code> <span class="italic"><code class="codeph">n</code></span>形式生成的系统。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE TABLE sample_regional_sales（deptno number，item_no varchar2（20），txn_date date，txn_amount number，state varchar2（2））PAR BY BY BY（（（（（（（（（（（ -1999'，'DD-MON-YYYY'））TABLESPACE tbs_1（SUBPARTITION q1_1999_northwest VALUES（'OR'，'WA'），SUBPARTITION q1_1999_southwest VALUES（'AZ'，'UT'，'NM'），SUBPARTITION q1_1999_northeast VALUES（ 'NY'，'VM'，'NJ'），SUBPARTITION q1_1999_southeast VALUES（'FL'，'GA'），SUBPARTITION q1_others VALUES（DEFAULT）TABLESPACE tbs_4），PARTITION q2_1999 VALUES少于（1999年7月1日） '，'DD-MON-YYYY'））TABLESPACE tbs_2（SUBPARTITION q2_1999_northwest VALUES（'OR'，'WA'），SUBPARTITION q2_1999_southwest VALUES（'AZ'，'UT'，'NM'），SUBPARTITION q2_1999_northeast VALUES（'NY '，''VM'，'NJ'），SUBPARTITION q2_1999_southeast VALUES（'FL'，'GA'），SUBPARTITION q2_1999_northcentral VALUES（'SD'，'WI'），SUBPARTITION q2_1999_southcentral VALUES（'OK'，'TX'）） ，分区q3_1999 V.不到（少于（'1-OCT-1999'，'DD-MON-YYYY'））TABLESPACE tbs_3（SUBPARTITION q3_1999_northwest VALUES（'OR'，'WA'），SUBPARTITION q3_1999_southwest VALUES（'AZ'，'UT'） ，'NM'），SUBPARTITION q3_others VALUES（DEFAULT）TABLESPACE tbs_4），PARTITION q4_1999价值低于（4月1日（'1-JAN-2000'，'DD-MON-YYYY'））TABLESPACE tbs_4）;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="VLDBG14050"></a><a id="VLDBG1097"></a><div class="props_rev_3"><a id="GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61" name="GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61"></a><h4 id="VLDBG-GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61" class="sect4">创建复合范围范围分区表</h4>
                  <div>
                     <p>范围范围复合分区表的范围分区类似于非复合范围分区表。</p>
                     <div class="section">
                        <p>此组织允许<code class="codeph">PARTITION</code>子句的可选子条款指定特定于分区段的物理和其他属性，包括表空间。如果未在分区级别覆盖，则分区将继承其基础表的属性。
                        </p>
                        <p><code class="codeph">SUBPARTITION</code>子句中的范围子分区描述类似于非复合范围分区，但可以指定的唯一物理属性是可选表空间。子分区从分区描述继承所有其他物理属性。
                        </p>
                        <p>以下示例说明了如何使用范围范围分区。该示例跟踪货件。与客户签订的服务水平协议规定，每个订单在下订单后的日历月内交付。确定了以下类型的订单：</p>
                        <p>通过检查行的分区列的值是否落在特定分区范围内，将行映射到分区。然后通过识别子分区列的值是否落在特定范围内，将该行映射到该分区内的子分区。例如，订货日期为2006年9月且交货日期为2006年10月28日的<code class="codeph">p06_oct_a</code>属于分区<code class="codeph">p06_oct_a</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>E（EARLY）：在下单后的下个月中旬之前交付的订单。这些订单可能超出客户的预期。</p>
                           </li>
                           <li>
                              <p>A（已批准）：订单下达后的日历月内交付的订单（但不是早期订单）。</p>
                           </li>
                           <li>
                              <p>L（LATE）：仅在下订单后的第二个日历月开始交付的订单。</p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">CREATE TABLE出货（order_id NUMBER NOT NULL，order_date DATE NOT NULL，delivery_date DATE NOT NULL，customer_id NUMBER NOT NULL，sales_amount NUMBER NOT NULL）PARTITION BY RANGE（order_date）SUBPARTITION BY RANGE（delivery_date）（PARTITION p_2006_jul VALUES少于（TO_DATE（ '01 -AUG-2006'，'dd-MON-yyyy'））（SUBPARTITION p06_jul_e价值低于（2006年6月15日'，'d--MON-yyyy'）），subPARTITION p06_jul_a价值低于（ TO_DATE（'01 -SEP-2006'，'dd-MON-yyyy'）），SUBPARTITION p06_jul_l VALUE少于（MAXVALUE）），PARTITION p_2006_aug值少于（TO_DATE（'01 -SEP-2006'，'dd-MON） -yyyy'））（SUBPARTITION p06_aug_e的价值不到（截止日期（'15 -SEP-2006'，'dd-MON-yyyy'）），SUBPARTITION p06_aug_a的价值不超过（'01 -OCT-2006'，'dd） -MON-yyyy'）），SUBPARTITION p06_aug_l值小于（MAXVALUE）），PARTITION p_2006_sep值不到（TO_DATE（'01 -OCT-2006'，'dd-MON-yyyy'））（SUBPARTITION p06_sep_e VALUE少于（ TO_DATE（'15 -OCT-2006'，'dd-MON-yyyy'）），SUBPAR TITION p06_sep_a的价值不到（截止日期（' -  NOV-2006'，'dd-MON-yyyy'）），SUBPARTITION p06_sep_l值不超过（MAXVALUE）），PARTITION p_2006_oct的价值不到（截止日期（'= _NOV-2006） '，'dd-MON-yyyy'））（SUBPARTITION p06_oct_e的价值不到（截止日期为（'15 -NOV-2006'，'dd-MON-yyyy'）），SUBPARTITION p06_oct_a的价值不到（7月12日） -2006'，'dd-MON-yyyy'）），SUBPARTITION p06_oct_l值小于（MAXVALUE）），PARTITION p_2006_nov值不到（TO_DATE（'01 -DEC-2006'，'dd-MON-yyyy'））（ SUBPARTITION p06_nov_e的价值不到（截止日期为（'15 -DEC-2006'，'dd-MON-yyyy'）），SUBPARTITION p06_nov_a的价值不到（截止日期为（'01 -JAN-2007'，'dd-MON-yyyy'） ），SUBPARTITION p06_nov_l值小于（MAXVALUE）），PARTITION p_2006_dec值小于（TO_DATE（'01 -JAN-2007'，'dd-MON-yyyy'））（SUBPARTITION p06_dec_e值小于（_D-15 -JAN） -2007'，'dd-MON-yyyy'）），SUBPARTITION p06_dec_a值不到（截止日期（'01-FEB-2007'，'dd-MON-yyyy'）），SUBPARTITION p06_dec_l VALUE少于TH AN（MAXVALUE）））;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-C1FA4836-206B-40E2-AEB9-05D4A85A6B61__GUID-5040BD31-1B3D-4180-826D-88DEA656B626">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="create-composite-partition-table.html#GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" title="您可以使用子分区模板在复合分区表中创建子分区。">指定用于描述复合分区表</a>的子分区模板，以了解如何使用子分区模板简化复合分区表的规范</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="VLDBG1106"></a><div class="props_rev_3"><a id="GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" name="GUID-03D5C9BE-54AE-4156-B462-90E41757AE93"></a><h3 id="VLDBG-GUID-03D5C9BE-54AE-4156-B462-90E41757AE93" class="sect3">指定子分区模板以描述复合分区表</h3>
               <div>
                  <p>您可以使用子分区模板在复合分区表中创建子分区。</p>
                  <p>子分区模板通过不要求为表中的每个分区指定子分区描述符来简化子分区的规范。相反，您只在模板中描述一次子分区，然后将该子分区模板应用于表中的每个分区。对于interval- *复合分区表，子分区模板是定义间隔分区的子分区的唯一方法。</p>
                  <p>只要没有为分区指定子分区描述符，就会使用子分区模板。如果指定了子分区描述符，则使用它来代替该分区的子分区模板。如果未指定子分区模板，并且没有为分区提供子分区描述符，则会创建单个默认子分区。</p>
                  <p>讨论了以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-9292A7DD-1EA0-4838-B8F3-D3233FFCDABD" title="对于range-hash，interval-hash和list-hash分区表，子分区模板可以详细描述子分区，或者它只能指定哈希子分区的数量。">为* -Hash分区表指定子分区模板</a></p>
                     </li>
                     <li>
                        <p><a href="create-composite-partition-table.html#GUID-870510CA-5AF0-4E8F-8864-730819A0EB4A" title="对于-list分区表，子分区模板可以详细描述子分区。">为* -List分区表指定子分区模板</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG14057"></a><a id="VLDBG1107"></a><div class="props_rev_3"><a id="GUID-9292A7DD-1EA0-4838-B8F3-D3233FFCDABD" name="GUID-9292A7DD-1EA0-4838-B8F3-D3233FFCDABD"></a><h4 id="VLDBG-GUID-9292A7DD-1EA0-4838-B8F3-D3233FFCDABD" class="sect4">为* -Hash分区表指定子分区模板</h4>
                  <div>
                     <p>对于range-hash，interval-hash和list-hash分区表，子分区模板可以详细描述子分区，或者它只能指定哈希子分区的数量。</p>
                     <div class="section">
                        <p><a href="create-composite-partition-table.html#GUID-9292A7DD-1EA0-4838-B8F3-D3233FFCDABD__CHDCGBAB">示例4-25</a>使用子分区模板创建范围哈希分区表，并显示子分区名称和表空间。
                        </p>
                        <p>该示例生成一个具有以下描述的表。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>每个分区都有四个子分区，如子分区模板中所述。</p>
                           </li>
                           <li>
                              <p>每个子分区都指定了一个表空间。如果为子分区模板中的一个子分区指定了表空间，则必须为所有子分区指定一个表空间。</p>
                           </li>
                           <li>
                              <p>除非使用interval- * subpartitioning，否则子分区的名称是通过将分区名称与表单中的子分区名称连接而生成的：</p>
                              <p><span class="italic">分区名称</span> _ <span class="italic">子分区名称</span></p>
                              <p>对于interval- *子分区，子分区名称是以下列形式系统生成的：</p>
                              <p><code class="codeph">SYS_SUBP</code> <span class="italic"><code class="codeph">n</code></span></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9292A7DD-1EA0-4838-B8F3-D3233FFCDABD__CHDCGBAB">
                        <p class="titleinexample">示例4-25使用子分区模板创建范围哈希分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees_sub_template（department_id NUMBER（4）NOT NULL，last_name VARCHAR2（25），job_id VARCHAR2（10））PARTITION BY RANGE（department_id）SUBPARTITION by HASH（last_name）SUBPARTITION模板（SubPARTITION a TABLESPACE ts1，SUBPARTITION b TABLESPACE ts2，SUBPARTITION c TABLESPACE ts3，SUBPARTITION d TABLESPACE ts4）（分区p1值小于（1000），分区p2值小于（2000），分区p3值小于（MAXVALUE））; SQL&gt; SELECT TABLESPACE_NAME，PARTITION_NAME，SUBPARTITION_NAME 2 FROM DBA_TAB_SUBPARTITIONS WHERE TABLE_NAME ='EMPLOYEEES_SUB_TEMPLATE'3 ORDER BY TABLESPACE_NAME; TABLESPACE_NAME PARTITION_NAME SUBPARTITION_NAME --------------- --------------- ----------------- -  TS1 P1 P1_A TS1 P2 P2_A TS1 P3 P3_A TS2 P1 P1_B TS2 P2 P2_B TS2 P3 P3_B TS3 P1 P1_C TS3 P2 P2_C TS3 P3 P3_C TS4 P1 P1_D TS4 P2 P2_D TS4 P3 P3_D选择12行。</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="VLDBG14058"></a><a id="VLDBG1108"></a><div class="props_rev_3"><a id="GUID-870510CA-5AF0-4E8F-8864-730819A0EB4A" name="GUID-870510CA-5AF0-4E8F-8864-730819A0EB4A"></a><h4 id="VLDBG-GUID-870510CA-5AF0-4E8F-8864-730819A0EB4A" class="sect4">为* -List分区表指定子分区模板</h4>
                  <div>
                     <p>对于-list分区表，子分区模板可以详细描述子分区。</p>
                     <div class="section">
                        <p><a href="create-composite-partition-table.html#GUID-870510CA-5AF0-4E8F-8864-730819A0EB4A__CHDDADIE">示例4-26</a> ，对于范围列表分区表，说明了如何使用子分区模板来帮助您跨表空间条带化数据。在此示例中，将创建一个表，其中表子分区是垂直条带化的，这意味着每个分区的子分区<span class="italic">n</span>位于同一个表空间中。
                        </p>
                        <p>如果在分区级别指定了表空间（例如， <code class="codeph">tbs_1</code>用于分区<code class="codeph">q1_1999</code> ， <code class="codeph">tbs_2</code>用于分区<code class="codeph">q2_1999</code> ， <code class="codeph">tbs_3</code>用于分区<code class="codeph">q3_1999</code> ， <code class="codeph">tbs_4</code>用于分区<code class="codeph">q4_1999</code> ）而不是在子分区模板中，则表格将是水平条带化的。所有子分区都将位于拥有分区的表空间中。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-870510CA-5AF0-4E8F-8864-730819A0EB4A__CHDDADIE">
                        <p class="titleinexample">示例4-26使用子分区模板创建范围列表分区表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE stripe_regional_sales（deptno number，item_no varchar2（20），txn_date date，txn_amount number，state varchar2（2））PARTITION BY RANGE（txn_date）按列表排序（状态）SUBPARTITION模板（SUBPARTITION西北VALUES（'OR'，'WA） '）TABLESPACE tbs_1，SUBPARTITION西南VALUES（'AZ'，'UT'，'NM'）TABLESPACE tbs_2，SUBPARTITION东北值（'NY'，'VM'，'NJ'）TABLESPACE tbs_3，SUBPARTITION东南值（'FL' ，'GA'）TABLESPACE tbs_4，SUBPARTITION中西部VALUES（'SD'，'WI'）TABLESPACE tbs_5，SUBPARTITION南方值（'AL'，'AK'）TABLESPACE tbs_6，SUBPARTITION其他值（默认）TABLESPACE tbs_7）（PARTITION q1_1999价值低于（截止日期（'01-APR-1999'，'DD-MON-YYYY'）），分数q2_1999价值低于（截止日期（'01 -JUL-1999'，'DD-MON-YYYY'）），分数q3_1999价值低于（截止日期（'01 -OCT-1999'，'DD-MON-YYYY'）），分区q4_1999价值低于（4月1日（'1-JAN-2000'，'DD-MON-YYYY'） ））;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05683.sql-and-plsql-programming-in-global-environment.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>全局环境中的SQL和PL / SQL编程</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Globalization Support Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Globalization Support Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-globalization-support-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:55:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96349-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-globalization-development-kit.html" title="Previous" type="text/html"></link>
      <link rel="next" href="OCI-programming-in-global-environment.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Globalization Support Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NLSPG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-globalization-development-kit.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="OCI-programming-in-global-environment.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库全球化支持指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">全局环境中的SQL和PL / SQL编程</li>
            </ol>
            <a id="GUID-B16ADD64-24AC-46FC-B96F-D15B28C70C1D" name="GUID-B16ADD64-24AC-46FC-B96F-D15B28C70C1D"></a><a id="NLSPG009"></a>
            
            <h2 id="NLSPG-GUID-B16ADD64-24AC-46FC-B96F-D15B28C70C1D" class="sect2"><span class="enumeration_chapter">9</span>全局环境中的SQL和PL / SQL编程</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章包含对全球化支持环境中的SQL编程有用的信息。本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-BB47294E-98E2-4193-85F8-4475401F95C8">具有可选NLS参数的区域设置相关SQL函数</a></p>
                  </li>
                  <li>
                     <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC">其他与语言环境相关的SQL函数</a></p>
                  </li>
                  <li>
                     <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F">全局环境中SQL和PL / SQL编程的其他主题</a></p>
                  </li>
               </ul>
            </div><a id="NLSPG429"></a><div class="props_rev_3"><a id="GUID-BB47294E-98E2-4193-85F8-4475401F95C8" name="GUID-BB47294E-98E2-4193-85F8-4475401F95C8"></a><h3 id="NLSPG-GUID-BB47294E-98E2-4193-85F8-4475401F95C8" class="sect3"><span class="enumeration_section">9.1</span>具有可选NLS参数的与语言环境相关的SQL函数</h3>
               <div>
                  <p>可以为其行为取决于全球化支持约定的所有SQL函数指定NLS参数。这些功能是：</p><pre class="pre codeblock"><code>TO_CHAR TO_DATE TO_NUMBER NLS_UPPER NLS_LOWER NLS_INITCAP NLSSORT</code></pre><p>明确指定这些函数的可选NLS参数使得能够独立于会话的NLS参数来评估函数。对于包含数字和日期作为字符串文字的SQL语句，此功能非常重要。</p>
                  <p>例如，如果为日期指定的语言是<code class="codeph">AMERICAN</code>则会正确评估以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees WHERE hire_date&gt; '01 -JAN-2005';</pre><p>通过使用类似于以下的语句，可以使此类查询独立于当前日期语言：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees WHERE hire_date&gt; TO_DATE（'01 -JAN-2005'，'DD-MON-YYYY'，'NLS_DATE_LANGUAGE = AMERICAN'）;</pre><p>通过这种方式，可以在必要时定义独立于会话语言的SQL语句。当字符串文字出现在视图， <code class="codeph">CHECK</code>约束或触发器中的SQL语句中时，此类语句是必需的。
                  </p>
                  <div class="infoboxnote" id="GUID-BB47294E-98E2-4193-85F8-4475401F95C8__GUID-187E0F48-BCC2-4D09-B527-B5FEAB537BC7">
                     <p class="notep1">注意：</p>
                     <p>只有必须独立于会话NLS参数值的SQL语句才应在依赖于语言环境的SQL函数中显式指定可选的NLS参数。在SQL函数中使用NLS参数的会话默认值通常会带来更好的性能。</p>
                  </div>
                  <p>所有字符函数都支持单字节和多字节字符。除非明确说明，否则字符函数逐字符操作，而不是逐字节操作。</p>
                  <p>本节的其余部分包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432">SQL函数中NLS参数的默认值</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9C3508E2-F00A-4BE3-8923-5F893678884D">在SQL函数中指定NLS参数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-3A2A3358-8203-4474-8905-7E055D77A435">SQL函数中不可接受的NLS参数</a></p>
                     </li>
                  </ul>
               </div><a id="NLSPG430"></a><div class="props_rev_3"><a id="GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432" name="GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432"></a><h4 id="NLSPG-GUID-4C2F8D76-8DC1-4066-9DFD-1F01FACCC432" class="sect4"><span class="enumeration_section">9.1.1</span> SQL函数中NLS参数的缺省值</h4>
                  <div>
                     <p>当SQL函数评估视图和触发器时，当前会话的默认值将用于NLS函数参数。当SQL函数评估<code class="codeph">CHECK</code>约束时，它们使用在创建数据库时为NLS参数指定的默认值。
                     </p>
                  </div>
               </div><a id="NLSPG842"></a><a id="NLSPG431"></a><div class="props_rev_3"><a id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D" name="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D"></a><h4 id="NLSPG-GUID-9C3508E2-F00A-4BE3-8923-5F893678884D" class="sect4"><span class="enumeration_section">9.1.2</span>在SQL函数中指定NLS参数</h4>
                  <div>
                     <div class="section">
                        <p>NLS参数在SQL函数中指定如下：</p><pre class="oac_no_warn" dir="ltr">' <span class="italic"><code class="codeph">parameter</code></span> = <span class="italic"><code class="codeph">value</code></span> '</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">'NLS_DATE_LANGUAGE = AMERICAN'</pre><p>可以在SQL函数中指定以下NLS参数：</p><pre class="pre codeblock"><code>NLS_DATE_LANGUAGE NLS_NUMERIC_CHARACTERS NLS_CURRENCY NLS_ISO_CURRENCY NLS_DUAL_CURRENCY NLS_CALENDAR NLS_SORT</code></pre><p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__CIHDAACF" title="此表列出了NLS参数及其有效的SQL函数。">表9-1</a>显示了哪些NLS参数对特定SQL函数有效。
                        </p>
                        <div class="tblformal" id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__CIHDAACF">
                           <p class="titleintable">表9-1 SQL函数及其有效NLS参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL函数及其有效NLS参数" width="100%" border="1" summary="This table lists NLS parameters and their valid SQL functions." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d78171e413">SQL函数</th>
                                    <th align="left" valign="bottom" id="d78171e416">有效的NLS参数</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e421" headers="d78171e413 "><pre class="pre codeblock"><code>至今</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e421 d78171e416 "><pre class="pre codeblock"><code>NLS_DATE_LANGUAGE NLS_CALENDAR</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e428" headers="d78171e413 "><pre class="pre codeblock"><code>TO_NUMBER</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e428 d78171e416 "><pre class="pre codeblock"><code>NLS_NUMERIC_CHARACTERS NLS_CURRENCY NLS_DUAL_CURRENCY NLS_ISO_CURRENCY</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e435" headers="d78171e413 "><pre class="pre codeblock"><code>TO_CHAR，TO_NCHAR</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e435 d78171e416 "><pre class="pre codeblock"><code>NLS_DATE_LANGUAGE NLS_NUMERIC_CHARACTERS NLS_CURRENCY NLS_ISO_CURRENCY NLS_DUAL_CURRENCY NLS_CALENDAR</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d78171e442" headers="d78171e413 "><pre class="pre codeblock"><code>NLS_UPPER，NLS_LOWER，NLS_INITCAP，NLSSORT</code></pre></td>
                                    <td align="left" valign="top" headers="d78171e442 d78171e416 "><pre class="pre codeblock"><code>NLS_SORT</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何在SQL函数中使用NLS参数：</p><pre class="oac_no_warn" dir="ltr">TO_DATE（'1-JAN-99'，'DD-MON-YY'，'nls_date_language = American'）TO_CHAR（hire_date，'DD / MON / YYYY'，'nls_date_language = French'）TO_CHAR（SYSDATE，'DD / MON / YYYY'，'nls_date_language =''繁体中文'''）TO_NUMBER（'13 .000,00'，'99G999D99'，'nls_numeric_characters ='',.'''）TO_CHAR（薪水，'9G999D99L'，'nls_numeric_characters ='',.''nls_currency =''EUR'''）TO_CHAR（salary，'9G999D99C'，'nls_numeric_characters =''。，''nls_iso_currency = Japan'）NLS_UPPER（last_name，'nls_sort = Swiss'）NLSSORT（last_name，'nls_sort =德语'）</pre><div class="infoboxnote" id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__GUID-45453CDB-1417-45EA-8762-03CD5F54020E">
                           <p class="notep1">注意：</p>
                           <p>在某些语言中，某些小写字符对应多个大写字符，反之亦然。因此， <code class="codeph">NLS_UPPER</code> ， <code class="codeph">NLS_LOWER</code>和<code class="codeph">NLS_INITCAP</code>函数的输出长度可能与输入的长度不同。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-9C3508E2-F00A-4BE3-8923-5F893678884D__GUID-327DAEC3-256A-42ED-A950-3AE457FCC2B1">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-911BCCDC-6FA9-4B5E-B76E-C7D05B969E26">特殊大写字母</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-9E1B89DF-1E19-4660-9D5C-A27D628DDD16">特殊小写字母</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="NLSPG432"></a><div class="props_rev_3"><a id="GUID-3A2A3358-8203-4474-8905-7E055D77A435" name="GUID-3A2A3358-8203-4474-8905-7E055D77A435"></a><h4 id="NLSPG-GUID-3A2A3358-8203-4474-8905-7E055D77A435" class="sect4"><span class="enumeration_section">9.1.3</span> SQL函数中不可接受的NLS参数</h4>
                  <div>
                     <p>除<code class="codeph">NLSSORT</code>外，SQL函数不接受以下NLS参数：</p><pre class="pre codeblock"><code>NLS_LANGUAGE NLS_TERRITORY NLS_DATE_FORMAT</code></pre><p><code class="codeph">NLS_DATE_FORMAT</code>和<code class="codeph">NLS_TERRITORY_FORMAT</code>不被接受为参数，因为它们可能会干扰所需的格式掩码。如果NLS参数在<code class="codeph">TO_CHAR</code>或<code class="codeph">TO_DATE</code>函数中，则必须始终指定日期格式。因此， <code class="codeph">NLS_DATE_FORMAT</code>和<code class="codeph">NLS_TERRITORY_FORMAT</code>不是<code class="codeph">TO_CHAR</code>或<code class="codeph">TO_DATE</code>函数的有效NLS参数。如果在<code class="codeph">TO_CHAR</code>或<code class="codeph">TO_DATE</code>函数中指定<code class="codeph">NLS_DATE_FORMAT</code>或<code class="codeph">NLS_TERRITORY_FORMAT</code> ，则会返回错误。
                     </p>
                     <p><code class="codeph">NLS_LANGUAGE</code>可能会干扰<code class="codeph">NLS_DATE_LANGUAGE</code>的会话值。例如，如果在<code class="codeph">TO_CHAR</code>函数中指定<code class="codeph">NLS_LANGUAGE</code> ，则如果它与<code class="codeph">NLS_DATE_LANGUAGE</code>的会话值不同，则忽略其值。</p>
                  </div>
               </div>
            </div><a id="NLSPG433"></a><div class="props_rev_3"><a id="GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC" name="GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC"></a><h3 id="NLSPG-GUID-7E4AA2C5-8CD7-4836-AA69-6C8E02594FAC" class="sect3"><span class="enumeration_section">9.2</span>其他与语言环境相关的SQL函数</h3>
               <div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-CC307763-CC57-460A-80FC-ED3395BC94AB">CONVERT函数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB">不同长度语义的SQL函数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE">类似于不同长度语义的条件</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264">字符集SQL函数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497">NLSSORT功能</a></p>
                     </li>
                  </ul>
               </div><a id="NLSPG434"></a><div class="props_rev_3"><a id="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB" name="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB"></a><h4 id="NLSPG-GUID-CC307763-CC57-460A-80FC-ED3395BC94AB" class="sect4"><span class="enumeration_section">9.2.1</span> CONVERT函数</h4>
                  <div>
                     <p><a id="d78171e804" class="indexterm-anchor"></a><a id="d78171e808" class="indexterm-anchor"></a><a id="d78171e812" class="indexterm-anchor"></a><a id="d78171e814" class="indexterm-anchor"></a> <code class="codeph">CONVERT</code>函数可以在字符集之间转换字符数据。
                     </p>
                     <p><code class="codeph">CONVERT</code>函数将一个字符集中的字符串的二进制表示形式转换为另一个字符集。它使用与数据库和客户端字符集之间的转换完全相同的技术。因此，它使用<a id="d78171e827" class="indexterm-anchor"></a>替换字符并具有相同的限制。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB__GUID-64A765ED-0FB6-480E-B225-20C86A4BC69C">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="choosing-character-set.html#GUID-B02F1730-CE1B-4210-BBA6-ED605E507D6F">客户端和服务器之间的字符集转换</a> ”</span></p>
                     </div>
                     <p><code class="codeph">CONVERT</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">CONVERT（ <span class="italic"><code class="codeph">char</code></span> ， <span class="italic"><code class="codeph">dest_char_set</code></span> [， <span class="italic"><code class="codeph">source_char_set</code></span> ]）</pre><p><span class="italic"><code class="codeph">char</code></span>是要转换的值。 <span class="italic"><code class="codeph">source_char_set</code></span>是源字符集， <span class="italic"><code class="codeph">dest_char_set</code></span>是目标字符集。如果未指定<span class="italic"><code class="codeph">source_char_set</code></span>参数，则默认为数据库字符集。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CC307763-CC57-460A-80FC-ED3395BC94AB__GUID-19B1E6D2-02AC-47D8-B761-DD80EAB87DDA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">CONVERT</code>函数的更多信息，请<a href="../sqlrf/CONVERT.html#SQLRF00620" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="appendix-A-locale-data.html#GUID-2547D8E3-DC0F-4970-B9B4-3D0E03BA050A">字符集转换支持</a> ”</span>用于仅用于<code class="codeph">CONVERT</code>功能的字符集编码</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="NLSPG843"></a><a id="NLSPG435"></a><div class="props_rev_3"><a id="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB" name="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB"></a><h4 id="NLSPG-GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB" class="sect4"><span class="enumeration_section">9.2.2</span>不同长度语义的SQL函数</h4>
                  <div>
                     <p>Oracle提供了根据不同长度语义工作的SQL函数。有三组这样的SQL函数： <code class="codeph">SUBSTR</code> ， <code class="codeph">LENGTH</code>和<code class="codeph">INSTR</code> 。组中的每个函数都基于不同类型的长度语义，并通过附加到函数名称的字符或数字来区分。例如， <code class="codeph">SUBSTRB</code>基于字节语义。
                     </p>
                     <p><code class="codeph">SUBSTR</code>函数返回子字符串的请求部分。<code class="codeph">LENGTH</code>函数返回字符串的长度。<code class="codeph">INSTR</code>函数在字符串中搜索子字符串。
                     </p>
                     <p><code class="codeph">SUBSTR</code>函数以不同方式计算字符串的长度。<a href="sql-and-plsql-programming-in-global-environment.html#GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB__CIHBDIBC" title="该表在前面的文本中描述">表9-2</a>总结了计算方法。
                     </p>
                     <div class="tblformalwide" id="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB__CIHBDIBC">
                        <p class="titleintable">表9-2 SUBSTR函数如何计算字符串的长度</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="SUBSTR函数如何计算字符串的长度" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d78171e1014">功能</th>
                                 <th align="left" valign="bottom" width="83%" id="d78171e1017">计算方法</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1022" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1022 d78171e1017 ">
                                    <p>根据与数据类型的字符集关联的长度语义计算字符串的长度（以字符为单位）。例如，AL32UTF8字符以UCS-4字符计算。UTF8和AL16UTF16字符以UCS-2字符计算。补充字符在AL32UTF8中计为一个字符，在UTF8和AL16UTF16中计为两个字符。由于<code class="codeph">VARCHAR</code>和<code class="codeph">NVARCHAR2</code>可能使用不同的字符集，因此即使两个字符串相同， <code class="codeph">SUBSTR</code>也可能为不同的数据类型提供不同的结果。如果您的应用程序需要一致性，则使用<code class="codeph">SUBSTR2</code>或<code class="codeph">SUBSTR4</code>分别强制所有语义计算为UCS-2或UCS-4。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1045" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTRB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1045 d78171e1017 ">
                                    <p>以字节为单位计算字符串的长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1053" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1053 d78171e1017 ">
                                    <p>计算UCS-2字符的字符串长度，符合Java字符串和Windows客户端环境。字符以UCS-2或16位Unicode值表示。补充字符计为两个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1061" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTR4</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1061 d78171e1017 ">
                                    <p>以UCS-4字符计算字符串的长度。字符以UCS-4或32位Unicode值表示。补充字符计为一个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1069" headers="d78171e1014 ">
                                    <p><code class="codeph">SUBSTRC</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1069 d78171e1017 ">
                                    <p>计算Unicode组合字符中字符串的长度。补充字符和组合字符计为一个字符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><code class="codeph">LENGTH</code>和<code class="codeph">INSTR</code>函数根据添加到函数名称的字符或数字以相同的方式计算字符串长度。
                     </p>
                     <p>以下示例演示了字符集为AL32UTF8的数据库上<code class="codeph">SUBSTR</code>和<code class="codeph">SUBSTRB</code>之间的差异。
                     </p>
                     <p>对于字符串<code class="codeph">Fußball,</code>以下语句返回一个长度为4个字符的子字符串，以第二个字符开头：</p><pre class="oac_no_warn" dir="ltr">SELECT SUBSTR（'Fußball'，2,4）SUBSTR FROM DUAL; SUBS ----ußba</pre><p>对于字符串<code class="codeph">Fußball,</code>以下语句返回一个4字节长的子字符串，从第二个字节开始：</p><pre class="oac_no_warn" dir="ltr">SELECT SUBSTRB（'Fußball'，2,4）来自DUAL的SUBSTRB; SUB ---ußb</pre><div class="infoboxnotealso" id="GUID-FC7BC2B1-DC06-4439-B422-5AB80D675BAB__GUID-2A072DEF-C65D-4D66-8070-99C2139087BA">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">SUBSTR</code> ， <code class="codeph">LENGTH</code>和<code class="codeph">INSTR</code>函数的更多信息，请<a href="../sqlrf/About-SQL-Functions.html#SQLRF51173" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div><a id="NLSPG844"></a><a id="NLSPG436"></a><div class="props_rev_3"><a id="GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE" name="GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE"></a><h4 id="NLSPG-GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE" class="sect4"><span class="enumeration_section">9.2.3</span>不同长度语义的条件</h4>
                  <div>
                     <p><code class="codeph">LIKE</code>条件指定使用模式匹配的测试。等于运算符（=）将一个字符值与另一个字符值完全匹配，但<code class="codeph">LIKE</code>条件通过搜索第二个指定的模式的第一个值来匹配一个字符值的一部分。
                     </p>
                     <p><code class="codeph">LIKE</code>使用与输入字符集关联的长度语义计算字符串的长度。<code class="codeph">LIKE2</code> ， <code class="codeph">LIKE4</code>和<code class="codeph">LIKEC</code>条件总结在<a href="sql-and-plsql-programming-in-global-environment.html#GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE__G1007320" title="该表在前面的文本中描述">表9-3中</a> 。
                     </p>
                     <div class="tblformalwide" id="GUID-0D3BAA34-CA1E-43EE-B36B-A64616EB33FE__G1007320">
                        <p class="titleintable">表9-3 LIKE条件</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="像条件" width="100%" border="1" summary="This table is described in the preceding text" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d78171e1240">功能</th>
                                 <th align="left" valign="bottom" width="83%" id="d78171e1243">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1248" headers="d78171e1240 ">
                                    <p><code class="codeph">LIKE2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1248 d78171e1243 ">
                                    <p>在UCS-2语义中表示字符时使用。补充字符被视为两个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1256" headers="d78171e1240 ">
                                    <p><code class="codeph">样4</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1256 d78171e1243 ">
                                    <p>在UCS-4语义中表示字符时使用。补充字符被视为一个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d78171e1264" headers="d78171e1240 ">
                                    <p><code class="codeph">LIKEC</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d78171e1264 d78171e1243 ">
                                    <p>在Unicode完整字符语义中表示字符时使用。组合字符被视为一个字符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>没有<code class="codeph">LIKEB</code>条件。
                     </p>
                  </div>
               </div><a id="NLSPG437"></a><div class="props_rev_3"><a id="GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264" name="GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264"></a><h4 id="NLSPG-GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264" class="sect4"><span class="enumeration_section">9.2.4</span>字符集SQL函数</h4>
                  <div>
                     <p>两个SQL函数<code class="codeph">NLS_CHARSET_NAME</code>和<code class="codeph">NLS_CHARSET_ID</code>可以在字符集ID号和字符集名称之间进行转换。它们由需要通过OCI确定绑定变量的字符集ID号的程序使用。<a id="d78171e1356" class="indexterm-anchor"></a></p>
                     <p>另一个SQL函数<code class="codeph">NLS_CHARSET_DECL_LEN</code>在给定列的字节长度的情况下以字符数返回列的声明长度。
                     </p>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA">从字符集编号转换为字符集名称</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560">从字符集名称转换为字符集编号</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38">返回NCHAR列的长度</a></p>
                           <div class="infoboxnotealso" id="GUID-D9CD67BB-C3A7-4C77-BB46-48C65B4DF264__GUID-B7E420AC-2502-4A68-BDC8-93F9E6AB841E">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../sqlrf/About-SQL-Functions.html#SQLRF51173" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </div>
                        </li>
                     </ul>
                  </div><a id="NLSPG438"></a><div class="props_rev_3"><a id="GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA" name="GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA"></a><h5 id="NLSPG-GUID-9C93FB3E-6642-4D05-8394-FF88EEAD64EA" class="sect5"><span class="enumeration_section">9.2.4.1</span>从字符集编号转换为字符集名称</h5>
                     <div>
                        <p><code class="codeph">NLS_CHARSET_NAME</code> （ <span class="italic"><code class="codeph">n</code></span> ）函数返回与ID号对应的字符集的名称<span class="italic"> </span> <span class="italic"><code class="codeph">n</code></span> 。如果<span class="italic"><code class="codeph">n</code></span>不是可识别的字符集ID值，则该函数返回<code class="codeph">NULL</code> 。
                        </p>
                     </div>
                  </div><a id="NLSPG439"></a><div class="props_rev_3"><a id="GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560" name="GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560"></a><h5 id="NLSPG-GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560" class="sect5"><span class="enumeration_section">9.2.4.2</span>从字符集名称转换为字符集编号</h5>
                     <div>
                        <p><code class="codeph">NLS_CHARSET_ID</code> （ <span class="italic"><code class="codeph">text</code></span> ）返回与<span class="italic"><code class="codeph">text</code></span>指定的名称对应的字符集ID。 <span class="italic"><code class="codeph">text</code></span>定义为运行时<code class="codeph">VARCHAR2</code>数量，即字符集名称。<code class="codeph">text</code>值可以是<code class="codeph">NLSRTL</code>名称， <code class="codeph">NLSRTL</code>名称可以解析为不是数据库字符集或国家字符集的字符集。
                        </p>
                        <p>如果为<span class="italic"><code class="codeph">text</code></span>输入值<code class="codeph">CHAR_CS</code> ，则该函数返回数据库字符集的ID。如果为<span class="italic"><code class="codeph">text</code></span>输入值<code class="codeph">NCHAR_CS</code> ，则该函数返回数据库的国家字符集的ID。如果<span class="italic"><code class="codeph">text</code></span>不是可识别的名称，则该函数返回<code class="codeph">NULL</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-55D0BD42-56EC-4765-9DFB-4F2D3E904560__GUID-2295974B-6BE3-4533-866B-1C969CEE5BBA">
                           <p class="notep1">注意：</p>
                           <p>必须以大写字符输入<span class="italic"><code class="codeph">text</code></span>的值。
                           </p>
                        </div>
                     </div>
                  </div><a id="NLSPG440"></a><div class="props_rev_3"><a id="GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38" name="GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38"></a><h5 id="NLSPG-GUID-3CC9B10F-0A9E-4FCC-B09E-FE1607ED0E38" class="sect5"><span class="enumeration_section">9.2.4.3</span>返回NCHAR列的长度</h5>
                     <div>
                        <p>在给定列的字节长度的情况下， <code class="codeph">NLS_CHARSET_DECL_LEN</code> （ <span class="italic"><code class="codeph">BYTECNT</code></span> ， <span class="italic"><code class="codeph">CSID</code></span> ）以字符数返回列的声明长度。<span class="italic"><code class="codeph">BYTECNT</code></span>是列的字节长度。<span class="italic"><code class="codeph">CSID</code></span>是列的字符集ID。
                        </p>
                     </div>
                  </div>
               </div><a id="NLSPG845"></a><a id="NLSPG846"></a><a id="NLSPG847"></a><a id="NLSPG441"></a><div class="props_rev_3"><a id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497" name="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497"></a><h4 id="NLSPG-GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497" class="sect4"><span class="enumeration_section">9.2.5</span> NLSSORT功能</h4>
                  <div>
                     <p><code class="codeph">NLSSORT</code>函数使您可以强制<code class="codeph">ORDER BY</code> ， <code class="codeph">GROUP BY</code> ，比较条件和许多其他校对敏感操作的特定归类（排序顺序）。但是，从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，强制执行此类操作的特定排序规则的推荐方法是使用<code class="codeph">COLLATE</code>运算符。<code class="codeph">COLLATE</code>运算符适用于所有对结果敏感的操作，包括不能使用<code class="codeph">NLSSORT</code>操作，例如<code class="codeph">MAX</code> ， <code class="codeph">MIN</code>和<code class="codeph">INSTR</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-B86B77ED-A994-4ACC-B48A-4D9506AB3582">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-4146F48A-FB6F-4593-8098-BDF45404EB24">表达式评估和COLLATE运算符</a> ”</span></p>
                     </div>
                     <p><code class="codeph">NLSSORT</code>函数为其角色参数计算排序规则键。排序规则键是数据类型<code class="codeph">RAW</code>的值，它具有以下属性：当为两个（可能不同的）源字符值的给定排序规则创建的两个排序规则键被比较为二进制时，它们的相互排序对应于预期的相互排序此归类中的源字符值，即<code class="codeph">NLSSORT(c1) &lt; NLSSORT(c2)</code> ，当且仅当<code class="codeph">c1 &lt; c2</code> ，其中<code class="codeph">NLSSORT</code>和字符运算符<code class="codeph">&lt;</code> （小于）使用相同的归类。
                     </p>
                     <p>用于<code class="codeph">ORDER BY</code> ， <code class="codeph">GROUP BY</code> ，比较条件和其他校对敏感操作的排序规则由数据绑定排序规则确定规则确定。如果这些规则产生伪排序规则，则会话参数<code class="codeph">NLS_COMP</code>和<code class="codeph">NLS_SORT</code>确定实际排序规则。
                     </p>
                     <div class="infoboxnotealso" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-5D495F29-8CC5-41EB-BCA9-FA19366F002E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#GUID-88301F82-36AE-47DB-8F60-54FAEEAECADE">整理决定</a> ”</span></p>
                     </div>
                     <p>以下示例使用<code class="codeph">NLS_SORT</code>会话参数指定德语排序<code class="codeph">NLS_SORT</code> 。它假定<code class="codeph">column1</code>的声明排序规则是<code class="codeph">USING_NLS_COMP</code>或<code class="codeph">USING_NLS_SORT</code> 。</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET NLS_SORT = GERMAN; SELECT * FROM table1 ORDER BY column1;</pre><p>以下示例首先将<code class="codeph">NLS_SORT</code>会话参数设置为德语，但<code class="codeph">NLSSORT</code>函数通过指定法语排序来覆盖它。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET NLS_SORT = GERMAN; SELECT * FROM table1 ORDER BY NLSSORT（column1，'NLS_SORT = FRENCH'）;</pre><p>当<code class="codeph">NLS_COMP</code>设置为<code class="codeph">BINARY</code>并且声明的引用列的排序规则为<code class="codeph">USING_NLS_COMP</code>时， <code class="codeph">WHERE</code>子句使用二进制比较。但是，可以通过在<code class="codeph">WHERE</code>子句中使用<code class="codeph">NLSSORT</code>函数来覆盖它。
                     </p>
                     <div class="infoboxnote" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-E1626E8D-903A-4694-9577-213736DB2458">
                        <p class="notep1">注意：</p>
                        <p>如果未使用数据绑定排序规则功能，则所有列都具有<code class="codeph">USING_NLS_COMP</code>的声明排序<code class="codeph">USING_NLS_COMP</code> 。</p>
                     </div>
                     <p>以下示例使用<code class="codeph">WHERE</code>子句进行语言比较。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET NLS_COMP = BINARY; SELECT * FROM table1 WHERE NLSSORT（column1，'NLS_SORT = FRENCH'）&gt; NLSSORT（column2，'NLS_SORT = FRENCH'）;</pre><p>将<code class="codeph">NLS_COMP</code>会话参数设置为<code class="codeph">LINGUISTIC</code>会导致在<code class="codeph">WHERE</code>子句中使用<code class="codeph">NLS_SORT</code>值。
                     </p>
                     <p>Oracle数据库可以隐式地将<code class="codeph">NLSSORT</code>函数添加到子查询中的SQL表达式，以实现一类对排序规则敏感的操作的语言行为。隐式添加的<code class="codeph">NLSSORT</code>调用在SQL语句的执行计划中可见。
                     </p>
                     <div class="infoboxnote" id="GUID-8C7B0DAC-2379-45A3-9CCF-B7A4811E5497__GUID-BE57E9B1-8167-4F32-A5D0-89AAC744E0EF">
                        <p class="notep1">注意：</p>
                        <p>无论是显式调用还是隐式调用， <code class="codeph">NLSSORT</code>函数都可能在某些条件下报告错误<code class="codeph">ORA-12742</code> 。有关此错误的更多详细信息，请参阅<span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-F2CF03B7-BD32-42D5-803A-0F4F03A1D4FE">避免ORA-12742错误</a> ”</span> 。
                        </p>
                     </div>
                     <p>本节的其余部分包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-65741DDD-B962-4D2A-9352-12789CC21A5A">NLSSORT语法</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF">比较WHERE子句中的字符串</a></p>
                        </li>
                        <li>
                           <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88">控制ORDER BY子句</a></p>
                        </li>
                     </ul>
                  </div><a id="NLSPG442"></a><div class="props_rev_3"><a id="GUID-65741DDD-B962-4D2A-9352-12789CC21A5A" name="GUID-65741DDD-B962-4D2A-9352-12789CC21A5A"></a><h5 id="NLSPG-GUID-65741DDD-B962-4D2A-9352-12789CC21A5A" class="sect5"><span class="enumeration_section">9.2.5.1</span> NLSSORT语法</h5>
                     <div>
                        <div class="section">
                           <p>有四种方法可以使用<code class="codeph">NLSSORT</code> ：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">NLSSORT()</code> ，它依赖于整理确定规则</p>
                              </li>
                              <li>
                                 <p><code class="codeph">NLSSORT(column1, 'NLS_SORT=</code> <span class="italic"><code class="codeph">xxxx</code></span> <code class="codeph">')</code> 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">NLSSORT(column1, 'NLS_LANG=</code> <span class="italic"><code class="codeph">xxxx</code></span> <code class="codeph">')</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">NLSSORT(column1, 'NLS_LANGUAGE=</code> <span class="italic"><code class="codeph">xxxx</code></span> <code class="codeph">')</code></p>
                              </li>
                           </ul>
                           <p><code class="codeph">NLSSORT</code>函数的<code class="codeph">NLS_LANG</code>参数与<code class="codeph">NLS_LANG</code>客户端环境设置不同。在<code class="codeph">NLSSORT</code>函数中， <code class="codeph">NLS_LANG</code>指定缩写的语言名称，例如<code class="codeph">US</code> for American或<code class="codeph">PL</code> for Polish。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM table1 ORDER BY NLSSORT（column1，'NLS_LANG = PL'）;</pre><p>在<code class="codeph">NLSSORT</code>调用中指定语言时，该函数将使用该语言的默认排序规则。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="NLSPG443"></a><div class="props_rev_3"><a id="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF" name="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF"></a><h5 id="NLSPG-GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF" class="sect5"><span class="enumeration_section">9.2.5.2</span>比较WHERE子句中的字符串</h5>
                     <div>
                        <p><code class="codeph">NLSSORT</code>使应用程序能够执行遵循字母约定的字符串匹配。通常， <code class="codeph">WHERE</code>子句中的字符串使用字符的二进制值进行比较。如果一个字符在数据库字符集中具有更大的二进制值，则认为该字符大于另一个字符。因为基于二进制值的字符序列可能与语言的字母序列不匹配，所以这种比较可能不遵循字母惯例。例如，如果列（ <code class="codeph">column1</code> ）包含ISO 8859-1 8位字符集中的值ABC，ABZ，BCD和ÄBC，则以下查询将返回<code class="codeph">BCD</code>和<code class="codeph">ÄBC</code>因为<code class="codeph">Ä</code>的数值高于<code class="codeph">B</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT column1 FROM table1 WHERE column1&gt;'B';</pre><p>在德语中， <code class="codeph">Ä</code>在<code class="codeph">B</code>之前按字母顺序排序，但在瑞典语中， <code class="codeph">Ä</code>在<code class="codeph">Z</code>之后排序。可以在<code class="codeph">WHERE</code>子句中使用<code class="codeph">NLSSORT</code>进行语言比较：</p><pre class="oac_no_warn" dir="ltr">WHERE NLSSORT（col） <span class="italic"><code class="codeph">comparison_operator</code></span> NLSSORT（ <span class="italic"><code class="codeph">comparison_string</code></span> ）</pre><p>请注意， <code class="codeph">NLSSORT</code>必须位于比较运算符的两侧。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT column1 FROM table1 WHERE NLSSORT（column1）&gt; NLSSORT（'B'）;</pre><p>如果设置了德语语言排序，则该语句不会返回以<code class="codeph">Ä</code>开头的字符串，因为<code class="codeph">Ä</code>出现在德语字母表中的<code class="codeph">B</code>之前。如果设置了瑞典语语言排序，则返回以<code class="codeph">Ä</code>开头的字符串，因为<code class="codeph">Ä</code>出现在瑞典语字母表中的<code class="codeph">Z</code>之后。
                        </p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，使<code class="codeph">&gt;</code> （大于）运算符使用语言比较的推荐方法是将<code class="codeph">COLLATE</code>运算符添加到其中一个比较值。例如：</p><pre class="pre codeblock"><code>SELECT column1 FROM table1 WHERE column1 COLLATE USING_NLS_SORT&gt;'B';</code></pre><p>如果要强制执行特定的排序规则， <code class="codeph">USING_NLS_SORT</code>考虑会话NLS参数，则可以指定它来代替伪排序<code class="codeph">USING_NLS_SORT</code> 。例如：</p><pre class="pre codeblock"><code>SELECT column1 FROM table1 WHERE column1 COLLATE GERMAN&gt;'B';</code></pre><div class="infoboxnote" id="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF__GUID-3F46EDBF-D4EE-4E0C-B641-DFD04BF5033C">
                           <p class="notep1">注意：</p>
                           <p>如果删除操作符<code class="codeph">COLLATE</code>并在声明<code class="codeph">table1</code>中<code class="codeph">column1</code>排序规则时指定相应的排序规则，则将获得与上述<code class="codeph">COLLATE</code>运算符示例中显示的结果相同的结果。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-54B3745F-3CD3-4D6F-B63D-36A1793484CF__GUID-4FDCEC69-ED14-4D6A-BD83-20E22E195985">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-C8F381FC-FD1F-411E-B92D-256B728BAFAA">为列指定数据绑定排序规则</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="NLSPG445"></a><div class="props_rev_3"><a id="GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88" name="GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88"></a><h5 id="NLSPG-GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88" class="sect5"><span class="enumeration_section">9.2.5.3</span>控制ORDER BY子句</h5>
                     <div>
                        <p>如果正在使用语言排序，则<code class="codeph">ORDER BY</code>子句对字符数据使用隐式<code class="codeph">NLSSORT</code> 。<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句的排序机制（语言或二进制）对应用程序是透明的。但是，如果在<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句中显式指定了<code class="codeph">NLSSORT</code>函数，则不会执行隐式<code class="codeph">NLSSORT</code> 。
                        </p>
                        <p>如果<code class="codeph">NLS_SORT</code>会话参数定义了语言排序，则应用程序中的<code class="codeph">ORDER BY</code>子句使用隐式<code class="codeph">NLSSORT</code>函数。如果指定显式<code class="codeph">NLSSORT</code>函数，则它将覆盖隐式<code class="codeph">NLSSORT</code>函数。
                        </p>
                        <p>当排序机制被定义为语言时， <code class="codeph">ORDER</code> <code class="codeph">BY</code>子句中通常不需要<code class="codeph">NLSSORT</code>函数。
                        </p>
                        <p>当排序机制默认或定义为二进制时，那么像下面这样的查询使用二进制排序：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees ORDER BY last_name;</pre><p>德语语言排序可以如下获得：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name FROM employees ORDER BY NLSSORT（last_name，'NLS_SORT = GERMAN'）;</pre><div class="infoboxnotealso" id="GUID-ECF1E342-FB26-48C8-9BE0-F6938791DB88__GUID-66363717-F90A-48B7-BBDD-BE40DEF212C0">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="linguistic-sorting-and-matching.html#GUID-3D736236-BF98-4A4D-9D09-293AAA50A04E">使用语言整理</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="NLSPG446"></a><div class="props_rev_3"><a id="GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F" name="GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F"></a><h3 id="NLSPG-GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F" class="sect3"><span class="enumeration_section">9.3</span>全局环境中SQL和PL / SQL编程的其他主题</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4">SQL日期格式掩码</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89">计算周数</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81">SQL数字格式掩码</a></p>
                     </li>
                     <li>
                        <p><a href="sql-and-plsql-programming-in-global-environment.html#GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193">将外部BFILE数据加载到LOB列中</a></p>
                        <div class="infoboxnotealso" id="GUID-1EB0DFBE-FF78-4DAC-A549-58F0A5C35C9F__GUID-7A784CF8-68F5-455B-9CEF-500760E32EFC">
                           <p class="notep1">也可以看看：</p>
                           <p>有关格式掩码的完整说明，请<a href="../sqlrf/Format-Models.html#SQLRF00212" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </li>
                  </ul>
               </div><a id="NLSPG447"></a><div class="props_rev_3"><a id="GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4" name="GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4"></a><h4 id="NLSPG-GUID-155B5CEA-070D-48A5-A01C-44946C5DF6C4" class="sect4"><span class="enumeration_section">9.3.1</span> SQL日期格式掩码</h4>
                  <div>
                     <p>几种格式<a id="d78171e2667" class="indexterm-anchor"></a> <code class="codeph">TO_CHAR</code>提供了掩码<a id="d78171e2672" class="indexterm-anchor"></a> ， <code class="codeph">TO_DATE</code> <a id="d78171e2679" class="indexterm-anchor"></a>和<code class="codeph">TO_NUMBER</code> <a id="d78171e2686" class="indexterm-anchor"></a>功能。
                     </p>
                     <p><code class="codeph">RM</code> （罗马月）格式<a id="d78171e2696" class="indexterm-anchor"></a> element返回一个月作为罗马数字。您可以使用<code class="codeph">RM</code>或<code class="codeph">rm</code>指定大写或小写。例如，对于2007年9月7日的日期， <code class="codeph">DD-rm-YYYY</code>返回<code class="codeph">07-ix-2007</code> ， <code class="codeph">DD-RM-YYYY</code>返回<code class="codeph">07-IX-2007</code> 。
                     </p>
                     <p>请注意， <code class="codeph">MON</code>和<code class="codeph">DY</code>格式掩码明确支持月份和日期缩写，长度可能不是三个字符。例如，可以分别为法语“Lundi”和“Mardi”指定缩写“Lu”和“Ma”。
                     </p>
                  </div>
               </div><a id="NLSPG448"></a><div class="props_rev_3"><a id="GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89" name="GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89"></a><h4 id="NLSPG-GUID-2679DAC4-AC21-4AB1-A2EF-8382620B1C89" class="sect4"><span class="enumeration_section">9.3.2</span>计算周数</h4>
                  <div>
                     <p><code class="codeph">WW</code>格式掩码返回的周数根据以下算法计算： <code class="codeph">int(dayOfYear+6)/7</code> 。该算法不遵循ISO <a id="d78171e2808" class="indexterm-anchor"></a>标准（2015年，1992年6月15日）。<a id="d78171e2811" class="indexterm-anchor"></a></p>
                     <p>支持ISO <a id="d78171e2815" class="indexterm-anchor"></a><a id="d78171e2819" class="indexterm-anchor"></a>标准，提供<code class="codeph">IW</code>格式元素。它返回ISO周号。此外， <code class="codeph">I</code> ， <code class="codeph">IY</code> ， <code class="codeph">IYY</code>和<code class="codeph">IYYY</code>格式元素（与<code class="codeph">Y</code> ， <code class="codeph">YY</code> ， <code class="codeph">YYY</code>和<code class="codeph">YYYY</code>格式元素的行为等效）返回与ISO周数相关的年份。
                     </p>
                     <p>在ISO标准中，与ISO周数相关的年份可能与日历年不同。例如，1988年1月1日是1987年的ISO周53号。一周总是在星期一开始，到星期日结束。周数根据以下规则确定：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果1月1日是星期五，星期六或星期日，则包括1月1日在内的一周是上一年的最后一周，因为一周中的大多数日子都属于上一年。</p>
                        </li>
                        <li>
                           <p>如果1月1日是星期一，星期二，星期三或星期四，那么这一周是新年的第一周，因为一周中的大多数日子都属于新的一年。</p>
                        </li>
                     </ul>
                     <p>例如，1991年1月1日是星期二，所以1990年12月31日星期一，1991年1月6日星期日，是第1周。因此，1990年12月31日的ISO周数和年份是1991年1月。要获取ISO周编号，请使用<code class="codeph">IW</code>格式掩码作为星期编号和年份的<code class="codeph">IY</code>格式之一。<a id="d78171e2869" class="indexterm-anchor"></a><a id="d78171e2871" class="indexterm-anchor"></a><a id="d78171e2873" class="indexterm-anchor"></a><a id="d78171e2877" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="NLSPG449"></a><div class="props_rev_3"><a id="GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81" name="GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81"></a><h4 id="NLSPG-GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81" class="sect4"><span class="enumeration_section">9.3.3</span> SQL数字格式掩码</h4>
                  <div>
                     <div class="section">
                        <p>几种额外的格式<a id="d78171e2963" class="indexterm-anchor"></a>元素用于格式化数字：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-9FEE0C03-A841-41BE-A819-2EA9BA535B81__GUID-43675CF6-B467-43AE-BE7D-B1A0F86DDD85">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists some of the SQL format masks for formatting numbers." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d78171e2975">元件</th>
                                 <th align="left" valign="bottom" width="30%" id="d78171e2978">描述</th>
                                 <th align="left" valign="bottom" width="50%" id="d78171e2981">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e2986" headers="d78171e2975 ">
                                    <p><code class="codeph">d</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e2986 d78171e2978 ">
                                    <p>十进制</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e2986 d78171e2981 ">
                                    <p>返回小数点字符<a id="d78171e2996" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3001" headers="d78171e2975 ">
                                    <p><code class="codeph">G</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3001 d78171e2978 ">
                                    <p>组</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3001 d78171e2981 ">
                                    <p>返回组分隔符<a id="d78171e3011" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3016" headers="d78171e2975 ">
                                    <p><code class="codeph">大号</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3016 d78171e2978 ">
                                    <p>当地货币</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3016 d78171e2981 ">
                                    <p>返回本地货币符号<a id="d78171e3026" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3031" headers="d78171e2975 ">
                                    <p><code class="codeph">C</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3031 d78171e2978 ">
                                    <p>国际货币</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3031 d78171e2981 ">
                                    <p>返回ISO货币符号<a id="d78171e3041" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d78171e3046" headers="d78171e2975 ">
                                    <p><code class="codeph">RN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d78171e3046 d78171e2978 ">
                                    <p>罗马数字</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d78171e3046 d78171e2981 ">
                                    <p>返回数字作为其等效的罗马数字<a id="d78171e3056" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>对于罗马数字，您可以分别使用<code class="codeph">RN</code>或<code class="codeph">rn</code>指定大写或小写。要转换的数字必须是1到3999范围内的整数<span>。</span></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="NLSPG450"></a><div class="props_rev_3"><a id="GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193" name="GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193"></a><h4 id="NLSPG-GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193" class="sect4"><span class="enumeration_section">9.3.4将</span>外部BFILE数据加载到LOB列中</h4>
                  <div>
                     <p><code class="codeph">DBMS_LOB</code> PL / SQL包可以将外部<code class="codeph">BFILE</code>数据加载到<code class="codeph">LOB</code>列中。Oracle数据库在将二进制数据加载到<code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code>列之前执行字符集转换。因此， <code class="codeph">BFILE</code>数据不需要与数据库或国家字符集在同一字符集中才能正常工作。API将指定<code class="codeph">BFILE</code>字符集中的数据转换为<code class="codeph">CLOB</code>数据类型的数据库字符集，或<code class="codeph">NCLOB</code>数据类型的国家字符集。加载发生在服务器上，因为客户端不支持<code class="codeph">BFILE</code>数据。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用<code class="codeph">DBMS_LOB.LOADBLOBFROMFILE</code>加载<code class="codeph">BLOB</code>列。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_LOB.LOADCLOBFROMFILE</code>加载<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>列。
                           </p>
                           <div class="infoboxnotealso" id="GUID-3E5ADD9C-2EDD-4E48-B8E7-01E83BF93193__GUID-FBBFB997-A25F-49E1-B062-EA3AE478A515">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../arpls/DBMS_LOB.html#ARPLS600" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../adlob/using-LOB-APIs.html#ADLOB1017" target="_blank"><span class="italic">Oracle Database SecureFiles和大对象开发人员指南</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13607.using-dynamic-SQL.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用动态SQL</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="programmers-guide-oracle-precompilers.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T01:36:30-08:00"></meta>
      <meta name="dcterms.title" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96474-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-host-arrays.html" title="Previous" type="text/html"></link>
      <link rel="next" href="writing-user-exits.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ZZPRE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-host-arrays.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="writing-user-exits.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南Oracle预编译器</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用动态SQL</li>
            </ol>
            <a id="GUID-5C0F172A-6D8C-45FC-8F23-B544995108FE" name="GUID-5C0F172A-6D8C-45FC-8F23-B544995108FE"></a><a id="ZZPRE869"></a>
            
            <h2 id="ZZPRE-GUID-5C0F172A-6D8C-45FC-8F23-B544995108FE" class="sect2"><span class="enumeration_chapter">10</span>使用动态SQL</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-09DE3FA0-C622-466A-9A2E-A7735A970271">什么是动态SQL？</a> 
                     </p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-FF94FD6C-7224-42AC-895A-18DD4DD386CD">动态SQL的优缺点</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-B9CBB2E6-5A6C-46FD-9089-27A73A3AF803">何时使用动态SQL</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-6E1145C9-54DD-4861-85B1-8F406701F65F">动态SQL语句的要求</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-30F8C760-69E7-4524-BF21-92C063CF513B">如何处理动态SQL语句</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-189A80C3-3816-42AC-AB03-CC664C0E9E85">使用动态SQL的方法</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-16F4F40D-E2C0-455C-9088-9173F96218A0">关于使用方法1</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-6D4826F3-E794-4A64-A9E9-497B9096B4C7">关于使用方法2</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-0234861C-39A8-4AE3-980E-31CA185076F1">关于使用方法3</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-C4762850-789A-463B-B573-7A7630EC1931">使用方法4</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-364E812E-312C-42BE-B0DA-7AC132EF46B8">关于使用DECLARE STATEMENT语句</a></p>
                  </li>
                  <li>
                     <p><a href="using-dynamic-SQL.html#GUID-25F8ABB7-6A51-4C3A-9DE7-DF86E3E3AA6B">关于使用PL / SQL</a></p>
                  </li>
               </ul>
               <p>本章介绍如何使用动态SQL，这是一种高级编程技术，可为应用程序增加灵活性和功能。在权衡了动态SQL的优缺点之后，您将学习从简单到复杂的四种方法，用于编写在运行时“即时”接受和处理SQL语句的程序。您将了解每种方法的要求和限制，以及如何为给定作业选择正确的方法。</p>
            </div><a id="ZZPRE870"></a><div class="props_rev_3"><a id="GUID-09DE3FA0-C622-466A-9A2E-A7735A970271" name="GUID-09DE3FA0-C622-466A-9A2E-A7735A970271"></a><h3 id="ZZPRE-GUID-09DE3FA0-C622-466A-9A2E-A7735A970271" class="sect3"><span class="enumeration_section">10.1</span>什么是动态SQL？
               </h3>
               <div>
                  <p><a id="d71876e106" class="indexterm-anchor"></a><a id="d71876e108" class="indexterm-anchor"></a>大多数数据库应用程序执行特定的工例如，一个简单的程序可能会提示用户输入员工编号，然后更新EMP和DEPT表中的行。在这种情况下，您知道在预编译时<code class="codeph">UPDATE</code>语句的组成。也就是说，您知道可能更改哪些表，为每个表和列定义的约束，可能更新的列以及每列的数据类型。
                  </p>
                  <p>但是，某些应用程序必须在运行时接受（或构建）和处理各种SQL语句。例如，通用报表编写者必须为其生成的各种报表构建不同的<code class="codeph">SELECT</code>语句。在这种情况下，语句的构成在运行时才会被识别。这些陈述可以并且可能会从执行变为执行。它们恰当地称为<span class="italic">动态</span> SQL语句。
                  </p>
                  <p>与静态SQL语句不同，动态SQL语句未嵌入源程序中。相反，它们存储在运行时输入或由程序构建的字符串中。它们可以交互式输入或从文件中读取。</p>
                  <p></p>
               </div>
            </div><a id="ZZPRE871"></a><div class="props_rev_3"><a id="GUID-FF94FD6C-7224-42AC-895A-18DD4DD386CD" name="GUID-FF94FD6C-7224-42AC-895A-18DD4DD386CD"></a><h3 id="ZZPRE-GUID-FF94FD6C-7224-42AC-895A-18DD4DD386CD" class="sect3"><span class="enumeration_section">10.2</span>动态SQL的优缺点</h3>
               <div>
                  <p><a id="d71876e148" class="indexterm-anchor"></a>接受和处理动态定义的SQL语句的主机程序比普通的嵌入式SQL程序更通用。可以使用对SQL知之甚少或根本不了解的用户的输入以交互方式构建动态SQL语句。</p>
                  <p>例如，您的程序可能只是提示用户在<code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句的<code class="codeph">WHERE</code>子句中使用搜索条件。更复杂的程序可能允许用户从列出SQL操作，表和视图名称，列名称等的菜单中进行选择。因此，动态SQL允许您编写高度灵活的应用程序。
                  </p>
                  <p>但是，一些动态查询需要复杂的编码，特殊数据结构的使用以及更多的运行时处理。虽然您可能没有注意到增加的处理时间，但除非您完全理解动态SQL概念和方法，否则您可能会发现编码很困难。</p>
                  <p></p>
               </div>
            </div><a id="ZZPRE872"></a><div class="props_rev_3"><a id="GUID-B9CBB2E6-5A6C-46FD-9089-27A73A3AF803" name="GUID-B9CBB2E6-5A6C-46FD-9089-27A73A3AF803"></a><h3 id="ZZPRE-GUID-B9CBB2E6-5A6C-46FD-9089-27A73A3AF803" class="sect3"><span class="enumeration_section">10.3</span>何时使用动态SQL</h3>
               <div>
                  <p>实际上，静态SQL几乎可以满足您的所有编程需求。仅在需要开放式灵活性时才使用动态SQL。当预编译时未知以下一项或多项时，建议使用它：<a id="d71876e193" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Sql语句的文本（命令，子句等等）</p>
                     </li>
                     <li>
                        <p>主机变量的数量</p>
                     </li>
                     <li>
                        <p>主机变量的数据类型</p>
                     </li>
                     <li>
                        <p>对数据库对象的引用，如列，索引，序列，表，用户名和视图</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ZZPRE873"></a><div class="props_rev_3"><a id="GUID-6E1145C9-54DD-4861-85B1-8F406701F65F" name="GUID-6E1145C9-54DD-4861-85B1-8F406701F65F"></a><h3 id="ZZPRE-GUID-6E1145C9-54DD-4861-85B1-8F406701F65F" class="sect3"><span class="enumeration_section">10.4</span>动态SQL语句的要求</h3>
               <div>
                  <p><a id="d71876e237" class="indexterm-anchor"></a>要表示动态SQL语句，字符串必须包含有效SQL语句的文本，但<span class="italic">不</span>包含EXEC SQL子句，主机语言分隔符或语句终止符或以下任何嵌入式SQL命令：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">关</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">宣布</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">描述</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">执行</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">取</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">包括</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">打开</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">准备</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">每当</code></p>
                     </li>
                  </ul>
                  <p><a id="d71876e283" class="indexterm-anchor"></a>在大多数情况下，字符串可以包含<span class="italic">虚拟</span>主机变量。它们在SQL语句中保存实际主机变量的位置。因为虚拟主机变量只是<a id="d71876e289" class="indexterm-anchor"></a><a id="d71876e293" class="indexterm-anchor"></a>占位符，您不会声明它们，并可以将它们命名为您喜欢的任何名称。例如，Oracle不区分以下两个字符串：</p><pre class="oac_no_warn" dir="ltr">'从EMP删除MGR =：mgr_number AND JOB =：job_title''从EMP删除MGR =：m AND JOB =：j'</pre></div>
            </div><a id="ZZPRE874"></a><div class="props_rev_3"><a id="GUID-30F8C760-69E7-4524-BF21-92C063CF513B" name="GUID-30F8C760-69E7-4524-BF21-92C063CF513B"></a><h3 id="ZZPRE-GUID-30F8C760-69E7-4524-BF21-92C063CF513B" class="sect3"><span class="enumeration_section">10.5</span>如何处理动态SQL语句</h3>
               <div>
                  <p><a id="d71876e321" class="indexterm-anchor"></a><a id="d71876e325" class="indexterm-anchor"></a>通常，应用程序会提示用户输入SQL语句的文本以及语句中使用的主机变量的值。然后Oracle <span class="italic">解析</span> SQL语句。也就是说，Oracle检查SQL语句以确保它遵循语法规则并引用有效的数据库对象。解析还涉及检查数据库访问权限，保留所需资源以及查找最佳访问路径。
                  </p>
                  <p><a id="d71876e332" class="indexterm-anchor"></a><a id="d71876e334" class="indexterm-anchor"></a>接下来，Oracle <span class="italic">将</span>主机变量<span class="italic">绑定</span>到SQL语句。也就是说，Oracle获取主机变量的地址，以便它可以读取或写入它们的值。
                  </p>
                  <p>然后Oracle <span class="italic">执行</span> SQL语句。也就是说，Oracle执行SQL语句请求的内容，例如从表中删除行。
                  </p>
                  <p>可以使用主机变量的新值重复执行SQL语句。</p>
               </div>
            </div><a id="ZZPRE876"></a><a id="ZZPRE875"></a><div class="props_rev_3"><a id="GUID-189A80C3-3816-42AC-AB03-CC664C0E9E85" name="GUID-189A80C3-3816-42AC-AB03-CC664C0E9E85"></a><h3 id="ZZPRE-GUID-189A80C3-3816-42AC-AB03-CC664C0E9E85" class="sect3"><span class="enumeration_section">10.6</span>使用动态SQL的方法</h3>
               <div>
                  <p>本节介绍可用于定义动态SQL语句的四种方法。它简要描述了每种方法的功能和局限性，然后提供了选择正确方法的指南。后面的部分描述了如何使用这些方法。此外，您可以在本指南的补充中找到示例主机语言程序。</p>
                  <p>这四种方法越来越普遍。也就是说，方法2包括方法1，方法3包括方法1和2，等等。但是，每种方法对于处理某种SQL语句最有用，如<a href="using-dynamic-SQL.html#GUID-189A80C3-3816-42AC-AB03-CC664C0E9E85__BCEGIJJC" title="使用动态sql的方法">表10-1</a>所示。
                  </p>
                  <div class="tblformal" id="GUID-189A80C3-3816-42AC-AB03-CC664C0E9E85__BCEGIJJC">
                     <p class="titleintable">表10-1动态SQL方法适用性</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="动态SQL方法适用性" width="100%" border="1" summary="methods for using dynamic sql" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="13%" id="d71876e390">方法</th>
                              <th align="left" valign="bottom" width="87%" id="d71876e393">一种SQL语句</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="13%" id="d71876e398" headers="d71876e390 ">
                                 <p>1</p>
                              </td>
                              <td align="left" valign="top" width="87%" headers="d71876e398 d71876e393 ">
                                 <p>没有输入主变量的非查询</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="13%" id="d71876e405" headers="d71876e390 ">
                                 <p>2</p>
                              </td>
                              <td align="left" valign="top" width="87%" headers="d71876e405 d71876e393 ">
                                 <p>具有已知数量的输入主变量的非查询</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="13%" id="d71876e412" headers="d71876e390 ">
                                 <p>3</p>
                              </td>
                              <td align="left" valign="top" width="87%" headers="d71876e412 d71876e393 ">
                                 <p>查询具有已知数量的选择列表项和输入主变量</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="13%" id="d71876e419" headers="d71876e390 ">
                                 <p>4</p>
                              </td>
                              <td align="left" valign="top" width="87%" headers="d71876e419 d71876e393 ">
                                 <p>查询具有未知数量的选择列表项或输入主变量</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>术语<span class="italic">select-list项</span>包括列名和表达式。
                  </p>
               </div><a id="ZZPRE877"></a><div class="props_rev_3"><a id="GUID-2CFACD56-25D2-417A-A5F1-C5917E3610B3" name="GUID-2CFACD56-25D2-417A-A5F1-C5917E3610B3"></a><h4 id="ZZPRE-GUID-2CFACD56-25D2-417A-A5F1-C5917E3610B3" class="sect4"><span class="enumeration_section">10.6.1</span>方法1</h4>
                  <div>
                     <div class="section">
                        <p>此方法允许程序接受或构建动态SQL语句，然后使用<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>命令立即执行它。SQL语句不能是查询（ <code class="codeph">SELECT</code>语句），并且不能包含输入主机变量的任何占位符。例如，以下主机字符串符合条件：</p><pre class="oac_no_warn" dir="ltr">'从EMP删除DEPTNO = 20''选择EMP到斯科特'</pre><p>使用方法1，每次执行时都会解析SQL语句（除非指定<code class="codeph">HOLD_CURSOR</code> = <code class="codeph">YES</code> ）。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE878"></a><div class="props_rev_3"><a id="GUID-F1FF4F30-336F-43D0-85C1-AAA624CEB9C8" name="GUID-F1FF4F30-336F-43D0-85C1-AAA624CEB9C8"></a><h4 id="ZZPRE-GUID-F1FF4F30-336F-43D0-85C1-AAA624CEB9C8" class="sect4"><span class="enumeration_section">10.6.2</span>方法2</h4>
                  <div>
                     <div class="section">
                        <p>此方法允许程序接受或构建动态SQL语句，然后使用<code class="codeph">PREPARE</code>和<code class="codeph">EXECUTE</code>命令对其进行处理<a id="d71876e501" class="indexterm-anchor"></a> 。SQL语句不能是查询。必须在预编译时知道输入主机变量的占位符数和输入主机变量的数据类型。例如，以下主机字符串属于以下类别：</p><pre class="oac_no_warn" dir="ltr">'INSERT INTO EMP（ENAME，JOB）VALUES（：emp_name，：job_title）''从EMP删除EMPNO =：emp_number'</pre><p>使用方法2，SQL语句只解析一次（除非您指定<code class="codeph">RELEASE_CURSOR</code> = <code class="codeph">YES</code> ），但它可以使用不同的主机变量值执行多次。诸如<code class="codeph">CREATE</code>类的SQL数据定义语句在它们是<code class="codeph">PREPARE</code> d时执行。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE879"></a><div class="props_rev_3"><a id="GUID-CDCAC1E4-5F06-421A-80FC-8B119B5788E8" name="GUID-CDCAC1E4-5F06-421A-80FC-8B119B5788E8"></a><h4 id="ZZPRE-GUID-CDCAC1E4-5F06-421A-80FC-8B119B5788E8" class="sect4"><span class="enumeration_section">10.6.3</span>方法3</h4>
                  <div>
                     <div class="section">
                        <p>此方法允许程序接受或构建动态查询，然后使用带有<code class="codeph">DECLARE</code> ， <code class="codeph">OPEN</code> ， <code class="codeph">FETCH</code>和<code class="codeph">CLOSE</code>游标命令的PREPARE命令处理它。必须在预编译时知道选择列表项的数量，输入主机变量的占位符数以及输入主机变量的数据类型。例如，以下主机字符串符合条件：</p><pre class="oac_no_warn" dir="ltr">'按DEPTNO从EMP GROUP中选择DEPTNO，MIN（SAL），MAX（SAL）''选择ENAME，EMPNO从EMP到DEPTNO =：dept_number'</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE880"></a><div class="props_rev_3"><a id="GUID-7711238F-BE2F-4858-8E6D-C7271375CF8B" name="GUID-7711238F-BE2F-4858-8E6D-C7271375CF8B"></a><h4 id="ZZPRE-GUID-7711238F-BE2F-4858-8E6D-C7271375CF8B" class="sect4"><span class="enumeration_section">10.6.4</span>方法4</h4>
                  <div>
                     <div class="section">
                        <p>此方法允许程序接受或构建动态SQL语句，然后使用描述符对其进行处理（在“使用方法4”中讨论）。在运行时之前，选择列表项的数量，输入主机变量的占位符数以及输入主机变量的数据类型可能是未知的。例如，以下主机字符串属于以下类别：</p><pre class="oac_no_warn" dir="ltr">'INSERT INTO EMP（&lt;unknown&gt;）VALUES（&lt;unknown&gt;）''SELECT &lt;unknown&gt; FROM EMP WHERE DEPTNO = 20'</pre><p>对于包含未知数量的选择列表项或输入主机变量的动态SQL语句，需要方法4。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE881"></a><div class="props_rev_3"><a id="GUID-A00CDB28-2CB4-4622-87CF-093FDBE172CD" name="GUID-A00CDB28-2CB4-4622-87CF-093FDBE172CD"></a><h4 id="ZZPRE-GUID-A00CDB28-2CB4-4622-87CF-093FDBE172CD" class="sect4"><span class="enumeration_section">10.6.5</span>指南</h4>
                  <div>
                     <p><a id="d71876e608" class="indexterm-anchor"></a><a id="d71876e612" class="indexterm-anchor"></a>使用所有四种方法，必须将动态SQL语句存储在字符串中，该字符串必须是主变量或带引号的文字。将SQL语句存储在字符串中时，请省略关键字EXEC SQL和语句终止符。
                     </p>
                     <p><a id="d71876e618" class="indexterm-anchor"></a>使用方法2和3，必须在预编译时知道输入主变量的占位符数和输入主变量的数据类型。
                     </p>
                     <p>每个后续方法对应用程序施加的约束较少，但编码起来更加困难。通常，使用最简单的方法。但是，如果要由方法1重复执行动态SQL语句，请使用方法2来避免每次执行的重新分析。</p>
                     <p>方法4提供了最大的灵活性，但需要复杂的编码和对动态SQL概念的充分理解。通常，仅当您不能使用方法1,2或3时才使用方法4。<a href="using-dynamic-SQL.html#GUID-2F002EC7-F447-4AA3-9646-65DFF46D3B3F__CHDJHDJA">图10-1中</a>的决策逻辑将帮助您选择正确的方法。
                     </p>
                  </div>
               </div><a id="ZZPRE883"></a><a id="ZZPRE882"></a><div class="props_rev_3"><a id="GUID-2F002EC7-F447-4AA3-9646-65DFF46D3B3F" name="GUID-2F002EC7-F447-4AA3-9646-65DFF46D3B3F"></a><h4 id="ZZPRE-GUID-2F002EC7-F447-4AA3-9646-65DFF46D3B3F" class="sect4"><span class="enumeration_section">10.6.6</span>避免常见错误</h4>
                  <div>
                     <div class="section">
                        <p>如果使用字符数组存储动态SQL语句，请在存储SQL语句之前对数组进行空白填充。这样，你就清除了无关紧要的角色。当您将数组重用于不同的SQL语句时，这一点尤为重要。通常，在存储SQL语句之前始终初始化（或重新初始化）主机字符串。</p>
                        <p>不要空终止主机字符串。Oracle不会将null终止符识别为字符串结尾的标记。相反，Oracle将其视为SQL语句的一部分。</p>
                        <p>如果使用<code class="codeph">VARCHAR</code>变量存储动态SQL语句，请确保在执行PREPARE或<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>语句之前正确设置（或重置） <code class="codeph">VARCHAR</code>的长度。
                        </p>
                        <p><code class="codeph">EXECUTE</code>重置SQLCA中的SQLWARN警告标志。因此，要捕获诸如无条件更新（由省略<code class="codeph">WHERE</code>子句引起）之类的错误，请在执行<code class="codeph">PREPARE</code>语句之后但在执行<code class="codeph">EXECUTE</code>语句之前检查SQLWARN标志。
                        </p>
                        <div class="figure" id="GUID-2F002EC7-F447-4AA3-9646-65DFF46D3B3F__CHDJHDJA">
                           <p class="titleinfigure">图10-1选择正确的方法</p><img src="img/image013.gif" alt="下面是图10-1的描述" title="下面是图10-1的描述" longdesc="img_text/image013.html"><br><a href="img_text/image013.html">“图10-1选择正确方法”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ZZPRE884"></a><div class="props_rev_3"><a id="GUID-16F4F40D-E2C0-455C-9088-9173F96218A0" name="GUID-16F4F40D-E2C0-455C-9088-9173F96218A0"></a><h3 id="ZZPRE-GUID-16F4F40D-E2C0-455C-9088-9173F96218A0" class="sect3"><span class="enumeration_section">10.7</span>关于使用方法1</h3>
               <div>
                  <p><a id="d71876e709" class="indexterm-anchor"></a>最简单的动态SQL语句仅导致“成功”或“失败”，并且不使用主机变量。一些例子如下：</p><pre class="oac_no_warn" dir="ltr">'DELETE FROM table_name WHERE column_name = constant''CREATE TABLE table_name ...''DROP INDEX index_name''UPDATE table_name SET column_name = constant''GRANT SELECT ON table_name TO username''REVOKE RESOURCE FROM username'</pre></div><a id="ZZPRE885"></a><div class="props_rev_3"><a id="GUID-96884DCF-A70A-4C01-84FB-14CE9E1B8A0B" name="GUID-96884DCF-A70A-4C01-84FB-14CE9E1B8A0B"></a><h4 id="ZZPRE-GUID-96884DCF-A70A-4C01-84FB-14CE9E1B8A0B" class="sect4"><span class="enumeration_section">10.7.1</span> EXECUTE IMMEDIATE语句</h4>
                  <div>
                     <div class="section">
                        <p><a id="d71876e738" class="indexterm-anchor"></a>方法1解析，然后使用<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>命令立即执行SQL语句。该命令后跟一个字符串（主机变量或文字），其中包含要执行的SQL语句，该语句不能是查询。
                        </p>
                        <p><a id="d71876e750" class="indexterm-anchor"></a> <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>语句的语法如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE IMMEDIATE {：host_string |字符串字面量 };</pre><p><a id="d71876e764" class="indexterm-anchor"></a>在以下示例中，您使用主机变量<span class="italic">sql_stmt</span>来存储用户输入的SQL语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION; ...sql_stmt CHARACTER（120）; EXEC SQL END DECLARE SECTION; ...LOOP显示'输入SQL语句：';读取sql_stmt;如果sql_stmt为空那么退出循环;万一; -  sql_stmt现在包含SQL语句的文本EXEC SQL EXECUTE IMMEDIATE：sql_stmt; ENDLOOP;</pre><p>您还可以使用字符串文字，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE IMMEDIATE'从MILLER中撤回资源';</pre><p>因为EXECUTE IMMEDIATE在每次执行之前解析输入SQL语句，所以方法1最适合仅执行一次的语句。数据定义语句通常属于此类别。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE886"></a><div class="props_rev_3"><a id="GUID-2589EFC3-AEF9-4B6E-ADE4-BA521B663E9C" name="GUID-2589EFC3-AEF9-4B6E-ADE4-BA521B663E9C"></a><h4 id="ZZPRE-GUID-2589EFC3-AEF9-4B6E-ADE4-BA521B663E9C" class="sect4"><span class="enumeration_section">10.7.2</span>一个例子</h4>
                  <div>
                     <p><a id="d71876e801" class="indexterm-anchor"></a>以下程序提示用户在<code class="codeph">UPDATE</code>语句的<code class="codeph">WHERE</code>子句中使用搜索条件，然后使用方法1执行语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION;用户名CHARACTER（20）;密码CHARACTER（20）; update_stmt CHARACTER（120）; EXEC SQL END DECLARE SECTION; search_cond CHARACTER（40）; EXEC SQL包含SQLCA;显示'用户名？“;读取用户名;显示'密码？“;读密码;执行SQL WHENEVER SQLERROR GOTO sql_error; EXEC SQL CONNECT：用户名IDENTIFIED BY：密码;显示'连接到Oracle'; set update_stmt ='UPDATE EMP SET COMM = 500 WHERE';显示'输入以下语句的搜索条件：'; display update_stmt;读search_cond; concatenate update_stmt，search_cond; EXEC SQL EXECUTE IMMEDIATE：update_stmt; EXEC SQL COMMIT WORK RELEASE;退出计划; sql_error：EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK工作版;显示'处理错误';退出程序有错误;</pre></div>
               </div>
            </div><a id="ZZPRE887"></a><div class="props_rev_3"><a id="GUID-6D4826F3-E794-4A64-A9E9-497B9096B4C7" name="GUID-6D4826F3-E794-4A64-A9E9-497B9096B4C7"></a><h3 id="ZZPRE-GUID-6D4826F3-E794-4A64-A9E9-497B9096B4C7" class="sect3"><span class="enumeration_section">10.8</span>关于使用方法2</h3>
               <div>
                  <p><a id="d71876e839" class="indexterm-anchor"></a>方法1在一步中做了什么，方法2做了两个。动态SQL语句， <a id="d71876e844" class="indexterm-anchor"></a>它不能是一个查询，首先是<code class="codeph">PREPARE</code> d（命名和解析），然后执行。
                  </p>
                  <p> <a id="d71876e854" class="indexterm-anchor"></a>使用方法2，SQL语句可以包含<a id="d71876e859" class="indexterm-anchor"></a>输入主变量和指标变量的占位符。您可以一次<code class="codeph">PREPARE</code> SQL语句，然后使用不同的主机变量值重复<code class="codeph">EXECUTE</code>它。而且，你<span class="italic">不必</span> rePREPARE后的SQL语句<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code> （除非你注销并重新连接）。
                  </p>
                  <p>请注意，您可以使用方法4对非查询<code class="codeph">EXECUTE</code> 。
                  </p>
                  <p><code class="codeph">PREPARE</code>语句的语法如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE statement_name FROM {：host_string |字符串字面量 };</pre><p><code class="codeph">PREPARE</code>解析SQL语句并为其命名。
                  </p>
                  <p><span class="italic">statement_name</span>是预编译器使用的标识符， <span class="italic">而不是</span>主机或程序变量，不应在Declare Section中声明。它只是指定要<code class="codeph">EXECUTE</code>的<code class="codeph">PREPAREd</code>语句。</p>
                  <p><code class="codeph">EXECUTE</code>语句的语法是</p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE statement_name [USING host_variable_list];</pre><p>其中<span class="italic">host_variable_list</span>代表以下语法：</p><pre class="oac_no_warn" dir="ltr">：host_variable1 [：indicator1] [，host_variable2 [：indicator2]，...]
</pre><p><code class="codeph">EXECUTE</code>使用为每个输入主机变量提供的值执行已解析的SQL语句。在以下示例中，输入SQL语句包含占位符<span class="italic">n</span> ：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION; ...emp_number INTEGER; delete_stmt CHARACTER（120）; EXEC SQL END DECLARE SECTION; search_cond CHARACTER（40）; ...set delete_stmt ='DELETE FROM EMP WHERE EMPNO =：n AND';显示'完成以下语句的搜索条件：'; display delete_stmt;读search_cond; concatenate delete_stmt，search_cond; EXEC SQL PREPARE sql_stmt FROM：delete_stmt; LOOP显示'输入员工编号：';读取emp_number;如果emp_number = 0那么退出循环; EXEC SQL EXECUTE sql_stmt USING：emp_number; ENDLOOP;</pre><p>使用方法2，您必须在预编译时知道输入主机变量的数据类型。在最后一个示例中， <span class="italic">emp_number</span>被声明为<code class="codeph">INTEGER</code>类型。它也可以声明为<code class="codeph">CHARACTER</code>或<code class="codeph">REAL</code>类型，因为Oracle支持所有这些数据类型转换为<code class="codeph">NUMBER</code>数据类型。
                  </p>
               </div><a id="ZZPRE888"></a><div class="props_rev_3"><a id="GUID-25E6C4AD-4E12-4039-BC00-586DD183E92F" name="GUID-25E6C4AD-4E12-4039-BC00-586DD183E92F"></a><h4 id="ZZPRE-GUID-25E6C4AD-4E12-4039-BC00-586DD183E92F" class="sect4"><span class="enumeration_section">10.8.1</span>使用条款</h4>
                  <div>
                     <p>当SQL语句为<code class="codeph">EXECUTEd</code> ， <code class="codeph">USING</code>子句中的输入主机变量将替换<code class="codeph">PREPAREd</code>动态SQL语句中的相应占位符。
                     </p>
                     <p>PREPAREd动态SQL语句中的每个占位符都必须与<code class="codeph">USING</code>子句中的主机变量相对应。因此，如果相同的占位符在<code class="codeph">PREPAREd</code>语句中出现两次或多次，则每个外观必须对应于<code class="codeph">USING</code>子句中的主变量。如果<code class="codeph">USING</code>子句中的一个主变量是一个数组，则所有主变量都必须是数组。
                     </p>
                     <p><a id="d71876e1001" class="indexterm-anchor"></a>占位符的名称不需要与主变量的名称匹配。但是， <code class="codeph">PREPAREd</code>动态SQL语句中占位符的顺序必须与<code class="codeph">USING</code>子句中相应主机变量的顺序匹配。
                     </p>
                     <p><a id="d71876e1013" class="indexterm-anchor"></a>要指定空值，可以将指示符变量与<code class="codeph">USING</code>子句中的主变量相关联。有关更多信息，请参阅<span class="q">“ <a href="using-embedded-SQL.html#GUID-E4FC1AF8-5BCC-49CB-B3A5-83C99CA7A45A">关于使用指示符变量</a> ”</span> 。
                     </p>
                  </div>
               </div><a id="ZZPRE889"></a><div class="props_rev_3"><a id="GUID-AFD24CAC-6353-4295-814B-0C8C5CCD25EB" name="GUID-AFD24CAC-6353-4295-814B-0C8C5CCD25EB"></a><h4 id="ZZPRE-GUID-AFD24CAC-6353-4295-814B-0C8C5CCD25EB" class="sect4"><span class="enumeration_section">10.8.2</span>一个例子</h4>
                  <div>
                     <p> <a id="d71876e1048" class="indexterm-anchor"></a>以下程序提示用户在<code class="codeph">UPDATE</code>语句的<code class="codeph">WHERE</code>子句中使用搜索条件，然后使用方法2准备并执行该语句。请注意， <code class="codeph">UPDATE</code>语句的<code class="codeph">SET</code>子句包含占位符（ <span class="italic">c</span> ）。
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION;用户名CHARACTER（20）;密码CHARACTER（20）; sql_stmt CHARACTER（80）; empno INTEGER VALUE 1234; deptno1 INTEGER VALUE 97; deptno2 INTEGER VALUE 99; EXEC SQL END DECLARE SECTION; EXEC SQL包含SQLCA; EXEC ORACLE选项（ORACA = YES）;执行SQL WHENEVER SQLERROR GOTO sql_error;显示'用户名？“;读取用户名;显示'密码？“;读密码; EXEC SQL CONNECT：用户名IDENTIFIED BY：密码;显示'连接到Oracle'; set sql_stmt ='INSERT INTO EMP（EMPNO，DEPTNO）VALUES（：v1，：v2）';显示“V1 =”，empno，“V2 =”，deptno1; EXEC SQL PREPARE S FROM：sql_stmt; EXEC SQL EXECUTE S使用：empno，：deptno1; set empno = empno + 1;显示“V1 =”，empno，“V2 =”，deptno2; EXEC SQL EXECUTE S使用：empno，：deptno2; set sql_stmt ='DELETE FROM EMP WHERE DEPTNO =：v1 OR DEPTNO =：v2“）'; display”V1 =“，deptno1，”V2 =“，deptno2; EXEC SQL PREPARE S FROM：sql_stmt; EXEC SQL EXECUTE S使用： deptno1，：deptno2; EXEC SQL COMMIT WORK RELEASE;退出程序; sql_error：EXEC SQL WHENEVER SQLERROR CONTINUE;显示'处理错误'; EXEC SQL ROLLBACK WORK RELEASE;退出程序出错;</pre></div>
               </div>
            </div><a id="ZZPRE890"></a><div class="props_rev_3"><a id="GUID-0234861C-39A8-4AE3-980E-31CA185076F1" name="GUID-0234861C-39A8-4AE3-980E-31CA185076F1"></a><h3 id="ZZPRE-GUID-0234861C-39A8-4AE3-980E-31CA185076F1" class="sect3"><span class="enumeration_section">10.9</span>关于使用方法3</h3>
               <div>
                  <p><a id="d71876e1093" class="indexterm-anchor"></a>方法3类似于方法2 <a id="d71876e1098" class="indexterm-anchor"></a>但是将<code class="codeph">PREPARE</code>语句与定义和操作游标所需的语句结合起来。这允许您的程序接受和处理查询。实际上，如果动态SQL语句是查询，则<span class="italic">必须</span>使用方法3或4。
                  </p>
                  <p><a id="d71876e1110" class="indexterm-anchor"></a>对于方法3，必须在预编译时知道查询选择列表中的列数和输入主机变量的占位符数。但是，在运行时之前不需要指定数据库对象（如表和列）的名称（它们不能复制主变量的名称）。还可以在运行时指定限制，分组和排序查询结果（例如<code class="codeph">WHERE</code> ， <code class="codeph">GROUP</code> <code class="codeph">BY</code>和<code class="codeph">ORDER</code> <code class="codeph">BY</code> ）的<code class="codeph">BY</code> 。
                  </p>
                  <p>使用方法3，您可以使用以下嵌入式SQL语句序列：</p><pre class="oac_no_warn" dir="ltr">PREPARE statement_name FROM {：host_string |字符串字面量 }; DECLARE cursor_name CURSOR FOR statement_name; OPEN cursor_name [USING host_variable_list]; FETCH cursor_name INTO host_variable_list; CLOSE cursor_name;</pre><p>现在让我们看看每个声明的作用。</p>
               </div><a id="ZZPRE891"></a><div class="props_rev_3"><a id="GUID-47931071-4091-4D65-9AD4-21D4BEC2804A" name="GUID-47931071-4091-4D65-9AD4-21D4BEC2804A"></a><h4 id="ZZPRE-GUID-47931071-4091-4D65-9AD4-21D4BEC2804A" class="sect4"><span class="enumeration_section">10.9.1准备</span></h4>
                  <div>
                     <div class="section">
                        <p><a id="d71876e1164" class="indexterm-anchor"></a> <code class="codeph">PREPARE</code>解析动态SQL语句并为其命名。在以下示例中， <code class="codeph">PREPARE</code>解析存储在字符串<span class="italic">select_stmt中</span>的查询，并为其指定名称<span class="italic">sql_stmt</span> ：</p><pre class="oac_no_warn" dir="ltr">set select_stmt ='SELECT MGR，JOB FROM EMP WHERE SAL &lt;：salary'; EXEC SQL PREPARE sql_stmt FROM：select_stmt;</pre><p>通常，查询<code class="codeph">WHERE</code>子句在运行时从终端输入或由应用程序生成。
                        </p>
                        <p>标识符<span class="italic">sql_stmt</span> <span class="italic">不是</span>主机或程序变量，但必须是唯一的。它指定一个特定的动态SQL语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE892"></a><div class="props_rev_3"><a id="GUID-E0FCAF15-F8E5-4AF8-A155-77ABA06C2370" name="GUID-E0FCAF15-F8E5-4AF8-A155-77ABA06C2370"></a><h4 id="ZZPRE-GUID-E0FCAF15-F8E5-4AF8-A155-77ABA06C2370" class="sect4"><span class="enumeration_section">10.9.2声明</span></h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">DECLARE</code>通过为游标指定名称并将其与特定查询相关联来定义游标。游标声明是其预编译单元的本地。继续我们的示例， <code class="codeph">DECLARE</code>定义了一个名为<span class="italic">emp_cursor</span>的游标并将其与<span class="italic">sql_stmt</span>相关联，如下所示：</p><pre class="oac_no_warn" dir="ltr"><a id="d71876e1230" class="indexterm-anchor"></a>执行SQL DECLARE emp_cursor CURSOR FOR sql_stmt;</pre><p>标识符<span class="italic">sql_stmt</span>和<span class="italic">emp_cursor</span> <span class="italic">不是</span>主机或程序变量，但必须是唯一的。如果使用相同的语句名称声明两个游标，则预编译器会将两个游标名称视为同义。例如，如果执行语句</p><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE sql_stmt FROM：select_stmt; EXEC SQL DECLARE emp_cursor FOR sql_stmt; EXEC SQL PREPARE sql_stmt FROM：delete_stmt; EXEC SQL DECLARE dept_cursor FOR sql_stmt;</pre><p>当您打开<span class="italic">emp_cursor时</span> ，您将处理存储在<span class="italic">delete_stmt</span>中的动态SQL语句，而不是存储在<span class="italic">select_stmt</span>中的动态SQL语句<span class="italic">。</span></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE893"></a><div class="props_rev_3"><a id="GUID-D6313AED-13FD-42B7-B229-5694EE080400" name="GUID-D6313AED-13FD-42B7-B229-5694EE080400"></a><h4 id="ZZPRE-GUID-D6313AED-13FD-42B7-B229-5694EE080400" class="sect4"><span class="enumeration_section">10.9.3</span>开放</h4>
                  <div>
                     <div class="section">
                        <p><a id="d71876e1287" class="indexterm-anchor"></a> <code class="codeph">OPEN</code>分配Oracle游标，绑定输入主机变量，并执行查询，识别其活动集。OPEN还将光标定位在活动集中的第一行，并将SQLCA中SQLERRD的第三个元素保留的行处理计数归零。 USING子句中的输入主机变量替换<code class="codeph">PREPAREd</code>动态SQL语句中的相应占位符。
                        </p>
                        <p>在我们的示例中， <code class="codeph">OPEN</code>分配<span class="italic">emp_cursor</span>并将主机变量<span class="italic">salary</span>分配给<code class="codeph">WHERE</code>子句，如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN emp_cursor使用：salary;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE894"></a><div class="props_rev_3"><a id="GUID-A2105218-5AF9-481E-B7D9-8607062E76B7" name="GUID-A2105218-5AF9-481E-B7D9-8607062E76B7"></a><h4 id="ZZPRE-GUID-A2105218-5AF9-481E-B7D9-8607062E76B7" class="sect4"><span class="enumeration_section">10.9.4</span> FETCH</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">FETCH</code>从活动集返回一行，将选择列表中的列值分配给<code class="codeph">INTO</code>子句中的相应主机变量，并将光标前进到下一行。当找不到更多行时， <code class="codeph">FETCH</code>将“无数据找到”Oracle错误代码返回到SQLCA中的SQLCODE。</p>
                        <p><a id="d71876e1345" class="indexterm-anchor"></a>在我们的示例中，FETCH从活动集返回一行，并将列MGR和JOB的值分配给主变量<span class="italic">mgr_number</span>和<span class="italic">job_title</span> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FETCH emp_cursor INTO：mgr_number，：job_title;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE895"></a><div class="props_rev_3"><a id="GUID-1D1151ED-608B-4B8C-AA38-6B6449340665" name="GUID-1D1151ED-608B-4B8C-AA38-6B6449340665"></a><h4 id="ZZPRE-GUID-1D1151ED-608B-4B8C-AA38-6B6449340665" class="sect4"><span class="enumeration_section">10.9.5</span>关闭</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CLOSE</code>禁用光标。<code class="codeph">CLOSE</code>游标后，您无法再从中进行<code class="codeph">FETCH</code> 。在我们的示例中， <code class="codeph">CLOSE</code>语句禁用<span class="italic">emp_cursor</span> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CLOSE emp_cursor;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE896"></a><div class="props_rev_3"><a id="GUID-2F2CF0C2-9066-462C-AD85-D377DB2B7766" name="GUID-2F2CF0C2-9066-462C-AD85-D377DB2B7766"></a><h4 id="ZZPRE-GUID-2F2CF0C2-9066-462C-AD85-D377DB2B7766" class="sect4"><span class="enumeration_section">10.9.6</span>一个例子</h4>
                  <div>
                     <p> <a id="d71876e1420" class="indexterm-anchor"></a>以下程序提示用户在查询的<code class="codeph">WHERE</code>子句中使用搜索条件，然后使用方法3准备并执行查询。
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION;用户名CHARACTER（20）;密码CHARACTER（20）; dept_number INTEGER; emp_name CHARACTER（10）;工资真实; select_stmt CHARACTER（120）; EXEC SQL END DECLARE SECTION; search_cond CHARACTER（40）; EXEC SQL包含SQLCA;显示'用户名？“;读取用户名;显示'密码？“;读密码;执行SQL WHENEVER SQLERROR GOTO sql_error; EXEC SQL CONNECT：用户名IDENTIFIED BY：密码;显示'连接到Oracle'; set select_stmt ='SELECT ENAME，SAL FROM EMP WHERE';显示'输入以下语句的搜索条件：'; display select_stmt;读search_cond; concatenate select_stmt，search_cond; EXEC SQL PREPARE sql_stmt FROM：select_stmt;执行SQL DECLARE emp_cursor CURSOR FOR sql_stmt; EXEC SQL OPEN emp_cursor; EXEC SQL WHENEVER NOT FOUND GOTO no_more;显示'员工薪水';显示'-------- ------'; LOOP EXEC SQL FETCH emp_cursor INTO：emp_name，：salary;显示emp_name，工资; ENDLOOP; no_more：EXEC SQL CLOSE emp_cursor; EXEC SQL COMMIT WORK RELEASE;退出计划; sql_error：EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK工作版;退出程序有错误;</pre></div>
               </div>
            </div><a id="ZZPRE897"></a><div class="props_rev_3"><a id="GUID-C4762850-789A-463B-B573-7A7630EC1931" name="GUID-C4762850-789A-463B-B573-7A7630EC1931"></a><h3 id="ZZPRE-GUID-C4762850-789A-463B-B573-7A7630EC1931" class="sect3"><span class="enumeration_section">10.10</span>使用方法4</h3>
               <div>
                  <p><a id="d71876e1455" class="indexterm-anchor"></a>方法4的实现非常依赖于语言。因此，本节仅概述。有关详细信息，请参阅主机语言补充。
                  </p>
                  <p>您的程序无法使用方法3处理某种动态SQL语句。如果输入主机变量的选择列表项或占位符的数量在运行时之前是未知的，则程序必须使用描述符。一个<a id="d71876e1462" class="indexterm-anchor"></a> <span class="italic">descriptor</span>是程序和Oracle用于在动态SQL语句中保存变量的完整描述的内存区域。
                  </p>
                  <p><a id="d71876e1470" class="indexterm-anchor"></a>回想一下，对于多行查询，您将<code class="codeph">FETCH</code>选定的列值<code class="codeph">INTO</code>到已声明的输出主机变量列表中。如果选择列表未知，则<code class="codeph">INTO</code>子句无法在预编译时建立主机变量列表。例如，您知道以下查询返回两个列值：</p><pre class="oac_no_warn" dir="ltr">SELECT ENAME，EMPNO from EMP WHERE DEPTNO =：dept_number;</pre><p>但是，如果您让用户定义选择列表，您可能不知道查询将返回多少列值。</p>
               </div><a id="ZZPRE898"></a><div class="props_rev_3"><a id="GUID-EE32B8F6-EC76-4413-8654-553D0D04B0B7" name="GUID-EE32B8F6-EC76-4413-8654-553D0D04B0B7"></a><h4 id="ZZPRE-GUID-EE32B8F6-EC76-4413-8654-553D0D04B0B7" class="sect4"><span class="enumeration_section">10.10.1</span>需要SQLDA</h4>
                  <div>
                     <p><a id="d71876e1513" class="indexterm-anchor"></a>要处理这种动态查询，您的程序必须发出<code class="codeph">DESCRIBE</code> <code class="codeph">SELECT</code> <code class="codeph">LIST</code>命令并声明一个名为SQL Descriptor Area的数据结构<a id="d71876e1525" class="indexterm-anchor"></a> （SQLDA）。因为它包含查询选择列表中列的描述，所以此结构也称为<span class="italic">选择描述符</span> 。
                     </p>
                     <p>同样，如果动态SQL语句包含输入主机变量的未知数量的占位符，则<code class="codeph">USING</code>子句无法在预编译时建立主机变量列表。
                     </p>
                     <p><a id="d71876e1539" class="indexterm-anchor"></a>要处理动态SQL语句，程序必须发出<code class="codeph">DESCRIBE</code> <code class="codeph">BIND</code> <code class="codeph">VARIABLES</code>命令并声明另一种称为<span class="italic">绑定描述符</span>的SQLDA，以保存输入主机变量占位符的描述。（输入主变量也称为<span class="italic">绑定变量</span> 。）
                     </p>
                     <p>如果您的程序有多个活动的SQL语句（例如，它可能打开了两个或更多个游标），则每个语句都必须有自己的SQLDA。但是，非并发游标可以重用SQLDA。程序中的SQLDA数量没有设置限制。</p>
                  </div>
               </div><a id="ZZPRE899"></a><div class="props_rev_3"><a id="GUID-FD8C392F-A0A6-41C7-BCC5-4EBB51D35630" name="GUID-FD8C392F-A0A6-41C7-BCC5-4EBB51D35630"></a><h4 id="ZZPRE-GUID-FD8C392F-A0A6-41C7-BCC5-4EBB51D35630" class="sect4"><span class="enumeration_section">10.10.2</span> DESCRIBE声明</h4>
                  <div>
                     <div class="section">
                        <p><a id="d71876e1581" class="indexterm-anchor"></a> DESCRIBE初始化描述符以保存选择列表项或输入主变量的描述。<a id="d71876e1584" class="indexterm-anchor"></a></p>
                        <p>如果提供选择描述符，则<code class="codeph">DESCRIBE</code> <code class="codeph">SELECT</code> <code class="codeph">LIST</code>语句将检查<code class="codeph">PREPAREd</code>动态查询中的每个选择列表项，以确定其名称，数据类型，约束，长度，比例和精度。然后它将此信息存储在选择描述符中。
                        </p>
                        <p>如果提供绑定描述符，则<code class="codeph">DESCRIBE</code> <code class="codeph">BIND</code> <code class="codeph">VARIABLES</code>语句将检查<code class="codeph">PREPAREd</code>动态SQL语句中的每个占位符，以确定其名称，长度以及其关联的输入主机变量的数据类型。然后，它将此信息存储在绑定描述符中供您使用。例如，您可以使用占位符名称来提示用户输入主机变量的值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ZZPRE900"></a><div class="props_rev_3"><a id="GUID-094EB69B-E8A7-4ACA-BB74-BDEDA29C02D0" name="GUID-094EB69B-E8A7-4ACA-BB74-BDEDA29C02D0"></a><h4 id="ZZPRE-GUID-094EB69B-E8A7-4ACA-BB74-BDEDA29C02D0" class="sect4"><span class="enumeration_section">10.10.3</span>什么是SQLDA？
                  </h4>
                  <div>
                     <p>SQLDA是一种主机程序数据结构，它包含选择列表项或输入主机变量的描述。</p>
                     <p>SQLDA变量<span class="italic">未</span>在Declare部分中定义。
                     </p>
                     <p>虽然SQLDAs在主机语言中有所不同，但通用选择SQLDA包含有关查询选择列表的以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以描述的最大列数</p>
                        </li>
                        <li>
                           <p>由describe找到的实际列数</p>
                        </li>
                        <li>
                           <p>用于存储列值的缓冲区地址</p>
                        </li>
                        <li>
                           <p>列值的长度</p>
                        </li>
                        <li>
                           <p>列值的数据类型</p>
                        </li>
                        <li>
                           <p>指标变量值的地址</p>
                        </li>
                        <li>
                           <p>用于存储列名称的缓冲区地址</p>
                        </li>
                        <li>
                           <p>用于存储列名称的缓冲区大小</p>
                        </li>
                        <li>
                           <p>列名的当前长度</p>
                        </li>
                     </ul>
                     <p>通用绑定SQLDA包含有关SQL语句中输入主机变量的以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可以描述的最大占位符数</p>
                        </li>
                        <li>
                           <p>通过describe找到的实际占位符数</p>
                        </li>
                        <li>
                           <p>输入主变量的地址</p>
                        </li>
                        <li>
                           <p>输入主机变量的长度</p>
                        </li>
                        <li>
                           <p>输入主机变量的数据类型</p>
                        </li>
                        <li>
                           <p>指标变量的地址</p>
                        </li>
                        <li>
                           <p>用于存储占位符名称的缓冲区地址</p>
                        </li>
                        <li>
                           <p>用于存储占位符名称的缓冲区大小</p>
                        </li>
                        <li>
                           <p>占位符名称的当前长度</p>
                        </li>
                        <li>
                           <p>用于存储指示符变量名称的缓冲区地址</p>
                        </li>
                        <li>
                           <p>用于存储指示符变量名称的缓冲区大小</p>
                        </li>
                        <li>
                           <p>指标变量名称的当前长度</p>
                        </li>
                     </ul>
                     <p>要查看特定主机语言的SQLDA结构和变量名称，请参阅主机语言补充。</p>
                  </div>
               </div><a id="ZZPRE901"></a><div class="props_rev_3"><a id="GUID-62C89F8E-21BB-43A3-A3BE-D21A95DCF1D3" name="GUID-62C89F8E-21BB-43A3-A3BE-D21A95DCF1D3"></a><h4 id="ZZPRE-GUID-62C89F8E-21BB-43A3-A3BE-D21A95DCF1D3" class="sect4"><span class="enumeration_section">10.10.4</span>实施方法4</h4>
                  <div>
                     <p>使用方法4，通常使用以下嵌入式SQL语句序列：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE statement_name FROM {：host_string |字符串字面量 }; EXEC SQL DECLARE cursor_name CURSOR FOR statement_name;对于statement_name INTO bind_descriptor_name，EXEC SQL DESCRIBE BIND VARIABLES; EXEC SQL OPEN cursor_name [USING DESCRIPTOR bind_descriptor_name]; EXEC SQL DESCRIBE [SELECT LIST FOR] statement_name INTO select_descriptor_name; EXEC SQL FETCH cursor_name使用DESCRIPTOR select_descriptor_name; EXEC SQL CLOSE cursor_name;</pre><p>选择和绑定描述符不需要串联工作。如果查询选择列表中的列数已知，但输入主机变量的占位符数未知，则可以使用方法4 <code class="codeph">OPEN</code>语句和以下方法3 <code class="codeph">FETCH</code>语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FETCH emp_cursor INTO host_variable_list;</pre><p>相反，如果已知输入主变量的占位符数，但选择列表中的列数未知，则可以将以下方法3 <code class="codeph">OPEN</code>语句与方法4 <code class="codeph">FETCH</code>语句一起使用：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OPEN cursor_name [USING host_variable_list];</pre><p>请注意， <code class="codeph">EXECUTE</code>可用于方法4的非查询。
                     </p>
                     <p>要了解这些语句如何允许程序使用描述符处理动态SQL语句，请参阅主机语言补充。</p>
                  </div>
               </div>
            </div><a id="ZZPRE902"></a><div class="props_rev_3"><a id="GUID-364E812E-312C-42BE-B0DA-7AC132EF46B8" name="GUID-364E812E-312C-42BE-B0DA-7AC132EF46B8"></a><h3 id="ZZPRE-GUID-364E812E-312C-42BE-B0DA-7AC132EF46B8" class="sect3"><span class="enumeration_section">10.11</span>关于使用DECLARE STATEMENT语句</h3>
               <div>
                  <p><a id="d71876e1788" class="indexterm-anchor"></a>使用方法2,3和4，您可能需要使用该语句</p><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT db_name] DECLARE statement_name STATEMENT;</pre><p>其中<span class="italic">db_name</span>和<span class="italic">statement_name</span>是预编译器使用的标识符， <span class="italic">而不是</span>主机或程序变量。
                  </p>
                  <p><code class="codeph">DECLARE</code> <code class="codeph">STATEMENT</code>声明动态SQL语句的名称，以便<code class="codeph">PREPARE</code> ， <code class="codeph">EXECUTE</code> ， <code class="codeph">DECLARE</code> <code class="codeph">CURSOR</code>和<code class="codeph">DESCRIBE</code>可以引用该语句。它是<a id="d71876e1829" class="indexterm-anchor"></a>如果要在非默认数据库中执行动态SQL语句，则需要。使用方法2的示例如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT remote_db DECLARE sql_stmt STATEMENT; EXEC SQL PREPARE sql_stmt FROM：sql_string; EXEC SQL EXECUTE sql_stmt;</pre><p>在该示例中， <span class="italic">remote_db</span>告诉Oracle在哪里<code class="codeph">EXECUTE</code> SQL语句。
                  </p>
                  <p><a id="d71876e1845" class="indexterm-anchor"></a>用方法<a id="d71876e1850" class="indexterm-anchor"></a> 3和<a id="d71876e1855" class="indexterm-anchor"></a> 4，如果DECLARE <code class="codeph">CURSOR</code>语句在PREPARE语句之前，则还需要<code class="codeph">DECLARE</code> <code class="codeph">STATEMENT</code> ，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE sql_stmt STATEMENT;执行SQL DECLARE emp_cursor CURSOR FOR sql_stmt; EXEC SQL PREPARE sql_stmt FROM：sql_string;</pre><p>通常的陈述顺序是</p><pre class="oac_no_warn" dir="ltr">EXEC SQL PREPARE sql_stmt FROM：sql_string;执行SQL DECLARE emp_cursor CURSOR FOR sql_stmt;</pre></div><a id="ZZPRE903"></a><div class="props_rev_3"><a id="GUID-406CB08D-F866-43B6-9420-27AF3EFA288E" name="GUID-406CB08D-F866-43B6-9420-27AF3EFA288E"></a><h4 id="ZZPRE-GUID-406CB08D-F866-43B6-9420-27AF3EFA288E" class="sect4"><span class="enumeration_section">10.11.1</span>主机阵列的使用</h4>
                  <div>
                     <p><a id="d71876e1896" class="indexterm-anchor"></a><a id="d71876e1900" class="indexterm-anchor"></a>在静态和动态SQL中使用主机数组是类似的。例如，要将输入主机数组与动态SQL方法2一起使用，请使用语法</p><pre class="oac_no_warn" dir="ltr">EXEC SQL EXECUTE statement_name USING host_array_list;</pre><p>其中<span class="italic">host_array_list</span>包含一个或多个主机阵列。使用方法3，使用以下语法：</p><pre class="oac_no_warn" dir="ltr">OPEN cursor_name使用host_array_list;</pre><p>要使用方法3使用输出主机数组，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">FETCH cursor_name INTO host_array_list;</pre><p>使用方法4，必须使用可选的FOR子句告诉Oracle输入或输出主机阵列的大小。要了解如何完成此操作，请参阅主机语言补充。</p>
                     <p></p>
                  </div>
               </div>
            </div><a id="ZZPRE904"></a><div class="props_rev_3"><a id="GUID-25F8ABB7-6A51-4C3A-9DE7-DF86E3E3AA6B" name="GUID-25F8ABB7-6A51-4C3A-9DE7-DF86E3E3AA6B"></a><h3 id="ZZPRE-GUID-25F8ABB7-6A51-4C3A-9DE7-DF86E3E3AA6B" class="sect3"><span class="enumeration_section">10.12</span>关于使用PL / SQL</h3>
               <div>
                  <p><a id="d71876e1943" class="indexterm-anchor"></a> Oracle预编译器将PL / SQL块视为单个SQL语句。所以，就像一个<a id="d71876e1946" class="indexterm-anchor"></a> SQL语句，PL / SQL块可以存储在字符串主变量或文字中。将PL / SQL块存储在字符串中时，省略关键字EXEC SQL <code class="codeph">EXECUTE</code> ，关键字END-EXEC和语句终止符。
                  </p>
                  <p>但是，预编译器处理SQL和PL / SQL的方式有两点不同：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>预编译器将所有PL / SQL主变量视为<span class="italic">输入</span>主变量，无论它们是PL / SQL块内的输入还是输出主变量（或两者）。
                        </p>
                     </li>
                     <li>
                        <p>您无法从PL / SQL块进行FETCH，因为它可能包含任意数量的SQL语句。</p>
                     </li>
                  </ul>
               </div><a id="ZZPRE905"></a><div class="props_rev_3"><a id="GUID-208024EB-90D7-4CAA-95BA-342240FBF1C7" name="GUID-208024EB-90D7-4CAA-95BA-342240FBF1C7"></a><h4 id="ZZPRE-GUID-208024EB-90D7-4CAA-95BA-342240FBF1C7" class="sect4"><span class="enumeration_section">10.12.1</span>使用方法1</h4>
                  <div>
                     <p><a id="d71876e1987" class="indexterm-anchor"></a>如果PL / SQL块不包含主机变量，则可以使用方法1以常规方式<code class="codeph">EXECUTE</code> PL / SQL字符串。
                     </p>
                  </div>
               </div><a id="ZZPRE906"></a><div class="props_rev_3"><a id="GUID-3D0AF9F7-3851-469E-8F84-F1D07345F2D9" name="GUID-3D0AF9F7-3851-469E-8F84-F1D07345F2D9"></a><h4 id="ZZPRE-GUID-3D0AF9F7-3851-469E-8F84-F1D07345F2D9" class="sect4"><span class="enumeration_section">10.12.2</span>使用方法2</h4>
                  <div>
                     <p><a id="d71876e2016" class="indexterm-anchor"></a>如果PL / SQL块包含已知数量的输入和输出主机变量，则可以使用方法2以常规方式<code class="codeph">PREPARE</code>和<code class="codeph">EXECUTE</code> PL / SQL字符串。
                     </p>
                     <p>您必须将<span class="italic">所有</span>主变量放在USING子句中。当PL / SQL字符串为<code class="codeph">EXECUTEd</code> ，USING子句中的主变量将替换<code class="codeph">PREPAREd</code>字符串中的相应占位符。虽然预编译器将所有PL / SQL主机变量视为输入主机变量，但是值是正确分配的。输入（程序）值分配给输入主变量，输出（列）值分配给输出主变量。
                     </p>
                     <p><code class="codeph">PREPAREd</code> PL / SQL字符串中的每个占位符都必须与<code class="codeph">USING</code>子句中的主机变量相对应。因此，如果相同的占位符在<code class="codeph">PREPAREd</code>字符串中出现两次或多次，则每个外观必须对应于USING子句中的主机变量。
                     </p>
                  </div>
               </div><a id="ZZPRE907"></a><div class="props_rev_3"><a id="GUID-60E80DC6-F288-4123-8DC6-DC363E25DA04" name="GUID-60E80DC6-F288-4123-8DC6-DC363E25DA04"></a><h4 id="ZZPRE-GUID-60E80DC6-F288-4123-8DC6-DC363E25DA04" class="sect4"><span class="enumeration_section">10.12.3</span>方法3</h4>
                  <div>
                     <p><a id="d71876e2071" class="indexterm-anchor"></a>除了方法3允许<code class="codeph">FETCHing</code>之外，方法2和3是相同的。由于您无法从PL / SQL块进行<code class="codeph">FETCH</code> ，因此请改用方法2。
                     </p>
                  </div>
               </div><a id="ZZPRE908"></a><div class="props_rev_3"><a id="GUID-8A644727-9074-424E-AF79-AA6603091DA3" name="GUID-8A644727-9074-424E-AF79-AA6603091DA3"></a><h4 id="ZZPRE-GUID-8A644727-9074-424E-AF79-AA6603091DA3" class="sect4"><span class="enumeration_section">10.12.4</span>使用方法4</h4>
                  <div>
                     <p><a id="d71876e2103" class="indexterm-anchor"></a>如果PL / SQL块包含未知数量的输入或输出主机变量，则必须使用方法4。
                     </p>
                     <p>要使用方法4，请为所有输入和输出主机变量设置一个绑定描述符。执行<code class="codeph">DESCRIBE</code> <code class="codeph">BIND</code> <code class="codeph">VARIABLES</code>将有关输入<span class="italic">和</span>输出主机变量的信息存储在绑定描述符中。由于预编译器将所有PL / SQL主机变量视为输入主机变量，因此执行<code class="codeph">DESCRIBE</code> <code class="codeph">SELECT</code> <code class="codeph">LIST</code>无效。
                     </p>
                     <p>在主机语言补充中详细介绍了使用方法4绑定描述符。</p>
                     <div class="infoboxnote" id="GUID-8A644727-9074-424E-AF79-AA6603091DA3__GUID-7EAD97A0-939E-447A-B096-27A0121065AB">
                        <p class="notep1">注意：</p>
                        <p>在动态SQL方法4中，主机数组不能绑定到带有“table”类型参数的PL / SQL过程。</p>
                     </div>
                  </div>
               </div><a id="ZZPRE909"></a><div class="props_rev_3"><a id="GUID-F12F7699-0216-407A-8DED-A3F068C839A6" name="GUID-F12F7699-0216-407A-8DED-A3F068C839A6"></a><h4 id="ZZPRE-GUID-F12F7699-0216-407A-8DED-A3F068C839A6" class="sect4"><span class="enumeration_section">10.12.5</span>注意</h4>
                  <div>
                     <p><a id="d71876e2158" class="indexterm-anchor"></a>不要在将动态处理的PL / SQL块中使用ANSI样式的注释（ -   -  ...），因为忽略了行尾字符。因此，ANSI样式的注释扩展到块的末尾，而不仅仅是行的末尾。相反，使用C风格的评论（/ * ...* /）。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00673.transformation-and-validation-of-XMLType-data.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="There are several Oracle SQL functions and XMLType APIs for transforming XMLType data using XSLT stylesheets and for validating XMLType instances against an XML schema."></meta>
      <meta name="description" content="There are several Oracle SQL functions and XMLType APIs for transforming XMLType data using XSLT stylesheets and for validating XMLType instances against an XML schema."></meta>
      <title>XMLType数据的转换和验证</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="There are several Oracle SQL functions and XMLType APIs for transforming XMLType data using XSLT stylesheets and for validating XMLType instances against an XML schema."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="indexes-for-XMLType-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="relational-data-to-and-from-XML-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="indexes-for-XMLType-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="relational-data-to-and-from-XML-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manipulation-of-XML-in-XML-DB.html" property="item" typeof="WebPage"><span property="name">在Oracle XML DB中操作XML数据</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XMLType数据的转换和验证</li>
            </ol>
            <a id="GUID-EC4E2212-67EF-425C-AB5E-D48E62EAB9A7" name="GUID-EC4E2212-67EF-425C-AB5E-D48E62EAB9A7"></a><a id="ADXDB0900"></a>
            
            <h2 id="ADXDB-GUID-EC4E2212-67EF-425C-AB5E-D48E62EAB9A7" class="sect2"><span class="enumeration_chapter">7</span> XMLType数据的转换和验证</h2>
         </header>
         <div class="ind">
            <div>
               <p>有几个Oracle SQL函数和<code class="codeph">XMLType</code> API，用于使用XSLT样式表转换<code class="codeph">XMLType</code>数据，以及根据XML模式验证<code class="codeph">XMLType</code>实例。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D">XSL转换和Oracle XML DB</a><br>您可以使用内置的Oracle XML DB XSLT处理器将XSL转换应用于基于XML Schema的文档。数据库内特定于XML的优化可以显着减少所需的内存，消除与解析相关的开销，并减少网络流量。
                  </li>
                  <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50">验证XMLType实例</a><br>除了需要知道特定XML文档是否格式正确之外，您还经常需要知道它是否符合给定的XML模式，即它是否对该XML模式有效。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="manipulation-of-XML-in-XML-DB.html#GUID-87C758D5-5792-483D-8894-4C01FCD2A8A0" title="此处介绍了以下内容：XQuery，XMLType操作和XML数据索引。">在Oracle XML DB中处理XML数据</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB4172"></a><a id="ADXDB4171"></a><div class="props_rev_3"><a id="GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D" name="GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D"></a><h3 id="ADXDB-GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D" class="sect3"><span class="enumeration_section">7.1</span> XSL转换和Oracle XML DB</h3>
               <div>
                  <p>您可以使用内置的Oracle XML DB XSLT处理器将XSL转换应用于基于XML Schema的文档。数据库内特定于XML的优化可以显着减少所需的内存，消除与解析相关的开销，并减少网络流量。</p>
                  <p>W3C XSLT Recommendation定义了一种XML语言，用于指定如何将XML文档从一种形式转换为另一种形式。有关XSLT标准的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_xslt" target="_blank"><code class="codeph">http://www.w3.org/TR/xslt</code></a> 。
                  </p>
                  <p>转换可以包括从一个XML模式映射到另一个XML模式，或者从XML映射到某些其他格式（如HTML或WML）。</p>
                  <p>就内存量和所需的处理而言，XSL转换可能是昂贵的。在典型的XSL处理器中，必须先解析整个源文档和样式表，然后才能开始处理。通常，XSL处理器使用DOM来提供文档和样式表的动态内存表示，以允许随机访问其不同的部分。然后，XSL处理器将样式表应用于源文档，生成第三个文档。</p>
                  <p>在开始转换之前将文档和样式表解析并加载到内存中需要大量的内存和处理器资源。当只需要转换文档的一小部分时，效率特别低。</p>
                  <p>Oracle XML DB包含一个XSLT处理器，可<span class="italic">在数据库</span>中执行XSL转换。通过这种方式，它可以提供特定于XML的优化，可以显着减少执行转换所需的内存，消除与解析相关的开销，并减少网络流量。
                  </p>
                  <p>但是， <span class="italic">仅</span>当转换源是基于<span class="italic">模式的</span> XML文档时， <span class="italic">才能</span>使用这些优化。在这种情况下，在处理开始之前无需解析。随着节点的访问，Oracle XML DB延迟加载的虚拟DOM仅在需要时加载内容。这也减少了所需的内存，因为只加载了需要处理的文档的一部分。
                  </p>
                  <p>您可以通过以下方式转换XML数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在Oracle数据库中 - 使用Oracle SQL函数<code class="codeph">XMLtransform</code> ， <code class="codeph">XMLType</code>方法<code class="codeph">transform()</code>或PL / SQL包<code class="codeph">DBMS_XSLPROCESSOR</code></p>
                     </li>
                     <li>
                        <p>在中间层 - 使用Oracle XML Developer的Kit转换选项，例如XSLT Processor for Java。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D__GUID-EF4E8E76-0AB6-4F9D-90FA-750FD31F6442">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关SQL函数<code class="codeph">XMLTransform</code>信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=SQLRF06171" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="PLSQL-APIs-for-XMLType.html#GUID-0E3358AF-0819-4B17-AF0B-793E96DA5EB9" title="您可以使用PL / SQL包DBMS_XSLPROCESSOR将一个XML文档转换为另一个XML文档，或将XML数据转换为HTML，PDF或其他格式。该包遍历文档的DOM树，并对其应用可扩展样式表语言转换（XSLT）语句以生成转换后的文档。">用于XMLType的PL / SQL XSLT处理器（DBMS_XSLPROCESSOR）</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=ARPLS379" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a>有关PL / SQL包<code class="codeph">DBMS_XSLPROCESSOR</code></p>
                        </li>
                        <li>
                           <p>有关XSLT Processor for Java的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=ADXDK19222" target="_blank"><span><cite>Oracle XML Developer's Kit程序员指南</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <p>这些XML转换方法中的每一个都以<code class="codeph">XMLType</code>实例的形式将源XML文档和XSL样式表作为输入。对于SQL函数<code class="codeph">XMLtransform</code>和<code class="codeph">XMLType</code>方法<code class="codeph">transform()</code> ， <code class="codeph">transform()</code>的结果可以是XML文档或非XML文档，例如HTML。但是，对于PL / SQL包<code class="codeph">DBMS_XSLPROCESSOR</code> ，转换的结果应该是有效的XML文档。使用包<code class="codeph">DBMS_XSLPROCESSOR</code>进行转换生成的任何HTML数据都是XHTML数据，它既是有效的XML数据，也是有效的HTML数据。
                  </p>
                  <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D__BJFCGIFJ">例7-1</a>显示了XSLT样式表<code class="codeph">PurchaseOrder.xsl</code> 。完整的样式表在<a href="oracle-supplied-XML-schemas-and-examples.html#GUID-7593BF83-2C00-477D-8973-C070253C4456" title="完整列表提供了XSLT样式表PurchaseOrder.xsl，它在各种示例中使用。">XSLT样式表示例PurchaseOrder.xsl中给出</a> 。
                  </p>
                  <p>对于<a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D__BJFCGIFJ">示例7-1</a>的样式表，这些不是Oracle XML DB特有的。样式表可以存储在<code class="codeph">XMLType</code>表或列中，也可以存储为Oracle XML DB Repository中的非基于模式的XML数据。
                  </p>
                  <div class="example" id="GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D__BJFCGIFJ">
                     <p class="titleinexample">示例7-1 XSLT样式表示例：PurchaseOrder.xsl</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“WINDOWS-1252”？&gt; &lt;xsl：stylesheet version =“1.0”xmlns：xsl =“http://www.w3.org/1999/XSL/Transform”xmlns：xdb =“http://xmlns.oracle.com/xdb”xmlns： xsi =“http://www.w3.org/2001/XMLSchema-instance”&gt; &lt;xsl：template match =“/”&gt; &lt;html&gt; &lt;head /&gt; &lt;body bgcolor =“＃003333”text =“＃FFFFCC “link =”＃FFCC00“vlink =”＃66CC99“alink =”＃669999“&gt; &lt;FONT FACE =”Arial，Helvetica，sans-serif“&gt; &lt;xsl：for-each select =”PurchaseOrder“/&gt; &lt;xsl： for-each select =“PurchaseOrder”&gt; &lt;center&gt; &lt;span style =“font-family：Arial; font-weight：bold”&gt; &lt;FONT COLOR =“＃FF0000”&gt; &lt;B&gt; PurchaseOrder &lt;/ B&gt; &lt;/ FONT &gt; &lt;/ span&gt; &lt;/ center&gt; &lt;br/&gt; &lt;center&gt; &lt;xsl：for-each select =“Reference”&gt; &lt;span style =“font-family：Arial; font-weight：bold”&gt; &lt;xsl：apply -templates /&gt; &lt;/ span&gt; &lt;/ xsl：for-each&gt; &lt;/ center&gt; &lt;/ xsl：for-each&gt; &lt;P&gt; &lt;xsl：for-each select =“PurchaseOrder”&gt; &lt;br/&gt; &lt;/ xsl ：for-each&gt; &lt;P /&gt; &lt;P&gt; &lt;xsl：for-each select =“PurchaseOrder”&gt; &lt;br/&gt; &lt;/ xsl：for-each&gt; &lt;/ P&gt; &lt;/ P&gt; &lt;xsl：for-each select =“PurchaseOrder”/&gt; &lt;xsl：for-each select =“PurchaseOrder”&gt; &lt;table border =“0”width =“100％”BGCOLOR =“＃000000”&gt; &lt;tb ody&gt; &lt;tr&gt; &lt;td WIDTH =“296”&gt; &lt;P&gt; &lt;B&gt; &lt;FONT SIZE =“+ 1”COLOR =“＃FF0000”FACE =“Arial，Helvetica，sans-serif”&gt;内部&lt;/ FONT&gt; &lt;/ B&gt; &lt;/ P&gt; <span class="bold">......</span>&lt;/ td&gt; &lt;td width =“93”/&gt; &lt;td valign =“top”WIDTH =“340”&gt; &lt;B&gt; &lt;FONT COLOR =“＃FF0000”&gt; &lt;FONT SIZE =“+ 1”&gt;送货到&lt; / FONT&gt; &lt;/ FONT&gt; &lt;/ B&gt; &lt;xsl：for-each select =“ShippingInstructions”&gt; &lt;xsl：if test =“position（）= 1”/&gt; &lt;/ xsl：for-each&gt; &lt;xsl：for -each select =“ShippingInstructions”&gt; &lt;/ xsl：for-each&gt; <span class="bold">...</span>
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8">SQL函数XMLTRANSFORM和XMLType方法TRANSFORM（）</a><br>SQL函数<code class="codeph">XMLtransform</code>使用XSLT样式表转换XML文档。它按照样式表的指定将处理后的输出作为XML，HTML等返回。
                     </li>
                     <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF">使用DBUri Servlet进行XSL转换</a><br>您可以将XSL转换应用于由DBUri servlet生成的XML内容。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-EC4E2212-67EF-425C-AB5E-D48E62EAB9A7" title="有几个Oracle SQL函数和XMLType API，用于使用XSLT样式表转换XMLType数据，以及根据XML模式验证XMLType实例。">XMLType数据的转换和验证</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4722"></a><a id="ADXDB4723"></a><a id="ADXDB4721"></a><div class="props_rev_3"><a id="GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8" name="GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8"></a><h4 id="ADXDB-GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8" class="sect4"><span class="enumeration_section">7.1.1</span> SQL函数XMLTRANSFORM和XMLType方法TRANSFORM（）</h4>
                  <div>
                     <p>SQL函数<code class="codeph">XMLtransform</code>使用XSLT样式表转换XML文档。它按照样式表的指定将处理后的输出作为XML，HTML等返回。
                     </p>
                     <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8__I1026954">图7-1</a>显示了Oracle SQL函数<code class="codeph">XMLtransform</code>的语法。此函数将<code class="codeph">XMLType</code>实例和XSLT样式表作为参数。样式表可以是<code class="codeph">XMLType</code>实例或<code class="codeph">VARCHAR2</code>字符串文字。它将样式表应用于实例并返回<code class="codeph">XMLType</code>实例。
                     </p>
                     <div class="figure" id="GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8__I1026954">
                        <p class="titleinfigure">图7-1 XMLTRANSFORM语法</p><img src="img/xmltransform.gif" width="391" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/xmltransform.html"><br><a href="img_text/xmltransform.html">“图7-1 XMLTRANSFORM语法”的说明</a></div>
                     <!-- class="figure" -->
                     <p>您也可以使用<code class="codeph">XMLType</code>方法<code class="codeph">transform()</code>作为Oracle SQL函数<code class="codeph">XMLtransform</code>的替代方法。它具有相同的功能。
                     </p>
                     <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8__I1026237">图7-2</a>显示了<code class="codeph">XMLtransform</code>如何使用XSLT样式表转换XML文档。它按照XSLT样式表的指定将处理后的输出作为XML，HTML等返回。在数据库中检索或生成存储为<code class="codeph">XMLType</code> XML文档时，通常使用<code class="codeph">XMLtransform</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8__GUID-D322B013-B74D-40C1-90A9-9A4D54B532F9">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="intro-to-XML-DB.html#GUID-A8E97BAC-3685-46C8-8FD9-3D31D36F9344" title="Oracle XML DB通过以可互操作的方式包含SQL和XML数据模型，为Oracle数据库提供本机XML支持。">Oracle XML DB简介中的</a> <a href="intro-to-XML-DB.html#GUID-43B25825-FE37-4782-B627-8B2EFB44068D__BABCJCII">图1-3</a></p>
                     </div>
                     <div class="figure" id="GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8__I1026237">
                        <p class="titleinfigure">图7-2使用XMLTRANSFORM</p><img src="img/adxdb008.png" width="405" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/adxdb008.html"><br><a href="img_text/adxdb008.html">“图7-2使用XMLTRANSFORM”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091">XMLTRANSFORM和XMLType.transform（）：示例</a><br>示例说明如何使用Oracle SQL函数<code class="codeph">XMLtransform</code>和<code class="codeph">XMLType</code>方法<code class="codeph">transform()</code>将存储为<code class="codeph">XMLType</code> XML数据转换为各种格式。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D" title="您可以使用内置的Oracle XML DB XSLT处理器将XSL转换应用于基于XML Schema的文档。数据库内特定于XML的优化可以显着减少所需的内存，消除与解析相关的开销，并减少网络流量。">XSL转换和Oracle XML DB</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4725"></a><a id="ADXDB4726"></a><a id="ADXDB4728"></a><a id="ADXDB4173"></a><a id="ADXDB4724"></a><div class="props_rev_3"><a id="GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091" name="GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091"></a><h5 id="ADXDB-GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091" class="sect5"><span class="enumeration_section">7.1.1.1</span> XMLTRANSFORM和XMLType.transform（）：实施例</h5>
                     <div>
                        <p>示例说明如何使用Oracle SQL函数<code class="codeph">XMLtransform</code>和<code class="codeph">XMLType</code>方法<code class="codeph">transform()</code>将存储为<code class="codeph">XMLType</code> XML数据转换为各种格式。
                        </p>
                        <div class="section">
                           <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__CFHJDEJE">示例7-2</a>设置了本章中运行其他示例所需的XML模式和表。这里对<code class="codeph">deleteSchema</code>的调用确保在创建之前没有现有的XML模式。如果不存在此类模式，则<code class="codeph">deleteSchema</code>会引发错误。
                           </p>
                           <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__I1027535">示例7-3</a>存储了一个XSLT样式表，然后检索它并将其与Oracle SQL函数<code class="codeph">XMLTransform</code>一起使用，以转换<a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__CFHJDEJE">示例7-2中</a>存储的XML数据。
                           </p>
                           <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__CFHGHGJI">例7-4</a>使用<code class="codeph">XMLType</code>方法<code class="codeph">transform()</code>和动态创建的XSL样式表。
                           </p>
                           <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__BJFJJDIB">示例7-5</a>使用<code class="codeph">XMLTransform</code>应用XSL样式表来生成HTML代码。PL / SQL构造函数<code class="codeph">XDBURIType</code>从Oracle XML DB Repository读取XSL样式表。
                           </p>
                           <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__BJFJJDIB">例7-5中</a>只显示了HTML结果的一部分。省略部分以表示省略号（ <span class="bold"><code class="codeph">. . .</code></span> ）。<a href="transformation-and-validation-of-XMLType-data.html#GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF__BABJGIGH">图7-3</a>显示了Web浏览器中转换结果的样子。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__CFHJDEJE">
                           <p class="titleinexample">示例7-2注册XML模式并插入XML数据</p><pre class="oac_no_warn" dir="ltr">BEGIN  - 删除架构（如果已存在）。DBMS_XMLSCHEMA.deleteSchema（'http://www.example.com/schemas/ipo.xsd',4）;结束; / BEGIN  - 注册架构DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;'http://www.example.com/schemas/ipo.xsd',SCHEMADOC =&gt;'&lt;schema targetNamespace =“http://www.example.com / IPO“xmlns =”http://www.w3.org/2001/XMLSchema“xmlns：ipo =”http://www.example.com/IPO“&gt; &lt;！ -  annotation&gt; &lt;documentation xml：lang = “en”&gt; Example.com版权所有2000 Example.com的国际采购订单架构。版权所有。&lt;/ documentation&gt; &lt;/ annotation  - &gt; &lt;element name =“purchaseOrder”type =“ipo：PurchaseOrderType”/&gt; &lt;element name =“comment”type =“string”/&gt; &lt;complexType name =“PurchaseOrderType”&gt; &lt;sequence &gt; &lt;element name =“shipTo”type =“ipo：Address”/&gt; &lt;element name =“billTo”type =“ipo：Address”/&gt; &lt;element ref =“ipo：comment”minOccurs =“0”/&gt; &lt; element name =“items”type =“ipo：Items”/&gt; &lt;/ sequence&gt; &lt;attribute name =“orderDate”type =“date”/&gt; &lt;/ complexType&gt; &lt;complexType name =“Items”&gt; &lt;sequence&gt; &lt;element name =“item”minOccurs =“0”maxOccurs =“unbounded”&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =“productName”type =“string”/&gt; &lt;element name =“quantity”&gt; &lt;simpleType&gt; &lt;restriction base =“positiveInteger”&gt; &lt;maxExclusive value =“100”/&gt; &lt;/ restriction&gt; &lt;/ simpleType&gt; &lt;/ element&gt; &lt;element name =“USPrice”type =“decimal”/&gt; &lt;element ref =“ipo：comment”minOccurs =“0”/&gt; &lt;element name =“shipDate”type =“date”minOccurs =“0”/&gt; &lt;/ sequence&gt; &lt;attribute name =“partNum”type =“ipo：SKU”use =“required”/&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;comp lexType name =“Address”&gt; &lt;sequence&gt; &lt;element name =“name”type =“string”/&gt; &lt;element name =“street”type =“string”/&gt; &lt;element name =“city”type =“string” /&gt; &lt;element name =“state”type =“string”/&gt; &lt;element name =“country”type =“string”/&gt; &lt;element name =“zip”type =“string”/&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;simpleType name =“SKU”&gt; &lt;restriction base =“string”&gt; &lt;pattern value =“[0-9] {3}  -  [AZ] {2}”/&gt; &lt;/ restriction&gt; &lt;/ simpleType&gt; &lt; / schema&gt;'，LOCAL =&gt; TRUE，GENTYPES =&gt; TRUE）;结束; /  - 创建表以保存XML采购订单文档，并插入文档DROP TABLE po_tab; CREATE TABLE po_tab（id NUMBER，xmlcol XMLType）XMLType COLUMN xmlcol XMLSCHEMA“http://www.example.com/schemas/ipo.xsd”ELEMENT“purchaseOrder”; INSERT INTO po_tab VALUES（1，XMLType（'&lt;？xml版本=“1.0”？&gt; &lt;ipo：purchaseOrder xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xmlns：ipo =“http://www.example.com/IPO”xsi：schemaLocation =“http： //www.example.com/IPO http://www.example.com/schemas/ipo.xsd“orderDate =”1999-12-01“&gt; &lt;shipTo&gt; &lt;name&gt; Helen Zoe &lt;/ name&gt; &lt;street&gt; 121百老汇&lt;/ street&gt; &lt;city&gt;加的夫&lt;/ city&gt; &lt;州&gt;威尔士&lt;/ state&gt; &lt;country&gt;英国&lt;/ country&gt; &lt;zip&gt; CF2 1QJ &lt;/ zip&gt; &lt;/ shipTo&gt; &lt;billTo&gt; &lt;name&gt; Robert史密斯&lt;/ name&gt; &lt;street&gt; 8 Oak Avenue &lt;/ street&gt; &lt;city&gt;旧城区&lt;/ city&gt; &lt;州&gt; CA &lt;/ state&gt; &lt;country&gt; US &lt;/ country&gt; &lt;zip&gt; 95819 &lt;/ zip&gt; &lt;/ billTo&gt; &lt;items&gt; &lt;item partNum =“833-AA”&gt; &lt;productName&gt; Lapis项链&lt;/ productName&gt; &lt;数量&gt; 1 &lt;/数量&gt; &lt;USPrice&gt; 99.95 &lt;/ USPrice&gt; &lt;ipo：comment&gt;想要这个假期！&lt;/ ipo：comment&gt; &lt;shipDate&gt; 1999-12-05 &lt;/ shipDate&gt; &lt;/ item&gt; &lt;/ items&gt; &lt;/ ipo：purchaseOrder&gt;'））;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__I1027535">
                           <p class="titleinexample">示例7-3使用SQL函数XMLTRANSFORM应用XSL样式表</p><pre class="oac_no_warn" dir="ltr">DROP TABLE stylesheet_tab; CREATE TABLE stylesheet_tab（id NUMBER，stylesheet XMLType）; INSERT INTO stylesheet_tab VALUES（1，XMLType（'&lt;？xml版本=“1.0”？&gt; &lt;xsl：stylesheet version =“1.0”xmlns：xsl =“http://www.w3.org/1999/XSL/Transform”&gt; &lt;xsl：template match =“*”&gt; &lt;td&gt; &lt;xsl：choose&gt; &lt;xsl：when test =“count（child :: *）&gt; 1”&gt; &lt;xsl：call-template name =“nested”/&gt; &lt;/ xsl：when&gt; &lt;xsl：otherwise&gt; &lt;xsl：value-of select = “name（。）”/&gt;：&lt;xsl：value-of select =“text（）”/&gt; &lt;/ xsl：otherwise&gt; &lt;/ xsl：choose&gt; &lt;/ td&gt; &lt;/ xsl：template&gt; &lt;xsl：template match =“*”name =“nested”priority =“ -  1”mode =“nested2”&gt; &lt;b&gt; &lt;！ -  xsl：value-of select =“count（child :: *）”/  - &gt; &lt; xsl：choose&gt; &lt;xsl：when test =“count（child :: *）&gt; 1”&gt; &lt;xsl：value-of select =“name（。）”/&gt;：&lt;xsl：apply-templates mode =“nested2” /&gt; &lt;/ xsl：when&gt; &lt;xsl：otherwise&gt; &lt;xsl：value-of select =“name（。）”/&gt;：&lt;xsl：value-of select =“text（）”/&gt; &lt;/ xsl：否则&gt; &lt;/ xsl：choose&gt; &lt;/ b&gt; &lt;/ xsl：template&gt; &lt;/ xsl：stylesheet&gt;'））; SELECT XMLSerialize（DOCUMENT <span class="bold">XMLtransform</span> （x.xmlcol，y.stylesheet）AS VARCHAR2（1000））AS结果FROM po_tab x，stylesheet_tab y WHERE y.id = 1;</pre><p>这会产生以下输出（为了便于阅读，这里打印漂亮）：</p><pre class="oac_no_warn" dir="ltr">结果------------------------------------------------- -------- &lt;td&gt; &lt;b&gt; ipo：purchaseOrder：&lt;b&gt; shipTo：&lt;b&gt;名称：Helen Zoe &lt;/ b&gt; &lt;b&gt;街道：100 Broadway &lt;/ b&gt; &lt;b&gt;城市：加的夫&lt;/ b&gt; &lt;b&gt;州：威尔士&lt;/ b&gt; &lt;b&gt;国家：英国&lt;/ b&gt; &lt;b&gt;邮编：CF2 1QJ &lt;/ b&gt; &lt;/ b&gt; &lt;b&gt; billTo：&lt;b&gt;姓名：罗伯特史密斯&lt;/ b&gt; &lt;b&gt;街道：8橡树大道&lt;/ b&gt; &lt;b&gt;城市：旧城区&lt;/ b&gt; &lt;b&gt;州：CA &lt;/ b&gt; &lt;b&gt;国家：美国&lt;/ b&gt; &lt; b&gt; zip：95819 &lt;/ b&gt; &lt;/ b&gt; &lt;b&gt;项目：&lt;/ b&gt; &lt;/ b&gt; &lt;/ td&gt;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__CFHGHGJI">
                           <p class="titleinexample">示例7-4使用带有Transient XSL样式表的XMLType方法TRANSFORM（）</p><pre class="oac_no_warn" dir="ltr">SELECT ResultSet.getString（column DOCUMENT x.xmlcol。 <span class="bold">变换</span> （的XMLType（'&lt;？xml版本=“1.0”？&gt; &lt;xsl：stylesheet version =“1.0”xmlns：xsl =“http://www.w3.org/1999/XSL/Transform”&gt; &lt;xsl：template match =“*”&gt; &lt;td&gt; &lt;xsl：choose&gt; &lt;xsl：when test =“count（child :: *）&gt; 1”&gt; &lt;xsl：call-template name =“nested”/&gt; &lt;/ xsl：when&gt; &lt;xsl：otherwise&gt; &lt;xsl：value-of select = “name（。）”/&gt;：&lt;xsl：value-of select =“text（）”/&gt; &lt;/ xsl：otherwise&gt; &lt;/ xsl：choose&gt; &lt;/ td&gt; &lt;/ xsl：template&gt; &lt;xsl：template match =“*”name =“nested”priority =“ -  1”mode =“nested2”&gt; &lt;b&gt; &lt;！ -  xsl：value-of select =“count（child :: *）”/  - &gt; &lt; xsl：choose&gt; &lt;xsl：when test =“count（child :: *）&gt; 1”&gt; &lt;xsl：value-of select =“name（。）”/&gt;：&lt;xsl：apply-templates mode =“nested2” /&gt; &lt;/ xsl：when&gt; &lt;xsl：otherwise&gt; &lt;xsl：value-of select =“name（。）”/&gt;：&lt;xsl：value-of select =“text（）”/&gt; &lt;/ xsl：否则&gt; &lt;/ xsl：choose&gt; &lt;/ b&gt; &lt;/ xsl：template&gt; &lt;/ xsl：stylesheet&gt;'））AS varchar2（1000））FROM po_tab x;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8AC216AA-45F5-43F1-8E0E-0A85021E7091__BJFJJDIB">
                           <p class="titleinexample">示例7-5使用XMLTRANSFORM应用使用XDBURIType检索的XSL样式表</p><pre class="oac_no_warn" dir="ltr">SELECT <span class="bold">XMLTransform</span> （OBJECT_VALUE， <span class="bold">XDBURIType</span> （'/ sources /schemas / poSource / xsl /purchaseOrder.xsl'）。getXML（））FROM purchaseorder WHERE XMLExists（'$ p / PurchaseOrder [Reference =“SBELL-2002100912333601PDT”]'PASSING OBJECT_VALUE AS “p”）; XMLTRANSFORM（OBJECT_VALUE，XDBURITYPE（'/ SOURCE / SCHEMAS / POSOURCE / XSL / PURCHASEORDER.XSL'）。GET ------------------------------------------------- -------------------------------------------- &lt;html xmlns：xdb = “http://xmlns.oracle.com/xdb”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”&gt; &lt;head /&gt; &lt;body bgcolor =“＃003333”text =“ #FFFFCC“link =”＃FFCC00“vlink =”＃66CC99“alink =”＃669999“&gt; &lt;FONT FACE =”Arial，Helvetica，sans-serif“&gt; &lt;center&gt; &lt;span style =”font-family：Arial; font-weight：bold“&gt; &lt;FONT COLOR =”＃FF0000“&gt; &lt;B&gt; PurchaseOrder &lt;/ B&gt; &lt;/ FONT&gt; &lt;/ span&gt; &lt;/ center&gt; &lt;br/&gt; &lt;center&gt; &lt;span style =”font- family：Arial; font-weight：bold“&gt; SBELL-2002100912333601PDT &lt;/ span&gt; &lt;/ center&gt; &lt;P&gt; &lt;br/&gt; &lt;P&gt; &lt;P&gt; &lt;/ P&gt; &lt;/ P&gt; &lt;table border =“0”width =“100％”BGCOLOR =“＃000000”&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td WIDTH =“296”&gt; &lt;P&gt; &lt;B&gt; &lt;FONT SIZE =“+ 1”COLOR =“＃ FF0000“FACE =”Arial，Helvetica，sans-serif“&gt;内部&lt;/ FONT&gt; &lt;/ B&gt; &lt;/ P&gt; &lt;table border =”0“width =”98％“BGCOLOR =”＃000099“&gt;</pre><pre class="oac_no_warn" dir="ltr"><span class="bold">。 。 。</span></pre><pre class="oac_no_warn" dir="ltr">&lt;/ table&gt; &lt;/ td&gt; &lt;td width =“93”&gt; &lt;/ td&gt; &lt;td valign =“top”WIDTH =“340”&gt; &lt;B&gt; &lt;FONT COLOR =“＃FF0000”&gt; &lt;FONT SIZE =“ +1“&gt;发货至&lt;/ FONT&gt; &lt;/ FONT&gt; &lt;/ B&gt; &lt;table border =”0“BGCOLOR =”＃999900“&gt; <span class="bold">。 。 。</span>&lt;/ table&gt; &lt;/ td&gt; &lt;/ tr&gt; &lt;/ tbody&gt; &lt;/ table&gt; &lt;br/&gt; &lt;B&gt; &lt;FONT COLOR =“＃FF0000”SIZE =“+ 1”&gt;项目：&lt;/ FONT&gt; &lt;/ B&gt; &lt;br/&gt; &lt;br/&gt; &lt;table border =“0”&gt; <span class="bold">。 。 。</span>&lt;/ table&gt; &lt;/ FONT&gt; &lt;/ body&gt; &lt;/ html&gt;选择了1行。</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8" title="SQL函数XMLtransform使用XSLT样式表转换XML文档。它按照样式表的指定将处理后的输出作为XML，HTML等返回。">SQL函数XMLTRANSFORM和XMLType方法TRANSFORM（）</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4227"></a><a id="ADXDB4228"></a><a id="ADXDB4226"></a><div class="props_rev_3"><a id="GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF" name="GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF"></a><h4 id="ADXDB-GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF" class="sect4"><span class="enumeration_section">7.1.2</span>使用DBUri Servlet进行XSL转换</h4>
                  <div>
                     <p>您可以将XSL转换应用于由DBUri servlet生成的XML内容。</p>
                     <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF__BABJGIGH">图7-3</a>显示了这种转换的结果。URL如下（在此处拆分和截断）：</p><pre class="pre codeblock"><code>http：// localhost：8080 / oradb / SCOTT / PURCHASEORDER / ROW / PurchaseOrder [Reference =“SBELL-2003030912333601PDT”] contenttype = text / html＆ <span class="bold">transform = / home / SCOTT / xsl / purchaseOrder.xsl</span> ...
</code></pre><p>参数<code class="codeph">transform</code>的存在使DBUri servlet使用SQL函数<code class="codeph">XMLTransform</code>将<code class="codeph">/home/SCOTT/xsl/purchaseOrder.xsl</code>的XSL样式表应用于由主URL标识的<code class="codeph">PurchaseOrder</code>文档。转换结果（HTML代码）返回给浏览器进行显示。URL还使用参数<code class="codeph">contentType</code>指定最终文档的MIME类型是<code class="codeph">text/html</code> 。
                     </p>
                     <div class="figure" id="GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF__BABJGIGH">
                        <p class="titleinfigure">图7-3使用DBUri Servlet的PurchaseOrder的数据库XSL转换</p><img src="img/xslt_po.gif" width="515" alt="下面是图7-3的描述" title="下面是图7-3的描述" longdesc="img_text/xslt_po.html"><br><a href="img_text/xslt_po.html">“图7-3使用DBUri Servlet的PurchaseOrder的数据库XSL转换”的描述</a></div>
                     <!-- class="figure" -->
                     <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF__CEGGCDJE">图7-4</a>显示了显示为HTML文档的表<code class="codeph">departments</code> 。您无需代码即可实现此目的。您只需要一个基于SQL / XML函数的<code class="codeph">XMLType</code>视图，一个行业标准的XSL样式表和<code class="codeph">DBUri</code> servlet。
                     </p>
                     <div class="figure" id="GUID-A35A47AF-A28C-4B2F-BB1C-AA10500E3BAF__CEGGCDJE">
                        <p class="titleinfigure">图7-4使用DBUri Servlet的Departments表的数据库XSL转换</p><img src="img/dburi_emp.gif" width="597" alt="下面是图7-4的描述" title="下面是图7-4的描述" longdesc="img_text/dburi_emp.html"><br><a href="img_text/dburi_emp.html">“图7-4使用DBUri Servlet的Departments表的数据库XSL转换”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-DBEB8B7E-B335-4D07-8A5D-42083A83155D" title="您可以使用内置的Oracle XML DB XSLT处理器将XSL转换应用于基于XML Schema的文档。数据库内特定于XML的优化可以显着减少所需的内存，消除与解析相关的开销，并减少网络流量。">XSL转换和Oracle XML DB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4729"></a><div class="props_rev_3"><a id="GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50" name="GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50"></a><h3 id="ADXDB-GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50" class="sect3"><span class="enumeration_section">7.2</span>验证XMLType实例</h3>
               <div>
                  <p>除了需要知道特定XML文档是否格式正确之外，您还经常需要知道它是否符合给定的XML模式，即它是否对该XML模式有效。</p>
                  <p>基于XML模式的数据存储为二进制XML，无论何时插入或更新，它都会自动完全验证。此验证不需要构建DOM。它使用流式传输完成，这是有效的并且最小化了内存使用。</p>
                  <p>对于以对象关系存储的<code class="codeph">XMLType</code>数据，完整验证需要构建DOM，这在内存管理方面可能是昂贵的。因此，当您插入或更新以对象关系存储的数据时，Oracle XML DB不会自动执行完全验证。
                  </p>
                  <p>但是，在分解XML数据以对象关系存储它的过程中，Oracle XML DB会自动执行部分验证，以确保XML文档的结构符合从XML模式派生的SQL数据类型定义。</p>
                  <p>如果要求对对象存储的<code class="codeph">XMLType</code>数据进行完全验证，则在将数据插入数据库或更新数据之前，请考虑在客户端上进行验证。
                  </p>
                  <p>您可以使用以下命令执行完整验证并操作XML文档的记录验证状态：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle SQL函数<span class="bold"><code class="codeph">XMLIsValid</code></span>和<code class="codeph">XMLType</code>方法<span class="bold"><code class="codeph">IsSchemaValid()</code></span> - 无条件地运行验证过程。不记录任何验证状态。返回：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果确定文件<span class="italic">有效，</span>则为<code class="codeph">1</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果确定文档<span class="italic">无效</span>或<span class="italic">无法确定</span>文档的有效性，则为<code class="codeph">0</code> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">XMLType</code>方法<span class="bold"><code class="codeph">SchemaValidate()</code></span> - 如果验证状态为<code class="codeph">0</code> ，则运行验证过程，默认情况下为<code class="codeph">0</code> 。如果确定文档<span class="italic">有效，</span>则将验证状态设置为<code class="codeph">1</code> 。（否则，状态保持为<code class="codeph">0</code> ）
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">XMLType</code>方法<span class="bold"><code class="codeph">isSchemaValidated()</code></span>返回<code class="codeph">XMLType</code>实例的记录验证状态。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">XMLType</code>方法<span class="bold"><code class="codeph">setSchemaValidated()</code></span>设置（记录） <code class="codeph">XMLType</code>实例的验证状态。
                        </p>
                     </li>
                  </ul>
                  <p>验证状态表明有效性的知识，如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">1</code>表示该文档已知<span class="italic">有效</span> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">0</code>表示文档的有效性<span class="italic">未知</span> 。在验证检查期间，该文档可能已被证明无效，但未记录该无效性。记录的验证状态为<code class="codeph">0</code>表示仅缺乏关于文档有效性的知识。
                        </p>
                     </li>
                  </ul>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-BEF51F7F-33A8-4FED-AA21-FE8849821BEC">部分和完整XML模式验证</a><br>将基于XML模式的文档插入数据库时，可以部分或完全验证它们。
                     </li>
                     <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B">验证存储为XMLType的XML数据：示例</a><br>此处的示例说明了如何使用Oracle SQL函数<code class="codeph">XMLIsValid</code>和<code class="codeph">XMLType</code>方法<code class="codeph">isSchemaValid()</code>和<code class="codeph">schemaValidate()</code>来验证在Oracle XML DB中存储为<code class="codeph">XMLType</code>的XML数据。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50__GUID-F462B68A-F414-4F2B-98FB-5EBD0D1D0AAE">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关Oracle SQL函数<code class="codeph">XMLIsValid</code>信息，请<a href="../sqlrf/XMLISVALID.html#SQLRF06147" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/XMLTYPE.html#ARPLS369" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>有关<code class="codeph">XMLType</code>方法的信息<code class="codeph">IsSchemaValid()</code> ， <code class="codeph">IsSchemaValidated()</code> ， <code class="codeph">SchemaValidate()</code>和<code class="codeph">setSchemaValidated()</code></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-EC4E2212-67EF-425C-AB5E-D48E62EAB9A7" title="有几个Oracle SQL函数和XMLType API，用于使用XSLT样式表转换XMLType数据，以及根据XML模式验证XMLType实例。">XMLType数据的转换和验证</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4102"></a><div class="props_rev_3"><a id="GUID-BEF51F7F-33A8-4FED-AA21-FE8849821BEC" name="GUID-BEF51F7F-33A8-4FED-AA21-FE8849821BEC"></a><h4 id="ADXDB-GUID-BEF51F7F-33A8-4FED-AA21-FE8849821BEC" class="sect4"><span class="enumeration_section">7.2.1</span>部分和完整XML模式验证</h4>
                  <div>
                     <p>将基于XML模式的文档插入数据库时，可以部分或完全验证它们。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-2360608F-BA11-4BEB-98F3-E79888A57BDD">部分验证</a><br>对于二进制XML存储，Oracle XML DB在将基于XML模式的文档插入<code class="codeph">XMLType</code>表或列时会完全验证它们。对于对象关系XML存储，仅执行部分验证。这是因为在性能方面，完整的XML模式验证对于对象关系存储来说是非常昂贵的。
                        </li>
                        <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-CD089007-3832-4812-8617-642B2854C6BE">完整验证</a><br>将基于XML模式的数据加载到二进制XML存储中可以完全根据目标XML模式验证它。对于对象关系<code class="codeph">XMLType</code>存储，您可以随时强制进行完全验证。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50" title="除了需要知道特定XML文档是否格式正确之外，您还经常需要知道它是否符合给定的XML模式，即它是否对该XML模式有效。">XMLType实例的验证</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4104"></a><a id="ADXDB4103"></a><div class="props_rev_3"><a id="GUID-2360608F-BA11-4BEB-98F3-E79888A57BDD" name="GUID-2360608F-BA11-4BEB-98F3-E79888A57BDD"></a><h5 id="ADXDB-GUID-2360608F-BA11-4BEB-98F3-E79888A57BDD" class="sect5"><span class="enumeration_section">7.2.1.1</span>部分验证</h5>
                     <div>
                        <p>对于二进制XML存储，Oracle XML DB在将基于XML模式的文档插入<code class="codeph">XMLType</code>表或列时会完全验证它们。对于对象关系XML存储，仅执行部分验证。这是因为在性能方面，完整的XML模式验证对于对象关系存储来说是非常昂贵的。
                        </p>
                        <p><span class="bold">部分验证</span>仅确保存在所有必需元素和属性，并且文档中没有意外的元素或属性。也就是说，它仅确保XML文档的结构符合从XML模式派生的SQL数据类型定义。部分验证不能确保实例文档完全符合XML模式。
                        </p>
                        <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-2360608F-BA11-4BEB-98F3-E79888A57BDD__BABFEGDC">示例7-6</a>提供了将XML文档插入表<code class="codeph">PurchaseOrder</code>时失败部分验证的示例，该表以对象关系存储。
                        </p>
                        <div class="example" id="GUID-2360608F-BA11-4BEB-98F3-E79888A57BDD__BABFEGDC">
                           <p class="titleinexample">示例7-6插入不正确的XML文档时出错（部分验证）</p><pre class="pre codeblock"><code>INSERT INTO purchaseorder VALUES（XMLType（bfilename（'XMLDIR'，'InvalidElement.xml'），nls_charset_id（'AL32UTF8'）））; VALUES（XMLType（bfilename（'XMLDIR'，'InvalidElement.xml'），*第2行的错误：ORA-30937：父级'/ PurchaseOrder'中没有'UserName'（命名空间'## local'）的模式定义</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-BEF51F7F-33A8-4FED-AA21-FE8849821BEC" title="将基于XML模式的文档插入数据库时，可以部分或完全验证它们。">部分和完整XML模式验证</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4105"></a><div class="props_rev_3"><a id="GUID-CD089007-3832-4812-8617-642B2854C6BE" name="GUID-CD089007-3832-4812-8617-642B2854C6BE"></a><h5 id="ADXDB-GUID-CD089007-3832-4812-8617-642B2854C6BE" class="sect5"><span class="enumeration_section">7.2.1.2</span>完全验证</h5>
                     <div>
                        <p>将基于XML模式的数据加载到二进制XML存储中可以完全根据目标XML模式验证它。对于对象关系<code class="codeph">XMLType</code>存储，您可以随时强制进行完全验证。
                        </p>
                        <p>要强制进行完全验证，请使用以下任一方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>表级<code class="codeph">CHECK</code>约束</p>
                           </li>
                           <li>
                              <p>PL / SQL <code class="codeph">BEFORE INSERT</code>触发器</p>
                           </li>
                        </ul>
                        <p>这两种方法都确保只有有效的XML文档才能存储在<code class="codeph">XMLType</code>表中。
                        </p>
                        <p><code class="codeph">TABLE CHECK</code>约束的优点是它易于编码。缺点是它基于Oracle SQL函数<code class="codeph">XMLisValid</code> ，因此它只能指示XML文档是否有效。如果XML文档无效，则<code class="codeph">TABLE CHECK</code>约束无法提供有关其无效<span class="italic">原因的</span>任何信息。
                        </p>
                        <p><code class="codeph">BEFORE INSERT</code>触发器需要稍多的代码。触发器通过调用<code class="codeph">XMLType</code>方法<code class="codeph">schemaValidate()</code>验证XML文档。使用<code class="codeph">schemaValidate()</code>的优点是引发的异常提供了有关实例文档错误的其他信息。使用<code class="codeph">BEFORE INSERT</code>触发器还可以在遇到无效文档时尝试纠正操作。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="transformation-and-validation-of-XMLType-data.html#GUID-2920BC25-F964-452D-973B-5FACD538A744">完整的XML模式验证成本处理时间和内存使用情况</a><br>除非您使用二进制XML存储，否则完整的XML模式验证会花费处理时间和内存。因此，您应该仅在必要时执行完整的XML模式验证。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-BEF51F7F-33A8-4FED-AA21-FE8849821BEC" title="将基于XML模式的文档插入数据库时，可以部分或完全验证它们。">部分和完整XML模式验证</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADXDB4107"></a><a id="ADXDB4108"></a><a id="ADXDB4106"></a><div class="props_rev_3"><a id="GUID-2920BC25-F964-452D-973B-5FACD538A744" name="GUID-2920BC25-F964-452D-973B-5FACD538A744"></a><h6 id="ADXDB-GUID-2920BC25-F964-452D-973B-5FACD538A744" class="sect6"><span class="enumeration_section">7.2.1.2.1</span>完整XML模式验证成本处理时间和内存使用情况</h6>
                        <div>
                           <p>除非您使用二进制XML存储，否则完整的XML模式验证会花费处理时间和内存。因此，您应该仅在必要时执行完整的XML模式验证。</p>
                           <p>如果您可以依赖应用程序来验证XML文档，那么通过避免与完全验证相关的开销，您可以通过非二进制XML存储获得更高的总体吞吐量。如果无法确定传入XML文档的有效性，则可以依赖数据库来确保<code class="codeph">XMLType</code>表或列仅包含模式有效的XML文档。
                           </p>
                           <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-2920BC25-F964-452D-973B-5FACD538A744__BABHIFBH">示例7-7</a>显示了如何通过向<code class="codeph">XMLType</code>表添加<code class="codeph">CHECK</code>约束来强制进行完整的XML模式验证。在<a href="transformation-and-validation-of-XMLType-data.html#GUID-2920BC25-F964-452D-973B-5FACD538A744__BABHIFBH">示例7-7中</a> ，XML文档<code class="codeph">InvalidReference</code>对于XML模式无效。XML模式为与<code class="codeph">Reference</code>元素关联的文本节点定义了最少18个字符的长度。在本文档中，节点包含值<code class="codeph">SBELL-20021009</code> ，其长度仅为14个字符。部分验证不会捕获此错误。除非存在约束或触发器，否则尝试将此文档插入数据库将成功。
                           </p>
                           <div class="example" id="GUID-2920BC25-F964-452D-973B-5FACD538A744__BABHIFBH">
                              <p class="titleinexample">示例7-7使用CHECK约束强制进行完整的XML模式验证</p><pre class="pre codeblock"><code>ALTER TABLE purchaseorder ADD CONSTRAINT validate_purchaseorder <span class="bold">CHECK（XMLIsValid（OBJECT_VALUE）= 1）;</span>表改变了。INSERT INTO purchaseorder VALUES（XMLType（bfilename（'XMLDIR'，'InvalidReference.xml'），nls_charset_id（'AL32UTF8'）））;在第1行插入购买订单*错误：ORA-02290：违反了检查约束（QUINE.VALIDATE_PURCHASEORDER）</code></pre><p>伪列<code class="codeph">OBJECT_VALUE</code>可用于从触发器内访问<code class="codeph">XMLType</code>表的内容。<a href="transformation-and-validation-of-XMLType-data.html#GUID-2920BC25-F964-452D-973B-5FACD538A744__BABDJDHC">示例7-8</a>说明了这一点，显示了如何使用<code class="codeph">BEFORE INSERT</code>触发器来验证插入到<code class="codeph">XMLType</code>表中的数据是否符合指定的XML模式。
                              </p>
                           </div>
                           <!-- class="example" -->
                           <div class="example" id="GUID-2920BC25-F964-452D-973B-5FACD538A744__BABDJDHC">
                              <p class="titleinexample">示例7-8使用BEFORE INSERT触发器实施完整的XML模式验证</p><pre class="pre codeblock"><code>在购买订单之前创建或替换TRIGGER validate_purchaseorder每个行开始IF（：new。OBJECT_VALUE不是NULL）那么：新的。<span class="bold">OBJECT_VALUE.schemavalidate</span> （）;万一;结束; / INSERT INTO purchaseorder VALUES（XMLType（bfilename（'XMLDIR'，'InvalidReference.xml'），nls_charset_id（'AL32UTF8'）））; VALUES（XMLType（bfilename（'XMLDIR'，'InvalidReference.xml'），*第2行的错误：ORA-31154：无效的XML文档ORA-19202：XML处理错误LSX-00221：“SBELL-20021009”也是short（最小长度为18）LSX-00213：只有0次出现的粒子“序列”，最小值为1 ORA-06512：在“SYS.XMLTYPE”，第354行ORA-06512：在“QUINE.VALIDATE_PURCHASEORDER”，第3行ORA -04088：执行触发器'QUINE.VALIDATE_PURCHASEORDER'时出错</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-CD089007-3832-4812-8617-642B2854C6BE" title="将基于XML模式的数据加载到二进制XML存储中可以完全根据目标XML模式验证它。对于对象关系XMLType存储，您可以随时强制进行完全验证。">完全验证</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADXDB4741"></a><a id="ADXDB4742"></a><a id="ADXDB4743"></a><a id="ADXDB4744"></a><a id="ADXDB4740"></a><div class="props_rev_3"><a id="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B" name="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B"></a><h4 id="ADXDB-GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B" class="sect4"><span class="enumeration_section">7.2.2</span>验证存储为XMLType的XML数据：示例</h4>
                  <div>
                     <p>此处的示例说明了如何使用Oracle SQL函数<code class="codeph">XMLIsValid</code>和<code class="codeph">XMLType</code>方法<code class="codeph">isSchemaValid()</code>和<code class="codeph">schemaValidate()</code>来验证在Oracle XML DB中存储为<code class="codeph">XMLType</code>的XML数据。</p>
                     <div class="section">
                        <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHHFGAI">示例7-9</a>和<a href="transformation-and-validation-of-XMLType-data.html#GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHCEHFA">示例7-10</a>显示了如何使用PL / SQL方法<code class="codeph">isSchemaValid</code> （）针对XML模式验证XML实例。
                        </p>
                        <p><code class="codeph">XMLType</code>方法<code class="codeph">schemaValidate()</code>可以在<code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>触发器中使用，以确保存储在表中的所有实例都针对XML模式进行验证。<a href="transformation-and-validation-of-XMLType-data.html#GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHJFAEG">例7-11</a>说明了这一点。
                        </p>
                        <p><a href="transformation-and-validation-of-XMLType-data.html#GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHEGCDB">示例7-12</a>使用Oracle SQL函数<code class="codeph">XMLIsValid</code>执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>验证<code class="codeph">XMLType</code>实例是否符合指定的XML架构</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">CHECK</code>约束确保传入的XML文档有效</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__GUID-432B1B1F-C9D8-4FCA-BF9B-E888BBA6DA28">
                           <p class="notep1">注意：</p>
                           <p>验证<a href="transformation-and-validation-of-XMLType-data.html#GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50" title="除了需要知道特定XML文档是否格式正确之外，您还经常需要知道它是否符合给定的XML模式，即它是否对该XML模式有效。">XMLType实例中</a>描述的验证函数和过程便于验证检查。其中， <code class="codeph">schemaValidate</code>是唯一一个引发错误的错误，指示验证失败的原因。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHHFGAI">
                        <p class="titleinexample">示例7-9在SQL中使用方法ISSCHEMAVALID（）验证XML</p><pre class="oac_no_warn" dir="ltr">SELECT x.xmlcol。 <span class="bold">isSchemaValid</span> （'http://www.example.com/schemas/ipo.xsd'，'purchaseOrder'）FROM po_tab x;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHCEHFA">
                        <p class="titleinexample">示例7-10使用PL / SQL中的方法ISSCHEMAVALID（）验证XML</p><pre class="oac_no_warn" dir="ltr">DECLARE xml_instance XMLType; BEGIN SELECT x.xmlcol INTO xml_instance FROM po_tab x WHERE id = 1;如果是xml_instance。 <span class="bold">isSchemaValid</span> （'http://www.example.com/schemas/ipo.xsd'）= 0 THEN raise_application_error（-20500，'Invalid Instance'）; ELSE DBMS_OUTPUT.put_line（'实例有效'）;万一;结束; / Instance是成功完成的有效PL / SQL过程。
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHJFAEG">
                        <p class="titleinexample">示例7-11使用触发器中的方法SCHEMAVALIDATE（）验证XML</p><pre class="oac_no_warn" dir="ltr">DROP TABLE po_tab; CREATE TABLE po_tab OF XMLType XMLSCHEMA“http://www.example.com/schemas/ipo.xsd”ELEMENT“purchaseOrder”;在插入或更新po_tab之前创建TRIGGER emp_trig对于每个行DECLARE newxml XMLType; BEGIn newxml：=：new。OBJECT_VALUE; XMLTYPE。 <span class="bold">schemavalidate</span> （newxml）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3563099E-B1F3-4B70-8D2F-8FA001FF632B__CFHEGCDB">
                        <p class="titleinexample">示例7-12在CHECK约束内使用XMLISVALID检查XML有效性</p><pre class="oac_no_warn" dir="ltr">DROP TABLE po_tab; CREATE TABLE po_tab OF XMLType（ <span class="bold">CHECK</span> （ <span class="bold">XMLIsValid</span> （OBJECT_VALUE）= 1））XMLSCHEMA“http://www.example.com/schemas/ipo.xsd”ELEMENT“purchaseOrder”;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transformation-and-validation-of-XMLType-data.html#GUID-45DAA30E-3F14-4D70-8105-ED3855B92A50" title="除了需要知道特定XML文档是否格式正确之外，您还经常需要知道它是否符合给定的XML模式，即它是否对该XML模式有效。">XMLType实例的验证</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
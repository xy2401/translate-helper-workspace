<html id="08316.UNIFIED_AUDIT_TRAIL.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This view displays audit records in tabular form by retrieving the audit records from the audit trail."></meta>
      <meta name="description" content="This view displays audit records in tabular form by retrieving the audit records from the audit trail."></meta>
      <title>UNIFIED_AUDIT_TRAIL</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Reference"></meta>
      <meta property="og:description" content="This view displays audit records in tabular form by retrieving the audit records from the audit trail."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-10T14:59:27-08:00"></meta>
      <meta name="dcterms.title" content="Database Reference"></meta>
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96196-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="UNI_PLUGGABLE_SET_CHECK.html" title="Previous" type="text/html"></link>
      <link rel="next" href="USABLE_EDITIONS.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="REFRN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="UNI_PLUGGABLE_SET_CHECK.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="USABLE_EDITIONS.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="static-data-dictionary-views.html" property="item" typeof="WebPage"><span property="name">静态数据字典视图</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="static-data-dictionary-views-5.html" property="item" typeof="WebPage"><span property="name">静态数据字典视图：DBA_STREAMS_ADD_COLUMN到USER_ZONEMAPS</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">UNIFIED_AUDIT_TRAIL</li>
            </ol>
            <a id="GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D" name="GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D"></a><a id="REFRN29162"></a>
            
            <h2 id="REFRN-GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D" class="sect2"><span class="enumeration_section">6.261</span> UNIFIED_AUDIT_TRAIL</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='UNIFIED_AUDIT_TRAIL'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <div>在Oracle数据库中启用统一审计时，将在此新审计跟踪中填充审计记录。<span>此视图通过从审计跟踪中检索审计记录以表格形式显示审计记录。</span></div>
               <div class="section">
                  <div class="infoboxnote" id="GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D__GUID-DB101C65-273F-4440-935A-716C041298F0">
                     <p class="notep1">注意：</p>
                     <p>此视图仅在启用了统一审核的Oracle数据库中填充。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关统一审计的详细信息，请参见“ <a href="../dbseg/part_6.html#DBSEG006" target="_blank"><span><cite>Oracle数据库安全指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关迁移到统一审计的详细信息，请参阅“ <a href="../upgrd/recommended-and-best-practices-complete-upgrading-oracle-database.html#UPGRD52810" target="_blank"><span><cite>Oracle数据库升级指南”</cite></span></a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D__GUID-C3C0AB5F-A1FC-4E95-A05C-1B0F35A7E1DF">
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This table describes the columns for this database view" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="24%" id="d1454073e193">柱</th>
                           <th align="left" valign="bottom" width="18%" id="d1454073e196">数据类型</th>
                           <th align="left" valign="bottom" width="14%" id="d1454073e199">空值</th>
                           <th align="left" valign="bottom" width="45%" id="d1454073e202">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e207" headers="d1454073e193 ">
                              <p><code class="codeph">AUDIT_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e207 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（64）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e207 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e207 d1454073e202 ">
                              <p>审计类型：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>标准</p>
                                 </li>
                                 <li>
                                    <p>FineGrainedAudit</p>
                                 </li>
                                 <li>
                                    <p>XS</p>
                                 </li>
                                 <li>
                                    <p>数据库库</p>
                                 </li>
                                 <li>
                                    <p>标签安全</p>
                                 </li>
                                 <li>
                                    <p>RMAN_AUDIT</p>
                                 </li>
                                 <li>
                                    <p>数据泵</p>
                                 </li>
                                 <li>
                                    <p>直接路径API</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e247" headers="d1454073e193 ">
                              <p><code class="codeph">SESSIONID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e247 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e247 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e247 d1454073e202 ">
                              <p>审核会话标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e262" headers="d1454073e193 ">
                              <p><code class="codeph">PROXY_SESSIONID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e262 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e262 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e262 d1454073e202 ">
                              <p>代理会话的审计会话标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e277" headers="d1454073e193 ">
                              <p><code class="codeph">OS_USERNAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e277 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e277 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e277 d1454073e202 ">
                              <p>数据库会话的操作系统用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e292" headers="d1454073e193 ">
                              <p><code class="codeph">USERHOST</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e292 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e292 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e292 d1454073e202 ">
                              <p>生成会话的主机的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e307" headers="d1454073e193 ">
                              <p><code class="codeph">终奌站</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e307 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（30）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e307 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e307 d1454073e202 ">
                              <p>用户会话的操作系统终端</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e322" headers="d1454073e193 ">
                              <p><code class="codeph">INSTANCE_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e322 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e322 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e322 d1454073e202 ">
                              <p>初始化参数文件init.ora中指定的实例编号</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e337" headers="d1454073e193 ">
                              <p><code class="codeph">DBID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e337 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e337 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e337 d1454073e202 ">
                              <p>审计数据库的数据库标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e352" headers="d1454073e193 ">
                              <p><code class="codeph">AUTHENTICATION_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e352 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（1024）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e352 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e352 d1454073e202 ">
                              <p>会话用户的身份验证类型</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e367" headers="d1454073e193 ">
                              <p><code class="codeph">数据库用户名</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e367 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e367 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e367 d1454073e202 ">
                              <p>审核其操作的用户的数据库用户名</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e382" headers="d1454073e193 ">
                              <p><code class="codeph">DBPROXY_USERNAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e382 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e382 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e382 d1454073e202 ">
                              <p>在代理身份验证的情况下，代理用户名</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e398" headers="d1454073e193 ">
                              <p><code class="codeph">EXTERNAL_USERID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e398 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（1024）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e398 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e398 d1454073e202 ">
                              <p>外部用户名，在网络或外部身份验证的情况下</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e413" headers="d1454073e193 ">
                              <p><code class="codeph">GLOBAL_USERID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e413 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（32）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e413 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e413 d1454073e202 ">
                              <p>用户的全局用户标识符，对于以企业用户身份登录的用户</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e428" headers="d1454073e193 ">
                              <p><code class="codeph">CLIENT_PROGRAM_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e428 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（48）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e428 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e428 d1454073e202 ">
                              <p>用于数据库会话的程序的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e443" headers="d1454073e193 ">
                              <p><code class="codeph">DBLINK_INFO</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e443 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e443 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e443 d1454073e202 ">
                              <p><code class="codeph">SYS_CONTEXT('USERENV','DBLINK_INFO')</code>值<code class="codeph">SYS_CONTEXT('USERENV','DBLINK_INFO')</code> 。如果连接是通过数据库链接，则有效。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e461" headers="d1454073e193 ">
                              <p><code class="codeph">XS_USER_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e461 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e461 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e461 d1454073e202 ">
                              <p>Real Application Security用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e476" headers="d1454073e193 ">
                              <p><code class="codeph">XS_SESSIONID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e476 d1454073e196 ">
                              <p><code class="codeph">RAW（33）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e476 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e476 d1454073e202 ">
                              <p>真实应用程序安全会话的标识</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e491" headers="d1454073e193 ">
                              <p><code class="codeph">ENTRY_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e491 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e491 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e491 d1454073e202 ">
                              <p>会话中每个审计跟踪条目的数字ID</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e506" headers="d1454073e193 ">
                              <p><code class="codeph">STATEMENT_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e506 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e506 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e506 d1454073e202 ">
                              <p>每个语句运行的数字ID（语句可能导致许多操作）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e521" headers="d1454073e193 ">
                              <p><code class="codeph">event_timestamp的</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e521 d1454073e196 ">
                              <p><code class="codeph">TIMESTAMP（6）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e521 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e521 d1454073e202 ">
                              <p>在本地时区创建审计跟踪条目的时间戳</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e536" headers="d1454073e193 ">
                              <p><code class="codeph">EVENT_TIMESTAMP_UTC</code> <a id="fn_1" name="fn_1" href="#fn_1" this="" column="" is="" available="" starting="" with="" oracle="" database="" release="" 19c,="" version="" 19.1=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e536 d1454073e196 ">
                              <p><code class="codeph">TIMESTAMP（6）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e536 d1454073e199 "> </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e536 d1454073e202 ">
                              <p>以UTC（协调世界时）创建审计跟踪条目的时间戳</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e551" headers="d1454073e193 ">
                              <p><code class="codeph">ACTION_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e551 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（64）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e551 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e551 d1454073e202 ">
                              <p>用户执行的操作的名称。该名称应与<code class="codeph">AUDIT_TYPE</code>一起阅读，以了解实际操作。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e570" headers="d1454073e193 ">
                              <p><code class="codeph">值return_code</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e570 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e570 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e570 d1454073e202 ">
                              <p>操作生成的Oracle错误代码。如果操作成功则为零</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e585" headers="d1454073e193 ">
                              <p><code class="codeph">OS_PROCESS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e585 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（16）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e585 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e585 d1454073e202 ">
                              <p>操作系统进程标识Oracle数据库进程</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e600" headers="d1454073e193 ">
                              <p><code class="codeph">TRANSACTION_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e600 d1454073e196 ">
                              <p><code class="codeph">RAW（8）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e600 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e600 d1454073e202 ">
                              <p>修改对象的事务的事务标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e615" headers="d1454073e193 ">
                              <p><code class="codeph">SCN</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e615 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e615 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e615 d1454073e202 ">
                              <p>事件发生时查询的系统更改编号（SCN）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e630" headers="d1454073e193 ">
                              <p><code class="codeph">EXECUTION_ID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e630 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（64）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e630 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e630 d1454073e202 ">
                              <p>每个操作的执行上下文标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e645" headers="d1454073e193 ">
                              <p><code class="codeph">OBJECT_SCHEMA</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e645 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e645 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e645 d1454073e202 ">
                              <p>受操作影响的对象的架构名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e660" headers="d1454073e193 ">
                              <p><code class="codeph">OBJECT_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e660 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e660 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e660 d1454073e202 ">
                              <p>受操作影响的对象的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e675" headers="d1454073e193 ">
                              <p><code class="codeph">SQL_TEXT</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e675 d1454073e196 ">
                              <p><code class="codeph">CLOB</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e675 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e675 d1454073e202 ">
                              <p>与事件关联的SQL</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e690" headers="d1454073e193 ">
                              <p><code class="codeph">SQL_BINDS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e690 d1454073e196 ">
                              <p><code class="codeph">CLOB</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e690 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e690 d1454073e202 ">
                              <p>与<code class="codeph">SQL_TEXT</code>关联的绑定变量列表（如果有）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e707" headers="d1454073e193 ">
                              <p><code class="codeph">APPLICATION_CONTEXTS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e707 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e707 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e707 d1454073e202 ">
                              <p>以分号分隔的应用程序上下文命名空间列表，属性，值信息（APPCTX_NSPACE，APPCTX_ATTRIBUTE = &lt;value&gt;）格式</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e722" headers="d1454073e193 ">
                              <p><code class="codeph">CLIENT_IDENTIFIER</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e722 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（64）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e722 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e722 d1454073e202 ">
                              <p>每个Oracle会话中的客户端标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e738" headers="d1454073e193 ">
                              <p><code class="codeph">NEW_SCHEMA</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e738 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e738 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e738 d1454073e202 ">
                              <p>NEW_NAME列中指定的对象架构</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e753" headers="d1454073e193 ">
                              <p><code class="codeph">新名字</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e753 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e753 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e753 d1454073e202 ">
                              <p>RENAME之后的对象的新名称或基础对象的名称（例如，CREATE INDEX owner.obj_name ON new_owner.new_name）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e768" headers="d1454073e193 ">
                              <p><code class="codeph">OBJECT_EDITION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e768 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e768 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e768 d1454073e202 ">
                              <p>包含审计对象的版本的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e783" headers="d1454073e193 ">
                              <p><code class="codeph">SYSTEM_PRIVILEGE_USED</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e783 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（1024）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e783 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e783 d1454073e202 ">
                              <p>用于执行操作的以逗号分隔的系统特权列表</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e798" headers="d1454073e193 ">
                              <p><code class="codeph">SYSTEM_PRIVILEGE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e798 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（40）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e798 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e798 d1454073e202 ">
                              <p>GRANT / REVOKE语句授予/撤消的系统特权</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e813" headers="d1454073e193 ">
                              <p><code class="codeph">AUDIT_OPTION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e813 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（40）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e813 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e813 d1454073e202 ">
                              <p>AUDIT / NOAUDIT SQL命令</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e828" headers="d1454073e193 ">
                              <p><code class="codeph">OBJECT_PRIVILEGES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e828 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（35）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e828 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e828 d1454073e202 ">
                              <p>GRANT / REVOKE语句授予/撤消的对象权限</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e843" headers="d1454073e193 ">
                              <p><code class="codeph">角色</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e843 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e843 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e843 d1454073e202 ">
                              <p>由GRANT / REVOKE / SET ROLE命令授予或撤消或设置的角色</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e858" headers="d1454073e193 ">
                              <p><code class="codeph">TARGET_USER</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e858 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e858 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e858 d1454073e202 ">
                              <p>执行GRANT / REVOKE / AUDIT / NOAUDIT语句的用户</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e873" headers="d1454073e193 ">
                              <p><code class="codeph">EXCLUDED_USER</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e873 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e873 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e873 d1454073e202 ">
                              <p>执行AUDIT / NOAUDIT语句时被排除的用户</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e888" headers="d1454073e193 ">
                              <p><code class="codeph">EXCLUDED_SCHEMA</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e888 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e888 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e888 d1454073e202 ">
                              <p>显示排除对象的架构</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e904" headers="d1454073e193 ">
                              <p><code class="codeph">EXCLUDED_OBJECT</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e904 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e904 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e904 d1454073e202 ">
                              <p>显示从操作中排除的对象</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e919" headers="d1454073e193 ">
                              <p><code class="codeph">当前用户</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e919 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e919 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e919 d1454073e202 ">
                              <p>语句执行的有效用户</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e934" headers="d1454073e193 ">
                              <p><code class="codeph">附加信息</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e934 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e934 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e934 d1454073e202 ">
                              <p>审计跟踪条目的文本注释（如果有）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e949" headers="d1454073e193 ">
                              <p><code class="codeph">UNIFIED_AUDIT_POLICIES</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e949 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e949 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e949 d1454073e202 ">
                              <p>列出导致当前审核记录的审核策略。例如，如果从策略<code class="codeph">SCOTT_EMP_POL</code>配置了<code class="codeph">SELECT ON SCOTT.EMP</code> ，则对于<code class="codeph">SELECT</code>事件，此列将显示<code class="codeph">SCOTT_EMP_POL</code> 。</p>
                              <p>如果配置了多个策略，则导致事件记录在审计跟踪中的策略列表将以逗号分隔的列表显示。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e978" headers="d1454073e193 ">
                              <p><code class="codeph">FGA_POLICY_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e978 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e978 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e978 d1454073e202 ">
                              <p>生成此FGA审核记录的细粒度审核（FGA）策略名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e993" headers="d1454073e193 ">
                              <p><code class="codeph">XS_INACTIVITY_TIMEOUT</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e993 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e993 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e993 d1454073e202 ">
                              <p>Real Application Security会话的非活动超时</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1008" headers="d1454073e193 ">
                              <p><code class="codeph">XS_ENTITY_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1008 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（32）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1008 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1008 d1454073e202 ">
                              <p>Real Application Security实体的类型。可能的值包括<code class="codeph">USER</code> ， <code class="codeph">ROLE</code> ， <code class="codeph">ROLESET</code> ， <code class="codeph">SECURITYCLASS</code> ， <code class="codeph">ACL</code> ， <code class="codeph">DATASECURITY</code>和<code class="codeph">NSTEMPLATE</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1045" headers="d1454073e193 ">
                              <p><code class="codeph">XS_TARGET_PRINCIPAL_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1045 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1045 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1045 d1454073e202 ">
                              <p>Real Application Security操作中的目标主体名称。可能的操作包括设置验证程序，设置密码，添加代理，删除代理，切换用户，分配用户，创建会话和授予角色。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1060" headers="d1454073e193 ">
                              <p><code class="codeph">XS_PROXY_USER_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1060 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1060 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1060 d1454073e202 ">
                              <p>Real Application Security代理用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1075" headers="d1454073e193 ">
                              <p><code class="codeph">XS_DATASEC_POLICY_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1075 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1075 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1075 d1454073e202 ">
                              <p>启用或禁用Real Application Security数据安全策略的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1090" headers="d1454073e193 ">
                              <p><code class="codeph">XS_SCHEMA_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1090 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1090 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1090 d1454073e202 ">
                              <p>启用中的架构名称，禁用数据安全策略和全局回调操作</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1106" headers="d1454073e193 ">
                              <p><code class="codeph">XS_CALLBACK_EVENT_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1106 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（32）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1106 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1106 d1454073e202 ">
                              <p>Real Application Security全局回调事件类型</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1121" headers="d1454073e193 ">
                              <p><code class="codeph">XS_PACKAGE_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1121 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1121 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1121 d1454073e202 ">
                              <p>全局回调的Real Application Security回调包名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1136" headers="d1454073e193 ">
                              <p><code class="codeph">XS_PROCEDURE_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1136 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1136 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1136 d1454073e202 ">
                              <p>全局回调的Real Application Security回调过程名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1151" headers="d1454073e193 ">
                              <p><code class="codeph">XS_ENABLED_ROLE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1151 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1151 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1151 d1454073e202 ">
                              <p>已启用的角色</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1166" headers="d1454073e193 ">
                              <p><code class="codeph">XS_COOKIE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1166 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（1024）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1166 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1166 d1454073e202 ">
                              <p>Real Application Security会话cookie</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1181" headers="d1454073e193 ">
                              <p><code class="codeph">XS_NS_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1181 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1181 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1181 d1454073e202 ">
                              <p>Real Application Security会话命名空间的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1196" headers="d1454073e193 ">
                              <p><code class="codeph">XS_NS_ATTRIBUTE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1196 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1196 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1196 d1454073e202 ">
                              <p>Real Application Security会话命名空间属性的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1211" headers="d1454073e193 ">
                              <p><code class="codeph">XS_NS_ATTRIBUTE_OLD_VAL</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1211 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1211 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1211 d1454073e202 ">
                              <p>Real Application Security会话命名空间属性的旧值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1226" headers="d1454073e193 ">
                              <p><code class="codeph">XS_NS_ATTRIBUTE_NEW_VAL</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1226 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1226 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1226 d1454073e202 ">
                              <p>Real Application Security会话命名空间的新值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1241" headers="d1454073e193 ">
                              <p><code class="codeph">DV_ACTION_CODE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1241 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1241 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1241 d1454073e202 ">
                              <p>Database Vault的数字操作类型代码</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1256" headers="d1454073e193 ">
                              <p><code class="codeph">DV_ACTION_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1256 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（30）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1256 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1256 d1454073e202 ">
                              <p>数字代码显示在<code class="codeph">DV_ACTION_CODE</code>列中的操作的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1275" headers="d1454073e193 ">
                              <p><code class="codeph">DV_EXTENDED_ACTION_CODE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1275 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1275 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1275 d1454073e202 ">
                              <p>Database Vault管理的数字操作类型代码</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1290" headers="d1454073e193 ">
                              <p><code class="codeph">DV_GRANTEE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1290 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1290 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1290 d1454073e202 ">
                              <p>修改了Database Vault授权的用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1305" headers="d1454073e193 ">
                              <p><code class="codeph">DV_RETURN_CODE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1305 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1305 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1305 d1454073e202 ">
                              <p>Database Vault特定的错误代码</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1320" headers="d1454073e193 ">
                              <p><code class="codeph">DV_ACTION_OBJECT_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1320 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1320 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1320 d1454073e202 ">
                              <p>已修改的Database Vault对象的唯一名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1335" headers="d1454073e193 ">
                              <p><code class="codeph">DV_RULE_SET_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1335 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1335 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1335 d1454073e202 ">
                              <p>正在执行并导致审计事件触发的规则集的唯一名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1350" headers="d1454073e193 ">
                              <p><code class="codeph">DV_COMMENT</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1350 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1350 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1350 d1454073e202 ">
                              <p>审计跟踪条目的文本注释，提供有关审计的语句的更多信息</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1365" headers="d1454073e193 ">
                              <p><code class="codeph">DV_FACTOR_CONTEXT</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1365 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1365 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1365 d1454073e202 ">
                              <p>一个XML文档，其中包含触发审计事件时当前会话的所有因子标识符</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1380" headers="d1454073e193 ">
                              <p><code class="codeph">DV_OBJECT_STATUS</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1380 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（1）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1380 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1380 d1454073e202 ">
                              <p>指示是启用还是禁用特定Database Vault对象。例如，如果Database Vault管理员启用或禁用域，则将审核此事件，并且<code class="codeph">DV_OBJECT_STATUS</code>值将在事件发生后显示域的状态。此列的可能值为：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">Y</code> - 对象已启用</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">N</code> - 禁用该对象</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1409" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_POLICY_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1409 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1409 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1409 d1454073e202 ">
                              <p>为其生成此审核记录的Oracle Label Security（OLS）策略的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1424" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_GRANTEE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1424 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（1024）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1424 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1424 d1454073e202 ">
                              <p>修改OLS授权的用户的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1439" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_MAX_READ_LABEL</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1439 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1439 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1439 d1454073e202 ">
                              <p>分配给用户的最大读取标签</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1455" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_MAX_WRITE_LABEL</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1455 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1455 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1455 d1454073e202 ">
                              <p>分配给用户的最大写入标签</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1470" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_MIN_WRITE_LABEL</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1470 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1470 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1470 d1454073e202 ">
                              <p>分配给用户的最小写标签</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1485" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_PRIVILEGES_GRANTED</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1485 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1485 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1485 d1454073e202 ">
                              <p>分配给用户或受信任存储过程的OLS权限</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1500" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_PROGRAM_UNIT_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1500 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1500 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1500 d1454073e202 ">
                              <p>已修改或已执行授权的受信任存储过程的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1515" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_PRIVILEGES_USED</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1515 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1515 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1515 d1454073e202 ">
                              <p>用于事件的OLS权限</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1530" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_STRING_LABEL</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1530 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1530 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1530 d1454073e202 ">
                              <p>OLS标签的字符串表示形式</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1545" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_LABEL_COMPONENT_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1545 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（12）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1545 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1545 d1454073e202 ">
                              <p>OLS标签组件的类型</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1560" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_LABEL_COMPONENT_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1560 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（30）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1560 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1560 d1454073e202 ">
                              <p>OLS标签组件的名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1575" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_PARENT_GROUP_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1575 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（30）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1575 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1575 d1454073e202 ">
                              <p>OLS组的父级名称</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1590" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_OLD_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1590 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1590 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1590 d1454073e202 ">
                              <p>OLS ALTER事件的旧值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1605" headers="d1454073e193 ">
                              <p><code class="codeph">OLS_NEW_VALUE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1605 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（4000）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1605 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1605 d1454073e202 ">
                              <p>OLS ALTER事件的新值</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1621" headers="d1454073e193 ">
                              <p><code class="codeph">RMAN_SESSION_RECID</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1621 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1621 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1621 d1454073e202 ">
                              <p>RMAN会话标识符。与<code class="codeph">RMAN_SESSION_STAMP</code>一起唯一标识RMAN作业（请注意，这与用户会话ID不同;值是控制文件中的recid，用于标识RMAN作业）</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1639" headers="d1454073e193 ">
                              <p><code class="codeph">RMAN_SESSION_STAMP</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1639 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1639 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1639 d1454073e202 ">
                              <p>会话的时间戳</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1654" headers="d1454073e193 ">
                              <p><code class="codeph">RMAN_OPERATION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1654 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（20）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1654 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1654 d1454073e202 ">
                              <p>由作业执行的RMAN操作。将为RMAN会话中的每个不同操作添加一行。例如，备份作业将在<code class="codeph">RMAN_OPERATION</code>列中包含<code class="codeph">BACKUP</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1675" headers="d1454073e193 ">
                              <p><code class="codeph">RMAN_OBJECT_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1675 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（20）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1675 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1675 d1454073e202 ">
                              <p>涉及备份或恢复/恢复或更改/删除/交叉检查命令所涉及的对象类型。</p>
                              <p>它包含以下值之一。如果RMAN命令不满足其中一个，则按顺序给出首选项，从列表的顶部到底部：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">DB FULL</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">RECVR AREA</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DB INCR</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">数据文件已满</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DATAFILE INCR</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ARCHIVELOG</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CONTROLFILE</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SPFILE</code></p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1725" headers="d1454073e193 ">
                              <p><code class="codeph">RMAN_DEVICE_TYPE</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1725 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（5）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1725 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1725 d1454073e202 ">
                              <p>RMAN作业中涉及的设备。它可能是<code class="codeph">DISK</code>或<code class="codeph">SBT_TAPE</code>或<code class="codeph">*</code> （An <code class="codeph">*</code>表示涉及多个位置）。
                              </p>
                              <p>对于备份作业，它将是输出设备类型。对于其他命令（例如恢复或交叉检查），它将是输入设备类型。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1754" headers="d1454073e193 ">
                              <p><code class="codeph">DP_TEXT_PARAMETERS1</code> 
                              </p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1754 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（512）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1754 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1754 d1454073e202 ">
                              <p>数据泵操作期间具有文本/字符串值的参数。这可能包含以下值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">访问方法</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">数据选项</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">转发目录</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">工作类型</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">工作版</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">主表</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">METADATA_JOB_MODE</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">分区选项</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">远程链接</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">表EXISTS</code></p>
                                 </li>
                              </ul>
                              <p>有关可为这些数据泵文本参数显示的设置的说明和更多信息，请参阅<a href="UNIFIED_AUDIT_TRAIL.html#GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D__CHDJBHFG" title="提供有关可在DP_TEXT_PARAMETERS1列中显示的值的详细信息">表6-2</a> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1818" headers="d1454073e193 ">
                              <p><code class="codeph">DP_BOOLEAN_PARAMETERS1</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1818 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（512）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1818 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1818 d1454073e202 ">
                              <p>数据泵操作期间具有布尔值的参数。这可能包含以下值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">DATA_ONLY</code> - 操作是否仅处理数据的布尔值（与仅元数据或元数据和数据组合相对）</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DUMPFILE_PRESENT</code> - 表示是否存在转储文件。通常，它指示是否需要不使用dumpfile的网络导出。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">JOB_RESTARTED</code> - 布尔值，指示是否必须重新启动导出或导入作业</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">MASTER_ONLY</code> - 指示导入作业是仅导入主表，然后停止作业，以便可以检查主表的内容</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">METADATA_ONLY</code> - 操作是否仅处理元数据的布尔值（与仅数据或元数据和数据组合相对）</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1859" headers="d1454073e193 ">
                              <p><code class="codeph">DIRECT_PATH_NUM_COLUMNS_LOADED</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1859 d1454073e196 ">
                              <p><code class="codeph">数</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1859 d1454073e199 ">
                              <p> </p> 
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1859 d1454073e202 ">
                              <p>显示使用SQL * Loader直接路径加载方法加载的列数</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1875" headers="d1454073e193 ">
                              <p><code class="codeph">RLS_INFO</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1875 d1454073e196 ">
                              <p><code class="codeph">CLOB</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1875 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1875 d1454073e202 ">
                              <p>存储由分隔符分隔的虚拟专用数据库（VPD）策略名称和谓词。</p>
                              <p>要将输出格式化为单个行，请使用<code class="codeph">DBMS_AUDIT_UTIL.DECODE_RLS_INFO_ATRAIL_UNI</code>函数。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1895" headers="d1454073e193 ">
                              <p><code class="codeph">KSACL_USER_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1895 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（128）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1895 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1895 d1454073e202 ">
                              <p>连接用户名</p>
                              <p>仅当<code class="codeph">UNIFIED_AUDIT_TRAIL.RETURN_CODE</code>为<code class="codeph">46981</code> （即拒绝服务（DoS）错误代码）时，此列中的值才有意义。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1918" headers="d1454073e193 ">
                              <p><code class="codeph">KSACL_SERVICE_NAME</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1918 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（512）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1918 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1918 d1454073e202 ">
                              <p>目标数据库服务名称</p>
                              <p>仅当<code class="codeph">UNIFIED_AUDIT_TRAIL.RETURN_CODE</code>为<code class="codeph">46981</code> （即拒绝服务（DoS）错误代码）时，此列中的值才有意义。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="24%" id="d1454073e1942" headers="d1454073e193 ">
                              <p><code class="codeph">KSACL_SOURCE_LOCATION</code></p>
                           </td>
                           <td align="left" valign="top" width="18%" headers="d1454073e1942 d1454073e196 ">
                              <p><code class="codeph">VARCHAR2（48）</code></p>
                           </td>
                           <td align="left" valign="top" width="14%" headers="d1454073e1942 d1454073e199 ">
                              <p> </p>
                           </td>
                           <td align="left" valign="top" width="45%" headers="d1454073e1942 d1454073e202 ">
                              <p>启动连接的源位置</p>
                              <p>仅当<code class="codeph">UNIFIED_AUDIT_TRAIL.RETURN_CODE</code>为<code class="codeph">46981</code> （即拒绝服务（DoS）错误代码）时，此列中的值才有意义。
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup>此列从Oracle Database 19c版本19.1开始提供。
               </p>
               <div class="tblformal" id="GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D__CHDJBHFG">
                  <p class="titleintable">表6-2数据泵文本参数说明</p>
                  <table cellpadding="4" cellspacing="0" class="Formal" title="数据泵文本参数说明" width="100%" border="1" summary="Provides more information about the values that can appear in the DP_TEXT_PARAMETERS1 column" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="31%" id="d1454073e1974">参数</th>
                           <th align="left" valign="bottom" width="69%" id="d1454073e1977">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e1982" headers="d1454073e1974 ">
                              <p><code class="codeph">访问方法</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e1982 d1454073e1977 ">
                              <p>用于加载数据的方法。设置可以是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">AUTOMATIC</code> ：启用Oracle Data Pump以确定最佳加载方法</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DIRECT_PATH</code> ：使用直接路径API传递要加载的数据。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">EXTERNAL_TABLE</code> ：使用外部表选项加载数据。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CONVENTIONAL</code> ：使用SQL <code class="codeph">INSERT</code>语句加载数据</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2014" headers="d1454073e1974 ">
                              <p><code class="codeph">数据选项</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2014 d1454073e1977 ">
                              <p>指示在导入操作期间如何处理某些类型的数据。设置采用位掩码格式，如下所示：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">1</code> （ <code class="codeph">SKIP_CONSTRAINT_ERRORS</code> ）：指定即使遇到非延迟约束违规，导入操作<code class="codeph">SKIP_CONSTRAINT_ERRORS</code>继续。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">8</code> （ <code class="codeph">DISABLE_APPEND_HINT</code> ）：导入操作在加载数据对象时未使用<code class="codeph">APPEND</code>提示。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">16</code> （ <code class="codeph">REJECT_ROWS_WITH_REPL_CHAR</code> ）：当可以使用替换字符并添加选项以拒绝数据泵导入期间使用替换字符的数据行时，将发出警告。如果导出/导入过程使用不同的字符集，则会发生这种情况</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2050" headers="d1454073e1974 ">
                              <p><code class="codeph">转发目录</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2050 d1454073e1977 ">
                              <p>没用</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2058" headers="d1454073e1974 ">
                              <p><code class="codeph">工作类型</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2058 d1454073e1977 ">
                              <p>是<code class="codeph">EXPORT</code>还是<code class="codeph">IMPORT</code></p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2071" headers="d1454073e1974 ">
                              <p><code class="codeph">工作版</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2071 d1454073e1977 ">
                              <p>指定导入的数据库对象的版本</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2079" headers="d1454073e1974 ">
                              <p><code class="codeph">主表</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2079 d1454073e1977 ">
                              <p>主表的名称。默认情况下，导出操作如下所示：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema_name</span> 。SYS_EXPORT_TABLE_ <span class="italic">n</span></pre><p>对于导入操作，它显示如下：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">schema_name</span> 。SYS_IMPORT_TABLE_ <span class="italic">n</span></pre><p><span class="italic"><code class="codeph">n</code></span>表示数值<code class="codeph">01</code> 。如果01是在使用，数量递增与<code class="codeph">02</code> ， <code class="codeph">03</code> ，等等。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2116" headers="d1454073e1974 ">
                              <p><code class="codeph">METADATA_JOB_MODE</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2116 d1454073e1977 ">
                              <p>出口或进口操作的类型。例如，表导出将是<code class="codeph">TABLE_EXPORT</code></p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2126" headers="d1454073e1974 ">
                              <p><code class="codeph">分区选项</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2126 d1454073e1977 ">
                              <p>指示在导入操作期间如何创建表分区。设置可以是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">NONE</code> ：表格是在执行导出操作的系统上存在的。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DEPARTITION</code> ：每个分区或子分区都被提升为一个新的单独表。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">MERGE</code> ：所有分区和子分区都合并到一个表中</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2150" headers="d1454073e1974 ">
                              <p><code class="codeph">远程链接</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2150 d1454073e1977 ">
                              <p>表示导出是从由有效数据库链接标识的（源）数据库执行的。源数据库实例中的数据被写入连接的数据库实例上的转储文件集。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="31%" id="d1454073e2158" headers="d1454073e1974 ">
                              <p><code class="codeph">表EXISTS</code></p>
                           </td>
                           <td align="left" valign="top" width="69%" headers="d1454073e2158 d1454073e1977 ">
                              <p>指示目标表已存在时对导入操作执行的操作。值如下：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">更换</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">截短</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">跳跃</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">附加</code></p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-B7CE1C02-2FD4-47D6-80AA-CF74A60CDD1D__GUID-D3DAA77A-86BA-4AD0-89A6-36FA099FFA44">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">DBMS_AUDIT_MGMT</code>包的更多信息，请<code class="codeph">DBMS_AUDIT_MGMT</code> <a href="../arpls/DBMS_AUDIT_MGMT.html#ARPLS241" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DBMS_AUDIT_UTIL.DECODE_RLS_INFO_ATRAIL_UNI</code>函数的更多信息，请<code class="codeph">DBMS_AUDIT_UTIL.DECODE_RLS_INFO_ATRAIL_UNI</code> <a href="../arpls/DBMS_AUDIT_UTIL.html#ARPLS-GUID-33BF0E4E-BD12-4278-BF9E-F3B694A8B54F" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="04757.high-availability-in-oci.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes high availability (HA) features in OCI."></meta>
      <meta name="description" content="This chapter describes high availability (HA) features in OCI."></meta>
      <title>OCI的高可用性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter describes high availability (HA) features in OCI."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="session-and-connection-pooling.html" title="Previous" type="text/html"></link>
      <link rel="next" href="notification-streams-advanced-queuing.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="session-and-connection-pooling.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="notification-streams-advanced-queuing.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OCI的高可用性</li>
            </ol>
            <a id="GUID-F9EC61C1-5892-41E3-A382-853E9A47789C" name="GUID-F9EC61C1-5892-41E3-A382-853E9A47789C"></a>
            
            <h2 id="LNOCI-GUID-F9EC61C1-5892-41E3-A382-853E9A47789C" class="sect2"><span class="enumeration_chapter">12</span> OCI的高可用性</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍OCI中的高可用性（HA）功能。</p>
               <div class="p">本章包括以下主题：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="high-availability-in-oci.html#GUID-A8B79A40-C4AA-4FBA-8042-C70C8FD2D2EF" title="运行时连接负载平衡将工作请求路由到最能为工作提供服务的会话池中的会话。">运行时连接负载平衡</a></p>
                     </li>
                     <li>
                        <p><a href="high-availability-in-oci.html#GUID-EF4E3248-D4F9-4F06-ADC5-700A36AAE5E7" title="如果连接到Oracle RAC数据库的高可用性客户端出现数据库故障，请使用HA事件通知向客户端提供尽力而为的编程信号。">HA事件通知</a></p>
                     </li>
                     <li>
                        <p><a href="high-availability-in-oci.html#GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F" title="透明应用程序故障转移（TAF）是一种客户端功能，旨在最大程度地减少由于实例或网络故障导致数据库连接失败时发生的对最终用户应用程序的中断。">OCI中的透明应用程序故障转移</a></p>
                     </li>
                     <li>
                        <p><a href="high-availability-in-oci.html#GUID-A675AF7B-6FF0-460D-A6E6-C15E7C328C8F" title="Transaction Guard在计划内或计划外中断的情况下引入了最多一次事务执行的概念，以帮助防止故障转移时的应用程序提交原始提交的重复提交。">OCI和交易卫士</a></p>
                     </li>
                     <li>
                        <p><a href="high-availability-in-oci.html#GUID-A8DD9422-2F82-42A9-9555-134296416E8F" title="应用程序连续性（AC）在计划内和计划外中断期间提供高可用性（HA）。Oracle数据库12c第2版（12.2）引入了对AC的OCI支持。">OCI和应用程序连续性</a></p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A8B79A40-C4AA-4FBA-8042-C70C8FD2D2EF" name="GUID-A8B79A40-C4AA-4FBA-8042-C70C8FD2D2EF"></a><h3 id="LNOCI-GUID-A8B79A40-C4AA-4FBA-8042-C70C8FD2D2EF" class="sect3"><span class="enumeration_section">12.1</span>运行时连接负载平衡</h3>
               <div>
                  <p>运行时连接负载平衡将工作请求路由到最能为工作提供服务的会话池中的会话。</p>
                  <p>它发生在应用程序从现有会话池中选择会话时，因此是非常频繁的活动。对于仅在一个实例上支持服务的会话池，池中的第一个可用会话就足够了。当池支持跨多个实例的服务时，需要跨实例分发工作请求，以便提供更好服务或具有更大容量的实例获得更多请求。</p>
                  <p>应用程序必须连接到Oracle RAC实例才能启用运行时连接负载平衡。此外，这些应用程序必须：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<code class="codeph">OCI_EVENTS</code>模式下初始化OCI环境</p>
                     </li>
                     <li>
                        <p>连接到启用了运行时连接负载平衡的服务（使用<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code>过程根据需要设置<code class="codeph">GOAL</code>和<code class="codeph">CLB_GOAL</code> ）</p>
                     </li>
                     <li>
                        <p>链接线程库</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A8B79A40-C4AA-4FBA-8042-C70C8FD2D2EF__GUID-50651043-7613-4F36-95E2-4122F0E8CD32">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关负载平衡建议的信息<a href="../racad/workload-management-with-dynamic-database-services.html#RACAD7302" target="_blank"><span><cite>，请参见“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../adfns/connection_strategies.html#ADFNS229" target="_blank"><span><cite>“Oracle数据库开发指南”</cite></span></a> ，了解有关为支持的接口启用和禁用运行时连接负载平衡以及接收负载平衡顾问FAN事件的信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-EF4E3248-D4F9-4F06-ADC5-700A36AAE5E7" name="GUID-EF4E3248-D4F9-4F06-ADC5-700A36AAE5E7"></a><h3 id="LNOCI-GUID-EF4E3248-D4F9-4F06-ADC5-700A36AAE5E7" class="sect3"><span class="enumeration_section">12.2</span> HA事件通知</h3>
               <div>
                  <p>如果连接到Oracle RAC数据库的高可用性客户端出现数据库故障，请使用HA事件通知向客户端提供尽力而为的编程信号。</p>
                  <p>假设用户使用Web浏览器登录访问后端数据库服务器的应用程序服务器。在用户已知故障之前，数据库实例的故障可能导致等待时间长达数分钟。HA事件通知提供了快速检测服务器实例故障，将其传达给客户端，关闭连接以及清除连接池中的空闲连接的能力。</p>
                  <p>对于连接到Oracle RAC数据库的高可用性客户端，如果数据库出现故障，您可以使用HA事件通知向客户端提供尽力而为的编程信号。客户端应用程序可以在环境句柄上注册回调，以表示对此信息的兴趣。当发生应用于此客户端建立的连接的重大故障事件时，将调用回调，其中包含有关事件（事件有效负载）的信息以及由于故障而断开连接的连接列表（服务器句柄）。</p>
                  <p>例如，考虑一个客户端应用程序，它具有两个到实例A的连接和两个到同一数据库的实例B的连接。如果实例A发生故障，则会向客户端发送事件通知，然后客户端断开与实例B的两个连接并调用已注册的回调。请注意，如果同一数据库的另一个实例C发生故障，则不会通知客户端（因为它不会影响任何客户端的连接）。</p>
                  <p>HA事件通知机制可在出现故障时改善应用程序的响应时间。在Oracle数据库10g第2版（10.2）中引入该机制之前，只有在TCP超时间隔到期后才会导致连接中断，这可能需要几分钟。通过HA事件通知，OCI会自动中断和清除独立，连接池和会话池连接，并在发生故障事件的几秒钟内调用应用程序回调。如果这些服务器句柄中的任何一个启用了TAF，则OCI也会自动启用故障转移。</p>
                  <p>在当前版本中，此功能取决于Oracle Notification Service（ONS）。它要求在数据库服务器上安装和配置Oracle Clusterware，以便客户端通过ONS接收HA通知。所有集群件安装（例如，Oracle Data Guard）都应具有相同的ONS端口。ONS不需要客户端配置。</p>
                  <div class="infoboxnote" id="GUID-EF4E3248-D4F9-4F06-ADC5-700A36AAE5E7__GUID-3B124258-ED11-4264-B861-1783110DF5A9">
                     <p class="notep1">注意：</p>
                     <p>客户端透明地从其连接的数据库获取ONS服务器信息。应用程序管理员可以使用部署配置文件<code class="codeph">oraaccess.xml</code>来扩充或覆盖该信息。
                     </p>
                  </div>
                  <p>应用程序必须连接到Oracle RAC实例才能启用HA事件通知。此外，这些应用程序必须：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<code class="codeph">OCI_EVENTS</code>模式下初始化OCI环境</p>
                     </li>
                     <li>
                        <p>连接到已启用通知的服务（使用<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code>过程将<code class="codeph">AQ_HA_NOTIFICATIONS</code>设置为<code class="codeph">TRUE</code> ）</p>
                     </li>
                     <li>
                        <p>链接线程库</p>
                     </li>
                  </ul>
                  <p>然后，这些应用程序可以注册每当HA事件发生时调用的回调。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-7A565C79-9A70-459D-BD31-F94BA3E31CE0" title="OCIEvent句柄封装了事件有效负载的属性。">OCIEvent手柄</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-F514FB5E-049B-4759-8E39-16853213F7C9" title="Oracle RAC实例中的连接池由连接到Oracle RAC的不同实例的连接池组成。">连接和会话池的OCI故障转移</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-9588A120-E61E-4E87-85E8-1E6D9155B581" title="独立连接不需要特殊处理;连接到失败实例的所有此类连接将立即断开连接。">OCI独立连接故障转移</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-889935A8-154F-460B-9050-1600C4B53EA7" title="显示OCIEventCallback类型的事件回调的签名。">事件回调</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E" title="使用自定义池，您可以检索服务器句柄的标记信息，以便可以执行适当的清理。">自定义池：标记的服务器句柄</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-D34432B4-2962-48A7-9D9C-789200091B43" title="如果连接启用或未启用TAF，则可以让应用程序调整其行为。">关于确定透明应用程序故障转移（TAF）功能</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-EF4E3248-D4F9-4F06-ADC5-700A36AAE5E7__GUID-1F9FADDE-F254-4189-BACF-D2D94DC3B0B6">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="build-and-configure-oci-applications.html#GUID-7F47F9F7-EF51-4D68-8B2A-2443C837710B" title="在sqlnet.ora和oraaccess.xml文件中同时设置等效参数时，oraaccess.xml文件设置优先于相应的sqlnet.ora文件设置。">关于客户端部署参数在oraaccess.xml中指定，</a>以获取有关<code class="codeph">oraaccess.xml</code>更多信息以及有关<code class="codeph">&lt;events&gt;</code> ， <code class="codeph">&lt;fan&gt;</code>和<code class="codeph">&lt;ons&gt;</code>下的参数的详细信息</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-7A565C79-9A70-459D-BD31-F94BA3E31CE0" name="GUID-7A565C79-9A70-459D-BD31-F94BA3E31CE0"></a><h4 id="LNOCI-GUID-7A565C79-9A70-459D-BD31-F94BA3E31CE0" class="sect4"><span class="enumeration_section">12.2.1</span> OCIEvent句柄</h4>
                  <div>
                     <p><code class="codeph">OCIEvent</code>句柄封装了事件有效负载的属性。
                     </p>
                     <p>OCI在调用事件回调之前隐式分配此句柄，事件回调可以通过调用<code class="codeph">OCIAttrGet()</code>来获取事件的只读属性。与这些属性关联的内存仅在事件回调期间有效。
                     </p>
                     <div class="infoboxnotealso" id="GUID-7A565C79-9A70-459D-BD31-F94BA3E31CE0__GUID-1B9666B6-1DDA-4C42-8026-351B232F60AD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-0AE31265-370D-4373-82D6-837A7C8C8463" title="列出并描述事件句柄属性。">事件句柄属性</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F514FB5E-049B-4759-8E39-16853213F7C9" name="GUID-F514FB5E-049B-4759-8E39-16853213F7C9"></a><h4 id="LNOCI-GUID-F514FB5E-049B-4759-8E39-16853213F7C9" class="sect4"><span class="enumeration_section">12.2.2</span>连接和会话池的OCI故障转移</h4>
                  <div>
                     <p>Oracle RAC实例中的连接池由连接到Oracle RAC的不同实例的连接池组成。</p>
                     <p>收到节点故障通知后，应清除连接到该特定实例的所有连接。对于正在使用的连接，OCI必须关闭连接：立即发生透明应用程序故障转移（TAF），并重新建立这些连接。必须清除空闲且在池的空闲列表中的连接，以便永远不会从池中将错误连接返回给用户。</p>
                     <p>为了适应自定义连接池，OCI提供了一个可以在环境句柄上注册的回调函数。如果已注册，则在发生HA事件时调用此回调。会话池的处理方式与连接池的处理方式相同。请注意，OCI连接池或会话池中的服务器句柄不会传递给回调。因此，在某些情况下，可以使用空的连接列表调用回调。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-9588A120-E61E-4E87-85E8-1E6D9155B581" name="GUID-9588A120-E61E-4E87-85E8-1E6D9155B581"></a><h4 id="LNOCI-GUID-9588A120-E61E-4E87-85E8-1E6D9155B581" class="sect4"><span class="enumeration_section">12.2.3</span>独立连接的OCI故障转移</h4>
                  <div>
                     <p>独立连接不需要特殊处理;连接到失败实例的所有此类连接将立即断开连接。</p>
                     <p>对于空闲连接，当在后续OCI呼叫上使用连接时，TAF参与重新建立连接。在故障事件发生时使用的连接会立即中断，以便TAF可以开始。请注意，这也适用于连接和会话池的“使用中”连接。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-889935A8-154F-460B-9050-1600C4B53EA7" name="GUID-889935A8-154F-460B-9050-1600C4B53EA7"></a><h4 id="LNOCI-GUID-889935A8-154F-460B-9050-1600C4B53EA7" class="sect4"><span class="enumeration_section">12.2.4</span>事件回调</h4>
                  <div>
                     <p>显示<code class="codeph">OCIEventCallback</code>类型的事件回调的<code class="codeph">OCIEventCallback</code> 。
                     </p>
                     <p>类型为<code class="codeph">OCIEventCallback</code>的事件回调具有以下签名：</p><pre class="oac_no_warn" dir="ltr">void evtcallback_fn（void * evtctx，OCIEvent * eventhp）;</pre><p>在此签名中， <code class="codeph">evtctx</code>是客户端上下文， <code class="codeph">OCIEvent</code>是一个对OCI库不透明的事件句柄。另一个输入参数是<code class="codeph">eventhp</code> ，即事件句柄（与事件关联的属性）。
                     </p>
                     <p>如果已注册，则为每个事件调用此函数一次。对于Oracle RAC HA事件，在受影响的连接断开连接后将调用此回调。以下环境句柄属性分别用于注册事件回调和上下文：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_ATTR_EVTCBK</code>的数据类型为<code class="codeph">OCIEventCallback</code> <code class="codeph">*</code> 。它是只读的。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_ATTR_EVTCTX</code>的数据类型为<code class="codeph">void</code> <code class="codeph">*</code> 。它也是只读的。
                           </p>
                        </li>
                     </ul><pre class="oac_no_warn" dir="ltr">text * myctx =“虚拟上下文”; / *虚拟上下文传递给回调fn * / .../ * OCI_ATTR_EVTCBK和OCI_ATTR_EVTCTX是只读的。* / OCIAttrSet（envhp，（ub4）OCI_HTYPE_ENV，（void *）evtcallback_fn，（ub4）0，（ub4）OCI_ATTR_EVTCBK，errhp）; OCIAttrSet（envhp，（ub4）OCI_HTYPE_ENV，（void *）myctx，（ub4）0，（ub4）OCI_ATTR_EVTCTX，errhp）; ...
</pre><p>在OCI事件回调中，受影响的服务器句柄列表封装在<code class="codeph">OCIEvent</code>句柄中。对于Oracle RAC HA DOWN事件，客户端应用程序可以通过使用具有属性类型<code class="codeph">OCI_ATTR_HA_SRVFIRST</code>和<code class="codeph">OCI_ATTR_HA_SRVNEXT</code> <code class="codeph">OCIAttrGet()</code>来迭代受事件影响的服务器句柄列表：</p><pre class="oac_no_warn" dir="ltr">OCIAttrGet（eventhp，OCI_HTYPE_EVENT，（void *）＆srvhp，（ub4 *）0，OCI_ATTR_HA_SRVFIRST，errhp）; / *或，* / OCIAttrGet（eventhp，OCI_HTYPE_EVENT，（void *）＆srvhp，（ub4 *）0，OCI_ATTR_HA_SRVNEXT，errhp）;</pre><p>使用属性<code class="codeph">OCI_ATTR_HA_SRVFIRST</code>调用时，此函数将检索受影响的服务器句柄列表中的第一个服务器句柄。使用属性<code class="codeph">OCI_ATTR_HA_SRVNEXT</code>调用时，此函数将检索列表中的下一个服务器句柄。当没有更多服务器句柄返回时，此函数返回<code class="codeph">OCI_NO_DATA</code>并且<code class="codeph">srvhp</code>是<code class="codeph">NULL</code>指针。
                     </p>
                     <p><code class="codeph">srvhp</code>是指向服务器句柄的输出指针，该句柄的连接因HA事件而关闭。 <code class="codeph">errhp</code>是填充的错误句柄。当没有更多受影响的服务器句柄要检索时，应用程序返回<code class="codeph">OCI_NO_DATA</code>错误。
                     </p>
                     <p>检索已受HA事件影响的服务器句柄列表时，请注意该连接已关闭且许多服务器句柄属性不再有效。而是使用服务器句柄的用户内存段来存储事件通知回调所需的任何每个连接属性。在释放服务器句柄之前，此内存仍然有效。</p>
                     <div class="infoboxnotealso" id="GUID-889935A8-154F-460B-9050-1600C4B53EA7__GUID-512ED298-0BDC-46CA-8748-FCE0D864A337">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E" name="GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E"></a><h4 id="LNOCI-GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E" class="sect4"><span class="enumeration_section">12.2.5</span>自定义池：标记的服务器句柄</h4>
                  <div>
                     <p>使用自定义池，您可以检索服务器句柄的标记信息，以便可以执行适当的清理。</p>
                     <p>以下功能适用于自定义池：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果服务器句柄是代表自定义池创建的，则可以使用其父连接对象标记服务器句柄。使用<code class="codeph">OCIHandleAlloc()</code>的“user memory”参数请求为服务器句柄分配用户内存段。<code class="codeph">OCIHandleAlloc()</code>返回指向“用户存储器”段的指针。
                           </p>
                        </li>
                        <li>
                           <p>当HA事件发生并且检索到受影响的服务器句柄时，有一种方法可以检索服务器句柄的标记信息，以便可以执行适当的清理。属性<code class="codeph">OCI_ATTR_USER_MEMORY</code>用于检索指向句柄的用户内存段的指针。<code class="codeph">OCI_ATTR_USER_MEMORY</code>对所有用户分配的句柄有效。如果句柄分配了额外的内存，则此属性返回指向用户内存的指针。对于未分配额外内存的句柄，将返回<code class="codeph">NULL</code>指针。此属性是只读的，数据类型为<code class="codeph">void*</code> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E__GUID-CECC5161-D15D-4AE2-91F9-E2FD8EB99A8F">
                        <p class="notep1">注意：</p>
                        <p>您可以自由定义服务器句柄的用户内存段的精确内容，以便在HA事件回调中促进清理活动（或者在需要时用于其他目的），因为OCI不以任何方式写入或读取此内存。通过服务器句柄上的<code class="codeph">OCIHandleFree()</code>调用释放用户内存段。
                        </p>
                     </div>
                     <p><a href="high-availability-in-oci.html#GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E__CACCIFIF">例12-1</a>显示了事件通知的一个例子。
                     </p>
                     <div class="example" id="GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E__CACCIFIF">
                        <p class="titleinexample">例12-1事件通知</p><pre class="oac_no_warn" dir="ltr">剑报; OCIServer * srvhp; struct myctx {void * parentConn_myctx; uword numval_myctx; }; typedef struct myctx myctx; myctx * myctxp; / *使用用户内存分配服务器句柄 -  10.2之前的功能* / if（retval = OCIHandleAlloc（envhp，（void **）＆srvhp，OCI_HTYPE_SERVER，（size_t）sizeof（myctx），（void **）＆myctxp）/ * handle error * / myctxp-&gt; parentConn_myctx = &lt;parent connection reference&gt;; / *在事件回调函数中，检索指向用户内存的指针* / evtcallback_fn（void * evtctx，OCIEvent * eventhp）{myctx * ctxp =（myctx *） evtctx; OCIServer * srvhp; OCIError * errhp; sb4 retcode; retcode = OCIAttrGet（eventhp，OCI_HTYPE_SERVER，＆srvhp，（ub4 *）0，OCI_ATTR_HA_SRVFIRST，errhp）; while（！retcode）/ * OCIAttrGet将返回OCI_NO_DATA，如果不再有srvhp * / {OCIAttrGet（（void *）srvhp，OCI_HTYPE_SERVER，（void *）＆ctxp，（ub4）0，（ub4）OCI_ATTR_USER_MEMORY，errhp）; / *从父连接对象中删除服务器句柄* / retcode = OCIAttrGet（eventhp，OCI_HTYPE_SERVER，＆srvhp，（ub4 *）0，OCI_ATTR_HA_SRVNEXT，errhp）; ...} ...}</pre><div class="infoboxnotealso" id="GUID-4EDF9F6A-6210-4731-909A-838EC0E7BB2E__GUID-1BF0FA44-60E1-411F-87C2-8DEC2078F8C3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="显式释放句柄">OCIHandleFree（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D34432B4-2962-48A7-9D9C-789200091B43" name="GUID-D34432B4-2962-48A7-9D9C-789200091B43"></a><h4 id="LNOCI-GUID-D34432B4-2962-48A7-9D9C-789200091B43" class="sect4"><span class="enumeration_section">12.2.6</span>关于确定透明应用程序故障转移（TAF）功能</h4>
                  <div>
                     <p>如果连接启用或未启用TAF，则可以让应用程序调整其行为。</p>
                     <p>使用<code class="codeph">OCIAttrGet()</code>如下确定服务器句柄是否启用TAF：</p><pre class="oac_no_warn" dir="ltr">boolean taf_capable; ...OCIAttrGet（srvhp，（ub4）OCI_HTYPE_SERVER，（void *）＆taf_capable，（ub4）sizeof（taf_capable），（ub4）OCI_ATTR_TAF_ENABLED，errhp）; ...
</pre><p>在此示例中， <code class="codeph">taf_capable</code>是一个<span>布尔变量</span> ，如果服务器句柄启用了TAF，则此调用设置为<code class="codeph">TRUE</code>否则设置为<code class="codeph">FALSE</code> ; <code class="codeph">srvhp</code>是输入目标服务器句柄; <code class="codeph">OCI_ATTR_TAF_ENABLED</code>是一个属性，它是一个指向<span>布尔</span>变量的指针，并且是只读的; <code class="codeph">errhp</code>是一个输入错误句柄。
                     </p>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F" name="GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F"></a><h3 id="LNOCI-GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F" class="sect3"><span class="enumeration_section">12.3</span> OCI中的透明应用程序故障转移</h3>
               <div>
                  <p>透明应用程序故障转移（TAF）是一种客户端功能，旨在最大程度地减少由于实例或网络故障导致数据库连接失败时发生的对最终用户应用程序的中断。</p>
                  <p>TAF可以在各种系统配置上实施，包括Oracle Real Application Clusters（Oracle RAC）和Oracle Data Guard物理备用数据库。重启单个实例系统后也可以使用TAF（例如，在进行修复时）。</p>
                  <p>可以将TAF配置为还原数据库会话，也可以选择重播打开的查询。从Oracle数据库10g第2版（10.2）开始，应用程序尝试在故障尝试故障转移后尝试使用的所有语句。也就是说，尝试执行或获取其他语句就像失败时间语句一样使用TAF恢复。后续语句现在可能成功（而在过去它们失败），或者应用程序可能会收到与尝试的TAF恢复相对应的错误（例如<code class="codeph">ORA-25401</code> ）。
                  </p>
                  <div class="infoboxnote" id="GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F__GUID-ECE2F46C-FE35-4806-873B-0E4A5F9DC5E3">
                     <p class="notep1">注意：</p>
                     <p>Oracle建议应用程序注册回调，因此当发生故障转移时，可以使用回调将会话还原到所需的状态。</p>
                  </div>
                  <div class="infoboxnote" id="GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F__GUID-F4ECC2C1-0DBC-4EB2-A14F-C44453ECDFE4">
                     <p class="notep1">注意：</p>
                     <p>远程数据库链接或DML语句不支持TAF。</p>
                  </div>
                  <div class="p">本节包含以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-B80BF32E-A4E5-4995-A5C6-0C53F823130F" title="可以在客户端和服务器端配置TAF。如果两者都配置，则服务器端设置优先。">关于配置透明应用程序故障转移</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029" title="由于故障转移期间可能发生延迟，应用程序开发人员可能希望通知用户正在进行故障转移，并请求用户等待故障转移完成的通知。">OCI中的透明应用程序故障转移回调</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6" title="描述TAF回调结构和参数。">透明应用程序故障转移回调结构和参数</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-C3241340-0A2E-4D02-9981-A7F091051664" title="显示和描述用户定义的应用程序故障转移回调函数的基本结构。">故障转移回调结构和参数</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-6DDC46DE-B960-4DD6-9B2F-DC4AA904A2F3" title="对于要使用的故障转移回调，它必须在服务器上下文句柄上注册。通过创建回调定义结构并将服务器句柄的OCI_ATTR_FOCBK属性设置为此结构来完成此注册。">故障转移回调注册</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-860A2B81-F867-4345-96DE-F423753D1D91" title="显示几个故障转移回调示例。">故障转移回调示例</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8" title="故障转移尝试并不总是成功。如果尝试失败，则回调函数在fo_event参数中接收值OCI_FO_ABORT或OCI_FO_ERROR。">处理OCI_FO_ERROR</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-B80BF32E-A4E5-4995-A5C6-0C53F823130F" name="GUID-B80BF32E-A4E5-4995-A5C6-0C53F823130F"></a><h4 id="LNOCI-GUID-B80BF32E-A4E5-4995-A5C6-0C53F823130F" class="sect4"><span class="enumeration_section">12.3.1</span>关于配置透明应用程序故障转移</h4>
                  <div>
                     <p>可以在客户端和服务器端配置TAF。如果两者都配置，则服务器端设置优先。</p>
                     <p>通过在连接描述符的<code class="codeph">CONNECT_DATA</code>部分中包含<code class="codeph">FAILOVER_MODE</code>参数，在客户端配置TAF。
                     </p>
                     <p>通过使用<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code>打包过程修改目标服务，在服务器端配置TAF。
                     </p>
                     <p>故障转移的初始尝试可能并不总是成功。OCI提供了一种在尝试失败后重试故障转移的机制。</p>
                     <div class="infoboxnotealso" id="GUID-B80BF32E-A4E5-4995-A5C6-0C53F823130F__GUID-5399ECA3-3E96-456B-AB8A-58C06FF94417">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关TAF客户端配置的更多信息，请参阅<a href="../netrf/local-naming-parameters-in-tns-ora-file.html#NETRF279" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a> （连接数据部分）</p>
                           </li>
                           <li>
                              <p>有关TAF（DBMS_SERVICE）服务器端配置的更多信息，请参阅<a href="../arpls/DBMS_SERVICE.html#ARPLS092" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p> </p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029" name="GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029"></a><h4 id="LNOCI-GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029" class="sect4"><span class="enumeration_section">12.3.2</span> OCI中的透明应用程序故障转移回调</h4>
                  <div>
                     <p>由于故障转移期间可能发生延迟，应用程序开发人员可能希望通知用户正在进行故障转移，并请求用户等待故障转移完成的通知。</p>
                     <p>此外，初始实例上的会话可能已收到一些<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>命令。这些<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>命令不会在第二个实例上自动重播。因此，开发人员可能希望在第二个实例上重放它们。还必须重新执行影响会话的<code class="codeph">OCIAttrSet()</code>调用。
                     </p>
                     <p>为了满足这些要求，应用程序开发人员可以注册故障转移回调函数。如果发生故障转移，则在重新建立用户会话时多次调用回调函数。</p>
                     <p>当数据库首次检测到实例连接丢失时，将首次调用回调函数。此回调旨在允许应用程序通知用户即将发生的延迟。如果故障转移成功，则在重新建立和使用连接时会发生对回调函数的第二次调用。</p>
                     <p>重新建立连接后，客户端可能希望重播<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>命令并通知用户已发生故障转移。如果故障转移不成功，则调用回调以通知应用程序无法进行故障转移。此外，每次在新连接上重新验证主句柄之外的用户句柄时，都会调用回调。由于每个用户句柄代表服务器端会话，因此客户端可能希望重播该会话的<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>命令。
                     </p>
                     <div class="infoboxnotealso" id="GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029__GUID-3472650E-73ED-4D3C-AAB5-ECA412AFD7F0">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></p>
                           </li>
                           <li>
                              <p><a href="high-availability-in-oci.html#GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8" title="故障转移尝试并不总是成功。如果尝试失败，则回调函数在fo_event参数中接收值OCI_FO_ABORT或OCI_FO_ERROR。">处理OCI_FO_ERROR</a>以获取有关此方案的更多信息</p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6" name="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6"></a><h4 id="LNOCI-GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6" class="sect4"><span class="enumeration_section">12.3.3</span>透明应用程序故障转移回调结构和参数</h4>
                  <div>
                     <p>描述TAF回调结构和参数。</p>
                     <p>透明应用程序故障转移（TAF）回调函数的基本结构如下：</p><pre class="oac_no_warn" dir="ltr">sb4 TAFcbk_fn（OCISvcCtx * svchp，OCIEnv * envhp，void * fo_ctx，ub4 fo_type，ub4 fo_event）;</pre><dl>
                        <dt class="dlterm"><a name="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6__GUID-D2B2B2EF-2CB2-422C-A086-3A0869BC79E2"><!-- --></a> svchp</dt>
                        <dd>
                           <p>服务上下文句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6__GUID-95AD87F7-0C9D-4B30-B3B8-E677F2AFA49B"><!-- --></a> envhp</dt>
                        <dd>
                           <p>OCI环境处理。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6__GUID-C3669A54-4D7A-4E4C-ADD3-CC8DEF859713"><!-- --></a> fo_ctx</dt>
                        <dd>
                           <p>客户端上下文。这是指向客户端指定的内存的指针。在此区域中，客户可以保留任何必要的状态或上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6__GUID-CEC7681E-9839-416B-9CC3-BCAA294790B4"><!-- --></a> fo_type</dt>
                        <dd>
                           <div class="p">故障转移类型。这使回调知道客户端请求的故障转移类型。通常的值如下：<ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_FO_SESSION</code>表示用户仅请求了会话故障转移。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_FO_SELECT</code>表示用户也请求了选择故障转移。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3C9922CC-3346-4C29-81F8-8E3CF7170CF6__GUID-CEAF5918-C959-4396-949E-7BB327B85000"><!-- --></a> fo_event</dt>
                        <dd>
                           <div class="p">故障转移事件指示故障转移的当前状态。
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_FO_BEGIN</code>表示故障转移已检测到连接丢失并且故障转移正在启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_FO_END</code>表示成功完成故障转移。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_FO_ABORT</code>表示故障转移不成功，并且没有重试选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_FO_ERROR</code>还指示故障转移不成功，但它使应用程序有机会处理错误<code class="codeph">OCI_FO_ERROR</code>试故障转移。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_FO_REAUTH</code>表示您有多个身份验证句柄，并且在原始身份验证后发生了故障转移。它表示用户句柄已重新进行身份验证。为了确定哪一个，应用程序检查服务上下文句柄<code class="codeph">svchp</code>的<code class="codeph">OCI_ATTR_SESSION</code>属性。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                     </dl>
                     <p>如果配置了应用程序连续性，则在成功重新连接，重新验证和确定机上事务的状态后，将使用<code class="codeph">OCI_FO_END</code>调用TAF回调。
                     </p>
                     <p>完成TAF回调后，如果存在打开的事务并且启用了OCI的应用程序连续性，OCI将返回错误。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-C3241340-0A2E-4D02-9981-A7F091051664" name="GUID-C3241340-0A2E-4D02-9981-A7F091051664"></a><h4 id="LNOCI-GUID-C3241340-0A2E-4D02-9981-A7F091051664" class="sect4"><span class="enumeration_section">12.3.4</span>故障转移回调结构和参数</h4>
                  <div>
                     <p>显示和描述用户定义的应用程序故障转移回调函数的基本结构。</p>
                     <p>用户定义的应用程序故障转移回调函数的基本结构如下：</p><pre class="oac_no_warn" dir="ltr">sb4 appfocallback_fn（void * svchp，void * envhp，void * fo_ctx，ub4 fo_type，ub4 fo_event）;</pre><p>第9-31页的“故障转移回调示例”中提供了以下参数的示例：</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-C3241340-0A2E-4D02-9981-A7F091051664__GUID-BEA274C9-256A-4618-AF1E-8B752BA5FA54"><!-- --></a> svchp</dt>
                        <dd>
                           <p>第一个参数<code class="codeph">svchp</code>是服务上下文句柄。它的类型为<code class="codeph">void *</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C3241340-0A2E-4D02-9981-A7F091051664__GUID-E0324FA7-6FDD-4AB3-A132-C3C6BB676F0E"><!-- --></a> envhp</dt>
                        <dd>
                           <p>第二个参数<code class="codeph">envhp</code>是OCI环境句柄。它的类型为<code class="codeph">void *</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C3241340-0A2E-4D02-9981-A7F091051664__GUID-7BEAF6CC-5C8B-4669-B86E-AC9C71BAB580"><!-- --></a> fo_ctx</dt>
                        <dd>
                           <p>第三个参数<code class="codeph">fo_ctx</code>是客户端上下文。它是指向客户端指定的内存的指针。在此区域中，客户可以保留任何必要的状态或上下文。它作为<code class="codeph">void *</code>传递。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-C3241340-0A2E-4D02-9981-A7F091051664__GUID-F02332EE-B218-4728-BE16-CE8F7120B294"><!-- --></a> fo_type</dt>
                        <dd>
                           <p>第四个参数<code class="codeph">fo_type</code>是故障转移类型。这使回调知道客户端请求的故障转移类型。通常的值如下：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_FO_SESSION</code>表示用户仅请求了会话故障转移。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FO_SELECT</code>表示用户也请求了选择故障转移。
                           </p>
                        </li>
                     </ul>
                     <dl>
                        <dt class="dlterm"><a name="GUID-C3241340-0A2E-4D02-9981-A7F091051664__GUID-B41E338F-B047-400E-B249-F54CD38EBD55"><!-- --></a> fo_event</dt>
                        <dd>
                           <p>最后一个参数是故障转移事件。这表明回调为什么要调用它。它有几个可能的值：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_FO_BEGIN</code>表示故障转移已检测到连接丢失并且故障转移正在启动。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FO_END</code>表示成功完成故障转移。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FO_ABORT</code>表示故障转移不成功，并且没有重试选项。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FO_ERROR</code>还指示故障转移不成功，但它使应用程序有机会处理错误<code class="codeph">OCI_FO_ERROR</code>试故障转移。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FO_REAUTH</code>表示您有多个身份验证句柄，并且在原始身份验证后发生了故障转移。它表示用户句柄已重新进行身份验证。为了确定哪一个，应用程序检查服务上下文句柄的<code class="codeph">OCI_ATTR_SESSION</code>属性（这是第一个参数）。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6DDC46DE-B960-4DD6-9B2F-DC4AA904A2F3" name="GUID-6DDC46DE-B960-4DD6-9B2F-DC4AA904A2F3"></a><h4 id="LNOCI-GUID-6DDC46DE-B960-4DD6-9B2F-DC4AA904A2F3" class="sect4"><span class="enumeration_section">12.3.5</span>故障转移回叫注册</h4>
                  <div>
                     <p>对于要使用的故障转移回调，它必须在服务器上下文句柄上注册。通过创建回调定义结构并将服务器句柄的<code class="codeph">OCI_ATTR_FOCBK</code>属性设置<code class="codeph">OCI_ATTR_FOCBK</code>结构来完成此注册。
                     </p>
                     <p>回调定义结构必须是<code class="codeph">OCIFocbkStruct</code>类型。它有两个字段： <code class="codeph">callback_function</code> ，它包含要调用的函数的地址， <code class="codeph">fo_ctx</code> ，包含客户端上下文的地址。
                     </p>
                     <div class="infoboxnotealso" id="GUID-6DDC46DE-B960-4DD6-9B2F-DC4AA904A2F3__GUID-BBC89C26-CBD9-4036-B6B0-B436EC2662EC">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="high-availability-in-oci.html#GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACDAEEJ">例12-3</a>给出了回调注册的例子</p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-860A2B81-F867-4345-96DE-F423753D1D91" name="GUID-860A2B81-F867-4345-96DE-F423753D1D91"></a><h4 id="LNOCI-GUID-860A2B81-F867-4345-96DE-F423753D1D91" class="sect4"><span class="enumeration_section">12.3.6</span>故障转移回调示例</h4>
                  <div>
                     <p>显示几个故障转移回调示例。</p>
                     <div class="section">
                        <p>本节显示了一个简单的用户定义的回调函数定义（参见<a href="high-availability-in-oci.html#GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACJJHGH">例12-2</a> ），故障转移回调注册（参见<a href="high-availability-in-oci.html#GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACDAEEJ">例12-3</a> ）和故障转移回调取消注册的<a href="high-availability-in-oci.html#GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACDJGDG">示例</a> （参见<a href="high-availability-in-oci.html#GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACDJGDG">例12-4</a> ）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACJJHGH">
                        <p class="titleinexample">例12-2用户定义的故障转移回调函数定义</p><pre class="oac_no_warn" dir="ltr">sb4 callback_fn（svchp，envhp，fo_ctx，fo_type，fo_event）void * svchp; void * envhp; void * fo_ctx; ub4 fo_type; ub4 fo_event; {switch（fo_event）{case OCI_FO_BEGIN：{printf（“Failing Over ...请等待\ n“）; printf（”故障转移类型被发现是％s \ n“，（（fo_type == OCI_FO_SESSION）？“SESSION”:( fo_type == OCI_FO_SELECT）？“选择”：“未知！“））; printf（”故障转移上下文是：％s \ n“，（fo_ctx？（char *）fo_ctx：“NULL指针！“））; break;} case OCI_FO_ABORT：{printf（”Failover stopped。故障转移不会发生。\ n“）; break;} case OCI_FO_END：{printf（”Failover ended ... resuming services \ n“）; break;} case OCI_FO_REAUTH：{printf（”用户失败。恢复服务\ n“）; break;}默认值：{printf（”错误故障转移事件：％d。\ n“，fo_event）; break;}}返回0;}</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACDAEEJ">
                        <p class="titleinexample">示例12-3故障转移回调注册</p><pre class="oac_no_warn" dir="ltr">int register_callback（srvh，errh）void * srvh; / *服务器句柄* / OCIError * errh; / *错误句柄* / {OCIFocbkStruct故障转移; / * failover回调结构* / /为上下文分配内存* / if（！（failover.fo_ctx =（void *）malloc（strlen（“my context。”）+ 1）））return（1）; / *初始化上下文。* / strcpy（（char *）failover.fo_ctx，“我的上下文。”）; failover.callback_function =＆callback_fn; / *做注册* / if（OCIAttrSet（srvh，（ub4）OCI_HTYPE_SERVER，（void *）＆failover，（ub4）0，（ub4）OCI_ATTR_FOCBK，errh）！= OCI_SUCCESS）return（2）; / *成功结论* / return（0）; }</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-860A2B81-F867-4345-96DE-F423753D1D91__CACDJGDG">
                        <p class="titleinexample">示例12-4故障转移回调取消注册</p><pre class="oac_no_warn" dir="ltr">OCIFocbkStruct故障转移; / *故障转移回调结构* /剑状态; / *将故障转移上下文设置为null * / failover.fo_ctx = NULL; / *将故障转移回调设置为null * / failover.callback_function = NULL; / *取消注册回调* / status = OCIAttrSet（srvhp，（ub4）OCI_HTYPE_SERVER，（void *）＆failover，（ub4）0，（ub4）OCI_ATTR_FOCBK，errhp）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8" name="GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8"></a><h4 id="LNOCI-GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8" class="sect4"><span class="enumeration_section">12.3.7</span>处理OCI_FO_ERROR</h4>
                  <div>
                     <p>故障转移尝试并不总是成功。如果尝试失败，则回调函数在<code class="codeph">fo_event</code>参数中接收值<code class="codeph">OCI_FO_ABORT</code>或<code class="codeph">OCI_FO_ERROR</code> 。
                     </p>
                     <div class="section">
                        <p>值<code class="codeph">OCI_FO_ABORT</code>表示故障转移不成功，并且无法进行进一步的故障转移尝试。但是， <code class="codeph">OCI_FO_ERROR</code>为回调函数提供了处理错误的机会。例如，回调可以选择等待指定的时间段，然后向OCI库指示它必须重新尝试故障转移。
                        </p>
                        <div class="infoboxnote" id="GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8__GUID-57E6B159-985F-486D-860A-BDBC85CA75F6">
                           <p class="notep1">注意：</p>
                           <p>此功能仅适用于与针对任何Oracle数据库服务器运行的8.0.5或更高版本OCI库链接的应用程序。</p>
                           <p>如果LOB列是选择列表的一部分，则故障转移不起作用。</p>
                        </div>
                        <p>考虑<a href="high-availability-in-oci.html#GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8__CACEHAGA" title="该表由2列描述。第1列是指定为时间线T0到T7的时间，第2列是每个时间轴时间发生的事件。">表12-1中列出</a>的事件的时间表。
                        </p>
                        <div class="tblformal" id="GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8__CACEHAGA">
                           <p class="titleintable">表12-1时间和事件</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="时间和事件" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the time designated as a timeline T0 through T7 and column 2 is the event that occurs for each timeline time." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="15%" id="d119972e4097">时间</th>
                                    <th align="left" valign="bottom" width="85%" id="d119972e4100">事件</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4105" headers="d119972e4097 ">
                                       <p>T0</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4105 d119972e4100 ">
                                       <p>数据库失败（失败持续到T5）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4112" headers="d119972e4097 ">
                                       <p>T1</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4112 d119972e4100 ">
                                       <p>故障转移由用户活动触发。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4119" headers="d119972e4097 ">
                                       <p>T2</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4119 d119972e4100 ">
                                       <p>用户尝试重新连接;尝试失败。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4126" headers="d119972e4097 ">
                                       <p>T3</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4126 d119972e4100 ">
                                       <p>使用<code class="codeph">OCI_FO_ERROR</code>调用故障转移回调。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4136" headers="d119972e4097 ">
                                       <p>T4</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4136 d119972e4100 ">
                                       <p>故障转移回调进入预定的睡眠时段。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4143" headers="d119972e4097 ">
                                       <p>T5</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4143 d119972e4100 ">
                                       <p>数据库再次恢复。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4150" headers="d119972e4097 ">
                                       <p>T6</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4150 d119972e4100 ">
                                       <p>故障转移回调会触发新的故障转移尝试;它很成功。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d119972e4157" headers="d119972e4097 ">
                                       <p>T7</p>
                                    </td>
                                    <td align="left" valign="top" width="85%" headers="d119972e4157 d119972e4100 ">
                                       <p>用户成功重新连接。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>回调函数通过从函数返回值<code class="codeph">OCI_FO_RETRY</code>来触发新的故障转移尝试。
                        </p>
                        <p><a href="high-availability-in-oci.html#GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8__CACFEBEJ">例12-5</a>显示了一个回调函数，您可以使用它来实现类似于前面描述的场景的故障转移策略。在这种情况下，故障转移回调进入一个休眠循环，然后重新尝试故障转移，直到它成功：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8B99BA40-ABB5-4EA8-8820-FBAAA43CA4F8__CACFEBEJ">
                        <p class="titleinexample">示例12-5实现故障转移策略的回调函数</p><pre class="oac_no_warn" dir="ltr">/ * ------------------------------------------------ -------------------- * / / *用户定义的故障转移回调* / / * ---------------- -------------------------------------------------- -  * / sb4 callback_fn（svchp，envhp，fo_ctx，fo_type，fo_event）void * svchp; void * envhp; void * fo_ctx; ub4 fo_type; ub4 fo_event; {OCIError * errhp; OCIHandleAlloc（envhp，（void **）＆errhp，（ub4）OCI_HTYPE_ERROR，（size_t）0，（void **）0）; switch（fo_event）{case OCI_FO_BEGIN：{printf（“Failing Over ...请等待\ n“）; printf（”故障转移类型被发现为％s \ n“，（（fo_type == OCI_FO_NONE）？“无”：（fo_type == OCI_FO_SESSION）？“SESSION”:( fo_type == OCI_FO_SELECT）？“SELECT”:( fo_type == OCI_FO_TXNAL）？“交易”：“未知！“））; printf（”故障转移上下文是：％s \ n“，（fo_ctx？（char *）fo_ctx：“NULL指针！“））; break;} case OCI_FO_ABORT：{printf（”Failover aborted。故障转移不会发生。\ n“）; break;} case OCI_FO_END：{printf（”\ n Failover ends ... resuming services \ n“）; break;} case OCI_FO_REAUTH：{printf（”用户失败。恢复服务\ n“）; break;} case OCI_FO_ERROR：{/ *这样的所有调用只能生成一行。换行符*将在fo_end时间放置。* / printf（“故障转移错误已获取。正在睡觉......“）; sleep（3）; printf（”Retrying。“）; return（OCI_FO_RETRY）; break;} default：{printf（”Bad Failover Event：％d。\ n“，fo_event）; break; } return 0;}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A675AF7B-6FF0-460D-A6E6-C15E7C328C8F" name="GUID-A675AF7B-6FF0-460D-A6E6-C15E7C328C8F"></a><h3 id="LNOCI-GUID-A675AF7B-6FF0-460D-A6E6-C15E7C328C8F" class="sect3"><span class="enumeration_section">12.4</span> OCI和交易卫士</h3>
               <div>
                  <p>Transaction Guard在计划内或计划外中断的情况下引入了最多一次事务执行的概念，以帮助防止故障转移时的应用程序提交原始提交的重复提交。</p>
                  <p></p>
                  <p>当应用程序使用此服务打开与数据库的连接时，逻辑事务ID（LTXID）将在身份验证时生成并存储在会话句柄中。这是一个全局唯一的ID，它从应用程序的角度标识数据库事务。当发生中断时，使用Transaction Guard的应用程序可以从先前失败的会话句柄中检索LTXID，并使用它来确定在会话失败之前处于活动状态的事务的结果。如果确定LTXID未使用，则应用程序可以通过首先使用检索到的LTXID阻止原始提交来重放未提交的事务。如果确定使用LTXID，则提交事务并将结果返回给应用程序。</p>
                  <p>Transaction Guard是支持JDBC Type 4（Oracle Thin），OCI，OCCI和Oracle Data Provider for .NET（ODP.NET）驱动程序的开发人员API。对于OCI，当编写应用程序以支持Transaction Guard时，在中断时，OCI客户端驱动程序通过使用<code class="codeph">OCI_ATTR_LTXID</code>会话句柄属性调用<code class="codeph">OCI_ATTR_GET()</code>来从先前失败的会话句柄获取并检索LTXID。
                  </p>
                  <p>本节包括以下主题： <a href="high-availability-in-oci.html#GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23" title="本节介绍开发使用Transaction Guard的OCI用户应用程序。">开发使用Transaction Guard的应用程序</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-A675AF7B-6FF0-460D-A6E6-C15E7C328C8F__GUID-E3CF22A9-BA3E-4F88-87D2-C7DF883994E7">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../adfns/transaction-guard.html#ADFNS8000" target="_blank"><span><cite>“Oracle数据库开发指南”，</cite></span></a>以获取有关使用Transaction Guard的章节中的信息，以获取Transaction Guard的概述，支持的事务类型，不受支持的事务类型以及使用Transaction Guard的数据库配置信息。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23" name="GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23"></a><h4 id="LNOCI-GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23" class="sect4"><span class="enumeration_section">12.4.1</span>开发使用Transaction Guard的应用程序</h4>
                  <div>
                     <p>本节介绍开发使用Transaction Guard的OCI用户应用程序。</p>
                     <div class="section">
                        <p>有关使用Transaction Guard开发应用程序的更多详细信息，请参阅“ <a href="../adfns/transaction-guard.html#ADFNS8000" target="_blank"><span><cite>Oracle数据库开发指南”中</cite></span></a>有关使用Transaction Guard的章节。
                        </p>
                        <p>对于使用Transaction Guard以便能够为OCI的会话进行故障转移的第三方或用户应用程序，它必须包括几个主要步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>验证是否为连接启用了透明应用程序故障转移（TAF）。不要尝试在启用TAF的连接上显式使用Transaction Guard，因为TAF将自动检查<code class="codeph">LTXID</code> 。</span></li>
                        <li class="stepexpand"><span>在收到错误，判断错误是否是可恢复的错误- <code class="codeph">OCI_ATTR_ERROR_IS_RECOVERABLE</code>上<code class="codeph">OCI_ERROR</code>手柄。如果错误可恢复，则继续执行步骤<a href="high-availability-in-oci.html#GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23__CACFHAAG">3</a> 。</span><div>
                              <div class="infoboxnote" id="GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23__GUID-DFBE8124-9838-4780-9E59-E7F81EB3CE57">
                                 <p class="notep1">注意：</p>
                                 <p>如果连接没有遇到可恢复的错误，请勿尝试使用LTXID检查事务结果。</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23__CACFHAAG"><span>通过使用OCI_ATTR_GET（）从用户会话句柄获取OCI_ATTR_LTXID，检索与失败会话关联的LTXID。</span></li>
                        <li class="stepexpand"><span>重新连接到数据库。</span><div>
                              <div class="infoboxnote" id="GUID-6A12DE3A-479A-4D06-8305-AA450BFF6B23__GUID-82ABA5C6-B605-44B2-AD42-9FC952306A5B">
                                 <p class="notep1">注意：</p>
                                 <p>新会话将具有新的LTXID，但在检查原始会话的状态时您将不需要它。</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用从<code class="codeph">OCI_ATTR_GET()</code>调用获得的<code class="codeph">OCI_ATTR_GET()</code>调用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code> PL / SQL过程。如果尚未使用LTXID，则故障转移会话的原始LTXID将标记为强制。返回状态告诉驱动程序最后一个事务是<code class="codeph">COMMITTED (TRUE/FALSE)</code>还是<code class="codeph">USER_CALL_COMPLETED (TRUE/FALSE)</code> 。</span></li>
                        <li class="stepexpand"><span>应用程序可以重播未提交的事务或将结果返回给用户。如果重放本身导致中断，则重放会话的LTXID用于<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>过程。</span></li>
                     </ol>
                     <div class="section">
                        <div class="p">有关Transaction Guard用法和示例，请参阅以下部分：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="high-availability-in-oci.html#GUID-10A6CFB0-E480-48FE-B3A2-BB5AE6F88DF0" title="显示使用伪代码的Transaction Guard的典型用法。">典型的交易保护用法</a></p>
                              </li>
                              <li>
                                 <p><a href="high-availability-in-oci.html#GUID-671647AA-875B-45B6-BAA8-311B3E007EB9" title="显示Transaction Guard演示程序。">交易警卫示例</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-10A6CFB0-E480-48FE-B3A2-BB5AE6F88DF0" name="GUID-10A6CFB0-E480-48FE-B3A2-BB5AE6F88DF0"></a><h5 id="LNOCI-GUID-10A6CFB0-E480-48FE-B3A2-BB5AE6F88DF0" class="sect5"><span class="enumeration_section">12.4.1.1</span>典型的事务处理防护用法</h5>
                     <div>
                        <p>显示使用伪代码的Transaction Guard的典型用法。</p>
                        <p>以下伪代码显示了Transaction Guard的典型用法：</p>
                        <ol>
                           <li>
                              <p>收到FAN down事件（或可恢复的错误）</p>
                           </li>
                           <li>
                              <p>FAN中止死亡会议</p>
                           </li>
                           <li>
                              <p>使用服务器句柄上的<code class="codeph">OCI_ATTR_TAF_ENABLED</code>属性调用<code class="codeph">OCIAttrGet()</code> 。如果值为<code class="codeph">TRUE</code> ，则停止。如果值为<code class="codeph">FALSE</code> ，请继续执行下一步。
                              </p>
                           </li>
                           <li>
                              <p>如果是可恢复的错误，对OCI（ <code class="codeph">OCI_ATTR_ERROR_IS_RECOVERABLE</code>上<code class="codeph">OCI_ERROR</code>手柄）：</p>
                              <ol type="a">
                                 <li>
                                    <p>通过使用<code class="codeph">OCI_ATTR_LTXID</code>会话句柄属性调用<code class="codeph">OCIAttrGet()</code>来检索与会话句柄关联的LTXID，从死会话中获取最后一个LTXID</p>
                                 </li>
                                 <li>
                                    <p>获得一个新的会话</p>
                                 </li>
                                 <li>
                                    <p>使用最后一个LTXID调用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>以获取返回状态</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>如果返回状态是：</p>
                              <ol type="a">
                                 <li>
                                    <p><code class="codeph">COMMITTED</code>和<code class="codeph">USER_CALL_COMPLETED</code> 
                                    </p>
                                    <p>然后返回结果。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ELSEIF COMMITTED</code>而<code class="codeph">NOT USER_CALL_COMPLETED</code> 
                                    </p>
                                    <p>然后返回带有警告的结果（带有详细信息，例如输出绑定或行计数未返回）。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ELSEIF未承诺</code> 
                                    </p>
                                    <p>重新提交事务或一系列调用或两者，或将错误返回给用户。</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-10A6CFB0-E480-48FE-B3A2-BB5AE6F88DF0__GUID-0C2AAC04-96F7-42F7-9374-B15025B62630">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-671647AA-875B-45B6-BAA8-311B3E007EB9" name="GUID-671647AA-875B-45B6-BAA8-311B3E007EB9"></a><h5 id="LNOCI-GUID-671647AA-875B-45B6-BAA8-311B3E007EB9" class="sect5"><span class="enumeration_section">12.4.1.2</span>交易保护示例</h5>
                     <div>
                        <p>显示Transaction Guard演示程序。</p>
                        <div class="section">
                           <p><a href="high-availability-in-oci.html#GUID-671647AA-875B-45B6-BAA8-311B3E007EB9__CACJFEEC">例12-6</a>是一个OCI Transaction Guard演示程序（ <code class="codeph">cdemotg.c</code> ），它演示了：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用属性<code class="codeph">OCI_ATTR_ERROR_IS_RECOVERABLE</code> 。发生错误时，程序会检查错误是否可恢复。
                                 </p>
                              </li>
                              <li>
                                 <p>使用打包的过程<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code> 。如果错误是可恢复的，程序将调用<code class="codeph">DBMS_APP_CONT.GET_LTXID_OUTCOME</code>以确定活动事务的状态。
                                 </p>
                              </li>
                           </ul>
                           <p>如果事务尚未提交，则程序重新执行失败的事务。</p>
                           <div class="infoboxnote" id="GUID-671647AA-875B-45B6-BAA8-311B3E007EB9__GUID-42DD9B5E-8641-4B24-A9DD-1CA396998A6B">
                              <p class="notep1">注意：</p>
                              <p>此程序不会修改会话状态，如NLS参数等。执行此操作的程序可能需要在错误后从池中获取新会话后重新执行此类命令。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-671647AA-875B-45B6-BAA8-311B3E007EB9__CACJFEEC">
                           <p class="titleinexample">例12-6交易保护演示程序</p><pre class="oac_no_warn" dir="ltr">* / #ifndef OCISP_ORACLE #include &lt;cdemosp.h&gt; #endif / *最大线程数* / #define MAXTHREAD 1 static ub4 sessMin = 1; static ub4 sessMax = 9; static ub4 sessIncr = 2; static OCIError * errhp; static OCIEnv * envhp; static OCISPool * poolhp =（OCISPool *）0; static int employeeNum [MAXTHREAD]; static OraText * poolName; static ub4 poolNameLen; static CONST OraText * database =（text *）“ltxid_service”; static CONST OraText * appusername =（text *）“scott”; static CONST OraText * apppassword =（text *）“tiger”; static CONST char getLtxid [] =（“BEGIN <span class="bold">DBMS_APP_CONT.GET_LTXID_OUTCOME</span> （”“：ltxid，：committed，：callComplete）; END;”）; static CONST char insertst1 [] =（“INSERT INTO EMP（ENAME，EMPNO）值”（'NAME1'，1000）“）; static void checkerr（OCIError * errhp，剑状态）; static void threadFunction（dvoid * arg）; int main（void）{int i = 0;剑lstat; int timeout = 1; OCIEnvCreate（＆envhp，OCI_THREADED，（dvoid *）0，NULL，NULL，NULL，0，（dvoid *）0）; （void）OCIHandleAlloc（（dvoid *）envhp，（dvoid **）＆errhp，OCI_HTYPE_ERROR，（size_t）0，（dvoid **）0）; （void）OCIHandleAlloc（（dvoid *）envhp，（dvoid **）＆poolhp，OCI_HTYPE_SPOOL，（size_t）0，（dvoid **）0）; / *创建会话池* / checkerr（errhp，OCIAttrSet（（dvoid *）poolhp，（ub4）OCI_HTYPE_SPOOL，（dvoid *）＆timeout，（ub4）0，OCI_ATTR_SPOOL_TIMEOUT，errhp））; if（lstat = OCISessionPoolCreate（envhp，errhp，poolhp，（OraText **）＆poolName，（ub4 *）＆poolNameLen，database，（ub4）strlen（（const char *）database），sessMin，sessMax，sessIncr，（OraText *） appusername，（ub4）strlen（（const char *）appusername），（OraText *）apppassword，（ub4）strlen（（const char *）apppassword），OCI_SPC_STMTCACHE | OCI_SPC_HOMOGENEOUS））{checkerr（errhp，lstat）; } printf（“Session Pool Created \ n”）; / *使用会话池的多个线程* / {OCIThreadId * thrid [MAXTHREAD]; OCIThreadHandle * thrhp [MAXTHREAD]; OCIThreadProcessInit（）; checkerr（errhp，OCIThreadInit（envhp，errhp））; for（i = 0; i &lt;MAXTHREAD; ++ i）{checkerr（errhp，OCIThreadIdInit（envhp，errhp，＆thrid [i]））; checkerr（errhp，OCIThreadHndInit（envhp，errhp，＆thrhp [i]））; } for（i = 0; i &lt;MAXTHREAD; ++ i）{employeeNum [i] = i; / *插入EMP表* / checkerr（errhp，OCIThreadCreate（envhp，errhp，threadFunction，（dvoid *）＆employeeNum [i]，thrid [i]，thrhp [i]））; } for（i = 0; i &lt;MAXTHREAD; ++ i）{checkerr（errhp，OCIThreadJoin（envhp，errhp，thrhp [i]））; checkerr（errhp，OCIThreadClose（envhp，errhp，thrhp [i]））; checkerr（errhp，OCIThreadIdDestroy（envhp，errhp，＆（thrid [i]）））; checkerr（errhp，OCIThreadHndDestroy（envhp，errhp，＆（thrhp [i]）））; } checkerr（errhp，OCIThreadTerm（envhp，errhp））; } / *所有的线程都是完整的* / lstat = OCISessionPoolDestroy（poolhp，errhp，OCI_DEFAULT）; printf（“Session Pool Destroyed \ n”）;如果（lstat！= OCI_SUCCESS）checkerr（errhp，lstat）; checkerr（errhp，OCIHandleFree（（dvoid *）poolhp，OCI_HTYPE_SPOOL））; checkerr（errhp，OCIHandleFree（（dvoid *）errhp，OCI_HTYPE_ERROR））;返回0; } / * end of main（）* / / *将记录插入EMP表* / static void threadFunction（dvoid * arg）{int empno = *（int *）arg; OCISvcCtx * svchp =（OCISvcCtx *）0; OCISvcCtx * svchp2 =（OCISvcCtx *）0; OCISession * embUsrhp =（OCISession *）0; OCIBind * bnd1p，* bnd2p，* bnd3p; OCIStmt * stmthp =（OCIStmt *）0; OCIStmt * getLtxidStm =（OCIStmt *）0; OCIError * errhp2 =（OCIError *）0; OCIAuthInfo * authp =（OCIAuthInfo *）0;剑lstat;文字名称[10]; boolean callCompl，committed，isRecoverable; ub1 * myLtxid; ub4 myLtxidLen; ub4 numAttempts = 0; （void）OCIHandleAlloc（（dvoid *）envhp，（dvoid **）＆errhp2，OCI_HTYPE_ERROR，（size_t）0，（dvoid **）0）; lstat = OCIHandleAlloc（（dvoid *）envhp，（dvoid **）＆authp，（ub4）OCI_HTYPE_AUTHINFO，（size_t）0，（dvoid **）0）; if（lstat）checkerr（errhp2，lstat）; checkerr（errhp2，OCIAttrSet（（dvoid *）authp，（ub4）OCI_HTYPE_AUTHINFO，（dvoid *）appusername，（ub4）strlen（（char *）appusername），（ub4）OCI_ATTR_USERNAME，errhp2））; checkerr（errhp2，OCIAttrSet（（dvoid *）authp，（ub4）OCI_HTYPE_AUTHINFO，（dvoid *）apppassword，（ub4）strlen（（char *）apppassword），（ub4）OCI_ATTR_PASSWORD，errhp2））; restart：if（lstat = OCISessionGet（envhp，errhp2，＆svchp，authp，（OraText *）poolName，（ub4）strlen（（char *）poolName），NULL，0，NULL，NULL，NULL，OCI_SESSGET_SPOOL））{checkerr（ errhp2，LSTAT）;如果我们需要调用* get_ltxid_outcome来确定事务状态，则保存来自会话的ltxid。* / checkerr（errhp2，OCIAttrGet（svchp，OCI_HTYPE_SVCCTX，（dvoid *）＆embUsrhp，（ub4 *）0，（ub4）OCI_ATTR_SESSION，errhp2））; checkerr（errhp2，OCIAttrGet（embUsrhp，OCI_HTYPE_SESSION，（dvoid *）＆myLtxid，（ub4 *）＆myLtxidLen，（ub4）OCI_ATTR_LTXID，errhp2））; / * * / checkerr（errhp2，OCIStmtPrepare2（svchp，＆stmthp，errhp2，（CONST OraText *）insertst1，（ub4）sizeof（insertst1），（const oratext *）0，（ub4）0，OCI_NTV_SYNTAX，OCI_DEFAULT））;如果（！numAttempts）{char input [1]; printf（“现在杀死SCOTT的会话。完成后按ENTER键\ n“）;得到（输入）;} lstat = OCIStmtExecute（svchp，stmthp，errhp2，（ub4）1，（ub4）0，（OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT）; if（lstat == OCI_ERROR）{checkerr（errhp2，OCIAttrGet（errhp2，OCI_HTYPE_ERROR，（dvoid *）＆isRecoverable，（ub4 *）0，（ub4） <span class="bold">OCI_ATTR_ERROR_IS_RECOVERABLE</span> ，errhp2））; if（isRecoverable）{printf（“发生可恢复的错误）检查事务状态。\ n“）; / *获取另一个用于get_ltxid_outcome调用的会话* / if（lstat = OCISessionGet（envhp，errhp2，＆svchp2，authp，（OraText *）poolName，（ub4）strlen（（char） *）poolName），NULL，0，NULL，NULL，NULL，OCI_SESSGET_SPOOL））{checkerr（errhp2，lstat）;} checkerr（errhp2，OCIStmtPrepare2（svchp2，＆getLtxidStm，errhp2，（CONST OraText *）getLtxid，（ub4）sizeof （getLtxid），（const oratext *）0，（ub4）0，OCI_NTV_SYNTAX，OCI_DEFAULT））; checkerr（errhp，OCIBindByPos（getLtxidStm，＆bnd1p，errhp，1，（dvoid *）myLtxid，（sword）myLtxidLen，SQLT_BIN，（ dvoid *）0，（ub2 *）0，（ub2 *）0，（ub4）0，（ub4 *）0，OCI_DEF AULT））; checkerr（errhp，OCIBindByPos（getLtxidStm，＆bnd2p，errhp，2，（dvoid *）＆committed，（sword）sizeof（已提交），SQLT_BOL，（dvoid *）0，（ub2 *）0，（ub2 *）0，（ub4 ）0，（ub4 *）0，OCI_DEFAULT））; checkerr（errhp，OCIBindByPos（getLtxidStm，＆bnd3p，errhp，3，（dvoid *）＆callCompl，（sword）sizeof（callCompl），SQLT_BOL，（dvoid *）0，（ub2 *）0，（ub2 *）0，（ub4 ）0，（ub4 *）0，OCI_DEFAULT））; checkerr（errhp2，OCIStmtExecute（svchp2，getLtxidStm，errhp2，（ub4）1，（ub4）0，（OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT））; checkerr（errhp2，OCISessionRelease（svchp2，errhp2，NULL，0，OCI_DEFAULT））; if（committed &amp;&amp; callCompl）printf（“Insert successfully commited \ n”）;否则如果（！已提交）{printf（“事务未提交;重新执行上一次事务\ n”）; numAttempts ++; / *由于存在中断，请不要将此会话返回到池* / checkerr（errhp2，OCISessionRelease（svchp，errhp2，NULL，0，OCI_SESSRLS_DROPSESS））; svchp =（OCISvcCtx *）0;转到重启; } else {checkerr（errhp2，OCITransCommit（svchp，errhp2，（ub4）0））; printf（“事务已成功提交\ n”）; } if（stmthp）checkerr（errhp2，OCIStmtRelease（（dvoid *）stmthp，errhp2，（void *）0,0，OCI_DEFAULT））; if（getLtxidStm）checkerr（errhp2，OCIStmtRelease（（dvoid *）getLtxidStm，errhp2，（void *）0,0，OCI_DEFAULT））; if（svchp）checkerr（errhp2，OCISessionRelease（svchp，errhp2，NULL，0，OCI_DEFAULT））; OCIHandleFree（（dvoid *）authp，OCI_HTYPE_AUTHINFO）; OCIHandleFree（（dvoid *）errhp2，OCI_HTYPE_ERROR）; } / * threadFunction的结尾（dvoid *）* / / *此函数打印错误* / void checkerr（errhp，status）OCIError * errhp;剑的地位; {text errbuf [512]; sb4 errcode = 0; switch（status）{case OCI_SUCCESS：break; case OCI_SUCCESS_WITH_INFO：（void）printf（“Error  -  OCI_SUCCESS_WITH_INFO \ n”）;打破; case OCI_NEED_DATA：（void）printf（“Error  -  OCI_NEED_DATA \ n”）;打破; case OCI_NO_DATA：（void）printf（“Error  -  OCI_NODATA \ n”）;打破; case OCI_ERROR：（void）OCIErrorGet（（dvoid *）errhp，（ub4）1，（text *）NULL，＆errcode，errbuf，（ub4）sizeof（errbuf），OCI_HTYPE_ERROR）; （void）printf（“Error  - ％。* s \ n”，512，errbuf）;打破; case OCI_INVALID_HANDLE：（void）printf（“Error  -  OCI_INVALID_HANDLE \ n”）;打破; case OCI_STILL_EXECUTING：（void）printf（“Error  -  OCI_STILL_EXECUTE \ n”）;打破; case OCI_CONTINUE：（void）printf（“Error  -  OCI_CONTINUE \ n”）;打破;默认值：break; }}</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A8DD9422-2F82-42A9-9555-134296416E8F" name="GUID-A8DD9422-2F82-42A9-9555-134296416E8F"></a><h3 id="LNOCI-GUID-A8DD9422-2F82-42A9-9555-134296416E8F" class="sect3"><span class="enumeration_section">12.5</span> OCI和应用程序连续性</h3>
               <div>
                  <p>应用程序连续性（AC）在计划内和计划外中断期间提供高可用性（HA）。Oracle数据库12 <span class="italic">c</span>第2版（12.2）引入了对AC的OCI支持。
                  </p>
                  <p>AC在运行Oracle RAC，Oracle RAC One或Active Data Guard实例或站点故障转移的HA环境中屏蔽硬件，软件，网络，存储错误和超时。AC为SQL * Plus，Tuxedo，WebLogic Server和JDBC Type 4（Oracle Thin），OCI和Oracle Data Provider for .NET（ODP.NET）驱动程序提供支持。</p>
                  <p>对于使用OCI会话池的应用程序的计划中断，OCI会话池检测连接何时受到<code class="codeph">PLANNED DOWN</code>事件的影响，并在连接返回池时终止连接。对于不使用OCI会话池的应用程序的计划中断，OCI应用程序会检测连接是否受到计划关闭事件的影响。在任何一种情况下，OCI都隐式确定DML重放何时是安全的，并且应用程序在关闭事件后看到的错误更少。
                  </p>
                  <p>由于计划外中断，OCI使用Transaction Guard，它使OCI应用程序能够通过在发生可恢复错误后恢复正在进行的事务来可靠地确定事务的结果。这种支持意味着在中断期间完成应用程序请求只会在恢复数据库连接和会话状态时产生轻微延迟。如果AC可以确定在原始执行期间未提交事务，则AC仅尝试重放正在进行的事务。</p>
                  <p>对于OCI的AC支持，Oracle建议您使用OCI会话池或Tuxedo。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-BC59C816-621E-496D-8CC6-23176518BE75" title="Oracle Database 18c版本18.1增加了对Application Continuity的更多支持。">关于添加的应用程序连续性支持</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-E3D181AA-0346-4DF6-B154-DA43EE56EC1E" title="在发生可恢复的错误之后，数据库会话从一个数据库实例故障转移到另一个数据库实例。">发生可恢复错误后会发生什么</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-B291B826-C3EE-4A34-92CD-4F4CECC5D730" title="成功的驱动程序重放要求故障转移后事务的客户端可见效果与初始提交相同。">成功重播的标准</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-6936353C-3193-4052-AD34-D062FFF56B71" title="列出在下一个应用程序请求开始之前隐式禁用OCI中的应用程序连续性的因素。">什么因素阻碍了OCI中的应用程序连续性</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-D40FACA1-FBE1-4540-B3C1-8E772404E655" title="什么原因导致重播失败。">重播失败</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability-in-oci.html#GUID-6DACCD89-3CDE-42F5-882F-CB146E73A581" title="是什么决定了应用程序连续性在OCI中的有效性。">什么时候应用程序连续性最有效</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-A8DD9422-2F82-42A9-9555-134296416E8F__GUID-EB448EFF-AE3D-494C-B870-2DA307C92E20">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../racad/workload-management-with-dynamic-database-services.html#RACAD-GUID-87EDF90F-1776-474A-AD9C-93F9CBE6CB31" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a> ，了解有关为Application Continuity和Transaction Guard创建服务的信息。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BC59C816-621E-496D-8CC6-23176518BE75" name="GUID-BC59C816-621E-496D-8CC6-23176518BE75"></a><h4 id="LNOCI-GUID-BC59C816-621E-496D-8CC6-23176518BE75" class="sect4"><span class="enumeration_section">12.5.1</span>关于增加对应用程序连续性的支持</h4>
                  <div>
                     <p>Oracle Database 18c版本18.1增加了对Application Continuity的更多支持。</p>
                     <div class="p">从Oracle Database 18c版本18.1开始，为Application Continuity添加了以下支持：<ul style="list-style-type:disc">
                           <li>
                              <p>为OCI动态绑定添加了支持，并为数字，字符和日期/时间类型定义。这意味着扩展了以下OCI API以支持应用程序连续性： <code class="codeph">OCIBindDynamic()</code>和<code class="codeph">OCIDefineDynamic()</code> 。
                              </p>
                           </li>
                           <li>
                              <p>添加了对绑定和定义对象的支持。这意味着扩展了以下OCI API以支持应用程序连续性： <code class="codeph">OCIBindObject()</code> ， <code class="codeph">OCIDefineObject()</code>和<code class="codeph">OCITypeByName()</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在执行LOB调用期间，Application Continuity现在通过重新启动由中断中断的LOB调用来支持处理连接失败。</p>
                           </li>
                           <li>
                              <p>OCI现在支持<code class="codeph">AUTO</code>的新应用程序连续性<code class="codeph">FAILOVER_TYPE</code> ，如果已知会话状态在显式请求边界处可恢复，则它仅尝试进行故障转移。
                              </p>
                           </li>
                        </ul> 
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E3D181AA-0346-4DF6-B154-DA43EE56EC1E" name="GUID-E3D181AA-0346-4DF6-B154-DA43EE56EC1E"></a><h4 id="LNOCI-GUID-E3D181AA-0346-4DF6-B154-DA43EE56EC1E" class="sect4"><span class="enumeration_section">12.5.2</span>发生可恢复错误后会发生什么</h4>
                  <div>
                     <p>在发生可恢复的错误之后，数据库会话从一个数据库实例故障转移到另一个数据库实例。</p>
                     <p>新实例可能是同一Oracle RAC集群的一部分，也可能是在站点发生故障后作为主数据库启动的Oracle Data Guard备用数据库。在透明应用程序故障转移（TAF）成功重新连接并重新进行身份验证后，OCI中的应用程序连续性将重放与失败会话关联的呼叫历史记录，包括所有SQL和PL / SQL语句。重播在单个会话上运行，不会尝试将重新提交活动与任何其他数据库会话同步。仅当事务重放的客户端可见结果与原始提交相同时，重播才会成功。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-B291B826-C3EE-4A34-92CD-4F4CECC5D730" name="GUID-B291B826-C3EE-4A34-92CD-4F4CECC5D730"></a><h4 id="LNOCI-GUID-B291B826-C3EE-4A34-92CD-4F4CECC5D730" class="sect4"><span class="enumeration_section">12.5.3</span>成功重播的标准</h4>
                  <div>
                     <p>成功的驱动程序重放要求故障转移后事务的客户端可见效果与初始提交相同。</p>
                     <p>以下标准表明了这一成功：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>返回代码和错误消息文本必须相同。</p>
                        </li>
                        <li>
                           <p>结果集必须相同。define数据必须相同，并且必须以相同的顺序返回行。</p>
                        </li>
                        <li>
                           <p>处理的行数必须相同。例如，故障转移后更新语句必须更新与原始更新语句相同的行数。</p>
                        </li>
                        <li>
                           <p>新连接的会话状态与原始连接的会话状态匹配。</p>
                        </li>
                     </ul>
                     <p>有关这些条件的信息，请参阅“ <a href="../racad/ensuring-application-continuity.html#RACAD-GUID-BD699AEB-9F85-42A8-8687-5A979918938D" target="_blank"><span><cite>Oracle Real Application Clusters管理和部署指南”</cite></span></a> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B291B826-C3EE-4A34-92CD-4F4CECC5D730__GUID-067C96FD-AB0D-45CB-A6F4-416CB1D5A52A">可变数据的稳定性和应用连续性</p>
                        <p>当可变对象的值从一次执行变为下一次执行时，其数据被认为是可变的，因此保证不可重放。序列是这种可变数据的一个例子。</p>
                        <p>为了提高DML重放的成功率，有必要使用初始提交时使用的值重放涉及可变数据的DML。如果未保留原始值，并且如果将这些可变对象的不同值返回给客户端，则会拒绝重放，因为客户端会看到不同的结果。</p>
                        <p>目前为<code class="codeph">SYSDATE</code> ， <code class="codeph">SYSTIMESTAMP</code> ， <code class="codeph">SYS_GUID</code>和<code class="codeph"><span class="codeinlineitalic">sequence .</span>提供了对保持可变对象值的支持<code class="codeph"><span class="codeinlineitalic">sequence</span> .NEXTVAL</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-B291B826-C3EE-4A34-92CD-4F4CECC5D730__GUID-B3DAD364-9822-4E00-965C-23F36E142B47">
                           <p class="notep1">也可以看看：</p>
                           <p>有关可变对象和应用程序连续性的更多信息，请参见<a href="../racad/ensuring-application-continuity.html#RACAD-GUID-E4A114A2-EA77-4037-A62A-BDFCF1E6D072" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6936353C-3193-4052-AD34-D062FFF56B71" name="GUID-6936353C-3193-4052-AD34-D062FFF56B71"></a><h4 id="LNOCI-GUID-6936353C-3193-4052-AD34-D062FFF56B71" class="sect4"><span class="enumeration_section">12.5.4</span>什么因素阻碍了OCI中的应用程序连续性</h4>
                  <div>
                     <p>列出在下一个应用程序请求开始之前隐式禁用OCI中的应用程序连续性的因素。</p>
                     <p>以下情况隐式禁用OCI中的应用程序连续性，直到下一个应用程序请求开始：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>服务器检测到与重播不一致的条件。例如，对于<code class="codeph">SESSION_STATE_CONSISTENCY=DYNAMIC</code>如果PL / SQL匿名块具有嵌入的顶级<code class="codeph">COMMIT</code>语句（自治事务不被视为顶级），则驱动程序隐式禁用OCI中的应用程序连续性。</p>
                        </li>
                        <li>
                           <p>应用程序调用OCI中的Application Continuity不支持的OCI功能。</p>
                        </li>
                     </ul>
                     <p>应用程序可以通过调用<code class="codeph">OCIRequestDisableReplay()</code>在OCI中显式禁用应用程序连续性。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D40FACA1-FBE1-4540-B3C1-8E772404E655" name="GUID-D40FACA1-FBE1-4540-B3C1-8E772404E655"></a><h4 id="LNOCI-GUID-D40FACA1-FBE1-4540-B3C1-8E772404E655" class="sect4"><span class="enumeration_section">12.5.5</span>重播失败</h4>
                  <div>
                     <p>什么原因导致重播失败。</p>
                     <p>当OCI中的应用程序连续性重放事务时，以下情况将导致重播失败：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在重放时遇到<code class="codeph">COMMIT</code>语句</p>
                        </li>
                        <li>
                           <p>重播结果与初始提交的交易不一致</p>
                        </li>
                        <li>
                           <p>如果超出内部重播重试限制，则在重播期间存在可恢复的错误</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">OCIStmtPrepare()</code>应用程序返回以下错误： <code class="codeph">Error - ORA-25412: transaction replay disabled by call to OCIStmtPrepare</code> 。使用<code class="codeph">OCIStmtPrepare2()</code>调用来支持在HA基础结构中使用Application Continuity。
                           </p>
                        </li>
                     </ul>
                     <p>如果Application Continuity无法成功重播失败的事务，则会返回错误。其他诊断信息将记录在客户端跟踪文件中，以指示重放失败的原因。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6DACCD89-3CDE-42F5-882F-CB146E73A581" name="GUID-6DACCD89-3CDE-42F5-882F-CB146E73A581"></a><h4 id="LNOCI-GUID-6DACCD89-3CDE-42F5-882F-CB146E73A581" class="sect4"><span class="enumeration_section">12.5.6</span>应用程序连续性何时最有效</h4>
                  <div>
                     <p>是什么决定了应用程序连续性在OCI中的有效性。</p>
                     <p>在以下条件下，OCI中的应用连续性最有效：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库服务指定<code class="codeph">COMMIT_OUTCOME</code>属性，并配置透明应用程序故障转移（TAF）。
                           </p>
                        </li>
                        <li>
                           <p>应用程序能够显式地（通过调用<code class="codeph">OCIRequestBegin()</code>和<code class="codeph">OCIRequestEnd()</code> ）或通过使用OCI会话池隐式标记应用程序请求的开始和结束。
                           </p>
                        </li>
                        <li>
                           <p>应用程序请求最多包含一个在请求结束时提交的数据库事务。</p>
                        </li>
                        <li>
                           <div class="p">如果应用程序在服务器，PL / SQL或Java中执行PL / SQL或Java：<ul style="list-style-type:disc">
                                 <li>
                                    <p>没有嵌入的<code class="codeph">COMMIT</code>语句</p>
                                 </li>
                                 <li>
                                    <p>不设置在PL / SQL或Java完成后预期会保留的任何状态（例如，包变量）。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>TAF回调不会保留打开的数据库事务。</p>
                        </li>
                     </ul>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="high-availability-in-oci.html#GUID-D30079AC-4E59-4CC3-86E8-6487A4891BA2" title="描述如果发生中断，OCI中的应用程序连续性可以进行故障转移时的哪些功能。">当OCI中的应用程序连续性可以故障转移时</a></p>
                           </li>
                           <li>
                              <p><a href="high-availability-in-oci.html#GUID-8B38BDC1-A606-4893-A18F-CF1712DE29B2" title="OCI中的Application Continuity不支持哪些结构。">OCI中的应用程序连续性不支持这些构造</a></p>
                           </li>
                           <li>
                              <p><a href="high-availability-in-oci.html#GUID-B54C508E-60E7-4053-BD7F-95272F8EDE35" title="一旦重建会话并恢复数据库状态，OCI中的应用程序连续性将在可恢复错误后重放原始PL / SQL和SQL语句。重播留下了两次看到的副作用，这可能是也可能不是。">应用程序连续性可能产生的副作用</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-D30079AC-4E59-4CC3-86E8-6487A4891BA2" name="GUID-D30079AC-4E59-4CC3-86E8-6487A4891BA2"></a><h5 id="LNOCI-GUID-D30079AC-4E59-4CC3-86E8-6487A4891BA2" class="sect5"><span class="enumeration_section">12.5.6.1</span> OCI中的应用程序连续性可以故障<span class="enumeration_section">转移</span></h5>
                     <div>
                        <p>描述如果发生中断，OCI中的应用程序连续性可以进行故障转移时的哪些功能。</p>
                        <div class="p">如果在以下某个功能期间发生中断，则OCI中的应用程序连续性可以进行故障转移：<ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">OCILobAppend（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobArrayRead（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobArrayWrite（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobAssign（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobCharSetForm（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobClose（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobCopy2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobCreateTemporary（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobDisableBuffering（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobEnableBuffering（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFileClose（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFileCloseAll（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFileGetName（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFileIsOpen（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFileOpen（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFileSetName（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFlushBuffer（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobFreeTemporary（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobGetChunkSize（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobGetLength（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobGetLength2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobGetStorageLimit（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobIsEqual（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobIsOpen（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobIsTemporary（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobLoadFromFile（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobLoadFromFile2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobLocatorAssign（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobLocatorIsInit（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobOpen（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobRead（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobRead2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobTrim（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobTrim2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobWriteAppend（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobWriteAppend2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobWrite（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCILobWrite2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIPing（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtExecute（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtFetch（）</code> 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtFetch2（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCISessionEnd（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCITransCommit（）</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCITransRollback（）</code></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-8B38BDC1-A606-4893-A18F-CF1712DE29B2" name="GUID-8B38BDC1-A606-4893-A18F-CF1712DE29B2"></a><h5 id="LNOCI-GUID-8B38BDC1-A606-4893-A18F-CF1712DE29B2" class="sect5"><span class="enumeration_section">12.5.6.2</span> OCI中的应用程序连续性不支持这些构造</h5>
                     <div>
                        <p>OCI中的Application Continuity不支持哪些结构。</p>
                        <p>OCI中的应用程序连续性不支持以下构造：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>XA交易</p>
                           </li>
                           <li>
                              <p>带有嵌入式<code class="codeph">COMMIT</code>语句的PL / SQL块</p>
                           </li>
                           <li>
                              <p>出列立即模式的AQ出队（deqopt.visibility）</p>
                           </li>
                           <li>
                              <p>流绑定或定义基于描述符的类型，例如对象或lob定位器</p>
                           </li>
                           <li>
                              <p>功能<code class="codeph">OCIStmtPrepare()</code></p>
                           </li>
                           <li>
                              <p>已注册的<code class="codeph">OCI_CBTYPE_ENTRY</code>类型的OCI回调，它不返回<code class="codeph">OCI_CONTINUE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">COMMIT NOWAIT</code>声明</p>
                           </li>
                           <li>
                              <p>DCL命令</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-B54C508E-60E7-4053-BD7F-95272F8EDE35" name="GUID-B54C508E-60E7-4053-BD7F-95272F8EDE35"></a><h5 id="LNOCI-GUID-B54C508E-60E7-4053-BD7F-95272F8EDE35" class="sect5"><span class="enumeration_section">12.5.6.3</span>应用程序连续性可能产生的副作用</h5>
                     <div>
                        <p>一旦重建会话并恢复数据库状态，OCI中的应用程序连续性将在可恢复错误后重放原始PL / SQL和SQL语句。重播留下了两次看到的副作用，这可能是也可能不是。</p>
                        <p>应用程序了解这些副作用并确定重复执行是否可接受非常重要。如果不可接受，则应用程序必须采取措施以适应或减轻重播的影响。例如，通过调用<code class="codeph">OCIRequestDisableReplay()</code> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-B54C508E-60E7-4053-BD7F-95272F8EDE35__GUID-74A846EB-F08C-48A9-9B33-7F917E67CB00">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-A250F3F8-D681-4F44-8969-7A8434E065DD" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a> ，以获取有关创建副作用的操作示例的更多信息。
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03682.SDO_GEOR_IP-reference-ref.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram."></meta>
      <meta name="description" content="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram."></meta>
      <title>SDO_GEOR_IP包参考</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="The SDO_GEOR_IP package contains subprograms (functions and procedures) for performing image processing operations on GeoRaster objects. This chapter presents reference information, with one or more examples, for each subprogram."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SDO_GEOR_GDAL-reference.html" title="Previous" type="text/html"></link>
      <link rel="next" href="sdo-geor-ra-ref.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SDO_GEOR_GDAL-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="sdo-geor-ra-ref.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SDO_GEOR_IP包参考</li>
            </ol>
            <a id="GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" name="GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F"></a>
            
            <h2 id="GEORS-GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" class="sect2"><span class="enumeration_chapter">11</span> SDO_GEOR_IP包参考</h2>
         </header>
         <div class="ind">
            <div>
               <p>SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。</p>
               <p>本章中的许多示例都引用了一个名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。
               </p>
               <p>所有SDO_GEOR_IP子程序都可以处理在当前连接模式以外的模式中定义的GeoRaster对象。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4">SDO_GEOR_IP.dodge</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-5E8228CC-DD00-42F4-80A4-458533A998EA">SDO_GEOR_IP.equalize</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E">SDO_GEOR_IP.filter</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA">SDO_GEOR_IP.histogramMatch</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77">SDO_GEOR_IP.normalize</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a><br></li>
                  <li class="ulchildlink"><a href="SDO_GEOR_IP-reference-ref.html#GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E">SDO_GEOR_IP.stretch</a><br></li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4" name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4"></a><h3 id="GEORS-GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4" class="sect3"><span class="enumeration_section">11.1</span> SDO_GEOR_IP.dodge</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.dodge（inGeoRaster IN SDO_GEORASTER，gridsize IN SDO_NUMBER_ARRAY，samplingFactor IN VARCHAR2 DEFAULT NULL，表示IN SDO_NUMBER_ARRAY DEFAULT NULL，standardDeviations IN SDO_NUMBER_ARRAY DEFAULT NULL，storageParam IN VARCHAR2 DEFAULT NULL，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.dodge（inGeoRaster IN SDO_GEORASTER，gridsize IN SDO_NUMBER_ARRAY，samplingFactor IN VARCHAR2 DEFAULT NULL，refGeoraster IN SDO_GEORASTER，standardDeviations IN SDO_NUMBER_ARRAY DEFAULT NULL，storageParam IN VARCHAR2 DEFAULT NULL，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>在输入的GeoRaster对象上应用躲避算法以对图像进行色彩平衡。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>要处理的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> gridSize</dt>
                        <dd>
                           <p>每个网格的大小分别在x和y方向。它是一个包含一个或两个数字的数组。如果只指定了一个数字，那么它适用于x和y方向。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-6781222E-EB8D-4E59-9E8B-17C8E054D47A"><!-- --></a> samplingFactor</dt>
                        <dd>
                           <p>采样因子，用于控制统计的计算，格式为<code class="codeph">'samplingFactor=n'</code> ，分母<span class="italic">n</span>为1 /（ <span class="italic">n</span> * <span class="italic">n</span> ），表示在计算统计数据时在行和列维度中跳过的单元格数。例如，如果<code class="codeph">samplingFactor</code>为4，则对十六分之一的单元进行采样;但如果<code class="codeph">samplingFactor</code>为1，则对所有单元格进行采样。值越高，统计信息可能越不准确，但计算得越快。如果未指定（null），则默认值为1。
                           </p>
                           <p><code class="codeph">samplingFactor</code>不能大于或等于<code class="codeph">gridSize</code>的一半（0.5）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-601AB169-0880-4E5D-8A5F-B745FEE654CF"><!-- --></a>表示</dt>
                        <dd>
                           <p>每个输出频段的目标平均值。如果只指定了一个值，则将其应用于所有输出波段;否则，它必须具有与输出GeoRaster对象的数字带相同数量的值。如果为null，则计算为所有网格的平均值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-AF4C41A3-ECAB-4DF4-86E5-6C48265E2AA9"><!-- --></a> standardDeviations</dt>
                        <dd>
                           <p>每个输出频段的目标标准偏差值。如果只指定了一个值，则将其应用于所有输出波段;否则，它必须具有与输出GeoRaster对象的波段数相同的值。如果为null，则计算为所有网格的平均标准偏差。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-AFBD7B00-0596-40DA-AEA4-F8A403DB2B4D"><!-- --></a> refGeoraster</dt>
                        <dd>
                           <p>参考GeoRaster对象。闪避结果的输出将适应参考GeoRaster对象的统计数据。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-2BEDAFFB-EF0C-4813-8821-D91342CE7381"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-07E2EEEE-819F-46A9-AA46-F77A18458317"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p>该闪避操作使用自适应图像增强方法来使图像色调更平衡，即，较暗区域变得更亮并且明亮区域变得更暗。由<code class="codeph">gridsize</code>参数定义的网格统计数据<code class="codeph">gridsize</code>收集并调整为目标均值和标准差值。网格尺寸应小于不平衡区域，以消除不平衡。调整<code class="codeph">gridSize</code>参数以获得最佳结果。
                     </p>
                     <p>输入的GeoRaster图像的<code class="codeph">cellDepth</code>值必须为<code class="codeph">8BIT_U</code> 。存储参数中的任何<code class="codeph">celldepth</code>值都将被忽略。<code class="codeph">outGeoRaster</code>对象的单元格深度始终为<code class="codeph">8BIT_U</code> 。</p>
                     <p>不支持输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>以下示例创建一个GeoRaster对象，该对象是在输入GeoRaster对象上躲避的结果。期望的平均值和标准偏差分别设定为125和80。x和y方向的网格大小为512。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.dodge（gr1，sdo_number_array（512,512），'samplingFactor = 3'，sdo_number_array（125），sdo_number_array（80），null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>下面的示例创建一个GeoRaster对象，该对象是基于引用GeoRaster对象避开输入GeoRaster对象的结果。并行度为4时启用并行处理。x和y方向的网格大小为512。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; refgr sdo_georaster; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; SELECT georaster INTO refgr FROM georaster_table WHERE georid = 1; sdo_geor_ip.dodge（gr1，sdo_number_array（512,512），'samplingFactor = 3'，refgr，null，gr2，'parallel = 4'）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA" name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA"></a><h3 id="GEORS-GUID-5E8228CC-DD00-42F4-80A4-458533A998EA" class="sect3"><span class="enumeration_section">11.2</span> SDO_GEOR_IP.equalize</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.equalize（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>使用直方图均衡方法处理输入的GeoRaster对象。处理后的图像存储在输出GeoRaster对象或BLOB中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>要均衡的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>一个数字，指定要在源GeoRaster对象中均衡的金字塔等级。如果为null，则默认值为0。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-B990F65D-6226-455A-94B8-87A3958C9239"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果<code class="codeph">cropArea</code>的类型为SDO_GEOMETRY，请使用<code class="codeph">layerNumbers</code>参数指定一个或多个图层编号;如果<code class="codeph">cropArea</code>的类型为SDO_NUMBER_ARRAY，请使用<code class="codeph">bandNumbers</code>参数指定一个或多个波段号。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。如果数据类型是SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）用作裁剪区域;另请参阅SDO_SRID要求的使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> bandNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的物理带编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于1,2和3的波段，使用<code class="codeph">1-3</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D"><!-- --></a> layerNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的逻辑层编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于第2,3和4层，使用<code class="codeph">2-4</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-6B0389F3-BBAD-42E8-9206-F5875FF03A15"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-9E414F13-BBF7-411D-9B84-8382EB5900D2"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-5E5A311B-2852-47E4-8D38-12E9EAC38E7C"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-8055532C-9900-40CB-8E43-64B682831D5C"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-9C93D567-0081-43C9-9554-B7ADF2EB5032"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p>输入的GeoRaster对象必须为每个输出波段生成直方图。</p>
                     <p>基于存储在输入GeoRaster对象的元数据中的直方图来执行均衡。</p>
                     <p>不支持存储在输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                     <p>输出GeoRaster对象的单元格深度始终为<code class="codeph">8BIT_U</code> 。</p>
                     <p>如果<code class="codeph">cropArea</code>参数数据类型为SDO_GEOMETRY，则SDO_SRID值必须为以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Null，指定栅格空间</p>
                        </li>
                        <li>
                           <p>MDSYS.CS_SRS表的SRID列中的值</p>
                           <p>如果<code class="codeph">cropArea</code>参数几何体和模型空间的SDO_SRID值不同，则<code class="codeph">cropArea</code>参数几何体将在执行操作之前自动转换为模型空间的坐标系。（栅格空间和模型空间在<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型中</a>有解释。）
                           </p>
                        </li>
                     </ul>
                     <p>如果<code class="codeph">cropArea</code>参数指定大地测量MBR，则它不能越过日期行子午线</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5E8228CC-DD00-42F4-80A4-458533A998EA__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>以下示例创建一个GeoRaster对象，该对象的每个输入带均根据存储在元数据中的直方图进行均衡。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.equalize（gr1，cropArea，null，null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>以下示例基于存储在元数据中的直方图执行图像均衡;输出是临时BLOB。 （它引用一个名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; out_lob BLOB; cropArea sdo_number_array：= null; outArea sdo_geometry; outWindow sdo_number_array; BEGIN dbms_lob.create_temporary（out_lob，TRUE）; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.equalize（gr1，cropArea，null，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E" name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E"></a><h3 id="GEORS-GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E" class="sect3"><span class="enumeration_section">11.3</span> SDO_GEOR_IP.filter</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，filterParam IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，filterParam IN VARCHAR2，filterKernel IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，filterKernel IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.filter（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，filterKernel IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>在输入的GeoRaster对象上应用卷积滤镜。处理后的图像存储在输出GeoRaster对象或BLOB中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>用于过滤操作的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>一个数字，指定源GeoRaster对象中过滤器操作的金字塔等级。如果为null，则默认值为0。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-B990F65D-6226-455A-94B8-87A3958C9239"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果<code class="codeph">cropArea</code>的类型为SDO_GEOMETRY，请使用<code class="codeph">layerNumbers</code>参数指定一个或多个图层编号;如果<code class="codeph">cropArea</code>的类型为SDO_NUMBER_ARRAY，请使用<code class="codeph">bandNumbers</code>参数指定一个或多个波段号。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。如果数据类型是SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）用作裁剪区域;另请参阅SDO_SRID要求的使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> bandNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的物理带编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于1,2和3的波段，使用<code class="codeph">1-3</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D"><!-- --></a> layerNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的逻辑层编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于第2,3和4层，使用<code class="codeph">2-4</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B"><!-- --></a> filterParam</dt>
                        <dd>
                           <p>要在输入GeoRaster上应用的过滤器类型。它的格式为<code class="codeph">'filterType=</code> <span class="italic">value</span> <code class="codeph">'</code> ，其中<span class="italic">value</span>可以是以下<span class="italic">值</span>之一： <code class="codeph">LPF</code> （低通滤波器，默认值）， <code class="codeph">HPF</code> （高通滤波器）， <code class="codeph">HBF</code> （高升压滤波器）， <code class="codeph">MIN</code> （最小滤波器） ）， <code class="codeph">MAX</code> （最大滤波器）， <code class="codeph">MEDIAN</code> （中值滤波器）， <code class="codeph">MODE</code> （模式滤波器）或<code class="codeph">CUSTOM</code> （用户提供的滤波器内核）。
                           </p>
                           <p><code class="codeph">filterParam</code>还可以包括：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">'kernelSize=(</code> <span class="italic">kx，ky</span> <code class="codeph">)'</code>其中<span class="italic">kx，ky</span>是x和y方向上内核的大小。对于<code class="codeph">CUSTOM</code>以外的滤波器类型， <code class="codeph">kx</code>和<code class="codeph">ky</code>应为大于或等于3的奇数。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">'p1 =</code> <span class="italic">value</span> <code class="codeph">'</code> ，由<code class="codeph">HBF</code>过滤器用来表示增强程度。
                                 </p>
                              </li>
                           </ul>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-82D89140-9FAE-4CBB-9EA1-39593A53014B"><!-- --></a> filterKernel</dt>
                        <dd>
                           <p>仅在<code class="codeph">filterType=CUSTOM</code> 。它是SDO_NUMBER_ARRAY对象中的<code class="codeph">kx * ky</code>数字。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-CB1B5309-8CBB-401F-966B-A90331871EE0"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-E5C71A16-77E0-4F1C-8615-594727E526FE"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-A7757357-237B-4C33-B6E1-46897551FC27"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-D475FA3B-5A8F-4A96-88D4-614729230A71"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-3EA6ED19-EEA3-4006-9F23-A22DC31EF9AA"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p>有关图像过滤的介绍，请参阅<a href="image-processing-virtual-mosaic.html#GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" title="图像过滤是在图像上应用卷积滤波器以实现特定目的的过程。例如，在图像上应用低通滤波器可以平滑并降低图像中的噪声，而在图像上应用高通滤波器可以增强图像的细节甚至检测图像内的边缘。">图像过滤</a> 。
                     </p>
                     <p>以下是某些预定义3x3过滤器的<code class="codeph">filterKernel</code>值：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>LPF：（1,1,1,1,1,1,1,1,1）* 1/9</p>
                        </li>
                        <li>
                           <p>HPF：（ -  1，-1，-1，-1,8，-1，-1，-1，-1）* 1/9</p>
                        </li>
                        <li>
                           <p>HBF：（ -  k，-k，-k，-k，8k，-k，-k，-k，-k）* 1/9，其中<span class="italic">k</span>是参数<code class="codeph">p1</code>指定的增压系数</p>
                        </li>
                     </ul>
                     <p>对于<code class="codeph">kernelSize</code> ， <span class="italic">kx * ky</span>必须小于10000。
                     </p>
                     <p>如果<code class="codeph">cropArea</code>参数数据类型为SDO_GEOMETRY，则SDO_SRID值必须为以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Null，指定栅格空间</p>
                        </li>
                        <li>
                           <p>MDSYS.CS_SRS表的SRID列中的值</p>
                           <p>如果<code class="codeph">cropArea</code>参数几何体和模型空间的SDO_SRID值不同，则<code class="codeph">cropArea</code>参数几何体将在执行操作之前自动转换为模型空间的坐标系。（栅格空间和模型空间在<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型中</a>有解释。）
                           </p>
                        </li>
                     </ul>
                     <p>不支持输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>以下示例创建一个GeoRaster对象，该对象是在输入GeoRaster对象上使用默认低通滤波器的结果。过滤器内核大小为3乘3。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_geometry：= null; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.filter（gr1,0，cropArea，null，'filtertype = LPF，kernelsize =（3,3）'，null，null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>以下示例在输入的GeoRaster对象上应用自定义（用户提供的）3 x 3过滤器;输出是临时BLOB。 （它引用一个名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_geometry：= null; out_lob BLOB; outArea sdo_geometry：= null; outWindow sdo_geometry：= null; BEGIN dbms_lob.create_temporary（out_lob，TRUE）; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.filter（gr1,0，cropArea，null，'filtertype = CUSTOM，kernelsize =（3,3）'，sdo_number_array（1 / 4,1 / 2,1 / 4,1 / 2,1,1 / 2， 1 / 4,1.2,1 / 4），null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA" name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA"></a><h3 id="GEORS-GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA" class="sect3"><span class="enumeration_section">11.4</span> SDO_GEOR_IP.histogramMatch</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，refHistograms IN SDO_GEOR_HISTOGRAM_ARRAY，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropArea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，refHistograms IN SDO_GEOR_HISTOGRAM_ARRAY，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，refGeoRaster IN SDO_GEORASTER，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.histogramMatch（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，refGeoRaster IN SDO_GEORASTER，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>处理输入的GeoRaster对象，以便输出GeoRaster对象的直方图与参考GeoRaster对象（ <code class="codeph">refGeoRaster</code> ）或参考直方图（ <code class="codeph">refHistograms</code> ）的直方图<code class="codeph">refHistograms</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>用于直方图匹配操作的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>指定直方图匹配操作的金字塔等级的数字。如果为null，则默认值为0。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-B990F65D-6226-455A-94B8-87A3958C9239"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果<code class="codeph">cropArea</code>的类型为SDO_GEOMETRY，请使用<code class="codeph">layerNumbers</code>参数指定一个或多个图层编号;如果<code class="codeph">cropArea</code>的类型为SDO_NUMBER_ARRAY，请使用<code class="codeph">bandNumbers</code>参数指定一个或多个波段号。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。如果数据类型是SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）用作裁剪区域;另请参阅SDO_SRID要求的使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> bandNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的物理带编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于1,2和3的波段，使用<code class="codeph">1-3</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D"><!-- --></a> layerNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的逻辑层编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于第2,3和4层，使用<code class="codeph">2-4</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-A81F7EC9-782B-4076-A288-B652219D728B"><!-- --></a> refHistograms</dt>
                        <dd>
                           <p>一组参考直方图。如果数组中只有一个元素，则所有输出波段都与此直方图匹配;否则，数组的长度必须与输出GeoRaster对象中的band数相同。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B"><!-- --></a> refGeoRaster</dt>
                        <dd>
                           <p>参考GeoRaster对象。参考GeoRaster对象必须具有存储在元数据中的直方图，并且必须具有与输入GeoRaster对象相同数量的波段。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-3F772D21-93B2-4674-AD00-B8D5117410B3"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-4CFABCAF-59E9-4E91-AFA8-F65CD9DACA15"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p>输入的GeoRaster对象必须为每个波段生成直方图并存储在元数据中。</p>
                     <p>参考GeoRaster对象必须具有与输入GeoRaster对象相同的band数。参考GeoRaster的单元格深度不能大于<code class="codeph">outGeoRaster</code>对象的单元格深度。参考GeoRaster对象必须在元数据中设置直方图。
                     </p>
                     <p>如果<code class="codeph">cropArea</code>参数数据类型为SDO_GEOMETRY，则SDO_SRID值必须为以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Null，指定栅格空间</p>
                        </li>
                        <li>
                           <p>MDSYS.CS_SRS表的SRID列中的值</p>
                           <p>如果<code class="codeph">cropArea</code>参数几何体和模型空间的SDO_SRID值不同，则<code class="codeph">cropArea</code>参数几何体将在执行操作之前自动转换为模型空间的坐标系。（栅格空间和模型空间在<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型中</a>有解释。）
                           </p>
                        </li>
                     </ul>
                     <p>不支持存储在输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>以下示例创建一个GeoRaster对象，该对象是将输入GeoRaster对象与参考直方图匹配的直方图的结果。在该示例中，参考直方图存储在表<code class="codeph">histogram_table(histogram sdo_geor_histogram, band number)</code> 。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; refHists sdo_geor_histogram_array; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; - 获取源GeoRaster对象SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; - 从histogram_table按顺序获取参考直方图SELECT histogram bulk collect到refHists; sdo_geor_ip.histogramMatch（gr1,0，cropArea，null，refHists，null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>以下示例创建一个GeoRaster对象，该对象是将输入GeoRaster对象与参考GeoRaster对象匹配的直方图的结果。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; refgr sdo_georaster; cropArea sdo_number_array：= null; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; - 获取源GeoRaster对象SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; - 获取参考GeoRaster对象SELECT georaster INTO refgr FROM georaster_table WHERE georid = 5; sdo_geor_ip.histogramMatch（gr1,0，cropArea，null，refgr，null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77" name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77"></a><h3 id="GEORS-GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77" class="sect3"><span class="enumeration_section">11.5</span> SDO_GEOR_IP.normalize</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropArea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，表示IN SDO_NUMBER_ARRAY，standardDeviations IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropArea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，表示IN SDO_NUMBER_ARRAY，standardDeviations IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropArea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，表示IN SDO_NUMBER_ARRAY，standardDeviations IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize（inGeoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropArea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，表示IN SDO_NUMBER_ARRAY，standardDeviations IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，refGeoRaster IN SDO_GEORASTER，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.normalize（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，refGeoRaster IN SDO_GEORASTER，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>使用指定的均值和标准差对输入的GeoRaster对象进行标准化。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>要标准化的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>一个数字，指定要在源GeoRaster对象中规范化的金字塔等级。如果为null，则默认值为0。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-B990F65D-6226-455A-94B8-87A3958C9239"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果<code class="codeph">cropArea</code>的类型为SDO_GEOMETRY，请使用<code class="codeph">layerNumbers</code>参数指定一个或多个图层编号;如果<code class="codeph">cropArea</code>的类型为SDO_NUMBER_ARRAY，请使用<code class="codeph">bandNumbers</code>参数指定一个或多个波段号。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。如果数据类型是SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）用作裁剪区域;另请参阅SDO_SRID要求的使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> bandNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的物理带编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于1,2和3的波段，使用<code class="codeph">1-3</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D"><!-- --></a> layerNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的逻辑层编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于第2,3和4层，使用<code class="codeph">2-4</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-601AB169-0880-4E5D-8A5F-B745FEE654CF"><!-- --></a>表示</dt>
                        <dd>
                           <p>每个输出频段的目标平均值。如果只指定了一个值，则将其应用于所有输出波段;否则，它必须具有与输出GeoRaster对象的波段数相同的值。目标平均值必须在<code class="codeph">outGeoRaster</code>对象的单元格深度范围内。如果为null，则默认为128。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-AF4C41A3-ECAB-4DF4-86E5-6C48265E2AA9"><!-- --></a> standardDeviations</dt>
                        <dd>
                           <p>每个输出频段的目标标准偏差值。如果只指定了一个值，则将其应用于所有输出波段;否则，它必须具有与输出GeoRaster对象的波段数相同的值。目标标准偏差值必须在<code class="codeph">outGeoRaster</code>对象的单元格深度范围内。如果为null，则默认为100。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B"><!-- --></a> refGeoRaster</dt>
                        <dd>
                           <p>参考GeoRaster对象。不是给出目标平均值和标准偏差， <code class="codeph">refGeoRaster</code>使用<code class="codeph">refGeoRaster</code>的平均值和标准偏差作为目标。参考GeoRaster对象必须具有与输入GeoRaster对象相同的band数。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-8A6B0107-A70D-45F4-8AA3-94310363730E"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-89C3EA11-4E66-47A3-8931-43A18D84E31E"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-C53644EC-C8C1-4E9D-9C78-50A8997D4064"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-E2EFFD60-7601-491A-8FB5-EFEC9E6EFB0E"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-43A2B3E0-9B49-4461-9577-903874CF7BAB"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p>输入的GeoRaster对象必须为每个输出波段生成统计信息。</p>
                     <p>参考GeoRaster对象必须具有与输入GeoRaster对象相同的band数。所述的细胞深度<code class="codeph">refGeoRaster</code>对象不能比的小区深度大<code class="codeph">outGeoRaster</code>对象。参考GeoRaster对象必须在元数据中设置统计信息。
                     </p>
                     <p>如果<code class="codeph">cropArea</code>参数数据类型为SDO_GEOMETRY，则SDO_SRID值必须为以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Null，指定栅格空间</p>
                        </li>
                        <li>
                           <p>MDSYS.CS_SRS表的SRID列中的值</p>
                           <p>如果<code class="codeph">cropArea</code>参数几何体和模型空间的SDO_SRID值不同，则<code class="codeph">cropArea</code>参数几何体将在执行操作之前自动转换为模型空间的坐标系。（栅格空间和模型空间在<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型中</a>有解释。）
                           </p>
                        </li>
                     </ul>
                     <p>不支持输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>下面的示例创建一个GeoRaster对象，并根据给定的平均值和标准偏差对输入GeoRaster对象的波段执行标准化。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.normalize（gr1,0，cropArea，null，sdo_number_array（50,80,100），sdo_number_array（30,20,50），null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>以下示例基于给定的均值和标准偏差对输入GeoRaster对象的波段进行归一化;输出是临时BLOB。 （它引用一个名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; out_lob BLOB; outArea sdo_geometry：= null; outWindow sdo_geometry：= null; BEGIN dbms_lob.create_temporary（out_lob，TRUE）; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.normalize（gr1,0，cropArea，null，sdo_number_array（50,80,100），sdo_number_array（30,20,50），null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre><p>下面的示例创建一个GeoRaster对象，并根据给定的引用GeoRaster对象对输入GeoRaster对象的band执行规范化。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; refgr sdo_georaster; cropArea sdo_number_array：= null; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; - 获取源GeoRaster对象SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; - 获取参考GeoRaster对象SELECT georaster INTO refgr FROM georaster_table WHERE georid = 5; sdo_geor_ip.normalize（gr1,0，cropArea，null，refgr，null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3" name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3"></a><h3 id="GEORS-GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3" class="sect3"><span class="enumeration_section">11.6</span> SDO_GEOR_IP.piecewiseStretch</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，inValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，outValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，inValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，outValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch（inGeoRaster IN SDO_GEORASTER，pyramidLevel在数量，cropArea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，inValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，outValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.piecewiseStretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，inValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，outValues IN SDO_NUMBER_ARRAYSET DEFAULT NULL，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>使用最小值和最大值在输入GeoRaster对象上执行线性拉伸。处理后的图像存储在输出GeoRaster对象或BLOB中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>要拉伸的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>一个数字，指定要在源GeoRaster对象中拉伸的金字塔等级。如果为null，则默认值为0。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-B990F65D-6226-455A-94B8-87A3958C9239"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果<code class="codeph">cropArea</code>的类型为SDO_GEOMETRY，请使用<code class="codeph">layerNumbers</code>参数指定一个或多个图层编号;如果<code class="codeph">cropArea</code>的类型为SDO_NUMBER_ARRAY，请使用<code class="codeph">bandNumbers</code>参数指定一个或多个波段号。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。如果数据类型是SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）用作裁剪区域;另请参阅SDO_SRID要求的使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> bandNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的物理带编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于1,2和3的波段，使用<code class="codeph">1-3</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D"><!-- --></a> layerNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的逻辑层编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于第2,3和4层，使用<code class="codeph">2-4</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B"><!-- --></a> inValues</dt>
                        <dd>
                           <p>与每个输入波段对应的SDO_NUMBER_ARRAY对象数组。如果只指定了一个元素，则所有输出波段都以相同的方式拉伸。每个SDO_NUMBER_ARRAY指定拉伸中使用的输入GeoRaster对象单元格值范围。例如，sdo_number_array（0,50,255）指定两个值范围，从0到50和50到255。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-82D89140-9FAE-4CBB-9EA1-39593A53014B"><!-- --></a> outValues</dt>
                        <dd>
                           <p>与每个输出波段对应的SDO_NUMBER_ARRAY对象数组。如果只指定了一个元素，则所有输出波段都以相同的方式拉伸。每个SDO_NUMBER_ARRAY指定的目标值范围对应于所述的数值范围<code class="codeph">inValues</code>参数。例如，sdo_number_array（0,200,255）指定两个值范围，从0到200和200到255。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-44642104-37C3-4CB8-AC3F-71AC8C4664E1"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-C4649244-7580-4F2D-8668-A6E937985730"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-654735E8-DE8F-4C1B-AA4A-80CE0A3BD9E5"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-ECC10B88-473D-4626-8B0D-F593D0FA1577"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-F177EB15-EB0D-487B-91AB-DE22AF4DE107"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p><code class="codeph">inValues</code>和<code class="codeph">outValues</code>参数必须具有相同数量的值，并且<code class="codeph">inValues</code>参数中指定的范围必须按升序排列。<code class="codeph">inValues</code>参数中的值必须在<code class="codeph">inGeoRaster</code>对象的单元格深度范围内。<code class="codeph">outValues</code>参数中的值必须在<code class="codeph">outGeoRaster</code>对象的单元格深度范围内。
                     </p>
                     <p>如果<code class="codeph">cropArea</code>参数数据类型为SDO_GEOMETRY，则SDO_SRID值必须为以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Null，指定栅格空间</p>
                        </li>
                        <li>
                           <p>MDSYS.CS_SRS表的SRID列中的值</p>
                           <p>如果<code class="codeph">cropArea</code>参数几何体和模型空间的SDO_SRID值不同，则<code class="codeph">cropArea</code>参数几何体将在执行操作之前自动转换为模型空间的坐标系。（栅格空间和模型空间在<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型中</a>有解释。）
                           </p>
                        </li>
                     </ul>
                     <p>不支持存储在输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>下面的示例创建一个GeoRaster对象，该对象将输入GeoRaster对象的所有波段分段拉伸到不同的单元格深度：0到255之间的线性拉伸输入值到0到2000的范围。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; inValues sdo_number_arrayset; outValues sdo_number_arrayset; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; - 定义输入和输出值范围inValues：= sdo_number_arrayset（sdo_number_array（0,255））; outValues：= sdo_number_arrayset（sdo_number_array（0,2000））; sdo_geor_ip.piecewisestretch（gr1,0，cropArea，null，inValues，outValues，'celldepth = 16bit_u'，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>以下示例分段拉伸每个波段的不同范围;输出是临时BLOB。 （它引用一个名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; cropArea sdo_number_array：= null; inValues sdo_number_arrayset; outValues sdo_number_arrayset; out_lob BLOB; outArea sdo_geometry：= null; outWindow sdo_geometry：= null; BEGIN dbms_lob.create_temporary（out_lob，TRUE）; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; - 定义输入和输出值范围inValues：= sdo_number_arrayset（sdo_number_array（0,30,80,255），sdo_number_array（0,10,50,255），sdo_number_array（0,50,150,255））; outValues：= sdo_number_arrayset（sdo_number_array（0,80,200,255），sdo_number_array（0,60,150,255），sdo_number_array（0,100,250,255））; sdo_geor_ip.piecewisestretch（gr1,0，cropArea，null，inValues，outValues，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E" name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E"></a><h3 id="GEORS-GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E" class="sect3"><span class="enumeration_section">11.7</span> SDO_GEOR_IP.stretch</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-8E20AF1B-1BF6-45CD-B916-968D01F77A55">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，minValues IN SDO_NUMBER_ARRAY DEFAULT NULL，maxValues IN SDO_NUMBER_ARRAY DEFAULT NULL，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER），parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，minValues IN SDO_NUMBER_ARRAY DEFAULT NULL，max_values IN SDO_NUMBER_ARRAY DEFAULT NULL，storageParam IN VARCHAR2，outGeoraster IN OUT SDO_GEORASTER），parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_NUMBER_ARRAY，bandNumbers IN VARCHAR2，minValues IN SDO_NUMBER_ARRAY DEFAULT NULL，maxValues IN SDO_NUMBER_ARRAY DEFAULT NULL，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_IP.stretch（inSoRaster IN SDO_GEORASTER，pyramidLevel IN NUMBER，cropNrea IN SDO_GEOMETRY，layerNumbers IN VARCHAR2，minValues IN SDO_NUMBER_ARRAY DEFAULT NULL，max_values IN SDO_NUMBER_ARRAY DEFAULT NULL，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-30001566-2066-4178-914A-29A2C4E14931">描述</p>
                     <p>使用最小值和最大值在输入GeoRaster对象上执行最小 - 最大线性拉伸。处理后的图像存储在输出GeoRaster对象或BLOB中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-A4E56862-4676-418D-B075-C48E5282EEDC">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a> GeoRaster中的<a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-5ADDA38B-C93C-4009-B5A0-ABF84079D8EF"><!-- --></a></dt>
                        <dd>
                           <p>要拉伸的SDO_GEORASTER对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-5B08A3DD-8FB5-4C77-B33B-E715FE86C843"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>一个数字，指定要在源GeoRaster对象中拉伸的金字塔等级。如果为null，则默认值为0。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-B990F65D-6226-455A-94B8-87A3958C9239"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果<code class="codeph">cropArea</code>的类型为SDO_GEOMETRY，请使用<code class="codeph">layerNumbers</code>参数指定一个或多个图层编号;如果<code class="codeph">cropArea</code>的类型为SDO_NUMBER_ARRAY，请使用<code class="codeph">bandNumbers</code>参数指定一个或多个波段号。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。如果数据类型是SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）用作裁剪区域;另请参阅SDO_SRID要求的使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-64B1D897-7A25-4BB6-96EA-00B02ECA27BA"><!-- --></a> bandNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的物理带编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于1,2和3的波段，使用<code class="codeph">1-3</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-7D092C87-2E10-476C-A9DB-B1C0D3E01C1D"><!-- --></a> layerNumbers</dt>
                        <dd>
                           <p>标识要在其上执行操作的逻辑层编号的字符串。使用逗号分隔值，使用连字符表示范围（例如，对于第2,3和4层，使用<code class="codeph">2-4</code> ）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-C6F3DCD5-DAB2-43DC-8B39-628FA5A3A80B"><!-- --></a> minValues</dt>
                        <dd>
                           <p>要拉伸的带的最小值。如果为null，则使用存储在图层元数据中的输入GeoRaster对象的最小值。如果SDO_NUMBER_ARRAY中只有一个值，则将其用作所有输入波段的最小值;否则，SDO_NUMBER_ARRAY中的值的数量必须与输出GeoRaster对象的波段数相同。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-82D89140-9FAE-4CBB-9EA1-39593A53014B"><!-- --></a> maxValues</dt>
                        <dd>
                           <p>要拉伸的带的最大值。如果为null，则使用存储在图层元数据中的输入GeoRaster对象的最大值。如果SDO_NUMBER_ARRAY中只有一个值，则将其用作所有输入波段的最大值;否则，SDO_NUMBER_ARRAY中的值的数量必须与输出GeoRaster对象的波段数相同。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-F10DDAB3-73E9-41CE-A679-4B4F52354084"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-ABBEC23E-E834-44B7-BF98-45E0F10B4474"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出SDO_GEORASTER对象，它反映了操作的结果。必须是有效的现有GeoRaster对象或空的GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）不能与<code class="codeph">inGeoRaster</code> GeoRaster对象相同。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-C598A40B-39CE-4D1D-8327-CA139A11C4EC"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>如果指定了并行性，则该过程在进程运行时执行内部提交。因此，您无法回滚此过程的结果。如果发生错误（即使它是由Oracle并行服务器引发的），您必须显式删除生成的输出GeoRaster对象才能回滚操作。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-42FFD7A1-7CA2-47B0-8031-1959ECADD2D7"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-F35CAC73-6F21-4B19-8D8D-602E3D9ED51A"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-09E38767-1E57-4BE6-A3E3-B0FCBA77F5D9"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-7A3C229B-0601-4669-9D51-0721954D7EAA">使用说明</p>
                     <p>使用<code class="codeph">minValues</code>和<code class="codeph">maxValues</code>参数中的值或存储在图像的统计元数据中的最小值和最大值，将输入的GeoRaster对象拉伸到0-255。如果<code class="codeph">minValues</code>和<code class="codeph">maxValues</code>参数为null，则输入的GeoRaster对象必须在其元数据中设置统计信息。
                     </p>
                     <p>输出GeoRaster对象的单元格深度始终为<code class="codeph">8BIT_U</code> 。当需要将GeoRaster图像拉伸到<code class="codeph">8BIT_U</code>以外的单元格深度的图像时，可以使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a> 。
                     </p>
                     <p>如果<code class="codeph">cropArea</code>参数数据类型为SDO_GEOMETRY，则SDO_SRID值必须为以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Null，指定栅格空间</p>
                        </li>
                        <li>
                           <p>MDSYS.CS_SRS表的SRID列中的值</p>
                           <p>如果<code class="codeph">cropArea</code>参数几何体和模型空间的SDO_SRID值不同，则<code class="codeph">cropArea</code>参数几何体将在执行操作之前自动转换为模型空间的坐标系。（栅格空间和模型空间在<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型中</a>有解释。）
                           </p>
                        </li>
                     </ul>
                     <p>不支持存储在输入GeoRaster对象中的颜色映射。</p>
                     <p>输出GeoRaster对象没有金字塔或掩码。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E__GUID-88BE7296-40B8-481C-8112-BAF85E6D7DAE">例子</p>
                     <p>以下示例创建一个GeoRaster对象，该对象将输入GeoRaster对象的band 2从值范围（30,150）延伸到（0,255）。（它指的是名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.stretch（gr1,0，cropArea，'2'，sdo_number_array（30），sdo_number_array（150），null，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</pre><p>以下示例将输入GeoRaster对象的band 2从值范围（30,150）拉伸到（0,255）;输出是临时BLOB。 （它引用一个名为GEORASTER_TABLE的表，其定义在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数的</a> <a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDGDCEC">示例1-1</a>之后给出。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_number_array：= null; out_lob BLOB; outArea sdo_geometry：= null; outWindow sdo_geometry：= null; BEGIN dbms_lob.create_temporary（out_lob，TRUE）; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.stretch（gr1,0，cropArea，'2'，sdo_number_array（30），sdo_number_array（150），null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_GEOR_IP-reference-ref.html#GUID-658BBDD1-0155-44BC-8A21-CDC1C088E74F" title="SDO_GEOR_IP包中包含用于对GeoRaster对象执行图像处理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_IP包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="01632.searching-document-sections-in-oracle-text.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use document sections in a text query application."></meta>
      <meta name="description" content="You can use document sections in a text query application."></meta>
      <title>在Oracle Text中搜索文档部分</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can use document sections in a text query application."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="tuning-oracle-text.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-oracle-text-name-search.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="tuning-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-oracle-text-name-search.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Oracle Text中搜索文档部分</li>
            </ol>
            <a id="GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A" name="GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A"></a><a id="CCAPP0800"></a>
            
            <h2 id="CCAPP-GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A" class="sect2"><span class="enumeration_chapter">11</span>在Oracle Text中搜索文档部分</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以在文本查询应用程序中使用文档部分。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="searching-document-sections-in-oracle-text.html#GUID-C9161012-F942-46BD-A9D6-68CF554F3D6D">关于Oracle Text Document Section Searching</a></p>
                  </li>
                  <li>
                     <p><a href="searching-document-sections-in-oracle-text.html#GUID-2F7B1652-42FB-4A0A-A37F-652DDCB82182">HTML部分使用Oracle Text搜索</a></p>
                  </li>
                  <li>
                     <p><a href="searching-document-sections-in-oracle-text.html#GUID-8D535B14-B377-4766-A062-1DA912438E23">使用Oracle Text搜索XML部分</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9284"></a><div class="props_rev_3"><a id="GUID-C9161012-F942-46BD-A9D6-68CF554F3D6D" name="GUID-C9161012-F942-46BD-A9D6-68CF554F3D6D"></a><h3 id="CCAPP-GUID-C9161012-F942-46BD-A9D6-68CF554F3D6D" class="sect3"><span class="enumeration_section">11.1</span>关于Oracle Text Document Section Searching</h3>
               <div>
                  <p>通过截面搜索，您可以将文本查询缩小到文档中的文本块。当文档具有内部结构（例如HTML和XML文档）时，节搜索很有用。</p>
                  <p>您还可以在句子和段落级别搜索文本。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-38C50A3D-B2EE-45F2-805B-AA3B02988C7C">启用Oracle Text Section Searching</a></p>
                     </li>
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-53221B04-7597-46BC-AF34-3B16BE898D7A">Oracle文本部分类型</a></p>
                     </li>
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7">Oracle文本部分属性</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9285"></a><div class="props_rev_3"><a id="GUID-38C50A3D-B2EE-45F2-805B-AA3B02988C7C" name="GUID-38C50A3D-B2EE-45F2-805B-AA3B02988C7C"></a><h4 id="CCAPP-GUID-38C50A3D-B2EE-45F2-805B-AA3B02988C7C" class="sect4"><span class="enumeration_section">11.1.1</span>启用Oracle Text Section Searching</h4>
                  <div>
                     <p>启用部分搜索文档集的步骤如下：</p>
                     <ol>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397">创建一个Section Group</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-193F643B-C72E-471F-A1CF-05F423C4C350">定义您的部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-4056667C-6298-42BF-B6B5-1A67108BFD4B">索引您的文档</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-2F97BA75-A0C4-48D1-BC73-C83921581E1D">使用WITHIN运算符搜索部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-1A6CB754-E899-48B6-B042-01ACDEB78335">使用INPATH和HASPATH运算符搜索路径</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-7D3BD659-7C9D-44EF-9DA8-F047017BC165">将SDATA部分标记为可搜索</a></p>
                        </li>
                     </ol>
                  </div><a id="CCAPP9514"></a><a id="CCAPP9286"></a><div class="props_rev_3"><a id="GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397" name="GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397"></a><h5 id="CCAPP-GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397" class="sect5"><span class="enumeration_section">11.1.1.1</span>创建节组</h5>
                     <div>
                        <p>您可以通过定义节组来启用节搜索。您可以使用系统定义的部分组之一来创建部分组的实例。选择适合您的文档集的节组。</p>
                        <p>您可以使用节组指定您拥有的文档集类型，并隐式指示标记结构。例如，要索引HTML标记文档，请使用<code class="codeph">HTML_SECTION_GROUP.</code>同样，要索引XML标记文档，请使用<code class="codeph">XML_SECTION_GROUP.</code></p>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397__BABEHHID" title="此表显示了可以使用的各种类型的节类型。">表11-1</a>列出了不同类型的节组。
                        </p>
                        <div class="tblformal" id="GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397__BABEHHID">
                           <p class="titleintable">表11-1节组的类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="部分组的类型" width="100%" border="1" summary="This table shows the various types of section types you can use." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d28756e359">科组偏好</th>
                                    <th align="left" valign="bottom" width="64%" id="d28756e362">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e367" headers="d28756e359 ">
                                       <p><code class="codeph">NULL_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e367 d28756e362 ">
                                       <p>这是默认值。如果不定义任何部分或<span class="italic">仅</span>定义<code class="codeph">SENTENCE</code>或<code class="codeph">PARAGRAPH</code>部分，请使用此组类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e384" headers="d28756e359 ">
                                       <p><code class="codeph">BASIC_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e384 d28756e362 ">
                                       <p>使用此组类型定义开始和结束标记的格式为<code class="codeph">&lt;A&gt;</code>和<code class="codeph">&lt;/A&gt;</code> 。
                                       </p>
                                       <p><span class="bold">注意：</span>此组类型不支持不平衡括号，注释标记和属性等输入。对此类输入使用<code class="codeph">HTML_SECTION_GROUP</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e405" headers="d28756e359 ">
                                       <p><code class="codeph">HTML_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e405 d28756e362 ">
                                       <p>使用此组类型索引HTML文档和定义HTML文档中的部分。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e413" headers="d28756e359 ">
                                       <p><code class="codeph">XML_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e413 d28756e362 ">
                                       <p>使用此组类型来索引XML文档以及定义XML文档中的部分。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e421" headers="d28756e359 ">
                                       <p><code class="codeph">AUTO_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e421 d28756e362 ">
                                       <p>使用此组类型可自动为XML文档中的每个开始标记/结束标记对创建区域部分。与在XML中一样，从XML标记派生的节名称区分大小写。</p>
                                       <p>为具有属性的XML标记自动创建属性部分。属性部分在表单<span class="italic">标记@ attribute</span>中命名<span class="italic">。</span></p>
                                       <p>停止节，空标签，处理指令和注释未编入索引。</p>
                                       <p>以下限制适用于自动节组：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>您无法将区域，字段或特殊部分添加到自动部分组。</p>
                                          </li>
                                          <li>
                                             <p>自动切片不会索引XML文档类型（根元素）。</p>
                                          </li>
                                          <li>
                                             <p>索引标记的长度（包括前缀和名称空间）不能超过64个字节。长度超过64字节的标记未编入索引。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e447" headers="d28756e359 ">
                                       <p><code class="codeph">PATH_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e447 d28756e362 ">
                                       <p>使用此组类型来索引XML文档。此首选项的行为类似于<code class="codeph">AUTO_SECTION_GROUP.</code></p>
                                       <p>不同之处在于您可以使用<code class="codeph">INPATH</code>和<code class="codeph">HASPATH</code>运算符搜索路径。查询对标记和属性名称也区分大小写。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d28756e465" headers="d28756e359 ">
                                       <p><code class="codeph">NEWS_SECTION_GROUP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d28756e465 d28756e362 ">
                                       <p>根据RFC 1036，使用此组定义新闻组格式的文档中的部分。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397__GUID-DA793D0C-5C74-442B-AEC0-9A95B7D09BBA">
                           <p class="notep1">注意：</p>
                           <p>发送到<code class="codeph">HTML,</code> <code class="codeph">XML,</code> <code class="codeph">AUTO,</code>和<code class="codeph">PATH</code>分区器的文档必须以<code class="codeph">\s*&lt;.</code>开头<code class="codeph">\s*&lt;.</code> <code class="codeph">\s*</code>表示零个或多个空格字符。否则，文档将被视为纯文本文档，并且不会识别任何部分。
                           </p>
                        </div>
                        <p>您可以使用<code class="codeph">CTX_DDL</code>包创建节组并将节定义为节组的一部分。例如，要索引HTML文档，请使用<code class="codeph">HTML_SECTION_GROUP</code>创建一个节组：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）;结束;</pre><div class="section">
                           <div class="infoboxnote" id="GUID-B1DE6C9A-6010-45E8-941F-D2E4BDED2397__GUID-BD21B25D-9601-4B42-8B2A-AE0E3609E1AC">
                              <p class="notep1">注意：</p><span>从Oracle Database 18c开始，Oracle Text中不推荐使用<code class="codeph">NEWS_SECTION_GROUP</code> 。请改用外部处理。</span><p>如果要索引USENET帖子，则预处理帖子以在Oracle Text中使用<code class="codeph">BASIC_SECTION_GROUP</code>或<code class="codeph">HTML_SECTION_GROUP</code> 。USENET很少在商业上使用。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CCAPP9287"></a><div class="props_rev_3"><a id="GUID-193F643B-C72E-471F-A1CF-05F423C4C350" name="GUID-193F643B-C72E-471F-A1CF-05F423C4C350"></a><h5 id="CCAPP-GUID-193F643B-C72E-471F-A1CF-05F423C4C350" class="sect5"><span class="enumeration_section">11.1.1.2</span>定义您的章节</h5>
                     <div>
                        <p>您可以将节定义为节组的一部分。以下示例为HTML <code class="codeph">&lt; H1&gt;</code>标记中的所有文本定义名为heading的区域部分：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_zone_section（'htmgroup'，'heading'，'H1'）;结束;</pre><div class="infoboxnote" id="GUID-193F643B-C72E-471F-A1CF-05F423C4C350__GUID-F2B34EC4-1F68-4E25-A3C9-DEDBBD0BFBE9">
                           <p class="notep1">注意：</p>
                           <p>如果使用<code class="codeph">AUTO_SECTION_GROUP</code>或<code class="codeph">PATH_SECTION_GROUP</code>来索引XML文档集合，则不必显式定义节。系统在索引期间定义部分。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-193F643B-C72E-471F-A1CF-05F423C4C350__GUID-2AEB8337-AE3B-408A-9917-E4063A097FB7">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="searching-document-sections-in-oracle-text.html#GUID-53221B04-7597-46BC-AF34-3B16BE898D7A">Oracle文本节类型</a> ”</span>有关节的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="searching-document-sections-in-oracle-text.html#GUID-8D535B14-B377-4766-A062-1DA912438E23">XML部分使用Oracle Text搜索</a> ”</span>以获取有关使用XML搜索部分的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CCAPP9288"></a><div class="props_rev_3"><a id="GUID-4056667C-6298-42BF-B6B5-1A67108BFD4B" name="GUID-4056667C-6298-42BF-B6B5-1A67108BFD4B"></a><h5 id="CCAPP-GUID-4056667C-6298-42BF-B6B5-1A67108BFD4B" class="sect5"><span class="enumeration_section">11.1.1.3</span>索引文件</h5>
                     <div>
                        <p>索引文档时，可以在<code class="codeph">CREATE</code> <code class="codeph">INDEX.</code>的参数子句中指定节组<code class="codeph">INDEX.</code></p><pre class="oac_no_warn" dir="ltr">在docs上创建索引myindex（htmlfile）indextype是ctxsys.context参数（'filter ctxsys.null_filter section group htmgroup'）;</pre></div>
                  </div><a id="CCAPP9289"></a><div class="props_rev_3"><a id="GUID-2F97BA75-A0C4-48D1-BC73-C83921581E1D" name="GUID-2F97BA75-A0C4-48D1-BC73-C83921581E1D"></a><h5 id="CCAPP-GUID-2F97BA75-A0C4-48D1-BC73-C83921581E1D" class="sect5"><span class="enumeration_section">11.1.1.4</span>使用WITHIN运算符搜索节</h5>
                     <div>
                        <p>对文档编制索引后，可以使用<code class="codeph">WITHIN</code>运算符在节中查询。例如，要在其标题中查找包含单词<span class="italic">Oracle的</span>所有文档，请输入以下查询：</p><pre class="oac_no_warn" dir="ltr">'Oracle WITHIN标题'</pre><div class="infoboxnotealso" id="GUID-2F97BA75-A0C4-48D1-BC73-C83921581E1D__GUID-15ECB815-5B18-45BA-A47A-724A4F125E8A">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0330" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关使用<code class="codeph">WITHIN</code>运算符的更多信息</p>
                        </div>
                     </div>
                  </div><a id="CCAPP9290"></a><div class="props_rev_3"><a id="GUID-1A6CB754-E899-48B6-B042-01ACDEB78335" name="GUID-1A6CB754-E899-48B6-B042-01ACDEB78335"></a><h5 id="CCAPP-GUID-1A6CB754-E899-48B6-B042-01ACDEB78335" class="sect5"><span class="enumeration_section">11.1.1.5</span>搜索与INPATH和HASPATH运营商路径</h5>
                     <div>
                        <p>使用<code class="codeph">PATH_SECTION_GROUP,</code>系统会自动创建XML部分。除了使用<code class="codeph">WITHIN</code>运算符输入查询外，还可以使用<code class="codeph">INPATH</code>和<code class="codeph">HASPATH</code>运算符输入路径查询。
                        </p>
                        <div class="infoboxnotealso" id="GUID-1A6CB754-E899-48B6-B042-01ACDEB78335__GUID-A0871D71-8EBE-4939-87B9-8F2FF5C5DA9C">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="searching-document-sections-in-oracle-text.html#GUID-8D535B14-B377-4766-A062-1DA912438E23">使用Oracle Text搜索XML部分</a> ”</span>以了解有关使用这些运算符的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF-GUID-F78EC75C-55C8-4C79-A744-AE0DB2E1F581" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关使用<code class="codeph">INPATH</code>运算符的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-7D3BD659-7C9D-44EF-9DA8-F047017BC165" name="GUID-7D3BD659-7C9D-44EF-9DA8-F047017BC165"></a><h5 id="CCAPP-GUID-7D3BD659-7C9D-44EF-9DA8-F047017BC165" class="sect5"><span class="enumeration_section">11.1.1.6</span>将SDATA部分标记为可搜索</h5>
                     <div>
                        <div class="section">要将<code class="codeph">SDATA</code>部分标记为可搜索并创建<code class="codeph">$S <span class="codeinlineitalic">datatype</span></code>表，请使用<code class="codeph">CTX_DDL.SET_SECTION_ATTRIBUTE</code> API。<p>创建以下表格：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">$SN</code> - <code class="codeph">NUMBER</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$SD</code> - <code class="codeph">DATE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$SV</code> - <code class="codeph">VARCHAR2</code> ， <code class="codeph">CHAR</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$SR</code> - <code class="codeph">RAW</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$SBD</code> - <code class="codeph">BINARY DOUBLE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$SBF</code> - <code class="codeph">BINARY FLOAT</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$ST</code> - <code class="codeph">TIMESTAMP</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">$STZ</code> - <code class="codeph">TIMESTAMP WITH TIMEZONE</code></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">以下示例为此<code class="codeph">SDATA</code>部分创建<code class="codeph">$SV</code>表，以允许在该部分上进行有效搜索。<pre class="pre codeblock"><code>ctx_ddl.add_sdata_section（'sec_grp'，'sdata_sec'，'mytag'，'varchar'）; ctx_ddl.set_section_attribute（'sec_grp'，'sdata_sec'，'optimized_for'，'search'）;</code></pre><p>此属性的默认值为<code class="codeph">FALSE.</code></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="CCAPP9515"></a><a id="CCAPP9291"></a><div class="props_rev_3"><a id="GUID-53221B04-7597-46BC-AF34-3B16BE898D7A" name="GUID-53221B04-7597-46BC-AF34-3B16BE898D7A"></a><h4 id="CCAPP-GUID-53221B04-7597-46BC-AF34-3B16BE898D7A" class="sect4"><span class="enumeration_section">11.1.2</span> Oracle文本节类型</h4>
                  <div>
                     <p>所有节类型都是文档中的文本块。但是，部分的分隔方式和它们在索引中的记录方式可能有所不同。部分可以是以下类型之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E">区域部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-426E9F80-530D-42B7-9C52-550EFCEDC720">野外科</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-4F6F335C-CDC5-4B08-84F4-2439DD908DA0">停止部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-58DBD861-FD45-4FE4-8862-7EA360BD9F71">MDATA部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-22EEA9FE-6051-4314-92B2-9C67CE0D167D">NDATA部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-F71A270E-4AFB-4B2C-B374-538566E5C403">SDATA部分</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F">属性部分</a> （用于XML文档）</p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-2F7732AB-2AE4-496F-BC0A-37FAF21FC043">特节</a> （句子或段落）</p>
                        </li>
                     </ul>
                     <p><a href="searching-document-sections-in-oracle-text.html#GUID-53221B04-7597-46BC-AF34-3B16BE898D7A__CACCGFDE" title="部分类型和部分组">表11-2</a> <a id="d28756e1130" class="indexterm-anchor"></a><a id="d28756e1134" class="indexterm-anchor"></a><a id="d28756e1138" class="indexterm-anchor"></a>显示哪种部分类型可以与每种部分组一起使用。
                     </p>
                     <div class="tblformalwide" id="GUID-53221B04-7597-46BC-AF34-3B16BE898D7A__CACCGFDE">
                        <p class="titleintable">表11-2节类型和节组</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="部分类型和部分组" width="100%" border="1" summary="Section Types and Section Groups" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="16%" id="d28756e1160">科组</th>
                                 <th align="left" valign="bottom" width="8%" id="d28756e1163">区</th>
                                 <th align="left" valign="bottom" width="9%" id="d28756e1166">领域</th>
                                 <th align="left" valign="bottom" width="9%" id="d28756e1169">停</th>
                                 <th align="left" valign="bottom" width="11%" id="d28756e1172">MDATA</th>
                                 <th align="left" valign="bottom" width="10%" id="d28756e1175">NDATA</th>
                                 <th align="left" valign="bottom" width="10%" id="d28756e1178">SDATA</th>
                                 <th align="left" valign="bottom" width="15%" id="d28756e1181">属性</th>
                                 <th align="left" valign="bottom" width="12%" id="d28756e1184">特别</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1189" headers="d28756e1160 ">
                                    <p>空值</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1189 d28756e1163 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1189 d28756e1166 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1189 d28756e1169 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1189 d28756e1172 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1189 d28756e1175 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1189 d28756e1178 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1189 d28756e1181 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1189 d28756e1184 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1217" headers="d28756e1160 ">
                                    <p>BASIC</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1217 d28756e1163 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1217 d28756e1166 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1217 d28756e1169 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1217 d28756e1172 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1217 d28756e1175 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1217 d28756e1178 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1217 d28756e1181 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1217 d28756e1184 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1245" headers="d28756e1160 ">
                                    <p>HTML</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1245 d28756e1163 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1245 d28756e1166 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1245 d28756e1169 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1245 d28756e1172 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1245 d28756e1175 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1245 d28756e1178 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1245 d28756e1181 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1245 d28756e1184 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1273" headers="d28756e1160 ">
                                    <p>XML</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1273 d28756e1163 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1273 d28756e1166 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1273 d28756e1169 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1273 d28756e1172 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1273 d28756e1175 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1273 d28756e1178 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1273 d28756e1181 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1273 d28756e1184 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1301" headers="d28756e1160 ">
                                    <p>新闻</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1301 d28756e1163 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1301 d28756e1166 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1301 d28756e1169 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1301 d28756e1172 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1301 d28756e1175 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1301 d28756e1178 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1301 d28756e1181 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1301 d28756e1184 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1329" headers="d28756e1160 ">
                                    <p>汽车</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1329 d28756e1163 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1329 d28756e1166 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1329 d28756e1169 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1329 d28756e1172 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1329 d28756e1175 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1329 d28756e1178 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1329 d28756e1181 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1329 d28756e1184 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="16%" id="d28756e1357" headers="d28756e1160 ">
                                    <p>路径</p>
                                 </td>
                                 <td align="left" valign="top" width="8%" headers="d28756e1357 d28756e1163 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1357 d28756e1166 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="9%" headers="d28756e1357 d28756e1169 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d28756e1357 d28756e1172 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1357 d28756e1175 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="10%" headers="d28756e1357 d28756e1178 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d28756e1357 d28756e1181 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d28756e1357 d28756e1184 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="CCAPP9688"></a><a id="CCAPP9689"></a><a id="CCAPP9690"></a><a id="CCAPP9292"></a><div class="props_rev_3"><a id="GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E" name="GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E"></a><h5 id="CCAPP-GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E" class="sect5"><span class="enumeration_section">11.1.2.1</span>区域部分</h5>
                     <div>
                        <p>区域部分是由文档中的开始和结束标记分隔的文本正文。开始和结束标记的位置记录在索引中，以便标记之间的任何单词都被认为是在该部分内。区域部分的任何实例都必须具有开始和结束标记。</p>
                        <p>例如，将<code class="codeph">&lt;TITLE&gt;</code>和<code class="codeph">&lt;/TITLE&gt;</code>标记之间的文本定义为区域部分，如下所示：</p><pre class="oac_no_warn" dir="ltr">&lt;TITLE&gt;两个城市的故事&lt;/ TITLE&gt;这是最好的时光......
</pre><p>区域部分可以在文档中嵌套，重叠和重复。</p>
                        <p>查询区域部分时，使用<code class="codeph">WITHIN</code>运算符在所有部分中搜索术语。Oracle Text返回在定义的部分中包含该术语的那些文档。
                        </p>
                        <p>区域部分非常适合定义HTML和XML文档中的部分。要定义区域部分，请使用<code class="codeph">CTX_DDL</code> 。 <code class="codeph">ADD_ZONE_SECTION.</code></p>
                        <p>例如，假设您定义了<code class="codeph">booktitle</code>部分，如下所示：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_zone_section（'htmgroup'，'booktitle'，'TITLE'）;结束;</pre><p>索引后，您可以在<code class="codeph">booktitle</code>部分中搜索包含“ <span class="italic">城市</span> ”一词的所有文档，如下所示：</p><pre class="oac_no_warn" dir="ltr">“有书签的城市”</pre><p>使用多个查询术语（例如<span class="italic">（dog和cat）WITHIN booktitle），</span> Oracle Text会在<code class="codeph">booktitle</code>部分的同一实例中返回包含<span class="italic">cat</span>和<span class="italic">dog的</span>文档。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E__GUID-B564CCB7-32DC-4943-8170-9A5463185000">重复区域部分</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>区域部分可以重复。每次出现都被视为一个单独的部分。例如，如果<code class="codeph">&lt;H1&gt;</code>表示<code class="codeph">heading</code>部分，则可以在相同的文档中重复标题，如下所示：</p><pre class="oac_no_warn" dir="ltr">&lt;H1&gt;布朗福克斯&lt;/ H1&gt; &lt;H1&gt;灰狼&lt;/ H1&gt;</pre><p>假设这些区域部分名为<code class="codeph">Heading,</code> <span class="italic">Brown ININ Heading</span>的查询将返回此文档。但是， <span class="italic">（褐色和灰色）WITHIN标题</span>的查询不会。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E__GUID-40B12380-F994-4F48-A51B-A6B9AE4AAE9F">重叠区域部分</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>区域部分可以相互重叠。例如，如果<code class="codeph">&lt;B&gt;</code>和<code class="codeph">&lt;I&gt;</code>表示两个不同的区域部分，它们可以在文档中重叠，如下所示：</p><pre class="oac_no_warn" dir="ltr">plain &lt;B&gt;粗体&lt;I&gt;粗体和斜体&lt;/ B&gt;仅斜体&lt;/ I&gt;简单</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-9BEFC13A-B5A6-42B7-B5AF-EDDE5345C12E__GUID-6133CD0C-CA68-44DD-8F9B-B7394D06060D">嵌套区域部分</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>区域部分可以嵌套，如下所示：</p><pre class="oac_no_warn" dir="ltr">&lt;TD&gt; &lt;TABLE&gt; &lt;TD&gt;嵌套单元&lt;/ TD&gt; &lt;/ TABLE&gt; &lt;/ TD&gt;</pre><p>使用<code class="codeph">WITHIN</code>运算符，您可以编写查询以在节中的节中搜索文本。例如，假设<code class="codeph">BOOK1, BOOK2,</code>和<code class="codeph">AUTHOR</code>区域部分在doc1和doc2文档中如下所示：</p>
                           <p>DOC1：</p><pre class="oac_no_warn" dir="ltr">&lt;book1&gt; &lt;author&gt; Scott Tiger &lt;/ author&gt;这是一本很酷的书。&lt;/ book1&gt;</pre><p>DOC2：</p><pre class="oac_no_warn" dir="ltr">&lt;book2&gt; &lt;author&gt; Scott Tiger &lt;/ author&gt;这是一本很棒的书。&lt;/ book2&gt;</pre><p>考虑嵌套查询。它只返回doc1。</p><pre class="oac_no_warn" dir="ltr">'（作者中的斯科特）在book1'中</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CCAPP9296"></a><div class="props_rev_3"><a id="GUID-426E9F80-530D-42B7-9C52-550EFCEDC720" name="GUID-426E9F80-530D-42B7-9C52-550EFCEDC720"></a><h5 id="CCAPP-GUID-426E9F80-530D-42B7-9C52-550EFCEDC720" class="sect5"><span class="enumeration_section">11.1.2.2</span>现场部分</h5>
                     <div>
                        <p>字段部分类似于区域部分，因为它是由开始和结束标记分隔的文本区域。字段部分从区域部分更有效，并且与区域部分不同，因为区域与文档的其余部分分开索引。您可以创建无限数量的字段部分。</p>
                        <p>由于字段部分的索引方式不同，因此在索引大量文档时，您还可以在区域部分获得更好的查询性能。</p>
                        <p>字段部分更适合于文档中单个部分的出现，例如新闻标题中的字段。字段部分也可以对文档的其余部分可见。</p>
                        <p>与区域部分不同，字段部分具有以下限制：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>它们不能重叠。</p>
                           </li>
                           <li>
                              <p>他们无法重复。</p>
                           </li>
                           <li>
                              <p>他们无法筑巢。</p>
                           </li>
                        </ul>
                        <div class="section">
                           <p class="subhead3" id="GUID-426E9F80-530D-42B7-9C52-550EFCEDC720__GUID-02402D8C-4645-4A45-A312-FAC19590F3A6">可见和不可见的现场部分</p>
                           <p>默认情况下，字段部分被索引为与文档其余部分分开的子文档。因此，字段部分对于周围文本是不可见的，只能通过显式命名<code class="codeph">WITHIN</code>子句中的部分来查询。
                           </p>
                           <p>如果希望将字段部分中的文本编入索引作为封闭文档的一部分，则可以使字段部分可见。您可以使用或不使用<code class="codeph">WITHIN</code>运算符查询可见字段部分中的文本。
                           </p>
                           <p>以下示例显示使用不可见和可见字段部分的差异。该代码定义<code class="codeph">BASIC_SECTION_GROUP</code>类型的<code class="codeph">basicgroup</code>组节组。然后，它在<code class="codeph">basicgroup</code>创建一个名为<code class="codeph">Author</code>的<code class="codeph">&lt;A&gt;</code>标记的字段。它还将可见标志设置为<code class="codeph">FALSE</code>以创建不可见的部分。
                           </p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'basicgroup'，'BASIC_SECTION_GROUP'）; ctx_ddl.add_field_section（'basicgroup'，'Author'，'A'，FALSE）;结束;</pre><p>由于“ <code class="codeph">Author</code>字段部分不可见，因此要在“ <code class="codeph">Author</code>部分中查找文本，必须使用<code class="codeph">WITHIN</code>运算符。
                           </p><pre class="oac_no_warn" dir="ltr">'（马丁路德金）在作者'</pre><p>没有<code class="codeph">WITHIN</code>运算符的<span class="italic">Martin Luther King的</span>查询不会在字段中返回此术语的实例。如果要在不指定<code class="codeph">WITHIN,</code>情况下查询字段部分中的文本<code class="codeph">WITHIN,</code>必须在创建部分时将visible标记设置为<code class="codeph">TRUE</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.add_field_section（'basicgroup'，'作者'，'A'，TRUE）;结束;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-426E9F80-530D-42B7-9C52-550EFCEDC720__GUID-20A3E460-9B15-444F-9C36-60F9AF2A042C">嵌套字段</p>
                           <p>您不能嵌套字段部分。例如，如果您将字段部分定义为以<code class="codeph">&lt;TITLE&gt;</code>开头并将另一个字段部分定义为以<code class="codeph">&lt;FOO&gt;,</code>开头<code class="codeph">&lt;FOO&gt;,</code> <span class="italic">则无法</span>按如下方式嵌套这两个部分：</p><pre class="oac_no_warn" dir="ltr">&lt;TITLE&gt; dog &lt;FOO&gt; cat &lt;/ FOO&gt; &lt;/ TITLE&gt;</pre><p>要使用嵌套节，请将它们定义为区域节。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-426E9F80-530D-42B7-9C52-550EFCEDC720__GUID-B5B2DB9A-F68F-4000-8D41-6953B954538C">重复的场部分</p>
                           <p>允许重复的字段部分，但<code class="codeph">WITHIN</code>查询将它们视为单个部分。以下是文档中重复字段的示例：</p><pre class="oac_no_warn" dir="ltr">&lt;TITLE&gt; cat &lt;/ TITLE&gt; &lt;TITLE&gt; dog &lt;/ TITLE&gt;</pre><p><span class="italic">标题中</span>的查询<span class="italic">dog和cat</span>返回文档，即使这些单词出现在不同的部分中。
                           </p>
                           <p>要让<code class="codeph">WITHIN</code>查询区分重复的部分，请将它们定义为区域部分。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CCAPP9300"></a><div class="props_rev_3"><a id="GUID-4F6F335C-CDC5-4B08-84F4-2439DD908DA0" name="GUID-4F6F335C-CDC5-4B08-84F4-2439DD908DA0"></a><h5 id="CCAPP-GUID-4F6F335C-CDC5-4B08-84F4-2439DD908DA0" class="sect5"><span class="enumeration_section">11.1.2.3</span>停止部分</h5>
                     <div>
                        <p>将停止节添加到自动节组时，自动节索引操作会忽略XML文档中的指定节。</p>
                        <div class="infoboxnote" id="GUID-4F6F335C-CDC5-4B08-84F4-2439DD908DA0__GUID-ECB85666-5497-4F7A-B93B-AF63D292D784">
                           <p class="notep1">注意：</p>
                           <p>添加停止部分不会导致在索引中创建部分信息。但是，停止部分中的文本始终是可搜索的。</p>
                        </div>
                        <p>当您的文档包含许多低信息标记时，添加停止部分非常有用。添加停止部分还可以提高自动部分组的索引性能。</p>
                        <p>您可以添加无限数量的停止部分。</p>
                        <p>停止部分没有部分名称，也没有记录在部分视图中。</p>
                     </div>
                  </div><a id="CCAPP9301"></a><div class="props_rev_3"><a id="GUID-58DBD861-FD45-4FE4-8862-7EA360BD9F71" name="GUID-58DBD861-FD45-4FE4-8862-7EA360BD9F71"></a><h5 id="CCAPP-GUID-58DBD861-FD45-4FE4-8862-7EA360BD9F71" class="sect5"><span class="enumeration_section">11.1.2.4</span> MDATA部分</h5>
                     <div>
                        <p>您可以使用<code class="codeph">MDATA</code>部分来引用文档的用户定义元数据。<code class="codeph">MDATA</code>部分可以加速混合查询，并且对查询中可以返回的<code class="codeph">MDATA</code>部分的数量没有限制。
                        </p>
                        <p>考虑您要根据文本内容和文档类型（杂志，报纸或小说）进行查询的情况。您可以使用文本列和文档类型列创建索引，然后对此表单执行混合查询。在这种情况下，使用短语<span class="italic">Adam Thorpe</span> （小说<span class="italic">Ulverton的</span>作者）搜索所有小说：</p><pre class="oac_no_warn" dir="ltr">SELECT id FROM documents WHERE doctype ='novel'AND CONTAINS（text，'Adam Thorpe'）&gt; 0;</pre><p>但是，在字段部分中合并属性（在本例中为文档类型）通常会更快，而不是使用单独的列，然后使用单个<code class="codeph">CONTAINS</code>查询。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT id FROM documents WHERE CONTAINS（text，'Adam Thorpe AND novel WITHIN doctype'）&gt; 0;</pre><p>这种方法有两个缺点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>每次更新属性时，都必须重新索引整个文本文档，从而导致索引碎片增加，数据操作语言（DML）处理速率降低。</p>
                           </li>
                           <li>
                              <p>字段部分标记部分值。标记化有几种效果。元数据中的特殊字符（如小数点或货币字符）不易搜索;价值搜索（寻找<span class="italic">约翰史密斯</span>而不是<span class="italic">约翰史密斯，Jr。</span> ）是困难的;通过短语查询多字值，这比单标记搜索慢;并且多行值不会显示在浏览的单词中，从而无法进行作者浏览或主题浏览。
                              </p>
                           </li>
                        </ul>
                        <p>出于这些原因，使用<code class="codeph">MDATA</code>部分而不是字段部分可能是值得的。<code class="codeph">MDATA</code>部分的索引类似于字段部分，但您可以在文档中添加和删除元数据值，而无需重新索引文档文本。与字段部分不同， <code class="codeph">MDATA</code>值不是标记化的。此外， <code class="codeph">MDATA</code>部分索引通常比字段部分索引占用更少的磁盘空间。
                        </p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始， <code class="codeph">MDATA</code>部分可以是可更新的或不可更新的，具体取决于其只读标记的值，可以设置为<code class="codeph">FALSE</code>或<code class="codeph">TRUE</code> 。</p>
                        <p>使用<code class="codeph">CTX_DDL.ADD_MDATA_SECTION</code>将<code class="codeph">MDATA</code>部分添加到部分组。默认情况下，只读<code class="codeph">MDATA</code>部分的值为<code class="codeph">FALSE.</code>这意味着您要允许为此<code class="codeph">MDATA</code>部分调用<code class="codeph">CTX_DDL.ADD_MDATA()</code>和<code class="codeph">CTX_DDL.REMOVE_MDATA()</code> ，否则可以将其设置为<code class="codeph">TRUE.</code>设置为<code class="codeph">FALSE,</code> <code class="codeph">MDATA</code>部分上的查询运行效率较低，因为必须在索引表上打开游标以跟踪该<code class="codeph">MDATA</code>部分的已删除值。这个例子添加了一个名为<code class="codeph">AUTHOR</code>的<code class="codeph">MDATA</code>部分，并为其赋予值<span class="italic">Soseki Natsume</span> （小说<span class="italic">Kokoro的</span>作者）。
                        </p><pre class="oac_no_warn" dir="ltr">ctx_ddl.create.section.group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_mdata_section（'htmgroup'，'author'，'Soseki Natsume'）;</pre><p>您可以使用<code class="codeph">CTX_DDL.ADD_MDATA,</code>更改<code class="codeph">MDATA</code>值<code class="codeph">CTX_DDL.ADD_MDATA,</code>并可以使用<code class="codeph">CTX_DDL.REMOVE_MDATA.</code>删除它们<code class="codeph">CTX_DDL.REMOVE_MDATA.</code>此外， <code class="codeph">MDATA</code>部分可以具有多个值。只有索引的所有者可以调用<code class="codeph">CTX_DDL.ADD_MDATA</code>和<code class="codeph">CTX_DDL.REMOVE_MDATA.</code></p>
                        <p>无论<code class="codeph">CTX_DDL.ADD_MDATA</code>也不<code class="codeph">CTX_DDL.REMOVE_MDATA</code>是支持<code class="codeph">CTXCAT</code>和<code class="codeph">CTXRULE</code>指标。
                        </p>
                        <p><code class="codeph">MDATA</code>值不通过词法分析器传递。相反，所有值都经过以下简化的规范化：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>删除值的前导和尾随空格。</p>
                           </li>
                           <li>
                              <p>该值被截断为255个字节。</p>
                           </li>
                           <li>
                              <p>该值被索引为单个值;如果值由多个单词组成，则不会被分解。</p>
                           </li>
                           <li>
                              <p>案件得以保留。如果文档是动态生成的，则可以通过大写<code class="codeph">MDATA</code>值并确保仅以大写形式搜索来实现不区分大小写。
                              </p>
                           </li>
                        </ul>
                        <p>将<code class="codeph">MDATA</code>元数据添加到文档后，可以使用<code class="codeph">CONTAINS</code>查询运算符查询该元数据：</p><pre class="oac_no_warn" dir="ltr">SELECT id FROM documents WHERE CONTAINS（text，'Tokyo and MDATA（author，Soseki Natsume）'）&gt; 0;</pre><p>仅当<code class="codeph">AUTHOR</code>标记具有确切值<span class="italic">Soseki Natsume</span> （在简化标记化之后）时，此查询才会成功。<span class="italic">Soseki</span>或<span class="italic">Natsume Soseki</span>没有返回任何行。
                        </p>
                        <p>以下是<code class="codeph">MDATA</code>注意事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">MDATA</code>值不可突出显示，不会出现在<code class="codeph">CTX_DOC.TOKENS,</code>的输出中<code class="codeph">CTX_DOC.TOKENS,</code>并且在启用<code class="codeph">FILTER PLAINTEXT.</code> <code class="codeph">CTX_DOC.TOKENS,</code>时不会出现<code class="codeph">FILTER PLAINTEXT.</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MDATA</code>部分在部分组中必须是唯一的。例如，不要将<code class="codeph">FOO</code>用作<code class="codeph">MDATA</code>部分的名称以及同一部分组中的区域或字段部分。
                              </p>
                           </li>
                           <li>
                              <p>与字段部分一样， <code class="codeph">MDATA</code>部分不能重叠或嵌套。 <code class="codeph">MDATA</code>部分由遇到的第一个标记隐式关闭。在这个例子中：</p><pre class="oac_no_warn" dir="ltr">&lt;作者&gt;狄更斯&lt;B&gt;雪莱&lt;/ B&gt;济慈&lt;/ AUTHOR&gt;</pre><p><code class="codeph">&lt;B&gt;</code>标签关闭<code class="codeph">AUTHOR</code> <code class="codeph">MDATA</code>部分;因此，本文件的<code class="codeph">AUTHOR</code>是“狄更斯”，但不是“雪莱”或“济慈”。
                              </p>
                           </li>
                           <li>
                              <p>为了防止竞争条件，每次调用<code class="codeph">ADD_MDATA</code>和<code class="codeph">REMOVE_MDATA</code>锁定该rowid对所有值和节的索引的其他调用。但是，由于<code class="codeph">ADD_MDATA</code>和<code class="codeph">REMOVE_MDATA</code>不提交，因此应用程序在调用它们时可能会出现死锁。应用程序有责任防止死锁。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-58DBD861-FD45-4FE4-8862-7EA360BD9F71__GUID-8D6385E8-3361-4D68-ACB0-C9C0475EF504">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../ccref/changes-in-this-release.html#CCREF-GUID-000FA75C-978F-40D3-A2FA-DA5C241C65A3" target="_blank"><span class="italic">Oracle Text Reference中的</span></a> <code class="codeph"><span class="q">"ALTER INDEX"</span></code></p>
                              </li>
                              <li>
                                 <p><a href="../ccref/changes-in-this-release.html#CCREF-GUID-000FA75C-978F-40D3-A2FA-DA5C241C65A3" target="_blank"><span class="italic">Oracle Text Reference中的</span></a> <code class="codeph"><span class="q">"ADD_MDATA_SECTION"</span></code> 
                                 </p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">MDATA</code>运算符的信息，请参阅<a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a>的<code class="codeph"><span class="q">"CONTAINS"</span></code>查询运算符章节</p>
                              </li>
                              <li>
                                 <p>有关添加和删除<code class="codeph">MDATA</code>部分的信息，请参阅<a href="../ccref/CTX_DDL-package.html#CCREF0600" target="_blank"><span class="italic">Oracle Text Reference</span></a>的<code class="codeph"><span class="q">"CTX_DDL"</span></code>包一章</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CCAPP9555"></a><div class="props_rev_3"><a id="GUID-22EEA9FE-6051-4314-92B2-9C67CE0D167D" name="GUID-22EEA9FE-6051-4314-92B2-9C67CE0D167D"></a><h5 id="CCAPP-GUID-22EEA9FE-6051-4314-92B2-9C67CE0D167D" class="sect5"><span class="enumeration_section">11.1.2.5</span> NDATA部分</h5>
                     <div>
                        <p>对于包含要为名称搜索建立索引的数据的字段，可以通过将<code class="codeph">NDATA</code>节添加到类型为<code class="codeph">BASIC_SECTION_GROUP,</code> <code class="codeph">HTML_SECTION_GROUP,</code>或<code class="codeph">XML_SECTION_GROUP.</code>节组中来专门指定它们<code class="codeph">XML_SECTION_GROUP.</code></p>
                        <p>用户可以使用两个可能的数据存储区合成包含名称数据的文本文档： <code class="codeph">MULTI_COLUMN_DATASTORE</code>或<code class="codeph">USER_DATASTORE.</code>以下示例使用<code class="codeph">MULTI_COLUMN_DATASTORE</code>来获取包含用于索引的名称数据的相关列：</p><pre class="oac_no_warn" dir="ltr">create table people（firstname varchar2（80），surname varchar2（80））;插入人的价值观（'约翰'，'史密斯'）;承诺;开始ctx_ddl.create_preference（'nameds'，'MULTI_COLUMN_DATASTORE'）; ctx_ddl.set_attribute（'nameds'，'columns'，'firstname，surname'）;结束; /</pre><p>此示例生成以下用于索引的虚拟文本：</p><pre class="oac_no_warn" dir="ltr">&lt;FIRSTNAME&gt; John &lt;/ FIRSTNAME&gt; &lt;SURNAME&gt; Smith &lt;/ SURNAME&gt;</pre><p>然后，您可以为<code class="codeph">FIRSTNAME</code>和<code class="codeph">SURNAME</code>部分创建<code class="codeph">NDATA</code>部分：</p><pre class="oac_no_warn" dir="ltr">begin ctx_ddl.create_section_group（'namegroup'，'BASIC_SECTION_GROUP'）; ctx_ddl.add_ndata_section（'namegroup'，'FIRSTNAME'，'FIRSTNAME'）; ctx_ddl.add_ndata_section（'namegroup'，'SURNAME'，'SURNAME'）;结束; /</pre><p>接下来，使用先前创建的数据存储区首选项和节组首选项创建索引：</p><pre class="oac_no_warn" dir="ltr">在人员（名字）上创建索引peopleidx indextype是ctxsys.context参数（'section group namegroup datastore nameds'）;</pre><p><code class="codeph">NDATA</code>部分支持基于字符和术语的限制的单字节和多字节数据。索引的<code class="codeph">NDATA</code>部分数据约束如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>单个以空格分隔的术语中的字符数：511</p>
                           </li>
                           <li>
                              <p>以空格分隔的术语数：255</p>
                           </li>
                           <li>
                              <p>字符总数，包括空格：511</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CCAPP9472"></a><div class="props_rev_3"><a id="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403" name="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403"></a><h5 id="CCAPP-GUID-F71A270E-4AFB-4B2C-B374-538566E5C403" class="sect5"><span class="enumeration_section">11.1.2.6</span> SDATA部分</h5>
                     <div>
                        <p>该<a id="d28756e2510" class="indexterm-anchor"></a><a id="d28756e2512" class="indexterm-anchor"></a><a id="d28756e2514" class="indexterm-anchor"></a><a id="d28756e2518" class="indexterm-anchor"></a><a id="d28756e2522" class="indexterm-anchor"></a><a id="d28756e2526" class="indexterm-anchor"></a><a id="d28756e2528" class="indexterm-anchor"></a><a id="d28756e2532" class="indexterm-anchor"></a><a id="d28756e2536" class="indexterm-anchor"></a><a id="d28756e2540" class="indexterm-anchor"></a> <code class="codeph">SDATA</code>部分的值与其他部分一样从文档文本中提取，但它被索引为结构化数据，也称为<code class="codeph">SDATA.</code> <code class="codeph">SDATA</code>部分支持投影，范围搜索和排序等操作。<code class="codeph">SDATA</code>部分还支持<code class="codeph">SDATA</code>索引段数据（例如嵌入式标记）和详细表或函数调用。您可以在一个SQL语句中执行文本和结构化搜索的各种组合。
                        </p>
                        <p>仅将<code class="codeph">SDATA</code>运算符用作也包含非<code class="codeph">SDATA</code>子<code class="codeph">SDATA</code>的<code class="codeph">AND</code>运算符的后代。<code class="codeph">SDATA</code>运营商旨在用作次要（检查或非驾驶）标准。例如，“查找具有价格&gt; 5的DOG的文档”，而不是“查找评级&gt; 4的文档”。
                        </p>
                        <p>使用<code class="codeph">CTX_DDL.ADD_SDATA_SECTION</code>将<code class="codeph">SDATA</code>部分添加到部分组。使用<code class="codeph">CTX_DDL.UPDATE_SDATA</code>更新现有<code class="codeph">SDATA</code>部分的值。在<code class="codeph">SDATA</code>部分中查询时，必须使用<code class="codeph">CONTAINS</code>运算符。下面的示例创建一个名为<code class="codeph">items,</code>的表<code class="codeph">items,</code>添加一个名为<code class="codeph">my_sec_group,</code>的<code class="codeph">SDATA</code>部分<code class="codeph">my_sec_group,</code>然后在该部分中查询<code class="codeph">SDATA</code> 。
                        </p>
                        <p>创建<code class="codeph">SDATA</code>部分后，可以使用<code class="codeph">CTX_DDL.SET_SECTION_ATTRIBUTE</code>进一步修改<code class="codeph">SDATA</code>部分的属性。</p>
                        <p>创建<code class="codeph">items</code>表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE项目（id NUMBER PRIMARY KEY，doc VARCHAR2（4000））; INSERT INTO项目价值（1，'&lt;描述&gt;本田Pilot &lt;/ description&gt; &lt;category&gt;汽车和卡车&lt;/ category&gt; &lt;price&gt; 27000 &lt;/ price&gt;'）; INSERT INTO项目价值（2，'&lt;描述&gt;丰田红杉&lt;/ description&gt; &lt;category&gt;汽车和卡车&lt;/ category&gt; &lt;price&gt; 35000 &lt;/ price&gt;'）; INSERT INTO项目价值（3，'&lt;描述&gt;丰田兰德酷路泽&lt;/ description&gt; &lt;category&gt;汽车和卡车&lt;/ category&gt; &lt;price&gt; 45000 &lt;/ price&gt;'）; INSERT INTO items VALUES（4，'&lt;description&gt; Palm Pilot &lt;/ description&gt; &lt;category&gt; Electronics &lt;/ category&gt; &lt;price&gt; 5 &lt;/ price&gt;'）; INSERT INTO items VALUES（5，'&lt;description&gt; Toyota Land Cruiser Grill &lt;/ description&gt; &lt;category&gt; Parts＆Accessories &lt;/ category&gt; &lt;price&gt; 100 &lt;/ price&gt;'）;承诺;</pre><p>添加<code class="codeph">my_sec_group</code> <code class="codeph">SDATA</code>部分：</p><pre class="oac_no_warn" dir="ltr">BEGIN CTX_DDL.CREATE_SECTION_GROUP（'my_sec_group'，'BASIC_SECTION_GROUP'）; CTX_DDL.ADD_SDATA_SECTION（'my_sec_group'，'category'，'category'，'VARCHAR2'）; CTX_DDL.ADD_SDATA_SECTION（'my_sec_group'，'price'，'price'，'NUMBER'）;结束;</pre><p>创建<code class="codeph">CONTEXT</code>索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX项目$ doc ON项目（doc）INDEXTYPE是CTXSYS.CONTEXT参数（'SECTION GROUP my_sec_group'）;</pre><p>运行查询：</p><pre class="oac_no_warn" dir="ltr">SELECT id，doc FROM FROM WHERE contains（doc，'Toyota AND SDATA（category =''Cars＆Trucks''）AND SDATA（price &lt;= 40000）'）&gt; 0;</pre><p>返回结果：</p><pre class="oac_no_warn" dir="ltr">ID DOC ---- -------------------------------------------- -------------------------- 2 &lt;description&gt; Toyota Sequoia &lt;/ description&gt; &lt;category&gt; Cars＆Trucks &lt;/ category&gt; &lt;price&gt; 35000 &lt;/价格&gt;</pre><p>考虑一个rowid为1的文档。此示例将<code class="codeph">price</code> <code class="codeph">SDATA</code>部分的值更新为新值30000：</p><pre class="oac_no_warn" dir="ltr">BEGIN SELECT ROWID INTO rowid_to_update FROM items WHERE id = 1; CTX_DDL.UPDATE_SDATA（'items $ doc'，'price'，SYS.ANYDATA.CONVERTVARCHAR2（'30000'），rowid_to_update）;结束;</pre><p>执行查询后， <code class="codeph">Honda Pilot</code>的价格从27000变为30000。
                        </p>
                        <div class="infoboxnote" id="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403__GUID-5B810B7C-79CC-4234-94C1-5B8EC2747E83">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您还可以将<code class="codeph">SDATA</code>部分添加到现有索引。使用<code class="codeph">ALTER INDEX PARAMETERS</code>语句的<code class="codeph">ADD SDATA SECTION</code>参数。有关更多信息，请参阅<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-47E60252-C731-46A8-B587-AE30C1634F48" target="_blank"><span class="italic">Oracle Text Reference</span></a>的“ALTER INDEX”部分。
                                 </p>
                              </li>
                              <li>
                                 <p>在添加<code class="codeph">SDATA</code>部分之前编制索引的文档不会反映此新首选项。在这种情况下重建索引。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-F71A270E-4AFB-4B2C-B374-538566E5C403__GUID-BAC8590F-7D24-4D69-BBF7-AAF83041C8D9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">SDATA</code>运算符的信息，请参阅<a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a>的“ <code class="codeph">CONTAINS</code> ”查询部分</p>
                              </li>
                              <li>
                                 <p><a href="../ccref/CTX_DDL-package.html#CCREF0600" target="_blank"><span class="italic">Oracle Text Reference</span></a>的“ <code class="codeph">CTX_DDL</code> ”包部分，了解有关添加和更新<code class="codeph">SDATA</code>部分以及使用<code class="codeph">ADD_SDATA_SECTION</code> ， <code class="codeph">SET_SECTION_ATTRIBUTE</code>和<code class="codeph">UPDATE_SDATA</code>过程更改其属性的<code class="codeph">UPDATE_SDATA</code></p>
                              </li>
                           </ul>
                        </div>
                        <p><span class="bold">存储</span></p>
                        <p>对于<code class="codeph">optimized_for</code>搜索<code class="codeph">SDATA</code>节，请使用<code class="codeph">CTX_DDL.SET_ATTRIBUTE</code>指定<code class="codeph">$S <span class="codeinlineitalic">datatype</span></code>表的存储首选项以及这些表的索引。
                        </p>
                        <p>默认情况下，对于<code class="codeph">$S*</code>表启用大对象（LOB）缓存，对<code class="codeph">$S*</code>索引启用关闭。这些属性仅在<code class="codeph">SDATA</code>部分有效。
                        </p>
                        <p><span class="bold">查询运算符</span></p>
                        <p><code class="codeph">optimized_for search SDATA</code>支持以下查询运算符：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>=</p>
                           </li>
                           <li>
                              <p>&lt;&gt;</p>
                           </li>
                           <li>
                              <p>之间</p>
                           </li>
                           <li>
                              <p>不在之间</p>
                           </li>
                           <li>
                              <p>&lt;=</p>
                           </li>
                           <li>
                              <p>&lt;</p>
                           </li>
                           <li>
                              <p>&gt; =</p>
                           </li>
                           <li>
                              <p>&gt;</p>
                           </li>
                           <li>
                              <p>一片空白</p>
                           </li>
                           <li>
                              <p>不是空的</p>
                           </li>
                           <li>
                              <p>喜欢</p>
                           </li>
                           <li>
                              <p>不喜欢</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CCAPP9303"></a><div class="props_rev_3"><a id="GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F" name="GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F"></a><h5 id="CCAPP-GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F" class="sect5"><span class="enumeration_section">11.1.2.7</span>属性部分</h5>
                     <div>
                        <p>您可以定义属性部分以查询XML属性文本。您还可以让系统自动为您定义和索引XML属性。</p>
                        <div class="infoboxnotealso" id="GUID-CD1BE817-6122-4EF7-A664-DEB7667C4B5F__GUID-03D76EEE-3C07-4227-8170-09E200A3AA7D">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="searching-document-sections-in-oracle-text.html#GUID-8D535B14-B377-4766-A062-1DA912438E23">使用Oracle Text搜索XML部分</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9516"></a><a id="CCAPP9304"></a><div class="props_rev_3"><a id="GUID-2F7732AB-2AE4-496F-BC0A-37FAF21FC043" name="GUID-2F7732AB-2AE4-496F-BC0A-37FAF21FC043"></a><h5 id="CCAPP-GUID-2F7732AB-2AE4-496F-BC0A-37FAF21FC043" class="sect5"><span class="enumeration_section">11.1.2.8</span>特节</h5>
                     <div>
                        <p>标签无法识别特殊部分。目前，句子和段落是唯一受支持的特殊部分，它们使您能够搜索句子或段落中的单词组合。</p>
                        <p>句子和段落边界由词法分析器确定。例如， <code class="codeph">BASIC_LEXER</code>识别句子和段落部分边界，如下所示：</p>
                        <div class="tblformal" id="GUID-2F7732AB-2AE4-496F-BC0A-37FAF21FC043__GUID-C2295E0F-20F6-4E54-9C17-994C8979D217">
                           <p class="titleintable">表11-3 BASIC_LEXER的句子和段落部分边界</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="BASIC_LEXER的句子和段落部分边界" width="100%" border="1" summary="This table shows sentence and paragraph section boundaries for BASIC_LEXER." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d28756e2974">特节</th>
                                    <th align="left" valign="bottom" width="69%" id="d28756e2977">边界</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d28756e2982" headers="d28756e2974 ">
                                       <p>句子</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d28756e2982 d28756e2977 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>WORD / PUNCT / WHITESPACE</p>
                                          </li>
                                          <li>
                                             <p>WORD / PUNCT / NEWLINE</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d28756e2994" headers="d28756e2974 ">
                                       <p>段</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d28756e2994 d28756e2977 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>WORD / PUNCT / NEWLINE / WHITESPACE</p>
                                          </li>
                                          <li>
                                             <p>WORD / PUNCT / NEWLINE / NEWLINE</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果词法分析器无法识别边界，则不会对句子或段落部分编制索引。</p>
                        <p>要添加特殊部分，请使用<code class="codeph">CTX_DDL</code> 。 <code class="codeph">ADD_SPECIAL_SECTION</code>程序。例如，以下代码允许在HTML文档中的句子内进行搜索：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_special_section（'htmgroup'，'SENTENCE'）;结束;</pre><p>要启用区域和句子搜索，请将区域部分添加到组中。以下示例将<code class="codeph">Headline</code>区域部分添加到<code class="codeph">htmgroup</code>部分组：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_special_section（'htmgroup'，'SENTENCE'）; ctx_ddl.add_zone_section（'htmgroup'，'标题'，'H1'）;结束;</pre></div>
                  </div>
               </div><a id="CCAPP9557"></a><a id="CCAPP9556"></a><div class="props_rev_3"><a id="GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7" name="GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7"></a><h4 id="CCAPP-GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7" class="sect4"><span class="enumeration_section">11.1.3</span> Oracle文本部分属性</h4>
                  <div>
                     <p>Section属性是标记化类型的Oracle Text部分的设置，例如field，zone，hybrid和<code class="codeph">SDATA.</code>由于在节级别而不是在文档级别或索引级别进行更精细的控制，节属性可以提高查询性能。
                     </p>
                     <p>通过使用section属性，您可以指定：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Lexer对文档某些部分的偏好。当包含部件名称的文档部分需要与文档的其余部分不同时，首选项对部件名称搜索很有用。您还可以使用词法分析器首选项来处理多语言文档，其中有一个语言映射部分。</p>
                        </li>
                        <li>
                           <p>仅在文档的某些部分上的子字符串索引。此索引有助于减小索引大小。</p>
                        </li>
                        <li>
                           <p>仅在文档的某些部分上添加前缀标记。前缀令牌可提高右截断查询的性能，但也可能导致索引大小快速增长。仅在某些部分指定前缀索引可以为特定部分上的右截断查询提供改进的性能，而不会快速增加索引的大小。</p>
                        </li>
                        <li>
                           <p>对文档的某些部分进行停止列表。</p>
                        </li>
                        <li>
                           <p>一种新的部分类型，它将区域部分的灵活性与字段部分的性能相结合。目前，与现场部分相比，区域部分的性能较差。但是，字段部分不支持嵌套部分搜索。</p>
                        </li>
                     </ul>
                     <p>要设置节属性，请使用<code class="codeph">CTX_DDL.SET_SECTION_ATTRIBUTE</code>过程。
                     </p>
                     <p><a href="searching-document-sections-in-oracle-text.html#GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7__CACBGCHA" title="此表显示了可以使用的各种类型的节类型。">表11-4</a> <a id="d28756e3124" class="indexterm-anchor"></a><a id="d28756e3128" class="indexterm-anchor"></a><a id="d28756e3132" class="indexterm-anchor"></a>列出您可以使用的部分属性：</p>
                     <div class="tblformal" id="GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7__CACBGCHA">
                        <p class="titleintable">表11-4部分属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="部分属性" width="100%" border="1" summary="This table shows the various types of section types you can use." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="36%" id="d28756e3147">部分属性</th>
                                 <th align="left" valign="bottom" width="64%" id="d28756e3150">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d28756e3155" headers="d28756e3147 ">
                                    <p><code class="codeph">可见</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d28756e3155 d28756e3150 ">
                                    <p>对于标记化的所有节类型，使用<code class="codeph">visible</code>属性，区域节类型除外。因此， <code class="codeph">visible</code>属性可用于field，hybrid和<code class="codeph">SDATA</code>节类型。
                                    </p>
                                    <p>指定<code class="codeph">TRUE</code>以使文本在文档中可见。字段部分中的文本被索引为封闭文档的一部分。
                                    </p>
                                    <p>默认值为<code class="codeph">FALSE</code> 。字段部分中的文本与文档的其余部分分开编制索引。
                                    </p>
                                    <p>对于“字段”部分类型，visible属性将覆盖<code class="codeph">CTX_DDL.ADD_FIELD_SECTION</code>过程中指定的值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d28756e3187" headers="d28756e3147 ">
                                    <p><code class="codeph">词法分析器</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d28756e3187 d28756e3150 ">
                                    <p>对所有标记化的节类型（字段，区域，混合和<code class="codeph">SDATA</code>节）使用<code class="codeph">lexer</code>属性。
                                    </p>
                                    <p>指定词法分析器首选项名称以确定SDATA部分的标记化。默认值为<code class="codeph">NULL,</code>并使用主文档的词法分析器。
                                    </p>
                                    <p>在调用<code class="codeph">set_section_attribute</code>过程时，词法分析器首选项必须有效。如果在现有字段部分引用词法分析器首选项时尝试删除其中一个首选项，则<code class="codeph">drop_preference</code>过程将失败。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d28756e3214" headers="d28756e3147 ">
                                    <p><code class="codeph">词汇表</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d28756e3214 d28756e3150 ">
                                    <p>对所有标记化的节类型（字段，区域，混合和<code class="codeph">SDATA</code>节）使用<code class="codeph">wordlist</code>属性。
                                    </p>
                                    <p>要启用特定于节的索引和子字符串索引，请为节指定wordlist首选项名称。默认值为<code class="codeph">NULL,</code>并使用主文档的词表。
                                    </p>
                                    <p>在调用<code class="codeph">set_section_attribute</code>过程时，wordlist首选项必须有效。如果在现有字段部分引用词表首选项时尝试删除其中一个首选项，则<code class="codeph">drop_preference</code>过程将失败。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d28756e3241" headers="d28756e3147 ">
                                    <p><code class="codeph">终止列表</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d28756e3241 d28756e3150 ">
                                    <p>对所有标记化的节类型（字段，区域，混合和<code class="codeph">SDATA</code>节）使用<code class="codeph">stoplist</code>属性。
                                    </p>
                                    <p>要启用特定于部分的停止列表，请指定停止列表首选项名称。默认值为<code class="codeph">NULL,</code>并使用主文档的停止列表。
                                    </p>
                                    <p>在调用<code class="codeph">set_section_attribute</code>过程时， <code class="codeph">set_section_attribute</code>首选项必须有效。如果在现有字段部分引用停止列表首选项时尝试删除其中一个首选项，则<code class="codeph">drop_preference</code>过程将失败。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>以下示例启用Field部分的<code class="codeph">visible</code>属性：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'fieldgroup'，'BASIC_SECTION_GROUP'）; ctx_ddl.add_field_section（'fieldgroup'，'author'，'AUTHOR'）; ctx_ddl.set_section_attribute（'fieldgroup'，'author'，'visible'，'true'）;结束;</pre><div class="infoboxnotealso" id="GUID-4C591F14-29A8-47CF-AD3B-AD84F919F3A7__GUID-D0818B4A-338D-4978-B048-1A576D45DF3F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a> ，了解<code class="codeph">CTX_DDL.SET_SECTION_ATTRIBUTE</code>过程的语法。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="CCAPP9305"></a><div class="props_rev_3"><a id="GUID-2F7B1652-42FB-4A0A-A37F-652DDCB82182" name="GUID-2F7B1652-42FB-4A0A-A37F-652DDCB82182"></a><h3 id="CCAPP-GUID-2F7B1652-42FB-4A0A-A37F-652DDCB82182" class="sect3"><span class="enumeration_section">11.2</span> HTML部分使用Oracle Text搜索</h3>
               <div>
                  <p>HTML具有标记文本形式的内部结构，您可以使用它进行部分搜索。例如，为<code class="codeph">&lt;H1&gt;</code>标记定义名为<code class="codeph">headings</code>的部分，然后仅在文档集中的这些标记内搜索术语。
                  </p>
                  <p>要进行查询，请使用<code class="codeph">WITHIN</code>运算符。Oracle Text会在<code class="codeph">headings</code>部分中返回包含查询字词的所有文档。例如，如果要查找<code class="codeph">headings,</code>中包含单词<code class="codeph">oracle</code>所有文档<code class="codeph">headings,</code>输入以下查询：</p><pre class="oac_no_warn" dir="ltr">'标题中的oracle'</pre><p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-407F6C32-D2C7-45A7-8B36-A6C8DBB2C6BC">创建HTML部分</a></p>
                     </li>
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-8BF45F86-6AFD-4BA2-A1DB-7F08D39A7E75">搜索HTML元标记</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9306"></a><div class="props_rev_3"><a id="GUID-407F6C32-D2C7-45A7-8B36-A6C8DBB2C6BC" name="GUID-407F6C32-D2C7-45A7-8B36-A6C8DBB2C6BC"></a><h4 id="CCAPP-GUID-407F6C32-D2C7-45A7-8B36-A6C8DBB2C6BC" class="sect4"><span class="enumeration_section">11.2.1</span>创建HTML部分</h4>
                  <div>
                     <p>以下代码定义了名为<code class="codeph">htmgroup</code>的类型为<code class="codeph">HTML_SECTION_GROUP.</code>的节组<code class="codeph">HTML_SECTION_GROUP.</code>然后它在<code class="codeph">htmgroup</code>创建一个区域部分，名为由<code class="codeph">&lt;H1&gt;</code>标记标识的<code class="codeph">heading</code> ：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_zone_section（'htmgroup'，'heading'，'H1'）;结束;</pre><p>然后，您可以按如下方式索引文档：</p><pre class="oac_no_warn" dir="ltr">在docs上创建索引myindex（htmlfile）indextype是ctxsys.context参数（'filter ctxsys.null_filter section group htmgroup'）;</pre><p>使用<code class="codeph">htmgroup</code>部分组建立索引后，您可以通过发出以下查询在<code class="codeph">heading</code>部分中进行查询：</p><pre class="oac_no_warn" dir="ltr">'Oracle WITHIN标题'</pre></div>
               </div><a id="CCAPP9691"></a><a id="CCAPP9307"></a><div class="props_rev_3"><a id="GUID-8BF45F86-6AFD-4BA2-A1DB-7F08D39A7E75" name="GUID-8BF45F86-6AFD-4BA2-A1DB-7F08D39A7E75"></a><h4 id="CCAPP-GUID-8BF45F86-6AFD-4BA2-A1DB-7F08D39A7E75" class="sect4"><span class="enumeration_section">11.2.2</span>搜索HTML元标记</h4>
                  <div>
                     <p>使用HTML文档，您还可以在<code class="codeph">&lt;META&gt;</code>标记中为<code class="codeph">NAME/CONTENT</code>对创建部分。执行此操作时，您可以将搜索范围限制为<code class="codeph">CONTENT.</code>文本<code class="codeph">CONTENT.</code></p>
                     <div class="section">
                        <p>考虑具有以下<code class="codeph">META</code>标记的HTML文档：</p><pre class="oac_no_warn" dir="ltr">&lt;META NAME =“author”CONTENT =“ken”&gt;</pre><p>创建一个区域部分，索引其<code class="codeph">NAME</code>值为author的<code class="codeph">META</code>标记的所有<code class="codeph">CONTENT</code>属性：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'htmgroup'，'HTML_SECTION_GROUP'）; ctx_ddl.add_zone_section（'htmgroup'，'author'，'meta @ author'）;结束</pre><p>使用<code class="codeph">htmgroup</code>部分组建立索引后，您可以查询文档：</p><pre class="oac_no_warn" dir="ltr">'肯在作者'</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CCAPP9309"></a><div class="props_rev_3"><a id="GUID-8D535B14-B377-4766-A062-1DA912438E23" name="GUID-8D535B14-B377-4766-A062-1DA912438E23"></a><h3 id="CCAPP-GUID-8D535B14-B377-4766-A062-1DA912438E23" class="sect3"><span class="enumeration_section">11.3</span>使用Oracle Text搜索XML部分</h3>
               <div>
                  <p>与HTML文档一样，XML文档具有标记文本，您可以使用它们来定义分段搜索的文本块。您可以使用<code class="codeph">WITHIN</code>或<code class="codeph">INPATH</code>运算符搜索节的内容。
                  </p>
                  <p>以下部分描述了不同类型的XML搜索：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-46DC9D00-19DC-4B39-8D84-5D5E05288833">自动切片</a></p>
                     </li>
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-91B86C14-8744-4958-99C4-E65337AB0797">属性搜索</a></p>
                     </li>
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-DA44A63B-459D-43E4-B454-871ED8BD36D7">文件类型敏感部分</a></p>
                     </li>
                     <li>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-B06BB08F-831F-4FBB-A586-32487D45F132">路径部分搜索</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9310"></a><div class="props_rev_3"><a id="GUID-46DC9D00-19DC-4B39-8D84-5D5E05288833" name="GUID-46DC9D00-19DC-4B39-8D84-5D5E05288833"></a><h4 id="CCAPP-GUID-46DC9D00-19DC-4B39-8D84-5D5E05288833" class="sect4"><span class="enumeration_section">11.3.1</span>自动分段</h4>
                  <div>
                     <p>要设置索引操作以自动从XML文档创建节，请使用<code class="codeph">AUTO_SECTION_GROUP</code>节组。系统为XML标记创建区域部分。为具有属性的标记和表单<code class="codeph">tag@attribute.</code>指定的节创建属性部分<code class="codeph">tag@attribute.</code></p>
                     <p>例如，下面的语句使用<code class="codeph">AUTO_SECTION_GROUP</code>对含有XML文件的列创建<span class="italic">myindex</span>指数：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX myindex ON xmldocs（xmlfile）INDEXTYPE IS ctxsys.context PARAMETERS（'datastore ctxsys.default_datastore filter ctxsys.null_filter section group ctxsys.auto_section_group'）;</pre></div>
               </div><a id="CCAPP9311"></a><div class="props_rev_3"><a id="GUID-91B86C14-8744-4958-99C4-E65337AB0797" name="GUID-91B86C14-8744-4958-99C4-E65337AB0797"></a><h4 id="CCAPP-GUID-91B86C14-8744-4958-99C4-E65337AB0797" class="sect4"><span class="enumeration_section">11.3.2</span>属性搜索</h4>
                  <div>
                     <p>您可以通过以下两种方式之一搜索XML属性文本：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">创建属性部分</span></p>
                           <p>使用<code class="codeph">CTX_DDL</code>创建属性部分。 <code class="codeph">ADD_ATTR_SECTION</code>然后使用<code class="codeph">XML_SECTION_GROUP.</code>进行索引<code class="codeph">XML_SECTION_GROUP.</code>如果在索引时使用<code class="codeph">AUTO_SECTION_GROUP</code> ，则会自动创建属性部分。您可以使用<code class="codeph">WITHIN</code>运算符查询属性部分。
                           </p>
                           <p>考虑使用<code class="codeph">TITLE</code>属性定义<code class="codeph">BOOK</code>标记的XML文件：</p><pre class="oac_no_warn" dir="ltr">&lt;BOOK TITLE =“双城记”&gt;这是最好的时期。&lt;/ BOOK&gt;</pre><p>要将title属性定义为属性部分，请创建<code class="codeph">XML_SECTION_GROUP</code>并定义属性部分：</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'myxmlgroup'，'XML_SECTION_GROUP'）; ctx_ddl.add_attr_section（'myxmlgroup'，'booktitle'，'book @ title'）;结束;</pre><p>索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX myindex ON xmldocs（xmlfile）INDEXTYPE IS ctxsys.context PARAMETERS（'datastore ctxsys.default_datastore filter ctxsys.null_filter section group myxmlgroup'）;</pre><p>要查询<span class="italic">booktitle</span> XML属性部分：</p><pre class="oac_no_warn" dir="ltr">'书签中的城市'</pre></li>
                        <li>
                           <p><span class="bold">使用INPATH运算符搜索属性</span></p>
                           <p>使用<code class="codeph">INPATH</code>运算符索引<code class="codeph">PATH_SECTION_GROUP</code>和查询属性文本。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-91B86C14-8744-4958-99C4-E65337AB0797__GUID-CB165855-F347-48D1-B6A0-48C5CD2C349F">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="searching-document-sections-in-oracle-text.html#GUID-B06BB08F-831F-4FBB-A586-32487D45F132">路径部分搜索</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="CCAPP9314"></a><div class="props_rev_3"><a id="GUID-DA44A63B-459D-43E4-B454-871ED8BD36D7" name="GUID-DA44A63B-459D-43E4-B454-871ED8BD36D7"></a><h4 id="CCAPP-GUID-DA44A63B-459D-43E4-B454-871ED8BD36D7" class="sect4"><span class="enumeration_section">11.3.3</span>文件类型敏感部分</h4>
                  <div>
                     <p>对于包含为不同文档类型声明的<code class="codeph">&lt;book&gt;</code>标记的XML文档集，您可能希望为每种文档类型创建不同的book部分以提高搜索功能。以下方案说明如何为每种文档类型创建书籍部分。
                     </p>
                     <p>假设<code class="codeph">mydocname1</code>被声明为XML文档类型（根元素）：</p><pre class="oac_no_warn" dir="ltr">&lt;！DOCTYPE mydocname1 ...[...
</pre><p>在<code class="codeph">mydocname1,</code>声明了<code class="codeph">&lt;book&gt;</code>元素。对于此标记，您可以创建一个名为<code class="codeph">mybooksec1</code>的部分，该部分对标记的文档类型敏感：</p><pre class="oac_no_warn" dir="ltr">开始</pre><pre class="oac_no_warn" dir="ltr">ctx_ddl.create_section_group（'myxmlgroup'，'XML_SECTION_GROUP'）; ctx_ddl.add_zone_section（'myxmlgroup'，'mybooksec1'，'mydocname1（book）'）;</pre><pre class="oac_no_warn" dir="ltr">结束;</pre><p>假设<code class="codeph">mydocname2</code>被声明为另一个XML文档类型（根元素）：</p><pre class="oac_no_warn" dir="ltr">&lt;！DOCTYPE mydocname2 ...[...
</pre><p>在<code class="codeph">mydocname2,</code>声明了<code class="codeph">&lt;book&gt;</code>元素。对于此标记，您可以创建一个名为<code class="codeph">mybooksec2</code>的部分，该部分对标记的文档类型敏感：</p><pre class="oac_no_warn" dir="ltr">开始</pre><pre class="oac_no_warn" dir="ltr">ctx_ddl.create_section_group（'myxmlgroup'，'XML_SECTION_GROUP'）; ctx_ddl.add_zone_section（'myxmlgroup'，'mybooksec2'，'mydocname2（book）'）;</pre><pre class="oac_no_warn" dir="ltr">结束;</pre><p>要在<code class="codeph">mybooksec1</code>部分中查询，请使用<code class="codeph">WITHIN</code> ：</p><pre class="oac_no_warn" dir="ltr">'myraclesec1中的oracle'</pre></div>
               </div><a id="CCAPP9315"></a><div class="props_rev_3"><a id="GUID-B06BB08F-831F-4FBB-A586-32487D45F132" name="GUID-B06BB08F-831F-4FBB-A586-32487D45F132"></a><h4 id="CCAPP-GUID-B06BB08F-831F-4FBB-A586-32487D45F132" class="sect4"><span class="enumeration_section">11.3.4</span>路径段搜索</h4>
                  <div>
                     <p>XML文档可以具有父子标记结构，例如：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt; &lt;B&gt; &lt;C&gt;狗&lt;/ C&gt; &lt;/ B&gt; &lt;/A&gt;</pre><p>在这种情况下，标记C是标记B的子标记，它是标记A的子标记。</p>
                     <p>使用Oracle Text，您可以使用<code class="codeph">PATH_SECTION_GROUP.</code>搜索路径<code class="codeph">PATH_SECTION_GROUP.</code>此部分组使您可以在查询中指定直接父项，例如查找元素C中包含术语<span class="italic">dog的</span>所有文档，这是元素B的子项，依此类推。
                     </p>
                     <p>使用<code class="codeph">PATH_SECTION_GROUP,</code>您还可以执行属性值搜索和属性相等性测试。
                     </p>
                     <p>与此功能相关的新运算符是</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">INPATH</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">HASPATH</code></p>
                        </li>
                     </ul>
                     <p>本节包含以下主题。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-7C14AE2D-64AA-4459-8D62-2EAF5DBCF921">使用PATH_SECTION_GROUP创建索引</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-AC618E08-E422-4401-B654-2682DB8F4B1C">顶级标签搜索</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-71A48905-34EB-4392-A74E-E50CD66F4555">任意级别的标签搜索</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-B03DCEF8-1885-49CE-B4A2-8A742CE6C92A">直接亲子搜索</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-2EA144DC-21AF-4CC0-A7BE-43A75566AB9E">标签值测试</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-4794BF0E-9681-45DC-B674-98969DD09C94">属性搜索</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-D3AB31A4-C7BD-4575-A9B9-1A91C49DD7C5">属性值测试</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-6AC290D3-4FDB-43F7-ABA3-040EE4191D53">路径测试</a></p>
                        </li>
                        <li>
                           <p><a href="searching-document-sections-in-oracle-text.html#GUID-BAAF07B7-CD52-4082-BF6E-BCC05AF32146">使用HASPATH进行平等测试</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9316"></a><div class="props_rev_3"><a id="GUID-7C14AE2D-64AA-4459-8D62-2EAF5DBCF921" name="GUID-7C14AE2D-64AA-4459-8D62-2EAF5DBCF921"></a><h5 id="CCAPP-GUID-7C14AE2D-64AA-4459-8D62-2EAF5DBCF921" class="sect5"><span class="enumeration_section">11.3.4.1</span>使用PATH_SECTION_GROUP创建索引</h5>
                     <div>
                        <p>要启用路径部分搜索，请使用<code class="codeph">PATH_SECTION_GROUP.</code>索引XML文档集<code class="codeph">PATH_SECTION_GROUP.</code>例如：</p>
                        <p>创建首选项。</p><pre class="oac_no_warn" dir="ltr">开始ctx_ddl.create_section_group（'xmlpathgroup'，'PATH_SECTION_GROUP'）;结束;</pre><p>创建索引。</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX myindex ON xmldocs（xmlfile）INDEXTYPE IS ctxsys.context PARAMETERS（'datastore ctxsys.default_datastore filter ctxsys.null_filter section group xmlpathgroup'）;</pre><pre class="oac_no_warn" dir="ltr"></pre><p>创建索引时，可以使用<code class="codeph">INPATH</code>和<code class="codeph">HASPATH</code>运算符。
                        </p>
                     </div>
                  </div><a id="CCAPP9317"></a><div class="props_rev_3"><a id="GUID-AC618E08-E422-4401-B654-2682DB8F4B1C" name="GUID-AC618E08-E422-4401-B654-2682DB8F4B1C"></a><h5 id="CCAPP-GUID-AC618E08-E422-4401-B654-2682DB8F4B1C" class="sect5"><span class="enumeration_section">11.3.4.2</span>顶级标签搜索</h5>
                     <div>
                        <p>要在顶级标记<code class="codeph">&lt;A&gt;:</code>查找包含术语<span class="italic">dog的</span>所有文档<code class="codeph">&lt;A&gt;:</code></p><pre class="oac_no_warn" dir="ltr">狗INPATH（/ A）</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">狗INPATH（A）</pre></div>
                  </div><a id="CCAPP9318"></a><div class="props_rev_3"><a id="GUID-71A48905-34EB-4392-A74E-E50CD66F4555" name="GUID-71A48905-34EB-4392-A74E-E50CD66F4555"></a><h5 id="CCAPP-GUID-71A48905-34EB-4392-A74E-E50CD66F4555" class="sect5"><span class="enumeration_section">11.3.4.3</span>任意级别的标签搜索</h5>
                     <div>
                        <p>要在任何级别的<code class="codeph">&lt;A&gt;</code>标记中查找包含术语<span class="italic">dog的</span>所有文档：</p><pre class="oac_no_warn" dir="ltr">狗INPATH（// A）</pre><p>此查询查找以下文档：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt;狗&lt;/A&gt;</pre><p>和</p><pre class="oac_no_warn" dir="ltr">&lt;C&gt; &lt;B&gt; &lt;A&gt;狗&lt;/A&gt; &lt;/ B&gt; &lt;/ C&gt;</pre></div>
                  </div><a id="CCAPP9319"></a><div class="props_rev_3"><a id="GUID-B03DCEF8-1885-49CE-B4A2-8A742CE6C92A" name="GUID-B03DCEF8-1885-49CE-B4A2-8A742CE6C92A"></a><h5 id="CCAPP-GUID-B03DCEF8-1885-49CE-B4A2-8A742CE6C92A" class="sect5"><span class="enumeration_section">11.3.4.4</span>直接亲子搜索</h5>
                     <div>
                        <p>要在B元素中查找包含术语<span class="italic">dog的</span>所有文档，该元素是顶级A元素的直接子元素：</p><pre class="oac_no_warn" dir="ltr">狗INPATH（A / B）</pre><p>此查询查找以下XML文档：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt; &lt;B&gt;我的狗很友好。&lt;/ B&gt; &lt;/A&gt;</pre><p>但它找不到：</p><pre class="oac_no_warn" dir="ltr">&lt;C&gt; &lt;B&gt;我的狗很友善。&lt;/ B&gt; &lt;/ C&gt;</pre></div>
                  </div><a id="CCAPP9320"></a><div class="props_rev_3"><a id="GUID-2EA144DC-21AF-4CC0-A7BE-43A75566AB9E" name="GUID-2EA144DC-21AF-4CC0-A7BE-43A75566AB9E"></a><h5 id="CCAPP-GUID-2EA144DC-21AF-4CC0-A7BE-43A75566AB9E" class="sect5"><span class="enumeration_section">11.3.4.5</span>标签值测试</h5>
                     <div>
                        <p>您可以测试标签的值。例如，查询：</p><pre class="oac_no_warn" dir="ltr">狗INPATH（A [B =“狗”]）</pre><p>查找以下文档：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt; &lt;B&gt;狗&lt;/ B&gt; &lt;/A&gt;</pre><p>但没有找到：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt; &lt;B&gt;我的狗很友好。&lt;/ B&gt; &lt;/A&gt;</pre></div>
                  </div><a id="CCAPP9321"></a><div class="props_rev_3"><a id="GUID-4794BF0E-9681-45DC-B674-98969DD09C94" name="GUID-4794BF0E-9681-45DC-B674-98969DD09C94"></a><h5 id="CCAPP-GUID-4794BF0E-9681-45DC-B674-98969DD09C94" class="sect5"><span class="enumeration_section">11.3.4.6</span>属性搜索</h5>
                     <div>
                        <p>您可以搜索属性的内容。例如，查询：</p><pre class="oac_no_warn" dir="ltr">狗INPATH（// A / @ B）</pre><p>查找文档：</p><pre class="oac_no_warn" dir="ltr">&lt;C&gt; &lt;AB =“snoop dog”&gt; &lt;/A&gt; &lt;/ C&gt;</pre></div>
                  </div><a id="CCAPP9322"></a><div class="props_rev_3"><a id="GUID-D3AB31A4-C7BD-4575-A9B9-1A91C49DD7C5" name="GUID-D3AB31A4-C7BD-4575-A9B9-1A91C49DD7C5"></a><h5 id="CCAPP-GUID-D3AB31A4-C7BD-4575-A9B9-1A91C49DD7C5" class="sect5"><span class="enumeration_section">11.3.4.7</span>属性值测试</h5>
                     <div>
                        <p>您可以测试属性的值。例如，查询：</p><pre class="oac_no_warn" dir="ltr">加州INPATH（// [A = @ =“家庭住址”]）</pre><p>查找文档：</p><pre class="oac_no_warn" dir="ltr">&lt;AB =“家庭住址”&gt;美国加利福尼亚州旧金山&lt;/A&gt;</pre><p>但它没有找到：</p><pre class="oac_no_warn" dir="ltr">&lt;AB =“工作地址”&gt;美国加利福尼亚州旧金山&lt;/A&gt;</pre></div>
                  </div><a id="CCAPP9323"></a><div class="props_rev_3"><a id="GUID-6AC290D3-4FDB-43F7-ABA3-040EE4191D53" name="GUID-6AC290D3-4FDB-43F7-ABA3-040EE4191D53"></a><h5 id="CCAPP-GUID-6AC290D3-4FDB-43F7-ABA3-040EE4191D53" class="sect5"><span class="enumeration_section">11.3.4.8</span>路径测试</h5>
                     <div>
                        <p>您可以测试<code class="codeph">HASPATH</code>运算符是否存在路径。例如，查询：</p><pre class="oac_no_warn" dir="ltr">HASPATH（A / B / C）</pre><p>查找并返回文档的分数为100</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt; &lt;B&gt; &lt;C&gt;狗&lt;/ C&gt; &lt;/ B&gt; &lt;/A&gt;</pre><p>没有查询必须引用<span class="italic">狗</span> 。
                        </p>
                     </div>
                  </div><a id="CCAPP9324"></a><div class="props_rev_3"><a id="GUID-BAAF07B7-CD52-4082-BF6E-BCC05AF32146" name="GUID-BAAF07B7-CD52-4082-BF6E-BCC05AF32146"></a><h5 id="CCAPP-GUID-BAAF07B7-CD52-4082-BF6E-BCC05AF32146" class="sect5"><span class="enumeration_section">11.3.4.9</span>使用HASPATH进行平等测试</h5>
                     <div>
                        <p>您可以使用<code class="codeph">HASPATH</code>运算符进行截面质量测试。例如，请考虑以下查询：</p><pre class="oac_no_warn" dir="ltr">狗INPATH A.</pre><p>它发现：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt;狗&lt;/A&gt;</pre><p>但它也发现：</p><pre class="oac_no_warn" dir="ltr">&lt;A&gt;狗公园&lt;/A&gt;</pre><p>要将查询限制为术语<span class="italic">dog</span>而不是其他任何内容，可以使用<code class="codeph">HASPATH</code>运算符的节相等性测试。例如，</p><pre class="oac_no_warn" dir="ltr">HASPATH（A = “狗”）</pre><p>查找并仅为第一个文档返回分数100，而不是第二个文档。</p>
                        <div class="infoboxnotealso" id="GUID-BAAF07B7-CD52-4082-BF6E-BCC05AF32146__GUID-3D5DCCDD-4A30-423F-95AB-DCF3AC79B048">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解有关使用<code class="codeph">INPATH</code>和<code class="codeph">HASPATH</code>运算符的更多信息</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00232.using-DBFS.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用DBFS</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="creating-your-own-DBFS-store.html" title="Previous" type="text/html"></link>
      <link rel="next" href="LOB-demonstration-files.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-your-own-DBFS-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="LOB-demonstration-files.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-file-system.html" property="item" typeof="WebPage"><span property="name">数据库文件系统（DBFS）</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用DBFS</li>
            </ol>
            <a id="GUID-817DFDC2-7729-4CB6-BAE7-598E9B021DD8" name="GUID-817DFDC2-7729-4CB6-BAE7-598E9B021DD8"></a><a id="ADLOB0006"></a>
            
            <h2 id="ADLOB-GUID-817DFDC2-7729-4CB6-BAE7-598E9B021DD8" class="sect2"><span class="enumeration_chapter">25</span>使用DBFS</h2>
         </header>
         <div class="ind">
            <div>
               <p>DBFS文件系统实现包括创建和访问文件系统并对其进行管理。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-DBFS.html#GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA" title="DBFS是Oracle数据库安装的一部分，安装在ORACLE_HOME下。">DBFS安装</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37" title="DBFS文件系统可以是分区的或非分区的。它可能要求用户拥有某些特权。">创建DBFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513" title="您可以通过先决条件，访问接口，DBFS安全模型和XML DB服务器协议访问DBFS文件系统。">DBFS文件系统访问</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18" title="如果Oracle RAC集群中的某个数据库实例发生故障，dbfs_client程序可以故障转移到其他现有数据库实例之一。">DBFS管理</a></p>
                  </li>
                  <li>
                     <p><a href="using-DBFS.html#GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9" title="DBFS在线文件系统重组是一个功能强大的数据移动工具，具有这些优势。">收缩和重组DBFS文件系统</a></p>
                  </li>
               </ul>
            </div><a id="ADLOB45994"></a><div class="props_rev_3"><a id="GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA" name="GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA"></a><h3 id="ADLOB-GUID-E0712718-FD3F-40DF-8B5A-EC689B1C65DA" class="sect3">DBFS安装</h3>
               <div>
                  <p>DBFS是Oracle数据库安装的一部分，安装在<code class="codeph">ORACLE_HOME</code>下。</p>
                  <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code>包含以下DBFS实用程序脚本：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>内容API（CAPI）</p>
                     </li>
                     <li>
                        <p>SecureFiles商店（SFS）</p>
                     </li>
                  </ul>
                  <p><code class="codeph">$ORACLE_HOME/bin</code>包含：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">dbfs_client</code>可执行文件</p>
                     </li>
                  </ul>
                  <p><code class="codeph">$ORACLE_HOME/rdbms/admin</code>包含：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>内容存储库的SQL（ <code class="codeph">.plb</code>扩展名）脚本</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADLOB45995"></a><div class="props_rev_3"><a id="GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37" name="GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37"></a><h3 id="ADLOB-GUID-A4B1B3D5-7080-47EF-86C4-67D6E8F0FC37" class="sect3">创建DBFS文件系统</h3>
               <div>
                  <p>DBFS文件系统可以是分区的或非分区的。它可能要求用户拥有某些特权。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD" title="数据库用户必须具有创建文件系统的最小权限集。">创建DBFS文件系统所需的权限</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-D78E46D3-8C20-45E2-9418-D674EA45317B" title="您可以创建非分区或分区文件系统。分区是在DBFS中创建文件系统的最佳性能和最具可伸缩性的方式，并且是默认方式。">非分区与分区DBFS文件系统的优点</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62" title="您可以通过以具有DBFS管理员权限的用户身份登录来运行DBFS_CREATE_FILESYSTEM.SQL来创建文件系统。">创建非分区文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-8735D535-2E13-4702-95F9-01F931F2BF46" title="分区在数据库中创建多个物理段，文件在这些分区中随机分布。">创建分区文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020" title="您可以通过运行DBFS_DROP_FILESYSTEM.SQL来删除文件系统。">删除文件系统</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46187"></a><div class="props_rev_3"><a id="GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD" name="GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD"></a><h4 id="ADLOB-GUID-579C0D02-6F1F-4723-B1FA-674615E1F5FD" class="sect4">创建DBFS文件系统所需的权限</h4>
                  <div>
                     <p>数据库用户必须具有创建文件系统的最小权限集。</p>
                     <p>用户必须具有以下权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GRANT CONNECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">创建会话</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">RESOURCE</code> ， <code class="codeph">CREATE TABLE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">创建程序</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DBFS_ROLE</code></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB46188"></a><div class="props_rev_3"><a id="GUID-D78E46D3-8C20-45E2-9418-D674EA45317B" name="GUID-D78E46D3-8C20-45E2-9418-D674EA45317B"></a><h4 id="ADLOB-GUID-D78E46D3-8C20-45E2-9418-D674EA45317B" class="sect4">非分区与分区DBFS文件系统的优点</h4>
                  <div>
                     <p>您可以创建非分区或分区文件系统。分区是在DBFS中创建文件系统的最佳性能和最具可伸缩性的方式，并且是默认方式。</p>
                     <p>空间不能在分区之间共享，因此即使其他分区有空间，一个分区也可能用完空间。如果文件系统大小与单个文件的大小相比，这通常不是问题。但是，如果文件大小占文件系统大小的很大百分比，即使文件系统未满，也可能导致<code class="codeph">ENOSPC</code>错误。
                     </p>
                     <p>分区的另一个含义是<span class="italic">重命名</span>操作可能需要重写文件，如果文件很大，这可能很昂贵。
                     </p>
                  </div>
               </div><a id="ADLOB46189"></a><div class="props_rev_3"><a id="GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62" name="GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62"></a><h4 id="ADLOB-GUID-C66F22F9-1C95-41C4-8F32-EE46DF9E4A62" class="sect4">创建非分区文件系统</h4>
                  <div>
                     <p>您可以通过以具有DBFS管理员权限的用户身份登录来运行<code class="codeph">DBFS_CREATE_FILESYSTEM.SQL</code>来创建文件系统。
                     </p>
                     <div class="section">
                        <p>这些步骤使您可以创建文件系统。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录数据库实例：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem.sql <span class="italic">tablespace_name</span> <span class="italic">file_system_name</span>
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>例如，要在现有表空间<code class="codeph">dbfs_tbspc</code>创建名为<code class="codeph">staging_area</code>的文件系统：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">db_server</span> @ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem.sql dbfs_tbspc staging_area</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46190"></a><div class="props_rev_3"><a id="GUID-8735D535-2E13-4702-95F9-01F931F2BF46" name="GUID-8735D535-2E13-4702-95F9-01F931F2BF46"></a><h4 id="ADLOB-GUID-8735D535-2E13-4702-95F9-01F931F2BF46" class="sect4">创建分区文件系统</h4>
                  <div>
                     <p>分区在数据库中创建多个物理段，文件在这些分区中随机分布。</p>
                     <div class="section">
                        <p>您可以通过运行<code class="codeph">DBFS_CREATE_FILESYSTEM</code> <code class="codeph">_ADVANCED</code>来创建分区文件系统。以具有DBFS管理员权限的用户身份登录时的<code class="codeph">SQL</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录数据库实例：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem_advanced.sql tablespace_name <span class="italic">file_system_name</span> nocompress nodeduplicate noencrypt partition</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>例如，要在现有表空间<code class="codeph">dbfs_tbspc</code>创建名为<code class="codeph">staging_area</code>的分区文件系统：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span> @ $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem_advanced.sql dbfs_tbspc staging_area nocompress nodeduplicate noencrypt partition</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45996"></a><div class="props_rev_3"><a id="GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020" name="GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020"></a><h4 id="ADLOB-GUID-04EDEAFA-765A-44BA-98D6-B7DD415B9020" class="sect4">删除文件系统</h4>
                  <div>
                     <p>您可以通过运行<code class="codeph">DBFS_DROP_FILESYSTEM.SQL</code>来删除文件系统。</p>
                     <ol>
                        <li class="stepexpand"><span>登录数据库实例：</span><div><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">dbfs_user</span> / <span class="italic">@db_server</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / rdbms / admin / dbfs_drop_filesystem.sql <span class="italic"><code class="codeph">file_system_name</code></span>
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADLOB46191"></a><div class="props_rev_3"><a id="GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513" name="GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513"></a><h3 id="ADLOB-GUID-B03D476F-934D-4AD8-B4D7-493B1C0D7513" class="sect3">DBFS文件系统访问</h3>
               <div>
                  <p>您可以通过先决条件，访问接口，DBFS安全模型和XML DB服务器协议访问DBFS文件系统。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B" title="DBFS文件系统客户端（名为dbfs_client）在将使用某些先决条件访问DBFS文件系统的每个系统上运行。">DBFS客户端先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA" title="DBFS客户端命令行界面允许您直接访问存储在DBFS中的文件。">DBFS客户端命令行界面操作</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-6B646446-BD50-44CD-9C52-4B1039242910" title="您可以仅在Linux和Solaris中使用dbfs_client挂载DBFS。">DBFS安装接口（仅限Linux和Solaris）</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31">文件系统安全模型</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3">HTTP_ WebDAV_和FTP访问DBFS</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB45992"></a><div class="props_rev_3"><a id="GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B" name="GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B"></a><h4 id="ADLOB-GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B" class="sect4">DBFS客户端先决条件</h4>
                  <div>
                     <p>DBFS文件系统客户端（名为<code class="codeph">dbfs_client</code> ）在将使用某些先决条件访问DBFS文件系统的每个系统上运行。
                     </p>
                     <p>DBFS文件系统客户端<code class="codeph">dbfs_client</code>的先决条件是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">dbfs_</code> <code class="codeph">client</code>主机必须安装Oracle客户端库。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">dbfs_client</code>可以在Linux，Linux上使用DBFS命令接口用作直接RDBMS客户端。X64，Solaris，Solaris64，AIX，HPUX和Windows平台。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">dbfs_client</code>只能在Linux，Linux上用作挂载客户端。X64和Solaris 11平台。这需要以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">dbfs_client</code>主机必须安装<code class="codeph">FUSE</code> Linux软件包或Solaris <code class="codeph">libfuse</code>软件包。
                                 </p>
                              </li>
                              <li>
                                 <p>必须创建一个名为<code class="codeph">fuse</code>的组，其用户名作为成员运行<code class="codeph">dbfs_client</code> 。
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-A1D6C48E-E6AF-450A-8F0E-52FEBF06197B__NOTE-14334-DFF87B69">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="using-DBFS.html#GUID-6B646446-BD50-44CD-9C52-4B1039242910" title="您可以仅在Linux和Solaris中使用dbfs_client挂载DBFS。">DBFS挂载接口（仅限Linux和Solaris）</a>以获取更多详细信息。
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB46002"></a><div class="props_rev_3"><a id="GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA" name="GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA"></a><h4 id="ADLOB-GUID-F436D220-6BE5-4D72-BF2C-D59B343616CA" class="sect4">DBFS客户端命令行界面操作</h4>
                  <div>
                     <p>DBFS客户端命令行界面允许您直接访问存储在DBFS中的文件。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-456ECF58-F9B5-4F53-8111-B88079DE7650" title="DBFS客户端命令行界面允许您执行许多预定义的命令，例如从网络上的任何主机复制文件进出DBFS文件系统。">关于DBFS客户端命令行界面</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5" title="您可以通过提供路径名来创建内容存储库路径">创建内容存储路径</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28" title="您可以使用mkdir命令创建新目录。">创建目录</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA" title="您可以使用ls命令列出目录的内容。">列出目录</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-240F6913-94D1-4646-8130-8A3942298EE1" title="您可以使用cp命令将文件或目录从源位置复制到目标位置。">复制文件和目录</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A" title="您可以使用命令rm删除文件或目录。">删除文件和目录</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-456ECF58-F9B5-4F53-8111-B88079DE7650" name="GUID-456ECF58-F9B5-4F53-8111-B88079DE7650"></a><h5 id="ADLOB-GUID-456ECF58-F9B5-4F53-8111-B88079DE7650" class="sect5">关于DBFS客户端命令行界面</h5>
                     <div>
                        <p>DBFS客户端命令行界面允许您执行许多预定义的命令，例如从网络上的任何主机复制文件进出DBFS文件系统。</p>
                        <p></p>
                        <p>命令行界面的性能略高于DBFS客户端安装界面，因为它不会挂载文件系统，从而绕过用户空间文件系统。但是，它对应用程序不透明。</p>
                        <p>DBFS客户端安装接口允许通过文件系统安装点安装DBFS，从而通过通用文件系统操作提供对存储在DBFS中的文件的透明访问。</p>
                        <p>要运行DBFS命令，请为DBFS客户端指定<code class="codeph">--command</code> 。
                        </p>
                     </div>
                  </div><a id="ADLOB46192"></a><div class="props_rev_3"><a id="GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5" name="GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5"></a><h5 id="ADLOB-GUID-CF1B0455-8D24-44BA-9E74-167AC8A01FE5" class="sect5">创建内容存储路径</h5>
                     <div>
                        <p>您可以通过提供路径名来创建内容存储库路径</p>
                        <div class="section">
                           <p>所有DBFS内容存储路径必须以<code class="codeph">dbfs:</code> 。这是一个示例： <code class="codeph">dbfs:/staging_area/file1</code> 。指定的所有数据库路径名必须是绝对路径。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="bold">--command</span> <span class="italic">命令</span> [ <span class="italic">开关</span> ] [ <span class="italic">参数</span> ]</pre><p>哪里：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">command</code></span>是可执行命令，例如<code class="codeph">ls</code> ， <code class="codeph">cp</code> ， <code class="codeph">mkdir</code>或<code class="codeph">rm</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>特定于每个命令。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">arguments</code></span>是文件名或目录名，并且特定于每个命令。
                                 </p>
                              </li>
                           </ul>
                           <p>请注意， <code class="codeph">dbfs_client</code>在发生故障时返回非零值。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46007"></a><div class="props_rev_3"><a id="GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28" name="GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28"></a><h5 id="ADLOB-GUID-9022B3BF-FF83-4B71-85F1-449CDBF34B28" class="sect5">创建目录</h5>
                     <div>
                        <p>您可以使用<code class="codeph">mkdir</code>命令创建新目录。
                        </p>
                        <div class="section">
                           <p>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> --command mkdir <span class="italic">directory_name</span>
</pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">directory_name</code></span>是创建的目录的名称。例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command mkdir</span> dbfs：/ staging_area / dir1</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46004"></a><div class="props_rev_3"><a id="GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA" name="GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA"></a><h5 id="ADLOB-GUID-FD6E5F79-2DE5-4F4E-99D2-6AF7D571ECBA" class="sect5">列出目录</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ls</code>命令列出目录的内容。
                        </p>
                        <div class="section">
                           <p>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="bold">--command ls</span> [ <span class="italic">switches</span> ] <span class="italic">target</span>
</pre><p>哪里</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">target</code></span>是列出的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>是以下任意组合：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">-</code> <span class="italic"><code class="codeph">a</code></span>显示所有文件，包括“ <code class="codeph">.</code> '和' <code class="codeph">..</code>”。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">-</code> <span class="italic"><code class="codeph">l</code></span>显示长列表格式：每个文件的名称，文件类型，权限和大小。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">-</code> <span class="italic"><code class="codeph">R</code></span>递归地列出子目录。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command ls</span> dbfs：/ staging_area / dir1</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString --command ls -l -a -R dbfs：/ staging_area / dir1</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46005"></a><div class="props_rev_3"><a id="GUID-240F6913-94D1-4646-8130-8A3942298EE1" name="GUID-240F6913-94D1-4646-8130-8A3942298EE1"></a><h5 id="ADLOB-GUID-240F6913-94D1-4646-8130-8A3942298EE1" class="sect5">复制文件和目录</h5>
                     <div>
                        <p>您可以使用<code class="codeph">cp</code>命令将文件或目录从源位置复制到目标位置。
                        </p>
                        <div class="section">
                           <p><code class="codeph">cp</code>命令还支持目录的递归复制。
                           </p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="bold">--command cp</span> [ <span class="italic">switches</span> ] <code class="codeph">source</code> <code class="codeph">destination</code></pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">source</code></span>是源位置。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">destination</code></span>是目标位置。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>是<code class="codeph">-R</code>或<code class="codeph">-r</code> ，用于递归地将所有源内容复制到目标目录中的选项。
                                 </p>
                              </li>
                           </ul>
                           <p>以下示例将本地目录的内容（ <code class="codeph">01-01-10-dump</code>递归复制到<code class="codeph">01-01-10-dump</code>的目录中：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command cp</span> -R 01-01-10-dump dbfs：/ staging_area /</pre><p>以下示例将文件<code class="codeph">hello.txt</code>从DBFS复制到本地文件<code class="codeph">Hi.txt</code> ：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString <span class="bold">--command cp</span> dbfs：/staging_area/hello.txt Hi.txt</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46006"></a><div class="props_rev_3"><a id="GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A" name="GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A"></a><h5 id="ADLOB-GUID-FD1B94B7-57A3-4A53-9C46-ACB75A348B7A" class="sect5">删除文件和目录</h5>
                     <div>
                        <p>您可以使用命令<code class="codeph">rm</code>删除文件或目录。
                        </p>
                        <div class="section">
                           <p>命令<code class="codeph">rm</code>还支持递归删除目录。
                           </p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> --command rm [ <span class="italic">switches</span> ] <span class="italic">target</span>
</pre><p>哪里：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">target</code></span>是列出的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">switches</code></span>是<code class="codeph">-R</code>或<code class="codeph">-r</code> ，递归删除所有内容的选项。
                                 </p>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString --command rm dbfs：/staging_area/srcdir/hello.txt</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString --command rm -R dbfs：/ staging_area / dir1</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB45997"></a><div class="props_rev_3"><a id="GUID-6B646446-BD50-44CD-9C52-4B1039242910" name="GUID-6B646446-BD50-44CD-9C52-4B1039242910"></a><h4 id="ADLOB-GUID-6B646446-BD50-44CD-9C52-4B1039242910" class="sect4">DBFS安装接口（仅限Linux和Solaris）</h4>
                  <div>
                     <p>您可以<code class="codeph">dbfs_client</code>在Linux和Solaris中使用<code class="codeph">dbfs_client</code>挂载DBFS。
                     </p>
                     <p>说明指出了Linux和Solaris平台的不同要求。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183" title="如果安装FUSE，则可以在Solaris 11 SRU7及更高版本中将dbfs_client用作装入客户端">在Solaris 11 SRU7及更高版本上安装FUSE</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630" title="您可以通过运行dbfs_client程序来装入DBFS存储。">挂载DBFS存储</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2" title="在Solaris上，用户必须具有Solaris权限PRIV_SYS_MOUNT才能对DBFS文件系统执行装入和卸载操作。">特定于Solaris的权限</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64" title="Solaris和Linux的dbfs_client mount命令使用特定语法。">关于Solaris和Linux的Mount命令</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4" title="配置各种环境变量后，可以使用钱包挂载文件系统。">使用电子钱包挂载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54" title="您可以使用dbfs_client挂载文件系统。">在命令提示符下使用密码挂载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2" title="您可以使用从文件中读取的密码安装文件系统。">使用从文件读取的密码挂载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB" title="在Linux中，您可以运行fusermount来卸载文件系统。">卸载文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B" title="在Linux中，您可以配置fstab实用程序以使用dbfs_client来装入DBFS文件系统。">通过适用于Linux的fstab实用程序安装DBFS</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F">通过适用于Solaris的vfstab实用程序安装DBFS</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728">对挂载文件系统的限制</a></p>
                        </li>
                     </ul>
                  </div><a id="ADLOB46193"></a><div class="props_rev_3"><a id="GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183" name="GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183"></a><h5 id="ADLOB-GUID-0FA47FD4-B4CA-4365-9519-7C70F9DA3183" class="sect5">在Solaris 11 SRU7及更高版本上安装FUSE</h5>
                     <div>
                        <p>如果安装<code class="codeph">FUSE</code> ，则可以在Solaris 11 SRU7及更高版本<code class="codeph">dbfs_client</code>用作装入客户端</p>
                        <div class="section">
                           <p>安装<code class="codeph">FUSE</code>以在Solaris 11 SRU7及更高版本<code class="codeph">dbfs_client</code>用作装入客户端。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>以<code class="codeph">root</code>身份运行以下程序包。
                                 </p><pre class="oac_no_warn" dir="ltr">pkg安装libfuse</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB45998"></a><div class="props_rev_3"><a id="GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630" name="GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630"></a><h5 id="ADLOB-GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630" class="sect5">挂载DBFS存储</h5>
                     <div>
                        <p>您可以通过运行<code class="codeph">dbfs_client</code>程序来装入DBFS存储。
                        </p>
                        <div class="section">
                           <p>运行<code class="codeph">dbfs_client</code>程序。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>确保<code class="codeph">LD_LIBRARY_PATH</code>具有到Oracle客户端库的正确路径。</span></li>
                           <li><span>运行<code class="codeph">dbfs_client</code>程序。</span></li>
                        </ol>
                        <div class="section">
                           <p>在卸载文件系统之前， <code class="codeph">dbfs_client</code>程序不会返回。
                           </p>
                           <div class="infoboxnotealso" id="GUID-257CA83F-3AEC-45C9-A5D6-8B487FE43630__USINGORACLEWALLETWITHDBFSCLIENTFORT-DFF8A2A0">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02">将Oracle Wallet与DBFS Client配合使用可获得</a>最安全的密码指定方法</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46194"></a><div class="props_rev_3"><a id="GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2" name="GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2"></a><h5 id="ADLOB-GUID-04B0BDF1-43D6-41DB-BC9C-95E9D90778D2" class="sect5">特定于Solaris的权限</h5>
                     <div>
                        <p>在Solaris上，用户必须具有Solaris权限<code class="codeph">PRIV_SYS_MOUNT</code>才能对DBFS文件系统执行装入和卸载操作。
                        </p>
                        <p>为用户提供Solaris权限<code class="codeph">PRIV_SYS_MOUNT</code> 。
                        </p>
                        <ol>
                           <li>
                              <p>编辑<code class="codeph">/etc/user_attr</code> 。
                              </p>
                           </li>
                           <li>
                              <p>添加或修改用户条目（假设用户是Oracle），如下所示：</p><pre class="oac_no_warn" dir="ltr">oracle :::: type = normal; project = group.dba; defaultpriv = basic，priv_sys_mount ;; auth s = solaris.smf。*</pre></li>
                        </ol>
                     </div>
                  </div><a id="ADLOB46195"></a><div class="props_rev_3"><a id="GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64" name="GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64"></a><h5 id="ADLOB-GUID-4D1F748B-D6EF-48CA-B037-A42A7D295B64" class="sect5">关于Solaris和Linux的Mount命令</h5>
                     <div>
                        <p>Solaris和Linux的<code class="codeph">dbfs_client</code> mount命令使用特定语法。
                        </p>
                        <p>句法：</p><pre class="oac_no_warn" dir="ltr">dbfs_client <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="italic">[</span> -o <span class="italic">option_1</span> -o <span class="italic">option_2</span> <span class="italic">...</span> <span class="italic">]</span> <span class="italic">mount_point</span>
</pre><p>强制参数是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">db_user</code></span>是拥有DBFS内容存储库文件系统的数据库用户的名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">db_server</code></span>是Oracle数据库服务器的有效连接字符串，例如<code class="codeph">hrdb_host:1521/hrservice</code> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">mount_point</code></span>是数据库文件系统的安装路径。请注意，数据库用户拥有的所有文件系统在安装点都可见。
                              </p>
                           </li>
                        </ul>
                        <p>选项是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">direct_io</code> ：绕过OS页面缓存并为大文件提供改进的性能。使用此选项无法执行文件系统中的程序。当DBFS用作ETL临时区域时，Oracle建议使用此选项。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">wallet</code> ：在后台运行DBFS客户端。必须配置电子钱包以获取其凭据。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">failover</code> ：将DBFS客户端<code class="codeph">failover</code>到幸存的数据库实例而不会丢失数据。预计写入会产生一些性能成本，特别是对于小文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">allow_root</code> ：允许root用户访问文件系统。您必须在<code class="codeph">/etc/fuse.conf</code>配置文件中设置<code class="codeph">user_allow_other</code>参数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">allow_other</code> ：允许其他用户访问文件系统。您必须在<code class="codeph">/etc/fuse.conf</code>配置文件中设置<code class="codeph">user_allow_other</code>参数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">rw</code> ：将文件系统挂载为读写。这是默认设置。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ro</code> ：以只读方式挂载文件系统。文件无法修改。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">trace_level=</code> <span class="italic"><code class="codeph">n</code></span>设置跟踪级别。跟踪级别为：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">1调试</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">2 INFO</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">3警告</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">4 ERROR</code> ：默认跟踪级别。它仅在发生错误时输出诊断信息。建议始终启用此跟踪级别。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">5关键</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">trace_file=STR</code> ：指定跟踪日志文件，其中<code class="codeph">STR</code>可以是<span class="italic"><code class="codeph">file_name</code></span>或<code class="codeph">syslog</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">trace_size=</code> <span class="italic"><code class="codeph">trcfile_size</code></span> ：以MB <code class="codeph">trace_size=</code> <span class="italic"><code class="codeph">trcfile_size</code></span>指定跟踪文件的大小。默认情况下， <code class="codeph">dbfs_client</code>在两个10MB文件之间轮换跟踪输出。为<code class="codeph">trace_size</code>指定<code class="codeph">0</code> <code class="codeph">trace_size</code>跟踪文件的最大大小设置为无限制。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADLOB46196"></a><div class="props_rev_3"><a id="GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4" name="GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4"></a><h5 id="ADLOB-GUID-F959E952-C82E-4BEF-96C8-DC17A745D7F4" class="sect5">使用电子钱包挂载文件系统</h5>
                     <div>
                        <p>配置各种环境变量后，可以使用钱包挂载文件系统。</p>
                        <div class="section">
                           <p>在装入带钱包的文件系统之前，必须先正确配置<code class="codeph">LD_LIBRARY_PATH</code>和<span class="italic"><code class="codeph">ORACLE_HOME</code></span>环境变量。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以admin用户身份登录。</span></li>
                           <li class="stepexpand"><span>挂载DBFS存储。（Oracle建议您不要以root用户身份执行此步骤。）</span><div><pre class="oac_no_warn" dir="ltr">％dbfs_client @ / dbfsdb -o wallet，rw，user，direct_io / mnt / dbfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]要测试上一步是否成功，请以admin用户身份列出<code class="codeph">dbfs</code>目录。</span><div><pre class="oac_no_warn" dir="ltr">$ ls / mnt / tdbfs</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div class="sect5"><a id="TASK-14-DFF8D7B9" name="TASK-14-DFF8D7B9"></a><h6 id="ADLOB-TASK-14-DFF8D7B9" class="sect6"></h6>
                        <div>
                           <div class="section">
                              <p class="subhead3" id="TASK-14-DFF8D7B9__GUID-47680EDD-07ED-4D75-BF40-EFF8F2558126"></p>
                              <div class="infoboxnotealso" id="TASK-14-DFF8D7B9__USINGORACLEWALLETWITHDBFSCLIENT-DFF8E4C4">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02">将Oracle Wallet与DBFS客户端配合使用</a></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54" name="GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54"></a><h5 id="ADLOB-GUID-69C0676E-EE2B-4B4B-9956-908D47AA3C54" class="sect5">在命令提示符下使用密码挂载文件系统</h5>
                     <div>
                        <p>您可以使用<code class="codeph">dbfs_client</code>挂载文件系统。
                        </p>
                        <div class="section">
                           <p>您必须在命令提示符下输入密码才能使用<code class="codeph">dbfs_client</code>挂载文件系统。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client ETLUser @ DBConnectString / mnt / dbfs密码：xxxxxxx</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2" name="GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2"></a><h5 id="ADLOB-GUID-AF702BBF-96BF-4CD7-A9F4-3C385839D5E2" class="sect5">使用从文件读取的密码挂载文件系统</h5>
                     <div>
                        <p>您可以使用从文件中读取的密码安装文件系统。</p>
                        <div class="section">
                           <p>以下示例安装文件系统并释放终端。它从文件中读取密码：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ nohup dbfs_client ETLUser @ DBConnectString / mnt / dbfs &lt; <span class="italic">passwordfile</span> .f＆$ ls -l / mnt / dbfs drwxrwxrwx 10 root root 0 Feb 9 17:28 staging_area</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB45999"></a><div class="props_rev_3"><a id="GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB" name="GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB"></a><h5 id="ADLOB-GUID-0524AFB6-7C12-4F5B-B934-8C7026727ABB" class="sect5">卸载文件系统</h5>
                     <div>
                        <p>在Linux中，您可以运行<code class="codeph">fusermount</code>来卸载文件系统。
                        </p>
                        <div class="section">
                           <p>要在Linux中运行<code class="codeph">fusermount</code> ，请执行以下操作：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ fusermount -u &lt; <span class="italic"><code class="codeph">mount point</code></span> &gt;</pre></li>
                           </ul>
                           <p>在Solaris中，您可以运行<code class="codeph">umount</code>来卸载文件系统。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ umount -u &lt; <span class="italic"><code class="codeph">mount point</code></span> &gt;</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADLOB46000"></a><div class="props_rev_3"><a id="GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B" name="GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B"></a><h5 id="ADLOB-GUID-135813E9-9DD0-48B1-BBE9-6FA28C757D3B" class="sect5">通过适用于Linux的fstab实用程序安装DBFS</h5>
                     <div>
                        <p>在Linux中，您可以配置<code class="codeph">fstab</code>实用程序以使用<code class="codeph">dbfs_client</code>来装入DBFS文件系统。
                        </p>
                        <div class="section">
                           <p>要通过<code class="codeph">/etc/fstab</code>挂载DBFS，必须使用Oracle Wallet进行身份验证。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">root</code>用户身份登录。</span></li>
                           <li class="stepexpand"><span>将<code class="codeph">dbfs_client</code>的用户和组更改为用户<code class="codeph">root</code>和组<code class="codeph">fuse</code> 。</span><div><pre class="oac_no_warn" dir="ltr">#chown root.fuse $ ORACLE_HOME / bin / dbfs_client</pre></div>
                           </li>
                           <li class="stepexpand"><span>在<code class="codeph">dbfs_client</code>上设置<code class="codeph">setuid</code>位，并仅将<code class="codeph">execute</code>权限限制为用户和组。</span><div><pre class="oac_no_warn" dir="ltr">#chmod u + rwxs，g + rx-w，o-rwx dbfs_client</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">/sbin</code> <code class="codeph">dbfs_client</code>的符号链接为“ <code class="codeph">mount.dbfs</code> ”。</span><div><pre class="oac_no_warn" dir="ltr">$ ln -s $ ORACLE_HOME / bin / dbfs_client /sbin/mount.dbfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建一个名为“ <code class="codeph">fuse</code> ”的新Linux组。</span></li>
                           <li class="stepexpand"><span>将运行DBFS客户端的Linux用户添加到<code class="codeph">fuse</code>组。</span></li>
                           <li class="stepexpand"><span><code class="codeph">/etc/fstab</code>下行添加到<code class="codeph">/etc/fstab</code> ：</span><div><pre class="oac_no_warn" dir="ltr">/sbin/mount.dbfs# <span class="italic">db_user</span> @ <span class="italic">db_server</span> <span class="italic">mount_point</span> fuse rw，user，noauto 0 0</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">/sbin/mount.dbfs#/@DBConnectString / mnt / dbfs fuse rw，user，noauto 0 0</pre></div>
                           </li>
                           <li class="stepexpand"><span>Linux用户可以使用标准Linux <code class="codeph">mount</code>命令安装DBFS文件系统。例如：</span><div><pre class="oac_no_warn" dir="ltr">$ mount / mnt / dbfs</pre><p>请注意， <code class="codeph">FUSE</code>目前不支持<code class="codeph">automount</code> 。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADLOB46197"></a><div class="props_rev_3"><a id="GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F" name="GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F"></a><h5 id="ADLOB-GUID-69F6C5D1-FF77-4AA0-A07C-A7B525C0453F" class="sect5">通过适用于Solaris的vfstab实用程序安装DBFS</h5>
                     <div>
                        <div class="section">
                           <p>在Solaris上，通常使用<code class="codeph">vfstab</code>实用程序配置文件系统。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>创建一个mount shell脚本<code class="codeph">mount_dbfs.sh</code>以用于启动<code class="codeph">dbfs_client</code> 。必须导出Oracle RDBMS所需的所有环境变量。这些环境变量包括<code class="codeph">TNS_ADMIN</code> ， <code class="codeph">ORACLE_HOME</code>和<code class="codeph">LD_LIBRARY_PATH</code> 。例如：</span><div><pre class="oac_no_warn" dir="ltr">＃！/ bin / ksh export TNS_ADMIN = / export / home / oracle / dbfs / tnsadmin export ORACLE_HOME = / export / home / oracle / 11.2.0 / dbhome_1 export DBFS_USER = dbfs_user export DBFS_PASSWD = / tmp / passwd.f export DBFS_DB_CONN = dbfs_db export O = $ ORACLE_HOME export LD_LIBRARY_PATH = $ O / lib：$ O / rdbms / lib：/ usr / lib：/ lib：$ LD_LIBRARY_PATH export NOHUP_LOG = / tmp / dbfs.nohup（nohup $ ORACLE_HOME / bin / dbfs_client $ DBFS_USER @ $ DBFS_DB_CONN &lt;$ DBFS_PASSWD 2&gt;＆1＆）＆</pre></div>
                           </li>
                           <li class="stepexpand"><span>将DBFS条目添加到<code class="codeph">/etc/vfstab</code> 。为<code class="codeph">device_to_mount</code>指定<code class="codeph">mount_dbfs.sh</code>脚本。指定<code class="codeph">uvfs</code>为<code class="codeph">FS_type</code> 。指定no <code class="codeph">formount_at_boot</code> 。根据需要指定挂载选项。例如：</span><div><pre class="oac_no_warn" dir="ltr">/usr/local/bin/mount_dbfs.sh  -  / mnt / dbfs uvfs  -  no rw，allow_other</pre></div>
                           </li>
                           <li class="stepexpand"><span>用户可以使用标准Solaris mount命令安装DBFS文件系统。例如：</span><div><pre class="oac_no_warn" dir="ltr">$ mount / mnt / dbfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>用户可以使用标准Solaris umount命令卸载DBFS文件系统。例如：</span><div><pre class="oac_no_warn" dir="ltr">$ umount / mnt / dbfs</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADLOB46001"></a><div class="props_rev_3"><a id="GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728" name="GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728"></a><h5 id="ADLOB-GUID-78E752D1-3E67-483A-9A59-DD30FDF4A728" class="sect5">对挂载文件系统的限制</h5>
                     <div>
                        <p>DBFS支持大多数具有异常的文件系统操作。例外情况是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">IOCTL</code></p>
                           </li>
                           <li>
                              <p>范围锁定（支持文件锁定）</p>
                           </li>
                           <li>
                              <p>通过<code class="codeph">libaio</code>异步I / O.</p>
                           </li>
                           <li>
                              <p><code class="codeph">O_DIRECT</code>文件打开</p>
                           </li>
                           <li>
                              <p>硬链接，管道</p>
                           </li>
                           <li>
                              <p>其他特殊文件模式</p>
                           </li>
                        </ul>
                        <p>除共享可写模式外，支持内存映射文件。出于性能原因，每次读取文件数据或文件数据属性时，DBFS都不会更新文件访问时间。</p>
                        <p>如果指定了<code class="codeph">direct_io</code>选项，则无法从安装了DBFS的文件系统运行程序。
                        </p>
                        <p>Oracle不支持使用NFS或Samba导出DBFS文件系统。</p>
                     </div>
                  </div>
               </div><a id="ADLOB46010"></a><div class="props_rev_3"><a id="GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31" name="GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31"></a><h4 id="ADLOB-GUID-85540258-FBB9-452B-8C20-F1D00A2ECA31" class="sect4">文件系统安全模型</h4>
                  <div>
                     <p>数据库管理DBFS中的安全性。它不使用操作系统安全模型。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-6006E126-7A80-4D8F-B35B-23E31096F512">关于文件系统安全模型</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-B23998F8-3354-4FBE-82F9-39D4739EE934">启用共享根访问</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B">关于多个数据库用户之间的DBFS访问</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A">建立跨多个数据库用户的DBFS访问共享</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-6006E126-7A80-4D8F-B35B-23E31096F512" name="GUID-6006E126-7A80-4D8F-B35B-23E31096F512"></a><h5 id="ADLOB-GUID-6006E126-7A80-4D8F-B35B-23E31096F512" class="sect5">关于文件系统安全模型</h5>
                     <div>
                        <p>DBFS在安全模型下运行，默认情况下，用户创建的所有文件系统对该用户都是私有的。</p>
                        <p>Oracle建议维护此模型。由于操作系统用户和Oracle数据库用户不同，因此可以允许多个操作系统用户安装单个DBFS文件系统。这些安装可能具有不同的安装选项和权限。例如， <code class="codeph">user1</code>可以将DBFS文件系统挂载为<code class="codeph">READ ONLY</code> ， <code class="codeph">user2</code>可以将其挂载为<code class="codeph">READ WRITE</code> 。但是，Oracle数据库将两个用户视为具有相同的权限，因为他们将作为同一个数据库用户访问文件系统。
                        </p>
                        <p>访问数据库文件系统需要数据库登录作为数据库用户，该用户具有作为文件系统基础的表的特权。数据库管理员向数据库用户授予对文件系统的访问权限，不同的数据库用户可以对文件系统具有不同的<code class="codeph">READ</code>或<code class="codeph">UPDATE</code>权限。数据库管理员可以访问存储在DBFS文件系统中的所有文件。
                        </p>
                        <p>在每台客户端计算机上，对DBFS安装点的访问仅限于安装文件系统的操作系统用户。但是，这并不限制可以访问DBFS文件系统的用户数，因为许多用户可能会单独安装相同的DBFS文件系统。</p>
                        <p>DBFS仅执行数据库权限检查。安装DBFS文件系统时，Linux会执行操作系统文件级权限检查。使用命令界面或直接使用PL / SQL接口时，DBFS不执行此检查。</p>
                     </div>
                  </div><a id="ADLOB46163"></a><a id="ADLOB46162"></a><div class="props_rev_3"><a id="GUID-B23998F8-3354-4FBE-82F9-39D4739EE934" name="GUID-B23998F8-3354-4FBE-82F9-39D4739EE934"></a><h5 id="ADLOB-GUID-B23998F8-3354-4FBE-82F9-39D4739EE934" class="sect5">启用共享根访问</h5>
                     <div>
                        <div class="section">
                           <p>作为安装文件系统的操作系统用户，您可以通过指定<code class="codeph">allow_root</code>选项来允许对文件系统进行root访问。此选项要求<code class="codeph">/etc/fuse.conf</code>文件包含<code class="codeph">user_allow_other</code>字段，如<a href="using-DBFS.html#GUID-B23998F8-3354-4FBE-82F9-39D4739EE934__CIHDHFDH">例25-1所示</a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B23998F8-3354-4FBE-82F9-39D4739EE934__CIHDHFDH">
                           <p class="titleinexample">示例25-1为其他用户启用根访问权限</p><pre class="oac_no_warn" dir="ltr">＃允许用户指定'allow_root'挂载选项。user_allow_other</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADLOB46164"></a><div class="props_rev_3"><a id="GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B" name="GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B"></a><h5 id="ADLOB-GUID-CBDEAA51-801F-444D-8895-CCDE0C21662B" class="sect5">关于多个数据库用户之间的DBFS访问</h5>
                     <div>
                        <p>某些情况可能要求多个数据库用户访问同一文件系统。例如，拥有文件系统的数据库用户可能是特权用户，并且共享其用户凭证可能会带来安全风险。为了缓解这种情况，DBFS允许多个数据库用户共享文件系统状态的子集。</p>
                        <p>虽然通过DBFS内容API进行的DBFS注册和安装对每个用户都是私有的，但是基础文件系统和它们所依赖的表可以在用户之间共享。完成此操作后，各个文件系统可以由不同的数据库用户独立安装和使用，可以通过SQL / PLSQL或<code class="codeph">dbfs_client</code> API使用。</p>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A" name="GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A"></a><h5 id="ADLOB-GUID-0932DE6C-801B-4F37-8BA9-33866E76FF7A" class="sect5">建立跨多个数据库用户的DBFS访问共享</h5>
                     <div>
                        <div class="section">
                           <p>您可以跨多个数据库用户共享DBFS。</p>
                           <p>在以下示例中，用户<code class="codeph">user1</code>能够修改文件系统，用户<code class="codeph">user2</code>可以看到这些更改。这里， <code class="codeph">user1</code>是创建文件系统的数据库用户， <code class="codeph">user2</code>是最终使用<code class="codeph">dbfs_client</code>挂载和访问文件系统的数据库用户。<code class="codeph">user1</code>和<code class="codeph">user2</code>必须具有<code class="codeph">DBFS_ROLE</code>权限。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以创建文件系统的用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">sys @ tank as sysdba&gt; connect user1已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建文件系统<code class="codeph">user1_FS</code> ，注册存储，并将其挂载为<code class="codeph">user1_mt</code> 。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; exec dbms_dbfs_sfs.createFilesystem（'user1_FS'）; user1 @ tank&gt; exec dbms_dbfs_content.registerStore（'user1_FS'，'posix'，'DBMS_DBFS_SFS'）; user1 @ tank&gt; exec dbms_dbfs_content.mountStore（'user1_FS'，'user1_mnt'）; user1 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]您可以通过查看所有安装来检查上一步是否已成功完成。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; select * from table（dbms_dbfs_content.listMounts）; STORE_NAME | STORE_ID | PROVIDER_NAME --------------------- |  -  --------- | -------------- ---------------------------- PROVIDER_PKG | PROVIDER_ID | PROVIDER_VERSION | STORE_FEATURES --------------- ------ | ----------- | --------------------- | --------- ----------- STORE_GUID ---------- STORE_MOUNT --------------------------- ------------------------------------------------- CREATED -------------------------------------------------- -------------------------- MOUNT_PROPERTIES（PROPNAME，PROPVALUE，TYPECODE）---------------- -------------------------------------------------- ---------- user1_FS | 1362968596 | posix“DBMS_DBFS_SFS”| 3350646887 | 0.5.0 | 12714135 141867344 user1_mnt 01-FEB-10 09.44.25.357858 PM DBMS_DBFS_CONTENT_PROPERTIES_T（DBMS_DBFS_CONTENT_PROPERTY_T（'principal'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'owner'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'acl'，（null）， 9），DBMS_DBFS_CONTENT_PROPERTY_T（'asof'，（null），187），DBMS_DBFS_CONTENT_PROPERTY_T（'read_only'，'0'，2））</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>[可选]以将使用<code class="codeph">dbfs_client</code>的用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; connect user2已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]请注意， <code class="codeph">user2</code>无法看到<code class="codeph">user1</code>的DBFS状态，因为他没有挂载。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; select * from table（dbms_dbfs_content.listMounts）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>在以<code class="codeph">user1</code>身份连接时，导出文件系统<code class="codeph">user1_FS</code>以访问具有<code class="codeph">DBFS_ROLE</code>权限的任何用户。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; exec dbms_dbfs_sfs.exportFilesystem（'user1_FS'）; user1 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以将使用<code class="codeph">dbfs_client</code>的用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; connect user2已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>作为<code class="codeph">user2</code> ，查看所有可用表。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; select * from table（dbms_dbfs_sfs.listTables）; SCHEMA_NAME | TABLE_NAME | PTABLE_NAME --------------------------- | ----------------- ---------- | ------------------- VERSION＃------------------ -------------- CREATED ----------------------------------- ---------------------------------------- FORMATTED --------- -------------------------------------------------- ---------------- PROPERTIES（PROPNAME，PROPVALUE，TYPECODE）-------------------------- ------------------------------------------------- user1 | SFS $ _FST_11 | SFS $ _FSTP_11 0.5.0 01-FEB-10 09.43.53.497856 PM 01-FEB-10 09.43.53.497856 PM（null）</pre></div>
                           </li>
                           <li class="stepexpand"><span>作为<code class="codeph">user2</code> ，注册并挂载存储，但不要重新创建<code class="codeph">user1_FS</code>文件系统。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; exec dbms_dbfs_sfs.registerFilesystem（'user2_FS'，'user1'，'SFS $ _FST_11'）; user2 @ tank&gt; exec dbms_dbfs_content.registerStore（'user2_FS'，'posix'，'DBMS_DBFS_SFS'）; user2 @ tank&gt; exec dbms_dbfs_content.mountStore（'user2_FS'，'user2_mnt'）; user2 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]作为<code class="codeph">user2</code> ，您可以通过查看所有安装来检查上一步是否已成功完成。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt; select * from table（dbms_dbfs_content.listMounts）; STORE_NAME | STORE_ID | PROVIDER_NAME --------------------- |  -  --------- | -------------- ---------------------------- PROVIDER_PKG | PROVIDER_ID | PROVIDER_VERSION | STORE_FEATURES --------------- ------ | ----------- | --------------------- | --------- ----------- STORE_GUID ---------- STORE_MOUNT --------------------------- ------------------------------------------------- CREATED -------------------------------------------------- -------------------------- MOUNT_PROPERTIES（PROPNAME，PROPVALUE，TYPECODE）---------------- -------------------------------------------------- ---------- user2_FS | 1362968596 | posix“DBMS_DBFS_SFS”| 3350646887 | 0.5.0 | 12714135 141867344 user1_mnt 01-FEB-10 09.46.16.013046 PM DBMS_DBFS_CONTENT_PROPERTIES_T（DBMS_DBFS_CONTENT_PROPERTY_T（'principal'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'owner'，（null），9），DBMS_DBFS_CONTENT_PROPERTY_T（'acl'，（null）， 9），DBMS_DBFS_CONTENT_PROPERTY_T（'asof'，（null），187），DBMS_DBFS_CONTENT_PROPERTY_T（'read_only'，'0'，2））</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>[可选]列出<code class="codeph">user2</code>和<code class="codeph">user1</code>路径名。请注意，另一个安装， <code class="codeph">user2_mnt,</code>店面<code class="codeph">user2_FS,</code>可供<code class="codeph">user2</code> 。但是， <code class="codeph">user2</code>的基础文件系统数据与<code class="codeph">user1</code>相同。</span><div><pre class="oac_no_warn" dir="ltr">user2 @ tank&gt;从dbfs_content中选择路径名; PATHNAME ------------------------------------------------- ------------------------------ / user2_mnt /user2_mnt/.sfs/tools /user2_mnt/.sfs/snapshots / user2_mnt /。 sfs / content /user2_mnt/.sfs/attributes /user2_mnt/.sfs/RECYCLE /user2_mnt/.sfs user2 @ tank&gt; connect user1已连接。user1 @ tank&gt;从dbfs_content中选择路径名; PATHNAME --------------------- / user1_mnt /user1_mnt/.sfs/tools /user1_mnt/.sfs/snapshots /user1_mnt/.sfs/content /user1_mnt/.sfs / attributes /user1_mnt/.sfs/RECYCLE /user1_mnt/.sfs</pre></div>
                           </li>
                           <li class="stepexpand"><span>在文件系统<code class="codeph">user1_FS</code> ， <code class="codeph">user1</code>创建文件<span class="italic"><code class="codeph">xxx</code></span> 。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; var ret number; user1 @ tank&gt; var data blob; user1 @ tank&gt; exec：ret：= dbms_fuse.fs_create（'/ user1_mnt / <span class="italic">xxx</span> '，content =&gt;：data）; user1 @ tank&gt; select：ret from dual; ：RET ---------- 0</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]写入上一步中创建的文件<span class="italic"><code class="codeph">xxx</code></span> 。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; var buf varchar2（100）; user1 @ tank&gt; exec：buf：='hello world'; user1 @ tank&gt; exec dbms_lob.writeappend（：data，length（：buf），utl_raw.cast_to_raw（：buf））; user1 @ tank&gt; commit;</pre></div>
                           </li>
                           <li class="stepexpand"><span>[可选]显示文件<span class="italic"><code class="codeph">xxx</code></span>存在，并包含附加数据。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt;从dbfs_content中选择路径名，utl_raw.cast_to_varchar2（filedata），其中filedata不为null; PATHNAME ------------------------------------------------- ------------------------------ UTL_RAW.CAST_TO_VARCHAR2（FILEDATA）-------------- -------------------------------------------------- --------------- / user1_mnt / <span class="italic">xxx</span> hello world</pre></div>
                           </li>
                           <li class="stepexpand"><span>用户<code class="codeph">user2</code>在自己的DBFS特定路径名和挂载前缀中看到相同的文件。</span><div><pre class="oac_no_warn" dir="ltr">user1 @ tank&gt; connect user2已连接。user2 @ tank&gt;从dbfs_content中选择路径名，utl_raw.cast_to_varchar2（filedata），其中filedata不为null; PATHNAME ------------------------------------------------- ------------------------------ UTL_RAW.CAST_TO_VARCHAR2（FILEDATA）-------------- -------------------------------------------------- --------------- / user2_mnt / <span class="italic">xxx</span> hello world</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>导出和注册配对完成后，两个用户在基础表的使用方面表现相同。<code class="codeph">exportFilesystem()</code>过程管理访问相同数据的必要授权，这些数据在模式之间共享。在<code class="codeph">user1</code>调用<code class="codeph">exportFilesystem()</code> ，可以向具有<code class="codeph">DBFS_ROLE</code>任何用户授予文件系统访问权限。请注意，可以指定其他角色。
                           </p>
                           <p>随后， <code class="codeph">user2</code>可以创建共享相同的底层存储作为新的文件系统DBFS <code class="codeph">user1_FS</code>文件系统，通过调用<code class="codeph">dbms_dbfs_sfs.registerFilesystem()</code> <code class="codeph">dbms_dbfs_sfs.registerStore()</code>和<code class="codeph">dmbs_dbfs_sfs.mountStore()</code>过程调用。
                           </p>
                           <p>当多个数据库用户共享文件系统时，他们必须确保所有数据库用户在所有者（此处为<code class="codeph">user1</code> ）删除文件系统之前取消注册他们对文件系统的兴趣。
                           </p>
                           <p>Oracle不建议您以<code class="codeph">root</code>身份运行DBFS。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB46203"></a><div class="props_rev_3"><a id="GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3" name="GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3"></a><h4 id="ADLOB-GUID-D6AE78C9-C618-4842-8B44-2BE42E1BEDE3" class="sect4">HTTP，WebDAV和FTP访问DBFS</h4>
                  <div>
                     <p>通过Internet启用对DBFS的HTTP，WebDAV和FTP访问的组件使用各种XML DB服务器协议。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226">通过XDB访问DBFS的Internet</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6">Web分布式创作和版本控制（WebDAV）访问</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F">FTP访问DBFS</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-7A591ACE-C0BD-4AED-A216-22CC06645901">HTTP访问DBFS</a></p>
                        </li>
                     </ul>
                  </div><a id="ADLOB46212"></a><div class="props_rev_3"><a id="GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226" name="GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226"></a><h5 id="ADLOB-GUID-A7D24E13-93A7-4B58-92BB-27A93D1A5226" class="sect5">通过XDB访问DBFS的Internet</h5>
                     <div>
                        <p>要为具有DBFS身份验证的数据库用户提供已注册和已装入的DBFS存储的分层文件系统视图，存储将显示在路径<code class="codeph">/dbfs</code> 。
                        </p>
                        <p><code class="codeph">/dbfs</code>文件夹是一个虚拟文件夹，因为其子树中的资源存储在DBFS存储库中，而不是XDB存储库中。XDB为根路径名“ <code class="codeph">/</code> ”（具有调用者权限）发出<code class="codeph">dbms_dbfs_content.list()</code>命令，并接收商店访问点列表作为<code class="codeph">/dbfs</code>文件夹中的子文件夹。该列表与传递给<code class="codeph">dbms_dbfs_content.mountStore().</code> <code class="codeph">store_mount</code>参数相当<code class="codeph">dbms_dbfs_content.mountStore().</code> FTP和WebDAV用户可以导航到这些商店，而HTTP和HTTPS用户可以从浏览器访问URL。
                        </p>
                        <p>请注意，XDB存储库实现的功能（如存储库事件，资源配置和ACL）不适用于<code class="codeph">/dbfs</code>文件夹。
                        </p>
                        <p><a href="DBFS-content-API.html#GUID-630BE6DB-0178-4EE4-8D7D-824BA886F68E" title="您可以使应用程序在多个不同的编程环境中使用数据库文件系统（DBFS）。">DBFS Content API，</a>用于DBFS存储库创建，注册，注销，装载，卸载和删除的准则</p>
                     </div>
                  </div><a id="ADLOB46213"></a><div class="props_rev_3"><a id="GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6" name="GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6"></a><h5 id="ADLOB-GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6" class="sect5">Web分布式创作和版本控制（WebDAV）访问</h5>
                     <div>
                        <p>WebDAV是一种IETF标准协议，通过Internet为用户提供与存储库类似的文件系统接口。</p>
                        <p>WebDAV服务器文件夹通常通过Microsoft Windows上的Web文件夹（2000 / NT / XP / Vista / 7等）访问。您可以使用其完全限定名称访问资源，例如<code class="codeph">/dbfs/sfs1/dir1/file1.txt</code> ，其中<code class="codeph">sfs1</code>是DBFS存储的名称。
                        </p>
                        <p>您需要在Windows上设置WebDAV才能访问DBFS文件系统。</p>
                        <div class="infoboxnotealso" id="GUID-253DFD3A-DEE3-4D0C-BC06-3D423EA05EC6__GUID-5B101177-8FAF-4C5D-859F-2EF0C594CFBD">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../adxdb/repository-access-using-protocols.html#ADXDB5562" target="_blank"><span class="italic">Oracle XML DB开发人员指南</span></a></p>
                        </div>
                        <p>访问DBFS虚拟文件夹所需的用户身份验证与XDB存储库相同。</p>
                        <p>当WebDAV客户端第一次连接到WebDAV服务器时，通常会提示用户输入用户名和密码，客户端将其用于所有后续请求。从协议的角度来看，每个请求都包含身份验证信息，XDB使用该身份验证信息将用户身份验证为有效的数据库用户。如果用户不存在，则客户端无法访问DBFS存储库或XDB存储库。身份验证成功后，数据库用户将成为会话中的当前用户。</p>
                        <p>XDB支持基本身份验证和摘要身份验证。出于安全原因，强烈建议在启用基本身份验证时使用HTTPS传输。</p>
                     </div>
                  </div><a id="ADLOB46214"></a><div class="props_rev_3"><a id="GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F" name="GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F"></a><h5 id="ADLOB-GUID-02C9A2D0-3647-48BE-81FF-876EB45CBC2F" class="sect5">FTP访问DBFS</h5>
                     <div>
                        <p>对DBFS的FTP访问使用大多数基于Unix的发行版中的标准FTP客户端。FTP是一种基于客户端 - 服务器架构的文件传输机制，具有独立的控制和数据连接。</p>
                        <p>FTP用户被认证为数据库用户。RFC 959中概述的协议使用明文用户名和密码进行身份验证。因此，FTP不是安全协议。</p>
                        <p>DBFS支持以下命令：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">USER</code> ：验证用户名</p>
                           </li>
                           <li>
                              <p><code class="codeph">PASS</code> ：验证密码</p>
                           </li>
                           <li>
                              <p><code class="codeph">CWD</code> ：更改工作目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">CDUP</code> ：更改<code class="codeph">CDUP</code>目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">QUIT</code> ：断开连接</p>
                           </li>
                           <li>
                              <p><code class="codeph">PORT</code> ：指定服务器应连接的地址和端口</p>
                           </li>
                           <li>
                              <p><code class="codeph">PASV</code> ：进入被动模式</p>
                           </li>
                           <li>
                              <p><code class="codeph">TYPE</code> ：设置传输模式，例如ASCII或二进制</p>
                           </li>
                           <li>
                              <p><code class="codeph">RETR</code> ：传输文件的副本</p>
                           </li>
                           <li>
                              <p><code class="codeph">STOR</code> ：接受数据并将数据存储于服务器站点中的文件</p>
                           </li>
                           <li>
                              <p><code class="codeph">RNFR</code> ：重命名</p>
                           </li>
                           <li>
                              <p><code class="codeph">RNTO</code> ：重命名为</p>
                           </li>
                           <li>
                              <p><code class="codeph">DELE</code> ：删除文件</p>
                           </li>
                           <li>
                              <p><code class="codeph">RMD</code> ：删除目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">MKD</code> ：制作一个目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">PWD</code> ：打印工作目录</p>
                           </li>
                           <li>
                              <p><code class="codeph">LIST</code> ：列出文件或目录。默认为当前目录。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NLST</code> ：返回<code class="codeph">NLST</code>中的文件名</p>
                           </li>
                           <li>
                              <p><code class="codeph">HELP</code> ：使用文档</p>
                           </li>
                           <li>
                              <p><code class="codeph">SYST</code> ：返回系统类型</p>
                           </li>
                           <li>
                              <p><code class="codeph">FEAT</code> ：获取服务器实现的功能列表</p>
                           </li>
                           <li>
                              <p><code class="codeph">NOOP</code> ：无操作（用于保持活动）</p>
                           </li>
                           <li>
                              <p><code class="codeph">EPRT</code> ：服务器应连接的扩展地址（IPv6）和端口</p>
                           </li>
                           <li>
                              <p><code class="codeph">EPSV</code> ：进入扩展被动模式（IPv6）</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADLOB46215"></a><div class="props_rev_3"><a id="GUID-7A591ACE-C0BD-4AED-A216-22CC06645901" name="GUID-7A591ACE-C0BD-4AED-A216-22CC06645901"></a><h5 id="ADLOB-GUID-7A591ACE-C0BD-4AED-A216-22CC06645901" class="sect5">HTTP访问DBFS</h5>
                     <div>
                        <p>用户通过HTTP / HTTPS协议进行只读访问。用户使用带有URL的XDB HTTP服务器将其浏览器指向DBFS存储，例如<code class="codeph">https://hostname:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/dbfs/sfs1</code> ，其中<code class="codeph">sfs1</code>是DBFS存储名称。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADLOB46008"></a><div class="props_rev_3"><a id="GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18" name="GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18"></a><h3 id="ADLOB-GUID-8665C1E7-C96A-4B17-A8F7-1889858EEF18" class="sect3">DBFS管理</h3>
               <div>
                  <p><a id="d96781e4827" class="indexterm-anchor"></a> DBFS管理包括执行诊断，管理故障转移，执行备份等的工具。
                  </p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02">将Oracle Wallet与DBFS客户端配合使用</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723">DBFS诊断</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48" title="如果Oracle RAC集群中的某个数据库实例发生故障，dbfs_client程序可以故障转移到其他现有数据库实例之一。">防止故障转移事件期间的数据丢失</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681">绕过客户端写缓存</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99">备份DBFS</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9">DBFS的小文件性能</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22">为DBFS启用高级SecureFiles LOB功能</a></p>
                     </li>
                  </ul>
               </div><a id="ADLOB46009"></a><div class="props_rev_3"><a id="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02" name="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02"></a><h4 id="ADLOB-GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02" class="sect4">将Oracle Wallet与DBFS客户端配合使用</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Wallet允许DBFS客户端安装DBFS存储，而无需用户输入密码。</p>
                        <div class="infoboxnotealso" id="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02__ORACLEDATABASEENTERPRISEUSERSECURIT-DFF94F39">
                           <p class="notep1">也可以看看：</p>
                           <p>有关创建和管理钱包的详细信息，请参见“ <a href="../dbimi/using-oracle-wallet-manager.html#DBIMI160" target="_blank"><span class="italic">Oracle数据库企业用户安全管理员指南”</span></a></p>
                        </div>
                        <p>“ <code class="codeph">/@</code> ”语法表示使用钱包，如步骤<a href="using-DBFS.html#GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02__CIHEDBAE">7</a>所示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为钱包创建一个目录。例如：</span><div><pre class="oac_no_warn" dir="ltr">mkdir $ ORACLE_HOME / oracle / wallet</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建自动登录钱包。</span><div><pre class="oac_no_warn" dir="ltr">mkstore -wrl $ ORACLE_HOME / oracle / wallet -create</pre></div>
                        </li>
                        <li class="stepexpand"><span>在客户端的<code class="codeph">sqlnet.ora</code>文件中添加钱包位置：</span><div><pre class="oac_no_warn" dir="ltr">WALLET_LOCATION =（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = $ ORACLE_HOME / oracle / wallet）））</pre></div>
                        </li>
                        <li class="stepexpand"><span>在客户端的<code class="codeph">sqlnet.ora</code>文件中添加以下参数：</span><div><pre class="oac_no_warn" dir="ltr">SQLNET.WALLET_OVERRIDE = TRUE</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建凭据：</span><div><pre class="oac_no_warn" dir="ltr">mkstore -wrl <span class="italic">WALLET_LOCATION</span> -createCredential <span class="italic">db_connect_string</span> <span class="italic">用户名</span> <span class="italic">密码</span>
</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">mkstore -wrl $ ORACLE_HOME / oracle / wallet -createCredential DBConnectString scott <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>将连接别名添加到<code class="codeph">tnsnames.ora</code>文件中。</span></li>
                        <li class="stepexpand" id="GUID-52358A56-B0C5-4D07-BEF4-1C7F6F100C02__CIHEDBAE"><span>将<code class="codeph">dbfs_client</code>与Oracle Wallet一起使用。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client -o wallet / @ DBConnectString / mnt / dbfs</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADLOB46011"></a><div class="props_rev_3"><a id="GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723" name="GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723"></a><h4 id="ADLOB-GUID-E834E96E-F30D-45C0-8AF0-55B2F6361723" class="sect4">DBFS诊断</h4>
                  <div>
                     <p><code class="codeph">dbfs_client</code>程序支持多级跟踪以帮助诊断问题。它可以使用Linux上的<code class="codeph">syslog</code>守护程序将跟踪输出到文件或<code class="codeph">/var/log/messages</code> 。
                     </p>
                     <p>跟踪到文件时， <code class="codeph">dbfs_client</code>程序会在磁盘上保留两个跟踪文件。 <code class="codeph">dbfs_client</code> ，自动旋转跟踪文件，并将磁盘使用量限制为20 MB。</p>
                     <p>默认情况下，除了始终记录到<code class="codeph">/var/log/messages</code>关键消息之外，将关闭跟踪。
                     </p>
                     <p>如果<code class="codeph">dbfs_client</code>无法连接到Oracle数据库，请使用<code class="codeph">trace_level</code>和<code class="codeph">trace_file</code>选项启用跟踪。跟踪将其他消息打印到日志文件以便于调试。
                     </p>
                     <p>DBFS使用Oracle数据库存储文件。有时，Oracle服务器问题会作为错误传播到<code class="codeph">dbfs_client</code> 。如果存在<code class="codeph">dbfs_client</code>错误，请查看Oracle服务器日志以查看这是否是根本原因。
                     </p>
                  </div>
               </div><a id="ADLOB46166"></a><a id="ADLOB46012"></a><div class="props_rev_3"><a id="GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48" name="GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48"></a><h4 id="ADLOB-GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48" class="sect4">防止故障转移事件期间的数据丢失</h4>
                  <div>
                     <p>如果Oracle RAC集群中的某个数据库实例发生故障， <code class="codeph">dbfs_client</code>程序可以故障转移到其他现有数据库实例之一。
                     </p>
                     <div class="p">要使<code class="codeph">dbfs_client</code>故障转移正常工作，您必须修改Oracle数据库服务并指定故障转移参数。运行<code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code>过程以修改服务，如<a href="using-DBFS.html#GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48__CIHJDDEE">例25-2</a>所示</div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-1FFAC0EF-36D7-449A-A17A-A9A9FB513F48__CIHJDDEE">
                        <p class="titleinexample">示例25-2启用DBFS客户端故障转移事件</p><pre class="oac_no_warn" dir="ltr">exec DBMS_SERVICE.MODIFY_SERVICE（service_name =&gt;'service_name'，aq_ha_notifications =&gt; true，failover_method =&gt;'BASIC'，failover_type =&gt;'SELECT'，failover_retries =&gt; 180，failover_delay =&gt; 1）;</pre><p>完成先决条件后，可以防止在后端Oracle数据库实例发生故障后DBFS连接故障转移期间数据丢失。在这种情况下，如果客户端丢失连接，则缓存的<span class="italic">写入</span>可能会丢失。但是，后端故障转移到其他Oracle RAC实例或备用数据库不会导致写入丢失。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定<code class="codeph">-o failover</code>挂载选项：</p><pre class="oac_no_warn" dir="ltr">$ dbfs_client <span class="italic">database_user</span> @ <span class="italic">database_server</span> -o failover / mnt / dbfs</pre></li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADLOB46013"></a><div class="props_rev_3"><a id="GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681" name="GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681"></a><h4 id="ADLOB-GUID-98B94C27-7E22-4198-A3D2-A1B697D6B681" class="sect4">绕过客户端写缓存</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">dbfs_client</code>的共享和缓存语义与使用<span class="italic">close-to-open缓存一致性</span>行为的NFS类似。这允许<code class="codeph">dbfs_client</code>多个副本访问同一共享文件系统。默认模式缓存写入客户端并在超时后或用户关闭文件后刷新它们。此外，对文件的写入仅对编写器关闭文件后打开文件的客户端显示。
                        </p>
                        <p>您可以绕过客户端写入缓存。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>打开文件时指定<code class="codeph">O_SYNC</code> 。
                              </p>
                              <p>强制在缓存中写入磁盘调用<code class="codeph">fsync</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46014"></a><div class="props_rev_3"><a id="GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99" name="GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99"></a><h4 id="ADLOB-GUID-FE5CE3DE-FDC1-4F47-8407-D70FFA00AF99" class="sect4">备份DBFS</h4>
                  <div>
                     <p>备份DBFS有两种方法。您可以在数据库级别备份作为文件系统基础的表，或者通过装入点使用文件系统备份实用程序（如Oracle Secure Backup）。</p>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-DBFS.html#GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18">数据库级别的DBFS备份</a></p>
                        </li>
                        <li>
                           <p><a href="using-DBFS.html#GUID-3A4486EB-05E9-442C-B93D-880984472D69">通过文件系统实用程序进行DBFS备份</a></p>
                        </li>
                     </ul>
                  </div><a id="ADLOB46168"></a><div class="props_rev_3"><a id="GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18" name="GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18"></a><h5 id="ADLOB-GUID-CF5FAA8E-5F15-483C-9684-7A9F05B7EE18" class="sect5">数据库级别的DBFS备份</h5>
                     <div>
                        <p>在数据库级别备份表的一个优点是文件系统中的文件始终与数据库中的关系数据一致。完全还原和恢复数据库还可以完全还原和恢复文件系统，而不会丢失数据。在数据库的时间点恢复期间，文件将恢复到指定的时间。与通常的数据库备份一样，备份期间发生的修改不会影响还原的一致性。整个恢复的文件系统始终与指定的时间戳保持一致。</p>
                     </div>
                  </div><a id="ADLOB46169"></a><div class="props_rev_3"><a id="GUID-3A4486EB-05E9-442C-B93D-880984472D69" name="GUID-3A4486EB-05E9-442C-B93D-880984472D69"></a><h5 id="ADLOB-GUID-3A4486EB-05E9-442C-B93D-880984472D69" class="sect5">通过文件系统实用程序进行DBFS备份</h5>
                     <div>
                        <div class="section">
                           <p>使用文件系统备份实用程序备份文件系统的优点是可以更轻松地从备份还原单个文件。上次备份后对已还原文件所做的任何更改都将丢失。</p>
                           <p>如果使用Oracle Secure Backup管理服务器计划备份，请指定<code class="codeph">allow_root</code>挂载选项。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADLOB46015"></a><div class="props_rev_3"><a id="GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9" name="GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9"></a><h4 id="ADLOB-GUID-DE04F6CD-8E24-4CD8-8A74-1FAAE54211A9" class="sect4">DBFS的小文件性能</h4>
                  <div>
                     <p>与任何共享文件系统一样，小文件的DBFS性能落后于本地文件系统的性能。</p>
                     <p>DBFS中的每个文件数据或元数据操作都必须通过<code class="codeph">FUSE</code>用户模式文件系统，然后通过网络转发到数据库。因此，未在客户端上缓存的每个操作都需要几毫秒才能在DBFS中运行。</p>
                     <p>对于涉及到磁盘的输入/输出（IO）的操作，等待磁盘IO会屏蔽时间延迟开销。当然，较大的IO比较小的IO具有更低的百分比开销。对于不发出磁盘IO的操作，网络开销更明显。</p>
                     <p>当您将一些小文件上的操作与本地文件系统进行比较时，开销并不明显，但影响数千个小文件的操作会产生更明显的开销。例如，列出单个目录或查看单个文件会产生接近瞬时的响应，而在具有数千个文件的目录树中进行搜索会导致较大的相对开销。</p>
                  </div>
               </div><a id="ADLOB46170"></a><a id="ADLOB46016"></a><div class="props_rev_3"><a id="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22" name="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22"></a><h4 id="ADLOB-GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22" class="sect4">为DBFS启用高级SecureFiles LOB功能</h4>
                  <div>
                     <div class="section">
                        <p>DBFS提供SecureFiles LOB提供的高级功能：压缩，重复数据删除，加密和分区。</p>
                        <p>例如，可以将DBFS配置为具有分区的压缩文件系统。在创建DBFS文件系统时，必须为文件系统指定一组已启用的功能。</p>
                        <div class="infoboxnotealso" id="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22__USINGORACLELOBSTORAGEANDCREATINGAPA-DFF9C4E2">
                           <p class="notep1">也可以看看：</p>
                           <p>有关SecureFiles LOB功能的更多信息，请<a href="using-oracle-LOBs-storage.html#GUID-EC76077B-3EE9-491E-AC6D-171DA919B84C" title="Oracle LOB存储有两种类型，SecureFiles LOB存储和BasicFiles LOB存储，它们与不同类型的表空间一起使用。">使用Oracle LOB存储</a>和<a href="using-DBFS.html#GUID-8735D535-2E13-4702-95F9-01F931F2BF46" title="分区在数据库中创建多个物理段，文件在这些分区中随机分布。">创建分区文件系统</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-32BF7F5E-1E6C-4CDD-81DC-DC9E6E55DC22__GUID-E34C30BB-4066-4E46-BC7E-ADA00283E4B9">
                        <p class="titleinexample">示例25-3为DBFS启用高级安全文件LOB功能</p><pre class="oac_no_warn" dir="ltr">$ sqlplus @dbfs_create_filesystem_advanced <span class="italic">tablespace_name</span> <span class="italic">file_systemname</span> [compress-high |压缩介质|压缩低| nocompress] [重复数据删除| nodeduplicate] [加密| noencrypt] [分区|非分区]</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADLOB46216"></a><div class="props_rev_3"><a id="GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9" name="GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9"></a><h3 id="ADLOB-GUID-68FE78C8-798C-40DB-8566-F09EB27F4CC9" class="sect3">收缩和重组DBFS文件系统</h3>
               <div>
                  <p>DBFS文件系统使用联机文件系统重组来缩小自身，从而将已分配的空间释放回包含的表空间。</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-DBFS.html#GUID-53227EBD-8AFE-47CF-813F-6B509677B83E">关于更改DBFS文件系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923" title="DBFS在线文件系统重组是一个功能强大的数据移动工具，具有这些优势。">在线文件系统重组的优点</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B">确定在线文件系统重组的可用性</a></p>
                     </li>
                     <li>
                        <p><a href="using-DBFS.html#GUID-3DF29109-3B00-4C76-819F-6017BF4671A0">调用在线文件系统重组</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-53227EBD-8AFE-47CF-813F-6B509677B83E" name="GUID-53227EBD-8AFE-47CF-813F-6B509677B83E"></a><h4 id="ADLOB-GUID-53227EBD-8AFE-47CF-813F-6B509677B83E" class="sect4">关于更改DBFS文件系统</h4>
                  <div>
                     <p>与其他数据库段一样，DBFS文件系统随着文件和目录的添加或扩大而动态增长。通过从保存DBFS文件系统的表空间到构成文件系统的各个段的空间分配来实现增长。</p>
                     <p>但是，即使删除了DBFS文件系统中的文件和目录，分配的空间也不会释放回包含的表空间，而是继续存在并可供其他DBFS实体使用。名为Online Filesystem Reorganization的进程通过缩小DBFS文件系统来解决此问题。</p>
                     <p>DBFS联机文件系统重组实用程序在内部使用Oracle数据库联机重定义工具，原始文件系统和临时占位符对应于联机重定义模型中的基础和临时对象。</p>
                     <div class="infoboxnotealso" id="GUID-53227EBD-8AFE-47CF-813F-6B509677B83E__GUID-A62284D2-7AD4-4C53-8DA1-C2A956837954">
                        <p class="notep1">也可以看看：</p>
                        <p>有关在线重新定义的详细信息，请参见<a href="../admin/managing-tables.html#ADMIN01514" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
               </div><a id="ADLOB46217"></a><div class="props_rev_3"><a id="GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923" name="GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923"></a><h4 id="ADLOB-GUID-FD348CE7-CE3D-4A88-B5D2-6EBAFFC35923" class="sect4">在线文件系统重组的优点</h4>
                  <div>
                     <p>DBFS在线文件系统重组是一个功能强大的数据移动工具，具有这些优势。</p>
                     <p>这些是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">它在线：</span>当重组正在进行时，文件系统仍可完全用于所有应用程序的读写操作。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">它可以重新组织结构：</span> DBFS文件系统的底层物理结构和组织可以通过多种方式进行更改，例如：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>可以将非分区文件系统转换为分区文件系统，反之亦然。</p>
                              </li>
                              <li>
                                 <p>可以选择性地启用或禁用特殊SecureFiles LOB属性，包括压缩，加密和重复数据删除属性。</p>
                              </li>
                              <li>
                                 <p>文件系统中的数据可以跨表空间移动，也可以在同一个表空间中移动。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">它可以同时重新组织多个文件系统：</span>如果没有临时文件系统具有相同的名称且表空间有足够的可用空间，则可以同时重新组织多个不同的文件系统，通常是每个重组文件系统的空间要求的两倍。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB46218"></a><div class="props_rev_3"><a id="GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B" name="GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B"></a><h4 id="ADLOB-GUID-93914AB9-E5DB-4C02-82CC-D9E9EF15F00B" class="sect4">确定在线文件系统重组的可用性</h4>
                  <div>
                     <div class="section">
                        <p>Oracle数据库<span class="italic">12c的</span> DBFS及更高版本支持的在线文件系统重组。一些早期版本也支持该设施。要确定您的版本是否存在，请查询DBFS PL / SQL包中的特定函数，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询DBFS PL / SQL包中的特定函数。</p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">$ sqlplus / as sysdba SELECT * FROM dba_procedures WHERE owner ='SYS'和object_name ='DBMS_DBFS_SFS'和procedure_name ='REORGANIZEFS';</pre><p>如果此查询返回与此输出中的行类似的单行，则DBFS安装支持联机文件系统重组。如果查询未返回任何行，则应升级DBFS安装或需要bug-10051996的修补程序。</p><pre class="oac_no_warn" dir="ltr">所有者------------------------------------------------- --------------------------------- OBJECT_NAME ---------------- -------------------------------------------------- ---------------- PROCEDURE_NAME --------------------------------- ------------------------------------------------- OBJECT_ID | SUBPROGRAM_ID | OVERLOAD | OBJECT_TYPE | AGG | PIP ---------- | ------------- | --------------- -------------------- | ------------- | --- | --- IMPLTYPEOWNER ------- -------------------------------------------------- ------------------------- IMPLTYPENAME ------------------------ -------------------------------------------------- -------- PAR | INT | DET | AUTHID --- | --- | --- | ------------ SYS DBMS_DBFS_SFS REORGANIZEFS 11424 | 52 |（null）| PACKAGE | NO | NO（null）（null）NO | NO | NO | CURRENT_USER</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB46219"></a><div class="props_rev_3"><a id="GUID-3DF29109-3B00-4C76-819F-6017BF4671A0" name="GUID-3DF29109-3B00-4C76-819F-6017BF4671A0"></a><h4 id="ADLOB-GUID-3DF29109-3B00-4C76-819F-6017BF4671A0" class="sect4">调用在线文件系统重组</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过创建临时DBFS文件系统来执行联机文件系统重组。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>创建具有所需新组织和结构的临时DBFS文件系统：包括所需的目标表空间（可能与正在重组的文件系统相同的表空间），所需的目标SecureFiles LOB存储属性（压缩，加密或重复数据删除）等等。</span></li>
                        <li><span>调用PL / SQL过程以使用新创建的临时文件系统重新组织DBFS文件系统以进行数据移动。</span></li>
                        <li><span>重组过程完成后，删除临时文件系统。</span></li>
                     </ol>
                     <div class="section">
                        <p>下面的示例使用名为<code class="codeph">TMP_FS</code>的临时文件系统将表空间<code class="codeph">TS1</code> DBFS文件系统<code class="codeph">FS1</code>重新组织为新的表空间<code class="codeph">TS2</code> ，其中所有文件系统都属于数据库用户<code class="codeph">dbfs_user</code> ：</p><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME / rdbms / admin $ sqlplus dbfs_user / *** @dbfs_create_filesystem TS2 TMP_FS EXEC DBMS_DBFS_SFS.REORGANIZEFS（'FS1'，'TMP_FS'）; @dbfs_drop_filesystem TMP_FS退出;</pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TMP_FS</code>可以具有任何有效名称。它旨在作为临时占位符，可以删除（如上例所示）或保留为原始文件系统的完全物化的时间点快照。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FS1</code>是原始文件系统，不受尝试重组的影响。在重组期间，它仍可用于所有DBFS操作，包括SQL，PL / SQL和<code class="codeph">dbfs_client</code>挂载和命令行。在重组结束时，FS1具有用于创建<code class="codeph">TMP_FS</code>的新结构和组织，反之亦然（ <code class="codeph">TMP_FS</code>将具有最初用于<code class="codeph">FS1</code>的结构和组织）。如果重组因任何原因失败，DBFS会尝试清除<code class="codeph">FS1</code>的内部状态。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">TS2</code>需要足够的空间来容纳<code class="codeph">FS1</code>所有活动（未删除）的文件和目录。
                              </p>
                           </li>
                           <li>
                              <p>如果文件系统在同一个表空间中作为收缩的一部分移动，则<code class="codeph">TS1</code>至少需要<code class="codeph">FS1</code>使用的空间量的两倍。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03687.georaster-datatypes.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The object-relational implementation of GeoRaster consists of a set of object data types for storing data and system data."></meta>
      <meta name="description" content="The object-relational implementation of GeoRaster consists of a set of object data types for storing data and system data."></meta>
      <title>GeoRaster数据类型和相关结构</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="The object-relational implementation of GeoRaster consists of a set of object data types for storing data and system data."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="georaster-overview-and-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="georaster-database-creation-management.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="georaster-overview-and-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="georaster-database-creation-management.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GeoRaster数据类型和相关结构</li>
            </ol>
            <a id="GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" name="GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A"></a><a id="GEORS200"></a>
            
            <h2 id="GEORS-GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" class="sect2"><span class="enumeration_chapter">2</span> GeoRaster数据类型和相关结构</h2>
         </header>
         <div class="ind">
            <div>
               <p>GeoRaster的对象关系实现由一组用于存储数据和系统数据的对象数据类型组成。</p>
               <p>每个图像或网格栅格数据存储在SDO_GEORASTER类型的列中，并且该栅格数据中的块存储在SDO_RASTER类型的栅格数据表中，如<a href="georaster-overview-and-concepts.html#GUID-DB21CC32-06DC-4E18-A4FB-B15C389C1F72" title="GeoRaster优化元数据和数据的物理存储。">GeoRaster物理存储中</a>所解释和说明的。本章包含以下主要部分。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632">SDO_GEORASTER对象类型</a><br>在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。
                  </li>
                  <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378">SDO_RASTER对象类型和栅格数据表</a><br>在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。
                  </li>
                  <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6">其他GeoRaster类型</a><br>GeoRaster还提供了一些其他数据类型。
                  </li>
                  <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a><br>GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。
                  </li>
                  <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-16D246D1-7895-4C68-BFFC-79DBA2926C46">GeoRaster XML Schema</a><br>GeoRaster定义了一个XML模式来存储和管理GeoRaster元数据。
                  </li>
               </ul>
            </div>
            <a id="GEORS953"></a><div class="props_rev_3"><a id="GUID-80616475-2A56-43B9-B707-58B369661632" name="GUID-80616475-2A56-43B9-B707-58B369661632"></a><h3 id="GEORS-GUID-80616475-2A56-43B9-B707-58B369661632" class="sect3"><span class="enumeration_section">2.1</span> SDO_GEORASTER对象类型</h3>
               <div>
                  <p>在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。</p>
                  <p>SDO_GEORASTER对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_georaster AS OBJECT（rasterType NUMBER，spatialExtent SDO_GEOMETRY，rasterDataTable VARCHAR2（128），rasterID NUMBER，metadata XMLType）;</pre><p>以下部分描述了每个SDO_GEORASTER属性的语义。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-FC03ECF3-D18F-46BE-A8D5-6B41AAA937AF">rasterType属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F">spatialExtent属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-212AA5DB-FBB5-4B56-96D8-DF72403E372C">rasterDataTable属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-9D0532DD-1A16-433A-AB57-205B2A0CAF19">rasterID属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-3460694F-88BD-4132-B923-A4F06A058F43">元数据属性</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" title="GeoRaster的对象关系实现由一组用于存储数据和系统数据的对象数据类型组成。">GeoRaster数据类型和相关结构</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS954"></a><div class="props_rev_3"><a id="GUID-FC03ECF3-D18F-46BE-A8D5-6B41AAA937AF" name="GUID-FC03ECF3-D18F-46BE-A8D5-6B41AAA937AF"></a><h4 id="GEORS-GUID-FC03ECF3-D18F-46BE-A8D5-6B41AAA937AF" class="sect4"><span class="enumeration_section">2.1.1</span> rasterType属性</h4>
                  <div>
                     <p><code class="codeph">rasterType</code>属性必须是<code class="codeph">[d][b][t][gt]</code>格式的5位数字，其中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">[d]</code>确定空间维度的数量。当前版本必须为2。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[b]</code>表示带或层信息：0表示一个带或层; 1表示一个或多个带或层。请注意，您<span class="italic">未</span>在此字段中指定波段或图层的总数。（有关波段和图层的信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-9E5186D8-1206-4619-A260-F689FF724CFC" title="在GeoRaster中，band和layer是不同的概念。">Bands_ Layers_和Metadata</a> 。）
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[t]</code>保留供将来使用，应指定为0（零）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[gt]</code>标识2位数的GeoRaster类型，并且必须是以下值之一：</p>
                           <div class="tblformal" id="GUID-FC03ECF3-D18F-46BE-A8D5-6B41AAA937AF__GUID-1927D903-68CE-49CD-B921-2060ADE60AC2">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" width="90%" border="1" summary="This 2 column table gives [gt] (GeoRaster type) values and meanings. Column 1 is the [gt] Value. Column 2 is the meaning. " frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="13%" id="d11341e236">[值]价值</th>
                                       <th align="left" valign="bottom" width="87%" id="d11341e239">含义</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="13%" id="d11341e244" headers="d11341e236 ">
                                          <p>00</p>
                                       </td>
                                       <td align="left" valign="top" width="87%" headers="d11341e244 d11341e239 ">
                                          <p>保留供Oracle使用。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="13%" id="d11341e251" headers="d11341e236 ">
                                          <p>01</p>
                                       </td>
                                       <td align="left" valign="top" width="87%" headers="d11341e251 d11341e239 ">
                                          <p>任何GeoRaster类型。这是当前版本支持的唯一值。此值导致GeoRaster不应用与可能在将来版本中实现的特定类型相关联的任何限制。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="13%" id="d11341e258" headers="d11341e236 ">
                                          <p>02-50</p>
                                       </td>
                                       <td align="left" valign="top" width="87%" headers="d11341e258 d11341e239 ">
                                          <p>保留供Oracle使用。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="13%" id="d11341e265" headers="d11341e236 ">
                                          <p>51-99</p>
                                       </td>
                                       <td align="left" valign="top" width="87%" headers="d11341e265 d11341e239 ">
                                          <p>保留供客户在将来的版本中使用。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </li>
                     </ul>
                     <p>例如，RasterType值为20001表示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>二维数据</p>
                        </li>
                        <li>
                           <p>一个乐队（层）</p>
                        </li>
                        <li>
                           <p>任何GeoRaster类型</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632" title="在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。">SDO_GEORASTER对象类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS955"></a><div class="props_rev_3"><a id="GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F" name="GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F"></a><h4 id="GEORS-GUID-E392DB15-C7C3-40E8-815C-527D2CD1F45F" class="sect4"><span class="enumeration_section">2.1.2</span> spatialExtent属性</h4>
                  <div>
                     <p><code class="codeph">spatialExtent</code>属性标识与栅格数据关联的<span class="bold">空间范围</span>或<span class="italic">覆盖区</span> 。空间范围是SDO_GEOMETRY类型的Oracle Spatial and Graph几何。空间范围几何可以在任何坐标系中，不一定在GeoRaster模型空间中，并且可以通过指定几何的SQL UPDATE语句直接更新。但是，如果GeoRaster对象是地理参考的，并且使用以下任何方法生成空间范围几何，则空间范围几何体位于GeoRaster对象的模型（地面）空间中：调用<a href="SDO_GEOR-reference.html#GUID-45E80146-A186-418F-9396-260BCC7A3BE8">SDO_GEOR.generateSpatialExtent</a>函数或指定<code class="codeph">spatialExtent=TRUE</code>作为<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a>过程或GeoRaster客户端加载程序的存储参数（在<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">GeoRaster工具：Viewer_ Loader_ Exporter中描述</a> ）。
                     </p>
                     <p>您可以调用SDO_CS.transform将其转换为任何其他支持的坐标系。如果空间范围的SRID值为null或0（零），则空间范围设置为null，而不是单元格空间。<a href="../spatl/spatial-datatypes-metadata.html#SPATL489" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide中</span></a>描述了SDO_GEOMETRY数据类型。
                     </p>
                     <p>GeoRaster空间范围通常用于在GeoRaster列上构建空间R树索引。例如，当所有GeoRaster对象位于不同的局部投影中时，您可以对所有空间范围使用大地测量SRID，然后在GeoRaster表上构建基于全地球的空间索引，并在全局范围内空间搜索GeoRaster对象。由于GeoRaster应用程序的空间索引具有潜在的性能优势，因此几何与<code class="codeph">spatialExtent</code>属性相关联，而不是包含在<code class="codeph">metadata</code>属性中描述的XML <code class="codeph">metadata</code> <a href="georaster-datatypes.html#GUID-3460694F-88BD-4132-B923-A4F06A058F43">数据属性中</a> 。有关索引GeoRaster数据的信息，请参阅<a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">索引GeoRaster对象</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632" title="在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。">SDO_GEORASTER对象类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS956"></a><div class="props_rev_3"><a id="GUID-212AA5DB-FBB5-4B56-96D8-DF72403E372C" name="GUID-212AA5DB-FBB5-4B56-96D8-DF72403E372C"></a><h4 id="GEORS-GUID-212AA5DB-FBB5-4B56-96D8-DF72403E372C" class="sect4"><span class="enumeration_section">2.1.3</span> rasterDataTable属性</h4>
                  <div>
                     <p><code class="codeph">rasterDataTable</code>属性标识栅格数据表的名称。栅格数据表必须是SDO_RASTER类型的对象表或包含由对象类型SDO_RASTER定义的所有列的关系表。它包含存储的每个栅格块的行。您必须创建并（如有必要）删除栅格数据表。您永远不应该直接修改此表中的行，但您可以查询此表以访问栅格数据。
                     </p>
                     <p>此属性必须是有效的非引用标识符，不带任何句点分隔符，并且所有字母数字字符必须为大写。</p>
                     <p>有关栅格数据表和SDO_RASTER类型的详细信息，请参阅<a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632" title="在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。">SDO_GEORASTER对象类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS957"></a><div class="props_rev_3"><a id="GUID-9D0532DD-1A16-433A-AB57-205B2A0CAF19" name="GUID-9D0532DD-1A16-433A-AB57-205B2A0CAF19"></a><h4 id="GEORS-GUID-9D0532DD-1A16-433A-AB57-205B2A0CAF19" class="sect4"><span class="enumeration_section">2.1.4</span> rasterID属性</h4>
                  <div>
                     <p><code class="codeph">rasterID</code>属性值存储在栅格数据表的行中，以标识哪些行属于GeoRaster对象。<code class="codeph">rasterDataTable</code>属性和<code class="codeph">rasterID</code>属性一起唯一标识数据库中的GeoRaster对象。也就是说，每个GeoRaster对象都有一个栅格数据表，尽管栅格数据表可以包含来自多个GeoRaster对象的数据。
                     </p>
                     <p>您可以为新的GeoRaster对象指定<code class="codeph">rasterID</code>和<code class="codeph">rasterDataTable</code>属性，只要每对在数据库中是唯一的。如果未指定这些值，则它们由<a href="SDO_GEOR-reference.html#GUID-524A6FD9-24D3-4CCA-A9D1-0B23819E4CA6">SDO_GEOR.init</a>和<a href="SDO_GEOR-reference.html#GUID-7D203CE7-A6F0-4545-92B4-5E8ED3E007FE">SDO_GEOR.createBlank</a>函数自动生成。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632" title="在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。">SDO_GEORASTER对象类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS958"></a><div class="props_rev_3"><a id="GUID-3460694F-88BD-4132-B923-A4F06A058F43" name="GUID-3460694F-88BD-4132-B923-A4F06A058F43"></a><h4 id="GEORS-GUID-3460694F-88BD-4132-B923-A4F06A058F43" class="sect4"><span class="enumeration_section">2.1.5</span>元数据属性</h4>
                  <div>
                     <p><code class="codeph">metadata</code>属性包含由Oracle定义的GeoRaster元数据。元数据由GeoRaster元数据XML模式描述，该模式在<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">GeoRaster Metadata XML Schema中有记录</a> 。必须根据此XML架构验证任何GeoRaster对象的元数据，并且还必须使用<a href="SDO_GEOR-reference.html#GUID-72D06328-134D-473E-8279-F0C3B6ADEE34">SDO_GEOR.validateGeoRaster</a>函数对其进行验证，该函数强加了此XML架构未定义的其他限制。
                     </p>
                     <p>GeoRaster元数据的默认存储选项是二进制XML。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632" title="在GeoRaster对象关系模型中，栅格图像或网格对象存储在单个行中，位于用户定义表中的对象类型SDO_GEORASTER的单个列中。具有至少一个类型为SDO_GEORASTER的列的表称为GeoRaster表。">SDO_GEORASTER对象类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS959"></a><div class="props_rev_3"><a id="GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" name="GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378"></a><h3 id="GEORS-GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" class="sect3"><span class="enumeration_section">2.2</span> SDO_RASTER对象类型和栅格数据表</h3>
               <div>
                  <p>在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。</p>
                  <p>GeoRaster对象的单元格数据被阻止，每个块作为一行存储在栅格数据表中。您在指定此表<code class="codeph">rasterDataTable</code>的SDO_GEORASTER对象的属性，如解释<a href="georaster-datatypes.html#GUID-212AA5DB-FBB5-4B56-96D8-DF72403E372C">rasterDataTable属性</a> 。在将任何单元格数据存储在其中之前，必须创建栅格数据表。
                  </p>
                  <p>栅格数据表是一个对象表，定义为SDO_RASTER对象类型的表或关系表，包括由对象类型SDO_RASTER定义的所有列。 SDO_RASTER对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_raster AS OBJECT（rasterID NUMBER，pyramidLevel NUMBER，bandBlockNumber NUMBER，rowBlockNumber NUMBER，columnBlockNumber NUMBER，blockMBR SDO_GEOMETRY，rasterBlock BLOB）;</pre><p>以下部分描述了每个SDO_RASTER属性的语义。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-9FCC8104-FAC4-4EFA-9BB5-66BD35E9E902">rasterID属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-9FDB26F7-7EC2-4B50-99F5-FBF57BE46EFE">pyramidLevel属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-A75AD25E-C3A5-4FCF-8EB3-E2B33EC3A638">bandBlockNumber属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-426144E3-41B8-40A0-B890-FA566F6529CB">rowBlockNumber属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-A925A136-FCE6-4AD3-A089-7EDBC4872B99">columnBlockNumber属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-E06BC978-1039-48A9-B6B9-DE4152AB42B8">blockMBR属性</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-0B5F4A05-37FF-402C-A69F-6304287438AA">rasterBlock属性</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" title="GeoRaster的对象关系实现由一组用于存储数据和系统数据的对象数据类型组成。">GeoRaster数据类型和相关结构</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS960"></a><div class="props_rev_3"><a id="GUID-9FCC8104-FAC4-4EFA-9BB5-66BD35E9E902" name="GUID-9FCC8104-FAC4-4EFA-9BB5-66BD35E9E902"></a><h4 id="GEORS-GUID-9FCC8104-FAC4-4EFA-9BB5-66BD35E9E902" class="sect4"><span class="enumeration_section">2.2.1</span> rasterID属性</h4>
                  <div>
                     <p>SDO_RASTER对象中的<code class="codeph">rasterID</code>属性必须是与其关联的SDO_GEORASTER对象中的<code class="codeph">rasterID</code>值匹配的<code class="codeph">rasterID</code> 。（在<code class="codeph">rasterID</code>属性中描述了SDO_GEORASTER对象的<a href="georaster-datatypes.html#GUID-9D0532DD-1A16-433A-AB57-205B2A0CAF19">rasterID属性</a> 。）这些数字的匹配将栅格块标识为属于特定的GeoRaster对象。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS961"></a><div class="props_rev_3"><a id="GUID-9FDB26F7-7EC2-4B50-99F5-FBF57BE46EFE" name="GUID-9FDB26F7-7EC2-4B50-99F5-FBF57BE46EFE"></a><h4 id="GEORS-GUID-9FDB26F7-7EC2-4B50-99F5-FBF57BE46EFE" class="sect4"><span class="enumeration_section">2.2.2</span> pyramidLevel属性</h4>
                  <div>
                     <p><code class="codeph">pyramidLevel</code>属性标识此单元格块的金字塔等级。金字塔等级为0或任何正整数。金字塔等级用于创建需要较少存储空间的降低分辨率的图像。金字塔等级为0表示原始栅格数据;也就是说，图像分辨率没有降低，所需的存储空间也没有变化。大于0（零）的值表示图像分辨率水平越来越低，存储空间要求也越来越低。有关金字塔的更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-739D74CC-E256-4E89-AB7F-9251054B9E82" title="金字塔是GeoRaster对象的子对象，表示不同大小和分辨率的栅格图像或栅格数据。">金字塔</a> 。
                     </p>
                     <p>此属性和<code class="codeph">bandBlockNumber</code>属性（在<a href="georaster-datatypes.html#GUID-A75AD25E-C3A5-4FCF-8EB3-E2B33EC3A638">bandBlockNumber属性中</a>描述）也用于指示位图掩码及其金字塔。有关位图蒙版，位图蒙版金字塔以及如何使用<code class="codeph">pyramidLevel</code>和<code class="codeph">bandBlockNumber</code>属性的详细信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-20696505-9B9E-4E08-B165-1B23A574BEB3" title="位图掩码是一个特殊的一位深矩形栅格网格，每个像素的值为0或1。它用于在另一个图像内定义不规则形状的区域。1位定义区域的内部，0位定义区域的外部。">位图蒙版</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS962"></a><div class="props_rev_3"><a id="GUID-A75AD25E-C3A5-4FCF-8EB3-E2B33EC3A638" name="GUID-A75AD25E-C3A5-4FCF-8EB3-E2B33EC3A638"></a><h4 id="GEORS-GUID-A75AD25E-C3A5-4FCF-8EB3-E2B33EC3A638" class="sect4"><span class="enumeration_section">2.2.3</span> bandBlockNumber属性</h4>
                  <div>
                     <p><code class="codeph">bandBlockNumber</code>属性标识沿带维度的块编号。有关波段和图层的信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-9E5186D8-1206-4619-A260-F689FF724CFC" title="在GeoRaster中，band和layer是不同的概念。">Bands_ Layers_和Metadata</a> 。有关<code class="codeph">bandBlockNumber</code>属性如何与位图蒙版及其金字塔一起使用的更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-20696505-9B9E-4E08-B165-1B23A574BEB3" title="位图掩码是一个特殊的一位深矩形栅格网格，每个像素的值为0或1。它用于在另一个图像内定义不规则形状的区域。1位定义区域的内部，0位定义区域的外部。">位图蒙版</a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS963"></a><div class="props_rev_3"><a id="GUID-426144E3-41B8-40A0-B890-FA566F6529CB" name="GUID-426144E3-41B8-40A0-B890-FA566F6529CB"></a><h4 id="GEORS-GUID-426144E3-41B8-40A0-B890-FA566F6529CB" class="sect4"><span class="enumeration_section">2.2.4</span> rowBlockNumber属性</h4>
                  <div>
                     <p><code class="codeph">rowBlockNumber</code>属性标识沿行维度的块编号。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS964"></a><div class="props_rev_3"><a id="GUID-A925A136-FCE6-4AD3-A089-7EDBC4872B99" name="GUID-A925A136-FCE6-4AD3-A089-7EDBC4872B99"></a><h4 id="GEORS-GUID-A925A136-FCE6-4AD3-A089-7EDBC4872B99" class="sect4"><span class="enumeration_section">2.2.5</span> columnBlockNumber属性</h4>
                  <div>
                     <p><code class="codeph">columnBlockNumber</code>属性标识列维度上的块编号。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS965"></a><div class="props_rev_3"><a id="GUID-E06BC978-1039-48A9-B6B9-DE4152AB42B8" name="GUID-E06BC978-1039-48A9-B6B9-DE4152AB42B8"></a><h4 id="GEORS-GUID-E06BC978-1039-48A9-B6B9-DE4152AB42B8" class="sect4"><span class="enumeration_section">2.2.6</span> blockMBR属性</h4>
                  <div>
                     <p><code class="codeph">blockMBR</code>属性是此块的最小边界矩形（MBR）的几何（类型为SDO_GEOMETRY）。几何在单元格空间中（即，其SRID值为null），并且所有纵坐标都是整数。纵坐标表示此块中存储的最小行和列以及最大行和列。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS966"></a><div class="props_rev_3"><a id="GUID-0B5F4A05-37FF-402C-A69F-6304287438AA" name="GUID-0B5F4A05-37FF-402C-A69F-6304287438AA"></a><h4 id="GEORS-GUID-0B5F4A05-37FF-402C-A69F-6304287438AA" class="sect4"><span class="enumeration_section">2.2.7</span> rasterBlock属性</h4>
                  <div>
                     <p><code class="codeph">rasterBlock</code>属性包含此块的所有栅格单元数据。它还用于存储GeoRaster对象的位图蒙版。<code class="codeph">rasterBlock</code>属性的类型为BLOB。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378" title="在GeoRaster对象关系模型中，栅格数据表用于存储栅格图像中的所有单元数据。">SDO_RASTER对象类型和栅格数据表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS967"></a><div class="props_rev_3"><a id="GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" name="GUID-690756C5-5114-47B0-B417-B939BF5FBBA6"></a><h3 id="GEORS-GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" class="sect3"><span class="enumeration_section">2.3</span>其他GeoRaster类型</h3>
               <div>
                  <p>GeoRaster还提供了一些其他数据类型。</p>
                  <p>除了SDO_GEORASTER，SDO_RASTER和SDO_RANGE_ARRAY以及SDO_RANGE之外，GeoRaster还提供了其他几种对象和集合类型，用于特定类型的操作。与用于存储在数据库中的SDO_GEORASTER和SDO_RASTER类型（例如，在表中定义列）不同，本节中描述的类型仅与当前版本中的GeoRaster PL / SQL API一起使用。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC">SDO_GEOR_HISTOGRAM对象类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-CAF85499-604A-4406-9025-722051C21434">SDO_GEOR_HISTOGRAM_ARRAY集合类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-CEE244F7-DDDA-4B97-B128-53F97E89D9B3">SDO_GEOR_COLORMAP对象类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-62D45A64-ABEB-4386-BD2F-0003BF2CC551">SDO_GEOR_GRAYSCALE对象类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-512FF9E1-5DFE-4D90-ABCB-DE82CA02DA25">SDO_RASTERSET集合类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57">SDO_GEOR_SRS对象类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-339ED929-236B-4178-ADAB-F4901E37EBF6">SDO_GEOR_GCP对象类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-622DEDBA-8E96-46A3-AFC3-DEBEEE15561D">SDO_GEOR_GCP_ COLLECTION集合类型</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B">SDO_GEOR_GCPGEOREFTYPE对象类型</a><br></li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="georaster-datatypes.html#GUID-80616475-2A56-43B9-B707-58B369661632">SDO_GEORASTER对象类型</a></li>
                        <li><a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378">SDO_RASTER对象类型和栅格数据表</a></li>
                        <li><a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D">NODATA值和值范围</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" title="GeoRaster的对象关系实现由一组用于存储数据和系统数据的对象数据类型组成。">GeoRaster数据类型和相关结构</a></p>
                     </div>
                  </div>
               </div><a id="GEORS1181"></a><a id="GEORS1180"></a><div class="props_rev_3"><a id="GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC" name="GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC"></a><h4 id="GEORS-GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC" class="sect4"><span class="enumeration_section">2.3.1</span> SDO_GEOR_HISTOGRAM对象类型</h4>
                  <div>
                     <p>在GeoRaster中，直方图使用<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="This appendix provides the XML schema definition that is used for GeoRaster metadata.">GeoRaster Metadata XML Schema中</a>定义的XML模式存储在GeoRaster元<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">数据中</a> 。在PL / SQL API中使用SDO_GEOR_HISTOGRAM对象类型来包含GeoRaster对象或图层的直方图数据。这些层具有相同的直方图数据结构。每个单元具有一个值，并且对于每个单元值或值范围，可以存在具有该值或落在该范围内的任何数量的单元。
                     </p>
                     <p>SDO_GEOR_HISTOGRAM对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_geor_histogram AS OBJECT（cellValue SDO_NUMBER_ARRAY，count SDO_NUMBER_ARRAY）;</pre><p><a href="georaster-datatypes.html#GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC__BGBEDECG" title="此2列表列出了SDO_GEOR_HISTOGRAM对象类型属性。第1列是属性。第2列解释了该属性。">表2-1</a>描述了SDO_GEOR_HISTOGRAM对象类型的属性。<code class="codeph">cellValue</code>数组和<code class="codeph">count</code>数组必须具有相同的长度。
                     </p>
                     <div class="tblformal" id="GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC__BGBEDECG">
                        <p class="titleintable">表2-1 SDO_GEOR_HISTOGRAM对象类型属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_HISTOGRAM对象类型属性" width="100%" border="1" summary="This 2 column table lists the SDO_GEOR_HISTOGRAM Object Type Attributes.  Column 1 is the attribute. Column 2 explains the attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11341e1288">属性</th>
                                 <th align="left" valign="bottom" id="d11341e1291">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1296" headers="d11341e1288 ">
                                    <p>cellValue</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1296 d11341e1291 ">
                                    <p>单元格值数组。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1303" headers="d11341e1288 ">
                                    <p>计数</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1303 d11341e1291 ">
                                    <p>与每个单元格值或单元格值范围对应的单元格数。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>直方图包含单元格值（以及隐含值范围）以及与每个单元格值或每个单元格值范围相关的单元格总数。例如，如果（cellValue1，count1）和（cellValue2，count2）是直方图中按升序排列的两个相邻条目，则隐含值范围为[cellValue1，cellValue2]，此范围内的单元格总数为count1。单元格值范围始终包含在其下边界中，并且独占于上边界。每个范围的大小不一定必须相同。使用此示例，范围等于或大于cellValue1且小于cellValue2。对于较低的单元深度（例如，1位至8位整数），单元值范围通常与单元值相同。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-CAF85499-604A-4406-9025-722051C21434" name="GUID-CAF85499-604A-4406-9025-722051C21434"></a><h4 id="GEORS-GUID-CAF85499-604A-4406-9025-722051C21434" class="sect4"><span class="enumeration_section">2.3.2</span> SDO_GEOR_HISTOGRAM_ARRAY集合类型</h4>
                  <div>
                     <p>SDO_GEOR_HISTOGRAM_ARRAY集合类型用于存储<a href="georaster-datatypes.html#GUID-0EFD151A-375D-493F-8C0F-CFD2DA8638FC">SDO_GEOR_HISTOGRAM</a>对象的数组（集合）。
                     </p>
                     <p>SDO_GEOR_HISTOGRAM_ARRAY集合类型定义为：</p><pre class="oac_no_warn" dir="ltr">创建类型sdo_geor_histogram_array AS VARRAY（10485760）OF SDO_GEOR_HISTOGRAM;</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1183"></a><a id="GEORS1182"></a><div class="props_rev_3"><a id="GUID-CEE244F7-DDDA-4B97-B128-53F97E89D9B3" name="GUID-CEE244F7-DDDA-4B97-B128-53F97E89D9B3"></a><h4 id="GEORS-GUID-CEE244F7-DDDA-4B97-B128-53F97E89D9B3" class="sect4"><span class="enumeration_section">2.3.3</span> SDO_GEOR_COLORMAP对象类型</h4>
                  <div>
                     <p>在GeoRaster中，颜色信息使用<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="This appendix provides the XML schema definition that is used for GeoRaster metadata.">GeoRaster Metadata XML Schema中</a>定义的XML模式存储在GeoRaster元<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">数据中</a> 。SDO_GEOR_COLORMAP对象类型在PL / SQL API中用于包含色彩映射信息，即伪彩色信息，用于标识用于显示具有特定特定单元格的颜色的红色，绿色，蓝色和（可选）alpha值值或处于特定值范围内。色图也称为伪彩色表或调色板表。GeoRaster中的色彩映射是默认的sRGB ColorSpace，它是建议的标准RGB色彩空间，如下所述</p>
                     <p><a href="http://www.w3.org/Graphics/Color/sRGB.html" target="_blank"><code class="codeph">http://www.w3.org/Graphics/Color/sRGB.html</code></a></p>
                     <p>红色，绿色，蓝色和alpha值的范围都被缩放为从0到255的8位无符号整数。</p>
                     <p><a id="d11341e1427" class="indexterm-anchor"></a><a id="d11341e1429" class="indexterm-anchor"></a><a id="d11341e1433" class="indexterm-anchor"></a> Alpha也称为不透明度。alpha值为255表示颜色完全不透明，alpha值为0表示颜色完全透明。颜色分量值永远不会被alpha值预乘。
                     </p>
                     <p>SDO_GEOR_COLORMAP对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_geor_colormap AS OBJECT（cellValue SDO_NUMBER_ARRAY，红色SDO_NUMBER_ARRAY，绿色SDO_NUMBER_ARRAY，蓝色SDO_NUMBER_ARRAY，alpha SDO_NUMBER_ARRAY）;</pre><p><a href="georaster-datatypes.html#GUID-CEE244F7-DDDA-4B97-B128-53F97E89D9B3__BGBIFAIH" title="此2列表列出了SDO_GEOR_COLORMAP对象类型属性。第1列是属性。第2列解释了该属性。">表2-2</a>描述了SDO_GEOR_COLORMAP对象类型的属性。每个属性都是一个数字数组。数组必须具有相同的长度，并且每个数组中相同索引的值必须彼此对应。每个<code class="codeph">cellValue</code>值必须与GeoRaster对象的<code class="codeph">cellDepth</code>值一致。
                     </p>
                     <p>色彩映射包含单元格值（以及隐含值范围）以及与每个单元格值或每个单元格值范围相关的红色，绿色，蓝色和/或Alpha值。例如，如果（cellValue1，red1，green1，blue1，alpha1）和（cellValue2，red2，green2，blue2，alpha2）是colormap中按升序排列的两个相邻条目，则隐含的值范围为[cellValue1，cellValue2]，与此范围内所有细胞相关的颜色成分是（red1，green1，blue1，alpha1）。单元格值范围始终包含在其下边界中，并且独占于上边界。每个范围的大小不一定必须相同。在此示例中，范围等于或大于cellValue1且小于cellValue2。对于较低的单元深度（例如，1位至8位整数），单元值范围通常与单元值相同。</p>
                     <div class="tblformal" id="GUID-CEE244F7-DDDA-4B97-B128-53F97E89D9B3__BGBIFAIH">
                        <p class="titleintable">表2-2 SDO_GEOR_COLORMAP对象类型属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_COLORMAP对象类型属性" width="100%" border="1" summary="This 2 column table lists the SDO_GEOR_COLORMAP Object Type Attributes. Column 1 is the attribute. Column 2 explains the attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11341e1466">属性</th>
                                 <th align="left" valign="bottom" id="d11341e1469">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1474" headers="d11341e1466 ">
                                    <p>cellValue</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1474 d11341e1469 ">
                                    <p>单元格值数组。值必须按升序存储。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1481" headers="d11341e1466 ">
                                    <p>红色</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1481 d11341e1469 ">
                                    <p>用于伪彩色显示具有<code class="codeph">cellValue</code>的值或值范围的单元格的红色分量值的数组。必须是0到255之间的整数值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1491" headers="d11341e1466 ">
                                    <p>绿色</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1491 d11341e1469 ">
                                    <p>用于伪彩色显示在<code class="codeph">cellValue</code>中具有值或值范围的单元格的绿色分量值的数组。必须是0到255之间的整数值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1501" headers="d11341e1466 ">
                                    <p>蓝色</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1501 d11341e1469 ">
                                    <p>用于伪彩色显示在<code class="codeph">cellValue</code>中具有值或值范围的单元格的蓝色分量值的数组。必须是0到255之间的整数值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1511" headers="d11341e1466 ">
                                    <p>α</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1511 d11341e1469 ">
                                    <p>用于伪彩色显示在<code class="codeph">cellValue</code>中具有值或值范围的单元格的alpha分量值数组。必须是0到255之间的整数值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1185"></a><a id="GEORS1184"></a><div class="props_rev_3"><a id="GUID-62D45A64-ABEB-4386-BD2F-0003BF2CC551" name="GUID-62D45A64-ABEB-4386-BD2F-0003BF2CC551"></a><h4 id="GEORS-GUID-62D45A64-ABEB-4386-BD2F-0003BF2CC551" class="sect4"><span class="enumeration_section">2.3.4</span> SDO_GEOR_GRAYSCALE对象类型</h4>
                  <div>
                     <p>在GeoRaster中，灰度信息使用<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="This appendix provides the XML schema definition that is used for GeoRaster metadata.">GeoRaster Metadata XML Schema中</a>定义的XML模式存储在GeoRaster元<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">数据中</a> 。SDO_GEOR_GRAYSCALE对象类型在PL / SQL API中用于包含灰度信息，用于标识用于显示具有特定值或落入特定值范围的单元格的灰度值。可以使用此灰度表以线性比例“拉伸”灰度表单元格值，以便可以正确显示原始栅格数据。灰度表值范围是从0到255的8位无符号整数值。灰度表也称为对比表或查找表。
                     </p>
                     <p>SDO_GEOR_GRAYSCALE对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_geor_grayscale AS OBJECT（cellValue SDO_NUMBER_ARRAY，灰色SDO_NUMBER_ARRAY）;</pre><p><a href="georaster-datatypes.html#GUID-62D45A64-ABEB-4386-BD2F-0003BF2CC551__BGBCHCGD" title="此2列表列出了SDO_GEOR_GRAYSCALE对象类型属性。第1列是属性。第2列解释了该属性。">表2-3</a>描述了SDO_GEOR_GRAYSCALE对象类型的属性。<code class="codeph">cellValue</code>数组和<code class="codeph">gray</code>数组必须具有相同的长度。每个<code class="codeph">cellValue</code>值必须与GeoRaster对象的<code class="codeph">cellDepth</code>值一致。
                     </p>
                     <p>灰度包含单元格值（以及隐含值范围）以及与每个单元格值或每个单元格值范围相关的灰度值。例如，如果（cellValue1，gray1）和（cellValue2，gray2）是灰度表中按升序排列的两个相邻条目，则隐含值范围为[cellValue1，cellValue2]，并且灰度颜色与此范围内的所有单元格相关联是灰色的。单元格值范围始终包含在其下边界中，并且独占于上边界。每个范围的大小不一定必须相同。以相同的示例，范围等于或大于cellValue1且小于cellValue2。对于较低的单元深度（例如，1位至8位整数），单元值范围通常与单元值相同。</p>
                     <div class="tblformal" id="GUID-62D45A64-ABEB-4386-BD2F-0003BF2CC551__BGBCHCGD">
                        <p class="titleintable">表2-3 SDO_GEOR_GRAYSCALE对象类型属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_GRAYSCALE对象类型属性" width="100%" border="1" summary="This 2 column table lists the SDO_GEOR_GRAYSCALE Object Type Attributes. Column 1 is the attribute. Column 2 explains the attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11341e1615">属性</th>
                                 <th align="left" valign="bottom" id="d11341e1618">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1623" headers="d11341e1615 ">
                                    <p>cellValue</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1623 d11341e1618 ">
                                    <p>单元格值数组。值必须按升序存储。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1630" headers="d11341e1615 ">
                                    <p>灰色</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1630 d11341e1618 ">
                                    <p>用于灰度显示具有<code class="codeph">cellValue</code>的值或值范围的单元格的灰度分量值的<code class="codeph">cellValue</code> 。必须是0到255之间的整数值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1186"></a><div class="props_rev_3"><a id="GUID-512FF9E1-5DFE-4D90-ABCB-DE82CA02DA25" name="GUID-512FF9E1-5DFE-4D90-ABCB-DE82CA02DA25"></a><h4 id="GEORS-GUID-512FF9E1-5DFE-4D90-ABCB-DE82CA02DA25" class="sect4"><span class="enumeration_section">2.3.5</span> SDO_RASTERSET集合类型</h4>
                  <div>
                     <p>SDO_RASTERSET集合类型用作查询栅格数据块（一个或多个块，整个集或子集）的表函数的返回类型。</p>
                     <p>SDO_RASTERSET集合类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_rasterset AS SDO_RASTER表;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378">SDO_RASTER对象类型和栅格数据表</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="GEORS1188"></a><a id="GEORS1187"></a><div class="props_rev_3"><a id="GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57" name="GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57"></a><h4 id="GEORS-GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57" class="sect4"><span class="enumeration_section">2.3.6</span> SDO_GEOR_SRS对象类型</h4>
                  <div>
                     <p>在GeoRaster中，空间参考系统（SRS）信息使用GeoRaster元数据XML模式中定义的XML模式存储在GeoRaster元<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">数据中</a> 。在PL / SQL API中使用SDO_GEOR_SRS对象类型来包含与GeoRaster对象的空间引用相关的信息。元数据和对象类型包含相同的信息。您可以使用对象类型从GeoRaster对象检索SRS信息，或者在GeoRaster对象中加载和更新SRS信息。
                     </p>
                     <p>SDO_GEOR_SRS对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_geor_srs AS OBJECT（isReferenced VARCHAR2（5），isRectified VARCHAR2（5），isOrthoRectified VARCHAR2（5），srid NUMBER，spatialResolution SDO_NUMBER_ARRAY，spatialTolerance NUMBER，coordLocation NUMBER，rowOff NUMBER，columnOff NUMBER，xOff NUMBER，yOff NUMBER，zOff NUMBER ，rowScale NUMBER，columnScale NUMBER，xScale NUMBER，yScale NUMBER，zScale NUMBER，rowRMS NUMBER，columnRMS NUMBER，totalRMS NUMBER，rowNumerator SDO_NUMBER_ARRAY，rowDenominator SDO_NUMBER_ARRAY，columnNumerator SDO_NUMBER_ARRAY，columnDenominator SDO_NUMBER_ARRAY，xRMS NUMBER，yRMS NUMBER，zRMS NUMBER，modelTotalRMS NUMBER，GCPgeoreferenceModel SDO_GEOR_GCPGEOREFTYPE）;</pre><p><a href="georaster-datatypes.html#GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57__BGBBBHHE" title="此2列表列出了SDO_GEOR_SRS对象类型属性。第1列是属性。第2列解释了该属性。">表2-4</a>描述了SDO_GEOR_SRS对象类型的属性。
                     </p>
                     <div class="tblformal" id="GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57__BGBBBHHE">
                        <p class="titleintable">表2-4 SDO_GEOR_SRS对象类型属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_SRS对象类型属性" width="100%" border="1" summary="This 2 column table lists the SDO_GEOR_SRS object type attributes.  Column 1 is the attribute. Column 2 explains the attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11341e1755">属性</th>
                                 <th align="left" valign="bottom" id="d11341e1758">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1763" headers="d11341e1755 ">
                                    <p>isReferenced</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1763 d11341e1758 ">
                                    <p>如果GeoRaster对象是地理配准的，则为<code class="codeph">TRUE</code> ;如果GeoRaster对象未进行地理配准，则为<code class="codeph">FALSE</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1775" headers="d11341e1755 ">
                                    <p>isRectified</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1775 d11341e1758 ">
                                    <p>如果GeoRaster对象同时进行了地理坐标和地理参考，则为<code class="codeph">TRUE</code> ;如果GeoRaster对象未进行地理坐标，则为<code class="codeph">FALSE</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1787" headers="d11341e1755 ">
                                    <p>isOrthoRectified</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1787 d11341e1758 ">
                                    <p>如果GeoRaster对象经过正射校正，地理坐标和地理参考，则为<code class="codeph">TRUE</code> ;如果GeoRaster对象未被正射校正，则为<code class="codeph">FALSE</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1799" headers="d11341e1755 ">
                                    <p>SRID</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1799 d11341e1758 ">
                                    <p>模型（地面）坐标系的SRID值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1806" headers="d11341e1755 ">
                                    <p>空间分辨率</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1806 d11341e1758 ">
                                    <p>空间分辨率值：数值的数组，每个空间维度一个。每个值指示与由单元的空间维度表示的数据区域相关联的测量单位的数量。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1813" headers="d11341e1755 ">
                                    <p>spatialTolerance</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1813 d11341e1758 ">
                                    <p>公差值，用于控制精度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1820" headers="d11341e1755 ">
                                    <p>coordLocation</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1820 d11341e1758 ">
                                    <p>模型坐标位置定义单元格空间的类型，表示基于上限（即coordLocation = 1）或基于中心（即coordLocation = 0）。有关模型空间和单元格（栅格）空间的更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-E38F1F16-4272-4CC8-A199-C97B11C634BA" title="栅格数据可以包含以下部分或全部元素。">GeoRaster数据模型</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1834" headers="d11341e1755 ">
                                    <p>rowOff</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1834 d11341e1758 ">
                                    <p>行偏移值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1841" headers="d11341e1755 ">
                                    <p>columnOff</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1841 d11341e1758 ">
                                    <p>列偏移值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1848" headers="d11341e1755 ">
                                    <p>x关</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1848 d11341e1758 ">
                                    <p>X偏移值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1855" headers="d11341e1755 ">
                                    <p>YOFF</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1855 d11341e1758 ">
                                    <p>Y偏移值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1863" headers="d11341e1755 ">
                                    <p>佐夫</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1863 d11341e1758 ">
                                    <p>Z偏移值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1870" headers="d11341e1755 ">
                                    <p>rowScale</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1870 d11341e1758 ">
                                    <p>行缩放因子值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1877" headers="d11341e1755 ">
                                    <p>columnScale</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1877 d11341e1758 ">
                                    <p>列缩放因子值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1884" headers="d11341e1755 ">
                                    <p>xScale等</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1884 d11341e1758 ">
                                    <p>X比例因子值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1891" headers="d11341e1755 ">
                                    <p>yScale</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1891 d11341e1758 ">
                                    <p>Y比例因子值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1898" headers="d11341e1755 ">
                                    <p>zScale</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1898 d11341e1758 ">
                                    <p>Z比例因子值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1905" headers="d11341e1755 ">
                                    <p>rowRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1905 d11341e1758 ">
                                    <p>行尺寸精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用控制点计算。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1916" headers="d11341e1755 ">
                                    <p>columnRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1916 d11341e1758 ">
                                    <p>列尺寸精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用控制点计算</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1927" headers="d11341e1755 ">
                                    <p>totalRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1927 d11341e1758 ">
                                    <p>总行数和列精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用控制点计算</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1938" headers="d11341e1755 ">
                                    <p>rowNumerator</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1938 d11341e1758 ">
                                    <p><code class="codeph">pType</code> ， <code class="codeph">nVars</code> ， <code class="codeph">order</code> ， <code class="codeph">nCoefficients</code> ，以及行多项式的分子的所有系数，其中<code class="codeph">pType</code> = 1或2; <code class="codeph">nVars</code> = 0,2或3; 0 &lt;= <code class="codeph">order</code> &lt;= 5;和<code class="codeph">nCoefficients</code>派生自<code class="codeph">pType</code> ， <code class="codeph">nVars</code>和<code class="codeph">order</code> 。多项式在<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理配准模型中</a>进行了解释。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e1982" headers="d11341e1755 ">
                                    <p>rowDenominator</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e1982 d11341e1758 ">
                                    <p><code class="codeph">pType</code> ， <code class="codeph">nVars</code> ， <code class="codeph">order</code> ， <code class="codeph">nCoefficients</code> ，以及行多项式的分母的所有系数，其中<code class="codeph">pType</code> = 1或2; <code class="codeph">nVars</code> = 0,2或3; 0 &lt;= <code class="codeph">order</code> &lt;= 5;和<code class="codeph">nCoefficients</code>派生自<code class="codeph">pType</code> ， <code class="codeph">nVars</code>和<code class="codeph">order</code> 。多项式在<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理配准模型中</a>进行了解释。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2027" headers="d11341e1755 ">
                                    <p>columnNumerator</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2027 d11341e1758 ">
                                    <p><code class="codeph">pType</code> ， <code class="codeph">nVars</code> ， <code class="codeph">order</code> ， <code class="codeph">nCoefficients</code> ，以及列多项式的分子的所有系数，其中<code class="codeph">pType</code> = 1或2; <code class="codeph">nVars</code> = 0,2或3; 0 &lt;= <code class="codeph">order</code> &lt;= 5;和<code class="codeph">nCoefficients</code>派生自<code class="codeph">pType</code> ， <code class="codeph">nVars</code>和<code class="codeph">order</code> 。多项式在<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理配准模型中</a>进行了解释。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2071" headers="d11341e1755 ">
                                    <p>columnDenominator</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2071 d11341e1758 ">
                                    <p><code class="codeph">pType</code> ， <code class="codeph">nVars</code> ， <code class="codeph">order</code> ， <code class="codeph">nCoefficients</code> ，以及列多项式的分母的所有系数，其中<code class="codeph">pType</code> = 1或2; <code class="codeph">nVars</code> = 0,2或3; 0 &lt;= <code class="codeph">order</code> &lt;= 5;和<code class="codeph">nCoefficients</code>派生自<code class="codeph">pType</code> ， <code class="codeph">nVars</code>和<code class="codeph">order</code> 。多项式在<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理配准模型中</a>进行了解释。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2115" headers="d11341e1755 ">
                                    <p>XRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2115 d11341e1758 ">
                                    <p>x维度精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用检查点计算。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2126" headers="d11341e1755 ">
                                    <p>YRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2126 d11341e1758 ">
                                    <p>y维精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用检查点计算。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2137" headers="d11341e1755 ">
                                    <p>zRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2137 d11341e1758 ">
                                    <p>z维精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用检查点计算。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2148" headers="d11341e1755 ">
                                    <p>modelTotalRMS</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2148 d11341e1758 ">
                                    <p>总模型精度。如果使用GCP调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a> ，则使用检查点计算。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2159" headers="d11341e1755 ">
                                    <p>GCPgeoreferenceModel</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2159 d11341e1758 ">
                                    <p>存储的功能模型信息，即有关基于GCP的地理配准模型的所有信息。有关基于GCP的地理配准模型信息的信息，请参阅<a href="georaster-datatypes.html#GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B">SDO_GEOR_GCPGEOREFTYPE对象类型</a> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>然而，当直接和逆解从函数拟合模型导出时， <a href="georaster-datatypes.html#GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57__BGBBBHHE" title="此2列表列出了SDO_GEOR_SRS对象类型属性。第1列是属性。第2列解释了该属性。">表2-4</a>中列出的精度值不考虑当前版本的GeoRaster内部单元坐标和模型坐标转换计算。
                     </p>
                     <p><a id="d11341e2177" class="indexterm-anchor"></a> SDO_GEOR_SRS对象类型有两个构造函数：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一个构造函数不接受任何参数，并创建一个类型的实例，其中<code class="codeph">isReferenced</code>属性设置为<code class="codeph">FALSE</code> ，其他属性设置为空值。此构造函数允许您设置功能拟合模型或存储函数（GCP）模型，或者将它们设置在一起。
                           </p>
                        </li>
                        <li>
                           <p>另一个构造函数将此对象类型的所有属性作为参数，但与存储函数（GCP）模型相关的属性除外。</p>
                        </li>
                     </ul>
                     <p>有关如何使用SDO_GEOR_SRS构造函数的示例，请参阅<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考中</a> <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>过程的参考部分。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1190"></a><a id="GEORS1189"></a><div class="props_rev_3"><a id="GUID-339ED929-236B-4178-ADAB-F4901E37EBF6" name="GUID-339ED929-236B-4178-ADAB-F4901E37EBF6"></a><h4 id="GEORS-GUID-339ED929-236B-4178-ADAB-F4901E37EBF6" class="sect4"><span class="enumeration_section">2.3.7</span> SDO_GEOR_GCP对象类型</h4>
                  <div>
                     <p>在GeoRaster中，地面控制点（GCP）信息使用<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="This appendix provides the XML schema definition that is used for GeoRaster metadata.">GeoRaster Metadata XML Schema中</a>定义的XML模式存储在GeoRaster元<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">数据中</a> 。在PL / SQL API中使用SDO_GEOR_GCP对象类型来包含与GeoRaster对象的地理配准相关的GCP信息。元数据和对象类型包含相同的信息。您可以使用对象类型从GeoRaster对象检索GCP信息，或者在GeoRaster对象中加载和更新GCP信息。
                     </p>
                     <p>SDO_GEOR_GCP对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_geor_gcp AS OBJECT（pointID VARCHAR2（32），description VARCHAR2（256），pointType NUMBER，cellDimension NUMBER，cellCoordinates SDO_NUMBER_ARRAY，modelDimension NUMBER，modelCoordinates SDO_NUMBER_ARRAY，precision SDO_NUMBER_ARRAY，status NUMBER）;</pre><p><a href="georaster-datatypes.html#GUID-339ED929-236B-4178-ADAB-F4901E37EBF6__BABEAGDE" title="此2列表列出了SDO_GEOR_GCP对象类型属性。第1列是属性。第2列解释了该属性。">表2-5</a>介绍了SDO_GEOR_GCP对象类型的属性。
                     </p>
                     <div class="tblformal" id="GUID-339ED929-236B-4178-ADAB-F4901E37EBF6__BABEAGDE">
                        <p class="titleintable">表2-5 SDO_GEOR_GCP对象类型属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_GCP对象类型属性" width="100%" border="1" summary="This 2 column table lists SDO_GEOR_GCP object type attributes.  Column 1 is the attribute. Column 2 explains the attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11341e2277">属性</th>
                                 <th align="left" valign="bottom" id="d11341e2280">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2285" headers="d11341e2277 ">
                                    <p>点名</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2285 d11341e2280 ">
                                    <p>控制点的唯一ID。不得超过32个字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2292" headers="d11341e2277 ">
                                    <p>描述</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2292 d11341e2280 ">
                                    <p>有关控制点的描述性信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2299" headers="d11341e2277 ">
                                    <p>pointType</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2299 d11341e2280 ">
                                    <p>点类型：1（控制点）或2（检查点）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2306" headers="d11341e2277 ">
                                    <p>cellDimension</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2306 d11341e2280 ">
                                    <p>单元坐标的维度（维数）：2或3。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2313" headers="d11341e2277 ">
                                    <p>cellCoordinates</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2313 d11341e2280 ">
                                    <p>控制点的单元坐标数组;每个点的（行，列）或（行，列，垂直）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2320" headers="d11341e2277 ">
                                    <p>modelDimension</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2320 d11341e2280 ">
                                    <p>模型坐标的尺寸（尺寸数）：2或3。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2327" headers="d11341e2277 ">
                                    <p>modelCoordinates</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2327 d11341e2280 ">
                                    <p>控制点的模型坐标数组，对应于单元格空间中的点;每个点的（X，Y）或（X，Y，Z）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2334" headers="d11341e2277 ">
                                    <p>准确性</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2334 d11341e2280 ">
                                    <p>控制点的准确度，表示为（xRMS，yRMS）或（xRMS，yRMS，zRMS）的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2341" headers="d11341e2277 ">
                                    <p>状态</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2341 d11341e2280 ">
                                    <p>GCP的状态：已<code class="codeph">Measured</code> ，已<code class="codeph">Removed</code> ，已<code class="codeph">Estimated</code> ， <code class="codeph">Validated</code>或<code class="codeph">Invalid</code> 。此列的值仅供参考，它对GeoRaster对GCP的使用没有影响。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>SDO_GEOR_GCP构造函数可用于创建此对象类型的空实例。然后，您应该在使用此实例之前填写必要的数据。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1191"></a><div class="props_rev_3"><a id="GUID-622DEDBA-8E96-46A3-AFC3-DEBEEE15561D" name="GUID-622DEDBA-8E96-46A3-AFC3-DEBEEE15561D"></a><h4 id="GEORS-GUID-622DEDBA-8E96-46A3-AFC3-DEBEEE15561D" class="sect4"><span class="enumeration_section">2.3.8</span> SDO_GEOR_GCP_ COLLECTION集合类型</h4>
                  <div>
                     <p>SDO_GEOR_GCP_ COLLECTION集合类型用于存储地面控制点（GCP）的阵列（集合）。</p>
                     <p>SDO_GEOR_GCP_ COLLECTION集合类型定义为：</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_GCP的CREATE TYPE sdo_geor_gcp_collection VARRAY（1048576）;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="georaster-datatypes.html#GUID-339ED929-236B-4178-ADAB-F4901E37EBF6">SDO_GEOR_GCP对象类型</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="GEORS1193"></a><a id="GEORS1192"></a><div class="props_rev_3"><a id="GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B" name="GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B"></a><h4 id="GEORS-GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B" class="sect4"><span class="enumeration_section">2.3.9</span> SDO_GEOR_GCPGEOREFTYPE对象类型</h4>
                  <div>
                     <p>在GeoRaster中，基于GCP的地理配准模型信息使用GeoRaster元数据XML模式中定义的XML模式存储在GeoRaster元<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">数据中</a> 。SDO_GEOR_GCPGEOREFTYPE对象包括地理配准功能拟合方法（即几何模型），用于求解模型参数的控制点和解决方案精度。在PL / SQL API中使用SDO_GEOR_ GCPGEOREFTYPE对象类型来包含与GeoRaster对象的基于GCP的地理配准相关的地理配准模型信息。元数据和对象类型包含相同的信息。您可以使用对象类型从GeoRaster对象检索地理配准模型信息，或者在GeoRaster对象中加载和更新地理配准模型信息。
                     </p>
                     <p>SDO_GEOR_GCPGEOREFTYPE对象类型定义为：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE sdo_geor_gcpgeoreftype AS OBJECT（FFMethodType VARCHAR2（32），numberGCP NUMBER，GCPs SDO_GEOR_GCP_COLLECTION，solutionAccuracy SDO_NUMBER_ARRAY）;</pre><p><a href="georaster-datatypes.html#GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B__BABBBIHF" title="此2列表列出了SDO_GEOR_GCPGEOREFTYPE对象类型属性。第1列是属性第2列是该属性的描述。">表2-6</a>介绍了SDO_GEOR_GCPGEOREFTYPE对象类型的属性。
                     </p>
                     <div class="tblformal" id="GUID-41205B52-4D3B-4870-A7DF-6B5AB9FFB58B__BABBBIHF">
                        <p class="titleintable">表2-6 SDO_GEOR_GCPGEOREFTYPE对象类型属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_GCPGEOREFTYPE对象类型属性" width="100%" border="1" summary="This 2 column table lists SDO_GEOR_GCPGEOREFTYPE object type attributes. Column 1 is the attribute Column 2 is a description of that attribute. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d11341e2486">属性</th>
                                 <th align="left" valign="bottom" id="d11341e2489">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2494" headers="d11341e2486 ">
                                    <p>FFMethodType</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2494 d11341e2489 ">
                                    <p>功能拟合方法。必须是以下之一： <code class="codeph">Affine</code> ， <code class="codeph">QuadraticPolynomial</code> ， <code class="codeph">CubicPolynomial</code> ， <code class="codeph">DLT</code> ， <code class="codeph">QuadraticRational</code>或<code class="codeph">RPC</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2520" headers="d11341e2486 ">
                                    <p>numberGCP</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2520 d11341e2489 ">
                                    <p>GCP集合中的地面控制点数量（ <code class="codeph">GCPs</code>参数）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2530" headers="d11341e2486 ">
                                    <p>地面控制点</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2530 d11341e2489 ">
                                    <p>GCP集合，类型为SDO_GEOR_GCP_COLLECTION（在<a href="georaster-datatypes.html#GUID-622DEDBA-8E96-46A3-AFC3-DEBEEE15561D">SDO_GEOR_GCP_ COLLECTION集合类型中</a>描述）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d11341e2541" headers="d11341e2486 ">
                                    <p>solutionAccuracy</p>
                                 </td>
                                 <td align="left" valign="top" headers="d11341e2541 d11341e2489 ">
                                    <p>以下列格式存储地理配准解决方案准确性的数组：（rowRMS，columnRMS，totalRMS，xRMS，yRMS，zRMS，modelTotalRMS）。使用控制点计算前三个RMS编号，并使用检查点（如果有）计算最后四个RMS编号。此信息仅用于输出;不要存储或修改此属性中的值。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>SDO_GEOR_GCPGEOREFTYPE对象类型有一个构造函数。构造函数不带参数，它创建一个类型的实例，其<code class="codeph">FFMethodType</code>属性设置为<code class="codeph">Affine</code> ，其他属性设置为null值。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-690756C5-5114-47B0-B417-B939BF5FBBA6" title="GeoRaster还提供了一些其他数据类型。">其他GeoRaster类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS977"></a><div class="props_rev_3"><a id="GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" name="GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52"></a><h3 id="GEORS-GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" class="sect3"><span class="enumeration_section">2.4</span> GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</h3>
               <div>
                  <p>GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。</p>
                  <p>每个GeoRaster对象（如果它不为空）都有一个相关的栅格数据表，它可能有其他信息，例如地面控制点（GCP）和值属性表（VAT）。</p>
                  <p>对于给定用户，栅格数据表名称加上<code class="codeph">rasterID</code>唯一标识GeoRaster对象。在一个GeoRaster表中，许多GeoRaster对象（每个对象具有不同的<code class="codeph">rasterID</code>值）可以共享一个栅格数据表。
                  </p>
                  <p>每当创建新的GeoRaster对象（包括空的和空白的GeoRaster对象）时， <code class="codeph">rasterID</code>分配一个栅格数据表并分配一个<code class="codeph">rasterID</code>值。所有SDO_GEORASTER对象（原子空对象除外）在创建时都会自动记录在系统数据表中。
                  </p>
                  <p>GeoRaster sysdata表位于MDSYS模式下。GeoRaster系统数据表中的大多数信息都可用于通过系统数据视图进行检索，因此可以将其用作GeoRaster数据库中所有GeoRaster对象的字典或目录。每个GeoRaster用户都具有与该用户关联的架构中可用的以下系统数据视图：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d11341e2620" class="indexterm-anchor"></a> USER_SDO_GEOR_SYSDATA包含当前用户拥有的所有GeoRaster对象的系统数据。
                        </p>
                     </li>
                     <li>
                        <p><a id="d11341e2625" class="indexterm-anchor"></a> ALL_SDO_GEOR_SYSDATA包含当前用户可访问的所有GeoRaster对象的系统数据。
                        </p>
                     </li>
                  </ul>
                  <p>用户不应直接修改GeoRaster sysdata表和USER_SDO_GEOR_SYSDATA和ALL_SDO_GEOR_SYSDATA视图，尽管它们是由每个GeoRaster表中每个SDO_GEORASTER列自动创建的DML触发器更新的。</p>
                  <p>USER_SDO_GEOR_SYSDATA视图具有以下定义：</p><pre class="oac_no_warn" dir="ltr">（TABLE_NAME VARCHAR2（128），COLUMN_NAME VARCHAR2（1024），METADATA_COLUMN_NAME VARCHAR2（1024），RDT_TABLE_NAME VARCHAR2（128），RASTER_ID NUMBER，OTHER_TABLE_NAMES SDO_STRING_ARRAY）;</pre><p>ALL_SDO_GEOR_SYSDATA视图包含USER_SDO_GEOR_SYSDATA视图中的所有列，但它还有一个OWNER列，用于标识拥有TABLE_NAME列中指定的表的架构。</p>
                  <p>本节介绍两个视图共有的每个列。请注意，对于任何列中的VARCHAR2数据，名称都以全部大写字符存储。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-441A9890-F85D-4C31-BAB7-AE58CB0E1F44">TABLE_NAME列</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-B242B9AD-9607-42B9-BEDC-3FA2AF77D780">COLUMN_NAME专栏</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-9A3C0441-67E6-447A-B769-01A313208D4B">METADATA_COLUMN_NAME专栏</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-20D7EC44-3CB5-4200-95F4-9AE2CCF4721F">RDT_TABLE_NAME专栏</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-0621B7B2-C7D1-4281-BF91-EACD4105954C">RASTER_ID列</a><br></li>
                     <li class="ulchildlink"><a href="georaster-datatypes.html#GUID-1D3ED32A-EB9B-48CA-B48A-34F121D1D1FB">OTHER_TABLE_NAMES列</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" title="GeoRaster的对象关系实现由一组用于存储数据和系统数据的对象数据类型组成。">GeoRaster数据类型和相关结构</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS978"></a><div class="props_rev_3"><a id="GUID-441A9890-F85D-4C31-BAB7-AE58CB0E1F44" name="GUID-441A9890-F85D-4C31-BAB7-AE58CB0E1F44"></a><h4 id="GEORS-GUID-441A9890-F85D-4C31-BAB7-AE58CB0E1F44" class="sect4"><span class="enumeration_section">2.4.1</span> TABLE_NAME列</h4>
                  <div>
                     <p>TABLE_NAME列包含至少有一列类型为SDO_GEORASTER的GeoRaster表的名称。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS979"></a><div class="props_rev_3"><a id="GUID-B242B9AD-9607-42B9-BEDC-3FA2AF77D780" name="GUID-B242B9AD-9607-42B9-BEDC-3FA2AF77D780"></a><h4 id="GEORS-GUID-B242B9AD-9607-42B9-BEDC-3FA2AF77D780" class="sect4"><span class="enumeration_section">2.4.2</span> COLUMN_NAME专栏</h4>
                  <div>
                     <p>COLUMN_NAME列包含TABLE_NAME列中指定的GeoRaster表中SDO_GEORASTER类型的列的名称。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS980"></a><div class="props_rev_3"><a id="GUID-9A3C0441-67E6-447A-B769-01A313208D4B" name="GUID-9A3C0441-67E6-447A-B769-01A313208D4B"></a><h4 id="GEORS-GUID-9A3C0441-67E6-447A-B769-01A313208D4B" class="sect4"><span class="enumeration_section">2.4.3</span> METADATA_COLUMN_NAME列</h4>
                  <div>
                     <p>当前版本将忽略METADATA_COLUMN_NAME列。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS981"></a><div class="props_rev_3"><a id="GUID-20D7EC44-3CB5-4200-95F4-9AE2CCF4721F" name="GUID-20D7EC44-3CB5-4200-95F4-9AE2CCF4721F"></a><h4 id="GEORS-GUID-20D7EC44-3CB5-4200-95F4-9AE2CCF4721F" class="sect4"><span class="enumeration_section">2.4.4</span> RDT_TABLE_NAME列</h4>
                  <div>
                     <p>RDT_TABLE_NAME列包含与TABLE_NAME和COLUMN_NAME列中指定的表和列关联的栅格数据表的名称。）</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="georaster-datatypes.html#GUID-9679F06D-50A0-4EF7-9204-E85CA2F38378">SDO_RASTER对象类型和栅格数据表</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="GEORS982"></a><div class="props_rev_3"><a id="GUID-0621B7B2-C7D1-4281-BF91-EACD4105954C" name="GUID-0621B7B2-C7D1-4281-BF91-EACD4105954C"></a><h4 id="GEORS-GUID-0621B7B2-C7D1-4281-BF91-EACD4105954C" class="sect4"><span class="enumeration_section">2.4.5</span> RASTER_ID列</h4>
                  <div>
                     <p>RASTER_ID列包含一个数字，该数字与RDT_TABLE_NAME列值一起唯一标识每个GeoRaster对象。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS983"></a><div class="props_rev_3"><a id="GUID-1D3ED32A-EB9B-48CA-B48A-34F121D1D1FB" name="GUID-1D3ED32A-EB9B-48CA-B48A-34F121D1D1FB"></a><h4 id="GEORS-GUID-1D3ED32A-EB9B-48CA-B48A-34F121D1D1FB" class="sect4"><span class="enumeration_section">2.4.6</span> OTHER_TABLE_NAMES列</h4>
                  <div>
                     <p>当前版本将忽略OTHER_TABLE_NAMES列。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-657BA65F-E8FF-41D7-94B6-BA412993EC52" title="GeoRaster使用系统数据表（也称为sysdata表）来维护GeoRaster表与其相关栅格数据表之间的关系。">GeoRaster系统数据视图（xxx_SDO_GEOR_SYSDATA）</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS985"></a><a id="GEORS984"></a><div class="props_rev_3"><a id="GUID-16D246D1-7895-4C68-BFFC-79DBA2926C46" name="GUID-16D246D1-7895-4C68-BFFC-79DBA2926C46"></a><h3 id="GEORS-GUID-16D246D1-7895-4C68-BFFC-79DBA2926C46" class="sect3"><span class="enumeration_section">2.5</span> GeoRaster XML Schema</h3>
               <div>
                  <p>GeoRaster定义了一个XML模式来存储和管理GeoRaster元数据。</p>
                  <p>此XML架构的定义包含在<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">GeoRaster Metadata XML Schema中</a> 。GeoRaster XML模式定义的名称空间是<code class="codeph">http://xmlns.oracle.com/spatial/georaster</code> ，它保留供Oracle使用。如果要使用SQL XML函数或XMLType方法操作GeoRaster元数据文档，则必须引用此命名空间。
                  </p>
                  <p>GeoRaster使用名为SDO_GEOR_XMLSCHEMA_TABLE的表来存储GeoRaster元数据XML架构和其他信息。此表位于MDSYS架构下，如果引用此表，则必须包含架构名称。例如：</p><pre class="oac_no_warn" dir="ltr">DESCRIBE mdsys.sdo_geor_xmlschema_table名称是否为空？输入----------------------------------------- -------- ---------------------------- ID NOT NOT NUMBER GEORASTERFORMAT VARCHAR2（1024）XMLSCHEMA CLOB</pre><p><a href="georaster-datatypes.html#GUID-16D246D1-7895-4C68-BFFC-79DBA2926C46__BGBCHEGG" title="此3列表显示了SDO_GEOR_XMLSCHEMA_TABLE表列。第1列是列名。第2列是数据类型。第3列描述了该列。">表2-7</a>介绍了SDO_GEOR_XMLSCHEMA_TABLE表的列。
                  </p>
                  <div class="tblformal" id="GUID-16D246D1-7895-4C68-BFFC-79DBA2926C46__BGBCHEGG">
                     <p class="titleintable">表2-7 SDO_GEOR_XMLSCHEMA_TABLE表列</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SDO_GEOR_XMLSCHEMA_TABLE表列" width="100%" border="1" summary="This 3 column table shows the SDO_GEOR_XMLSCHEMA_TABLE table columns. Column 1 is the column name. Column 2 is the data type. Column 3 describes the column. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d11341e3022">列名称</th>
                              <th align="left" valign="bottom" id="d11341e3025">数据类型</th>
                              <th align="left" valign="bottom" id="d11341e3028">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11341e3033" headers="d11341e3022 ">
                                 <p>ID</p>
                              </td>
                              <td align="left" valign="top" headers="d11341e3033 d11341e3025 ">
                                 <p>数</p>
                              </td>
                              <td align="left" valign="top" headers="d11341e3033 d11341e3028 ">
                                 <p>ID号，由Oracle分配。值<code class="codeph">1</code>到<code class="codeph">50</code>保留供Oracle使用。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11341e3049" headers="d11341e3022 ">
                                 <p>georasterFormat</p>
                              </td>
                              <td align="left" valign="top" headers="d11341e3049 d11341e3025 ">
                                 <p>VARCHAR2（1024）</p>
                              </td>
                              <td align="left" valign="top" headers="d11341e3049 d11341e3028 ">
                                 <p>由Oracle分配的GeoRaster格式标识符。<code class="codeph">GEORASTER</code>的值保留供Oracle使用。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d11341e3062" headers="d11341e3022 ">
                                 <p>XMLSCHEMA</p>
                              </td>
                              <td align="left" valign="top" headers="d11341e3062 d11341e3025 ">
                                 <p>CLOB</p>
                              </td>
                              <td align="left" valign="top" headers="d11341e3062 d11341e3028 ">
                                 <p>GeoRaster元数据XML模式定义。该定义包含在<a href="georaster-metadata-xml-schema.html#GUID-6814D440-F50A-473C-84F6-60709DC5620D" title="本附录提供了用于GeoRaster元数据的XML模式定义。">GeoRaster Metadata XML Schema中</a> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>此表中没有定义GeoRaster视图。对于可能希望在表中查询GeoRaster XML架构信息的高级用户，主要感兴趣。</p>
                  <p>建议您不要修改此表的内容，除非您要为未包含在GeoRaster XML模式中的其他元数据定义自己的XML模式，并将该元数据存储在此表的新行中。如果您添加一行自己的元数据，不使用的ID列值<code class="codeph">1</code>至<code class="codeph">50</code>或的GEORASTERFORMAT列值<code class="codeph">GEORASTER</code> ，因为这些列值保留使用Oracle。如果指定XMLSCHEMA列值，则应为自己的XML架构选择唯一的命名空间，并使用在数据库中也是唯一的相应架构URL进行注册。（有关更多信息，请参阅<span class="italic">Oracle XML DB Developer's Guide</span> 。）
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-datatypes.html#GUID-98F692F8-C05A-4D8F-AB6A-484D5268D30A" title="GeoRaster的对象关系实现由一组用于存储数据和系统数据的对象数据类型组成。">GeoRaster数据类型和相关结构</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="01058.DBMS_MVIEW.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="DBMS_MVIEW enables you to understand capabilities for materialized views and potential materialized views, including their rewrite availability. It also enables you to refresh materialized views that are not part of the same refresh group and purge logs."></meta>
      <meta name="description" content="DBMS_MVIEW enables you to understand capabilities for materialized views and potential materialized views, including their rewrite availability. It also enables you to refresh materialized views that are not part of the same refresh group and purge logs."></meta>
      <title>DBMS_MVIEW</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="DBMS_MVIEW enables you to understand capabilities for materialized views and potential materialized views, including their rewrite availability. It also enables you to refresh materialized views that are not part of the same refresh group and purge logs."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_MONITOR.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_MVIEW_STATS.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_MONITOR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_MVIEW_STATS.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_MVIEW</li>
            </ol>
            <a id="GUID-7FBA3522-B774-4B76-87B0-EA65DB797DD3" name="GUID-7FBA3522-B774-4B76-87B0-EA65DB797DD3"></a><a id="ARPLS027"></a><a id="ARPLS027"></a>
            
            <h2 id="ARPLS-GUID-7FBA3522-B774-4B76-87B0-EA65DB797DD3" class="sect2"><span class="enumeration_chapter">108</span> DBMS_MVIEW</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_MVIEW</code>使您能够了解<code class="codeph">DBMS_MVIEW</code>化视图和潜在物化视图的功能，包括重写可用性。它还使您能够刷新不属于同一刷新组和清除日志的实体化视图。
               </p>
               <div class="infoboxnote" id="GUID-7FBA3522-B774-4B76-87B0-EA65DB797DD3__GUID-59AD2CE8-59D1-4059-9EE2-4AC2B8FBABD5">
                  <p class="notep1">注意：</p>
                  <p><code class="codeph">DBMS_MVIEW</code>是一个代名词<code class="codeph">DBMS_SNAPSHOT</code> 。</p>
               </div>
               <div class="infoboxnotealso" id="GUID-7FBA3522-B774-4B76-87B0-EA65DB797DD3__GUID-25D6D267-92D1-4255-AADB-64F5444A455D">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="../dwhsg/basic-materialized-views.html#DWHSG-GUID-FC9E665B-8AB2-4B64-AB8A-FAA732511839" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a> ，了解有关在数据仓库环境中使用实体化视图的更多信息</p>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_MVIEW.html#GUID-9348BF3F-382C-4FDB-A171-81304058C5EF" title="如果查询的长度少于256个字符，则可以使用SQL * Plus中的EXECUTE命令调用EXPLAIN_REWRITE。否则，推荐的方法是使用PL / SQL BEGIN ..END块，如/rdbms/demo/smxrw.sql中的示例所示。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_MVIEW.html#GUID-C60C8F58-7F70-4037-B7D6-39C87090F7D4" title="DBMS_MVIEW包由许多与物化视图相关的子程序组成，每个子程序具有不同的功能和权限要求。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_MVIEW.html#GUID-B67C0D11-FA31-4194-9D3C-314CEA70BF72" title="DBMS_MVIEW.EXPLAIN_REWRITE过程无法接受超过32627个字符的查询。将实例化视图的定义查询传递给DBMS_MVIEW.EXPLAIN_MVIEW过程时，这些限制也适用。">规则和限制</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_MVIEW.html#GUID-33DADD61-B2E8-407D-9117-387D3CE628D1" title="此表列出了DBMS_MVIEW子程序并简要描述了它们。">DBMS_MVIEW子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS67181"></a><a id="ARPLS67181"></a><div class="props_rev_3"><a id="GUID-9348BF3F-382C-4FDB-A171-81304058C5EF" name="GUID-9348BF3F-382C-4FDB-A171-81304058C5EF"></a><h3 id="ARPLS-GUID-9348BF3F-382C-4FDB-A171-81304058C5EF" class="sect3"><span class="enumeration_section">108.1</span> DBMS_MVIEW操作说明</h3>
               <div>
                  <p>如果查询的长度少于256个字符，则可以使用SQL * Plus中的<code class="codeph">EXECUTE</code>命令调用<code class="codeph">EXPLAIN_REWRITE</code> 。否则，推荐的方法是使用PL / SQL <code class="codeph">BEGIN..END</code>块，如<code class="codeph">/rdbms/demo/smxrw.sql</code>中的示例所示。
                  </p>
               </div>
            </div><a id="ARPLS73297"></a><a id="ARPLS73297"></a><div class="props_rev_3"><a id="GUID-C60C8F58-7F70-4037-B7D6-39C87090F7D4" name="GUID-C60C8F58-7F70-4037-B7D6-39C87090F7D4"></a><h3 id="ARPLS-GUID-C60C8F58-7F70-4037-B7D6-39C87090F7D4" class="sect3"><span class="enumeration_section">108.2</span> DBMS_MVIEW安全模型</h3>
               <div>
                  <p><code class="codeph">DBMS_MVIEW</code>包由许多与物化视图相关的子程序组成，每个子程序具有不同的功能和权限要求。
                  </p>
                  <div class="section">
                     <p>特权模型通常基于调用者的权利。通过首先检查对调用者的特权来执行每个包子程序。如果满足所有必需的权限，则将执行子程序。否则，将抛出不足的权限错误。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67182"></a><a id="ARPLS67182"></a><div class="props_rev_3"><a id="GUID-B67C0D11-FA31-4194-9D3C-314CEA70BF72" name="GUID-B67C0D11-FA31-4194-9D3C-314CEA70BF72"></a><h3 id="ARPLS-GUID-B67C0D11-FA31-4194-9D3C-314CEA70BF72" class="sect3"><span class="enumeration_section">108.3</span> DBMS_MVIEW规则和限制</h3>
               <div>
                  <p><code class="codeph">DBMS_MVIEW.EXPLAIN_REWRITE</code>过程无法接受超过32627个字符的查询。将<code class="codeph">DBMS_MVIEW.EXPLAIN_MVIEW</code>化视图的定义查询传递给<code class="codeph">DBMS_MVIEW.EXPLAIN_MVIEW</code>过程时，这些限制也适用。
                  </p>
               </div>
            </div><a id="ARPLS67183"></a><a id="ARPLS67184"></a><a id="ARPLS67184"></a><a id="ARPLS67183"></a><div class="props_rev_3"><a id="GUID-33DADD61-B2E8-407D-9117-387D3CE628D1" name="GUID-33DADD61-B2E8-407D-9117-387D3CE628D1"></a><h3 id="ARPLS-GUID-33DADD61-B2E8-407D-9117-387D3CE628D1" class="sect3"><span class="enumeration_section">108.4</span> DBMS_MVIEW子程序摘要</h3>
               <div>
                  <p>此表列出了<code class="codeph">DBMS_MVIEW</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-33DADD61-B2E8-407D-9117-387D3CE628D1__GUID-D60DEACC-B70D-48DB-A3C3-57470B4BD2BB">
                     <p class="titleintable">表108-1 DBMS_MVIEW包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_MVIEW包子程序" width="100%" border="1" summary="This table lists the DBMS_MVIEW subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d628027e548">子程序</th>
                              <th align="left" valign="bottom" width="66%" id="d628027e551">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e556" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117" title="此过程执行一个过程以保留刷新所需的物化视图数据。必须在重组主表之前调用它。">BEGIN_TABLE_REORGANIZATION程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e556 d628027e551 ">
                                 <p>执行一个过程以保留刷新所需的物化视图数据</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e568" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1" title="此过程可确保主表的实例化视图数据有效，并且主表处于正确状态。必须在重组主表后调用它。">END_TABLE_REORGANIZATION程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e568 d628027e551 ">
                                 <p>确保主表的实例化视图数据有效，并且主表处于正确状态</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e580" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478" title="此过程估计您可能创建的实例化视图的大小，以字节和行数为单位。">ESTIMATE_MVIEW_SIZE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e580 d628027e551 ">
                                 <p>估计您可能创建的实例化视图的大小（以字节和行为单位）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e592" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6" title="通过此过程，您可以了解物化视图或潜在物化视图的可能性。例如，您可以确定物化视图是否可以快速刷新，以及您可以使用特定物化视图执行哪些类型的查询重写。">EXPLAIN_MVIEW程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e592 d628027e551 ">
                                 <p>解释物化视图或潜在物化视图的可能性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e604" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A" title="此过程使您可以了解查询无法重写的原因，或者，如果重写，将使用哪些实例化视图。">EXPLAIN_REWRITE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e604 d628027e551 ">
                                 <p>解释查询无法重写的原因或优化程序选择使用特定物化视图或物化视图重写查询的原因</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e616" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-AFB4EFE5-D8CF-41D1-8605-378A68A2A549" title="此函数返回I_AM_REFRESH包状态的值。">I_AM_A_REFRESH功能</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e616 d628027e551 ">
                                 <p>返回<code class="codeph">I_AM_REFRESH</code>包状态的值</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e634" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE" title="此函数从rowid返回分区标记。它用于分区更改跟踪（PCT）。">PMARKER功能</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e634 d628027e551 ">
                                 <p>从rowid返回分区标记，用于分区更改跟踪（PCT）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e646" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-4D653487-732C-4400-804E-97C4C6802ABD" title="在任何已知的物化视图不再需要它们之后，此过程将从直接加载器日志中删除条目。此过程通常用于使用Oracle数据仓库技术的环境中。">PURGE_DIRECT_LOAD_LOG程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e646 d628027e551 ">
                                 <p>在任何物化视图不再需要行（从数据仓库使用）后，从直接加载器日志中清除行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e658" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D" title="此过程从物化视图日志中清除行。">PURGE_LOG程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e658 d628027e551 ">
                                 <p>从物化视图日志中清除行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e670" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-E3358A4E-AF64-400B-B707-B4A0866032CF" title="在主站点或主物化视图站点上调用此过程，以删除由mview_id或mviewowner，mviewname和mviewsite标识的指定物化视图在主站维护的物化视图刷新相关数据字典表中的行。">PURGE_MVIEW_FROM_LOG程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e670 d628027e551 ">
                                 <p>从物化视图日志中清除行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e694" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D" title="此过程刷新实例化视图列表。">REFRESH程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e694 d628027e551 ">
                                 <p>刷新一个或多个不是同一刷新组成员的物化视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e707" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-3339D150-9B4C-4D75-A95A-C18DFA000377" title="此过程将刷新具有特定属性的所有实例化视图">REFRESH_ALL_MVIEWS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e707 d628027e551 ">
                                 <p>刷新所有未反映其主表或主物化视图更改的物化视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e719" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-36379E2B-3F21-4F92-8019-F902BFB2896A" title="此过程将刷新具有特定属性的所有实例化视图。">REFRESH_DEPENDENT程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e719 d628027e551 ">
                                 <p>刷新所有依赖于指定主表或主物化视图或主表或主物化视图列表的基于表的物化视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e731" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D" title="此过程可以管理各个物化视图。在主站点或主物化视图站点调用它以注册物化视图。">REGISTER_MVIEW程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e731 d628027e551 ">
                                 <p>允许管理各个物化视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d628027e743" headers="d628027e548 ">
                                 <p><a href="DBMS_MVIEW.html#GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793" title="此过程可以管理各个物化视图。在主站点或主物化视图站点调用它以取消注册物化视图。">UNREGISTER_MVIEW程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d628027e743 d628027e551 ">
                                 <p>在主站点或主物化视图站点调用后，启用对单个物化视图的管理，以取消注册物化视图</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS67185"></a><a id="ARPLS67186"></a><a id="ARPLS67186"></a><a id="ARPLS67185"></a><div class="props_rev_3"><a id="GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117" name="GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117"></a><h4 id="ARPLS-GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117" class="sect4"><span class="enumeration_section">108.4.1 BEGIN_TABLE_REORGANIZATION</span>程序</h4>
                  <div>
                     <p>此过程执行一个过程以保留刷新所需的物化视图数据。必须在重组主表之前调用它。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117__GUID-DAEB7386-EF76-46F2-9670-EA55F7DDD450">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.BEGIN_TABLE_REORGANIZATION（tabowner IN VARCHAR2，tabname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117__GUID-08632E3B-9FC7-404F-BA2E-EE23CFDCA9B9">参数</p>
                        <div class="tblformal" id="GUID-0D46DA27-9C6C-405C-B9ED-F817EC4C0117__GUID-3AEA1B6B-C1A0-417A-977E-D5B3CF485B9D">
                           <p class="titleintable">表108-2 BEGIN_TABLE_REORGANIZATION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="BEGIN_TABLE_REORGANIZATION过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.BEGIN_TABLE_REORGANIZATION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d628027e866">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d628027e869">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e874" headers="d628027e866 ">
                                       <p><code class="codeph">tabowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e874 d628027e869 ">
                                       <p>正在重组的表的所有者</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e882" headers="d628027e866 ">
                                       <p><code class="codeph">TABNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e882 d628027e869 ">
                                       <p>正在重组的表的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67187"></a><a id="ARPLS67188"></a><a id="ARPLS67188"></a><a id="ARPLS67187"></a><div class="props_rev_3"><a id="GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1" name="GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1"></a><h4 id="ARPLS-GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1" class="sect4"><span class="enumeration_section">108.4.2</span> END_TABLE_REORGANIZATION程序</h4>
                  <div>
                     <p>此过程可确保主表的实例化视图数据有效，并且主表处于正确状态。必须在重组主表后调用它。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1__GUID-F1ADC022-77AB-4C36-B052-49918EC92602">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.END_TABLE_REORGANIZATION（tabowner IN VARCHAR2，tabname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1__GUID-2413B477-5093-4A8F-87AA-5BF78AE7A2B0">参数</p>
                        <div class="tblformal" id="GUID-A89E567E-178D-4CFC-8019-8F86C6F0BAC1__GUID-CE5F49E3-CAA2-4BF4-A4C0-34D90491AFAF">
                           <p class="titleintable">表108-3 END_TABLE_REORGANIZATION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="END_TABLE_REORGANIZATION过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.END_TABLE_REORGANIZATION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d628027e1002">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d628027e1005">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1010" headers="d628027e1002 ">
                                       <p><code class="codeph">tabowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1010 d628027e1005 ">
                                       <p>正在重组的表的所有者</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1018" headers="d628027e1002 ">
                                       <p><code class="codeph">TABNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1018 d628027e1005 ">
                                       <p>正在重组的表的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67189"></a><a id="ARPLS67190"></a><a id="ARPLS67190"></a><a id="ARPLS67189"></a><div class="props_rev_3"><a id="GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478" name="GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478"></a><h4 id="ARPLS-GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478" class="sect4"><span class="enumeration_section">108.4.3</span> ESTIMATE_MVIEW_SIZE过程</h4>
                  <div>
                     <p>此过程估计您可能创建的实例化视图的大小，以字节和行数为单位。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478__GUID-06AA5CA4-86E8-418C-A4E1-17EF73538B59">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.ESTIMATE_MVIEW_SIZE（stmt_id IN VARCHAR2，select_clause IN VARCHAR2，num_rows OUT NUMBER，num_bytes OUT NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478__GUID-E7C4EC08-8315-41FC-B833-AAB73C9405E7">参数</p>
                        <div class="tblformal" id="GUID-9C1A3332-F698-4F1E-B805-EA253AAE2478__GUID-AF43ED2C-8AA6-40C3-BA49-DC9DEF3416CA">
                           <p class="titleintable">表108-4 ESTIMATE_MVIEW_SIZE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ESTIMATE_MVIEW_SIZE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.ESTIMATE_MVIEW_SIZE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d628027e1135">参数</th>
                                    <th align="left" valign="bottom" width="81%" id="d628027e1138">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d628027e1143" headers="d628027e1135 ">
                                       <p><code class="codeph">stmt_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d628027e1143 d628027e1138 ">
                                       <p>用于标识<code class="codeph">EXPLAIN PLAN</code>语句的任意字符串</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d628027e1153" headers="d628027e1135 ">
                                       <p><code class="codeph">select_clause</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d628027e1153 d628027e1138 ">
                                       <p>要分析的<code class="codeph">SELECT</code>语句</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d628027e1164" headers="d628027e1135 ">
                                       <p><code class="codeph">NUM_ROWS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d628027e1164 d628027e1138 ">
                                       <p>估计基数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d628027e1172" headers="d628027e1135 ">
                                       <p><code class="codeph">NUM_BYTES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d628027e1172 d628027e1138 ">
                                       <p>估计的字节数</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67191"></a><a id="ARPLS67192"></a><a id="ARPLS67192"></a><a id="ARPLS67191"></a><div class="props_rev_3"><a id="GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6" name="GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6"></a><h4 id="ARPLS-GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6" class="sect4"><span class="enumeration_section">108.4.4</span> EXPLAIN_MVIEW程序</h4>
                  <div>
                     <p>通过此过程，您可以了解物化视图或潜在物化视图的可能性。例如，您可以确定物化视图是否可以快速刷新，以及您可以使用特定物化视图执行哪些类型的查询重写。</p>
                     <div class="section">
                        <p>使用此过程很简单。您只需调用<code class="codeph">DBMS_MVIEW</code> 。 <code class="codeph">EXPLAIN_MVIEW</code> ，作为参数传入现有物化视图的模式和物化视图名称。或者，您可以为潜在的物化视图指定<code class="codeph">SELECT</code>字符串或<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句。然后分析物化视图或潜在物化视图，并将结果写入名为<code class="codeph">MV_CAPABILITIES_TABLE</code>的表（默认值）或称为<code class="codeph">MSG_ARRAY</code>的数组。</p>
                        <p>该过程重载：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>第一个版本用于解释输出到<code class="codeph">MV_CAPABILITIES_TABLE</code>的现有或潜在物化视图。</p>
                           </li>
                           <li>
                              <p>第二个版本用于解释现有或潜在的物化视图，并输出到<code class="codeph">VARRAY</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6__GUID-9C793C9A-1125-4386-A99F-C244210821EC">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.EXPLAIN_MVIEW（mv IN VARCHAR2，statement_id IN VARCHAR2：= NULL）; DBMS_MVIEW.EXPLAIN_MVIEW（mv IN VARCHAR2，msg_array OUT SYS.ExplainMVArrayType）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6__GUID-4D18F834-4C1F-4403-B286-118611A19147">参数</p>
                        <div class="tblformal" id="GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6__GUID-F4A32BDD-CE54-4E08-B8D6-E65058E8C60C">
                           <p class="titleintable">表108-5 EXPLAIN_MVIEW过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPLAIN_MVIEW过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.EXPLAIN_MVIEW subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d628027e1334">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d628027e1337">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1342" headers="d628027e1334 ">
                                       <p><code class="codeph">MV</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1342 d628027e1337 ">
                                       <p>现有物化视图的名称（可选地使用由“。”分隔的所有者名称限定）或<code class="codeph">SELECT</code>语句或用于潜在物化视图的<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1362" headers="d628027e1334 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1362 d628027e1337 ">
                                       <p>客户端提供的唯一标识符，用于将输出行与<code class="codeph">EXPLAIN_MVIEW</code>特定调用相关联</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1372" headers="d628027e1334 ">
                                       <p><code class="codeph">msg_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1372 d628027e1337 ">
                                       <p>接收输出的PL / SQL <code class="codeph">VARRAY</code> 。使用此参数将<code class="codeph">EXPLAIN_MVIEW</code>的输出定向到PL / SQL VARRAY而不是<code class="codeph">MV_CAPABILITIES_TABLE</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DB06F5D8-C883-4443-9123-E1519B44AFA6__GUID-EE24A27C-5E2E-47D1-8A0C-E600D4BB7BE6">使用说明</p>
                        <p>在调用<code class="codeph">EXPLAIN_MVIEW</code>之前，必须运行<code class="codeph">utlxmv.sql</code>脚本以在当前模式中创建<code class="codeph">MV_CAPABILITIES_TABLE</code> ，除非您将输出定向到<code class="codeph">VARRAY</code> 。该脚本位于<code class="codeph">ADMIN</code>目录中。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67193"></a><a id="ARPLS67194"></a><a id="ARPLS67194"></a><a id="ARPLS67193"></a><div class="props_rev_3"><a id="GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A" name="GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A"></a><h4 id="ARPLS-GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A" class="sect4"><span class="enumeration_section">108.4.5</span> EXPLAIN_REWRITE过程</h4>
                  <div>
                     <p>此过程使您可以了解查询无法重写的原因，或者，如果重写，将使用哪些实例化视图。</p>
                     <div class="section">
                        <p>使用该过程的结果，您可以采取适当的操作来尽可能重写查询。<code class="codeph">EXPLAIN_REWRITE</code>语句中指定的查询从未实际执行过。
                        </p>
                        <p>演示文件<code class="codeph">xrwutl.sql</code>可用于帮助格式化<code class="codeph">EXPLAIN_REWRITE</code>的输出。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A__GUID-CDC901B7-4AC5-40CC-BDB0-1D784EF38964">句法</p>
                        <p>您可以通过两种方式从<code class="codeph">DBMS_MVIEW.EXPLAIN_REWRITE</code>获取输出。第一种是使用表，而第二种是创建<code class="codeph">VARRAY</code> 。以下显示了使用输出表的基本语法：</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.EXPLAIN_REWRITE（查询VARCHAR2，mv VARCHAR2（30），statement_id VARCHAR2（30））;</pre><p>您可以通过执行<code class="codeph">utlxrw.sql</code>脚本来创建名为<code class="codeph">REWRITE_TABLE</code>的输出表。
                        </p>
                        <p><code class="codeph">query</code>参数是表示SQL查询的文本字符串。参数<code class="codeph">mv</code>是<code class="codeph">schema.mv</code>形式的完全限定的物化视图名称。这是一个可选参数。如果未指定， <code class="codeph">EXPLAIN_REWRITE</code>将返回有关考虑重写给定查询的所有物化视图的任何相关消息。省略<code class="codeph">schema</code>并且仅指定<code class="codeph">mv</code> ， <code class="codeph">EXPLAIN_REWRITE</code>将在当前模式中查找<code class="codeph">EXPLAIN_REWRITE</code>化视图。
                        </p>
                        <p>如果要将<code class="codeph">EXPLAIN_REWRITE</code>的输出定向到<code class="codeph">VARRAY</code>而不是表，则应按如下方式调用过程：</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.EXPLAIN_REWRITE（查询[VARCHAR2 | CLOB]，mv VARCHAR2（30），output_array SYS.RewriteArrayType）;</pre><p>请注意，如果查询长度少于256个字符，则可以使用SQL * Plus中的<code class="codeph">EXECUTE</code>命令轻松调用<code class="codeph">EXPLAIN_REWRITE</code> 。否则，推荐的方法是使用PL / SQL <code class="codeph">BEGIN...END</code>块，如<code class="codeph">/rdbms/demo/smxrw*</code>中的示例所示。
                        </p>
                        <p>您还可以将<code class="codeph">EXPLAIN_REWRITE</code>与多个物化视图一起使用，在这种情况下，语法将与单个物化视图相同，除了物化视图由逗号分隔的字符串指定。例如，要查明是否可以使用给定的一组物化视图<code class="codeph">mv1</code> ， <code class="codeph">mv2</code>和<code class="codeph">mv3</code>来重写查询， <code class="codeph">query_txt</code> ，如果不是，为什么不重写，请使用<code class="codeph">EXPLAIN_REWRITE</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.EXPLAIN_REWRITE（query_txt，'mv1，mv2，mv3'）</pre><p>有关使用<code class="codeph">EXPLAIN_REWRITE</code>过程的更多信息，请参见“ <a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库指南”</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A__GUID-7FCB636F-DB81-47B8-8C50-AC7F01F72FD5">参数</p>
                        <div class="tblformal" id="GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A__GUID-E27DD6EB-2EAD-4A3A-8E35-F4E4684F03AB">
                           <p class="titleintable">表108-6 EXPLAIN_REWRITE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPLAIN_REWRITE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.EXPLAIN_REWRITE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d628027e1632">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d628027e1635">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1640" headers="d628027e1632 ">
                                       <p><code class="codeph">询问</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1640 d628027e1635 ">
                                       <p>SQL <code class="codeph">SELECT</code>语句有待解释</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1651" headers="d628027e1632 ">
                                       <p><code class="codeph">MV</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1651 d628027e1635 ">
                                       <p><code class="codeph">SCHEMA.MV</code>形式的现有物化视图的完全限定名称。对于多个物化视图，您可以提供以逗号分隔的名称列表。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1662" headers="d628027e1632 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1662 d628027e1635 ">
                                       <p>客户端提供的唯一标识符，用于区分输出消息</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1670" headers="d628027e1632 ">
                                       <p><code class="codeph">msg_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1670 d628027e1635 ">
                                       <p>接收输出的PL / SQL <code class="codeph">VARRAY</code> 。使用此参数将<code class="codeph">EXPLAIN_REWRITE</code>的输出定向到PL / SQL <code class="codeph">VARRAY</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82BEB5E9-EE35-4E0C-8C88-1AD72210178A__GUID-1A035987-7EA2-47A3-B533-3F8449F7401D">使用说明</p>
                        <p>要将输出获取到表中，必须在调用<code class="codeph">EXPLAIN_REWRITE</code>之前运行<code class="codeph">utlxrw.sq</code> l脚本。此脚本在当前架构中创建名为<code class="codeph">REWRITE_TABLE</code>的表。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67195"></a><a id="ARPLS67195"></a><div class="props_rev_3"><a id="GUID-AFB4EFE5-D8CF-41D1-8605-378A68A2A549" name="GUID-AFB4EFE5-D8CF-41D1-8605-378A68A2A549"></a><h4 id="ARPLS-GUID-AFB4EFE5-D8CF-41D1-8605-378A68A2A549" class="sect4"><span class="enumeration_section">108.4.6</span> I_AM_A_REFRESH功能</h4>
                  <div>
                     <p>此函数返回<code class="codeph">I_AM_REFRESH</code>包状态的值。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AFB4EFE5-D8CF-41D1-8605-378A68A2A549__GUID-8EF8CC83-2EBC-40CC-A678-F7527325EB82">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.I_AM_A_REFRESH RETURN BOOLEAN;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFB4EFE5-D8CF-41D1-8605-378A68A2A549__GUID-C83F8129-A8EC-40DC-865F-2176E391B088">返回值</p>
                        <p>返回值<code class="codeph">true</code>表示在此会话中有效禁用物化视图的所有本地复制触发器，因为每个复制触发器首先检查此状态。返回值<code class="codeph">false</code>表示启用了这些触发器。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67196"></a><a id="ARPLS67197"></a><a id="ARPLS67197"></a><a id="ARPLS67196"></a><div class="props_rev_3"><a id="GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE" name="GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE"></a><h4 id="ARPLS-GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE" class="sect4"><span class="enumeration_section">108.4.7</span> PMARKER功能</h4>
                  <div>
                     <p>此函数从rowid返回分区标记。它用于分区更改跟踪（PCT）。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE__GUID-D2B31507-F6CA-4C42-B2BA-B287890902CE">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.PMARKER（摆脱IN ROWID）返回号码;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE__GUID-6FE9B517-D56C-4DCB-8607-2B642F183D38">参数</p>
                        <div class="tblformal" id="GUID-53A1C7F5-1F1F-44B5-A3D0-4C89B942E6FE__GUID-43C98EF0-AD2B-4DBF-A8D7-D242F1FD1480">
                           <p class="titleintable">表108-7 PMARKER功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PMARKER功能参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.PMARKER subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d628027e1927">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d628027e1930">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e1935" headers="d628027e1927 ">
                                       <p><code class="codeph">摆脱</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e1935 d628027e1930 ">
                                       <p>主表中行条目的rowid</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67198"></a><a id="ARPLS67198"></a><div class="props_rev_3"><a id="GUID-4D653487-732C-4400-804E-97C4C6802ABD" name="GUID-4D653487-732C-4400-804E-97C4C6802ABD"></a><h4 id="ARPLS-GUID-4D653487-732C-4400-804E-97C4C6802ABD" class="sect4"><span class="enumeration_section">108.4.8</span> PURGE_DIRECT_LOAD_LOG过程</h4>
                  <div>
                     <p>在任何已知的物化视图不再需要它们之后，此过程将从直接加载器日志中删除条目。此过程通常用于使用Oracle数据仓库技术的环境中。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4D653487-732C-4400-804E-97C4C6802ABD__GUID-77BF7B5D-EECB-4104-BC7B-486F43D0C65A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.PURGE_DIRECT_LOAD_LOG（）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67199"></a><a id="ARPLS67200"></a><a id="ARPLS67200"></a><a id="ARPLS67199"></a><div class="props_rev_3"><a id="GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D" name="GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D"></a><h4 id="ARPLS-GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D" class="sect4"><span class="enumeration_section">108.4.9</span> PURGE_LOG程序</h4>
                  <div>
                     <p>此过程从物化视图日志中清除行。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D__GUID-B466798D-15F7-4FDF-9C16-4F0CD87A93DF">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.PURGE_LOG（master IN VARCHAR2，num IN BINARY_INTEGER：= 1，flag IN VARCHAR2：='NOP'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D__GUID-DE41FCE7-B404-4609-89CA-F588E4D81083">参数</p>
                        <div class="tblformal" id="GUID-4BD53709-C9A1-4A5F-80F5-088D3CB1E01D__GUID-0286D5C1-4991-482B-A91E-BD8591721356">
                           <p class="titleintable">表108-8 PURGE_LOG过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE_LOG过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.PURGE_LOG subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d628027e2164">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d628027e2167">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d628027e2172" headers="d628027e2164 ">
                                       <p><code class="codeph">主</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d628027e2172 d628027e2167 ">
                                       <p>主表或主物化视图的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d628027e2180" headers="d628027e2164 ">
                                       <p><code class="codeph">NUM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d628027e2180 d628027e2167 ">
                                       <p>要从物化视图日志中删除其行的最近最近刷新的实例化视图的数量。例如，以下语句删除刷新最近最少刷新的两个物化视图所需的行：</p>
                                       <p><code class="codeph">DBMS_MVIEW.PURGE_LOG（'master_table'，2）;</code></p>
                                       <p>要删除实例化视图日志中的所有行，请指明要忽略的大量实例化视图，如下例所示：</p>
                                       <p><code class="codeph">DBMS_MVIEW.PURGE_LOG（ 'master_table'，9999）;</code></p>
                                       <p>这种说法完全清除对应于物化视图日志<code class="codeph">master_table</code>如果少于9999个物化视图是基于<code class="codeph">master_table</code> 。在下次刷新时，必须完全刷新从物化视图日志中清除行的简单物化视图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d628027e2204" headers="d628027e2164 ">
                                       <p><code class="codeph">旗</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d628027e2204 d628027e2167 ">
                                       <p>指定<code class="codeph">delete</code>以保证从物化视图日志中删除至少一个物化视图的行。此参数可以覆盖参数<code class="codeph">num</code>的设置。例如，以下语句从实例化视图日志中删除在最近最近刷新的实例化视图中具有依赖关系行的行：</p>
                                       <p><code class="codeph">DBMS_MVIEW.PURGE_LOG（ 'master_table'，1， '删除'）;</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67201"></a><a id="ARPLS67202"></a><a id="ARPLS67202"></a><a id="ARPLS67201"></a><div class="props_rev_3"><a id="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF" name="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF"></a><h4 id="ARPLS-GUID-E3358A4E-AF64-400B-B707-B4A0866032CF" class="sect4"><span class="enumeration_section">108.4.10</span> PURGE_MVIEW_FROM_LOG过程</h4>
                  <div>
                     <p>在主站点或主物化视图站点上调用此过程，以删除由<code class="codeph">mview_id</code>或<code class="codeph">mviewowner</code> ， <code class="codeph">mviewname</code>和<code class="codeph">mviewsite</code>标识的指定物化视图在主站维护的物化视图刷新相关数据字典表中的行。
                     </p>
                     <div class="section">
                        <p>如果指定的实例化视图是要从任何主表或主物化视图刷新的最旧的实例化视图，则还会清除实例化视图日志。此过程不会取消注册实例化视图。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF__GUID-A89C7815-AEF0-4B09-BEC5-A3EA13448C8D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.PURGE_MVIEW_FROM_LOG（mview_id IN BINARY_INTEGER）; DBMS_MVIEW.PURGE_MVIEW_FROM_LOG（mviewowner IN VARCHAR2，mviewname IN VARCHAR2，mviewsite IN VARCHAR2）;</pre><div class="infoboxnote" id="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF__GUID-B47B90E7-F63B-40A1-B1A8-2EB70AD70279">
                           <p class="notep1">注意：</p>
                           <p>此过程已超载。参数<code class="codeph">mview_id</code>与其余三个参数互斥： <code class="codeph">mviewowner</code> ， <code class="codeph">mviewname</code>和<code class="codeph">mviewsite</code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF__GUID-4DF0D5B8-DAE2-448A-9F54-05265D6E8500">参数</p>
                        <div class="tblformal" id="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF__GUID-39B6694D-D4B3-4CC6-92B3-FCBCC5F8C6A2">
                           <p class="titleintable">表108-9 PURGE_MVIEW_FROM_LOG过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE_MVIEW_FROM_LOG过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.PURGE_MVIEW_FROM_LOG subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d628027e2368">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d628027e2371">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d628027e2376" headers="d628027e2368 ">
                                       <p><code class="codeph">mview_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d628027e2376 d628027e2371 ">
                                       <p>如果要基于目标物化视图的标识执行此过程，请使用<code class="codeph">mview_id</code>参数指定物化视图标识。查询物化视图日志站点上的<code class="codeph">DBA_BASE_TABLE_MVIEWS</code>视图，以获取物化视图ID的列表。
                                       </p>
                                       <p>如果目标物化视图未在已注册的物化视图列表（ <code class="codeph">DBA_REGISTERED_MVIEWS</code> ）中列出，则基于物化视图标识执行此过程非常有用。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d628027e2395" headers="d628027e2368 ">
                                       <p><code class="codeph">mviewowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d628027e2395 d628027e2371 ">
                                       <p>如果未指定<code class="codeph">mview_id</code> ，请使用<code class="codeph">mviewowner</code>参数输入目标<code class="codeph">mviewowner</code>化视图的<code class="codeph">mviewowner</code> 。查询物化视图日志站点上的<code class="codeph">DBA_REGISTERED_MVIEWS</code>视图以查看物化视图所有者。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d628027e2412" headers="d628027e2368 ">
                                       <p><code class="codeph">mviewname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d628027e2412 d628027e2371 ">
                                       <p>如果未指定<code class="codeph">mview_id</code> ，请使用<code class="codeph">mviewname</code>参数输入目标<code class="codeph">mviewname</code>化视图的<code class="codeph">mviewname</code> 。查询物化视图日志站点上的<code class="codeph">DBA_REGISTERED_MVIEWS</code>视图以查看物化视图名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d628027e2429" headers="d628027e2368 ">
                                       <p><code class="codeph">mviewsite</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d628027e2429 d628027e2371 ">
                                       <p>如果未指定<code class="codeph">mview_id</code> ，请使用<code class="codeph">mviewsite</code>参数输入目标<code class="codeph">mviewsite</code>化视图的<code class="codeph">mviewsite</code> 。查询物化视图日志站点上的<code class="codeph">DBA_REGISTERED_MVIEWS</code>视图以查看物化视图站点。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3358A4E-AF64-400B-B707-B4A0866032CF__GUID-F419C691-A32A-4139-A518-E076345CA081">使用说明</p>
                        <p>如果在清除其中一个物化视图日志时发生错误，则不会回滚先前物化视图日志的成功清除操作。这是为了最小化物化视图日志的大小。如果出现错误，可以再次调用此过程，直到清除所有物化视图日志。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67203"></a><a id="ARPLS67204"></a><a id="ARPLS67204"></a><a id="ARPLS67203"></a><div class="props_rev_3"><a id="GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D" name="GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D"></a><h4 id="ARPLS-GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D" class="sect4"><span class="enumeration_section">108.4.11</span> REFRESH程序</h4>
                  <div>
                     <p>此过程刷新实例化视图列表。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D__GUID-E9AE55AA-CFB7-4B94-835C-35A247673CE8">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.REFRESH（{list IN VARCHAR2，| tab IN DBMS_UTILITY.UNCL_ARRAY，}方法IN VARCHAR2：= NULL，rollback_seg IN VARCHAR2：= NULL，push_deferred_rpc IN BOOLEAN：= true，refresh_after_errors IN BOOLEAN：= false，purge_option IN BINARY_INTEGER：= 1，parallelism IN BINARY_INTEGER：= 0，heap_size IN BINARY_INTEGER：= 0，atomic_refresh IN BOOLEAN：= true，嵌套IN BOOLEAN：= false，out_of_place IN BOOLEAN：= false，skip_ext_data IN BOOLEAN：= false）;</pre><div class="infoboxnote" id="GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D__GUID-45E98B4B-C858-4A5B-B2C8-18A2EBF96E2E">
                           <p class="notep1">注意：</p>
                           <p>此过程已超载。<code class="codeph">list</code>和<code class="codeph">tab</code>参数是互斥的。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D__GUID-92DE2350-7611-48C5-9B69-9C9171389DB2">参数</p>
                        <div class="tblformal" id="GUID-DD332F65-A5BC-4DE6-814E-EAE2E0275F3D__GUID-14A332B9-75E5-4596-8C05-8A3B67187787">
                           <p class="titleintable">表108-10 REFRESH过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REFRESH程序参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.REFRESH subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d628027e2580">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d628027e2583">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2588" headers="d628027e2580 ">
                                       <p><code class="codeph">列表|标签</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2588 d628027e2583 ">
                                       <p>要刷新的以逗号分隔的实体化视图列表。（不支持同义词。）这些物化视图可以位于不同的模式中，并具有不同的主表或主物化视图。但是，所有列出的物化视图必须位于本地数据库中。</p>
                                       <p>或者，您可以传入类型为<code class="codeph">DBMS_UTILITY.UNCL_ARRAY</code>的PL / SQL索引表，其中每个元素都是物化视图的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2601" headers="d628027e2580 ">
                                       <p><code class="codeph">方法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2601 d628027e2583 ">
                                       <p>一串刷新方法，指示如何刷新列出的实例化视图。<code class="codeph">f</code>表示快速刷新， <code class="codeph">?</code> 表示强制刷新， <code class="codeph">C</code>或<code class="codeph">c</code>表示完全刷新， <code class="codeph">A</code>或<code class="codeph">a</code>表示始终刷新。<code class="codeph">A</code>和<code class="codeph">C</code>是等价的。<code class="codeph">P</code>或<code class="codeph">p</code>通过重新计算详细信息表中受更改的分区影响的实例化视图中的行来刷新。
                                       </p>
                                       <p>如果实例化视图没有相应的刷新方法（即，如果指定了比刷新方法更多的实例化视图），则会根据其默认刷新方法刷新该实例化视图。例如，请考虑SQL * Plus中的以下<code class="codeph">EXECUTE</code>语句：</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.REFRESH（'countries_mv，regions_mv，hr.employees_mv'，'cf'）;</pre><p>这个语句执行的完全刷新<code class="codeph">countries_mv</code>物化视图的快速刷新<code class="codeph">regions_mv</code>物化视图，和的默认刷新<code class="codeph">hr.employees</code>物化视图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2658" headers="d628027e2580 ">
                                       <p><code class="codeph">rollback_seg</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2658 d628027e2583 ">
                                       <p>刷新实体化视图时要使用的物化视图站点回滚段的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2666" headers="d628027e2580 ">
                                       <p><code class="codeph">push_deferred_rpc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2666 d628027e2583 ">
                                       <p>仅由可更新的物化视图使用。如果要在更新实例化视图之前将更改从实例化视图推送到其关联的主表或主实例化视图，请将此参数设置为<code class="codeph">true</code> 。否则，这些更改可能会暂时丢失。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2677" headers="d628027e2580 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2677 d628027e2583 ">
                                       <p>如果此参数为<code class="codeph">true</code> ，则即使在物化视图的主表或主物化视图的<code class="codeph">DEFERROR</code>视图中记录了未完成的冲突，也可以继续刷新可更新的物化视图。如果此参数为<code class="codeph">true</code>且<code class="codeph">atomic_refresh</code>为<code class="codeph">false</code> ，则此过程将在刷新<code class="codeph">atomic_refresh</code>化视图时如果失败则继续刷新其他<code class="codeph">atomic_refresh</code>化视图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2700" headers="d628027e2580 ">
                                       <p><code class="codeph">purge_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2700 d628027e2583 ">
                                       <p>如果使用并行传播机制（换句话说，并行度设置为1或更大），0表示不清除，1表示惰性清除，2表示强制清除。在大多数情况下，懒惰清除是最佳设置。如果将多个主复制组推送到不同的目标站点，则将purge设置为aggressive以调整队列，并且不频繁且不经常推送对一个或多个复制组的更新。如果不经常更新并推送所有复制组，则将此参数设置为<code class="codeph">0</code>并偶尔执行<code class="codeph">PUSH</code>并将此参数设置为<code class="codeph">2</code>以减少队列。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2717" headers="d628027e2580 ">
                                       <p><code class="codeph">排比</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2717 d628027e2583 ">
                                       <p>0指定串行传播。</p>
                                       <p><span class="italic">n</span> &gt; 1指定具有<span class="italic">n个</span>并行进程的并行传播。
                                       </p>
                                       <p>1仅使用一个并行处理来指定并行传播。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2734" headers="d628027e2580 ">
                                       <p><code class="codeph">heap_size</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2734 d628027e2583 ">
                                       <p>并行传播调度同时检查的最大事务数。Oracle会自动计算默认设置以获得最佳性能。</p>
                                       <p>注意<span class="bold">：</span>除非Oracle支持服务指示，否则请勿设置此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2747" headers="d628027e2580 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2747 d628027e2583 ">
                                       <p>如果此参数设置为<code class="codeph">true</code> ，则在单个事务中刷新实例化视图列表。所有刷新的物化视图都更新为单个时间点。如果任何实例化视图的刷新失败，则不会更新任何实例化视图。
                                       </p>
                                       <p>如果此参数设置为<code class="codeph">false</code> ，则每个实例化视图将在单独的事务中以非原子方式刷新。
                                       </p>
                                       <p>作为完全刷新的一部分，如果使用truncate（非原子刷新），则执行唯一索引重建。<code class="codeph">INDEX</code> <code class="codeph">REBUILD</code>自动计算统计数据。因此，更新截断表的统计信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2771" headers="d628027e2580 ">
                                       <p><code class="codeph">嵌套</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2771 d628027e2583 ">
                                       <p>如果为<code class="codeph">true</code> ，则对指定的物化视图集执行嵌套刷新操作。嵌套刷新操作基于依赖关系顺序刷新所有依赖实体化视图和指定的实例化视图集，以确保嵌套实体化视图相对于基础基表真正新鲜。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2782" headers="d628027e2580 ">
                                       <p><code class="codeph">空间不足</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2782 d628027e2583 ">
                                       <p>如果为<code class="codeph">true</code> ，则执行不适当的刷新。默认值为<code class="codeph">false</code> 。
                                       </p>
                                       <p>此参数使用四种刷新方法（ <code class="codeph">F</code> ， <code class="codeph">P</code> ， <code class="codeph">C</code> <code class="codeph">?</code> ）。因此，例如，如果指定<code class="codeph">F</code>并且<code class="codeph">out_of_place</code> <code class="codeph">=</code> <code class="codeph">true</code> ，则将尝试进行不合适的快速刷新。同样，如果指定<code class="codeph">P</code>并且<code class="codeph">out_of_place</code> <code class="codeph">=</code> <code class="codeph">true</code> ，则将尝试进行异地PCT刷新。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d628027e2837" headers="d628027e2580 ">
                                       <p><code class="codeph">skip_ext_data</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d628027e2837 d628027e2583 ">
                                       <p>为您提供跳过与外部分区对应的MV数据刷新的选项。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67205"></a><a id="ARPLS67206"></a><a id="ARPLS67206"></a><a id="ARPLS67205"></a><div class="props_rev_3"><a id="GUID-3339D150-9B4C-4D75-A95A-C18DFA000377" name="GUID-3339D150-9B4C-4D75-A95A-C18DFA000377"></a><h4 id="ARPLS-GUID-3339D150-9B4C-4D75-A95A-C18DFA000377" class="sect4"><span class="enumeration_section">108.4.12</span> REFRESH_ALL_MVIEWS程序</h4>
                  <div>
                     <p>此过程将刷新具有特定属性的所有实例化视图</p>
                     <div class="section">
                        <p>刷新具有以下属性的所有物化视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>自从最近对主表或主物化视图所依赖的更改以来，物化视图尚未刷新。</p>
                           </li>
                           <li>
                              <p>物化视图以及它所依赖的所有主表或主物化视图都是本地的。</p>
                           </li>
                           <li>
                              <p>物化视图位于<code class="codeph">DBA_MVIEWS</code>视图中。</p>
                           </li>
                        </ul>
                        <p>此过程适用于数据仓库。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3339D150-9B4C-4D75-A95A-C18DFA000377__GUID-72EA16B8-2778-410A-881D-23BFBCA25A38">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.REFRESH_ALL_MVIEWS（number_of_failures OUT BINARY_INTEGER，方法IN VARCHAR2：= NULL，rollback_seg IN VARCHAR2：= NULL，refresh_after_errors IN BOOLEAN：= false，atomic_refresh IN BOOLEAN：= true，out_of_place IN BOOLEAN：= false）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3339D150-9B4C-4D75-A95A-C18DFA000377__GUID-D78DE246-F76A-4F76-9D2A-0F55E719AFF5">参数</p>
                        <div class="tblformal" id="GUID-3339D150-9B4C-4D75-A95A-C18DFA000377__GUID-CE7B78EF-3F4A-4F41-95B0-238F1FD4064D">
                           <p class="titleintable">表108-11 REFRESH_ALL_MVIEWS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REFRESH_ALL_MVIEWS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.REFRESH_ALL_MVIEWS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d628027e2982">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d628027e2985">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e2990" headers="d628027e2982 ">
                                       <p><code class="codeph">number_of_failures</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e2990 d628027e2985 ">
                                       <p>返回处理期间发生的故障数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e2998" headers="d628027e2982 ">
                                       <p><code class="codeph">方法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e2998 d628027e2985 ">
                                       <p>单个刷新方法，指示要为刷新的每个物化视图执行的刷新类型。<code class="codeph">F</code>或<code class="codeph">f</code>表示快速刷新， <code class="codeph">?</code> 表示强制刷新， <code class="codeph">C</code>或c表示完全刷新， <code class="codeph">A</code>或a表示始终刷新。<code class="codeph">A</code>和<code class="codeph">C</code>是等价的。如果未指定方法，则根据其默认刷新方法刷新实例化视图。<code class="codeph">P</code>或<code class="codeph">p</code>通过重新计算详细信息表中受更改的分区影响的实例化视图中的行来刷新。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3034" headers="d628027e2982 ">
                                       <p><code class="codeph">rollback_seg</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3034 d628027e2985 ">
                                       <p>刷新实体化视图时要使用的物化视图站点回滚段的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3042" headers="d628027e2982 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3042 d628027e2985 ">
                                       <p>如果此参数为<code class="codeph">true</code> ，则即使在物化视图的主表或主物化视图的<code class="codeph">DEFERROR</code>视图中记录了未完成的冲突，也可以继续刷新可更新的物化视图。如果此参数为<code class="codeph">true</code>且<code class="codeph">atomic_refresh</code>为<code class="codeph">false</code> ，则此过程将在刷新<code class="codeph">atomic_refresh</code>化视图时如果失败则继续刷新其他<code class="codeph">atomic_refresh</code>化视图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3065" headers="d628027e2982 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3065 d628027e2985 ">
                                       <p>如果此参数设置为<code class="codeph">true</code> ，则刷新的实例化视图将在单个事务中刷新。所有刷新的物化视图都更新为单个时间点。如果任何实例化视图的刷新失败，则不会更新任何实例化视图。
                                       </p>
                                       <p>如果此参数设置为<code class="codeph">false</code> ，则每个实例化视图将在单独的事务中以非原子方式刷新。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3081" headers="d628027e2982 ">
                                       <p><code class="codeph">空间不足</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3081 d628027e2985 ">
                                       <p>如果为<code class="codeph">true</code> ，则执行不适当的刷新。默认值为<code class="codeph">false</code> 。
                                       </p>
                                       <p>此参数使用四种刷新方法（ <code class="codeph">F</code> ， <code class="codeph">P</code> ， <code class="codeph">C</code> <code class="codeph">?</code> ）。因此，例如，如果指定<code class="codeph">F</code>并且<code class="codeph">out_of_place</code> <code class="codeph">=</code> <code class="codeph">true</code> ，则将尝试进行不合适的快速刷新。同样，如果指定<code class="codeph">P</code>并且<code class="codeph">out_of_place</code> <code class="codeph">=</code> <code class="codeph">true</code> ，则将尝试进行异地PCT刷新。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67207"></a><a id="ARPLS67208"></a><a id="ARPLS67208"></a><a id="ARPLS67207"></a><div class="props_rev_3"><a id="GUID-36379E2B-3F21-4F92-8019-F902BFB2896A" name="GUID-36379E2B-3F21-4F92-8019-F902BFB2896A"></a><h4 id="ARPLS-GUID-36379E2B-3F21-4F92-8019-F902BFB2896A" class="sect4"><span class="enumeration_section">108.4.13</span> REFRESH_DEPENDENT程序</h4>
                  <div>
                     <p>此过程将刷新具有特定属性的所有实例化视图。</p>
                     <div class="section">
                        <p>刷新具有以下属性的物化视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>物化视图取决于指定主服务器列表中的主表或主物化视图。</p>
                           </li>
                           <li>
                              <p>自从最近对主表或主物化视图所依赖的更改以来，物化视图尚未刷新。</p>
                           </li>
                           <li>
                              <p>物化视图以及它所依赖的所有主表或主物化视图都是本地的。</p>
                           </li>
                           <li>
                              <p>物化视图位于<code class="codeph">DBA_MVIEWS</code>视图中。</p>
                           </li>
                        </ul>
                        <p>此过程适用于数据仓库。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-36379E2B-3F21-4F92-8019-F902BFB2896A__GUID-5CA101DC-D596-47BA-9F15-1E14AAC724BE">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.REFRESH_DEPENDENT（number_of_failures OUT BINARY_INTEGER，{list IN VARCHAR2，| tab in DBMS_UTILITY.UNCL_ARRAY，}方法IN VARCHAR2：= NULL，rollback_seg IN VARCHAR2：= NULL，refresh_after_errors IN BOOLEAN：= false，atomic_refresh IN BOOLEAN：= true，嵌套IN BOOLEAN：= false，out_of_place IN BOOLEAN：= false）;</pre><div class="infoboxnote" id="GUID-36379E2B-3F21-4F92-8019-F902BFB2896A__GUID-89ABAA53-51C0-4CFA-9E6B-860726C9637C">
                           <p class="notep1">注意：</p>
                           <p>此过程已超载。<code class="codeph">list</code>和<code class="codeph">tab</code>参数是互斥的。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-36379E2B-3F21-4F92-8019-F902BFB2896A__GUID-9ABC907D-2B19-4CCF-AA49-21293EDFA671">参数</p>
                        <div class="tblformal" id="GUID-36379E2B-3F21-4F92-8019-F902BFB2896A__GUID-08F73B49-0996-4AAE-9EC8-BD4DC411A26A">
                           <p class="titleintable">表108-12 REFRESH_DEPENDENT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REFRESH_DEPENDENT过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.REFRESH_DEPENDENT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d628027e3284">参数</th>
                                    <th align="left" valign="bottom" width="78%" id="d628027e3287">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3292" headers="d628027e3284 ">
                                       <p><code class="codeph">number_of_failures</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3292 d628027e3287 ">
                                       <p>返回处理期间发生的故障数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3300" headers="d628027e3284 ">
                                       <p><code class="codeph">列表|标签</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3300 d628027e3287 ">
                                       <p>以逗号分隔的主表或主物化视图的列表，物化视图可以依赖这些视图。（不支持同义词。）这些表和依赖于它们的物化视图可以位于不同的模式中。但是，所有表和物化视图都必须位于本地数据库中。</p>
                                       <p>或者，您可以传入类型为<code class="codeph">DBMS_UTILITY.UNCL_ARRAY</code>的PL / SQL索引表，其中每个元素都是表的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3313" headers="d628027e3284 ">
                                       <p><code class="codeph">方法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3313 d628027e3287 ">
                                       <p>一串刷新方法，指示如何刷新从属物化视图。依赖于特定表的所有物化视图都将根据与该表关联的刷新方法进行刷新。<code class="codeph">F</code>或<code class="codeph">f</code>表示快速刷新，？表示强制刷新， <code class="codeph">C</code>或<code class="codeph">c</code>表示完全刷新， <code class="codeph">A</code>或<code class="codeph">a</code>表示始终刷新。<code class="codeph">A</code>和<code class="codeph">C</code>是等价的。<code class="codeph">P</code>或<code class="codeph">p</code>通过重新计算详细信息表中受更改的分区影响的实例化视图中的行来刷新。
                                       </p>
                                       <p>如果表没有相应的刷新方法（即，如果指定了比刷新方法更多的表），则根据其默认刷新方法刷新依赖于该表的任何实例化视图。例如，SQL * Plus中的以下<code class="codeph">EXECUTE</code>语句：</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.REFRESH_DEPENDENT（'雇员，deptartments，hr.regions'，'cf'）;</pre><p>执行完全刷新依赖于<code class="codeph">employees</code>表的物化视图，快速刷新依赖于<code class="codeph">departments</code>表的物化视图，以及依赖于<code class="codeph">hr.regions</code>表的物化视图的默认刷新。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3370" headers="d628027e3284 ">
                                       <p><code class="codeph">rollback_seg</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3370 d628027e3287 ">
                                       <p>刷新实体化视图时要使用的物化视图站点回滚段的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3378" headers="d628027e3284 ">
                                       <p><code class="codeph">refresh_after_errors</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3378 d628027e3287 ">
                                       <p>如果此参数为<code class="codeph">true</code> ，则即使在物化视图的主表或主物化视图的<code class="codeph">DEFERROR</code>视图中记录了未完成的冲突，也可以继续刷新可更新的物化视图。如果此参数为<code class="codeph">true</code>且<code class="codeph">atomic_refresh</code>为<code class="codeph">false</code> ，则此过程将在刷新<code class="codeph">atomic_refresh</code>化视图时如果失败则继续刷新其他<code class="codeph">atomic_refresh</code>化视图。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3401" headers="d628027e3284 ">
                                       <p><code class="codeph">atomic_refresh</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3401 d628027e3287 ">
                                       <p>如果此参数设置为<code class="codeph">true</code> ，则刷新的实例化视图将在单个事务中刷新。所有刷新的物化视图都更新为单个时间点。如果任何实例化视图的刷新失败，则不会更新任何实例化视图。
                                       </p>
                                       <p>如果此参数设置为<code class="codeph">false</code> ，则每个实例化视图将在单独的事务中以非原子方式刷新。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3417" headers="d628027e3284 ">
                                       <p><code class="codeph">嵌套</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3417 d628027e3287 ">
                                       <p>如果为<code class="codeph">true</code> ，则对指定的表集执行嵌套刷新操作。嵌套刷新操作基于依赖性顺序刷新指定表集的所有依赖实体化视图，以确保嵌套的物化视图相对于底层基表真正新鲜。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d628027e3428" headers="d628027e3284 ">
                                       <p><code class="codeph">空间不足</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d628027e3428 d628027e3287 ">
                                       <p>如果为<code class="codeph">true</code> ，则执行不适当的刷新。默认值为<code class="codeph">false</code> 。
                                       </p>
                                       <p>此参数使用四种刷新方法（ <code class="codeph">F</code> ， <code class="codeph">P</code> ， <code class="codeph">C</code> <code class="codeph">?</code> ）。因此，例如，如果指定<code class="codeph">F</code>并且<code class="codeph">out_of_place</code> <code class="codeph">=</code> <code class="codeph">true</code> ，则将尝试进行不合适的快速刷新。同样，如果指定<code class="codeph">P</code>并且<code class="codeph">out_of_place</code> <code class="codeph">=</code> <code class="codeph">true</code> ，则将尝试进行异地PCT刷新。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67209"></a><a id="ARPLS67210"></a><a id="ARPLS67210"></a><a id="ARPLS67209"></a><div class="props_rev_3"><a id="GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D" name="GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D"></a><h4 id="ARPLS-GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D" class="sect4"><span class="enumeration_section">108.4.14</span> REGISTER_MVIEW过程</h4>
                  <div>
                     <p>此过程可以管理各个物化视图。在主站点或主物化视图站点调用它以注册物化视图。</p>
                     <div class="section">
                        <p>请注意，通常，在物化视图创建期间会自动注册物化视图。如果自动注册失败或注册信息已删除，则只应运行此过程以手动注册实例化视图。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D__GUID-6B25E8EC-B1F5-4CA3-A356-52D5D0B93EB0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.REGISTER_MVIEW（mviewowner IN VARCHAR2，mviewname IN VARCHAR2，mviewsite IN VARCHAR2，mview_id IN DATE | BINARY_INTEGER，flag IN BINARY_INTEGER，qry_txt IN VARCHAR2，rep_type IN BINARY_INTEGER：= DBMS_MVIEW.REG_UNKNOWN）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D__GUID-2AC84405-6C11-447C-846D-4366041C1EB9">参数</p>
                        <div class="tblformal" id="GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D__GUID-EFCC3903-AFF6-4DDE-85E3-8A1F55E736FF">
                           <p class="titleintable">表108-13 REGISTER_MVIEW过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REGISTER_MVIEW过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.REGISTER_MVIEW subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d628027e3597">参数</th>
                                    <th align="left" valign="bottom" width="84%" id="d628027e3600">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3605" headers="d628027e3597 ">
                                       <p><code class="codeph">mviewowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3605 d628027e3600 ">
                                       <p>物化视图的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3613" headers="d628027e3597 ">
                                       <p><code class="codeph">mviewname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3613 d628027e3600 ">
                                       <p>物化视图的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3621" headers="d628027e3597 ">
                                       <p><code class="codeph">mviewsite</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3621 d628027e3600 ">
                                       <p>在Oracle数据库版本8.x上注册的实例化视图的实例化视图站点的名称<span class="italic"> </span>和更高的主站点或主物化视图站点。此名称不应包含任何双引号。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3632" headers="d628027e3597 ">
                                       <p><code class="codeph">mview_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3632 d628027e3600 ">
                                       <p>物化视图的标识号。将Oracle数据库版本8.x和更高的物化视图指定为<code class="codeph">BINARY_INTEGER</code> 。指定在Oracle数据库版本8.x及更高主站点或主物化视图站点上注册为<code class="codeph">DATE</code>的Oracle数据库版本7物化视图。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3646" headers="d628027e3597 ">
                                       <p><code class="codeph">旗</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3646 d628027e3600 ">
                                       <p>描述要注册的实例化视图的属性的常量。可分配的有效常量包括以下内容：</p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_ROWID_MVIEW</code>用于rowid物化视图</p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_PRIMARY_KEY_MVIEW</code>用于主键物化视图</p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_OBJECT_ID_MVIEW</code>用于对象id物化视图</p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_FAST_REFRESHABLE_MVIEW</code>用于可快速刷新的物化视图</p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_UPDATABLE_MVIEW</code>用于可更新的物化视图</p>
                                       <p>物化视图可以具有多个这些属性。在这种情况下，使用加号（+）指定多个属性。例如，如果可以快速刷新主键物化视图，则可以为此参数输入以下内容：</p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_PRIMARY_KEY_MVIEW</code> + <code class="codeph">DBMS_MVIEW.REG_FAST_REFRESHABLE_MVIEW</code></p>
                                       <p>您可以通过查询<code class="codeph">ALL_MVIEWS</code>数据字典视图来确定<code class="codeph">ALL_MVIEWS</code>化视图的属性。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3687" headers="d628027e3597 ">
                                       <p><code class="codeph">qry_txt</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3687 d628027e3600 ">
                                       <p>物化视图定义查询的前32,000个字节。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d628027e3695" headers="d628027e3597 ">
                                       <p><code class="codeph">rep_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="84%" headers="d628027e3695 d628027e3600 ">
                                       <p>物化视图的版本。可分配的有效常量包括以下内容：</p>
                                       <p>如果物化视图位于Oracle数据库版本7站点， <code class="codeph">DBMS_MVIEW.REG_V7_SNAPSHOT</code></p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DBMS_MVIEW.REG_V8_SNAPSHOT</code></p>
                                          </li>
                                       </ul>
                                       <p>如果物化视图位于Oracle数据库版本8.x或更高版本的站点， <code class="codeph">reg_repapi_snapshot</code></p>
                                       <p><code class="codeph">DBMS_MVIEW.REG_UNKNOWN</code> （缺省值），如果您不知道<code class="codeph">DBMS_MVIEW.REG_UNKNOWN</code>化视图是在Oracle数据库版本7站点还是Oracle数据库版本8.x（或更高版本）站点</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A601DB22-C8A0-4C58-BAC1-9D211D880B8D__GUID-291D1B60-C06D-4689-BF01-7FA88E881826">使用说明</p>
                        <p>远程实体化视图站点使用远程过程调用在主站点或主物化视图站点调用此过程。如果使用相同的<code class="codeph">mviewowner</code> ， <code class="codeph">mviewname</code>和<code class="codeph">mviewsite</code>多次调用<code class="codeph">REGISTER_MVIEW</code> ，则会存储<code class="codeph">mview_id</code> ， <code class="codeph">flag</code>和<code class="codeph">qry_txt</code>最新值。如果查询超过最大<code class="codeph">VARCHAR2</code>大小，则<code class="codeph">qry_txt</code>包含查询的前32000个字符，其余部分将被截断。手动调用时，必须由调用该过程的人在物化视图数据字典视图中查找<code class="codeph">mview_id</code>的值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67211"></a><a id="ARPLS67212"></a><a id="ARPLS67212"></a><a id="ARPLS67211"></a><div class="props_rev_3"><a id="GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793" name="GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793"></a><h4 id="ARPLS-GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793" class="sect4"><span class="enumeration_section">108.4.15</span> UNREGISTER_MVIEW程序</h4>
                  <div>
                     <p>此过程可以管理各个物化视图。在主站点或主物化视图站点调用它以取消注册物化视图。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793__GUID-BFEFFFA5-4E0B-4260-B298-1875B9BA3F30">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MVIEW.UNREGISTER_MVIEW（mviewowner IN VARCHAR2，mviewname IN VARCHAR2，mviewsite IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793__GUID-C3F0D8D2-79B4-4346-89A3-BB15A68A439A">参数</p>
                        <div class="tblformal" id="GUID-7FAEA86E-FDBB-4BE8-9037-7450299B6793__GUID-65A4FAAF-0AA5-483E-9E3D-50CAB4BDF27A">
                           <p class="titleintable">表108-14 UNREGISTER_MVIEW过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNREGISTER_MVIEW过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_MVIEW.UNREGISTER_MVIEW subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d628027e3867">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d628027e3870">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3875" headers="d628027e3867 ">
                                       <p><code class="codeph">mviewowner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3875 d628027e3870 ">
                                       <p>物化视图的所有者</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3883" headers="d628027e3867 ">
                                       <p><code class="codeph">mviewname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3883 d628027e3870 ">
                                       <p>物化视图的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d628027e3891" headers="d628027e3867 ">
                                       <p><code class="codeph">mviewsite</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d628027e3891 d628027e3870 ">
                                       <p>物化视图站点的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
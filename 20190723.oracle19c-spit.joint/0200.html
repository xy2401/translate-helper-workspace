<html id="12699.using-oracle-dbms_metadata-api.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Using the DBMS_METADATA APIs."></meta>
      <meta name="description" content="Using the DBMS_METADATA APIs."></meta>
      <title>使用元数据API</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Utilities "></meta>
      <meta property="og:description" content="Using the DBMS_METADATA APIs."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Utilities"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-utilities.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T19:07:17-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96081-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-logminer-utility.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-original-export-utility.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Utilities"></meta>
    <meta name="dcterms.isVersionOf" content="SUTIL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-logminer-utility.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-original-export-utility.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">公用事业</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="other-oracle-utilities.html" property="item" typeof="WebPage"><span property="name">其他公用事业</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用元数据API</li>
            </ol>
            <a id="GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" name="GUID-D9B1300F-B21D-416E-8B9B-C542195EF249"></a><a id="SUTIL015"></a>
            
            <h2 id="SUTIL-GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" class="sect2"><span class="enumeration_chapter">23</span>使用元数据API</h2>
         </header>
         <div class="ind">
            <div>
               <p>使用<code class="codeph">DBMS_METADATA</code> API。</p>
               <p><code class="codeph">DBMS_METADATA</code> API使您可以执行以下操作：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>以XML格式检索对象的元数据</p>
                  </li>
                  <li>
                     <p>以各种方式转换XML，包括将其转换为SQL DDL</p>
                  </li>
                  <li>
                     <p>提交XML以重新创建检索提取的对象</p>
                  </li>
               </ul>
               <p><code class="codeph">DBMS_METADATA_DIFF</code> API允许您比较数据库之间的对象，以识别相同类型的对象中的元数据随时间的变化。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-EFF19735-0C94-46CD-B1CB-123FEB390B43">为什么使用DBMS_METADATA API？</a><br><code class="codeph">DBMS_METADATA</code> API使您无需编写和维护自己的元数据提取代码。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-FF65F378-97BB-459A-A9C2-E0B105205D3D">DBMS_METADATA API概述</a><br><code class="codeph">DBMS_METADATA</code> API概述。</li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-EE2AA635-EA83-4265-9727-E9C659842CEF">使用DBMS_METADATA API检索对象的元数据</a><br><code class="codeph">DBMS_METADATA</code> API的检索接口允许您指定要检索的对象的类型。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4">使用DBMS_METADATA API重新创建检索对象</a><br>获取对象的元数据时，可能希望使用它在不同的数据库或模式中重新创建对象。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048">使用DBMS_METADATA API检索不同对象类型的集合</a><br>检索不同对象类型的集合的描述和示例。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-E9A778A7-2E9D-4240-8707-A52FF65556FE">使用DBMS_METADATA_DIFF API比较对象元数据</a><br>使用<code class="codeph">DBMS_METADATA</code>和<code class="codeph">DBMS_METADATA_DIFF</code>的检索，比较和提交接口来获取两个表的元数据，比较元数据并生成使一个表像另一个表的<code class="codeph">ALTER</code>语句的描述和示例。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-DF431094-5F1D-478D-87E6-04CC774B761F">DBMS_METADATA API的编程接口的性能提示</a><br>描述在使用<code class="codeph">DBMS_METADATA</code> API的编程接口时如何增强性能。</li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-89237236-4729-4E33-842D-D124A3C15B10">示例DBMS_METADATA API的用法</a><br>如何使用<code class="codeph">DBMS_METADATA</code> API的示例。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD">DBMS_METADATA过程摘要</a><br>提供<code class="codeph">DBMS_METADATA</code> API提供的过程的简要说明。</li>
                  <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-CB5F314F-7412-40F1-B71C-8F6DFB45A4D8">DBMS_METADATA_DIFF过程摘要</a><br>提供<code class="codeph">DBMS_METADATA_DIFF</code> API提供的过程和函数的简要说明。</li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="other-oracle-utilities.html#GUID-FCEA49BD-D3AF-4337-88F1-3A23545F35A6">其他实用程序</a></p>
                  </div>
               </div>
            </div>
            <a id="SUTIL1622"></a><div class="props_rev_3"><a id="GUID-EFF19735-0C94-46CD-B1CB-123FEB390B43" name="GUID-EFF19735-0C94-46CD-B1CB-123FEB390B43"></a><h3 id="SUTIL-GUID-EFF19735-0C94-46CD-B1CB-123FEB390B43" class="sect3"><span class="enumeration_section">23.1</span>为什么使用DBMS_METADATA API？
               </h3>
               <div>
                  <p><code class="codeph">DBMS_METADATA</code> API使您无需编写和维护自己的元数据提取代码。
                  </p>
                  <p>随着时间的推移，您已经使用了Oracle数据库，您可能已经开发了自己的代码，用于从字典中提取元数据，操作元数据（添加列，更改列数据类型等），然后将元数据转换为DDL，以便您可以在同一个或另一个数据库上重新创建该对象。保持代码更新以支持新的字典功能可能已经证明是具有挑战性的。</p>
                  <p>它为字典元数据的提取，操作和重新创建提供了集中的工具。它支持最新级别的所有字典对象。</p>
                  <p>尽管<code class="codeph">DBMS_METADATA</code> API可以显着减少您编写和维护的自定义代码的数量，但它不会对正常的数据库过程进行任何更改。通过运行<code class="codeph">catproc</code> ， <code class="codeph">DBMS_METADATA</code> API的安装方式与数据字典视图的安装方式相同。 <code class="codeph">sql</code>在数据库安装时运行SQL脚本。安装后，即使在受限模式下，只要实例正常运行，它就可用。
                  </p>
                  <p>更改数据库版本时， <code class="codeph">DBMS_METADATA</code> API不要求您更改任何源代码，因为它在不同的Oracle版本之间向上兼容。一个版本检索的XML文档可以由相同或更高版本的提交界面处理。例如，Oracle9 <span class="italic">i</span>数据库检索的XML文档可以提交给Oracle数据库<span class="italic">10g。</span></p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL1623"></a><div class="props_rev_3"><a id="GUID-FF65F378-97BB-459A-A9C2-E0B105205D3D" name="GUID-FF65F378-97BB-459A-A9C2-E0B105205D3D"></a><h3 id="SUTIL-GUID-FF65F378-97BB-459A-A9C2-E0B105205D3D" class="sect3"><span class="enumeration_section">23.2</span> DBMS_METADATA API概述</h3>
               <div>
                  <p><code class="codeph">DBMS_METADATA</code> API概述。</p>
                  <p>出于<code class="codeph">DBMS_METADATA</code> API的目的，数据库中的每个实体都被建模为属于对象类型的对象。例如，表<code class="codeph">scott.emp</code>是一个对象，其对象类型是<code class="codeph">TABLE</code> 。获取对象的元数据时，必须指定对象类型。
                  </p>
                  <p>要获取对象类型中的特定对象或对象集，请指定过滤器。为每种对象类型定义不同的过滤器。例如，为<code class="codeph">TABLE</code>对象类型定义的两个过滤器是<code class="codeph">SCHEMA</code>和<code class="codeph">NAME</code> 。例如，它们允许您说您希望其模式为<code class="codeph">scott</code>且名称为<code class="codeph">emp</code> 。
                  </p>
                  <p><code class="codeph">DBMS_METADATA</code> API使用XML（可扩展标记语言）和XSLT（可扩展样式表语言转换）。<code class="codeph">DBMS_METADATA</code> API将对象元数据表示为XML，因为它是一种可以轻松解析和转换的通用格式。<code class="codeph">DBMS_METADATA</code> API使用XSLT将XML文档转换为其他XML文档或SQL DDL。</p>
                  <p>您可以使用<code class="codeph">DBMS_METADATA</code> API指定在获取元数据时（或重新提交元数据时）应用于XML的一个或多个转换（XSLT脚本）。API提供了一些预定义的转换，包括一个名为DDL的转换，它将XML文档转换为SQL创建DDL。</p>
                  <p>然后，您可以使用变换参数指定变换的条件。您还可以指定可选的解析项以访问对象元数据的特定属性。</p>
                  <p>有关所有这些选项及其实现示例的更多详细信息，请参阅以下部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" title="DBMS_METADATA API的检索接口允许您指定要检索的对象的类型。">使用DBMS_METADATA API检索对象的元数据</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4" title="获取对象的元数据时，可能希望使用它在不同的数据库或模式中重新创建对象。">使用DBMS_METADATA API重新创建检索对象</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048" title="检索不同对象类型的集合的描述和示例。">使用DBMS_METADATA API检索不同对象类型的集合</a></p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-FF65F378-97BB-459A-A9C2-E0B105205D3D__GUID-28A33334-67A1-4031-8E24-FBB7A8892347">使用视图确定有效的DBMS_METADATA选项</p>
                     <p>您可以使用以下视图来确定每个对象类型转换允许哪些<code class="codeph">DBMS_METADATA</code>转换，每个转换的参数及其解析项。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../refrn/DBMS_METADATA_TRANSFORMS.html#REFRN-GUID-486B1381-AA5B-4F00-B770-3244119D6C05" target="_blank">DBMS_METADATA_TRANSFORMS</a> - 记录与<code class="codeph">DBMS_METADATA</code>包一起使用的所有有效的Oracle提供的转换。
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/DBMS_METADATA_TRANSFORM_PARAMS.html#REFRN-GUID-A042CD61-3AF5-4F11-BABB-4743486A3B88" target="_blank">DBMS_METADATA_TRANSFORM_PARAMS</a> - 记录每个转换的有效转换参数。
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sutil&amp;id=REFRN-GUID-2A2D4764-3DB6-4F1E-9D3A-2BF301BC577C" target="_blank">DBMS_METADATA_PARSE_ITEMS</a> - 记录有效的解析项。
                           </p>
                        </li>
                     </ul>
                     <p>例如，假设您想知道<code class="codeph">INDEX</code>对象允许哪些转换。以下查询返回对<code class="codeph">INDEX</code>对象有效的转换，所需的输入类型以及生成的输出类型：</p><pre class="pre codeblock"><code>SQL&gt; SELECT转换，output_type，input_type，description 2 FROM dbms_metadata_transforms 3 WHERE object_type ='INDEX'; TRANSFORM OUTPUT_TYP INPUT_TYPE说明---------- ---------- -------------------- ------ -------------------------------------------------- -------------- ALTERXML ALTER_XML SXML差异doc从SXML生成ALTER_XML差异文档SXMLDDL DDL SXML将SXML转换为DDL MODIFY XML XML根据转换参数修改XML文档SXML SXML XML将XML转换为SXML DDL DDL XML将XML转换为SQL以创建对象ALTERDDL ALTER_DDL ALTER_XML将ALTER_XML转换为ALTER_DDL MODIFYSXML SXML SXML修改SXML文档</code></pre><p>然后，您可能想知道哪些转换参数对DDL转换有效：</p><pre class="pre codeblock"><code>SQL&gt; SELECT param，datatype，default_val，description 2 FROM dbms_metadata_transform_params 3 WHERE object_type ='INDEX'和transform ='DDL'4 ORDER BY param; PARAM DATATYPE DEFAULT_VA说明------------------------- ---------- ----------  - -------------------------------------------------- ------------------- INCLUDE_PARTITIONS TEXT在DDL转换中包含生成的时间间隔和列表分区INDEX_COMPRESSION_CLAUSE TEXT“”用户指定的索引压缩子句的文本PARTITIONING BOOLEAN TRUE在转换中包含分区子句PARTITION_NAME TEXT“”为转换选择的分区名称PCTSPACE NUMBER“”要修改空间分配的百分比SEGMENT_ATTRIBUTES BOOLEAN TRUE在转换中包括段属性子句（物理属性，存储属性，表空间，日志记录）STORAGE BOOLEAN TRUE包含存储子句in transformation SUBPARTITION_NAME TEXT“”为转换选择的子分区名称TABLESPACE BOOLEAN TRUE在转换中包含表空间子句</code></pre><p>您还可以执行以下查询，该查询返回有关<code class="codeph">INDEX</code>对象类型的特定元数据::</p><pre class="pre codeblock"><code>SQL&gt; SELECT parse_item，description 2 FROM dbms_metadata_parse_items 3 WHERE object_type ='INDEX'和convert ='Y'; PARSE_ITEM DESCRIPTION -------------------- ---------------------------- ---------------------------------- OBJECT_TYPE对象类型TABLESPACE对象表空间（分区对象的默认表空间）BASE_OBJECT_SCHEMA Schema of基础对象SCHEMA对象模式，如果有任何名称对象名称BASE_OBJECT_NAME基础对象的名称BASE_OBJECT_TYPE基础对象的对象类型SYSTEM_GENERATED Y =系统生成的对象; N =不是系统生成的</code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL1624"></a><div class="props_rev_3"><a id="GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" name="GUID-EE2AA635-EA83-4265-9727-E9C659842CEF"></a><h3 id="SUTIL-GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" class="sect3"><span class="enumeration_section">23.3</span>使用DBMS_METADATA API检索对象的元数据</h3>
               <div>
                  <p><code class="codeph">DBMS_METADATA</code> API的检索接口允许您指定要检索的对象的类型。
                  </p>
                  <p>这可以是特定对象类型（例如表，索引或过程），也可以是形成逻辑单元的对象类型的异构集合（例如数据库导出或模式导出）。默认情况下，您获取的元数据将在XML文档中返回。</p>
                  <div class="infoboxnote" id="GUID-EE2AA635-EA83-4265-9727-E9C659842CEF__GUID-C43193A5-98F0-4C5B-A946-C14502066969">
                     <p class="notep1">注意：</p>
                     <p>要访问不在您自己的模式中的对象，您必须具有<code class="codeph">SELECT_CATALOG_ROLE</code>角色。但是，在许多PL / SQL对象（存储过程，函数，定义者权限API）中禁用了角色。因此，如果您正在编写将访问另一个模式中的对象的PL / SQL程序（或者，通常是您需要<code class="codeph">SELECT_CATALOG_ROLE</code>角色的任何对象），那么您必须将代码放在调用者的权限API中。</p>
                  </div>
                  <p>您可以使用编程界面进行休闲浏览，也可以使用它来开发应用程序。如果您只是想对系统元数据进行即席查询，则可以使用浏览界面。如果要将字典元数据作为应用程序的一部分提取，则可以使用编程接口。在这种情况下，可以使用<code class="codeph">DBMS_METADATA</code> API提供的过程代替您当前可能用于执行相同操作的SQL脚本和自定义代码。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-FBCB0C17-4B6A-4BC9-9F01-86015FA0F1C3">用于基本元数据检索的典型步骤</a><br>检索元数据时，使用<code class="codeph">DBMS_METADATA</code> PL / SQL API。</li>
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-68EB7622-137B-46CC-AE50-75972582092E">检索多个对象</a><br>检索多个对象的描述和示例。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-27965831-A88D-4723-8402-F31DC9839B71">在变换上放置条件</a><br>您可以使用变换参数指定要添加的变换的条件。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-BB45CA8D-2621-419B-906C-1E811499786A">访问特定元数据属性</a><br>访问特定元数据属性的描述和示例。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_2"><a id="GUID-FBCB0C17-4B6A-4BC9-9F01-86015FA0F1C3" name="GUID-FBCB0C17-4B6A-4BC9-9F01-86015FA0F1C3"></a><h4 id="SUTIL-GUID-FBCB0C17-4B6A-4BC9-9F01-86015FA0F1C3" class="sect4"><span class="enumeration_section">23.3.1</span>用于基本元数据检索的典型步骤</h4>
                  <div>
                     <p>检索元数据时，使用<code class="codeph">DBMS_METADATA</code> PL / SQL API。</p>
                     <div class="section">
                        <p>以下示例说明了编程和浏览界面。</p>
                        <p><code class="codeph">DBMS_METADATA</code>编程接口示例提供了使用<code class="codeph">DBMS_METADATA</code>编程接口检索一个表的元数据的基本演示。它创建一个<code class="codeph">DBMS_METADATA</code>程序，用于创建名为<code class="codeph">get_table_md</code> 。此函数返回一个表的元数据。
                        </p>
                        <p><code class="codeph">DBMS_METADATA</code>浏览界面示例演示了如何使用浏览界面获取相同的结果。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FBCB0C17-4B6A-4BC9-9F01-86015FA0F1C3__GUID-99E54742-0197-4C53-A4B0-6D23486B3ED1">
                        <p class="titleinexample">示例23-1使用DBMS_METADATA编程接口检索数据</p>
                        <ol>
                           <li>
                              <p>创建一个<code class="codeph">DBMS_METADATA</code>程序，该程序创建一个名为<code class="codeph">get_table_md</code> ，该函数将在<code class="codeph">hr</code>模式中返回一个表（时间<code class="codeph">timecards</code>的元数据。这样的程序的内容如下。（对于本例，命名程序<code class="codeph">metadata_program</code> 。 <code class="codeph">sql</code> ）。
                              </p><pre class="oac_no_warn" dir="ltr">创建或替换函数get_table_md RETURN CLOB IS  - 定义局部变量。h NUMBER; - 由OPEN号码返回的句柄; -  ADD_TRANSFORM doc CLOB返回的句柄; BEGIN  - 指定对象类型。h：= DBMS_METADATA.OPEN（'TABLE'）; - 使用过滤器指定所需的特定对象。DBMS_METADATA.SET_FILTER（H， 'SCHEMA'， 'HR'）; DBMS_METADATA.SET_FILTER（H， 'NAME'， '考勤卡'）; - 请求将元数据转换为创建DDL。 th：= DBMS_METADATA.ADD_TRANSFORM（h，'DDL'）; - 获取对象。doc：= DBMS_METADATA.FETCH_CLOB（h）; - 释放资源。DBMS_METADATA.CLOSE（H）;返回文档;结束; /</pre></li>
                           <li>
                              <p>以用户<code class="codeph">hr</code>连接。
                              </p>
                           </li>
                           <li>
                              <p>运行该程序以创建<code class="codeph">get_table_md</code>函数：</p>
                              <p><code class="codeph">SQL&gt; @metadata_program</code></p>
                           </li>
                           <li>
                              <p>在select操作中使用新创建的<code class="codeph">get_table_md</code>函数。要生成完整，不间断的输出，请将<code class="codeph">PAGESIZE</code>设置为0，并在执行查询之前将<code class="codeph">LONG</code>设置为某个较大的数字（如图所示）：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET PAGESIZE 0 SQL&gt; SET LONG 1000000 SQL&gt; SELECT get_table_md FROM dual;</pre></li>
                           <li>
                              <p>输出显示<code class="codeph">hr</code>模式中时间<code class="codeph">timecards</code>表的元数据，类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">创建表“HR”。“TIMECARDS”（“EMPLOYEE_ID”编号（6,0），“周”编号（2,0），“JOB_ID”VARCHAR2（10），“HOURS_WORKED”编号（4,2），外键（“EMPLOYEE_ID”）参考“HR”。“员工”（“EMPLOYEE_ID”）ENABLE）PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS记录存储（初始65536下一页1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT） TABLESPACE“示例”</pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-FBCB0C17-4B6A-4BC9-9F01-86015FA0F1C3__GUID-F2DE8330-4777-4AD8-B129-EA25E8E24012">
                        <p class="titleinexample">示例23-2使用DBMS_METADATA浏览界面检索数据</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET PAGESIZE 0 SQL&gt; SET LONG 1000000 SQL&gt; SELECT DBMS_METADATA.GET_DDL（'TABLE'，'TIMECARDS'，'HR'）FROM dual;</pre><p>此查询的结果与<code class="codeph">DBMS_METADATA</code>编程接口示例中的步骤5中显示的结果相同。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" title="DBMS_METADATA API的检索接口允许您指定要检索的对象的类型。">使用DBMS_METADATA API检索对象的元数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL3620"></a><a id="SUTIL1626"></a><div class="props_rev_3"><a id="GUID-68EB7622-137B-46CC-AE50-75972582092E" name="GUID-68EB7622-137B-46CC-AE50-75972582092E"></a><h4 id="SUTIL-GUID-68EB7622-137B-46CC-AE50-75972582092E" class="sect4"><span class="enumeration_section">23.3.2</span>检索多个对象</h4>
                  <div>
                     <p>检索多个对象的描述和示例。</p>
                     <div class="section">
                        <p>在前面的示例“使用<code class="codeph">DBMS_METADATA</code>编程接口检索数据”中， <code class="codeph">FETCH_CLOB</code>过程仅被调用一次，因为已知只有一个对象。但是，您还可以检索多个对象，例如，模式<code class="codeph">scott</code>所有表。为此，您需要使用以下构造：</p><pre class="oac_no_warn" dir="ltr">LOOP doc：= DBMS_METADATA.FETCH_CLOB（h）; -   - 当没有更多对象要检索时，FETCH_CLOB返回NULL。 - 当doc is NULL时退出;结束循环;</pre><p>以下示例演示了如何使用此构造并检索多个对象。此示例以用户<code class="codeph">scott</code>身份连接。密码是<code class="codeph">tiger</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-68EB7622-137B-46CC-AE50-75972582092E__I1014062">
                        <p class="titleinexample">示例23-3检索多个对象</p>
                        <ol>
                           <li>
                              <p>创建一个表名为<code class="codeph">my_metadata</code>和程序命名<code class="codeph">get_tables_md</code> ，如下所示。因为不是所有对象都可以返回，所以它们存储在表中并在最后查询。
                              </p><pre class="oac_no_warn" dir="ltr">DROP TABLE my_metadata; CREATE TABLE my_metadata（md clob）;创建或替换程序get_tables_md IS  - 定义局部变量h NUMBER; - '打开'号码返回的句柄; - 'ADD_TRANSFORM'doc CLOB返回的句柄; - 在CLOB BEGIN中返回元数据 - 指定对象类型。h：= DBMS_METADATA.OPEN（'TABLE'）; - 使用过滤器指定架构。DBMS_METADATA.SET_FILTER（H， 'SCHEMA'， 'SCOTT'）; - 请求将元数据转换为创建DDL。 th：= DBMS_METADATA.ADD_TRANSFORM（h，'DDL'）; - 获取对象。LOOP doc：= DBMS_METADATA.FETCH_CLOB（h）; - 当没有更多对象要检索时，FETCH_CLOB返回NULL。当doc为NULL时退出; - 将元数据存储在表格中。INSERT INTO my_metadata（md）VALUES（doc）;承诺;结束循环; - 释放资源。DBMS_METADATA.CLOSE（H）;结束; /</pre></li>
                           <li>
                              <p>执行程序：</p><pre class="oac_no_warn" dir="ltr">执行get_tables_md;</pre></li>
                           <li>
                              <p>查询<code class="codeph">my_metadata</code>表以查看检索到的内容：</p><pre class="oac_no_warn" dir="ltr">SET LONG 9000000 SET PAGES 0 SELECT * FROM my_metadata;</pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" title="DBMS_METADATA API的检索接口允许您指定要检索的对象的类型。">使用DBMS_METADATA API检索对象的元数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL3621"></a><a id="SUTIL3622"></a><a id="SUTIL1627"></a><div class="props_rev_3"><a id="GUID-27965831-A88D-4723-8402-F31DC9839B71" name="GUID-27965831-A88D-4723-8402-F31DC9839B71"></a><h4 id="SUTIL-GUID-27965831-A88D-4723-8402-F31DC9839B71" class="sect4"><span class="enumeration_section">23.3.3</span>在变换上放置条件</h4>
                  <div>
                     <p>您可以使用变换参数指定要添加的变换的条件。</p>
                     <div class="section">
                        <p>为此，请使用<code class="codeph">SET_TRANSFORM_PARAM</code>过程。例如，如果已为<code class="codeph">TABLE</code>对象添加了<code class="codeph">DDL</code>转换，则可以指定<code class="codeph">SEGMENT_ATTRIBUTES</code>转换参数，以指示您不希望段属性（物理，存储，日志记录等）出现在DDL中。默认情况下，段属性确实出现在DDL中。</p>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-27965831-A88D-4723-8402-F31DC9839B71__I1014066">例23-4</a>显示了<code class="codeph">SET_TRANSFORM_PARAM</code>过程的使用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-27965831-A88D-4723-8402-F31DC9839B71__I1014066">
                        <p class="titleinexample">例23-4在变换上放置条件</p>
                        <ol>
                           <li>
                              <p>创建一个名为<code class="codeph">get_table_md</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">创建或替换函数get_table_md RETURN CLOB IS  - 定义局部变量。h NUMBER; - '打开'号码返回的句柄; - 'ADD_TRANSFORM'doc CLOB返回的句柄; BEGIN  - 指定对象类型。h：= DBMS_METADATA.OPEN（'TABLE'）; - 使用过滤器指定所需的特定对象。DBMS_METADATA.SET_FILTER（H， 'SCHEMA'， 'HR'）; DBMS_METADATA.SET_FILTER（H， 'NAME'， '考勤卡'）; - 请求将元数据转换为创建DDL。 th：= dbms_metadata.add_transform（h，'DDL'）; - 指定不返回段属性。- 请注意，此调用使用TRANSFORM句柄，而不是OPEN句柄。DBMS_METADATA.SET_TRANSFORM_PARAM（日 'SEGMENT_ATTRIBUTES'，假）; - 获取对象。doc：= DBMS_METADATA.FETCH_CLOB（h）; - 释放资源。DBMS_METADATA.CLOSE（H）;返回文档;结束; /</pre></li>
                           <li>
                              <p>执行以下查询：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT get_table_md FROM dual;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">创建表“HR”。“TIMECARDS”（“EMPLOYEE_ID”编号（6,0），“周”编号（2,0），“JOB_ID”VARCHAR2（10），“HOURS_WORKED”编号（4,2），外键（“EMPLOYEE_ID”）参考“HR”。“EMPLOYEES”（“EMPLOYEE_ID”）ENABLE）</pre></li>
                        </ol>
                        <p>到目前为止所示的示例使用了单个变换，即<code class="codeph">DDL</code>变换。<code class="codeph">DBMS_METADATA</code> API还允许您指定多个转换，第一个的输出是下一个的输入，依此类推。
                        </p>
                        <p>Oracle提供了一个名为<code class="codeph">MODIFY</code>的转换，用于修改XML文档。您可以执行更改架构名称或表空间名称等操作。为此，请使用重映射参数和<code class="codeph">SET_REMAP_PARAM</code>过程。
                        </p>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-27965831-A88D-4723-8402-F31DC9839B71__I1014070">例23-5</a>显示了<code class="codeph">SET_REMAP_PARAM</code>过程的示例用法。它首先添加<code class="codeph">MODIFY</code>转换并指定重映射参数以将模式名称从<code class="codeph">hr</code>更改为<code class="codeph">scott</code> 。然后添加<code class="codeph">DDL</code>转换。<code class="codeph">MODIFY</code>转换的输出是一个XML文档，它成为<code class="codeph">DDL</code>转换的输入。最终结果是为时间<code class="codeph">timecards</code>表创建DDL，并将模式<code class="codeph">hr</code>所有实例更改为<code class="codeph">scott</code> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-27965831-A88D-4723-8402-F31DC9839B71__I1014070">
                        <p class="titleinexample">示例23-5修改XML文档</p>
                        <ol>
                           <li>
                              <p>创建一个名为remap_schema的函数：</p><pre class="oac_no_warn" dir="ltr">CREATE或REPLACE FUNCTION remap_schema RETURN CLOB IS  - 定义局部变量。h NUMBER; - 由OPEN号码返回的句柄; -  ADD_TRANSFORM doc CLOB返回的句柄; BEGIN  - 指定对象类型。h：= DBMS_METADATA.OPEN（'TABLE'）; - 使用过滤器指定所需的特定对象。DBMS_METADATA.SET_FILTER（H， 'SCHEMA'， 'HR'）; DBMS_METADATA.SET_FILTER（H， 'NAME'， '考勤卡'）; - 请求修改架构名称。th：= DBMS_METADATA.ADD_TRANSFORM（h，'MODIFY'）; DBMS_METADATA.SET_REMAP_PARAM（日 'REMAP_SCHEMA'， 'HR'， 'SCOTT'）; - 请求将元数据转换为创建DDL。 th：= DBMS_METADATA.ADD_TRANSFORM（h，'DDL'）; - 指定不返回段属性。DBMS_METADATA.SET_TRANSFORM_PARAM（日 'SEGMENT_ATTRIBUTES'，假）; - 获取对象。doc：= DBMS_METADATA.FETCH_CLOB（h）; - 释放资源。DBMS_METADATA.CLOSE（H）;返回文档;结束; /</pre></li>
                           <li>
                              <p>执行以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT remap_schema FROM dual;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">创建表“SCOTT”。“TIMECARDS”（“EMPLOYEE_ID”号码（6,0），“周”号（2,0），“JOB_ID”VARCHAR2（10），“HOURS_WORKED”号码（4,2），外键（“EMPLOYEE_ID”）参考“SCOTT”。“EMPLOYEES”（“EMPLOYEE_ID”）ENABLE）</pre><p>如果您熟悉XSLT，则可以添加自己的用户编写的转换来处理XML。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" title="DBMS_METADATA API的检索接口允许您指定要检索的对象的类型。">使用DBMS_METADATA API检索对象的元数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL3623"></a><a id="SUTIL1628"></a><div class="props_rev_3"><a id="GUID-BB45CA8D-2621-419B-906C-1E811499786A" name="GUID-BB45CA8D-2621-419B-906C-1E811499786A"></a><h4 id="SUTIL-GUID-BB45CA8D-2621-419B-906C-1E811499786A" class="sect4"><span class="enumeration_section">23.3.4</span>访问特定元数据属性</h4>
                  <div>
                     <p>访问特定元数据属性的描述和示例。</p>
                     <div class="section">
                        <p>通常需要访问对象元数据的特定属性，例如，其名称或模式。您可以通过解析返回的元数据来获取此信息，但<code class="codeph">DBMS_METADATA</code> API提供了另一种机制;您可以指定解析项，将从元数据中解析并在单独的数据结构中返回的特定属性。为此，请使用<code class="codeph">SET_PARSE_ITEM</code>过程。
                        </p>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-BB45CA8D-2621-419B-906C-1E811499786A__I1014074">示例23-6</a>获取模式中的所有表。对于每个表，使用解析项来获取其名称。然后使用该名称获取表中的所有索引。该示例说明了<code class="codeph">FETCH_DDL</code>函数的使用，该函数返回<code class="codeph">sys</code>元数据。 <code class="codeph">ku$_ddls</code>对象。
                        </p>
                        <p>此示例假定您已连接到包含某些表和索引的架构。它还会创建一个名为<code class="codeph">my_metadata</code>的表。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BB45CA8D-2621-419B-906C-1E811499786A__I1014074">
                        <p class="titleinexample">示例23-6使用解析项访问特定元数据属性</p>
                        <ol>
                           <li>
                              <p>创建一个表名为<code class="codeph">my_metadata</code>和一个名为程序<code class="codeph">get_tables_and_indexes</code> ，具体如下：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE my_metadata; CREATE TABLE my_metadata（object_type VARCHAR2（30），name VARCHAR2（30），md CLOB）;创建或替换过程get_tables_and_indexes IS  - 定义局部变量。h1号码; -  OPEN为表格h2 NUMBER返回的句柄; -  OPEN为索引th1 NUMBER返回的句柄; -  ADD_TRANSFORM为表格th2 NUMBER返回的句柄; -  ADD_TRANSFORM为索引doc sys.ku $ _ddls返回的句柄; - 在sys.ku $ _ddls中返回元数据， -  sys.ku $ _ddl对象的嵌套表ddl CLOB; - 为对象pi sys.ku $ _parsed_items创建DDL; - 在此对象中返回解析项 - 它包含在sys.ku $ _ddl objname VARCHAR2（30）中; - 解析的对象名称idxddls sys.ku $ _ddls; - 在sys.ku $ _ddls中返回元数据， -  sys.ku $ _ddl对象的嵌套表idxname VARCHAR2（30）; - 解析的索引名称BEGIN  - 此过程有一个外部循环，用于获取表，以及一个内部循环，用于获取索引。- 指定对象类型：TABLE。 h1：= DBMS_METADATA.OPEN（'TABLE'）; - 请求将表名作为解析项返回。DBMS_METADATA.SET_PARSE_ITEM（H1， 'NAME'）; - 请求将元数据转换为创建DDL。 th1：= DBMS_METADATA.ADD_TRANSFORM（h1，'DDL'）; - 指定不返回段属性。DBMS_METADATA.SET_TRANSFORM_PARAM（TH1， 'SEGMENT_ATTRIBUTES'，假）; - 设置外部循环：获取TABLE对象。LOOP doc：= dbms_metadata.fetch_ddl（h1）; - 当没有更多要检索的对象时，FETCH_DDL返回NULL。当doc为NULL时退出; - 循环遍历ku $ _ddls嵌套表的行。我的文件。FIRST..doc。最后的循环ddl：= doc（i）.ddlText; pi：= doc（i）.parsedItems; - 遍历返回的解析项。如果pi不是NULL和pi。COUNT&gt; 0那么j IN pi。FIRST..pi。最后一圈如果pi（j）.item ='NAME'那么objname：= pi（j）.value;万一;结束循环;万一; - 将有关此对象的信息插入到我们的表中。INSERT INTO my_metadata（object_type，name，md）VALUES（'TABLE'，objname，ddl）;承诺;结束循环; - 现在使用解析后的表名称获取索引 -  BASE_OBJECT_NAME过滤器。- 指定对象类型。h2：= DBMS_METADATA.OPEN（'INDEX'）; - 基础对象是在外部循环中检索的表。DBMS_METADATA.SET_FILTER（H2， 'BASE_OBJECT_NAME'，objname表）; - 排除系统生成的索引。DBMS_METADATA.SET_FILTER（H2， 'SYSTEM_GENERATED'，假）; - 请求将索引名称作为解析项返回。DBMS_METADATA.SET_PARSE_ITEM（H 2， 'NAME'）; - 请求将元数据转换为创建DDL。 th2：= DBMS_METADATA.ADD_TRANSFORM（h2，'DDL'）; - 指定不返回段属性。DBMS_METADATA.SET_TRANSFORM_PARAM（TH2， 'SEGMENT_ATTRIBUTES'，假）; LOOP idxddls：= dbms_metadata.fetch_ddl（h2）; - 当没有更多要检索的对象时，FETCH_DDL返回NULL。当idxddls为NULL时退出;我在idxddls。FIRST..idxddls。最后的循环ddl：= idxddls（i）.ddlText; pi：= idxddls（i）.parsedItems; - 遍历返回的解析项。如果pi不是NULL和pi。COUNT&gt; 0那么j IN pi。FIRST..pi。最后一圈如果pi（j）.item ='NAME'那么idxname：= pi（j）.value;万一;结束循环;万一; - 将元数据存储在我们的表中。INSERT INTO my_metadata（object_type，name，md）VALUES（'INDEX'，idxname，ddl）;承诺;结束循环; -  for loop END LOOP; DBMS_METADATA.CLOSE（H2）;结束循环; DBMS_METADATA.CLOSE（H1）;结束; /</pre></li>
                           <li>
                              <p>执行程序：</p><pre class="oac_no_warn" dir="ltr">执行get_tables_and_indexes;</pre></li>
                           <li>
                              <p>执行以下查询以查看检索到的内容：</p><pre class="oac_no_warn" dir="ltr">SET LONG 9000000 SET PAGES 0 SELECT * FROM my_metadata;</pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-EE2AA635-EA83-4265-9727-E9C659842CEF" title="DBMS_METADATA API的检索接口允许您指定要检索的对象的类型。">使用DBMS_METADATA API检索对象的元数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL3624"></a><a id="SUTIL1629"></a><div class="props_rev_2"><a id="GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4" name="GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4"></a><h3 id="SUTIL-GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4" class="sect3"><span class="enumeration_section">23.4</span>使用DBMS_METADATA API重新创建检索对象</h3>
               <div>
                  <p>获取对象的元数据时，可能希望使用它在不同的数据库或模式中重新创建对象。</p>
                  <div class="section">
                     <p>在获取元数据时，您可能还没有准备好做出重新映射决策。您可能希望将这些决定推迟到以后。为此，您将元数据作为XML获取并将其存储在文件或表中。稍后您可以使用提交界面重新创建对象。</p>
                     <p>提交界面在形式上与检索界面类似。它有一个<code class="codeph">OPENW</code>过程，您可以在其中指定要创建的对象的对象类型。您可以指定变换，变换参数和解析项目。您可以调用<code class="codeph">CONVERT</code>函数将XML转换为DDL，也可以调用<code class="codeph">PUT</code>函数将XML转换为DDL并提交DDL以创建对象。
                     </p>
                     <p><a href="using-oracle-dbms_metadata-api.html#GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4__I1014078">示例23-7</a>为一个模式中的表获取XML，然后使用submit接口在另一个模式中重新创建表。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1DA999FD-1AFD-4D8D-A6D0-8EEB84E0D9E4__I1014078">
                     <p class="titleinexample">示例23-7使用提交界面重新创建检索到的对象</p>
                     <ol>
                        <li>
                           <p>以特权用户身份连接：</p><pre class="oac_no_warn" dir="ltr">CONNECT系统输入密码： <span class="italic">密码</span>
</pre></li>
                        <li>
                           <p>创建一个调用者权限包来保存该过程，因为访问另一个模式中的对象需要<code class="codeph">SELECT_CATALOG_ROLE</code>角色。在定义者权限PL / SQL对象（例如过程或函数）中，角色被禁用。
                           </p><pre class="oac_no_warn" dir="ltr">创建或替换包example_pkg AUTHID current_user IS PROCEDURE move_table（VARCHAR2中的table_name，VARCHAR2中的from_schema，VARCHAR2中的to_schema）; END example_pkg; / CREATE或REPLACE PACKAGE BODY example_pkg IS程序move_table（VARCHAR2中的table_name，VARCHAR2中的from_schema，VARCHAR2中的to_schema）IS  - 定义局部变量。h1号码; -  OPEN h2 NUMBER返回的句柄; -  OPENW th1 NUMBER返回的句柄; -  ADD_TRANSFORM为MODIFY th2 NUMBER返回的句柄; -  ADD_TRANSFORM为DDL xml CLOB返回的句柄; -  XML文档错误sys.ku $ _SubmitResults：= sys.ku $ _SubmitResults（）;错误的sys.ku $ _SubmitResult;结果BOOLEAN; BEGIN  - 指定对象类型。h1：= DBMS_METADATA.OPEN（'TABLE'）; - 使用过滤器指定表的名称和架构。DBMS_METADATA.SET_FILTER（H1， 'NAME'，表名）; DBMS_METADATA.SET_FILTER（H1， 'SCHEMA'，from_schema）; - 获取XML。 xml：= DBMS_METADATA.FETCH_CLOB（h1）; IF xml IS NULL，然后是DBMS_OUTPUT.PUT_LINE（'表'|| from_schema ||'。'|| table_name ||'not found'）;返回;万一; - 释放资源。DBMS_METADATA.CLOSE（H1）; - 使用submit接口在另一个模式中重新创建对象。- 使用OPENW（而不是OPEN）指定对象类型。h2：= DBMS_METADATA.OPENW（'TABLE'）; - 首先，添加MODIFY变换。th1：= DBMS_METADATA.ADD_TRANSFORM（h2，'MODIFY'）; - 指定所需的修改：重新映射架构名称。DBMS_METADATA.SET_REMAP_PARAM（TH1， 'REMAP_SCHEMA'，from_schema，to_schema）; - 现在添加DDL转换，以便修改后的XML可以转换为创建DDL。 th2：= DBMS_METADATA.ADD_TRANSFORM（h2，'DDL'）; - 调用PUT重新创建对象。结果：= DBMS_METADATA.PUT（h2，xml，0，errs）; DBMS_METADATA.CLOSE（H2）;如果不是结果那么 - 处理错误信息。因为我错了。FIRST..errs。最后的循环错误：=错误（i）; FOR j IN err.errorLines。FIRST..err.errorLines。最后的循环dbms_output.put_line（err.errorLines（j）.errorText）;结束循环;结束循环;万一;结束; END example_pkg; /</pre></li>
                        <li>
                           <p>现在在模式<code class="codeph">SCOTT</code>创建一个名为<code class="codeph">my_example</code>的表：</p><pre class="oac_no_warn" dir="ltr">CONNECT scott输入密码： - 密码为tiger。DROP TABLE my_example; CREATE TABLE my_example（一个NUMBER，b VARCHAR2（30））; CONNECT系统输入密码： <span class="italic">密码</span> SET LONG 9000000 SET PAGESIZE 0 SET SERVEROUTPUT ON SIZE 100000</pre></li>
                        <li>
                           <p>将<code class="codeph">my_example</code>表复制到<code class="codeph">SYSTEM</code>模式：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE my_example; EXECUTE example_pkg.move_table（'MY_EXAMPLE'，'SCOTT'，'SYSTEM'）;</pre></li>
                        <li>
                           <p>执行以下查询以验证它是否有效：</p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_METADATA.GET_DDL（'TABLE'，'MY_EXAMPLE'）FROM dual;</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL3625"></a><a id="SUTIL1630"></a><div class="props_rev_3"><a id="GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048" name="GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048"></a><h3 id="SUTIL-GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048" class="sect3"><span class="enumeration_section">23.5</span>使用DBMS_METADATA API检索不同对象类型的集合</h3>
               <div>
                  <p>检索不同对象类型的集合的描述和示例。</p>
                  <p>有时您可能需要检索对象集合，其中对象具有不同类型，但包含逻辑单元。例如，您可能需要检索数据库或模式或表中的所有对象及其所有依赖索引，约束，授权，审计等。为了使这种检索成为可能， <code class="codeph">DBMS_METADATA</code> API提供了几种异构对象类型。异构对象类型是一组有序的对象类型。
                  </p>
                  <p>Oracle提供以下异构对象类型：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">TABLE_EXPORT</code> - 表及其依赖对象</p>
                     </li>
                     <li>
                        <p><code class="codeph">SCHEMA_EXPORT</code> - 模式及其内容</p>
                     </li>
                     <li>
                        <p><code class="codeph">DATABASE_EXPORT</code> - 数据库中的对象</p>
                     </li>
                  </ul>
                  <p>这些对象类型是为Data Pump Export实用程序开发的，但您可以在自己的应用程序中使用它们。</p>
                  <p>您只能使用这些类型的编程检索接口（ <code class="codeph">OPEN</code> ， <code class="codeph">FETCH</code> ， <code class="codeph">CLOSE</code> ），而不能使用浏览界面或提交界面。
                  </p>
                  <p>您可以为异构对象类型指定过滤器，就像对同类型一样。例如，您可以指定<code class="codeph">SCHEMA</code>和<code class="codeph">NAME</code>进行过滤<code class="codeph">TABLE_EXPORT</code> ，或<code class="codeph">SCHEMA</code>用于过滤<code class="codeph">SCHEMA_EXPORT</code> 。</p>
                  <p><a href="using-oracle-dbms_metadata-api.html#GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048__I1014082">示例23-8</a>显示了如何检索<code class="codeph">scott</code>模式中的对象类型。以用户<code class="codeph">scott</code>身份连接。密码是<code class="codeph">tiger</code> 。
                  </p>
                  <div class="example" id="GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048__I1014082">
                     <p class="titleinexample">示例23-8检索异构对象类型</p>
                     <ol>
                        <li>
                           <p>创建一个表来存储检索到的对象：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE my_metadata; CREATE TABLE my_metadata（md CLOB）;创建或替换过程get_schema_md IS  - 定义局部变量。h NUMBER; -  OPEN号码返回的句柄; -  ADD_TRANSFORM doc CLOB返回的句柄; - 在CLOB BEGIN中返回元数据 - 指定对象类型。h：= DBMS_METADATA.OPEN（'SCHEMA_EXPORT'）; - 使用过滤器指定架构。DBMS_METADATA.SET_FILTER（H， 'SCHEMA'， 'SCOTT'）; - 请求将元数据转换为创建DDL。 th：= DBMS_METADATA.ADD_TRANSFORM（h，'DDL'）; - 获取对象。LOOP doc：= DBMS_METADATA.FETCH_CLOB（h）; - 当没有更多对象要检索时，FETCH_CLOB返回NULL。当doc为NULL时退出; - 将元数据存储在表中。INSERT INTO my_metadata（md）VALUES（doc）;承诺;结束循环; - 释放资源。DBMS_METADATA.CLOSE（H）;结束; /</pre></li>
                        <li>
                           <p>执行程序：</p><pre class="oac_no_warn" dir="ltr">执行get_schema_md;</pre></li>
                        <li>
                           <p>执行以下查询以查看检索到的内容：</p><pre class="oac_no_warn" dir="ltr">SET LONG 9000000 SET PAGESIZE 0 SELECT * FROM my_metadata;</pre></li>
                     </ol>
                     <p>在此示例中，按对象类型按顺序返回对象;例如，返回所有表，然后是表上的所有授权，然后是表上的所有索引，依此类推。一般来说，订单是有效的创建订单。因此，如果按照返回的顺序获取对象并使用提交接口在另一个模式或数据库中以相同的顺序重新创建它们，那么通常不会出现错误。（例外通常涉及循环引用;例如，如果包A包含对包B的调用，而包B包含对包A的调用，则其中一个包将需要第二次重新编译。）</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-E0EEE23F-EDED-40D2-BAE7-A1F5FF951589">过滤异构对象类型的返回</a><br>过滤异构对象类型返回的描述和示例。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL3626"></a><a id="SUTIL1631"></a><div class="props_rev_3"><a id="GUID-E0EEE23F-EDED-40D2-BAE7-A1F5FF951589" name="GUID-E0EEE23F-EDED-40D2-BAE7-A1F5FF951589"></a><h4 id="SUTIL-GUID-E0EEE23F-EDED-40D2-BAE7-A1F5FF951589" class="sect4"><span class="enumeration_section">23.5.1</span>过滤异构对象类型的返回</h4>
                  <div>
                     <p>过滤异构对象类型返回的描述和示例。</p>
                     <div class="section">
                        <p>要更好地控制返回的对象，请使用<code class="codeph">SET_FILTER</code>过程并指定过滤器仅应用于特定成员类型。您可以通过将成员类型的路径名指定为<code class="codeph">SET_FILTER</code>的第四个参数来<code class="codeph">SET_FILTER</code> 。此外，您可以使用<code class="codeph">EXCLUDE_PATH_EXPR</code>过滤器来排除对象类型的所有对象。有关有效路径名的列表，请参见<code class="codeph">TABLE_EXPORT_OBJECTS</code>目录视图。
                        </p>
                        <p><a href="using-oracle-dbms_metadata-api.html#GUID-E0EEE23F-EDED-40D2-BAE7-A1F5FF951589__I1014087">例23-9</a>显示了如何使用<code class="codeph">SET_FILTER</code>指定对返回对象的更精细控制。以用户<code class="codeph">scott</code>身份连接。密码是<code class="codeph">tiger</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E0EEE23F-EDED-40D2-BAE7-A1F5FF951589__I1014087">
                        <p class="titleinexample">示例23-9过滤异构对象类型的返回</p>
                        <ol>
                           <li>
                              <p>创建一个表<code class="codeph">my_metadata</code>来存储检索到的对象。并创建一个过程<code class="codeph">get_schema_md2</code> 。
                              </p><pre class="oac_no_warn" dir="ltr">DROP TABLE my_metadata; CREATE TABLE my_metadata（md CLOB）;创建或替换过程get_schema_md2 IS  - 定义局部变量。h NUMBER; - '打开'号码返回的句柄; - 'ADD_TRANSFORM'doc CLOB返回的句柄; - 在CLOB BEGIN中返回元数据 - 指定对象类型。h：= DBMS_METADATA.OPEN（'SCHEMA_EXPORT'）; - 使用过滤器指定架构。DBMS_METADATA.SET_FILTER（H， 'SCHEMA'， 'SCOTT'）; - 使用SET_FILTER的第四个参数指定过滤器 - 适用于特定成员对象类型。DBMS_METADATA.SET_FILTER（H， 'NAME_EXPR'，'！= '' MY_METADATA ''”， 'TABLE'）; - 使用EXCLUDE_PATH_EXPR过滤器排除过程。DBMS_METADATA.SET_FILTER（H， 'EXCLUDE_PATH_EXPR'， '=' '过程' ''）; - 请求将元数据转换为创建DDL。 th：= DBMS_METADATA.ADD_TRANSFORM（h，'DDL'）; - 使用SET_TRANSFORM_PARAM的第四个参数指定一个参数 - 该参数适用于特定的成员对象类型。DBMS_METADATA.SET_TRANSFORM_PARAM（日 'SEGMENT_ATTRIBUTES'，假， 'TABLE'）; - 获取对象。LOOP doc：= dbms_metadata.fetch_clob（h）; - 当没有更多对象要检索时，FETCH_CLOB返回NULL。当doc为NULL时退出; - 将元数据存储在表中。INSERT INTO my_metadata（md）VALUES（doc）;承诺;结束循环; - 释放资源。DBMS_METADATA.CLOSE（H）;结束; /</pre></li>
                           <li>
                              <p>执行程序：</p><pre class="oac_no_warn" dir="ltr">执行get_schema_md2;</pre></li>
                           <li>
                              <p>执行以下查询以查看检索到的内容：</p><pre class="oac_no_warn" dir="ltr">SET LONG 9000000 SET PAGESIZE 0 SELECT * FROM my_metadata;</pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-85AC0B9A-5C6E-4D2A-A3CA-30F5F7884048" title="检索不同对象类型的集合的描述和示例。">使用DBMS_METADATA API检索不同对象类型的集合</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL3628"></a><a id="SUTIL3627"></a><div class="props_rev_3"><a id="GUID-E9A778A7-2E9D-4240-8707-A52FF65556FE" name="GUID-E9A778A7-2E9D-4240-8707-A52FF65556FE"></a><h3 id="SUTIL-GUID-E9A778A7-2E9D-4240-8707-A52FF65556FE" class="sect3"><span class="enumeration_section">23.6</span>使用DBMS_METADATA_DIFF API比较对象元数据</h3>
               <div>
                  <p>使用<code class="codeph">DBMS_METADATA</code>和<code class="codeph">DBMS_METADATA_DIFF</code>的检索，比较和提交接口来获取两个表的元数据，比较元数据并生成使一个表像另一个表的<code class="codeph">ALTER</code>语句的描述和示例。
                  </p>
                  <div class="section">
                     <p>为简单起见，在整个示例中使用了函数变体。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E9A778A7-2E9D-4240-8707-A52FF65556FE__GUID-7A7FE9D7-77D8-483F-8B18-37FE39CCE24F">
                     <p class="titleinexample">示例23-10比较对象元数据</p>
                     <ol>
                        <li>
                           <p>创建两个表， <code class="codeph">TAB1</code>和<code class="codeph">TAB2</code> ：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLE TAB1 2（“EMPNO”NUMBER（4,0），3“ENAME”VARCHAR2（10），4“JOB”VARCHAR2（9），5“DEPTNO”NUMBER（2,0）6）;表创建。SQL&gt; CREATE TABLE TAB2 2（“EMPNO”编号（4,0）PRIMARY KEY ENABLE，3“ENAME”VARCHAR2（20），4“MGR”编号（4,0），5“DEPTNO”编号（2,0） 6）;表创建。
 </pre><p>注意<code class="codeph">TAB1</code>和<code class="codeph">TAB2</code>之间的区别：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>表名不同</p>
                              </li>
                              <li>
                                 <p><code class="codeph">TAB2</code>具有主键约束; <code class="codeph">TAB1</code>没有</p>
                              </li>
                              <li>
                                 <p>每个表中<code class="codeph">ENAME</code>列的长度不同</p>
                              </li>
                              <li>
                                 <p><code class="codeph">TAB1</code>有一个<code class="codeph">JOB</code>列; <code class="codeph">TAB2</code>没有</p>
                              </li>
                              <li>
                                 <p><code class="codeph">TAB2</code>有一个<code class="codeph">MGR</code>列; <code class="codeph">TAB1</code>没有</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>创建一个函数以SXML格式返回表元数据。以下是使用<code class="codeph">DBMS_METADATA_DIFF</code> API时要记住的有关SXML的一些要点：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>SXML是对象元数据的XML表示。</p>
                              </li>
                              <li>
                                 <p>返回的SXML与<code class="codeph">DBMS_METADATA.GET_XML</code>返回的XML不同，后者复杂且不透明，包含二进制值，特定于实例的值等。
                                 </p>
                              </li>
                              <li>
                                 <p>SXML看起来像是将SQL创建DDL直接转换为XML。标记名称和结构对应于<a href="../sqlrf/SQL-Statements-ADMINISTER-KEY-MANAGEMENT-to-ALTER-JAVA.html#SQLRF008" target="_blank"><span class="italic">Oracle数据库SQL语言参考中的名称</span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>SXML旨在支持编辑和比较。</p>
                              </li>
                           </ul>
                           <p>为了简化此示例，使用transform参数来抑制物理属性：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE OR REPLACE FUNCTION get_table_sxml（name IN VARCHAR2）RETURN CLOB IS 2 open_handle NUMBER; 3 transform_handle NUMBER; 4 doc CLOB; 5 BEGIN 6 open_handle：= DBMS_METADATA.OPEN（'TABLE'）; 7 DBMS_METADATA.SET_FILTER（open_handle，'NAME'，name）; 8  -  9  - 使用'SXML'转换将XML转换为SXML 10  -  11 transform_handle：= DBMS_METADATA.ADD_TRANSFORM（open_handle，'SXML'）; 12  -  13  - 使用此变换参数来抑制物理属性14  -  15 DBMS_METADATA.SET_TRANSFORM_PARAM（transform_handle，'PHYSICAL_PROPERTIES'，16 FALSE）; 17 doc：= DBMS_METADATA.FETCH_CLOB（open_handle）; 18 DBMS_METADATA.CLOSE（open_handle）; 19 RETURN doc; 20结束; 21 /创建功能。
 </pre></li>
                        <li>
                           <p>使用<code class="codeph">get_table_sxml</code>函数获取两个表的表SXML：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT get_table_sxml（'TAB1'）FROM dual; &lt;TABLE xmlns =“http://xmlns.oracle.com/ku”version =“1.0”&gt; &lt;SCHEMA&gt; SCOTT &lt;/ SCHEMA&gt; &lt;NAME&gt; TAB1 &lt;/ NAME&gt; &lt;RELATIONAL_TABLE&gt; &lt;COL_LIST&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME &gt; EMPNO &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 4 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; ENAME &lt;/ NAME&gt; &lt;DATATYPE&gt; VARCHAR2 &lt; / DATATYPE&gt; &lt;LENGTH&gt; 10 &lt;/ LENGTH&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; JOB &lt;/ NAME&gt; &lt;DATATYPE&gt; VARCHAR2 &lt;/ DATATYPE&gt; &lt;LENGTH&gt; 9 &lt;/ LENGTH&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt; NAME&gt; DEPTNO &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 2 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;/ COL_LIST&gt; &lt;/ RELATIONAL_TABLE&gt; &lt;/ TABLE&gt;选择1行。SQL&gt; SELECT get_table_sxml（'TAB2'）FROM dual; &lt;TABLE xmlns =“http://xmlns.oracle.com/ku”version =“1.0”&gt; &lt;SCHEMA&gt; SCOTT &lt;/ SCHEMA&gt; &lt;NAME&gt; TAB2 &lt;/ NAME&gt; &lt;RELATIONAL_TABLE&gt; &lt;COL_LIST&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME &gt; EMPNO &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 4 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; ENAME &lt;/ NAME&gt; &lt;DATATYPE&gt; VARCHAR2 &lt; / DATATYPE&gt; &lt;LENGTH&gt; 20 &lt;/ LENGTH&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; MGR &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 4 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; DEPTNO &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 2 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;/ COL_LIST&gt; &lt;PRIMARY_KEY_CONSTRAINT_LIST&gt; &lt;PRIMARY_KEY_CONSTRAINT_LIST_ITEM&gt; &lt;COL_LIST&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; EMPNO &lt;/ NAME&gt; &lt;/ COL_LIST_ITEM&gt; &lt;/ COL_LIST&gt; &lt;/ PRIMARY_KEY_CONSTRAINT_LIST_ITEM&gt; &lt;/ PRIMARY_KEY_CONSTRAINT_LIST&gt; &lt;/ RELATIONAL_TABLE&gt; &lt;/ TABLE&gt;选择了1行。
 </pre></li>
                        <li>
                           <p>使用<code class="codeph">DBMS_METADATA</code>浏览API比较结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT dbms_metadata.get_sxml（'TABLE'，'TAB1'）FROM dual; SQL&gt; SELECT dbms_metadata.get_sxml（'TABLE'，'TAB2'）FROM dual;</pre></li>
                        <li>
                           <p>使用<code class="codeph">DBMS_METADATA_DIFF</code> API创建函数以比较两个表的元数据。在此函数中， <code class="codeph">get_table_sxml</code>刚刚在步骤2中定义的<code class="codeph">get_table_sxml</code>函数。
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE OR REPLACE FUNCTION compare_table_sxml（name1 IN VARCHAR2，name2 IN VARCHAR2）RETURN CLOB IS 3 doc1 CLOB; 4 doc2 CLOB; 5 diffdoc CLOB; 6 openc_handle NUMBER; 7 BEGIN 8  -  9  - 获取两个表的SXML 10  -  11 doc1：= get_table_sxml（name1）; 12 doc2：= get_table_sxml（name2）; 13  -  14  - 在OPENC调用中指定对象类型15  -  16 openc_handle：= DBMS_METADATA_DIFF.OPENC（'TABLE'）; 17  -  18  - 添加每个文档19  -  20 DBMS_METADATA_DIFF.ADD_DOCUMENT（openc_handle，doc1）; 21 DBMS_METADATA_DIFF.ADD_DOCUMENT（openc_handle，doc2）; 22  -  23  - 获取SXML差异文档24  -  25 diffdoc：= DBMS_METADATA_DIFF.FETCH_CLOB（openc_handle）; 26 DBMS_METADATA_DIFF.CLOSE（openc_handle）; 27 RETURN diffdoc; 28结束; 29 /创建功能。
</pre></li>
                        <li>
                           <p>使用该函数获取两个表的SXML差异文档：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT compare_table_sxml（'TAB1'，'TAB2'）FROM dual; &lt;TABLE xmlns =“http://xmlns.oracle.com/ku”version =“1.0”&gt; &lt;SCHEMA&gt; SCOTT &lt;/ SCHEMA&gt; &lt;NAME value1 =“TAB1”&gt; TAB2 &lt;/ NAME&gt; &lt;RELATIONAL_TABLE&gt; &lt;COL_LIST&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; EMPNO &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 4 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; ENAME &lt;/ NAME&gt; &lt;DATATYPE&gt; VARCHAR2 &lt;/ DATATYPE&gt; &lt;LENGTH value1 =“10”&gt; 20 &lt;/ LENGTH&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM src =“1”&gt; &lt;NAME&gt; JOB &lt;/ NAME&gt; &lt;DATATYPE&gt; VARCHAR2 &lt;/ DATATYPE&gt; &lt; LENGTH&gt; 9 &lt;/ LENGTH&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; DEPTNO &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 2 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;COL_LIST_ITEM src =“2”&gt; &lt;NAME&gt; MGR &lt;/ NAME&gt; &lt;DATATYPE&gt; NUMBER &lt;/ DATATYPE&gt; &lt;PRECISION&gt; 4 &lt;/ PRECISION&gt; &lt;SCALE&gt; 0 &lt;/ SCALE&gt; &lt;/ COL_LIST_ITEM&gt; &lt;/ COL_LIST&gt; &lt;PRIMARY_KEY_CONSTRAINT_LIST src =“2”&gt; &lt;PRIMARY_KEY_CONSTRAINT_LIST_ITEM&gt; &lt;COL_LIST&gt; &lt;COL_LIST_ITEM&gt; &lt;NAME&gt; EMPNO &lt;/ NAME&gt; &lt;/ COL_LIST_ITEM&gt; &lt;/ COL_LIST&gt; &lt;/ PRIMARY_KEY_CONSTRAINT_LIST_ITEM&gt; &lt;/ PRIMARY_KEY_CONSTRAINT_LIST&gt; &lt;/ RELATIONAL_TABLE&gt; &lt;/ TABLE&gt; 1行se lected。
 </pre><p>SXML差异文档显示了两个SXML文档的并集，XML属性<code class="codeph">value1</code>和<code class="codeph">src</code>标识了差异。当一个元素只存在于一个文档中时，它用<code class="codeph">src</code>标记。因此， <code class="codeph">&lt;COL_LIST_ITEM src="1"&gt;</code>表示此元素位于第一个文档（ <code class="codeph">TAB1</code> ）中，但不在第二个文档中。当一个元素出现在两个文档中但具有不同的值时，元素的值是第二个文档中的<code class="codeph">value1</code>在第一个文档中给出它的值。例如， <code class="codeph">&lt;LENGTH value1="10"&gt;20&lt;/LENGTH&gt;</code>表示<code class="codeph">TAB1</code> （第一个文档）中的长度为10， <code class="codeph">TAB2</code>中的长度为20。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_METADATA_DIFF</code>浏览API比较结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT dbms_metadata_diff.compare_sxml（'TABLE'，'TAB1'，'TAB2'）FROM dual;</pre></li>
                        <li>
                           <p>使用<code class="codeph">DBMS_METADATA.CONVERT</code> API创建函数以生成ALTERXML文档。这是一个XML文档，包含<code class="codeph">ALTER</code>语句，使一个对象像另一个对象。您还可以使用解析项来获取有关各个<code class="codeph">ALTER</code>语句的信息。（此示例使用到目前为止定义的函数。）
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE OR REPLACE FUNCTION get_table_alterxml（name1 IN VARCHAR2，name2 IN VARCHAR2）RETURN CLOB IS 3 diffdoc CLOB; 4 openw_handle NUMBER; 5 transform_handle NUMBER; 6 alterxml CLOB; 7 BEGIN 8  -  9  - 使用刚定义的函数得到差异文件10  -  11 diffdoc：= compare_table_sxml（name1，name2）; 12  -  13  - 在OPENW调用中指定对象类型14  -  15 openw_handle：= DBMS_METADATA.OPENW（'TABLE'）; 16  -  17  - 使用ALTERXML转换生成ALTER_XML文档18  -  19 transform_handle：= DBMS_METADATA.ADD_TRANSFORM（openw_handle，'ALTERXML'）; 20  -  21  - 请求解析项22  -  23 DBMS_METADATA.SET_PARSE_ITEM（openw_handle，'CLAUSE_TYPE'）; 24 DBMS_METADATA.SET_PARSE_ITEM（openw_handle，'NAME'）; 25 DBMS_METADATA.SET_PARSE_ITEM（openw_handle，'COLUMN_ATTRIBUTE'）; 26  -  27  - 创建临时LOB 28  -  29 DBMS_LOB.CREATETEMPORARY（alterxml，TRUE）; 30  -  31  - 调用CONVERT进行转换32  -  33 DBMS_METADATA.CONVERT（openw_handle，diffdoc，alterxml）; 34  -  35  - 关闭上下文并返回结果36  -  37 DBMS_METADATA.CLOSE（openw_handle）; 38 RETURN alterxml; 39结束; 40 /创建功能。
</pre></li>
                        <li>
                           <p>使用该函数获取ALTER_XML文档：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT get_table_alterxml（'TAB1'，'TAB2'）FROM dual; &lt;ALTER_XML xmlns =“http://xmlns.oracle.com/ku”version =“1.0”&gt; &lt;OBJECT_TYPE&gt; TABLE &lt;/ OBJECT_TYPE&gt; &lt;OBJECT1&gt; &lt;SCHEMA&gt; SCOTT &lt;/ SCHEMA&gt; &lt;NAME&gt; TAB1 &lt;/ NAME&gt; &lt;/ OBJECT1&gt; &lt;OBJECT2&gt; &lt;SCHEMA&gt; SCOTT &lt;/ SCHEMA&gt; &lt;NAME&gt; TAB2 &lt;/ NAME&gt; &lt;/ OBJECT2&gt; &lt;ALTER_LIST&gt; &lt;ALTER_LIST_ITEM&gt; &lt;PARSE_LIST&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; NAME &lt;/ ITEM&gt; &lt;VALUE&gt; MGR &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; CLAUSE_TYPE &lt;/ ITEM&gt; &lt;VALUE&gt; ADD_COLUMN &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;/ PARSE_LIST&gt; &lt;SQL_LIST&gt; &lt;SQL_LIST_ITEM&gt; &lt;TEXT&gt; ALTER TABLE“SCOTT” 。“TAB1”ADD（“MGR”NUMBER（4,0））&lt;/ TEXT&gt; &lt;/ SQL_LIST_ITEM&gt; &lt;/ SQL_LIST&gt; &lt;/ ALTER_LIST_ITEM&gt; &lt;ALTER_LIST_ITEM&gt; &lt;PARSE_LIST&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; NAME &lt;/ ITEM&gt; &lt; VALUE&gt; JOB &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; CLAUSE_TYPE &lt;/ ITEM&gt; &lt;VALUE&gt; DROP_COLUMN &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;/ PARSE_LIST&gt; &lt;SQL_LIST&gt; &lt;SQL_LIST_ITEM&gt; &lt;TEXT&gt; ALTER TABLE“ SCOTT“。”TAB1“DROP（”JOB“）&lt;/ TEXT&gt; &lt;/ SQL_LIST_ITEM&gt; &lt;/ SQL_LIST&gt; &lt;/ ALTER_LIST_ITEM&gt; &lt;ALTER_LIST_ITEM&gt; &lt;PARSE_LIST&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; NAME &lt;/ ITEM&gt; &lt;VALUE&gt; ENAME &lt; / VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; CLAUSE_TYPE &lt;/ ITEM&gt; &lt;VALUE&gt; MODIFY_COLUMN &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; COLUMN_ATTRIBUTE &lt;/ ITEM&gt; &lt;VALUE&gt; SIZE_INCREASE &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;/ PARSE_LIST&gt; &lt;SQL_LIST&gt; &lt;SQL_LIST_ITEM&gt; &lt;TEXT&gt; ALTER TABLE“SCOTT”。“TAB1”MODIFY（“ENAME”VARCHAR2（20））&lt;/ TEXT&gt; &lt;/ SQL_LIST_ITEM&gt; &lt;/ SQL_LIST&gt; &lt;/ ALTER_LIST_ITEM&gt; &lt;ALTER_LIST_ITEM &gt; &lt;PARSE_LIST&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; CLAUSE_TYPE &lt;/ ITEM&gt; &lt;VALUE&gt; ADD_CONSTRAINT &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;/ PARSE_LIST&gt; &lt;SQL_LIST&gt; &lt;SQL_LIST_ITEM&gt; &lt;TEXT&gt; ALTER TABLE“SCOTT”。“TAB1”ADD PRIMARY KEY（“EMPNO”）ENABLE &lt;/ TEXT&gt; &lt;/ SQL_LIST_ITEM&gt; &lt;/ SQL_LIST&gt; &lt;/ ALTER_LIST_ITEM&gt; &lt;ALTER_LIST_ITEM&gt; &lt;PARSE_LIST&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; NAME &lt;/ ITEM&gt; &lt;VALUE&gt; TAB1 &lt;/ VALUE&gt; &lt; / PARSE_LIST_ITEM&gt; &lt;PARSE_LIST_ITEM&gt; &lt;ITEM&gt; CLAUSE_TYPE &lt;/ ITEM&gt; &lt;VALUE&gt; RENAME_TABLE &lt;/ VALUE&gt; &lt;/ PARSE_LIST_ITEM&gt; &lt;/ PARSE_LIST&gt; &lt;SQL_LIST&gt; &lt;SQL_LIST_ITEM&gt; &lt;TEXT&gt; ALTER TABLE“SCOTT”。“TAB1”重命名为“TAB2”&lt;/ TEXT&gt; &lt;/ SQL_LIST_ITEM&gt; &lt;/ SQL_LIST&gt; &lt;/ ALTER_LIST_ITEM&gt; &lt;/ AL TER_LIST&gt; &lt;/ ALTER_XML&gt;选择了1行。
 </pre></li>
                        <li>
                           <p>使用<code class="codeph">DBMS_METADATA_DIFF</code>浏览API比较结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT dbms_metadata_diff.compare_alter_xml（'TABLE'，'TAB1'，'TAB2'）FROM dual;</pre></li>
                        <li>
                           <p>ALTER_XML文档包含每个更改的ALTER_LIST。每个ALTER_LIST_ITEM都有一个PARSE_LIST，其中包含作为名称 - 值对的解析项和一个包含特定alter的SQL的SQL_LIST。您可以使用PARSE_LIST中的信息解析此文档并确定要执行哪些SQL语句。 （请注意，例如，在这种情况下，其中一个更改是DROP_COLUMN，您可以选择不执行该操作。）</p>
                        </li>
                        <li>
                           <p>创建最后一个使用<code class="codeph">DBMS_METADATA.CONVERT</code> API和<code class="codeph">ALTER DDL</code>转换的函数将ALTER_XML文档转换为SQL DDL：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE或REPLACE FUNCTION get_table_alterddl（name1 IN VARCHAR2，name2 IN VARCHAR2）RETURN CLOB IS 3 alterxml CLOB; 4 openw_handle NUMBER; 5 transform_handle NUMBER; 6 alterddl CLOB; 7开始8  -  9  - 使用刚刚定义的函数获取ALTER_XML文档10  -  11 alterxml：= get_table_alterxml（name1，name2）; 12  -  13  - 在OPENW调用中指定对象类型14  -  15 openw_handle：= DBMS_METADATA.OPENW（'TABLE'）; 16  -  17  - 使用ALTERDDL转换将ALTER_XML文档转换为SQL DDL 18  -  19 transform_handle：= DBMS_METADATA.ADD_TRANSFORM（openw_handle，'ALTERDDL'）; 20  -  21  - 使用SQLTERMINATOR转换参数将终结符22附加到每个SQL语句23  -  24 DBMS_METADATA.SET_TRANSFORM_PARAM（transform_handle，'SQLTERMINATOR'，true）; 25  -  26  - 创建临时项目27  -  28 DBMS_LOB.CREATETEMPORARY（alterddl，TRUE）; 29  -  30  - 调用CONVERT进行转换31  -  32 DBMS_METADATA.CONVERT（openw_handle，alterxml，alterddl）; 33  -  34  - 关闭上下文并返回结果35  -  36 DBMS_METADATA.CLOSE（openw_handle）; 37 RETURN alterddl; 38结束; 39 /创建功能。
 </pre></li>
                        <li>
                           <p>使用该函数获取SQL ALTER语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT get_table_alterddl（'TAB1'，'TAB2'）FROM dual; ALTER TABLE“SCOTT”。“TAB1”ADD（“MGR”NUMBER（4,0））/ ALTER TABLE“SCOTT”。“TAB1”DROP（“JOB”）/ ALTER TABLE“SCOTT”。“TAB1”MODIFY（“ ENAME“VARCHAR2（20）”/ ALTER TABLE“SCOTT”。“TAB1”添加主键（“EMPNO”）ENABLE / ALTER TABLE“SCOTT”。“TAB1”重命名为“TAB2”/ 1行选中。
 </pre></li>
                        <li>
                           <p>使用<code class="codeph">DBMS_METADATA_DIFF</code>浏览API比较结果：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT dbms_metadata_diff.compare_alter（'TABLE'，'TAB1'，'TAB2'）FROM dual; ALTER TABLE“SCOTT”。“TAB1”ADD（“MGR”NUMBER（4,0））ALTER TABLE“SCOTT”。“TAB1”DROP（“JOB”）ALTER TABLE“SCOTT”。“TAB1”MODIFY（“ENAME”） VARCHAR2（20））ALTER TABLE“SCOTT”。“TAB1”添加主键（“EMPNO”）使用索引PCTFREE 10 INITRANS 2存储（初始16384下一页16384 MINEXTENTS 1 MAXEXTENTS 505 PCTINCREASE 50 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT）启用ALTER表“SCOTT”。“TAB1”重命名为“TAB2”选择1行。</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL1632"></a><div class="props_rev_3"><a id="GUID-DF431094-5F1D-478D-87E6-04CC774B761F" name="GUID-DF431094-5F1D-478D-87E6-04CC774B761F"></a><h3 id="SUTIL-GUID-DF431094-5F1D-478D-87E6-04CC774B761F" class="sect3"><span class="enumeration_section">23.7</span> DBMS_METADATA API的编程接口的性能提示</h3>
               <div>
                  <p>描述在使用<code class="codeph">DBMS_METADATA</code> API的编程接口时如何增强性能。</p>
                  <p>特别：</p>
                  <ol>
                     <li>
                        <p>在获取下一个对象之前获取所有类型的对象。例如，如果要检索模式中所有对象的定义，请首先获取所有表，然后获取所有索引，然后获取所有触发器，依此类推。这将比嵌套<code class="codeph">OPEN</code>上下文快得多;也就是说，获取一个表然后获取其所有索引，授权和触发器，然后获取下一个表及其所有索引，授权和触发器，依此类推。<a href="using-oracle-dbms_metadata-api.html#GUID-89237236-4729-4E33-842D-D124A3C15B10" title="如何使用DBMS_METADATA API的示例。">示例DBMS_METADATA API的使用</a>反映了第二种效率较低的方法，但其目的是演示大多数编程调用，这些调用最好通过此方法显示。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">SET_COUNT</code>过程一次检索多个对象。这最大限度地减少了服务器往返次数，并消除了许多冗余函
                        </p>
                     </li>
                     <li>
                        <p>当编写一个PL / SQL包调用<code class="codeph">DBMS_METADATA</code> API，声明LOB变量和包含的LOB（如对象<code class="codeph">SYS</code> 。 <code class="codeph">KU</code> $ <code class="codeph">_DDLS</code>在包的范围，而不是单独的函数内）。这消除了在功能进入和退出时LOB持续时间结构的创建和删除，这是非常昂贵的操作。
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL1633"></a><div class="props_rev_3"><a id="GUID-89237236-4729-4E33-842D-D124A3C15B10" name="GUID-89237236-4729-4E33-842D-D124A3C15B10"></a><h3 id="SUTIL-GUID-89237236-4729-4E33-842D-D124A3C15B10" class="sect3"><span class="enumeration_section">23.8</span> DBMS_METADATA API的示例用法</h3>
               <div>
                  <p>如何使用<code class="codeph">DBMS_METADATA</code> API的示例。
                  </p>
                  <p>提供了一个脚本，通过执行以下操作自动为您运行演示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>建立模式（ <code class="codeph">MDDEMO</code> ）和一些工资单用户。
                        </p>
                     </li>
                     <li>
                        <p>在架构中创建三个类似工资单的表以及任何关联的索引，触发器和授权。</p>
                     </li>
                     <li>
                        <p>创建一个使用<code class="codeph">DBMS_METADATA</code> API的包<code class="codeph">PAYROLL_DEMO</code> 。 <code class="codeph">PAYROLL_DEMO</code>包中包含一个过程<code class="codeph">GET_PAYROLL_TABLES,</code>它检索<code class="codeph">MDDEMO</code>模式中以<code class="codeph">PAYROLL</code>开头的两个表的DDL。对于每个表，它检索表的关联依赖对象的DDL;索引，授权和触发器。所有DDL都写入名为<code class="codeph">MDDEMO</code>的表中。 <code class="codeph">DDL</code> 。</p>
                     </li>
                  </ul>
                  <p>要执行该示例，请执行以下操作：</p>
                  <ol>
                     <li>
                        <p>以用户<code class="codeph">system</code>身份启动SQL * Plus。系统将提示您输入密码。
                        </p><pre class="oac_no_warn" dir="ltr">sqlplus系统</pre></li>
                     <li>
                        <p>安装演示，该演示位于<code class="codeph">rdbms</code> / <code class="codeph">demo</code>中的<code class="codeph">mddemo.sql</code>文件中：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @mddemo</pre><p>有关此步骤中发生的情况的说明，请参阅<a href="using-oracle-dbms_metadata-api.html#GUID-7EE1E557-F95C-4C01-946E-5A9B4B6E41E7" title="DBMS_METADATA示例的说明。">DBMS_METADATA示例有何功能？</a> 。
                        </p>
                     </li>
                     <li>
                        <p>以用户<code class="codeph">mddemo</code>连接。系统将提示您输入密码，该密码也是<code class="codeph">mddemo</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT mddemo输入密码：</pre></li>
                     <li>
                        <p>设置以下参数，以便查询输出完整且可读：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET PAGESIZE 0 SQL&gt; SET LONG 1000000</pre></li>
                     <li>
                        <p>执行<code class="codeph">GET_PAYROLL_TABLES</code>过程，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CALL payroll_demo.get_payroll_tables（）;</pre></li>
                     <li>
                        <p>执行以下SQL查询：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT ddl FROM DDL ORDER BY SEQNO;</pre><p>生成的输出是执行<code class="codeph">GET_PAYROLL_TABLES</code>过程的结果。它显示了安装演示时在步骤2中执行的所有DDL。有关实际输出的列表，请参阅<a href="using-oracle-dbms_metadata-api.html#GUID-D807A5A4-4809-4424-AA53-68081627A308" title="从GET_PAYROLL_TABLES过程生成的输出的说明。">从GET_PAYROLL_TABLES过程生成</a>的输出。
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-7EE1E557-F95C-4C01-946E-5A9B4B6E41E7">DBMS_METADATA示例有什么作用？</a><br><code class="codeph">DBMS_METADATA</code>示例的说明。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-dbms_metadata-api.html#GUID-D807A5A4-4809-4424-AA53-68081627A308">从GET_PAYROLL_TABLES过程生成的输出</a><br>从<code class="codeph">GET_PAYROLL_TABLES</code>过程生成的输出的说明。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL1634"></a><div class="props_rev_3"><a id="GUID-7EE1E557-F95C-4C01-946E-5A9B4B6E41E7" name="GUID-7EE1E557-F95C-4C01-946E-5A9B4B6E41E7"></a><h4 id="SUTIL-GUID-7EE1E557-F95C-4C01-946E-5A9B4B6E41E7" class="sect4"><span class="enumeration_section">23.8.1</span> DBMS_METADATA示例有什么作用？
                  </h4>
                  <div>
                     <p><code class="codeph">DBMS_METADATA</code>示例的说明。
                     </p>
                     <p>运行<code class="codeph">mddemo</code>脚本时，将执行以下步骤。您可以根据自己的情况调整这些步骤。
                     </p>
                     <ol>
                        <li>
                           <p>如果用户存在，则按如下方式删除用户。这将确保您开始使用新数据。如果用户不存在，则会显示相应的消息，不会造成任何损害，并继续执行演示。</p><pre class="oac_no_warn" dir="ltr">CONNECT系统输入密码： <span class="italic">password</span> SQL&gt; DROP USER mddemo CASCADE; SQL&gt; DROP USER mddemo_clerk CASCADE; SQL&gt; DROP USER mddemo_mgr CASCADE;</pre></li>
                        <li>
                           <p>创建用户<code class="codeph">mddemo</code> ，通过鉴定<code class="codeph">mddemo</code> ：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE USER mddemo由mddemo识别; SQL&gt; GRANT资源，连接，创建会话，1创建表，2创建过程，3创建序列，4创建触发器，5创建视图，6创建同义词，7更改会话，8 TO mddemo;</pre></li>
                        <li>
                           <p>创建用户<code class="codeph">mddemo_clerk</code> ，由<code class="codeph">clerk</code>识别：</p><pre class="oac_no_warn" dir="ltr">创建用户mddemo_clerk IDENTIFIED BY职员;</pre></li>
                        <li>
                           <p>创建由<code class="codeph">mgr</code>标识的用户<code class="codeph">mddemo_mgr</code> ：</p><pre class="oac_no_warn" dir="ltr">创建用户mddemo_mgr由mgr识别;</pre></li>
                        <li>
                           <p>以<code class="codeph">mddemo</code>连接到SQL * Plus（密码也是<code class="codeph">mddemo</code> ）：</p><pre class="oac_no_warn" dir="ltr">CONNECT mddemo输入密码：</pre></li>
                        <li>
                           <p>创建一些工资单类型表：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLE payroll_emps 2（lastname VARCHAR2（60）NOT NULL，3 firstname VARCHAR2（20）NOT NULL，4 mi VARCHAR2（2），5 suffix VARCHAR2（10），6 dob DATE NOT NULL，7 badge_no NUMBER（6） PRIMARY KEY，8免除VARCHAR（1）NOT NULL，9薪水NUMBER（9,2），10 hourly_rate NUMBER（7,2））11 / SQL&gt; CREATE TABLE payroll_timecards 2（badge_no NUMBER（6）REFERENCES payroll_emps（badge_no）， 3周NUMBER（2），4 job_id NUMBER（5），5 hours_worked NUMBER（4,2））6 /</pre></li>
                        <li>
                           <p>创建一个虚拟表<code class="codeph">audit_trail</code> 。此表用于显示<code class="codeph">GET_PAYROLL_TABLES</code>过程不检索不以<code class="codeph">payroll</code>开头的表。
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLE audit_trail 2（action_time DATE，3 lastname VARCHAR2（60），4 action LONG）5 /</pre></li>
                        <li>
                           <p>在刚刚创建的表上创建一些授权：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT UPDATE（salary，hourly_rate）ON payroll_emps TO mddemo_clerk; SQL&gt; GRANT ALL ON payroll_emps TO mddemo_mgr WITH GRANT OPTION; SQL&gt; GRANT INSERT，UPDATE ON payroll_timecards TO mddemo_clerk; SQL&gt; GRANT ALL ON payroll_timecards TO mddemo_mgr WITH GRANT OPTION;</pre></li>
                        <li>
                           <p>在刚刚创建的表上创建一些索引：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE INDEX i_payroll_emps_name ON payroll_emps（lastname）; SQL&gt; CREATE INDEX i_payroll_emps_dob ON payroll_emps（dob）; SQL&gt; CREATE INDEX i_payroll_timecards_badge ON payroll_timecards（badge_no）;</pre></li>
                        <li>
                           <p>在刚刚创建的表上创建一些触发器：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE OR REPLACE PROCEDURE check_sal（薪水数量）AS BEGIN 2 RETURN; 3结束; 4 /</pre><p>请注意，安全性保持相当宽松，以保持示例简单。</p><pre class="oac_no_warn" dir="ltr">SQL&gt;创建或替换TRIGGER salary_trigger之前插入或更新工资在payroll_emps之前每次行（new.salary&gt; 150000）CALL check_sal（：new.salary）/ SQL&gt;创建或替换TRIGGER hourly_trigger之前更新hourly_rate ON payroll_emps FOR EACH ROW BEGIN：new.hourly_rate：=：old.hourly_rate; END; /</pre></li>
                        <li>
                           <p>设置一个表来保存生成的DDL：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE ddl（ddl CLOB，seqno NUMBER）;</pre></li>
                        <li>
                           <p>创建<code class="codeph">PAYROLL_DEMO</code>包，其中提供了如何使用<code class="codeph">DBMS_METADATA</code>过程的示例。
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE OR REPLACE PACKAGE payroll_demo AS PROCEDURE get_payroll_tables;结束; /</pre><div class="infoboxnote" id="GUID-7EE1E557-F95C-4C01-946E-5A9B4B6E41E7__GUID-4EC4DCBB-C9E2-42F5-9276-040689EBF59D">
                              <p class="notep1">注意：</p>
                              <p>要查看此示例的整个脚本（包括<code class="codeph">PAYROLL_DEMO</code>包的内容），请参阅位于$ <code class="codeph">ORACLE_HOME/rdbms/demo</code>目录中的文件<code class="codeph">mddemo.sql</code> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-89237236-4729-4E33-842D-D124A3C15B10" title="如何使用DBMS_METADATA API的示例。">DBMS_METADATA API的示例用法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="SUTIL1635"></a><div class="props_rev_3"><a id="GUID-D807A5A4-4809-4424-AA53-68081627A308" name="GUID-D807A5A4-4809-4424-AA53-68081627A308"></a><h4 id="SUTIL-GUID-D807A5A4-4809-4424-AA53-68081627A308" class="sect4"><span class="enumeration_section">23.8.2</span>从GET_PAYROLL_TABLES过程生成的输出</h4>
                  <div>
                     <p>从<code class="codeph">GET_PAYROLL_TABLES</code>过程生成的输出的说明。
                     </p>
                     <p>执行<code class="codeph">mddemo.payroll_demo.get_payroll_tables</code>过程后，您可以执行以下查询：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT ddl FROM ddl ORDER BY seqno;</pre><p>结果如下，它反映了脚本执行的所有DDL，如上一节所述。</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE“MDDEMO”。“PAYROLL_EMPS”（“LASTNAME”VARCHAR2（60）NOT NULL ENABLE，“FIRSTNAME”VARCHAR2（20）NOT NULL ENABLE，“MI”VARCHAR2（2），“SUFFIX”VARCHAR2（10），“DOB “DATE NOT NULL ENABLE，”BADGE_NO“NUMBER（6,0），”EXEMPT“VARCHAR2（1）NOT NULL ENABLE，”SALARY“NUMBER（9,2），”HOURLY_RATE“NUMBER（7,2），PRIMARY KEY（ “BADGE_NO”）ENABLE）;在“MDDEMO”上授予更新（“SALARY”）。“PAYROLL_EMPS”到“MDDEMO_CLERK”;在“MDDEMO”上授予更新（“HOURLY_RATE”）。“PAYROLL_EMPS”到“MDDEMO_CLERK”;授予“MDDEMO”。“PAYROLL_EMPS”到“MDDEMO_MGR”和“授予选项”; GRANT DELETE ON“MDDEMO”。“PAYROLL_EMPS”改为“MDDEMO_MGR”和GRANT OPTION; “MDDEMO”上的GRANT INDEX。“PAYROLL_EMPS”到“MDDEMO_MGR”和GRANT OPTION; GRANT INSERT ON“MDDEMO”。“PAYROLL_EMPS”改为“MDDEMO_MGR”，带有授予选项; GRANT选择“MDDEMO”。“PAYROLL_EMPS”到“MDDEMO_MGR”，带有授予选项;授予“MDDEMO”更新。“PAYROLL_EMPS”到“MDDEMO_MGR”并带有授予选项;对“MDDEMO”授予参考资料。“PAYROLL_EMPS”为“MDDEMO_MGR”，提供授予选项;授予“MDDEMO”上的“COMMED REFRESH”。“PAYROLL_EMPS”为“MDDEMO_MGR”并带有授予选项; “MDDEMO”上的GRANT QUERY REWRITE。“PAYROLL_EMPS”到“MDDEMO_MGR”，带有授予选项;创建索引“MDDEMO”。“I_PAYROLL_EMPS_DOB”ON“MDDEMO”。“PAYROLL_EMPS”（“DOB”）PCTFREE 10 INITRANS 2 MAXTRANS 255存储（初始10240下一个10240 MINEXTENTS 1 MAXEXTENTS 121 PCTINCREASE 50 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT）TABLESPACE“系统“;创建索引“MDDEMO”。“I_PAYROLL_EMPS_NAME”ON“MDDEMO”。“PAYROLL_EMPS”（“LASTNAME”）PCTFREE 10 INITRANS 2 MAXTRANS 255存储（初始10240下一页10240 MINEXTENTS 1 MAXEXTENTS 121 PCTINCREASE 50 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT）TABLESPACE“系统“;在更新每个行的salaryroll_emps上的hourly_rate之前创建或替换TRIGGER hourly_trigger：new.hourly_rate：=：old.hourly_rate; end; / ALTER TRIGGER“MDDEMO”。“HOURLY_TRIGGER”ENABLE;在每行的payroll_emps上插入或更新工资之前创建或替换TRIGGER salary_trigger WHEN（new.salary&gt; 150000）CALL check_sal（：new.salary）/ ALTER TRIGGER“MDDEMO”。“SALARY_TRIGGER”ENABLE;创建表“MDDEMO”。“PAYROLL_TIMECARDS”（“BADGE_NO”编号（6,0），“周”编号（2,0），“JOB_ID”编号（5,0），“HOURS_WORKED”编号（4,2）， FOREIGN KEY（“BADGE_NO”）参考“MDDEMO”。“PAYROLL_EMPS”（“BADGE_NO”）ENABLE）; GRANT INSERT ON“MDDEMO”。“PAYROLL_TIMECARDS”改为“MDDEMO_CLERK”;授予“MDDEMO”更新“PAYROLL_TIMECARDS”至“MDDEMO_CLERK”;授予更改“MDDEMO”。“PAYROLL_TIMECARDS”到“MDDEMO_MGR”并带有授予选项; GRANT DELETE ON“MDDEMO”。“PAYROLL_TIMECARDS”to“MDDEMO_MGR”with GRANT OPTION; “MDDEMO”上的GRANT INDEX。“PAYROLL_TIMECARDS”到“MDDEMO_MGR”和GRANT OPTION; GRANT INSERT ON“MDDEMO”。“PAYROLL_TIMECARDS”to“MDDEMO_MGR”with GRANT OPTION; GRANT选择“MDDEMO”。“PAYROLL_TIMECARDS”到“MDDEMO_MGR”，带有授予选项;授予“MDDEMO”更新。“PAYROLL_TIMECARDS”至“MDDEMO_MGR”并带有授予选项;授予“MDDEMO”的参考资料。“PAYROLL_TIMECARDS”至“MDDEMO_MGR”并提供授予选项;授予“MDDEMO”上的“COMMED REFRESH”。“PAYROLL_TIMECARDS”到“MDDEMO_MGR”并带有授予选项; “MDDEMO”上的GRANT QUERY REWRITE。“PAYROLL_TIMECARDS”到“MDDEMO_MGR”，带有授权选项;创建索引“MDDEMO”。“I_PAYROLL_TIMECARDS_BADGE”打开“MDDEMO”。“PAYROLL_TIMECARDS”（“BADGE_NO”）PCTFREE 10 INITRANS 2 MAXTRANS 255存储（初始10240下一页10240文档1最大值121 PCTINCREASE 50 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT）TABLESPACE“系统“;</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-89237236-4729-4E33-842D-D124A3C15B10" title="如何使用DBMS_METADATA API的示例。">DBMS_METADATA API的示例用法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL3629"></a><a id="SUTIL3630"></a><a id="SUTIL3631"></a><a id="SUTIL1636"></a><div class="props_rev_2"><a id="GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD" name="GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD"></a><h3 id="SUTIL-GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD" class="sect3"><span class="enumeration_section">23.9</span> DBMS_METADATA过程摘要</h3>
               <div>
                  <p>提供<code class="codeph">DBMS_METADATA</code> API提供的过程的简要说明。</p>
                  <div class="section">
                     <p>有关这些过程的详细说明，请参见<a href="../arpls/DBMS_METADATA.html#ARPLS026" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考。</span></a></p>
                     <p>下表提供了<code class="codeph">DBMS_METADATA</code>编程接口提供的用于检索多个对象的过程的简要说明。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD__G1029894">
                     <p class="titleintable">表23-1用于检索多个对象的DBMS_METADATA过程</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBMS_METADATA用于检索多个对象的过程" width="100%" border="1" summary="DBMS_METADATA procedures used for retrieving multiple objects" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d145430e2268">PL / SQL过程名称</th>
                              <th align="left" valign="bottom" width="59%" id="d145430e2271">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2276" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.OPEN（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2276 d145430e2271 ">
                                 <p>指定要检索的对象的类型，其元数据的版本以及对象模型。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2283" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_FILTER（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2283 d145430e2271 ">
                                 <p>指定要检索的对象的限制，例如，对象名称或架构。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2290" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_COUNT（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2290 d145430e2271 ">
                                 <p>指定在单个<code class="codeph">FETCH_xxx</code>调用中要检索的最大对象数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2300" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.GET_QUERY（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2300 d145430e2271 ">
                                 <p>返回<code class="codeph">FETCH_xxx</code>使用的查询的文本。您可以将其用作调试辅助工具。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2310" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_PARSE_ITEM（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2310 d145430e2271 ">
                                 <p>通过指定要解析和返回的对象属性来启用输出解析。您可以查询<code class="codeph">DBMS_METADATA_PARSE_ITEMS</code>以查看所有有效的解析项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2320" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.ADD_TRANSFORM（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2320 d145430e2271 ">
                                 <p>指定<code class="codeph">FETCH_xxx</code>应用于检索到的对象的XML表示的转换。您可以查询<code class="codeph">DBMS_METADATA_TRANSFORMS</code>视图以查看所有有效的Oracle提供的转换。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2333" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_TRANSFORM_PARAM（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2333 d145430e2271 ">
                                 <p>指定由<code class="codeph">transform_handle.</code>标识的XSLT样式表的参数<code class="codeph">transform_handle.</code> 您可以查询<code class="codeph">DBMS_METADATA_TRANSFORM_PARAMS</code>视图以查看每个转换的所有有效转换参数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2346" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_REMAP_PARAM（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2346 d145430e2271 ">
                                 <p>指定由<code class="codeph">transform_handle</code>标识的XSLT样式表的参数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2356" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.FETCH_xxx（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2356 d145430e2271 ">
                                 <p>返回符合<code class="codeph">OPEN</code> ， <code class="codeph">SET_FILTER</code> ， <code class="codeph">SET_COUNT</code> ， <code class="codeph">ADD_TRANSFORM</code>建立标准的对象的元数据。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2375" headers="d145430e2268 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.CLOSE（）</pre></td>
                              <td align="left" valign="top" width="59%" headers="d145430e2375 d145430e2271 ">
                                 <p>使<code class="codeph">OPEN</code>返回的句柄无效并清除关联状态。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>下表列出了<code class="codeph">DBMS_METADATA</code>浏览界面提供的过程，并提供了每个过程的简要说明。这些函数返回一个或多个相关或授予对象的元数据。这些过程不支持异构对象类型。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD__G1030147">
                     <p class="titleintable">表23-2用于浏览界面的DBMS_METADATA过程</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_METADATA用于浏览界面的过程" width="100%" border="1" summary="DBMS_METADATA procedures used for the browsing interface" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d145430e2400">PL / SQL过程名称</th>
                              <th align="left" valign="bottom" width="75%" id="d145430e2403">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d145430e2408" headers="d145430e2400 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.GET_xxx（）</pre></td>
                              <td align="left" valign="top" width="75%" headers="d145430e2408 d145430e2403 ">
                                 <p>提供返回单个对象的元数据的方法。每个<code class="codeph">GET_xxx</code>调用都包含一个<code class="codeph">OPEN</code>过程，一个或两个<code class="codeph">SET_FILTER</code>调用，可选的<code class="codeph">ADD_TRANSFORM</code>过程， <code class="codeph">FETCH_xxx</code>调用和<code class="codeph">CLOSE</code>过程。
                                 </p>
                                 <p><span class="italic"><code class="codeph">object_type</code></span>参数具有与<code class="codeph">OPEN procedure</code>相同的语义。 <span class="italic"><code class="codeph">schema</code></span>和<span class="italic"><code class="codeph">name</code></span>用于过滤。
                                 </p>
                                 <p>如果指定了转换，则继承会话级转换标志。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d145430e2453" headers="d145430e2400 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.GET_DEPENDENT_xxx（）</pre></td>
                              <td align="left" valign="top" width="75%" headers="d145430e2453 d145430e2403 ">
                                 <p>返回一个或多个依赖对象的元数据，指定为XML或DDL。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d145430e2460" headers="d145430e2400 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.GET_GRANTED_xxx（）</pre></td>
                              <td align="left" valign="top" width="75%" headers="d145430e2460 d145430e2403 ">
                                 <p>返回一个或多个已授予对象的元数据，指定为XML或DDL。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>下表提供了用于XML提交的<code class="codeph">DBMS_METADATA</code>过程和函数的简要说明。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-B19C59EB-A9BC-4D1E-BD8C-135583D403CD__G1030301">
                     <p class="titleintable">表23-3用于提交XML数据的DBMS_METADATA过程和函数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_METADATA用于提交XML数据的过程和函数" width="100%" border="1" summary="DBMS_METADATA procedures used for submitting XML data" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="36%" id="d145430e2482">PL / SQL名称</th>
                              <th align="left" valign="bottom" width="64%" id="d145430e2485">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2490" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.OPENW（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2490 d145430e2485 ">
                                 <p>打开写入上下文。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2497" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.ADD_TRANSFORM（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2497 d145430e2485 ">
                                 <p>指定XML文档的转换</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2504" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_TRANSFORM_PARAM（）和DBMS_METADATA.SET_REMAP_PARAM（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2504 d145430e2485 ">
                                 <p><code class="codeph">SET_TRANSFORM_PARAM</code>指定转换的参数。
                                 </p>
                                 <p><code class="codeph">SET_REMAP_PARAM</code>指定转换的重映射。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2517" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.SET_PARSE_ITEM（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2517 d145430e2485 ">
                                 <p>指定要解析的对象属性。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2524" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.CONVERT（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2524 d145430e2485 ">
                                 <p>将XML文档转换为DDL。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2531" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.PUT（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2531 d145430e2485 ">
                                 <p>将XML文档提交到数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="36%" id="d145430e2538" headers="d145430e2482 "><pre class="oac_no_warn" dir="ltr">DBMS_METADATA.CLOSE（）</pre></td>
                              <td align="left" valign="top" width="64%" headers="d145430e2538 d145430e2485 ">
                                 <p>关闭使用<code class="codeph">OPENW</code>打开的上下文。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL3633"></a><a id="SUTIL3632"></a><div class="props_rev_3"><a id="GUID-CB5F314F-7412-40F1-B71C-8F6DFB45A4D8" name="GUID-CB5F314F-7412-40F1-B71C-8F6DFB45A4D8"></a><h3 id="SUTIL-GUID-CB5F314F-7412-40F1-B71C-8F6DFB45A4D8" class="sect3"><span class="enumeration_section">23.10</span> DBMS_METADATA_DIFF过程摘要</h3>
               <div>
                  <p>提供<code class="codeph">DBMS_METADATA_DIFF</code> API提供的过程和函数的简要说明。</p>
                  <div class="section">
                     <p>有关这些过程的详细说明，请参见<a href="../arpls/DBMS_METADATA_DIFF.html#ARPLS354" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考。</span></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-CB5F314F-7412-40F1-B71C-8F6DFB45A4D8__GUID-54F379A6-DC4E-47D1-91FD-788A63A5273C">
                     <p class="titleintable">表23-4 DBMS_METADATA_DIFF过程和函数</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBMS_METADATA_DIFF过程和函数" width="100%" border="1" summary="Summary of DBMS_METADATA_DIFF procedures" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d145430e2614">PL / SQL过程名称</th>
                              <th align="left" valign="bottom" width="59%" id="d145430e2617">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2622" headers="d145430e2614 ">
                                 <p><code class="codeph">OPENC</code>功能</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d145430e2622 d145430e2617 ">
                                 <p>指定要比较的对象的类型。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2631" headers="d145430e2614 ">
                                 <p><code class="codeph">ADD_DOCUMENT</code>过程</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d145430e2631 d145430e2617 ">
                                 <p>指定要比较的SXML文档。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2640" headers="d145430e2614 ">
                                 <p><code class="codeph">FETCH_CLOB</code>功能和程序</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d145430e2640 d145430e2617 ">
                                 <p>返回一个CLOB，显示<code class="codeph">ADD_DOCUMENT</code>指定的两个文档之间的<code class="codeph">ADD_DOCUMENT</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d145430e2652" headers="d145430e2614 ">
                                 <p><code class="codeph">CLOSE</code>程序</p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d145430e2652 d145430e2617 ">
                                 <p>使<code class="codeph">OPENC</code>返回的句柄无效并清除关联状态。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-dbms_metadata-api.html#GUID-D9B1300F-B21D-416E-8B9B-C542195EF249" title="使用DBMS_METADATA API。">使用元数据API</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="04826.session-and-connection-pooling.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes OCI session pooling and connection pooling features."></meta>
      <meta name="description" content="This chapter describes OCI session pooling and connection pooling features."></meta>
      <title>OCI中的会话池和连接池</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter describes OCI session pooling and connection pooling features."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-scalable-platforms.html" title="Previous" type="text/html"></link>
      <link rel="next" href="high-availability-in-oci.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-scalable-platforms.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="high-availability-in-oci.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OCI中的会话池和连接池</li>
            </ol>
            <a id="GUID-FD512A09-1A33-424B-AD4D-728956AFDBD8" name="GUID-FD512A09-1A33-424B-AD4D-728956AFDBD8"></a><a id="LNOCI090"></a>
            
            <h2 id="LNOCI-GUID-FD512A09-1A33-424B-AD4D-728956AFDBD8" class="sect2">OCI中的<span class="enumeration_chapter">11个</span>会话池和连接池</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍OCI会话池和连接池功能。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="session-and-connection-pooling.html#GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C" title="会话池意味着应用程序创建并维护一组无状态会话到数据库。">OCI中的会话池</a></p>
                  </li>
                  <li>
                     <p><a href="session-and-connection-pooling.html#GUID-1E260CD3-2EF7-49FF-97FC-041C2EF60381" title="数据库驻留连接池（DRCP）在数据库服务器中为典型的Web应用程序使用方案提供连接池，其中应用程序获取数据库连接，对其进行相对较短的持续时间，然后释放它。">数据库驻留连接池</a></p>
                  </li>
                  <li>
                     <p><a href="session-and-connection-pooling.html#GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61" title="Traffic Director Mode中的Oracle Connection Manager是一个放置在支持的数据库客户端和数据库实例之间的代理。">关于在Traffic Director模式下使用Oracle Connection Manager</a></p>
                  </li>
                  <li>
                     <p><a href="session-and-connection-pooling.html#GUID-1C9A6E8F-EF5A-478D-B65E-CE39D4F00683" title="连接池是指通过多个会话使用可重用物理连接的组（池）来平衡负载。">OCI中的连接池</a></p>
                  </li>
                  <li>
                     <p><a href="session-and-connection-pooling.html#GUID-8DD97D4D-C7AA-4EF7-9B55-8DC58BDC2726" title="表示使用它们的环境。">何时使用连接池，会话池或两者都不使用</a></p>
                  </li>
               </ul>
            </div><a id="LNOCI16617"></a><div class="props_rev_3"><a id="GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C" name="GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C"></a><h3 id="LNOCI-GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C" class="sect3"><span class="enumeration_section">11.1</span> OCI中的会话池</h3>
               <div>
                  <p><span class="italic">会话池</span>意味着应用程序创建并维护一组无状态会话到数据库。
                  </p>
                  <p>这些会话根据请求提供给瘦客户端。如果没有可用的会话，则可以创建新会话。当客户端完成会话后，客户端会将其释放到池中。因此，池中的会话数可以动态增加。</p>
                  <p>池中的某些会话可能会标记某些属性。例如，用户可以请求默认会话，在其上设置某些属性，标记或标记它，并将其返回到池中。该用户或某个其他用户可能需要具有相同属性的会话，因此请求具有相同标记的会话。池中可能有多个具有相同标记的会话。可以更改或重置会话上的标记。</p>
                  <p>也可以通过OCI中的会话池创建和维护代理会话。</p>
                  <p>没有可用会话且池已达到其最大大小时应用程序的行为取决于某些属性。可能会创建新会话或返回错误，或者线程可能只是阻塞并等待会话变为空闲。</p>
                  <p>会话池的主要好处是性能。建立与数据库的连接是一项非常耗时的活动，尤其是在数据库是远程数据库时。因此，代替客户花费时间连接到服务器，验证其凭据，然后接收有效会话，它可以从池中选择一个。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-7D5BBEC4-38CF-4C63-B616-12231EF0DCAE" title="描述会话池可以执行的任务。">OCI会话池的功能</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-DD2C2456-5F22-4BA0-AFE6-30CCF29A3688" title="会话池可以是同构的，也可以是异构的。">同构和异构会话池</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9" title="标签为用户提供了一种自定义池中会话的方法。">关于在会话池中使用标记</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-35D322F2-E576-416B-A399-3A733F5487A1" title="会话池的句柄类型是什么。">会话池的OCI句柄</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-9DD6C967-B3F8-4D26-B7F8-7730AABA7E8E" title="显示编写使用用户名和密码的简单会话池应用程序的步骤。">使用OCI会话池</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-CE43701B-ACB2-4F3A-B7CA-332CBD01DCCE" title="描述OCI调用会话池的用法。">OCI呼吁会话池</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-72D13726-61B8-4CAB-9120-4E33714688AE" title="在哪里可以找到经过测试的完整程序中的会话池示例。">OCI会话池的示例</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C__GUID-18175688-A109-44F2-BE5D-B323818A1A7F">
                     <p class="notep1">也可以看看：</p>
                     <p> <a href="session-and-connection-pooling.html#GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9" title="标签为用户提供了一种自定义池中会话的方法。">关于在会话池中使用标记</a></p>
                  </div>
               </div><a id="LNOCI16618"></a><div class="props_rev_3"><a id="GUID-7D5BBEC4-38CF-4C63-B616-12231EF0DCAE" name="GUID-7D5BBEC4-38CF-4C63-B616-12231EF0DCAE"></a><h4 id="LNOCI-GUID-7D5BBEC4-38CF-4C63-B616-12231EF0DCAE" class="sect4"><span class="enumeration_section">11.1.1</span> OCI会话池的功能</h4>
                  <div>
                     <p>描述会话池可以执行的任务。</p>
                     <p>会话池可以执行以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>透明地创建，维护和管理无状态会话池。</p>
                        </li>
                        <li>
                           <p>为应用程序提供一个接口，以创建池并指定池中的最小，增量和最大会话数。</p>
                        </li>
                        <li>
                           <p>为用户提供接口，以获取和释放池的默认或标记会话。标记会话是具有某些客户端定义属性的会话。</p>
                        </li>
                        <li>
                           <p>允许应用程序动态更改最小和最大会话数。</p>
                        </li>
                        <li>
                           <p>通过关闭已经空闲很长时间的会话，并在需要时创建会话，提供始终保持最佳打开会话数的机制。</p>
                        </li>
                        <li>
                           <p>允许使用身份验证进行会话池。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16619"></a><div class="props_rev_3"><a id="GUID-DD2C2456-5F22-4BA0-AFE6-30CCF29A3688" name="GUID-DD2C2456-5F22-4BA0-AFE6-30CCF29A3688"></a><h4 id="LNOCI-GUID-DD2C2456-5F22-4BA0-AFE6-30CCF29A3688" class="sect4"><span class="enumeration_section">11.1.2</span>同构和异构会话池</h4>
                  <div>
                     <p>会话池可以是同构的，也可以是异构的。</p>
                     <p><span class="italic">同构</span>会话池意味着池中的会话具有相同的身份验证（它们具有相同的用户名，密码和权限）。<span class="italic">异构</span>会话池意味着您必须提供身份验证信息，因为会话可以具有不同的安全属性和权限。
                     </p>
                  </div>
               </div><a id="LNOCI16620"></a><div class="props_rev_3"><a id="GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9" name="GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9"></a><h4 id="LNOCI-GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9" class="sect4"><span class="enumeration_section">11.1.3</span>关于在会话池中使用标记</h4>
                  <div>
                     <p>标签为用户提供了一种自定义池中会话的方法。</p>
                     <p>客户端可以从池中获取默认或未标记的会话，在会话上设置某些属性（例如NLS设置），并将会话返回到池，并在<code class="codeph">OCISessionRelease(</code> ）调用中使用适当的标记对其进行标记。
                     </p>
                     <p>原始用户或其他一些用户可以请求具有相同标记的会话以具有相同属性的会话，并且可以通过在<code class="codeph">OCISessionGet()</code>调用中提供相同的标记来实现。
                     </p>
                     <p>本节包括以下主题： <a href="session-and-connection-pooling.html#GUID-DFA21225-E83C-4177-A79A-B8BA29DC662C" title="从12c Release 2（12.2）开始，标签可以具有多个属性。这被称为多属性标记。">多属性标记</a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-F7609D96-EB0F-487D-B825-E0138B16E2E9__GUID-673EB9A5-3100-4CC7-9FEB-5CFB14516BBB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DFA21225-E83C-4177-A79A-B8BA29DC662C" name="GUID-DFA21225-E83C-4177-A79A-B8BA29DC662C"></a><h5 id="LNOCI-GUID-DFA21225-E83C-4177-A79A-B8BA29DC662C" class="sect5"><span class="enumeration_section">11.1.3.1</span>多属性标签</h5>
                     <div>
                        <p>从12 <span class="italic">c</span> Release 2（12.2）开始，标签可以具有多个属性。这被称为多属性标记。
                        </p>
                        <p>多属性标记由一个或多个由分号分隔的&lt;property-name&gt; = &lt;property-value&gt;对组成，其中&lt;property-name&gt; = &lt;property-value&gt;都是字符串。</p>
                        <p>在<code class="codeph">OCISessionGet()</code>调用期间，在<code class="codeph">taginfo</code>参数中，首先出现的属性名称被赋予查找匹配的最高属性，并且最后出现的属性名称被赋予最低优先级。因此，字符串中属性的排序对于确定池中的匹配会话非常重要。下面的限制列表下面的示例说明了这一点。
                        </p>
                        <p>此功能也适用于DRCP。</p>
                        <div class="p">以下限制适用于可在多属性标记中传递的属性名称和属性值：<ul style="list-style-type:disc">
                              <li>
                                 <p>属性名称和属性值都区分大小写。</p>
                              </li>
                              <li>
                                 <p>属性名称只能在标记中出现一次。如果多次指定相同的属性名称，则会引发错误。</p>
                              </li>
                              <li>
                                 <p>应为属性名称和值指定非空字符串。</p>
                              </li>
                              <li>
                                 <p>属性名称前后的前导和尾随空格以及属性值前后的前导和尾随空格将被截断。例如，“PDB = PDB1”被视为“PDB = PDB1”。</p>
                              </li>
                              <li>
                                 <p>属性名称和属性值中不应有空格。例如，由于NLS和LANGUAGE之间的空格，NLS &lt;space&gt; LANGUAGE = French将导致错误。</p>
                              </li>
                           </ul>
                        </div>
                        <p>为了解释多个属性的概念，假设要在CDB环境中部署的应用程序要求尽可能满足来自同一可插拔数据库（例如，pdb1）的会话的会话获取请求。接下来，它还要求会话属于同一种语言（例如，FRENCH），但为pdb1的会话提供更高的优先级。然后，应用程序可以提供如下的多属性标记：</p><pre class="pre codeblock"><code>char * props =“PDB = pdb1; LANGUAGE = FRENCH”</code></pre><p>现在，假设池中有两个会话，其属性如下所示：</p><pre class="pre codeblock"><code>第1节=&gt;“PDB = pdb1; LANGUAGE = CHINESE”</code></pre><pre class="pre codeblock"><code>第2节=&gt;“PDB = pdb2; LANGUAGE = FRENCH”</code></pre><p>在这种情况下，会话获取请求（ <code class="codeph">OCISessionGet()</code> ）返回会话1，因为<code class="codeph">PDB</code>属性通过置于<code class="codeph">LANGUAGE</code>属性之前隐式地具有更高的优先级。
                        </p>
                        <div class="infoboxnotealso" id="GUID-DFA21225-E83C-4177-A79A-B8BA29DC662C__GUID-53C1441D-B992-4770-B865-97A57A42FAC5">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a>用于进一步讨论标记会话</p>
                        </div>
                        <p>本节包括以下主题： <a href="session-and-connection-pooling.html#GUID-B853A020-752F-494A-8D88-D0396EF57177" title="使用多属性标记时，可以在服务器上提供基于PL / SQL的会话状态修复回调。">会话状态修复的PL / SQL回调</a> 。
                        </p>
                     </div>
                     <div class="sect5"><a id="GUID-B853A020-752F-494A-8D88-D0396EF57177" name="GUID-B853A020-752F-494A-8D88-D0396EF57177"></a><h6 id="LNOCI-GUID-B853A020-752F-494A-8D88-D0396EF57177" class="sect6"><span class="enumeration_section">11.1.3.1.1</span>会话状态修复的PL / SQL回调</h6>
                        <div>
                           <p>使用多属性标记时，可以在服务器上提供基于PL / SQL的会话状态修复回调。</p>
                           <p>此应用程序提供的回调将从池中检出的会话转换为应用程序请求的所需状态，如多属性标记所示。此回调可以使用或不使用数据库驻留连接池（DRCP）。</p>
                           <p>使用此回调可以提高应用程序的性能，因为修复逻辑是针对服务器上的会话状态运行的。因此，此功能消除了应用程序往返于修复逻辑的数据库往返。回调由使用<code class="codeph">OCISessionGet()</code>连接的用户提供。对于不使用OCISessionPool或使用自定义池的应用程序，传递给<code class="codeph">OCISessionGet()</code>的身份验证句柄上的回调必须作为属性<code class="codeph">OCI_ATTR_FIXUP_CALLBACK</code>提供。对于使用OCISessionPool的应用程序，必须在身份验证句柄上设置此属性，该句柄必须在会话池句柄上设置为属性<code class="codeph">OCI_ATTR_SPOOL_AUTH</code> 。</p>
                           <div class="example" id="GUID-B853A020-752F-494A-8D88-D0396EF57177__GUID-077AD33B-4206-4107-A9B3-24753058756D">
                              <p class="titleinexample">例11-1 PL / SQL修复回调示例</p>
                              
                              <p>以下PL / SQL修复回调示例代码段处理其<code class="codeph">key=value</code>属性可以直接在ALTER SESSION语句中使用的标记，例如<code class="codeph">TIME_ZONE=UTC;NLS_DATE_FORMAT=DD-MM-YYYY</code> ：</p>
                              <pre class="pre codeblock"><code>创建或替换包myPackage AS TYPE property_t是VARCHAR2的表（64）INDEX BY VARCHAR2（64）; PROCEDURE buildTab（标签IN VARCHAR2，propertyTab OUT property_t）; PROCEDURE myPlsqlCallback（requestedTag IN VARCHAR2，actualTag IN VARCHAR2）;结束; / CREATE OR REPLACE PACKAGE BODY myPackage AS  - 解析标签PROCEDURE buildTab中的“property = value”对（标签IN VARCHAR2，propertyTab OUT property_t）IS属性VARCHAR2（64）; propertyName VARCHAR2（64）; propertyValue VARCHAR2（64）; propertyEndPos NUMBER：= 1; propertyStartPos NUMBER：= 1; propertyNameEndPos NUMBER：= 1; begin WHILE（LENGTH（tag）&gt; propertyEndPos）LOOP propertyEndPos：= INSTR（tag，';'，propertyStartPos）; IF（propertyEndPos = 0）THEN propertyEndPos：= LENGTH（tag）+ 1;万一; propertyNameEndPos：= INSTR（tag，'='，propertyStartPos）; propertyName：= SUBSTR（tag，propertyStartPos，propertyNameEndPos  -  propertyStartPos）; propertyValue：= SUBSTR（tag，propertyNameEndPos + 1，propertyEndPos  -  propertyNameEndPos  -  1）; propertyTab（propertyName）：= propertyValue; propertyStartPos：= propertyEndPos + 1;结束循环;结束; PROCEDURE myPlsqlCallback（requestedTag IN VARCHAR2，actualTag IN VARCHAR2）IS reqPropTab property_t; actPropTab property_t; propertyName VARCHAR2（64）; BEGIN buildTab（requestedTag，reqPropTab）; buildTab（actualTag，actPropTab）; - 迭代请求的属性以设置状态 - 当前未设置 - 当前设置，或未设置为所需值propertyName：= reqPropTab。第一; WHILE（propertyName IS NOT NULL）LOOP IF（（不是actPropTab.exists（propertyName））或（actPropTab（propertyName）！= reqPropTab（propertyName）））然后执行立即'更改会话集'|| propertyName || '='''|| reqPropTab（propertyName）|| '' '';万一; propertyName：= reqPropTab。NEXT（propertyName的）;结束循环; - 可以迭代其他实际道具，将任何额外的道具重置为默认状态END;结束myPackage; /</code></pre></div>
                           <!-- class="example" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-B853A020-752F-494A-8D88-D0396EF57177__GUID-D50AFE1B-9616-4198-A857-0ADF890AB1BA">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="handle-and-descriptor-attributes.html#GUID-0193473A-20FE-4727-850E-41269F94BAD4" title="列出并描述身份验证信息句柄属性。">身份验证信息句柄属性</a>有关<code class="codeph">OCI_ATTR_FIXUP_CALLBACK</code>更多信息</p>
                                    </li>
                                    <li>
                                       <p><a href="handle-and-descriptor-attributes.html#GUID-34071823-66D0-4C54-BFBB-6323BDEF8015" title="列出并描述会话池句柄属性。">会话池句柄属性</a>有关<code class="codeph">OCI_ATTR_SPOOL_AUTH</code>更多信息</p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI16621"></a><div class="props_rev_3"><a id="GUID-35D322F2-E576-416B-A399-3A733F5487A1" name="GUID-35D322F2-E576-416B-A399-3A733F5487A1"></a><h4 id="LNOCI-GUID-35D322F2-E576-416B-A399-3A733F5487A1" class="sect4"><span class="enumeration_section">11.1.4</span>会话池的OCI句柄</h4>
                  <div>
                     <p>会话池的句柄类型是什么。</p>
                     <div class="p">以下句柄类型用于会话池：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="session-and-connection-pooling.html#GUID-3EB716F7-7810-4E29-9F92-F5A76B88E662" title="这是会话池句柄。">OCISPool</a></p>
                           </li>
                           <li>
                              <p><a href="session-and-connection-pooling.html#GUID-0F8EA0EC-2018-476F-9353-208266BD822A" title="这是身份验证信息句柄。">OCIAuthInfo</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI16622"></a><div class="props_rev_3"><a id="GUID-3EB716F7-7810-4E29-9F92-F5A76B88E662" name="GUID-3EB716F7-7810-4E29-9F92-F5A76B88E662"></a><h5 id="LNOCI-GUID-3EB716F7-7810-4E29-9F92-F5A76B88E662" class="sect5"><span class="enumeration_section">11.1.4.1</span> OCISPool</h5>
                     <div>
                        <p>这是会话池句柄。</p>
                        <p>它是使用<code class="codeph">OCIHandleAlloc()</code>分配的。它必须传递给<code class="codeph">OCISessionPoolCreate()</code>和<code class="codeph">OCISessionPoolDestroy()</code> 。它具有属性类型<code class="codeph">OCI_HTYPE_SPOOL</code> 。</p>
                        <p><code class="codeph">OCIHandleAlloc()</code>调用的示例如下：</p><pre class="oac_no_warn" dir="ltr">OCISPool * spoolhp; OCIHandleAlloc（（void *）envhp，（void **）＆spoolhp，OCI_HTYPE_SPOOL，（size_t）0，（void **）0））;</pre><p>对于环境句柄，可以创建多个会话池。</p>
                        <div class="infoboxnotealso" id="GUID-3EB716F7-7810-4E29-9F92-F5A76B88E662__GUID-2E5705C8-EAB6-457F-BAD7-222FDD9C22BC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16623"></a><div class="props_rev_3"><a id="GUID-0F8EA0EC-2018-476F-9353-208266BD822A" name="GUID-0F8EA0EC-2018-476F-9353-208266BD822A"></a><h5 id="LNOCI-GUID-0F8EA0EC-2018-476F-9353-208266BD822A" class="sect5"><span class="enumeration_section">11.1.4.2</span> OCIAuthInfo</h5>
                     <div>
                        <p>这是身份验证信息句柄。</p>
                        <p>它是使用<code class="codeph">OCIHandleAlloc()</code>分配的。它被传递给<code class="codeph">OCISessionGet()</code> 。它支持用户会话句柄支持的所有属性。身份验证信息句柄具有属性类型<code class="codeph">OCI_HTYPE_AUTHINFO</code> （请参阅<a href="oci-programming-basics.html#GUID-5F13B2EC-E29C-4710-8AD7-E97E6C28085E__G466063" title="该表有3列。第1列是句柄类型描述，第2列是C数据类型，第3列是句柄类型常量。">表4-1</a> ）。
                        </p>
                        <p><code class="codeph">OCIHandleAlloc()</code>调用的示例如下：</p><pre class="oac_no_warn" dir="ltr">OCIAuthInfo * authp; OCIHandleAlloc（（void *）envhp，（void **）＆authp，OCI_HTYPE_AUTHINFO，（size_t）0，（void **）0））;</pre><div class="infoboxnotealso" id="GUID-0F8EA0EC-2018-476F-9353-208266BD822A__GUID-8F595AFE-3EDF-42F7-B84A-55B314C4FFD3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-attributes.html#GUID-FB263210-118E-4DB3-A840-1769EF0CB977" title="Lists and describes user session handle attributes.">用户会话句柄</a>属于身份验证信息句柄的<a href="handle-and-descriptor-attributes.html#GUID-FB263210-118E-4DB3-A840-1769EF0CB977" title="列出并描述用户会话句柄属性。">属性</a>的属性</p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-attributes.html#GUID-34071823-66D0-4C54-BFBB-6323BDEF8015" title="列出并描述会话池句柄属性。">会话池句柄属性</a>有关会话池属性的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156" title="Lists and describes connect, authorize, and initialize functions.">连接，授权和初始化函数，</a>以获取有关会话池中使用的<a href="connect-authorize-and-initialize-functions.html#GUID-8EDDA0CC-6755-49D8-89D0-81713E10B156" title="列出并描述连接，授权和初始化功能。">函数</a>的完整信息</p>
                              </li>
                              <li>
                                 <p>有关可以与此调用一起使用的会话句柄属性的详细信息，请参阅<span class="q">“ <a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI16624"></a><div class="props_rev_3"><a id="GUID-9DD6C967-B3F8-4D26-B7F8-7730AABA7E8E" name="GUID-9DD6C967-B3F8-4D26-B7F8-7730AABA7E8E"></a><h4 id="LNOCI-GUID-9DD6C967-B3F8-4D26-B7F8-7730AABA7E8E" class="sect4"><span class="enumeration_section">11.1.5</span>使用OCI会话池</h4>
                  <div>
                     <p>显示编写使用用户名和密码的简单会话池应用程序的步骤。</p>
                     <div class="section">
                        <p>编写使用用户名和密码的简单会话池应用程序的步骤如下：</p>
                        <ol>
                           <li>
                              <p>使用<code class="codeph">OCIHandleAlloc()</code>为<code class="codeph">OCISPool</code>句柄分配会话池句柄。可以为环境句柄创建多个会话池。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">OCISessionPoolCreate()</code>创建会话池， <code class="codeph">mode</code>设置为<code class="codeph">OCI_DEFAULT</code> （对于新的会话池）。有关其他模式的讨论，请参阅该功能。
                              </p>
                           </li>
                           <li>
                              <p>每个线程循环。使用执行以下操作的函数创建线程：</p>
                              <ol type="a">
                                 <li>
                                    <p>使用<code class="codeph">OCIHandleAlloc()</code>分配类型为<code class="codeph">OCIAuthInfo</code>的身份验证信息句柄</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">OCIAttrSet()</code>在身份验证信息句柄中设置用户名和密码</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">OCISessionGet()</code>并将<code class="codeph">mode</code>设置为<code class="codeph">OCI_SESSGET_SPOOL</code>获取池化会话</p>
                                 </li>
                                 <li>
                                    <p>执行交易</p>
                                 </li>
                                 <li>
                                    <p>分配手柄</p>
                                 </li>
                                 <li>
                                    <p>准备声明</p>
                                    <div class="infoboxnote" id="GUID-9DD6C967-B3F8-4D26-B7F8-7730AABA7E8E__GUID-05DB4D0E-C365-4A1E-AA5D-C0F873C13754">
                                       <p class="notep1">注意：</p>
                                       <p>使用从OCI会话池获取的服务上下文时，您需要使用<code class="codeph">OCISessionGet()</code> （或<code class="codeph">OCILogon2()</code> ）返回的服务上下文，而不是在这些调用之外创建其他服务上下文。
                                       </p>
                                       <p>使用带有服务上下文的<code class="codeph">OCIStmtPrepare2()</code>获得的任何语句句柄应该随后仅与相同的服务上下文一起使用，并且永远不会与不同的服务上下文一起使用。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>执行声明</p>
                                 </li>
                                 <li>
                                    <p>提交或回滚交易</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">OCISessionRelease()</code>释放会话（注销<code class="codeph">OCISessionRelease()</code></p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">OCIHandleFree()</code>释放身份验证信息句柄</p>
                                 </li>
                                 <li>
                                    <p>结束每个线程的循环</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>使用<code class="codeph">OCISessionPoolDestroy()</code>销毁会话池。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-9DD6C967-B3F8-4D26-B7F8-7730AABA7E8E__GUID-BA450341-4516-4E24-A3C7-BB24B48886F9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                              </li>
                              <li>
                                 <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="显式释放句柄">OCIHandleFree（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNOCI16625"></a><div class="props_rev_3"><a id="GUID-CE43701B-ACB2-4F3A-B7CA-332CBD01DCCE" name="GUID-CE43701B-ACB2-4F3A-B7CA-332CBD01DCCE"></a><h4 id="LNOCI-GUID-CE43701B-ACB2-4F3A-B7CA-332CBD01DCCE" class="sect4"><span class="enumeration_section">11.1.6</span> OCI呼叫会话池</h4>
                  <div>
                     <p>描述OCI调用会话池的用法。</p>
                     <p>OCI提供会话池调用以执行以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-C09AF9F9-34EB-4D1D-849E-9B962463C7A7" title="连接池要求OCIHandleAlloc（）分配池句柄OCI_HTYPE_CPOOL。">分配池句柄</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C" title="函数OCIConnectionPoolCreate（）初始化连接池句柄。">创建连接池</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-1DB08E60-053F-4D7B-A56D-FE42FE9463B5" title="应用程序可以使用多个接口之一。">登录数据库</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-73DFAAA9-4EB2-44ED-9DEC-2B803B990AE2" title="选择适当的调用以在连接池模式下从数据库注销。">从数据库注销</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-CB0DC00D-C935-41BC-AF4B-29C3288B743B" title="OCIConnectionPoolDestroy（）会破坏它。">销毁连接池</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-676CFBC3-69CC-447B-B0A5-B58BE827291E" title="使用OCIHandleFree（）释放池句柄。">免费使用泳池手柄</a></p>
                        </li>
                     </ul>
                  </div><a id="LNOCI16626"></a><div class="props_rev_3"><a id="GUID-1F691FCF-3986-43D7-AA27-82117745B105" name="GUID-1F691FCF-3986-43D7-AA27-82117745B105"></a><h5 id="LNOCI-GUID-1F691FCF-3986-43D7-AA27-82117745B105" class="sect5"><span class="enumeration_section">11.1.6.1</span>分配池句柄</h5>
                     <div>
                        <p>会话池要求通过调用<code class="codeph">OCIHandleAlloc()</code>来分配池句柄<code class="codeph">OCI_HTYPE_SPOOL</code> 。
                        </p>
                        <p>可以为给定的环境句柄创建多个池。对于单个会话池，这是一个分配示例：</p><pre class="oac_no_warn" dir="ltr">OCISPool * poolhp; OCIHandleAlloc（（void *）envhp，（void **）＆poolhp，OCI_HTYPE_SPOOL，（size_t）0，（void **）0））;</pre><div class="infoboxnotealso" id="GUID-1F691FCF-3986-43D7-AA27-82117745B105__GUID-F7541843-6EA7-4CB1-A88B-C9B4AF328810">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                        </div>
                     </div>
                  </div><a id="LNOCI16627"></a><div class="props_rev_3"><a id="GUID-15516E6A-868C-4C7E-8272-92C270C160A4" name="GUID-15516E6A-868C-4C7E-8272-92C270C160A4"></a><h5 id="LNOCI-GUID-15516E6A-868C-4C7E-8272-92C270C160A4" class="sect5"><span class="enumeration_section">11.1.6.2</span>创建池会话</h5>
                     <div>
                        <p>您可以使用<code class="codeph">OCISessionPoolCreate()</code>函数来创建会话池。
                        </p>
                        <p>以下是如何使用此调用的示例：</p><pre class="oac_no_warn" dir="ltr">OCISessionPoolCreate（envhp，errhp，poolhp，（OraText **）＆poolName，（ub4 *）＆poolNameLen，database，（ub4）strlen（（const signed char *）database），sessMin，sessMax，sessIncr，（OraText *）appusername，（ ub4）strlen（（const signed char *）appusername），（OraText *）apppassword，（ub4）strlen（（const signed char *）apppassword），OCI_DEFAULT）;</pre><div class="infoboxnotealso" id="GUID-15516E6A-868C-4C7E-8272-92C270C160A4__GUID-72E883EB-155C-42CF-9305-E6E3C721F1E6">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></p>
                        </div>
                     </div>
                  </div><a id="LNOCI16628"></a><div class="props_rev_3"><a id="GUID-7894AB6A-0CCD-4F22-9B84-5B40B2FC636C" name="GUID-7894AB6A-0CCD-4F22-9B84-5B40B2FC636C"></a><h5 id="LNOCI-GUID-7894AB6A-0CCD-4F22-9B84-5B40B2FC636C" class="sect5"><span class="enumeration_section">11.1.6.3</span>登录数据库</h5>
                     <div>
                        <p>您可以使用这些调用以会话池模式登录数据库。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OCILogon2（）</code></p>
                              <p>这是最简单的电话。但是，它不会为用户提供使用标记的选项。以下是如何使用<code class="codeph">OCILogon2()</code>以会话池模式登录数据库的示例：</p><pre class="oac_no_warn" dir="ltr">for（i = 0; i &lt;MAXTHREADS; ++ i）{OCILogon2（envhp，errhp，＆svchp [i]，“hr”，2，“hr”，2，poolName，poolNameLen，OCI_LOGON2_SPOOL））; }</pre></li>
                           <li>
                              <p><code class="codeph">OCISessionGet（）</code></p>
                              <p>这是建议的使用呼叫。它为用户提供了使用标记来标记池中会话的选项，这使得检索特定会话变得更加容易。下面是使用<code class="codeph">OCISessionGet()</code>的示例。它取自<code class="codeph">demo</code>目录中的<code class="codeph">cdemosp.c</code> 。
                              </p><pre class="oac_no_warn" dir="ltr">OCISessionGet（envhp，errhp，＆svchp，authInfop，（OraText *）数据库，strlen（数据库），tag，strlen（tag），＆retTag，＆retTagLen，＆found，OCI_SESSGET_SPOOL）;</pre><p>使用从OCI会话池获取的服务上下文时，您需要使用<code class="codeph">OCISessionGet()</code> （或<code class="codeph">OCILogon2()</code> ）返回的服务上下文，而不是在这些调用之外创建其他服务上下文。
                              </p>
                              <p>使用带有服务上下文的<code class="codeph">OCIStmtPrepare2()</code>获得的任何语句句柄应该随后仅与相同的服务上下文一起使用，并且永远不会与不同的服务上下文一起使用。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-7894AB6A-0CCD-4F22-9B84-5B40B2FC636C__GUID-154E065D-9EC6-4EF6-A9BD-5B11B67C5A8B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                              </li>
                              <li>
                                 <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16629"></a><div class="props_rev_3"><a id="GUID-618B7C74-0045-4170-B50E-163BB364AF04" name="GUID-618B7C74-0045-4170-B50E-163BB364AF04"></a><h5 id="LNOCI-GUID-618B7C74-0045-4170-B50E-163BB364AF04" class="sect5"><span class="enumeration_section">11.1.6.4</span>从数据库注销</h5>
                     <div>
                        <p>表示根据登录调用以会话池模式从数据库注销的两种方法。</p>
                        <p>从以下调用中，选择与登录调用对应的调用，并使用它以会话池模式从数据库注销。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OCILogoff（）</code></p>
                              <p>如果使用<code class="codeph">OCILogon2()</code>建立连接，则必须调用<code class="codeph">OCILogoff()</code>进行注销。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCISessionRelease（）</code></p>
                              <p>如果您使用<code class="codeph">OCISessionGet()</code>建立连接，则必须调用<code class="codeph">OCISessionRelease()</code>进行注销。待处理的交易会自动提交。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-618B7C74-0045-4170-B50E-163BB364AF04__GUID-68D3E9C1-3D30-4022-B84C-7889F33A4782">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="释放使用OCILogon2（）或OCILogon（）检索的会话。">OCILogoff（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16630"></a><div class="props_rev_3"><a id="GUID-4E12F09A-D461-4B10-AD8D-48C2E492D6BB" name="GUID-4E12F09A-D461-4B10-AD8D-48C2E492D6BB"></a><h5 id="LNOCI-GUID-4E12F09A-D461-4B10-AD8D-48C2E492D6BB" class="sect5"><span class="enumeration_section">11.1.6.5</span>销毁会话池</h5>
                     <div>
                        <p>调用<code class="codeph">OCISessionPoolDestroy()</code>来销毁会话池。
                        </p>
                        <p>这在以下示例中显示：</p><pre class="oac_no_warn" dir="ltr">OCISessionPoolDestroy（poolhp，errhp，OCI_DEFAULT）;</pre><div class="infoboxnotealso" id="GUID-4E12F09A-D461-4B10-AD8D-48C2E492D6BB__GUID-98BE1EB0-6D0F-4752-A3BE-06A64D1F2089">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="connect-authorize-and-initialize-functions.html#GUID-2797C90C-C7AC-47FB-B1C2-CE41B743FB5C" title="销毁会话池。">OCISessionPoolDestroy（）</a></p>
                        </div>
                     </div>
                  </div><a id="LNOCI16631"></a><div class="props_rev_3"><a id="GUID-B28BBFF7-2965-4D2C-B554-9AAE174DB461" name="GUID-B28BBFF7-2965-4D2C-B554-9AAE174DB461"></a><h5 id="LNOCI-GUID-B28BBFF7-2965-4D2C-B554-9AAE174DB461" class="sect5"><span class="enumeration_section">11.1.6.6</span>释放池手柄</h5>
                     <div>
                        <p>调用<code class="codeph">OCIHandleFree()</code>以释放会话池句柄。
                        </p>
                        <p>这在以下示例中显示：</p><pre class="oac_no_warn" dir="ltr">OCIHandleFree（（void *）poolhp，OCI_HTYPE_SPOOL）;</pre><div class="infoboxnote" id="GUID-B28BBFF7-2965-4D2C-B554-9AAE174DB461__GUID-CD59014D-9D14-4EFE-B690-E4AC53CAC232">
                           <p class="notep1">注意：</p>
                           <p>开发人员：建议您在将连接释放回池之前提交或回滚任何打开的事务。如果不这样做，Oracle Database会在释放连接时自动提交任何打开的事务。</p>
                           <p>如果在使用会话池时检测到实例故障，OCI会尝试清除该实例的会话。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-B28BBFF7-2965-4D2C-B554-9AAE174DB461__GUID-B61E2625-FE1C-4B9A-B4FA-E8366591BF17">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="显式释放句柄">OCIHandleFree（）</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI16632"></a><div class="props_rev_3"><a id="GUID-72D13726-61B8-4CAB-9120-4E33714688AE" name="GUID-72D13726-61B8-4CAB-9120-4E33714688AE"></a><h4 id="LNOCI-GUID-72D13726-61B8-4CAB-9120-4E33714688AE" class="sect4"><span class="enumeration_section">11.1.7</span> OCI会话池示例</h4>
                  <div>
                     <p>在哪里可以找到经过测试的完整程序中的会话池示例。</p>
                     <p>有关已测试完整程序中的会话池的示例，请参阅目录<code class="codeph">demo</code> <code class="codeph">cdemosp.c</code> 。
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI9110"></a><div class="props_rev_3"><a id="GUID-1E260CD3-2EF7-49FF-97FC-041C2EF60381" name="GUID-1E260CD3-2EF7-49FF-97FC-041C2EF60381"></a><h3 id="LNOCI-GUID-1E260CD3-2EF7-49FF-97FC-041C2EF60381" class="sect3"><span class="enumeration_section">11.2</span>数据库驻留连接池</h3>
               <div>
                  <p>数据库驻留连接池（DRCP）在数据库服务器中为典型的Web应用程序使用方案提供连接池，其中应用程序获取数据库连接，对其进行相对较短的持续时间，然后释放它。</p>
                  <p>DRCP池服务器进程，每个进程相当于专用服务器进程和数据库会话的组合。（此后，这些“专用”服务器进程称为<span class="italic">池化服务器</span> 。）
                  </p>
                  <p>DRCP补充了在中间层进程中共享线程之间的连接的中间层连接池。此外，DRCP还允许在同一中间层主机上甚至跨中间层主机的中间层进程之间共享数据库连接。这样可以显着减少支持大量客户端连接所需的关键数据库资源，从而减少数据库层内存占用并提高中间层和数据库层的可伸缩性。拥有一个随时可用的服务器池可以降低创建和拆除客户端连接的成本。</p>
                  <p>DRCP尤其适用于具有无法进行中间层连接池的多进程单线程应用程序服务器（如PHP / Apache）的体系结构。使用DRCP，数据库可以扩展到数万个并发连接。</p>
                  <div class="infoboxnotealso" id="GUID-1E260CD3-2EF7-49FF-97FC-041C2EF60381__GUID-7437CBB6-FBC4-4A2D-96A8-B55881510B27">
                     <p class="notep1">也可以看看：</p>
                     <p>有关DRCP的完整信息，请参见<a href="../adfns/performance-and-scalability.html#ADFNS228" target="_blank"><span><cite>“Oracle数据库开发指南</cite></span></a></p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61" name="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61"></a><h3 id="LNOCI-GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61" class="sect3"><span class="enumeration_section">11.3</span>关于在Traffic Director模式下使用Oracle Connection Manager</h3>
               <div>
                  <p>Traffic Director Mode中的Oracle Connection Manager是一个放置在支持的数据库客户端和数据库实例之间的代理。</p>
                  <div class="p">Oracle Database <span class="italic">11g</span>第2版（11.2）及更高版本中支持的客户端可以在Traffic Director模式下连接到Oracle Connection Manager。流量控制器模式中的Oracle连接管理器为计划内和计划外数据库服务器中断，连接多路复用支持和负载平衡提供了改进的高可用性（HA）。以下各节将更详细地介绍对Traffic Director模式中的Oracle Connection Manager的支持<ul style="list-style-type:disc">
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__MODESOFOPERATION-4FD4C8FE">运作模式</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__KEYFEATURES-4FD4D08F">主要特点</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="section" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__MODESOFOPERATION-4FD4C8FE">
                     <p class="subhead2" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__GUID-749BC524-93BC-42F1-B765-970605875B7F">运作模式</p>
                     <p>流量控制器模式中的Oracle连接管理器支持以下操作模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <div class="p">在池连接模式下，流量控制器模式中的Oracle连接管理器支持使用以下数据库客户端版本的任何应用程序：<ul style="list-style-type:disc">
                                 <li>
                                    <p>OCI，OCCI和开源驱动程序（Oracle Database <span class="italic">11g第</span> 2版（11.2.0.4）及更高版本））</p>
                                 </li>
                                 <li>
                                    <p>JDBC（Oracle Database 12c <span class="italic">第</span> 1版（12.1）及更高版本）</p>
                                 </li>
                                 <li>
                                    <p>ODP.NET（Oracle Database 12 <span class="italic">c第</span> 2版（12.2）及更高版本）</p>
                                 </li>
                              </ul>
                           </div>
                           <p>此外，应用程序必须使用DRCP。也就是说，应用程序必须在连接字符串（或<code class="codeph">tnsnames.ora</code>别名）中启用DRCP。
                           </p>
                        </li>
                        <li>
                           <p>在非池化连接（或专用）模式下，流量控制器模式中的Oracle连接管理器支持使用数据库客户机版本Oracle Database <span class="italic">11g第</span> 2版（11.2.0.4）及更高版本的任何应用程序。在此模式下，某些功能（如连接多路复用）不可用。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__KEYFEATURES-4FD4D08F">
                     <p class="subhead2" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__GUID-3A52B2C3-D63C-4ACB-8FED-1BAFC3801338">主要特点</p>
                     <div class="p">Traffic Director Mode中的Oracle Connection Manager提供以下支持：<ul style="list-style-type:disc">
                           <li>
                              <div class="p">透明的性能增强和连接多路复用，包括：<ul style="list-style-type:disc">
                                    <li>
                                       <p>对所有操作模式自动启用语句高速缓存，行预取和结果集高速缓存。</p>
                                    </li>
                                    <li>
                                       <p>使用代理驻留连接池（PRCP）的数据库会话多路复用（仅池化模式），其中PRCP是数据库驻留连接池（DRCP）的代理模式。应用程序在Traffic Director模式下的Oracle Connection Manager与数据库之间获得透明的连接时负载平衡和运行时负载平衡。</p>
                                    </li>
                                    <li>
                                       <p>对于Traffic Director模式实例中的多个Oracle Connection Manager，应用程序通过客户端连接时间负载平衡或负载均衡器（BIG-IP，NGINX等）获得更高的可扩展性</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <div class="p">零应用程序停机时间<ul style="list-style-type:disc">
                                    <li>
                                       <div class="p">计划数据库维护或可插拔数据库（PDB）重定位<ul style="list-style-type:disc">
                                             <li>
                                                <p>合并模式</p>
                                                <p>流量控制器模式中的Oracle Connection Manager响应Oracle Notification Service（ONS）事件以计划中断和重定向工作。请求完成后，在流量控制器模式下，Oracle Connection Manager上的池中的连接将耗尽。Oracle Database <span class="italic">11g第</span> 2版（11.2.0.4）及更高版本支持服务重定位。
                                                </p>
                                                <p>对于PDB重定位，当PDB重新定位时，流量控制器模式中的Oracle连接管理器会响应带内通知，即使未配置ONS时也是如此（对于Oracle数据库版本18c，仅限版本18.1及更高版本的服务器）</p>
                                             </li>
                                             <li>
                                                <p>非汇集或专用模式</p>
                                                <div class="p">当客户端没有请求边界信息时，流量控制器模式中的Oracle连接管理器支持许多应用程序的计划中断（只要在请求/事务边界上只需要保留简单的会话状态和游标状态）。这种支持包括：<ul style="list-style-type:disc">
                                                      <li>
                                                         <p>在事务边界处停止服务/ PDB，或者利用Oracle数据库版本18c连续应用程序可用性来停止请求边界处的服务</p>
                                                      </li>
                                                      <li>
                                                         <p>流量控制器模式中的Oracle连接管理器利用透明应用程序故障转移（TAF）故障转移还原来重新连接和还原简单状态。</p>
                                                      </li>
                                                   </ul>
                                                </div>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                    <li>
                                       <p>针对大多数读取工作负载的计划外数据库中断</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <div class="p">流量控制器模式中Oracle Connection Manager的高可用性，以避免单点故障。这得到以下支持：<ul style="list-style-type:disc">
                                    <li>
                                       <p>流量控制器模式中的多个Oracle连接管理器实例，使用连接字符串中的负载平衡器或客户端负载平衡/故障转移</p>
                                    </li>
                                    <li>
                                       <p>在Traffic Director模式实例中滚动升级Oracle Connection Manager</p>
                                    </li>
                                    <li>
                                       <p>针对计划中断，在流量控制器模式下从客户端到Oracle Connection Manager的现有连接的正常关闭</p>
                                    </li>
                                    <li>
                                       <p>带有Oracle数据库版本18c及更高版本客户端的带内通知</p>
                                    </li>
                                    <li>
                                       <p>对于较旧的客户端，通知将与当前请求的响应一起发送</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <div class="p">为了安全性和隔离性，Traffic Director Mode中的Oracle Connection Manager提供：<ul style="list-style-type:disc">
                                    <li>
                                       <p>数据库代理支持传输控制协议/传输控制协议安全（TCP / TCPS）和协议转换</p>
                                    </li>
                                    <li>
                                       <p>防火墙基于IP地址，服务名称和安全套接字层/传输层安全性（SSL / TLS）钱包</p>
                                    </li>
                                    <li>
                                       <p>多租户环境中的租户隔离</p>
                                    </li>
                                    <li>
                                       <p>防止拒绝服务和模糊测试攻击</p>
                                    </li>
                                    <li>
                                       <p>跨Oracle数据库本地和Oracle Cloud安全地隧道传输数据库流量</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-BF9AFFD6-537A-4252-BBFB-3A60EEAC3E61__GUID-A2DD3A99-8792-4704-A482-B66B30AD1B85">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关配置<code class="codeph">cman.ora</code>配置文件以在Traffic Director模式下设置Oracle Connection Manager的信息，请<code class="codeph">cman.ora</code> <a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-3917FC5D-4B23-4752-85BA-39A88C4D13F8" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-58847B76-3836-41DB-9EB6-A81D5C397024" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> ，了解有关在Traffic Director模式代理身份验证中为Oracle Connection Manager配置数据库的信息</p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-96FA23BA-F32B-4D47-9CBB-69D27E8D94F6" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> ，了解有关在流量控制器模式下为计划外停机事件配置Oracle Connection Manager的信息</p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-E73658E7-BBF7-4C13-AAD5-70D32062AD8D" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> ，了解有关在Traffic Director模式下为计划的关闭事件配置Oracle Connection Manager的信息</p>
                           </li>
                           <li>
                              <p><a href="../netag/configuring-oracle-connection-manager.html#NETAG-GUID-15756B12-5ED5-4EDE-9D4B-6B890D5BE9AF" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”，</cite></span></a>以获取有关在流量控制器模式下配置Oracle Connection Manager使用的代理驻留连接池的信息</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=NETAG-GUID-FC833F8F-CE5A-4C02-A962-244954158853" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> ，了解有关在流量控制器模式下使用Oracle Connection Manager的所有驱动程序不支持的功能的信息</p>
                           </li>
                           <li>
                              <p><a href="../netrf/index.html" target="_blank"><span><cite>Oracle Database Net Services参考</cite></span></a> ，以获取Oracle CMAN配置文件的概述</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNOCI16602"></a><div class="props_rev_3"><a id="GUID-1C9A6E8F-EF5A-478D-B65E-CE39D4F00683" name="GUID-1C9A6E8F-EF5A-478D-B65E-CE39D4F00683"></a><h3 id="LNOCI-GUID-1C9A6E8F-EF5A-478D-B65E-CE39D4F00683" class="sect3"><span class="enumeration_section">11.4</span> OCI中的连接池</h3>
               <div>
                  <p>连接池是指通过多个会话使用可重用物理连接的组（池）来平衡负载。</p>
                  <p>该池由OCI管理，而不是应用程序。可以使用连接池的应用程序包括Web应用程序服务器和电子邮件服务器的中间层应用程序。</p>
                  <p>此功能的一个用途是在连接到后端Oracle数据库的Web应用程序服务器中。假设Web应用程序服务器从数据库服务器获取数据的多个并发请求。应用程序可以在应用程序初始化期间在每个环境中创建池（或一组池）。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-C7AB12E8-E640-41F0-9C28-E68F7E683694" title="middletier上的连接池类似于共享服务器在后端提供的内容。无状态会话可跨中间线程连续重复使用。您可以将多个连接池的高级概念用于不同的数据库连接。为连接池启用了事务应用程序故障转移（TAF）。">OCI连接池概念</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-322FF18E-48AE-4B94-8477-E91127F6BA86" title="列出在应用程序中使用连接池必须遵循的步骤。">使用OCI调用连接池</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-AE06BCB1-7333-458E-90F0-0761496EC5E1" title="哪里可以找到经过测试的完整程序中的连接池示例。">OCI连接池的示例</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16603"></a><div class="props_rev_3"><a id="GUID-C7AB12E8-E640-41F0-9C28-E68F7E683694" name="GUID-C7AB12E8-E640-41F0-9C28-E68F7E683694"></a><h4 id="LNOCI-GUID-C7AB12E8-E640-41F0-9C28-E68F7E683694" class="sect4"><span class="enumeration_section">11.4.1</span> OCI连接池概念</h4>
                  <div>
                     <p>Oracle数据库具有多种事务监视功能，例如数据库会话和连接的细粒度管理。通过将数据库会话（用户句柄）的概念与连接（服务器句柄）分开来完成数据库会话的细粒度管理。通过使用OCI调用进行会话切换和会话迁移，应用程序服务器或事务监视器可以通过较少的物理连接复用多个会话，从而通过池化连接和后端Oracle服务器进程实现高度可伸缩性。</p>
                     <p>连接池本身通常配置有共享的物理连接池，转换为包含相同数量的专用服务器进程的后端服务器池。</p>
                     <p>物理连接数小于应用程序使用的数据库会话数。使用连接池还可以减少物理连接和后端服务器进程的数量。因此可以多路复用更多的数据库会话。</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="session-and-connection-pooling.html#GUID-3C6F8FF3-195D-4DCB-B684-8102004F4686" title="middletier上的连接池类似于共享服务器在后端提供的内容。">与共享服务器的异同</a></p>
                           </li>
                           <li>
                              <p><a href="session-and-connection-pooling.html#GUID-11F389B2-7D7A-4188-96AC-438C25139C4D" title="无状态会话可跨中间线程连续重复使用。">无国籍会议与有状态会议</a></p>
                           </li>
                           <li>
                              <p><a href="session-and-connection-pooling.html#GUID-46A224F5-1BF9-4AE0-BCF1-5222CB913B09" title="您可以将多个连接池的高级概念用于不同的数据库连接。">多个连接池</a></p>
                           </li>
                           <li>
                              <p><a href="session-and-connection-pooling.html#GUID-55F39E75-40EB-464B-AEFB-75FF8ABD0169" title="为连接池启用了事务应用程序故障转移（TAF）。">透明应用程序故障转移</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI16604"></a><div class="props_rev_3"><a id="GUID-3C6F8FF3-195D-4DCB-B684-8102004F4686" name="GUID-3C6F8FF3-195D-4DCB-B684-8102004F4686"></a><h5 id="LNOCI-GUID-3C6F8FF3-195D-4DCB-B684-8102004F4686" class="sect5"><span class="enumeration_section">11.4.1.1</span>与共享服务器的异同</h5>
                     <div>
                        <p>middletier上的连接池类似于共享服务器在后端提供的内容。</p>
                        <p>通过管理中间层上的会话多路复用逻辑，连接池使专用服务器实例的行为类似于共享服务器实例。</p>
                        <p>中间层上的连接池控制专用服务器进程的池化，包括到专用服务器进程的传入连接。连接池和共享服务器之间的主要区别在于，在后一种情况下，从客户端的连接通常是数据库实例中的调度程序。调度程序负责将客户机请求定向到适当的共享服务器。但是，连接池的物理连接直接从后端服务器池中的中间件到专用服务器进程建立。</p>
                        <p>仅当中间层是多线程时，连接池才有用。每个线程都可以维护与数据库的会话。与数据库的实际连接由连接池维护，这些连接（包括专用数据库服务器进程池）在中间层的所有线程之间共享。</p>
                     </div>
                  </div><a id="LNOCI16605"></a><div class="props_rev_3"><a id="GUID-11F389B2-7D7A-4188-96AC-438C25139C4D" name="GUID-11F389B2-7D7A-4188-96AC-438C25139C4D"></a><h5 id="LNOCI-GUID-11F389B2-7D7A-4188-96AC-438C25139C4D" class="sect5"><span class="enumeration_section">11.4.1.2</span>无状态会话与有状态会话</h5>
                     <div>
                        <p>无状态会话可跨中间线程连续重复使用。</p>
                        <p>在线程完成代表三层用户处理数据库请求之后，可以代表完全不同的三层用户重复使用相同的数据库会话来完成不同的请求。</p>
                        <p>但是，对数据库的有状态会话不能跨中间线程进行串行重用，因为它们可能具有与特定三层用户相关联的某些特定状态。此类状态的示例可以包括打开事务，来自语句的获取状态或PL / SQL包状态。只要状态存在，会话就不能为不同的请求重用。</p>
                        <div class="infoboxnote" id="GUID-11F389B2-7D7A-4188-96AC-438C25139C4D__GUID-8121CD53-9389-40B3-B6A7-F42107562E4B">
                           <p class="notep1">注意：</p>
                           <p>无状态会话也可能具有打开事务，打开语句获取状态等。但是，这种状态持续的时间相对较短（仅在处理中间层线程的特定三层请求期间），允许会话为不同的三层用户连续重用（当此状态为清理干净）。</p>
                           <p>无状态会话通常与语句缓存一起使用。</p>
                        </div>
                        <p>连接池提供的是无状态连接和有状态会话。</p>
                        <div class="infoboxnotealso" id="GUID-11F389B2-7D7A-4188-96AC-438C25139C4D__GUID-D99ECBE5-A379-48FF-B7AF-F87298C255F4">
                           <p class="notep1">也可以看看：</p>
                           <p>如果您必须使用无状态会话，则<a href="session-and-connection-pooling.html#GUID-F9662FFB-EAEF-495C-96FC-49C6D1D9625C" title="会话池意味着应用程序创建并维护一组无状态会话到数据库。">在OCI中进行会话池</a></p>
                        </div>
                     </div>
                  </div><a id="LNOCI16607"></a><a id="LNOCI16606"></a><div class="props_rev_3"><a id="GUID-46A224F5-1BF9-4AE0-BCF1-5222CB913B09" name="GUID-46A224F5-1BF9-4AE0-BCF1-5222CB913B09"></a><h5 id="LNOCI-GUID-46A224F5-1BF9-4AE0-BCF1-5222CB913B09" class="sect5"><span class="enumeration_section">11.4.1.3</span>多个连接池</h5>
                     <div>
                        <p>您可以将多个连接池的高级概念用于不同的数据库连接。</p>
                        <p>当为用户分配不同的优先级时，也可以使用多个连接池。可以使用连接池实现不同的服务级别保证。</p>
                        <p><a href="session-and-connection-pooling.html#GUID-46A224F5-1BF9-4AE0-BCF1-5222CB913B09__CHDHJEDC">图11-1</a>说明了OCI连接池。
                        </p>
                        <div class="figure" id="GUID-46A224F5-1BF9-4AE0-BCF1-5222CB913B09__CHDHJEDC">
                           <p class="titleinfigure">图11-1 OCI连接池</p><img src="img/lnoci043.gif" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/lnoci043.html"><br><a href="img_text/lnoci043.html">“图11-1 OCI连接池”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="LNOCI16608"></a><div class="props_rev_3"><a id="GUID-55F39E75-40EB-464B-AEFB-75FF8ABD0169" name="GUID-55F39E75-40EB-464B-AEFB-75FF8ABD0169"></a><h5 id="LNOCI-GUID-55F39E75-40EB-464B-AEFB-75FF8ABD0169" class="sect5"><span class="enumeration_section">11.4.1.4</span>透明应用程序故障转移</h5>
                     <div>
                        <p>为连接池启用了事务应用程序故障转移（TAF）。</p>
                        <p>TAF的概念同样适用于连接池中的连接，除了不应在连接字符串中使用<code class="codeph">BACKUP</code>和<code class="codeph">PRECONNECT</code>子句，并且不能使用连接池和TAF。</p>
                        <p>当连接池中的连接进行故障转移时，它会使用主连接字符串本身进行连接。在实例失败后，会话将池用于数据库往返时会进行故障转移。侦听器配置为将连接路由到良好实例（如果可用），这与基于服务的连接字符串一样。</p>
                        <div class="infoboxnotealso" id="GUID-55F39E75-40EB-464B-AEFB-75FF8ABD0169__GUID-07806C44-89C5-4548-BED3-26D6214EBCDC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../netag/enabling-advanced-features.html#NETAG0131" target="_blank"><span class="italic">“Oracle数据库网络服务管理员指南”</span></a> ，有关配置透明应用程序故障转移的章节</p>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI091"></a><div class="props_rev_3"><a id="GUID-322FF18E-48AE-4B94-8477-E91127F6BA86" name="GUID-322FF18E-48AE-4B94-8477-E91127F6BA86"></a><h4 id="LNOCI-GUID-322FF18E-48AE-4B94-8477-E91127F6BA86" class="sect4"><span class="enumeration_section">11.4.2</span>使用OCI调用连接池</h4>
                  <div>
                     <p>列出在应用程序中使用连接池必须遵循的步骤。</p>
                     <div class="section">
                        <p>要在应用程序中使用连接池，您必须：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span><a href="session-and-connection-pooling.html#GUID-C09AF9F9-34EB-4D1D-849E-9B962463C7A7" title="连接池要求OCIHandleAlloc（）分配池句柄OCI_HTYPE_CPOOL。">分配池句柄</a></span></li>
                        <li><span><a href="session-and-connection-pooling.html#GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C" title="函数OCIConnectionPoolCreate（）初始化连接池句柄。">创建连接池</a></span></li>
                        <li><span><a href="session-and-connection-pooling.html#GUID-1DB08E60-053F-4D7B-A56D-FE42FE9463B5" title="应用程序可以使用多个接口之一。">登录数据库</a></span></li>
                        <li><span><a href="session-and-connection-pooling.html#GUID-497689F0-20A0-4CEF-91DC-594DBACED921" title="使用OCI_CPOOL模式（连接池），后端数据库中的会话内存（UGA）来自SGA。">处理连接池中的SGA限制</a></span></li>
                        <li><span><a href="session-and-connection-pooling.html#GUID-73DFAAA9-4EB2-44ED-9DEC-2B803B990AE2" title="选择适当的调用以在连接池模式下从数据库注销。">从数据库注销</a></span></li>
                        <li><span><a href="session-and-connection-pooling.html#GUID-CB0DC00D-C935-41BC-AF4B-29C3288B743B" title="OCIConnectionPoolDestroy（）会破坏它。">销毁连接池</a></span></li>
                        <li><span><a href="session-and-connection-pooling.html#GUID-676CFBC3-69CC-447B-B0A5-B58BE827291E" title="使用OCIHandleFree（）释放池句柄。">免费使用泳池手柄</a></span></li>
                     </ol>
                  </div><a id="LNOCI16609"></a><div class="props_rev_3"><a id="GUID-C09AF9F9-34EB-4D1D-849E-9B962463C7A7" name="GUID-C09AF9F9-34EB-4D1D-849E-9B962463C7A7"></a><h5 id="LNOCI-GUID-C09AF9F9-34EB-4D1D-849E-9B962463C7A7" class="sect5"><span class="enumeration_section">11.4.2.1</span>分配池句柄</h5>
                     <div>
                        <p>连接池要求<code class="codeph">OCIHandleAlloc()</code>分配池句柄<code class="codeph">OCI_HTYPE_CPOOL</code> 。
                        </p>
                        <div class="section">
                           <p>可以为给定的环境句柄创建多个池。</p>
                           <p>对于单个连接池，这是一个分配示例：</p><pre class="oac_no_warn" dir="ltr">OCICPool * poolhp; OCIHandleAlloc（（void *）envhp，（void **）＆poolhp，OCI_HTYPE_CPOOL，（size_t）0，（void **）0））;</pre><div class="infoboxnotealso" id="GUID-C09AF9F9-34EB-4D1D-849E-9B962463C7A7__GUID-D75099C1-D242-40F9-A937-82E507605152">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI16610"></a><div class="props_rev_3"><a id="GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C" name="GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C"></a><h5 id="LNOCI-GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C" class="sect5"><span class="enumeration_section">11.4.2.2</span>创建连接池</h5>
                     <div>
                        <p>函数<code class="codeph">OCIConnectionPoolCreate()</code>初始化连接池句柄。
                        </p>
                        <div class="section">
                           <p>它有这些<code class="codeph">IN</code>参数：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">connMin</code> ，创建池时要打开的最小连接数。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">connIncr</code> ，当所有连接都忙且呼叫需要连接时要打开的增量连接数。仅当打开的连接总数小于可在该池中打开的最大连接数时，才使用此增量。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">connMax</code> ，可以在池中打开的最大连接数。当池中打开最大连接数并且所有连接都忙时，如果呼叫需要连接，则等待直到达到连接。但是，如果为池设置了<code class="codeph">OCI_ATTR_CONN_NOWAIT</code>属性，则会返回错误。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">poolUsername</code>和<code class="codeph">poolPassword</code> ，允许用户会话在池中的连接之间透明地迁移。
                                 </p>
                              </li>
                              <li>
                                 <p>此外，可以设置属性<code class="codeph">OCI_ATTR_CONN_TIMEOUT</code>以使池中的连接超时。空闲时间超过此时间的连接会定期终止，以保持最佳打开连接数。如果未设置此属性，则连接永远不会超时。
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C__GUID-2A07D24D-88CC-4CC3-828D-1AFB8A3865BD">
                              <p class="notep1">注意：</p>
                              <p>只有在网络往返时才会发生池的收缩。如果没有操作，则连接保持活动状态。</p>
                           </div>
                           <p>由于可以动态配置所有上述属性，因此应用程序可以读取当前负载（打开的连接数和繁忙连接数）并适当调整这些属性。</p>
                           <p>如果要动态更改池属性（ <code class="codeph">connMax</code> ， <code class="codeph">connMin</code> <span class="italic">，</span> <code class="codeph">connIncr</code> ），则必须在<code class="codeph">mode</code>设置为<code class="codeph">OCI_CPOOL_REINITIALIZE</code> <code class="codeph">mode</code>调用<code class="codeph">OCIConnectionPoolCreate()</code> 。</p>
                           <p>OUT参数<code class="codeph">poolName</code>和<code class="codeph">poolNameLen</code>包含要在后续<code class="codeph">OCIServerAttach()</code>和<code class="codeph">OCILogon2()</code>调用中使用的值，以代替数据库名称和数据库名称长度参数。
                           </p>
                           <p>应用程序可以创建的池数没有限制。中间层应用程序可以创建多个池以连接到同一服务器或不同的服务器，以根据应用程序的特定需求平衡负载。</p>
                           <p>以下是此调用的示例：</p><pre class="oac_no_warn" dir="ltr">OCIConnectionPoolCreate（（OCIEnv *）envhp，（OCIError *）errhp，（OCICPool *）poolhp，＆poolName，＆poolNameLen，（text *）database，strlen（database），（ub4）connMin，（ub4）connMax，（ub4）connIncr， （text *）poolUsername，strlen（poolUserLen），（text *）poolPassword，strlen（poolPassLen），OCI_DEFAULT））;</pre><div class="infoboxnotealso" id="GUID-4298BCA2-0EE0-4B77-B9CB-88845562F44C__GUID-6F1CEDE0-8FF2-4DA5-B83C-4266DF3E2336">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-attributes.html#GUID-400B741C-E4AA-4155-8279-09FD80A6B38F__CACFEFEB">OCI_ATTR_CONN_TIMEOUT</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI16611"></a><div class="props_rev_3"><a id="GUID-1DB08E60-053F-4D7B-A56D-FE42FE9463B5" name="GUID-1DB08E60-053F-4D7B-A56D-FE42FE9463B5"></a><h5 id="LNOCI-GUID-1DB08E60-053F-4D7B-A56D-FE42FE9463B5" class="sect5"><span class="enumeration_section">11.4.2.3</span>登录数据库</h5>
                     <div>
                        <p>应用程序可以使用多个接口之一。</p>
                        <div class="section">
                           <p>应用程序必须使用以下某个接口登录每个线程的数据库。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">OCILogon2（）</code></p>
                                 <p>这是最简单的界面。当您需要简单的连接池连接并且不需要更改会话句柄的任何属性时，请使用此接口。此接口还可用于建立与数据库的代理连接。</p>
                                 <p>以下是使用<code class="codeph">OCILogon2()</code>的示例：</p><pre class="oac_no_warn" dir="ltr">for（i = 0; i &lt;MAXTHREADS; ++ i）{OCILogon2（envhp，errhp，＆svchp [i]，“hr”，2，“hr”，2，poolName，poolNameLen，OCI_LOGON2_CPOOL））; }</pre><p>要使用此接口获取代理连接，请将password参数设置为<code class="codeph">NULL</code> 。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCISessionGet（）</code></p>
                                 <p>这是推荐的界面。它为用户提供了使用外部身份验证方法的附加选项，例如证书，可分辨名称等。<code class="codeph">OCISessionGet()</code>是建议的统一函数调用来检索会话。
                                 </p>
                                 <p>以下是使用<code class="codeph">OCISessionGet()</code>的示例：</p><pre class="oac_no_warn" dir="ltr">for（i = 0; i &lt;MAXTHREADS; ++ i）{OCISessionGet（envhp，errhp，＆svchp，authp，（OraText *）poolName，strlen（poolName），NULL，0，NULL，NULL，NULL，OCI_SESSGET_CPOOL）}</pre></li>
                              <li>
                                 <p><code class="codeph">OCIServerAttach()</code>和<code class="codeph">OCISessionBegin()</code></p>
                                 <p>如果应用程序必须在用户会话句柄和服务器句柄上设置任何特殊属性，则可以使用其他接口。对于这样的要求，应用程序必须分配所有句柄（连接池句柄，服务器句柄，会话句柄和服务上下文句柄）。你会按照这个顺序：</p>
                                 <ol>
                                    <li>
                                       <p>创建连接池。</p>
                                       <p>连接池通过物理连接透明地复用虚拟服务器句柄，从而无需用户这样做。用户感觉到会话具有专用（虚拟）连接。由于多路复用对用户透明地完成，因此用户不得尝试通过虚拟服务器句柄本身多路复用会话。会话迁移和会话切换的概念（需要在用户级别进行显式多路复用）对于连接池是不存在的，不应使用。</p>
                                    </li>
                                    <li>
                                       <p>调用<code class="codeph">OCIServerAttach()</code>时将模式设置为<code class="codeph">OCI_CPOOL</code> 。</p>
                                       <p>在OCI程序中，用户应创建（模式设置为<code class="codeph">OCI_CPOOL</code> <code class="codeph">OCIServerAttach()</code> ），这是使用连接池创建的每个会话的唯一虚拟服务器句柄。虚拟服务器句柄和会话之间应该存在一对一的映射。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在模式设置为<code class="codeph">OCI_DEFAULT</code>下调用<code class="codeph">OCISessionBegin()</code> 。</p>
                                       <p>可以使用<code class="codeph">OCISessionBegin()</code>将凭据设置为<code class="codeph">OCI_CRED_RDBMS</code> ， <code class="codeph">OCI_CRED_EXT</code>或<code class="codeph">OCI_CRED_PROXY</code> 。如果凭据设置为<code class="codeph">OCI_CRED_EXT</code> ，则不需要在会话句柄上设置用户名和密码。如果凭据设置为<code class="codeph">OCI_CRED_PROXY</code> ，则只能在会话句柄上设置用户名。 （不必创建显式主会话， <code class="codeph">OCI_ATTR_MIGSESSION</code>需要设置<code class="codeph">OCI_ATTR_MIGSESSION</code> ）。
                                       </p>
                                       <p>当虚拟服务器句柄指向连接池（ <code class="codeph">OCIServerAttach()</code>调用<code class="codeph">mode</code>设置为<code class="codeph">OCI_CPOOL</code> ），用户不应在对<code class="codeph">OCISessionBegin()</code>的调用中设置<code class="codeph">OCI_MIGRATE</code>标志。Oracle仅支持出于兼容性原因而支持传递<code class="codeph">OCI_MIGRATE</code>标志。不要使用<code class="codeph">OCI_MIGRATE</code>标志，因为用户在使用连接池时获得的感知是具有其自己的专用（虚拟）连接的会话，这些连接被透明地复用到真实连接上。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-1DB08E60-053F-4D7B-A56D-FE42FE9463B5__GUID-45CD8766-90C4-48CD-96DB-11F5C568887E">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI16612"></a><div class="props_rev_3"><a id="GUID-497689F0-20A0-4CEF-91DC-594DBACED921" name="GUID-497689F0-20A0-4CEF-91DC-594DBACED921"></a><h5 id="LNOCI-GUID-497689F0-20A0-4CEF-91DC-594DBACED921" class="sect5"><span class="enumeration_section">11.4.2.4</span>处理连接<span class="enumeration_section">池中的</span> SGA限制</h5>
                     <div>
                        <p>使用<code class="codeph">OCI_CPOOL</code>模式（连接池），后端数据库中的会话内存（UGA）来自SGA。</p>
                        <p>如果您的应用程序消耗的会话内存多于SGA可容纳的会话内存，则可能需要对后端数据库进行一些SGA调整以获得更大的SGA。后端数据库的内存调整要求类似于在共享服务器后端配置LARGE POOL，但实例仍处于专用模式。</p>
                        <p>如果您仍然遇到SGA限制，则必须考虑：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过减少每个会话的开放语句来减少会话内存消耗</p>
                           </li>
                           <li>
                              <p>通过在中间层上汇集会话来减少后端中的会话数</p>
                           </li>
                           <li>
                              <p>否则，关闭连接池</p>
                           </li>
                        </ul>
                        <p>应用程序必须避免在后端使用专用数据库链接和连接池。</p>
                        <p>如果后端是专用服务器，则无法进行有效的连接池，因为使用专用数据库链接的会话与物理连接相关联，导致其他会话无法使用相同的连接。如果您的应用程序使用专用数据库链接，并且您没有看到会话之间有效共享后端进程，则必须考虑使用共享数据库链接。</p>
                        <div class="infoboxnotealso" id="GUID-497689F0-20A0-4CEF-91DC-594DBACED921__GUID-914FE48C-1B62-4CFB-B15B-BDC83FB1761A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../tgdba/tuning-shared-pool-and-large-pool.html#TGDBA558" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a> ，有关配置共享服务器的部分</p>
                              </li>
                              <li>
                                 <p><a href="../admin/distributed-database-concepts.html#ADMIN12083" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，有关共享数据库链接的部分，以获取有关分布式数据库的更多信</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16613"></a><div class="props_rev_3"><a id="GUID-73DFAAA9-4EB2-44ED-9DEC-2B803B990AE2" name="GUID-73DFAAA9-4EB2-44ED-9DEC-2B803B990AE2"></a><h5 id="LNOCI-GUID-73DFAAA9-4EB2-44ED-9DEC-2B803B990AE2" class="sect5"><span class="enumeration_section">11.4.2.5</span>从数据库注销</h5>
                     <div>
                        <p>选择适当的调用以在连接池模式下从数据库注销。</p>
                        <p>从以下调用中，选择与登录调用对应的调用，并使用它在连接池模式下从数据库注销。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OCILogoff()</code> ：</p>
                              <p>如果使用<code class="codeph">OCILogon2()</code>进行连接， <code class="codeph">OCILogoff()</code>必须使用<code class="codeph">OCILogoff()</code>注销。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCISessionRelease（）</code></p>
                              <p>如果调用OCISessionGet（）来建立连接，则必须调用<code class="codeph">OCISessionRelease()</code>才能注销。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCISessionEnd()</code>和<code class="codeph">OCIServerDetach()</code></p>
                              <p>如果<code class="codeph">OCIServerAttach()</code>和<code class="codeph">OCISessionBegin()</code>来建立连接并启动会话，则必须调用<code class="codeph">OCISessionEnd()</code>来结束会话，并且必须调用<code class="codeph">OCIServerDetach()</code>来释放连接。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-73DFAAA9-4EB2-44ED-9DEC-2B803B990AE2__GUID-F9190CE5-BE4A-420B-A4C9-ABC5488B1E0D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-567DA731-ABC9-4348-B29C-7B2C6C1D7C36" title="释放使用OCILogon2（）或OCILogon（）检索的会话。">OCILogoff（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-2AE88BDC-2C44-4958-B26A-434B0407F06F" title="终止由OCISessionBegin（）创建的用户会话上下文。">OCISessionEnd（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-402B540A-05FF-464B-B9C8-B2E7B4ABD564" title="删除OCI操作的数据源访问路径。">OCIServerDetach（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-B6291228-DA2F-4CE9-870A-F94243141757" title="为OCI操作创建数据源的访问路径。">OCIServerAttach（）</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNOCI16614"></a><div class="props_rev_3"><a id="GUID-CB0DC00D-C935-41BC-AF4B-29C3288B743B" name="GUID-CB0DC00D-C935-41BC-AF4B-29C3288B743B"></a><h5 id="LNOCI-GUID-CB0DC00D-C935-41BC-AF4B-29C3288B743B" class="sect5"><span class="enumeration_section">11.4.2.6</span>销毁连接池</h5>
                     <div>
                        <p><code class="codeph">OCIConnectionPoolDestroy()</code>会破坏它。
                        </p>
                        <p>使用<code class="codeph">OCIConnectionPoolDestroy()</code>来销毁连接池。
                        </p>
                        <div class="infoboxnotealso" id="GUID-CB0DC00D-C935-41BC-AF4B-29C3288B743B__GUID-7C1B4CEB-BC12-4EEE-BB78-52F94ED6B44A">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="connect-authorize-and-initialize-functions.html#GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" title="销毁连接池。">OCIConnectionPoolDestroy（）</a></p>
                        </div>
                     </div>
                  </div><a id="LNOCI16615"></a><div class="props_rev_3"><a id="GUID-676CFBC3-69CC-447B-B0A5-B58BE827291E" name="GUID-676CFBC3-69CC-447B-B0A5-B58BE827291E"></a><h5 id="LNOCI-GUID-676CFBC3-69CC-447B-B0A5-B58BE827291E" class="sect5"><span class="enumeration_section">11.4.2.7</span>释放池把手</h5>
                     <div>
                        <p>使用<code class="codeph">OCIHandleFree()</code>释放池句柄。
                        </p>
                        <p>最后三个动作在此代码片段中说明：</p><pre class="oac_no_warn" dir="ltr">for（i = 0; i &lt;MAXTHREADS; ++ i）{checkerr（errhp，OCILogoff（（void *）svchp [i]，errhp））; } checkerr（errhp，OCIConnectionPoolDestroy（poolhp，errhp，OCI_DEFAULT））; checkerr（errhp，OCIHandleFree（（void *）poolhp，OCI_HTYPE_CPOOL））;</pre><div class="infoboxnotealso" id="GUID-676CFBC3-69CC-447B-B0A5-B58BE827291E__GUID-1B38A80D-B03C-4570-B418-705A28CBB173">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-E87E9F91-D3DC-4F35-BE7C-F1EFBFEEBA0A" title="显式释放句柄">OCIHandleFree（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-attributes.html#GUID-400B741C-E4AA-4155-8279-09FD80A6B38F" title="列出并描述连接池句柄属性。">连接池句柄属性</a></p>
                              </li>
                              <li>
                                 <p><a href="connect-authorize-and-initialize-functions.html#GUID-7E5A69F2-0268-4655-845D-A7662902FAA2" title="初始化连接池。">OCIConnectionPoolCreate（）</a> ， <a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a>和<a href="connect-authorize-and-initialize-functions.html#GUID-46720C8F-0A9F-4300-B6C4-4E47875A95C2" title="销毁连接池。">OCIConnectionPoolDestroy（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNOCI16616"></a><div class="props_rev_3"><a id="GUID-AE06BCB1-7333-458E-90F0-0761496EC5E1" name="GUID-AE06BCB1-7333-458E-90F0-0761496EC5E1"></a><h4 id="LNOCI-GUID-AE06BCB1-7333-458E-90F0-0761496EC5E1" class="sect4"><span class="enumeration_section">11.4.3</span> OCI连接池示例</h4>
                  <div>
                     <p>哪里可以找到经过测试的完整程序中的连接池示例。</p>
                     <p>可以在目录<code class="codeph">demo</code>中的<code class="codeph">cdemocp.c and cdemocpproxy.c</code>中找到已测试的完整程序中的连接池<code class="codeph">demo</code> 。
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI16652"></a><div class="props_rev_3"><a id="GUID-8DD97D4D-C7AA-4EF7-9B55-8DC58BDC2726" name="GUID-8DD97D4D-C7AA-4EF7-9B55-8DC58BDC2726"></a><h3 id="LNOCI-GUID-8DD97D4D-C7AA-4EF7-9B55-8DC58BDC2726" class="sect3"><span class="enumeration_section">11.5</span>何时使用连接池，会话池或两者都不使用</h3>
               <div>
                  <p>表示使用它们的环境。</p>
                  <p>如果中间层线程无法重用数据库会话（即，它们是有状态的），并且后端服务器进程的数量可能导致数据库出现扩展问题，请使用OCI连接池。</p>
                  <p>如果数据库会话可由中间层线程重用（即，它们是无状态的），并且后端服务器进程的数量可能导致数据库上的扩展问题，请使用OCI会话池。</p>
                  <p>如果中间层线程无法重用数据库会话（即，它们是有状态的），并且后端服务器进程的数量永远不会大到可能导致数据库上的任何扩展问题，则无需使用任何池机制。</p>
                  <div class="infoboxnote" id="GUID-8DD97D4D-C7AA-4EF7-9B55-8DC58BDC2726__GUID-D3E22093-F8E4-4683-B214-360F978C66BD">
                     <p class="notep1">注意：</p>
                     <p>使用非池化会话或连接会导致每个中间层用户请求拆除并重新创建数据库会话/连接。这可能会导致数据库端出现严重的扩展问题，并导致执行请求的延迟时间过长。因此，Oracle强烈建议您根据数据库会话是有状态还是无状态来采用中间层应用程序的池策略之一。</p>
                  </div>
                  <p>在连接池中，池元素是连接，在会话池中，池元素是会话。</p>
                  <p>与任何池一样，池化资源被应用程序线程锁定一段时间，直到线程在数据库上完成其作业并释放资源为止。在其使用期间，该资源对其他线程不可用。因此，应用程序开发人员必须意识到任何类型的池都可以在相对较短的任务中有效地工作。但是，如果应用程序正在执行长时间运行的事务，它可能会长时间拒绝其他共享者的池化资源，从而导致饥饿。因此，池应该与短任务一起使用，并且池的大小应该足够大以维持所需的事务并发性。</p>
                  <p>请注意有关连接池和会话池的以下附加信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>OCI连接池</p>
                        <p>汇集了与数据库的连接。会话由用户创建和销毁。每次调用数据库都会从池中获取适当的可用连接。</p>
                        <p>该应用程序通过与数据库的较少物理连接来复用多个会话。用户可以调整池配置以实现所需的并发性。</p>
                        <p>应用程序会话的生命周期与缓存的池化连接的生命周期无关。</p>
                     </li>
                     <li>
                        <p>OCI会话池</p>
                        <p>OCI汇集了会话和连接。应用程序从池中获取会话并将会话释放回池中。</p>
                     </li>
                  </ul>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-A408F97E-C451-4D8C-BA8C-4F48DDA0EF26" title="有许多方法可以创建具有不同功能的会话。">会话创建功能</a></p>
                        </li>
                        <li>
                           <p><a href="session-and-connection-pooling.html#GUID-D952EB18-A7DE-4CF6-816D-E5E728AACE5E" title="如何选择要使用的类型od会话。">关于在不同类型的OCI会话之间进行选择</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16653"></a><div class="props_rev_3"><a id="GUID-A408F97E-C451-4D8C-BA8C-4F48DDA0EF26" name="GUID-A408F97E-C451-4D8C-BA8C-4F48DDA0EF26"></a><h4 id="LNOCI-GUID-A408F97E-C451-4D8C-BA8C-4F48DDA0EF26" class="sect4"><span class="enumeration_section">11.5.1</span>会话创建功能</h4>
                  <div>
                     <p>有许多方法可以创建具有不同功能的会话。</p>
                     <p>OCI为会话创建提供以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCILogin</code></p>
                           <p>OCILogon（）是获取OCI会话的最简单方法。优点是易于获得OCI服务上下文。缺点是您无法执行任何高级OCI操作，例如会话迁移，代理身份验证或使用连接池或会话池。</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCILogon2（）</code></p>
                           <p>OCILogon2（）包括的功能<code class="codeph">OCILogon()</code>得到一个会话。此会话可以是具有新基础连接的新会话，也可以是通过现有连接池的虚拟连接启动的会话，也可以是现有会话池中的启动。调用函数的<code class="codeph">mode</code>参数值决定了它的行为。
                           </p>
                           <p>用户无法修改OCI返回的服务上下文的属性（ <code class="codeph">OCI_ATTR_</code> <code class="codeph">STMTCACHESIZE</code>除外）。</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCISessionBegin（）</code></p>
                           <p>OCISessionBegin（）支持OCI会话的所有各种选项，例如代理身份验证，从连接池或会话池获取会话，外部凭据和可迁移会话。这是最低级别的调用，必须显式分配所有句柄并设置所有属性。必须在此调用之前调用<code class="codeph">OCIServerAttach()</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCISessionGet（）</code></p>
                           <p>OCISessionGet（）现在是获取会话的推荐方法。此会话可以是具有新基础连接的新会话，也可以是通过现有连接池的虚拟连接启动的会话，也可以是现有会话池中的启动。调用函数的<code class="codeph">mode</code>参数值决定了它的行为。这类似于<code class="codeph">OCILogon2()</code>但您还可以指定用于从池中获取特定会话的标记。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A408F97E-C451-4D8C-BA8C-4F48DDA0EF26__GUID-C1757A87-6308-46A3-9658-BB5578DE80C4">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-F4592576-BE9D-4583-83AD-5D56D2E592E6" title="创建一个简单的登录会话。">OCILogon（）</a></p>
                           </li>
                           <li>
                              <p><a href="oci-programming-basics.html#GUID-A4B693E9-7554-4721-A7F7-0B5B15589DEE" title="应用程序必须调用OCIEnvNlsCreate（）来初始化OCI环境句柄。现有应用程序可能使用了OCIEnvCreate（）。">应用程序初始化，连接和会话创建</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-425D4B32-257C-480E-B69C-7112BE9482E6" title="获取一个会话。">OCILogon2（）</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNOCI16654"></a><div class="props_rev_3"><a id="GUID-D952EB18-A7DE-4CF6-816D-E5E728AACE5E" name="GUID-D952EB18-A7DE-4CF6-816D-E5E728AACE5E"></a><h4 id="LNOCI-GUID-D952EB18-A7DE-4CF6-816D-E5E728AACE5E" class="sect4"><span class="enumeration_section">11.5.2</span>关于在不同类型的OCI会话之间进行选择</h4>
                  <div>
                     <p>如何选择要使用的类型od会话。</p>
                     <p>OCI包括以下类型的会话：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>基本的OCI会议</p>
                           <p>基本OCI会话通过在专用OCI服务器句柄上使用用户名和密码来工作。这是无池机制。有关何时使用它的信息，请参见何时使用连接池，会话池或两者。</p>
                           <p>如果通过外部凭据获取身份验证，则不需要用户名或密码。</p>
                        </li>
                        <li>
                           <p>会话池会话</p>
                           <p>会话池会话来自会话池缓存。某些会话可能会被标记。这些是无国籍会议。每个<code class="codeph">OCISessionGet()</code>和<code class="codeph">OCISessionRelease()</code>调用都从会话缓存中获取并释放会话。这样可以避免服务器创建和销毁会话。
                           </p>
                           <p>请参见何时使用连接池，会话池或连接池会话与会话池会话与非池会话之间的连接池和会话池。</p>
                        </li>
                        <li>
                           <p>连接池会话</p>
                           <p>使用来自OCI连接池的<code class="codeph">OCISessionGet()</code>和<code class="codeph">OCISessionBegin()</code>调用创建连接池会话。没有会话缓存，因为这些是有状态会话。每次调用都会创建一个新会话，用户负责终止这些会话。
                           </p>
                           <p>会话可在连接池的服务器句柄之间自动迁移。每个会话可以具有用户名和密码，也可以是代理会话。请参见何时使用连接池，会话池或连接池会话与会话池会话与非池会话之间的连接池和会话池。</p>
                        </li>
                        <li>
                           <p>会话共享服务器句柄</p>
                           <p>您可以通过几个物理连接复用多个OCI会话。应用程序通过为这些多个会话提供相同的服务器句柄来手动执行此操作。最好通过使用OCI连接池API将会话多路复用细节留给OCI。</p>
                        </li>
                        <li>
                           <p>代理会话</p>
                           <p>如果必须保护客户端的密码不受中间层的影响，则代理会话非常有用。代理会话也可以是OCI连接池或OCI会话池的一部分。</p>
                        </li>
                        <li>
                           <p>可迁移的会议</p>
                        </li>
                     </ul>
                     <p>由于事务句柄是可迁移的，因此应用程序不需要使用可迁移会话，而是使用OCI连接池。</p>
                     <div class="infoboxnotealso" id="GUID-D952EB18-A7DE-4CF6-816D-E5E728AACE5E__GUID-76245F52-3F50-4D26-B3EF-6EC042C1CE38">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-DAAECC99-A432-48B5-AC33-0868C2FE762D" title="释放使用OCISessionGet（）检索的会话。">OCISessionRelease（）</a></p>
                           </li>
                           <li>
                              <p><a href="connect-authorize-and-initialize-functions.html#GUID-31B1FDB3-056E-4AF9-9B89-8DA6AA156947" title="创建用户会话并开始给定服务器的用户会话。">OCISessionBegin（）</a></p>
                           </li>
                           <li>
                              <p>有关代理会话的更多信息，请参阅<a href="managing-scalable-platforms.html#GUID-A5830D58-3079-45DD-BE3A-81C41991DA70" title="中间层应用程序接收来自浏览器客户端的请求。">OCI中的中间层应用程序</a></p>
                           </li>
                           <li>
                              <p><a href="managing-scalable-platforms.html#GUID-69A0AE8C-3F8D-4EDD-A817-730F17B3DF3E" title="通过在几个服务器连接上复用用户会话来主动平衡用户负载的事务服务器必须将这些连接组合到服务器组中。">OCI会话管理</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="10320.ALTER-PLUGGABLE-DATABASE.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>ALTER PLOGGABLE DATABASE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ALTER-PACKAGE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="ALTER-PROCEDURE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ALTER-PACKAGE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="ALTER-PROCEDURE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ALTER-LIBRARY-to-ALTER-SESSION.html" property="item" typeof="WebPage"><span property="name">SQL语句：ALTER LIBRARY to ALTER SESSION</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ALTER PLOGGABLE DATABASE</li>
            </ol>
            <a id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7" name="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7"></a><a id="SQLRF55668"></a><a id="SQLRF55669"></a><a id="SQLRF55670"></a><a id="SQLRF55671"></a><a id="SQLRF57018"></a><a id="SQLRF56792"></a><a id="SQLRF56841"></a><a id="SQLRF56541"></a><a id="SQLRF56605"></a><a id="SQLRF56608"></a><a id="SQLRF55672"></a><a id="SQLRF55675"></a><a id="SQLRF56542"></a><a id="SQLRF56543"></a><a id="SQLRF56544"></a><a id="SQLRF56811"></a><a id="SQLRF55673"></a><a id="SQLRF55837"></a><a id="SQLRF55840"></a><a id="SQLRF56545"></a><a id="SQLRF55848"></a><a id="SQLRF55847"></a><a id="SQLRF55844"></a><a id="SQLRF55845"></a><a id="SQLRF55846"></a><a id="SQLRF55842"></a><a id="SQLRF55841"></a><a id="SQLRF56228"></a><a id="SQLRF55849"></a><a id="SQLRF57019"></a><a id="SQLRF56793"></a><a id="SQLRF56842"></a><a id="SQLRF56546"></a><a id="SQLRF56606"></a><a id="SQLRF56794"></a><a id="SQLRF56795"></a><a id="SQLRF56796"></a><a id="SQLRF56797"></a><a id="SQLRF55850"></a><a id="SQLRF56547"></a><a id="SQLRF56548"></a><a id="SQLRF55851"></a><a id="SQLRF56549"></a><a id="SQLRF56550"></a><a id="SQLRF56551"></a><a id="SQLRF56617"></a><a id="SQLRF56552"></a><a id="SQLRF56618"></a><a id="SQLRF56553"></a><a id="SQLRF56554"></a><a id="SQLRF56555"></a><a id="SQLRF56556"></a><a id="SQLRF56557"></a><a id="SQLRF56558"></a><a id="SQLRF56812"></a><a id="SQLRF57013"></a><a id="SQLRF55857"></a><a id="SQLRF55858"></a><a id="SQLRF55861"></a><a id="SQLRF56559"></a><a id="SQLRF55859"></a><a id="SQLRF55862"></a><a id="SQLRF55667"></a>
            
            <h2 id="SQLRF-GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7" class="sect2">ALTER PLOGGABLE DATABASE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-DC6C763E-BDE0-4052-AE33-FD1CF14D5CE5">目的</p>
                  <p>使用<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>语句修改可插拔数据库（PDB）。PDB可以是传统的PDB，应用程序容器或应用程序PDB。</p>
                  <p>此语句使您可以执行以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>从多租户容器数据库（CDB）中拔出PDB（使用<span class="italic"><code class="codeph">pdb_unplug_clause</code></span> ）</p>
                     </li>
                     <li>
                        <p>修改PDB的设置（使用<span class="italic"><code class="codeph">pdb_settings_clauses</code></span> ）</p>
                     </li>
                     <li>
                        <p>将PDB数据文件联机或使其脱机（使用<span class="italic"><code class="codeph">pdb_datafile_clause</code></span> ）</p>
                     </li>
                     <li>
                        <p>备份并恢复PDB（使用<span class="italic"><code class="codeph">pdb_recovery_clauses</code></span> ）</p>
                     </li>
                     <li>
                        <p>修改PDB的状态（使用<span class="italic"><code class="codeph">pdb_change_state</code></span>子句）</p>
                     </li>
                     <li>
                        <p>修改CDB中多个PDB的状态（使用<span class="italic"><code class="codeph">pdb_change_state_from_root</code></span>子句）</p>
                     </li>
                     <li>
                        <p>对应用程序容器中的应用程序执行操作（使用<span class="italic"><code class="codeph">application_clauses</code></span> ）</p>
                     </li>
                     <li>
                        <p>使用<span class="italic"><code class="codeph">snapshot_clauses</code></span>创建和管理PDB <span class="italic"><code class="codeph">snapshot_clauses</code></span></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-317C1B89-3C62-4B5E-8F8F-53F4A4AFA63F">
                     <p class="notep1">注意：</p>
                     <p>您可以通过连接到PDB并运行相应的<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>语句来执行所有<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>任务。提供此功能是为了保持已迁移到CDB环境的应用程序的向后兼容性。唯一的例外是修改PDB存储限制，为此，必须使用<span class="italic"><code class="codeph">pdb_storage_clause</code></span>的<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> 。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-395E52FA-6F6A-4246-83C5-94E8A0D8AB32">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC">创建可插入数据库</a>以获取有关创建PDB的信息</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-FDF04B06-B988-48E0-AB71-F3A636232B9F">先决条件</p>
                  <p>您必须连接到CDB。</p>
                  <p>要指定<span class="italic"><code class="codeph">pdb_unplug_clause</code></span> ，当前容器必须是根或应用程序根目录，您必须通过<code class="codeph">AS</code> <code class="codeph">SYSDBA</code>或<code class="codeph">AS</code> <code class="codeph">SYSOPER</code>进行身份验证，并且必须通常授予您<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code>权限，或者在根目录中授予您本地权限。在PDB中本地插入你想拔掉的。
                  </p>
                  <p>要指定<span class="italic"><code class="codeph">pdb_settings_clauses</code></span> ，当前容器必须是要修改其设置的PDB，并且您必须具有<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>权限，要么通常授予，要么在PDB中本地授予。要指定<span class="italic"><code class="codeph">pdb_logging_clauses</code></span>或<code class="codeph">RENAME</code> <code class="codeph">GLOBAL_NAME</code>子句，还必须具有<code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>权限，可以在重命名的PDB中<span class="italic"><code class="codeph">pdb_logging_clauses</code></span>或在本地授予，并且PDB必须处于<code class="codeph">READ</code> <code class="codeph">WRITE</code> <code class="codeph">RESTRICTED</code>模式。
                  </p>
                  <p>要指定<span class="italic"><code class="codeph">pdb_datafile_clause</code></span> ，当前容器必须是要使其联机或脱机的数据文件的PDB，并且您必须具有<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>权限，可以在PDB中共同授予或在本地授予。</p>
                  <p>要指定<span class="italic"><code class="codeph">pdb_recovery_clauses</code></span> ，当前容器必须是要备份或恢复的PDB，并且必须具有<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>权限，可以在PDB中共同授予或在本地授予。</p>
                  <p>要指定<span class="italic"><code class="codeph">pdb_change_state</code></span>子句，当前容器必须是要更改其状态的PDB，并且必须通过<code class="codeph">AS</code> <code class="codeph">SYSBACKUP</code> ， <code class="codeph">AS</code> <code class="codeph">SYSDBA</code> ， <code class="codeph">AS</code> <code class="codeph">SYSDG</code>或<code class="codeph">AS</code> <code class="codeph">SYSOPER</code>进行身份验证。</p>
                  <p>要指定<span class="italic"><code class="codeph">pdb_change_state_from_root</code></span>子句，当前容器必须是根或应用程序根，必须通过<code class="codeph">AS</code> <code class="codeph">SYSBACKUP</code> ， <code class="codeph">AS</code> <code class="codeph">SYSDBA</code> ， <code class="codeph">AS</code> <code class="codeph">SYSDG</code>或<code class="codeph">AS</code> <code class="codeph">SYSOPER</code>进行身份验证，并且必须授予<code class="codeph">SYSBACKUP</code> ， <code class="codeph">SYSDBA</code> ， <code class="codeph">SYSDG</code>或<code class="codeph">SYSOPER</code>权限。通常，或者在根或应用程序根目录中本地授予您，以及在您想要更改其状态的PDB中本地授予您。
                  </p>
                  <p>要指定<span class="italic"><code class="codeph">application_clauses</code></span> ，当前容器必须是应用程序容器，您必须通过<code class="codeph">AS</code> <code class="codeph">SYSBACKUP</code>或<code class="codeph">AS</code> <code class="codeph">SYSDBA</code>进行身份验证，并且必须通常授予您<code class="codeph">SYSBACKUP</code>或<code class="codeph">SYSDBA</code>权限，或者在应用程序根目录和本地授予您本地权限。要在其中执行应用程序操作的应用程序PDB。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-3C383BEC-2317-4BAF-B1C4-144F9415D086">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-AB47CD9D-5123-4154-A535-67E135FAE7E2"><span class="italic">alter_pluggable_database</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-BF74B3FD-44D0-4BCB-A843-2DC3CE2859A8"><img src="img/alter_pluggable_database.gif" alt="下面是alter_pluggable_database.eps的说明" title="下面是alter_pluggable_database.eps的说明" longdesc="img_text/alter_pluggable_database.html"><br><a href="img_text/alter_pluggable_database.html">说明alter_pluggable_database.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHGFBEG">pdb_unplug_clause :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHCEIGC">pdb_settings_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHHEJFH">pdb_datafile_clause :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHDJFHH">pdb_recovery_clauses</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHJEAIE">pdb_change_state :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHBBCHH">pdb_change_state_from_root :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__APPLICATION_CLAUSES-584C52BC">application_clauses :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-1C529AF8-2990-4619-A1C3-FA54DD868857"><span class="italic">database_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-86F041CB-80C2-44F9-A66E-17F14790975F"><img src="img/database_clause.gif" alt="下面是database_clause.eps的描述" title="下面是database_clause.eps的描述" longdesc="img_text/database_clause.html"><br><a href="img_text/database_clause.html">插图描述database_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHGFBEG">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-70B1674B-D045-4AA4-9003-82160547B734"><span class="italic">pdb_unplug_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-25809DE8-3B78-411F-8572-0524D803C745"><img src="img/pdb_unplug_clause.gif" alt="下面是pdb_unplug_clause.eps的描述" title="下面是pdb_unplug_clause.eps的描述" longdesc="img_text/pdb_unplug_clause.html"><br><a href="img_text/pdb_unplug_clause.html">说明pdb_unplug_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-E5D3C75A-91F5-4E45-8FB3-86787D9AC22E"><span class="italic">pdb_unplug_encrypt</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-B2E9DC39-966E-4452-9E51-25348F686049"><img src="img/pdb_unplug_encrypt.gif" alt="下面是pdb_unplug_encrypt.eps的说明" title="下面是pdb_unplug_encrypt.eps的说明" longdesc="img_text/pdb_unplug_encrypt.html"><br><a href="img_text/pdb_unplug_encrypt.html">说明pdb_unplug_encrypt.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHCEIGC">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-850A88C0-2D27-4418-B894-C0E6962EB877"><span class="italic">pdb_settings_clauses</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-167D7864-0729-48FB-B18B-0EED2DF3F28C"><img src="img/pdb_settings_clauses.gif" alt="下面是pdb_settings_clauses.eps的说明" title="下面是pdb_settings_clauses.eps的说明" longdesc="img_text/pdb_settings_clauses.html"><br><a href="img_text/pdb_settings_clauses.html">说明pdb_settings_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2208406">set_time_zone_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2082829">database_file_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2208261">supplemental_db_logging :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHJICCH">pdb_storage_clause :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBBECGG">pdb_logging_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__PDB_REFRESH_MODE_CLAUSE-532EAA89">pdb_refresh_mode_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHJICCH">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-9933A056-D1F4-4063-931D-1CDE9AD81E47"><span class="italic">pdb_storage_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-9B9FC76C-8E09-4864-879B-524E580722D3"><img src="img/pdb_storage_clause.gif" alt="下面是pdb_storage_clause.eps的说明" title="下面是pdb_storage_clause.eps的说明" longdesc="img_text/pdb_storage_clause.html"><br><a href="img_text/pdb_storage_clause.html">说明pdb_storage_clause.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517__CHDEAIID">size_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBBECGG">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-674B1BBE-741C-432A-86E8-70A671A23549"><span class="italic">pdb_logging_clauses</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-B04E4C89-06B6-4FB6-9704-F77C6C99C860"><img src="img/pdb_logging_clauses.gif" alt="下面是pdb_logging_clauses.eps的说明" title="下面是pdb_logging_clauses.eps的说明" longdesc="img_text/pdb_logging_clauses.html"><br><a href="img_text/pdb_logging_clauses.html">说明pdb_logging_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-85ECD166-1FBE-4C3D-98C9-E7AF51FBCCC6"><span class="italic">logging_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-900CE98A-45B7-4FB2-BF39-C2A830B7B1C0"><img src="img/logging_clause.gif" alt="logging_clause.eps的描述如下" title="logging_clause.eps的描述如下" longdesc="img_text/logging_clause.html"><br><a href="img_text/logging_clause.html">说明logging_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-287BC391-1015-48C9-A677-5CE4E9A45052"><span class="italic">pdb_force_logging_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-5E78A2D2-0EF6-42CB-A0DD-8CC22BDFB4F4"><img src="img/pdb_force_logging_clause.gif" alt="下面是pdb_force_logging_clause.eps的说明" title="下面是pdb_force_logging_clause.eps的说明" longdesc="img_text/pdb_force_logging_clause.html"><br><a href="img_text/pdb_force_logging_clause.html">说明pdb_force_logging_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__PDB_REFRESH_MODE_CLAUSE-532EAA89">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-00BC3E5C-BA33-4E23-B798-185B4C4176DA"><span class="italic">pdb_refresh_mode_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-4E410E73-E79D-43E4-8B24-CAD9CF2C03C9"><img src="img/pdb_refresh_mode_clause.gif" alt="下面是pdb_refresh_mode_clause.eps的描述" title="下面是pdb_refresh_mode_clause.eps的描述" longdesc="img_text/pdb_refresh_mode_clause.html"><br><a href="img_text/pdb_refresh_mode_clause.html">插图描述pdb_refresh_mode_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-8466DA99-0C41-4E53-BF3F-DFDB3D4575FA"><span class="italic">pdb_refresh_switchover_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-231F0E9F-803B-4081-A5C0-31329F7EC332"><img src="img/pdb_refresh_switchover_clause.gif" alt="下面是pdb_refresh_switchover_clause.eps的描述" title="下面是pdb_refresh_switchover_clause.eps的描述" longdesc="img_text/pdb_refresh_switchover_clause.html"><br><a href="img_text/pdb_refresh_switchover_clause.html">插图描述pdb_refresh_switchover_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHHEJFH">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-03A73AA7-4E3F-412E-B75B-B41D5E032BE9"><span class="italic">pdb_datafile_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-81F184E1-7878-4039-9EE8-116F9705CE57"><img src="img/pdb_datafile_clause.gif" alt="下面是pdb_datafile_clause.eps的描述" title="下面是pdb_datafile_clause.eps的描述" longdesc="img_text/pdb_datafile_clause.html"><br><a href="img_text/pdb_datafile_clause.html">说明pdb_datafile_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHDJFHH">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-FC5F5C25-FF18-49AA-8F6D-4AF699EEF9EE"><span class="italic">pdb_recovery_clauses</span></p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-28D67A2E-F583-45E8-9CA2-C04313772B01"><img src="img/pdb_recovery_clauses.gif" alt="下面是pdb_recovery_clauses.eps的描述" title="下面是pdb_recovery_clauses.eps的描述" longdesc="img_text/pdb_recovery_clauses.html"><br><a href="img_text/pdb_recovery_clauses.html">说明pdb_recovery_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-F4D02F2C-92BB-45A3-B672-3859D116C3CA"><span class="italic">pdb_general_recovery</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-204481CC-A4D4-4C67-8CA0-BCABA690A154"><img src="img/pdb_general_recovery.gif" alt="下面是pdb_general_recovery.eps的描述" title="下面是pdb_general_recovery.eps的描述" longdesc="img_text/pdb_general_recovery.html"><br><a href="img_text/pdb_general_recovery.html">说明pdb_general_recovery.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHJEAIE">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-BDC8F039-0407-44FA-87C3-BB7B00A2CE02"><span class="italic">pdb_change_state</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-84B4B7C6-17E8-4097-9FB0-0C1A7A7486A0"><img src="img/pdb_change_state.gif" alt="下面是pdb_change_state.eps的描述" title="下面是pdb_change_state.eps的描述" longdesc="img_text/pdb_change_state.html"><br><a href="img_text/pdb_change_state.html">说明pdb_change_state.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHGJJHH">pdb_open :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHEBEAF">pdb_close :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBEFGGC">pdb_save_or_discard_state :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHGJJHH">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-DEB1D4AC-84DB-43F8-B1D9-E6F67A17C6FF"><span class="italic">pdb_open</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-05B2600C-312C-4BB5-A151-AE2F814A8219"><img src="img/pdb_open.gif" alt="下面是pdb_open.eps的描述" title="下面是pdb_open.eps的描述" longdesc="img_text/pdb_open.html"><br><a href="img_text/pdb_open.html">说明pdb_open.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-F6727DCA-A8DE-474D-B06E-CD87D62E1CCE"><span class="italic">instances_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-4FC352B9-F34B-47EA-9767-DA1824C2EFB0"><img src="img/instances_clause.gif" alt="下面是instances_clause.eps的描述" title="下面是instances_clause.eps的描述" longdesc="img_text/instances_clause.html"><br><a href="img_text/instances_clause.html">插图描述instances_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHEBEAF">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-696847DB-07B0-4938-B16E-58C3DFBFCAE8"><span class="italic">pdb_close</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-4936E5BE-08C7-4308-9D15-04717A36F980"><img src="img/pdb_close.gif" alt="下面是pdb_close.eps的描述" title="下面是pdb_close.eps的描述" longdesc="img_text/pdb_close.html"><br><a href="img_text/pdb_close.html">说明pdb_close.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-48A55B9F-FF8B-4921-BAF9-474F12F38DA1"><span class="italic">relocate_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-863D3700-5850-413B-A76B-038A43766B66"><img src="img/relocate_clause.gif" alt="下面是relocate_clause.eps的描述" title="下面是relocate_clause.eps的描述" longdesc="img_text/relocate_clause.html"><br><a href="img_text/relocate_clause.html">说明relocate_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBEFGGC">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-54021568-04E2-4C5D-9F31-AC7368D7F880"><span class="italic">pdb_save_or_discard_state</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-E2614140-F82A-4CC1-B9F6-5F48565DDACB"><img src="img/pdb_save_or_discard_state.gif" alt="下面是pdb_save_or_discard_state.eps的描述" title="下面是pdb_save_or_discard_state.eps的描述" longdesc="img_text/pdb_save_or_discard_state.html"><br><a href="img_text/pdb_save_or_discard_state.html">插图描述pdb_save_or_discard_state.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHBBCHH">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-4CA6EE77-D584-4B21-9AD1-F3A79838DF60"><span class="italic">pdb_change_state_from_root</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-C3AC2F9B-C525-4053-88E7-E08FA19D911B"><img src="img/pdb_change_state_from_root.gif" alt="下面是pdb_change_state_from_root.eps的描述" title="下面是pdb_change_state_from_root.eps的描述" longdesc="img_text/pdb_change_state_from_root.html"><br><a href="img_text/pdb_change_state_from_root.html">说明pdb_change_state_from_root.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHGJJHH">pdb_open :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHEBEAF">pdb_close :: =</a></span> ， <span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBEFGGC">pdb_save_or_discard_state :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__APPLICATION_CLAUSES-584C52BC">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-DB4C33A9-A546-4735-9FB2-EDDCDFEED6BD"><span class="italic">application_clauses</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-32D52D46-3551-43BF-B68B-955700832333"><img src="img/application_clauses.gif" alt="application_clauses.eps的描述如下" title="application_clauses.eps的描述如下" longdesc="img_text/application_clauses.html"><br><a href="img_text/application_clauses.html">插图application_clauses.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__SNAPSHOT_CLAUSES-39F5056E"><span class="italic">snapshot_clauses</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-CD9206F7-BA0E-4DC3-BA5E-9B6631096AA0"><img src="img/snapshot_clauses.gif" alt="下面是snapshot_clauses.eps的描述" title="下面是snapshot_clauses.eps的描述" longdesc="img_text/snapshot_clauses.html"><br><a href="img_text/snapshot_clauses.html">说明snapshot_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-A186C988-BED6-4BE2-8167-B6721B806ABF"><span class="italic">pdb_snapshot_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-4BDC1328-B5B2-4535-A3DB-2D6E6F4A3048"><img src="img/pdb_snapshot_clause.gif" alt="下面是pdb_snapshot_clause.eps的说明" title="下面是pdb_snapshot_clause.eps的说明" longdesc="img_text/pdb_snapshot_clause.html"><br><a href="img_text/pdb_snapshot_clause.html">插图描述pdb_snapshot_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-521433E3-AEE6-4924-BE44-40234AC31FD0"><span class="italic">materialize_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-E7B97612-4B1B-4178-A41E-011BF6086EB1"><img src="img/materialize_clause.gif" alt="materialize_clause.eps的描述如下" title="materialize_clause.eps的描述如下" longdesc="img_text/materialize_clause.html"><br><a href="img_text/materialize_clause.html">materialise_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-F9B7DDD4-79DD-4CD0-B00E-1D0DBCC8965A"><span class="italic">create_snapshot_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-D62472EA-2004-4313-A2BB-4D75CC59FD59"><img src="img/create_snapshot_clause.gif" alt="下面是create_snapshot_clause.eps的描述" title="下面是create_snapshot_clause.eps的描述" longdesc="img_text/create_snapshot_clause.html"><br><a href="img_text/create_snapshot_clause.html">说明create_snapshot_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-107195BC-A0F9-456E-8A64-DF7290F6989A"><span class="italic">drop_snapshot_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-11E6A9EB-2C64-4A38-867F-747635FB9845"><img src="img/drop_snapshot_clause.gif" alt="drop_snapshot_clause.eps的描述如下" title="drop_snapshot_clause.eps的描述如下" longdesc="img_text/drop_snapshot_clause.html"><br><a href="img_text/drop_snapshot_clause.html">drop_snapshot_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-E1F08EB8-7E10-40F7-BECA-88D1F302BB56"><span class="italic">set_max_pdb_snapshots</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-07C8FEB7-D5C1-4F00-AA20-1A75AF1034AF"><img src="img/set_max_pdb_snapshots_clause.gif" alt="下面是set_max_pdb_snapshots_clause.eps的说明" title="下面是set_max_pdb_snapshots_clause.eps的说明" longdesc="img_text/set_max_pdb_snapshots_clause.html"><br><a href="img_text/set_max_pdb_snapshots_clause.html">插图描述set_max_pdb_snapshots_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-C162BC89-7884-4C71-8701-23D5D909A858"><span class="italic">prepare_clause</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-22E8B058-2AC7-445E-882C-F90E531CA3DF"><img src="img/prepare_clause.gif" alt="下面是prepare_clause.eps的描述" title="下面是prepare_clause.eps的描述" longdesc="img_text/prepare_clause.html"><br><a href="img_text/prepare_clause.html">说明prepare_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-50B0CA01-684D-473E-B7C6-CCCE63CB0847"><span class="italic">drop_mirror_copy</span> :: =</p>
                  <div class="figure" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-039A4DE3-E445-4123-9873-7F067A2461F3"><img src="img/drop_mirror_copy.gif" alt="drop_mirror_copy.eps的描述如下" title="drop_mirror_copy.eps的描述如下" longdesc="img_text/drop_mirror_copy.html"><br><a href="img_text/drop_mirror_copy.html">说明drop_mirror_copy.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-3493F798-3C77-4C74-B5C8-21F246CD3AD8"><span class="italic">lost_write_protection</span> :: =</p>
                  <p>对于使用<code class="codeph">lost_write_protection</code>与条款<code class="codeph">ALTER PLUGGABLE DATABASE</code>声明是相同的<code class="codeph">ALTER DATABASE</code>语句。在这里查看<a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986">ALTER DATABASE</a>以获取语法详细信息。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-ED6FA9B1-003B-4A35-ABAA-E09082F656ED">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__DATABASE_CLAUSE-34B400B4"><span class="italic">database_clause</span></p>
                  <p>为容器数据库指定<code class="codeph">PLUGGABLE DATABASE</code>选项。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-4A80FEA2-401D-48B4-9090-FEDEF7FE62D5"><span class="italic">pdb_name</span></p><a id="d241038e862" class="indexterm-anchor"></a><p>指定要更改的数据库的名称。如果省略<span class="italic"><code class="codeph">db_name</code></span> ，则Oracle数据库会更改由初始化参数<code class="codeph">DB_NAME</code>的值标识的数据库。您只能更改控制文件由初始化参数<code class="codeph">CONTROL_FILES</code>指定的数据库。数据库标识符与Oracle Net数据库规范无关。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__PDB_UNPLUG_CLAUSEPDBSUNPLUGGING-2AEE4D78">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-A15880E2-7B0D-4D15-B2F8-ECAD75BB9D11"><span class="italic">pdb_unplug_clause</span></p>
                  <p><a id="d241038e886" class="indexterm-anchor"></a>此子句允许您从CDB中拔出PDB。拔出PDB时，Oracle会将有关PDB的信息存储在操作系统的文件中。您随后可以使用此文件将PDB插入CDB。</p>
                  <p>对于<span class="italic"><code class="codeph">pdb_name</code></span> ，请指定要拔出的PDB的名称。必须关闭PDB  - 即打开模式必须是<code class="codeph">MOUNTED</code> 。在Oracle Real Application Clusters（Oracle RAC）环境中，必须在所有Oracle RAC实例中关闭PDB</p>
                  <p>对于<span class="italic"><code class="codeph">filename</code></span> ，请指定用于存储有关PDB的信息的操作系统文件的完整路径名。您指定的文件名确定存储的信息类型及其存储方式。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定以扩展名.xml结尾的文件名，则Oracle会创建包含有关PDB的元数据的XML文件。然后，您可以将XML文件和PDB的数据文件复制到新位置，并在将PDB插入CDB时指定XML文件名。在这种情况下，您必须单独复制PDB的数据文件。</p>
                     </li>
                     <li>
                        <p>如果指定以扩展名.pdb结尾的文件名，则Oracle会创建.pdb存档文件。这是一个压缩文件，其中包含一个XML文件，其中包含有关PDB的元数据以及PDB的数据文件。然后，您可以将此单个存档文件复制到新位置，并在将PDB插入CDB时指定存档文件名。这消除了必须单独复制PDB的数据文件。当您插入PDB时使用.pdb存档文件时，在插入PDB时会解压缩此文件，并且PDB的文件与.pdb存档文件放在同一目录中。</p>
                     </li>
                  </ul>
                  <p>拔出PDB后，它将保留在CDB中，其打开模式为<code class="codeph">MOUNTED</code> ，状态为<code class="codeph">UNPLUGGED</code> 。您可以在未插入的PDB上执行的唯一操作是<code class="codeph">DROP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> ，它将从CDB中删除它。您必须先删除PDB，然后才能将其插入相同的CDB或其他CDB。</p>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-F19225A1-A477-4E1A-A9B6-EC1119C6E180">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关拔出PDB的详细信息，请参见<a href="../multi/removing-a-pdb.html#ADMIN13623" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                        <li>
                           <p>有关将PDB插入CDB的信息，请<code class="codeph">PLUGGABLE</code> <code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>的<span class="italic"><a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC__CACJHJFE">create_pdb_from_xml</a></span>子句</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-355DFF5A-D5DD-439E-AE7E-7793F90E2042"><span class="italic">pdb_unplug_encrypt</span></p>
                  <p>您必须具有<code class="codeph">SYSKM</code>权限才能执行此命令。
                  </p>
                  <p><span class="bold">联合PDB</span></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPT USING transport_secret</code>是可选的。
                        </p>
                     </li>
                     <li>
                        <p>如果正在使用TDE，则必须指定此子句。如果未使用TDE，则语句将引发以下错误<code class="codeph">ORA-46680:master keys of the container database must be exported.</code></p>
                     </li>
                     <li>
                        <p>如果正在使用TDE，则必须在<code class="codeph">ROOT</code>打开钱包。
                        </p>
                     </li>
                     <li>
                        <p>密钥使用提供的<span class="italic"><code class="codeph">transport secret</code></span>密钥加密并导出到<code class="codeph">.XML</code>或存档文件</p>
                     </li>
                  </ul>
                  <p><span class="bold">将PDB插入XML元数据文件：示例</span></p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE CDB1_PDB2 UNPLUG INTO'/tmp/cdb1_pdb2.xml'ENCRYPT使用transport_secret</pre><p><span class="bold">将PDB插入存档文件：示例</span></p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE CDB1_PDB1_1 UNPLUG INTO'/ tmp / CDB1_PDB1_1.pdb'加密使用transport_secret</pre><p>对于处于<span class="bold">隔离</span>模式的PDB，您无需指定<code class="codeph">ENCRYPT USING transport_secret</code> 。这不是必需的，因为在从XML文件创建可插拔数据库期间复制PDB的钱包文件。如果您将PDB作为存档文件拔出，则PDB的钱包文件将添加到带有<code class="codeph">.pdb</code>扩展名的压缩存档中。
                  </p>
                  <p>如果<code class="codeph">ewallet.p12</code>文件已存在于目标位置，则会自动启动备份。备份文件具有以下格式： <code class="codeph">ewallet_PLGDB_2017090517455564.p12</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-9A30C5E5-1BE0-41F8-9657-C903EF560FF6"><span class="italic">pdb_settings_clauses</span></p>
                  <p>这些子句允许您修改PDB的各种设置。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-34AFAC13-3264-4474-AEAF-AA0B59DCA123"><span class="italic">pdb_name</span></p>
                  <p>您可以选择使用<span class="italic"><code class="codeph">pdb_name</code></span>指定要修改其设置的PDB的名称。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-94ADC8B5-EF72-44EC-AA15-55B890F23139">默认版条款</p>
                  <p><a id="d241038e1043" class="indexterm-anchor"></a><a id="d241038e1047" class="indexterm-anchor"></a>使用此子句将指定版本指定为PDB的默认版本。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="q">“ <a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__BABEADGC">DEFAULT EDITION子句</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-23F7D850-3E44-414F-9821-EB7052E86FC4">SET DEFAULT TABLESPACE子句</p>
                  <p>使用此子句指定或更改随后在PDB中创建的表空间的默认类型。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="q">“ <a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__BGBDJGGH">SET DEFAULT TABLESPACE子句</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-C397B808-44C6-48AB-926D-2DFEA4602B13">DEFAULT TABLESPACE条款</p>
                  <p><a id="d241038e1081" class="indexterm-anchor"></a>使用此子句可以建立或更改PDB的默认永久表空间。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="q">“ <a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__BGBIJBIC">DEFAULT TABLESPACE子句</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-67D28168-84FE-41D8-803A-54B36F75E1B2">默认的临时表格条款</p>
                  <p><a id="d241038e1101" class="indexterm-anchor"></a>使用此子句将PDB的默认临时表空间更改为新的表空间或表空间组。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="q">“ <a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__BGBEIJJD">DEFAULT [LOCAL] TEMPORARY TABLESPACE子句</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-A79BA575-F8E8-4940-995B-F2F3292BE4FB">重命名GLOBAL_NAME TO Clause</p>
                  <p><a id="d241038e1120" class="indexterm-anchor"></a><a id="d241038e1124" class="indexterm-anchor"></a>使用此子句可以更改PDB的全局名称。新的全局名称在CDB中必须是唯一的。对于Oracle Real Application Clusters（Oracle RAC）数据库，PDB必须仅在当前实例上以<code class="codeph">READ</code> <code class="codeph">WRITE</code> <code class="codeph">RESTRICTED</code>模式打开。必须在所有其他实例上关闭PDB。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="q">“ <a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2141769">RENAME GLOBAL_NAME子句</a> ”</span> 。
                  </p>
                  <div class="infoboxnote" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-C2C71E68-0C1A-4224-9C7E-500608ACC797">
                     <p class="notep1">注意：</p>
                     <p>更改PDB的全局名称时，请确保更改用于连接到PDB的数据库服务的<code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>属性。</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-EBB8D282-A747-4EC7-9374-07575D03260B"><span class="italic">set_time_zone_clauses</span></p>
                  <p><a id="d241038e1165" class="indexterm-anchor"></a><a id="d241038e1169" class="indexterm-anchor"></a>使用此子句可以修改PDB的时区设置。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2197908">set_time_zone_clause</a></span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-53659FD2-748C-4B3D-9700-1E39880A607A"><span class="italic">database_file_clauses</span></p>
                  <p><a id="d241038e1189" class="indexterm-anchor"></a><a id="d241038e1193" class="indexterm-anchor"></a>使用此子句可以修改PDB的数据文件和临时文件。有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2078824">database_file_clauses</a></span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-46E5CAE2-3758-4BF1-A584-D5279A90D85A"><span class="italic">supplemental_db_logging</span></p>
                  <p>使用这些子句指示Oracle数据库添加或停止将补充数据添加到PDB的日志流中。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code>子句以将补充数据添加到PDB的日志流中。为了发布此子句，必须使用<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>为CDB根启用补充日志记录...<code class="codeph">ADD</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code> ...声明。您为PDB指定的补充日志记录级别不需要与CDB根目录的级别相匹配。也就是说，无论在为CDB根启用补充日志记录时指定了哪个子句，都可以为PDB指定任何子句<code class="codeph">DATA</code> ， <code class="codeph"><span class="codeinlineitalic">supplemental_id_key_clause</span></code>或<code class="codeph"><span class="codeinlineitalic">supplemental_plsql_clause</span></code> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">DROP</code> <code class="codeph">SUPPLEMENTAL</code> <code class="codeph">LOG</code>子句以停止将补充数据添加到PDB的日志流中。</p>
                     </li>
                  </ul>
                  <p><span class="bold">添加</span> <code class="codeph">ALTER PLUGGABLE DATABASE</code> <span class="bold">补充日志数据子集数据库复制</span>可以在PDB上实现低影响最小补充日志记录。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您只能在可插拔数据库上执行此DDL。</p>
                     </li>
                     <li>
                        <p>仅当<span class="italic"><code class="codeph">enable_goldengate_replication</code></span>参数为TRUE且数据库兼容性为19.0或更高版本时，才能执行此DDL。
                        </p>
                     </li>
                     <li>
                        <p>您必须在<code class="codeph">CDB$ROOT</code>启用最少的补充日志记录才能运行此命令。
                        </p>
                     </li>
                     <li>
                        <p>执行此DDL后，最小的补充日志记录将对可插拔数据库产生低影响。将更新<code class="codeph">SYS.PROP$</code>以指示在此可插拔数据库的PDB级别启用了低影响最小补充日志记录。
                        </p>
                     </li>
                  </ul>
                  <p><code class="codeph">ALTER PLUGGABLE DATABASE</code> <span class="bold">DROP SUPPLEMENTAL LOG DATA SUBSET DATABASE REPLICATION</span>禁用PDB上的低影响最小补充日志记录。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您只能在可插拔数据库上执行此DDL。</p>
                     </li>
                     <li>
                        <p>仅当<span class="italic"><code class="codeph">enable_goldengate_replication</code></span>参数为TRUE且数据库兼容性为19.0或更高版本时，才能执行此DDL。
                        </p>
                     </li>
                     <li>
                        <p>您必须在<code class="codeph">CDB$ROOT</code>启用最少的补充日志记录才能运行此命令。
                        </p>
                     </li>
                     <li>
                        <p>执行此命令后，最小补充日志记录将对可插拔数据库产生较小影响。将更新<code class="codeph">SYS.PROP$</code>以指示在此可插拔数据库的PDB级别禁用子集数据库复制的补充日志记录。如果还在<code class="codeph">CDB$ROOT</code> （CDB级别）禁用子集数据库复制的补充日志记录，则将对此可插入数据库禁用低影响最小补充日志记录。
                        </p>
                     </li>
                  </ul>
                  <p>有关此子句的完整语义，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>文档中的<span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2153841">supplemental_db_logging</a></span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-B5FB8D98-7856-4661-B3FF-CF9A26F79BC2"><span class="italic">pdb_storage_clause</span></p>
                  <p><a id="d241038e1346" class="indexterm-anchor"></a><a id="d241038e1352" class="indexterm-anchor"></a>使用此子句可以修改PDB的存储限制。</p>
                  <p>此子句与<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>文档中的<span class="italic"><a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC__CACJAAGI">pdb_storage_clause</a></span>具有相同的语义，并添加了以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">MAXSIZE</code> <span class="italic"><code class="codeph">size_clause</code></span> ，则为<span class="italic"><code class="codeph">size_clause</code></span>指定的值必须大于或等于属于PDB的现有表空间的总大小。否则，会发生错误。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">MAX_AUDIT_SIZE</code> <span class="italic"><code class="codeph">size_clause</code></span> ，那么你指定的值<span class="italic"><code class="codeph">size_clause</code></span>必须大于或等于存储的由现有的统一审计OS溢出（使用量<code class="codeph">.bin</code>格式）文件的PDB。否则，会发生错误。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">MAX_DIAG_SIZE</code> <span class="italic"><code class="codeph">size_clause</code></span> ，那么你指定的值<span class="italic"><code class="codeph">size_clause</code></span>必须大于或等于存储在当前使用的PDB自动诊断信息库（ADR）诊断的量。否则会发生错误。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-F230E590-19AC-40C2-87AB-89AF63CE9A8C"><span class="italic">pdb_logging_clauses</span></p>
                  <p>使用这些子句设置或更改PDB的日志记录特征。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBDDAGI">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-FCD2423D-BBDC-476A-8645-0AB902E52FE1"><span class="italic">logging_clause</span></p>
                  <p>使用此子句更改随后在PDB中创建的表空间的缺省日志记录属性。此子句与<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>文档中的<span class="italic"><a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC__CACJIEBE">logging_clause</a></span>具有相同的语义。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-0B092061-7AA3-4407-91F4-2387DC9E0D20"><span class="italic">pdb_force_logging_clause</span></p>
                  <p>使用此子句将PDB放入或取出四种日志记录模式之一。</p>
                  <p>强制日志记录模式指示数据库记录PDB中的所有更改，但临时表空间和临时段中的更改除外。强制nologging模式指示数据库不记录PDB中的任何更改。</p>
                  <p>备用nologging指示数据库不记录有资格在没有记录的情况下完成的操作。数据库将操作创建的数据块发送到Data Guard配置中的每个合格备用数据库，通常会导致那些备用数据库没有无效块。</p>
                  <p>CDB范围的强制记录模式优先于任何其他设置。PDB级别强制日志记录模式和强制nologging模式优先于您为PDB中的各个表空间指定的任何<code class="codeph">LOGGING</code> ， <code class="codeph">NOLOGGING</code>或<code class="codeph">FORCE</code> <code class="codeph">LOGGING</code>设置，以及您为PDB中的各个数据库对象指定的任何<code class="codeph">LOGGING</code>或<code class="codeph">NOLOGGING</code>设置。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">ENABLE</code> <code class="codeph">FORCE</code> <code class="codeph">LOGGING</code>以将PDB置于强制日志记录模式。如果PDB当前处于强制nologging模式，则指定此子句会导致错误。您必须先指定<code class="codeph">DISABLE</code> <code class="codeph">FORCE</code> <code class="codeph">NOLOGGING</code> 。</p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">DISABLE</code> <code class="codeph">FORCE</code> <code class="codeph">LOGGING</code>以使PDB退出强制记录模式。如果PDB当前未处于强制日志记录模式，则指定此子句会导致错误。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ENABLE</code> <code class="codeph">FORCE</code> <code class="codeph">NOLOGGING</code>以将PDB置于强制nologging模式。如果PDB当前处于强制日志记录模式，则指定此子句会导致错误。您必须先指定<code class="codeph">DISABLE</code> <code class="codeph">FORCE</code> <code class="codeph">LOGGING</code> 。即使CDB具有备用nologging模式集，非记录操作也将使用经典的失效重做。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">DISABLE</code> <code class="codeph">FORCE</code> <code class="codeph">NOLOGGING</code>以使PDB无法使用nologging模式。如果PDB当前不是有效的nologging模式，则指定此子句会导致错误。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">SET STANDBY NOLOGGING FOR LOAD PERFORMANCE</code>以将PDB置于备用nologging以进行负载性能模式。在此模式下，作为未记录任务的一部分加载的数据将通过专用网络连接发送到符合条件的备用数据库，前提是这样做不会减慢加载过程的速度。如果发生减速，则不会发送数据，而是在每个备用数据库遇到无效重做时自动从主数据中获取数据，并将重试直到最终收到数据块。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">SET STANDBY NOLOGGING FOR DATA AVAILABILITY</code>将PDB置于数据可用性模式的备用nologging。在此模式下，作为未记录任务的一部分加载的数据将通过网络连接发送到符合条件的备用数据库，或者如果失败，则通过重做中的块映像发送到符合条件的备用数据库。也就是说，在这种模式下，如果网络连接或相关进程阻止通过专用网络连接发送数据，则负载将切换为以记录方式完成。
                        </p>
                     </li>
                  </ul>
                  <p>对于备用nologging模式，合格备用数据库是一个打开以进行读取，运行管理恢复以及将重做接收到备用重做日志的备用数据库。</p>
                  <p>该子句不会更改<span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBDDAGI">logging_clause</a></span>指定的PDB的默认<code class="codeph">LOGGING</code>或<code class="codeph">NOLOGGING</code>模式。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__PDB_REFRESH_MODE_CLAUSE-531D291C">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-55B10EED-F551-4602-B192-B2E4C847F0B6"><span class="italic">pdb_refresh_mode_clause</span></p>
                  <p>使用此子句可以更改PDB的刷新模式。您只能为可刷新的PDB指定此子句，即当前刷新模式为<code class="codeph">MANUAL</code>或<code class="codeph">EVERY</code> <span class="italic"><code class="codeph">refresh_interval</code></span> <code class="codeph">MINUTES</code>或<code class="codeph">HOURS</code>的PDB。您可以将PDB从手动刷新切换到自动刷新，或从自动刷新切换到手动刷新。您还可以使用此子句更改自动刷新之间的分钟数。您可以将PDB从手动或自动刷新切换为无刷新，但无法为不可刷新的PDB启用手动或自动刷新。对于这个条款的完整的语义，请参阅<a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC__PDB_REFRESH_MODE_CLAUSE-2C9E58C3">pdb_refresh_mode_clause</a>在文档中<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__REFRESH-2AECEDD3">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-D667E30A-B335-43E6-A719-8F43D78E98AA">REFRESH</p>
                  <p>指定此子句以执行可刷新PDB的手动刷新，即当前刷新模式为<code class="codeph">MANUAL</code>或<code class="codeph">EVERY</code> <span class="italic"><code class="codeph">number</code></span> <code class="codeph">MINUTES</code>的PDB。必须关闭PDB。有关刷新PDBS的更多信息，请参阅<a href="CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC__PDB_REFRESH_MODE_CLAUSE-2C9E58C3">pdb_refresh_mode_clause</a>在文档中<code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-8E469199-50EE-43D9-973B-2B580A7610A7"><span class="italic">pdb_refresh_switchover_clause</span></p>
                  <p>使用此子句可以反转可刷新克隆PDB和主PDB之间的角色。此子句使可刷新克隆PDB成为主PDB，可以在读写模式下打开。前主要PDB成为可刷新的克隆..</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>必须从主PDB执行此命令。</p>
                     </li>
                     <li>
                        <p>发出此声明时，可能不会指定<code class="codeph">REFRESH MODE NONE</code> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">dblink</code>应指向可刷新克隆PDB当前所在的CDB的根。
                        </p>
                     </li>
                     <li>
                        <p>执行此操作后，当前PDB将成为可刷新克隆，并且只能在READ ONLY模式下打开。</p>
                     </li>
                     <li>
                        <p>如果可刷新克隆存在于不同的CDB中，则数据库链接用户必须存在于主PDB中。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-7AD4AD4A-FF14-4E46-BE02-BFFE502D51D9">SET CONTAINER_MAP</p>
                  <p>使用此子句指定应用程序容器的<code class="codeph">CONTAINER_MAP</code>数据库属性。当前容器必须是应用程序根目录。<span class="italic"><code class="codeph">map_object</code></span>的形式为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">table</code></span> 。对于<span class="italic"><code class="codeph">schema</code></span> ，请指定包含<span class="italic"><code class="codeph">table</code></span>的模式。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则数据库假定该表位于您自己的模式中。对于<span class="italic"><code class="codeph">table</code></span> ，请指定范围，列表或散列分区表。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-F9BC9C1E-E04B-4847-B1B4-8842E27EA019">集装箱默认目标</p>
                  <p>使用此子句指定应用程序容器中DML语句的默认容器。您必须连接到应用程序根目录。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">container_name</code></span> ，请指定默认容器的名称。默认容器可以是应用程序容器中的任何容器，包括应用程序根目录或应用程序PDB。您只能指定一个默认容器。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">NONE</code> ，则默认容器是CDB根。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <p>在应用程序根目录中发出DML语句而不在<code class="codeph">WHERE</code>子句中指定容器时，DML语句会影响应用程序容器的默认容器。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-0D45EBCB-5B63-42CD-87FC-9F4A5F47BAF3"><span class="italic">pdb_datafile_clause</span></p>
                  <p>此子句允许您将与PDB关联的数据文件联机或使其脱机。发布此条款时，必须关闭PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">pdb_name</code></span> ，请指定PDB的名称。如果当前容器是PDB，则可以省略<span class="italic"><code class="codeph">pdb_name</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DATAFILE</code>子句允许您指定要联机或脱机的数据文件。使用<span class="italic"><code class="codeph">filename</code></span>或<span class="italic"><code class="codeph">filenumber</code></span>按名称或编号标识特定数据文件。您可以通过查询<code class="codeph">V$DATAFILE</code>动态性能视图的<code class="codeph">NAME</code>和<code class="codeph">FILE#</code>列来查看数据文件名和数字。使用<code class="codeph">ALL</code>指定与PDB关联的所有数据文件。</p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ONLINE</code>以使数据文件联机或<code class="codeph">OFFLINE</code>以使数据文件脱机。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-CD15BA43-6CBB-428E-B2C1-20F63D0AB319"><span class="italic">pdb_recovery_clauses</span></p>
                  <p>使用<span class="italic"><code class="codeph">pdb_recovery_clauses</code></span>备份和恢复PDB。</p>
                  <p><span class="bold"><span class="italic">pdb_name</span></span></p>
                  <p>您可以选择使用<span class="italic"><code class="codeph">pdb_name</code></span>指定要备份或恢复的PDB的名称。
                  </p>
                  <p><span class="bold"><span class="italic">pdb_general_recovery</span></span></p>
                  <p>此子句允许您控制PDB或备用数据库或指定表空间或文件的介质恢复。<span class="italic"><code class="codeph">general_recovery</code></span>子句与<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>的<span class="italic"><code class="codeph">pdb_general_recovery</code></span>子句具有相同的语义。有关更多信息，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>的<span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2208874">general_recovery</a></span>子句。
                  </p>
                  <p><span class="bold">备份条款</span><a id="d241038e1835" class="indexterm-anchor"></a></p>
                  <p>使用这些子句将PDB中的所有数据文件移入或移出在线备份模式（也称为热备份模式）。这些子句在<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code>和<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>具有相同的语义。有关更多信息，请参阅<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>的<span class="q">“ <a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2150230">BACKUP子句</a> ”</span> 。
                  </p>
                  <p><span class="bold">恢复条款</span><a id="d241038e1870" class="indexterm-anchor"></a></p>
                  <p>使用这些子句启用或禁用PDB以进行恢复。必须关闭PDB  - 即打开模式必须是<code class="codeph">MOUNTED</code> 。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">ENABLE</code> <code class="codeph">RECOVERY</code>以使属于PDB的所有数据文件联机并启用PDB进行恢复。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">DISABLE</code> <code class="codeph">RECOVERY</code>以使属于PDB的所有数据文件脱机并禁用PDB进行恢复。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-126A7EFA-D2BD-4E63-B2BC-5A4F96C861DF">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">RECOVERY</code>子句的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=SBYDB5261" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-DE6FFE76-2A04-43E1-A6BF-0899600DC541"><span class="italic">pdb_change_state</span></p>
                  <p><a id="d241038e1914" class="indexterm-anchor"></a><a id="d241038e1920" class="indexterm-anchor"></a>此子句使您可以更改PDB的状态或打开模式。 <a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHJEFGC" title="第一列列出了PDB打开模式，第二列列出了它们的描述。">表11-2</a>列出了PDB的开放模式。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<span class="italic"><code class="codeph">pdb_open</code></span>子句以将打开模式更改为<code class="codeph">READ</code> <code class="codeph">WRITE</code> ， <code class="codeph">READ</code> <code class="codeph">ONLY</code>或<code class="codeph">MIGRATE</code> 。</p>
                     </li>
                     <li>
                        <p>指定<span class="italic"><code class="codeph">pdb_close</code></span>子句更改开放模式<code class="codeph">MOUNTED</code> 。</p>
                     </li>
                  </ul>
                  <div class="tblformal" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHJEFGC">
                     <p class="titleintable">表11-2 PDB开放模式</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="PDB开放模式" width="100%" border="1" summary="This first column lists the PDB open modes and the second column lists their descriptions." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d241038e1974">开放模式</th>
                              <th align="left" valign="bottom" width="69%" id="d241038e1977">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d241038e1982" headers="d241038e1974 ">
                                 <p><code class="codeph">READ</code> <code class="codeph">WRITE</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d241038e1982 d241038e1977 ">
                                 <p>处于开放读/写模式的PDB允许查询和用户事务继续进行，并允许用户生成重做日志。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d241038e1993" headers="d241038e1974 ">
                                 <p><code class="codeph">READ</code> <code class="codeph">ONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d241038e1993 d241038e1977 ">
                                 <p>处于开放只读模式的PDB允许查询但不允许用户更改。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d241038e2004" headers="d241038e1974 ">
                                 <p><code class="codeph">迁移</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d241038e2004 d241038e1977 ">
                                 <p>当PDB处于打开迁移模式时，您可以在PDB上运行数据库升级脚本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d241038e2012" headers="d241038e1974 ">
                                 <p><code class="codeph">MOUNTED</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d241038e2012 d241038e1977 ">
                                 <p>当PDB处于安装模式时，它在安装模式下的行为类似于非CDB。它不允许更改任何对象，只有数据库管理员才能访问它。它无法读取或写入数据文件。从内存缓存中删除有关PDB的信息。PDB的冷备份是可能的。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>您可以通过查询<code class="codeph">V$PDBS</code>视图的<code class="codeph">OPEN_MODE</code>列来查看PDB的打开模式。
                  </p>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-B83953E1-E600-4FD9-AB13-0F00844C6A54">
                     <p class="notep1">也可以看看：</p>
                     <p>有关PDB打开模式的完整说明，请参见<a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN14090" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                  </div>
                  <p><span class="bold"><span class="italic">pdb_name</span></span></p>
                  <p>您可以选择使用<span class="italic"><code class="codeph">pdb_name</code></span>指定要更改其打开模式的PDB的名称。
                  </p>
                  <p id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__BGBBCHJH"><span class="bold"><span class="italic">pdb_open</span></span></p>
                  <p>此子句允许您将PDB的打开模式更改为<code class="codeph">READ</code> <code class="codeph">WRITE</code> ， <code class="codeph">READ</code> <code class="codeph">ONLY</code>或<code class="codeph">MIGRATE</code> 。指定此子句时，除非指定<code class="codeph">FORCE</code>关键字，否则PDB必须处于<code class="codeph">MOUNTED</code>模式。
                  </p>
                  <p>如果未指定<code class="codeph">READ</code> <code class="codeph">WRITE</code>或<code class="codeph">READ</code> <code class="codeph">ONLY</code> ，则默认为<code class="codeph">READ</code> <code class="codeph">WRITE</code> 。例外情况是PDB属于用作物理备用数据库的CDB，在这种情况下，默认值为<code class="codeph">READ</code> <code class="codeph">ONLY</code> 。</p>
                  <p><span class="bold">读写</span></p>
                  <p>指定此子句可将打开模式更改为<code class="codeph">READ</code> <code class="codeph">WRITE</code> 。</p>
                  <p><span class="bold">只读</span></p>
                  <p>指定此子句可将打开模式更改为<code class="codeph">READ</code> <code class="codeph">ONLY</code> 。</p>
                  <p><span class="bold">[READ WRITE] UPGRADE</span></p>
                  <p>指定此子句可将打开模式更改为<code class="codeph">MIGRATE</code> 。 <code class="codeph">READ</code> <code class="codeph">WRITE</code>关键字是可选的，并且是为了语义清晰度而提供的。
                  </p>
                  <p><span class="bold">受限</span></p>
                  <p>如果指定可选的<code class="codeph">RESTRICTED</code>关键字，则PDB只能由PDB中具有<code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>权限的用户访问。</p>
                  <p>如果PDB处于<code class="codeph">READ</code> <code class="codeph">WRITE</code>或<code class="codeph">READ</code> <code class="codeph">ONLY</code>模式，并且您在更改打开模式时指定了<code class="codeph">RESTRICTED</code>和<code class="codeph">FORCE</code>关键字，则终止连接到PDB但PDB中没有<code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>权限的所有会话及其事务回滚。
                  </p>
                  <p><span class="bold">力</span></p>
                  <p>指定此关键字可将PDB的打开模式从<code class="codeph">READ</code> <code class="codeph">WRITE</code>更改为<code class="codeph">READ</code> <code class="codeph">ONLY</code> ，或从<code class="codeph">READ</code> <code class="codeph">ONLY</code>更改为<code class="codeph">READ</code> <code class="codeph">WRITE</code> 。 <code class="codeph">FORCE</code>关键字允许用户在打开模式更改时保持与PDB的连接。
                  </p>
                  <p>当您指定<code class="codeph">FORCE</code>将PDB的打开模式从<code class="codeph">READ</code> <code class="codeph">WRITE</code>更改为<code class="codeph">READ</code> <code class="codeph">ONLY</code> ，不允许在更改打开模式时打开的任何<code class="codeph">READ</code> <code class="codeph">WRITE</code>事务执行任何更多DML操作或<code class="codeph">COMMIT</code> 。</p>
                  <p><span class="bold">对FORCE的限制</span></p>
                  <p>你不能指定<code class="codeph">FORCE</code>关键字，如果PDB目前在<code class="codeph">MIGRATE</code>模式下，你不能指定<code class="codeph">FORCE</code>关键字来改变当前打开的PDB到<code class="codeph">MIGRATE</code>模式。
                  </p>
                  <p><span class="bold">RESETLOGS</span></p>
                  <p>指定此子句以创建新的PDB化身，并在PDB的时间点恢复后以<code class="codeph">READ</code> <code class="codeph">WRITE</code>模式打开PDB。</p>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-39375349-68EF-4F3A-91AB-C5D0C0D9A130">
                     <p class="notep1">也可以看看：</p>
                     <p>有关执行CDB和PDB的时间点<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV640" target="_blank"><span class="italic">恢复的</span></a>详细信息，请参见<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV640" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                  </div>
                  <p id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHDCJCE"><span class="bold"><span class="italic">instances_clause</span></span></p>
                  <p>在Oracle Real Application Clusters环境中，使用此子句可以修改指定Oracle RAC实例中PDB的状态。如果省略此子句，则仅在当前实例中修改PDB的状态。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<span class="italic"><code class="codeph">instance_name</code></span>在括号中括起的逗号分隔列表中指定一个或多个实例名称。这仅在这些实例中修改PDB的状态。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ALL</code>以在所有实例中修改PDB的状态。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ALL</code> <code class="codeph">EXCEPT</code>以在除指定实例之外的所有实例中修改PDB的状态。
                        </p>
                     </li>
                  </ul>
                  <p>如果PDB已在一个或多个实例中打开，则可以在其他实例中打开它，但必须以与其已打开的实例相同的模式打开它。</p>
                  <p id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHFFJDB"><span class="bold"><span class="italic">pdb_close</span></span></p>
                  <p>此子句允许您将PDB的打开模式更改为<code class="codeph">MOUNTED</code> 。指定此子句时，PDB必须处于<code class="codeph">READ</code> <code class="codeph">WRITE</code> ， <code class="codeph">READ</code> <code class="codeph">ONLY</code>或<code class="codeph">MIGRATE</code>模式。此子句是SQL * Plus <code class="codeph">SHUTDOWN</code>命令的PDB等效项。
                  </p>
                  <p><span class="bold">即时</span></p>
                  <p>如果指定了可选的<code class="codeph">IMMEDIATE</code>关键字，则此子句是具有立即模式的SQL * Plus <code class="codeph">SHUTDOWN</code>命令的PDB等效项。否则，PDB将以正常模式关闭。
                  </p>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-39833A6E-5AEB-45E0-82AB-9F97536E7707">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../sqpug/SHUTDOWN.html#SQPUG125" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a>有关SQL * Plus <code class="codeph">SHUTDOWN</code>命令的更多信息</p>
                  </div>
                  <p><span class="bold"><span class="italic">instances_clause</span></span></p>
                  <p>在Oracle Real Application Clusters环境中，使用此子句可以修改指定Oracle RAC实例中PDB的状态。您可以在某些情况下关闭PDB，而在其他情况下将其保持打开状态。有关此子句的完整语义，请参阅<span class="italic"><a href="ALTER-PLUGGABLE-DATABASE.html#GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CCHDCJCE">instances_clause</a></span> 。
                  </p>
                  <p><span class="bold"><span class="italic">relocate_clause</span></span></p>
                  <p>在Oracle Real Application Clusters环境中，使用此子句指示数据库在其他Oracle RAC实例上重新打开PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">RELOCATE</code>以在Oracle数据库选择的其他实例上重新打开PDB。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">RELOCATE</code> <code class="codeph">TO</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">instance_name</code></span> <code class="codeph">'</code>重开PDB在指定的实例。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">NORELOCATE</code>以关闭当前实例中的PDB。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold"><span class="italic">pdb_save_or_discard_state</span></span></p>
                  <p>使用此子句指示数据库在CDB重新启动时保存或放弃PDB的打开模式。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果指定<code class="codeph">SAVE</code> ，则CDB重新启动后PDB的打开模式将与CDB重启之前的打开模式相同。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">DISCARD</code> ，则CDB重启后PDB的打开模式将为<code class="codeph">MOUNTED</code> 。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold"><span class="italic">instances_clause</span></span></p>
                  <p>在Oracle Real Application Clusters环境中，使用此子句指示数据库在指定的Oracle RAC实例中保存或放弃PDB的打开模式。如果省略此子句，则数据库仅将<code class="codeph">SAVE</code>或<code class="codeph">DISCARD</code>设置应用于当前实例中的PDB。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<span class="italic"><code class="codeph">instance_name</code></span>在括号中括起的逗号分隔列表中指定一个或多个实例名称。这仅在这些情况下将<code class="codeph">SAVE</code>或<code class="codeph">DISCARD</code>设置应用于PDB。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ALL</code>以在所有实例中将<code class="codeph">SAVE</code>或<code class="codeph">DISCARD</code>设置应用于PDB。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ALL</code> <code class="codeph">EXCEPT</code>以在除指定实例之外的所有实例中将<code class="codeph">SAVE</code>或<code class="codeph">DISCARD</code>设置应用于PDB。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-31DC2763-6B2B-49C5-A158-D3DEB9C9CEEF"><span class="italic">pdb_change_state_from_root</span></p>
                  <p><a id="d241038e2481" class="indexterm-anchor"></a><a id="d241038e2487" class="indexterm-anchor"></a>此子句使您可以修改一个或多个PDB的状态。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>为要修改其状态的一个或多个PDB指定<span class="italic"><code class="codeph">pdb_name</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ALL</code>以修改CDB中所有PDB的状态。</p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">ALL</code> <code class="codeph">EXCEPT</code>以修改CDB中除使用<span class="italic"><code class="codeph">pdb_name</code></span>指定的PDB之外的所有PDB的状态。
                        </p>
                     </li>
                  </ul>
                  <p>如果PDB已处于指定状态，则PDB的状态保持不变，并且不返回任何错误。如果无法更改PDB的状态，则仅对该PDB发生错误。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__APPLICATION_CLAUSES-5DDD4A9F">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-01C26D0F-416D-43D8-8F13-DC56ED86DC8A"><span class="italic">application_clauses</span></p>
                  <p><code class="codeph">APPLICATION</code>子句允许您在应用程序容器中执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>安装，修补，升级和卸载应用程序</p>
                     </li>
                     <li>
                        <p>注册应用程序版本和补丁号</p>
                     </li>
                     <li>
                        <p>使应用程序根目录和应用程序PDB之间的应用程序保持同步</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-A06E998A-BB9D-4A2A-9683-8F1857A12B6A">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../multi/administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关管理应用程序容器的更多信</p>
                  </div>
                  <p><span class="bold">指定应用程序名称</span></p>
                  <p>大多数<span class="italic"><code class="codeph">application_clauses</code></span>都要求您指定应用程序名称。应用程序名称的最大长度为30个字节。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。应用程序名称在应用程序容器中必须是唯一的。
                  </p>
                  <p><span class="bold">指定应用程序版本</span></p>
                  <p>有几个<span class="italic"><code class="codeph">application_clauses</code></span>要求您指定应用程序版本。应用程序版本最长可达30个字节，可包含字母数字字符，标点符号和空格。应用程序版本区分大小写，必须用单引号括起来。
                  </p>
                  <p><span class="bold">指定评论</span></p>
                  <p>有几个<span class="italic"><code class="codeph">application_clauses</code></span>允许您指定与应用程序安装，修补程序或升级操作关联的注释。要进行<span class="italic"><code class="codeph">comment</code></span> ，请输入用单引号括起来的字符串。
                  </p>
                  <p><span class="bold">安装条款</span></p>
                  <p>在应用程序容器中安装应用程序时，请使用<code class="codeph">INSTALL</code>子句。当前容器必须是应用程序根目录，而不是应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在开始安装应用程序之前，请指定<code class="codeph">BEGIN</code> <code class="codeph">INSTALL</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<span class="italic"><code class="codeph">app_name</code></span>为应用程序指定名称。
                              </p>
                           </li>
                           <li>
                              <p>使用<span class="italic"><code class="codeph">app_version</code></span>为应用程序分配版本。
                              </p>
                           </li>
                           <li>
                              <p>可选的<code class="codeph">COMMENT</code>子句允许您输入与此安装创建的应用程序版本关联的注释。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>完成应用程序安装后，指定<code class="codeph">END</code> <code class="codeph">INSTALL</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">INSTALL</code>子句指定的相同<span class="italic"><code class="codeph">app_name</code></span> 。
                              </p>
                           </li>
                           <li>
                              <p>您无需指定<span class="italic"><code class="codeph">app_version</code></span> ，但如果这样做，则必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">INSTALL</code>子句指定的相同版本。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold">PATCH条款</span></p>
                  <p>在应用程序容器中修补应用程序时使用<code class="codeph">PATCH</code>子句。当前容器必须是应用程序根目录，而不是应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在开始修补应用程序之前指定<code class="codeph">BEGIN</code> <code class="codeph">PATCH</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于<span class="italic"><code class="codeph">app_name</code></span> ，请指定要修补的应用程序的名称。
                              </p>
                           </li>
                           <li>
                              <p>对于<span class="italic"><code class="codeph">number</code></span> ，请指定修补程序编号。
                              </p>
                           </li>
                           <li>
                              <p>可选的<code class="codeph">MINIMUM</code> <code class="codeph">VERSION</code>子句允许您指定在应用修补程序之前应用程序必须具有的最低版本。对于<span class="italic"><code class="codeph">app_version</code></span> ，请指定最低应用程序版本。如果当前应用程序版本低于最低应用程序版本，则会发生错误。如果省略此子句，则最低版本是当前应用程序版本。
                              </p>
                           </li>
                           <li>
                              <p>可选的<code class="codeph">COMMENT</code>子句允许您输入与修补程序关联的注释。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>完成修补应用程序后，指定<code class="codeph">END</code> <code class="codeph">PATCH</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">PATCH</code>子句指定的相同<span class="italic"><code class="codeph">app_name</code></span> 。
                              </p>
                           </li>
                           <li>
                              <p>您无需指定<span class="italic"><code class="codeph">number</code></span> ，但如果这样做，则必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">PATCH</code>子句指定的相同值。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold">升级条款</span></p>
                  <p>在应用程序容器中升级应用程序时，请使用<code class="codeph">UPGRADE</code>子句。当前容器必须是应用程序根目录，而不是应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在开始升级应用程序之前指定<code class="codeph">BEGIN</code> <code class="codeph">UPGRADE</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于<span class="italic"><code class="codeph">app_name</code></span> ，请指定要升级的应用程序的名称。
                              </p>
                           </li>
                           <li>
                              <p>对于<span class="italic"><code class="codeph">start_app_version</code></span> ，请指定要从中升级应用程序的版本。如果此版本与当前应用程序版本不匹配，则会发生错误。
                              </p>
                           </li>
                           <li>
                              <p>对于<span class="italic"><code class="codeph">end_app_version</code></span> ，请指定要将应用程序升级到的版本。
                              </p>
                           </li>
                           <li>
                              <p>可选的<code class="codeph">COMMENT</code>子句允许您输入与升级相关联的注释。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>完成应用程序升级后，指定<code class="codeph">END</code> <code class="codeph">UPGRADE</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">UPGRADE</code>子句指定的相同<span class="italic"><code class="codeph">app_name</code></span> 。
                              </p>
                           </li>
                           <li>
                              <p>您无需指定<code class="codeph">TO</code> <span class="italic"><code class="codeph">end_app_version</code></span> ，但如果这样做，则必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">UPGRADE</code>子句指定的相同版本。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold">卸载条款</span></p>
                  <p>从应用程序容器卸载应用程序时，请使用<code class="codeph">UNINSTALL</code>子句。当前容器必须是应用程序根目录，而不是应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在开始卸载应用程序之前，请指定<code class="codeph">BEGIN</code> <code class="codeph">UNINSTALL</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于<span class="italic"><code class="codeph">app_name</code></span> ，请指定要卸载的应用程序的名称。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>完成卸载应用程序后，指定<code class="codeph">END</code> <code class="codeph">UNINSTALL</code>子句。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须指定为相应的<code class="codeph">BEGIN</code> <code class="codeph">UNINSTALL</code>子句指定的相同<span class="italic"><code class="codeph">app_name</code></span> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold">设置补丁</span></p>
                  <p>使用<code class="codeph">SET</code> <code class="codeph">PATCH</code>子句注册已安装在应用程序容器中的应用程序的修补程序编号。此子句允许您为未使用<code class="codeph">PATCH</code>子句修补的应用程序分配修补程序编号。如果在早期Oracle数据库发行版中从<code class="codeph">PATCH</code>条款不可用时从PDB迁移应用程序，这将非常有用。当前容器可以是应用程序根目录或应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">app_name</code></span> ，请指定现有应用程序的名称。
                        </p>
                     </li>
                     <li>
                        <p>使用<span class="italic"><code class="codeph">number</code></span>为现有应用程序分配修补程序编号。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">设置版本</span></p>
                  <p>使用<code class="codeph">SET</code> <code class="codeph">VERSION</code>子句注册已安装在应用程序容器中的应用程序的版本。此子句允许您为未使用<code class="codeph">INSTALL</code>子句安装的应用程序分配名称和版本。如果应用程序是从早期Oracle数据库发行版中的PDB迁移的，那么当<code class="codeph">INSTALL</code>子句不可用时，这非常有用。当前容器可以是应用程序根目录或应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<span class="italic"><code class="codeph">app_name</code></span>为现有应用程序指定名称。
                        </p>
                     </li>
                     <li>
                        <p>使用<span class="italic"><code class="codeph">app_version</code></span>为现有应用程序分配版本。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">设置兼容性版本</span></p>
                  <p>使用<code class="codeph">SET</code> <code class="codeph">COMPATIBILITY</code> <code class="codeph">VERSION</code>子句设置应用程序的兼容版本。应用程序的兼容版本是属于应用程序容器的应用程序PDB可能的最早版本的应用程序。当前容器必须是应用程序根目录，而不是应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<span class="italic"><code class="codeph">app_name</code></span>指定应用程序的名称。
                        </p>
                     </li>
                     <li>
                        <p>使用<span class="italic"><code class="codeph">app_version</code></span>指定应用程序的兼容版本。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">CURRENT</code> ，则兼容版本将设置为应用程序根目录中的应用程序版本。
                        </p>
                     </li>
                  </ul>
                  <p>在设置兼容性版本和创建应用程序PDB时，将强制实施兼容性版本。如果应用程序升级导致应用程序根克隆，则会隐式删除与兼容版本之前的版本对应的所有应用程序根克隆。</p>
                  <p><span class="bold">同步</span></p>
                  <p>使用<code class="codeph">SYNC</code>子句将应用程序PDB中的应用程序同步到应用程序根目录中同一应用程序的版本和修补程序级别。在对应用程序根目录中的应用程序进行更改后，这很有用。当前容器必须是应用程序PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">app_name</code></span> ，请指定应用程序根目录中存在的应用程序的名称。应用程序可能存在也可能不存在于应用程序PDB中。</p>
                     </li>
                  </ul>
                  <p><span class="bold">全部同步</span></p>
                  <p>使用<code class="codeph">ALL</code> <code class="codeph">SYNC</code>子句将应用程序PDB中的所有应用程序与应用程序根目录中的所有应用程序同步。如果您最近将应用程序PDB添加到CDB并希望将其应用程序与应用程序容器同步，则此子句非常有用。当前容器必须是应用程序PDB。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-AF662841-0A8E-4292-BC0D-6EC348F17FEB"><span class="italic">snapshot_clauses</span> 
                  </p>
                  <p>快照子句允许您在PDB的生命周期内创建和管理PDB的快照。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__PDB_SNAPSHOT_CLAUSE-34C0BD15"><span class="italic">pdb_snapshot_clause</span> 
                  </p>
                  <p>指定此子句以启用PDB快照的创建。您还可以在<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中指定此子句。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">NONE</code>是默认值，表示不能创建PDB的快照。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">MANUAL</code>表示只能手动创建PDB的快照。
                        </p>
                     </li>
                     <li>
                        <p>如果<code class="codeph">snapshot_interval</code>被指定，PDB快照会自动在指定的时间间隔创建。此外，用户还可以手动创建PDB快照。
                        </p>
                     </li>
                     <li>
                        <p>如果以分钟表示，则<code class="codeph">snapshot_interval</code>必须小于3000。
                        </p>
                     </li>
                     <li>
                        <p>如果以小时表示，则<code class="codeph">snapshot_interval</code>必须小于2000。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__MATERIALIZE_CLAUSE-34C0C445"><span class="italic">materialize_clause</span> 
                  </p>
                  <p>使用此子句将快照PDB转换为完整的PDB克隆。您可以使用此子句删除和清除PDB快照。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>只能为作为快照创建的PDB指定此子句。</p>
                     </li>
                     <li>
                        <p>将复制属于PDB的所有数据文件中的所有块。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__CREATE_SNAPSHOT_CLAUSE-34C0C96C"><span class="italic">create_snapshot_clause</span> 
                  </p>
                  <p>使用此子句在连接到PDB后手动创建PDB快照。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>即使PDB设置为自动创建PDB快照，也可以发出此语句。</p>
                     </li>
                     <li>
                        <p>如果已存在具有指定名称的PDB快照，则将报告错误。</p>
                     </li>
                     <li>
                        <p>将创建具有指定名称的PDB快照。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__DROP_SNAPSHOT_CLAUSE-34C0CCDA"><span class="italic">drop_snapshot_clause</span> 
                  </p>
                  <p>使用此子句在连接到PDB后手动删除PDB快照。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果某个PDB正在使用此快照，则会报告错误。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__SET_MAX_PDB_SNAPSHOTS-34C0D074"><span class="italic">set_max_pdb_snapshots</span> 
                  </p>
                  <p>使用此子句可以增加或减少给定PDB的最大快照数。您必须先连接到PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果在发出语句时PDB未在读/写模式下打开，则会引发错误。</p>
                     </li>
                     <li>
                        <p>您可以通过将最大数量设置为0来删除所有PDB快照。</p>
                     </li>
                     <li>
                        <p>每个PDB可以设置的最大快照数为8。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__PREPARE_CLAUSE-34B3E881"><span class="italic">prepare_clause</span></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用此子句准备数据库的镜像副本。您必须提供<code class="codeph"><span class="codeinlineitalic">mirror_name</span></code>以标识创建的文件组。创建的文件组包含所有准备好的文件。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">REDUNDANCY</code>选项要准备的份数： <code class="codeph">EXTERNAL</code> ， <code class="codeph">NORMAL</code>或<code class="codeph">HIGH</code> 。</p>
                     </li>
                     <li>
                        <p>如果未指定镜像的冗余，则使用源数据库的冗余。</p>
                     </li>
                  </ul>
                  <p><span class="bold">按名称准备可插拔数据库：示例</span></p>
                  <p>如果指定可插拔数据库的名称（ <span class="italic"><code class="codeph">pdb_name</code></span> ），则会检查<span class="italic"><code class="codeph">pdb_name</code></span>是否与当前PDB匹配。如果匹配，则运行。
                  </p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb_name PREPARE MIRROR COPY mirror_name WITH RED REDUNDANCY</pre><p><span class="bold">准备一个没有名称的可插拔数据库：示例</span></p>
                  <p>如果未指定可插拔数据库的名称（ <span class="italic"><code class="codeph">pdb_name</code></span> ），则该语句将在当前PDB上运行。</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE PREPARE MIRROR COPY mirror_name具有高冗余度</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__DROP_MIRROR_COPY-34B3E383"><span class="italic">drop_mirror_copy</span></p>
                  <p>使用此子句可以丢弃由prepare语句创建的数据和元数据的镜像副本。您必须指定用于准备操作的相同镜像名称。</p>
                  <p>您不能使用此子句删除已由<code class="codeph">CREATE DATABASE</code>或<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句<code class="codeph">CREATE PLUGGABLE DATABASE</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-020D8B1D-40BC-4D77-957E-A9531D5D4D85"><span class="italic">lost_write_protection</span></p>
                  <p><span class="bold">打开可插拔数据库的丢失写入：示例</span></p><pre class="oac_no_warn" dir="ltr">ALTER PLOGGABLE DATABASE使得丢失写保护</pre><p><span class="bold">关闭可插拔数据库的丢失写入：示例</span></p><pre class="oac_no_warn" dir="ltr">ALTER PLOGGABLE DATABASE DISABLE LOST WRITE PROTECTION</pre><p>请注意，禁用数据库的丢失写入不会释放丢失的写入存储。必须使用<code class="codeph">DROP TABLESPACE</code>语句来释放丢失的写入存储。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7__GUID-47EAD2F3-2541-4A3D-A190-8EDCDC1C2855">例子</p>
                  <p><span class="bold">从CDB中拔出PDB：示例</span></p>
                  <p>以下语句<code class="codeph">pdb1</code> PDB <code class="codeph">pdb1</code>并将PDB的元数据存储到XML文件<code class="codeph">/oracle/data/pdb1.xml</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb1 UNPLUG INTO'/oracle/data/pdb1.xml';</pre><p><span class="bold">修改PDB的设置：示例</span></p>
                  <p>以下语句将PDB <code class="codeph">pdb2</code>所有表空间使用的存储量限制更改为500M：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb2 STORAGE（MAXSIZE 500M）;</pre><p><span class="bold">将PDB的数据文件脱机：示例</span></p>
                  <p>以下语句将与PDB <code class="codeph">pdb3</code>关联的数据文件脱机：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb3 DATAFILE ALL OFFLINE;</pre><p><span class="bold">改变PDB的状态：例子</span></p>
                  <p>假设PDB <code class="codeph">pdb4</code>已关闭 - 也就是说，其打开模式为<code class="codeph">MOUNTED</code> 。以下语句以打开模式<code class="codeph">READ</code> <code class="codeph">ONLY</code>打开<code class="codeph">pdb4</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb4 OPEN READ ONLY;</pre><p>以下语句使用<code class="codeph">FORCE</code>关键字将<code class="codeph">pdb4</code>的打开模式从<code class="codeph">READ</code> <code class="codeph">ONLY</code>更改为<code class="codeph">READ</code> <code class="codeph">WRITE</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb4 OPEN READ WRITE FORCE;</pre><p>以下语句关闭PDB <code class="codeph">pdb4</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb4 CLOSE;</pre><p>以下语句以打开模式<code class="codeph">READ</code> <code class="codeph">ONLY</code>打开PDB pdb4。由于指定了<code class="codeph">RESTRICTED</code>关键字，因此只有PDB中具有<code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>权限的用户才能访问PDB。</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb4 OPEN READ ONLY REGTRICTED;</pre><p>假设PDB <code class="codeph">pdb5</code>已关闭 - 即，其打开模式为<code class="codeph">MOUNTED</code> 。在Oracle真正应用集群环境中，下面的语句打开PDB <code class="codeph">pdb5</code>开放模式<code class="codeph">READ</code> <code class="codeph">WRITE</code>的情况下<code class="codeph">ORCLDB_1</code>和<code class="codeph">ORCLDB_2</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb5 OPEN READ WRITE INSTANCES =（'ORCLDB_1'，'ORCLDB_2'）;</pre><p>在Oracle真正应用集群环境中，下面的语句关闭PDB <code class="codeph">pdb6</code>在目前的情况下，并指示数据库重新<code class="codeph">pdb6</code>在实例<code class="codeph">ORCLDB_3</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE pdb6关闭重定位到'ORCLDB_3';</pre><p><span class="bold">更改CDB中所有PDB的状态：示例</span></p>
                  <p>假设当前容器是根。以下语句以打开模式<code class="codeph">READ</code> <code class="codeph">ONLY</code>打开CDB中的所有PDB：</p><pre class="oac_no_warn" dir="ltr">ALTER PLOGGABLE DATABASE ALL OPEN READ ONLY;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="05649.listener-control-utility.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes the commands and associated syntax of the Listener Control utility. The terms " sql*ne="=" net="" service="=" =""></meta>
      <meta name="description" content="This chapter describes the commands and associated syntax of the Listener Control utility. The terms " sql*ne="=" net="" service="=" =""></meta>
      <title>监听器控制实用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Net Services Reference "></meta>
      <meta property="og:description" content="This chapter describes the commands and associated syntax of the Listener Control utility. The terms " sql*ne="=" net="" service="=" =""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Net Services Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-net-services-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T04:17:11-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96314-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="changes-in-this-release.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-connection-manager-control-utility.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Net Services Reference"></meta>
    <meta name="dcterms.isVersionOf" content="NETRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="changes-in-this-release.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-connection-manager-control-utility.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库网络服务参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">监听器控制实用程序</li>
            </ol>
            <a id="GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" name="GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A"></a>
            
            <h2 id="NETRF-GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" class="sect2"><span class="enumeration_chapter">1</span>监听器控制实用程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍监听器控制实用程序的命令和相关语法。术语“SQL * Net”和“Net Services”在整个Oracle文档中可互换使用，这两个术语指的是相同的功能。</p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="listener-control-utility.html#GUID-0C1A4AF9-BC34-40F5-9813-E2066A480292">监听器控制实用程序概述</a><br>要在一个或多个侦听器上执行基本管理功能，可以使用侦听器控件实用程序命令。您还可以查看和更改参数设置。
                  </li>
                  <li class="ulchildlink"><a href="listener-control-utility.html#GUID-212C4B12-11DC-4F10-AA02-73FF3DFA91BA">SET和SHOW监听器控制实用程序的命令</a><br><code class="codeph">SET</code>和<code class="codeph">SHOW</code>命令使您可以更改和查看侦听器配置参数。
                  </li>
                  <li class="ulchildlink"><a href="listener-control-utility.html#GUID-B2DB62FF-113E-43CF-AB31-020E0F97A15A">分布式操作</a><br>监听器控制实用程序可以对本地或远程侦听器执行操作。
                  </li>
                  <li class="ulchildlink"><a href="listener-control-utility.html#GUID-8085E13A-AC8B-4AE2-B934-5DFDFDEC8F46">Oracle Net Listener安全性</a><br>侦听器管理的身份验证取决于您是在本地还是远程访问侦听器。
                  </li>
                  <li class="ulchildlink"><a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86">监听器控制实用程序命令</a><br>使用Listener Control实用程序命令来管理和配置侦听器。
                  </li>
               </ul>
            </div>
            <a id="NETRF101"></a><div class="sect2"><a id="GUID-0C1A4AF9-BC34-40F5-9813-E2066A480292" name="GUID-0C1A4AF9-BC34-40F5-9813-E2066A480292"></a><h3 id="NETRF-GUID-0C1A4AF9-BC34-40F5-9813-E2066A480292" class="sect3"><span class="enumeration_section">1.1</span>监听器控制实用程序概述</h3>
               <div>
                  <div>Listener Control实用程序使您可以管理<a href="glossary.html#GUID-191913FB-765E-491C-A8D5-A59F366EB87D"><span class="xrefglossterm">侦听器</span></a> 。<span>要在一个或多个侦听器上执行基本管理功能，可以使用侦听器控件实用程序命令。您还可以查看和更改参数设置。</span></div>
                  <p>Listener Control实用程序命令的基本语法如下：</p><pre class="oac_no_warn" dir="ltr">lsnrctl <span class="variable" translate="no">command</span> <span class="variable" translate="no">listener_name</span></pre><p>在上面的命令中， <code class="codeph"><span class="variable" translate="no">listener_name</span></code>是要管理的<code class="codeph"><span class="variable" translate="no">listener_name</span></code>器的名称。如果未在命令字符串中指定特定侦听器，则命令将定向到默认侦听器名称<code class="codeph">LISTENER</code> 。</p>
                  <p>您还可以在<code class="codeph">LSNRCTL&gt;</code>程序提示符下发出监听器控制实用程序命令。要获取提示，请在操作系统命令行中输入不带参数的<code class="codeph">lsnrctl</code> 。运行<code class="codeph">lsnrctl</code> ，程序启动。然后，您可以从程序提示符输入必要的命令。从<code class="codeph">LSNRCTL&gt;</code>程序提示符发出命令的基本语法如下：</p><pre class="oac_no_warn" dir="ltr">lsnrctl LSNRCTL&gt; <span class="variable" translate="no">command</span> <span class="variable" translate="no">listener_name</span></pre><p>您可以在标准文本文件中组合命令，然后将它们作为一系列命令运行。要以批处理模式运行，请使用以下格式：</p>
                  <p><code class="codeph">lsnrctl @ <span class="variable" translate="no">file_name</span></code></p>
                  <p>要在批处理脚本中标识注释，可以使用<code class="codeph">REM</code>或＃。所有其他行都被视为命令。通常需要确认的任何命令都不需要在批处理期间进行确认。
                  </p>
                  <p>对于大多数命令，监听器控制实用程序与用于传输命令的侦听器建立Oracle Net连接。要启动与侦听器的Oracle Net连接，侦听器控制实用程序必须获取指定侦听器或名为<code class="codeph">LISTENER</code>的侦听<code class="codeph">LISTENER</code>的协议地址。这是通过使用以下机制之一解析侦听器名称来完成的：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">listener.ora</code>文件位于<code class="codeph">TNS_ADMIN</code>环境变量指定的目录中。
                        </p>
                     </li>
                     <li>
                        <p><code><span class="variable" translate="no">ORACLE_HOME</span> /network/admin</code>目录中的<code class="codeph">listener.ora</code>文件。
                        </p>
                     </li>
                     <li>
                        <p>命名方法;例如，一个<code class="codeph">tnsnames.ora</code>文件。
                        </p>
                     </li>
                  </ul>
                  <p>如果上述机制均未解析侦听器名称，则侦听器控制实用程序将使用默认侦听器名称<code class="codeph">LISTENER</code> ，解析主机名IP地址，并使用端口1521。
                  </p>
                  <p>监听器控制实用程序支持以下类型的命令：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>操作命令，例如<code class="codeph">START</code>和<code class="codeph">STOP</code> 。</p>
                     </li>
                     <li>
                        <p>修改器命令，例如<code class="codeph">SET TRC_LEVEL</code> 。</p>
                     </li>
                     <li>
                        <p>信息命令，例如<code class="codeph">STATUS</code>和<code class="codeph">SHOW LOG_FILE</code> 。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="listener-control-utility.html#GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202" title="监听器控制实用程序命令START启动命名监听器。">开始</a></li>
                        <li><a href="listener-control-utility.html#GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA" title="监听器控制实用程序命令STOP将停止指定的侦听器。">停</a></li>
                        <li><a href="listener-control-utility.html#GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E" title="监听器控制实用程序命令SET TRC_LEVEL为监听器设置特定的跟踪级别。">SET TRC_LEVEL</a></li>
                        <li><a href="listener-control-utility.html#GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428" title="监听器控制实用程序命令STATUS显示有关监听器的基本状态信息。">状态</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" title="本章介绍监听器控制实用程序的命令和相关语法。条款" sql*ne="=" net="" service="=" ="">监听器控制实用程序</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="NETRF102"></a><div class="sect2"><a id="GUID-212C4B12-11DC-4F10-AA02-73FF3DFA91BA" name="GUID-212C4B12-11DC-4F10-AA02-73FF3DFA91BA"></a><h3 id="NETRF-GUID-212C4B12-11DC-4F10-AA02-73FF3DFA91BA" class="sect3"><span class="enumeration_section">1.2</span>监听器控制实用程序的SET和SHOW命令</h3>
               <div>
                  <p><code class="codeph">SET</code>和<code class="codeph">SHOW</code>命令使您可以更改和查看侦听器配置参数。
                  </p>
                  <p>您可以使用<code class="codeph">SET</code>命令更改指定侦听器的参数值。您可以使用<code class="codeph">SET CURRENT_LISTENER</code>命令<code class="codeph">SET CURRENT_LISTENER</code>要管理的侦听器的名称。在关闭侦听器之前，参数值仍然有效。如果要保留这些设置，请使用<code class="codeph">SAVE_CONFIG</code>命令将更改保存到<code class="codeph">listener.ora</code>文件。 。
                  </p>
                  <p>您可以使用<code class="codeph">SHOW</code>命令显示配置设置的当前值。
                  </p>
               </div>
               <div>
                  <div class="linklist">
                     <div><a href="listener-control-utility.html#GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597" title="监听器控制实用程序命令SET改变监听器的参数值。">组</a></div>
                     <div><a href="listener-control-utility.html#GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3" title="监听器控制实用程序命令SET CURRENT_LISTENER设置要管理的侦听器的名称。">SET CURRENT_LISTENER</a></div>
                     <div><a href="listener-control-utility.html#GUID-AFC6727A-76B7-4114-9910-5BB54B308833" title="监听器控制实用程序命令SAVE_CONFIG将监听器的当前配置状态保存到listener.ora文件。">SAVE_CONFIG</a></div>
                     <div><a href="listener-control-utility.html#GUID-1148E1DB-72D7-416E-B5AE-098093DAA217" title="监听器控制实用程序命令SHOW显示监听器的当前参数值。">节目</a></div>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" title="本章介绍监听器控制实用程序的命令和相关语法。条款" sql*ne="=" net="" service="=" ="">监听器控制实用程序</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B2DB62FF-113E-43CF-AB31-020E0F97A15A" name="GUID-B2DB62FF-113E-43CF-AB31-020E0F97A15A"></a><h3 id="NETRF-GUID-B2DB62FF-113E-43CF-AB31-020E0F97A15A" class="sect3"><span class="enumeration_section">1.3</span>分布式操作</h3>
               <div>
                  <p>监听器控制实用程序可以对本地或远程侦听器执行操作。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B2DB62FF-113E-43CF-AB31-020E0F97A15A__GUID-D5B2E9E0-EBDA-40F0-9C55-2275237B8165">设置计算机以远程管理监听器</p>
                     <p>确保监听器控制实用程序（ <code class="codeph">lsnrctl</code> ）可执行文件安装在<code><span class="variable" translate="no">ORACLE_HOME</span> /bin</code>目录中。您可以通过<code class="codeph">listener.ora</code>文件或命名方法解析要管理的<code class="codeph">listener.ora</code>的名称。
                     </p>
                     <p>远程管理侦听器时，可以发出除<code class="codeph">START</code>之外的所有命令。但是，监听器控制实用程序只能在运行该实用程序的同一台计算机上启动监听器。
                     </p>
                     <p>发出命令时，将侦听器名称指定为参数。如果省略命令中的侦听器名称，则使用使用命令<code class="codeph">SET CURRENT_LISTENER</code>设置的侦听器名称。如果未使用该命令设置侦听器名称，则命令将定向到默认侦听器名称<code class="codeph">LISTENER</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B2DB62FF-113E-43CF-AB31-020E0F97A15A__GUID-1C20A40A-2DBD-4CCC-B039-5EA8EB707A3B">
                     <p class="titleinexample">示例1-1使用监听器控制实用程序发出命令</p> <pre class="pre codeblock"><code>LSNRCTL&gt;服务lsnr</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" title="本章介绍监听器控制实用程序的命令和相关语法。条款" sql*ne="=" net="" service="=" ="">监听器控制实用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETRF104"></a><div class="sect2"><a id="GUID-8085E13A-AC8B-4AE2-B934-5DFDFDEC8F46" name="GUID-8085E13A-AC8B-4AE2-B934-5DFDFDEC8F46"></a><h3 id="NETRF-GUID-8085E13A-AC8B-4AE2-B934-5DFDFDEC8F46" class="sect3"><span class="enumeration_section">1.4</span> Oracle Net Listener安全性</h3>
               <div>
                  <p>侦听器管理的身份验证取决于您是在本地还是远程访问侦听器。</p>
                  <p>本地侦听器管理通过本地操作系统身份验证是安全的，该身份验证将侦听器管理限制为启动侦听器的用户帐户或超级用户。默认情况下，禁用远程侦听器管理。</p>
                  <p>Oracle建议您以默认模式执行侦听器管理，并使用远程登录远程访问系统。远程管理侦听器时，请使用Oracle Enterprise Manager Cloud Control或Secure Shell（SSH）访问远程主机。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" title="本章介绍监听器控制实用程序的命令和相关语法。条款" sql*ne="=" net="" service="=" ="">监听器控制实用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETRF105"></a><div class="sect2"><a id="GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" name="GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86"></a><h3 id="NETRF-GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" class="sect3"><span class="enumeration_section">1.5</span>监听器控制实用程序命令</h3>
               <div>
                  <p>使用Listener Control实用程序命令来管理和配置侦听器。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E">出口</a><br>监听器控制实用程序命令<code class="codeph">EXIT</code>从监听器控制实用程序退出，并返回到操作系统提示符。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-42C16412-1C87-4EA4-A926-FE55079C4239">救命</a><br>监听器控制实用程序命令<code class="codeph">HELP</code>提供所有监听器控制实用程序命令的列表，或为特定监听器控制实用程序命令提供语法帮助。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961">放弃</a><br>监听器控制实用程序命令<code class="codeph">QUIT</code>从监听器控制实用程序退出，并返回操作系统提示符。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280">RELOAD</a><br>监听器控制实用程序命令<code class="codeph">RELOAD</code>重新加载<code class="codeph">listener.ora</code>文件，以便您可以在不停止监听器的情况下添加或更改静态配置的服务。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-AFC6727A-76B7-4114-9910-5BB54B308833">SAVE_CONFIG</a><br>监听器控制实用程序命令<code class="codeph">SAVE_CONFIG</code>将监听器的当前配置状态保存到<code class="codeph">listener.ora</code>文件。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-1430CBAA-A2F5-405E-B09B-AB2774457408">服务</a><br>监听器控制实用程序命令<code class="codeph">SERVICES</code>返回有关侦听器转发客户端连接请求的数据库服务，实例和服务处理程序的详细信息。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597">组</a><br>监听器控制实用程序命令<code class="codeph">SET</code>改变监听器的参数值。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3">SET CURRENT_LISTENER</a><br>监听器控制实用程序命令<code class="codeph">SET CURRENT_LISTENER</code>设置要管理的侦听器的名称。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E">SET DISPLAYMODE</a><br>监听器控制实用程序命令<code class="codeph">SET DISPLAYMODE</code> 
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85">SET INBOUND_CONNECT_TIMEOUT</a><br>监听器控制实用程序命令<code class="codeph">SET INBOUND_CONNECT_TIMEOUT</code>指定客户端在建立网络连接后完成对侦听器的连接请求的时间（以秒为单位）。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858">SET LOG_DIRECTORY</a><br>监听器控制实用程序命令<code class="codeph">SET LOG_DIRECTORY</code>设置写入侦听器日志文件的目标目录。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5">SET LOG_FILE</a><br>监听器控制实用程序命令<code class="codeph">SET LOG_FILE</code>设置监听器日志文件的名称。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-4ED87851-6459-4ED5-878F-92D413250327">SET LOG_STATUS</a><br>监听器控制实用程序命令<code class="codeph">SET LOG_STATUS</code>打开或关闭监听器登录。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32">SET SAVE_CONFIG_ON_STOP</a><br>监听器控制实用程序命令<code class="codeph">SET SAVE_CONFIG_ON_STOP</code>指定在使用<code class="codeph">STOP</code>命令停止侦听器时， <code class="codeph">SET</code>命令对侦听器的参数值所做的更改是否保存到<code class="codeph">listener.ora</code>文件中。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2">SET TRC_DIRECTORY</a><br>监听器控制实用程序命令<code class="codeph">SET TRC_DIRECTORY</code>设置写入监听器跟踪文件的目标目录。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4">SET TRC_FILE</a><br>监听器控制实用程序命令<code class="codeph">SET TRC_FILE</code>设置监听器跟踪文件的名称。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E">SET TRC_LEVEL</a><br>监听器控制实用程序命令<code class="codeph">SET TRC_LEVEL</code>监听器设置特定的跟踪级别。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-1148E1DB-72D7-416E-B5AE-098093DAA217">节目</a><br>监听器控制实用程序命令<code class="codeph">SHOW</code>显示监听器的当前参数值。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-E9C71077-EB22-4FF1-955F-E4D95573B251">SPAWN</a><br>监听器控制实用程序命令SPAWN启动存储在运行侦听器的计算机上的程序，该程序在<code class="codeph">listener.ora</code>文件中列出了别名。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202">开始</a><br>监听器控制实用程序命令<code class="codeph">START</code>启动命名监听器。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428">状态</a><br>监听器控制实用程序命令<code class="codeph">STATUS</code>显示有关监听器的基本状态信息。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA">停</a><br>监听器控制实用程序命令<code class="codeph">STOP</code>停止指定的侦听器。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6">跟踪</a><br>监听器控制实用程序命令<code class="codeph">TRACE</code>为侦听器设置跟踪。
                     </li>
                     <li class="ulchildlink"><a href="listener-control-utility.html#GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2">版</a><br>监听器控制实用程序命令<code class="codeph">VERSION</code>显示监听器控制实用程序的当前版本。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-3E108E50-0B69-4F46-82D7-48D8DBDCC30A" title="本章介绍监听器控制实用程序的命令和相关语法。条款" sql*ne="=" net="" service="=" ="">监听器控制实用程序</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E" name="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E"></a><h4 id="NETRF-GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E" class="sect4"><span class="enumeration_section">1.5.1</span>退出</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">EXIT</code>从监听器控制实用程序退出，并返回到操作系统提示符。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E__GUID-5AB0D0D9-9830-4B1E-8866-217E47592D7E">目的</p>
                        <p>从Listener Control实用程序退出，并返回到操作系统提示符。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E__GUID-31F78997-3A86-4A62-9F2B-B83E45E748AA">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E__GUID-42EA7384-EC34-497D-AF48-380BD5AD8FA2">句法</p>
                        <p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt;退出</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E__GUID-4B97B5E1-D53C-4057-8390-3DD258BF33A6">参数</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E__GUID-C1EC0B92-6779-4B5E-8145-0FC92916E348">使用说明</p>
                        <p>此命令与<code class="codeph">QUIT</code>命令相同。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC876CB1-1BDD-4D28-B3B0-D7687DF2829E__GUID-235BF3EC-9417-4F97-8832-623B878C1AF2">例</p><pre class="pre codeblock"><code>LSNRCTL&gt;退出</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF707"></a><a id="NETRF708"></a><a id="NETRF710"></a><a id="NETRF711"></a><a id="NETRF712"></a><a id="NETRF108"></a><div class="sect3"><a id="GUID-42C16412-1C87-4EA4-A926-FE55079C4239" name="GUID-42C16412-1C87-4EA4-A926-FE55079C4239"></a><h4 id="NETRF-GUID-42C16412-1C87-4EA4-A926-FE55079C4239" class="sect4"><span class="enumeration_section">1.5.2</span>帮助</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">HELP</code>提供所有监听器控制实用程序命令的列表，或为特定监听器控制实用程序命令提供语法帮助。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-42C16412-1C87-4EA4-A926-FE55079C4239__GUID-05176D9C-61E2-40D4-9CB8-D702F245D8AB">目的</p>
                        <p>提供所有Listener Control实用程序命令的列表，或为特定的Listener Control实用程序命令提供语法帮助。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-42C16412-1C87-4EA4-A926-FE55079C4239__GUID-4D46C8F9-97C2-40AB-8B8A-52BF466F4F28">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-42C16412-1C87-4EA4-A926-FE55079C4239__GUID-6CF01F79-9CBF-4D44-A453-D9EFAF8BE221">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl HELP <span class="variable" translate="no">command</span></code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; HELP <span class="variable" translate="no">command</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-42C16412-1C87-4EA4-A926-FE55079C4239__GUID-37280C07-B415-49F2-A8FA-0195321A4F5D">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">command</span></code> ：监听器控制实用程序命令。命令显示在以下示例输出中。
                        </p>
                        <p>当您输入命令作为<code class="codeph">HELP</code>的参数时，监听器控制实用程序将显示有关如何使用该命令的信息。当您输入不带参数的<code class="codeph">HELP</code> ，监听器控制实用程序会显示所有命令的列表。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-42C16412-1C87-4EA4-A926-FE55079C4239__GUID-0CDD975B-7957-494B-843C-1042CFDAF939">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; HELP以下操作可用星号（*）表示修饰符或扩展命令：exit quit reload services set * show * spawn start status stop trace version</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF713"></a><a id="NETRF714"></a><a id="NETRF716"></a><a id="NETRF717"></a><a id="NETRF718"></a><a id="NETRF719"></a><a id="NETRF109"></a><div class="sect3"><a id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961" name="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961"></a><h4 id="NETRF-GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961" class="sect4"><span class="enumeration_section">1.5.3</span>退出</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">QUIT</code>从监听器控制实用程序退出，并返回操作系统提示符。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961__GUID-7472986A-1ED3-4B05-9A9D-BF44AFC80057">目的</p>
                        <p>从Listener Control实用程序退出并返回到操作系统提示符。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961__GUID-BD57F6A4-ED14-451E-9997-02B9E62AD70D">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961__GUID-5FDE42D5-8A6D-4EB4-AAE5-842D704C2842">句法</p>
                        <p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt;退出</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961__GUID-0A881A65-0C26-4EB5-B18C-D65580B1A644">参数</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961__GUID-9000E10D-DC5D-4E48-806C-39D96C9AC2CF">使用说明</p>
                        <p>此命令与<code class="codeph">EXIT</code>命令相同。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0C765D76-6BDB-4428-A02F-2421CA5F8961__GUID-8F36C536-507B-4895-9ABE-A83C72B15779">例</p><pre class="pre codeblock"><code>LSNRCTL&gt;退出</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF720"></a><a id="NETRF721"></a><a id="NETRF723"></a><a id="NETRF724"></a><a id="NETRF725"></a><a id="NETRF110"></a><div class="sect3"><a id="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280" name="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280"></a><h4 id="NETRF-GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280" class="sect4"><span class="enumeration_section">1.5.4</span> RELOAD</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">RELOAD</code>重新加载<code class="codeph">listener.ora</code>文件，以便您可以在不停止监听器的情况下添加或更改静态配置的服务。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280__GUID-2C4E6ECA-A869-4CAB-B1E5-740086041595">目的</p>
                        <p>要重新加载<code class="codeph">listener.ora</code>文件。使用此命令可以添加或更改静态配置的服务，而无需实际停止侦听器。
                        </p>
                        <p>运行此命令时，先前使用侦听器动态注册的数据库服务，实例，服务处理程序和侦听端点将取消注册，然后再次注册。</p>
                        <p>要在不删除注册的情况下获得轻量级重新加载，请使用选项<code class="codeph">–with_ha</code> 。使用此选项可确保在重新加载期间注册的服务仍可供客户端使用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280__GUID-1B57B151-EB8E-4B17-9A38-C6F96C12A1D9">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280__GUID-362CEBE7-9B9A-4A90-8BD6-A64EDF7FEC80">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl RELOAD [-with_ha] <span class="variable" translate="no">listener_name</span></code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; RELOAD [-with_ha] <span class="variable" translate="no">listener_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280__GUID-83AC71D2-AEB2-4906-809E-24FF2FCD5453">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                        <p><code class="codeph">-with_ha</code> ：与<code class="codeph">RELOAD</code>使用的命令选项，指示在不删除现有注册的情况下完成<code class="codeph">listener.ora</code>的重新加载。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BE648E7-3AB8-4DE2-97DA-E136DF6F4280__GUID-9037C3B4-E7A0-4D45-B3A8-3AC44D232391">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; RELOAD连接到（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521）））命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF726"></a><a id="NETRF728"></a><a id="NETRF729"></a><a id="NETRF730"></a><a id="NETRF731"></a><a id="NETRF111"></a><div class="sect3"><a id="GUID-AFC6727A-76B7-4114-9910-5BB54B308833" name="GUID-AFC6727A-76B7-4114-9910-5BB54B308833"></a><h4 id="NETRF-GUID-AFC6727A-76B7-4114-9910-5BB54B308833" class="sect4"><span class="enumeration_section">1.5.5</span> SAVE_CONFIG</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SAVE_CONFIG</code>将监听器的当前配置状态保存到<code class="codeph">listener.ora</code>文件。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AFC6727A-76B7-4114-9910-5BB54B308833__GUID-8F699526-1598-4C55-B8FA-717EA56479A3">目的</p>
                        <p>保存侦听器的当前配置状态，包括跟踪级别，跟踪文件，跟踪目录以及记录到<code class="codeph">listener.ora</code>文件。任何更改都存储在<code class="codeph">listener.ora</code> ，尽可能保留格式，注释和大小写。在修改<code class="codeph">listener.ora</code>文件之前，会创建名为<code class="codeph">listener.bak</code>的文件备份。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFC6727A-76B7-4114-9910-5BB54B308833__GUID-84C0970C-6EE6-43D2-8A7D-B344126D25B0">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SAVE_CONFIG <span class="variable" translate="no">listener_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SAVE_CONFIG <span class="variable" translate="no">listener_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFC6727A-76B7-4114-9910-5BB54B308833__GUID-69759B05-5AAF-4673-8CB6-51F235808501">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFC6727A-76B7-4114-9910-5BB54B308833__GUID-F3A99AC2-B085-4F16-A352-77B31339BBE0">使用说明</p>
                        <p>使用此命令可以将所有运行时配置更改保存到<code class="codeph">listener.ora</code>文件中。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AFC6727A-76B7-4114-9910-5BB54B308833__GUID-FE92AA36-70C0-48A5-B5A3-94FBEA11C2F6">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SAVE_CONFIG监听器连接到（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521）））保存的LISTENER配置参数。监听器参数文件/oracle/network/admin/listener.ora旧参数文件/oracle/network/admin/listener.bak命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF732"></a><a id="NETRF733"></a><a id="NETRF735"></a><a id="NETRF736"></a><a id="NETRF737"></a><a id="NETRF738"></a><a id="NETRF112"></a><div class="sect3"><a id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408" name="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408"></a><h4 id="NETRF-GUID-1430CBAA-A2F5-405E-B09B-AB2774457408" class="sect4"><span class="enumeration_section">1.5.6</span>服务</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SERVICES</code>返回有关侦听器转发客户端连接请求的数据库服务，实例和服务处理程序的详细信息。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-57EDB442-5270-491F-9771-81EC5C1E9248">目的</p>
                        <p>获取有关侦听器转发客户端连接请求的数据库服务，实例和服务处理程序（调度程序和专用服务器）的详细信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-B1B14432-CE99-40CA-A193-EBE68A33F6CA">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-9DE322A5-45C2-4A81-9AA6-640814DE6BAB">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-7E06974B-0FDF-4F47-A7B9-2E1636229E09">参数</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SERVICES <span class="variable" translate="no">listener_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SERVICES <span class="variable" translate="no">listener_name</span></code></pre><p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-84B74CF2-78C5-49C2-B6DD-211083D31A6C">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">SET DISPLAYMODE</code>命令更改输出的格式和详细级别。
                     </p>
                     <div class="infoboxnotealso" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-9958F4A6-0A4B-4716-A8FD-43F1E915F75C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG-GUID-9CDAFB4E-A675-4DF6-90A2-09DF94B80648" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> ，提供有关“ <code class="codeph">SERVICES</code>输出的完整说明</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__GUID-2BFA7E74-5696-41D8-9952-F71245F67BD4">例</p>
                        <p>此示例显示默认显示模式下的<code class="codeph">SERVICES</code>输出。输出显示以下内容：</p>
                        <ul id="GUID-1430CBAA-A2F5-405E-B09B-AB2774457408__UL_LVM_3H2_HHB" style="list-style-type:disc">
                           <li>
                              <p>名为<code class="codeph">sales</code>的实例，属于两个服务<code class="codeph">sales1.us.example.com</code>和<code class="codeph">sales2.us.example.com</code> ，共有三个服务处理程序。
                              </p>
                           </li>
                           <li>
                              <p>服务<code class="codeph">sales1.us.example.com</code>仅由一个调度员处理。
                              </p>
                           </li>
                           <li>
                              <p>服务<code class="codeph">sales2.us.example.com</code>由一个调度程序和一个专用服务器处理，如以下输出中所指定。
                              </p>
                           </li>
                        </ul><pre class="pre codeblock"><code>LSNRCTL&gt;服务连接到（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc）（KEY = net）））服务摘要...服务“sales1.us.example.com”有1个实例。实例“sales”，状态READY，有1个此服务的处理程序...处理程序：“D000”已建立：0拒绝：0当前：0最大值：10000状态：准备好DISPATCHER &lt;machine：sales-server，pid：5696&gt;（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server） （PORT = 53411））服务“sales2.us.example.com”有1个实例。实例“sales”，状态READY，有2个处理程序用于此服务...处理程序：“DEDICATED”已建立：0拒绝：0状态：就绪LOCAL服务器“D001”已建立：0拒绝：0当前：0最大值：10000状态：准备好DISPATCHER &lt;machine：sales-server，pid：5698&gt;（ ADDRESS =（PROTOCOL = tcp）（HOST =销售服务器）（PORT = 52618））命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E" title="监听器控制实用程序命令SET DISPLAYMODE">SET DISPLAYMODE</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF739"></a><a id="NETRF740"></a><a id="NETRF742"></a><a id="NETRF743"></a><a id="NETRF744"></a><a id="NETRF745"></a><a id="NETRF113"></a><div class="sect3"><a id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597" name="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597"></a><h4 id="NETRF-GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597" class="sect4"><span class="enumeration_section">1.5.7</span> SET</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET</code>改变监听器的参数值。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597__GUID-A06A8524-758A-49F8-A79A-661C324662E6">目的</p>
                        <p>更改侦听器的参数值。在关闭侦听器之前，参数值更改仍然有效。要使更改成为永久更改，请使用SAVE_CONFIG命令将更改保存到<code class="codeph">listener.ora</code>文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597__GUID-02B34378-CDE9-4464-9DC3-7C865180B6FF">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597__GUID-D8688908-3058-4745-BAAB-12C7E72C6751">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET <span class="variable" translate="no">parameter</span></code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET <span class="variable" translate="no">parameter</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597__GUID-2CD3D338-5696-491B-AB8A-78D3AE4BC76D">参数</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph"><span class="variable" translate="no">parameter</span></code> ：用于修改其配置设置的<code class="codeph">SET</code>参数。参数显示在示例输出中。
                     </p>
                     <p>当您输入不带参数的<code class="codeph">SET</code> ，监听器控制实用程序会显示所有参数的列表。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597__GUID-13A10C50-C36B-45D8-A7E3-28A7C103E8AD">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果使用<code class="codeph">SET</code>命令更改除默认<code class="codeph">LISTENER</code>侦听<code class="codeph">LISTENER</code>侦听<code class="codeph">LISTENER</code>的配置，则使用<code class="codeph">SET CURRENT_LISTENER</code>命令设置要管理的侦听器的名称。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597__GUID-5E30F924-107C-4D06-8509-408F682986FA">例</p>
                     </div>
                     <!-- class="section" --><pre class="pre codeblock"><code>LSNRCTL&gt; SET以下操作可用于设置。星号（*）表示修饰符或扩展命令。current_listener displaymode inbound_connect_timeout log_file log_directory log_status rawmode save_config_on_stop trc_file trc_directory trc_level</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-AFC6727A-76B7-4114-9910-5BB54B308833" title="监听器控制实用程序命令SAVE_CONFIG将监听器的当前配置状态保存到listener.ora文件。">SAVE_CONFIG</a></li>
                           <li><a href="listener-control-utility.html#GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3" title="监听器控制实用程序命令SET CURRENT_LISTENER设置要管理的侦听器的名称。">SET CURRENT_LISTENER</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF746"></a><a id="NETRF748"></a><a id="NETRF749"></a><a id="NETRF750"></a><a id="NETRF751"></a><a id="NETRF114"></a><div class="sect3"><a id="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3" name="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3"></a><h4 id="NETRF-GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3" class="sect4"><span class="enumeration_section">1.5.8</span> SET CURRENT_LISTENER</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET CURRENT_LISTENER</code>设置要管理的侦听器的名称。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3__GUID-99DB2C22-21B5-4267-BFF5-03ECFB4C134B">目的</p>
                        <p>设置要管理的侦听器的名称。使用此命令设置侦听器名称后，可以发出通常需要<code class="codeph"><span class="variable" translate="no">listener_name</span></code>后续命令，而不指定侦听器。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3__GUID-51B41C99-A655-4B56-8588-462F8BCB1BD3">句法</p>
                        <p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET CURRENT_LISTENER <span class="variable" translate="no">listener_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3__GUID-07DCF19E-4271-4F95-8B64-73CAD54A96A8">参数</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3__GUID-92E4699A-3276-42A3-9F66-C2D6B788363A">使用说明</p>
                        <p>使用<code class="codeph">SET CURRENT_LISTENER</code>指定侦听器名称时，侦听器控件实用程序命令将对您使用此命令指定的侦听器名称起作用。您不必继续指定侦听器的名称。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D19254D2-C0C8-4855-9C1F-648CE928BAE3__GUID-80E7CDF9-A13D-48CE-97BE-44EE68C507D1">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET CURRENT_LISTENER lsnr当前监听器是lsnr</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF752"></a><a id="NETRF754"></a><a id="NETRF755"></a><a id="NETRF756"></a><a id="NETRF115"></a><div class="sect3"><a id="GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E" name="GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E"></a><h4 id="NETRF-GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E" class="sect4"><span class="enumeration_section">1.5.9</span>设置DISPLAYMODE</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET DISPLAYMODE</code> 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E__GUID-F2383CF9-5BEF-4C39-811F-9A2D6B02BB68">目的</p>
                        <p>更改<code class="codeph">SERVICES</code>和<code class="codeph">STATUS</code>命令的格式和详细程度。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E__GUID-4F2B56B5-D72D-4B41-B33B-C1725A5122A8">句法</p>
                        <p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET DISPLAYMODE {compat |正常|详细|生的}</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E__GUID-1A72E7A8-5B65-4C7E-A946-2C945197F573">参数</p>
                        <p>指定以下模式之一：</p>
                        <p><code class="codeph">compat</code> ：与早期版本的侦听器兼容的输出。
                        </p>
                        <p><code class="codeph">normal</code> ：格式化且具有描述性的输出。Oracle建议使用此模式。
                        </p>
                        <p><code class="codeph">verbose</code> ：从格式化和描述性输出中的侦听器接收的所有数据。
                        </p>
                        <p><code class="codeph">raw</code> ：从侦听器接收的所有数据，没有任何格式。仅当Oracle支持服务推荐时，才应使用此参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E__GUID-9423B4A4-1E26-40A8-84F7-A7A3EBFEC05C">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET DISPLAYMODE正常服务显示模式为NORMAL</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-1430CBAA-A2F5-405E-B09B-AB2774457408" title="监听器控制实用程序命令SERVICES返回有关侦听器转发客户端连接请求的数据库服务，实例和服务处理程序的详细信息。">服务</a></li>
                           <li><a href="listener-control-utility.html#GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428" title="监听器控制实用程序命令STATUS显示有关监听器的基本状态信息。">状态</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF757"></a><a id="NETRF758"></a><a id="NETRF759"></a><a id="NETRF760"></a><a id="NETRF116"></a><div class="sect3"><a id="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85" name="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85"></a><h4 id="NETRF-GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85" class="sect4"><span class="enumeration_section">1.5.10</span> SET INBOUND_CONNECT_TIMEOUT</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET INBOUND_CONNECT_TIMEOUT</code>指定客户端在建立网络连接后完成对侦听器的连接请求的时间（以秒为单位）。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85__GUID-5A9259A6-F953-4EE5-BD06-F868DD54C84C">目的</p>
                     </div>
                     <!-- class="section" -->
                     <p>指定客户端在建立网络连接后完成对侦听器的连接请求的时间（以秒为单位）。</p>
                     <p>如果侦听器未在指定的时间内收到客户端请求，则它将终止连接。此外，侦听器记录客户端的IP地址和<code class="codeph">ORA-12525:TNS: listener has not received client's request in time allowed</code>错误消息给<code class="codeph">listener.log</code>文件。
                     </p>
                     <div class="infoboxnotealso" id="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85__GUID-5D2957AC-7038-453C-8F3D-700D065CE7DC">
                        <p class="notep1">也可以看看：</p>
                        <p>有关指定客户端连接超时的其他信息，请参见“ <a href="../netag/configuring-profiles.html#NETAG-GUID-F199D890-73DB-4F8F-A37D-AACAC0909F0C" target="_blank"><span><cite>Oracle数据库网络服务管理员指南”</cite></span></a></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85__GUID-59DCB257-E4EF-420A-A107-D23530B75028">句法</p>
                        <p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET INBOUND_CONNECT_TIMEOUT <span class="variable" translate="no">time</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85__GUID-FFEFD676-9B0A-4416-80BF-C27EF4E9EF2F">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">time</span></code> ：以秒为单位的时间。默认设置为60秒。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-20787F6E-1848-4CDA-83DC-75D1FBD24D85__GUID-B7986E2B-77BC-4098-9B83-14C763AE76FB">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET INBOUND_CONNECT_TIMEOUT 2连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“inbound_connect_timeout”设置为2命令成功完成。</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF761"></a><a id="NETRF762"></a><a id="NETRF764"></a><a id="NETRF765"></a><a id="NETRF766"></a><a id="NETRF117"></a><div class="sect3"><a id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858" name="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858"></a><h4 id="NETRF-GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858" class="sect4"><span class="enumeration_section">1.5.11</span> SET log_directory目录</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET LOG_DIRECTORY</code>设置写入侦听器日志文件的目标目录。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858__GUID-1BCA70EF-C252-480E-BA5C-FF12D80EAA19">目的</p>
                        <p>设置写入侦听器日志文件的目标目录。默认情况下，日志文件将写入<code>ORACLE_HOME/network/log</code>目录。
                        </p>
                        <div class="infoboxnote" id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858__GUID-E1E45738-9224-404B-A7F7-8CEE0D09889B">
                           <p class="notep1">注意：</p>
                           <p>仅当未启用自动诊断存储库（ADR）时，此命令才有效。默认设置是启用ADR，并使用日志目录<code>ORACLE_HOME/log/diag/ <span class="variable" translate="no">product_type</span></code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858__GUID-C56F7B42-9D2F-41C0-988A-6700A3D70CA7">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858__GUID-2D561B1A-496B-430F-9AC7-D43116A87F85">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET LOG_DIRECTORY <span class="variable" translate="no">directory</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET LOG_DIRECTORY <span class="variable" translate="no">directory</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858__GUID-43009C86-359E-4E12-816B-4518ED760E01">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">directory</span></code> ：侦听器日志文件的目录路径。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-418C7DDD-CCC8-4C5F-97A0-45AE34B11858__GUID-16D5C154-2849-4A6C-99BA-910CC9175A62">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET LOG_DIRECTORY / usr / oracle / admin连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“log_directory”设置为/ usr / oracle / admin命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF1882"></a><a id="NETRF1883"></a><a id="NETRF1884"></a><a id="NETRF1885"></a><a id="NETRF1886"></a><a id="NETRF118"></a><div class="sect3"><a id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5" name="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5"></a><h4 id="NETRF-GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5" class="sect4"><span class="enumeration_section">1.5.12</span> SET LOG_FILE</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET LOG_FILE</code>设置监听器日志文件的名称。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5__GUID-535F3C82-43A8-40A7-9FCC-31FF9D7040BF">目的</p>
                        <p>设置侦听器日志文件的名称。默认情况下，日志文件名是<code class="codeph">listener.log</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5__GUID-1F70D275-6259-4495-B621-4BEEE14968D9">
                           <p class="notep1">注意：</p>
                           <p>仅当未启用自动诊断存储库（ADR）时，此命令才有效。默认设置是启用ADR，并使用日志目录<code>ORACLE_HOME/log/diag/ <span class="variable" translate="no">product_type</span></code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5__GUID-AEA60ABF-BB6B-441D-AF0A-9EBD5ACBA4B9">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5__GUID-645B9D49-D23E-45F6-A38F-C64CC8D47D7A">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET LOG_FILE <span class="variable" translate="no">file_name</span></code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET LOG_FILE <span class="variable" translate="no">file_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5__GUID-994B0718-EC68-472C-BE0A-58A37870681A">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">file_name</span></code> ：侦听器日志的文件名。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA6DE6D3-C2BE-40A1-A2B7-AEA8A4C48DC5__GUID-4B1F05BF-CFB9-4261-B1EA-0739FE8BBB25">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET LOG_FILE list.log连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“log_file”设置为list.log命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF773"></a><a id="NETRF774"></a><a id="NETRF776"></a><a id="NETRF777"></a><a id="NETRF778"></a><a id="NETRF119"></a><div class="sect3"><a id="GUID-4ED87851-6459-4ED5-878F-92D413250327" name="GUID-4ED87851-6459-4ED5-878F-92D413250327"></a><h4 id="NETRF-GUID-4ED87851-6459-4ED5-878F-92D413250327" class="sect4"><span class="enumeration_section">1.5.13</span> SET LOG_STATUS</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET LOG_STATUS</code>打开或关闭监听器登录。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4ED87851-6459-4ED5-878F-92D413250327__GUID-0679270D-14A3-41B5-B234-202DE458270C">目的</p>
                        <p>打开或关闭监听器登录。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4ED87851-6459-4ED5-878F-92D413250327__GUID-70273925-AA56-4ACD-A2A2-6176286E8949">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4ED87851-6459-4ED5-878F-92D413250327__GUID-FBDF7D9E-070B-4813-933F-264A776C8146">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET LOG_STATUS {on |关}</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET LOG_STATUS {on |关}</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4ED87851-6459-4ED5-878F-92D413250327__GUID-94311D90-1F0F-463A-B576-BBE9F4C485FE">参数</p>
                        <p><code class="codeph">on</code> ：打开登录。
                        </p>
                        <p><code class="codeph">off</code> ：关闭注销。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4ED87851-6459-4ED5-878F-92D413250327__GUID-B593C987-3A68-4B75-9FF4-88D5B24F0946">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET LOG_STATUS连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“log_status”设置为ON命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF784"></a><a id="NETRF786"></a><a id="NETRF787"></a><a id="NETRF788"></a><a id="NETRF121"></a><div class="sect3"><a id="GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32" name="GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32"></a><h4 id="NETRF-GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32" class="sect4"><span class="enumeration_section">1.5.14</span> SET SAVE_CONFIG_ON_STOP</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET SAVE_CONFIG_ON_STOP</code>指定在使用<code class="codeph">STOP</code>命令停止侦听器时， <code class="codeph">SET</code>命令对侦听器的参数值所做的更改是否保存到<code class="codeph">listener.ora</code>文件中。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32__GUID-718ED388-E33A-48B5-9BA7-47BBF9D874A4">目的</p>
                        <p>指定在使用<code class="codeph">STOP</code>命令停止侦听器时， <code class="codeph">SET</code>命令对侦听器的参数值所做的更改是否保存到<code class="codeph">listener.ora</code>文件中。
                        </p>
                        <p>保存更改时，监听器控制实用程序会尝试保留格式，注释和字母大小写。在命令修改<code class="codeph">listener.ora</code>文件之前，它会创建一个名为<code class="codeph">listener.bak</code>的文件备份。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <p>要立即保存所有参数，请使用<code class="codeph">SAVE_CONFIG</code>命令。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32__GUID-A6BFFD31-2E05-43A9-9C0E-416F4A63C435">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET SAVE_CONFIG_ON_STOP {on |关}</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET SAVE_CONFIG_ON_STOP {on |关}</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32__GUID-5F03738B-3B4F-4128-9257-27D82F6E8FBF">参数</p>
                        <p><code class="codeph">on</code> ：将配置保存到<code class="codeph">listener.ora</code> 。
                        </p>
                        <p><code class="codeph">off</code> ：不保存配置到<code class="codeph">listener.ora</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9CDB2EF6-96E5-45E5-B87D-F1E4F5DF5E32__GUID-710BB9B7-4ABF-4A50-866B-6A92CFAD9FA8">例</p>
                     </div>
                     <!-- class="section" --><pre class="pre codeblock"><code>LISTENER参数“save_config_on_stop”上的LSNRCTL&gt; SET SAVE_CONFIG_ON_STOP设置为ON命令已成功完成</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597" title="监听器控制实用程序命令SET改变监听器的参数值。">组</a></li>
                           <li><a href="listener-control-utility.html#GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA" title="监听器控制实用程序命令STOP将停止指定的侦听器。">停</a></li>
                           <li><a href="listener-control-utility.html#GUID-AFC6727A-76B7-4114-9910-5BB54B308833" title="监听器控制实用程序命令SAVE_CONFIG将监听器的当前配置状态保存到listener.ora文件。">SAVE_CONFIG</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF1887"></a><a id="NETRF1888"></a><a id="NETRF1889"></a><a id="NETRF1890"></a><a id="NETRF1891"></a><a id="NETRF123"></a><div class="sect3"><a id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2" name="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2"></a><h4 id="NETRF-GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2" class="sect4"><span class="enumeration_section">1.5.15</span> SET TRC_DIRECTORY</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET TRC_DIRECTORY</code>设置写入监听器跟踪文件的目标目录。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2__GUID-DBAC0291-2667-4921-8AC0-F6E9D2759091">目的</p>
                        <p>设置写入侦听器跟踪文件的目标目录。默认情况下，跟踪文件将写入<code>ORACLE_HOME/network/trace</code>目录。
                        </p>
                        <div class="infoboxnote" id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2__GUID-3250DC36-90F0-413A-9F04-286F97923F19">
                           <p class="notep1">注意：</p>
                           <p>仅当未启用自动诊断存储库（ADR）时，此命令才有效。默认设置是启用ADR，并使用日志目录<code>ORACLE_HOME/log/diag/ <span class="variable" translate="no">product_type</span></code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2__GUID-3CE35A82-82EF-4B24-98E0-D0C81DC1D07F">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2__GUID-5443914D-A460-4130-AA7A-4BAA5242B9F5">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET TRC_DIRECTORY <span class="variable" translate="no">directory</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET TRC_DIRECTORY <span class="variable" translate="no">directory</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2__GUID-EB5B5C3A-33B3-4007-8C03-90F1230C3755">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">directory</span></code> ：侦听器跟踪文件的目录路径。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC9190C4-3857-42B1-8DA3-4116C0B29FA2__GUID-858D2A8B-72BF-4BC1-99B8-6297DD615B9F">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET TRC_DIRECTORY / usr / oracle / admin连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“trc_directory”设置为/ usr / oracle / admin命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF1892"></a><a id="NETRF1893"></a><a id="NETRF1894"></a><a id="NETRF1895"></a><a id="NETRF1896"></a><a id="NETRF124"></a><div class="sect3"><a id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4" name="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4"></a><h4 id="NETRF-GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4" class="sect4"><span class="enumeration_section">1.5.16</span> SET TRC_FILE</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET TRC_FILE</code>设置监听器跟踪文件的名称。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4__GUID-2C686EC4-8498-4EF8-83E6-7CFFED8F4411">目的</p>
                        <p>设置侦听器跟踪文件的名称。默认情况下，跟踪文件名是<code class="codeph">listener.trc</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4__GUID-FA9DD5F0-50FF-4F79-824C-94AFCBE07075">
                           <p class="notep1">注意：</p>
                           <p>仅当未启用自动诊断存储库（ADR）时，此命令才有效。默认设置是启用ADR，并使用日志目录<code>ORACLE_HOME/log/diag/ <span class="variable" translate="no">product_type</span></code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4__GUID-4015BEBF-5B6F-45AC-8650-3F743E593F3E">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4__GUID-18DB8BDB-A564-4B63-BEDE-019944AF17FD">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET TRC_FILE <span class="variable" translate="no">file_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET TRC_FILE <span class="variable" translate="no">file_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4__GUID-F39FB377-D789-4BD4-8F82-4C873A4A8844">参数</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph"><span class="variable" translate="no">file_name</span></code> ：侦听器跟踪的文件名。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B4BFBB4C-CA67-46C3-A80B-A49D90D469C4__GUID-EBBCB0E4-CF73-42AB-9E18-ED43FC8A3F9E">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET TRC_FILE list.trc连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“trc_file”设置为list.trc命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF807"></a><a id="NETRF808"></a><a id="NETRF810"></a><a id="NETRF811"></a><a id="NETRF812"></a><a id="NETRF813"></a><a id="NETRF125"></a><div class="sect3"><a id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E" name="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E"></a><h4 id="NETRF-GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E" class="sect4"><span class="enumeration_section">1.5.17</span>设置TRC_LEVEL</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SET TRC_LEVEL</code>监听器设置特定的跟踪级别。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__GUID-7B5B6CB9-F784-4843-8998-CE6B02FF0267">目的</p>
                        <p>为侦听器设置特定的跟踪级别。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__GUID-9C9EDC30-2C82-4A97-A0D7-592D30C32F03">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__GUID-DFBDA776-7276-433F-A6F2-87559E81523F">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SET TRC_LEVEL <span class="variable" translate="no">level</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET TRC_LEVEL <span class="variable" translate="no">level</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__GUID-D971216E-2D32-4860-9C25-FA8326DC1C3D">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">level</span></code> ：以下跟踪级别之一：</p>
                        <ul id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__UL_NDS_YX2_HHB" style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">off</code>没有跟踪输出</p>
                           </li>
                           <li>
                              <p><code class="codeph">user</code>的用户跟踪信息</p>
                           </li>
                           <li>
                              <p><code class="codeph">admin</code>用于管理跟踪信息</p>
                           </li>
                           <li>
                              <p><code class="codeph">support</code> Oracle Support Services跟踪信息</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__GUID-4DD46237-A4F2-4159-949D-62EB3376A3F6">使用说明</p>
                        <p>此命令与<code class="codeph">TRACE</code>命令具有相同的功能。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FCA1904A-0C3D-415A-AC06-C05320C38D9E__GUID-789D8852-3F3A-4AD3-8528-EF0322F56060">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SET TRC_LEVEL admin连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））LISTENER参数“trc_level”设置为admin命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6" title="监听器控制实用程序命令TRACE为侦听器设置跟踪。">跟踪</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF814"></a><a id="NETRF815"></a><a id="NETRF817"></a><a id="NETRF818"></a><a id="NETRF819"></a><a id="NETRF126"></a><div class="sect3"><a id="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217" name="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217"></a><h4 id="NETRF-GUID-1148E1DB-72D7-416E-B5AE-098093DAA217" class="sect4"><span class="enumeration_section">1.5.18</span>显示</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">SHOW</code>显示监听器的当前参数值。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217__GUID-6AC9DCF9-B6FD-42EA-825F-72465A7D0B5C">目的</p>
                     </div>
                     <!-- class="section" -->
                     <p>查看侦听器的当前参数值。</p>
                     <p>所有<code class="codeph">SET</code>参数都具有等效的<code class="codeph">SHOW</code>参数。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217__GUID-64C6DD18-8484-4C09-90B6-4657211786F0">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217__GUID-F496E26D-1A70-4E31-8266-E6F772BEB42F">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SHOW <span class="variable" translate="no">parameter</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SHOW <span class="variable" translate="no">parameter</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217__GUID-623B3557-EE8B-4402-9340-A8F4806A9BE3">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">parameter</span></code> ：要查看其配置设置的参数。参数显示在示例输出中。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <p>当您在没有参数的情况下输入<code class="codeph">SHOW</code> ，Listener Control实用程序会显示所有参数的列表。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1148E1DB-72D7-416E-B5AE-098093DAA217__GUID-A66B3E81-2629-4D29-9FD9-0B5C0C50C499">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; SHOW SHOW提供以下属性：星号（*）表示修饰符或扩展命令：current_listener displaymode inbound_connect_timeout log_file log_directory log_status rawmode save_config_on_stop trc_file trc_directory trc_level</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-287F06EC-2A68-4899-9E71-3C81B8DB1597" title="监听器控制实用程序命令SET改变监听器的参数值。">组</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF820"></a><a id="NETRF821"></a><a id="NETRF823"></a><a id="NETRF824"></a><a id="NETRF825"></a><a id="NETRF127"></a><div class="sect3"><a id="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251" name="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251"></a><h4 id="NETRF-GUID-E9C71077-EB22-4FF1-955F-E4D95573B251" class="sect4"><span class="enumeration_section">1.5.19</span> SPAWN</h4>
                  <div>
                     <p>监听器控制实用程序命令SPAWN启动存储在运行侦听器的计算机上的程序，该程序在<code class="codeph">listener.ora</code>文件中列出了别名。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251__GUID-0CE7314C-17C8-46D0-9D6D-4895F43A14AF">目的</p>
                     </div>
                     <!-- class="section" -->
                     <p>启动存储在运行侦听器的计算机上的程序，以及在<code class="codeph">listener.ora</code>文件中使用别名列出的程序。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251__GUID-0240EF07-C614-48C0-8E01-F22A742765DE">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251__GUID-B4F5431A-2B8A-48D6-8249-711D8B17C43A">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl SPAWN <span class="variable" translate="no">listener_name</span> <span class="variable" translate="no">alias</span> （arguments =' <span class="variable" translate="no">arg1</span> ， <span class="variable" translate="no">arg2</span> ，...“）</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; SPAWN <span class="variable" translate="no">listener_name</span> <span class="variable" translate="no">alias</span> （arguments =' <span class="variable" translate="no">arg1</span> ， <span class="variable" translate="no">arg2</span> ，...“）</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251__GUID-D02EEE2C-1DE5-4430-9861-51F4FB0D7D15">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                        <p><code class="codeph"><span class="variable" translate="no">alias</span></code> ：要生成的程序的别名由<code class="codeph">listener.ora</code>文件条目指定，类似于以下内容：</p><pre class="pre codeblock"><code><span class="variable" translate="no">alias</span> =（PROGRAM =（NAME =）（ARGS =）（ENVS =））</code></pre><p>例如：</p><pre class="pre codeblock"><code>nstest =（PROGRAM =（NAME = nstest）（ARGS = test1）（ENVS ='ORACLE_HOME = / usr / oracle'））</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E9C71077-EB22-4FF1-955F-E4D95573B251__GUID-CD5391A6-89C1-4D46-8823-65516C91D295">例</p>
                        <p>然后可以使用以下命令生成<code class="codeph">nstest</code>程序（如上一节所示）：</p><pre class="pre codeblock"><code>lsnrctl SPAWN <span class="variable" translate="no">listener_name</span> nstest</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF826"></a><a id="NETRF827"></a><a id="NETRF829"></a><a id="NETRF830"></a><a id="NETRF831"></a><a id="NETRF832"></a><a id="NETRF128"></a><div class="sect3"><a id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202" name="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202"></a><h4 id="NETRF-GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202" class="sect4"><span class="enumeration_section">1.5.20</span> START</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">START</code>启动命名监听器。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-6BFD6613-6BDA-4637-9725-FFDBDBD103F9">目的</p>
                        <p>启动命名侦听器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-2F32E855-0878-4233-89EC-C91681596126">先决条件</p>
                        <p>监听器不能运行。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-E728A5F8-B077-4D2F-ADF0-10CB1B8B7FE3">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl START <span class="variable" translate="no">listener_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; START <span class="variable" translate="no">listener_name</span></code></pre><div class="infoboxnote" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-7B92131C-9553-4506-84B9-F5649FF7ED0A">
                           <p class="notep1">注意：</p>
                           <p>在Microsoft Windows上，如果数据库是随Oracle Home User一起安装的，则该实用程序可以提示输入密码。密码是Oracle Home User的操作系统密码。仅当侦听器服务不存在时才会显示提示，并且需要在启动侦听器时创建提示。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-ED3AA932-6AFF-435A-A69A-A2C666E59302">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-31D1CBF3-904F-45BD-AA49-9D29F7128A75">使用说明</p>
                        <p>要启动在<code class="codeph">listener.ora</code>文件中配置的<code class="codeph">listener.ora</code> <code class="codeph">LISTENER</code> ，其名称不是<code class="codeph">LISTENER</code> ，请包含该名称。
                        </p>
                        <p>例如，如果侦听器名称为<code class="codeph">tcp_lsnr</code> ，请输入：</p><pre class="pre codeblock"><code>lsnrctl START tcp_lsnr</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; START tcp_lsnr</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-5F22527D-052A-4FD7-8266-DE3276246446">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; START开始/私人/ sales_group / sales / bin / tnslsnr：请稍候......TNSLSNR for Linux：版本18.0.0.0.0系统参数文件是$ ORACLE_HOME / network / admin / listener.ora写入$ ORACLE_BASE / diag / tnslsnr / node_name / listener / alert / log.xml的日志消息倾听：（DESCRIPTION = （ADDRESS =（PROTOCOL = tcp）（HOST =销售服务器）（PORT = 1521）））连接到（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521）））状态LISTENER ------------------------ Alias LISTENER版本TNSLSNR for Linux：版本18.0.0.0.0开始日期21-JAN-2018 21:50 ：49正常运行时间0天0小时。 0分钟0秒跟踪级别关闭安全性开启：本地操作系统认证SNMP关闭监听器参数文件$ ORACLE_HOME / network / admin / listener.ora监听器日志文件$ ORACLE_BASE / diag / tnslsnr / node_name / listener / alert / log.xml监听端点摘要.. 。（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521）））监听器不支持服务命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-BC8E6BF1-0780-4B47-98F5-E1D2A4DC4202__GUID-5BF23699-00C0-4E42-AD14-8DEF9A7957D4">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Oracle Home用户的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netrf&amp;id=NTQRF-GUID-0D0DC406-98C7-467A-A5C8-2FBCF5B1A9F8" target="_blank"><span><cite>适用于Microsoft Windows的Oracle数据库管理员参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF833"></a><a id="NETRF834"></a><a id="NETRF836"></a><a id="NETRF837"></a><a id="NETRF838"></a><a id="NETRF839"></a><a id="NETRF129"></a><div class="sect3"><a id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428" name="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428"></a><h4 id="NETRF-GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428" class="sect4"><span class="enumeration_section">1.5.21</span>状态</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">STATUS</code>显示有关监听器的基本状态信息。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-7436F658-462E-4084-9F13-9F034163589D">目的</p>
                        <p>显示有关侦听器的基本状态信息，包括侦听器配置设置摘要，侦听协议地址以及向侦听器注册的服务摘要。</p>
                        <div class="infoboxnote" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-743DF9E9-B5B3-424F-ABBD-47D37D91ED23">
                           <p class="notep1">注意：</p>
                           <p>您还可以通过Oracle Enterprise Manager Cloud Control控制台获取侦听器的状态。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-D6F1A8EA-B35A-44C4-874E-F1FEFE780869">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-B1F80BA2-A209-47E9-A676-5FD8AA41B2CC">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl STATUS <span class="variable" translate="no">listener_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; STATUS <span class="variable" translate="no">listener_name</span> </code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-39C9562F-BE3B-41D5-841E-03D2B92DF414">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-6FD1DF12-088E-420A-B738-50C0BC430D09">使用说明</p>
                        <p>SET DISPLAYMODE命令更改输出细节的格式和级别。</p>
                        <div class="infoboxnotealso" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-0D337410-9849-4ECD-8235-A9D6F10B725D">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">STATUS</code>输出的完整说明，请<code class="codeph">STATUS</code> <a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG-GUID-98FBD991-DBAA-4F3D-B866-C12E13BE9645" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__GUID-7C396FEA-E788-48C0-A1DB-66C8D7B0DF3F">例</p>
                        <p>以下示例显示默认显示模式下的<code class="codeph">STATUS</code>输出。输出包含：</p>
                        <ul id="GUID-88A9E4D0-8A55-43B1-9E6A-1EEF4F500428__UL_KQ3_43F_HHB" style="list-style-type:disc">
                           <li>
                              <p>监听器配置设置</p>
                           </li>
                           <li>
                              <p>听力端点摘要</p>
                           </li>
                           <li>
                              <p>服务摘要，它是<code class="codeph">SERVICES</code>命令输出的缩写版本</p>
                           </li>
                        </ul><pre class="pre codeblock"><code>LSNRCTL&gt; STATUS连接到（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc）（KEY = net）））LISTENER的状态----------------------- -  Alias LISTENER版本TNSLSNR for Linux：版本18.0.0.0.0  - 生产开始日期12-JAN-2018 12:02:00正常运行时间0天0小时。 5分钟。 29秒跟踪级别支持安全关闭SNMP关闭监听器参数文件/oracle/network/admin/listener.ora监听器日志文件/oracle/network/log/listener.log监听器跟踪文件/oracle/network/trace/listener.trc监听端点摘要...（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc）（KEY = net）））（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521）））（DESCRIPTION =（ADDRESS =（ PROTOCOL = tcps）（HOST =销售服务器）（PORT = 2484）））服务摘要......服务“sales1.us.example.com”有1个实例。实例“sales”，状态READY，有1个此服务的处理程序...服务“sales2.us.example.com”有1个实例。实例“sales”，状态READY，有2个处理程序用于此服务...命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="listener-control-utility.html#GUID-61FF2C17-87B5-4270-B76A-9CD3C764945E" title="监听器控制实用程序命令SET DISPLAYMODE">SET DISPLAYMODE</a></li>
                           <li><a href="listener-control-utility.html#GUID-1430CBAA-A2F5-405E-B09B-AB2774457408" title="监听器控制实用程序命令SERVICES返回有关侦听器转发客户端连接请求的数据库服务，实例和服务处理程序的详细信息。">服务</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="NETRF840"></a><a id="NETRF841"></a><a id="NETRF843"></a><a id="NETRF844"></a><a id="NETRF845"></a><a id="NETRF130"></a><div class="sect3"><a id="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA" name="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA"></a><h4 id="NETRF-GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA" class="sect4"><span class="enumeration_section">1.5.22</span>停止</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">STOP</code>停止指定的侦听器。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA__GUID-397BA3AD-6592-47B9-AC58-BA6021932A72">目的</p>
                        <p>要停止指定的侦听器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA__GUID-62385A58-BD3B-4C8C-A085-DE6C80934E83">先决条件</p>
                        <p>监听器必须正在运行。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA__GUID-17AD4980-CD0E-47CE-841E-77BA73BF159F">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl STOP <span class="variable" translate="no">listener_name</span>
 </code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; STOP <span class="variable" translate="no">listener_name</span> </code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA__GUID-B8135889-4866-47A8-B4AE-58E10FFA561E">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6D0FE95-047C-4641-82D6-187DD269E1BA__GUID-3FF30AEA-EC29-4F7B-93D0-C75ECD64A1F6">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; STOP连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））命令成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF846"></a><a id="NETRF848"></a><a id="NETRF849"></a><a id="NETRF850"></a><a id="NETRF851"></a><a id="NETRF131"></a><div class="sect3"><a id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6" name="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6"></a><h4 id="NETRF-GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6" class="sect4"><span class="enumeration_section">1.5.23</span> TRACE</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">TRACE</code>为侦听器设置跟踪。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6__GUID-A3D93C1E-43BB-420A-9132-E45EA7DEAF72">目的</p>
                        <p>为侦听器设置跟踪。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6__GUID-D034DD51-D1DA-40F3-A0EC-9E11A524ABC2">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl跟踪<span class="variable" translate="no">level</span> <span class="variable" translate="no">listener_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt;跟踪<span class="variable" translate="no">level</span> <span class="variable" translate="no">listener_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6__GUID-DE5A6A0F-057E-4A05-A099-AC65078CA60B">参数</p>
                        <p><code class="codeph"><span class="variable" translate="no">level</span></code> ：以下跟踪级别之一：</p>
                        <ul id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6__UL_UV3_RJF_HHB" style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">off</code>没有跟踪输出</p>
                           </li>
                           <li>
                              <p><code class="codeph">user</code>的用户跟踪信息</p>
                           </li>
                           <li>
                              <p><code class="codeph">admin</code>用于管理跟踪信息</p>
                           </li>
                           <li>
                              <p><code class="codeph">support</code> Oracle Support Services跟踪信息</p>
                           </li>
                        </ul>
                        <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：如果未使用默认名称<code class="codeph">LISTENER</code> ，请指定侦听器名称。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6__GUID-438ADF15-344D-46F8-BE9C-724E6DD0F050">使用说明</p>
                        <p>此命令与<code class="codeph">SET TRC_LEVEL</code>命令具有相同的功能。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BDDB7569-A3A9-4E8C-8906-68DFC5440BC6__GUID-999475EE-234A-433B-8573-05BC4C54F553">例</p><pre class="pre codeblock"><code>LSNRCTL&gt; TRACE ADMIN lsnr连接到（ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））打开的跟踪文件：/oracle/network/trace/listener.trc命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETRF852"></a><a id="NETRF853"></a><a id="NETRF855"></a><a id="NETRF856"></a><a id="NETRF857"></a><a id="NETRF132"></a><div class="sect3"><a id="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2" name="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2"></a><h4 id="NETRF-GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2" class="sect4"><span class="enumeration_section">1.5.24</span>版本</h4>
                  <div>
                     <p>监听器控制实用程序命令<code class="codeph">VERSION</code>显示监听器控制实用程序的当前版本。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2__GUID-FDFB5A97-1A65-4408-A3E0-DA23F0AA84EE">目的</p>
                        <p>显示监听器控制实用程序的当前版本。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2__GUID-F98BA1BC-854C-464B-B858-E4D64508D0D6">先决条件</p>
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2__GUID-F6FC802D-7171-4602-8359-8BD0EC70D152">句法</p>
                        <p>从操作系统：</p><pre class="pre codeblock"><code>lsnrctl VERSION <span class="variable" translate="no">listener_name</span>
</code></pre><p>从监听器控制实用程序：</p><pre class="pre codeblock"><code>LSNRCTL&gt; VERSION <span class="variable" translate="no">listener_name</span></code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2__GUID-86724BD8-F66A-4362-8275-5545D771192D">参数</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph"><span class="variable" translate="no">listener_name</span></code> ：侦听器名称，如果未使用默认名称<code class="codeph">LISTENER</code> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FF561B88-BFE8-4A97-A193-ED61DB8009D2__GUID-45C791BE-088F-4EC3-950F-144F5068F97E">例</p><pre class="pre codeblock"><code>LSNRCTL&gt;版本监听器连接到ADDRESS =（PROTOCOL = TCP）（HOST =销售服务器）（PORT = 1521））TNSLSNR for Linux：版本19.0.0.0.0 TNS for Linux：版本19.0.0.0.0 Oracle Bequeath NT协议适用于Linux的适配器：版本19.0.0.0.0适用于Linux的Unix域套接字IPC NT协议适配器：版本19.0.0.0.0适用于Linux的TCP / IP NT协议适配器：版本19.0.0.0.0命令已成功完成</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="listener-control-utility.html#GUID-287B2E94-5228-4454-A1C4-AF4F577FAF86" title="使用Listener Control实用程序命令来管理和配置侦听器。">监听器控制实用程序命令</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13315.using-oracle-precompilers-and-oracle-call-interface.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to use Oracle precompilers and the Oracle Call Interface"></meta>
      <meta name="description" content="This chapter describes how to use Oracle precompilers and the Oracle Call Interface"></meta>
      <title>使用Oracle预编译器和Oracle调用接口</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator&#39;s Reference"></meta>
      <meta property="og:description" content="This chapter describes how to use Oracle precompilers and the Oracle Call Interface"></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator&#39;s Reference for Linux and UNIX System-Based Operating Systems"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="administrators-reference-linux-and-unix-system-based-operating-systems.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T05:04:28-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96356-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-oracle-net-services.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SQLLoader-and-PLSQL-demonstrations.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Administrator&#39;s Reference for Linux and UNIX System-Based Operating Systems"></meta>
    <meta name="dcterms.isVersionOf" content="UNXAR"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-oracle-net-services.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SQLLoader-and-PLSQL-demonstrations.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle预编译器和Oracle调用接口</li>
            </ol>
            <a id="GUID-72752D8C-AC25-4F0A-A26F-3C3C795097FF" name="GUID-72752D8C-AC25-4F0A-A26F-3C3C795097FF"></a><a id="UNXAR006"></a>
            
            <h2 id="UNXAR-GUID-72752D8C-AC25-4F0A-A26F-3C3C795097FF" class="sect2"><span class="enumeration_chapter">6</span>使用Oracle预编译器和Oracle调用接口</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何使用Oracle预编译器和Oracle调用接口</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-87230DB0-5225-45C4-A156-246B4F850D4C" title="要将应用程序链接到客户端静态库，必须先生成它。">Oracle预编译器概述</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892">客户端应用程序的位长支持</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-08DBE306-5D22-4B05-91EC-98334F0D6CC0">Pro * C / C ++预编译器</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-78CF7AC6-6329-4D1B-BEBE-23279FFE6F55">Pro * COBOL预编译器</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-B51B83C6-C840-4BD2-ACF6-C55418ACEF17">Pro * FORTRAN预编译器</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-3B23F5E7-50B9-47BD-BEFC-87679F46744A">用于ADA的SQL *模块</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-BD220FF0-5F73-40C8-B208-085A6B2E6CE0">OCI和OCCI</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-AC40DC7C-4E3A-4157-80DB-E102F6C94680">使用64位驱动程序运行Oracle JDBC / OCI程序</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-0AF7D0E1-0C36-413C-BA17-BB1C85E2E5E9">自定义生成文件</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-B0521D95-B6E9-4E71-9989-DF1682FE7534">更正未定义的符号</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-BC52E5BF-653D-4057-8307-AF2C713725CC">多线程应用程序</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-B0CCF23A-007C-413D-AF40-D554F02C9897">使用信号处理程序</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-C9935092-BE14-4512-809B-FBB83FB4EA7F">XA功能</a></p>
                  </li>
               </ul>
            </div><a id="UNXAR186"></a><div class="props_rev_3"><a id="GUID-87230DB0-5225-45C4-A156-246B4F850D4C" name="GUID-87230DB0-5225-45C4-A156-246B4F850D4C"></a><h3 id="UNXAR-GUID-87230DB0-5225-45C4-A156-246B4F850D4C" class="sect3"><span class="enumeration_section">6.1</span> Oracle预编译器概述</h3>
               <div>
                  <p>Oracle预编译器是应用程序开发工具，用于将Oracle数据库的SQL语句与使用高级语言编写的程序相结合。Oracle预编译器与ANSI SQL兼容，用于开发和打开与Oracle数据库或任何其他ANSI SQL数据库管理系统一起运行的自定义应用程序。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-E9DBA78F-4D0C-4531-9614-31895033D487">预编译器配置文件</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-52FD3318-5A43-4437-95B7-16BDA8C90E5F">重新链接预编译器可执行文件</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-30DBE438-EAD7-4FA2-9C6E-81BED90BBDC6">所有预编译器的共同问题</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-F34EF682-AC84-4CB2-AF4A-DC3CF36CA7CC">静态和动态链接</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB">客户端共享和静态库</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-87230DB0-5225-45C4-A156-246B4F850D4C__GUID-4E6A2BF9-85A3-4DA5-91C0-538D3B6BB53B">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ORACLE_HOME</code>此部分是指<code class="codeph">ORACLE_HOME</code>时创建，同时通过使用管理员安装型安装Oracle数据库客户端19C。
                           </p>
                        </li>
                        <li>
                           <p>如果已配置只读Oracle主目录，则必须将演示目录从ORACLE_HOME复制到ORACLE_BASE_HOME。有关更多信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=LADBI-GUID-9C4D0762-7F36-4819-9D00-90ACE68E482B" target="_blank"><span><cite>Oracle数据库安装指南Linux版</cite></span></a> ”。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="UNXAR188"></a><a id="UNXAR187"></a><div class="props_rev_3"><a id="GUID-E9DBA78F-4D0C-4531-9614-31895033D487" name="GUID-E9DBA78F-4D0C-4531-9614-31895033D487"></a><h4 id="UNXAR-GUID-E9DBA78F-4D0C-4531-9614-31895033D487" class="sect4"><span class="enumeration_section">6.1.1</span>预编译器配置文件</h4>
                  <div>
                     <div class="section">
                        <p>Oracle预编译器的配置文件位于<code class="codeph">$ORACLE_HOME/precomp/admin</code>目录中。
                        </p>
                        <p>下表列出了每个预编译器的配置文件的名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E9DBA78F-4D0C-4531-9614-31895033D487__G40004">
                        <p class="titleintable">表6-1 Oracle预编译器的系统配置文件</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle预编译器的系统配置文件" width="100%" border="1" summary="This 2 column table lists the system configuration files for Oracle Precompilers. Column 1 is the product. Column 2 is the configuration file." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="72%" id="d8297e398">产品</th>
                                 <th align="left" valign="bottom" width="28%" id="d8297e401">配置文件</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="72%" id="d8297e406" headers="d8297e398 ">
                                    <p>PRO * C / C ++</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e406 d8297e401 ">
                                    <p><code class="codeph">pcscfg.cfg</code><a id="d8297e413" class="indexterm-anchor"></a><a id="d8297e415" class="indexterm-anchor"></a><a id="d8297e419" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="72%" id="d8297e424" headers="d8297e398 ">
                                    <p>PRO * COBOL</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e424 d8297e401 ">
                                    <p><code class="codeph">pcbcfg.cfg</code><a id="d8297e431" class="indexterm-anchor"></a><a id="d8297e433" class="indexterm-anchor"></a><a id="d8297e437" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="72%" id="d8297e442" headers="d8297e398 ">
                                    <p>Pro * FORTRAN（POWER系统上的IBM AIX（64位），HP-UX和Oracle Solaris）</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e442 d8297e401 ">
                                    <p><code class="codeph">pccfor.cfg</code><a id="d8297e449" class="indexterm-anchor"></a><a id="d8297e451" class="indexterm-anchor"></a><a id="d8297e455" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="72%" id="d8297e460" headers="d8297e398 ">
                                    <p>对象类型转换器</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e460 d8297e401 ">
                                    <p><code class="codeph">ottcfg.cfg</code><a id="d8297e467" class="indexterm-anchor"></a><a id="d8297e469" class="indexterm-anchor"></a><a id="d8297e473" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="72%" id="d8297e478" headers="d8297e398 ">
                                    <p>用于Ada的SQL *模块（POWER系统上的IBM AIX（64位））</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e478 d8297e401 ">
                                    <p><code class="codeph">pmscfg.cfg</code><a id="d8297e485" class="indexterm-anchor"></a><a id="d8297e487" class="indexterm-anchor"></a><a id="d8297e491" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="UNXAR189"></a><div class="props_rev_3"><a id="GUID-52FD3318-5A43-4437-95B7-16BDA8C90E5F" name="GUID-52FD3318-5A43-4437-95B7-16BDA8C90E5F"></a><h4 id="UNXAR-GUID-52FD3318-5A43-4437-95B7-16BDA8C90E5F" class="sect4"><span class="enumeration_section">6.1.2</span>重新链接预编译器可执行文件</h4>
                  <div>
                     <p>使用<code class="codeph">$ORACLE_HOME/precomp/lib/ins_precomp.mk</code> <a id="d8297e591" class="indexterm-anchor"></a><a id="d8297e595" class="indexterm-anchor"></a><a id="d8297e599" class="indexterm-anchor"></a> make file以重新链接所有预编译器可执行文件。要手动重新链接特定的预编译器可执行文件，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f ins_precomp.mk relink exename = <span class="italic">executable_name</span>
</pre><p>此命令在<code class="codeph">$ORACLE_HOME/precomp/lib</code>目录中创建新的可执行文件，然后将其移动到<code class="codeph">$ORACLE_HOME/bin</code>目录。
                     </p>
                     <p>在前面的示例中，将<span class="italic"><code class="codeph">executable</code></span>替换为<a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-52FD3318-5A43-4437-95B7-16BDA8C90E5F__BABDIFFI" title="此2列表列出了产品及其相应可执行文件的名称。第1列是产品。第2列是可执行文件。">表6-2中</a>列出的产品可执行文件之一。<a id="d8297e626" class="indexterm-anchor"></a><a id="d8297e630" class="indexterm-anchor"></a></p>
                     <p>下表列出了Oracle预编译器的可执行文件：</p>
                     <div class="tblformal" id="GUID-52FD3318-5A43-4437-95B7-16BDA8C90E5F__BABDIFFI">
                        <p class="titleintable">表6-2 Oracle预编译器的可执行文件</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle预编译器的可执行文件" width="100%" border="1" summary="This 2 column table lists products and the names of their corresponding executables. Column 1 is the product. Column 2 is the executable." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="70%" id="d8297e646">产品</th>
                                 <th align="left" valign="bottom" width="30%" id="d8297e649">可执行文件</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="70%" id="d8297e654" headers="d8297e646 ">
                                    <p>Pro * FORTRAN 32位（Power Systems上的Oracle Solaris，HP-UX和IBM AIX（64位））</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d8297e654 d8297e649 ">
                                    <p><code class="codeph">PROFOR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="70%" id="d8297e662" headers="d8297e646 ">
                                    <p>Pro * COBOL 32位（Power Systems上的Oracle Solaris，HP-UX和IBM AIX（64位））</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d8297e662 d8297e649 ">
                                    <p><code class="codeph">procob</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="70%" id="d8297e670" headers="d8297e646 ">
                                    <p>Pro * COBOL（POWER Solaris上的Oracle Solaris，HP-UX和IBM AIX（64位））</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d8297e670 d8297e649 ">
                                    <p><code class="codeph">procob</code>或<code class="codeph">rtsora</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="70%" id="d8297e681" headers="d8297e646 ">
                                    <p>Pro * C / C ++ 32位（HP-UX）</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d8297e681 d8297e649 ">
                                    <p><code class="codeph">PROC</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="70%" id="d8297e689" headers="d8297e646 ">
                                    <p>Pro * FORTRAN（HP-UX）</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d8297e689 d8297e649 ">
                                    <p><code class="codeph">PROFOR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="70%" id="d8297e697" headers="d8297e646 ">
                                    <p>用于Ada的SQL *模块（POWER系统上的IBM AIX（64位））</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d8297e697 d8297e649 ">
                                    <p><code class="codeph">modada</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="UNXAR193"></a><div class="props_rev_3"><a id="GUID-30DBE438-EAD7-4FA2-9C6E-81BED90BBDC6" name="GUID-30DBE438-EAD7-4FA2-9C6E-81BED90BBDC6"></a><h4 id="UNXAR-GUID-30DBE438-EAD7-4FA2-9C6E-81BED90BBDC6" class="sect4"><span class="enumeration_section">6.1.3</span>所有预编译器的共同问题</h4>
                  <div>
                     <p>以下问题对所有预编译器都是通用的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>大写到小写的转换<a id="d8297e791" class="indexterm-anchor"></a></p>
                           <p>在C以外的语言中，编译器将大写函数或子程序名称转换为小写。这可能导致<code class="codeph">No such user exists</code>错误消息。如果收到此错误消息，请验证选项文件中的函数或子程序名称的大小写与IAPXTB表中使用的大小写匹配。
                           </p>
                        </li>
                        <li>
                           <p>供应商调试程序<a id="d8297e803" class="indexterm-anchor"></a><a id="d8297e807" class="indexterm-anchor"></a></p>
                           <p>预编译器和供应商提供的调试器可能不兼容。Oracle不保证使用调试器运行的程序在没有调试器的情况下运行时执行相同的操作。</p>
                        </li>
                        <li>
                           <p><code class="codeph">IRECLEN</code>和<code class="codeph">ORECLEN</code>参数的值<a id="d8297e820" class="indexterm-anchor"></a><a id="d8297e824" class="indexterm-anchor"></a><a id="d8297e826" class="indexterm-anchor"></a></p>
                           <p><code class="codeph">IRECLEN</code>和<code class="codeph">ORECLEN</code>参数没有最大值。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="UNXAR194"></a><div class="props_rev_3"><a id="GUID-F34EF682-AC84-4CB2-AF4A-DC3CF36CA7CC" name="GUID-F34EF682-AC84-4CB2-AF4A-DC3CF36CA7CC"></a><h4 id="UNXAR-GUID-F34EF682-AC84-4CB2-AF4A-DC3CF36CA7CC" class="sect4"><span class="enumeration_section">6.1.4</span>静态和动态链接</h4>
                  <div>
                     <p>您可以使用预编译器和OCI或OCCI应用程序静态或动态链接Oracle库。通过静态链接，整个应用程序的库和对象链接到一个可执行程序中。因此，应用程序可执行文件可能会变得非常大。</p>
                     <p>通过动态链接，执行代码部分存储在可执行程序中，部分存储在应用程序在运行时动态链接的库中。在运行时链接的库称为动态库或共享库。动态链接的好处是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>减少磁盘空间要求：多个应用程序或对同一应用程序的调用可以使用相同的动态库。</p>
                        </li>
                        <li>
                           <p>减少主存储器要求：相同的动态库映像仅加载到主存储器中一次，并且可以由多个应用程序共享。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="UNXAR418"></a><a id="UNXAR195"></a><div class="props_rev_3"><a id="GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB" name="GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB"></a><h4 id="UNXAR-GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB" class="sect4"><span class="enumeration_section">6.1.5</span>客户端共享库和静态库</h4>
                  <div>
                     <p>客户端共享库和静态库位于<code class="codeph">$ORACLE_HOME/lib.</code> 如果使用Oracle提供的<code class="codeph">demo_</code> <span class="italic"><code class="codeph">product</code></span> <code class="codeph">.mk</code>文件链接应用程序，则默认情况下链接客户端共享库。
                     </p>
                     <p>如果共享库路径环境变量设置不包含包含客户端共享库的目录，则在启动可执行文件时，您可能会看到类似于以下行之一的错误消息：</p><pre class="oac_no_warn" dir="ltr">无法加载库libclntsh.a无法打开共享库：... / libclntsh.sl.10.1 libclntsh.so.10.1：无法打开文件：errno = 2无法打开库：... / libclntsh.dylib.10.1无法映射libclntsh.so</pre><p>要避免此错误，请设置共享库路径环境变量以指定相应的目录。下表显示了此环境变量名称的示例设置。如果平台同时支持32位和64位应用程序，请确保指定正确的目录，具体取决于要运行的应用程序。</p>
                     <div class="tblformal" id="GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB__GUID-898A318F-7A51-4C2E-B3FB-85AF8C61D4FD">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 column table lists sample settings for the shared library path environment variable. Column 1 is the platform. Column 2 is the environmental variable. Column 3 is a sample setting." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="36%" id="d8297e1058">平台</th>
                                 <th align="left" valign="bottom" width="28%" id="d8297e1061">环境变量</th>
                                 <th align="left" valign="bottom" width="36%" id="d8297e1064">样品设定</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d8297e1069" headers="d8297e1058 ">
                                    <p>Oracle Solaris（32位和64位应用程序）和Linux</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e1069 d8297e1061 ">
                                    <p><code class="codeph">LD_LIBRARY_PATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d8297e1069 d8297e1064 ">
                                    <p><code class="codeph">$ ORACLE_HOME / lib目录</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d8297e1081" headers="d8297e1058 ">
                                    <p>POWER Systems上的IBM AIX（32位和64位应用程序）</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e1081 d8297e1061 ">
                                    <p><code class="codeph">LIBPATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d8297e1081 d8297e1064 ">
                                    <p><code class="codeph">$ ORACLE_HOME / lib目录</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d8297e1093" headers="d8297e1058 ">
                                    <p>HP-UX（32位应用程序）</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e1093 d8297e1061 ">
                                    <p><code class="codeph">SHLIB_PATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d8297e1093 d8297e1064 ">
                                    <p><code class="codeph">$ ORACLE_HOME / lib目录</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d8297e1105" headers="d8297e1058 ">
                                    <p>HP-UX（64位应用程序）</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e1105 d8297e1061 ">
                                    <p><code class="codeph">LD_LIBRARY_PATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d8297e1105 d8297e1064 ">
                                    <p><code class="codeph">$ ORACLE_HOME / lib目录</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>客户端共享库在安装期间自动创建。如果必须重新创建它，请完成以下过程：</p>
                     <ol>
                        <li>
                           <p>退出使用客户端共享库的所有客户端应用程序，包括所有Oracle客户端应用程序，如SQL * Plus和Oracle Recovery Manager。</p>
                        </li>
                        <li>
                           <p>以<code class="codeph">oracle</code>用户身份登录，然后运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ $ ORACLE_HOME / bin / genclntsh</pre></li>
                     </ol>
                     <div class="section">
                        <p class="subhead3" id="GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB__GUID-52AED854-5AFD-4449-AC93-8CDD03B27A3A">非线程客户端共享库</p>
                        <div class="infoboxnote" id="GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB__GUID-86B15978-6B61-46A4-8FBE-E840E45BD4E8">
                           <p class="notep1">注意：</p>
                           <p>本节中的信息适用于HP-UX系统。</p>
                        </div>
                        <p>在HP-UX上，您可以使用非线程客户端共享库。但是，您不能将此库与任何使用或依赖于线程的OCI应用程序一起使用。</p>
                        <p>要将此库用于不使用线程的应用程序，请运行以下命令以构建32位和64位的OCI应用程序：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_rdbms.mk build_nopthread EXE = oci02 OBJS = oci02.o</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0A71F60A-3765-477C-AC3D-B146E21936C4" name="GUID-0A71F60A-3765-477C-AC3D-B146E21936C4"></a><h4 id="UNXAR-GUID-0A71F60A-3765-477C-AC3D-B146E21936C4" class="sect4"><span class="enumeration_section">6.1.6</span>生成客户端静态库</h4>
                  <div>
                     <p>要将应用程序链接到客户端静态库，必须先生成它。</p>
                     <div class="section">在Oracle数据库安装期间不会生成客户端静态库（ <code class="codeph">libclntst12.a</code> ）。要将应用程序链接到客户端静态库，必须先生成它：</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将用户切换到Oracle安装所有者（ <code class="codeph">oracle</code> ）。</span></li>
                        <li class="stepexpand"><span>设置<code class="codeph">ORACLE_HOME</code>环境变量以指定Oracle数据库安装使用的Oracle主目录。例如：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Bourne，Bash或Korn shell：</p><pre class="pre codeblock"><code>$ ORACLE_HOME = / u01 / app / oracle / product / 19.0.0 / dbhome_1 $ export ORACLE_HOME</code></pre></li>
                                 <li>
                                    <p>C shell：</p><pre class="pre codeblock"><code>％setenv ORACLE_HOME /u01/app/oracle/product/19.0.0/dbhome_1</code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>输入以下命令：</span><div><pre class="pre codeblock"><code>$ $ ORACLE_HOME / bin / genclntst</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="UNXAR198"></a><a id="UNXAR197"></a><div class="props_rev_3"><a id="GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892" name="GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892"></a><h3 id="UNXAR-GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892" class="sect3"><span class="enumeration_section">6.2</span>客户端应用程序的位长支持</h3>
               <div>
                  <p>以下平台支持客户端应用程序类型（32位或64位）：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle Solaris</p>
                     </li>
                     <li>
                        <p>Linux x86-64</p>
                     </li>
                     <li>
                        <p>IBM：Linux on System z</p>
                     </li>
                     <li>
                        <p>POWER Systems上的IBM AIX（64位）</p>
                     </li>
                     <li>
                        <p>HP-UX Itanium</p>
                     </li>
                  </ul>
                  <p>下表列出了32位和64位客户端共享库：</p>
                  <div class="tblformal" id="GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892__GUID-31780BDC-37F3-47D0-BB26-82EE9E7126AD">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 column table lists the 32-bit and 64-bit client shared libraries. Column 1 is the platform. Column 2 is the 32–bit client shared library. Column 3 is the 64–bit client shared library." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d8297e1384">平台</th>
                              <th align="left" valign="bottom" width="43%" id="d8297e1387">32位客户端共享库</th>
                              <th align="left" valign="bottom" width="33%" id="d8297e1390">64位客户端共享库</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d8297e1395" headers="d8297e1384 ">
                                 <p>Oracle Solaris，Linux x86-64和IBM：Linux on System z</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d8297e1395 d8297e1387 "><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / lib目录/ libclntsh.so</pre></td>
                              <td align="left" valign="top" width="33%" headers="d8297e1395 d8297e1390 "><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / lib目录/ libclntsh.so</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d8297e1405" headers="d8297e1384 ">
                                 <p>POWER Systems上的IBM AIX（64位）</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d8297e1405 d8297e1387 "><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / lib / libclntsh.a $ ORACLE_HOME / lib / libclntsh.so</pre></td>
                              <td align="left" valign="top" width="33%" headers="d8297e1405 d8297e1390 "><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / lib / libclntsh.a $ ORACLE_HOME / lib / libclntsh.so</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d8297e1415" headers="d8297e1384 ">
                                 <p>HP-UX Itanium</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d8297e1415 d8297e1387 ">
                                 <p><code class="codeph">$ ORACLE_HOME / lib目录/ libclntsh.sl</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d8297e1415 d8297e1390 ">
                                 <p><code class="codeph">$ ORACLE_HOME / lib目录/ libclntsh.sl</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>要实现混合字大小的安装：</p>
                  <ol>
                     <li>
                        <p>运行以下命令以生成32位和64位客户端共享库：</p><pre class="oac_no_warn" dir="ltr">$ $ ORACLE_HOME / bin / genclntsh</pre></li>
                     <li>
                        <p>根据平台，在以下某个环境变量中包括所需的32位和64位客户端共享库的路径：</p>
                        <div class="tblformal" id="GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892__GUID-E4C4B75A-09E1-4EE8-9320-4689980CBDCB">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="90%" border="1" summary="This table lists the path environment variables" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="44%" id="d8297e1445">平台</th>
                                    <th align="left" valign="bottom" width="56%" id="d8297e1448">环境变量</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d8297e1453" headers="d8297e1445 ">
                                       <p>Oracle Solaris，Linux x86-64，IBM：Linux on System z和HP-UX</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d8297e1453 d8297e1448 ">
                                       <p><code class="codeph">LD_LIBRARY_PATH</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d8297e1461" headers="d8297e1445 ">
                                       <p>POWER Systems上的IBM AIX（64位）</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d8297e1461 d8297e1448 ">
                                       <p><code class="codeph">LIBPATH</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d8297e1469" headers="d8297e1445 ">
                                       <p>HP-UX（32位客户端应用程序）</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d8297e1469 d8297e1448 ">
                                       <p><code class="codeph">SHLIB_PATH</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </li>
                  </ol>
                  <div class="section">
                     <p class="subhead2" id="GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892__GUID-F9BE52D3-DAE9-4114-8846-E41507CFC410">构建32位Pro * C和OCI客户应用程序</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>如果操作系统同时支持32位和64位Pro * C和Oracle调用接口（OCI）客户应用程序，则可以在以下文件中找到有关构建32位Pro * C和OCI应用程序的更多信息：</p>
                     <div class="tblformal" id="GUID-6D01257F-4FF4-49DA-9683-83A0BEE43892__GUID-41586353-F4ED-4644-BFF3-B031BD0051C3">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the make files for Pro*C and OCI applications" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d8297e1490">有关的信息。 。 。</th>
                                 <th align="left" valign="bottom" width="69%" id="d8297e1493">请参阅以下Make Files。 。 。</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8297e1498" headers="d8297e1490 ">
                                    <p>构建32位Pro * C应用程序</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8297e1498 d8297e1493 ">
                                    <p><code class="codeph">$ ORACLE_HOME /预补偿/演示的/ proc / demo_proc32.mk</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8297e1506" headers="d8297e1490 ">
                                    <p>构建32位OCI应用程序</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8297e1506 d8297e1493 ">
                                    <p><code class="codeph">$ ORACLE_HOME / RDBMS /演示/ demo_rdbms32.mk</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="UNXAR199"></a><div class="props_rev_3"><a id="GUID-08DBE306-5D22-4B05-91EC-98334F0D6CC0" name="GUID-08DBE306-5D22-4B05-91EC-98334F0D6CC0"></a><h3 id="UNXAR-GUID-08DBE306-5D22-4B05-91EC-98334F0D6CC0" class="sect3"><span class="enumeration_section">6.3</span> Pro * C / C ++预编译器</h3>
               <div>
                  <p>在使用Pro * C / C ++预编译器之前，请验证是否正确安装了正确版本的操作系统编译器。</p>
                  <div class="infoboxnotealso" id="GUID-08DBE306-5D22-4B05-91EC-98334F0D6CC0__GUID-A0FE9DC8-3D7E-4CF7-9AE5-205CE0AB5082">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=GINST" target="_blank"><span class="italic">“Oracle数据库安装指南”</span></a> ，了解有关支持的编译器版</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/unxar&amp;id=LNPCC3028" target="_blank"><span class="italic">Pro * C / C ++程序员指南</span></a> ，了解有关Pro * C / C ++预编译器和接口功能的信息</p>
                        </li>
                     </ul>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-E5EF71F7-F650-4E97-8233-A0A7ABD41B80">Pro * C / C ++演示程序</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84">Pro * C / C ++用户程序</a></p>
                     </li>
                  </ul>
               </div><a id="UNXAR200"></a><div class="props_rev_3"><a id="GUID-E5EF71F7-F650-4E97-8233-A0A7ABD41B80" name="GUID-E5EF71F7-F650-4E97-8233-A0A7ABD41B80"></a><h4 id="UNXAR-GUID-E5EF71F7-F650-4E97-8233-A0A7ABD41B80" class="sect4"><span class="enumeration_section">6.3.1</span> Pro * C / C ++演示程序</h4>
                  <div>
                     <p>提供演示程序以显示Pro * C / C ++预编译器的功能。有三种类型的演示程序：C，C ++和Object程序。所有演示程序都位于<code class="codeph">$ORACLE_HOME/precomp/demo/proc</code>目录中。默认情况下，所有程序都与客户端共享库动态链接。
                     </p>
                     <p>要运行演示程序，程序需要<code class="codeph">demobld.sql</code>脚本创建的演示表在JONES模式中存在密码。
                     </p>
                     <p><code class="codeph">demobld.sql</code>脚本位于读写Oracle主目录中的<code class="codeph">$ORACLE_HOME/sqlplus/demo/</code>目录中以及只读Oracle主目录中的<code class="codeph">$(orabasehome)/sqlplus/demo/</code>目录中。
                     </p>
                     <div class="infoboxnote" id="GUID-E5EF71F7-F650-4E97-8233-A0A7ABD41B80__GUID-C17DF533-DB79-47F8-9B2D-8FAF5A175B6F">
                        <p class="notep1">注意：</p>
                        <p>在创建演示之前，您必须解锁JONES帐户并设置密码。</p>
                     </div>
                     <p>使用<code class="codeph">demo_proc.mk</code> <a id="d8297e1753" class="indexterm-anchor"></a> make file来创建演示程序。<code class="codeph">demo_proc.mk</code>文件位于读写Oracle主目录中的<code class="codeph">$ORACLE_HOME/precomp/demo/proc/</code>目录中，位于只读Oracle主目录中的<code class="codeph">$(orabasehome/precomp/demo/proc/</code>中。例如，要预编译，编译和链接<code class="codeph">sample1</code>演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk sample1</pre><div class="infoboxnote" id="GUID-E5EF71F7-F650-4E97-8233-A0A7ABD41B80__GUID-9492DBE1-384C-4209-A27F-E7A13C9A097D">
                        <p class="notep1">注意：</p>
                        <p>在POWER Systems上的IBM AIX（64位）上，为确保演示程序正确编译，请在以下示例中包含<code class="codeph">make</code>命令的<code class="codeph">-r</code>选项。例如：</p><pre class="oac_no_warn" dir="ltr">$ make -r -f demo_proc.mk sample1</pre></div>
                     <p>要为Pro * C / C ++创建所有C演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk样本</pre><p>要为Pro * C / C ++创建所有C ++演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk cppsamples</pre><p>要为Pro * C / C ++创建所有Object演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk object_samples</pre><p>某些演示程序要求您运行位于<code class="codeph">$ORACLE_HOME/precomp/demo/sql</code>目录中的SQL脚本。如果不运行该脚本，则会显示一条提示您运行该脚本的消息。
                     </p>
                     <p>要构建演示程序并运行相应的SQL脚本，请在命令行中包含<code class="codeph">make</code> macro参数<code class="codeph">RUNSQL=run</code> 。例如，要创建<code class="codeph">sample9</code>演示程序并运行所需的<code class="codeph">$ORACLE_HOME/precomp/demo/sql/sample9.sql</code>脚本，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk sample9 RUNSQL = run</pre><p>要创建所有Object演示程序并运行所有必需的SQL脚本，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk object_samples RUNSQL = run</pre></div>
               </div><a id="UNXAR201"></a><div class="props_rev_3"><a id="GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84" name="GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84"></a><h4 id="UNXAR-GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84" class="sect4"><span class="enumeration_section">6.3.2</span> Pro * C / C ++用户程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">$ORACLE_HOME/precomp/demo/proc/demo_proc.mk</code> make文件来创建用户程序。此make文件构建32位或64位用户程序。您也可以使用<code class="codeph">demo_proc32.mk</code> <a id="d8297e1925" class="indexterm-anchor"></a><a id="d8297e1927" class="indexterm-anchor"></a> make file来构建32位用户程序。下表显示了可用于使用Pro * C / C ++构建32位和64位用户程序的make文件：</p>
                     <div class="tblformal" id="GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84__GUID-CA4DD7F6-BF0E-4226-8F02-83A84DC7FB01">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 table lists the make files that you can use with Pro*C/C++ to build 31-bit, 32-bit, or 64-bit user programs. Column 1 is the platform. Column 2 is the 64–bit make file. Column 3 is the 32–bit make file. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d8297e1941">平台</th>
                                 <th align="left" valign="bottom" width="28%" id="d8297e1944">64位制作文件</th>
                                 <th align="left" valign="bottom" width="37%" id="d8297e1947">32位制作文件</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d8297e1952" headers="d8297e1941 ">
                                    <p>Oracle Solaris，Linux x86-64，IBM：System z上的Linux，POWER Systems上的IBM AIX（64位）和HP-UX</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d8297e1952 d8297e1944 ">
                                    <p><code class="codeph">demo_proc.mk</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d8297e1952 d8297e1947 ">
                                    <p><code class="codeph">demo_proc32.mk</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84__GUID-AF4A3352-4C27-46EF-82FA-B290F6CD4DE8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关创建用户程序的更多信息，请参阅make文件</p>
                     </div>
                     <div class="infoboxnote" id="GUID-29CDE75C-5259-48E0-BB85-5082FF3C4C84__GUID-00D64EAD-B3E6-494C-B8A2-E997EF087D11">
                        <p class="notep1">注意：</p>
                        <p>在POWER Systems上的IBM AIX（64位）上，为确保程序正确编译，请为以下示例中使用的<code class="codeph">make</code>命令指定<code class="codeph">-r</code>选项。
                        </p>
                     </div>
                     <p>要使用<code class="codeph">demo_proc.mk</code> make文件创建程序，请运行类似于以下内容的命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk <span class="italic">target</span> OBJS =“ <span class="italic">objfile1</span> <span class="italic">objfile2</span> ...”EXE = <span class="italic">exename</span>
</pre><p>在这个例子中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">target</code></span>是您要使用的make文件目标</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">objfilen</code></span>是链接程序的目标文件</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">exename</code></span>是可执行程序</p>
                        </li>
                     </ul>
                     <p>例如，要从Pro * C / C ++源文件<code class="codeph">myprog.pc</code>创建程序<code class="codeph">myprog</code> ，请运行以下命令之一，具体取决于您要创建的可执行文件的源和类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于与客户端共享库动态链接的C源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk build OBJS = myprog.o EXE = myprog</pre></li>
                        <li>
                           <p>对于与客户端共享库静态链接的C源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk build_static OBJS = myprog.o EXE = myprog</pre></li>
                        <li>
                           <p>对于与客户端共享库动态链接的C ++源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk cppbuild OBJS = myprog.o EXE = myprog</pre></li>
                        <li>
                           <p>对于与客户端共享库静态链接的C ++源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk cppbuild_static OBJS = myprog.o EXE = myprog</pre></li>
                     </ul>
                  </div>
               </div>
            </div><a id="UNXAR203"></a><a id="UNXAR202"></a><div class="props_rev_3"><a id="GUID-78CF7AC6-6329-4D1B-BEBE-23279FFE6F55" name="GUID-78CF7AC6-6329-4D1B-BEBE-23279FFE6F55"></a><h3 id="UNXAR-GUID-78CF7AC6-6329-4D1B-BEBE-23279FFE6F55" class="sect3"><span class="enumeration_section">6.4</span> Pro * COBOL预编译器</h3>
               <div>
                  <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-78CF7AC6-6329-4D1B-BEBE-23279FFE6F55__BABBJHHC" title="这个2列表显示了Pro * COBOL命名约定。第1列是项目。第2列是命名约定。">表6-3</a>显示了Pro * COBOL预编译器的命名约定。
                  </p>
                  <div class="tblformal" id="GUID-78CF7AC6-6329-4D1B-BEBE-23279FFE6F55__BABBJHHC">
                     <p class="titleintable">表6-3 Pro * COBOL命名约定</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Pro * COBOL命名约定" width="100%" border="1" summary="This 2 column table shows Pro*COBOL naming conventions. Column 1 is the item. Column 2 is the naming convention." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="44%" id="d8297e2152">项目</th>
                              <th align="left" valign="bottom" width="56%" id="d8297e2155">命名惯例</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d8297e2160" headers="d8297e2152 ">
                                 <p>可执行文件</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d8297e2160 d8297e2155 ">
                                 <p><code class="codeph">procob</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d8297e2168" headers="d8297e2152 ">
                                 <p>演示目录</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d8297e2168 d8297e2155 ">
                                 <p><code class="codeph">procob2</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d8297e2176" headers="d8297e2152 ">
                                 <p>制作文件</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d8297e2176 d8297e2155 ">
                                 <p><code class="codeph">demo_procob.mk</code>或<code class="codeph">demo_procob_32.mk</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>Pro * COBOL支持静态链接，动态链接或动态加载的程序。动态链接的程序使用客户端共享库。可动态加载的程序使用位于<code class="codeph">$ORACLE_HOME/bin</code>目录中的<code class="codeph">rtsora</code>可执行文件。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-D675EA78-E280-4619-A178-6C14A6CDCD74">Pro * COBOL环境变量</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-9DE325DF-8A0B-4C84-AB75-8458123EA789">Pro * COBOL Oracle运行时系统</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-0136455E-1E0A-4A80-9607-450B5889BF11">Pro * COBOL演示程序</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-7197EE64-241C-4205-8F70-86052D427505">Pro * COBOL用户程序</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-455A7B49-DAE8-4C10-9AE6-FEDC578E0F1E">格式预编译选项</a></p>
                     </li>
                  </ul>
               </div><a id="UNXAR204"></a><div class="props_rev_3"><a id="GUID-D675EA78-E280-4619-A178-6C14A6CDCD74" name="GUID-D675EA78-E280-4619-A178-6C14A6CDCD74"></a><h4 id="UNXAR-GUID-D675EA78-E280-4619-A178-6C14A6CDCD74" class="sect4"><span class="enumeration_section">6.4.1</span> Pro * COBOL环境变量</h4>
                  <div>
                     <p>本节介绍Pro * COBOL所需的环境变量：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F">Micro Focus Server Express COBOL编译器</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-12A78D15-C202-4C9A-9F88-5070849EF93D">Acucorp ACUCOBOL-GT COBOL编译器</a></p>
                        </li>
                     </ul>
                  </div><a id="UNXAR206"></a><a id="UNXAR207"></a><a id="UNXAR208"></a><a id="UNXAR205"></a><div class="props_rev_3"><a id="GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F" name="GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F"></a><h5 id="UNXAR-GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F" class="sect5"><span class="enumeration_section">6.4.1.1</span> Micro Focus Server Express COBOL编译器</h5>
                     <div>
                        <p>要使用Micro Focus Server Express COBOL编译器，必须设置<code class="codeph">COBDIR</code>和<code class="codeph">PATH</code>环境变量以及共享库路径环境变量。
                        </p>
                        <div class="infoboxnotealso" id="GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F__GUID-146DC2C0-B8ED-4058-B166-609B1F5D3B9F">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-E9D8538B-4CFC-4F5F-B25E-4C98A356E6BB">客户端共享和静态库</a> ”</span>部分，以获取有关共享库路径环境变量的信息</p>
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F__GUID-47115BA3-BBBD-4D70-A8C5-8CC9DB83A561">COBDIR</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>将<code class="codeph">COBDIR</code>环境变量设置为安装编译器的目录。例如，如果编译器安装在<code class="codeph">/opt/lib/cobol</code>目录中，则运行以下命令：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Bourne，Bash或Korn shell：</p><pre class="oac_no_warn" dir="ltr">$ COBDIR = / opt / lib / cobol $ export COBDIR</pre></li>
                              <li>
                                 <p>C shell：</p><pre class="oac_no_warn" dir="ltr">％setenv COBDIR / opt / lib / cobol</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F__GUID-0452B877-4431-4401-9A9A-078EE48D4627">路径</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>设置<code class="codeph">PATH</code>环境变量以包含<code class="codeph">$COBDIR/bin</code>目录：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Bourne，Bash或Korn shell：</p><pre class="oac_no_warn" dir="ltr">$ PATH = $ COBDIR / bin：$ PATH $ export PATH</pre></li>
                              <li>
                                 <p>C shell：</p><pre class="oac_no_warn" dir="ltr">％setenv PATH $ {COBDIR} / bin：$ {PATH}</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-284C21DD-43D1-4C35-AC81-D80F46CA9A3F__GUID-CCCE1D3F-3B53-41B1-B147-EF2A35D2D968">共享库路径</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>将<code class="codeph">LIBPATH</code> ， <code class="codeph">LD_LIBRARY_PATH</code>或<code class="codeph">SHLIB_PATH</code>环境变量设置为安装编译器库的目录。例如，如果平台使用<code class="codeph">LD_LIBRARY_PATH</code>环境变量并且编译器库安装在<code class="codeph">$COBDIR/coblib</code>目录中，则运行以下命令：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Bourne，Bash或Korn shell：</p><pre class="oac_no_warn" dir="ltr">$ LD_LIBRARY_PATH = $ {LD_LIBRARY_PATH}：$ COBDIR / coblib $ export LD_LIBRARY_PATH</pre></li>
                              <li>
                                 <p>C shell：</p><pre class="oac_no_warn" dir="ltr">％setenv LD_LIBRARY_PATH $ {LD_LIBRARY_PATH}：$ COBDIR / coblib</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="UNXAR210"></a><a id="UNXAR211"></a><a id="UNXAR212"></a><a id="UNXAR209"></a><div class="props_rev_3"><a id="GUID-12A78D15-C202-4C9A-9F88-5070849EF93D" name="GUID-12A78D15-C202-4C9A-9F88-5070849EF93D"></a><h5 id="UNXAR-GUID-12A78D15-C202-4C9A-9F88-5070849EF93D" class="sect5"><span class="enumeration_section">6.4.1.2</span> Acucorp ACUCOBOL-GT COBOL编译器</h5>
                     <div>
                        <p>要使用Acucorp ACUCOBOL-GT COBOL编译器，必须设置<code class="codeph">A_TERMCAP</code> ， <code class="codeph">A_TERM</code> ， <code class="codeph">PATH</code>和<code class="codeph">LD_LIBRARY_PATH</code>环境变量。如果<code class="codeph">LD_LIBRARY_PATH</code>环境变量设置不包含正确的目录，则在编译或运行程序时将显示类似于以下内容的错误消息：</p><pre class="oac_no_warn" dir="ltr">runcbl：加载共享库时出错：libclntsh.so：无法打开共享对象文件：没有这样的文件或目录</pre><div class="section">
                           <p class="subhead3" id="GUID-12A78D15-C202-4C9A-9F88-5070849EF93D__GUID-56989B39-FB70-4313-A427-C5BB9A3657E6">A_TERMCAP和A_TERM</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>设置<code class="codeph">A_TERMCAP</code>环境变量以指定<code class="codeph">a_termcap</code>文件的位置，并设置<code class="codeph">A_TERM</code>环境变量以指定该文件中受支持的终端。例如：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Bourne，Bash或Korn shell：</p><pre class="oac_no_warn" dir="ltr">$ A_TERMCAP = / opt / COBOL / etc / a_termcap $ A_TERM = vt100 $ export A_TERMCAP A_TERM</pre></li>
                              <li>
                                 <p>C shell：</p><pre class="oac_no_warn" dir="ltr">％setenv A_TERMCAP / opt / COBOL / etc / a_termcap％setenv A_TERM vt100</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-12A78D15-C202-4C9A-9F88-5070849EF93D__GUID-43A9B134-4C4C-4301-BB2C-B764B21B213A">路径</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>设置<code class="codeph">PATH</code>环境变量以包含<code class="codeph">/opt/COBOL/bin</code>目录：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Bourne，Bash或Korn shell：</p><pre class="oac_no_warn" dir="ltr">$ PATH = / opt / COBOL / bin：$ PATH $ export PATH</pre></li>
                              <li>
                                 <p>C shell：</p><pre class="oac_no_warn" dir="ltr">％setenv PATH opt / COBOL / bin：$ {PATH}</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-12A78D15-C202-4C9A-9F88-5070849EF93D__GUID-C73159D0-1187-48F6-ACE9-976A79E7A665">LD_LIBRARY_PATH</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-12A78D15-C202-4C9A-9F88-5070849EF93D__GUID-DEB742A9-8803-4E33-9BD5-8CC18A5BE53F">
                              <p class="notep1">注意：</p>
                              <p>在POWER Systems上的IBM AIX（64位）上， <code class="codeph">LIBPATH</code>变量是等效的<code class="codeph">LD_LIBRARY_PATH</code>变量。您必须在POWER Systems上的IBM AIX上使用<code class="codeph">LIBPATH</code>变量（64位），而不是以下命令中的<code class="codeph">LD_LIBRARY_PATH</code>变量。
                              </p>
                           </div>
                           <p>将<code class="codeph">LD_LIBRARY_PATH</code>环境变量设置为安装编译器库的目录。例如，如果编译器库安装在<code class="codeph">/opt/COBOL/lib</code>目录中，则运行以下命令：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Bourne，Bash或Korn shell：</p><pre class="oac_no_warn" dir="ltr">$ LD_LIBRARY_PATH = $ {LD_LIBRARY_PATH}：/ opt / COBOL / lib $ export LD_LIBRARY_PATH</pre></li>
                              <li>
                                 <p>C shell：</p><pre class="oac_no_warn" dir="ltr">％setenv LD_LIBRARY_PATH $ {LD_LIBRARY_PATH}：/ opt / COBOL / lib</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="UNXAR213"></a><div class="props_rev_3"><a id="GUID-9DE325DF-8A0B-4C84-AB75-8458123EA789" name="GUID-9DE325DF-8A0B-4C84-AB75-8458123EA789"></a><h4 id="UNXAR-GUID-9DE325DF-8A0B-4C84-AB75-8458123EA789" class="sect4"><span class="enumeration_section">6.4.2</span> Pro * COBOL Oracle运行时系统</h4>
                  <div>
                     <p>Oracle提供了自己的完整运行时系统，称为<code class="codeph">rtsora</code> ，用于运行可动态加载的Pro * COBOL程序。使用<code class="codeph">rtsora</code>运行时系统而不是<code class="codeph">cobrun</code>运行时系统来运行可动态加载的Pro * COBOL程序。如果您尝试使用<code class="codeph">cobrun</code>运行Pro * COBOL程序， <code class="codeph">cobrun</code>显示类似于以下内容的错误消息：</p><pre class="oac_no_warn" dir="ltr">$ cobrun sample1.gnt加载错误：文件'SQLADR'错误代码：173，pc = 0，call = 1，seg = 0 173在驱动器/目录中找不到调用的程序文件</pre></div>
               </div><a id="UNXAR214"></a><div class="props_rev_3"><a id="GUID-0136455E-1E0A-4A80-9607-450B5889BF11" name="GUID-0136455E-1E0A-4A80-9607-450B5889BF11"></a><h4 id="UNXAR-GUID-0136455E-1E0A-4A80-9607-450B5889BF11" class="sect4"><span class="enumeration_section">6.4.3</span> Pro * COBOL演示程序</h4>
                  <div>
                     <p>提供演示程序以显示Pro * COBOL预编译器的功能。演示程序位于<code class="codeph">$ORACLE_HOME/precomp/demo/procob2</code>目录中。默认情况下，所有程序都与客户端共享库动态链接。
                     </p>
                     <p>要运行演示程序，程序需要<code class="codeph">$ORACLE_HOME/sqlplus/demo/demobld.sql</code>脚本创建的演示表在JONES模式中存在密码。
                     </p>
                     <div class="infoboxnote" id="GUID-0136455E-1E0A-4A80-9607-450B5889BF11__GUID-40D114E4-364A-4A12-9943-4B0E247B091A">
                        <p class="notep1">注意：</p>
                        <p>在创建演示之前，您必须解锁JONES帐户并设置密码。</p>
                     </div>
                     <p>使用以下make文件创建演示程序：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME /预补偿/演示/ procob2 / demo_procob.mk</pre><p>要预编译，编译和链接Pro * COBOL的<code class="codeph">sample1</code>演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk sample1</pre><p>要创建Pro * COBOL演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk样本</pre><p>要创建并运行可与<code class="codeph">rtsora</code>运行时系统一起使用的可动态加载的<code class="codeph">sample1.gnt</code>程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk sample1.gnt $ rtsora sample1.gnt</pre><p>某些演示程序要求您运行SQL脚本，该脚本位于<code class="codeph">$ORACLE_HOME/precomp/demo/sql</code>目录中。如果您不运行该脚本，则会显示一条请求您运行该脚本的消息。
                     </p>
                     <p>要构建演示程序并运行相应的SQL脚本，请在命令中包含<code class="codeph">make</code> macro参数<code class="codeph">RUNSQL=run</code> 。例如，要创建<code class="codeph">sample9</code>演示程序并运行所需的<code class="codeph">$ORACLE_HOME/precomp/demo/sql/sample9.sql</code>脚本，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk sample9 RUNSQL = run</pre><p>要创建Pro * COBOL演示程序并运行所有必需的SQL脚本，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk示例RUNSQL =运行</pre></div>
               </div><a id="UNXAR215"></a><div class="props_rev_3"><a id="GUID-7197EE64-241C-4205-8F70-86052D427505" name="GUID-7197EE64-241C-4205-8F70-86052D427505"></a><h4 id="UNXAR-GUID-7197EE64-241C-4205-8F70-86052D427505" class="sect4"><span class="enumeration_section">6.4.4</span> Pro * COBOL用户程序</h4>
                  <div>
                     <p>你可以使用<a id="d8297e3119" class="indexterm-anchor"></a><a id="d8297e3123" class="indexterm-anchor"></a><a id="d8297e3125" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/precomp/demo/procob2/demo_procob.mk</code> make file来创建用户程序。此make文件构建32位或64位用户程序。您还可以使用<code class="codeph">demo_procob_32.mk</code> make文件来构建32位用户程序。下表显示了可用于使用Pro * COBOL构建32位和64位用户程序的make文件：</p>
                     <div class="tblformal" id="GUID-7197EE64-241C-4205-8F70-86052D427505__GUID-746D19F3-E054-43E3-A83F-638CC69030BD">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 column table lists the make files that you can use with Pro*C/C++ to build 32-bit, or 64-bit user programs. Column 1 is the platform. Column 2 is the 64–bit make file. Column 3 is the 32–bit make file." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="40%" id="d8297e3145">平台</th>
                                 <th align="left" valign="bottom" width="26%" id="d8297e3148">64位制作文件</th>
                                 <th align="left" valign="bottom" width="34%" id="d8297e3151">32位制作文件</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d8297e3156" headers="d8297e3145 ">
                                    <p>Oracle Solaris，Linux x86-64，IBM：System z上的Linux，POWER Systems上的IBM AIX（64位）和HP-UX</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d8297e3156 d8297e3148 ">
                                    <p><code class="codeph">demo_procob.mk</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d8297e3156 d8297e3151 ">
                                    <p><code class="codeph">demo_procob_32.mk</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-7197EE64-241C-4205-8F70-86052D427505__GUID-AA335E3A-1A5A-42BA-B44D-42333449DCD0">
                        <p class="notep1">也可以看看：</p>
                        <p>有关创建用户程序的更多信息，请参阅make文件</p>
                     </div>
                     <p>要使用<code class="codeph">demo_procob.mk</code> make文件创建程序，请运行类似于以下内容的命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk <span class="italic">target</span> COBS =“ <span class="italic">cobfile1</span> <span class="italic">cobfile2</span> ...”EXE = <span class="italic">exename</span>
</pre><p>在这个例子中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">target</code></span>是您要使用的make文件目标</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">cobfilen</code></span>是程序的COBOL源文件</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">exename</code></span>是可执行程序</p>
                        </li>
                     </ul>
                     <p>例如，要创建程序<code class="codeph">myprog</code> ，请运行以下命令之一，具体取决于您要创建的可执行文件的源和类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于与客户端共享库动态链接的COBOL源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk build COBS = myprog.cob EXE = myprog</pre></li>
                        <li>
                           <p>对于静态链接的COBOL源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk build_static COBS = myprog.cob EXE = myprog</pre></li>
                        <li>
                           <p>对于可以动态加载以与<code class="codeph">rtsora</code>一起使用的COBOL源，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_procob.mk myprog.gnt</pre></li>
                     </ul>
                  </div>
               </div><a id="UNXAR216"></a><div class="props_rev_3"><a id="GUID-455A7B49-DAE8-4C10-9AE6-FEDC578E0F1E" name="GUID-455A7B49-DAE8-4C10-9AE6-FEDC578E0F1E"></a><h4 id="UNXAR-GUID-455A7B49-DAE8-4C10-9AE6-FEDC578E0F1E" class="sect4"><span class="enumeration_section">6.4.5</span>格式预编译器选项</h4>
                  <div>
                     <p>FORMAT预编译器选项指定COBOL的输入行的格式。如果指定默认值<code class="codeph">ANSI</code> ，则列1到6包含可选序列号，第7列表示注释或连续行，段名称从第8到11列开始，语句从第12到72列开始。
                     </p>
                     <p>如果指定值<code class="codeph">TERMINAL</code> ，则删除第1列到第6列，使第7列成为最左列。
                     </p>
                  </div>
               </div>
            </div><a id="UNXAR217"></a><div class="props_rev_3"><a id="GUID-B51B83C6-C840-4BD2-ACF6-C55418ACEF17" name="GUID-B51B83C6-C840-4BD2-ACF6-C55418ACEF17"></a><h3 id="UNXAR-GUID-B51B83C6-C840-4BD2-ACF6-C55418ACEF17" class="sect3"><span class="enumeration_section">6.5</span> Pro * FORTRAN预编译器</h3>
               <div>
                  <p>在使用Pro * FORTRAN预编译器之前，请验证是否安装了正确版本的编译器。本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-7B119EF5-4149-41CC-81AF-F00274BC64E7">Pro * FORTRAN演示程序</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-99927574-4209-4815-A126-90ECCA420986">Pro * FORTRAN用户程序</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-B51B83C6-C840-4BD2-ACF6-C55418ACEF17__GUID-3E6EA730-4185-4C61-B2E4-4A8DBD55F3FD">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p> <a href="../install-and-upgrade.html" target="_blank"><span class="italic">“Oracle数据库安装指南”</span></a> ，了解有关支持的编译器版</p>
                        </li>
                        <li>
                           <p>有关Pro * FORTRAN预编译器和接口功能的信息<a href="../zzfor/writing-Pro-FORTRAN-program.html#ZZFOR107" target="_blank"><span class="italic">，请参阅“Oracle预编译器指南”的Pro * FORTRAN补充说明</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="UNXAR218"></a><div class="props_rev_3"><a id="GUID-7B119EF5-4149-41CC-81AF-F00274BC64E7" name="GUID-7B119EF5-4149-41CC-81AF-F00274BC64E7"></a><h4 id="UNXAR-GUID-7B119EF5-4149-41CC-81AF-F00274BC64E7" class="sect4"><span class="enumeration_section">6.5.1</span> Pro * FORTRAN演示程序</h4>
                  <div>
                     <p>提供演示程序以显示Pro * FORTRAN预编译器的功能。所有演示程序都位于<code class="codeph">$ORACLE_HOME/precomp/demo/profor</code>目录中。默认情况下，所有程序都与客户端共享库动态链接。
                     </p>
                     <p>要运行演示程序， <code class="codeph">$ORACLE_HOME/sqlplus/demo/demobld.sql</code>脚本创建的演示表必须存在于带有密码的JONES模式中。
                     </p>
                     <div class="infoboxnote" id="GUID-7B119EF5-4149-41CC-81AF-F00274BC64E7__GUID-9A5C1D59-246B-4507-AF1E-8BA89033BC49">
                        <p class="notep1">注意：</p>
                        <p>在创建演示之前，您必须解锁JONES帐户并设置密码。</p>
                     </div>
                     <p>要创建演示程序，请使用位于<code class="codeph">$ORACLE_HOME/precomp/demo/profor</code>目录中的<code class="codeph">demo_profor.mk</code> make文件。例如，要预编译，编译和链接<code class="codeph">sample1</code>演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk sample1</pre><p>要创建Pro * FORTRAN演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk样本</pre><p>某些演示程序要求您运行位于<code class="codeph">$ORACLE_HOME/precomp/demo/sql</code>目录中的SQL脚本。如果不运行该脚本，则会显示一条提示您运行该脚本的消息。
                     </p>
                     <p>要构建演示程序并运行相应的SQL脚本，请在命令行中包含<code class="codeph">make</code> macro参数<code class="codeph">RUNSQL=run</code> 。例如，要创建<code class="codeph">sample11</code>演示程序并运行所需的<code class="codeph">$ORACLE_HOME/precomp/demo/sql/sample11.sql</code>脚本，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk sample11 RUNSQL = run</pre><p>要创建Pro * FORTRAN演示程序并运行所有必需的SQL脚本，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk示例RUNSQL = run</pre></div>
               </div><a id="UNXAR219"></a><div class="props_rev_3"><a id="GUID-99927574-4209-4815-A126-90ECCA420986" name="GUID-99927574-4209-4815-A126-90ECCA420986"></a><h4 id="UNXAR-GUID-99927574-4209-4815-A126-90ECCA420986" class="sect4"><span class="enumeration_section">6.5.2</span> Pro * FORTRAN用户程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">$ORACLE_HOME/precomp/demo/profor/demo_profor.mk</code> make文件来创建用户程序。此make文件构建32位或64位用户程序。您还可以使用<code class="codeph">demo_profor_32.mk</code> make文件来构建32位用户程序。下表显示了可用于使用Pro * FORTRAN构建32位和64位用户程序的make文件：</p>
                     <div class="tblformal" id="GUID-99927574-4209-4815-A126-90ECCA420986__GUID-F7F67704-DD15-4C32-9492-9732F35A39B9">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 column table lists the make files that you can use with Pro*C/C++ to build 31-bit, 32-bit, or 64-bit user programs. Column 1 is the platform. Column 2 is the 64–bit make file. Column 3 is the 32–bit make file. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d8297e3688">平台</th>
                                 <th align="left" valign="bottom" id="d8297e3691">64位制作文件</th>
                                 <th align="left" valign="bottom" id="d8297e3694">32位制作文件</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d8297e3699" headers="d8297e3688 ">
                                    <p>Oracle Solaris，POWER Systems上的IBM AIX（64位）和HP-UX</p>
                                 </td>
                                 <td align="left" valign="top" headers="d8297e3699 d8297e3691 ">
                                    <p><code class="codeph">demo_profor.mk</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d8297e3699 d8297e3694 ">
                                    <p><code class="codeph">demo_profor_32.mk</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-99927574-4209-4815-A126-90ECCA420986__GUID-6C7532AA-54B0-49C2-BD52-AED5B344D1B9">
                        <p class="notep1">也可以看看：</p>
                        <p>有关创建用户程序的更多信息，请参阅make文件</p>
                     </div>
                     <p>要使用<code class="codeph">demo_proc.mk</code> make文件创建程序，请运行类似于以下内容的命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk <span class="italic">target</span> FORS =“ <span class="italic">forfile1</span> <span class="italic">forfile2</span> ...”EXE = <span class="italic">exename</span>
</pre><p>在这个例子中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">target</code></span>是您要使用的make文件目标</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">forfilen</code></span>是程序的FORTRAN源</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">exename</code></span>是可执行程序</p>
                        </li>
                     </ul>
                     <p>例如，要从Pro * FORTRAN源文件<code class="codeph">myprog.pfo</code>创建程序<code class="codeph">myprog</code> ，请运行以下命令之一，具体取决于您要创建的可执行文件的类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于与客户端共享库动态链接的可执行文件，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk build FORS = myprog.f EXE = myprog</pre></li>
                        <li>
                           <p>对于与客户端共享库静态链接的可执行文件，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_profor.mk build_static FORS = myprog.f EXE = myprog</pre></li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-3B23F5E7-50B9-47BD-BEFC-87679F46744A" name="GUID-3B23F5E7-50B9-47BD-BEFC-87679F46744A"></a><h3 id="UNXAR-GUID-3B23F5E7-50B9-47BD-BEFC-87679F46744A" class="sect3"><span class="enumeration_section">6.6</span> ADA的SQL *模块</h3>
               <div>
                  <div class="infoboxnote" id="GUID-3B23F5E7-50B9-47BD-BEFC-87679F46744A__GUID-E0DD92FA-46C7-4BAA-B660-4B337624D660">
                     <p class="notep1">注意：</p>
                     <p>本节中的信息适用于POWER系统（64位）平台上的IBM AIX。</p>
                  </div>
                  <p>在为Ada使用SQL * Module之前，请验证是否安装了正确版本的编译器。</p>
                  <div class="infoboxnotealso" id="GUID-3B23F5E7-50B9-47BD-BEFC-87679F46744A__GUID-11DEADCF-B2FF-4CEF-86AA-0391277D3C29">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关所需编译器版本的信息，请<a href="../install-and-upgrade.html" target="_blank"><span class="italic">参见“Oracle数据库安</span></a></p>
                        </li>
                        <li>
                           <p><a class="new-window" href="http://www.oracle.com/pls/topic/lookup?ctx=E11882-01&amp;id=ZZMOD107"><span class="italic">用于Ada程序员指南的Oracle SQL *模块，</span></a>用于获取有关Ada的SQL *模块的信息</p>
                        </li>
                     </ul>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-83295822-AC41-4E89-80BE-2322B39E9093">用于Ada演示程序的SQL *模块</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-1E4F0E01-C7A8-4CEA-B918-53C4F44F5641">用于Ada用户程序的SQL *模块</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-83295822-AC41-4E89-80BE-2322B39E9093" name="GUID-83295822-AC41-4E89-80BE-2322B39E9093"></a><h4 id="UNXAR-GUID-83295822-AC41-4E89-80BE-2322B39E9093" class="sect4"><span class="enumeration_section">6.6.1</span> Ada演示程序的SQL *模块</h4>
                  <div>
                     <p>提供演示程序以显示Ada的SQL *模块的功能。所有演示程序都位于<code class="codeph">$ORACLE_HOME/precomp/demo/modada</code>目录中。默认情况下，所有程序都与客户端共享库动态链接。
                     </p>
                     <p>要运行<code class="codeph">ch1_drv</code>演示程序， <code class="codeph">$ORACLE_HOME/sqlplus/demo/demobld.sql</code>脚本创建的演示表必须存在于带有密码的<code class="codeph">JONES</code>模式中。
                     </p>
                     <div class="infoboxnote" id="GUID-83295822-AC41-4E89-80BE-2322B39E9093__GUID-BE67413D-6B55-452B-95CA-DA3355B9F084">
                        <p class="notep1">注意：</p>
                        <p>在创建演示之前，您必须解锁JONES帐户并设置密码。</p>
                     </div>
                     <p><code class="codeph">demcalsp</code>和<code class="codeph">demohost</code>演示程序要求示例学院数据库存在于<code class="codeph">MODTEST</code>模式中。您可以使用适当的<code class="codeph">make</code>命令来创建<code class="codeph">MODTEST</code>模式并加载示例学院数据库。
                     </p>
                     <p>运行以下命令为Ada演示程序创建SQL *模块，运行必要的SQL脚本以创建<code class="codeph">MODTEST</code>用户，并创建示例学院数据库：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_modada.mk所有RUNSQL =运行</pre><p>要创建单个演示程序（ <code class="codeph">demohost</code> ）并运行必要的SQL脚本以创建<code class="codeph">MODTEST</code>用户，并创建示例学院数据库，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_modada.mk makeuser loaddb demohost RUNSQL = run</pre><p>要为Ada演示程序创建SQL *模块，而不重新创建示例学院数据库，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_modada.mk样本</pre><p>要创建单个演示程序（ <code class="codeph">demohost</code> ），而不重新创建示例学院数据库，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_modada.mk demohost</pre><p>要运行程序，必须定义一个名为INST1_ALIAS的Oracle Net连接字符串或别名，用于连接到存在相应表的数据库。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-1E4F0E01-C7A8-4CEA-B918-53C4F44F5641" name="GUID-1E4F0E01-C7A8-4CEA-B918-53C4F44F5641"></a><h4 id="UNXAR-GUID-1E4F0E01-C7A8-4CEA-B918-53C4F44F5641" class="sect4"><span class="enumeration_section">6.6.2</span> Ada用户程序的SQL *模块</h4>
                  <div>
                     <p>您可以使用<code class="codeph">$ORACLE_HOME/precomp/demo/modada/demo_modada.mk</code> make文件来创建用户程序。要使用<code class="codeph">demo_modada.mk</code> make文件创建用户程序，请运行类似于以下内容的命令：</p><pre class="oac_no_warn" dir="ltr">$使-f demo_modada.mk ADA OBJS = “ <span class="italic">模块1</span> <span class="italic">模块2</span> ......” \ EXE = <span class="italic">EXENAME</span> MODARGS = <span class="italic">SQL_Module_arguments</span>
</pre><p>在这个例子中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">modulen</code></span>是一个已编译的Ada对象</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">exename</code></span>是可执行程序</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">SQL_Module_arguments</code></span>是要传递给SQL *模块的命令行参数</p>
                           <div class="infoboxnotealso" id="GUID-1E4F0E01-C7A8-4CEA-B918-53C4F44F5641__GUID-E82AC1BD-820D-449C-9758-E8FB52D192A3">
                              <p class="notep1">也可以看看：</p>
                              <p><a class="new-window" href="http://www.oracle.com/pls/topic/lookup?ctx=E11882-01&amp;id=ZZMOD107"><span class="italic">用于Ada程序员指南的Oracle SQL *模块，</span></a>用于获取有关Ada的SQL *模块的信息</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="UNXAR223"></a><div class="props_rev_3"><a id="GUID-BD220FF0-5F73-40C8-B208-085A6B2E6CE0" name="GUID-BD220FF0-5F73-40C8-B208-085A6B2E6CE0"></a><h3 id="UNXAR-GUID-BD220FF0-5F73-40C8-B208-085A6B2E6CE0" class="sect3"><span class="enumeration_section">6.7</span> OCI和OCCI</h3>
               <div>
                  <p>在使用Oracle调用接口（OCI）或Oracle C ++调用接口（OCCI）之前，请验证是否安装了正确版本的C或C ++。</p>
                  <div class="infoboxnotealso" id="GUID-BD220FF0-5F73-40C8-B208-085A6B2E6CE0__GUID-444CAC92-FBC4-47F7-9FAD-626FEFAC09B5">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../install-and-upgrade.html" target="_blank"><span class="italic">“Oracle数据库安装指南”</span></a> ，了解有关支持的编译器版</p>
                        </li>
                        <li>
                           <p>有关OCI和OCCI的信息，请参阅<a href="../lnoci/introduction.html#LNOCI010" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a>或<a href="../lncpp/introduction-to-occi.html#LNCPP001" target="_blank"><span class="italic">Oracle C ++调用接口程序员指南</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-6CB7ACCF-7B67-4CFA-AE1F-7DF366A804F5">OCI和OCCI演示计划</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-AF4D13BB-9202-4E3E-BC04-B4B9D8AA7F7E">OCI和OCCI用户程序</a></p>
                     </li>
                  </ul>
               </div><a id="UNXAR224"></a><div class="props_rev_3"><a id="GUID-6CB7ACCF-7B67-4CFA-AE1F-7DF366A804F5" name="GUID-6CB7ACCF-7B67-4CFA-AE1F-7DF366A804F5"></a><h4 id="UNXAR-GUID-6CB7ACCF-7B67-4CFA-AE1F-7DF366A804F5" class="sect4"><span class="enumeration_section">6.7.1</span> OCI和OCCI演示程序</h4>
                  <div>
                     <p>Oracle Database 19c示例软件提供了展示OCI和OCCI功能的演示程序。有两种类型的演示程序：C和C ++。所有演示程序都位于<code class="codeph">$ORACLE_HOME/rdbms/demo</code>目录中。默认情况下，所有程序都与客户端共享库动态链接。
                     </p>
                     <p>要运行演示程序，程序需要<code class="codeph">$ORACLE_HOME/sqlplus/demo/demobld.sql</code>脚本创建的演示表在JONES模式中存在密码。某些演示程序需要运行特定的.sql文件，如演示源文件中所述。OCCI演示程序需要运行occidemo.sql。
                     </p>
                     <div class="infoboxnote" id="GUID-6CB7ACCF-7B67-4CFA-AE1F-7DF366A804F5__GUID-AC365B3D-29D4-4032-9523-FE23D4C2E362">
                        <p class="notep1">注意：</p>
                        <p>在创建演示之前，您必须解锁JONES帐户并设置密码。</p>
                     </div>
                     <p>使用位于<code class="codeph">$ORACLE_HOME/rdbms/demo</code>目录中的<code class="codeph">demo_rdbms.mk</code> make文件来创建演示程序。例如，要编译和链接<code class="codeph">cdemo1</code>演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_rdbms.mk cdemo1</pre><p>要为OCI创建C演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_rdbms.mk演示</pre><p>要为OCCI创建C ++演示程序，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_rdbms.mk occidemos</pre></div>
               </div><a id="UNXAR225"></a><div class="props_rev_3"><a id="GUID-AF4D13BB-9202-4E3E-BC04-B4B9D8AA7F7E" name="GUID-AF4D13BB-9202-4E3E-BC04-B4B9D8AA7F7E"></a><h4 id="UNXAR-GUID-AF4D13BB-9202-4E3E-BC04-B4B9D8AA7F7E" class="sect4"><span class="enumeration_section">6.7.2</span> OCI和OCCI用户程序</h4>
                  <div>
                     <p>您可以使用<code class="codeph">$ORACLE_HOME/rdbms/demo/demo_rdbms.mk</code> make文件来构建用户程序。此make文件构建32位或64位用户程序。您还可以使用<code class="codeph">demo_rdbms32.mk</code>在64位操作系统上构建32位用户程序。下表显示了可用于使用Pro * FORTRAN构建32位和64位用户程序的make文件：</p>
                     <div class="tblformal" id="GUID-AF4D13BB-9202-4E3E-BC04-B4B9D8AA7F7E__GUID-C18481BF-C0E1-4E47-8542-12D4883E04F4">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This 3 column table lists the make files that you can use with Pro*C/C++ to build 31-bit, 32-bit, or 64-bit user programs. Column 1 is the platform. Column 2 is the 64–bit make file. Column 3 is the 32–bit make file. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="40%" id="d8297e4554">平台</th>
                                 <th align="left" valign="bottom" width="26%" id="d8297e4557">64位制作文件</th>
                                 <th align="left" valign="bottom" width="34%" id="d8297e4560">32位制作文件</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d8297e4565" headers="d8297e4554 ">
                                    <p>Oracle Solaris，Linux x86-64，POWER Systems（64位）上的IBM AIX和HP-UX</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d8297e4565 d8297e4557 ">
                                    <p><code class="codeph">demo_rdbms.mk</code></p>
                                 </td>
                                 <td align="left" valign="top" width="34%" headers="d8297e4565 d8297e4560 ">
                                    <p><code class="codeph">demo_rdbms32.mk</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-AF4D13BB-9202-4E3E-BC04-B4B9D8AA7F7E__GUID-917D7646-561E-4986-BF49-1879E4F0EA16">
                        <p class="notep1">也可以看看：</p>
                        <p>有关构建用户程序的更多信息，请参阅make文件</p>
                     </div>
                  </div>
               </div>
            </div><a id="UNXAR226"></a><div class="props_rev_3"><a id="GUID-AC40DC7C-4E3A-4157-80DB-E102F6C94680" name="GUID-AC40DC7C-4E3A-4157-80DB-E102F6C94680"></a><h3 id="UNXAR-GUID-AC40DC7C-4E3A-4157-80DB-E102F6C94680" class="sect3"><span class="enumeration_section">6.8</span>使用64位驱动程序运行Oracle JDBC / OCI程序</h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-AC40DC7C-4E3A-4157-80DB-E102F6C94680__GUID-EBD154B9-00DF-47FB-81A7-8995DC44C251">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>本节中的信息适用于Oracle Solaris，Linux x86-64，IBM：Linux on System z，IBM AIX on POWER Systems（64位）和HP-UX平台。</p>
                           </li>
                           <li>
                              <p>您可以使用本节中描述的指令和make文件来创建使用64位驱动程序的JDBC / OCI用户程序。</p>
                           </li>
                        </ul>
                     </div>
                     <p>使用64位驱动程序运行JDBC / OCI演示程序：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>将<code class="codeph">$ORACLE_HOME/jdbc/lib/ojdbc5.jar</code>到以下每个文件的<code class="codeph">CLASSPATH</code>环境变量值的开头：</span><div><pre class="oac_no_warn" dir="ltr">jdbc / demo / samples / jdbcoci / Makefile jdbc / demo / samples / generic / Inheritance / Inheritance1 / Makefile jdbc / demo / samples / generic / Inheritance / Inheritance2 / Makefile jdbc / demo / samples / generic / Inheritance / Inheritance3 / Makefile jdbc / demo / samples / generic / JavaObject1 / Makefile jdbc / demo / samples / generic / NestedCollection / Makefile</pre></div>
                     </li>
                     <li class="stepexpand"><span>修改<code class="codeph">$ORACLE_HOME/jdbc/demo/samples/generic/Makefile</code>文件中的JAVA和JAVAC变量以指定JDK位置和<code class="codeph">-d64</code>标志，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">JAVA = $ {ORACLE_HOME} / java / bin / java -d64 JAVAC = $ {ORACLE_HOME} / java / bin / javac -d64</pre></div>
                     </li>
                     <li class="stepexpand"><span>设置<code class="codeph">LD_LIBRARY_PATH_64</code>环境变量以包含<code class="codeph">$ORACLE_HOME/lib</code>目录。</span><div>
                           <div class="infoboxnote" id="GUID-AC40DC7C-4E3A-4157-80DB-E102F6C94680__GUID-3522775B-BE8C-4604-A387-508A543ADC53">
                              <p class="notep1">注意：</p>
                              <p>在POWER Systems上的IBM AIX（64位）上， <code class="codeph">LIBPATH</code>变量是<code class="codeph">LD_LIBRARY_PATH_64</code>变量的等效变量。您必须在POWER Systems（64位）上的IBM AIX上使用<code class="codeph">LIBPATH</code>变量，而不是<code class="codeph">LD_LIBRARY_PATH_64</code>变量。
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="UNXAR227"></a><div class="props_rev_3"><a id="GUID-0AF7D0E1-0C36-413C-BA17-BB1C85E2E5E9" name="GUID-0AF7D0E1-0C36-413C-BA17-BB1C85E2E5E9"></a><h3 id="UNXAR-GUID-0AF7D0E1-0C36-413C-BA17-BB1C85E2E5E9" class="sect3"><span class="enumeration_section">6.9</span>自定义生成文件</h3>
               <div>
                  <p>Oracle建议您使用随软件提供的<code class="codeph">demo_</code> <span class="italic"><code class="codeph">product</code></span> <code class="codeph">.mk</code> make文件来创建用户程序，如本章特定于产品的部分所述。如果您修改了提供的make文件，或者您选择使用自定义编写的make文件，请记住以下限制适用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>不要修改Oracle库的顺序。Oracle库不止一次地包含在链接行中，以便在链接期间解析所有符号。</p>
                        <p>除了POWER系统上的IBM AIX（64位）之外，Oracle库的顺序在所有平台上都是必不可少的，原因如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle库是相互参照的。例如，库A中的函数调用库B中的函数，库B中的函数调用库A中的函数。</p>
                           </li>
                           <li>
                              <p>HP-UX连接器是单通道连接器。POWER系统上的IBM AIX（64位），Linux和Oracle Solaris链接器是双通链接器。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>将库添加到链接行的开头或末尾。不要在Oracle库之间放置用户库。</p>
                     </li>
                     <li>
                        <p>如果选择使用<code class="codeph">make</code>实用程序（如<code class="codeph">nmake</code>或GNU <code class="codeph">make</code> ，则必须了解宏和后缀处理与操作系统提供的<code class="codeph">make</code>实用程序的不同之处。使用<code class="codeph">make</code>实用程序测试并支持Oracle make文件。
                        </p>
                     </li>
                     <li>
                        <p>Oracle库名称和Oracle库的内容可能会在不同版本之间发生变化。始终使用当前版本附带的<code class="codeph">demo_</code> <span class="italic"><code class="codeph">product</code></span> <code class="codeph">.mk</code> make文件作为指导，以确定所需的库。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="UNXAR228"></a><div class="props_rev_3"><a id="GUID-B0521D95-B6E9-4E71-9989-DF1682FE7534" name="GUID-B0521D95-B6E9-4E71-9989-DF1682FE7534"></a><h3 id="UNXAR-GUID-B0521D95-B6E9-4E71-9989-DF1682FE7534" class="sect3"><span class="enumeration_section">6.10</span>更正未定义的符号</h3>
               <div>
                  <p>Oracle提供了<a id="d8297e4962" class="indexterm-anchor"></a><a id="d8297e4964" class="indexterm-anchor"></a> <code class="codeph">symfind</code>实用程序，可帮助您查找定义符号的库或目标文件。链接程序时，未定义的符号是一个常见错误，会产生类似于以下内容的错误消息：</p><pre class="oac_no_warn" dir="ltr">$ make -f demo_proc.mk sample1文件sqlcex sample1.o中未定义的第一个引用符号sqlglm sample1.o ld：irrecoverable：符号引用错误。没有输出写入sample1</pre><p>当链接器找不到引用符号的定义时，会发生错误。如果显示此错误消息，则验证链接行上是否存在包含该定义的库或目标文件，并且链接器正在搜索该文件的正确目录。</p>
                  <p>以下示例显示<code class="codeph">symfind</code>实用程序的输出，该实用程序用于定位<code class="codeph">sqlcex</code>符号：</p><pre class="oac_no_warn" dir="ltr">$ symfind sqlcex SymFind  - 在&lt;**&gt;中查找符号&lt;sqlcex&gt; .a，.o，.so --------------------------- ---------------------------命令：/u01/app/oracle/product/19.0.0/bin/symfind sqlcex本地目录：/ u01 / app / oracle / product / 19.0.0输出文件:(无）注意：我不遍历符号链接使用'-v'选项显示任何符号链接查找存档和对象文件...[11645] | 467572 | 44 | FUNC | GLOB | 0 | 8 | sqlcex ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ./lib/ libclntsh.sl [35] | 0 | 44 | FUNC | GLOB | 0 | 5 | sqlcex ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ./lib/ libsql.a</pre></div>
            </div><a id="UNXAR229"></a><div class="props_rev_3"><a id="GUID-BC52E5BF-653D-4057-8307-AF2C713725CC" name="GUID-BC52E5BF-653D-4057-8307-AF2C713725CC"></a><h3 id="UNXAR-GUID-BC52E5BF-653D-4057-8307-AF2C713725CC" class="sect3"><span class="enumeration_section">6.11</span>多线程应用程序</h3>
               <div>
                  <p>此版本提供的Oracle库是线程安全的，它们支持多线程应用程序。</p>
                  <div class="infoboxnotealso" id="GUID-BC52E5BF-653D-4057-8307-AF2C713725CC__GUID-FBE84138-F9B7-402A-9DF2-09768E00DBB0">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../lnpcc/multithreaded-applications.html#LNPCC3942" target="_blank"><span class="italic">Pro * C / C ++程序员指南</span></a> ，了解有关多线程应用程序的更多信息</p>
                  </div>
               </div>
            </div><a id="UNXAR231"></a><a id="UNXAR232"></a><a id="UNXAR233"></a><a id="UNXAR230"></a><div class="props_rev_3"><a id="GUID-B0CCF23A-007C-413D-AF40-D554F02C9897" name="GUID-B0CCF23A-007C-413D-AF40-D554F02C9897"></a><h3 id="UNXAR-GUID-B0CCF23A-007C-413D-AF40-D554F02C9897" class="sect3"><span class="enumeration_section">6.12</span>使用信号处理程序</h3>
               <div>
                  <p>Oracle数据库使用信号进行双任务通信。当进程连接到数据库时，信号将安装在用户进程中，并在断开连接时被删除。</p>
                  <p>下表描述了Oracle数据库用于双任务通信的信号。</p>
                  <div class="tblformal" id="GUID-B0CCF23A-007C-413D-AF40-D554F02C9897__G39972">
                     <p class="titleintable">表6-4双任务通信的信号</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="双任务通信的信号" width="100%" border="1" summary="This 2 column table describes the signals for two-task communication. Column 1 is the signal. Column 2 describes that signal." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="19%" id="d8297e5185">信号</th>
                              <th align="left" valign="bottom" width="81%" id="d8297e5188">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5193" headers="d8297e5185 ">
                                 <p>SIGCLD<a id="d8297e5196" class="indexterm-anchor"></a><a id="d8297e5200" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5193 d8297e5188 ">
                                 <p>当Oracle进程终止时，管道驱动程序使用SIGCLD（也称为SIGCHLD）。操作系统内核向用户进程发送SIGCLD信号。信号处理程序使用<code class="codeph">wait()</code>例程来确定服务器进程是否已经死亡。Oracle进程无法捕获SIGCLD;用户进程捕获它。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5209" headers="d8297e5185 ">
                                 <p>SIGCONT<a id="d8297e5212" class="indexterm-anchor"></a><a id="d8297e5216" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5209 d8297e5188 ">
                                 <p>管道双任务驱动程序使用SIGCONT从用户进程向Oracle进程发送带外中断。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5222" headers="d8297e5185 ">
                                 <p>SIGINT<a id="d8297e5225" class="indexterm-anchor"></a><a id="d8297e5229" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5222 d8297e5188 ">
                                 <p>两个任务驱动程序使用SIGINT来检测用户中断请求。Oracle进程没有捕获SIGINT;用户进程捕获它。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5235" headers="d8297e5185 ">
                                 <p>SIGIO<a id="d8297e5238" class="indexterm-anchor"></a><a id="d8297e5242" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5235 d8297e5188 ">
                                 <p>Oracle Net协议使用SIGIO来指示传入的网络事件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5248" headers="d8297e5185 ">
                                 <p>SIGPIPE<a id="d8297e5251" class="indexterm-anchor"></a><a id="d8297e5255" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5248 d8297e5188 ">
                                 <p>管道驱动程序使用SIGPIPE来检测通信通道上的文件结束。写入管道时，如果不存在读取过程，则将SIGPIPE信号发送到写入过程。Oracle进程和用户进程都捕获SIGPIPE。 SIGCLD类似于SIGPIPE，但它仅适用于用户进程，而不适用于Oracle进程。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5261" headers="d8297e5185 ">
                                 <p>SIGTERM<a id="d8297e5264" class="indexterm-anchor"></a><a id="d8297e5268" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5261 d8297e5188 ">
                                 <p>管道驱动程序使用SIGTERM来通知用户到Oracle进程的中断。当用户按下中断键<span class="bold">Ctrl + C</span>时会发生这种情况。用户进程没有捕获SIGTERM; Oracle进程抓住了它。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d8297e5277" headers="d8297e5185 ">
                                 <p>SIGURG<a id="d8297e5280" class="indexterm-anchor"></a><a id="d8297e5284" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="81%" headers="d8297e5277 d8297e5188 ">
                                 <p>Oracle Net TCP / IP驱动程序使用SIGURG将用户进程的带外中断发送到Oracle进程。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>列出的信号会影响所有预编译器应用程序。连接到Oracle进程时，可以为SIGCLD（或SIGCHLD）和SIGPIPE安装一个信号处理程序。如果你调用<code class="codeph">osnsui()</code>例程来设置它，那么你可以为SIGINT提供多个信号句柄。对于SIGINT，使用<code class="codeph">osnsui()</code>和<code class="codeph">osncui()</code>来注册和删除信号捕获例程。
                  </p>
                  <p>您也可以根据需要为其他信号安装尽可能多的信号处理程序。如果你没有连接到<span class="bold"> </span>在Oracle进程中，您可以拥有多个信号处理程序。<a id="d8297e5305" class="indexterm-anchor"></a><a id="d8297e5309" class="indexterm-anchor"></a><a id="d8297e5313" class="indexterm-anchor"></a></p>
                  <p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-B0CCF23A-007C-413D-AF40-D554F02C9897__I36231">例6-1</a>显示了如何设置信号例程和捕获例程<a id="d8297e5318" class="indexterm-anchor"></a><a id="d8297e5322" class="indexterm-anchor"></a><a id="d8297e5326" class="indexterm-anchor"></a><a id="d8297e5328" class="indexterm-anchor"></a><a id="d8297e5330" class="indexterm-anchor"></a> 。
                  </p>
                  <div class="example" id="GUID-B0CCF23A-007C-413D-AF40-D554F02C9897__I36231">
                     <p class="titleinexample">例6-1信号例程和捕获例程</p><pre class="oac_no_warn" dir="ltr">/ *用户端中断设置* / word osnsui（/ * _ word * handlp，void（* astp），char * ctx，_ * /）/ * ** osnsui：依赖于操作系统的网络设置用户端中断。添加**中断处理程序astp。每当发生用户中断（例如^ C）**时，请使用参数ctx调用astp。为此**处理程序放入* handlp句柄，以便可以使用osncui清除它。请注意，可能有许多**处理程序;每个都应该使用osncui清除。如果**发生错误，则返回错误代码。* / / *用户端中断清除* / word osncui（/ * _ word handle _ * /）; / * ** osncui：依赖于操作系统清除用户端中断。清除**指定的处理程序。参数是从osnsui获得的句柄。如果发生错误，则返回错误**代码。* /</pre><p><a href="using-oracle-precompilers-and-oracle-call-interface.html#GUID-B0CCF23A-007C-413D-AF40-D554F02C9897__I36265">例6-2</a>显示了如何在应用程序中使用<code class="codeph">osnsui()</code>和<code class="codeph">osncui()</code>例程。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B0CCF23A-007C-413D-AF40-D554F02C9897__I36265">
                     <p class="titleinexample">例6-2 osnsui（）和osncui（）例程模板</p><pre class="oac_no_warn" dir="ltr">/ * **用户中断处理程序模板。* / void sig_handler（）{...} main（argc，argv）int arc; char ** argv; {int handle，err; .../ *设置用户中断处理程序* / if（err = osnsui（＆handle，sig_handler，（char *）0））{/ *如果返回值非零，则发生错误对错误采取适当的操作。* / ...} .../ *清除中断处理程序* / if（err = osncui（handle））{/ *如果返回值非零，则表示发生错误对错误采取适当的操作。* / ...} ...}</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="UNXAR234"></a><div class="props_rev_3"><a id="GUID-C9935092-BE14-4512-809B-FBB83FB4EA7F" name="GUID-C9935092-BE14-4512-809B-FBB83FB4EA7F"></a><h3 id="UNXAR-GUID-C9935092-BE14-4512-809B-FBB83FB4EA7F" class="sect3"><span class="enumeration_section">6.13</span> XA功能</h3>
               <div>
                  <p>Oracle XA是Oracle的实现<a id="d8297e5439" class="indexterm-anchor"></a> X / Open分布式事务处理XA接口。XA标准指定资源管理器之间的双向接口，该接口提供对事务内共享资源的访问，以及监视和解析事务的事务服务之间的访问。
                  </p>
                  <p>Oracle Call Interface具有XA功能。构建TP-monitor XA应用程序时，请确保TP-monitor库（定义符号<code class="codeph">ax_reg</code>和<code class="codeph">ax_unreg</code> ）放在Oracle客户端共享库之前的链接行中。使用XA动态注册（Oracle XA交换机<code class="codeph">xaoswd</code> ）时，需要此链接限制。
                  </p>
                  <p>Oracle Database XA调用在客户端共享库（ <code class="codeph">libclntsh.a</code> ， <code class="codeph">libclntsh.sl</code> ， <code class="codeph">libclntsh.so</code>或<code class="codeph">libclntsh.dylib</code>具体取决于平台）和客户端静态库（ <code class="codeph">libclntst11.a</code> ）中定义。这些库位于<code class="codeph">$ORACLE_HOME/lib</code>目录中。
                  </p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03446.using-zone-maps.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用区域地图</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Warehousing Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Warehousing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="attribute-clustering.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-etl.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DWHSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="attribute-clustering.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-etl.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据仓库指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-optimizing-dw.html" property="item" typeof="WebPage"><span property="name">优化数据仓库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用区域地图</li>
            </ol>
            <a id="GUID-BEA5ACA1-6718-4948-AB38-1F2C0335FDE4" name="GUID-BEA5ACA1-6718-4948-AB38-1F2C0335FDE4"></a>
            
            <h2 id="DWHSG-GUID-BEA5ACA1-6718-4948-AB38-1F2C0335FDE4" class="sect2"><span class="enumeration_chapter">14</span>使用区域地图</h2>
         </header>
         <div class="ind">
            <div>
               <p>区域映射是可以为表构建的独立访问结构。在表和索引扫描期间，区域映射使您能够根据表列上的谓词修剪表的磁盘块以及分区表的可能完整分区。区域地图可以使用或不使用属性聚类。</p>
               <p>本章包括以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-zone-maps.html#GUID-7E5C3F5A-C1F5-4A5E-A501-DB50B8948263">关于Zone Maps</a></p>
                  </li>
                  <li>
                     <p><a href="using-zone-maps.html#GUID-BD689807-825D-47F2-81AB-9FD32A3E39C0">区域地图操作</a></p>
                  </li>
                  <li>
                     <p><a href="using-zone-maps.html#GUID-EEE26E3B-38B7-47DD-9892-818CB8432158" title="当区域映射所基于的表中的数据发生更改时，与更改的行对应的区域将标记为陈旧。您需要刷新区域图以使区域成为当前区域。">区域地图的刷新和陈旧</a></p>
                  </li>
                  <li>
                     <p><a href="using-zone-maps.html#GUID-1E6AF386-E601-4382-B84D-B811DA142E0F">使用区域映射执行修剪</a></p>
                  </li>
                  <li>
                     <p><a href="using-zone-maps.html#GUID-DA1762AC-4F66-4DDA-A28A-8A754FB6E75E">查看区域地图信息</a></p>
                  </li>
               </ul>
            </div><a id="DWHSG8935"></a><div class="props_rev_3"><a id="GUID-7E5C3F5A-C1F5-4A5E-A501-DB50B8948263" name="GUID-7E5C3F5A-C1F5-4A5E-A501-DB50B8948263"></a><h3 id="DWHSG-GUID-7E5C3F5A-C1F5-4A5E-A501-DB50B8948263" class="sect3"><span class="enumeration_section">14.1</span>关于区域地图</h3>
               <div>
                  <p><span class="bold">区域</span> <span class="bold">地图</span>是<a id="d56099e78" class="indexterm-anchor"></a>为表创建的独立访问结构，用于存储有关表区域的信息。区域映射使数据库能够修剪无法满足表列谓词的数据块。<span class="bold">区域</span>是一组<a id="d56099e86" class="indexterm-anchor"></a>磁盘上的连续数据块。
                  </p>
                  <p>传统区域映射存储每个磁盘单元，块组或范围的表中列的最小值和最大值。如果查询符合群集列的要求，则会进行I / O修剪。Oracle数据库中的区域映射存储一系列块（称为区域）的列的最小值和最大值。除了基于聚类事实表的谓词执行I / O修剪之外，区域映射修剪维度表的谓词，前提是事实表通过外部联接与维度表的维度属性进行属性聚类。</p>
                  <p>您最多可以在表上定义一个区域映射。对于分区表，所有分区（和子分区）都有一个区域映射。分区表的区域映射还跟踪每个区域，每个分区和每个子分区的最小值和最大值。区域映射定义可以包括维列的最小值和最大值，前提是表具有与维表的外连接。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-zone-maps.html#GUID-6E965132-485A-4A70-8DA3-18FCF6E5C4AA">区域地图和索引之间的区别</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-6874226F-1DC1-4864-9695-5FBDF646F59D">区域映射和属性聚类</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-17F2043C-BD41-400F-9FBE-BD14CE87980E">区域地图的类型</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-E6E8BDF4-F3FA-49AF-B56C-BA1245CC8BB2">区域地图的好处</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-14BE02F3-C78F-45FA-BD15-78FA554B7699">受益于区域地图的场景</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-08DB84F2-8163-4E02-9D2E-8A10351335E4">关于维护区域地图</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9356"></a><div class="props_rev_3"><a id="GUID-6E965132-485A-4A70-8DA3-18FCF6E5C4AA" name="GUID-6E965132-485A-4A70-8DA3-18FCF6E5C4AA"></a><h4 id="DWHSG-GUID-6E965132-485A-4A70-8DA3-18FCF6E5C4AA" class="sect4"><span class="enumeration_section">14.1.1</span>区域映射和索引之间的区别</h4>
                  <div>
                     <p>区域图类似于粗略索引结构。但是，指数存在根本差异：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>区域映射存储每个区域而不是每行的信息。因此，它比索引更紧凑。</p>
                        </li>
                        <li>
                           <p>区域映射不会像索引与DML操作同步一样进行主动管理。因此，即使区域映射具有<code class="codeph">REFRESH</code> <code class="codeph">ON</code> <code class="codeph">COMMIT</code>选项，它也可能在事务中失效，直到发生提交或回滚。
                           </p>
                        </li>
                        <li>
                           <p>区域映射可以包含某些区域的陈旧信息和其他区域的新信息，Oracle数据库仍将使用区域映射在事实表扫描期间执行I / O修剪。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9357"></a><div class="props_rev_3"><a id="GUID-6874226F-1DC1-4864-9695-5FBDF646F59D" name="GUID-6874226F-1DC1-4864-9695-5FBDF646F59D"></a><h4 id="DWHSG-GUID-6874226F-1DC1-4864-9695-5FBDF646F59D" class="sect4"><span class="enumeration_section">14.1.2</span>区域映射和属性聚类</h4>
                  <div>
                     <p>属性聚类不是区域映射的强制性预先要求。区域地图可以使用或不使用属性聚类。因此，您可以在没有区域映射的情况下指定属性聚类，并在表中不构建聚类的情况下构建区域映射。</p>
                     <p>由于ETL处理，数据仓库环境通常具有合理的群集数据，例如，按时间列或按地理区域进行群集。由于聚类，列的最小值和最大值更可能与属性聚类表中的连续数据块相关，这允许使用区域映射进行更有效的修剪。通过利用属性聚类执行的数据排序，区域映射可以实现更有效的修剪。在表扫描和索引扫描期间（例如，通过rowid获取），区域映射允许修剪不满足表列上的谓词的数据块。</p>
                     <div class="infoboxnotealso" id="GUID-6874226F-1DC1-4864-9695-5FBDF646F59D__GUID-F3BBC05F-991F-4E35-8631-6065A4636C76">
                        <p class="notep1">也可以看看：</p>
                        <p>有关属性聚类的信息，请参阅<span class="q">“ <a href="attribute-clustering.html#GUID-08788616-8D61-4550-9871-301503557E60">关于属性聚类</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="DWHSG9358"></a><div class="props_rev_3"><a id="GUID-17F2043C-BD41-400F-9FBE-BD14CE87980E" name="GUID-17F2043C-BD41-400F-9FBE-BD14CE87980E"></a><h4 id="DWHSG-GUID-17F2043C-BD41-400F-9FBE-BD14CE87980E" class="sect4"><span class="enumeration_section">14.1.3</span>区域图的类型</h4>
                  <div>
                     <p>那里有两个<a id="d56099e227" class="indexterm-anchor"></a><a id="d56099e231" class="indexterm-anchor"></a>区域地图的类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>基本区域映射在单个表上定义，并维护此表的某些列的最小值和最大值。</p>
                        </li>
                        <li>
                           <p>在具有到一个或多个其他表的外部联接的表上定义联接区域映射，并维护其他表中某些列的最小值和最大值。这些连接条件在主 - 细节关系以及事实和维度表之间的星型模式中很常见。</p>
                           <p>对于星型查询，多个维度表通过PK-FK关系与事实表连接。此处，连接区域映射维护事实表的区域的维度表中的列的最小值和最大值。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9359"></a><div class="props_rev_3"><a id="GUID-E6E8BDF4-F3FA-49AF-B56C-BA1245CC8BB2" name="GUID-E6E8BDF4-F3FA-49AF-B56C-BA1245CC8BB2"></a><h4 id="DWHSG-GUID-E6E8BDF4-F3FA-49AF-B56C-BA1245CC8BB2" class="sect4"><span class="enumeration_section">14.1.4</span>区域地图的好处</h4>
                  <div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在表或表分区的顺序扫描或索引扫描期间启用I / O减少</p>
                        </li>
                        <li>
                           <p>区域映射列与分区键相关时，为分区和复合分区表启用基于非键列的分区修剪</p>
                        </li>
                        <li>
                           <p>通过交叉排序，在聚类列的子集上启用I / O减少，以进行属性聚类</p>
                        </li>
                        <li>
                           <p>消除与使用索引相关的存储成本</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E6E8BDF4-F3FA-49AF-B56C-BA1245CC8BB2__GUID-2EE3EA3F-AF00-42C1-B48A-D3E2A08E1D6A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../sqlrf/CREATE-MATERIALIZED-ZONEMAP.html#SQLRF56947" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div><a id="DWHSG9360"></a><div class="props_rev_3"><a id="GUID-14BE02F3-C78F-45FA-BD15-78FA554B7699" name="GUID-14BE02F3-C78F-45FA-BD15-78FA554B7699"></a><h4 id="DWHSG-GUID-14BE02F3-C78F-45FA-BD15-78FA554B7699" class="sect4"><span class="enumeration_section">14.1.5</span>从区域地图中获益的场景</h4>
                  <div>
                     <p>运用<a id="d56099e312" class="indexterm-anchor"></a>区域映射在以下场景中可能是有益的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用常用谓词执行表扫描</p>
                           <p>区域映射使Oracle数据库能够避免扫描列谓词排除的区域。</p>
                        </li>
                        <li>
                           <p>连接在事实表和维度表之间定义，在维度层次结构列上使用常用谓词</p>
                           <p>事实表行可以按维度属性值排序，修剪区域由属性值的谓词排除。</p>
                        </li>
                        <li>
                           <p>分区表中的列包含与分区键相关的值</p>
                           <p>这将有助于基于“非键”列进行分区修剪。例如，按日期分区的表通常会有其他日期列与分区键或包含随时间变化或循环的序列值的列相关联。</p>
                        </li>
                        <li>
                           <p>对区域映射列值执行数据聚类</p>
                           <p>属性集群专门为此目的而设计。或者，使用数据中固有的排序（例如，顺序加载的基于时间的列值或加载时排序的数据）是合适的。</p>
                        </li>
                        <li>
                           <p>在表上执行频繁和低基数索引范围扫描</p>
                           <p>可以单独使用属性聚类来改进压缩因子。区域映射可用于通过修剪排除区域中的查找来提高索引扫描的效率。或者，区域映射可用于替换索引。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9361"></a><div class="props_rev_3"><a id="GUID-08DB84F2-8163-4E02-9D2E-8A10351335E4" name="GUID-08DB84F2-8163-4E02-9D2E-8A10351335E4"></a><h4 id="DWHSG-GUID-08DB84F2-8163-4E02-9D2E-8A10351335E4" class="sect4"><span class="enumeration_section">14.1.6</span>关于维护区域映射</h4>
                  <div>
                     <p>区域映射基于表，因此，对基础表的任何更改都会影响区域映射的状态。根据对表执行的操作，区域映射的部分或全部区域会受到影响。受基础表更改影响的区域映射需要维护。</p>
                     <p>区域地图维护包含一个或多个任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>检查受影响的区域地图的有效性</p>
                        </li>
                        <li>
                           <p>跟踪受影响区域地图的陈旧性</p>
                        </li>
                        <li>
                           <p>刷新已变为陈旧的受影响区域映射（取决于为区域映射设置的刷新模式）</p>
                        </li>
                     </ul>
                     <p>当区域映射所基于的基表结构发生更改时，例如，删除由区域映射维护其最小值和最大值的表列，则区域映射将变为<span class="bold">无效</span> 。查询不使用无效的区域映射，Oracle数据库不维护这些区域映射。但是，如果基表的结构发生了与区域映射无关的更改（例如，向表中添加新列），则区域映射将保持有效，但需要进行编译。Oracle数据库会在后续操作中自动编译区域映射，例如通过查询使用区域映射。或者，您可以使用<code class="codeph">ALTER MATERIALIZED ZONEMAP</code>命令的<code class="codeph">COMPILE</code>子句编译区域映射。
                     </p>
                     <div class="infoboxnotealso" id="GUID-08DB84F2-8163-4E02-9D2E-8A10351335E4__GUID-0F56EFD6-3860-49DB-B8C2-3C9FE59EC1D6">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="using-zone-maps.html#GUID-1D2BB7B1-440D-403C-BD24-AFAA39789568">编译区域地图</a> ”</span></p>
                     </div>
                     <p>当基础表的数据发生更改时，受这些更改影响的区域将标记为<span class="bold">过时</span> 。只有陈旧区域映射中的数据不是最新的或新鲜的，但其定义仍然有效。由于基础表上的不同类型的操作，Oracle数据库会自动跟踪区域映射的过时性。根据在基础表上执行的操作类型，Oracle数据库会将整个区域映射标记为陈旧，或者区域映射中的某些区域标记为陈旧。
                     </p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-zone-maps.html#GUID-03B84C4C-BA4A-4C5C-8F92-AD4A56AD617A">需要区域地图维护的操作</a></p>
                        </li>
                        <li>
                           <p><a href="using-zone-maps.html#GUID-586FD01D-2F00-4185-BCF9-424E19B8E8E9">区域地图自动刷新的场景</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9362"></a><div class="props_rev_3"><a id="GUID-03B84C4C-BA4A-4C5C-8F92-AD4A56AD617A" name="GUID-03B84C4C-BA4A-4C5C-8F92-AD4A56AD617A"></a><h5 id="DWHSG-GUID-03B84C4C-BA4A-4C5C-8F92-AD4A56AD617A" class="sect5"><span class="enumeration_section">14.1.6.1</span>需要区域地图维护的操作</h5>
                     <div>
                        <p>在一个或多个基础表上执行以下操作时，需要区域映射维护：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>DML（插入，删除，更新，常规加载）。</p>
                           </li>
                           <li>
                              <p>直接路径插入和加载。</p>
                           </li>
                           <li>
                              <p>分区维护操作（ <code class="codeph">MOVE</code> ， <code class="codeph">SPLIT</code> ， <code class="codeph">MERGE</code> ， <code class="codeph">DROP</code> ， <code class="codeph">TRUNCATE</code>和<code class="codeph">EXCHANGE</code> ），移动表数据和表的在线重新定义。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DWHSG9363"></a><div class="props_rev_3"><a id="GUID-586FD01D-2F00-4185-BCF9-424E19B8E8E9" name="GUID-586FD01D-2F00-4185-BCF9-424E19B8E8E9"></a><h5 id="DWHSG-GUID-586FD01D-2F00-4185-BCF9-424E19B8E8E9" class="sect5"><span class="enumeration_section">14.1.6.2</span>自动刷新区域映射的场景</h5>
                     <div>
                        <p>区域映射刷新模式确定Oracle数据库是否将自动刷新受上述操作影响的区域映射。</p>
                        <p>Oracle数据库对受以下内容影响的区域映射执行自动刷新：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果刷新模式为<code class="codeph">REFRESH ON COMMIT</code>则为DML操作。具有<code class="codeph">REFRESH ON COMMIT</code>模式的区域映射在事务上保持新鲜。提交事务时执行刷新。
                              </p>
                           </li>
                           <li>
                              <p>如果刷新模式为<code class="codeph">REFRESH ON LOAD</code>则直接路径插入或加载。</p>
                              <p>在基础表上执行DML或PMOP操作后，带有<code class="codeph">REFRESH ON LOAD</code>区域映射可能会过时。
                              </p>
                           </li>
                           <li>
                              <p>如果刷新模式为<code class="codeph">REFRESH ON DATA MOVEMENT</code> ，则PMOP（ <code class="codeph">MOVE</code> ， <code class="codeph">SPLIT</code> ， <code class="codeph">MERGE</code> ， <code class="codeph">DROP</code> ）或表移动。</p>
                              <p>在DML，直接路径插入或加载，PMOP（ <code class="codeph">TRUNCATE</code> ， <code class="codeph">EXCHANGE</code> ）或基础表的在线重新定义之后，具有<code class="codeph">REFRESH ON DATA MOVEMENT</code>区域映射可能会变得陈旧</p>
                           </li>
                           <li>
                              <p>如果刷新模式为<code class="codeph">REFRESH ON LOAD DATA MOVEMENT</code> ，则直接路径插入或加载，PMOP（ <code class="codeph">MOVE</code> ， <code class="codeph">SPLIT</code> ， <code class="codeph">MERGE</code> ， <code class="codeph">DROP</code> ）或表移动。</p>
                              <p>在DML，PMOP（ <code class="codeph">TRUNCATE</code> ， <code class="codeph">EXCHANGE</code> ）或基础表的在线重新定义之后，带有<code class="codeph">REFRESH ON LOAD DATA MOVEMENT</code>区域映射可能会变得陈旧。
                              </p>
                           </li>
                        </ul>
                        <p>如果刷新模式为<code class="codeph">REFRESH ON DEMAND</code> Oracle数据库不会自动刷新受基础表上任何操作影响的区域映射。必须手动刷新<code class="codeph">REFRESH ON DEMAND</code>区域地图</p>
                        <div class="infoboxnotealso" id="GUID-586FD01D-2F00-4185-BCF9-424E19B8E8E9__GUID-FC9E03E2-1DB1-4B82-8950-8FC1738F08F5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="using-zone-maps.html#GUID-EEE26E3B-38B7-47DD-9892-818CB8432158" title="当区域映射所基于的表中的数据发生更改时，与更改的行对应的区域将标记为陈旧。您需要刷新区域图以使区域成为当前区域。">区域地图的刷新和陈旧</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="using-zone-maps.html#GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE">维护区域地图</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG8938"></a><div class="props_rev_3"><a id="GUID-BD689807-825D-47F2-81AB-9FD32A3E39C0" name="GUID-BD689807-825D-47F2-81AB-9FD32A3E39C0"></a><h3 id="DWHSG-GUID-BD689807-825D-47F2-81AB-9FD32A3E39C0" class="sect3"><span class="enumeration_section">14.2</span>区域地图操作</h3>
               <div>
                  <p>本节介绍涉及区域映射的常见任务，包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-zone-maps.html#GUID-2942249C-B601-4AF1-8D3E-19B50548A32A">区域映射所需的权限</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-4FDF378C-B8CC-4C12-A545-237B42F084BA">创建区域地图</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A">修改区域地图</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-6560A78B-D132-4555-8619-CCDC2C9FCF38">删除区域地图</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-1D2BB7B1-440D-403C-BD24-AFAA39789568">编译区域地图</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-8266B0F1-29B0-418C-90F5-09B0AAA87F8F">控制区域地图的使用</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE">维护区域地图</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9364"></a><div class="props_rev_3"><a id="GUID-2942249C-B601-4AF1-8D3E-19B50548A32A" name="GUID-2942249C-B601-4AF1-8D3E-19B50548A32A"></a><h4 id="DWHSG-GUID-2942249C-B601-4AF1-8D3E-19B50548A32A" class="sect4"><span class="enumeration_section">14.2.1</span>区域映射所需的权限</h4>
                  <div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要在自己的架构中创建，更改或删除区域映射，您必须具有<code class="codeph">CREATE MATERIALIZED ZONEMAP</code>特权</p>
                        </li>
                        <li>
                           <p>要在其他模式中创建区域映射，您必须具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>特权。
                           </p>
                        </li>
                        <li>
                           <p>要在您自己的模式中创建区域映射，但在其他模式的表上创建区域映射，您必须具有<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">READ ANY TABLE</code>特权。
                           </p>
                        </li>
                        <li>
                           <p>要使用其他模式中的表在其他模式中创建区域映射，您必须同时具有<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>和<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>特权。您可以拥有<code class="codeph">READ ANY TABLE</code>权限，而不是<code class="codeph">SELECT ANY TABLE</code>权限。
                           </p>
                        </li>
                        <li>
                           <p>要更改其他模式中的区域映射，您必须具有<code class="codeph">ALTER ANY MATERIALIZED ZONEMAP</code>权限。
                           </p>
                        </li>
                        <li>
                           <p>要删除其他模式中的区域映射，您必须具有<code class="codeph">DROP ANY MATERIALIZED ZONEMAP</code>特权。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG8939"></a><div class="props_rev_3"><a id="GUID-4FDF378C-B8CC-4C12-A545-237B42F084BA" name="GUID-4FDF378C-B8CC-4C12-A545-237B42F084BA"></a><h4 id="DWHSG-GUID-4FDF378C-B8CC-4C12-A545-237B42F084BA" class="sect4"><span class="enumeration_section">14.2.2</span>创建区域图</h4>
                  <div>
                     <div class="section">
                        <p>虽然可以在表上创建区域映射以及属性聚类，但区域映射与属性聚类无关。无论属性聚类如何，都可以独立创建区域地图。</p>
                        <p>区域映射使用的存储结构是在定义它们的表的缺省表空间中创建的。</p>
                        <div class="infoboxnotealso" id="GUID-4FDF378C-B8CC-4C12-A545-237B42F084BA__GUID-DE56A852-C005-4835-88A6-0B6B47F4AAB3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>用于区域映射创建语法的<a href="../sqlrf/CREATE-MATERIALIZED-ZONEMAP.html#SQLRF56867" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关区域映射限制的信息，请<a href="../sqlrf/CREATE-MATERIALIZED-ZONEMAP.html#SQLRF56947" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p>本节包含以下主题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-zone-maps.html#GUID-655206D5-CD38-4CE3-AD20-DC984BB7CE26">使用属性聚类创建区域映射</a></p>
                           </li>
                           <li>
                              <p><a href="using-zone-maps.html#GUID-C3A55971-2E72-4B5E-A5B4-27104DF05C0A">创建区域映射独立于属性聚类</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG9365"></a><div class="props_rev_3"><a id="GUID-655206D5-CD38-4CE3-AD20-DC984BB7CE26" name="GUID-655206D5-CD38-4CE3-AD20-DC984BB7CE26"></a><h5 id="DWHSG-GUID-655206D5-CD38-4CE3-AD20-DC984BB7CE26" class="sect5"><span class="enumeration_section">14.2.2.1</span>使用属性聚类创建区域映射</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用<code class="codeph">WITH MATERIALIZED ZONEMAP</code>子条款创建区域映射。在为表定义属性集群时，或者在修改集群定义时，可以使用此子条款。
                           </p>
                           <p>使用以下任一主题中描述的步骤创建具有属性群集的区域映射：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-zone-maps.html#GUID-F33AC20C-D551-4A62-AE11-37C5764667D4">使用线性属性聚类创建基本区域图</a></p>
                              </li>
                              <li>
                                 <p><a href="using-zone-maps.html#GUID-A9972E60-FF25-42AF-ABB8-D8C12759ECF3">使用Interleaved Attribute Clustering创建连接区域映射</a></p>
                              </li>
                              <li>
                                 <p><a href="using-zone-maps.html#GUID-FCAB2956-727F-4C8A-BD47-AF51DAB14D95">在属性聚类后创建区域映射</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-655206D5-CD38-4CE3-AD20-DC984BB7CE26__GUID-6B4C5EA7-CAF4-4DF3-B571-41E73870ED54">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="attribute-clustering.html#GUID-7B007A3C-53C2-4437-9E71-9ECECF8B4FAB">属性聚类，</a>用于获取有关属性聚类的信息</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="DWHSG9366"></a><div class="props_rev_3"><a id="GUID-F33AC20C-D551-4A62-AE11-37C5764667D4" name="GUID-F33AC20C-D551-4A62-AE11-37C5764667D4"></a><h6 id="DWHSG-GUID-F33AC20C-D551-4A62-AE11-37C5764667D4" class="sect6"><span class="enumeration_section">14.2.2.1.1</span>使用线性属性聚类创建基本区域图</h6>
                        <div>
                           <div class="section">
                              <p>假设销售查询通常指定客户ID或客户ID和产品ID的组合。您可以创建属性聚簇表，以便通过区域映射修剪查询。您创建一个表如下：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售（prod_id NUMBER NOT NULL，cust_id NUMBER NOT NULL，time_id DATE NOT NULL，channel_id NUMBER NOT NULL，promo_id NUMBER NOT NULL，quantity_sold NUMBER（10,2），amount_sold NUMBER（10,2））按线性顺序聚类（ cust_id，prod_id）YES ON LOAD YES数据运动带材料ZONEMAP;</pre><p><code class="codeph">ZMAP$_SALES</code>了列（ <code class="codeph">cust_id</code> ， <code class="codeph">prod_id</code> ）上的区域映射<code class="codeph">ZMAP$_SALES</code> 。这里， <code class="codeph">ZMAP$_SALES</code>是Oracle数据库为区域映射自动生成的名称。但是，您可以通过将其包含在<code class="codeph">WITH MATERIALIZED ZONEMAP</code>后面的括号中来指定区域映射的名称，如<span class="q">“ <a href="using-zone-maps.html#GUID-A9972E60-FF25-42AF-ABB8-D8C12759ECF3">使用Interleaved Attribute Clustering创建连接区域映射</a> ”中所述</span> 。
                              </p>
                              <p>对<code class="codeph">cust_id</code>和<code class="codeph">prod_id</code>或前缀<code class="codeph">cust_id</code>限定的查询将经历自然修剪。以下示例显示了数据库在表扫描期间如何修剪。
                              </p>
                              <p>应用程序发出以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM sales WHERE cust_id = 100;</pre><p>由于该表是<code class="codeph">LINEAR</code>的<code class="codeph">BY</code> <code class="codeph">LINEAR</code> <code class="codeph">ORDER</code> ，因此数据库只能读取包含<code class="codeph">cust_id</code>值100的区域。
                              </p>
                              <p>应用程序发出以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM sales WHERE cust_id = 100 AND prod_id = 2300;</pre><p>由于该表是<code class="codeph">LINEAR</code>的<code class="codeph">BY</code> <code class="codeph">LINEAR</code> <code class="codeph">ORDER</code> ，因此数据库必须只读取包含<code class="codeph">cust_id</code>值100和<code class="codeph">prod_id</code>为2300的区域。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="DWHSG9367"></a><div class="props_rev_3"><a id="GUID-A9972E60-FF25-42AF-ABB8-D8C12759ECF3" name="GUID-A9972E60-FF25-42AF-ABB8-D8C12759ECF3"></a><h6 id="DWHSG-GUID-A9972E60-FF25-42AF-ABB8-D8C12759ECF3" class="sect6"><span class="enumeration_section">14.2.2.1.2</span>使用Interleaved Attribute Clustering创建连接区域映射</h6>
                        <div>
                           <div class="section">
                              <p>考虑一个包含<code class="codeph">sales</code>事实表及其两个维度表的数据仓库： <code class="codeph">customers</code>和<code class="codeph">products</code> 。大多数查询都有<code class="codeph">customers</code>表层次结构（ <code class="codeph">country_id</code> ， <code class="codeph">cust_state_province</code> ， <code class="codeph">cust_city</code> ）和<code class="codeph">products</code>层次结构（ <code class="codeph">prod_category</code> ， <code class="codeph">prod_subcategory</code> ）的<code class="codeph">prod_subcategory</code> 。您可以对<code class="codeph">sales</code>表使用交叉排序，如以下部分语句所示：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售（prod_id NUMBER NOT NULL，cust_id NUMBER NOT NULL，amount_sold NUMBER（10,2））CLUSTERING销售JOIN产品ON（sales.prod_id = products.prod_id）JOIN customers ON（sales.cust_id = customers.cust_id）BY INTERLEAVED ORDER（（products.prod_category，products.prod_subcategory），（customers.country_id，customers.cust_state_province，customers.cust_city））YES ON LOAD YES FOR DATA MOVEMENT WITH MATERIALIZED ZONEMAP（sales_zmap）;</pre><p>为属性聚簇表创建名为<code class="codeph">sales_zmap</code>的区域映射。请注意，在此clustering子句中，维度表的连接列必须具有主键或唯一键约束。请注意，对于来自单个维度的交错顺序列，应该在聚类子句中出现一个单独的组，例如括号为'（'..'）'（ <code class="codeph">prod_category</code> ， <code class="codeph">prod_subcategory</code> ）。此外，列应遵循维度中的层次结构（例如<code class="codeph">prod_category</code>的自然层次结构， <code class="codeph">prod_subcategory</code> ），并且组中列的顺序应遵循层次结构的顺序。这允许Oracle数据库根据维度表中存在的层次结构有效地聚类数据。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="DWHSG9368"></a><div class="props_rev_3"><a id="GUID-FCAB2956-727F-4C8A-BD47-AF51DAB14D95" name="GUID-FCAB2956-727F-4C8A-BD47-AF51DAB14D95"></a><h6 id="DWHSG-GUID-FCAB2956-727F-4C8A-BD47-AF51DAB14D95" class="sect6"><span class="enumeration_section">14.2.2.1.3</span>属性聚类后创建区域映射</h6>
                        <div>
                           <div class="section">
                              <p>假设数据库中存在一个名为<code class="codeph">sales</code>的表。您可以使用以下命令为<code class="codeph">sales</code>表定义属性集群：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE销售ADD CLUSTERING按交错订单（cust_id，prod_id）是在装载时是数据移动;</pre><p>虽然此命令将属性集群添加到表定义，但它不会对<code class="codeph">sales</code>表中的现有数据进行集群。在<code class="codeph">sales</code>表上执行数据移动操作时，由于<code class="codeph">YES ON DATA MOVEMENT</code>选项，其数据将被聚类。
                              </p>
                              <p>以下命令将<code class="codeph">sales</code>表中的数据进行聚类：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLES销售MOVE;</pre><p>在<code class="codeph">sales</code>表中的数据进行群集后，您可以通过使用以下命令修改群集来在<code class="codeph">sales</code>表上定义区域映射：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE销售使用MATERIALIZED ZONEMAP进行MODIFY CLUSTERING（sales_zmap）;</pre><p>随后，如有必要，可以使用以下命令通过修改群集来删除区域映射：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE销售无需物料化ZONEMAP的MODIFY CLUSTERING;</pre></div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="DWHSG9369"></a><div class="props_rev_3"><a id="GUID-C3A55971-2E72-4B5E-A5B4-27104DF05C0A" name="GUID-C3A55971-2E72-4B5E-A5B4-27104DF05C0A"></a><h5 id="DWHSG-GUID-C3A55971-2E72-4B5E-A5B4-27104DF05C0A" class="sect5"><span class="enumeration_section">14.2.2.2</span>创建独立于属性聚类的区域映射</h5>
                     <div>
                        <div class="section">
                           <p>使用<code class="codeph">CREATE MATERIALIZED ZONEMAP</code>命令在表上创建区域映射。此区域映射独立于属性集群，这意味着它可以在集群或非集群表上创建。此外，用于区域映射的列集可以与用于属性集群的列集相同或不同。
                           </p>
                           <p>创建区域映射时，必须指定区域映射所基于的表列。</p>
                           <p>使用以下任一主题中描述的步骤创建独立于属性群集的区域映射：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-zone-maps.html#GUID-5847A577-5E12-491E-8570-787A270ABF41">创建独立于属性聚类的基本区域映射</a></p>
                              </li>
                              <li>
                                 <p><a href="using-zone-maps.html#GUID-42FC0CDF-9D54-42F5-AA6B-705FA6272605">创建独立于属性聚类的连接区域映射</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div><a id="DWHSG9371"></a><a id="DWHSG9370"></a><div class="props_rev_3"><a id="GUID-5847A577-5E12-491E-8570-787A270ABF41" name="GUID-5847A577-5E12-491E-8570-787A270ABF41"></a><h6 id="DWHSG-GUID-5847A577-5E12-491E-8570-787A270ABF41" class="sect6"><span class="enumeration_section">14.2.2.2.1</span>创建独立于属性聚类的基本区域图</h6>
                        <div>
                           <div class="section">
                              <p>假设<code class="codeph">sales</code>表上的查询经常指定客户ID，产品ID或两列的组合。您可以在<code class="codeph">sales</code>表的customer ID和product ID列上创建区域映射，以便查询从修剪中受益，如<a href="using-zone-maps.html#GUID-5847A577-5E12-491E-8570-787A270ABF41__CIHFDHHD">例14-1</a>所示。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-5847A577-5E12-491E-8570-787A270ABF41__CIHFDHHD">
                              <p class="titleinexample">示例14-1创建独立于属性群集的基本区域映射</p>
                              <p>您可以使用以下语句在<code class="codeph">sales</code>表上创建区域映射<code class="codeph">sales_zmap</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap ON sales（cust_id，prod_id）;</pre><p>此语句相当于以下<code class="codeph">CREATE</code> <code class="codeph">...</code> <code class="codeph">AS</code>声明：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap REFRESH ON LOAD DATA MOVEMENT AS SELECT SYS_OP_ZONE_ID（rowid），MIN（cust_id），MAX（cust_id），MIN（prod_id），MAX（prod_id）FROM sales GROUP BY SYS_OP_ZONE_ID（rowid）;</pre><p>在此语句中， <code class="codeph">SYS_OP_ZONE_ID(rowid)</code>函数用于处理区域映射。<code class="codeph">SYS_OP_ZONE_ID</code>函数在给定事实表行的rowid的情况下标识特定范围的连续磁盘块（区域）。此功能有助于维护分区级别的最小和最大范围，执行分区修剪和区域映射的快速刷新。与区域映射一起使用时，有助于将一组连续数据块中的所有行映射到单个区域。
                              </p>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DWHSG9373"></a><a id="DWHSG9372"></a><div class="props_rev_3"><a id="GUID-42FC0CDF-9D54-42F5-AA6B-705FA6272605" name="GUID-42FC0CDF-9D54-42F5-AA6B-705FA6272605"></a><h6 id="DWHSG-GUID-42FC0CDF-9D54-42F5-AA6B-705FA6272605" class="sect6"><span class="enumeration_section">14.2.2.2.2</span>创建独立于属性聚类的连接区域映射</h6>
                        <div>
                           <div class="section">
                              <p>考虑一个包含<code class="codeph">sales</code>事实和多个维度的数据仓库。大多数查询都有<code class="codeph">customers</code>表层次结构（ <code class="codeph">cust_state_province, cust_city</code> ）的谓词。您可以对sales表使用交错排序，如<a href="using-zone-maps.html#GUID-42FC0CDF-9D54-42F5-AA6B-705FA6272605__CreatingAJoinZoneMapIndependentOfAt-08315BD3">例14-2</a>所示。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-42FC0CDF-9D54-42F5-AA6B-705FA6272605__CreatingAJoinZoneMapIndependentOfAt-08315BD3">
                              <p class="titleinexample">示例14-2创建独立于属性群集的连接区域映射</p>
                              <p>连接区域映射涉及从创建区域映射的表到一个或多个其他表的外连接。最常用于星型模式设置的连接区域映射跟踪维度表中的列的最小值和最大值，而不是事实表中的列，如以下语句中所示：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap REFRESH ON LOAD DATA MOVEMENT AS SELECT SYS_OP_ZONE_ID（s.rowid），MIN（cust_state_province），MAX（cust_state_province），MIN（cust_city），MAX（cust_city）FROM sales s，customers c WHERE s.cust_id = c。 cust_id（+）GROUP BY SYS_OP_ZONE_ID（s.rowid）;</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div>
               </div><a id="DWHSG9374"></a><a id="DWHSG9375"></a><a id="DWHSG9376"></a><a id="DWHSG9377"></a><a id="DWHSG9378"></a><a id="DWHSG9379"></a><a id="DWHSG9380"></a><a id="DWHSG8941"></a><div class="props_rev_3"><a id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A" name="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A"></a><h4 id="DWHSG-GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A" class="sect4"><span class="enumeration_section">14.2.3</span>修改区域映射</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>语句更改区域映射。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-1B45F73E-B0EB-43B0-B132-CEB67082A48E">
                        <p class="titleinexample">示例14-3使区域映射不可用</p>
                        <p>以下语句使区域映射不可用，这意味着查询不再使用此区域映射，Oracle数据库不再维护区域映射。</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap UNUSABLE;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-93532198-C610-4E05-A92A-3D22088777C6">
                        <p class="titleinexample">示例14-4为区域映射执行完全刷新</p>
                        <p>以下语句执行区域映射的完整刷新：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REBUILD COMPLETE;</pre><p>作为重建的一部分，如果区域映射早先标记为不可用，则该区域映射也可用。</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-4D616835-C011-455D-AE32-53D81DBFC10F">
                        <p class="titleinexample">示例14-5刷新区域映射</p>
                        <p>如果可能，以下语句将执行快速刷新。否则，执行完整的刷新。</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REBUILD;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-348E97C0-AF08-49A4-B097-307EBB4EBE5C">
                        <p class="titleinexample">示例14-6禁用区域映射的修剪</p>
                        <p>以下语句禁用修剪，您可能希望对其进行性能测量：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap DISABLE PRUNING;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-4F785988-FF12-484A-8B73-3AA9725F536B">
                        <p class="titleinexample">示例14-7启用区域映射的修剪</p>
                        <p>以下语句为区域映射启用了可能先前已禁用的修剪：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap ENABLE PRUNING;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-F739DBD7-1B67-464D-83D5-A7A484BDEED0">
                        <p class="titleinexample">示例14-8禁用区域映射的刷新</p>
                        <p>以下语句将关闭加载和数据移动时的刷新，这使您可以控制刷新区域映射的方式和时间：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REFRESH ON DEMAND;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-9F46E0DC-CF23-484D-844B-DC9B182F7C78">
                        <p class="titleinexample">示例14-9在区域映射的提交时启用刷新</p>
                        <p>以下语句将在每个事务提交时打开区域映射的刷新：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REFRESH ON COMMIT;</pre><div class="infoboxnotealso" id="GUID-70722C5D-2785-4934-9EA6-93114EF9ED0A__GUID-9DBF7F15-2114-4CF1-B5AA-DE7EBCFDF73A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../sqlrf/ALTER-MATERIALIZED-ZONEMAP.html#SQLRF56854" target="_blank"><span class="italic">Oracle数据库SQL语言参考，</span></a>用于更改区域映射的语法</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DWHSG8942"></a><div class="props_rev_3"><a id="GUID-6560A78B-D132-4555-8619-CCDC2C9FCF38" name="GUID-6560A78B-D132-4555-8619-CCDC2C9FCF38"></a><h4 id="DWHSG-GUID-6560A78B-D132-4555-8619-CCDC2C9FCF38" class="sect4"><span class="enumeration_section">14.2.4</span>丢弃区域映射</h4>
                  <div>
                     <div class="section">
                        <p>你可以放弃<a id="d56099e1420" class="indexterm-anchor"></a><a id="d56099e1424" class="indexterm-anchor"></a>区域映射通过发出<code class="codeph">DROP</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>语句，如下所示：</p><pre class="oac_no_warn" dir="ltr">DROP MATERIALIZED ZONEMAP sales_zmap;</pre><div class="infoboxnotealso" id="GUID-6560A78B-D132-4555-8619-CCDC2C9FCF38__GUID-DEABFA45-65CE-46EB-8CB1-9F473859E489">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/DROP-MATERIALIZED-ZONEMAP.html#SQLRF56892" target="_blank"><span class="italic">Oracle Database SQL语言参考，</span></a>用于删除区域映射的语法</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9171"></a><div class="props_rev_3"><a id="GUID-1D2BB7B1-440D-403C-BD24-AFAA39789568" name="GUID-1D2BB7B1-440D-403C-BD24-AFAA39789568"></a><h4 id="DWHSG-GUID-1D2BB7B1-440D-403C-BD24-AFAA39789568" class="sect4"><span class="enumeration_section">14.2.5</span>编译区域映射</h4>
                  <div>
                     <div class="section">
                        <p>区域映射所基于的基表上的任何DDL操作都将影响区域映射的编译状态。这意味着必须编译定义区域映射的查询以检查区域映射是否仍然有效。此行为类似于实例化视图，它们也受基表上执行的DDL的影响。Oracle数据库将在第一次尝试在DDL操作后使用区域映射时编译区域映射。但是，您可以使用alter DDL语句显式编译区域映射，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap COMPILE;</pre><p>编译区域映射的结果将有效或无效，具体取决于DDL执行的特定操作。例如，如果完成DDL以向事实表添加列，则编译后区域映射将有效。但是如果完成DDL以删除定义查询中引用的列，则编译后区域映射将无效。</p>
                        <p>要记住的一些要点是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果删除了群集子句中显示的列，则会删除群集。此外，如果在群集中创建了区域地图，则也会删除区域地图。</p>
                           </li>
                           <li>
                              <p>如果删除星型模式中的维度表，并且它涉及事实表上的群集，则会删除事实表上的群集。此外，如果作为群集的一部分创建了区域地图，则将删除区域地图。</p>
                           </li>
                           <li>
                              <p>如果用户在聚类子句中涉及的维度表上删除了所需的主键或唯一键，则群集将失效（数据将不会在后续加载或某些类型的PMOP执行的数据移动操作上进行聚类）。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9172"></a><div class="props_rev_3"><a id="GUID-8266B0F1-29B0-418C-90F5-09B0AAA87F8F" name="GUID-8266B0F1-29B0-418C-90F5-09B0AAA87F8F"></a><h4 id="DWHSG-GUID-8266B0F1-29B0-418C-90F5-09B0AAA87F8F" class="sect4"><span class="enumeration_section">14.2.6</span>控制区域地图的使用</h4>
                  <div>
                     <p>您可以控制整个SQL工作负载或特定SQL语句的区域映射的使用。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-zone-maps.html#GUID-6016EDDE-05BC-4316-B63D-95CACE3A5F37">控制整个SQL工作负载的区域映射用法</a></p>
                        </li>
                        <li>
                           <p><a href="using-zone-maps.html#GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC">控制特定SQL语句的区域映射用法</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9381"></a><div class="props_rev_3"><a id="GUID-6016EDDE-05BC-4316-B63D-95CACE3A5F37" name="GUID-6016EDDE-05BC-4316-B63D-95CACE3A5F37"></a><h5 id="DWHSG-GUID-6016EDDE-05BC-4316-B63D-95CACE3A5F37" class="sect5"><span class="enumeration_section">14.2.6.1</span>控制整个SQL工作负载的区域映射用法</h5>
                     <div>
                        <div class="section">
                           <p>您可以在对象级别控制区域贴图的使用。对象级更改适用于SQL工作负载中的所有语句。创建区域映射时，除非通过指定<code class="codeph">DISABLE PRUNING</code>覆盖默认值，否则它可用于修剪。例如，以下语句创建禁用修剪的区域映射：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap禁止销售销售（cust_id，prod_id）;</pre><p>此区域映射由Oracle数据库创建和维护，但不用于工作负载中的任何SQL。您可以使用以下<code class="codeph">ALTER MATERIALIZED ZONEMAP</code>语句使其可用于修剪：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap ENABLE PRUNING;</pre><p>同样，您可以使用以下语句使区域映射不可用于修剪：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap DISABLE PRUNING;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9174"></a><a id="DWHSG9176"></a><a id="DWHSG9178"></a><a id="DWHSG9382"></a><div class="props_rev_3"><a id="GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC" name="GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC"></a><h5 id="DWHSG-GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC" class="sect5"><span class="enumeration_section">14.2.6.2</span>控制特定SQL语句的区域映射用法</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用提示来控制在单个SQL语句级别使用区域映射。请注意，如果禁用区域映射的修剪，则不能使用提示来控制区域映射用法。通过启用修剪并在单个SQL语句中指定负提示，可以通过提示实现更精细的控制。</p>
                           <p>使用<code class="codeph">NO_ZONEMAP</code>提示禁用区域映射的使用以进行修剪。以下示例在修剪数据时禁用区域贴图的使用。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC__GUID-33066484-4279-40BD-8542-A7D1C7A01012">
                           <p class="titleinexample">示例14-10扫描修剪：使用NO_ZONEMAP提示禁用区域映射</p><pre class="oac_no_warn" dir="ltr">SELECT / * + NO_ZONEMAP（S SCAN）* / * FROM sales S WHERE s.time_id BETWEEN'1-15-2008'and'1-31-2008';</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC__GUID-C518CEC3-6784-44B3-9A72-17766861B052">
                           <p class="titleinexample">示例14-11 Join Pruning：使用NO_ZONEMAP提示禁用区域映射</p><pre class="oac_no_warn" dir="ltr">SELECT / * + NO_ZONEMAP（S JOIN）* / * FROM sales s WHERE s.time_id BETWEEN'1-15-2008'and'1-31-2008';</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F8CDC4B6-9472-4825-8B95-69EEEC80EEFC__GUID-D234271E-9129-4750-9767-628C9C74CE66">
                           <p class="titleinexample">示例14-12分区修剪：使用NO_ZONEMAP提示禁用区域映射</p><pre class="oac_no_warn" dir="ltr">SELECT / * + NO_ZONEMAP（S PARTITION）* / * FROM sales S WHERE s.time_id BETWEEN'1-15-2008'and'1-31-2008';</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DWHSG9383"></a><a id="DWHSG9384"></a><a id="DWHSG9385"></a><a id="DWHSG8947"></a><div class="props_rev_3"><a id="GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE" name="GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE"></a><h4 id="DWHSG-GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE" class="sect4"><span class="enumeration_section">14.2.7</span>维护区域映射</h4>
                  <div>
                     <div class="section">
                        <p>您可以<a id="d56099e1652" class="indexterm-anchor"></a>指定在创建区域映射时或者稍后通过更改区域映射定义时必须如何维护区域映射。请参阅<span class="q">“ <a href="using-zone-maps.html#GUID-394749A4-73A6-421D-B792-27B748450222">区域地图维护注意事项</a> ”</span> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE__GUID-84EA2C58-3612-44C8-B96C-A1124DFC97AC">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="using-zone-maps.html#GUID-08DB84F2-8163-4E02-9D2E-8A10351335E4">关于维护区域地图</a> ”</span></p>
                        </div>
                        <p>使用<code class="codeph">CREATE MATERIALIZED ZONEMAP</code>或<code class="codeph">ALTER MATERIALIZED ZONEMAP</code>语句中的<code class="codeph">REFRESH</code>子句指定必须如何维护区域映射。如果省略<code class="codeph">CREATE MATERIALIZED ZONEMAP</code>语句中的<code class="codeph">REFRESH</code>子句，则使用的默认值是<code class="codeph">REFRESH ON LOAD DATA MOVEMENT</code> ，它允许Oracle数据库在直接路径加载和某些数据移动操作时维护区域映射。
                        </p>
                        <p>以下语句创建一个区域映射，其维护由用户手动管理：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap REFRESH ON DEMAND ON sales（cust_id，prod_id）;</pre><p>以下语句创建一个区域映射，其维护由Oracle Database在每个事务提交结束时进行管理：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap REFRESH ON COMMIT ON sales（cust_id，prod_id）;</pre><p>因为它在提交时刷新，所以上面的区域映射永远不会变得陈旧。</p>
                        <p>使用<code class="codeph">ALTER MATERIALIZED ZONEMAP</code>语句更改现有区域映射的维护。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE__GUID-0B1A533D-C0C3-455B-9B89-9D5B2D9841AB">
                        <p class="titleinexample">示例14-13在数据移动上启用区域映射维护</p>
                        <p>以下语句允许Oracle数据库对数据移动操作（如<code class="codeph">MOVE</code> ， <code class="codeph">SPLIT</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DROP</code>进行区域映射维护：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REFRESH ON DATA MOVEMENT;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE__GUID-FD274025-ABB4-44D0-A936-A1DE072A003E">
                        <p class="titleinexample">示例14-14在直接路径加载上启用区域映射维护</p>
                        <p>以下语句允许Oracle数据库在直接路径加载操作（例如<code class="codeph">INSERT /*+ APPEND */</code> statements）上进行区域映射维护：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REFRESH ON LOAD;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-904D917B-DA6D-45AB-96F6-7FBF567D19FE__GUID-371EE29C-DE59-47C7-B780-84B467514E23">
                        <p class="titleinexample">示例14-15在数据移动和加载上启用区域图维护</p>
                        <p>以下语句启用Oracle数据库对数据移动和加载操作的区域映射维护：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap更新负载数据移动;</pre><p>请注意， <code class="codeph">REFRESH ON LOAD DATA MOVEMENT</code>是默认选项。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div><a id="DWHSG8948"></a><div class="props_rev_3"><a id="GUID-394749A4-73A6-421D-B792-27B748450222" name="GUID-394749A4-73A6-421D-B792-27B748450222"></a><h5 id="DWHSG-GUID-394749A4-73A6-421D-B792-27B748450222" class="sect5"><span class="enumeration_section">14.2.7.1</span>区域地图维护注意事项</h5>
                     <div>
                        <p>以下是维护区域地图或跟踪其陈旧性时要记住的一些问题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对事实表的DML /并行DML操作</p>
                              <p>创建区域映射时，Oracle数据库会创建内部触发器以跟踪传统DML操作所做的行更改。例如，如果将新行插入到<code class="codeph">sales</code>表中，则此触发器将从<code class="codeph">rowid</code>计算<code class="codeph">zone_id</code> ，并将区域映射中的相应聚合行标记为陈旧。因此，逐区跟踪区域地图的陈旧性，这意味着即使在对事实表进行DML之后，区域地图仍可用于使用新区域中的<code class="codeph">MIN</code> / <code class="codeph">MAX</code>聚合进行修剪。
                              </p>
                              <p>事实表更新后，如果区域映射未引用要更新的列，则区域映射过时不受影响。否则，内部触发器将对应于更新行的区域标记为陈旧。</p>
                           </li>
                           <li>
                              <p>直接加载（即<code class="codeph">INSERT /*+ APPEND */</code> ）操作到事实表</p>
                              <p>即使直接载荷将数据插入高水位线以上，新添加的行也可以属于已为区域地图计算的区域。因此，Oracle数据库将识别其<code class="codeph">MIN</code> / <code class="codeph">MAX</code>聚合可能受新添加数据影响的现有区域，并将此类区域标记为陈旧。同样，Oracle数据库可以继续使用区域映射进行修剪，尽管通过利用仍然保持新鲜的区域的<code class="codeph">MIN</code> / <code class="codeph">MAX</code>聚合直接加载到区域图。如果区域映射具有<code class="codeph">REFRESH ON LOAD</code>选项，则Oracle数据库将在加载结束时执行区域映射刷新。
                              </p>
                           </li>
                           <li>
                              <p>事实表上的数据移动（例如，分区维护操作）</p>
                              <p>数据移动操作包括分区维护操作和在线分区/表重新定义。但是，数据移动（例如，移动分区）将使属于旧分区的现有区域在区域映射中过时，而属于新分区的区域在刷新区域映射之前不会计算。无论区域映射是否刷新，Oracle数据库都将继续使用区域映射来修剪以下数据移动操作。如果区域映射具有<code class="codeph">REFRESH</code> <code class="codeph">ON</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code>选项，则Oracle数据库将在数据移动操作结束时执行刷新。
                              </p>
                           </li>
                           <li>
                              <p>维度表上的数据移动</p>
                              <p>此操作不会影响区域映射。</p>
                           </li>
                           <li>
                              <p>维度表的任何DML</p>
                              <p>此操作使整个区域映射失效，因此需要完全刷新。但是，有一个例外。如果是更新操作并且区域映射未引用更新列集，则它不会受到影响。</p>
                           </li>
                           <li>
                              <p>直接加载到维度表</p>
                              <p>此操作使整个区域映射失效。如果为区域映射指定了<code class="codeph">REFRESH</code> <code class="codeph">ON</code> <code class="codeph">LOAD</code>选项，则Oracle数据库将在加载操作后立即执行区域映射刷新。
                              </p>
                           </li>
                           <li>
                              <p>DDL到事实或维度表</p>
                              <p>在DDL操作时，区域映射标记为未知的过期（即，陈旧设置为<code class="codeph">'unknown'</code> ）并且需要编译（即， <code class="codeph">compile_state</code>设置为<code class="codeph">'needs_compile</code> '）。在此状态下，Oracle数据库不会使用区域映射进行修剪。但是，在DDL操作之后首次使用区域映射时，Oracle数据库将编译区域映射，并根据其结果适当地设置无效和失效状态。例如，如果DDL操作删除了其<code class="codeph">MIN</code> / <code class="codeph">MAX</code>聚合存储在区域映射中的列，则区域映射编译将失败，因此区域映射<code class="codeph">compile_state</code>设置为<code class="codeph">'compilation error'</code> ，过时保留为<code class="codeph">'unknown'</code> ，无效为设为<code class="codeph">'yes'</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9165"></a><div class="props_rev_3"><a id="GUID-EEE26E3B-38B7-47DD-9892-818CB8432158" name="GUID-EEE26E3B-38B7-47DD-9892-818CB8432158"></a><h3 id="DWHSG-GUID-EEE26E3B-38B7-47DD-9892-818CB8432158" class="sect3"><span class="enumeration_section">14.3</span>区域地图的刷新和陈旧</h3>
               <div>
                  <p>当数据库基表中的数据发生更改时，Oracle数据库会将区域映射标记为区域映射中的陈旧区域或单个区域。过时的区域地图不用于修剪，但带有陈旧区域的区域地图仍用于修剪。您必须刷新区域映射以更新区域并使其可用于修剪。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-zone-maps.html#GUID-67445DF7-1688-4007-B52E-EE55EB55B090" title="当区域映射所基于的表中的数据发生更改时，与更改的行对应的区域将标记为陈旧。您需要刷新区域图以使区域成为当前区域。">关于区域地图的陈旧性</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-4B36B2E5-03A1-4004-9E8A-E95E94E91356">关于刷新区域地图</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-3800B313-23CB-45C5-AD09-1ACA78EFD449">刷新区域地图</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9387"></a><a id="DWHSG9388"></a><a id="DWHSG9389"></a><a id="DWHSG9386"></a><div class="props_rev_3"><a id="GUID-67445DF7-1688-4007-B52E-EE55EB55B090" name="GUID-67445DF7-1688-4007-B52E-EE55EB55B090"></a><h4 id="DWHSG-GUID-67445DF7-1688-4007-B52E-EE55EB55B090" class="sect4"><span class="enumeration_section">14.3.1</span>关于区域地图的陈旧性</h4>
                  <div>
                     <p>当区域映射所基于的表中的数据发生更改时，与更改的行对应的区域将标记为陈旧。您需要刷新区域图以使区域成为当前区域。</p>
                     <p>当更新事实表的分区中的行时，由于更新，与分区表中的区域对应的行被标记为陈旧。这会自动使聚合的分区级别信息无效，并且只能在区域级别进行修剪。由于更新，区域映射中与此特定分区对应的行也标记为陈旧。</p>
                     <p>在<a href="using-zone-maps.html#GUID-67445DF7-1688-4007-B52E-EE55EB55B090__CIHGDIJE">图14-1中</a> ，这是通过<code class="codeph">P2</code> <code class="codeph">Z4</code>更新来说明的，并且相应的<code class="codeph">Z4</code>被标记为陈旧。但请注意，区域图仍然可用。只要区域地图部分陈旧，将始终读取与<code class="codeph">Z4</code>相对应的表格数据（在<code class="codeph">Z4</code>上不执行修剪）。
                     </p>
                     <div class="figure" id="GUID-67445DF7-1688-4007-B52E-EE55EB55B090__CIHGDIJE">
                        <p class="titleinfigure">图14-1部分陈旧区域图</p><img src="img/dwhsg139.gif" alt="下面是图14-1的描述" title="下面是图14-1的描述" longdesc="img_text/dwhsg139.html"><br><a href="img_text/dwhsg139.html">“图14-1部分陈旧区域地图”的说明</a></div>
                     <!-- class="figure" -->
                     <p>如果将维度表添加到事实表中，则状态类似于<a href="using-zone-maps.html#GUID-67445DF7-1688-4007-B52E-EE55EB55B090__CIHFDAEG">图14-2中</a>的状态。
                     </p>
                     <div class="figure" id="GUID-67445DF7-1688-4007-B52E-EE55EB55B090__CIHFDAEG">
                        <p class="titleinfigure">图14-2带尺寸表的区域图</p><img src="img/dwhsg150.png" alt="下面是图14-2的描述" title="下面是图14-2的描述" longdesc="img_text/dwhsg150.html"><br><a href="img_text/dwhsg150.html">“图14-2带尺寸表的区域图”的描述</a></div>
                     <!-- class="figure" -->
                     <p>如果对维度表进行了任何DML，则区域映射将变为完全陈旧， <a href="using-zone-maps.html#GUID-67445DF7-1688-4007-B52E-EE55EB55B090__CIHBGBJE">如图14-3所示</a> 。由于区域映射变为完全状态，因此在完全刷新之前，它不可用于修剪。使用<code class="codeph">ALTER MATERIALIZED ZONEMAP</code>语句的<code class="codeph">REBUILD</code>选项刷新区域映射。
                     </p>
                     <div class="figure" id="GUID-67445DF7-1688-4007-B52E-EE55EB55B090__CIHBGBJE">
                        <p class="titleinfigure">图14-3带有尺寸表和失效的区域图</p><img src="img/dwhsg151.gif" alt="下面是图14-3的描述" title="下面是图14-3的描述" longdesc="img_text/dwhsg151.html"><br><a href="img_text/dwhsg151.html">“图14-3带有尺寸表和失效的区域图”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="DWHSG9390"></a><div class="props_rev_3"><a id="GUID-4B36B2E5-03A1-4004-9E8A-E95E94E91356" name="GUID-4B36B2E5-03A1-4004-9E8A-E95E94E91356"></a><h4 id="DWHSG-GUID-4B36B2E5-03A1-4004-9E8A-E95E94E91356" class="sect4"><span class="enumeration_section">14.3.2</span>关于刷新区域映射</h4>
                  <div>
                     <p>Oracle数据库需要通过在更改其基础表后刷新区域映射来维护区域映射。用于区域映射的刷新方法可以是完全刷新或增量刷新。使用<code class="codeph">REFRESH COMPLETE</code>子句指定的完整刷新涉及重建区域映射中的所有区域。当需要处理大量数据时，完全刷新很慢。使用<code class="codeph">REFRESH FAST</code>子句指定的增量刷新仅处理自上次刷新以来发生的更改。此方法使您可以刷新区域映射而无需从头开始重建它们。虽然区域映射是使用物化视图在内部实现的，但基表上的物化视图日志不需要执行区域映射的快速刷新</p>
                     <p>刷新模式指定触发区域映射刷新的操作。使用以下刷新模式之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ON COMMIT</code></p>
                           <p>提交对基表的更改时，将刷新区域映射。</p>
                        </li>
                        <li>
                           <p><code class="codeph">一经请求</code></p>
                           <p>必须在DML或分区维护操作后手动刷新区域映射。</p>
                        </li>
                        <li>
                           <p><code class="codeph">关于数据运动</code></p>
                           <p>在基表上执行数据移动操作时，将刷新区域映射。</p>
                        </li>
                        <li>
                           <p><code class="codeph">负载</code></p>
                           <p>在基表上执行直接路径插入操作时，将刷新区域映射。</p>
                        </li>
                        <li>
                           <p><code class="codeph">关于负载数据移动</code></p>
                           <p>在基表上执行直接路径插入或某些数据移动操作时，将刷新区域映射。这是默认值。</p>
                        </li>
                     </ul>
                     <p>默认情况下，区域映射会在加载和数据移动时刷新。要覆盖此默认值，请在创建或修改区域映射时指定以下刷新模式之一： <code class="codeph">ON COMMIT</code> ， <code class="codeph">ON LOAD</code> ， <code class="codeph">ON DATA MOVEMENT</code>或<code class="codeph">ON LOAD</code> 。</p>
                  </div>
               </div><a id="DWHSG8943"></a><div class="props_rev_3"><a id="GUID-3800B313-23CB-45C5-AD09-1ACA78EFD449" name="GUID-3800B313-23CB-45C5-AD09-1ACA78EFD449"></a><h4 id="DWHSG-GUID-3800B313-23CB-45C5-AD09-1ACA78EFD449" class="sect4"><span class="enumeration_section">14.3.3</span>刷新区域映射</h4>
                  <div>
                     <div class="section">
                        <p>在未指定<code class="codeph">REFRESH</code>选项的情况下创建区域映射时，Oracle数据库默认在直接加载和某些数据移动操作后执行区域映射维护。例外是DML操作，例如删除，插入和更新。对于这些操作，Oracle数据库将适当地将区域映射或区域映射中的某些区域标记为陈旧。要手动控制区域映射的刷新维护，必须指定<code class="codeph">REFRESH ON DEMAND</code>选项。
                        </p>
                        <p>以下命令将创建禁用刷新维护的区域映射，这意味着必须在对基础表进行更改后手动刷新区域映射。</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap ON sales（time_id，cust_id）REFRESH ON DEMAND;</pre><p>Oracle数据库提供了以下两种刷新区域映射的方法：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-zone-maps.html#GUID-3EB3014A-0713-4EA5-95FF-FA070172E33D">使用ALTER MATERIALIZED ZONEMAP命令刷新区域映射</a></p>
                           </li>
                           <li>
                              <p><a href="using-zone-maps.html#GUID-36F8CA88-FD6B-4911-9B84-E51B2A742219">使用DBMS_MVIEW包刷新区域映射</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG9391"></a><div class="props_rev_3"><a id="GUID-3EB3014A-0713-4EA5-95FF-FA070172E33D" name="GUID-3EB3014A-0713-4EA5-95FF-FA070172E33D"></a><h5 id="DWHSG-GUID-3EB3014A-0713-4EA5-95FF-FA070172E33D" class="sect5"><span class="enumeration_section">14.3.3.1</span>使用ALTER MATERIALIZED ZONEMAP命令刷新区域映射</h5>
                     <div>
                        <div class="section">
                           <p>使用<code class="codeph">ALTER MATERIALIZED ZONEMAP</code>命令的<code class="codeph">REBUILD</code>选项刷新区域贴图。
                           </p>
                           <p>以下命令执行区域映射的完整刷新：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REBUILD COMPLETE;</pre><p>如果区域映射完全过时或标记为不可用，则以下命令将执行完全刷新。否则，执行增量（快速）刷新。</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED ZONEMAP sales_zmap REBUILD;</pre><div class="infoboxnotealso" id="GUID-3EB3014A-0713-4EA5-95FF-FA070172E33D__GUID-8ADECBDA-95A8-4F57-B0C0-4EFD2C7277B7">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../sqlrf/ALTER-MATERIALIZED-ZONEMAP.html#SQLRF56854" target="_blank"><span class="italic">Oracle Database SQL语言参考，</span></a>用于刷新区域映射的语法</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9392"></a><div class="props_rev_3"><a id="GUID-36F8CA88-FD6B-4911-9B84-E51B2A742219" name="GUID-36F8CA88-FD6B-4911-9B84-E51B2A742219"></a><h5 id="DWHSG-GUID-36F8CA88-FD6B-4911-9B84-E51B2A742219" class="sect5"><span class="enumeration_section">14.3.3.2</span>刷新区地图使用DBMS_MVIEW包</h5>
                     <div>
                        <div class="section">
                           <p>您可以使用<code class="codeph">DBMS_MVIEW</code>包的<code class="codeph">REFRESH</code>过程来刷新区域映射。
                           </p>
                           <p>使用<code class="codeph">DBMS_MVIEW.REFRESH</code>过程时，Oracle数据库将根据为其<code class="codeph">refresh_method</code>参数指定的值刷新区域映射，如下所示：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>C：执行完整刷新。</p>
                              </li>
                              <li>
                                 <p>F  - 执行快速刷新。如果无法快速刷新，则会发出错误。</p>
                              </li>
                              <li>
                                 <p>？ - 尽可能快速刷新。否则执行完整的刷新。</p>
                                 <p>如果未指定任何值，则使用此默认值。</p>
                              </li>
                           </ul>
                           <p>使用<code class="codeph">REFRESH</code>过程的示例如下：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_MVIEW.REFRESH（'sales_zmap'，'C'）;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9164"></a><div class="props_rev_3"><a id="GUID-1E6AF386-E601-4382-B84D-B811DA142E0F" name="GUID-1E6AF386-E601-4382-B84D-B811DA142E0F"></a><h3 id="DWHSG-GUID-1E6AF386-E601-4382-B84D-B811DA142E0F" class="sect3"><span class="enumeration_section">14.4</span>使用区域映射执行修剪</h3>
               <div>
                  <div class="section">
                     <p>区域映射的主要优点是表扫描的I / O减少。修剪利用有关记录的自然位置的信息来避免不必要的I / O.当SQL语句包含区域映射中跟踪的列的谓词时，数据库会将谓词值与每个区域的最小值和最大值进行比较，以确定在表扫描期间要读取或跳过的块区域。</p>
                     <p>区域地图修剪的候选者包括以下谓词：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>关系谓词=，&lt;=，&lt;，&gt;，&gt; =</p>
                        </li>
                        <li>
                           <p>（格式为<code class="codeph">column_name</code> <code class="codeph">relational_predicate</code> <code class="codeph">constant</code> ，例如， <code class="codeph">WHERE country_name='US'</code>或<code class="codeph">WHERE country_name=:name</code> ）</p>
                        </li>
                        <li>
                           <p><code class="codeph">IN</code>列表（例如， <code class="codeph">WHERE product_name IN ('a','b')</code> ）</p>
                        </li>
                        <li>
                           <p><code class="codeph">LIKE</code>谓词后缀为<code class="codeph">%</code> （例如， <code class="codeph">company_name LIKE 'ORA%'</code> ）</p>
                        </li>
                     </ul>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-zone-maps.html#GUID-C6BD71FC-BCD6-46D3-B0F0-AB1F26CC0E15">Oracle数据库如何使用区域映射执行修剪</a></p>
                        </li>
                        <li>
                           <p><a href="using-zone-maps.html#GUID-E91FA258-4538-4B14-ADAA-156B65A03F09">示例：使用区域映射和属性群集执行修剪</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="DWHSG9393"></a><div class="props_rev_3"><a id="GUID-C6BD71FC-BCD6-46D3-B0F0-AB1F26CC0E15" name="GUID-C6BD71FC-BCD6-46D3-B0F0-AB1F26CC0E15"></a><h4 id="DWHSG-GUID-C6BD71FC-BCD6-46D3-B0F0-AB1F26CC0E15" class="sect4"><span class="enumeration_section">14.4.1</span> Oracle数据库如何使用区域映射执行修剪</h4>
                  <div>
                     <p>本节使用以下示例说明如何使用区域映射和属性群集执行修剪：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-zone-maps.html#GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84">使用区域映射修剪表</a></p>
                        </li>
                        <li>
                           <p><a href="using-zone-maps.html#GUID-C9F4766E-ED0E-4CEB-8C97-96326B29C536">使用区域映射和属性聚类修剪分区表</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9395"></a><a id="DWHSG9396"></a><a id="DWHSG9394"></a><div class="props_rev_3"><a id="GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84" name="GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84"></a><h5 id="DWHSG-GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84" class="sect5"><span class="enumeration_section">14.4.1.1</span>使用区域映射修剪表</h5>
                     <div>
                        <p>此示例说明如何创建区域映射，该映射可以修剪其谓词包含常量的查询中的数据。使用以下语句创建<a href="using-zone-maps.html#GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84__CIHBGDBJ" title="此表显示lineitem表中数据的数据块和列值。">表14-1中</a>所示的<code class="codeph">lineitem</code>表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE lineitem（orderkey NUMBER，shipdate DATE，receipttdate DATE，destination VARCHAR2（50），Quantity NUMBER）;</pre><p>假设该表包含四个数据块，每个块有两行。<a href="using-zone-maps.html#GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84__CIHBGDBJ" title="This table shows the data blocks and column values for data in the lineitem table.">表14-1</a>显示了<a href="using-zone-maps.html#GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84__CIHBGDBJ" title="此表显示lineitem表中数据的数据块和列值。">表</a>的八行。
                        </p>
                        <div class="tblformal" id="GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84__CIHBGDBJ">
                           <p class="titleintable">表14-1 lineitem表的数据块</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="lineitem表的数据块" width="100%" border="1" summary="This table shows the data blocks and column values for data in the lineitem table." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="11%" id="d56099e2431">块</th>
                                    <th align="left" valign="bottom" width="14%" id="d56099e2434">orderkey</th>
                                    <th align="left" valign="bottom" width="17%" id="d56099e2437">发货日期</th>
                                    <th align="left" valign="bottom" width="18%" id="d56099e2440">发票日期</th>
                                    <th align="left" valign="bottom" width="21%" id="d56099e2443">目的地</th>
                                    <th align="left" valign="bottom" width="19%" id="d56099e2446">数量</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2451" headers="d56099e2431 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2451 d56099e2434 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2451 d56099e2437 ">
                                       <p>2011年1月1日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2451 d56099e2440 ">
                                       <p>2011年1月10日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2451 d56099e2443 ">
                                       <p>San_Fran</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2451 d56099e2446 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2470" headers="d56099e2431 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2470 d56099e2434 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2470 d56099e2437 ">
                                       <p>2011年1月2日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2470 d56099e2440 ">
                                       <p>2011年1月10日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2470 d56099e2443 ">
                                       <p>San_Fran</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2470 d56099e2446 ">
                                       <p>200</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2489" headers="d56099e2431 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2489 d56099e2434 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2489 d56099e2437 ">
                                       <p>2011年1月3日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2489 d56099e2440 ">
                                       <p>2011年1月5日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2489 d56099e2443 ">
                                       <p>San_Fran</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2489 d56099e2446 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2508" headers="d56099e2431 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2508 d56099e2434 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2508 d56099e2437 ">
                                       <p>2011年1月5日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2508 d56099e2440 ">
                                       <p>2011年1月10日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2508 d56099e2443 ">
                                       <p>圣地亚哥</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2508 d56099e2446 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2527" headers="d56099e2431 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2527 d56099e2434 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2527 d56099e2437 ">
                                       <p>2011年1月10日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2527 d56099e2440 ">
                                       <p>2011年1月15日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2527 d56099e2443 ">
                                       <p>San_Fran</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2527 d56099e2446 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2546" headers="d56099e2431 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2546 d56099e2434 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2546 d56099e2437 ">
                                       <p>2011年1月12日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2546 d56099e2440 ">
                                       <p>2011年1月16日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2546 d56099e2443 ">
                                       <p>San_Fran</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2546 d56099e2446 ">
                                       <p>200</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2565" headers="d56099e2431 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2565 d56099e2434 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2565 d56099e2437 ">
                                       <p>2011年1月13日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2565 d56099e2440 ">
                                       <p>2011年1月20日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2565 d56099e2443 ">
                                       <p>San_Fran</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2565 d56099e2446 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d56099e2584" headers="d56099e2431 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2584 d56099e2434 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2584 d56099e2437 ">
                                       <p>2011年1月15日</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d56099e2584 d56099e2440 ">
                                       <p>2011年1月30日</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d56099e2584 d56099e2443 ">
                                       <p>圣荷西</p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d56099e2584 d56099e2446 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>接下来，使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALED</code> <code class="codeph">ZONEMAP</code>语句在<code class="codeph">lineitem</code>表上创建区域映射。
                        </p><pre class="oac_no_warn" dir="ltr">在线条上创建材料化的ZONEMAP lineitem_zmap（orderkey，shipdate，receiptdate）;</pre><p>每个区域包含两个块，并存储<code class="codeph">orderkey</code> ， <code class="codeph">shipdate</code>和<code class="codeph">receiptdate</code>列的最小值和最大值。<a href="using-zone-maps.html#GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84__CIHEJACJ" title="此表显示lineitem表中数据的数据块范围和列值。">表14-2</a>表示区域图。
                        </p>
                        <div class="tblformal" id="GUID-2814D6ED-6C38-4275-8BC5-09BB75A7DA84__CIHEJACJ">
                           <p class="titleintable">表14-2 lineitem表的区域图</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="lineitem表的区域图" width="100%" border="1" summary="This table shows the data block range and column values for the data in the lineitem table." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="12%" id="d56099e2649">块范围</th>
                                    <th align="left" valign="bottom" width="14%" id="d56099e2652">min orderkey</th>
                                    <th align="left" valign="bottom" width="14%" id="d56099e2655">最大订单</th>
                                    <th align="left" valign="bottom" width="14%" id="d56099e2658">min shipdate</th>
                                    <th align="left" valign="bottom" width="14%" id="d56099e2661">最大发货日期</th>
                                    <th align="left" valign="bottom" width="15%" id="d56099e2664">最小收据</th>
                                    <th align="left" valign="bottom" width="17%" id="d56099e2667">最大收据</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d56099e2672" headers="d56099e2649 ">
                                       <p>1-2</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2672 d56099e2652 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2672 d56099e2655 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2672 d56099e2658 ">
                                       <p>2011年1月1日</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2672 d56099e2661 ">
                                       <p>2011年1月5日</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d56099e2672 d56099e2664 ">
                                       <p>2011年1月9日</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2672 d56099e2667 ">
                                       <p>2011年1月10日</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d56099e2694" headers="d56099e2649 ">
                                       <p>3-4</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2694 d56099e2652 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2694 d56099e2655 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2694 d56099e2658 ">
                                       <p>2011年1月10日</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d56099e2694 d56099e2661 ">
                                       <p>2011年1月15日</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d56099e2694 d56099e2664 ">
                                       <p>2011年1月15日</p>
                                    </td>
                                    <td align="left" valign="top" width="17%" headers="d56099e2694 d56099e2667 ">
                                       <p>2011年1月30日</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>执行以下查询时，数据库可以读取区域映射，然后仅扫描块1和2，因为日期1-3-2011介于最小和最大日期之间：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM lineitem WHERE shipdate ='1-3-2011';</pre></div>
                  </div><a id="DWHSG9398"></a><a id="DWHSG9397"></a><div class="props_rev_3"><a id="GUID-C9F4766E-ED0E-4CEB-8C97-96326B29C536" name="GUID-C9F4766E-ED0E-4CEB-8C97-96326B29C536"></a><h5 id="DWHSG-GUID-C9F4766E-ED0E-4CEB-8C97-96326B29C536" class="sect5"><span class="enumeration_section">14.4.1.2</span>使用区域映射和属性聚类修剪分区表</h5>
                     <div>
                        <p>以下语句在分区表上创建带有属性集群的区域映射：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售（NUMBER PROD_ID NOT NULL，CUST_ID NUMBER NOT NULL，TIME_ID DATE NOT NULL，CHANNEL_ID NUMBER NOT NULL，PROMO_ID NUMBER NOT NULL，quantity_sold NUMBER（10,2）NOT NULL，AMOUNT_SOLD NUMBER（10,2）） <span>聚类</span> <span>销售JOIN产品ON（sales.prod_id = products.prod_id）</span> <span>BY LINEAR ORDER</span> <span>（products.prod_id）</span> <span>WITH MATERIALIZED ZONEMAP</span> （sales_zmap）PARTITION BY HASH（amount_sold）（PARTITION p1，PARTITION p2）;</pre><p><a href="using-zone-maps.html#GUID-C9F4766E-ED0E-4CEB-8C97-96326B29C536__CIHDGJGJ">图14-4</a>说明了为分区表<code class="codeph">sales</code>创建区域映射。对于五个区域中的每个区域，区域图将存储区域图中跟踪的列的最小值和最大值。如果谓词超出给定区域的存储列的最小值和最大值，则不必读取该区域。例如，如果区域<code class="codeph">Z4</code>跟踪列<code class="codeph">prod_id</code>的最小值10和最大值100，则谓词<code class="codeph">prod_id</code> <code class="codeph">=</code> <code class="codeph">200</code>将永远不会在此区域中具有任何匹配记录，因此将不会读取区域<code class="codeph">Z4</code> 。
                        </p>
                        <p>对于分区表，修剪既可以在分区上进行，也可以在区域级别进行。如果区域映射中的聚合分区级别信息排除了给定谓词集的任何匹配数据，则将修剪整个分区;否则，将在每个区域级别进行分区修剪。</p>
                        <div class="figure" id="GUID-C9F4766E-ED0E-4CEB-8C97-96326B29C536__CIHDGJGJ">
                           <p class="titleinfigure">图14-4分区事实表的区域图</p><img src="img/dwhsg137.png" alt="下面是图14-4的描述" title="下面是图14-4的描述" longdesc="img_text/dwhsg137.html"><br><a href="img_text/dwhsg137.html">“图14-4分区事实表的区域图”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div>
               </div><a id="DWHSG9399"></a><a id="DWHSG8949"></a><div class="props_rev_3"><a id="GUID-E91FA258-4538-4B14-ADAA-156B65A03F09" name="GUID-E91FA258-4538-4B14-ADAA-156B65A03F09"></a><h4 id="DWHSG-GUID-E91FA258-4538-4B14-ADAA-156B65A03F09" class="sect4"><span class="enumeration_section">14.4.2</span>示例：使用区域映射和属性聚类执行修剪</h4>
                  <div>
                     <p>本节提供有关使用区域映射和属性群集执行修剪的示例。这些示例基于如<a href="using-zone-maps.html#GUID-E91FA258-4538-4B14-ADAA-156B65A03F09__CIHEHFIE">示例14-16中</a>所示创建的<code class="codeph">my_sales</code>表。
                     </p>
                     <div class="example" id="GUID-E91FA258-4538-4B14-ADAA-156B65A03F09__CIHEHFIE">
                        <p class="titleinexample">示例14-16创建my_sales表</p>
                        <p><code class="codeph">my_sales</code>表是一个包含区域映射的连接属性聚簇表。它基于<code class="codeph">SH</code>模式中的<code class="codeph">sales</code>表，并使用以下语句创建：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE my_sales PARTITION BY LIST（channel_id）（PARTITION mysales_chan_c VALUES（'C'），PARTITION mysales_chan_i VALUES（'I'），PARTITION mysales_chan_p VALUES（'P'），PARTITION mysales_chan_s VALUES（'S'），PARTITION mysales_chan_t VALUES（ 'T'））CLUSTERING my_sales JOIN customers ON（my_sales.cust_id = customers.cust_id）BY INTERLEAVED ORDER（（my_sales.time_id），（customers.country_id，customers.cust_state_province，customers.cust_city））WITH MATERIALIZED ZONEMAP（mysales_zmap）AS SELECT * FROM sales;</pre></div>
                     <!-- class="example" -->
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-zone-maps.html#GUID-82200641-EF9A-41FD-A2DE-536B49A4F6C7">示例：分区和表扫描修剪</a></p>
                        </li>
                        <li>
                           <p><a href="using-zone-maps.html#GUID-5754CBC5-CCA4-4A1D-9721-1AC2AC6E2A85">示例：区域映射加入修剪</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9400"></a><div class="props_rev_3"><a id="GUID-82200641-EF9A-41FD-A2DE-536B49A4F6C7" name="GUID-82200641-EF9A-41FD-A2DE-536B49A4F6C7"></a><h5 id="DWHSG-GUID-82200641-EF9A-41FD-A2DE-536B49A4F6C7" class="sect5"><span class="enumeration_section">14.4.2.1</span>示例：分区和表扫描修剪</h5>
                     <div>
                        <div class="section">
                           <p>此示例说明了区域映射如何修剪区域和分区（或复合分区表中的子分区）。</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>创建<code class="codeph">my_sales</code>表。<a href="using-zone-maps.html#GUID-E91FA258-4538-4B14-ADAA-156B65A03F09__CIHEHFIE">示例14-16</a>包含用于创建此表的语法。</span></li>
                           <li class="stepexpand"><span>使用以下语句查询与<code class="codeph">customers</code>维度连接的<code class="codeph">my_sales</code>表：</span><div><pre class="oac_no_warn" dir="ltr">SELECT c.cust_city，SUM（quantity_sold）FROM my_sales s，customers c WHERE s.cust_id = c.cust_id AND c.country_id ='US'AND c.cust_state_province ='CA'AND s.promo_id &lt;50 GROUP BY c.cust_city ;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下语句显示计划：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE（dbms_xplan.display_cursor（FORMAT =&gt;'BASIC PREDICATE PARTITION'））;</pre><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- ----------------------- | Id |操作|名称| Pstart时| Pstop | -------------------------------------------------- ----------------------- | 0 |选择声明| | | | | 1 | HASH GROUP BY | | | | | * 2 | HASH JOIN | | | | | 3 |加入过滤器创建| ：BF0000 | | | | * 4 |表访问完全|客户| | | | 5 |加入过滤器使用| ：BF0000 | | | | 6 | PARTITION LIST ITERATOR | | KEY（ZM）| KEY（ZM）| | * 7 |完全使用ZONEMAP的表访问| MY_SALES | KEY（ZM）| KEY（ZM）| -------------------------------------------------- -----------------------谓词信息（由操作ID标识）：PLAN_TABLE_OUTPUT ----------------- -------------------------------------------------- ------ 2  - 访问（“S”。“CUST_ID”=“C”。“CUST_ID”）4  - 过滤器（（“C”。“CUST_STATE_PROVINCE”='CA'和“C”。“COUNTRY_ID” ='US'））7  - 过滤器（（SYS_ZMAP_FILTER（'/ * ZM_PRUNING * / SELECT“ZONE_ID $”，BITAND时的情况（zm。“ZONE_STATE $”，1）= 1那么1个案例时（zm。“MIN_2_COUNTRY_ID “&gt;：1 OR zm。”MAX_2_COUNTRY_ID“&lt;：2 OR zm。”MIN_3_CUST_STATE_PROVINCE“&gt;：3或zm。”MAX_3_CUST_STATE_PROVINCE“&lt;：4）那么3 ELSE 2 END END从”SH“开始。”MYSALES_ZMAP“zm在哪里zm。 “ZONE_LEVEL $”= 0 ORDER BY zm。“ZONE_ID $”'，SYS_OP_ZONE_ID（ROWID），'US'，'U S'，'CA'，'CA'）&lt;3 AND“S”。“PROMO_ID”&lt;50 AND SYS_OP_BLOOM_FILTER（：BF0000，“S”。“CUST_ID”）））</pre><p>第7行说明正在使用区域地图。请注意区域映射分区列表迭代器“KEY（ZM）”。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="DWHSG9401"></a><div class="props_rev_3"><a id="GUID-5754CBC5-CCA4-4A1D-9721-1AC2AC6E2A85" name="GUID-5754CBC5-CCA4-4A1D-9721-1AC2AC6E2A85"></a><h5 id="DWHSG-GUID-5754CBC5-CCA4-4A1D-9721-1AC2AC6E2A85" class="sect5"><span class="enumeration_section">14.4.2.2</span>示例：区域映射加入修剪</h5>
                     <div>
                        <div class="section">
                           <p>此示例说明了使用区域映射和属性群集进行连接修剪。如果维度的主键包含维度层次结构值，则通过相应的外键对事实表进行聚类就足够了。在该示例中， <code class="codeph">times.time_id</code>包括（ <code class="codeph">calendar_year</code> ， <code class="codeph">calendar_month_number</code> ， <code class="codeph">day_number_in_month</code> ）。因此， <code class="codeph">time_id</code>转换为日历时间层次结构以及财务时间层次结构。当存在财务或日历层次结构的谓词时，您可以在<code class="codeph">times</code>和<code class="codeph">my_sales</code>之间修剪连接。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>创建<code class="codeph">my_sales</code>表。<a href="using-zone-maps.html#GUID-E91FA258-4538-4B14-ADAA-156B65A03F09__CIHEHFIE">示例14-16</a>包含用于创建此表的语法。</span></li>
                           <li class="stepexpand"><span>使用以下语句查询与<code class="codeph">times</code>连接的<code class="codeph">my_sales</code>表：</span><div><pre class="oac_no_warn" dir="ltr">SELECT SUM（quantity_sold）FROM my_sales s，times tWHERE s.time_id = t.time_id AND t.calendar_year ='1999';</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下语句显示计划：</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE（dbms_xplan.display_cursor（FORMAT =&gt;'BASIC PREDICATE PARTITION'））;</pre><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- ------------------------- | Id |操作|名称| Pstart时| Pstop | -------------------------------------------------- ------------------------- | 0 |选择声明| | | | | 1 | SORT AGGREGATE | | | | | * 2 | HASH JOIN | | | | | 3 |加入过滤器创建| ：BF0000 | | | | * 4 |表访问完全|时代| | | | 5 |加入过滤器使用| ：BF0000 | | | | 6 | PARTITION LIST ALL | | 1 | 5 | | * 7 |完全使用ZONEMAP的表访问| MY_SALES | 1 | 5 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- ----------------------------------- PLAN_TABLE_OUTPUT -------------- -------------------------------------- 2  -  access（“S”。“TIME_ID”= “T”。“TIME_ID”）4  - 过滤器（“T”。“CALENDAR_YEAR”= 1999）7  - 过滤器（（SYS_ZMAP_FILTER（'/ * ZM_PRUNING * / SELECT“ZONE_ID $”，BITAND时的情况（zm。“ZONE_STATE $ “，1）= 1那么1个案例时（（ORA_RAWCOMPARE（zm。”MIN_1_TIME_ID“，：1,8）&gt; 0或ORA_RAWCOMPARE（zm。”MAX_1_TIME_ID“，：2,8）&lt;0））那么3 ELSE 2 END END FROM“SH”。“MYSALES_ZMAP”zm WHERE zm。“ZONE_LEVEL $”= 0 ORDER BY zm。“ZONE_ID $”'，SYS_OP_ZONE_ID（ROWID），SYSVARCOL，SYSVARCOL）&lt;3 AND SYS_OP_BLOOM_FILTER（：BF0000，“S” “TIME_ID”）））</pre><p>第7行说明正在使用区域地图，连接匹配的<code class="codeph">time_id</code>区域。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9402"></a><div class="props_rev_3"><a id="GUID-DA1762AC-4F66-4DDA-A28A-8A754FB6E75E" name="GUID-DA1762AC-4F66-4DDA-A28A-8A754FB6E75E"></a><h3 id="DWHSG-GUID-DA1762AC-4F66-4DDA-A28A-8A754FB6E75E" class="sect3"><span class="enumeration_section">14.5</span>查看区域地图信息</h3>
               <div>
                  <p>信息<a id="d56099e3026" class="indexterm-anchor"></a>关于区域地图及其度量存储在数据字典视图中。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-zone-maps.html#GUID-945125B2-FD0C-438E-90D8-1335B9190860">在数据库中查看区域映射的详细信息</a></p>
                     </li>
                     <li>
                        <p><a href="using-zone-maps.html#GUID-A68118DA-01A5-41F6-87EF-3EB6C1742D26">查看区域地图的度量</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9403"></a><div class="props_rev_3"><a id="GUID-945125B2-FD0C-438E-90D8-1335B9190860" name="GUID-945125B2-FD0C-438E-90D8-1335B9190860"></a><h4 id="DWHSG-GUID-945125B2-FD0C-438E-90D8-1335B9190860" class="sect4"><span class="enumeration_section">14.5.1</span>查看数据库中区域映射的详细信息</h4>
                  <div>
                     <div class="section">
                        <p>使用以下数据字典视图之一显示有关数据库中区域映射的信息：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBA_ZONEMAPS</code>显示数据库中的所有区域映射</p>
                           </li>
                           <li>
                              <p><code class="codeph">ALL_ZONEMAPS</code>显示用户可访问的区域映射</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_ZONEMAPS</code>显示用户拥有的区域映射</p>
                           </li>
                        </ul>
                        <p>以下查询显示当前用户拥有的区域映射的名称，基表，类型，刷新模式和过期性，并指示是否使用属性集群创建区域映射：</p><pre class="oac_no_warn" dir="ltr">SELECT zonemap_name，fact_table，hierarchical，with_clustering，refresh_mode，stale FROM USER_ZONEMAPS; ZONEMAP_NAME FACT_TABLE HIERARCHICAL WITH_CLUSTERING REFRESH_MODE STALE ------------ ---------- ------------ ---------- ----- ------------ ----- ZMAP $ _MY_SALES MY_SALES NO YES LOAD DATAMOVEMENT NO</pre><p>以下查询显示用户可访问的所有区域映射的状态。禁用<code class="codeph">PRUNING</code>区域映射不用于I / O修剪。标记为无效的区域映射需要重新编译，因为底层基表的结构已更改。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT zonemap_name，pruning，refresh_method，invalid，complie_state FROM all_zonemaps; ZONEMAP_NAME PRUNING REFRESH_METHOD INVALID UNUSABLE COMPILE_STATE ------------ --------- -------------- -------  - ---- ------------- SALES_ZMAP启用力量无效ZMAP $ _MY_SALES禁用力量无效</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9404"></a><div class="props_rev_3"><a id="GUID-A68118DA-01A5-41F6-87EF-3EB6C1742D26" name="GUID-A68118DA-01A5-41F6-87EF-3EB6C1742D26"></a><h4 id="DWHSG-GUID-A68118DA-01A5-41F6-87EF-3EB6C1742D26" class="sect4"><span class="enumeration_section">14.5.2</span>查看区域图的度量</h4>
                  <div>
                     <div class="section">
                        <p>使用以下视图之一显示有关区域映射中度量的信息：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBA_ZONEMAP_MEASURES</code>用于显示数据库中所有区域映射的度量</p>
                           </li>
                           <li>
                              <p><code class="codeph">ALL_ZONEMAP_MEASURES</code>用于显示用户可访问的区域映射的度量</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_ZONEMAP_MEASURES</code>用于显示用户拥有的区域映射的度量</p>
                           </li>
                        </ul>
                        <p>以下查询显示区域映射，度量和列，其中为当前用户可访问的每个区域维护其MIN / MAX值：</p><pre class="oac_no_warn" dir="ltr">SELECT zonemap_name，measure，agg_function FROM ALL_ZONEMAP_MEASURES; ZONEMAP_NAME MEASURE AGG_FUNCTION --------------- -------------------------- ------ ------- ZMAP $ _MY_SALES“SH”。“MY_SALES”。“PROD_ID”MAX ZMAP $ _MY_SALES“SH”。“MY_SALES”。“PROD_ID”MIN ZMAP $ _MY_SALES“SH”。“MY_SALES”。“CUST_ID “MAX ZMAP $ _MY_SALES”SH“。”MY_SALES“。”CUST_ID“MIN</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="12887.monitoring-real-time-database-performance.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>监控实时数据库性能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-2-day-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:50:24-08:00"></meta>
      <meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96346-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="automatic-database-performance-monitoring.html" title="Previous" type="text/html"></link>
      <link rel="next" href="monitoring-real-time-database-operations.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TDPPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="automatic-database-performance-monitoring.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="monitoring-real-time-database-operations.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库2天+性能调整指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-proactive-database-tuning.html" property="item" typeof="WebPage"><span property="name">主动数据库调整</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">监控实时数据库性能</li>
            </ol>
            <a id="GUID-EB19F9B4-A912-4354-8D8D-F89EEFD56704" name="GUID-EB19F9B4-A912-4354-8D8D-F89EEFD56704"></a><a id="TDPPT033"></a>
            
            <h2 id="TDPPT-GUID-EB19F9B4-A912-4354-8D8D-F89EEFD56704" class="sect2"><span class="enumeration_chapter">4</span>监控实时数据库性能</h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d7824e79" class="indexterm-anchor"></a><a id="d7824e83" class="indexterm-anchor"></a><a id="d7824e87" class="indexterm-anchor"></a><a id="d7824e91" class="indexterm-anchor"></a>自动数据库诊断监视器（ADDM）自动识别数据库的性能问题，如<a href="automatic-database-performance-monitoring.html#GUID-5D73B7DC-BC9A-4029-A741-2BF9EBB45AE9" title="从Oracle Database 12c开始，默认情况下在多租户容器数据库（CDB）的根容器中启用ADDM。从Oracle Database 19c开始，您还可以在可插拔数据库（PDB）中使用ADDM。">自动数据库性能监视中所述</a> 。有关性能的信息显示在Oracle Enterprise Manager云控制（云控制）的“性能”页面上。
               </p>
               <p>通过从“性能”页面向下钻取到其他页面，您可以实时识别数据库性能问题。如果发现问题，则可以手动运行ADDM以立即对其进行分析，而无需等到下一次ADDM分析。要了解如何<span class="q"><a href="manual-database-performance-monitoring.html#GUID-1B3374FB-A4D0-477D-902B-F4FF4E7F93CE">手动运行ADDM</a></span> ，请参阅<span class="q">“ <a href="manual-database-performance-monitoring.html#GUID-1B3374FB-A4D0-477D-902B-F4FF4E7F93CE">手动运行ADDM以分析当前数据库性能</a> ”</span> 。
               </p>
               <p>本章介绍如何监视数据库活动的某些方面。它包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-real-time-database-performance.html#GUID-F405EE4E-F0A9-42AB-AC3C-4FA6F29DE6AC">监控实例活动</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-real-time-database-performance.html#GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97">监控主机活动</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-real-time-database-performance.html#GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1">确定数据库活动中峰值的原因</a></p>
                  </li>
                  <li>
                     <p><a href="monitoring-real-time-database-performance.html#GUID-81073595-A0B0-474C-937B-376B58D7C414">自定义“数据库性能”页面</a></p>
                  </li>
               </ul>
            </div><a id="TDPPT513"></a><a id="TDPPT514"></a><a id="TDPPT034"></a><div class="props_rev_3"><a id="GUID-EE9118C7-708A-488F-A332-4ECFA6638A07" name="GUID-EE9118C7-708A-488F-A332-4ECFA6638A07"></a><h3 id="TDPPT-GUID-EE9118C7-708A-488F-A332-4ECFA6638A07" class="sect3"><span class="enumeration_section">4.1</span>监控用户活动</h3>
               <div>
                  <div class="section">
                     <p><a id="d7824e223" class="indexterm-anchor"></a><a id="d7824e227" class="indexterm-anchor"></a><a id="d7824e231" class="indexterm-anchor"></a><a id="d7824e235" class="indexterm-anchor"></a>如<a href="oracle-database-performance-method.html#GUID-6203E485-FA06-4EE3-9003-4449FBDE214B">Oracle数据库性能方法中所述</a> ，数据库时间（DB时间）是总数据库实例工作负载的指示器。一段时间内的<span class="bold">平均活动会话</span>数等于该时段内所有用户会话的总数据库时间除以该时段的经过时间（挂钟时间）。
                     </p>
                     <p>“性能”页面上的“平均活动会话数”图表显示了该时间段内CPU使用率和等待类的平均活动会话数。通过遵循<a href="oracle-database-performance-method.html#GUID-6203E485-FA06-4EE3-9003-4449FBDE214B">Oracle数据库</a>性能方法中介绍的<a href="oracle-database-performance-method.html#GUID-6203E485-FA06-4EE3-9003-4449FBDE214B">性能方法</a> ，您可以从图表中向下钻取以确定与实例相关的性能问题的原因并解决它们。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__GUID-6F44D101-F0D1-4E12-B567-B8C3588D7778">监控用户活动：</p>
                     <ol>
                        <li>
                           <p>访问数据库主页。</p>
                           <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">性能主页”</span> 。
                           </p>
                           <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将出现“性能”页面。</p>
                        </li>
                        <li>
                           <p>在“平均活动会话堆积面积”图表中找到任何尖峰或其他感兴趣的区域。</p>
                           <p><a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__BJFHDAIG">图4-1</a>显示了“性能”页面上“平均活动会话”图表的示例。
                           </p>
                           <div class="figure" id="GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__BJFHDAIG">
                              <p class="titleinfigure">图4-1平均活动会话图表</p><img src="img/average_active_sess.gif" alt="下面是图4-1的描述" title="下面是图4-1的描述" longdesc="img_text/average_active_sess.html"><br><a href="img_text/average_active_sess.html">“图4-1平均活动会话图表”的说明</a></div>
                           <!-- class="figure" -->
                           <p><a id="d7824e290" class="indexterm-anchor"></a>堆积面积图上的每个颜色填充区域显示指定时间内指定事件的平均活动会话。在图表中，每个事件的平均活动会话数量都堆叠在其下方。事件按图例中显示的顺序显示在图表上，其中CPU在y轴上从零开始，其他事件按升序堆叠，从CPU等待到其他。等待类通过等待磁盘I / O等资源来显示消耗了多少数据库活动。</p>
                           <p>例如，在<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__BJFHDAIG">图4-1</a>中大约下午1点26分，五个事件在采样时间间隔内消耗数据库时间：CPU，CPU等待，调度程序，并发和其他。总平均活跃会话总数为2.1。CPU的平均活动会话值约为1.52，对于CPU Wait约为0.38，对于Scheduler约为.03，对于Concurrency约为.16，对于Other，它约为.01。
                           </p>
                           <p>y轴上2处的CPU Cores行表示主机系统上的CPU数。当CPU值达到CPU Cores行时，数据库实例占用系统上100％的CPU时间。</p>
                           <p>在<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__BJFHDAIG">图4-1中</a> ，图表显示大多数活动发生在1:20至1:28和约1:53至2:20。1:20和1:28之间的大多数活动是CPU使用率，大约1:59之后的大部分活动都是如此。等待课程活动在1:56和2:12之间飙升了几次，并且从大约1:52到大约2:08消耗了大量的数据库时间。
                           </p>
                        </li>
                        <li>
                           <p>要标识每个等待类，请将光标移动到与该类对应的“平均活动会话”图表中的区域上。</p>
                           <p>相应的等待类在图表图例中突出显示。</p>
                        </li>
                        <li>
                           <p>单击图表上最大的颜色区域或图例中的相应等待类，以深入查看具有最平均活动会话的等待类。</p>
                           <p>如果单击<span class="bold">CPU</span>或<span class="bold">CPU Wait</span> ，则会显示Active Sessions Working：CPU + CPU Wait页面。如果单击其他等待类（例如<span class="bold">用户I / O）</span> ，则会显示该等待类的“活动会话等待”页面。<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">图4-2</a>显示了“活动会话工作：CPU + CPU等待”页面。
                           </p>
                           <div class="figure" id="GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">
                              <p class="titleinfigure">图4-2活动会话工作页面</p><img src="img/act_sess_wrk.gif" alt="下面是图4-2的描述" title="下面是图4-2的描述" longdesc="img_text/act_sess_wrk.html"><br><a href="img_text/act_sess_wrk.html">“图4-2活动会话工作页面”的说明</a></div>
                           <!-- class="figure" -->
                           <p>“活动会话工作”页面显示1小时的时间表。每个等待类的详细信息以5分钟为间隔显示在“选定的5分钟间隔的详细信息”下。</p>
                           <p>您可以通过以下部分之一查看不同维度的等待类的详细信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-8C13045B-74F0-470E-997B-E14BF638D543">监控Top SQL</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC">监控热门会议</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E">监控顶级服务</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC">监控顶级模块</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37">监控热门行动</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083">监控顶级客户</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60">监控Top PL / SQL</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF">监控热门文件</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81">监控顶级对象</a> ”</span></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>要更改选定的时间间隔，请将图表上的阴影区域拖动到不同的间隔。</p>
                           <p>“选定的5分钟间隔详细信息”部分中包含的信息将自动更新，以显示所选的时间段。</p>
                           <p>在<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">图4-2</a>所示的示例中，为CPU和CPU等待类选择了从9:59到10:04的5分钟间隔。
                           </p>
                        </li>
                        <li>
                           <p>如果发现性能问题，则可以尝试实时解决。在“性能”页面上，执行以下操作之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在“平均活动会话数”图表下方，单击与此时间段运行ADDM时出现性能问题的时间对应的快照。</p>
                                 <p>有关ADDM分析的信息，请参阅<span class="q">“ <a href="automatic-database-performance-monitoring.html#GUID-65D484C5-C39C-44DE-B2AA-B0BE39A9682F">查看自动数据库诊断监视器分析</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">“立即运行ADDM”</span>以手动创建快照。
                                 </p>
                                 <p>有关手动创建快照的信息，请参阅<span class="q">“ <a href="automatic-database-performance-monitoring.html#GUID-A92E1AE8-3CCC-4F37-88B3-FB6F6C45C510">创建快照</a> ”</span> 。有关<span class="q"><a href="manual-database-performance-monitoring.html#GUID-1B3374FB-A4D0-477D-902B-F4FF4E7F93CE">手动运行ADDM的</a></span>信息，请参阅<span class="q">“ <a href="manual-database-performance-monitoring.html#GUID-1B3374FB-A4D0-477D-902B-F4FF4E7F93CE">手动运行ADDM以分析当前数据库性能</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">“运行ASH报告”</span>以创建活动会话历史记录（ASH）报告，以分析瞬态，短期性能问题。
                                 </p>
                                 <p>有关ASH报告的信息，请参阅<span class="q">“ <a href="resolving-transient-performance-problems.html#GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C">活动会话历史报告</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div><a id="TDPPT035"></a><div class="props_rev_3"><a id="GUID-8C13045B-74F0-470E-997B-E14BF638D543" name="GUID-8C13045B-74F0-470E-997B-E14BF638D543"></a><h4 id="TDPPT-GUID-8C13045B-74F0-470E-997B-E14BF638D543" class="sect4"><span class="enumeration_section">4.1.1</span>监控Top SQL</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e526" class="indexterm-anchor"></a><a id="d7824e530" class="indexterm-anchor"></a>在Active Sessions Working页面上，Top Working SQL表显示了主动运行消耗CPU资源的SQL语句的数据库活动。Activity（％）列显示每个SQL语句使用的此活动的百分比。如果一个或多个SQL语句占用了大部分活动，那么您应该对它们进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8C13045B-74F0-470E-997B-E14BF638D543__GUID-6F0D47E4-81EC-4BD3-86EB-12EC75CD7C8E">要监视最常用的SQL语句：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的CPU或CPU等待区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作”页面。</p>
                           </li>
                           <li>
                              <p>在Top Working SQL表中，单击最活跃的SQL语句的<span class="bold">SQL ID</span>链接。例如，在<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">图4-2中</a> ，最活跃的SQL语句的SQL ID是<code class="codeph">ddthrb7j9a63f</code> 。
                              </p>
                              <p>将出现“SQL详细信息”页面</p>
                              <p>对于占用大部分等待时间的SQL语句，请使用SQL Tuning Advisor或创建SQL调优集来调整有问题的SQL语句。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-8C13045B-74F0-470E-997B-E14BF638D543__GUID-B09734BD-BE78-4500-A074-258F1A801E50">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="identifying-high-load-sql-statements.html#GUID-FDC4381B-0703-4FBF-93FC-36B9425A85C0">查看SQL语句的详细信息</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="tuning-sql-statements.html#GUID-0BF54979-57AF-4289-9504-41884A1BD78E">使用SQL Tuning Advisor调整SQL语句</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT036"></a><div class="props_rev_3"><a id="GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC" name="GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC"></a><h4 id="TDPPT-GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC" class="sect4"><span class="enumeration_section">4.1.2</span>监控热门会话</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e664" class="indexterm-anchor"></a><a id="d7824e668" class="indexterm-anchor"></a><a id="d7824e672" class="indexterm-anchor"></a><a id="d7824e674" class="indexterm-anchor"></a> <span class="bold">会话</span>是数据库实例内存中的逻辑实体，表示当前用户登录数据库的状态。会话从用户登录到数据库到用户断开连接为止。例如，当用户启动SQL * Plus时，用户必须提供有效的数据库用户名和密码才能建立会话。如果单个会话占用了大部分数据库活动，那么您应该对其进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC__GUID-07BFC4CA-EEB7-4D0F-9B22-E7A6B2CD3602">监控顶级工作会话：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的CPU或CPU等待区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作：CPU + CPU等待”页面， <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">如图4-2</a>所示。
                              </p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下的“顶部工作会话”部分中，从“视图”列表中选择“ <span class="bold">热门会话”</span> 。
                              </p>
                              <p>将显示“最常工作会话”表。该表显示在所选时间段内等待相应等待类的顶级会话。</p>
                           </li>
                           <li>
                              <p>在Top Working Sessions表中，单击消耗最多数据库活动的会话的<span class="bold">会话ID</span>链接。
                              </p>
                              <p>将显示“会话详细信息”页</p>
                              <p>此页面包含会话活动，会话统计信息，打开游标，阻塞会话，等待事件历史记录以及所选会话的并行SQL等信息。</p>
                              <p>如果会话占用过多的数据库活动，请考虑单击“ <span class="bold">杀死会话”</span> ，然后调整SQL语句。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC__GUID-884B611A-0B94-48B7-A19E-89D4EEC00286">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="tuning-sql-statements.html#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">调整SQL语句</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT371"></a><a id="TDPPT037"></a><div class="props_rev_3"><a id="GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E" name="GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E"></a><h4 id="TDPPT-GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E" class="sect4"><span class="enumeration_section">4.1.3</span>监控热门服务</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e818" class="indexterm-anchor"></a><a id="d7824e822" class="indexterm-anchor"></a><a id="d7824e826" class="indexterm-anchor"></a><a id="d7824e828" class="indexterm-anchor"></a> <span class="bold">服务</span>是一组具有共同属性，服务级别阈值和优先级的应用程序。例如， <code class="codeph">SYS$USERS</code>服务是在未明确标识服务名称的情况下建立用户会话时使用的默认服务名称。<code class="codeph">SYS$BACKGROUND</code>服务包含所有数据库后台进程。如果服务正在使用大部分等待时间，那么您应该对其进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E__GUID-A7EF4683-856B-461D-87D5-F2E26D7B4320">监控服务：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的彩色区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作”页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶级服务</span> ”。
                              </p>
                              <p>将显示“顶级服务”表。</p>
                              <div class="figure" id="GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E__CACBJEJJ">
                                 <p class="titleinfigure">图4-3监控热门服务</p><img src="img/top_serv.gif" alt="下面是图4-3的描述" title="下面是图4-3的描述" longdesc="img_text/top_serv.html"><br><a href="img_text/top_serv.html">“图4-3监控顶级服务”的说明</a></div>
                              <!-- class="figure" -->
                              <p>Top Services表显示在所选时间段内等待相应等待事件的顶级服务。例如，在<a href="monitoring-real-time-database-performance.html#GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E__CACBJEJJ">图4-3中</a> ， <code class="codeph">SYS$USERS</code>服务占用了86.47％的数据库活动。
                              </p>
                           </li>
                           <li>
                              <p>单击最活跃服务的“ <span class="bold">服务”</span>链接。
                              </p>
                              <p>将显示“服务”页面。</p>
                              <p>此页面包含有关所选服务的模块，活动和统计信息的信息。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT373"></a><a id="TDPPT038"></a><div class="props_rev_3"><a id="GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC" name="GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC"></a><h4 id="TDPPT-GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC" class="sect4"><span class="enumeration_section">4.1.4</span>监控顶层模块</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e973" class="indexterm-anchor"></a><a id="d7824e977" class="indexterm-anchor"></a><a id="d7824e979" class="indexterm-anchor"></a>模块表示将服务名称设置为工作负载定义的一部分的应用程序。例如， <code class="codeph">DBMS_SCHEDULER</code>模块可以分配在<code class="codeph">SYS$BACKGROUND</code>服务中运行的作业。如果单个模块正在使用大部分等待时间，则应对其进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC__GUID-C46B3F59-C76D-4953-AEBD-5CA58D15B4ED">监控模块：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的彩色区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作”页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶层模块</span> ”。
                              </p>
                              <p>出现顶层模块表。</p>
                              <div class="figure" id="GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC__CACFIGFJ">
                                 <p class="titleinfigure">图4-4监控顶层模块</p><img src="img/top_mod.gif" alt="下面是图4-4的描述" title="下面是图4-4的描述" longdesc="img_text/top_mod.html"><br><a href="img_text/top_mod.html">“图4-4监控顶部模块”的说明</a></div>
                              <!-- class="figure" -->
                              <p>“顶层模块”表显示在所选时间段内等待相应等待事件的顶层模块。例如，在<a href="monitoring-real-time-database-performance.html#GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC__CACFIGFJ">图4-4中</a> ，SQL * Plus模块消耗了超过84％的数据库活动，应该进行调查。<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">如图4-2</a>所示，用户<code class="codeph">HR</code>的SQL * Plus会话消耗了大量的数据库活动。
                              </p>
                           </li>
                           <li>
                              <p>单击显示最高活动百分比的模块的“ <span class="bold">模块”</span>链接。
                              </p>
                              <p>出现“模块”页面。</p>
                              <p>此页面包含有关所选模块的操作，活动和统计信息的信息。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT375"></a><a id="TDPPT039"></a><div class="props_rev_3"><a id="GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37" name="GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37"></a><h4 id="TDPPT-GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37" class="sect4"><span class="enumeration_section">4.1.5</span>监控主要行动</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e1123" class="indexterm-anchor"></a><a id="d7824e1127" class="indexterm-anchor"></a><a id="d7824e1129" class="indexterm-anchor"></a>操作表示模块执行的作业。例如， <code class="codeph">DBMS_SCHEDULER</code>模块可以运行<code class="codeph">GATHER_STATS_JOB</code>操作来收集有关所有数据库对象的统计信息。如果单个操作正在使用大部分等待时间，那么您应该对其进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37__GUID-10B5C1E9-B956-4A8A-ADFE-64D67BDB7312">要监控某个操作：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的彩色区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作”页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶部操作</span> ”。
                              </p>
                              <p>将显示“最佳操作”表。</p>
                              <div class="figure" id="GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37__CACBGFJH">
                                 <p class="titleinfigure">图4-5监控热门操作</p><img src="img/top_act.gif" alt="下面是图4-5的描述" title="下面是图4-5的描述" longdesc="img_text/top_act.html"><br><a href="img_text/top_act.html">“图4-5监控热门操作”的说明</a></div>
                              <!-- class="figure" -->
                              <p>Top Actions表显示在所选时间段内等待相应等待事件的最高操作。例如，在<a href="monitoring-real-time-database-performance.html#GUID-7E673E50-373A-4AD5-856F-9049BDEFFA37__CACBGFJH">图4-5中</a> ，与SQL * Plus模块关联的<code class="codeph">SALES_INFO</code>操作消耗了40.3％的数据库活动，而<code class="codeph">EMP_DML</code>消耗了39.55％， <code class="codeph">EMP_Query</code>消耗了4.48％。此信息与<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">图4-2</a>一致， <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">图4-2</a>显示用户<code class="codeph">HR</code>的数据库会话消耗了超过82％的数据库活动。
                              </p>
                           </li>
                           <li>
                              <p>单击最活跃操作的<span class="bold">“操作”</span>链接。
                              </p>
                              <p>将显示“操作”页面。</p>
                              <p>此页面包含所选操作的统计信息。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT377"></a><a id="TDPPT303"></a><div class="props_rev_3"><a id="GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083" name="GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083"></a><h4 id="TDPPT-GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083" class="sect4"><span class="enumeration_section">4.1.6</span>监控主要客户端</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e1284" class="indexterm-anchor"></a><a id="d7824e1288" class="indexterm-anchor"></a><a id="d7824e1290" class="indexterm-anchor"></a>客户端可以是Web浏览器或任何启动数据库执行操作请求的客户端进程。如果单个客户端正在使用大部分等待时间，那么您应该对其进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083__GUID-21AD4520-A773-4117-89B6-A23B84DE8EDB">监控客户：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的彩色区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作”页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶级客户</span> ”。
                              </p>
                              <p>将显示“顶级客户端”表。</p>
                              <div class="figure" id="GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083__CBBHJEFG">
                                 <p class="titleinfigure">图4-6监控主要客户端</p><img src="img/top_client.gif" alt="下面是图4-6的描述" title="下面是图4-6的描述" longdesc="img_text/top_client.html"><br><a href="img_text/top_client.html">“图4-6监控主要客户端”的描述</a></div>
                              <!-- class="figure" -->
                              <p>“顶级客户端”表显示在所选时间段内等待相应等待事件的顶级客户端。例如，在<a href="monitoring-real-time-database-performance.html#GUID-7939C906-3ED3-4EDD-B80B-AEDBEF0F0083__CBBHJEFG">图4-6中</a> ，client1和client2正在消耗大部分数据库活动。
                              </p>
                           </li>
                           <li>
                              <p>单击最活跃客户端的<span class="bold">客户端ID</span>链接。
                              </p>
                              <p>将显示“客户端”页面。</p>
                              <p>此页面包含所选客户端进程的统计信息。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT379"></a><a id="TDPPT304"></a><div class="props_rev_3"><a id="GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60" name="GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60"></a><h4 id="TDPPT-GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60" class="sect4"><span class="enumeration_section">4.1.7</span>监控Top PL / SQL</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e1423" class="indexterm-anchor"></a><a id="d7824e1427" class="indexterm-anchor"></a>如果单个PL / SQL子程序正在使用大部分等待时间，那么您应该对其进行调查。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60__GUID-0AB402EA-F7B1-4F16-9DA9-887338B2C239">要监视PL / SQL子程序：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话数”图表中，单击图表上的彩色区域或图例中的相应等待类。</p>
                              <p>将显示“活动会话工作”页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶部PL / SQL</span> ”。
                              </p>
                              <p>出现Top PL / SQL表。</p>
                              <div class="figure" id="GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60__CBBFEACJ">
                                 <p class="titleinfigure">图4-7监控Top PL / SQL</p><img src="img/top_plsql.gif" alt="下面是图4-7的描述" title="下面是图4-7的描述" longdesc="img_text/top_plsql.html"><br><a href="img_text/top_plsql.html">“图4-7监控Top PL / SQL”的描述</a></div>
                              <!-- class="figure" -->
                              <p>Top PL / SQL表显示在所选时间段内等待相应等待事件的顶部PL / SQL子程序。例如，在<a href="monitoring-real-time-database-performance.html#GUID-B3248F50-0997-4D36-9EDC-0BB6047EAA60__CBBFEACJ">图4-7中</a> ， <code class="codeph">SYS.DBMS_AQ.LISTEN#2</code>子程序占用了100％的数据库活动。
                              </p>
                           </li>
                           <li>
                              <p>单击最活跃子程序的<span class="bold">PL / SQL子程序</span>链接。
                              </p>
                              <p>将出现PL / SQL子程序页面。</p>
                              <p>此页面包含所选子程序的统计信息。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT381"></a><a id="TDPPT321"></a><div class="props_rev_3"><a id="GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF" name="GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF"></a><h4 id="TDPPT-GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF" class="sect4"><span class="enumeration_section">4.1.8</span>监控热门文件</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e1561" class="indexterm-anchor"></a><a id="d7824e1565" class="indexterm-anchor"></a>有关特定文件的平均等待时间的数据可从Active Sessions Waiting：User I / O页面获得。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF__GUID-5F94C450-F39D-42EB-9AC6-C439838B9135">要监控文件：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话”图表中，单击图表上的“用户I / O”区域或图例中的相应等待类。</p>
                              <p>活动会话等待：显示用户I / O页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶级文件</span> ”。
                              </p>
                              <p>将显示“顶级文件”表。</p>
                              <div class="figure" id="GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF__CBBEDDAB">
                                 <p class="titleinfigure">图4-8监控热门文件</p><img src="img/top_files.gif" alt="下面是图4-8的描述" title="下面是图4-8的描述" longdesc="img_text/top_files.html"><br><a href="img_text/top_files.html">“图4-8监控顶部文件”的说明</a></div>
                              <!-- class="figure" -->
                              <p>“Top Files”表显示所选时间段内特定文件的平均等待时间。例如，在<a href="monitoring-real-time-database-performance.html#GUID-320DA3EA-B580-418C-A4DC-B7E06A9FD7AF__CBBEDDAB">图4-8中，</a> 75％的等待时间与<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间中的文件的I / O相关联。
                              </p>
                           </li>
                           <li>
                              <p>单击具有最高平均等待时间的文件的<span class="bold">表空间</span>链接。
                              </p>
                              <p>将出现“查看表空间”页面。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT383"></a><a id="TDPPT322"></a><div class="props_rev_3"><a id="GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81" name="GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81"></a><h4 id="TDPPT-GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81" class="sect4"><span class="enumeration_section">4.1.9</span>监控顶部对象</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e1701" class="indexterm-anchor"></a><a id="d7824e1705" class="indexterm-anchor"></a>等待资源的顶级数据库对象的数据可从Active Sessions Waiting：User I / O页面获得。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81__GUID-0AB0D18E-BD3F-4188-AB51-1EB3E68CE00C">监视对象：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“平均活动会话”图表中，单击图表上的“用户I / O”区域或图例中的相应等待类。</p>
                              <p>活动会话等待：显示用户I / O页面。</p>
                           </li>
                           <li>
                              <p>在“选定的5分钟间隔的详细信息”下，从“视图”列表中选择“ <span class="bold">顶部对象</span> ”。
                              </p>
                              <p>出现Top Objects表。</p>
                              <div class="figure" id="GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81__CBBDHFCC">
                                 <p class="titleinfigure">图4-9监控顶部对象</p><img src="img/top_obj.gif" alt="下面是图4-9的描述" title="下面是图4-9的描述" longdesc="img_text/top_obj.html"><br><a href="img_text/top_obj.html">“图4-9监控顶部对象”的说明</a></div>
                              <!-- class="figure" -->
                              <p>“顶级对象”表显示在所选时间段内等待相应等待事件的顶级数据库对象。</p>
                              <p>例如， <a href="monitoring-real-time-database-performance.html#GUID-0228DCAF-1CE7-4948-A17F-042AFD5F2B81__CBBDHFCC">图4-9</a>显示超过84％的等待是针对名称不可用的对象。根据<a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07__CBBEFIFH">图4-2中</a>的信息，您可以得出结论，性能问题是由查询和修改DML语句引起的。
                              </p>
                           </li>
                           <li>
                              <p>单击具有最高平均等待时间的对象的“ <span class="bold">对象名称”</span>链接。
                              </p>
                              <p>将显示该对象的“查看”页面。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPPT040"></a><div class="props_rev_3"><a id="GUID-F405EE4E-F0A9-42AB-AC3C-4FA6F29DE6AC" name="GUID-F405EE4E-F0A9-42AB-AC3C-4FA6F29DE6AC"></a><h3 id="TDPPT-GUID-F405EE4E-F0A9-42AB-AC3C-4FA6F29DE6AC" class="sect3"><span class="enumeration_section">4.2</span>监控实例活动</h3>
               <div>
                  <p><a id="d7824e1835" class="indexterm-anchor"></a> “性能”页面上的“平均活动会话”图表下方是可用于监视数据库实例活动的其他图表。如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-81073595-A0B0-474C-937B-376B58D7C414">自定义数据库性能”页面中所述</a></span> ，您还可以自定义“性能”页面，以便默认显示最有用的实例活动图表。
                  </p>
                  <p>您可以使用实例活动图表执行以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="monitoring-real-time-database-performance.html#GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0">监控吞吐量</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-real-time-database-performance.html#GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222">监控I / O.</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-real-time-database-performance.html#GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6">监视并行执行</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-real-time-database-performance.html#GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B">监控服务</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT385"></a><a id="TDPPT325"></a><div class="props_rev_3"><a id="GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0" name="GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0"></a><h4 id="TDPPT-GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0" class="sect4"><span class="enumeration_section">4.2.1</span>监控吞吐量</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e1950" class="indexterm-anchor"></a><a id="d7824e1954" class="indexterm-anchor"></a>数据库<span class="bold">吞吐量</span>衡量数据库在单位时间内执行的工作量。吞吐量图表显示平均活动会话图表中显示的任何争用。
                        </p>
                        <p>将吞吐量图表上的峰值与“平均活动会话数”图表上的峰值进行比较。如果“平均活动会话”图表显示大量会话等待，表示内部争用，但吞吐量很高，则情况可能是可接受的。如果内部争用率低但吞吐量很高，数据库可能也会有效地运行。但是，如果内部争用很高但吞吐量很低，那么请考虑调整数据库。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0__GUID-58051672-21AC-4B11-BF11-898E7B02945C">监控吞吐量：</p>
                        <ol>
                           <li>
                              <p>访问数据库主页。</p>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">性能主页”</span> 。
                              </p>
                              <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将出现“性能”页面。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">吞吐量”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>选择以下实例吞吐率选项之一。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">每秒</span></p>
                                    <p>出现两个图表。一个显示每秒的登录和事务数，另一个显示每秒的物理读取和重做大小。</p>
                                    <p><a href="monitoring-real-time-database-performance.html#GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0__CBBECFIJ">图4-10</a>显示了吞吐量图表，其中选择了实例吞吐率每秒。图中间的条形表示一部分图表（从大约1:37到1:52）已被删除以用于空间考虑。在<a href="monitoring-real-time-database-performance.html#GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0__CBBECFIJ">图4-10中</a> ，大多数交易发生在1:15到1:27 pm和2:08到2:12 pm</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">每笔交易</span></p>
                                    <p>出现一个图表，显示每个事务的物理读取次数和重做大小。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="figure" id="GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0__CBBECFIJ">
                           <p class="titleinfigure">图4-10监控吞吐量</p><img src="img/through_per_sec.gif" alt="下面是图4-10的描述" title="下面是图4-10的描述" longdesc="img_text/through_per_sec.html"><br><a href="img_text/through_per_sec.html">“图4-10监控吞吐量”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT387"></a><a id="TDPPT326"></a><div class="props_rev_3"><a id="GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222" name="GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222"></a><h4 id="TDPPT-GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222" class="sect4"><span class="enumeration_section">4.2.2</span>监控I / O.</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e2104" class="indexterm-anchor"></a><a id="d7824e2108" class="indexterm-anchor"></a> I / O图表显示从所有数据库客户端收集的I / O统计信息。数据库进程的I / O等待时间表示如果挂起的I / O已完成，进程可以执行有用工作的时间。Oracle数据库以统一的方式捕获所有重要I / O组件的I / O等待时间，以便任何Oracle进程的每个I / O等待都可以从I / O统计信息中获得。
                        </p>
                        <div class="figure" id="GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222__CBBBDBEH">
                           <p class="titleinfigure">图4-11监控I / O.</p><img src="img/io_function.gif" alt="下面是图4-11的描述" title="下面是图4-11的描述" longdesc="img_text/io_function.html"><br><a href="img_text/io_function.html">“图4-11监控I / O”的说明</a></div>
                        <!-- class="figure" -->
                        <p>同步单块读取的延迟图表显示了块读取的总感知<span class="bold">I / O延迟</span> ，这是I / O请求提交和传输的第一个字节到达之间的时间差。如果延迟小于10毫秒，大多数系统都能令人满意地运行。这种类型的I / O请求是I / O性能的最佳指标，原因如下：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>由于存储中的写缓存，写操作可能表现出良好的性能。</p>
                           </li>
                           <li>
                              <p>由于多块I / O请求具有不同的大小，因此它们可能需要不同的时间。</p>
                           </li>
                           <li>
                              <p>异步I / O请求的延迟不代表完整的I / O等待时间。</p>
                           </li>
                        </ul>
                        <p>显示的其他图表取决于您对<span class="bold">I / O细分的选择</span> ，如以下部分所述：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="monitoring-real-time-database-performance.html#GUID-C1D2E7E9-6425-4A0D-9B37-22D5C774FA54">按功能监视I / O.</a></p>
                           </li>
                           <li>
                              <p><a href="monitoring-real-time-database-performance.html#GUID-F6F57E16-4CF5-409F-B29A-9C2D7D6E7D96">按类型监视I / O.</a></p>
                           </li>
                           <li>
                              <p><a href="monitoring-real-time-database-performance.html#GUID-C4326F7D-2B63-4830-B78C-A19D54881EA8">消费者组监控I / O.</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="TDPPT329"></a><div class="props_rev_3"><a id="GUID-C1D2E7E9-6425-4A0D-9B37-22D5C774FA54" name="GUID-C1D2E7E9-6425-4A0D-9B37-22D5C774FA54"></a><h5 id="TDPPT-GUID-C1D2E7E9-6425-4A0D-9B37-22D5C774FA54" class="sect5"><span class="enumeration_section">4.2.2.1</span>按功能监视I / O.</h5>
                     <div>
                        <div class="section">
                           <p>I / O功能图表按应用程序或作业确定I / O使用级别。组件级统计信息提供了I / O带宽使用情况的详细视图，您可以将其用于调度作业和I / O配置。组件级统计信息分为以下几类：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>背景类型</p>
                                 <p>此类别包括ARCH，LGWR和DBWR。</p>
                              </li>
                              <li>
                                 <p>活动</p>
                                 <p>此类别包括XDB，高级队列（AQ），数据泵，恢复和RMAN。</p>
                              </li>
                              <li>
                                 <p>I / O类型</p>
                                 <p>该类别包括以下内容：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>直接写</p>
                                       <p>此写操作由前台进程完成，而不是来自缓冲区高速缓存。</p>
                                    </li>
                                    <li>
                                       <p>直接阅读</p>
                                       <p>此读取是来自数据文件的物理I / O，该文件绕过缓冲区高速缓存并将数据块直接读入进程专用内存。</p>
                                    </li>
                                    <li>
                                       <p>缓冲区高速缓存读取</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>其他</p>
                                 <p>此类别包括I / O，例如控制文件I / O.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C1D2E7E9-6425-4A0D-9B37-22D5C774FA54__GUID-E149BBB6-E9E5-4611-AB3F-F2BBD5F8ECDA">按功能监视I / O：</p>
                           <ol>
                              <li>
                                 <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在实例活动图表中，单击<span class="bold">I / O.</span></p>
                                 <p>将显示同步单块读取的延迟，每秒I / O兆字节数和每秒I / O请求数。</p>
                              </li>
                              <li>
                                 <p>对于<span class="bold">I / O故障</span> ，请选择<span class="bold">I / O功能</span> 。
                                 </p>
                                 <p>通过I / O功能和I / O功能图表显示每秒I / O兆字节数。</p>
                                 <p><a href="monitoring-real-time-database-performance.html#GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222__CBBBDBEH">图4-11</a>中的示例显示日志写入程序正在执行大量I / O.日志写入器活动达到峰值，大约每秒600个I / O请求。
                                 </p>
                              </li>
                              <li>
                                 <p>单击图表上最大的彩色区域或图例中的相应功能可深入查看具有最高I / O速率的功能。</p>
                                 <p>将显示“I / O功能”页面的“I / O吞吐量”，其中包含有关所选类别的详细信息。</p>
                                 <p>您可以查看实时或历史数据，以获取有关I / O兆字节或I / O请求的详细信息。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-C1D2E7E9-6425-4A0D-9B37-22D5C774FA54__GUID-67A2538C-40A9-4E8C-96F4-60113E962CF6">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../cncpt/process-architecture.html#CNCPT1249" target="_blank"><span class="italic">Oracle Database Concepts</span></a> ，了解ARCH，LGWR和DBWR等数据库后台进程</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPPT330"></a><div class="props_rev_3"><a id="GUID-F6F57E16-4CF5-409F-B29A-9C2D7D6E7D96" name="GUID-F6F57E16-4CF5-409F-B29A-9C2D7D6E7D96"></a><h5 id="TDPPT-GUID-F6F57E16-4CF5-409F-B29A-9C2D7D6E7D96" class="sect5"><span class="enumeration_section">4.2.2.2</span>按类型监控I / O.</h5>
                     <div>
                        <div class="section">
                           <p>I / O类型图表使您可以通过读写操作的类型来监视I / O.小I / O是小于128 KB的请求，通常是单个数据库块I / O操作。大I / O是大于或等于128 KB的请求。大型I / O由数据库操作生成，例如表/索引扫描，直接数据加载，备份，还原和归档。</p>
                           <div class="figure" id="GUID-F6F57E16-4CF5-409F-B29A-9C2D7D6E7D96__GUID-B8FCE9D0-0592-441C-9D72-592299893728"><img src="img/perf_io_type.gif" alt="perf_io_type.gif的描述如下" title="perf_io_type.gif的描述如下" longdesc="img_text/perf_io_type.html"><br><a href="img_text/perf_io_type.html">perf_io_type.gif插图的描述</a></div>
                           <!-- class="figure" -->
                           <p>优化短事务时间（例如在OLTP环境中）时，监视小I / O的延迟。高延迟通常表明存储系统是瓶颈。</p>
                           <p>优化大型查询（例如在数据仓库中）时，性能取决于存储系统可以实现的最大吞吐量，而不是I / O请求的延迟。在这种情况下，监视每秒I / O兆字节而不是同步单块I / O延迟。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F6F57E16-4CF5-409F-B29A-9C2D7D6E7D96__GUID-F5EA4BBF-468E-46C5-A838-0BD70B69B680">按类型监视I / O：</p>
                           <ol>
                              <li>
                                 <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在实例活动图表中，单击<span class="bold">I / O.</span></p>
                                 <p>将显示每秒I / O兆字节数和每秒I / O请求数。</p>
                              </li>
                              <li>
                                 <p>对于<span class="bold">I / O故障</span> ，请选择<span class="bold">I / O类型</span> 。
                                 </p>
                                 <p>I / O类型图表显示每秒I / O兆字节数和I / O类型图表每秒I / O请求数。</p>
                                 <p>在上面的示例图表中，每秒的小写入次数增加到600以上。这些写操作对应于<a href="monitoring-real-time-database-performance.html#GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222__CBBBDBEH">图4-11中</a>所示的日志编写器I / O请求。
                                 </p>
                              </li>
                              <li>
                                 <p>单击图表上最大的彩色区域或图例中的相应功能可深入查看具有最高I / O速率的功能。</p>
                                 <p>将显示“I / O详细信息”页面。</p>
                                 <p>您可以查看实时或历史数据，以获取有关I / O兆字节或I / O请求的详细信息。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPPT331"></a><div class="props_rev_3"><a id="GUID-C4326F7D-2B63-4830-B78C-A19D54881EA8" name="GUID-C4326F7D-2B63-4830-B78C-A19D54881EA8"></a><h5 id="TDPPT-GUID-C4326F7D-2B63-4830-B78C-A19D54881EA8" class="sect5"><span class="enumeration_section">4.2.2.3</span>按消费者组监控I / O.</h5>
                     <div>
                        <div class="section">
                           <p>启用Oracle数据库资源管理器后，数据库将收集属于当前启用的资源计划的所有使用者组的I / O统计信息。消费者组图表使您可以按消费者组监控I / O.</p>
                           <p>资源计划指定如何在各种用户（资源消费者组）之间分配资源。资源使用者组使您可以按资源要求组织用户会话。请注意， <code class="codeph">_ORACLE_BACKGROUND_GROUP_</code>使用者组包含后台进程发出的I / O请求。
                           </p>
                           <div class="figure" id="GUID-C4326F7D-2B63-4830-B78C-A19D54881EA8__GUID-625FB29E-219D-4911-82F2-8C0729B8B5CD"><img src="img/perf_io_consum.gif" alt="perf_io_consum.gif的描述如下" title="perf_io_consum.gif的描述如下" longdesc="img_text/perf_io_consum.html"><br><a href="img_text/perf_io_consum.html">perf_io_consum.gif插图的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C4326F7D-2B63-4830-B78C-A19D54881EA8__GUID-2619B467-4B4F-41D4-87A0-27D5F0AC4E16">要监视消费者组的I / O请求：</p>
                           <ol>
                              <li>
                                 <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在实例活动图表中，单击<span class="bold">I / O.</span></p>
                                 <p>将显示每秒I / O兆字节数和每秒I / O请求数。</p>
                              </li>
                              <li>
                                 <p>对于<span class="bold">I / O细分</span> ，请选择<span class="bold">消费者组</span> 。
                                 </p>
                                 <p>消费者组每秒I / O兆字节数和消费者组图表每秒I / O请求数。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TDPPT391"></a><a id="TDPPT327"></a><div class="props_rev_3"><a id="GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6" name="GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6"></a><h4 id="TDPPT-GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6" class="sect4"><span class="enumeration_section">4.2.3</span>监视并行执行</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e2664" class="indexterm-anchor"></a><a id="d7824e2668" class="indexterm-anchor"></a>并行执行图表显示与并行查询相关的系统指标。<span class="bold">度量标准</span>是每单位的统计计数。单位可以是时间度量，例如秒，或每个事务或会话。
                        </p>
                        <p>并行查询将跨多个进程执行SQL语句的工作分开。图表显示正在等待特定等待事件的并行查询，这些等待事件占采样会话活动的最高百分比。</p>
                        <div class="figure" id="GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6__CBBEDCFA">
                           <p class="titleinfigure">图4-12监控并行执行</p><img width="503" src="img/pe.gif" alt="下面是图4-12的描述" title="下面是图4-12的描述" longdesc="img_text/pe.html"><br><a href="img_text/pe.html">“图4-12监控并行执行”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6__GUID-3E35ED58-DB64-4DE0-88E5-14026C48A99B">监视并行执行：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在实例活动图表中，单击“ <span class="bold">并行执行”</span> 。
                              </p>
                              <p>出现并行执行图表。</p>
                              <p>显示了两对图表。第一对显示y轴上的会话数，而第二对显示y轴上的每秒速率。</p>
                              <p>在<a href="monitoring-real-time-database-performance.html#GUID-B1CA766B-7C02-4289-9300-56A5E4931DC6__CBBEDCFA">图4-12</a>所示的示例中，查询并行化从下午12:30到下午4点处于活动状态</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT393"></a><a id="TDPPT328"></a><div class="props_rev_3"><a id="GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B" name="GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B"></a><h4 id="TDPPT-GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B" class="sect4"><span class="enumeration_section">4.2.4</span>监控服务</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e2791" class="indexterm-anchor"></a><a id="d7824e2795" class="indexterm-anchor"></a><a id="d7824e2799" class="indexterm-anchor"></a>服务代表具有共同属性，服务级别阈值和优先级的应用程序组。例如， <code class="codeph">SYS$USERS</code>服务是在未明确标识服务名称的情况下建立用户会话时使用的默认服务名称。
                        </p>
                        <div class="figure" id="GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B__CBBBCGBB">
                           <p class="titleinfigure">图4-13监控服务</p><img src="img/services.gif" alt="下面是图4-13的描述" title="下面是图4-13的描述" longdesc="img_text/services.html"><br><a href="img_text/services.html">“图4-13监控服务”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B__GUID-082D58D4-A36A-44DE-B1BA-368CC67F46C7">监控服务：</p>
                        <ol>
                           <li>
                              <p>访问“性能”页面，如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监控用户活动</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在实例活动图表中，单击“ <span class="bold">服务”</span> 。
                              </p>
                              <p>出现“服务”图表。“服务”图表显示在显示的时间段内等待相应等待事件的服务。仅显示活动服务。</p>
                              <p>在<a href="monitoring-real-time-database-performance.html#GUID-12C3FF5D-2D8D-49F6-8188-D0BAC5924C5B__CBBBCGBB">图4-13中</a> ， <code class="codeph">SYS$USERS</code>服务具有最多的活动会话。
                              </p>
                           </li>
                           <li>
                              <p>单击图表上最大的彩色区域或图例中的相应服务，以深入查看具有最多活动会话数的服务。</p>
                              <p>将显示“服务”页面，其中显示“活动”子页面。</p>
                              <p>您可以查看显示与服务关联的所有等待类的会话负载的实时数据。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPPT395"></a><a id="TDPPT041"></a><div class="props_rev_3"><a id="GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97" name="GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97"></a><h3 id="TDPPT-GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97" class="sect3"><span class="enumeration_section">4.3</span>监控主机活动</h3>
               <div>
                  <div class="section">
                     <p><a id="d7824e2931" class="indexterm-anchor"></a> “性能”页面上的“主机”图表显示有关托管数据库的系统的利用率信息。
                     </p>
                     <div class="figure" id="GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97__GUID-0C841DCF-5CF8-46B2-97D4-8B885142320F">
                        <p class="titleinfigure">图4-14监控主机活动</p><img src="img/host.gif" alt="下面是图4-14的描述" title="下面是图4-14的描述" longdesc="img_text/host.html"><br><a href="img_text/host.html">“图4-14监控主机活动”的说明</a></div>
                     <!-- class="figure" -->
                     <p>要确定主机系统是否有足够的可用资源来运行数据库，请对系统应使用的CPU，内存和磁盘资源量建立适当的期望。然后，您可以验证数据库是否消耗了太多这些资源。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97__GUID-61E76BFA-E62F-4FA5-96E3-DA8979ACE49D">要查看有关CPU，内存和磁盘利用率的详细信息：</p>
                     <ol>
                        <li>
                           <p>从“ <span class="bold">目标”</span>菜单中，选择“ <span class="bold">主机”</span> 。
                           </p>
                           <p>将显示“主机”页面。</p>
                        </li>
                        <li>
                           <p>在主机列表中，单击数据库所在主机的名称。</p>
                           <p>将显示<span class="italic">hostname</span>页面，其中<span class="italic">hostname</span>是<span class="italic">主机</span>的名称。
                           </p>
                        </li>
                        <li>
                           <p>确定是否有足够的资源可用以及您的系统是否使用了太多资源。</p>
                           <p>例如，确定数据库在以下方案中使用的CPU，内存和磁盘资源量：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>系统空闲时，或存在少量数据库和非数据库活动时</p>
                              </li>
                              <li>
                                 <p>平均工作量</p>
                              </li>
                              <li>
                                 <p>在高峰工作量</p>
                              </li>
                           </ul>
                           <p>在评估系统的资源利用率时，工作负载是一个重要因素。在高峰工作负载时间内，可以接受90％的资源利用率，例如具有10％空闲和等待时间的CPU。但是，如果您的系统在正常工作负载下显示高利用率，则没有额外工作负载的空间。</p>
                           <p>执行以下任务以监视数据库的主机活动：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="monitoring-real-time-database-performance.html#GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002">监视CPU利用率</a></p>
                              </li>
                              <li>
                                 <p><a href="monitoring-real-time-database-performance.html#GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A">监视内存利用率</a></p>
                              </li>
                              <li>
                                 <p><a href="monitoring-real-time-database-performance.html#GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF">监视磁盘I / O利用率</a></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>为性能指标设置适当的阈值，以便系统可以在超过这些阈值时自动生成警报。</p>
                           <p>有关设置度量标准阈值的信息，请参阅<span class="q">“ <a href="monitoring-performance-alerts.html#GUID-E4359985-FDE3-4083-AC4F-09E711B0E4B9">为性能警报</a></span>设置度量标准阈<span class="q"><a href="monitoring-performance-alerts.html#GUID-E4359985-FDE3-4083-AC4F-09E711B0E4B9">值</a> ”</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div><a id="TDPPT042"></a><div class="props_rev_3"><a id="GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002" name="GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002"></a><h4 id="TDPPT-GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002" class="sect4"><span class="enumeration_section">4.3.1</span>监控CPU利用率</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e3094" class="indexterm-anchor"></a><a id="d7824e3098" class="indexterm-anchor"></a>要解决CPU问题，请首先针对系统应使用的CPU资源量建立适当的期望。然后，您可以确定是否有足够的CPU资源可用，并识别系统消耗过多资源的时间。本节介绍如何监视CPU利用率。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002__GUID-22B2A3F9-FFCA-4E9F-805A-AC353D121934">监视CPU利用率：</p>
                        <ol>
                           <li>
                              <p>按照<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97">监控主机活动</a> ”中的</span>说明访问<span class="italic">主机名</span>页面。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">CPU Details</span> 。
                              </p>
                              <p>出现“CPU详细信息”页面。</p>
                              <p>此页面包含有关CPU利用率，I / O等待时间和过去一小时收集的负载的统计信息。根据CPU利用率列出前10个进程。</p>
                           </li>
                           <li>
                              <p>使用CPU利用率图表验证当前CPU利用率。</p>
                              <p>CPU利用率图表显示过去一小时半的CPU利用率。当前值显示在图表下方。在标准工作负载时间内，该值不应超过临界阈值。</p>
                           </li>
                           <li>
                              <p>单击<span class="bold">CPU利用率</span> 。
                              </p>
                              <p>将显示“CPU利用率”页面。</p>
                              <p>此页面包含CPU利用率统计信息以及过去24小时内生成的相关警报。</p>
                              <p>在下面的示例中，CPU利用率在下午12:28突然从大约8％飙升到89.49％，高于警告阈值80％。</p>
                              <div class="figure" id="GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002__GUID-CB00867E-7B0E-4205-8352-5E7BF09095E7"><img src="img/cpu_util.gif" alt="下面是cpu_util.gif的描述" title="下面是cpu_util.gif的描述" longdesc="img_text/cpu_util.html"><br><a href="img_text/cpu_util.html">插图说明cpu_util.gif</a></div>
                              <!-- class="figure" -->
                              <p>如果您发现在正常工作负载小时内持续出现此值的意外峰值，则应调查CPU性能问题。</p>
                           </li>
                           <li>
                              <p>返回“CPU详细信息”页面。从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">CPU Details</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用CPU I / O等待图表验证当前CPU I / O等待时间。</p>
                              <p>CPU I / O等待图表显示过去一个半小时的CPU I / O等待时间。当前值显示在图表下方。在正常工作负载时间内，CPU I / O等待的值不应超过警告阈值。</p>
                              <p><a id="d7824e3174" class="indexterm-anchor"></a> CPU I / O wait表示在一个间隔期间等待I / O的平均作业数。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">CPU I / O Wait</span> 。
                              </p>
                              <p>出现I / O Wait页面中的CPU。</p>
                              <p>此页面包含过去24小时内生成的CPU I / O等待统计信息和相关警报。</p>
                              <p>如果您发现通过标准工作负载小时数持续增加此值，则可能存在CPU性能问题。</p>
                           </li>
                           <li>
                              <p>返回“CPU详细信息”页面。从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">CPU Details</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用CPU负载图表验证当前CPU负载。</p>
                              <p>CPU负载图表显示过去一小时半的CPU负载。当前值显示在图表下方。在标准工作负载小时期间，CPU负载的值不应超过警告阈值。</p>
                              <p><a id="d7824e3209" class="indexterm-anchor"></a> CPU负载表示前一分钟等待为CPU资源调度的平均进程数，或者CPU争用时间的水平。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">CPU负载</span> 。
                              </p>
                              <p>将显示“运行队列长度”（平均5分钟）页面。</p>
                              <p>此页面包含过去24小时内生成的CPU负载统计信息和相关警报。</p>
                              <p>如果您发现在正常工作负载小时内持续出现此值的意外峰值，则可能存在CPU性能问题。</p>
                           </li>
                           <li>
                              <p>返回“CPU详细信息”页面。从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">CPU Details</span> 。
                              </p>
                           </li>
                           <li>
                              <p>查看前10个进程（按CPU排序）表。</p>
                              <p>如果进程占用过多的CPU利用率百分比，则调查该进程。</p>
                              <p>在以下示例中，两个数据库进程占用了87.6％的CPU利用率。因此，数据库可能是潜在的CPU性能问题的根源，应该进行调查。</p>
                              <div class="figure" id="GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002__GUID-7E467FCC-CBB7-4301-9410-E260AF58CFAC"><img src="img/top_10_proc.gif" alt="top_10_proc.gif的描述如下" title="top_10_proc.gif的描述如下" longdesc="img_text/top_10_proc.html"><br><a href="img_text/top_10_proc.html">插图描述top_10_proc.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p><a id="d7824e3251" class="indexterm-anchor"></a><a id="d7824e3255" class="indexterm-anchor"></a>如果发现CPU性能问题，则可以通过执行以下操作尝试解决此问题：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用Oracle <a id="d7824e3264" class="indexterm-anchor"></a>数据库资源管理器通过优先考虑CPU资源分配来减少峰值负载使用模式的影响</p>
                                 </li>
                                 <li>
                                    <p>避免运行太多使用大量CPU的进程</p>
                                 </li>
                                 <li>
                                    <p>增加硬件容量，包括更改系统架构</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-BAE8D943-D587-4FDB-BCA8-059C5504B002__GUID-41EE6020-23EB-41FA-9BF3-8608C1D0AB06">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关解决CPU问题的信息，请<a href="../tgdba/managing-operating-system-resources.html#TGDBA95150" target="_blank"><span class="italic">参见“Oracle数据库性能调整指南”</span></a></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN027" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> <span class="italic"> </span>有关Oracle数据库资源管理器的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT515"></a><a id="TDPPT043"></a><div class="props_rev_3"><a id="GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A" name="GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A"></a><h4 id="TDPPT-GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A" class="sect4"><span class="enumeration_section">4.3.2</span>监控内存利用率</h4>
                  <div>
                     <div class="section">
                        <p>操作系统性能问题通常涉及进程管理，内存管理和调度。本节介绍如何监视内存利用率并确定分页和交换等问题。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A__GUID-1987B02F-DB67-4C4F-81C1-1AAE2F010DA1">监视内存利用率：</p>
                        <ol>
                           <li>
                              <p>按照<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-3D9C9784-ECCA-434C-B247-3EBED3E88A97">监控主机活动</a> ”中的</span>说明访问<span class="italic">主机名</span>页面。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">主机</span>菜单中，选择<span class="bold">监控</span> ，然后选择<span class="bold">内存详细信息</span> 。
                              </p>
                              <p>出现“内存详细信息”页</p>
                              <p>此页面包含有关过去一小时内收集的内存利用率，页面扫描率和交换利用率的统计信息。前10个进程也按内存利用率排列。<a href="monitoring-real-time-database-performance.html#GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A__CBBFDGAG">图4-15</a>显示了“内存详细信息”页面的一部分。未显示前10个进程（按内存排序）部分。
                              </p>
                              <div class="figure" id="GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A__CBBFDGAG">
                                 <p class="titleinfigure">图4-15内存详细信息页面</p><img src="img/mem_details.gif" alt="下面是图4-15的描述" title="下面是图4-15的描述" longdesc="img_text/mem_details.html"><br><a href="img_text/mem_details.html">“图4-15内存详细信息页面”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>使用“内存页面扫描速率”图表验证当前内存页扫描速率。</p>
                              <p>内存页面扫描速率的当前值显示在图表下方。在UNIX和Linux上，此值表示每秒扫描的页数。在Microsoft Windows上，此值表示从磁盘读取或写入页面以解决硬页面错误的速率。该值是可能导致系统范围延迟的故障类型的主要指标。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">内存扫描速率”（每秒页数）</span> 。
                              </p>
                              <p>将出现“内存页面扫描速率”页面。</p>
                              <p>此页面包含过去24小时内存页面扫描率统计信息和相关警报。</p>
                              <p>如果您发现通过标准工作负载小时数持续增加此值，则可能存在内存性能问题。</p>
                           </li>
                           <li>
                              <p>返回“内存详细信息”页面。从<span class="bold">主机</span>菜单中，选择<span class="bold">监控</span> ，然后选择<span class="bold">内存详细信息</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用“内存利用率”图表，验证当前内存利用率。</p>
                              <p>内存利用率图表显示正在使用的内存量。内存利用率的当前值显示在图表下方。在标准工作负载时间内，该值不应超过警告阈值（以黄色显示）。</p>
                           </li>
                           <li>
                              <p>单击<span class="bold">内存利用率（％）</span> 。
                              </p>
                              <p>出现“内存使用率”页面</p>
                              <p>此页面包含过去24小时内生成的内存利用率统计信息和相关警报。</p>
                              <div class="figure" id="GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A__GUID-7F0C9D1E-3C19-42B3-8020-0A804F9288E2"><img src="img/mem_util.gif" alt="mem_util.gif的描述如下" title="mem_util.gif的描述如下" longdesc="img_text/mem_util.html"><br><a href="img_text/mem_util.html">插图描述mem_util.gif</a></div>
                              <!-- class="figure" -->
                              <p>在此示例中，内存利用率已超过80％，因此警报将显示在“度量标准警报历史记录”表中。</p>
                              <p>如果您发现在正常工作负载小时内持续出现此值的意外峰值，则可能存在内存性能问题。</p>
                           </li>
                           <li>
                              <p>返回“内存详细信息”页面。从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">Memory Details</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用交换利用率图表，验证当前交换利用率。</p>
                              <p>交换利用率<a id="d7824e3495" class="indexterm-anchor"></a>图表显示了正在使用的交换空间量。交换利用率的当前值显示在图表下方。在正常工作负载时间内，该值不应超过警告阈值。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">交换利用率（％）”</span> 。
                              </p>
                              <p>将显示“交换利用率”页面。</p>
                              <p>此页面包含交换利用率统计信息以及过去24小时内生成的相关警报。</p>
                              <p>如果您发现在正常工作负载小时内持续出现此值的意外峰值，则可能存在内存性能问题。</p>
                           </li>
                           <li>
                              <p>返回“内存详细信息”页面。从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">Memory Details</span> 。
                              </p>
                           </li>
                           <li>
                              <p>查看前10个流程（按内存排序）表中的顶级流程。</p>
                              <p>如果进程占用太多内存，则应调查此过程。</p>
                           </li>
                           <li>
                              <p>如果是内存性能问题<a id="d7824e3533" class="indexterm-anchor"></a><a id="d7824e3537" class="indexterm-anchor"></a>如果已识别，则可以通过执行以下操作尝试解决问题：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用自动内存管理在系统全局区域（SGA）和聚合程序全局区域（PGA聚合）之间自动管理和分配内存。</p>
                                 </li>
                                 <li>
                                    <p>使用Memory Advisor设置SGA和PGA内存目标值。</p>
                                 </li>
                                 <li>
                                    <p>使用自动PGA管理来管理SQL内存执行。</p>
                                 </li>
                                 <li>
                                    <p>避免运行过多消耗大量内存的进程。</p>
                                 </li>
                                 <li>
                                    <p>减少分页或交换。</p>
                                 </li>
                                 <li>
                                    <p>使用游标共享减少打开游标的数量和硬解析。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-3BFE3927-611B-4DCE-81B4-D59A1418F68A__GUID-0938CBD3-F7BE-4E0A-A89B-43D80097A24D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../admin/managing-memory.html#ADMIN11011" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关使用自动内存管理的信息</p>
                              </li>
                              <li>
                                 <p>有关解决内存问题的信息，请<a href="../tgdba/database-memory-allocation.html#TGDBA291" target="_blank"><span class="italic">参见“Oracle数据库性能调整指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT516"></a><a id="TDPPT044"></a><div class="props_rev_3"><a id="GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF" name="GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF"></a><h4 id="TDPPT-GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF" class="sect4"><span class="enumeration_section">4.3.3</span>监控磁盘I / O利用率</h4>
                  <div>
                     <div class="section">
                        <p><a id="d7824e3663" class="indexterm-anchor"></a><a id="d7824e3667" class="indexterm-anchor"></a>由于数据库驻留在一组磁盘上，因此I / O子系统的性能对数据库性能非常重要。重要的磁盘统计信息包括每秒磁盘I / O和服务时间长度。这些统计信息显示磁盘是否运行最佳或存储系统是否过度工作。本节介绍如何监控磁盘I / O利用率。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF__GUID-2067915E-9A2A-4E1A-9375-5329655BA738">监控磁盘I / O利用率：</p>
                        <ol>
                           <li>
                              <p>从“ <span class="bold">目标”</span>菜单中，选择“ <span class="bold">主机”</span> 。
                              </p>
                              <p>将显示“主机”页面。</p>
                           </li>
                           <li>
                              <p>在主机列表中，单击数据库所在主机的名称。</p>
                              <p>将显示<span class="italic">hostname</span>页面，其中<span class="italic">hostname</span>是<span class="italic">主机</span>的名称。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">Disk Details</span> 。
                              </p>
                              <p>出现“磁盘详细信息”页</p>
                              <p>此页面包含磁盘I / O利用率和服务时间统计信息，以及按其使用时间百分比排序的顶级磁盘设备。</p>
                              <div class="figure" id="GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF__CBBFFHJB">
                                 <p class="titleinfigure">图4-16磁盘详细信息</p><img src="img/disk_details.gif" alt="下面是图4-16的描述" title="下面是图4-16的描述" longdesc="img_text/disk_details.html"><br><a href="img_text/disk_details.html">“图4-16磁盘详细信息”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>使用“在所有磁盘上进行磁盘I / O总量”图表验证当前磁盘I / O利用率。</p>
                              <p>“在所有磁盘上进行的磁盘I / O总量”图表显示每秒执行的磁盘I / O数量。每秒总磁盘I / O的当前值显示在图表下方。在<a href="monitoring-real-time-database-performance.html#GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF__CBBFFHJB">图4-16中，</a>该值为153.07。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">所有磁盘上的总磁盘I / O（每秒）</span> 。
                              </p>
                              <p>将显示“在所有磁盘（每秒）上创建的磁盘I / O总量”页面。</p>
                              <p>此页面包含过去24小时内生成的磁盘利用率统计信息和相关警报。</p>
                              <p>如果您发现此值在标准工作负载小时内出现意外峰值，则可能存在磁盘I / O性能问题，应进行调查。</p>
                           </li>
                           <li>
                              <p>使用所有磁盘中的最大平均磁盘I / O服务时间（毫秒）图表验证当前的I / O服务时间。</p>
                              <p>所有磁盘中的最大平均磁盘I / O服务时间（毫秒）图表显示磁盘I / O的最长服务时间（以毫秒为单位）。最长I / O服务时间的当前值显示在图表下方。在<a href="monitoring-real-time-database-performance.html#GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF__CBBFFHJB">图4-16中，</a>该值为1.79。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">Disk Details</span> 。
                              </p>
                              <p>出现“磁盘详细信息”页</p>
                           </li>
                           <li>
                              <p>单击<span class="bold">所有磁盘中的最大平均磁盘I / O（毫秒）服务时间</span> 。
                              </p>
                              <p>将显示“所有磁盘中的最大平均磁盘I / O服务时间（毫秒）”页面。</p>
                              <p>此页面包含I / O服务时间统计信息以及过去24小时内生成的相关警报。</p>
                              <p>如果您发现在正常工作负载小时内持续出现此值的意外峰值，则可能存在磁盘I / O性能问题，应进行调查。</p>
                           </li>
                           <li>
                              <p>从<span class="bold">Host</span>菜单中，选择<span class="bold">Monitoring</span> ，然后选择<span class="bold">Disk Details</span> 。
                              </p>
                              <p>出现“磁盘详细信息”页</p>
                           </li>
                           <li>
                              <p>在“磁盘详细信息”页面上，验证顶部磁盘设备（按％忙排序）表中的磁盘设备。</p>
                              <p>如果特定磁盘占用的时间很长，则应调查此磁盘。</p>
                              <p>在<a href="monitoring-real-time-database-performance.html#GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF__CBBFFHJB">图4-16中</a> ，托管Oracle数据库（xvda和xvda1）的驱动器仅占12.14和10.93％的时间，因此不存在磁盘性能问题。
                              </p>
                           </li>
                           <li>
                              <p>如果磁盘I / O性能有问题<a id="d7824e3797" class="indexterm-anchor"></a><a id="d7824e3801" class="indexterm-anchor"></a>如果已识别，您可以通过执行以下操作尝试解决问题：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用Oracle自动存储管理（Oracle ASM）管理数据库存储。</p>
                                 </li>
                                 <li>
                                    <p>在每个磁盘上划分所有内容以分发I / O.</p>
                                 </li>
                                 <li>
                                    <p>将归档重做日志和联机重做日志等文件移动到单独的磁盘。</p>
                                 </li>
                                 <li>
                                    <p>将所需数据存储在内存中以减少物理I / O的数量。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-4206DC68-97C4-4ADE-AA05-90F1486488BF__GUID-2E9DD30B-D056-4EF6-98BD-297E25D8D9AC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关解决磁盘I / O问题的信息，请<a href="../tgdba/IO-configuration-and-design.html#TGDBA015" target="_blank"><span class="italic">参见“Oracle数据库性能调整指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPPT550"></a><a id="TDPPT551"></a><a id="TDPPT552"></a><a id="TDPPT517"></a><div class="props_rev_3"><a id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1" name="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1"></a><h3 id="TDPPT-GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1" class="sect3"><span class="enumeration_section">4.4</span>确定数据库活动中的峰值原因</h3>
               <div>
                  <div class="section">
                     <p><a id="d7824e3915" class="indexterm-anchor"></a><a id="d7824e3919" class="indexterm-anchor"></a><a id="d7824e3921" class="indexterm-anchor"></a>如果您在“性能”页面中看到数据库活动激增，则可以访问ASH Analytics页面以找出哪些会话消耗的数据库时间最长。此页面提供堆叠区域图表，以帮助您从各种维度可视化活动会话活动，例如等待类，模块，操作，SQL ID，实例，用户会话，消费者组等。您可以深入查看维度的特定成员（垂直缩放），以及放大和缩小任何时间段（水平缩放）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__GUID-D5D6DE7B-8703-4277-9546-9BC8F719120D">要在ASH Analytics页面上查看活动会话活动：</p>
                     <ol>
                        <li>
                           <p>访问数据库主页。</p>
                           <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">Performance Hub</span> ，然后选择<span class="bold">ASH Analytics</span> 。
                           </p>
                           <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将显示ASH Analytics页面。</p>
                           <p><a href="monitoring-real-time-database-performance.html#GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__CBBJIGEF">图4-17</a>显示了ASH Analytics页面的示例。
                           </p>
                           <div class="figure" id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__CBBJIGEF">
                              <p class="titleinfigure">图4-17 ASH Analytics页面</p><img src="img/ash_analytics_page.gif" alt="下面是图4-17的描述" title="下面是图4-17的描述" longdesc="img_text/ash_analytics_page.html"><br><a href="img_text/ash_analytics_page.html">“图4-17 ASH Analytics页面”的说明</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>要在选定时间段内查看热门活动的高级视角，请将顶部图表中的整个着色滑块区域拖动到所需的时间段。</p>
                           <div class="infobox-tip" id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__GUID-84804399-538E-4337-9ECB-4EE6BFA90167">
                              <p class="notep1">小费：</p>
                              <p>您可以通过选择滑块任一边缘的控件并向左或向右拖动来更改阴影滑块区域中选定的时间。</p>
                              <p>您可以在默认设置中选择一小时的时间段，也可以使用图表上方的选择器按钮显示一天，一周或一个月的时间段。您还可以使用“日历”和“自定义”按钮显示除预设选项之外的时间段。</p>
                           </div>
                        </li>
                        <li>
                           <p>要查看所选时间段的更详细视角，请使用页面上的活动图表。默认情况下，图表显示等待类的工作负载活动细分。</p>
                        </li>
                        <li>
                           <p>通过查看对系统产生负面影响的顶级活动会话的详细统计信息来调查影响。</p>
                           <p><span class="bold">要查看会话的详细统计信息：</span></p>
                           <ol type="a">
                              <li>
                                 <p>选择图表中最大的峰值或图表旁边图例中的相应等待类。观众现在过滤掉图表中的所有内容，除了感兴趣的等待类。</p>
                                 <p>例如，如果图表显示并发等待类具有最大峰值，请选择并发图例的图表区域。查看器刷新图表，现在只显示Concurrency值，并在Filters栏中显示Wait Class：Concurrency图标。</p>
                                 <div class="infobox-tip" id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__GUID-7303E533-DABD-4056-BDCA-4C9AB55BADA4">
                                    <p class="notep1">小费：</p>
                                    <p>您可以创建无限数量的过滤器。</p>
                                 </div>
                              </li>
                              <li>
                                 <p>在“活动”部分中，从维度列表中选择“ <span class="bold">顶部维度</span> ”。图表会根据您的选择进行刷新，显示您选择的特定类别的值。
                                 </p>
                                 <p>例如，如果您如上所述为并发创建过滤器，然后从列表中选择“顶层维度”，然后选择“用户会话”，则该图表仅显示“并发”的用户会话。</p>
                                 <p><a href="monitoring-real-time-database-performance.html#GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__CBBJABAI">图4-18</a>显示了选择了Top Dimensions的活动列表。
                                 </p>
                                 <div class="figure" id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__CBBJABAI">
                                    <p class="titleinfigure">图4-18活动列表</p><img src="img/ash_analytics_list.gif" alt="下面是图4-18的描述" title="下面是图4-18的描述" longdesc="img_text/ash_analytics_list.html"><br><a href="img_text/ash_analytics_list.html">“图4-18活动列表”的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>（可选）使用“加载映射”获取系统活动的图形视图。</p>
                           <p>当您不想看到活动在选定时间段内如何随时间变化时，加载地图对于查看单维或多维布局中的活动非常有用。</p>
                           <p><a href="monitoring-real-time-database-performance.html#GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__CBBEIFBI">图4-19</a>显示了等待类和等待事件的活动的加载映射。
                           </p>
                           <div class="figure" id="GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1__CBBEIFBI">
                              <p class="titleinfigure">图4-19 ASH Analytics页面上的加载图</p><img src="img/ash_analytics_loadmap.gif" alt="下面是图4-19的描述" title="下面是图4-19的描述" longdesc="img_text/ash_analytics_loadmap.html"><br><a href="img_text/ash_analytics_loadmap.html">“图4-19在ASH Analytics页面上加载地图”的说明</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>（可选）单击“ <span class="bold">保存”</span>将当前页面视图<span class="bold">另存</span>为HTML文件以供脱机引用。单击“保存”时，将显示“另存为”对话框，您可以指定要保存报告的位置。此操作将创建企业管理器活动报告，其中包含当前作为分析的一部分收集的所有数据。例如，您可以稍后使用它进行更彻底的事后分析。您可以在没有云控制或数据库连接的情况下查看报告。
                           </p>
                           <p>您还可以单击“ <span class="bold">邮件”</span>并指定电子邮件地址以将页面作为附件发送。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TDPPT313"></a><div class="props_rev_3"><a id="GUID-81073595-A0B0-474C-937B-376B58D7C414" name="GUID-81073595-A0B0-474C-937B-376B58D7C414"></a><h3 id="TDPPT-GUID-81073595-A0B0-474C-937B-376B58D7C414" class="sect3"><span class="enumeration_section">4.5</span>自定义“数据库性能”页面</h3>
               <div>
                  <div class="section">
                     <p><a id="d7824e4110" class="indexterm-anchor"></a><a id="d7824e4114" class="indexterm-anchor"></a>您可以自定义“性能”页面，以便它专门满足您的要求。如<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-F405EE4E-F0A9-42AB-AC3C-4FA6F29DE6AC">监视实例活动</a> ”中所述</span> ，您可以在“性能”页面中指定要默认显示的图表，以及希望它们的显示方式。您还可以决定是否在吞吐量和服务图表中包含基准值。
                     </p>
                     <p>Cloud Control为存储库中的每个用户存储持久性自定义信息。当您访问“性能”页面时，Cloud Control会检索自定义数据，并在浏览器会话的剩余时间内对其进行缓存，直到您更改设置为止。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-81073595-A0B0-474C-937B-376B58D7C414__GUID-E80BCD58-ABEE-41E8-8026-CA593EDB5E50">要自定义“性能”页面：</p>
                     <ol>
                        <li>
                           <p>访问数据库主页。</p>
                           <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">性能主页”</span> 。
                           </p>
                           <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将出现“性能”页面。</p>
                        </li>
                        <li>
                           <p>单击<span class="bold">设置</span> 。
                           </p>
                           <p>将出现“性能页面设置”页面。</p>
                           <div class="figure" id="GUID-81073595-A0B0-474C-937B-376B58D7C414__GUID-F3728405-208B-4D2C-AA45-C3C93A12829B"><img src="img/perf_page_sett.gif" alt="perf_page_sett.gif的描述如下" title="perf_page_sett.gif的描述如下" longdesc="img_text/perf_page_sett.html"><br><a href="img_text/perf_page_sett.html">perf_page_sett.gif插图的描述</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>在“详细图表设置”部分中，选择显示实例活动图表的默认值。完成以下步骤：</p>
                           <ol type="a">
                              <li>
                                 <p>在“ <span class="bold">默认视图”中</span> ，选择默认情况下在“平均活动会话”部分中显示的实例活动图表。
                                 </p>
                                 <p>有关吞吐量，I / O，并行执行和服务图表的说明，请参阅<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-F405EE4E-F0A9-42AB-AC3C-4FA6F29DE6AC">监控实例活动</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">吞吐量图表设置”中</span> ，选择“ <span class="bold">每秒”</span>或“ <span class="bold">每个事务”</span>作为要在吞吐量图表中显示的默认实例吞吐率。
                                 </p>
                                 <p>请参阅<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-FB8EDFF1-2BBC-4A61-B16F-09641BA062D0">监视吞吐量</a> ”</span>以了解如何使用吞吐量图表。
                                 </p>
                              </li>
                              <li>
                                 <p>在<span class="bold">I / O图表设置中</span> ，选择要在I / O图表中显示的默认I / O选项。
                                 </p>
                                 <p>请参阅<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-A76E027F-8EE0-4B10-8EE9-6C3E8D3ED222">监视I / O</a> ”</span>以了解如何使用I / O图表。
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>在“基线显示”部分中，选择AWR基线在性能图表中的显示方式。执行以下操作之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>选择<span class="bold">不显示基线值</span>以防止出现基线。
                                 </p>
                              </li>
                              <li>
                                 <p>选择<span class="bold">使用系统移动窗口基线显示第99百分位线，</span>以指定要为吞吐量和服务图表显示的百分位数。
                                 </p>
                              </li>
                              <li>
                                 <p>选择<span class="bold">使用带有计算统计数据的静态基线显示第99个百分位线</span> ，然后从“基线名称”列表中选择基线名称。
                                 </p>
                                 <p>您只能选择已经过计划统计计算的基准，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C">计算基准的阈值统计</a> ”中所述</span> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                           <p>将出现“性能”页面。</p>
                           <p>现在根据您的自定义设置显示图表。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
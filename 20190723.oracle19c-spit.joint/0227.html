<html id="04738.build-and-configure-oci-applications.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes features about building and configuring OCI applications on Linux, UNIX, and Windows operating systems."></meta>
      <meta name="description" content="This chapter describes features about building and configuring OCI applications on Linux, UNIX, and Windows operating systems."></meta>
      <title>构建和配置OCI应用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter describes features about building and configuring OCI applications on Linux, UNIX, and Windows operating systems."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="instant-client.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oci-programming-basics.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="instant-client.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oci-programming-basics.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">构建和配置OCI应用程序</li>
            </ol>
            <a id="GUID-7DC38FFE-0AA2-4736-8D0C-CE5792F68493" name="GUID-7DC38FFE-0AA2-4736-8D0C-CE5792F68493"></a>
            
            <h2 id="LNOCI-GUID-7DC38FFE-0AA2-4736-8D0C-CE5792F68493" class="sect2"><span class="enumeration_chapter">3</span>构建和配置OCI应用程序</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='build-and-configure-oci-applications'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>本章介绍有关在Linux，UNIX和Windows操作系统上构建和配置OCI应用程序的功能。</p>
               <p>有关其他支持的操作系统，请参阅平台特定的安装指南以获取更多信息。</p>
               <div class="p">本章包括以下主题：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-8C6B6022-89EC-4E53-8CA4-AE415326D0E4" title="在Linux和UNIX操作系统上进行OCI和OCCI客户端应用程序开发所需的OCI和OCCI头文件位于$ ORACLE_HOME / rdbms / public目录中。">头文件和Makefile位置</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-D6379B9A-80A6-4439-B96A-D31264DF0100" title="如何在Linux和UNIX上构建OCI应用程序。">在Linux和UNIX上构建OCI应用程序</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-A8CD434E-D9E2-4718-AA25-123CE7C030EB" title="如何在Windows上构建OCI应用程序。">在Windows上构建应用程序</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-D1C1272A-8538-40ED-961D-8C872CAA18AE" title="本主题描述不使用ORACLE_BASE_HOME的Oracle Net命名方法，或ORACLE_HOME（用于查找配置文件，如tnsnames.ora，sqlnet.ora或oraaccess.xml）。">数据库连接字符串</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-AB481881-FE50-4617-BB45-0C817815EAA9" title="在Oracle Database 11.2（或更高版本）中，您可以在客户端和服务器上使用不同版本的时区文件; Oracle Database 11.2之前不支持此操作模式。">使用不同版本的时区文件运行的客户端和服务器</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-9D12F489-EC02-46BE-8CD4-5AECED0E2BA2" title="本主题使用oraaccess.xml描述OCI客户端部署参数。">OCI客户端部署参数使用oraaccess.xml</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-1B41866A-7D99-4335-8E73-E0BCF54CB532" title="以下部分讨论有关OCI客户端和服务器的不同版本之间的兼容性，OCI库例程中的更改以及将应用程序从7.x OCI版本升级到当前版本的OCI的问题：">关于兼容性和升级</a></p>
                     </li>
                     <li>
                        <p><a href="build-and-configure-oci-applications.html#GUID-0A4A1E6C-F321-4858-A535-E47240DC9EA1" title="Oracle Database 11g第1版（11.1）中的OCI引入了故障诊断功能。描述如何确定ADR基础的位置。ADRCI是一个命令行工具，使您可以在ADR中查看诊断数据，并将事件和问题信息打包到一个zip文件中供Oracle支持人员使用。介绍如何使用sqlnet.ora控制ADR创建和禁用故障诊断。">OCI中的故障可诊断性</a></p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-8C6B6022-89EC-4E53-8CA4-AE415326D0E4" name="GUID-8C6B6022-89EC-4E53-8CA4-AE415326D0E4"></a><h3 id="LNOCI-GUID-8C6B6022-89EC-4E53-8CA4-AE415326D0E4" class="sect3"><span class="enumeration_section">3.1</span>头文件和Makefile位置</h3>
               <div>
                  <p>在Linux和UNIX操作系统上进行OCI和OCCI客户端应用程序开发所需的OCI和OCCI头文件位于<code class="codeph">$ORACLE_HOME/rdbms/public</code>目录中。
                  </p>
                  <p>这些文件既可以安装Oracle数据库服务器，也可以安装Oracle数据库客户端管理和自定义安装。有关包含C和C ++头文件的<a href="instant-client.html#GUID-16475230-7573-4A14-B76A-31E4F4CEEBCA" title="The software development kit (SDK) is a set of development tools that allows the creation of applications can be downloaded from the Instant Client link URL on the Oracle Technology Network website:">SDK</a>以及用于在Instant Client环境中开发OCI和OCCI应用程序的Makefile的信息，请参阅<a href="instant-client.html#GUID-16475230-7573-4A14-B76A-31E4F4CEEBCA" title="软件开发工具包（SDK）是一组开发工具，可以从Oracle Technology Network网站上的Instant Client链接URL下载创建应用程序：">SDK for Oracle Instant Client</a> 。
                  </p>
                  <p>安装后，所有演示程序及其相关头文件都驻留在<code class="codeph">$ORACLE_HOME/rdbms/demo</code>目录中。这些演示文件只能从Examples媒体安装。有关这些程序的名称及其用途，请参阅<a href="oci-demo-programs.html#GUID-75E18629-0C54-4495-A747-AFB346034F26" title="列出示例程序，其中包含示例代码，用于演示OCI句柄的分配和使用。">OCI演示程序</a> 。
                  </p>
                  <p><code class="codeph">demo</code>目录中提供了几个makefile。每个makefile都包含注释，其中包含有关在构建OCI可执行文件时使用的说明。Oracle建议您尽可能使用这些演示makefile以避免编译和链接中的错误。
                  </p>
                  <p><code class="codeph">demo</code>目录中的<code class="codeph">demo_rdbms.mk</code>文件是一个示例makefile。请参阅有关如何构建演示OCI程序的评论。<code class="codeph">demo_rdbms.mk</code>文件包含<code class="codeph">$ORACLE_HOME/rdbms/public</code>目录。确保您自己的自定义makefile在<code class="codeph">INCLUDE</code>路径中具有<code class="codeph">$ORACLE_HOME/rdbms/public</code>目录。
                  </p>
                  <p><code class="codeph">ociucb.mk</code>文件是<code class="codeph">demo</code>用于构建回调共享库的makefile。
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D6379B9A-80A6-4439-B96A-D31264DF0100" name="GUID-D6379B9A-80A6-4439-B96A-D31264DF0100"></a><h3 id="LNOCI-GUID-D6379B9A-80A6-4439-B96A-D31264DF0100" class="sect3"><span class="enumeration_section">3.2</span>在Linux和UNIX上构建OCI应用程序</h3>
               <div>
                  <p>如何在Linux和UNIX上构建OCI应用程序。</p>
                  <div class="p">本主题描述了适用于在Linux和UNIX上构建应用程序的OCI的功能，主题如下：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-39B702E1-1893-4A6A-838A-ACE749C533AC" title="$ ORACLE_HOME目录包含下表中描述的与OCI相关的以下目录。">Oracle目录结构</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-D5AD28D8-9518-491C-9AD0-B29F92EFC88F" title="在Oracle数据库安装之后，可选择安装一组OCI演示程序及其相应的项目文件，并在ORACLE_BASE / ORACLE_HOME / demo子目录中进行设置。">示范OCI计划</a></p>
                        </li>
                     </ul>
                  </div>
                  <p></p>
                  <div class="infoboxnotealso" id="GUID-D6379B9A-80A6-4439-B96A-D31264DF0100__GUID-6C417E4C-5BBA-44BA-9C19-07DC3A6BC1C0">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span><cite>适用于Linux的Oracle数据库客户端安装指南，</cite></span>适用于x86-64 Linux平台的操作系统要求，支持x86-64平台的Oracle Linux和Red Hat Enterprise发行版，以及适用于Linux x86-64的编程环境的安装要求</p>
                        </li>
                        <li>
                           <p><span class="italic">适用于Apple Mac OS X（Intel）的Oracle Database Instant Client安装指南，</span>用于检查软件要求</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-39B702E1-1893-4A6A-838A-ACE749C533AC" name="GUID-39B702E1-1893-4A6A-838A-ACE749C533AC"></a><h4 id="LNOCI-GUID-39B702E1-1893-4A6A-838A-ACE749C533AC" class="sect4"><span class="enumeration_section">3.2.1</span> Oracle目录结构</h4>
                  <div>
                     <p><code class="codeph">$ORACLE_HOME</code>目录包含下表中描述的与OCI相关的以下目录。</p>
                     <p>这些目录适用于完整客户端和Oracle数据库，但不适用于Oracle Instant Client。这些文件包括链接和运行OCI应用程序以及与其他Oracle产品链接所需的库文件。</p>
                     <div class="tblformal" id="GUID-39B702E1-1893-4A6A-838A-ACE749C533AC__GUID-0AADB555-4FE5-43D5-B3A5-74D83F3AA1DD">
                        <p class="titleintable">表3-1 ORACLE_HOME目录和内容</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ORACLE_HOME目录和内容" border="1" summary="This table contains 2 columns named Directory Name and Contents." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d20286e945">目录名称</th>
                                 <th align="left" valign="bottom" id="d20286e947">内容</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d20286e951" headers="d20286e945 ">
                                    <p><code class="codeph">/管理员</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d20286e951 d20286e947 ">
                                    <p>配置文件</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d20286e959" headers="d20286e945 ">
                                    <p><code class="codeph">/演示</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d20286e959 d20286e947 ">
                                    <p>示例程序，make文件，SQL文件等</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d20286e967" headers="d20286e945 ">
                                    <p><code class="codeph">/ imclude</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d20286e967 d20286e947 ">
                                    <p>头文件</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d20286e975" headers="d20286e945 ">
                                    <p><code class="codeph">/ lib目录</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d20286e975 d20286e947 ">
                                    <p>库文件</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d20286e983" headers="d20286e945 ">
                                    <p><code class="codeph">/ MESG</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d20286e983 d20286e947 ">
                                    <p>消息文件</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d20286e991" headers="d20286e945 ">
                                    <p><code class="codeph">/上市</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d20286e991 d20286e947 ">
                                    <p>公共头文件</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D5AD28D8-9518-491C-9AD0-B29F92EFC88F" name="GUID-D5AD28D8-9518-491C-9AD0-B29F92EFC88F"></a><h4 id="LNOCI-GUID-D5AD28D8-9518-491C-9AD0-B29F92EFC88F" class="sect4"><span class="enumeration_section">3.2.2</span>示范OCI计划</h4>
                  <div>
                     <p>在Oracle数据库安装之后，可选择安装一组OCI演示程序及其相应的项目文件，并在<code class="codeph"><span class="codeinlineitalic">ORACLE_BASE/ORACLE_HOME</span></code> <code class="codeph">/demo</code>子目录中进行设置。
                     </p>
                     <p></p>
                     <p>构建并运行这些OCI演示程序，以熟悉开发OCI应用程序所涉及的步骤。</p>
                     <div class="p">要构建演示OCI程序，请运行位于<code class="codeph">/demo</code>目录中的<code class="codeph">make</code>文件（ <code class="codeph">demo_rdbms.mk</code> ）。例如，要构建单个OCI演示，请使用以下<code class="codeph">make</code>命令语法：<pre class="pre codeblock"><code>make -f demo_rdbms.mk build EXE = demo OBJS =“demo.o ...”</code></pre>例如，要构建OCI <code class="codeph">cdemo81.c</code>程序，请输入以下<code class="codeph">make</code>命令：</div><pre class="pre codeblock"><code>make -f demo_rdbms.mk build EXE = cdemo81 OBJS = cdemo81.o</code></pre><p>在此示例中，可从目标文件创建或更新可执行文件，而目标文件又通过编译源文件<code class="codeph">cdemo81.c</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-D5AD28D8-9518-491C-9AD0-B29F92EFC88F__GUID-B531FBC7-7202-426C-ACC6-BD3AEED7CC96">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用Oracle Universal Installer安装演示OCI程序的信息，请参见“ <a href="../exmpl/index.html#GUID-08474A8D-D3A5-4DF6-A920-3A17E87A1953" target="_blank"><span><cite>Oracle数据库示例安装指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/oracle12c-linux-12201-3608234.html" target="_blank">下载：Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1.0）标准版2和企业版，</a>用于链接到Oracle数据库12 <span class="italic">c</span>第2版用于Linux x86-64的示例（12.2.0.1.0） <code class="codeph">linuxx64_12201_examples.zip</code></p>
                           </li>
                           <li>
                              <p>查看<code class="codeph">demo_rdbms.mk</code>文件的内容，以了解有关运行<code class="codeph">demo</code>子目录中提供的许多其他OCI演示程序的更多信息。
                              </p>
                           </li>
                           <li>
                              <p><a href="oci-demo-programs.html#GUID-75E18629-0C54-4495-A747-AFB346034F26" title="Lists example programs with sample code demonstrating the allocation and use of OCI handles.">OCI演示程序</a> ，了解有关<a href="oci-demo-programs.html#GUID-75E18629-0C54-4495-A747-AFB346034F26" title="列出示例程序，其中包含示例代码，用于演示OCI句柄的分配和使用。">OCI演示程序</a>的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <p></p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-A8CD434E-D9E2-4718-AA25-123CE7C030EB" name="GUID-A8CD434E-D9E2-4718-AA25-123CE7C030EB"></a><h3 id="LNOCI-GUID-A8CD434E-D9E2-4718-AA25-123CE7C030EB" class="sect3"><span class="enumeration_section">3.3</span>在Windows上构建应用程序</h3>
               <div>
                  <p>如何在Windows上构建OCI应用程序。</p>
                  <p>有关完整信息，请参阅<a href="getting-started-with-oci-for-windows.html#GUID-AF5B9CF0-EA9A-4786-80AF-1FEF13363C88" title="如何开始使用OCI for Windows。">OCI for Windows入门</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-A8CD434E-D9E2-4718-AA25-123CE7C030EB__GUID-DF93DDE1-8A02-4CC3-8372-215B224C3515">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=NTCLI-GUID-CE270350-A201-4DAA-8373-A19408C9EF7D" target="_blank"><span><cite>适用于Microsoft Windows的Oracle数据库客户端安装指南，</cite></span></a>以获取有关Oracle数据库软件客户端要
                     </p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D1C1272A-8538-40ED-961D-8C872CAA18AE" name="GUID-D1C1272A-8538-40ED-961D-8C872CAA18AE"></a><h3 id="LNOCI-GUID-D1C1272A-8538-40ED-961D-8C872CAA18AE" class="sect3"><span class="enumeration_section">3.4</span>数据库连接字符串</h3>
               <div>
                  <p>本主题描述不使用<code class="codeph">ORACLE_BASE_HOME</code> Oracle Net命名方法，或<code class="codeph">ORACLE_HOME</code> （用于查找配置文件，如<code class="codeph">tnsnames.ora</code> ， <code class="codeph">sqlnet.ora</code>或<code class="codeph">oraaccess.xml</code> ）。
                  </p>
                  <p>特别是， <code class="codeph">OCIServerAttach()</code>调用中的<code class="codeph">connect_identifier</code>可以使用以下格式指定：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        
                        <p>一个简单的连接命名字符串的形式如下：</p>
                        <pre class="pre codeblock"><code>[[协议：//] host1的{，} host12 [：端口1] {，主机2：端口2} [/ SERVICE_NAME] [：服务器] [/ INSTANCE_NAME] [？PARAMETER_NAME =值{＆PARAMETER_NAME =值}]</code></pre>
                        <p>从Oracle Database Release 19c开始，扩展了简易连接命名语法，请参阅<a href="../admqs/configuring-the-network-environment.html#ADMQS-GUID-81B7DEEB-E5BF-4F90-9B72-679F1832F342" target="_blank">Easy Connect命名增强功能</a> 。
                        </p>
                     </li>
                     <li>
                        <p>作为本地命名参数的<code class="codeph">tnsnames.ora</code>配置文件条目的形式：</p><pre class="oac_no_warn" dir="ltr">net_service_name =（DESCRIPTION =（ADDRESS =（protocol_address_information））（CONNECT_DATA =（SERVICE_NAME = service_name）））</pre></li>
                     <li>
                        <p>作为表单的Oracle Net连接描述符：</p><pre class="oac_no_warn" dir="ltr">“（DESCRIPTION =（ADDRESS =（PROTOCOL = <span class="italic">protocol-name</span> ）（HOST = <span class="italic">host-name</span> ）（PORT = <span class="italic">port-number</span> ））（CONNECT_DATA =（SERVICE_NAME = <span class="italic">service-name</span> ）））”</pre></li>
                     <li>
                        <p>通过目录命名解析的连接名称，其中为LDAP服务器发现配置了站点。</p>
                     </li>
                  </ul>
                  <p>要使命名方法（如<code class="codeph">tnsnames.ora</code>和目录命名）起作用，还可以设置<code class="codeph">TNS_ADMIN</code>环境变量。
                  </p>
                  <p>如果未设置<code class="codeph">TNS_ADMIN</code>环境变量，并且使用<code class="codeph">tnsnames.ora</code>条目（例如<code class="codeph">inst1</code>等），则必须设置<code class="codeph">ORACLE_HOME</code>变量，并且配置文件应位于<code class="codeph">$ORACLE_HOME/network/admin</code>目录中。请注意，在这种情况下， <code class="codeph">ORACLE_HOME</code>变量仅用于查找Oracle Net配置文件，客户端代码库（OCI，NLS等）的其他组件不使用<code class="codeph">ORACLE_HOME</code>的值。因此，设置<code class="codeph">TNS_ADMIN</code>环境变量以建立<code class="codeph">tnsnames.ora</code>文件的位置是首选<code class="codeph">TNS_ADMIN</code>容易的。
                  </p>
                  <p>如果在<code class="codeph">OCIServerAttach()</code>调用<code class="codeph">OCIServerAttach()</code> <code class="codeph">NULL</code>字符串“”用作连接字符串，则可以将<code class="codeph">TWO_TASK</code>环境变量设置为<code class="codeph">connect_identifier</code> 。在Windows操作系统上，使用<code class="codeph">LOCAL</code>环境变量而不是<code class="codeph">TWO_TASK</code> 。</p>
                  <p>类似地，对于诸如SQL * Plus的OCI应用程序，可以将<code class="codeph">TWO_TASK</code> （或Windows上的<code class="codeph">LOCAL</code> ）环境变量设置为connect_identifier。它的值可以是在典型的连接字符串上出现在'@'右侧的任何值。
                  </p>
                  <div class="infoboxnotealso" id="GUID-D1C1272A-8538-40ED-961D-8C872CAA18AE__GUID-F49DFA6A-B11E-416D-ACC5-24A98381D4FE">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关连接描述符的更多信息，请参阅“ <a href="../netag/configuring-naming-methods.html#NETAG008" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a> ”中有关“配置命名方法”的章节</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E97921AA-A166-44EB-97B7-9EEFE3A23ED3" name="GUID-E97921AA-A166-44EB-97B7-9EEFE3A23ED3"></a><h4 id="LNOCI-GUID-E97921AA-A166-44EB-97B7-9EEFE3A23ED3" class="sect4"><span class="enumeration_section">3.4.1</span> Oracle数据库连接字符串连接标识符的示例</h4>
                  <div>
                     <p>如果您正在使用OCI应用程序，例如SQL * Plus，那么您可以通过以下方式指定数据库连接字符串：</p>
                     <p>如果Oracle数据库上的<code class="codeph">listener.ora</code>文件包含以下内容：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = server6）（PORT = 1573）））SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = rdbms3）（GLOBAL_DBNAME = rdbms3.server6.us.alchemy.com ）（ORACLE_HOME = / home / dba / rdbms3 / oracle）））</pre><p>OCI应用程序，连接标识符是：</p><pre class="oac_no_warn" dir="ltr">“服务器6：1573 / rdbms3.server6.us.alchemy.com”</pre><p>连接标识符也可以指定为：</p><pre class="oac_no_warn" dir="ltr">“（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = server6）（PORT = 1573））（CONNECT_DATA =（SERVICE_NAME = rdbms3.server6.us.alchemy.com）））”</pre><p>或者，您可以将<code class="codeph">TWO_TASK</code>环境变量设置为任何先前的连接标识符，并在不指定连接标识符的情况下进行连接。例如：</p><pre class="oac_no_warn" dir="ltr">export TWO_TASK = // server6：1573 / rdbms3.server6.us.alchemy.com</pre><p>您还可以将<code class="codeph">TWO_TASK</code>环境变量指定为：</p><pre class="oac_no_warn" dir="ltr">export TWO_TASK =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = server6）（PORT = 1573））（CONNECT_DATA =（SERVICE_NAME = rdbms3.server6.us.alchemy.com）））</pre><p>然后，您可以使用空连接标识符调用OCI应用程序。例如，要运行SQL * Plus：</p><pre class="oac_no_warn" dir="ltr">sqlplus <span class="italic">用户</span>
</pre><p>连接描述符也可以存储在<code class="codeph">tnsnames.ora</code>文件中。例如，如果<code class="codeph">tnsnames.ora</code>文件包含以下连接描述符：</p><pre class="oac_no_warn" dir="ltr">conn_str =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = server6）（PORT = 1573））（CONNECT_DATA =（SERVICE_NAME = rdbms3.server6.us.alchemy.com）））</pre><p>如果<code class="codeph">tnsnames.ora</code>文件位于<code class="codeph">/home/webuser/myconfigs</code>目录中，则可以将变量<code class="codeph">TNS_ADMIN</code> （或Windows上的<code class="codeph">LOCAL</code> ）设置为：</p><pre class="oac_no_warn" dir="ltr">export TNS_ADMIN = / home / webuser / myconfigs</pre><p>然后，您可以使用连接标识符<code class="codeph">conn_str</code>来调用OCI应用程序，例如SQL * Plus，或者用于OCI连接。
                     </p>
                     <div class="infoboxnote" id="GUID-E97921AA-A166-44EB-97B7-9EEFE3A23ED3__GUID-732F59D2-62DC-425C-94BB-CEA2B973C8FC">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">TNS_ADMIN</code>指定<code class="codeph">tnsnames.ora</code>文件所在的目录， <code class="codeph">TNS_ADMIN</code>不是<code class="codeph">tnsnames.ora</code>文件的完整路径。
                        </p>
                     </div>
                     <p>如果前面的<code class="codeph">tnsnames.ora</code>文件位于基于安装的Oracle主目录中，则在/ <code class="codeph">network/server6/home/dba/oracle/network/admin</code>目录中，则可以将<code class="codeph">ORACLE_HOME</code>环境变量设置如下，并将OCI应用程序设置为可以像以前一样使用标识符<code class="codeph">conn_str</code>调用SQL * Plus：</p><pre class="oac_no_warn" dir="ltr">export ORACLE_HOME = / network / server6 / home / dba / oracle</pre><p>最后，如果<code class="codeph">tnsnames.ora</code>可以通过<code class="codeph">TNS_ADMIN</code>或<code class="codeph">ORACLE_HOME</code> ，那么<code class="codeph">TWO_TASK</code>环境变量可以设置如下，使您可以调用OCI应用程序，例如没有连接标识符的SQL * Plus：</p><pre class="oac_no_warn" dir="ltr">export TWO_TASK = conn_str</pre></div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-AB481881-FE50-4617-BB45-0C817815EAA9" name="GUID-AB481881-FE50-4617-BB45-0C817815EAA9"></a><h3 id="LNOCI-GUID-AB481881-FE50-4617-BB45-0C817815EAA9" class="sect3"><span class="enumeration_section">3.5</span>使用不同版本的时区文件操作的客户端和服务器</h3>
               <div>
                  <p>在Oracle Database 11.2（或更高版本）中，您可以在客户端和服务器上使用不同版本的时区文件; Oracle Database 11.2之前不支持此操作模式。</p>
                  <p>客户端和服务器都必须是11.2或更高版本才能以这种混合模式运行。本节讨论在这种模式下运行的后果。为避免这些后果，请为客户端和服务器使用相同的时区文件版本。</p>
                  <p>当客户端和服务器使用不同的时区文件版本时，会出现以下行为。请注意，使用不同的时区文件版本只会影响<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIMEZONE</code> （ <code class="codeph">TSTZ</code> ）数据类型值的处理。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>当输入参数为<code class="codeph">TSTZ</code>类型时，此处列出的OCI日期时间和间隔API无条件地引发错误。这是因为这些操作依赖于客户端上与数据库不同步的本地时区文件。继续这种配置中的计算可能导致客户端和数据库层之间的计算不一致。
                        </p><pre class="oac_no_warn" dir="ltr"><a href="oci-date-datetime-and-interval-functions.html#GUID-5FFD4B08-30E1-461E-8E55-940787D6D8EC" title="比较两个日期时间值。">OCIDateTimeCompare（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-FC053036-BE93-42D7-A82C-4DDB6843E167" title="构造一个datetime描述符。">OCIDateTimeConstruct（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-744793B2-CD2F-47AC-825A-6FF5BEE12BAB" title="将一个日期时间类型转换为另一个。">OCIDateTimeConvert（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-BD2F6432-81FF-4CD6-9C3D-85E401894528" title="将两个日期时间作为输入并将其差异存储在一个间隔中。">OCIDateTimeSubtract（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-0E4AF4DD-5EEB-434D-BA3A-F4EDE7038FF5" title="添加两个间隔以生成结果间隔。">OCIIntervalAdd（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-2D0465BC-B8EA-4F41-B200-587F49D0B2CB" title="减去两个间隔并将结果存储在一个间隔中。">OCIIntervalSubtract（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-12B19818-0001-42F1-8B2C-FD96B7C3231C" title="返回数据类型为OCIInterval的OCI_DTYPE_INTERVAL_DS，其中区域ID已设置（如果在输入字符串中指定了区域）和当前绝对偏移量，或者区域ID设置为0的绝对偏移量。">OCIIntervalFromTZ（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-489C51F6-43DB-43DB-980F-2A42AFAFB332" title="获取datetime值的时区名称部分。">OCIDateTimeGetTimeZoneName（）</a> <a href="oci-date-datetime-and-interval-functions.html#GUID-B8DA860B-FD7D-481B-8347-156969B6EE04" title="获取日期时间值的时区（小时，分钟）部分。">脚本</a> <a id="fn_1" name="fn_1" href="#fn_1" returns="" an="" ora-01805="" error="" when="" timezone="" files="" on="" the="" client="" and="" server="" do="" not="" match="" (regions="" are="" synchronized);="" oci_success="" region="" time="" zone="" values="" same="" (represent="" instant="" in="" utc),="" though="" offsets="" different=")" ="" onclick="footdisplay(1, "><sup>1</sup></a> <a href="oci-date-datetime-and-interval-functions.html#GUID-086776F8-1153-417D-ABC6-A864A2A62788" title="获取系统当前日期和时间作为带时区的时间戳。">OCIDateTimeSysTimeStamp（）</a>
</pre></li>
                     <li>
                        <p>检索或修改<code class="codeph">TSTZ</code>值时会有性能损失。由于使用不同时区文件版本补偿客户端和服务器所需的额外转换，因此产生性能损失。
                        </p>
                     </li>
                     <li>
                        <p>如果更新的时区文件定义了新的时区区域，则可以看到在属于新区域的<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIMEZONE</code>值上运行的错误，该节点具有无法识别新时区的时区文件版本区域。
                        </p>
                     </li>
                  </ul>
                  <p>操作opaque类型或<code class="codeph">XMLType</code>实例或包含<code class="codeph">TSTZ</code>类型属性的应用程序必须在客户端和服务器上使用相同的时区文件版本，以避免数据丢失。
                  </p>
                  <div class="infoboxnotealso" id="GUID-AB481881-FE50-4617-BB45-0C817815EAA9__GUID-C7AEE111-2B3B-42B6-B09A-9DD956F6D927">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../nlspg/datetime-data-types-and-time-zone-support.html#NLSPG259" target="_blank"><span><cite>“Oracle数据库全球化支持指南”，</cite></span></a>以获取有关使用时区数据升级时区文件和时间戳的信息</p>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-9D12F489-EC02-46BE-8CD4-5AECED0E2BA2" name="GUID-9D12F489-EC02-46BE-8CD4-5AECED0E2BA2"></a><h3 id="LNOCI-GUID-9D12F489-EC02-46BE-8CD4-5AECED0E2BA2" class="sect3"><span class="enumeration_section">3.6</span>使用oraaccess.xml的OCI客户端部署参数</h3>
               <div>
                  <p>本主题使用oraaccess.xml描述OCI客户端部署参数。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-CD599644-135A-4116-8B3B-40A9BA172E5C" title="从Oracle Database Release 12c第1版（12.1）开始，Oracle提供了oraaccess.xml文件，即客户端配置文件。">关于oraaccess.xml</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-7F47F9F7-EF51-4D68-8B2A-2443C837710B" title="在sqlnet.ora和oraaccess.xml文件中同时设置等效参数时，oraaccess.xml文件设置优先于相应的sqlnet.ora文件设置。">关于oraaccess.xml中指定的客户端部署参数</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-8D28AB6C-C04A-4C63-AC3A-25B18AB99B06" title="描述oraaccess.xml文件的高级结构。">oraaccess.xml的高级结构</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8" title="如上所述，&lt;default_parameters&gt;标记允许为各种OCI参数指定默认值。">关于在oraaccess.xml中指定全局参数</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0" title="描述可以为跨连接共享的连接参数设置的默认值。">关于指定连接参数的默认值</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-D436C5B8-0B9A-4E21-95D2-29D984186528" title="使用oraaccess.xml文件还允许您在连接字符串级别覆盖同一组特定于连接的参数。">在连接字符串级别覆盖连接参数</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-C171A50B-BB76-4A2F-9E9D-F96CE23BFAF7" title="从Oracle Database 18c版本18.1开始，可以使用oraaccess.xml客户端配置文件设置OCI会话池配置。">关于oraaccess.xml中的OCI会话池配置</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-B8A13EE4-0D42-4856-A4F4-FE438650D691" title="为简单起见，列出了有关oraaccess.xml文件语法的一些高级规则。">文件（oraaccess.xml）属性</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-CD599644-135A-4116-8B3B-40A9BA172E5C" name="GUID-CD599644-135A-4116-8B3B-40A9BA172E5C"></a><h4 id="LNOCI-GUID-CD599644-135A-4116-8B3B-40A9BA172E5C" class="sect4"><span class="enumeration_section">3.6.1</span>关于oraaccess.xml</h4>
                  <div>
                     <p>从Oracle Database Release 12 <span class="italic">c</span>第1版（12.1）开始，Oracle提供了<code class="codeph">oraaccess.xml</code>文件，即客户端配置文件。
                     </p>
                     <p>您可以使用<code class="codeph">oraaccess.xml</code>文件来配置所选的OCI参数（其中一些参数在各种OCI API调用中以编程方式接受），从而允许在部署期间更改OCI行为，而无需修改调用OCI的源代码。</p>
                     <p>对<code class="codeph">oraaccess.xml</code>文件的更新不会影响已在运行的客户端。为了获取<code class="codeph">oraaccess.xml</code>文件的任何更新，需要重新启动已运行的客户端。
                     </p>
                     <p>在常规和即时客户端安装中，从<code class="codeph">TNS_ADMIN</code>环境变量指定的目录中读取<code class="codeph">oraaccess.xml</code>文件。如果在常规客户端安装中未设置<code class="codeph">TNS_ADMIN</code> ，则这是UNIX操作系统上的<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <code class="codeph">/network/admin</code>目录和Microsoft Windows操作系统上的<span class="italic"><code class="codeph">%ORACLE_HOME%</code></span> <code class="codeph">\NETWORK\ADMIN</code>目录。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-7F47F9F7-EF51-4D68-8B2A-2443C837710B" name="GUID-7F47F9F7-EF51-4D68-8B2A-2443C837710B"></a><h4 id="LNOCI-GUID-7F47F9F7-EF51-4D68-8B2A-2443C837710B" class="sect4"><span class="enumeration_section">3.6.2</span>关于oraaccess.xml中指定的客户端部署参数</h4>
                  <div>
                     <p>在<code class="codeph">sqlnet.ora</code>和<code class="codeph">oraaccess.xml</code>文件中同时设置等效参数时， <code class="codeph">oraaccess.xml</code>文件设置优先于相应的<code class="codeph">sqlnet.ora</code>文件设置。
                     </p>
                     <p></p>
                     <p>在这种情况下，Oracle建议使用<code class="codeph">oraaccess.xml</code>文件设置。对于任何网络配置， <code class="codeph">sqlnet.ora</code>文件仍然是主文件，因为<code class="codeph">oraaccess.xml</code>文件中不支持网络级别设置。
                     </p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8D28AB6C-C04A-4C63-AC3A-25B18AB99B06" name="GUID-8D28AB6C-C04A-4C63-AC3A-25B18AB99B06"></a><h4 id="LNOCI-GUID-8D28AB6C-C04A-4C63-AC3A-25B18AB99B06" class="sect4"><span class="enumeration_section">3.6.3</span> oraaccess.xml的高级结构</h4>
                  <div>
                     <p>描述<code class="codeph">oraaccess.xml</code>文件的高级结构。
                     </p>
                     <p><code class="codeph">oraaccess.xml</code>文件有一个顶级节点<code class="codeph">&lt;oraaccess&gt;</code> ，包含以下三个元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">&lt;default_parameters&gt;</code> - 此元素描述跨连接共享的任何默认参数设置。这些默认参数包括：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>全局参数的默认值 - 这些全局参数只能指定一次，因此适用于所有连接，并且不能在连接级别覆盖。使用以下标记指定这些参数：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">&lt;events&gt;</code> - 以<code class="codeph">OCI_EVENTS</code>模式创建OCI环境，这是快速应用程序通知（FAN）和运行时连接负载平衡所必需的</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">&lt;result_cache&gt;</code> - 设置OCI客户端结果缓存参数</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">&lt;diag&gt;</code> - 设置OCI故障可诊断性参数</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>特定于连接的参数的默认值 - 可以将连接参数设置为特定连接的不同值。但是，它们也可以默认，并根据需要在每个连接字符串的基础上覆盖。这些默认值在所有连接之间共享（除非在连接级别覆盖，后面是<code class="codeph">&lt;config_descriptions&gt;</code>列表项中描述）。这些默认值由以下标记指定：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">&lt;prefetch&gt;</code> - 设置所有查询的预取行数;使用<code class="codeph">&lt;rows&gt;</code>参数指定。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">&lt;statement_cache&gt;</code> - 设置每个会话可以缓存的最大语句数;使用<code class="codeph">&lt;size&gt;</code>参数指定。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">&lt;auto tune&gt;</code> - 包括： <code class="codeph">&lt;enable&gt;</code>打开或关闭自动调谐; <code class="codeph">&lt;ram_threshold&gt;</code> ，它设置当客户端系统上的可用物理内存达到此阈值时，自动调整的内存阈值以停止使用更多内存;和<code class="codeph">&lt;memory_target&gt;</code> ，它设置OCI自动调整可以为每个客户端进程使用的内存限制。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">&lt;fan_subscription_failure_action&gt;</code> - 将订阅失败时的操作设置为值<code class="codeph">trace</code>或<code class="codeph">error</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">&lt;ons&gt;</code> - 设置用于FAN通知的各种ONS客户端部署配置参数。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;config_descriptions&gt;</code> - 此元素将配置别名元素（ <code class="codeph">&lt;config_alias&gt;</code> ）（基本上是名称）与包含一个或多个连接参数的特定参数集（ <code class="codeph">&lt;parameters&gt;</code> ）相关联。这些连接参数与前面描述的元素<code class="codeph">&lt;default_parameters&gt;</code>中的连接参数相同，即： <code class="codeph">&lt;prefetch&gt;</code> ， <code class="codeph">&lt;statement_cache&gt;</code> ， <code class="codeph">&lt;auto_tune&gt;</code> ， <code class="codeph">&lt;fan_subscription_failure_action&gt;</code>和<code class="codeph">&lt;ons&gt;</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;connection_configs&gt;</code> - 此元素将应用程序使用的一个或多个连接字符串与配置别名相关联，从而允许多个连接字符串元素共享同一组参数。
                           </p>
                           <p>连接配置元素（ <code class="codeph">&lt;connection_config&gt;</code> ）将连接字符串元素（ <code class="codeph">&lt;connection_string&gt;</code> ）与配置别名元素（ <code class="codeph">&lt;config_alias&gt;</code> ）相关联。
                           </p>
                           <p>连接字符串通过配置别名与一组参数间接关联，这允许多个连接字符串元素共享同一组参数。</p>
                        </li>
                     </ul>
                     <p>以下各节更详细地描述了这些客户端部署参数。</p>
                     <div class="infoboxnotealso" id="GUID-8D28AB6C-C04A-4C63-AC3A-25B18AB99B06__GUID-4BA6A0B8-C4EE-4F12-8CAA-966EED83E479">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="build-and-configure-oci-applications.html#GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0" title="描述可以为跨连接共享的连接参数设置的默认值。">关于指定连接参数的默认值</a></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8" name="GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8"></a><h4 id="LNOCI-GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8" class="sect4"><span class="enumeration_section">3.6.4</span>关于在oraaccess.xml中指定全局参数</h4>
                  <div>
                     <p>如上所述， <code class="codeph">&lt;default_parameters&gt;</code>标记允许为各种OCI参数指定默认值。
                     </p>
                     <p>其中，一些参数只能指定一次，因此适用于所有连接。使用以下标记描述这些全局参数：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">&lt;活动&gt;</code></p>
                           <p>这将在<code class="codeph">OCI_EVENTS</code>模式下创建OCI环境，这是快速应用程序通知（FAN）和运行时连接负载平衡所必需的。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;events&gt; true &lt;！ -  value也可能是false  - &gt; &lt;/ events&gt;</pre></li>
                        <li>
                           <p><code class="codeph">&lt;RESULT_CACHE&gt;</code></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">&lt;max_rset_rows&gt;</code> - 每进程查询缓存中行中任何结果集的最大大小。等效于<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">OCI_RESULT_CACHE_MAX_RSET_ROWS</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;max_rset_size&gt;</code> - 最大客户端结果缓存大小。将大小设置为32,768字节（32千字节（KB））或更大。等效于<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">OCI_RESULT_CACHE_MAX_RSET_SIZE</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;max_size&gt;</code> - 每进程查询缓存的最大大小（以字节为单位）。在客户端中指定小于32,768的大小会禁用客户端结果缓存功能。等效于<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">OCI_RESULT_CACHE_MAX_SIZE</code> 。
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">&lt;result_cache&gt; &lt;max_rset_rows&gt; 10 &lt;/ max_rset_rows&gt; &lt;max_rset_size&gt; 65535 &lt;/ max_rset_size&gt; &lt;max_size&gt; 65535 &lt;/ max_size&gt; &lt;/ result_cache&gt;</pre><p>在<code class="codeph">sqlnet.ora</code>和<code class="codeph">oraaccess.xml</code>文件中同时设置等效参数时， <code class="codeph">oraaccess.xml</code>文件设置优先于相应的<code class="codeph">sqlnet.ora</code>文件设置。
                           </p>
                           <p>有关等效OCI参数设置的列表，请参阅<a href="build-and-configure-oci-applications.html#GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8__CEGHBFHB" title="此表有3列，并列出了oraaccess.xml和sqlnet.ora配置文件的等效OCI参数设置。第1列是OCI参数组，第2列是其等效的oraaccess.xml参数设置，第3列是其等效的sqlnet.ora参数设置。">表3-2</a> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;DIAG&gt;</code></p>
                           <p>您可以指定以下元素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">&lt;adr_enabled&gt;</code> - 启用或禁用可诊断性。相当于<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">DIAG_ADR_ENABLED</code> 。值：true或false。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;dde_enabled&gt;</code> - 启用或禁用DDE。值：true或false。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;adr_base&gt;</code> - 设置ADR基目录，该目录是系统相关的目录路径字符串，用于指定要在当前ADRCI会话中使用的ADR基址的位置。等效于<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">ADR_BASE</code> 。值：ADR基目录的目录路径。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;sighandler_enabled&gt;</code> - 启用或禁用OCI信号处理程序。值：true或false。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;restricted&gt;</code> - 启用或禁用完整转储文件。Oracle数据库客户端包含用于诊断问题的高级功能，包括在检测到重要错误时转储诊断信息的功能。默认情况下，这些转储仅限于一小部分可用信息，以确保不转储应用程序数据。但是，在许多安装中，可以配置转储文件的安全位置，以确保此类日志的隐私。在这种情况下，建议打开完全转储;这可以大大加快问题的解决速度。可以通过指定false值来启用完全转储。值：true或false。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;trace_events&gt;</code> - 表示跟踪事件编号和要生效的跟踪级别。目前仅支持事件10883。可用级别为5和10。
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">&lt;diag&gt; &lt;adr_enabled&gt; false &lt;/ adr_enabled&gt; &lt;dde_enabled&gt; false &lt;/ dde_enabled&gt; &lt;adr_base&gt; / foo / adr &lt;/ adr_base&gt; &lt;sighandler_enabled&gt; false &lt;/ sighandler_enabled&gt; &lt;restricted&gt; true &lt;/ restricted&gt; &lt;trace_events&gt; &lt; trace_event&gt; &lt;number&gt; 10883 &lt;/ number&gt; &lt;level&gt; 5 &lt;/ level&gt; &lt;/ trace_event&gt; &lt;/ trace_events&gt; &lt;/ diag&gt;</pre><p>在<code class="codeph">sqlnet.ora</code>和<code class="codeph">oraaccess.xml</code>文件中同时设置等效参数时， <code class="codeph">oraaccess.xml</code>文件设置优先于相应的<code class="codeph">sqlnet.ora</code>文件设置。
                           </p>
                           <p>有关等效OCI参数设置的列表，请参阅<a href="build-and-configure-oci-applications.html#GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8__CEGHBFHB" title="此表有3列，并列出了oraaccess.xml和sqlnet.ora配置文件的等效OCI参数设置。第1列是OCI参数组，第2列是其等效的oraaccess.xml参数设置，第3列是其等效的sqlnet.ora参数设置。">表3-2</a> 。
                           </p>
                           <div class="tblformal" id="GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8__CEGHBFHB">
                              <p class="titleintable">表3-2 oraaccess.xml和sqlnet.ora中的等效OCI参数设置</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="oraaccess.xml和sqlnet.ora中的等效OCI参数设置" width="90%" border="1" summary="This table has 3 columns and lists the equivalent OCI parameter settings for the oraaccess.xml and sqlnet.ora configuration files. Column 1 is the OCI parameter group, column 2 is its equivalent oraaccess.xml parameter setting , and column 3 is its equivalent sqlnet.ora parameter setting. " frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="25%" id="d20286e3824">参数组</th>
                                       <th align="left" valign="bottom" width="25%" id="d20286e3827">oraaccess.xml参数</th>
                                       <th align="left" valign="bottom" width="50%" id="d20286e3830">sqlnet.ora参数</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d20286e3835" headers="d20286e3824 ">
                                          <p>OCI客户端结果缓存</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d20286e3835 d20286e3827 ">
                                          <p><code class="codeph">&lt;max_rset_rows&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d20286e3835 d20286e3830 ">
                                          <p><code class="codeph">OCI_RESULT_CACHE_MAX_RSET_ROWS</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d20286e3847" headers="d20286e3824 ">
                                          <p>OCI客户端结果缓存</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d20286e3847 d20286e3827 ">
                                          <p><code class="codeph">&lt;max_rset_size&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d20286e3847 d20286e3830 ">
                                          <p><code class="codeph">OCI_RESULT_CACHE_MAX_RSET_SIZE</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d20286e3859" headers="d20286e3824 ">
                                          <p>OCI客户端结果缓存</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d20286e3859 d20286e3827 ">
                                          <p><code class="codeph">&lt;MAX_SIZE&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d20286e3859 d20286e3830 ">
                                          <p><code class="codeph">OCI_RESULT_CACHE_MAX_SIZE</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d20286e3871" headers="d20286e3824 ">
                                          <p>OCI故障诊断</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d20286e3871 d20286e3827 ">
                                          <p><code class="codeph">&lt;adr_enabled&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d20286e3871 d20286e3830 ">
                                          <p><code class="codeph">DIAG_ADR_ENABLED</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d20286e3883" headers="d20286e3824 ">
                                          <p>OCI故障诊断</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d20286e3883 d20286e3827 ">
                                          <p><code class="codeph">&lt;dde_enabled&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d20286e3883 d20286e3830 ">
                                          <p><code class="codeph">DIAG_DDE_ENABLED</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d20286e3895" headers="d20286e3824 ">
                                          <p>OCI故障诊断</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d20286e3895 d20286e3827 ">
                                          <p><code class="codeph">&lt;adr_base&gt;</code></p>
                                       </td>
                                       <td align="left" valign="top" width="50%" headers="d20286e3895 d20286e3830 ">
                                          <p><code class="codeph">ADR_BASE</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-4B68F0BB-16FA-40C6-BA13-CFD9A2B110A8__GUID-AE7680E8-9D18-484B-B6FE-0892A5F3709E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../adfns/performance-and-scalability.html#ADFNS213" target="_blank"><span><cite>“Oracle数据库开发指南”</cite></span></a> ，了解有关客户端结果缓存和客户端配置文件参数的部署时间设置</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">sqlnet.ora</code>文件中ADR诊断参数的详细信息，请参阅<a href="../netrf/index.html" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0" name="GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0"></a><h4 id="LNOCI-GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0" class="sect4"><span class="enumeration_section">3.6.5</span>关于指定连接参数的默认值</h4>
                  <div>
                     <p>描述可以为跨连接共享的连接参数设置的默认值。</p>
                     <p>您可以指定跨连接共享的以下连接参数：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">&lt;prefetch&gt;</code> - 指定<code class="codeph">SELECT</code>语句的预取行数。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;prefetch&gt; &lt;rows&gt; 100 &lt;/ rows&gt; &lt;/ prefetch&gt;</pre><p>适当地设置此参数有助于减少到数据库的往返，从而提高应用程序性能。</p>
                           <p>请注意，这只会覆盖<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>参数（无论是否由应用程序明确指定）。如果应用程序明确指定了<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code> ，则将通过使用两个约束来确定实际的预取行计数。无法在<code class="codeph">oraaccess.xml</code>文件中指定<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>约束等效约束。
                           </p>
                           <p>另请注意，如果<code class="codeph">SELECT</code>语句获取特定数据类型的列，则仍可能禁用OCI预取。有关更多详细信息，请参阅<a href="using-sql_statements-in-oci.html#GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6" title="如果OCI应用程序已处理查询，则通常需要在语句完成执行后使用OCIStmtFetch2（）获取结果。">关于获取结果</a>以获取有关OCI预取限制的信息。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;statement_cache&gt;</code> - 指定每个会话可以缓存的OCI语句句柄数。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;statement_cache&gt; &lt;size&gt; 100 &lt;/ size&gt; &lt;/ statement_cache&gt;</pre><p>缓存语句句柄通过减少客户端和服务器端CPU消耗和网络流量来提高重复执行性能。</p>
                           <p>请注意，要使此参数生效，必须将应用程序编程为使用<code class="codeph">OCIStatementPrepare2()</code>和<code class="codeph">OCIStatementRelease()</code>调用（而不是旧的<code class="codeph">OCISatementPrepare()</code>和<code class="codeph">OCIHandleFree()</code>等效项来获取和处理语句句柄。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;auto_tune&gt;</code> - 用于启用OCI自动调整。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;auto_tune&gt; &lt;enable&gt; true &lt;/ enable&gt; &lt;ram_threshold&gt; 0.1 &lt;/ ram_threshold&gt; &lt;！ -  percentage  - &gt; &lt;memory target&gt; 2M &lt;/ memory_target&gt; &lt;/ auto_tune&gt;</pre><p>启用自动调整可以帮助OCI根据指定的内存约束自动调整语句高速缓存大小。这有助于根据运行时应用程序特征和可用内存资源动态地将语句高速缓存大小调整为适当的值。</p>
                           <p>请注意，对于自动调整OCI语句高速缓存，应用程序必须编程为使用<code class="codeph">OCIStatementPrepare2()</code>和<code class="codeph">OCIStatementRelease()</code>调用（而不是旧的<code class="codeph">OCISatementPrepare()</code>和<code class="codeph">OCIHandleFree()</code>等效项来获取和处理语句句柄。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">&lt;fan_subscription_failure_action&gt;</code> - 用于确定OCI如何响应订阅FAN通知的失败。
                           </p>
                           <p><code class="codeph">trace</code>值记录任何未能在跟踪文件中订阅FAN通知（如果启用了FAN）并且OCI继续忽略失败。如果尝试订阅FAN通知失败，则<code class="codeph">error</code>值会使OCI返回错误。
                           </p><pre class="oac_no_warn" dir="ltr">&lt;fan&gt; &lt;！ - 只有可能的值是“trace”和“error” - &gt; &lt;subscription_failure_action&gt; trace &lt;/ subscription_failure_action&gt; &lt;/ fan&gt;</pre></li>
                        <li>
                           <p><code class="codeph">&lt;ons&gt;</code> - 设置Oracle Notification Service（ONS）参数。
                           </p>
                           <p>您可以指定以下连接参数：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">&lt;subscription_wait_timeout&gt;</code> - 客户端等待其订阅ONS服务器的时间长度（以秒为单位）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;auto_config&gt;</code> -  true或false。如果为true，则本节中指定的配置将扩充客户端从数据库接收的自动配置信息。如果为false，它将覆盖相同的值。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;thread_stack_size&gt;</code> - 事件通知线程堆栈的大小（以字节为单位）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;debug&gt;</code> -  true或false。调试模式是打开（true）还是关闭（false）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;wallet_location&gt;</code> - 包含安全ONS订阅的自动登录钱包文件的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;servers&gt;</code> - 具有端口和连接分配的主机列表。
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">&lt;ons&gt; &lt;！ -  values或以秒为单位 - &gt; &lt;subscription_wait_timeout&gt; 5 &lt;/ subscription_wait_timeout&gt; &lt;auto_config&gt; true &lt;/ auto_config&gt; &lt;！ -  boolean  - &gt; &lt;threadstacksize&gt; 100k &lt;/ threadstacksize&gt; &lt;debug&gt; true &lt;/ debug&gt; &lt;wallet_location&gt; / etc / oracle / wallets / &lt;/ wallet_location&gt; &lt;servers&gt; &lt;address_list&gt; &lt;name&gt; pacific &lt;/ name&gt; &lt;max_connections&gt; 3 &lt;\ max_connections&gt; &lt;hosts&gt; 10.228.215.121：25293,10.228 .215.122：25293 &lt;/ hosts&gt; &lt;/ address_list&gt; &lt;address_list&gt; &lt;name&gt; Europe &lt;/ name&gt; &lt;max_connections&gt; 3 &lt;\ max_connections&gt; &lt;hosts&gt; myhost1.mydomain.com:25273,myhost2.mydomain.com:25298, myhost3.mydomain.com:30004 &lt;/ hosts&gt; &lt;/ address_list&gt; &lt;/ servers&gt; &lt;/ ons&gt;</pre></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0__GUID-50D0D8A4-F91E-493E-865E-69ED39355E31">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performance-topics.html#GUID-12F398F1-FEB6-490F-B7A3-7BAE48DCA8D4" title="本节指定自动调整参数。">&lt;auto_tune&gt;</a></p>
                           </li>
                           <li>
                              <p><a href="performance-topics.html#GUID-93048857-C168-4BA9-A126-CE06DA8F2D33" title="此参数是可选的。">&lt;ram_threshold&gt;</a></p>
                           </li>
                           <li>
                              <p><a href="performance-topics.html#GUID-F624661F-FAC7-41F7-8F41-F2451EC2B47F" title="此参数是可选的。">&lt;MEMORY_TARGET&gt;</a></p>
                           </li>
                           <li>
                              <p>有关ONS配置参数的信息，请参阅<a href="../jjucp/fast-connection-failover.html#JJUCP8275" target="_blank"><span><cite>“Oracle通用连接池开发人员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528" name="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528"></a><h4 id="LNOCI-GUID-D436C5B8-0B9A-4E21-95D2-29D984186528" class="sect4"><span class="enumeration_section">3.6.6</span>在连接字符串级别覆盖连接参数</h4>
                  <div>
                     <p>使用<code class="codeph">oraaccess.xml</code>文件还允许您在连接字符串级别覆盖同一组特定于连接的参数。
                     </p>
                     <div class="section">
                        <p>这允许根据各个应用程序的要求覆盖那些特定于连接的参数。</p>
                        <p>使用<code class="codeph">&lt;config_descriptions&gt;</code>标记，可以指定一组与配置别名关联的特定于连接的参数（ <code class="codeph">&lt;parameters&gt;</code> ）（ <code class="codeph">&lt;config_alias&gt;</code> ，它创建一组命名的连接特定参数）。此后，使用<code class="codeph">&lt;connection_configs&gt;</code>标记，可以将一个或多个连接字符串（使用<code class="codeph">&lt;connection-string&gt;</code>标记指定）与<code class="codeph">&lt;config_alias&gt;</code> 。这允许一个间接级别，允许多个<code class="codeph">&lt;connection_string&gt;</code>元素共享同一组<code class="codeph">&lt;parameters&gt;</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528__GUID-D4304ACE-97EE-4F7F-B5F2-F99F2C1D2C00">例1</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此示例显示了一个非常简单的<code class="codeph">oraaccess.xml</code>文件配置，该配置突出显示了适用于所有连接的全局和连接参数的默认值。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“ASCII”？&gt; &lt;！ - 这是oraaccess.xml的示例。这显示了跨所有连接的全局和连接参数的默认值。- &gt; &lt;oraaccess xmlns =“http://xmlns.oracle.com/oci/oraaccess”xmlns：oci =“http://xmlns.oracle.com/oci/oraaccess”schemaLocation =“http：// xmlns。 oracle.com/oci/oraaccess http://xmlns.oracle.com/oci/oraaccess.xsd“&gt; &lt;default_parameters&gt; &lt;prefetch&gt; &lt;rows&gt; 50 &lt;/ rows&gt; &lt;/ prefetch&gt; &lt;statement_cache&gt; &lt;size&gt; 100 &lt; / size&gt; &lt;/ statement_cache&gt; &lt;result_cache&gt; &lt;max_rset_rows&gt; 100 &lt;/ max_rset_rows&gt; &lt;max_rset_size&gt; 10K &lt;/ max_rset_size&gt; &lt;max_size&gt; 64M &lt;/ max_size&gt; &lt;/ result_cache&gt; &lt;/ default_parameters&gt; &lt;/ oraaccess&gt;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528__GUID-88B8EA66-7A63-4503-855E-00AAF2432321">例2</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此示例显示在连接级别覆盖的连接参数。</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“ASCII”？&gt; &lt;！ - 这是oraaccess.xml的示例。这突出显示了在连接级别覆盖的一些连接参数 - &gt; &lt;oraaccess xmlns =“http://xmlns.oracle.com/oci/oraaccess”xmlns：oci =“http://xmlns.oracle.com/oci/ oraaccess“schemaLocation =”http://xmlns.oracle.com/oci/oraaccess http://xmlns.oracle.com/oci/oraaccess.xsd“&gt; &lt;default_parameters&gt; &lt;prefetch&gt; &lt;rows&gt; 50 &lt;/ rows&gt; &lt; / prefetch&gt; &lt;statement_cache&gt; &lt;size&gt; 100 &lt;/ size&gt; &lt;/ statement_cache&gt; &lt;auto_tune&gt; &lt;enable&gt; true &lt;/ enable&gt; &lt;ram_threshold&gt; 2.67 &lt;/ ram_threshold&gt; &lt;memory_target&gt; 204800 &lt;/ memory_target&gt; &lt;/ auto_tune&gt; &lt; result_cache&gt; &lt;max_rset_rows&gt; 100 &lt;/ max_rset_rows&gt; &lt;max_rset_size&gt; 10K &lt;/ max_rset_size&gt; &lt;max_size&gt; 64M &lt;/ max_size&gt; &lt;/ result_cache&gt; &lt;/ default_parameters&gt; &lt;！ - 创建配置描述，这些描述是与之关联的连接参数组一个config_alias。- &gt; &lt;config_descriptions&gt; &lt;config_description&gt; &lt;config_alias&gt; bar &lt;/ config_alias&gt; &lt;parameters&gt; &lt;prefetch&gt; &lt;rows&gt; 20 &lt;/ rows&gt; &lt;/ prefetch&gt; &lt;/ parameters&gt; &lt;/ config_description&gt; &lt;config_description&gt; &lt;config_alias&gt; foo &lt;/ config_alias&gt; &lt;parameters&gt; &lt;statement_cache&gt; &lt;size&gt; 15 &lt;/ size&gt; &lt;/ statement_cache&gt; &lt;/ parameters&gt; &lt;/ config_description&gt; &lt;/ config_descriptions&gt; &lt;！ - 现在使用config_alias映射应用程序使用的连接字符串。- &gt; &lt;connection_configs&gt; &lt;connection_config&gt; &lt;connection_string&gt; hr_db &lt;/ connection_string&gt; &lt;config_alias&gt; foo &lt;/ config_alias&gt; &lt;/ connection_config&gt; &lt;connection_config&gt; &lt;connection_string&gt; finance_db &lt;/ connection_string&gt; &lt;config_alias&gt; bar &lt;/ config_alias&gt; &lt;/ connection_config&gt; &lt;/ connection_configs&gt; &lt;/ oraaccess&gt;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528__GUID-A8DDB40D-832A-49BE-8B0F-D1ED765C88FD">例3</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此示例突出显示FAN通知的设置。</p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“ASCII”？&gt; &lt;！ - 以下是oraaccess.xml的示例，用于设置FAN通知。- &gt; &lt;oraaccess xmlns =“http://xmlns.oracle.com/oci/oraaccess”xmlns：oci =“http://xmlns.oracle.com/oci/oraaccess”schemaLocation =“http：// xmlns。 oracle.com/oci/oraaccess http://xmlns.oracle.com/oci/oraaccess.xsd“&gt; &lt;default_parameters&gt; &lt;fan&gt; &lt;！ - 只有可能的值是”trace“或”error“ - &gt; &lt;subscription_failure_action &gt; error &lt;/ subscription_failure_action&gt; &lt;/ fan&gt; &lt;ons&gt; &lt;subscription_wait_timeout&gt; 5 &lt;/ subscription_wait_timeout&gt; &lt;auto_config&gt; true &lt;/ auto_config&gt; &lt;/ ons&gt; &lt;events&gt; true &lt;/ events&gt; &lt;/ default_parameters&gt; &lt;/ oraaccess&gt;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528__GUID-7433CAC9-66D0-4ADD-BCBB-5F3F7D95B48B">例4</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此示例突出显示了具有手动ONS设置的高级<code class="codeph">oraaccess.xml</code>文件配置用法。应该很少使用手动ONS设置。
                        </p><pre class="oac_no_warn" dir="ltr">&lt;？xml version =“1.0”encoding =“ASCII”？&gt; &lt;！ - 以下是oraaccess.xml的示例，其中突出显示了手动ONS设置。- &gt; &lt;oraaccess xmlns =“http://xmlns.oracle.com/oci/oraaccess”xmlns：oci =“http://xmlns.oracle.com/oci/oraaccess”schemaLocation =“http：// xmlns。 oracle.com/oci/oraaccess http://xmlns.oracle.com/oci/oraaccess.xsd“&gt; &lt;default_parameters&gt; &lt;fan&gt; &lt;！ - 只有可能的值是”trace“或”error“ - &gt; &lt;subscription_failure_action &gt; error &lt;/ subscription_failure_action&gt; &lt;/ fan&gt; &lt;ons&gt; &lt;subscription_wait_timeout&gt; 5 &lt;/ subscription_wait_timeout&gt; &lt;auto_config&gt; true &lt;/ auto_config&gt; &lt;！ - 这提供了ONS的手动配置。请注意，不需要使用此功能，因为auto_config通常可以发现此信息。 - &gt; &lt;servers&gt; &lt;address_list&gt; &lt;name&gt; pacific &lt;/ name&gt; &lt;max_connections&gt; 3 &lt;/ max_connections&gt; &lt;hosts&gt; 10.228.215.121:25293,10.228.215.122:25293 &lt;/ hosts&gt; &lt;/ address_list&gt; &lt;address_list&gt; &lt;name&gt; Europe &lt;/ name&gt; &lt;max_connections&gt; 3 &lt;/ max_connections&gt; &lt;hosts&gt; myhost1.mydomain.com:25273,myhost2.mydomain.com:25298,myhost3.mydomain.com:30004 &lt;/ hosts&gt; &lt;/ address_list&gt; &lt;/ servers&gt; &lt;/ ons&gt; &lt;events&gt; true &lt;/ events&gt; &lt;/ default_parameters&gt; &lt;/ oraaccess&gt;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-D436C5B8-0B9A-4E21-95D2-29D984186528__GUID-F506AE50-2ADE-4582-8CC8-7289925F3AD8">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="build-and-configure-oci-applications.html#GUID-6C76054A-0E0A-4783-B00D-9B65C80C24B0" title="描述可以为跨连接共享的连接参数设置的默认值。">关于指定连接参数的默认值</a>有关在连接字符串级别覆盖同一组特定于连接的参数</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-C171A50B-BB76-4A2F-9E9D-F96CE23BFAF7" name="GUID-C171A50B-BB76-4A2F-9E9D-F96CE23BFAF7"></a><h4 id="LNOCI-GUID-C171A50B-BB76-4A2F-9E9D-F96CE23BFAF7" class="sect4"><span class="enumeration_section">3.6.7</span>关于oraaccess.xml中的OCI会话池配置</h4>
                  <div>
                     <p>从Oracle Database 18c版本18.1开始，可以使用oraaccess.xml客户端配置文件设置OCI会话池配置。</p>
                     <div class="p">通过在<code class="codeph">oraaccess.xml</code>配置文件中指定以下参数集来配置OCI会话池。可以在默认参数部分或配置描述部分中指定这些参数。如果在默认参数部分中指定，则它适用于应用程序中的所有会话池。这些设置可以使任何OCI会话池受益，从而允许覆盖OCI会话池设置。
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">&lt;session_pool&gt;</code> - 设置会话池参数。
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">&lt;enable&gt;</code> - 将此设置为true可使会话池配置生效。这是必需参数，这意味着，如果配置了<code class="codeph">&lt;session_pool&gt;</code>参数，则还必须配置<code class="codeph">&lt;enable&gt;</code>参数。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;min_size&gt;</code> - 池中的最小连接数。默认值为0。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;max_size&gt;</code> - 池中的最大连接数。这是必需参数，这意味着，如果配置了<code class="codeph">&lt;session_pool&gt;</code>参数，则还必须配置<code class="codeph">&lt;max_size&gt;</code>参数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;increment&gt;</code> - 池扩展时池中连接数的增加量。默认值为1。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;inactivity_timeout&gt;</code> - 连接在池中保持空闲的最长时间（以秒为单位），之后终止。默认值为0，这意味着连接在池中保持空闲没有限制。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;max_use_session&gt;</code> - 可以获取和释放连接到池的最大次数。默认值为0，表示连接和释放到池没有限制。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;max_life_time_session&gt;</code> - 在池中创建连接后，连接将保持的时间（以秒为单位）。默认值为0，这表示在池中创建连接后没有限制。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="p">使用<code class="codeph">oraaccess.xml</code>文件可以为每个所需的连接服务配置OCI会话池。以下示例显示了与其各自的配置别名<code class="codeph">sales_config</code>和<code class="codeph">hr_config</code>关联的两组连接参数，其中应用程序使用的每个连接字符串都使用其各自的配置别名进行映射，从而提供两个OCI会话池。<pre class="pre codeblock"><code>&lt;oraaccess xmlns =“http://xmlns.oracle.com/oci/oraaccess”xmlns：oci =“http://xmlns.oracle.com/oci/oraaccess”schemaLocation =“http://xmlns.oracle.com / oci / oraaccess http://xmlns.oracle.com/oci/oraaccess.xsd“&gt; &lt;default_parameters&gt; &lt;/ default_parameters&gt; &lt;！ - 创建配置描述，这些描述是与config_alias关联的连接参数组。- &gt; &lt;config_descriptions&gt; &lt;config_description&gt; &lt;config_alias&gt; sales_config &lt;/ config_alias&gt; &lt;parameters&gt; &lt;session_pool&gt; &lt;enable&gt; true &lt;/ enable&gt; &lt;min_size&gt; 10 &lt;/ min_size&gt; &lt;max_size&gt; 100 &lt;/ max_size&gt; &lt;increment&gt; 5 &lt;/ increment&gt; &lt;/ session_pool&gt; &lt;/ parameters&gt; &lt;/ config_description&gt; &lt;config_description&gt; &lt;config_alias&gt; hr_config &lt;/ config_alias&gt; &lt;parameters&gt; &lt;session_pool&gt; &lt;enable&gt; true &lt;/ enable&gt; &lt;max_size&gt; 10 &lt;/ max_size&gt; &lt;/ session_pool&gt; &lt;/ parameters&gt; &lt;/ config_description&gt; &lt;/ config_descriptions&gt; &lt;！ - 现在使用config_alias映射应用程序使用的连接字符串。- &gt; &lt;connection_configs&gt; &lt;connection_config&gt; &lt;connection_string&gt; sales.us.acme.com &lt;/ connection_string&gt; &lt;config_alias&gt; sales_config &lt;/ config_alias&gt; &lt;/ connection_config&gt; &lt;connection_config&gt; &lt;connection_string&gt; hr.us.acme.com &lt;/ connection_string&gt; &lt;config_alias&gt; hr_config &lt;/ config_alias&gt; &lt;/ connection_config&gt; &lt;/ connection_configs&gt; &lt;/ oraaccess&gt;</code></pre></div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-B8A13EE4-0D42-4856-A4F4-FE438650D691" name="GUID-B8A13EE4-0D42-4856-A4F4-FE438650D691"></a><h4 id="LNOCI-GUID-B8A13EE4-0D42-4856-A4F4-FE438650D691" class="sect4"><span class="enumeration_section">3.6.8</span>文件（oraaccess.xml）属性</h4>
                  <div>
                     <p>为简单起见，列出了有关<code class="codeph">oraaccess.xml</code>文件语法的一些高级规则。
                     </p>
                     <p><code class="codeph">oraaccess.xsd</code>文件中指定的XML模式是oraaccess语法的最终形式参考：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该文件的内容区分大小写，所有元素（标签，参数名称）均为小写。</p>
                        </li>
                        <li>
                           <p>参数（节点）之间允许注释;例如，评论“&lt;！ -  comments  - &gt;”。</p>
                        </li>
                        <li>
                           <p>有关参数顺序的语法，请参阅XML Schema： <code class="codeph">oraaccess.xsd</code>文件（有关此列表中稍后的<code class="codeph">oraaccess.xsd</code>文件的信息）。
                           </p>
                        </li>
                        <li>
                           <p>对于内存大小，有效值和格式为100,100k，100K，1000M和1121m。这意味着只允许后缀'M'，'m'，'K'，'k'或无后缀。'K'或'k'表示千字节，'M'或'm'表示兆字节。没有后缀表示大小以字节为单位。</p>
                        </li>
                        <li>
                           <p>&lt;ram_threshold&gt;应为0到100之间的十进制数，表示百分比值。</p>
                        </li>
                        <li>
                           <p>如果预期数字，则只允许正无符号整数;没有迹象是允许的。有效数字用法的示例是<code class="codeph">&lt;statement_cache&gt; &lt;size&gt;100&lt;/size&gt; &lt;/statement_cache&gt;</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>配置别名（ <code class="codeph">&lt;config_alias&gt;foo&lt;/config_alias&gt;</code> ）不区分大小写</p>
                        </li>
                        <li>
                           <p>预计不会引用字符串参数（例如<code class="codeph">&lt;config_alias&gt;</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>这些规则都封装在模式定义中。</p>
                        </li>
                        <li>
                           <p>如果为OCI提供了无效的<code class="codeph">oraaccess.xml</code>文件，OCI将报告错误。
                           </p>
                        </li>
                        <li>
                           <p>在部署<code class="codeph">oraaccess.xml</code>文件之前，Oracle建议您使用Oracle提供的XML模式文件对其进行验证： <code class="codeph">oraaccess.xsd</code> 。模式文件安装在常规客户端中的<code class="codeph">ORACLE_HOME/rdbms/admin</code> ，并在<code class="codeph">instantclient_12_2/sdk/admin</code>在即时客户端SDK中。客户可以在修改<code class="codeph">oraaccess.xml</code>文件后使用自己喜欢的XML验证工具来执行验证。
                           </p>
                        </li>
                        <li>
                           <p>示例<code class="codeph">oraaccess.xml</code>文件可以在常规客户端的<code class="codeph">ORACLE_HOME/rdbms/demo</code>目录中找到，也可以在<code class="codeph">oraaccess.xml</code> Client中的<code class="codeph">instantclient_12_2/sdk/demo</code>中找到。这些文件中的参数仅用于演示目的，在部署之前应根据应用程序的要求进行修改和测试。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-1B41866A-7D99-4335-8E73-E0BCF54CB532" name="GUID-1B41866A-7D99-4335-8E73-E0BCF54CB532"></a><h3 id="LNOCI-GUID-1B41866A-7D99-4335-8E73-E0BCF54CB532" class="sect3"><span class="enumeration_section">3.7</span>关于兼容性和升级</h3>
               <div>
                  <p>以下部分讨论有关OCI客户端和服务器的不同版本之间的兼容性，OCI库例程中的更改以及将应用程序从版本7. <span class="italic">x</span> OCI升级到当前版本的OCI的问题：</p>
                  <div class="p">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-AB5389F7-6DD7-4959-9F23-0E626FE77FDB" title="作为一般指南，Oracle客户端和服务器版本与多个版本的交叉版本兼容。">Oracle客户端和服务器交叉版本兼容性</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-44C7F521-5578-498E-AAC4-713F3E5C7C94" title="以下是重新发布新版本的规则。">静态链接和动态链接的应用程序的版本兼容性</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-D849EF63-969E-44AE-A6B1-2FC3B669406D" title="自OCI发布7以来，OCI已经有很多功能得到了显着改进。">关于升级现有的OCI Release 7应用程序</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3" title="OCI的8.0版引入了一套全新的功能，这些功能在7.3版本中不可用。">过时的OCI例程</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-02E4847A-28D8-410C-B40D-17E60CDE29D0" title="当前版本不支持以前版本的OCI中提供的一些OCI例程。">不支持OCI例程</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AB5389F7-6DD7-4959-9F23-0E626FE77FDB" name="GUID-AB5389F7-6DD7-4959-9F23-0E626FE77FDB"></a><h4 id="LNOCI-GUID-AB5389F7-6DD7-4959-9F23-0E626FE77FDB" class="sect4"><span class="enumeration_section">3.7.1</span> Oracle客户端和服务器交叉版本兼容性</h4>
                  <div>
                     <p>作为一般指南，Oracle客户端和服务器版本与多个版本的交叉版本兼容。</p>
                     <p>这意味着您可以连接到某些较旧版本和较新版本的数据库，并且不必始终同时升级客户端和服务器。</p>
                     <p>但是，某些产品或实用程序可能会对特定于产品或实用程序的受支持组合施加额外限制。</p>
                     <div class="infoboxnotealso" id="GUID-AB5389F7-6DD7-4959-9F23-0E626FE77FDB__GUID-5B5B1074-0608-4B6E-9AA5-53C600E5D6F7">
                        <p class="notep1">也可以看看：</p>
                        <p>有关不同Oracle版本的客户端和服务器互操作性支持矩阵的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=mos_doc_207303_1" target="_blank">参阅</a> My Oracle Support <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=mos_doc_207303_1" target="_blank">Document 207303.1</a> 。
                        </p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-44C7F521-5578-498E-AAC4-713F3E5C7C94" name="GUID-44C7F521-5578-498E-AAC4-713F3E5C7C94"></a><h4 id="LNOCI-GUID-44C7F521-5578-498E-AAC4-713F3E5C7C94" class="sect4"><span class="enumeration_section">3.7.2</span>静态链接和动态链接应用程序的版本兼容性</h4>
                  <div>
                     <p>以下是重新发布新版本的规则。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>静态链接的OCI应用程序：</p>
                           <p>必须为主要版本和次要版本重新链接静态链接的OCI应用程序，因为静态链接的Oracle数据库客户端库代码可能与升级的Oracle主目录中的错误消息不兼容。例如，如果使用其他参数更新了错误消息，则它将不再与静态链接代码兼容。</p>
                        </li>
                        <li>
                           <p>动态链接的OCI应用程序：</p>
                           <p>无需重新链接Oracle Database <span class="italic">10g</span>及更高版本中的动态链接OCI应用程序。也就是说，Oracle数据库客户端动态库与以前版本的库向上兼容。Oracle Universal Installer为解析为当前版本的库的先前版本创建符号链接。因此，不需要重新链接与先前版本的Oracle数据库客户端动态库动态链接的应用程序，以便与当前版本的Oracle数据库客户端库一起运行。
                           </p>
                           <div class="infoboxnote" id="GUID-44C7F521-5578-498E-AAC4-713F3E5C7C94__GUID-FDDA2AAE-DA81-46B6-AB20-6AE703515D55">
                              <p class="notep1">注意：</p>
                              <p>如果应用程序与运行时库搜索路径（例如Linux上的<code class="codeph">-rpath</code> ）链接，则应用程序仍可以与链接的Oracle数据库客户端库版本一起运行。要使用当前版本的Oracle数据库客户端库运行，必须重新链接。
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-44C7F521-5578-498E-AAC4-713F3E5C7C94__GUID-A5E9D897-B4F0-4688-A287-01E162AFE35E">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../upgrd/compatibility-interoperability-between-database-releases.html#UPGRD005" target="_blank"><span><cite>“Oracle数据库升级指南”</cite></span></a> ，了解有关兼容性和升级</p>
                                 </li>
                                 <li>
                                    <p>当前支持的服务器版本可在My Oracle Support <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=mos_doc_207303_1" target="_blank">Document 207303.1中找到</a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D849EF63-969E-44AE-A6B1-2FC3B669406D" name="GUID-D849EF63-969E-44AE-A6B1-2FC3B669406D"></a><h4 id="LNOCI-GUID-D849EF63-969E-44AE-A6B1-2FC3B669406D" class="sect4"><span class="enumeration_section">3.7.3</span>关于升级现有的OCI第7版应用程序</h4>
                  <div>
                     <p>自OCI发布7以来，OCI已经有很多功能得到了显着改进。</p>
                     <p>使用OCI版本7.3 API的应用程序在当前版本的Oracle数据库中保持不变。它们确实需要与当前的客户端库链接。但是，OCI版本7.3 API已被弃用，此选项在将来的Oracle版本中将不可用。</p>
                     <p>OCI版本7和此版本的OCI调用可以在同一个应用程序和同一事务中混合，前提是它们不在同一语句执行中混合。因此，在迁移现有OCI版本7应用程序时，您有以下两种选择：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>升级到当前的OCI客户端，但不修改应用程序：如果选择从Oracle版本7 OCI客户端升级到当前版本OCI客户端，只需要链接OCI库的新版本， <span class="italic">不需要</span>重新编译应用程序。重新链接的Oracle数据库版本7 OCI应用程序与当前的Oracle数据库保持不变。此选项已弃用，在将来的Oracle版本中将不可用。
                           </p>
                        </li>
                        <li>
                           <p>升级到当前的OCI客户端并修改应用程序：但是，要使用当前OCI提供的性能和可伸缩性优势，您必须修改现有的应用程序以使用当前的OCI编程范例，使用当前的OCI库重建和重新链接它们，并针对当前版本的Oracle数据库运行它们。</p>
                        </li>
                     </ul>
                     <p>如果要使用当前Oracle数据库发行版的任何对象功能，则必须将客户端升级到当前版本的OCI。</p>
                     <div class="infoboxnote" id="GUID-D849EF63-969E-44AE-A6B1-2FC3B669406D__GUID-10CC6FFD-D522-415B-BA94-A0CE6DE70DA3">
                        <p class="notep1">注意：</p>
                        <p>默认情况下，使用版本7 API的应用程序将无法连接到Oracle Database 12 <span class="italic">c</span> 。愿意连接到Oracle Database 12 <span class="italic">c的</span>此类应用程序必须将<code class="codeph">sqlnet.allowed_logon_version</code>设置为<code class="codeph">8</code> 。
                        </p>
                        <p>在Oracle Database <span class="italic">12c</span>第2版（12.2）中，Oracle数据库支持的标识符长度已从30个字节增加到128个字节。通过此数据库更改，可能需要更改使用不推荐使用的V7 API <code class="codeph">odessp()</code> OCI应用程序。在参数<code class="codeph">argnam</code> <code class="codeph">odessp()</code>中，应用程序需要传递二维数组，该数组可以容纳长度为128字节的标识符，该标识符之前是30字节。
                        </p>
                        <p>在Oracle Database 12 <span class="italic">c</span>第2版（12.2）中，可能还需要使用长标识符更改使用UPI API <code class="codeph">upidpr()</code>应用程序。在参数<code class="codeph">argument_name</code> <code class="codeph">upidpr()</code>中，应用程序需要传递二维数组，该数组可以容纳长度为128字节的标识符，该标识符之前是30字节。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-D849EF63-969E-44AE-A6B1-2FC3B669406D__GUID-1FD538DB-4F13-45E5-93D5-F749B5749FC7">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=oracle7_documentation" target="_blank">Oracle 7文档中</a>的Oracle7服务器调用接口程序员指南。
                        </p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3" name="GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3"></a><h4 id="LNOCI-GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3" class="sect4"><span class="enumeration_section">3.7.4</span>过时的OCI例程</h4>
                  <div>
                     <p>OCI的8.0版引入了一套全新的功能，这些功能在7.3版本中不可用。</p>
                     <div class="section">
                        <p>Oracle强烈建议新应用程序使用新调用来提高性能并提供增强的功能。Oracle的未来版本将不支持7.3版本。</p>
                        <p><a href="build-and-configure-oci-applications.html#GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__G435463" title="该表有2列。第1列是7.x OCI例程名称，第2列是其等效或类似的后续OCI例程名称。">表3-3</a>列出了7. <span class="italic">x</span> OCI调用及其后续等价物。有关OCI调用的更多信息，请参阅本指南中的功能说明。有关7 <span class="italic">.x</span>调用的更多信息，请参阅<span class="italic">Oracle调用接口程序员指南，版本7.3</span> 。
                        </p>
                        <div class="infoboxnote" id="GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__GUID-5C677D27-42F2-425C-8DCA-9FFDEA84B714">
                           <p class="notep1">注意：</p>
                           <p>在许多情况下，新的或现有OCI程序不直接映射到7 <span class="italic">X</span>程序，所以它几乎是不可能的简单替换一个函数调用和参数列表与另一个。在进行新的或当前的呼叫之前或之后可能需要附加的程序逻辑。有关详细信息，请参阅其余章节，特别是本指南的<a href="oci-programming-basics.html#GUID-4CFB8AF7-EF05-4E0F-847F-2D0710E552C5" title="本章介绍了使用OCI进行编程所涉及的概念和过程。">OCI编程基础知识</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__G435463">
                        <p class="titleintable">表3-3过时的OCI功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="过时的OCI功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the 7.x OCI routine name and column 2 is its equivalent or similar later OCI routine name." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d20286e6234">7.x OCI例程</th>
                                 <th align="left" valign="bottom" width="70%" id="d20286e6240">等效或类似的后期OCI例程</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6245" headers="d20286e6234 ">
                                    <p><code class="codeph">obindps（），obndra（），obndrn（），obndrv（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6245 d20286e6240 ">
                                    <p><code class="codeph">OCIBindByName()</code>或<code class="codeph">OCIBindByName2()</code> ， <code class="codeph">OCIBindByPos()</code>或<code class="codeph">OCIBindByPos2()</code> （注意：某些数据类型可能需要额外的绑定调用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6264" headers="d20286e6234 ">
                                    <p><code class="codeph">obreak（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6264 d20286e6240 ">
                                    <p><code class="codeph">OCIBreak（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6273" headers="d20286e6234 ">
                                    <p><code class="codeph">ocan（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6273 d20286e6240 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6281" headers="d20286e6234 ">
                                    <p><code class="codeph">oclose（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6281 d20286e6240 ">
                                    <p>注意：版本8中未使用游标<span class="italic">。</span> x或更高版本</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6292" headers="d20286e6234 ">
                                    <p><code class="codeph">ocof（），ocon（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6292 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtExecute()</code>具有<code class="codeph">OCI_COMMIT_ON_SUCCESS</code>模式</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6305" headers="d20286e6234 ">
                                    <p><code class="codeph">OCOM（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6305 d20286e6240 ">
                                    <p><code class="codeph">OCITransCommit（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6314" headers="d20286e6234 ">
                                    <p><code class="codeph">odefin（），odefinps（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6314 d20286e6240 ">
                                    <p><code class="codeph">OCIDefineByPos()</code>或<code class="codeph">OCIDefineByPos2()</code> （注意：某些数据类型可能需要额外的定义调用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6327" headers="d20286e6234 ">
                                    <p><code class="codeph">odescr（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6327 d20286e6240 ">
                                    <p>注意：使用OCIDescribeAny（）描述模式对象。在说明，在发行7 <span class="italic">x</span>一起使用，通常由SQL语句执行后的语句句柄调用OCIAttrGet（）来完成。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6338" headers="d20286e6234 ">
                                    <p><code class="codeph">odessp（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6338 d20286e6240 ">
                                    <p><code class="codeph">OCIDescribeAny（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6347" headers="d20286e6234 ">
                                    <p><code class="codeph">oerhms（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6347 d20286e6240 ">
                                    <p><code class="codeph">OCIErrorGet（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6356" headers="d20286e6234 ">
                                    <p><code class="codeph">oexec（），oexn（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6356 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtExecute（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6366" headers="d20286e6234 ">
                                    <p><code class="codeph">oexfet（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6366 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtExecute()</code> ， <code class="codeph">OCIStmtFetch2()</code> （注意：结果集行可以隐式预取）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6379" headers="d20286e6234 ">
                                    <p><code class="codeph">ofen()</code> ， <code class="codeph">ofetch()</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6379 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtFetch2（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6391" headers="d20286e6234 ">
                                    <p><code class="codeph">oflng（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6391 d20286e6240 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6399" headers="d20286e6234 ">
                                    <p><code class="codeph">ogetpi（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6399 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtGetPieceInfo（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6408" headers="d20286e6234 ">
                                    <p><code class="codeph">olog（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6408 d20286e6240 ">
                                    <p><code class="codeph">OCILogon()</code>或<code class="codeph">OCILogon2()</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6420" headers="d20286e6234 ">
                                    <p><code class="codeph">ologof（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6420 d20286e6240 ">
                                    <p><code class="codeph">OCILogoff（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6429" headers="d20286e6234 ">
                                    <p><code class="codeph">onbclr（），onbset（），onbtst（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6429 d20286e6240 ">
                                    <p>注意：可以通过在服务器上下文句柄或服务上下文句柄上调用<code class="codeph">OCIAttrSet()</code>或<code class="codeph">OCIAttrGet()</code>来设置或检查非阻塞模式</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6443" headers="d20286e6234 ">
                                    <p><code class="codeph">OOPEN（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6443 d20286e6240 ">
                                    <p>注意：版本8. <span class="italic">x</span>或更高版本中不使用游标</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6454" headers="d20286e6234 ">
                                    <p><code class="codeph">oopt（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6454 d20286e6240 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6462" headers="d20286e6234 ">
                                    <p><code class="codeph">oparse（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6462 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtPrepare2()</code> ;但是，它都是本地的</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6472" headers="d20286e6234 ">
                                    <p><code class="codeph">opinit（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6472 d20286e6240 ">
                                    <p><code class="codeph">OCIEnvCreate（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6482" headers="d20286e6234 ">
                                    <p><code class="codeph">orol（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6482 d20286e6240 ">
                                    <p><code class="codeph">OCITransRollback（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6491" headers="d20286e6234 ">
                                    <p><code class="codeph">osetpi（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6491 d20286e6240 ">
                                    <p><code class="codeph">OCIStmtSetPieceInfo（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6500" headers="d20286e6234 ">
                                    <p><code class="codeph">sqlld2（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6500 d20286e6240 ">
                                    <p><code class="codeph">SQLSvcCtxGet或SQLEnvGet</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6509" headers="d20286e6234 ">
                                    <p><code class="codeph">sqllda（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6509 d20286e6240 ">
                                    <p><code class="codeph">SQLSvcCtxGet或SQLEnvGet</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6518" headers="d20286e6234 ">
                                    <p><code class="codeph">ODSC（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6518 d20286e6240 ">
                                    <p>注意：请参阅前面的odescr（）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6526" headers="d20286e6234 ">
                                    <p><code class="codeph">oermsg（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6526 d20286e6240 ">
                                    <p><code class="codeph">OCIErrorGet（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6535" headers="d20286e6234 ">
                                    <p><code class="codeph">敖（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6535 d20286e6240 ">
                                    <p><code class="codeph">OCILogon（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6544" headers="d20286e6234 ">
                                    <p><code class="codeph">腈纶（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6544 d20286e6240 ">
                                    <p><code class="codeph">OCILogon（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6553" headers="d20286e6234 ">
                                    <p><code class="codeph">ONAME（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6553 d20286e6240 ">
                                    <p>注意：请参阅前面的<code class="codeph">odescr()</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d20286e6564" headers="d20286e6234 ">
                                    <p><code class="codeph">osql3（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d20286e6564 d20286e6240 ">
                                    <p>注意：请参阅前面的<code class="codeph">oparse()</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__GUID-478B2E46-394D-40A1-8B93-914BF39D3922">
                           <p class="notep1">注意：</p>
                           <p>使用<code class="codeph">size_t</code>定义传递给OCI 7调用的主机区域（ <code class="codeph">hda</code> ）的应用程序可能由于数据未对齐而在某些平台上崩溃。在这种情况下，应该使用<code class="codeph">Hda_Def</code>而不是<code class="codeph">size_t</code> 。如果无法修改应用程序，则可以在SPARC平台上使用编译器和链接器标志<code class="codeph">misalign</code> 。有关更多信息，请参阅演示和以下文档： <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=misaligned_data_info" target="_blank">Sun Studio 12：C ++用户指南A.2.53 -misalign</a> 。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__GUID-64E8D133-2C5F-4845-BD7E-4E9EACF5C7A6">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oci-programming-basics.html#GUID-4CFB8AF7-EF05-4E0F-847F-2D0710E552C5" title="本章介绍了使用OCI进行编程所涉及的概念和过程。">OCI编程基础知识，</a>用于了解在进行新呼叫或当前呼叫之前或之后可能需要的附加程序逻辑。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-02E4847A-28D8-410C-B40D-17E60CDE29D0" name="GUID-02E4847A-28D8-410C-B40D-17E60CDE29D0"></a><h4 id="LNOCI-GUID-02E4847A-28D8-410C-B40D-17E60CDE29D0" class="sect4"><span class="enumeration_section">3.7.5</span>不支持OCI例程</h4>
                  <div>
                     <p>当前版本不支持以前版本的OCI中提供的一些OCI例程。</p>
                     <div class="section">
                        <p>它们列于<a href="build-and-configure-oci-applications.html#GUID-02E4847A-28D8-410C-B40D-17E60CDE29D0__G435610" title="该表有2列。第1列是OCI例程名称，第2列是其等效或类似的后续OCI例程名称。">表3-4中</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-02E4847A-28D8-410C-B40D-17E60CDE29D0__G435610">
                        <p class="titleintable">表3-4不支持OCI功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="不支持OCI功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the OCI routine name and column 2 is its equivalent or similar later OCI routine name." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="36%" id="d20286e6817">OCI常规</th>
                                 <th align="left" valign="bottom" width="64%" id="d20286e6820">等效或类似的后期OCI例程</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d20286e6825" headers="d20286e6817 ">
                                    <p><code class="codeph">obind（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d20286e6825 d20286e6820 ">
                                    <p><code class="codeph">OCIBindByName()</code> ， <code class="codeph">OCIBindByPos()</code> （注意：某些数据类型可能需要额外的绑定调用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d20286e6838" headers="d20286e6817 ">
                                    <p><code class="codeph">obindn（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d20286e6838 d20286e6820 ">
                                    <p><code class="codeph">OCIBindByName()</code> ， <code class="codeph">OCIBindByPos()</code> （注意：某些数据类型可能需要额外的绑定调用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d20286e6851" headers="d20286e6817 ">
                                    <p><code class="codeph">odfinn（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d20286e6851 d20286e6820 ">
                                    <p><code class="codeph">OCIDefineByPos()</code> （注意：某些数据类型可能需要额外的定义调用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d20286e6861" headers="d20286e6817 ">
                                    <p><code class="codeph">odsrbn（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d20286e6861 d20286e6820 ">
                                    <p>注意：请参阅<a href="build-and-configure-oci-applications.html#GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__G435463" title="该表有2列。第1列是7.x OCI例程名称，第2列是其等效或类似的后续OCI例程名称。">表3-3中的</a> <code class="codeph">odescr()</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d20286e6876" headers="d20286e6817 ">
                                    <p><code class="codeph">ologon（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d20286e6876 d20286e6820 ">
                                    <p><code class="codeph">OCILogon（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d20286e6885" headers="d20286e6817 ">
                                    <p><code class="codeph">OSQL（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d20286e6885 d20286e6820 ">
                                    <p>注意：请参阅<code class="codeph">oparse()</code> <a href="build-and-configure-oci-applications.html#GUID-8291144F-63BE-45EF-8197-FEAFFE9616F3__G435463" title="该表有2列。第1列是7.x OCI例程名称，第2列是其等效或类似的后续OCI例程名称。">表3-3</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-0A4A1E6C-F321-4858-A535-E47240DC9EA1" name="GUID-0A4A1E6C-F321-4858-A535-E47240DC9EA1"></a><h3 id="LNOCI-GUID-0A4A1E6C-F321-4858-A535-E47240DC9EA1" class="sect3"><span class="enumeration_section">3.8</span> OCI中的故障可诊断性</h3>
               <div>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-A2945AF1-36DE-4C87-8C19-DA82B352F176" title="Oracle Database 11g第1版（11.1）中的OCI引入了故障诊断功能。">关于OCI中的故障可诊断性</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-6C60D154-9576-4C84-80F3-04DE75063C00" title="描述如何确定ADR基础的位置。">ADR基地位置</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-DBD82938-E07E-4A6A-B563-0FFED4F55D47" title="ADRCI是一个命令行工具，使您可以在ADR中查看诊断数据，并将事件和问题信息打包到一个zip文件中供Oracle支持人员使用。">使用ADRCI</a></p>
                        </li>
                        <li>
                           <p><a href="build-and-configure-oci-applications.html#GUID-E100960D-1E4F-4C3D-A6A3-0D5A5FB06B4C" title="介绍如何使用sqlnet.ora控制ADR创建和禁用故障诊断。">使用sqlnet.ora控制ADR创建和禁用故障诊断</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-A2945AF1-36DE-4C87-8C19-DA82B352F176" name="GUID-A2945AF1-36DE-4C87-8C19-DA82B352F176"></a><h4 id="LNOCI-GUID-A2945AF1-36DE-4C87-8C19-DA82B352F176" class="sect4"><span class="enumeration_section">3.8.1</span>关于OCI中的故障可诊断性</h4>
                  <div>
                     <p>在Oracle Database <span class="italic">11g</span>第1版（11.1）中将故障可诊断性引入OCI。
                     </p>
                     <p>无需用户干预以诊断数据的形式捕获OCI客户端上的事件（发生问题）：转储文件或核心转储文件。直到版本11.2.0.1，诊断数据存储在为事件创建的自动诊断存储库（ADR）子目录中。例如，如果Linux或UNIX应用程序失败并带有<code class="codeph">NULL</code>指针引用，则核心文件将写入ADR主目录（如果存在）而不是操作系统目录。ADR子目录结构和处理输出的实用程序ADR命令解释器（ADRCI）将在以下各节中讨论。但是，从版本11.2.0.2开始，诊断数据存储在当前目录中。
                     </p>
                     <p>ADR主目录是特定产品（例如OCI）和特定操作系统用户的实例的所有诊断数据的根目录。ADR家庭分组在相同的根目录ADR基础下。</p>
                     <p>Oracle数据库管理员指南中有关管理诊断数据的讨论中详细介绍了Oracle数据库的故障可诊断性和ADR结构。</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6C60D154-9576-4C84-80F3-04DE75063C00" name="GUID-6C60D154-9576-4C84-80F3-04DE75063C00"></a><h4 id="LNOCI-GUID-6C60D154-9576-4C84-80F3-04DE75063C00" class="sect4"><span class="enumeration_section">3.8.2</span> ADR基地位置</h4>
                  <div>
                     <p>描述如何确定ADR基础的位置。</p>
                     <p>ADR基地的位置由OCI按以下顺序确定：</p>
                     <ol>
                        <li>
                           <p>对于所有可诊断性参数，OCI首先查找文件<code class="codeph">oraaccess.xml</code> 。如果没有在那里设置这些参数，那么OCI会在<code class="codeph">sqlnet.ora</code> （如果存在）中查找下一个语句，例如（Linux或UNIX）：</p><pre class="oac_no_warn" dir="ltr">ADR_BASE = <span class="italic">/ foo / adr</span>
</pre><p><code class="codeph">adr</code> （目录的名称）必须存在并且可由执行OCI应用程序并希望共享相同ADR基础的所有操作系统用户写入。 <code class="codeph">foo</code>代表路径名。<code class="codeph">sqlnet.ora</code>的位置在<code class="codeph">$TNS_ADMIN</code>目录中给出（Windows上为<code class="codeph">%TNS_ADMIN%</code> ）。如果没有<code class="codeph">$TNS_ADMIN</code>则使用当前目录。如果设置了<code class="codeph">ADR_BASE</code>并且所有用户共享了一个<code class="codeph">sqlnet.ora</code> ，则当目录<code class="codeph">adr</code>不存在或用户无法写入时，OCI将停止搜索。如果未设置<code class="codeph">ADR_BASE</code> ，则OCI继续搜索，测试是否存在某些目录。
                           </p>
                           <p>例如，如果<code class="codeph">sqlnet.ora</code>包含条目<code class="codeph">ADR_BASE=/home/chuck/test</code>那么ADR基础是<code class="codeph">/home/chuck/test/oradiag_chuck</code> ，ADR home可能是<code class="codeph">/home/chuck/test/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11</code> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">$ORACLE_BASE</code></span> （Windows上的<span class="italic"><code class="codeph">%ORACLE_BASE%</code></span> ）存在。在这种情况下，客户端子目录存在，因为它是在使用Oracle Universal Installer安装数据库期间创建的。
                           </p>
                           <p>例如，如果<span class="italic"><code class="codeph">$ORACLE_BASE</code></span>是<code class="codeph">/home/chuck/obase</code>那么ADR基地是<code class="codeph">/home/chuck/obase</code> ，ADR home可能类似于<code class="codeph">/home/chuck/obase/diag/clients/user_chuck/host_4144260688_11</code> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">$ORACLE_HOME</code></span> <span class="italic"><code class="codeph">(%ORACLE_BASE%</code></span> Windows上为<span class="italic"><code class="codeph">(%ORACLE_BASE%</code></span> ）存在。在这种情况下，客户端子目录存在，因为它是在使用Oracle Universal Installer安装数据库期间创建的。
                           </p>
                           <p>例如，如果<span class="italic"><code class="codeph">$ORACLE_HOME</code></span>是<code class="codeph">/ade/chuck_l1/oracle</code>那么ADR基地是<code class="codeph">/ade/chuck_l1/oracle/log</code> ，ADR home可能类似于<code class="codeph">/ade/chuck_l1/oracle/log/diag/clients/user_chuck/host_4144260688_11</code> 。
                           </p>
                        </li>
                        <li>
                           <p>操作系统主目录：Linux或UNIX上的<span class="italic"><code class="codeph">$HOME</code></span> ，或Windows上的<span class="italic"><code class="codeph">%USERPROFILE%</code></span> 。在Linux或UNIX上，用户<code class="codeph">chuck</code>的位置可能是这样的： <code class="codeph">/home/chuck/oradiag_chuck</code> 。在Windows上，在<code class="codeph">C:\Documents and Settings\chuck</code>下创建名为<code class="codeph">Oracle</code> <code class="codeph">C:\Documents and Settings\chuck</code> 。
                           </p>
                           <p>例如，在Instant Client中，如果<span class="italic"><code class="codeph">$HOME</code></span>是<code class="codeph">/home/chuck</code>那么ADR基础是<code class="codeph">/home/chuck/oradiag_chuck</code> ，ADR home可以是<code class="codeph">/home/chuck/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11</code> 。
                           </p>
                        </li>
                        <li>
                           <p>在Windows上，如果应用程序作为服务运行，则会跳过主目录选项。</p>
                        </li>
                        <li>
                           <p>Linux或UNIX操作系统中的临时目录： <code class="codeph">/var/tmp</code> 。
                           </p>
                           <p>例如，在Instant Client中，如果<span class="italic"><code class="codeph">$HOME</code></span>不可写，则ADR基数为<code class="codeph">/var/tmp/oradiag_chuck</code> ，ADR主页可以是<code class="codeph">/var/tmp/oradiag_chuck/diag/clients/user_chuck/host_4144260688_11</code> 。
                           </p>
                           <p>Windows操作系统中的临时目录，按以下顺序搜索：</p>
                           <ol type="a">
                              <li>
                                 <p><span class="italic"><code class="codeph">％TMP％</code></span></p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">％TEMP％</code></span></p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">％用户资料％</code></span></p>
                              </li>
                              <li>
                                 <p>Windows系统目录</p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                     <p>如果这些目录选项都不可用且不可写，或者未创建ADR基础且没有诊断。</p>
                     <div class="infoboxnotealso" id="GUID-6C60D154-9576-4C84-80F3-04DE75063C00__GUID-8E70175E-E386-4DAD-B646-7D3ED6AAE3BD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="instant-client.html#GUID-6895DB45-97AA-4738-9959-BD677D610186" title="Oracle Instant Client提供必要的Oracle数据库客户端文件，以创建和运行OCI，OCCI，ODBC和JDBC OCI应用程序。还提供有用的命令行实用程序，包括SQL * Plus，SQL * Loader和Oracle Data Pump。Oracle Instant Client消除了客户端计算机上对Oracle主目录的需求，从而简化了应用程序的部署。">关于Oracle Instant Client</a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=NETRF398" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-DBD82938-E07E-4A6A-B563-0FFED4F55D47" name="GUID-DBD82938-E07E-4A6A-B563-0FFED4F55D47"></a><h4 id="LNOCI-GUID-DBD82938-E07E-4A6A-B563-0FFED4F55D47" class="sect4"><span class="enumeration_section">3.8.3</span>使用ADRCI</h4>
                  <div>
                     <p>ADRCI是一个命令行工具，使您可以在ADR中查看诊断数据，并将事件和问题信息打包到一个zip文件中供Oracle支持人员使用。</p>
                     <div class="section">
                        <p>您可以以交互方式和脚本使用ADRCI。<span class="italic">问题</span>是OCI或客户端的严重错误。每个问题都有一个问题关键。<span class="italic">事件</span>是一次出现问题，并由唯一的数字事件ID标识。每个事件都有一个问题键，它是一组属性： <code class="codeph">ORA</code>错误号，错误参数值和其他信息。如果问题键匹配，则两个事件具有相同的根本原因。
                        </p>
                        <p>接下来是在Linux系统中启动ADRCI，使用<code class="codeph">SHOW</code> <code class="codeph">BASE</code>命令的<code class="codeph">HELP</code>命令，然后使用带有选项<code class="codeph">-PRODUCT</code> <code class="codeph">CLIENT</code>的<code class="codeph">SHOW</code> <code class="codeph">BASE</code>命令，这是OCI应用程序所必需的。ADRCI命令不区分大小写。用户输入以粗体显示。
                        </p><pre class="oac_no_warn" dir="ltr">％ <span class="bold">adrci</span> ADRCI：版本12.2.0.0.0  -  2015年12月2日星期三18:26:29发展版权所有（c）1982,2015，Oracle。版权所有。ADR base =“/ u01 / app / oracle / log”adrci&gt; <span class="bold">help show base</span>用法：SHOW BASE [-product &lt;product_name&gt;]目的：显示当前的ADR基本设置。选项：[ -  product &lt;product_name&gt;]：此选项允许用户显示给定产品的ADR Base位置。目前注册的产品是“客户”和“ADRCI”。示例：show base -product client show base adrci&gt; <span class="bold">show base -product client</span> ADR base =“/ u01 / app / oracle / log”</pre><p>接下来，描述<code class="codeph">SET</code> <code class="codeph">BASE</code>命令：</p><pre class="oac_no_warn" dir="ltr">adrci&gt; <span class="bold">help set base</span>用法：SET BASE &lt;base_str&gt; | -product &lt;product_name&gt;目的：设置ADR基数以在当前ADRCI会话中使用。如果基地下有有效的ADR住宅，所有住宅将被添加到当前的ADRCI会话中。参数：&lt;base_str&gt;：它是ADR基目录，它是一个依赖于系统的目录路径字符串。-product &lt;product_name&gt;：此选项允许用户设置给定产品的ADR Base位置。目前注册的产品是“客户”和“ADRCI”。注意：在使用“。”的平台上。表示当前工作目录，它可以用作base_str。示例：set base / net / sttttd1 / scratch / someone / view_storage / someone_v1 / log set base -product client set base。adrci&gt; <span class="bold">退出</span>
</pre><p>启动<code class="codeph">ADRCI</code>时，默认ADR基础用于<code class="codeph">rdbms</code>服务器。<span class="italic"><code class="codeph">$ORACLE_HOME</code></span>设置为<code class="codeph">"/u01/app/oracle/"</code> ：</p><pre class="oac_no_warn" dir="ltr">％ <span class="bold">adrci</span> ADRCI：版本12.2.0.0.0  -  2015年12月2日星期三18:26:29发展版权所有（c）1982,2015，Oracle。版权所有。ADR base =“/ u01 / app / oracle / log”adrci&gt;</pre><p>对于OCI应用程序事件，您必须检查并设置基数：</p><pre class="oac_no_warn" dir="ltr">adrci&gt; <span class="bold">show base -product client</span> ADR base is“/ u01 / app / oracle / log”adrci&gt; <span class="bold">set base / home / chuck_13 / oradiag_chuck</span>
</pre><p>对于Instant Client，没有<span class="italic"><code class="codeph">$ORACLE_HOME</code></span> ，因此默认基数是用户的主目录：</p><pre class="oac_no_warn" dir="ltr">adrci&gt; <span class="bold">show base -product client</span> ADR base is“/ home / chuck_13 / oradiag_chuck”adrci&gt; <span class="bold">set base / home / chuck / oradiag_chuck</span> adrci&gt; <span class="bold">show incidents</span> ADR Home = / home / chuck / oradiag_chuck / diag / clients / user_chuck / host_4144260688_11： ************************************************** *********************** INCIDENT_ID PROBLEM_KEY CREATE_TIME ------------------------ ------------------------------------------------- 1 oci 24550 [6] 2015-12-02 17：20：02.803697 -07：00 1行取adrci&gt;</pre><div class="infoboxnotealso" id="GUID-DBD82938-E07E-4A6A-B563-0FFED4F55D47__GUID-67B4CAD8-0E50-4FF6-8ACE-416AC11DE685">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="instant-client.html#GUID-6895DB45-97AA-4738-9959-BD677D610186" title="Oracle Instant Client提供必要的Oracle数据库客户端文件，以创建和运行OCI，OCCI，ODBC和JDBC OCI应用程序。还提供有用的命令行实用程序，包括SQL * Plus，SQL * Loader和Oracle Data Pump。Oracle Instant Client消除了客户端计算机上对Oracle主目录的需求，从而简化了应用程序的部署。">关于Oracle Instant Client</a></p>
                           <p><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>Oracle数据库实用程序</cite></span></a> ，介绍ADRCI</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E100960D-1E4F-4C3D-A6A3-0D5A5FB06B4C" name="GUID-E100960D-1E4F-4C3D-A6A3-0D5A5FB06B4C"></a><h4 id="LNOCI-GUID-E100960D-1E4F-4C3D-A6A3-0D5A5FB06B4C" class="sect4"><span class="enumeration_section">3.8.4</span>使用sqlnet.ora控制ADR创建和禁用故障诊断</h4>
                  <div>
                     <p>介绍如何使用sqlnet.ora控制ADR创建和禁用故障诊断。</p>
                     <div class="section">
                        <p>要禁用可诊断性，请通过在<code class="codeph">sqlnet.ora</code>设置以下参数来关闭诊断程序（默认值为<code class="codeph">TRUE</code> ）：</p><pre class="oac_no_warn" dir="ltr">DIAG_ADR_ENABLED = FALSE DIAG_DDE_ENABLED = FALSE</pre><p>要关闭OCI信号处理程序并重新启用标准操作系统故障处理，请在<code class="codeph">sqlnet.ora</code>放置以下参数设置：</p><pre class="oac_no_warn" dir="ltr">DIAG_SIGHANDLER_ENABLED = FALSE</pre><p>如前所述，在<code class="codeph">sqlnet.ora</code>使用<code class="codeph">ADR_BASE</code>来设置ADR基址的位置。
                        </p>
                        <p>Oracle数据库客户端包含用于诊断问题的高级功能，包括在检测到重要错误时转储诊断信息的功能。默认情况下，这些转储仅限于一小部分可用信息，以确保不转储应用程序数据。但是，在许多安装中，可以配置转储文件的安全位置，以确保此类日志的隐私。在这种情况下，建议打开完全转储;这可以大大加快问题的解决速度。通过将以下行添加到Oracle数据库客户端安装使用的<code class="codeph">sqlnet.ora</code>文件中，可以启用完全转储：</p><pre class="oac_no_warn" dir="ltr">DIAG_RESTRICTED = FALSE</pre><p>要验证可诊断功能是否正常工作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>升级您的应用程序以使用最新的客户端库。</span></li>
                        <li><span>开始申请。</span></li>
                        <li><span>检查应用程序的<code class="codeph">TNS_ADMIN</code>目录中的文件<code class="codeph">sqlnet.log</code>以获取指示无法启动可诊断性的错误消息（通常这是由于无效的目录名称或权限）。</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-E100960D-1E4F-4C3D-A6A3-0D5A5FB06B4C__GUID-AB4CAD3A-85E2-462F-ACC5-B291C777163D">
                           <p class="notep1">也可以看看：</p>
                           <p> </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">sqlnet.ora</code> ADR参数设置的<a href="../netrf/index.html" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关ADR结构的详细信息，请参见<a href="../netag/troubleshooting-oracle-net-services.html#NETAG1524" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p>当客户端和服务器上的时区文件不匹配（区域未同步）时，返回<code class="codeph">ORA-01805</code>错误;当区域时区值相同时（以UTC表示相同的时刻）返回<code class="codeph">OCI_SUCCESS</code> ，但<code class="codeph">TIME ZONE</code>偏移量不同。
            </p><br></div>
      </article>
   </body>
</html><html id="02618.XS_PRINCIPAL-package.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>XS_PRINCIPAL包</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="XS_NAMESPACE-package.html" title="Previous" type="text/html"></link>
      <link rel="next" href="XS_SECURITY_CLASS-package.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XS_NAMESPACE-package.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="XS_SECURITY_CLASS-package.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="real-application-security-plsql-packages.html" property="item" typeof="WebPage"><span property="name">Oracle数据库真实应用程序安全PL / SQL包</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XS_PRINCIPAL包</li>
            </ol>
            <a id="GUID-50D04FCD-BB85-42A5-851D-559D5D537325" name="GUID-50D04FCD-BB85-42A5-851D-559D5D537325"></a><a id="DBFSG99296"></a>
            
            <h2 id="DBFSG-GUID-50D04FCD-BB85-42A5-851D-559D5D537325" class="sect2">XS_PRINCIPAL包</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>XS_PRINCIPAL包中包含用于创建，管理和删除应用程序主体的过程。这些应用程序主体包括应用程序用户，常规应用程序角色和动态应用程序角色</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="XS_PRINCIPAL-package.html#GUID-33D2E7A6-5EE5-4045-B5EE-A153A619F929">安全模型</a></p>
                        </li>
                        <li>
                           <p><a href="XS_PRINCIPAL-package.html#GUID-23B361BA-981C-4FA6-8646-30F369C3EDC8">常量</a></p>
                        </li>
                        <li>
                           <p><a href="XS_PRINCIPAL-package.html#GUID-3DF3B7FF-2F1F-48D0-B83D-4F7070395714">对象类型，构造函数，同义词和授权</a></p>
                        </li>
                        <li>
                           <p><a href="XS_PRINCIPAL-package.html#GUID-D9EA0B89-BC59-49DB-9E12-4A2A19CEFCDA">XS_PRINCIPAL子程序摘要</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div><a id="DBFSG99297"></a><div class="props_rev_3"><a id="GUID-33D2E7A6-5EE5-4045-B5EE-A153A619F929" name="GUID-33D2E7A6-5EE5-4045-B5EE-A153A619F929"></a><h3 id="DBFSG-GUID-33D2E7A6-5EE5-4045-B5EE-A153A619F929" class="sect3">安全模型</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">XS_PRINCIPAL</code>包<a id="d116419e256" class="indexterm-anchor"></a>是在<code class="codeph">SYS</code>架构下创建的。
                     </p>
                     <p>具有Real Application Security <code class="codeph">PROVISION</code>权限的用户可以创建，修改或删除应用程序用户和角色。创建，修改或删除应用程序用户和角色所需的权限不再受创建，修改或删除数据库用户和角色所需的相同系统特权的约束。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG669"></a><div class="props_rev_3"><a id="GUID-23B361BA-981C-4FA6-8646-30F369C3EDC8" name="GUID-23B361BA-981C-4FA6-8646-30F369C3EDC8"></a><h3 id="DBFSG-GUID-23B361BA-981C-4FA6-8646-30F369C3EDC8" class="sect3">常量</h3>
               <div>
                  <div class="section">
                     <p>下列<a id="d116419e384" class="indexterm-anchor"></a>常量定义用户的状态：</p><pre class="oac_no_warn" dir="ltr">ACTIVE CONSTANT PLS_INTEGER：= 1;非活动常数PLS_INTEGER：= 2;解锁的常数PLS_INTEGER：= 3; EXPIRED CONSTANT PLS_INTEGER：= 4; LOCKED CONSTANT PLS_INTEGER：= 5;</pre><p>以下常量定义动态角色范围：</p><pre class="oac_no_warn" dir="ltr">SESSION_SCOPE常量PLS_INTEGER：= 0; REQUEST_SCOPE CONSTANT PLS_INTEGER：= 1;</pre><p>以下常量定义验证者类型：</p><pre class="oac_no_warn" dir="ltr">XS_SHA512 CONSTANT PLS_INTEGER：= 2; XS_SALTED_SHA1 CONSTANT PLS_INTEGER：= 1;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG706"></a><div class="props_rev_3"><a id="GUID-3DF3B7FF-2F1F-48D0-B83D-4F7070395714" name="GUID-3DF3B7FF-2F1F-48D0-B83D-4F7070395714"></a><h3 id="DBFSG-GUID-3DF3B7FF-2F1F-48D0-B83D-4F7070395714" class="sect3">对象类型，构造函数，同义词和授权</h3>
               <div>
                  <div class="section">
                     <p>下列<a id="d116419e515" class="indexterm-anchor"></a>为此包定义了对象类型，构造函数，同义词和<code class="codeph">GRANT</code>语句。
                     </p><pre class="oac_no_warn" dir="ltr">- 授予主体的角色的类型定义CREATE OR REPLACE TYPE XS $ ROLE_GRANT_TYPE AS OBJECT（ - 成员变量 - 在类型中无法识别在其他包中定义的常量。- 例如XS_ADMIN_UTIL.XSNAME_MAXLEN  - 名称VARCHAR2（XS_ADMIN_UTIL.XSNAME_MAXLEN），名称VARCHAR2（130）， - 生效日期的开始日期start_date TIMESTAMP WITH TIME ZONE， - 生效日期的结束日期end_date TIMESTAMP WITH TIME ZONE，CONSTRUCTOR FUNCTION XS $ ROLE_GRANT_TYPE（名称IN VARCHAR2，start_date IN TIMESTAMP WITH TIME ZONE：= NULL，end_date IN TIMESTAMP WITH TIME ZONE：= NULL）返回SELF AS RESULT，成员函数get_role_name RETURN VARCHAR2，成员程序set_start_date（start_date IN TIMESTAMP WITH TIME ZONE），成员函数get_start_date返回带时区的时间戳，成员程序set_end_date（带时区的时间段为END_date），成员函数get_end_date返回带时区的时间戳）;创建或替换类型XS $ ROLE_GRANT_LIST作为XR $ ROLE_GRANT_TYPE的VARRAY（1000）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG99299"></a><a id="DBFSG99298"></a><div class="props_rev_3"><a id="GUID-D9EA0B89-BC59-49DB-9E12-4A2A19CEFCDA" name="GUID-D9EA0B89-BC59-49DB-9E12-4A2A19CEFCDA"></a><h3 id="DBFSG-GUID-D9EA0B89-BC59-49DB-9E12-4A2A19CEFCDA" class="sect3">XS_PRINCIPAL子程序摘要</h3>
               <div>
                  <div class="tblformal" id="GUID-D9EA0B89-BC59-49DB-9E12-4A2A19CEFCDA__GUID-5D767ACE-A940-42A6-9F4F-106DDEAF503B">
                     <p class="titleintable">表11-10 XS_PRINCIPAL子程序摘要</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="XS_PRINCIPAL子程序摘要" width="100%" border="1" summary="This table has 2 columns. Column 1 is the name of the subprogram and column 2 is its description." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="44%" id="d116419e648">子程序</th>
                              <th align="left" valign="bottom" width="56%" id="d116419e651">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e656" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D">CREATE_USER过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e656 d116419e651 ">
                                 <p>创建应用程序用户。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e664" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC">CREATE_ROLE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e664 d116419e651 ">
                                 <p>创建应用程序角色。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e672" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5">CREATE_DYNAMIC_ROLE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e672 d116419e651 ">
                                 <p>创建动态应用程序角色。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e680" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5">GRANT_ROLES程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e680 d116419e651 ">
                                 <p>将一个或多个应用程序角色授予应用程序主体。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e688" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-58221815-3052-4727-8716-4CE33AB29565">REVOKE_ROLES程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e688 d116419e651 ">
                                 <p>从应用程序主体撤消一个或多个角色。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e696" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A">ADD_PROXY_USER过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e696 d116419e651 ">
                                 <p>为目标应用程序用户添加代理用户。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e704" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-DC100E64-4F75-4261-9055-36365D99ED0A">REMOVE_PROXY_USERS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e704 d116419e651 ">
                                 <p>删除目标应用程序用户的指定代理用户或所有代理用户。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e712" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA">ADD_PROXY_TO_DBUSER</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e712 d116419e651 ">
                                 <p>将代理应用程序用户添加到数据库用户。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e720" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-5CC1A868-11C6-4649-8C72-9C351FD42895">REMOVE_PROXY_FROM_DBUSER过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e720 d116419e651 ">
                                 <p>从数据库用户中删除代理应用程序用户。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e728" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC">SET_EFFECTIVE_DATES过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e728 d116419e651 ">
                                 <p>设置或修改应用程序用户或角色的生效日期。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e736" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D">SET_DYNAMIC_ROLE_DURATION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e736 d116419e651 ">
                                 <p>设置或修改动态应用程序角色的持续时间（以分钟为单位）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e745" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E">SET_DYNAMIC_ROLE_SCOPE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e745 d116419e651 ">
                                 <p>设置或修改动态应用程序角色的范围，例如<code class="codeph">REQUEST_SCOPE</code>或<code class="codeph">SESSION_SCOPE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e759" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5">ENABLE_BY_DEFAULT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e759 d116419e651 ">
                                 <p>启用或禁用应用程序角色。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e767" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1">ENABLE_ROLES_BY_DEFAULT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e767 d116419e651 ">
                                 <p>启用或禁用指定用户的所有直接授予的角色。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e775" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-8FC52A23-35DA-4A50-8149-6850F56D6467">SET_USER_SCHEMA程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e775 d116419e651 ">
                                 <p>设置应用程序用户的数据库架构。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e783" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-054787C6-120D-4567-8F0E-404DBB408F7B">SET_GUID过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e783 d116419e651 ">
                                 <p>设置外部用户或角色的GUID。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e791" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A">SET_ACL程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e791 d116419e651 ">
                                 <p>为应用程序用户或动态角色设置Real Application Security会话权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e799" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F">SET_PROFILE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e799 d116419e651 ">
                                 <p>设置应用程序用户的配置文件。这是一组资源限制和密码参数，用于限制Real Application Security应用程序用户的数据库使用和数据库实例资源。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e807" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-D771034A-250B-452C-B475-340143281305">SET_USER_STATUS过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e807 d116419e651 ">
                                 <p>设置或修改应用程序用户帐户的状态，例如<code class="codeph">ACTIVE</code> ， <code class="codeph">INACTIVE</code> ， <code class="codeph">UNLOCK</code> ， <code class="codeph">LOCKED</code>或<code class="codeph">EXPIRED</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e830" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD">SET_PASSWORD过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e830 d116419e651 ">
                                 <p>设置或修改应用程序用户帐户的密码。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e838" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A">SET_VERIFIER过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e838 d116419e651 ">
                                 <p>设置或修改应用程序用户帐户的验证程序。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e846" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5">SET_DESCRIPTION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e846 d116419e651 ">
                                 <p>设置应用程序用户或角色的描述字符串。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d116419e855" headers="d116419e648 ">
                                 <p><a href="XS_PRINCIPAL-package.html#GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8">DELETE_PRINCIPAL程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d116419e855 d116419e651 ">
                                 <p>删除应用程序用户或角色。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>本节介绍以下XS_PRINCIPAL子程序：</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="DBFSG99309"></a><a id="DBFSG99310"></a><a id="DBFSG99311"></a><a id="DBFSG99308"></a><div class="props_rev_3"><a id="GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D" name="GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D"></a><h4 id="DBFSG-GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D" class="sect4">CREATE_USER过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CREATE_USER</code>过程创建一个新的应用程序用户。您需要<code class="codeph">CREATE USER</code>系统特权才能创建应用程序用户。
                        </p>
                        <p>您可以使用<a href="real-application-security-data-dictionary-views.html#GUID-97B36DFE-DA8F-41E3-9141-37C8B0E6E2ED">DBA_XS_USERS</a>数据字典视图来获取所有应用程序用户的列表。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D__GUID-C617785B-8DBB-4D5A-AC9E-0D3A1E53D8E0">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE_USER（名称IN VARCHAR2，架构IN VARCHAR2：= NULL，状态IN PLS_INTEGER：= ACTIVE，start_date IN TIMESTAMP WITH TIME ZONE：= NULL，end_date IN TIMESTAMP WITH TIME ZONE：= NULL，guid IN RAW：= NULL，external_source IN VARCHAR2 ：= NULL，描述IN VARCHAR2：= NULL，acl IN VARCHAR2：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D__GUID-731BE132-F537-4096-B5A0-E07BC8317342">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D__GUID-BBCDF517-E2D6-40E4-B564-711F50BC6EDF">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="CREATE_USER parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d116419e1017">参数</th>
                                 <th align="left" valign="bottom" width="73%" id="d116419e1020">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1025" headers="d116419e1017 ">
                                    <p><code class="codeph">名称</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1025 d116419e1020 ">
                                    <p>要创建的应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1033" headers="d116419e1017 ">
                                    <p><code class="codeph">状态</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1033 d116419e1020 ">
                                    <p>创建时用户的状态。这可以是以下值之一：</p>
                                    <p><code class="codeph">ACTIVE</code> ，不<code class="codeph">INACTIVE</code> 。</p>
                                    <p>默认值为<code class="codeph">ACTIVE</code> 。</p>
                                    <p>从Oracle Database Release 12.1（12.1.0.2）开始，不推荐使用值<code class="codeph">PASSWORDEXPIRED</code>和<code class="codeph">LOCKED</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1061" headers="d116419e1017 ">
                                    <p><code class="codeph">模式</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1061 d116419e1020 ">
                                    <p>要与用户关联的数据库架构。这是可选的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1069" headers="d116419e1017 ">
                                    <p><code class="codeph">开始日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1069 d116419e1020 ">
                                    <p>用户帐户生效的日期。这是可选的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1077" headers="d116419e1017 ">
                                    <p><code class="codeph">结束日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1077 d116419e1020 ">
                                    <p>用户帐户无效的日期。这是可选的。</p>
                                    <p>如果指定了<code class="codeph">end_date</code> ，则还必须指定<code class="codeph">start_date</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1093" headers="d116419e1017 ">
                                    <p><code class="codeph">GUID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1093 d116419e1020 ">
                                    <p>用户的GUID。这仅适用于外部用户。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1101" headers="d116419e1017 ">
                                    <p><code class="codeph">外部源</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1101 d116419e1020 ">
                                    <p>作为此用户的源的系统的名称。这是可选的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1109" headers="d116419e1017 ">
                                    <p><code class="codeph">描述</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1109 d116419e1020 ">
                                    <p>用户帐户的说明。这是可选的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d116419e1117" headers="d116419e1017 ">
                                    <p><code class="codeph">ACL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d116419e1117 d116419e1020 ">
                                    <p>Real Application Security会话权限。默认值为<code class="codeph">NULL</code>表示在主体上未设置ACL。ACL必须驻留在<code class="codeph">SYS</code>架构中，否则将引发错误。
                                    </p>
                                    <p>要在主体上设置的Real Application Security会话权限必须遵循Real Application Security对象的命名约定，并且必须在调用此过程之前存在。</p>
                                    <p>根据会话操作中涉及的Real Application Security应用程序用户设置的ACL强制实施会话权限。例如，创建会话操作要求调用者在Real Application Security应用程序用户的ACL集中具有<code class="codeph">CREATE SESSION</code>特权。
                                    </p>
                                    <p>特定于主体的ACL授权优先于现有的系统级会话特权授予。首先在与主体关联的ACL中完成权限检查，如果成功，则进行操作。如果权限检查发现拒绝，则操作将失败并且权限不足。如果既未找到grant也未拒绝，则检查在与<code class="codeph">SESSION_SC</code>安全类关联的系统ACL中完成，并且操作将根据此权限检查结果成功或失败。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-03D147A5-36A8-4ACE-BDEA-2D7A5D8F046D__GUID-BE95C765-E262-41DA-BCAE-7E125E3B7D88">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例创建用户：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.CREATE_USER（'TEST1'）;结束;</pre><p>以下示例创建用户，并指定用户的架构和开始日期：</p><pre class="oac_no_warn" dir="ltr">DECLARE带有时区的st_date TIMESTAMP; BEGIN st_date：= TO_TIMESTAMP_TZ（'2010-06-18 11:00:00 -5：00'，'YYYY-MM-DD HH：MI：SS TZH：TZM'）; SYS.XS_PRINCIPAL.CREATE_USER（name =&gt;'u2'，schema =&gt;'scott'，start_date =&gt; st_date）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99313"></a><a id="DBFSG99314"></a><a id="DBFSG99315"></a><a id="DBFSG99312"></a><div class="props_rev_3"><a id="GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC" name="GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC"></a><h4 id="DBFSG-GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC" class="sect4">CREATE_ROLE过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CREATE_ROLE</code>过程创建新的应用程序角色。您需要<code class="codeph">CREATE ROLE</code>系统特权才能创建常规应用程序角色。
                        </p>
                        <p>您可以使用<a href="real-application-security-data-dictionary-views.html#GUID-05DD81BD-98F4-4409-B42A-CA76EA4CED76">DBA_XS_ROLES</a>数据字典视图来获取应用程序角色列表及其属性，例如开始日期和结束日期</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC__GUID-2A2ABE4E-617A-4A62-BC48-DCC9D8DD34BC">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE_ROLE（名称IN VARCHAR2，启用IN BOOLEAN：= FALSE，start_date IN TIMESTAMP WITH TIME ZONE：= NULL，end_date IN TIMESTAMP WITH TIME ZONE：= NULL，guid IN RAW：= NULL，external_source IN VARCHAR2：= NULL，description IN VARCHAR2 ：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC__GUID-E0337E1E-1374-48E2-A5A9-D1F2816EC855">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC__GUID-6263C9AD-9610-440B-9A36-CE47D3F195BF">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="CREATE_ROLE parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d116419e1306">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d116419e1309">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1314" headers="d116419e1306 ">
                                    <p><code class="codeph">名称</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1314 d116419e1309 ">
                                    <p>要创建的应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1322" headers="d116419e1306 ">
                                    <p><code class="codeph">启用</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1322 d116419e1309 ">
                                    <p>指定是否在创建时启用角色。默认值为<code class="codeph">FALSE</code> ，表示在创建时禁用该角色。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1333" headers="d116419e1306 ">
                                    <p><code class="codeph">开始日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1333 d116419e1309 ">
                                    <p>角色生效的日期。这是可选的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1341" headers="d116419e1306 ">
                                    <p><code class="codeph">结束日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1341 d116419e1309 ">
                                    <p>角色失效的日期。这是可选的。</p>
                                    <p>如果指定了<code class="codeph">end_date</code> ，则还必须指定<code class="codeph">start_date</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1357" headers="d116419e1306 ">
                                    <p><code class="codeph">GUID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1357 d116419e1309 ">
                                    <p>角色的GUID。这仅适用于外部角色。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1365" headers="d116419e1306 ">
                                    <p><code class="codeph">外部源</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1365 d116419e1309 ">
                                    <p>作为此角色来源的系统的名称。这是可选的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d116419e1373" headers="d116419e1306 ">
                                    <p><code class="codeph">描述</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d116419e1373 d116419e1309 ">
                                    <p>角色的可选描述。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A1D0CBF-2A1B-4050-BE1D-4C11F83D2FDC__GUID-12FC42EE-F81C-48FF-BE40-74B615DDA68B">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例创建一个名为<code class="codeph">hrmgr</code>的应用程序角色：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.CREATE_ROLE（'hrmgr'）;结束;</pre><p>以下示例创建名为<code class="codeph">hrrep</code>的应用程序角色。它还启用角色，并将当前日期指定为角色的开始日期。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE带有时区的st_date TIMESTAMP; BEGIN st_date：= SYSTIMESTAMP; SYS.XS_PRINCIPAL.CREATE_ROLE（name =&gt;'hrrep'，enabled =&gt; true，start_date =&gt; st_date）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99317"></a><a id="DBFSG99318"></a><a id="DBFSG99319"></a><a id="DBFSG99316"></a><div class="props_rev_3"><a id="GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5" name="GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5"></a><h4 id="DBFSG-GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5" class="sect4">CREATE_DYNAMIC_ROLE过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CREATE_DYNAMIC_ROLE</code>过程创建一个新的动态应用程序角色。应用程序可以根据应用程序定义的条件动态启用或禁用动态应用程序角色。您需要<code class="codeph">CREATE ROLE</code>系统特权才能创建动态应用程序角色。
                        </p>
                        <p>您可以使用<a href="real-application-security-data-dictionary-views.html#GUID-3F8717CD-401D-4264-9739-5612D3D82D32">DBA_XS_DYNAMIC_ROLES</a>数据字典视图获取所有动态应用程序角色及其属性（如持续时间）的列表。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5__GUID-2468D2A6-128D-44B5-9621-ADB86D0C9F4E">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE_DYNAMIC_ROLE（名称IN VARCHAR2，持续时间IN PLS_INTEGER：= NULL，范围IN PLS_INTEGER：= XS_PRINCIPAL.SESSION_SCOPE，描述IN VARCHAR2：= NULL，acl IN VARCHAR2：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5__GUID-32AE6995-BEA8-44AC-BC5D-F12F2E2BE68B">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5__GUID-F0EDC48D-C7C5-4D60-9997-B997A406FE88">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="CREATE_DYNAMIC_ROLE parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e1551">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e1554">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1559" headers="d116419e1551 ">
                                    <p><code class="codeph">名称</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1559 d116419e1554 ">
                                    <p>要创建的动态应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1567" headers="d116419e1551 ">
                                    <p><code class="codeph">持续时间</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1567 d116419e1554 ">
                                    <p>动态应用程序角色的持续时间（以分钟为单位）。这是一个可选属性。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1575" headers="d116419e1551 ">
                                    <p><code class="codeph">范围</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1575 d116419e1554 ">
                                    <p>动态应用程序角色的scope属性。可能的值是<code class="codeph">SESSION_SCOPE</code>和<code class="codeph">REQUEST_SCOPE</code> 。默认值为<code class="codeph">XS_PRINCIPAL.SESSION_SCOPE.</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1591" headers="d116419e1551 ">
                                    <p><code class="codeph">描述</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1591 d116419e1554 ">
                                    <p>动态应用程序角色的可选描述。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1599" headers="d116419e1551 ">
                                    <p><code class="codeph">ACL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1599 d116419e1554 ">
                                    <p>Real Application Security会话权限。默认值为<code class="codeph">NULL</code>表示在主体上未设置ACL。ACL必须驻留在<code class="codeph">SYS</code>架构中，否则将引发错误。
                                    </p>
                                    <p>要在主体上设置的Real Application Security会话权限必须遵循Real Application Security对象的命名约定，并且必须在调用此过程之前存在。</p>
                                    <p>会话权限根据会话操作中涉及的Real Application Security动态角色上设置的ACL强制实施。例如，具有动态角色的附加操作要求在动态角色上设置ACL中的<code class="codeph">ENABLE_DYNAMIC_ROLE</code>权限。
                                    </p>
                                    <p>特定于主体的ACL授权优先于现有的系统级会话特权授予。首先在与主体关联的ACL中完成权限检查，如果成功，则进行操作。如果权限检查发现拒绝，则操作将失败并且权限不足。如果既未找到grant也未拒绝，则检查在与<code class="codeph">SESSION_SC</code>安全类关联的系统ACL中完成，并且操作将根据此权限检查结果成功或失败。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D3C1B51-E0D8-45F0-B9E2-40EBE4C1F3C5__GUID-B0EA0644-EFB6-45EA-B447-033E0D8F1E55">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例创建一个名为<code class="codeph">sslrole</code>的动态应用程序角色：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.CREATE_DYNAMIC_ROLE（'sslrole'）;结束;</pre><p>以下示例创建一个名为<code class="codeph">reprole</code>的动态应用程序角色。它还为角色指定100分钟的持续时间，并选择角色的请求范围。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.CREATE_DYNAMIC_ROLE（name =&gt;'reprole'，duration =&gt; 100，scope =&gt; XS_PRINCIPAL.REQUEST_SCOPE）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99321"></a><a id="DBFSG99322"></a><a id="DBFSG99323"></a><a id="DBFSG99320"></a><div class="props_rev_3"><a id="GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5" name="GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5"></a><h4 id="DBFSG-GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5" class="sect4">GRANT_ROLES程序</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">GRANT_ROLES</code>过程向应用程序主体授予一个或多个应用程序角色。您需要<code class="codeph">GRANT ANY ROLE</code>系统特权才能授予应用程序角色。
                        </p>
                        <p>您可以使用<a href="real-application-security-data-dictionary-views.html#GUID-FCD4BCA4-1D7A-417F-8D5D-9B1B41E065FD">DBA_XS_ROLE_GRANTS</a>数据字典视图获取所有角色授予的列表及其详细信息，例如开始日期和结束日期。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5__GUID-D090E1DA-BF35-4675-942B-BA00DD901F4D">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">GRANT_ROLES（grantee IN VARCHAR2，角色IN VARCHAR2，start_date IN TIMESTAMP WITH TIME ZONE：= NULL，end_date IN TIMESTAMP WITH TIME ZONE：= NULL，）; GRANT_ROLES（grantee IN VARCHAR2，role_list IN XS $ ROLE_GRANT_LIST）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5__GUID-665687F2-B444-4F3B-961D-D62AC363C950">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5__GUID-96572A5B-3C40-4005-B37A-787B90AF5BD9">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="GRANT_ROLES parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e1794">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e1797">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1802" headers="d116419e1794 ">
                                    <p><code class="codeph">受让人</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1802 d116419e1797 ">
                                    <p>授予角色的主体的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1810" headers="d116419e1794 ">
                                    <p><code class="codeph">角色</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1810 d116419e1797 ">
                                    <p>要授予的角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1818" headers="d116419e1794 ">
                                    <p><code class="codeph">role_list</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1818 d116419e1797 ">
                                    <p>要授予的角色列表。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1826" headers="d116419e1794 ">
                                    <p><code class="codeph">开始日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1826 d116419e1797 ">
                                    <p>授予生效的日期。这是一个可选参数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e1834" headers="d116419e1794 ">
                                    <p><code class="codeph">结束日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e1834 d116419e1797 ">
                                    <p>授予生效的日期。这是一个可选参数。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2DF77823-B22F-4B0A-8D57-92066B3235F5__GUID-98E570C0-BE29-4A67-92B5-0F5AA1050678">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将<code class="codeph">HRREP</code>角色授予用户<code class="codeph">SMAVRIS</code> ，并指定了开始日期和结束日期：</p><pre class="oac_no_warn" dir="ltr">DECLARE带有时区的st_date TIMESTAMP; end_date TIMESTAMP WITH TIME ZONE; BEGIN st_date：= TO_TIMESTAMP_TZ（'2010-06-18 11:00:00 -5：00'，'YYYY-MM-DD HH：MI：SS TZH：TZM'）; end_date：= TO_TIMESTAMP_Tz（'2011-06-18 11:00:00 -5：00'，'YYYY-MM-DD HH：MI：SS TZH：TZM'）; SYS.XS_PRINCIPAL.GRANT_ROLES（'SMAVRIS'，'HRREP'，st_date，end_date）;结束;</pre><p>以下示例将<code class="codeph">HRREP</code>和<code class="codeph">HRMGR</code>角色授予用户<code class="codeph">SMAVRIS</code> ：</p><pre class="oac_no_warn" dir="ltr">DECLARE rg_list XS $ ROLE_GRANT_LIST; BEGIN rg_list：= XS $ ROLE_GRANT_LIST（XS $ ROLE_GRANT_TYPE（'HRREP'），XS $ ROLE_GRANT_TYPE（'HRMGR'））; SYS.XS_PRINCIPAL.GRANT_ROLES（'SMAVRIS'，rg_list）;结束;</pre><p>以下示例显示如何将角色<code class="codeph">XSCONNECT</code>授予用户<code class="codeph">XSUSER</code> 。此授权将允许用户<code class="codeph"><code class="codeph">XSUSER</code></code>使用其密码连接到数据库。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SYS.XS_PRINCIPAL.GRANT_ROLES（'XSUSER'，'XSCONNECT'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99944"></a><a id="DBFSG99945"></a><a id="DBFSG99946"></a><a id="DBFSG99943"></a><div class="props_rev_3"><a id="GUID-58221815-3052-4727-8716-4CE33AB29565" name="GUID-58221815-3052-4727-8716-4CE33AB29565"></a><h4 id="DBFSG-GUID-58221815-3052-4727-8716-4CE33AB29565" class="sect4">REVOKE_ROLES程序</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">REVOKE_ROLES</code>过程从指定的被授权者撤消指定的角色。如果未指定任何角色，则从被授予者撤消所有应用程序角色。您需要<code class="codeph">GRANT ANY ROLE</code>系统特权才能授予或撤消角色。
                        </p>
                        <p>您可以使用<a href="real-application-security-data-dictionary-views.html#GUID-FCD4BCA4-1D7A-417F-8D5D-9B1B41E065FD">DBA_XS_ROLE_GRANTS</a>数据字典视图获取所有角色授予的列表及其详细信息，例如开始日期和结束日期。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-58221815-3052-4727-8716-4CE33AB29565__GUID-F93C6324-7FFE-406C-8076-431CD8738669">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">REVOKE_ROLES（grantee IN VARCHAR2，角色IN VARCHAR2）; REVOKE_ROLES（grantee IN VARCHAR2，role_list IN XS $ NAME_LIST）; REVOKE_ROLES（受让人IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-58221815-3052-4727-8716-4CE33AB29565__GUID-635A0006-7BE8-4860-B3DD-74FC82F944DC">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-58221815-3052-4727-8716-4CE33AB29565__GUID-27842F5F-782E-4EE4-952F-C285AAD6690E">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="REVOKE_ROLES parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e2035">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e2038">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2043" headers="d116419e2035 ">
                                    <p><code class="codeph">受让人</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2043 d116419e2038 ">
                                    <p>要撤销角色的应用程序主体。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2051" headers="d116419e2035 ">
                                    <p><code class="codeph">角色</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2051 d116419e2038 ">
                                    <p>要撤消的应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2059" headers="d116419e2035 ">
                                    <p><code class="codeph">role_list</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2059 d116419e2038 ">
                                    <p>要撤消的角色名称列表。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-58221815-3052-4727-8716-4CE33AB29565__GUID-675983A7-4FD4-4647-AB2E-293AD8A456B5">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例从用户<code class="codeph">SMAVRIS</code>撤消<code class="codeph">HRREP</code>角色：</p><pre class="oac_no_warn" dir="ltr">BEGIN XS_PRINCIPAL.REVOKE_ROLES（'SMAVRIS'，'HRREP'）;结束;</pre><p>以下示例从用户<code class="codeph">SMAVRIS</code>撤消<code class="codeph">HRREP</code>和<code class="codeph">HRMGR</code>角色：</p><pre class="oac_no_warn" dir="ltr">DECLARE role_list XS $ NAME_LIST; BEGIN role_list：= XS $ NAME_LIST（'HRREP'，'HRMGR'）; SYS.XS_PRINCIPAL.REVOKE_ROLES（'SMAVRIS'，role_list）;结束;</pre><p>以下示例撤消用户SMAVRIS中所有授予的角色：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.REVOKE_ROLES（'SMAVRIS'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99948"></a><a id="DBFSG99949"></a><a id="DBFSG99950"></a><a id="DBFSG99947"></a><div class="props_rev_3"><a id="GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A" name="GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A"></a><h4 id="DBFSG-GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A" class="sect4">ADD_PROXY_USER过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ADD_PROXY_USER</code>为指定的应用程序用户添加目标用户。这允许应用程序用户代理作为目标用户。此过程有两个签名。第一个签名允许您使用要分配给代理用户的<code class="codeph">target_roles</code>参数指定目标用户的角色子集。对于第二个签名，没有<code class="codeph">target_roles</code>参数，因此目标用户的所有角色都分配给代理用户。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能添加或删除代理用户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A__GUID-842B0FDC-24B9-41D6-98BC-CAECF847EAF6">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">ADD_PROXY_USER（target_user IN VARCHAR2，proxy_user IN VARCHAR2，target_roles IN XS $ NAME_LIST）; ADD_PROXY_USER（target_user IN VARCHAR2，proxy_user IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A__GUID-90A5A8A4-2122-42CF-A31B-46678EA7841F">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A__GUID-490881E3-6FED-4483-A352-ED3EBA3487FD">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="ADD_PROXY_USER parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e2253">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e2256">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2261" headers="d116419e2253 ">
                                    <p><code class="codeph">TARGET_USER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2261 d116419e2256 ">
                                    <p>可以代理到的目标应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2269" headers="d116419e2253 ">
                                    <p><code class="codeph">proxy_user</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2269 d116419e2256 ">
                                    <p>代理应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2277" headers="d116419e2253 ">
                                    <p><code class="codeph">target_roles</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2277 d116419e2256 ">
                                    <p>可由代理用户代理的目标用户角色列表。此参数是必需的。如果传递显式<code class="codeph">NULL</code>值，那么这将是配置代理用户而没有目标用户的任何角色的情况;否则， <code class="codeph">proxy_user</code>参数使用您为<code class="codeph">target_roles</code>参数指定的值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B69AF6F-57AF-425C-B46E-6148AD92B39A__GUID-484E6F48-26E3-49CC-901E-D1DD9849CC38">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例使用户<code class="codeph">DJONES</code>能够代理为目标用户<code class="codeph">SMAVRIS</code> 。授予<code class="codeph">DJONES</code>的目标角色是<code class="codeph">HRREP</code>和<code class="codeph">HRMGR</code> 。</p><pre class="oac_no_warn" dir="ltr">DECLARE pxy_roles XS $ NAME_LIST; BEGIN pxy_roles：= XS $ NAME_LIST（'HRREP'，'HRMGR'）; SYS.XS_PRINCIPAL.ADD_PROXY_USER（'SMAVRIS'，'DJONES'，pxy_roles）;结束;</pre><p>以下示例为目标角色传递显式<code class="codeph">NULL</code>值;换句话说，它不会将目标用户'SMAVRIS'的角色分配给代理用户'DJONES'。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.ADD_PROXY_USER（'SMAVRIS'，'DJONES'，NULL）;结束;</pre><p>以下示例将目标用户“SMAVRIS”的所有角色分配给代理用户“DJONES”。</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.ADD_PROXY_USER（'SMAVRIS'，'DJONES'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99952"></a><a id="DBFSG99953"></a><a id="DBFSG99954"></a><a id="DBFSG99951"></a><div class="props_rev_3"><a id="GUID-DC100E64-4F75-4261-9055-36365D99ED0A" name="GUID-DC100E64-4F75-4261-9055-36365D99ED0A"></a><h4 id="DBFSG-GUID-DC100E64-4F75-4261-9055-36365D99ED0A" class="sect4">REMOVE_PROXY_USERS程序</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">REMOVE_PROXY_USERS</code>过程取消关联目标应用程序用户的一个或所有代理用户。将自动删除代理用户的关联代理角色。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能添加或删除代理用户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC100E64-4F75-4261-9055-36365D99ED0A__GUID-CCD3222C-AE78-4685-B63A-F93DA47199DC">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">REMOVE_PROXY_USERS（target_user IN VARCHAR2）; REMOVE_PROXY_USERS（target_user IN VARCHAR2，proxy_user IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC100E64-4F75-4261-9055-36365D99ED0A__GUID-EFCC3ED0-22C6-4556-8EEC-5A0974524F38">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-DC100E64-4F75-4261-9055-36365D99ED0A__GUID-3720BFA6-3EF9-4459-8E92-8F794F425A0D">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="REMOVE_PROXY_USERS  parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e2476">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e2479">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2484" headers="d116419e2476 ">
                                    <p><code class="codeph">TARGET_USER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2484 d116419e2479 ">
                                    <p>要解除其代理的目标应用程序用户。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2492" headers="d116419e2476 ">
                                    <p><code class="codeph">proxy_user</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2492 d116419e2479 ">
                                    <p>需要与目标用户取消关联的代理应用程序用户。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC100E64-4F75-4261-9055-36365D99ED0A__GUID-AE87977B-BD34-4723-8412-DAE845502602">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例删除目标用户<code class="codeph">SMAVRIS</code>所有代理用户：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.REMOVE_PROXY_USERS（'SMAVRIS'）;结束;</pre><p>以下示例将代理用户<code class="codeph">DJONES</code>与目标用户<code class="codeph">SMAVRIS</code>解除关联：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.REMOVE_PROXY_USERS（'SMAVRIS'，'DJONES'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG671"></a><a id="DBFSG672"></a><a id="DBFSG673"></a><a id="DBFSG670"></a><div class="props_rev_3"><a id="GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA" name="GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA"></a><h4 id="DBFSG-GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA" class="sect4">ADD_PROXY_TO_DBUSER</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ADD_PROXY_TO_DBUSER</code>将指定的目标代理应用程序用户添加到指定的数据库用户。应用程序用户必须是直接登录用户。这允许应用程序用户代理作为目标数据库用户。默认情况下，代理用户可以使用分配给目标用户的所有角色。与Oracle数据库类似，连接后将启用目标数据库用户的默认角色。可以使用<code class="codeph">SET ROLE</code>语句设置分配给目标数据库用户的其他角色。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能将代理用户添加到数据库用户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA__GUID-A5E0D66C-248F-432F-9FDE-9AD69DCC2C60">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">ADD_PROXY_TO_DBUSER（database_user IN VARCHAR2，proxy_user IN VARCHAR2，is_external IN BOOLEAN：= FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA__GUID-2C9DF6BB-CB30-4BA7-A7E6-0495D3844C12">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA__GUID-02B8FBA0-E278-425C-A91C-378AAA94B534">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="ADD_PROXY_TO_DBUSER  parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e2672">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e2675">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2680" headers="d116419e2672 ">
                                    <p><code class="codeph">database_user</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2680 d116419e2675 ">
                                    <p>可以代理到的目标数据库用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2688" headers="d116419e2672 ">
                                    <p><code class="codeph">proxy_user</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2688 d116419e2675 ">
                                    <p>代理应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2696" headers="d116419e2672 ">
                                    <p><code class="codeph">is_external</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2696 d116419e2675 ">
                                    <p>用于指示用户是外部用户还是常规Real Application Security应用程序用户的参数。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-52BC2129-A0C2-49C6-9DE7-1712D310EAFA__GUID-245B0A64-2625-43C2-8381-5DDAE2971232">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例使应用程序用户<code class="codeph">DJONES</code>能够代理为目标数据库用户<code class="codeph">SMAVRIS</code> 。</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.ADD_PROXY_TO_DBUSER（'SMAVRIS'，'DJONES'，TRUE）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG675"></a><a id="DBFSG676"></a><a id="DBFSG677"></a><a id="DBFSG674"></a><div class="props_rev_3"><a id="GUID-5CC1A868-11C6-4649-8C72-9C351FD42895" name="GUID-5CC1A868-11C6-4649-8C72-9C351FD42895"></a><h4 id="DBFSG-GUID-5CC1A868-11C6-4649-8C72-9C351FD42895" class="sect4">REMOVE_PROXY_FROM_DBUSER过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">REMOVE_PROXY_FROM_DBUSER</code>过程将代理应用程序用户与数据库用户解除关联。将自动从应用程序用户中删除关联的代理角色。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能从数据库用户中删除代理用户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5CC1A868-11C6-4649-8C72-9C351FD42895__GUID-F73FCF1D-73F5-475F-92BB-F64A919672D6">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">REMOVE_PROXY_FROM_DBUSER（database_user IN VARCHAR2，proxy_user IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5CC1A868-11C6-4649-8C72-9C351FD42895__GUID-54AEBD58-2F19-487A-92AD-9CBDC30272C0">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-5CC1A868-11C6-4649-8C72-9C351FD42895__GUID-38779423-3EE8-4D76-92AC-3392CD68034E">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="REMOVE_PROXY_FROM_DBUSER parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e2867">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e2870">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2875" headers="d116419e2867 ">
                                    <p><code class="codeph">database_user</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2875 d116419e2870 ">
                                    <p>要解除其代理的目标数据库用户。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e2883" headers="d116419e2867 ">
                                    <p><code class="codeph">proxy_user</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e2883 d116419e2870 ">
                                    <p>需要与目标数据库用户取消关联的代理应用程序用户。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5CC1A868-11C6-4649-8C72-9C351FD42895__GUID-5AD059A2-BB1F-4103-9EA6-CBA77763E464">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将代理用户<code class="codeph">DJONES</code>与目标数据库用户<code class="codeph">SMAVRIS</code>解除关联：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.REMOVE_PROXY_FROM_DBUSER（'SMAVRIS'，'DJONES'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99960"></a><a id="DBFSG99961"></a><a id="DBFSG99962"></a><a id="DBFSG99959"></a><div class="props_rev_3"><a id="GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC" name="GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC"></a><h4 id="DBFSG-GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC" class="sect4">SET_EFFECTIVE_DATES过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_EFFECTIVE_DATES</code>过程设置或修改应用程序用户或角色的生效日期。如果默认情况下将<code class="codeph">start_date</code>和<code class="codeph">end_date</code>值指定为<code class="codeph">NULL</code> ，则应用程序用户当前无效，因此无法创建特定应用程序用户的会话。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能为应用程序用户运行此过程。您需要<code class="codeph">ALTER ANY ROLE</code>系统特权才能为应用程序角色运行此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC__GUID-BEA8DAFC-3415-4197-BCEF-42FC7CA90342">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_EFFECTIVE_DATES（主要IN VARCHAR2，带时区的TIMESTAMP中的start_date：= NULL，带时区的时间结束时的end_date：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC__GUID-BB4156DF-E8EA-46B3-84AC-0B44A3C3F02B">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC__GUID-A1B162B9-B675-4429-B157-4C49352FDCE6">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_EFFECTIVE_DATES  parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e3065">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e3068">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3073" headers="d116419e3065 ">
                                    <p><code class="codeph">主要</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3073 d116419e3068 ">
                                    <p>要为其设置生效日期的应用程序用户或角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3081" headers="d116419e3065 ">
                                    <p><code class="codeph">开始日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3081 d116419e3068 ">
                                    <p>生效日期的开始日期。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3089" headers="d116419e3065 ">
                                    <p><code class="codeph">结束日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3089 d116419e3068 ">
                                    <p>生效日期的结束日期。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F7CB8D99-9396-43A8-A4E7-CEC9E52D38DC__GUID-398C2738-9C27-4196-B340-A7D42B5073A0">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例设置用户<code class="codeph">DJONES</code>的生效日期。</p><pre class="oac_no_warn" dir="ltr">DECLARE带有时区的st_date TIMESTAMP; end_date TIMESTAMP WITH TIME ZONE; BEGIN st_date：= TO_TIMESTAMP_TZ（'2010-06-18 11:00:00 -5：00'，'YYYY-MM-DD HH：MI：SS TZH：TZM'）; end_date：= TO_TIMESTAMP_Tz（'2011-06-18 11:00:00 -5：00'，'YYYY-MM-DD HH：MI：SS TZH：TZM'）; SYS.XS_PRINCIPAL.SET_EFFECTIVE_DATES（principal =&gt;'DJONES'，start_date =&gt; st_date，end_date =&gt; end_date）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99964"></a><a id="DBFSG99965"></a><a id="DBFSG99966"></a><a id="DBFSG99963"></a><div class="props_rev_3"><a id="GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D" name="GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D"></a><h4 id="DBFSG-GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D" class="sect4">SET_DYNAMIC_ROLE_DURATION过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_DYNAMIC_ROLE_DURATION</code>过程设置或修改动态应用程序角色的持续时间。持续时间以分钟为单位。
                        </p>
                        <p>您需要<code class="codeph">ALTER ANY ROLE</code>系统特权才能修改角色。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D__GUID-1761BE2B-D754-45C7-883F-3C60E07906EC">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_DYNAMIC_ROLE_DURATION（角色IN VARCHAR2，持续时间IN PLS_INTEGER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D__GUID-2242084E-A893-432C-89A4-923BD52320F8">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D__GUID-21A2ACD8-3544-480F-A1C1-99A633D62C97">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_DYNAMIC_ROLE_DURATION parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e3256">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e3259">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3264" headers="d116419e3256 ">
                                    <p><code class="codeph">角色</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3264 d116419e3259 ">
                                    <p>动态应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3272" headers="d116419e3256 ">
                                    <p><code class="codeph">持续时间</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3272 d116419e3259 ">
                                    <p>动态应用程序角色的持续时间（分钟）。这不能是负值。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6069CD83-3AE1-4167-B83B-97A4E4FC5F8D__GUID-FB4BFAB1-8D01-4537-A93D-EBFFB169908E">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将<code class="codeph">reprole</code>动态应用程序角色的持续时间设置为60分钟。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_DYNAMIC_ROLE_DURATION（'reprole'，60）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99968"></a><a id="DBFSG99969"></a><a id="DBFSG99970"></a><a id="DBFSG99967"></a><div class="props_rev_3"><a id="GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E" name="GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E"></a><h4 id="DBFSG-GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E" class="sect4">SET_DYNAMIC_ROLE_SCOPE过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_DYNAMIC_ROLE_SCOPE</code>过程设置或修改动态应用程序角色的范围。可以选择会话（ <code class="codeph">SESSION_SCOPE</code> ）或请求（ <code class="codeph">REQUEST_SCOPE</code> ）范围。
                        </p>
                        <p>您需要<code class="codeph">ALTER ANY ROLE</code>系统特权才能修改角色。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E__GUID-90E77006-5C91-4407-B44C-4AF61AD621CB">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_DYNAMIC_ROLE_SCOPE（角色IN VARCHAR2，范围IN PLS_INTEGER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E__GUID-EC04D502-FC82-46F5-A2E0-A304C9288FD4">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E__GUID-54F01E77-2399-49E8-A126-794B55DB9321">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_DYNAMIC_ROLE_SCOPE  parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e3446">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e3449">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3454" headers="d116419e3446 ">
                                    <p><code class="codeph">角色</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3454 d116419e3449 ">
                                    <p>动态应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3462" headers="d116419e3446 ">
                                    <p><code class="codeph">范围</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3462 d116419e3449 ">
                                    <p>要设置的动态应用程序角色的范围。允许的值为<code class="codeph">XS_PRINCIPAL.REQUEST_SCOPE</code>和<code class="codeph">XS_PRINCIPAL.SESSION_SCOPE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB7AA70A-6E66-478A-ACF8-3BD93C38E59E__GUID-EF43978B-9715-4F1E-AE3F-AD3157445AC3">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将<code class="codeph">reprole</code>动态应用程序角色的范围设置为请求范围：</p><pre class="oac_no_warn" dir="ltr">开始SYS.XS_PRINCIPAL.SET_DYNAMIC_ROLE_SCOPE（'reprole'，XS_PRINCIPAL.REQUEST_SCOPE）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99972"></a><a id="DBFSG99973"></a><a id="DBFSG99974"></a><a id="DBFSG99971"></a><div class="props_rev_3"><a id="GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5" name="GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5"></a><h4 id="DBFSG-GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5" class="sect4">ENABLE_BY_DEFAULT过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ENABLE_BY_DEFAULT</code>过程启用或禁用常规应用程序角色。
                        </p>
                        <p>如果启用，则会自动为其授予的主体启用应用程序角色。如果禁用，则即使将应用程序角色授予主体，也不会启用与应用程序角色关联的权限。</p>
                        <p>您需要<code class="codeph">ALTER ANY ROLE</code>系统特权才能修改应用程序角色。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5__GUID-1C5AD08C-B484-4238-8290-6CEB1F8D10B9">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">ENABLE_BY_DEFAULT（角色IN VARCHAR2，启用IN BOOLEAN：= TRUE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5__GUID-3CF24479-C01F-442F-9F10-9B8B21382D71">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5__GUID-53E56608-DC45-44CB-960A-A6BBACBD0836">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="ENABLE_BY_DEFAULT parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e3637">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e3640">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3645" headers="d116419e3637 ">
                                    <p><code class="codeph">角色</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3645 d116419e3640 ">
                                    <p>常规应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3653" headers="d116419e3637 ">
                                    <p><code class="codeph">启用</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3653 d116419e3640 ">
                                    <p>应用程序角色的<code class="codeph">enabled</code>属性。将此设置为<code class="codeph">TRUE</code>会将应用程序角色标记为默认启用。默认值为<code class="codeph">TRUE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D50076C-E67B-4FF2-9030-4405DC56D9A5__GUID-E935E593-E754-423E-81AF-3925D76B04EF">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将<code class="codeph">HRREP</code>应用程序角色的<code class="codeph">enabled</code>属性设置为<code class="codeph">TRUE</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.ENABLE_BY_DEFAULT（'HRREP'，TRUE）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99976"></a><a id="DBFSG99977"></a><a id="DBFSG99978"></a><a id="DBFSG99975"></a><div class="props_rev_3"><a id="GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1" name="GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1"></a><h4 id="DBFSG-GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1" class="sect4">ENABLE_ROLES_BY_DEFAULT过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ENABLE_ROLES_BY_DEFAULT</code>过程启用或禁用直接授予应用程序用户的所有应用程序角色。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能为应用程序用户运行此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1__GUID-894BE9B1-3F6F-4CFD-9926-8F0E6BD14938">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">ENABLE_ROLES_BY_DEFAULT（用户IN VARCHAR2，启用IN BOOLEAN：= TRUE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1__GUID-C9970599-8DB7-4F94-8F04-B2B20E74A613">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1__GUID-31F47C7E-A721-4161-B496-06666C1F59F0">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="ENABLE_ROLES_BY_DEFAULT  parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e3835">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e3838">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3843" headers="d116419e3835 ">
                                    <p><code class="codeph">用户</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3843 d116419e3838 ">
                                    <p>应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e3851" headers="d116419e3835 ">
                                    <p><code class="codeph">启用</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e3851 d116419e3838 ">
                                    <p>已直接授予应用程序用户的所有应用程序角色的<code class="codeph">enabled</code>属性。
                                    </p>
                                    <p>将enabled属性设置为<code class="codeph">TRUE</code>可为应用程序用户启用所有直接授予的应用程序角色。默认值为<code class="codeph">TRUE</code> 。</p>
                                    <p>将enabled属性设置为<code class="codeph">FALSE</code>会禁用应用程序用户的所有直接授予的应用程序角色。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6563D5-AC12-411A-9D4D-29A0C00683D1__GUID-A05BB5DB-7B67-4794-8F21-DECC71BD0EDA">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例为应用程序用户<code class="codeph">SMAVRIS</code>启用所有直接授予的角色：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.ENABLE_ROLES_BY_DEFAULT（'SMAVRIS'，TRUE）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99980"></a><a id="DBFSG99981"></a><a id="DBFSG99982"></a><a id="DBFSG99979"></a><div class="props_rev_3"><a id="GUID-8FC52A23-35DA-4A50-8149-6850F56D6467" name="GUID-8FC52A23-35DA-4A50-8149-6850F56D6467"></a><h4 id="DBFSG-GUID-8FC52A23-35DA-4A50-8149-6850F56D6467" class="sect4">SET_USER_SCHEMA程序</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_USER_SCHEMA</code>过程为应用程序用户设置数据库架构。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能为应用程序用户运行此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8FC52A23-35DA-4A50-8149-6850F56D6467__GUID-9AA344A1-532A-4423-9917-D59A58001D5E">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_USER_SCHEMA（用户IN VARCHAR2，架构IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8FC52A23-35DA-4A50-8149-6850F56D6467__GUID-5B8473DA-9B65-4BA4-92ED-202B62B81385">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8FC52A23-35DA-4A50-8149-6850F56D6467__GUID-3F83BB9B-7CEA-4259-8A4F-0E0CA0363606">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_USER_SCHEMA  parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e4035">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e4038">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4043" headers="d116419e4035 ">
                                    <p><code class="codeph">用户</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4043 d116419e4038 ">
                                    <p>应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4051" headers="d116419e4035 ">
                                    <p><code class="codeph">模式</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4051 d116419e4038 ">
                                    <p>要与用户关联的数据库模式的名称。将此设置为<code class="codeph">NULL</code>将删除任何架构关联。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8FC52A23-35DA-4A50-8149-6850F56D6467__GUID-B3DFC2A1-90E8-4F43-98B8-A723B31BF56D">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将<code class="codeph">HR</code>模式与用户<code class="codeph">DJONES</code>相关联。</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_USER_SCHEMA（'DJONES'，'HR'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99984"></a><a id="DBFSG99985"></a><a id="DBFSG99986"></a><a id="DBFSG99983"></a><div class="props_rev_3"><a id="GUID-054787C6-120D-4567-8F0E-404DBB408F7B" name="GUID-054787C6-120D-4567-8F0E-404DBB408F7B"></a><h4 id="DBFSG-GUID-054787C6-120D-4567-8F0E-404DBB408F7B" class="sect4">SET_GUID过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_GUID</code>过程设置主体的GUID。主体必须是外部用户或角色，并且当前GUID必须为<code class="codeph">NULL</code> 。</p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能为应用程序用户运行此过程。您需要<code class="codeph">ALTER ANY ROLE</code>系统特权才能为应用程序角色运行此过程。
                        </p>
                        <div class="infoboxnote" id="GUID-054787C6-120D-4567-8F0E-404DBB408F7B__GUID-B5CBA61B-A341-4BAC-BA10-E1527AD21593">
                           <p class="notep1">注意：</p>
                           <p>必须已为SET_GUID设置用户的<code class="codeph">external_source</code>属性才能工作。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-054787C6-120D-4567-8F0E-404DBB408F7B__GUID-4993B0BD-A008-4A77-8732-8202C0EEA9B5">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_GUID（主要IN VARCHAR2，guid IN RAW）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-054787C6-120D-4567-8F0E-404DBB408F7B__GUID-F3259F6B-4150-4AFB-BE41-59DC331B595E">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-054787C6-120D-4567-8F0E-404DBB408F7B__GUID-04C1867D-6FB7-426A-8CDA-3B283356AA2B">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_GUID parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e4236">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e4239">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4244" headers="d116419e4236 ">
                                    <p><code class="codeph">主要</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4244 d116419e4239 ">
                                    <p>外部用户或角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4252" headers="d116419e4236 ">
                                    <p><code class="codeph">GUID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4252 d116419e4239 ">
                                    <p>外部用户或角色的GUID。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-054787C6-120D-4567-8F0E-404DBB408F7B__GUID-BBB74652-E79F-4FAA-A8AA-38D22A643D6E">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例为用户<code class="codeph">Alex</code>设置GUID：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_GUID（'ALEX'，'7b6cb3a98f8a4e20ac31a37419cc7fa3'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A" name="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A"></a><h4 id="DBFSG-GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A" class="sect4">SET_ACL程序</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-FBBF2E54-F4BF-4C8A-8954-EB6BAFBF8D85">目的</p>
                        <p><code class="codeph">SET_ACL</code>过程在指定的应用程序用户或动态角色上设置ACL。
                        </p>
                        <p>此过程要求调用者将Real Application Security <code class="codeph">PROVISION</code>特权作为最小特权。具有数据库<code class="codeph">ALTER USER</code>权限的用户也可以在主体是应用程序用户时调用该过程。具有数据库角色<code class="codeph">ALTER ROLE</code>权限的用户也可以在主体是动态角色时调用此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-622D7320-73C3-4E3D-AE5E-D6F99DC2EC74">句法</p><pre class="pre codeblock"><code>SET_ACL（主要IN VARCHAR2，acl IN VARCHAR2）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-1AE89E39-85CC-40FA-8890-4B925B494362">参数</p>
                        <div class="tblformal" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-C4631289-8395-4F7A-B08C-D64D792FB008">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" border="1" summary="SET_ACL parameters." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d116419e4422">参数</th>
                                    <th align="left" valign="bottom" id="d116419e4424">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d116419e4428" headers="d116419e4422 "><code class="codeph">主要</code></td>
                                    <td align="left" valign="top" headers="d116419e4428 d116419e4424 ">
                                       <p>要为其设置ACL的应用程序用户或动态角色。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d116419e4435" headers="d116419e4422 "><code class="codeph">ACL</code></td>
                                    <td align="left" valign="top" headers="d116419e4435 d116419e4424 ">
                                       <p>Real Application Security会话权限。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-244FEC76-B18C-4E34-81E2-64F3A18453F9">使用说明</p>
                        <p>必须在<code class="codeph">SYS</code>模式中创建ACL。
                        </p>
                        <p>在应用程序用户或动态角色上设置的ACL将覆盖系统范围的ACL。</p>
                        <p>会话权限将根据Real Application Security应用程序用户上设置的ACL或会话操作中涉及的动态角色强制执行。例如，创建会话操作要求调用者在Real Application Security应用程序用户的ACL集中具有<code class="codeph">CREATE_SESSION</code>特权，或者具有动态角色的附加操作要求在动态角色上设置ACL中的<code class="codeph">ENABLE_DYNAMIC_ROLE</code>特权。
                        </p>
                        <p>特定于主体的ACL授权优先于现有的系统级会话特权授予。首先在与主体关联的ACL中完成权限检查，如果成功，则进行操作。如果权限检查发现拒绝，则操作将失败并且权限不足。如果既未找到grant也未拒绝，则检查在与<code class="codeph">SESSION_SC</code>安全类关联的系统ACL中完成，并且操作将根据此权限检查结果成功或失败。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-CBA7C60D-1B43-406E-854C-FB0B355904DB">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A5658C22-562F-48CC-B14D-621A9F6FFE0A__GUID-85990404-F6CF-46D0-A3DF-645945458DBD">
                        <p class="titleinexample">示例11-1在应用程序用户TEST1上设置ACL权限CREATE_SESSION</p>
                        <p>以下示例在指定的应用程序用户<code class="codeph">test1</code>上设置ACL权限<code class="codeph">CREATE_SESSION</code> 。
                        </p><pre class="pre codeblock"><code>BEGIN SYS.XS_PRINCIPAL.SET_ACL（'test1'，'CREATE_SESSION'）;结束;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG803"></a><a id="DBFSG804"></a><a id="DBFSG805"></a><a id="DBFSG802"></a><div class="props_rev_3"><a id="GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F" name="GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F"></a><h4 id="DBFSG-GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F" class="sect4">SET_PROFILE过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_PROFILE</code>过程设置应用程序用户的配置文件。该配置文件是一组资源限制和密码参数，用于限制Real Application Security应用程序用户的数据库使用和数据库实例资源。应用程序用户和配置文件都必须是现有实体。
                        </p>
                        <p>执行此过程的用户必须具有<code class="codeph">ALTER_USER</code>权限。
                        </p>
                        <p>如果使用级联选项删除分配给应用程序用户的配置文件，则会自动为该用户激活默认配置文件。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F__GUID-F2BAC73B-4895-458D-86FB-C019579F7316">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_PROFILE（用户IN VARCHAR2，配置文件IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F__GUID-E1D455F2-8AFB-4A07-9F3C-09115E7A8090">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F__GUID-AA9A7837-8E14-47E9-A954-B18F4CA7686C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_GUID parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e4632">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e4635">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4640" headers="d116419e4632 ">
                                    <p><code class="codeph">用户</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4640 d116419e4635 ">
                                    <p>Real Application Security应用程序用户的名称。这必须是现有的应用程序用户。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4648" headers="d116419e4632 ">
                                    <p><code class="codeph">轮廓</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4648 d116419e4635 ">
                                    <p>配置文件的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-610D3138-94AF-42FD-B738-B0E86EB7D07F__GUID-F1FE47D9-7557-48AD-B0D2-C08B24EF3F5E">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例创建名为<code class="codeph">prof</code>的概要文件，然后将名为<code class="codeph">prof</code>的概要文件设置为名为<code class="codeph">xsuser</code>的应用程序用户。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE PROFILE prof LIMIT PASSWORD_REUSE_TIME 1/1440 PASSWORD_REUSE_MAX 3 PASSWORD_VERIFY_FUNCTION Verify_Pass; BEGIN SYS.XS_PRINCIPAL.SET_PROFILE（'xsuser'，'prof'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99988"></a><a id="DBFSG99989"></a><a id="DBFSG99990"></a><a id="DBFSG99987"></a><div class="props_rev_3"><a id="GUID-D771034A-250B-452C-B475-340143281305" name="GUID-D771034A-250B-452C-B475-340143281305"></a><h4 id="DBFSG-GUID-D771034A-250B-452C-B475-340143281305" class="sect4">SET_USER_STATUS过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_USER_STATUS</code>过程设置或修改应用程序用户帐户的状态。
                        </p>
                        <p>您需要<code class="codeph">ALTER_USER</code>权限才能为应用程序用户运行此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D771034A-250B-452C-B475-340143281305__GUID-A72166B8-8692-4315-BE5D-AF38A56A975B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_USER_STATUS（用户IN VARCHAR2，状态IN PLS_INTEGER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D771034A-250B-452C-B475-340143281305__GUID-1A339D1C-769D-442F-9403-EFFF830CA9F6">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-D771034A-250B-452C-B475-340143281305__GUID-B4FC22E2-DC4B-4B2A-BC6B-1BC7FA3F81C1">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_USER_STATUS parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e4821">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e4824">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4829" headers="d116419e4821 ">
                                    <p><code class="codeph">用户</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4829 d116419e4824 ">
                                    <p>需要设置或更新其状态的用户帐户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e4837" headers="d116419e4821 ">
                                    <p><code class="codeph">状态</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e4837 d116419e4824 ">
                                    <p>Real Application Security用户帐户的新状态。状态值可以分为几类：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">ACTIVE</code>和<code class="codeph">INACTIVE</code> - 这两个帐户状态值将影响用户帐户创建和附加到应用程序会话的能力。
                                          </p>
                                          <p>设置为<code class="codeph">ACTIVE</code> ，它允许应用程序用户使用直接登录帐户使用有效密码登录数据库。如果帐户具有所需的应用程序权限，则允许应用程序用户创建并附加到应用程序会话。
                                          </p>
                                          <p>设置为<code class="codeph">INACTIVE</code> ，即使使用有效密码，应用程序用户也无法使用直接登录帐户登录数据库，也无法创建并附加到应用程序会话。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">UNLOCK</code> ， <code class="codeph">LOCKED</code>或<code class="codeph">EXPIRED</code> - 仅为直接登录的Real Application Security应用程序用户检查这些状态值。
                                          </p>
                                          <p>设置为<code class="codeph">UNLOCK</code> ，它会在帐户被<code class="codeph">LOCKED</code>时打开应用程序用户帐户，并允许应用程序用户使用直接登录帐户使用有效密码登录数据库。
                                          </p>
                                          <p>设置为<code class="codeph">LOCKED</code> ，它会锁定应用程序用户的帐户。这意味着即使使用有效密码，也不允许使用直接登录帐户的用户连接。如果用户帐户是<code class="codeph">ACTIVE</code> ，则在帐户被锁定时直接登录将不会成功，但用户可以创建并附加到应用程序会话。
                                          </p>
                                          <p>设置为<code class="codeph">EXPIRED</code> ，它<code class="codeph">EXPIRED</code>应用程序用户的帐户失效。这意味着使用直接登录帐户的用户连接将被允许用于有效密码;但是，必须在登录时更改密码。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">PASSWORDEXPIRED</code> （已弃用） - 从版本1（12.1.0.2）开始，不推荐使用此状态值。
                                          </p>
                                       </li>
                                    </ul>
                                    <p>如果您尝试为参数<code class="codeph">status</code>传递任何其他值，则会返回<code class="codeph">ORA-46152: XS Security - invalid user status specified</code>错误。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D771034A-250B-452C-B475-340143281305__GUID-74EC9645-2271-480E-9290-7EF2E067B61D">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例将用户<code class="codeph">DJONES</code>的用户状态设置为<code class="codeph">LOCKED</code> 。</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_USER_STATUS（'DJONES'，XS_PRINCIPAL.LOCKED）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99992"></a><a id="DBFSG99993"></a><a id="DBFSG99994"></a><a id="DBFSG99991"></a><div class="props_rev_3"><a id="GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD" name="GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD"></a><h4 id="DBFSG-GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD" class="sect4">SET_PASSWORD过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_PASSWORD</code>过程设置或修改应用程序用户帐户的密码。使用<code class="codeph">SET_PASSWORD</code>过程时，它会根据密码和<code class="codeph">type</code>参数为您创建验证程序，然后将验证程序和<code class="codeph">type</code>参数的值插入到字典表中。
                        </p>
                        <p>直接登录Real Application Security用户可以使用<code class="codeph">oldpass</code>参数提供其值来更改自己的密码。如果旧密码的值不正确，则每次尝试都会增加失败的登录计数，返回<code class="codeph">ORA-28008: invalid old password</code>错误。在旧提供的密码正确之前，不会设置新密码。
                        </p>
                        <p>您需要<code class="codeph">ALTER_USER</code>权限才能为应用程序用户运行此过程，或者您要更改其他Real Application Security用户的密码。
                        </p>
                        <p>从外部ID存储同步的本机Real Application Security用户不允许更改自己的密码。这些用户必须在原始ID存储中更改其密码。例如，如果Oracle Internet Directory <span class="italic">11g</span>第1版（11.1.1）是外部存储，则对于最终用户自助服务，请使用Oracle身份管理器提供的Oracle身份自助服务接口来管理您的密码。有关详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbfsg&amp;id=password_self_service" target="_blank">Fusion Middleware使用Oracle身份管理器执行自助服务任务</a> 。您应该与安全管理员联系，以确定是否从外部ID存储同步本机Real Application Security用户，如果是，则是否在目录服务器环境中提供了密码管理以供最终用户自助服务。
                        </p>
                        <p><code class="codeph">SET_PASSWORD</code>操作和SQL * Plus <code class="codeph">PASSWORD</code>命令都在逻辑备用数据库上被阻止。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD__GUID-E4A94378-EED7-4CD9-A0B9-FBEA2F25A05F">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_PASSWORD（用户IN VARCHAR2，密码IN VARCHAR2，输入IN PLS_INTEGER：= XS_SHA512，opassword IN VARCHAR2：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD__GUID-E0811CB5-DA90-4B26-AEFD-30EFF6154F6F">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD__GUID-FB4DBFAF-CD9C-4A72-A497-3308B4F465D8">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_PASSWORD parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e5105">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e5108">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5113" headers="d116419e5105 ">
                                    <p><code class="codeph">用户</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5113 d116419e5108 ">
                                    <p>要为其设置密码的应用程序用户帐户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5121" headers="d116419e5105 ">
                                    <p><code class="codeph">密码</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5121 d116419e5108 ">
                                    <p>要设置的密码。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5129" headers="d116419e5105 ">
                                    <p><code class="codeph">类型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5129 d116419e5108 ">
                                    <p>用于密码的验证者类型。默认值为<code class="codeph">XS_SHA512</code> 。验证者类型必须是以下类型之一：</p>
                                    <p><code class="codeph">XS_SHA512，XS_SALTED_SHA1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5143" headers="d116419e5105 ">
                                    <p><code class="codeph">opassword</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5143 d116419e5108 ">
                                    <p>旧密码。如果Real Application Security用户正在更改自己的密码，则此参数是必需的。如果未提供，则用户必须具有更改其自己的密码所需的权限。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB88CD3F-89B0-4C25-A404-D5C8D7FEB1AD__GUID-14A3B1A6-0F9E-4569-BD4E-3A9D016237AA">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例为应用程序用户<code class="codeph">SMAVRIS</code>设置密码。它还为密码指定<code class="codeph">XS_SHA512</code>验证程序类型。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_PASSWORD（'SMAVRIS'，'2Hrd2Guess'，XS_PRINCIPAL.XS_SHA512）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG99996"></a><a id="DBFSG99997"></a><a id="DBFSG99998"></a><a id="DBFSG99995"></a><div class="props_rev_3"><a id="GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A" name="GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A"></a><h4 id="DBFSG-GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A" class="sect4">SET_VERIFIER过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_VERIFIER</code>过程为应用程序用户帐户设置或修改验证程序。当您使用<code class="codeph">SET_VERIFIER</code>过程时，该过程直接将验证程序和<code class="codeph">type</code>参数的值插入到字典表<code class="codeph">XS$VERIFIERS</code> 。这使管理员能够在知道验证者而不是密码的情况下将用户迁移到Real Application Security。
                        </p>
                        <p>您需要<code class="codeph">ALTER_USER</code>权限才能为应用程序用户运行此过程。
                        </p>
                        <p><code class="codeph">SET_VERIFIER</code>操作和SQL * Plus <code class="codeph">PASSWORD</code>命令都在逻辑备用数据库上被阻止。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A__GUID-202CA799-7D3C-468F-A9EE-FCA11B118433">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">set_verifier（用户IN VARCHAR2，验证者IN VARCHAR2，输入IN PLS_INTEGER：= XS_SHA512）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A__GUID-BA329D19-15D3-4DDA-B88A-12B159821653">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A__GUID-2EB56870-C346-43CE-8DBC-1520C1B85A7C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_VERIFIER parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e5331">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e5334">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5339" headers="d116419e5331 ">
                                    <p><code class="codeph">用户</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5339 d116419e5334 ">
                                    <p>为其设置验证程序的应用程序用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5347" headers="d116419e5331 ">
                                    <p><code class="codeph">验证</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5347 d116419e5334 ">
                                    <p>要用作验证程序的字符串。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5355" headers="d116419e5331 ">
                                    <p><code class="codeph">类型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5355 d116419e5334 ">
                                    <p>要使用的验证程序类型。这可以是以下之一：</p>
                                    <p><code class="codeph">XS_SHA512，XS_SALTED_SHA1</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3AF5137E-08F5-44D3-8045-E8CED5AD892A__GUID-08D04274-0474-4DEA-9F9D-4A32B562F97C">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>假设创建名为<code class="codeph">LWUSER3</code>的用户，并使用验证者类型<code class="codeph">XS_SALTED_SHA1</code>设置密码。
                        </p>
                        <p>接下来，查询视图<code class="codeph">DBA_XS_OBJECTS</code>以获取用户<code class="codeph">LWUSER3</code>的ID值。
                        </p><pre class="pre codeblock"><code>SQL&gt;列名格式A10; SQL&gt;列所有者格式A6; SQL&gt;从DBA_XS_OBJECTS中选择NAME，OWNER，ID，TYPE，STATUS，其中NAME ='LWUSER3';姓名所有者ID类型状态---------- ------ ---------- ------------------  - ------- LWUSER3 SYS 2147493770主要有效</code></pre><p>接下来，查询ID为2147493770的用户<code class="codeph">LWUSER3</code>的<code class="codeph">XS$VERIFIERS</code>字典表。
                        </p><pre class="pre codeblock"><code>SQL&gt; column user＃format 9999999999; SQL&gt;列类型#format 99; SQL&gt;列验证器格式A62; SQL&gt;从XS $ VERIFIERS中选择USER＃，VERIFIER，TYPE＃，其中USER＃='2147493770'; USER＃VERIFIER TYPE＃----------- ---------------------------------- ---------------------------- ----- 2147493770 S：14DC0F5ABB72FC869549B1F845C548E0BEF7B863A116DB24DFAE22F0501E 1</code></pre><p>验证程序的值包括其类型值“S”后跟冒号（:)以表示它是<code class="codeph">XS_SALTED_SHA1</code>的验证程序类型，它也表示为＃1类型。
                        </p>
                        <p>使用包括“ <code class="codeph">S:</code> ”的整个验证程序值，为用户<code class="codeph">LWUSER3</code>设置验证程序。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_VERIFIER（'lwuser3'，'S：14DC0F5ABB72FC869549B1F845C548E0BEF7B863A116DB24DFAE22F0501E'，XS_PRINCIPAL.XS_SALTED_SHA1）;结束; / 2 3 4 5 PL / SQL过程成功完成。
</pre><p>要成功完成此过程，验证程序值及其类型必须与正在设置验证程序的用户的<code class="codeph">XS$VERIFIERS</code>字典表的<code class="codeph">VERIFIER</code>列中的信息匹配。请注意，当您更改应用程序用户的密码时，它会自动更改其验证程序值，并选择更改其验证程序类型。
                        </p>
                        <p>前面的示例将验证程序设置为其相同的精确值，以显示所涉及的步骤。只要验证程序值与您设置的验证程序类型匹配，就可以选择将密码验证程序设置为在查询<code class="codeph">XS$VERIFIERS</code>字典表时为应用程序用户显示的任何验证程序值。例如，如果要将验证者值和验证者类型更改为<code class="codeph">XS_SHA512</code> ，请执行以下操作。
                        </p><pre class="pre codeblock"><code>SQL&gt; BEGIN SYS.XS_PRINCIPAL.SET_VERIFIER（ 'lwuser3'， 'T：9BA95FEF2C2630A2BAACF2E7C5E41B0D50CDC7B0B6 0C88AD4FE81F8155D002F99EEAF9D95477E4749870C67FDE870E154ED17809C359777F979E269010823FB 981B2A998915EB1439FE3C6C1542A239C'，XS_PRINCIPAL.XS_SHA512）;结束; / 2 3 4 PL / SQL过程成功完成。
</code></pre><p>请注意，这与为应用程序用户<code class="codeph">LWUSER1</code>设置的验证者值和验证者类型相同，如<a href="configuring-application-users-and-application-roles.html#GUID-6BA62709-3BF9-4DE1-829C-3C4C6EE1B992">为直接应用程序用户帐户设置密码验证程序中</a>所示。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG100"></a><a id="DBFSG101"></a><a id="DBFSG102"></a><a id="DBFSG99999"></a><div class="props_rev_3"><a id="GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5" name="GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5"></a><h4 id="DBFSG-GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5" class="sect4">SET_DESCRIPTION过程</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">SET_DESCRIPTION</code>过程用于设置应用程序主体的描述。
                        </p>
                        <p>您需要<code class="codeph">ALTER USER</code>系统特权才能为应用程序用户运行此过程。您需要<code class="codeph">ALTER ANY ROLE</code>系统特权才能为应用程序角色运行此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5__GUID-8EBA51E5-7A02-407B-A972-12C7D8A1D4B5">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">SET_DESCRIPTION（主要IN VARCHAR2，描述IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5__GUID-2E6ACB0F-B1BF-4EA9-9221-044385F103F0">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5__GUID-3C9795C8-64EA-4128-8C6A-30F7422F21C3">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="SET_DESCRIPTION parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e5591">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e5594">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5599" headers="d116419e5591 ">
                                    <p><code class="codeph">主要</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5599 d116419e5594 ">
                                    <p>为其设置描述的主体的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5607" headers="d116419e5591 ">
                                    <p><code class="codeph">描述</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5607 d116419e5594 ">
                                    <p>关于校长的描述性字符串。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BC64D831-75A8-4041-BE9F-8C9378B21FD5__GUID-EA304E8E-E3A0-47BA-B636-A876B66D390B">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例设置应用程序角色<code class="codeph">HRREP</code>的描述：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.SET_DESCRIPTION（'HRREP'，'人力资源代表角色'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBFSG104"></a><a id="DBFSG105"></a><a id="DBFSG106"></a><a id="DBFSG103"></a><div class="props_rev_3"><a id="GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8" name="GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8"></a><h4 id="DBFSG-GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8" class="sect4">DELETE_PRINCIPAL程序</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">DELETE_PRINCIPAL</code>过程删除应用程序用户或应用程序角色。
                        </p>
                        <p>您需要<code class="codeph">DROP USER</code>系统特权才能为应用程序用户运行此过程。您需要<code class="codeph">DROP ANY ROLE</code>系统特权才能为应用程序角色运行此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8__GUID-C667D3BF-5D3F-4B0B-B455-0A210D45960D">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">delete_principal（principal IN VARCHAR2，delete_option IN PLS_INTEGER：= XS_ADMIN_UTIL.DEFAULT_OPTION）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8__GUID-4F7858CC-1534-4334-9AA2-BFC5E7D67595">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8__GUID-EA0A7CCE-7465-4BE6-892B-CC2E45515624">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="DELETE_PRINCIPAL parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d116419e5777">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d116419e5780">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5785" headers="d116419e5777 ">
                                    <p><code class="codeph">主要</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5785 d116419e5780 ">
                                    <p>要删除的应用程序用户或应用程序角色的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d116419e5793" headers="d116419e5777 ">
                                    <p><code class="codeph">delete_option</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d116419e5793 d116419e5780 ">
                                    <p>要使用的删除选项。可以使用以下选项：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">DEFAULT_OPTION：</code></p>
                                          <p>默认选项允许仅在未在其他地方引用时删除主体。如果有其他实体引用主体，则无法删除主体。</p>
                                          <p>例如，如果尝试删除授予主体的应用程序角色，则删除操作将失败。</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">CASCADE_OPTION</code> ：</p>
                                          <p>级联选项将删除应用程序用户或应用程序角色以及对其的任何引用。删除应用程序用户或应用程序角色的用户也必须具有删除这些引用的权限。</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">ALLOW_INCONSISTENCIES_OPTION：</code></p>
                                          <p>allow inconsistencies选项允许您删除实体，即使其他实体具有对它的后期绑定引用。如果实体是早期依赖项的一部分，则删除失败并引发错误。</p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-15266CE7-B956-438F-87BB-F5D88EF47DE8__GUID-A8C9DF7E-2336-4B60-9410-FE89333FEEBC">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例使用<code class="codeph">DEFAULT_OPTION</code>删除用户<code class="codeph">SMAVRIS</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN SYS.XS_PRINCIPAL.DELETE_PRINCIPAL（'SMAVRIS'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13113.query-transformations.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes the most important optimizer techniques for transforming queries."></meta>
      <meta name="description" content="This chapter describes the most important optimizer techniques for transforming queries."></meta>
      <title>查询转换</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="This chapter describes the most important optimizer techniques for transforming queries."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="query-optimizer-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="query-execution-plans.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="query-optimizer-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="query-execution-plans.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="query-optimizer-fundamentals.html" property="item" typeof="WebPage"><span property="name">查询优化工具基础知识</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">查询转换</li>
            </ol>
            <a id="GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" name="GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0"></a><a id="TGSQL94896"></a>
            
            <h2 id="TGSQL-GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" class="sect2"><span class="enumeration_chapter">5</span>查询转换</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了用于转换查询的最重要的优化器技术。</p>
               <p>优化程序根据成本决定是否使用可用的转换。由于各种原因（包括提示或缺少约束），优化器可能无法进行转换。例如，子查询取消等转换不适用于混合分区表，其中包含不支持约束的外部分区。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-0D5B9093-CDEA-45AC-A607-1F0D8F2615DD">或扩展</a><br>在<code class="codeph">OR</code>扩展中，优化器将包含顶级析取的查询块转换为包含两个或更多分支的<code class="codeph">UNION ALL</code>查询的形式。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD">查看合并</a><br>在<strong class="term">视图合并</strong> ，优化器合并表示的视图到包含它的查询块<strong class="term">查询的块</strong> 。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-D2E2DE0D-A013-41C2-8527-A797B1F35709">谓词推动</a><br>在<strong class="term">谓词推送中</strong> ，优化器将包含查询块的相关谓词“推送”到视图查询块中。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-EBE60A08-5660-44BF-BC89-AD36E941B066">子查询无法解释</a><br>在<strong class="term">子查询中</strong> ，优化程序将嵌套查询转换为等效的连接语句，然后优化连接。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB">使用物化视图重写查询</a><br><strong class="term">物化视图</strong>是存储在表中的查询结果。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-4CB77742-41A2-49D3-A04F-5C79EE237A3A">基于统计的查询转换</a><br>在某些情况下，Oracle数据库可以通过查询表统计信息而不是表本身来满足查询。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421">明星转型</a><br>星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-91434A26-E81E-4609-800B-4E179A63EDBC">内存中聚合（VECTOR GROUP BY）</a><br>内存中聚合的关键优化是在扫描时聚合。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF">游标持续时间临时表</a><br>为了实现查询的中间结果，Oracle数据库可以在查询编译期间在内存中隐式创建<strong class="term">游标持续时间临时表</strong> 。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-6A6748FA-5803-4837-9A9F-525ED09BE481">表扩展</a><br>在<strong class="term">表扩展中</strong> ，优化器生成一个计划，该计划在分区表的读取主要部分上使用索引，但不在表的活动部分上使用索引。
                  </li>
                  <li class="ulchildlink"><a href="query-transformations.html#GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06">加入分解</a><br>在称为<strong class="term">连接因子分解</strong>的基于成本的转换中，优化器可以对来自<code class="codeph">UNION ALL</code>查询的分支的公共计算进行分解。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="query-optimizer-fundamentals.html#GUID-EF45F82A-F17D-4C79-9B6A-8CBBB95F0684" title="要调优Oracle SQL，您必须了解查询优化器。优化器是内置软件，用于确定语句访问数据的最有效方法。">查询优化器基础知识</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL207"></a><a id="TGSQL208"></a><a id="TGSQL94842"></a><a id="TGSQL206"></a><div class="props_rev_3"><a id="GUID-0D5B9093-CDEA-45AC-A607-1F0D8F2615DD" name="GUID-0D5B9093-CDEA-45AC-A607-1F0D8F2615DD"></a><h3 id="TGSQL-GUID-0D5B9093-CDEA-45AC-A607-1F0D8F2615DD" class="sect3"><span class="enumeration_section">5.1</span>或扩展</h3>
               <div>
                  <p>在<code class="codeph">OR</code>扩展中，优化器将包含顶级析取的查询块转换为包含两个或更多分支的<code class="codeph">UNION ALL</code>查询的形式。
                  </p>
                  <p>优化器通过将析取分解为其组件，然后将每个组件与<code class="codeph">UNION ALL</code>查询的分支相关联来实现此目标。优化器可以出于各种原因选择<code class="codeph">OR</code>扩展。例如，它可以启用更有效的访问路径或避免笛卡尔积的替代连接方法。与往常一样，仅当转换语句的开销低于原始语句的开销时，优化器才会执行扩展。
                  </p>
                  <p>在以前的版本中，优化器使用<code class="codeph">CONCATENATION</code>运算符执行<code class="codeph">OR</code>扩展。从<span>Oracle Database 12c</span>第2版（12.2）开始，优化程序使用<code class="codeph">UNION-ALL</code>运算符。该框架提供以下增强功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>实现各种转换之间的交互</p>
                     </li>
                     <li>
                        <p>避免共享查询结构</p>
                     </li>
                     <li>
                        <p>实现各种搜索策略的探索</p>
                     </li>
                     <li>
                        <p>提供成本注释的重用</p>
                     </li>
                     <li>
                        <p>支持标准SQL语法</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-0D5B9093-CDEA-45AC-A607-1F0D8F2615DD__BABJJCIC">
                     <p class="titleinexample">示例5-1已转换的查询：UNION ALL条件</p>
                     <p>要准备此示例，请以管理员身份登录数据库，执行以下语句以向<code class="codeph">hr.departments.department_name</code>列添加唯一约束，然后向<code class="codeph">hr.employees</code>表添加100,000行：</p><pre class="pre codeblock"><code>ALTER TABLE hr.departments ADD CONSTRAINT department_name_uk UNIQUE（department_name）; DELETE FROM hr.employees WHERE employee_id&gt; 999; DECLARE v_counter NUMBER（7）：= 1000;开始为i IN 1..100000 LOOP INSERT INTO hr.employees VALUES（v_counter，null，'Doe'，'Doe'|| v_counter ||'@ example.com'，null，'07 -JUN-02'，' AC_ACCOUNT”，NULL，NULL，NULL，50）; v_counter：= v_counter + 1;结束循环;结束; / COMMIT; EXEC DBMS_STATS.GATHER_TABLE_STATS（ownname =&gt;'hr'，tabname =&gt;'employees'）;</code></pre><p>然后以用户<code class="codeph">hr</code>身份连接，并执行以下查询，该查询将连接<code class="codeph">employees</code>和<code class="codeph">departments</code>表：</p><pre class="pre codeblock"><code>SELECT * FROM employees e，departments d WHERE（e.email ='SSTILES'或d.department_name ='Treasury'）AND e.department_id = d.department_id;</code></pre><p>如果没有<code class="codeph">OR</code>扩展，优化器会将<code class="codeph">e.email='SSTILES' OR d.department_name='Treasury'</code>视为一个单元。因此，优化程序无法在<code class="codeph">e.email</code>或<code class="codeph">d.department_name</code>列上使用索引，因此<code class="codeph">e.email</code> <code class="codeph">employees</code>和<code class="codeph">departments</code>执行全表扫描。
                     </p>
                     <p>通过<code class="codeph">OR</code>扩展，优化器将析取谓词分解为两个独立谓词，如以下示例所示：</p><pre class="pre codeblock"><code>SELECT * FROM employees e，departments d WHERE e.email ='SSTILES'和e.department_id = d.department_id UNION ALL SELECT * FROM employees e，departments d WHERE d.department_name ='Treasury'AND e.department_id = d.department_id ;</code></pre><p>此转换使<code class="codeph">e.email</code>和<code class="codeph">d.department_name</code>列可用作索引键。性能得到改善，因为数据库使用两个唯一索引而不是两个全表扫描来过滤数据，如以下执行计划中所示：</p><pre class="pre codeblock"><code>计划哈希值：2512933241 --------------------------------------------- -------------------------------------------------- | ID |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- --------------------------------------------- | 0 |选择声明| | | | 122（100）| | | 1 |查看| VW_ORE_19FF4E3E | 9102 | 1679K | 122（5）| 00:00:01 | | 2 | UNION-ALL | | | | | | | 3 | NESTED LOOPS | | 1 | 78 | 4（0）| 00:00:01 | | 4 |按INDEX ROWID表的访问权限|员工| 1 | 57 | 3（0）| 00:00:01 | | * 5 | INDEX UNIQUE SCAN | EMP_EMAIL_UK | 1 | | 2（0）| 00:00:01 | | 6 |按INDEX ROWID表的访问权限|部门| 1 | 21 | 1（0）| 00:00:01 | | * 7 | INDEX UNIQUE SCAN | DEPT_ID_PK | 1 | | 0（0）| | | 8 | NESTED LOOPS | | 9101 | 693K | 118（5）| 00:00:01 | | 9 |按INDEX ROWID表的访问权限|部门| 1 | 21 | 1（0）| 00:00:01 | | * 10 | INDEX UNIQUE SCAN | DEPARTMENT_NAME_UK | 1 | | 0（0）| | | * 11 |通过INDEX ROWID BATCHED表的访问权限员工| 9101 | 506K | 117（5）| 00:00：01 | | * 12 | INDEX RANGE SCAN | EMP_DEPARTMENT_IX | 9101 | | 35（6）| 00:00:01 | -------------------------------------------------- ---------------------------------------------谓词信息（由操作ID）：---------------------------------------------- ----- 5  - 访问（“E”。“EMAIL”='SSTILES'）7  - 访问（“E”。“DEPARTMENT_ID”=“D”。“DEPARTMENT_ID”）10  - 访问（“D”。“ DEPARTMENT_NAME“='财政部'）11  - 过滤器（LNNVL（”E“。”EMAIL“='SSTILES'））12  - 访问（”E“。”DEPARTMENT_ID“=”D“。”DEPARTMENT_ID“）选择35行。
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL209"></a><div class="props_rev_3"><a id="GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD" name="GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD"></a><h3 id="TGSQL-GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD" class="sect3"><span class="enumeration_section">5.2</span>查看合并</h3>
               <div>
                  <p>在<strong class="term">视图合并</strong> ，优化器合并表示的视图到包含它的查询块<strong class="term">查询的块</strong> 。
                  </p>
                  <p>通过使优化器能够考虑其他连接顺序，访问方法和其他转换，查看合并可以改进计划。例如，在合并视图并且多个表驻留在一个查询块中之后，视图中的表可能允许优化器使用<a href="glossary.html#GUID-420638C3-79BE-4ED0-955F-B7EF70685DBC"><span class="xrefglossterm">连接消除</span></a>来移除视图外的表。
                  </p>
                  <p>对于某些简单视图，其中合并始终会产生更好的计划，优化程序会自动合并视图而不考虑成本。否则，优化程序使用成本进行确定。优化器可能出于多种原因选择不合并视图，包括成本或有效性限制。</p>
                  <p>如果<code class="codeph">OPTIMIZER_SECURE_VIEW_MERGING</code>为<code class="codeph">true</code> （默认值），则Oracle数据库会执行检查以确保视图合并和谓词推送不会违反视图创建者的安全意图。要为特定视图禁用这些附加安全检查，可以为此视图授予用户<code class="codeph">MERGE VIEW</code>权限。要禁用特定用户的所有视图的其他安全检查，可以向该用户授予<code class="codeph">MERGE ANY VIEW</code>权限。
                  </p>
                  <div class="infoboxnote" id="GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD__GUID-FFE63A81-9918-4A8E-A0CC-7499D026B110">
                     <p class="notep1">注意：</p>
                     <p>您可以使用提示来覆盖由于成本或启发式而拒绝的视图合并，但不是有效性。</p>
                  </div>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-38C9EAE6-4E31-4C11-B090-583DD32CE2ED">查看合并中的查询块</a><br>优化程序通过单独的查询块表示每个嵌套的<strong class="term">子查询</strong>或未合并的视图。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B">简单视图合并</a><br>在<strong class="term">简单视图合并中</strong> ，优化器合并select-project-join视图。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-D6EEB613-F820-4E27-8FEF-CB0A653F703D">复杂视图合并</a><br>在<strong class="term">视图合并中</strong> ，优化器合并包含<code class="codeph">GROUP BY</code>和<code class="codeph">DISTINCT</code>视图的视图。与简单视图合并一样，复杂合并使优化器能够考虑其他连接顺序和访问路径。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD__GUID-EF1046B0-7581-4A82-8DE0-E169FF0A75AD">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">MERGE ANY VIEW</code>和<code class="codeph">MERGE VIEW</code>权限的更多信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">OPTIMIZER_SECURE_VIEW_MERGING</code>初始化参数的详细信息，请<a href="../refrn/OPTIMIZER_SECURE_VIEW_MERGING.html#REFRN10262" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94843"></a><div class="props_rev_3"><a id="GUID-38C9EAE6-4E31-4C11-B090-583DD32CE2ED" name="GUID-38C9EAE6-4E31-4C11-B090-583DD32CE2ED"></a><h4 id="TGSQL-GUID-38C9EAE6-4E31-4C11-B090-583DD32CE2ED" class="sect4"><span class="enumeration_section">5.2.1</span>视图合并中的查询块</h4>
                  <div>
                     <p>优化程序通过单独的查询块表示每个嵌套的<strong class="term">子查询</strong>或未合并的视图。
                     </p>
                     <p>数据库从下到上分别优化查询块。因此，数据库首先优化最内层的查询块，为其生成计划的一部分，然后为外部查询块生成表示整个查询的计划。</p>
                     <p>解析器将查询中引用的每个视图扩展为单独的查询块。该块实质上表示视图定义，因此也表示视图的结果。优化器的一个选项是分别分析视图查询块，生成视图子计划，然后使用视图子计划处理查询的其余部分以生成整体执行计划。但是，此技术可能会导致次优的执行计划，因为视图是单独优化的。</p>
                     <p>查看合并有时可以提高性能。如<span class="q">“ <a href="query-transformations.html#GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B__BABIIIJD">示例5-2</a> ”所示</span> ，视图合并将视图中的表合并到外部查询块中，从而删除内部查询块。因此，不必单独优化视图。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD" title="在视图合并中，优化器将表示视图的查询块合并到包含它的查询块中。">查看合并</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94845"></a><a id="TGSQL94844"></a><div class="props_rev_3"><a id="GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B" name="GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B"></a><h4 id="TGSQL-GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B" class="sect4"><span class="enumeration_section">5.2.2</span>简单视图合并</h4>
                  <div>
                     <p>在<strong class="term">简单视图合并中</strong> ，优化器合并select-project-join视图。
                     </p>
                     <p>例如， <code class="codeph">employees</code>表的查询包含一个子查询，该子查询连接<code class="codeph">departments</code>和<code class="codeph">locations</code>表。
                     </p>
                     <p>由于合并后可用的附加连接顺序和访问路径，经常合并的简单视图会产生更优化的计划。视图可能对简单视图合并无效，因为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该视图包含未包含在select-project-join视图中的构造，包括：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">通过...分组</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">不同</code></p>
                              </li>
                              <li>
                                 <p>外联接</p>
                              </li>
                              <li>
                                 <p><code class="codeph">模型</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">连接</code></p>
                              </li>
                              <li>
                                 <p>设置运营商</p>
                              </li>
                              <li>
                                 <p>聚合</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>视图出现在<a href="glossary.html#GUID-EA539BF9-F0F2-479B-90B5-1855CD8E34B9"><span class="xrefglossterm">半连接</span></a>或<a href="glossary.html#GUID-4EF44AED-32FD-4FF4-9ECB-24F0011A667E"><span class="xrefglossterm">反</span></a> <a href="glossary.html#GUID-EA539BF9-F0F2-479B-90B5-1855CD8E34B9"><span class="xrefglossterm">连接的</span></a> <a href="glossary.html#GUID-4EF44AED-32FD-4FF4-9ECB-24F0011A667E"><span class="xrefglossterm">右侧</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>该视图包含<code class="codeph">SELECT</code>列表中的子查询。
                           </p>
                        </li>
                        <li>
                           <p>外部查询块包含PL / SQL函数。</p>
                        </li>
                        <li>
                           <p>视图参与外部联接，并且不满足确定是否可以合并视图的几个附加有效性要求之一。</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B__BABIIIJD">
                        <p class="titleinexample">示例5-2简单视图合并</p>
                        <p>以下查询将<code class="codeph">hr.employees</code>表与<code class="codeph">dept_locs_v</code>视图连接<code class="codeph">hr.employees</code> ，该视图返回每个部门的街道地址。 <code class="codeph">dept_locs_v</code>是<code class="codeph">departments</code>和<code class="codeph">locations</code>表的连接。
                        </p><pre class="pre codeblock"><code>SELECT e.first_name，e.last_name，dept_locs_v.street_address，dept_locs_v.postal_code FROM employees e，（SELECT d.department_id，d.department_name，l.street_address，l.postal_code FROM departments d，locations l WHERE d.location_id = l。 location_id）dept_locs_v WHERE dept_locs_v.department_id = e.department_id AND e.last_name ='Smith';</code></pre><p>数据库可以通过连接<code class="codeph">departments</code>和<code class="codeph">locations</code>来执行前面的查询，以生成视图的行，然后将此结果连接到<code class="codeph">employees</code> 。由于查询包含视图<code class="codeph">dept_locs_v</code> ，并且此视图包含两个表，因此优化程序必须使用以下连接顺序之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">employees</code> ， <code class="codeph">dept_locs_v</code> （ <code class="codeph">departments</code> ， <code class="codeph">locations</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">employees</code> ， <code class="codeph">dept_locs_v</code> （ <code class="codeph">locations</code> ， <code class="codeph">departments</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">dept_locs_v</code> （ <code class="codeph">departments</code> ， <code class="codeph">locations</code> ）， <code class="codeph">employees</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">dept_locs_v</code> （ <code class="codeph">locations</code> ， <code class="codeph">departments</code> ）， <code class="codeph">employees</code></p>
                           </li>
                        </ul>
                        <p>加入方法也受到限制。对于以<code class="codeph">employees</code>开头的连接订单，基于索引的嵌套循环连接不可行，因为此视图中的列上不存在索引。如果没有视图合并，优化程序将生成以下执行计划：</p><pre class="pre codeblock"><code>-------------------------------------------------- --------------- | Id |操作|名称|成本（％CPU）| -------------------------------------------------- --------------- | 0 |选择声明| | 7（15）| | * 1 | HASH JOIN | | 7（15）| | 2 |按INDEX ROWID表的访问权限|员工| 2（0）| | * 3 | INDEX RANGE SCAN | EMP_NAME_IX | 1（0）| | 4 |查看| | 5（20）| | * 5 | HASH JOIN | | 5（20）| | 6 |表访问完全|地点| 2（0）| | 7 |表访问完全|部门| 2（0）| -------------------------------------------------- ---------------谓词信息（由操作ID标识）：-------------------------- ------------------------- 1  -  access（“DEPT_LOCS_V”。“DEPARTMENT_ID”=“E”。“DEPARTMENT_ID”）3  - 访问（“ E“。”LAST_NAME“='史密斯'）5  - 访问（”D“。”LOCATION_ID“=”L“。”LOCATION_ID“）</code></pre><p>视图合并将视图中的表合并到外部查询块中，从而删除内部查询块。查看合并后，查询如下：</p><pre class="pre codeblock"><code>SELECT e.first_name，e.last_name，l.street_address，l.postal_code FROM employees e，departments d，locations l WHERE d.location_id = l.location_id AND d.department_id = e.department_id AND e.last_name ='Smith';</code></pre><p>由于所有三个表都出现在一个查询块中，因此优化程序可以从以下六个连接顺序中进行选择：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">employees</code> ， <code class="codeph">departments</code> ， <code class="codeph">locations</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">employees</code> ， <code class="codeph">locations</code> ， <code class="codeph">departments</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">departments</code> ， <code class="codeph">employees</code> ， <code class="codeph">locations</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">departments</code> ， <code class="codeph">locations</code> ， <code class="codeph">employees</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">locations</code> ， <code class="codeph">employees</code> ， <code class="codeph">departments</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">locations</code> ， <code class="codeph">departments</code> ， <code class="codeph">employees</code></p>
                           </li>
                        </ul>
                        <p>现在， <code class="codeph">employees</code>和<code class="codeph">departments</code>的联接可以基于索引。在视图合并之后，优化器选择以下更有效的计划，该计划使用嵌套循环：</p><pre class="pre codeblock"><code>-------------------------------------------------- ----------------- | Id |操作|名称|成本（％CPU）| -------------------------------------------------- ----------------- | 0 |选择声明| | 4（0）| | 1 | NESTED LOOPS | | | | 2 | NESTED LOOPS | | 4（0）| | 3 | NESTED LOOPS | | 3（0）| | 4 |按INDEX ROWID表的访问权限|员工| 2（0）| | * 5 | INDEX RANGE SCAN | EMP_NAME_IX | 1（0）| | 6 |按INDEX ROWID表的访问权限|部门| 1（0）| | * 7 | INDEX UNIQUE SCAN | DEPT_ID_PK | 0（0）| | * 8 | INDEX UNIQUE SCAN | LOC_ID_PK | 0（0）| | 9 |按INDEX ROWID表的访问权限|地点| 1（0）| -------------------------------------------------- -----------------谓词信息（由操作ID标识）：------------------------ --------------------------- 5  - 访问（“E”。“LAST_NAME”='史密斯'）7  - 访问（“E” 。“DEPARTMENT_ID”=“D”。“DEPARTMENT_ID”）8  - 访问（“D”。“LOCATION_ID”=“L”。“LOCATION_ID”）</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FE039264-7B1A-42DA-A0E7-7374A510FA9B__GUID-5319C04F-6E6E-445C-B8DD-8A8BB70EE44D">
                        <p class="notep1">也可以看看：</p>
                        <p>位于<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=optimizer_blog" target="_blank"><code class="codeph">https://blogs.oracle.com/optimizer/</code></a>的Oracle Optimizer博客了解外连接视图合并，这是简单视图合并的一个特例</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD" title="在视图合并中，优化器将表示视图的查询块合并到包含它的查询块中。">查看合并</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94847"></a><a id="TGSQL94848"></a><a id="TGSQL94846"></a><div class="props_rev_3"><a id="GUID-D6EEB613-F820-4E27-8FEF-CB0A653F703D" name="GUID-D6EEB613-F820-4E27-8FEF-CB0A653F703D"></a><h4 id="TGSQL-GUID-D6EEB613-F820-4E27-8FEF-CB0A653F703D" class="sect4"><span class="enumeration_section">5.2.3</span>复杂视图合并</h4>
                  <div>
                     <p>在<strong class="term">视图合并中</strong> ，优化器合并包含<code class="codeph">GROUP BY</code>和<code class="codeph">DISTINCT</code>视图的视图。与简单视图合并一样，复杂合并使优化器能够考虑其他连接顺序和访问路径。
                     </p>
                     <p>优化程序可以延迟对<code class="codeph">GROUP BY</code>或<code class="codeph">DISTINCT</code>操作的评估，直到它评估了连接。根据数据特征，延迟这些操作可以改善或恶化性能。如果连接使用过滤器，则延迟操作直到连接后可以减少要执行操作的数据集。尽早评估操作可以减少后续连接要处理的数据量，或者连接可以增加操作要处理的数据量。优化程序使用cost来评估视图合并，并仅在较低成本选项时合并视图。
                     </p>
                     <p>除了成本之外，优化器可能无法执行复杂的视图合并，原因如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>外部查询表没有rowid或唯一列。</p>
                        </li>
                        <li>
                           <p>该视图显示在<code class="codeph">CONNECT BY</code>查询块中。
                           </p>
                        </li>
                        <li>
                           <p>该视图包含<code class="codeph">GROUPING SETS</code> ， <code class="codeph">ROLLUP</code>或<code class="codeph">PIVOT</code>子句。
                           </p>
                        </li>
                        <li>
                           <p>视图或外部查询块包含<code class="codeph">MODEL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-D6EEB613-F820-4E27-8FEF-CB0A653F703D__GUID-A04538AB-A8AE-4ADB-8AB2-A7F9AD56720D">
                        <p class="titleinexample">示例5-3使用GROUP BY的复杂视图连接</p>
                        <p>以下视图使用<code class="codeph">GROUP BY</code>子句：</p><pre class="pre codeblock"><code>CREATE VIEW cust_prod_totals_v AS SELECT SUM（s.quantity_sold）total，s.cust_id，s.prod_id FROM sales s GROUP BY s.cust_id，s.prod_id;</code></pre><p>以下查询查找了购买了至少100件毛皮边饰毛衣的美国所有客户：</p><pre class="pre codeblock"><code>SELECT c.cust_id，c.cust_first_name，c.cust_last_name，c.cust_email FROM customers c，products p，cust_prod_totals_v WHERE c.country_id = 52790 AND c.cust_id = cust_prod_totals_v.cust_id AND cust_prod_totals_v.total&gt; 100 AND cust_prod_totals_v.prod_id = p .prod_id AND p.prod_name ='T3人造毛边修身毛衣';</code></pre><p><code class="codeph">cust_prod_totals_v</code>视图适用于复杂视图合并。合并后，查询如下：</p><pre class="pre codeblock"><code>SELECT c.cust_id，cust_first_name，cust_last_name，cust_email FROM customers c，products p，sales s WHERE c.country_id = 52790 AND c.cust_id = s.cust_id AND s.prod_id = p.prod_id AND p.prod_name ='T3 Faux Fur -Trimmed Sweater'GROUP BY s.cust_id，s.prod_id，p.rowid，c.rowid，c.cust_email，c.cust_last_name，c.cust_first_name，c.cust_id HAVING SUM（s.quantity_sold）&gt; 100;</code></pre><p>转换后的查询比未转换的查询便宜，因此优化器选择合并视图。在未转换的查询中， <code class="codeph">GROUP BY</code>运算符适用于视图中的整个<code class="codeph">sales</code>表。在转换后的查询中， <code class="codeph">products</code>和<code class="codeph">customers</code>的联接会从<code class="codeph">sales</code>表中过滤掉大部分行，因此<code class="codeph">GROUP BY</code>操作的成本较低。连接更加昂贵，因为<code class="codeph">sales</code>表没有减少，但它并不便宜，因为<code class="codeph">GROUP BY</code>操作不会在原始查询中大大减少行集的大小。如果要更改上述任何特征，合并视图可能不再是更低的成本。最终计划不包括视图，如下：</p><pre class="pre codeblock"><code>-------------------------------------------------- ------ | Id |操作|名称|成本（％CPU）| -------------------------------------------------- ------ | 0 |选择声明| | 2101（18）| | * 1 |过滤器| | | | 2 | HASH GROUP BY | | 2101（18）| | * 3 | HASH JOIN | | 2099（18）| | * 4 | HASH JOIN | | 1801（19）| | * 5 |表访问完全|产品| 96（5）| | 6 |表访问完全|销售| 1620（15）| | * 7 |表访问完全|客户| 296（11）| -------------------------------------------------- ------谓词信息（由操作ID标识）：----------------------------------- ---------------- 1  - 过滤器（SUM（“QUANTITY_SOLD”）&gt; 100）3  - 访问（“C”。“CUST_ID”=“CUST_ID”）4  - 访问（“ PROD_ID“=”P“。”PROD_ID“）5  - 过滤器（”P“。”PROD_NAME“='T3人造毛边修身毛衣'）7  - 过滤器（”C“。”COUNTRY_ID“='美国'）</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D6EEB613-F820-4E27-8FEF-CB0A653F703D__GUID-0E0A4E8B-9D0A-4C83-97DA-FF16AFF543A6">
                        <p class="titleinexample">示例5-4使用DISTINCT的复杂视图连接</p>
                        <p>以下<code class="codeph">cust_prod_v</code>视图查询使用<code class="codeph">DISTINCT</code>运算符：</p><pre class="pre codeblock"><code>SELECT c.cust_id，c.cust_first_name，c.cust_last_name，c.cust_email FROM customers c，products p，（SELECT DISTINCT s.cust_id，s.prod_id FROM sales s）cust_prod_v WHERE c.country_id = 52790 AND c.cust_id = cust_prod_v .cust_id AND cust_prod_v.prod_id = p.prod_id AND p.prod_name ='T3 Faux Fur-Trimmed Sweater';</code></pre><p>在确定视图合并产生较低成本计划后，优化程序将查询重写为此等效查询：</p><pre class="pre codeblock"><code>SELECT nwvw.cust_id，nwvw.cust_first_name，nwvw.cust_last_name，nwvw.cust_email FROM（SELECT DISTINCT（c.rowid），p.rowid，s.prod_id，s.cust_id，c.cust_first_name，c.cust_last_name，c.cust_email FROM客户c，产品p，销售s WHERE c.country_id = 52790 AND c.cust_id = s.cust_id AND s.prod_id = p.prod_id AND p.prod_name ='T3 Faux Fur-Trimmed Sweater'）nwvw;</code></pre><p>上述查询的计划如下：</p><pre class="pre codeblock"><code>------------------------------------------- | Id |操作|名称| ------------------------------------------- | 0 |选择声明| | | 1 |查看| VM_NWVW_1 | | 2 | HASH UNIQUE | | | * 3 | HASH JOIN | | | * 4 | HASH JOIN | | | * 5 |表访问完全|产品| | 6 |表访问完全|销售| | * 7 |表访问完全|客户| -------------------------------------------谓词信息（由操作ID标识）：------------------------------------------------ --- 3  - 访问（“C”。“CUST_ID”=“S”。“CUST_ID”）4  - 访问（“S”。“PROD_ID”=“P”。“PROD_ID”）5  - 过滤器（“P” 。“PROD_NAME”='T3人造毛边修身毛衣'）7  - 过滤器（“C”。“COUNTRY_ID”='美国'）</code></pre><p>即使在发生视图合并之后，上一个计划也包含一个名为<code class="codeph">vm_nwvw_1</code>的视图，称为<a href="glossary.html#GUID-D55A3D23-BD08-4112-AF78-98347EF1F0C3"><span class="xrefglossterm">投影视图</span></a> 。投影视图出现在已合并<code class="codeph">DISTINCT</code>视图的查询中，或者<code class="codeph">GROUP BY</code>视图合并到也包含<code class="codeph">GROUP BY</code> ， <code class="codeph">HAVING</code>或聚合的外部查询块中。在后一种情况下，投影视图包含来自原始外部查询块的<code class="codeph">GROUP BY</code> ， <code class="codeph">HAVING</code>和聚合。
                        </p>
                        <p>在前面的投影视图示例中，当优化器合并视图时，它会将<code class="codeph">DISTINCT</code>运算符移动到外部查询块，然后添加几个附加列以保持与原始查询的语义等效。之后，查询只能选择外部查询块的<code class="codeph">SELECT</code>列表中的所需列。优化保留了视图合并的所有好处：所有表都在一个查询块中，优化器可以根据需要在最终连接顺序中置换它们，并且<code class="codeph">DISTINCT</code>操作已延迟到所有连接完成之后。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6045D0F4-79A9-4688-A844-85F225DFA7DD" title="在视图合并中，优化器将表示视图的查询块合并到包含它的查询块中。">查看合并</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL210"></a><div class="props_rev_3"><a id="GUID-D2E2DE0D-A013-41C2-8527-A797B1F35709" name="GUID-D2E2DE0D-A013-41C2-8527-A797B1F35709"></a><h3 id="TGSQL-GUID-D2E2DE0D-A013-41C2-8527-A797B1F35709" class="sect3"><span class="enumeration_section">5.3</span>谓词推动</h3>
               <div>
                  <p>在<strong class="term">谓词推送中</strong> ，优化器将包含查询块的相关谓词“推送”到视图查询块中。
                  </p>
                  <p>对于未合并的视图，此技术可改进未合并视图的子计划。数据库可以使用推入的谓词来访问索引或用作过滤器。</p>
                  <p>例如，假设您创建一个表<code class="codeph">hr.contract_workers</code> ，如下所示：</p><pre class="pre codeblock"><code>DROP TABLE contract_workers; CREATE TABLE contract_workers AS（SELECT * FROM employees，其中1 = 2）; INSERT INTO contract_workers VALUES（306，'Bill'，'Jones'，'BJONES'，'555.555.2000'，'07 -JUN-02'，'AC_ACCOUNT'，8300,0,205,110）; INSERT INTO contract_workers VALUES（406，'Jill'，'Ashworth'，'JASHWORTH'，'555.999.8181'，'09 -JUN-05'，'AC_ACCOUNT'，8300,0,205,50）; INSERT INTO contract_workers VALUES（506，'Marcie'，'Lunsford'，'MLUNSFORD'，'555.888.2233'，'22 -JUL-01'，'AC_ACCOUNT'，8300,0,205,110）;承诺;关于contract_workers（department_id）的CREATE INDEX contract_workers_index;</code></pre><p>您创建一个引用<code class="codeph">employees</code>和<code class="codeph">contract_workers</code>工作者的视图。视图使用<code class="codeph">UNION</code>集合运算符定义，如下所示：</p><pre class="pre codeblock"><code>CREATE VIEW all_employees_vw AS（SELECT employee_id，last_name，job_id，commission_pct，department_id FROM employees）UNION（SELECT employee_id，last_name，job_id，commission_pct，department_id FROM contract_workers）;</code></pre><p>然后，您按如下方式查询视图：</p><pre class="pre codeblock"><code>SELECT last_name FROM all_employees_vw WHERE <span class="bold">department_id = 50</span> ;</code></pre><p>由于视图是<code class="codeph">UNION</code>集查询，因此优化程序无法将视图的查询合并到访问查询块中。相反，优化器可以通过将其谓词<code class="codeph">WHERE</code>子句条件<code class="codeph">department_id=50</code>推入视图的<code class="codeph">UNION</code>集查询来转换访问语句。等效的转换查询如下：</p><pre class="pre codeblock"><code>SELECT last_name FROM（SELECT employee_id，last_name，job_id，commission_pct，department_id FROM employees WHERE <span class="bold">department_id = 50</span> UNION SELECT employee_id，last_name，job_id，commission_pct，department_id FROM contract_workers WHERE <span class="bold">department_id = 50</span> ）;</code></pre><p>转换后的查询现在可以考虑每个查询块中的索引访问。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL211"></a><div class="props_rev_3"><a id="GUID-EBE60A08-5660-44BF-BC89-AD36E941B066" name="GUID-EBE60A08-5660-44BF-BC89-AD36E941B066"></a><h3 id="TGSQL-GUID-EBE60A08-5660-44BF-BC89-AD36E941B066" class="sect3"><span class="enumeration_section">5.4</span>子查询无法解释</h3>
               <div>
                  <p>在<strong class="term">子查询中</strong> ，优化程序将嵌套查询转换为等效的连接语句，然后优化连接。
                  </p>
                  <p>此转换使优化器能够在访问路径，连接方法和连接顺序选择期间考虑子查询表。仅当结果join语句保证返回与原始语句相同的行，并且子查询不包含聚合函数（如<code class="codeph">AVG</code> ，优化程序才能执行此转换。</p>
                  <p>例如，假设您以用户<code class="codeph">sh</code>身份连接并执行以下查询：</p><pre class="pre codeblock"><code>SELECT * FROM sales WHERE cust_id IN（SELECT cust_id FROM customers）;</code></pre><p>因为<code class="codeph">customers.cust_id</code>列是主键，所以优化器可以将复杂查询转换为以下连接语句，该语句保证返回相同的数据：</p><pre class="pre codeblock"><code>选择销售。* FROM销售，客户WHERE sales.cust_id = customers.cust_id;</code></pre><p>如果优化器无法将复杂语句转换为连接语句，则它会选择父语句和子查询的执行计划，就好像它们是单独的语句一样。然后，优化器执行子查询并使用返回的行来执行父查询。为了提高整体执行计划的执行速度，优化程序有效地对子计划进行排序。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL212"></a><div class="props_rev_3"><a id="GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB" name="GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB"></a><h3 id="TGSQL-GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB" class="sect3"><span class="enumeration_section">5.5</span>使用物化视图重写查询</h3>
               <div>
                  <p><strong class="term">物化视图</strong>是存储在表中的查询结果。
                  </p>
                  <p>当优化器找到与与实例化视图关联的查询兼容的用户查询时，数据库可以根据实例化视图重写查询。此技术改进了查询执行，因为数据库已预先计算了大部分查询结果。</p>
                  <p>优化程序查找与用户查询兼容的实体化视图，然后使用基于成本的算法选择实体化视图以重写查询。除非物化视图的成本低于使用物化视图生成的计划，否则优化程序在计划生成时不会重写查询。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-D43AE3AB-0778-49EA-9C8D-983F0910FE05">关于查询重写和优化程序</a><br>查询经过多次检查以确定它是否是查询重写的候选者。如果查询未通过任何检查，则查询将应用于详细信息表而不是物化视图。在响应时间和处理能力方面，无法重写可能代价高昂。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-51E02736-2656-4F44-8392-98980067A97F">关于查询重写的初始化参数</a><br>查询重写行为由某些数据库初始化参数控制。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-34CBC168-E1C8-4983-B271-0AB0B639CE7D">关于查询重写的准确性</a><br>查询重写提供三个级别的重写完整性，由初始化参数<code class="codeph">QUERY_REWRITE_INTEGRITY</code> 。</li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-19F8E323-0EE4-45AE-A88D-D29E76420206">查询重写示例</a><br>此示例说明了使用实体化视图重写查询的强大功能。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB__GUID-D965CAB2-A6F5-40C6-BE2A-1DF5991C4371">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../dwhsg/basic-query-rewrite-materialized-views.html#DWHSG-GUID-DB76286B-8557-446B-A6CC-BC987C378076" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a> ，了解有关查询重写的更多信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-D43AE3AB-0778-49EA-9C8D-983F0910FE05" name="GUID-D43AE3AB-0778-49EA-9C8D-983F0910FE05"></a><h4 id="TGSQL-GUID-D43AE3AB-0778-49EA-9C8D-983F0910FE05" class="sect4"><span class="enumeration_section">5.5.1</span>关于查询重写和优化器</h4>
                  <div>
                     <p>查询经过多次检查以确定它是否是查询重写的候选者。如果查询未通过任何检查，则查询将应用于详细信息表而不是物化视图。在响应时间和处理能力方面，无法重写可能代价高昂。</p>
                     <p>优化程序使用两种不同的方法来确定何时根据实例化视图重写查询。第一种方法将查询的SQL文本与实例化视图定义的SQL文本相匹配。如果第一个方法失败，则优化程序使用更通用的方法来比较查询和物化视图之间的连接，选择，数据列，分组列和聚合函数。</p>
                     <p>查询重写对以下类型的SQL语句中的查询和子查询进行操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">选择</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE TABLE ... AS SELECT</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">插入...选择</code> 
                           </p>
                        </li>
                     </ul>
                     <p>它还对集合运算符<code class="codeph">UNION</code> ， <code class="codeph">UNION ALL</code> ， <code class="codeph">INTERSECT</code>和<code class="codeph">MINUS</code>子查询以及DML语句（如<code class="codeph">INSERT</code> ， <code class="codeph">DELETE</code>和<code class="codeph">UPDATE</code>子查询进行操作。</p>
                     <p>维度，约束和重写完整性级别会影响是否重写查询以使用实例化视图。此外，可以通过<code class="codeph">REWRITE</code>和<code class="codeph">NOREWRITE</code>提示以及<code class="codeph">QUERY_REWRITE_ENABLED</code>会话参数启用或禁用查询重写。
                     </p>
                     <p><code class="codeph">DBMS_MVIEW.EXPLAIN_REWRITE</code>过程建议是否可以对查询进行查询重写，如果可以，则建议使用哪些实例化视图。它还解释了为什么无法重写查询。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB" title="物化视图是存储在表中的查询结果。">使用实体化视图查询重写</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-51E02736-2656-4F44-8392-98980067A97F" name="GUID-51E02736-2656-4F44-8392-98980067A97F"></a><h4 id="TGSQL-GUID-51E02736-2656-4F44-8392-98980067A97F" class="sect4"><span class="enumeration_section">5.5.2</span>关于Query Rewrite的初始化参数</h4>
                  <div>
                     <p>查询重写行为由某些数据库初始化参数控制。</p>
                     <div class="tblformal" id="GUID-51E02736-2656-4F44-8392-98980067A97F__GUID-A20BF7CE-ECB9-4FA6-9237-34D926C834C3">
                        <p class="titleintable">表5-1控制查询重写行为的初始化参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="控制查询重写行为的初始化参数" border="1" summary="This table describes the initialization parameters that control query rewrite behavior." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d16801e2267">初始化参数名称</th>
                                 <th align="left" valign="bottom" width="20%" id="d16801e2269">初始化参数值</th>
                                 <th align="left" valign="bottom" width="20%" id="d16801e2271">查询重写的行为</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d16801e2275" headers="d16801e2267 "><code class="codeph">OPTIMIZER_MODE</code></td>
                                 <td align="left" valign="top" width="20%" headers="d16801e2275 d16801e2269 "><code class="codeph">ALL_ROWS</code> （默认）， <code class="codeph">FIRST_ROWS</code>或<code class="codeph">FIRST_ROWS_</code> <span class="italic"><code class="codeph">n</code></span></td>
                                 <td align="left" valign="top" width="20%" headers="d16801e2275 d16801e2271 ">
                                    <p>将<code class="codeph">OPTIMIZER_MODE</code>设置为<code class="codeph">FIRST_ROWS</code> ，优化程序会使用成本和启发式方法的组合来查找快速交付前几行的最佳计划。设置为<code class="codeph">FIRST_ROWS_</code> <span class="italic"><code class="codeph">n</code></span> ，优化程序使用基于成本的方法，并以最佳响应时间为目标进行优化，以返回前<span class="italic"><code class="codeph">n</code></span>行（其中n = 1,10,100,1000）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d16801e2310" headers="d16801e2267 "><code class="codeph">QUERY_REWRITE_ENABLED</code></td>
                                 <td align="left" valign="top" width="20%" headers="d16801e2310 d16801e2269 "><code class="codeph">TRUE</code> （默认值）， <code class="codeph">FALSE</code>或<code class="codeph">FORCE</code></td>
                                 <td align="left" valign="top" width="20%" headers="d16801e2310 d16801e2271 ">
                                    <p>此选项启用优化程序的查询重写功能，使优化程序能够利用实例化视图来增强性能。如果设置为<code class="codeph">FALSE</code> ，则此选项将禁用优化程序的查询重写功能，并指示优化程序不使用实例化视图重写查询，即使unrewritten查询的估计查询成本较低也是如此。
                                    </p>
                                    <p>如果设置为<code class="codeph">FORCE</code> ，则此选项启用优化程序的查询重写功能，并指示优化程序使用实例化视图重写查询，即使unrewritten查询的估计查询成本较低也是如此。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d16801e2334" headers="d16801e2267 "><code class="codeph">QUERY_REWRITE_INTEGRITY</code></td>
                                 <td align="left" valign="top" width="20%" headers="d16801e2334 d16801e2269 "><code class="codeph">STALE_TOLERATED</code> ， <code class="codeph">TRUSTED</code>或<code class="codeph">ENFORCED</code> （默认）</td>
                                 <td align="left" valign="top" width="20%" headers="d16801e2334 d16801e2271 ">
                                    <p>此参数是可选的。但是，如果已设置，则该值必须是“初始化参数值”列中指定的值之一。</p>
                                    <p>默认情况下，完整性级别设置为<code class="codeph">ENFORCED</code> 。在此模式下，必须验证所有约束。因此，如果您使用<code class="codeph">ENABLE NOVALIDATE RELY</code> ，某些类型的查询重写可能无效。要在此环境中启用查询重写（尚未验证约束），应将完整性级别设置为较低的粒度级别，例如<code class="codeph">TRUSTED</code>或<code class="codeph">STALE_TOLERATED</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="query-transformations.html#GUID-34CBC168-E1C8-4983-B271-0AB0B639CE7D" title="查询重写提供三个级别的重写完整性，由初始化参数QUERY_REWRITE_INTEGRITY控制。">关于查询重写的准确性</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB" title="物化视图是存储在表中的查询结果。">使用实体化视图查询重写</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-34CBC168-E1C8-4983-B271-0AB0B639CE7D" name="GUID-34CBC168-E1C8-4983-B271-0AB0B639CE7D"></a><h4 id="TGSQL-GUID-34CBC168-E1C8-4983-B271-0AB0B639CE7D" class="sect4"><span class="enumeration_section">5.5.3</span>关于查询重写的准确性</h4>
                  <div>
                     <p>查询重写提供三个级别的重写完整性，由初始化参数<code class="codeph">QUERY_REWRITE_INTEGRITY</code> 。</p>
                     <p>您可以为<code class="codeph">QUERY_REWRITE_INTEGRITY</code>参数设置的值如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ENFORCED</code></p>
                           <p>这是默认模式。优化程序仅使用物化视图中的新数据，并仅使用基于<code class="codeph">ENABLED VALIDATED</code>主键，唯一键或外键约束的那些关系。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">可信</code></p>
                           <p>在<code class="codeph">TRUSTED</code>模式下，优化器信任在维度和<code class="codeph">RELY</code>约束中声明的关系是正确的。在此模式下，优化程序还使用基于视图的预构建物化视图或物化视图，并使用未强制执行的关系以及强制执行的关系。它还信任使用维度指定的<code class="codeph">ENABLED VALIDATED</code>声明但不是<code class="codeph">ENABLED VALIDATED</code>主要或唯一键约束和数据关系。此模式提供更强的查询重写功能，但如果您声明的任何可信关系不正确，也会产生不正确结果的风险。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">STALE_TOLERATED</code></p>
                           <p>在<code class="codeph">STALE_TOLERATED</code>模式下，优化程序使用有效但具有过时数据的<code class="codeph">STALE_TOLERATED</code>化视图以及包含新数据的视图。此模式提供最大重写功能，但会产生产生不准确结果的风险。
                           </p>
                        </li>
                     </ul>
                     <p>如果将重写完整性设置为最安全的级别<code class="codeph">ENFORCED</code> ，则优化程序仅使用强制主键约束和参照完整性约束来确保查询结果与直接访问详细信息表时的结果相同。
                     </p>
                     <p>如果重写完整性设置为<code class="codeph">ENFORCED</code>以外的<code class="codeph">ENFORCED</code> ，则有几种情况下重写的输出可能与没有重写的输出不同：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>物化视图可能与数据的主副本不同步。这通常是因为物化视图刷新过程在对物化视图的一个或多个详细信息表进行批量加载或DML操作之后处于未决状态。在某些数据仓库站点，这种情况是可取的，因为某些物化视图在某些时间间隔刷新并不罕见。</p>
                        </li>
                        <li>
                           <p>维度对象隐含的关系无效。例如，层次结构中某个级别的值不会累积到恰好一个父值。</p>
                        </li>
                        <li>
                           <p>存储在预构建的物化视图表中的值可能不正确。</p>
                        </li>
                        <li>
                           <p>由于未强制的表或视图约束定义的错误数据关系，可能会出现错误的答案。</p>
                        </li>
                     </ul>
                     <p>您可以在初始化参数文件中或使用<code class="codeph">ALTER SYSTEM</code>或<code class="codeph">ALTER SESSION</code>语句设置<code class="codeph">QUERY_REWRITE_INTEGRITY</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB" title="物化视图是存储在表中的查询结果。">使用实体化视图查询重写</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-19F8E323-0EE4-45AE-A88D-D29E76420206" name="GUID-19F8E323-0EE4-45AE-A88D-D29E76420206"></a><h4 id="TGSQL-GUID-19F8E323-0EE4-45AE-A88D-D29E76420206" class="sect4"><span class="enumeration_section">5.5.4</span>查询重写示例</h4>
                  <div>
                     <p>此示例说明了使用实体化视图重写查询的强大功能。</p>
                     <div class="section">
                        <p>请考虑以下物化视图<code class="codeph">cal_month_sales_mv</code> ，它提供每月销售的美元金额的汇总：</p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW cal_month_sales_mv ENABLE QUERY REWRITE as SELECT t.calendar_month_desc，SUM（s.amount_sold）AS $ FROM sales s，times t WHERE s.time_id = t.time_id GROUP BY t.calendar_month_desc;</code></pre><p>让我们假设，在一个典型的月份，商店的销售数量约为一百万。因此，此物化聚合视图具有针对每个月销售的美元金额的预先计算的聚合。</p>
                        <p>请考虑以下查询，该查询要求每个日历月在商店销售的金额总和：</p><pre class="pre codeblock"><code>SELECT t.calendar_month_desc，SUM（s.amount_sold）FROM sales s，times t WHERE s.time_id = t.time_id GROUP BY t.calendar_month_desc;</code></pre><p>如果没有先前的物化视图和查询重写功能，Oracle数据库必须直接访问<code class="codeph">sales</code>表并计算<code class="codeph">sales</code>金额的总和以返回结果。这涉及从<code class="codeph">sales</code>表中读取数百万行，由于磁盘访问，这将总是增加查询响应时间。查询中的连接还将进一步减慢查询响应，因为需要在数百万行上计算连接。
                        </p>
                        <p>在物化视图<code class="codeph">cal_month_sales_mv</code>存在的情况下，查询重写将透明地将以前的查询重写为以下查询：</p><pre class="pre codeblock"><code>SELECT calendar_month，dollar FROM cal_month_sales_mv;</code></pre><p>由于物化视图中只有几十行<code class="codeph">cal_month_sales_mv</code>且没有连接，因此Oracle数据库会立即返回结果。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C736EE4D-336F-44A4-98CC-CC826103CBCB" title="物化视图是存储在表中的查询结果。">使用实体化视图查询重写</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-4CB77742-41A2-49D3-A04F-5C79EE237A3A" name="GUID-4CB77742-41A2-49D3-A04F-5C79EE237A3A"></a><h3 id="TGSQL-GUID-4CB77742-41A2-49D3-A04F-5C79EE237A3A" class="sect3"><span class="enumeration_section">5.6</span>基于统计的查询转换</h3>
               <div>
                  <p>在某些情况下，Oracle数据库可以通过查询表统计信息而不是表本身来满足查询。</p>
                  <p>基于统计的转换的优点是表统计信息通常比表小得多。元数据查询的性能不依赖于表中的行数，因此对于大型表，可以更好地扩展。</p>
                  <p>表统计信息包括行数和列级详细信息，例如最小值和最大值以及不同值（NDV）的数量。如果数据库知道统计信息是最新的，那么数据库可能会使用统计信息回答某些查询。数据库是否选择转换取决于几个内部因素，包括以下因素：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>聚合类型</p>
                        <p>例如，聚合可以是<code class="codeph">MIN</code> ， <code class="codeph">MAX</code> ， <code class="codeph">COUNT</code>或<code class="codeph">APPROXIMATE_COUNT_DISTINCT</code> 。</p>
                     </li>
                     <li>
                        <p>统计数据的准确性</p>
                        <p>当数据可能与统计信息不匹配时，优化程序不会执行转换。可能导致统计信息不准确的因素包括部分（采样）统计信息，在上次统计信息收集后发生DML，导入统计信息以及使用<code class="codeph">DBMS_STATS.SET_STATS</code>生成的人工统计信息。</p>
                     </li>
                     <li>
                        <p>查询类型</p>
                        <p>优化程序统计信息不保留有关一组值的聚合信息。例如， <code class="codeph">WHERE</code>子句谓词可能会阻止优化器选择转换。
                        </p>
                     </li>
                     <li>
                        <p>查询的位置</p>
                        <p>当查询在事务内时，优化器无法选择转换。</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-4CB77742-41A2-49D3-A04F-5C79EE237A3A__GUID-3682B894-DB77-49ED-A764-15CA927C72EA">
                     <p class="titleinexample">示例5-5示例查询</p>
                     <p>假设<code class="codeph">sales</code>表有8100万行。您发出以下查询：</p><pre class="pre codeblock"><code>SELECT MAX（amt），MAX（交易量）FROM sales;</code></pre><p>如果统计信息是最新的，则数据库可以将此查询转换为数据字典表的查询。在以下计划中，视图前缀为<code class="codeph">VW_SQT_</code>表示可以进行基于统计的转换：</p><pre class="pre codeblock"><code>-------------------------------------------------- ------------------------------ | Id |操作|名称|行|字节|成本（％CPU）| -------------------------------------------------- ------------------------------ | 0 |选择声明| | | | 636（100）| | 1 |查看| <span class="bold">VW_SQT_65BBF4BE</span> | 1 | 26 | 624（76）| | 2 | SORT AGGREGATE | | 1 | 7 | | | 3 | PX COORDINATOR | | | | | | 4 | PX SEND QC（RANDOM）| ：TQ10000 | 1 | 7 | | | 5 | SORT AGGREGATE | | 1 | 7 | | | 6 | PX BLOCK ITERATOR | | 81M | 546M | 624（76）| | 7 |表访问完全|销售| 81M | 546M | 624（76）| -------------------------------------------------- ------------------------------</code></pre><p><code class="codeph">VW_SQT_65BBF4BE</code>视图不能<span class="italic">证明</span>数据库从数据字典中检索统计信息，因为DML语句可能阻止了它。该计划表明数据库可能已扫描<code class="codeph">sales</code>表。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL94897"></a><div class="props_rev_3"><a id="GUID-EA178F1F-7564-4621-B884-19A202943421" name="GUID-EA178F1F-7564-4621-B884-19A202943421"></a><h3 id="TGSQL-GUID-EA178F1F-7564-4621-B884-19A202943421" class="sect3"><span class="enumeration_section">5.7</span>星变换</h3>
               <div>
                  <p>星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-76B6B58B-24B0-4DFE-AC1B-CFAC4D93C55A">关于Star Schemas</a><br><span class="bold">星型模式</span>将数据划分为事实和维度。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-2F24744C-EA75-4BC5-B065-B7181CB9299B">星变换的目的</a><br>在事实和维度表的连接中，星形转换可以避免事实表的完整扫描。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-959DE4A3-3536-470C-90D2-855E62EB85CB">星变换如何运作</a><br>星型转换添加子查询谓词，称为<span class="bold">位图半连接谓词</span> ，对应于约束维度。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-E4A7FDE1-9C5C-4E37-8C62-738F725E0E8F">星变换的控制</a><br><code class="codeph">STAR_TRANSFORMATION_ENABLED</code>初始化参数控制星形转换。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D">明星转型：场景</a><br>此方案演示了星型查询的星形转换。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-BAE74D96-194A-4168-9490-33523BB10C1C">临时表转换：场景</a><br>在上述方案中，优化程序不会将表<code class="codeph">channels</code>连接回<code class="codeph">sales</code>表，因为它未在外部引用，并且<code class="codeph">channel_id</code>是唯一的。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94899"></a><a id="TGSQL94898"></a><div class="props_rev_3"><a id="GUID-76B6B58B-24B0-4DFE-AC1B-CFAC4D93C55A" name="GUID-76B6B58B-24B0-4DFE-AC1B-CFAC4D93C55A"></a><h4 id="TGSQL-GUID-76B6B58B-24B0-4DFE-AC1B-CFAC4D93C55A" class="sect4"><span class="enumeration_section">5.7.1</span>关于星型模式</h4>
                  <div>
                     <p><span class="bold">星型模式</span>将数据划分为事实和维度。
                     </p>
                     <p>事实是对诸如销售之类的事件的测量，并且通常是数字。维度是标识事实的类别，例如日期，位置和产品。</p>
                     <p>事实表具有由模式的维度表的主键组成的复合键。维度表充当查找表或引用表，使您可以选择约束查询的值。</p>
                     <p>图表通常显示一个中心事实表，其中的线条将其连接到维度表，从而呈现出星形的外观。下图显示<code class="codeph">sales</code>作为事实表， <code class="codeph">products</code> ， <code class="codeph">times</code> ， <code class="codeph">customers</code>和<code class="codeph">channels</code>作为维度表。
                     </p>
                     <div class="figure" id="GUID-76B6B58B-24B0-4DFE-AC1B-CFAC4D93C55A__BABIFIGF">
                        <p class="titleinfigure">图5-1星型模式</p><img src="img/dwhsg007.gif" alt="下面是图5-1的描述" title="下面是图5-1的描述" longdesc="img_text/dwhsg007.html"><br><a href="img_text/dwhsg007.html">“图5-1星型模式”的描述</a></div>
                     <!-- class="figure" -->
                     <p><a href="glossary.html#GUID-67C99435-C3A9-4314-8533-D95973B6F12F"><span class="xrefglossterm">雪花模式</span></a>是星型模式，维度表在其中引用其他表。<a href="glossary.html#GUID-C78984EF-7A22-4DDC-A3F8-DBF9FB904BDF"><span class="xrefglossterm">暴风雪模式</span></a>是雪花模式的组合。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-76B6B58B-24B0-4DFE-AC1B-CFAC4D93C55A__GUID-E202C3B2-8E47-4722-B553-4253838BE67E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=DWHSG9069" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a> ，了解有关星型模式的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">星形转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94900"></a><div class="props_rev_3"><a id="GUID-2F24744C-EA75-4BC5-B065-B7181CB9299B" name="GUID-2F24744C-EA75-4BC5-B065-B7181CB9299B"></a><h4 id="TGSQL-GUID-2F24744C-EA75-4BC5-B065-B7181CB9299B" class="sect4"><span class="enumeration_section">5.7.2</span>星变换的目的</h4>
                  <div>
                     <p>在事实和维度表的连接中，星形转换可以避免事实表的完整扫描。</p>
                     <p>星型转换通过仅提取连接到约束维度行的相关事实行来提高性能。在某些情况下，查询在维度表的其他列上具有限制性过滤器。过滤器的组合可以显着减少数据库从事实表中处理的数据集。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">星形转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94901"></a><div class="props_rev_3"><a id="GUID-959DE4A3-3536-470C-90D2-855E62EB85CB" name="GUID-959DE4A3-3536-470C-90D2-855E62EB85CB"></a><h4 id="TGSQL-GUID-959DE4A3-3536-470C-90D2-855E62EB85CB" class="sect4"><span class="enumeration_section">5.7.3</span>星形转换的工作<span class="enumeration_section">原理</span></h4>
                  <div>
                     <p>星型转换添加子查询谓词，称为<span class="bold">位图半连接谓词</span> ，对应于约束维度。
                     </p>
                     <p>当事实连接列上存在索引时，优化器会执行转换。通过驱动子查询提供的键值的位图<code class="codeph">AND</code>和<code class="codeph">OR</code>运算，数据库只需要从事实表中检索相关的行。如果维度表上的谓词过滤掉重要数据，则转换可能比事实表上的完整扫描更有效。
                     </p>
                     <p>在数据库从事实表中检索相关行之后，数据库可能需要使用原始谓词将这些行连接回维度表。满足以下条件时，数据库可以消除维度表的连接：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>维度表上的所有谓词都是半连接子查询谓词的一部分。</p>
                        </li>
                        <li>
                           <p>从子查询中选择的列是唯一的。</p>
                        </li>
                        <li>
                           <p>维列不在<code class="codeph">SELECT</code>列表， <code class="codeph">GROUP BY</code>子句中，依此类推。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">星形转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94902"></a><div class="props_rev_3"><a id="GUID-E4A7FDE1-9C5C-4E37-8C62-738F725E0E8F" name="GUID-E4A7FDE1-9C5C-4E37-8C62-738F725E0E8F"></a><h4 id="TGSQL-GUID-E4A7FDE1-9C5C-4E37-8C62-738F725E0E8F" class="sect4"><span class="enumeration_section">5.7.4</span>星形转换的控制</h4>
                  <div>
                     <p><code class="codeph">STAR_TRANSFORMATION_ENABLED</code>初始化参数控制星形转换。
                     </p>
                     <p>此参数采用以下值：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">真正</code></p>
                           <p>优化程序通过自动识别事实和约束维度表来执行星形转换。仅当转换计划的成本低于备选方案时，优化程序才执行星形转换。此外，只要实现提高了性能，优化程序就会自动尝试临时表转换（请参阅<span class="q">“ <a href="query-transformations.html#GUID-BAE74D96-194A-4168-9490-33523BB10C1C" title="在上述方案中，优化程序不会将表通道连接回sales表，因为它未在外部引用，并且channel_id是唯一的。">临时表转换：方案</a> ”</span> ）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">false</code> （默认）</p>
                           <p>优化器不执行星形转换。</p>
                        </li>
                        <li>
                           <p><code class="codeph">TEMP_DISABLE</code></p>
                           <p>除非优化程序不尝试临时表转换，否则此值与<code class="codeph">true</code>相同。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E4A7FDE1-9C5C-4E37-8C62-738F725E0E8F__GUID-6AA338AA-9AED-4622-B90B-A7870A3D1416">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN10213" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">STAR_TRANSFORMATION_ENABLED</code>初始化参数</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">星形转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94904"></a><a id="TGSQL94905"></a><a id="TGSQL94906"></a><a id="TGSQL94903"></a><div class="props_rev_3"><a id="GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D" name="GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D"></a><h4 id="TGSQL-GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D" class="sect4"><span class="enumeration_section">5.7.5</span>星变换：场景</h4>
                  <div>
                     <p>此方案演示了星型查询的星形转换。</p>
                     <div class="example" id="GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D__BABFHIIH">
                        <p class="titleinexample">例5-6 Star Query</p>
                        <p>以下查询查找1999年第一季度和第二季度加利福尼亚州所有城市的互联网销售总额：</p><pre class="pre codeblock"><code>SELECT c.cust_city，t.calendar_quarter_desc，SUM（s.amount_sold）sales_amount FROM sales s，times t，customers c，channels ch WHERE s.time_id = t.time_id AND s.cust_id = c.cust_id AND s.channel_id = ch .channel_id AND c.cust_state_province ='CA'和ch.channel_desc ='Internet'AND t.calendar_quarter_desc IN（'1999-01'，'1999-02'）GROUP BY c.cust_city，t.calendar_quarter_desc;</code></pre><p>示例输出如下：</p><pre class="pre codeblock"><code>CUST_CITY CALENDA SALES_AMOUNT ------------------------------ ------- ---------- -  Montara 1999-02 1618.01 Pala 1999-01 3263.93 Cloverdale 1999-01 52.64 Cloverdale 1999-02 266.28。 。 。
</code></pre><p>在此示例中， <code class="codeph">sales</code>是事实表，其他表是维度表。<code class="codeph">sales</code>表每次销售产品时都包含一行，因此可以想象它包含数十亿的销售记录。但是，在指定的季度，只有少数产品通过互联网销售给加利福尼亚州的客户。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D__BABDEJJD">
                        <p class="titleinexample">例5-7星变换</p>
                        <p>此示例显示了<a href="query-transformations.html#GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D__BABFHIIH">示例5-6中</a>查询的星形转换。转换避免了<code class="codeph">sales</code>的全表扫描。
                        </p><pre class="pre codeblock"><code>SELECT c.cust_city，t.calendar_quarter_desc，SUM（s.amount_sold）sales_amount FROM sales s，times t，customers c WHERE s.time_id = t.time_id AND s.cust_id = c.cust_id AND c.cust_state_province ='CA'AND t.calendar_quarter_desc IN（'1999-01'，'1999-02'）AND s.time_id IN（SELECT time_id FROM times WHERE calendar_quarter_desc IN（'1999-01'，'1999-02'））AND s.cust_id IN（ SELECT cust_id FROM customers WHERE cust_state_province ='CA'）AND s.channel_id IN（SELECT channel_id FROM channels WHERE channel_desc ='Internet'）GROUP BY c.cust_city，t.calendar_quarter_desc;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D__BABJECFB">
                        <p class="titleinexample">例5-8星变换的部分执行计划</p>
                        <p>此示例显示了<a href="query-transformations.html#GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D__BABDEJJD">示例5-7中</a>星形转换的执行计划的编辑版本。
                        </p>
                        <p>第26行显示<code class="codeph">sales</code>表具有索引访问路径而不是全表扫描。对于由<code class="codeph">channels</code> （第14行）， <code class="codeph">times</code> （第19行）和<code class="codeph">customers</code> （第24行）的子查询产生的每个键值，数据库从<code class="codeph">sales</code>事实表上的索引检索位图（第15,20,25行） 。
                        </p>
                        <p>位图中的每个位对应于事实表中的一行。当子查询中的键值与事实表的行中的值相同时，将设置该位。例如， <code class="codeph">101000...</code>图<code class="codeph">101000...</code> （省略号表示其余行的<code class="codeph">0</code> ）中，事实表的第1行和第3行具有来自子查询的匹配键值。
                        </p>
                        <p>第12,17和22行中的操作遍历子查询中的键并检索相应的位图。在<a href="query-transformations.html#GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D__BABDEJJD">示例5-7中</a> ， <code class="codeph">customers</code>子查询查找其州或省为<code class="codeph">CA</code>的客户的ID。假设位图<code class="codeph">101000...</code>对应于来自<code class="codeph">customers</code>表子查询的客户ID密钥值<code class="codeph">103515</code> 。还假设<code class="codeph">customers</code>子查询使用位图<code class="codeph">103516</code> <code class="codeph">010000...</code>生成键值<code class="codeph">103516</code> ，这意味着只有<code class="codeph">sales</code>中的第2行具有来自子查询的匹配键值。
                        </p>
                        <p>数据库合并（使用<code class="codeph">OR</code>运算符）每个子查询的位图（第11,16,21行）。在我们的<code class="codeph">customers</code>示例中，数据库在合并两个位图后为<code class="codeph">customers</code>子查询生成单个位图<code class="codeph">111000...</code> ：</p><pre class="pre codeblock"><code>101000 ... #titmap对应键103515 010000 ... #bitmap对应键103516 --------- 111000 ...＃结果OR运算</code></pre><p>在第10行中，数据库将<code class="codeph">AND</code>运算符应用于合并的位图。假设数据库执行了所有<code class="codeph">OR</code>操作后，生成的<code class="codeph">channels</code>位图为<code class="codeph">100000...</code> 如果数据库对此位图和来自<code class="codeph">customers</code>子查询的位图执行<code class="codeph">AND</code>操作，则结果如下：</p><pre class="pre codeblock"><code>所有OR操作执行111000后的100000 ...＃通道位图...执行所有OR操作后的#customer位图--------- 100000 ...＃位图通道和客户的AND操作结果</code></pre><p>在第9行中，数据库生成最终位图的相应rowid。数据库使用rowid从<code class="codeph">sales</code>事实表中检索行（第26行）。在我们的示例中，数据库只生成一个rowid，它对应于第一行，因此只提取一行而不是扫描整个<code class="codeph">sales</code>表。
                        </p><pre class="pre codeblock"><code>-------------------------------------------------- ----------------------------- | Id |操作|名称  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - ------------------------------ | 0 |选择声明| | 1 | HASH GROUP BY | | * 2 | HASH JOIN | | * 3 |表访问完全|客户| * 4 | HASH JOIN | | * 5 |表访问完全|时代| 6 |查看| VW_ST_B1772830 | 7 | NESTED LOOPS | | 8 |分区范围子项| | 9 | BITMAP转换为ROWIDS | | 10 | BITMAP和| | 11 | BITMAP MERGE | | 12 | BITMAP KEY ITERATION | | 13 | BUFFER SORT | | * 14 |表访问完全| CHANNELS | * 15 | BITMAP INDEX RANGE SCAN | SALES_CHANNEL_BIX | 16 | BITMAP MERGE | | 17 | BITMAP KEY ITERATION | | 18 | BUFFER SORT | | * 19 |表访问完全|时间| * 20 | BITMAP INDEX RANGE SCAN | SALES_TIME_BIX | 21 | BITMAP MERGE | | 22 | BITMAP KEY ITERATION | | 23 | BUFFER SORT | | * 24 |表访问完全|客户| * 25 | BITMAP INDEX RANGE SCAN | SALES_CUST_BIX | 26 |通过USER ROWID表的访问权限| SALES ------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 2  -  access（“ITEM_1”=“C “。”CUST_ID“）3  - 过滤器（”C“。”CUST_STATE_PROVINCE“='CA'）4  - 访问（”ITEM_2“=”T“。”TIME_ID“）5  - 过滤器（（”T“。”CALENDAR_QUARTER_DESC“ ='1999-01'或“T”。“CALENDAR_QUARTER_DESC”='1999-02'））14  - 过滤器（“CH”。“CHANNEL_DESC”='互联网'）15  - 访问（“S”。“CHANNEL_ID”= “CH”。“CHANNEL_ID”）19  - 过滤器（（“T”。“CALENDAR_QUARTER_DESC”='1999-01'或“T”。“CALENDAR_QUARTER_DESC”='1999-02'））20  - 访问（“S”。 “TIME_ID”=“T”。“TIME_ID”）24  - 过滤器（“C”。“CUST_STATE_PROVINCE”='CA'）25  - 访问（“S”。“CUST_ID”=“C”。“CUST_ID”）注 - -----用于此声明的星形转换</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">星形转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94908"></a><a id="TGSQL94909"></a><a id="TGSQL94907"></a><div class="props_rev_3"><a id="GUID-BAE74D96-194A-4168-9490-33523BB10C1C" name="GUID-BAE74D96-194A-4168-9490-33523BB10C1C"></a><h4 id="TGSQL-GUID-BAE74D96-194A-4168-9490-33523BB10C1C" class="sect4"><span class="enumeration_section">5.7.6</span>临时表转换：场景</h4>
                  <div>
                     <p>在上述方案中，优化程序不会将表<code class="codeph">channels</code>连接回<code class="codeph">sales</code>表，因为它未在外部引用，并且<code class="codeph">channel_id</code>是唯一的。
                     </p>
                     <p>但是，如果优化器无法消除连接，则数据库会将子查询结果存储在临时表中，以避免重新扫描维度表以生成位图密钥并重新连接。此外，如果查询并行运行，则数据库实现结果，以便每个并行执行服务器可以从临时表中选择结果，而不是再次执行子查询。</p>
                     <div class="example" id="GUID-BAE74D96-194A-4168-9490-33523BB10C1C__BABFJIEJ">
                        <p class="titleinexample">例5-9使用临时表进行星形转换</p>
                        <p>在此示例中，数据库将<code class="codeph">customers</code>子查询的结果具体化为临时表：</p><pre class="pre codeblock"><code>SELECT t1.c1 cust_city，t.calendar_quarter_desc calendar_quarter_desc，SUM（s.amount_sold）sales_amount FROM sales s，sh.times t，sys_temp_0fd9d6621_e7e24 t1 WHERE s.time_id = t.time_id AND s.cust_id = t1.c0 AND（t.calendar_quarter_desc ='1999-q1'OR t.calendar_quarter_desc ='1999-q2'）AND s.cust_id IN（SELECT t1.c0 FROM sys_temp_0fd9d6621_e7e24 t1）AND s.channel_id IN（SELECT ch.channel_id FROM channels ch WHERE ch.channel_desc =' internet'）AND s.time_id IN（SELECT t.time_id FROM times t WHERE t.calendar_quarter_desc ='1999-q1't t.calendar_quarter_desc ='1999-q2'）GROUP BY t1.c1，t.calendar_quarter_desc</code></pre><div class="p">优化取代<code class="codeph">customers</code>与临时表<code class="codeph">sys_temp_0fd9d6621_e7e24</code> ，并取代以列的引用<code class="codeph">cust_id</code>和<code class="codeph">cust_city</code>与临时表的相应列。数据库创建具有两列的临时表： <code class="codeph">(c0 NUMBER, c1 VARCHAR2(30))</code> 。这些列对应于<code class="codeph">customers</code>表的<code class="codeph">cust_id</code>和<code class="codeph">cust_city</code> 。数据库通过在上一个查询执行开始时执行以下查询来填充临时表：<pre class="pre codeblock"><code>SELECT c.cust_id，c.cust_city FROM customers WHERE c.cust_state_province ='CA'</code></pre></div>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BAE74D96-194A-4168-9490-33523BB10C1C__BABFJJCH">
                        <p class="titleinexample">示例5-10使用临时表进行星形转换的部分执行计划</p>
                        <p>以下示例显示了<a href="query-transformations.html#GUID-BAE74D96-194A-4168-9490-33523BB10C1C__BABFJIEJ">示例5-9中</a>查询的执行计划的已编辑版本：</p><pre class="pre codeblock"><code>-------------------------------------------------- ----------------------------- | Id |操作|名称  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - ------------------------------ | 0 |选择声明| | 1 | TEMP TABLE TRANSFORMATION | | 2 |加载为选择| | * 3 |表访问完全|客户| 4 | HASH GROUP BY | | * 5 | HASH JOIN | | 6 |表访问完全| SYS_TEMP_0FD9D6613_C716F | * 7 | HASH JOIN | | * 8 |表访问完全|时代| 9 |查看| VW_ST_A3F94988 | 10 | NESTED LOOPS | | 11 |分区范围子项| | 12 | BITMAP转换为ROWIDS | | 13 | BITMAP和| | 14 | BITMAP MERGE | | 15 | BITMAP KEY ITERATION | | 16 | BUFFER SORT | | * 17 |表访问完全| CHANNELS | * 18 | BITMAP INDEX RANGE SCAN | SALES_CHANNEL_BIX | 19 | BITMAP MERGE | | 20 | BITMAP KEY ITERATION | | 21 | BUFFER SORT | | * 22 |表访问完全|时间| * 23 | BITMAP INDEX RANGE SCAN | SALES_TIME_BIX | 24 | BITMAP MERGE | | 25 | BITMAP KEY ITERATION | | 26 | BUFFER SORT | | 27 |表访问完全| SYS_TEMP_0FD9D6613_C716F | * 28 | BITMAP INDEX RANGE SCAN | SALES_CUST_BIX | 29 |通过USER ROWID表的访问权限| SALES ------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 3  - 过滤器（“C”。“CUST_STATE_PROVINCE “='CA'）5  - 访问（”ITEM_1“=”C0“）7  - 访问（”ITEM_2“=”T“。”TIME_ID“）8  - 过滤器（（”T“。”CALENDAR_QUARTER_DESC“='1999- 01'OR“T”。“CALENDAR_QUARTER_DESC”='1999-02'））17  - 过滤器（“CH”。“CHANNEL_DESC”='互联网'）18  - 访问（“S”。“CHANNEL_ID”=“CH”。 “CHANNEL_ID”）22  - 过滤器（（“T”。“CALENDAR_QUARTER_DESC”='1999-01'或“T”。“CALENDAR_QUARTER_DESC”='1999-02'））23  - 访问（“S”。“TIME_ID”= “T”。“TIME_ID”）28  - 访问（“S”。“CUST_ID”=“C0”）</code></pre><p>计划的第1行，第2行和第3行将<code class="codeph">customers</code>子查询实现到临时表中。在第6行中，数据库扫描临时表（而不是子查询）以从事实表构建位图。第27行扫描临时表以加入而不是扫描<code class="codeph">customers</code> 。数据库不需要对临时表上的<code class="codeph">customers</code>应用筛选器，因为在实现临时表时应用了筛选器。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">星形转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-91434A26-E81E-4609-800B-4E179A63EDBC" name="GUID-91434A26-E81E-4609-800B-4E179A63EDBC"></a><h3 id="TGSQL-GUID-91434A26-E81E-4609-800B-4E179A63EDBC" class="sect3"><span class="enumeration_section">5.8</span>内存中聚合（VECTOR GROUP BY）</h3>
               <div>
                  <p>内存中聚合的关键优化是在扫描时聚合。</p>
                  <p>为了优化涉及从单个大表到多个小表的聚合和连接的查询块，例如在典型的星型查询中，转换使用<code class="codeph">KEY VECTOR</code>和<code class="codeph">VECTOR GROUP BY</code>操作。这些操作使用高效的内存数组进行连接和聚合，当底层表是内存中的列表时尤其有效。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-91434A26-E81E-4609-800B-4E179A63EDBC__GUID-750067BA-1F6C-4940-A511-94EED9B18972">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../inmem/optimizing-in-memory-aggregation.html#INMEM-GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" target="_blank"><span><cite>Oracle Database In-Memory指南</cite></span></a>了解有关内存中聚合的更多信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF" name="GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF"></a><h3 id="TGSQL-GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF" class="sect3"><span class="enumeration_section">5.9</span>游标持续时间临时表</h3>
               <div>
                  <p>为了实现查询的中间结果，Oracle数据库可以在查询编译期间在内存中隐式创建<strong class="term">游标持续时间临时表</strong> 。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-CB9634BE-46B9-4AA3-B9A2-6013442C7FDB">Cursor-Duration临时表的用途</a><br>复杂查询有时会多次处理同一个查询块，从而产生不必要的性能开销。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-A12A7ECA-069B-410D-8F01-E07BCBD5D754">游标持续时间临时表如何工作</a><br>游标定义临时表的定义驻留在内存中。表定义与游标相关联，并且仅对执行游标的会话可见。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-2832BCE0-5BE3-49A8-8CB6-90BF7D075E26">Cursor-Duration临时表：示例</a><br>重复相同子查询的<code class="codeph">WITH</code>查询有时可以从游标持续时间临时表中受益。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-CB9634BE-46B9-4AA3-B9A2-6013442C7FDB" name="GUID-CB9634BE-46B9-4AA3-B9A2-6013442C7FDB"></a><h4 id="TGSQL-GUID-CB9634BE-46B9-4AA3-B9A2-6013442C7FDB" class="sect4"><span class="enumeration_section">5.9.1</span>游标持续时间临时表的用途</h4>
                  <div>
                     <p>复杂查询有时会多次处理同一个查询块，从而产生不必要的性能开销。</p>
                     <p>为避免这种情况，Oracle数据库可以自动为查询结果创建临时表，并在游标持续时间内将它们存储在内存中。对于诸如<code class="codeph">WITH</code>子句查询，星形转换和分组集之类的复杂操作，此优化增强了重复使用的子查询的中间结果的实现。通过这种方式，游标持续时间临时表可以提高性能并优化I / O.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF" title="为了实现查询的中间结果，Oracle数据库可以在查询编译期间在内存中隐式创建游标持续时间临时表。">Cursor-Duration临时表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-A12A7ECA-069B-410D-8F01-E07BCBD5D754" name="GUID-A12A7ECA-069B-410D-8F01-E07BCBD5D754"></a><h4 id="TGSQL-GUID-A12A7ECA-069B-410D-8F01-E07BCBD5D754" class="sect4"><span class="enumeration_section">5.9.2</span>游标持续时间临时表的工作原理</h4>
                  <div>
                     <p>游标定义临时表的定义驻留在内存中。表定义与游标相关联，并且仅对执行游标的会话可见。</p>
                     <p>使用游标持续时间临时表时，数据库执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>选择使用游标持续时间临时表的计划</p>
                        </li>
                        <li>
                           <p>使用唯一名称创建临时表</p>
                        </li>
                        <li>
                           <p>重写查询以引用临时表</p>
                        </li>
                        <li>
                           <p>将数据加载到内存中，直到没有内存，在这种情况下，它会在磁盘上创建临时段</p>
                        </li>
                        <li>
                           <p>执行查询，从临时表返回数据</p>
                        </li>
                        <li>
                           <p>截断表，释放内存和任何磁盘上的临时段</p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-A12A7ECA-069B-410D-8F01-E07BCBD5D754__GUID-28464ECB-EDE7-450C-B854-9BC61914674C">
                        <p class="notep1">注意：</p>
                        <p>只要光标在内存中，游标持续时间临时表的元数据就会保留在内存中。元数据不存储在数据字典中，这意味着它不能通过数据字典视图看到。您无法显式删除元数据。</p>
                     </div>
                     <p>上述方案取决于内存的可用性。对于串行查询，临时表使用PGA内存。</p>
                     <p>游标持续时间临时表的实现类似于排序。如果没有更多可用内存，则数据库会将数据写入临时段。对于游标持续时间临时表，差异如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库在查询结束时释放内存和临时段，而不是<a href="glossary.html#GUID-BDE98BD8-BC33-45AD-97BF-81831BF94B04"><span class="xrefglossterm">在行源</span></a>不再处于活动状态时释放。
                           </p>
                        </li>
                        <li>
                           <p>内存中的数据保留在内存中，与数据可以在内存和临时段之间移动的排序不同。</p>
                        </li>
                     </ul>
                     <p>当数据库使用游标持续时间临时表时，关键字<code class="codeph">CURSOR DURATION MEMORY</code>出现在执行计划中。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF" title="为了实现查询的中间结果，Oracle数据库可以在查询编译期间在内存中隐式创建游标持续时间临时表。">Cursor-Duration临时表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-2832BCE0-5BE3-49A8-8CB6-90BF7D075E26" name="GUID-2832BCE0-5BE3-49A8-8CB6-90BF7D075E26"></a><h4 id="TGSQL-GUID-2832BCE0-5BE3-49A8-8CB6-90BF7D075E26" class="sect4"><span class="enumeration_section">5.9.3</span>游标持续时间临时表：示例</h4>
                  <div>
                     <p>重复相同子查询的<code class="codeph">WITH</code>查询有时可以从游标持续时间临时表中受益。
                     </p>
                     <div class="section">
                        <p>以下查询使用<code class="codeph">WITH</code>子句创建三个子查询块：</p><pre class="pre codeblock"><code>WITH q1 AS（SELECT department_id，SUM（薪水）sum_sal FROM hr.employees GROUP BY department_id），q2 AS（SELECT * FROM q1），q3 AS（SELECT department_id，sum_sal FROM q1）SELECT * FROM q1 UNION ALL SELECT * FROM q2 UNION ALL SELECT * FROM q3;</code></pre><p>以下示例计划显示了转换：</p><pre class="pre codeblock"><code>SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY_CURSOR（FORMAT =&gt;'BASIC + ROWS + COST'））; PLAN_TABLE_OUTPUT ------------------------------------------------- ------------------------------------------- | Id |操作|名称|行|成本（％CPU）| -------------------------------------------------- ------------------------------------------ | 0 |选择声明| | | 6（100）| | 1 | TEMP TABLE TRANSFORMATION | | | | | 2 | LOAD AS SELECT（ <span class="bold">CURSOR DURATION MEMORY</span> ）| SYS_TEMP_0FD9D6606_1AE004 | | | | 3 | HASH GROUP BY | | 11 | 3（34）| | 4 |表访问完全|员工| 107 | 2（0）| | 5 | UNION-ALL | | | | | 6 |查看| | 11 | 2（0）| | 7 |表访问完全| SYS_TEMP_0FD9D6606_1AE004 | 11 | 2（0）| | 8 |查看| | 11 | 2（0）| | 9 |表访问完全| SYS_TEMP_0FD9D6606_1AE004 | 11 | 2（0）| | 10 |查看| | 11 | 2（0）| | 11 |表访问完全| SYS_TEMP_0FD9D6606_1AE004 | 11 | 2（0）| -------------------------------------------------- ------------------------------------------</code></pre><p>在前面的计划中，步骤1中的<code class="codeph">TEMP TABLE TRANSFORMATION</code>指示数据库使用游标持续时间临时表来执行查询。步骤2中的<code class="codeph">CURSOR DURATION MEMORY</code>关键字指示数据库使用内存（如果可用）来存储<code class="codeph">SYS_TEMP_0FD9D6606_1AE004</code>的结果。如果内存不可用，则数据库将临时数据写入磁盘。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-C1AE164B-E99F-418A-9B2A-1ADB036048DF" title="为了实现查询的中间结果，Oracle数据库可以在查询编译期间在内存中隐式创建游标持续时间临时表。">Cursor-Duration临时表</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94910"></a><div class="props_rev_3"><a id="GUID-6A6748FA-5803-4837-9A9F-525ED09BE481" name="GUID-6A6748FA-5803-4837-9A9F-525ED09BE481"></a><h3 id="TGSQL-GUID-6A6748FA-5803-4837-9A9F-525ED09BE481" class="sect3"><span class="enumeration_section">5.10</span>表扩展</h3>
               <div>
                  <p>在<strong class="term">表扩展中</strong> ，优化器生成一个计划，该计划在分区表的读取主要部分上使用索引，但不在表的活动部分上使用索引。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-685FF0DE-A670-40BF-BC6F-0292A0CCCA21">表扩展的目的</a><br>基于索引的计划可以提高性能，但索引维护会产生开销。在许多数据库中，DML仅影响一小部分数据。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-1AD0BA3C-668E-482F-9EA6-F085BF3E68E0">表扩展如何工作</a><br>表分区使表扩展成为可能。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-74BE3861-35D4-453C-A983-F3317CDA8338">表扩展：场景</a><br>优化程序根据查询中出现的谓词，跟踪必须从每个表访问哪些分区。分区修剪使优化器能够使用表扩展来生成更优化的计划。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-C4E94706-3312-4BD6-B6C7-2F4264BB35E9">表扩展和星形转换：场景</a><br>星型转换支持特定类型的查询，以避免访问大部分大事实表。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94911"></a><div class="props_rev_3"><a id="GUID-685FF0DE-A670-40BF-BC6F-0292A0CCCA21" name="GUID-685FF0DE-A670-40BF-BC6F-0292A0CCCA21"></a><h4 id="TGSQL-GUID-685FF0DE-A670-40BF-BC6F-0292A0CCCA21" class="sect4"><span class="enumeration_section">5.10.1</span>表扩展的目的</h4>
                  <div>
                     <p>基于索引的计划可以提高性能，但索引维护会产生开销。在许多数据库中，DML仅影响一小部分数据。</p>
                     <p>表扩展使用基于索引的计划来处理高更新表。您只能在读取主要数据上创建索引，从而消除活动数据上的索引开销。通过这种方式，表扩展可以提高性能，同时避免索引维护。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6A6748FA-5803-4837-9A9F-525ED09BE481" title="在表扩展中，优化器生成一个计划，该计划在分区表的读取主要部分上使用索引，但不在表的活动部分上使用索引。">表扩展</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94912"></a><div class="props_rev_3"><a id="GUID-1AD0BA3C-668E-482F-9EA6-F085BF3E68E0" name="GUID-1AD0BA3C-668E-482F-9EA6-F085BF3E68E0"></a><h4 id="TGSQL-GUID-1AD0BA3C-668E-482F-9EA6-F085BF3E68E0" class="sect4"><span class="enumeration_section">5.10.2</span>表扩展如何工作</h4>
                  <div>
                     <p>表分区使表扩展成为可能。</p>
                     <p>如果分区表上存在本地索引，则优化程序可以将索引标记为对特定分区不可用。实际上，某些分区未编入索引。</p>
                     <p>在表扩展中，优化器将查询转换为<code class="codeph">UNION ALL</code>语句，其中一些子查询访问索引分区，其他子查询访问未编制索引的分区。优化器可以为分区选择最有效的访问方法，无论它是否存在于查询中访问的所有分区。
                     </p>
                     <p>优化器并不总是选择表扩展：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>表扩展是基于成本的。</p>
                           <p>虽然数据库仅在<code class="codeph">UNION ALL</code>所有分支上访问扩展表的每个分区，但在每个分支中都会访问数据库连接到它的所有表。
                           </p>
                        </li>
                        <li>
                           <p>语义问题可能导致扩展无效。</p>
                           <p>例如，出现在外部联接右侧的表对于表扩展无效。</p>
                        </li>
                     </ul>
                     <p>您可以使用提示<code class="codeph">EXPAND_TABLE</code>提示来控制表扩展。提示会覆盖基于成本的决策，但不会覆盖语义检查。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1AD0BA3C-668E-482F-9EA6-F085BF3E68E0__GUID-A49F5B51-DA14-4F51-8FA0-5AC8CFFD0C1C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">用提示影响优化器</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Comments.html#SQLRF00219" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关SQL提示的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6A6748FA-5803-4837-9A9F-525ED09BE481" title="在表扩展中，优化器生成一个计划，该计划在分区表的读取主要部分上使用索引，但不在表的活动部分上使用索引。">表扩展</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94914"></a><a id="TGSQL94913"></a><div class="props_rev_3"><a id="GUID-74BE3861-35D4-453C-A983-F3317CDA8338" name="GUID-74BE3861-35D4-453C-A983-F3317CDA8338"></a><h4 id="TGSQL-GUID-74BE3861-35D4-453C-A983-F3317CDA8338" class="sect4"><span class="enumeration_section">5.10.3</span>表扩展：场景</h4>
                  <div>
                     <p>优化程序根据查询中出现的谓词，跟踪必须从每个表访问哪些分区。分区修剪使优化器能够使用表扩展来生成更优化的计划。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-74BE3861-35D4-453C-A983-F3317CDA8338__GUID-D7D5B988-6B9F-4142-8159-DFF3F7304753">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此方案假定以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您希望针对<code class="codeph">sh.sales</code>表运行星型查询，该表在<code class="codeph">time_id</code>列上进行范围分区。
                              </p>
                           </li>
                           <li>
                              <p>您希望禁用特定分区上的索引以查看表扩展的好处。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74BE3861-35D4-453C-A983-F3317CDA8338__GUID-6C7901A3-FE3B-4E46-8D2F-437A378F230A">要使用表扩展：</p>
                        <ol>
                           <li>
                              <p>以<code class="codeph">sh</code>用户身份登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>运行以下查询：</p><pre class="pre codeblock"><code>SELECT * FROM sales WHERE time_id&gt; = TO_DATE（'2000-01-01 00:00:00'，'SYYYY-MM-DD HH24：MI：SS'）AND prod_id = 38;</code></pre></li>
                           <li>
                              <p>通过查询<code class="codeph">DBMS_XPLAN</code>来解释该计划：</p><pre class="pre codeblock"><code>SET LINESIZE 150 SET PAGESIZE 0 SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY_CURSOR（format =&gt;'BASIC，PARTITION'））;</code></pre><p>如图中<code class="codeph">Pstart</code>和<code class="codeph">Pstop</code>列在下面的计划，优化器从仅在表28个分区的16必须被访问的过滤器确定：</p><pre class="pre codeblock"><code>计划哈希值：3087065703 --------------------------------------------- ----------------------------- | Id |操作|名称| Pstart | Pstop | -------------------------------------------------- ------------------------ | 0 |选择声明| | | | | 1 |分区范围ITERATOR | | 13 | 28 | | 2 |按本地索引ROWID批量表的访问权限|销售| 13 | 28 | | 3 | BITMAP转换为ROWIDS | | | | | * 4 | BITMAP INDEX单一价值| SALES_PROD_BIX | 13 | 28 | -------------------------------------------------- ------------------------谓词信息（由操作ID标识）：----------------- ---------------------------------- 4  -  access（“PROD_ID”= 38）</code></pre><p>在优化器确定要访问的分区之后，它会考虑在所有这些分区上可用的任何索引。在上一个计划中，优化器选择使用<code class="codeph">sales_prod_bix</code>位图索引。
                              </p>
                           </li>
                           <li>
                              <p>禁用<code class="codeph">sales</code>表的<code class="codeph">SALES_1995</code>分区上的索引：</p><pre class="pre codeblock"><code>一世</code></pre><p>前面的DDL禁用分区1上的索引，该索引包含1996年之前的所有销售。</p>
                              <div class="infoboxnote" id="GUID-74BE3861-35D4-453C-A983-F3317CDA8338__GUID-29D9127A-F87D-49B3-AEC0-85DBFFA916B8">
                                 <p class="notep1">注意：</p>
                                 <p>您可以通过查询<code class="codeph">USER_IND_PARTITIONS</code>视图来获取分区信息。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>再次执行sales的查询，然后查询<code class="codeph">DBMS_XPLAN</code>以获取计划。
                              </p>
                              <p>输出显示该计划没有改变：</p><pre class="pre codeblock"><code>计划哈希值：3087065703 --------------------------------------------- ------------------------------ | Id |操作|名称| Pstart | Pstop --------------------------------------------- ------------------------------ | 0 |选择声明| | | | | 1 |分区范围ITERATOR | | 13 | 28 | | 2 |按本地索引ROWID批量表的访问权限|销售| 13 | 28 | | 3 | BITMAP转换为ROWIDS | | | | | * 4 | BITMAP INDEX单一价值| SALES_PROD_BIX | 13 | 28 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- ----------------------------------- 4  -  access（“PROD_ID”= 38）</code></pre><p>计划是相同的，因为禁用的索引分区与查询无关。如果查询访问的所有分区都已编制索引，则数据库可以使用索引回答查询。由于查询仅访问分区16到28，因此禁用分区1上的索引不会影响计划。</p>
                           </li>
                           <li>
                              <p>禁用分区28（ <code class="codeph">SALES_Q4_2003</code> ）的索引，该索引是查询需要访问的分区：</p><pre class="pre codeblock"><code>ALTER INDEX sales_prod_bix MODIFY PARTITION sales_q4_2003 UNUSABLE; ALTER INDEX sales_time_bix MODIFY PARTITION sales_q4_2003 UNUSABLE;</code></pre><p>通过禁用查询确实需要访问的分区上的索引，查询不能再使用此索引（不使用表扩展）。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_XPLAN</code>查询计划。</p>
                              <p>如以下计划所示，优化器不使用索引：</p><pre class="pre codeblock"><code>计划哈希值：3087065703 --------------------------------------------- ------------------------------ | ID |操作|名称| Pstart | Pstop --------------------------------------------- ------------------------------ | 0 |选择声明| | | | | 1 |分区范围ITERATOR | | 13 | 28 | | * 2 |表访问完全|销售| 13 | 28 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- ----------------------------------- 2  -  access（“PROD_ID”= 38）</code></pre><p>在前面的示例中，查询访问16个分区。在其中的15个分区中，索引可用，但最终分区没有可用的索引。由于优化器必须选择一个访问路径或另一个访问路径，因此优化器无法在任何分区上使用索引。</p>
                           </li>
                           <li>
                              <p>使用表扩展，优化程序将重写原始查询，如下所示：</p><pre class="pre codeblock"><code>SELECT * FROM sales WHERE time_id&gt; = TO_DATE（'2000-01-01 00:00:00'，'SYYYY-MM-DD HH24：MI：SS'）AND time_id <span class="bold">&lt;</span> TO_DATE（'2003-10-01 00:00 ：00'，'SYYYY-MM-DD HH24：MI：SS'）和prod_id = 38 UNION ALL SELECT * FROM sales WHERE time_id&gt; = TO_DATE（'2003-10-01 00:00:00'，'SYYYY-MM -DD HH24：MI：SS'）和time_id <span class="bold">&lt;</span> TO_DATE（'2004-01-01 00:00:00'，'SYYYY-MM-DD HH24：MI：SS'）和prod_id = 38;</code></pre><p>在前面的查询中， <code class="codeph">UNION ALL</code>的第一个查询块访问索引的分区，而第二个查询块访问不是的分区。这两个子查询使优化器能够选择在第一个查询块中使用索引，如果它比使用所访问的所有分区的表扫描更优化。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_XPLAN</code>查询计划。</p>
                              <p>该计划如下：</p><pre class="pre codeblock"><code>计划哈希值：2120767686 --------------------------------------------- ------------------------------ | Id |操作|名称| Pstart | Pstop | -------------------------------------------------- ------------------------- | 0 |选择声明| | | | | 1 |查看| VW_TE_2 | | | | 2 | UNION-ALL | | | | | 3 |分区范围ITERATOR | | 13 | 27 | | 4 |按本地索引ROWID批量表的访问权限|销售| 13 | 27 | | 5 | BITMAP转换为ROWIDS | | | | | * 6 | BITMAP INDEX单一价值| SALES_PROD_BIX | 13 | 27 | | 7 | PARTITION RANGE SINGLE | | 28 | 28 | | * 8 |表访问完全|销售| 28 | 28 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- ----------------------------------- 6  -  access（“PROD_ID”= 38）8  - 过滤器（“ PROD_ID“= 38）</code></pre><p>如前面的计划所示，优化器对两个查询块使用<code class="codeph">UNION ALL</code> （步骤2）。优化器选择索引以访问第一查询块中的分区13至27（步骤6）。因为没有索引可用于分区28，所以优化器在第二查询块中选择全表扫描（步骤8）。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6A6748FA-5803-4837-9A9F-525ED09BE481" title="在表扩展中，优化器生成一个计划，该计划在分区表的读取主要部分上使用索引，但不在表的活动部分上使用索引。">表扩展</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94916"></a><a id="TGSQL94915"></a><div class="props_rev_3"><a id="GUID-C4E94706-3312-4BD6-B6C7-2F4264BB35E9" name="GUID-C4E94706-3312-4BD6-B6C7-2F4264BB35E9"></a><h4 id="TGSQL-GUID-C4E94706-3312-4BD6-B6C7-2F4264BB35E9" class="sect4"><span class="enumeration_section">5.10.4</span>表扩展和星形转换：场景</h4>
                  <div>
                     <p>星型转换支持特定类型的查询，以避免访问大部分大事实表。</p>
                     <div class="section">
                        <p>星型转换需要定义多个索引，这些索引在主动更新的表中可能会产生开销。使用表扩展，您可以仅在非活动分区上定义索引，以便优化程序可以仅考虑表的索引部分上的星形转换。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C4E94706-3312-4BD6-B6C7-2F4264BB35E9__GUID-FCFEED11-4D8A-4933-AEEB-8FC4C04745FB">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此方案假定以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您查询<span class="q">“ <a href="query-transformations.html#GUID-0694077E-BF83-4D52-99E7-A436C29A6F6D" title="此方案演示了星型查询的星形转换。">Star Transformation：Scenario</a> ”中</span>使用的相同模式。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">sales</code>的最后一个分区正在积极更新，通常情况下是时间分区表。
                              </p>
                           </li>
                           <li>
                              <p>您希望优化器利用表扩展。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C4E94706-3312-4BD6-B6C7-2F4264BB35E9__GUID-62BA2BF6-BFE1-4327-BC17-923935B4B477">要在星型查询中利用表扩展：</p>
                        <ol>
                           <li>
                              <p>禁用最后一个分区上的索引，如下所示：</p><pre class="pre codeblock"><code>ALTER INDEX sales_channel_bix MODIFY PARTITION sales_q4_2003 UNUSABLE; ALTER INDEX sales_cust_bix MODIFY PARTITION sales_q4_2003 UNUSABLE;</code></pre></li>
                           <li>
                              <p>执行以下星型查询：</p><pre class="pre codeblock"><code>SELECT t.calendar_quarter_desc，SUM（s.amount_sold）sales_amount FROM sales s，times t，customers c，channels ch WHERE s.time_id = t.time_id AND s.cust_id = c.cust_id AND s.channel_id = ch.channel_id AND c .cust_state_province ='CA'和ch.channel_desc ='互联网'和t.calendar_quarter_desc IN（'1999-01'，'1999-02'）GROUP BY t.calendar_quarter_desc;</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">DBMS_XPLAN</code>查询游标，显示以下计划：</p><pre class="pre codeblock"><code>-------------------------------------------------- ------------------------- | Id |操作|名称| Pstart时| Pstop | -------------------------------------------------- ------------------------- | 0 |选择声明| | | | | 1 | HASH GROUP BY | | | | | 2 |查看| VW_TE_14 | | | | 3 | UNION-ALL | | | | | 4 | HASH JOIN | | | | | 5 |表访问完整|时间| | | | 6 |查看| VW_ST_1319B6D8 | | | | 7 | NESTED LOOPS | | | | | 8 |分区范围子项| | KEY（SQ）| KEY（SQ）| | 9 | BITMAP转换为ROWIDS | | | | | 10 | BITMAP和| | | | | 11 | BITMAP MERGE | | | | | 12 | BITMAP KEY ITERATION | | | | | 13 | BUFFER SORT | | | | | 14 |表访问完整|通道| | | | 15 | BITMAP INDEX RANGE SCAN | SALES_CHANNEL_BIX | KEY（SQ）| KEY（SQ）| | 16 | BITMAP MERGE | | | | | 17 | BITMAP KEY ITERATION | | | | | 18 | BUFFER SORT | | | | | 19 |表访问完整|时间| | | | 20 | BITMAP INDEX RANGE SCAN | SALES_TIME_BIX | KEY（SQ）| KEY（SQ）| | 21 | BITMAP MERGE | | | | | 22 | BITMAP KEY ITERATION | | | | | 23 | BUFFER SORT | | | | | 24 |表访问完整|客户| | | | 25 | BITMAP INDEX RANGE SCAN | SALES_CUST_BIX | KEY（SQ）| KEY（SQ）| | 26 |按用户进行表访问|销售| ROWID | ROWID | | 27 | NESTED LOOPS | | | | | 28 | NESTED LOOPS | | | | | 29 | NESTED LOOPS | | | | | 30 | NESTED LOOPS | | | | | 31 | PARTITION RANGE SINGLE | | 28 | 28 | | 32 | <span class="bold">表访问完全</span> | <span class="bold">销售</span> | <span class="bold">28</span> | <span class="bold">28</span> | | 33 |通过索引ROWID表示访问|通道| | | | 34 | INDEX UNIQUE SCAN | CHANNELS_PK | | | | 35 |通过INDEX ROWID表示访问权限|客户| | | | 36 | INDEX UNIQUE SCAN | CUSTOMERS_PK | | | | 37 | INDEX UNIQUE SCAN | TIMES_PK | | | | 38 |按INDEX ROWID表示访问权限|时间| | | -------------------------------------------------- -------------------------</code></pre><p>上述计划使用表扩展。正在访问除最后一个分区之外的每个分区的<code class="codeph">UNION ALL</code>分支使用星形转换。由于禁用了分区28上的索引，因此数据库使用全表扫描访问最终分区。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-6A6748FA-5803-4837-9A9F-525ED09BE481" title="在表扩展中，优化器生成一个计划，该计划在分区表的读取主要部分上使用索引，但不在表的活动部分上使用索引。">表扩展</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94931"></a><div class="props_rev_3"><a id="GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06" name="GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06"></a><h3 id="TGSQL-GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06" class="sect3"><span class="enumeration_section">5.11</span>加入因式分解</h3>
               <div>
                  <p>在称为<strong class="term">连接因子分解</strong>的基于成本的转换中，优化器可以对来自<code class="codeph">UNION ALL</code>查询的分支的公共计算进行分解。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-41FA8384-23FF-4683-B1FC-61853209565C">连接因子分解的目的</a><br><code class="codeph">UNION ALL</code>查询在数据库应用程序中很常见，尤其是在数据集成应用程序中。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD">联合分解如何工作</a><br>连接因子分解可以分解多个表以及两个以上的<code class="codeph">UNION ALL</code>分支。
                     </li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D">分解和加入订单：场景</a><br>连接因子分解可以为连接顺序创建更多可能性</li>
                     <li class="ulchildlink"><a href="query-transformations.html#GUID-FA012F21-6BEF-444A-89E4-4DCDBC9F0225">外连接的因式分解：场景</a><br>数据库支持外连接，反连接和半连接的连接分解，但仅适用于此类连接中的右表。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" title="本章介绍了用于转换查询的最重要的优化器技术。">查询转换</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94932"></a><div class="props_rev_3"><a id="GUID-41FA8384-23FF-4683-B1FC-61853209565C" name="GUID-41FA8384-23FF-4683-B1FC-61853209565C"></a><h4 id="TGSQL-GUID-41FA8384-23FF-4683-B1FC-61853209565C" class="sect4"><span class="enumeration_section">5.11.1</span>连接分解的目的</h4>
                  <div>
                     <p><code class="codeph">UNION ALL</code>查询在数据库应用程序中很常见，尤其是在数据集成应用程序中。
                     </p>
                     <p>通常， <code class="codeph">UNION ALL</code>查询中的分支引用相同的基表。如果没有连接因子分解，优化器将独立评估<code class="codeph">UNION ALL</code>查询的每个分支，从而导致重复处理，包括数据访问和连接。连接因子分解转换可以跨<code class="codeph">UNION ALL</code>分支共享公共计算。避免额外扫描大型基表可以带来巨大的性能提升。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06" title="在称为连接因子分解的基于成本的转换中，优化器可以对来自UNION ALL查询的分支的公共计算进行分解。">加入分解</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94934"></a><a id="TGSQL94935"></a><a id="TGSQL94933"></a><div class="props_rev_3"><a id="GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD" name="GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD"></a><h4 id="TGSQL-GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD" class="sect4"><span class="enumeration_section">5.11.2</span>联接分解如何工作</h4>
                  <div>
                     <p>连接因子分解可以分解多个表以及两个以上的<code class="codeph">UNION ALL</code>分支。
                     </p>
                     <p>通过示例可以最好地解释连接因子分解。</p>
                     <div class="example" id="GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD__BABCAIGD">
                        <p class="titleinexample">例5-11 UNION ALL查询</p>
                        <p>以下查询显示了对四个表（ <code class="codeph">t1</code> ， <code class="codeph">t2</code> ， <code class="codeph">t3</code>和<code class="codeph">t4</code> ）和两个<code class="codeph">UNION ALL</code>分支的查询：</p><pre class="pre codeblock"><code>SELECT t1.c1，t2.c2 FROM <span class="bold">t1</span> ，t2，t3 WHERE <span class="bold">t1.c1 = t2.c1</span> AND <span class="bold">t1.c1&gt; 1</span> AND t2.c2 = 2 AND t2.c2 = t3.c2 UNION ALL SELECT t1.c1，t2 .c2 FROM <span class="bold">t1</span> ，t2，t4 WHERE <span class="bold">t1.c1 = t2.c1</span> AND <span class="bold">t1.c1&gt; 1</span> AND t2.c3 = t4.c3</code></pre><p>在前面的查询中，表<code class="codeph">t1</code>出现在两个<code class="codeph">UNION ALL</code>分支中，过滤谓词<code class="codeph">t1.c1 &gt; 1</code>和连接谓词<code class="codeph">t1.c1 = t2.c1</code> 。如果没有任何转换，数据库必须对表<code class="codeph">t1</code>两次扫描和过滤，每次分支执行一次。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD__BABFAEBB">
                        <p class="titleinexample">例5-12分解查询</p>以下查询使用连接因子分解来转换<a href="query-transformations.html#GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD__BABCAIGD">示例5-11中</a>的查询。<pre class="pre codeblock"><code>SELECT t1.c1，VW_JF_1.item_2 FROM <span class="bold">t1</span> ，（SELECT t2.c1 item_1，t2.c2 item_2 FROM t2，t3 WHERE t2.c2 = t3.c2 AND t2.c2 = 2 UNION ALL SELECT t2.c1 item_1，t2。 c2 item_2 FROM t2，t4 WHERE t2.c3 = t4.c3）VW_JF_1 WHERE <span class="bold">t1.c1 = VW_JF_1.item_1</span> AND <span class="bold">t1.c1&gt; 1</span>
</code></pre><p>在这种情况下，因为表<code class="codeph">t1</code>是分解的，所以数据库只对<code class="codeph">t1</code>执行表扫描和过滤一次。如果<code class="codeph">t1</code>很大，那么这种因式分解避免了两次扫描和过滤<code class="codeph">t1</code>的巨大性能成本。
                        </p>
                        <div class="infoboxnote" id="GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD__GUID-0A2942E9-58DE-454D-8690-1662E9A9027A">
                           <p class="notep1">注意：</p>
                           <p>如果<code class="codeph">UNION ALL</code>查询中的分支具有使用<code class="codeph">DISTINCT</code>函数的子句，则连接因子分解无效。
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06" title="在称为连接因子分解的基于成本的转换中，优化器可以对来自UNION ALL查询的分支的公共计算进行分解。">加入分解</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94937"></a><a id="TGSQL94938"></a><a id="TGSQL94939"></a><a id="TGSQL94936"></a><div class="props_rev_3"><a id="GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D" name="GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D"></a><h4 id="TGSQL-GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D" class="sect4"><span class="enumeration_section">5.11.3因子</span>分解和连接顺序：场景</h4>
                  <div>
                     <p>连接因子分解可以为连接顺序创建更多可能性</p>
                     <div class="example" id="GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D__BABFEJHJ">
                        <p class="titleinexample">例5-13涉及五个表的查询</p>
                        <p>在以下查询中，视图<code class="codeph">V</code>与<a href="query-transformations.html#GUID-253951D9-63D9-4989-86F6-FA4AC6AFF0BD__BABCAIGD">示例5-11中</a>的查询相同：</p><pre class="pre codeblock"><code>SELECT * FROM t5，（SELECT t1.c1，t2.c2 FROM t1，t2，t3 WHERE t1.c1 = t2.c1 AND t1.c1&gt; 1 AND t2.c2 = 2 AND t2.c2 = t3.c2 UNION ALL SELECT t1.c1，t2.c2 FROM t1，t2，t4 WHERE t1.c1 = t2.c1 AND t1.c1&gt; 1 AND t2.c3 = t4.c3）V WHERE t5.c1 = V.c1</code></pre>在连接因子分解之前，数据库必须在加入<code class="codeph">t5</code>之前加入<code class="codeph">t1</code> ， <code class="codeph">t2</code>和<code class="codeph">t3</code> 。
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D__BABIGECD">
                        <p class="titleinexample">实施例5-14来自视图V的t1的因子分解</p>
                        <p>如果连接因子分解从视图<code class="codeph">V</code>分解<code class="codeph">t1</code> ，如下面的查询所示，则数据库可以将<code class="codeph">t1</code>与<code class="codeph">t5</code> 。</p><pre class="pre codeblock"><code>SELECT * FROM <span class="bold">t5</span> ，（SELECT t1.c1，VW_JF_1.item_2 FROM <span class="bold">t1</span> ，（SELECT t2.c1 item_1，t2.c2 item_2 FROM t2，t3 WHERE t2.c2 = t3.c2 AND t2.c2 = 2 UNION ALL SELECT t2 .c1 item_1，t2.c2 item_2 FROM t2，t4 WHERE t2.c3 = t4.c3）VW_JF_1 WHERE t1.c1 = VW_JF_1.item_1 AND t1.c1&gt; 1）WHERE t5.c1 = V.c1</code></pre><p>前面的查询转换会打开新的连接顺序。但是，连接因子分解会强制执行特定的连接顺序。例如，在前面的查询中，表<code class="codeph">t2</code>和<code class="codeph">t3</code>出现在视图<code class="codeph">VW_JF_1</code> <code class="codeph">UNION ALL</code>查询的第一个分支中。该数据库必须加入<code class="codeph">t2</code>与<code class="codeph">t3</code>才能与加盟<code class="codeph">t1</code> ，这是不是中定义<code class="codeph">VW_JF_1</code>视图。强加的连接顺序可能不一定是最佳连接顺序。因此，优化器使用基于成本的转换框架执行连接因子分解。优化器使用和不使用连接因子分解来计算计划的成本，然后选择最便宜的计划。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D__BABFAEGB">
                        <p class="titleinexample">示例5-15已删除视图定义的视图V中t1的分解</p>
                        <p>以下查询与<a href="query-transformations.html#GUID-E3AA79CC-74CA-44C0-A15B-1827FE27609D__BABIGECD">示例5-14中的</a>查询相同，但删除了视图定义，以便更容易看到分解：</p><pre class="pre codeblock"><code>SELECT * FROM <span class="bold">t5</span> ，（SELECT t1.c1，VW_JF_1.item_2 FROM <span class="bold">t1</span> ，VW_JF_1 WHERE t1.c1 = VW_JF_1.item_1 AND t1.c1&gt; 1）WHERE t5.c1 = V.c1</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06" title="在称为连接因子分解的基于成本的转换中，优化器可以对来自UNION ALL查询的分支的公共计算进行分解。">加入分解</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94941"></a><a id="TGSQL94942"></a><a id="TGSQL94940"></a><div class="props_rev_3"><a id="GUID-FA012F21-6BEF-444A-89E4-4DCDBC9F0225" name="GUID-FA012F21-6BEF-444A-89E4-4DCDBC9F0225"></a><h4 id="TGSQL-GUID-FA012F21-6BEF-444A-89E4-4DCDBC9F0225" class="sect4"><span class="enumeration_section">5.11.4</span>外连接的<span class="enumeration_section">因子</span>分解：场景</h4>
                  <div>
                     <p>数据库支持外连接，反连接和半连接的连接分解，但仅适用于此类连接中的右表。</p>
                     <p>例如，连接因子分解可以通过分解<code class="codeph">t2</code>来转换以下<code class="codeph">UNION ALL</code>查询：</p><pre class="pre codeblock"><code>SELECT t1.c2，t2.c2 FROM t1，t2 WHERE t1.c1 = t2.c1（+）AND t1.c1 = 1 UNION ALL SELECT t1.c2，t2.c2 FROM t1，t2 WHERE t1.c1 = t2。 c1（+）AND t1.c1 = 2</code></pre><p>以下示例显示了转换。表<code class="codeph">t2</code>现在不再出现在子查询的<code class="codeph">UNION ALL</code>分支中。
                     </p><pre class="pre codeblock"><code>SELECT VW_JF_1.item_2，t2.c2 FROM t2，（SELECT t1.c1 item_1，t1.c2 item_2 FROM t1 WHERE t1.c1 = 1 UNION ALL SELECT t1.c1 item_1，t1.c2 item_2 FROM t1 WHERE t1.c1 = 2 ）VW_JF_1 WHERE VW_JF_1.item_1 = t2.c1（+）</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="query-transformations.html#GUID-B47BEFB3-D72D-462A-9B96-C3B1F8F48C06" title="在称为连接因子分解的基于成本的转换中，优化器可以对来自UNION ALL查询的分支的公共计算进行分解。">加入分解</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03610.PGA-20900.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>PGA-20900至PGA-22014</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Error Messages"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Error Messages"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-error-messages.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T07:32:34-07:00"></meta>
      <meta name="dcterms.title" content="Database Error Messages"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95938-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="PCC-02010.html" title="Previous" type="text/html"></link>
      <link rel="next" href="PGU-00100.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ERRMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PCC-02010.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="PGU-00100.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库错误消息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PGA-20900至PGA-22014</li>
            </ol>
            <a id="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD" name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD"></a>
            
            <h2 id="ERRMG-GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD" class="sect2"><span class="enumeration_chapter">101</span> PGA-20900至PGA-22014</h2>
         </header>
         <div class="ind">
            <div>
               <dl>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-059119FD-B902-40E9-8315-90435C7629AD"><!-- --></a> PGA-20900：无法获取<span class="variable" translate="no">string</span> <span class="variable" translate="no">number</span>字节存储空间</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器进程中的内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保您的系统具有足够的可用内存，以支持您正在运行的并发用户数。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-242EB3C2-88B2-4BCB-BE12-8E429043C882"><!-- --></a> PGA-20901：内部网关错误： <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器进程内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在启用调试的情况下重现错误以生成日志文件。支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-0658F4A9-A67E-402C-8EC4-2C44AF423E25"><!-- --></a> PGA-20905：无效的对话ID：未找到有效的对话</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>没有为用户激活的APPC会话。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查应用程序是否未按顺序调用PL / SQL TIP例程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-0FD22ACD-AB5E-4DF5-9097-1D19375ADD26"><!-- --></a> PGA-20906：无效的对话ID：未找到匹配的对话</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>从呼叫者收到的会话ID不是有效的活动会话ID。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查应用程序是否未按顺序调用PL / SQL TIP例程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-2D142F4E-EDAB-4F68-8B8C-A3A72D212964"><!-- --></a> PGA-20907：网关<span class="variable" translate="no">string</span>处理期间发生先前错误</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>处理Oracle函数<span class="variable" translate="no">func</span>发生错误。此消息之前是附加消息，提供有关错误的更详细信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>请参阅此前面的消息以确定要采取的操作过程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-583742DC-9CE4-4DED-9885-A700F665CB20"><!-- --></a> PGA-20910：通信错误：CPI-C <span class="variable" translate="no">string</span>失败，rc = <span class="variable" translate="no">number</span> ，errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>执行指定的CPI-C函数<span class="variable" translate="no">func</span>发生意外通信错误。消息文本中提供了CPI-C函数返回码<span class="variable" translate="no">rc</span>和系统错误号<span class="variable" translate="no">errno</span> 。供应商文档中描述了CPI-C功能返回码和系统错误号。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确定通信错误的原因，更正错误并重新运行事务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-85D0B0A3-0CD7-481F-A668-3462AF85C28F"><!-- --></a> PGA-20911：更新事务已激活，TP <span class="variable" translate="no">string</span>位于LU <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>已通过PGAINIT调用在LU <span class="variable" translate="no">luname</span>处启动事务<span class="variable" translate="no">tpname</span> ，并将synclevel设置为1或2。在任何给定时间，只允许在synclevel 1或2处进行一次事务。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>未启动新事务。更改应用程序以在第一个更新事务完成后启动第二个更新事务，或者为第二个更新事务使用不同的网关数据库链接。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-4C22EF52-004D-4FF9-A7F4-CA03AF6D8050"><!-- --></a> PGA-20912：发送和接收缓冲区长度不能都为零</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的发送和接收缓冲区长度均为零。这是无效的。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-2D06A04B-40DB-4803-AD2F-4E3914B80959"><!-- --></a> PGA-20914：发送缓冲区长度的<span class="variable" translate="no">number</span>超过实际发送缓冲区大小的<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>发送缓冲区长度<span class="variable" translate="no">len</span>传递给PGAXFER比实际尺寸更大的<span class="variable" translate="no">size</span>传递给PGAXFER发送缓冲区。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-71C447E8-C539-4AB3-AA9D-967418515412"><!-- --></a> PGA-20915：接收的缓冲区长度<span class="variable" translate="no">number</span>超过了最大的<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的接收缓冲区长度<span class="variable" translate="no">len</span>大于允许的最大长度<span class="variable" translate="no">max</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-019168AF-EA52-4D1E-9515-35611B551A07"><!-- --></a> PGA-20916：发送计数是<span class="variable" translate="no">number</span>但仅指定了<span class="variable" translate="no">number</span>发送长度</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的发送长度数组中的第一个值<span class="variable" translate="no">count</span>指定的元素数多于包含的发送长度数组。在数组中只找到了<span class="variable" translate="no">num</span>元素。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-31733DA0-AD5A-4C5D-81BB-8C87776C8452"><!-- --></a> PGA-20917：接收计数是<span class="variable" translate="no">number</span>但仅指定了<span class="variable" translate="no">number</span>接收长度</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的接收长度数组中的第一个值<span class="variable" translate="no">count</span>指定的元素数多于包含的接收长度数组。在数组中只找到了<span class="variable" translate="no">num</span>元素。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C5D413FC-4A6E-46E8-A107-674E386F0C69"><!-- --></a> PGA-20918：发送长数<span class="variable" translate="no">number</span>是<span class="variable" translate="no">number</span>但只有<span class="variable" translate="no">number</span>个字节被留在缓冲器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>长度<span class="variable" translate="no">len</span>中发送长度数组编号指定<span class="variable" translate="no">num</span>超过字节数<span class="variable" translate="no">bytes</span>中剩余发送缓冲区的数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-4ECEC261-A707-46B5-B6F6-6E65AEB12459"><!-- --></a> PGA-20919：接收长数<span class="variable" translate="no">number</span>是<span class="variable" translate="no">number</span>但只有<span class="variable" translate="no">number</span>个字节被留在缓冲器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>长度<span class="variable" translate="no">len</span>中指定的接收长度数组编号<span class="variable" translate="no">num</span>超出的字节数<span class="variable" translate="no">bytes</span>中剩余的接收缓冲器空间。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-81365ED9-04CD-4607-B571-BE11CCE8C351"><!-- --></a> PGA-20920：收到意外的请求发送</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>远程事务程序在网关仍在发送数据时请求发送数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-68A8634A-5AF7-48FD-B33D-C9C11370074D"><!-- --></a> PGA-20921：接收时缓冲区溢出：请求的字节<span class="variable" translate="no">number</span> ，接收的字节<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>当网关期望仅接收<span class="variable" translate="no">num</span>个字节时，远程事务程序发送<span class="variable" translate="no">len</span>个字节的数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5B998336-AEA7-4B62-9D7F-8B0E08246A93"><!-- --></a> PGA-20922：无可接收的数据：请求了<span class="variable" translate="no">number</span>字节</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>远程事务程序已请求接收或取消分配对话，但网关仍希望接收更多数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-6782EEAD-1BCC-4F39-B7B6-4204C0722FBA"><!-- --></a> PGA-20923：意外状况， <span class="variable" translate="no">number</span> （ <span class="variable" translate="no">string</span> ），之后收到的<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在CPI-C <span class="variable" translate="no">func</span>调用之后，从远程事务程序收到了意外的状态代码<span class="variable" translate="no">stat</span> 。状态代码的描述性名称是<span class="variable" translate="no">desc</span> 。 <span class="variable" translate="no">func</span>是接收状态的CPI-C函数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>这通常是远程事务程序或网络问题的问题。每个CPI-C函数调用的状态代码都记录在系统的特定于平台的SNA软件文档中。有关SNA软件文档的标题，请参阅适用于您的APPC安装和配置指南的Oracle数据库网关的“系统要求”一章。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-727454E6-12EE-4FBD-823B-E6EC665E1647"><!-- --></a> PGA-20924：无法进入deallocate的发送状态，state = <span class="variable" translate="no">number</span> （ <span class="variable" translate="no">string</span> ）</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关无法进入发送状态以执行正常的释放。会话状态为<span class="variable" translate="no">state</span> ，其描述性名称为<span class="variable" translate="no">desc</span> 。会话状态记录在/usr/include/cmc.h头文件中。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>这通常是远程事务程序的问题或网络问题。检查远程系统以获取诊断信息。遇到此错误后，网关将执行异常释放。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-0C09B8DD-B407-44E1-BED0-90E4A47F63EF"><!-- --></a> PGA-20925：缺少LU / TP / MODE名称参数且未指定旁边信息配置文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>调用PGAINIT时未指定Side Information配置文件名称，但LU名称，TP名称和MODE名称参数未全部填入非空值。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于为PGAU定义事务程序的PGDL，以确保指定了有效的侧信息配置文件名称（SIDEPROFILE关键字），或者LU名称，TP名称和模式名称（LUNAME，TPNAME，LOGMODE关键字）都使用有效值指定。如果未指定“侧面信息”配置文件，则LU名称，TP名称和模式名称参数都是必需的。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-9D9FAB48-6F6B-4D5D-8F06-B70D173A8F7C"><!-- --></a> PGA-20926：用户ID <span class="variable" translate="no">string</span>的长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> userid <span class="variable" translate="no">uid</span>太长（ <span class="variable" translate="no">len</span> ）与APPC会话安全性一起使用。userid的最大允许长度为<span class="variable" translate="no">max</span>字符数。仅当网关初始化参数PGA_SECURITY_TYPE设置为SAME或PROGRAM时，才会发生这种情况。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须在客户端系统和正在执行远程事务程序的系统上将userid更改为更短的值。这种限制是由SNA和APPC强加的，而不是由网关强加的。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D2F27F9F-2E58-4547-924C-F0138EACE1D7"><!-- --></a> PGA-20927：的密码长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>密码太长（ <span class="variable" translate="no">len</span> ）与APPC会话安全性一起使用。密码的最大允许长度为<span class="variable" translate="no">max</span>字符数。仅当网关初始化参数PGA_SECURITY_TYPE设置为PROGRAM时才会发生这种情况。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须在客户端系统和正在执行远程事务程序的系统上将密码更改为更短的值。这种限制是由SNA和APPC强加的，而不是由网关强加的。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-FFB7D559-DCDC-4B43-809F-F0CD1FD81587"><!-- --></a> PGA-20928：无法打开参数文件<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关无法找到或打开指定的文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保文件存在于网关所需的位置，并且可以打开。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-BC7ADFC2-DD84-4205-8E1C-06BC2AF4108B"><!-- --></a> PGA-20930：无效的SYNCLEVEL， <span class="variable" translate="no">number</span> ，指定;有效范围是<span class="variable" translate="no">number</span> ： <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAINIT的synclevel， <span class="variable" translate="no">sync</span>不是有效值。此值由DEFINE TRANSACTION语句中的SYNCLEVEL关键字指定，该语句用于定义到PGAU的事务。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> SYNCLEVEL的值必须在<span class="variable" translate="no">min</span> ： <span class="variable" translate="no">max</span>范围内。更正DEFINE TRANSACTION语句中为SYNCLEVEL关键字指定的值，并使用PGAU重新生成PL / SQL TIP。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B23C4C71-3AD8-436B-8E4B-04658544DC64"><!-- --></a> PGA-20931：发送的缓冲长度<span class="variable" translate="no">number</span>超过了最大的<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的发送缓冲区长度<span class="variable" translate="no">len</span>大于允许的<span class="variable" translate="no">max</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于向PGAU定义事务的PGDL和COBOL记录描述是否未定义任何大于APPC允许的最大大小的数据项。纠正错误的数据项并使用PGAU重新生成PL / SQL TIP。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-82E90E65-54A5-4327-8F0A-98298659EBA9"><!-- --></a> PGA-20932：无效的函数代码， <span class="variable" translate="no">string</span> ，传递给pgatctl</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGATCTL功能的功能代码<span class="variable" translate="no">func</span>无效。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正PL / SQL过程中的功能代码，重新编译它，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5B58B654-AE30-48F8-961A-EEC3C9DCFFE3"><!-- --></a> PGA-20933：初始化参数<span class="variable" translate="no">string</span> = <span class="variable" translate="no">string</span>指定的值无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关键字参数<span class="variable" translate="no">keyword</span> = <span class="variable" translate="no">value</span>指定无效值。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>请参阅Oracle Database Gateway for APPC，安装和配置指南，记录关键字的网关启动参数并更正错误。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-694BEE8D-66DC-44D7-8EAB-E8BC909E5084"><!-- --></a> PGA-20934：未定义的辅助信息配置文件<span class="variable" translate="no">string</span> ;无法建立对话</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>未向SNA软件定义辅助信息配置<span class="variable" translate="no">profile</span>配置<span class="variable" translate="no">profile</span> 。配置文件名称拼写错误，或者未定义配置文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果配置文件名称拼写错误，请更正该配置文件名称，或者将配置文件定义到SNA软件（如果尚未定义）。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5894F5AC-20A9-4ACB-A38F-2038924AB987"><!-- --></a> PGA-20936：发送缓冲区长度为<span class="variable" translate="no">number</span>但未指定发送长度</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的发送缓冲区长度为<span class="variable" translate="no">len</span> ，但发送长度数组为null或包含发送计数为零。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL或COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-3DD8A790-61A4-475A-97DF-B18E876A8E40"><!-- --></a> PGA-20937：接收缓冲区长度为<span class="variable" translate="no">number</span>但未指定接收长度</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的接收缓冲区长度为<span class="variable" translate="no">len</span> ，但接收长度数组为null或包含接收计数为零。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL或COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-88D7B60A-2378-4F51-BD45-4D123D9AC6A5"><!-- --></a> PGA-20938：发送长度数组太小（ <span class="variable" translate="no">number</span> ）以包含有效的发送计数</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的发送长度数组太小，无法包含有效的发送项目计数。发送长度数组的实际长度为<span class="variable" translate="no">len</span> 。发送长度数组的最小长度为4个字节。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果TIP由PGAU生成，请确保未正确修改。如果未修改TIP，受支持的客户应联系Oracle全球支持部门寻求帮助。如果TIP被修改或未由PGAU生成，请更正传递给PGAXFER的发送长度数组。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-61BA5DB8-090D-4D43-A141-9A212E234D92"><!-- --></a> PGA-20939：接收长度数组太小（ <span class="variable" translate="no">number</span> ）以包含有效的接收计数</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAXFER的接收长度数组太小，无法包含有效的接收项计数。接收长度数组的实际长度为<span class="variable" translate="no">len</span> 。接收长度数组的最小长度为4个字节。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果TIP由PGAU生成，请确保未正确修改。如果未修改TIP，受支持的客户应联系Oracle全球支持部门寻求帮助。如果TIP被修改或未由PGAU生成，请更正传递给PGAXFER的接收长度数组。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-DB16C554-9487-40C3-B73B-CF48FCF5C412"><!-- --></a> PGA-20945：无法登录Oracle进行事务日志记录</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器无法连接到存储事务日志表的Oracle服务器。Oracle服务器消息将遵循此消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。如果协议是SNA：还要检查网关init文件中的PGA_LOG_DB，PGA_LOG_USER和PGA_LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。如果协议是TCP / IP：还要检查网关init文件中的PGA_TCP_DB，PGA_TCP_USER和PGA_LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。有关Oracle服务器消息的信息，请参阅“Oracle服务器消息和代码手册”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-ACCCB580-03A6-484B-A285-00A652D63DC4"><!-- --></a> PGA-20947：无法为事务日志记录绑定变量<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器无法绑定变量<span class="variable" translate="no">var</span>以用于执行事务日志记录功能。Oracle服务器消息将遵循此消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要检查网关init文件中的PGA_LOG_DB，PGA_LOG_USER和PGA_LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。有关Oracle服务器消息的信息，请参阅“Oracle服务器消息和代码手册”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-DE14E0C2-DBE5-496A-8054-F5608685EC04"><!-- --></a> PGA-20948：无法为事务日志记录准备语句</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器无法准备用于调用事务日志记录PL / SQL存储过程的语句。Oracle服务器消息将遵循此消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要检查网关init文件中的PGA_LOG_DB，PGA_LOG_USER和PGA_LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。验证事务日志记录PL / SQL过程是否已在PGA_LOG_USER和PGA_LOG_PASS指定的用户标识和密码下正确安装到Oracle服务器中，并且它是可执行的。有关Oracle服务器消息的信息，请参阅“Oracle服务器消息和代码手册”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A9567441-378C-466A-B4CE-C34B7008F7F9"><!-- --></a> PGA-20949：无法为事务恢复定义变量<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器无法定义在恢复处理期间用于访问事务日志表的变量<span class="variable" translate="no">var</span> 。Oracle服务器消息将遵循此消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要检查网关init文件中的PGA_LOG_DB，PGA_LOG_USER和PGA_LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。有关Oracle服务器消息的信息，请参阅“Oracle服务器消息和代码手册”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-9D2EA947-7A54-4E3D-A601-9C13E8FDAAF5"><!-- --></a> PGA-20950：无法在事务日志上执行<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关服务器无法在事务日志表中插入，更新或删除挂起的事务行。Oracle服务器消息将遵循此消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要检查网关init文件中的PGA_LOG_DB，PGA_LOG_USER和PGA_LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。验证事务日志记录PL / SQL存储过程和事务日志表是否已在PGA_LOG_USER和PGA_LOG_PASS指定的用户标识和密码下正确安装到Oracle服务器中。有关Oracle服务器消息的信息，请参阅“Oracle服务器消息和代码手册”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-232963F9-17B6-441E-A0E7-059F3256A66D"><!-- --></a> PGA-20960：缺少<span class="variable" translate="no">string</span>参数，当PGA_CAPABILITY = <span class="variable" translate="no">string</span>时需要</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> PGA_CAPABILITY参数指定了<span class="variable" translate="no">cap</span> ，但省略了另一个必需参数<span class="variable" translate="no">parm</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>将缺少的参数添加到网关初始化文件中。有关所需参数的信息，请参阅“Oracle Database Gateway for APPC安装和配置指南”中的附录A“网关初始化参数”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-1F29584D-2570-438A-97B9-53FE9CF21CE9"><!-- --></a> PGA-20961：PGA_CAPABILITY = 2_PHASE时不允许同步1对话</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在synclevel 1中请求了对话。网关init文件指定PGA_CAPABILITY = 2_PHASE。启用两阶段提交时，不支持synclevel 1对话，因为它们不受两阶段处理的保护。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用synclevel 2进行对话（如果远程事务程序支持）或使用不同的网关SID进行此对话。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F8F5120E-6A2A-4552-A614-89C7CA8A3ACD"><!-- --></a> PGA-20962：当前不允许的synclevel 2对话</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在synclevel 2中请求了对话，但SNA软件在synclevel 0或1上分配了对话。这意味着SNA软件未配置为支持synclevel 2，或者未启用RRM。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正SNA软件配置以支持synclevel 2并启用RRN处理。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C81A060F-D140-4B2A-9AAF-7C1ADBD69244"><!-- --></a> PGA-20963：侧面配置文件<span class="variable" translate="no">string</span>指定错误的本地LU名称（ <span class="variable" translate="no">string</span> ）</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>为此对话指定的辅助信息配置<span class="variable" translate="no">profile</span>配置<span class="variable" translate="no">profile</span>具有本地LU名称<span class="variable" translate="no">lu</span> ，该名称与PGA_LOCAL_LU网关初始化参数指定的本地LU名称不同。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息将伴随消息PGA-20984，它提供由PGA_LOCAL_LU网关初始化参数指定的本地LU名称。必须更改辅助信息配置文件以使用相同的本地LU名称。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-30C88190-72F0-470A-B72A-285DCABFF7C2"><!-- --></a> PGA-20964：PGA_LOCAL_LU指定的本地LU名称是<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>消息PGA-20963已发出。此消息始终如下。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>见消息PGA-20963。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-44C8CF27-8E91-4CF8-8739-EE62EB41B75C"><!-- --></a> PGA-20965：同步点错误：期待<span class="variable" translate="no">string</span> PS标头，接收<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在处理两阶段提交期间，在同步点控制命令之后从远程事务程序收到了错误的响应。收到的响应是<span class="variable" translate="no">rcv</span>而不是预期的<span class="variable" translate="no">pstype</span> PS头。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>这是远程事务程序或远程OLTP中的错误。检查远程系统是否有来自OLTP的错误消息。请与远程系统的系统管理员联系，以帮助确定问题。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F183341F-C6D7-4B02-A702-031D441ABC9F"><!-- --></a> PGA-20966：同步点错误：发送<span class="variable" translate="no">string</span> ，期待<span class="variable" translate="no">string</span> ，接收<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在处理两阶段提交期间，在同步点控制命令<span class="variable" translate="no">psh</span>之后从远程事务程序接收到错误的响应<span class="variable" translate="no">resp</span> 。预期的回应是<span class="variable" translate="no">exp</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>这是远程事务程序或远程OLTP中的错误。检查远程系统是否有来自OLTP的错误消息。请与远程系统的系统管理员联系，以帮助确定问题。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-0AAC28AC-46FB-4949-A1EF-9A8C4D519427"><!-- --></a> PGA-20967：尝试进行两阶段提交恢复，需要DBA操作</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> Oracle集成服务器的恢复过程已连接到网关以执行恢复。但是，由于目标OLTP采取了未知的启发式操作，网关无法对此事务执行自动恢复。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> DBA必须尝试手动解决不确定事务。有关如何继续的详细信息，请参阅“Oracle数据库网关APPC安装和配置指南”的第8章，标题为“手动恢复疑难事务”一节。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F1378FC4-9C83-4914-AD38-42B3B3B55E04"><!-- --></a> PGA-20995：通信错误：' <span class="variable" translate="no">string</span> '失败，rc = <span class="variable" translate="no">number</span> ，errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>执行AIX SNA Server API <span class="variable" translate="no">func</span>发生意外的通信错误。函数返回码为<span class="variable" translate="no">rc</span> ，系统错误号为<span class="variable" translate="no">errno</span> 。供应商文档中描述了AIX SNA Server LU6.2 API函数返回码和系统错误号。SNA系统错误号也可以在AIX系统上的/usr/include/luxsna.h头文件中找到。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确定通信错误的原因，更正错误并重新运行事务。如果需要帮助，请与系统管理员联系。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-11041F5E-59C5-4DDF-BD9F-30AFED705318"><!-- --></a> PGA-20999：从系统收到SIGDANGER  - 所有会话已解除分配</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>系统向服务器发送了SIGDANGER信号，表明调页空间不足。所有当前活动的会话都被异常解除分配。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>与您的系统管理员联系。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-780777F7-8B9A-4B30-94F3-43A5BD4C8CE8"><!-- --></a> PGA-21001：内部错误： <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关RRM进程中的内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>重现错误，并启用跟踪以生成跟踪文件。支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D13E0142-0B85-4B70-8113-3CAFAFD00334"><!-- --></a> PGA-21002：无法获取<span class="variable" translate="no">string</span>的内存<span class="variable" translate="no">number</span>字节</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关RRM进程中的内存不足。请求无法为<span class="variable" translate="no">usage</span>区域分配内存<span class="variable" translate="no">bytes</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保您的系统具有足够的可用内存以支持RRM。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-3B9C0210-9714-4E01-AABA-86C1F498F107"><!-- --></a> PGA-21003：lxlinit中的内存分配错误</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关RRM进程中的内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保您的系统具有足够的可用内存以支持RRM。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-ADD6F283-ABE0-4397-B20B-E5ABA0FF52D9"><!-- --></a> PGA-21004：NLS_LANG指定的无效<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> NLS_LANG环境变量的<span class="variable" translate="no">comp</span>组件无效。组件可以是语言，区域或字符集。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正无效组件并重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-40BABA0A-DD38-401A-B87D-F5E4DED0FCB7"><!-- --></a> PGA-21005：找不到语言' <span class="variable" translate="no">string</span> '的消息文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>没有可用于NLS_LANG环境变量指定的语言<span class="variable" translate="no">lang</span>消息文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>有关RRM支持的消息文件语言列表，请参阅附录J，本地语言支持。如果支持所需的语言，请确保ORACLE_HOME环境变量指定网关的主目录，并确保正确安装了消息文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A30606D5-5434-4F71-9E06-4A74EE4C4931"><!-- --></a> PGA-21006：RRM初始化失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关RRM进程的初始化失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>当RRM的初始化失败，然后它可以初始化消息工具之前或者可以确定启动它的本地LU名称之前，此消息将作为ALERT消息发送到系统日志。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5D6E1CFB-E2F3-45C7-95EE-3682104FB1F3"><!-- --></a> PGA-21010：缺少完全限定的本地LU名称参数</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>完全限定的本地LU名称未作为命令行上pg4arrm程序的第一个参数传递。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须将完全限定的本地LU名称指定为pg4arrm程序的第一个参数。使用指定的标准本地LU名称重新输入命令行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D839A0EE-4011-4754-A819-B83B8B86D843"><!-- --></a> PGA-21011：网络名称长度（ <span class="variable" translate="no">number</span> ）无效，有效范围是<span class="variable" translate="no">number</span> ： <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>指定为pg4arrm程序的第一个参数的完全限定本地LU名称的网络名称部分是错误的长度（ <span class="variable" translate="no">len</span> ）。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>网络名称的有效长度范围在消息文本中以<span class="variable" translate="no">min</span> ： <span class="variable" translate="no">max</span> 。使用在完全限定的本地LU名称中指定的有效网络名称重新输入命令行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5DC12CC0-9C32-4C7D-8E16-E365002EC809"><!-- --></a> PGA-21012：无效的LU名称长度（ <span class="variable" translate="no">number</span> ），有效范围是<span class="variable" translate="no">number</span> ： <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>指定为pg4arrm程序的第一个参数的完全限定本地LU名称的LU名称部分是错误的长度（ <span class="variable" translate="no">len</span> ）。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> LU名称的有效长度范围在消息文本中以<span class="variable" translate="no">min</span> ： <span class="variable" translate="no">max</span> 。使用在完全限定的本地LU名称中指定的有效LU名称重新输入命令行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-9978A935-C5E8-4C44-AFCF-8489F34FCE0C"><!-- --></a> PGA-21013：在完全限定的本地LU名称中缺少句点（。）</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在完全限定的本地LU名称中没有句点（。）被指定为pg4arrm程序的第一个参数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>完全限定的本地LU名称必须包含网络名称和LU名称，以句点（。）分隔。使用指定的有效完全限定本地LU名称重新输入命令行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B4FC5FD2-A406-4CF4-BB43-B7644A926F21"><!-- --></a> PGA-21014：在网络名称' <span class="variable" translate="no">string</span> '中找到无效字符</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在完全限定的本地LU名称的网络名称部分<span class="variable" translate="no">net</span>中找到一个或多个无效字符。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>网络名称必须以大写字母字符或国家字符$，＃或@之一开头。后续字符可以是大写字母，国家或数字。使用在完全限定的本地LU名称中指定的有效网络名称重新输入命令行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5EE679C4-AD0C-4A07-A5D6-0C9E38A3C46A"><!-- --></a> PGA-21015：在LU名称' <span class="variable" translate="no">string</span> '中找到无效字符</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在完全限定的本地LU名称的LU名称部分<span class="variable" translate="no">lu</span>中找到一个或多个无效字符。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> LU名称必须以大写字母字符或国家字符$，＃或@之一开头。后续字符可以是大写字母，国家或数字。使用在完全限定的本地LU名称中指定的有效网络名称重新输入命令行。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-354A6769-1662-4C09-A5AC-9AB31FFE849B"><!-- --></a> PGA-21016：LU <span class="variable" translate="no">string</span> RRM初始化失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>本地LU <span class="variable" translate="no">lu</span>的网关RRM进程的初始化失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>当本地LU的RRM初始化失败时，此消息将作为ALERT消息发送到系统日志。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-3E45FA43-58A3-4BB5-B077-6C487127261D"><!-- --></a> PGA-21017：RRM已经为LU <span class="variable" translate="no">string</span>激活</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM已经为本地LU <span class="variable" translate="no">lu</span>启动。无法为同一本地LU启动第二个RRM。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确定RRM是否仍处于活动状态并正常运行。如果不是，那么它可能已经终止而没有清理。在AIX系统上，/ tmp / o / e <span class="variable" translate="no">luname</span>文件可能仍然存在。这将阻止启动新的RRM。如果您已验证原始RRM不再运行，则可以删除该文件以允许启动RRM的新副本。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-4BA5C854-F20E-474B-BB3B-20EB78A5B956"><!-- --></a> PGA-21020：为init文件创建路径对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问init文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F6931522-D13F-481C-81FA-140E1E8C317A"><!-- --></a> PGA-21021：为init文件创建名称对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问init文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-BAD52A80-97AF-4D95-B2B8-7763E199066A"><!-- --></a> PGA-21022：为init文件创建文件对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问init文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-19466CD6-1B92-4521-B988-C98B3CBD8C58"><!-- --></a> PGA-21023：错误打开初始化文件<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>打开init文件<span class="variable" translate="no">ifn</span>出错。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-928E61E1-BD5E-42B6-86A2-CC473BC43060"><!-- --></a> PGA-21024：读取初始化文件<span class="variable" translate="no">string</span>出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>读取init文件<span class="variable" translate="no">ifn</span>出错。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-47FC1430-6766-4E4D-B7B3-E1484A7B772F"><!-- --></a> PGA-21025：关闭init文件<span class="variable" translate="no">string</span>出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>打开init文件<span class="variable" translate="no">ifn</span>出错。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C4230BF1-C8AA-474E-81C5-266D5A4A425C"><!-- --></a> PGA-21030：行<span class="variable" translate="no">number</span>关键字无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在行号<span class="variable" translate="no">line</span>中的init文件中遇到无效关键字。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正init文件中的无效行并重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-8FF9AAF5-49DC-4B91-8870-CB035A33D377"><!-- --></a> PGA-21031： <span class="variable" translate="no">string</span>值（ <span class="variable" translate="no">number</span> ）的长度不在有效范围内（ <span class="variable" translate="no">number</span> ： <span class="variable" translate="no">number</span> ）</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关键字<span class="variable" translate="no">key</span>在init文件中指定的值的长度<span class="variable" translate="no">len</span>不在有效范围<span class="variable" translate="no">min</span> ： <span class="variable" translate="no">max</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正init文件中的无效关键字值，然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A8173691-0566-4A68-955F-98EFB4A4E6C2"><!-- --></a> PGA-21032： <span class="variable" translate="no">string</span> <span class="variable" translate="no">string</span>指定的值无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关键字<span class="variable" translate="no">key</span>在init文件中指定的值<span class="variable" translate="no">val</span>无效。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正init文件中的无效关键字值，然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-76D52526-8E60-4B77-A0AF-7F9E55332E2A"><!-- --></a> PGA-21033：在init文件中发现错误</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在RRM初始化期间在init文件中发现了一个或多个错误。RRM流程已终止。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正所有init文件错误并重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-ADA5B38B-30B8-453E-B85F-CE08C97208EE"><!-- --></a> PGA-21034：init文件中的错误太多，无法继续</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> init文件包含的错误多于RRM初始化代码可以处理的错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正到目前为止已处理的所有错误，然后重新启动RRM进程。然后将处理任何其他错误。仅当init文件包含大量无效行时才会收到此错误。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-724528ED-5918-4045-8F3A-97F5A669A2B3"><!-- --></a> PGA-21035： <span class="variable" translate="no">string</span> （ <span class="variable" translate="no">number</span> ）的值不在有效范围内（ <span class="variable" translate="no">number</span> ： <span class="variable" translate="no">number</span> ）</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关键字<span class="variable" translate="no">key</span>在init文件中指定的值<span class="variable" translate="no">val</span>不在有效范围<span class="variable" translate="no">min</span> ： <span class="variable" translate="no">max</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正init文件中的无效关键字值，然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B085F663-81AC-4006-9CF0-BB8BD22AE78D"><!-- --></a> PGA-21040：创建日志文件的路径对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问日志文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5E63B171-E296-4ABC-9955-D0FE27D47DDE"><!-- --></a> PGA-21041：为日志文件创建名称对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问日志文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-514D80C7-D506-4443-AE2B-09998410E1B2"><!-- --></a> PGA-21042：创建日志文件的文件对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问日志文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A29486DD-516A-4FD5-A021-A60E8C26DDF4"><!-- --></a> PGA-21043：错误打开日志文件<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>打开日志文件<span class="variable" translate="no">lfn</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-38917FC2-7750-49BA-8BFC-9B408C659EB8"><!-- --></a> PGA-21044：写入日志文件<span class="variable" translate="no">string</span>出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>写入日志文件<span class="variable" translate="no">lfn</span>发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D1A70BFC-1964-4FEF-84E4-80678B6502D7"><!-- --></a> PGA-21045：关闭日志文件<span class="variable" translate="no">string</span>出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关闭日志文件<span class="variable" translate="no">lfn</span>发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-147E08DA-325C-483D-ADFC-7A9005491D77"><!-- --></a> PGA-21046：由于日志文件错误，日志已切换到系统日志</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>写入日志文件时发生错误，并且记录为已切换到系统日志工具以执行此RRM执行的剩余部分。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正导致日志文件错误的问题，以便下次重新启动RRM将能够写入日志文件。此消息的常见原因是文件的磁盘空间不可用。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5199B862-F3AF-4477-B107-16E71696E801"><!-- --></a> PGA-21050：创建跟踪文件的路径对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问跟踪文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-2D461454-F66B-4E49-B1B7-8FA14BF05AB7"><!-- --></a> PGA-21051：创建跟踪文件的名称对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问跟踪文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-7BD7CB5A-BA2A-4872-8655-22D0CF4E31A6"><!-- --></a> PGA-21052：创建跟踪文件的文件对象时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>创建用于访问跟踪文件的内部控制块时发生内存不足。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保RRM进程有足够的可用内存。如果问题仍然存在，受支持的客户应联系Oracle全球支持部门寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-E109F769-DADF-4D69-ACFE-5906EEEBF465"><!-- --></a> PGA-21053：错误打开跟踪文件<span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>打开跟踪文件<span class="variable" translate="no">tfn</span>发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5326EB86-F584-408A-8B25-01D7D14D190D"><!-- --></a> PGA-21054：写入跟踪文件<span class="variable" translate="no">string</span>出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>写入跟踪文件<span class="variable" translate="no">tfn</span>发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A8A0A26A-C824-41D1-8CE4-5E94BF718376"><!-- --></a> PGA-21055：关闭跟踪文件<span class="variable" translate="no">string</span>出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关闭跟踪文件<span class="variable" translate="no">tfn</span>发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此消息后面将显示特定于操作系统的消息，显示错误信息。使用该信息确定错误原因并进行更正。然后重新启动RRM进程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D9CAA9AE-399A-4545-8A5F-F34B6BE3543A"><!-- --></a> PGA-21056：由于跟踪文件错误导致跟踪暂停</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>写入跟踪文件时发生错误，并且此RRM执行的剩余部分已暂停跟踪。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正导致跟踪文件上的错误的问题，以便下次重新启动RRM将能够写入跟踪文件。此消息的常见原因是文件的磁盘空间不可用。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C6F84281-7D9A-4135-9528-0DABB2A2D986"><!-- --></a> PGA-21060：system errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>系统错误数目<span class="variable" translate="no">errno</span>按照文件操作失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>系统错误代码记录在头文件/usr/include/errno.h中。确定文件错误的原因并进行更正。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-83F0779F-6F82-4929-9763-42F3EBC73F6C"><!-- --></a> PGA-21100：RRM初始化本地LU <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM正在初始化本地LU <span class="variable" translate="no">llu</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-682C5099-4F03-4335-A497-AC73ED687AA3"><!-- --></a> PGA-21101：从<span class="variable" translate="no">string</span>读取的初始化参数</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>从<span class="variable" translate="no">ifn</span>文件中读取Init参数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-17C9BD0E-18D9-40D4-9807-37A355F8BD43"><!-- --></a> PGA-21102：写入<span class="variable" translate="no">string</span>日志消息</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>日志消息将写入文件<span class="variable" translate="no">lfn</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A9546A13-C46F-412E-9BF2-CAA581530963"><!-- --></a> PGA-21103：写入<span class="variable" translate="no">string</span>跟踪信息</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>跟踪信息将写入文件<span class="variable" translate="no">tfn</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-4D8356A9-F634-4330-8741-92754F951B0B"><!-- --></a> PGA-21104：当前设置为<span class="variable" translate="no">number</span>跟踪级别</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> TRACE_LEVEL参数指定的跟踪级别为<span class="variable" translate="no">trc</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-81FD8F81-8AAD-4CF9-94F6-F4DFC8F022F6"><!-- --></a> PGA-21105：本地LU <span class="variable" translate="no">string</span>启动是温暖的</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM是本地LU <span class="variable" translate="no">llu</span>热启动。RRM将尝试从RRM LU6.2日志恢复所有LU6.2日志状态，因为它在最后一次RRM关闭时存在。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B4956468-8943-451A-B6CB-4C497244979B"><!-- --></a> PGA-21106：本地LU <span class="variable" translate="no">string</span>暖启动完成</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM已为本地LU <span class="variable" translate="no">llu</span>热启动。这意味着RRM LU6.2日志恢复了RRM先前与之通信的本地LU和伙伴LU的所有状态信息，因为它在最后一次RRM关闭时存在。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-499099D8-7B63-428B-9F27-646F0F726F8E"><!-- --></a> PGA-21107：本地LU <span class="variable" translate="no">string</span>启动很冷</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM是本地LU <span class="variable" translate="no">llu</span>冷启动。RRM不会保留先前执行的任何LU6.2日志状态。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-2D81B6A2-EA45-4DDD-9BD4-864C7080241B"><!-- --></a> PGA-21108：本地LU <span class="variable" translate="no">string</span>冷启动完成</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM已为本地LU <span class="variable" translate="no">llu</span>冷启动。RRM具有新的本地LU6.2日志名称，并且已删除伙伴LU的所有LU6.2日志名称。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-44ACE8B4-4A63-46B6-9150-A9066F9C5115"><!-- --></a> PGA-21109：本地日志名称是x' <span class="variable" translate="no">string</span> '</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>本地LU的<span class="variable" translate="no">llog</span> 。由于日志名称不一定是可打印的字符串，因此它被列为十六进制字符串。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-045A5C7E-8946-4B25-B40B-49A8F1D4115A"><!-- --></a> PGA-21110：XLN从合作伙伴LU <span class="variable" translate="no">string</span>收到</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>已从伙伴LU <span class="variable" translate="no">plu</span>的RRM接收到Exchange日志名称（XLN）GDS变量。这是自上次启动本地RRM或伙伴RRM以来首次与伙伴LU建立通信时发生的第一件事。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-956C3BEC-BEED-44C7-A63C-71FA7F5AD053"><!-- --></a> PGA-21111：合作伙伴日志名称是x' <span class="variable" translate="no">string</span> '</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>伙伴LU的LU6.2日志名称是<span class="variable" translate="no">plog</span> 。由于日志名称不一定是可打印的字符串，因此它被列为十六进制字符串。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-4762C2A0-AEDC-446F-AC48-B19CB8F3F70A"><!-- --></a> PGA-21112：为伙伴LU <span class="variable" translate="no">string</span>创建新的日志条目</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM在其<span class="variable" translate="no">plu</span> LU <span class="variable" translate="no">plu</span>创建一个条目。这仅在自本地RRM的上一次冷启动以来伙伴LU的RRM第一次联系本地RRM时发生。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-637AEFE6-8279-4FD2-AB19-B0FB2B83AF14"><!-- --></a> PGA-21113：伙伴LU <span class="variable" translate="no">string</span>热启动</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM是伴侣LU <span class="variable" translate="no">plu</span>热启动。当伙伴LU的RRM热启动并且自本地RRM启动以来第一次联系本地RRM时会发生这种情况。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-ED5C8F70-4A52-4A24-93F9-349CEBD8ABD2"><!-- --></a> PGA-21114：伙伴LU <span class="variable" translate="no">string</span>冷启动</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM是伙伴LU <span class="variable" translate="no">plu</span>冷启动。当伙伴LU的RRM冷启动并且自本地RRM启动以来第一次联系本地RRM时会发生这种情况。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-60A62F15-2C73-4E64-886C-3348547FAE6B"><!-- --></a> PGA-21115：收到关机请求</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM已收到关闭请求。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-13601246-7925-4353-A0C1-F42AB2B86A7D"><!-- --></a> PGA-21116：本地LU <span class="variable" translate="no">string</span> RRM终止完成</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM已终止本地LU <span class="variable" translate="no">llu</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>信息性消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-9A9F2933-1973-462F-A07F-B82F72C090BF"><!-- --></a> PGA-21200：在<span class="variable" translate="no">string</span>失败时连接到Oracle Server</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法以用户<span class="variable" translate="no">user</span>身份连接到存储其LU6.2日志信息的Oracle服务器。Oracle服务器消息将遵循此消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要检查RRM init文件中的LOG_DB，LOG_USER和LOG_PASS参数，并确保它们分别指定正确的数据库字符串，用户标识和密码。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-BC862D6A-B6F9-4CFA-B7A6-ABCA86C8F731"><!-- --></a> PGA-21201：为本地LU <span class="variable" translate="no">string</span>选择PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法读取其本地LU6.2日志条目。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D55A86A8-32A9-430A-9204-7ABB31260103"><!-- --></a> PGA-21202：更新本地LU <span class="variable" translate="no">string</span> PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在热启动处理期间，RRM无法更新其本地LU6.2日志条目。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-2ED16D95-B718-40CC-BE4E-2D15FCC68BB8"><!-- --></a> PGA-21203：为本地LU <span class="variable" translate="no">string</span>插入PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法在冷启动处理期间创建其本地LU6.2日志条目。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并再次启动RRM冷却。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-3B26AFE7-8BB9-46A7-9821-4D15239612CA"><!-- --></a> PGA-21204：删除本地LU <span class="variable" translate="no">string</span> PGA_2PC_PENDING行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在冷启动处理期间，RRM无法从其本地LU6.2日志中删除挂起的事务条目。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_PENDING表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并再次启动RRM冷却。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-3F0C159B-17B8-454B-8B54-F4F3491ED0D3"><!-- --></a> PGA-21205：删除伙伴LU的PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在冷启动处理期间，RRM无法从其本地LU6.2日志中删除伙伴LU条目。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并再次启动RRM冷却。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-AE14C9DC-73D9-4AFB-8DBA-BB34F26E5E3C"><!-- --></a> PGA-21206：为伙伴LU <span class="variable" translate="no">string</span>选择PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法读取其伙伴LU的本地LU6.2日志条目。 Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-88DDAF74-E198-40B6-A477-3538A67FCB96"><!-- --></a> PGA-21207：为伙伴LU <span class="variable" translate="no">string</span>插入PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法为伙伴LU创建本地LU6.2日志条目。 Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-1EB97209-2DFA-41AB-9BB2-85A34DD4381B"><!-- --></a> PGA-21208：更新伙伴LU <span class="variable" translate="no">string</span> PGA_2PC_LUS行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法更新其伙伴LU的本地LU6.2日志条目。 Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C51E0C1B-DDA2-4F79-A988-1DBE9D17E9B3"><!-- --></a> PGA-21209：为伙伴LU <span class="variable" translate="no">string</span>选择PGA_2PC_PENDING行时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法从其<span class="variable" translate="no">plu</span> LU <span class="variable" translate="no">plu</span>的待处理事务条目。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_PENDING表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-5EB9DB57-8129-4CFB-AF30-F11D5475988D"><!-- --></a> PGA-21210：无法打开与SNA服务的连接</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法初始化与SNA软件的LU6.2通信连接。此消息之前是特定于操作系统的错误消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查特定于操作系统的错误消息中的错误信息以确定问题的原因，并采取纠正措施。问题解决后，重新启动RRM。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-920998F2-D83A-4AB9-9704-1B1F00C673DC"><!-- --></a> PGA-21211：无法分配LU6.2侦听RRM TP</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM无法使用SNA软件为LU6.2通信分配LU6.2监听。此消息之前是特定于操作系统的错误消息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查特定于操作系统的错误消息中的错误信息以确定问题的原因，并采取纠正措施。问题解决后，重新启动RRM。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B57B2C51-797D-4179-A170-A50212C4624F"><!-- --></a> PGA-21212：从伙伴LU <span class="variable" translate="no">string</span>收到的数据不正确</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>合作伙伴LU在与本地RRM的初始通信中发送了错误数据。收到的第一个数据应该是Exchange日志名称（XLN）GDS变量，但不是。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此错误表示连接的伙伴LU端存在问题。必须由系统管理员为该LU采取纠正措施。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-068F25CF-2C0E-4EF0-89F3-E5E251B8C8E5"><!-- --></a> PGA-21213：收到x' <span class="variable" translate="no">string</span> '</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>此消息在消息PGA-00208之后，并转储从伙伴LU接收的数据的前32个字节。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果此消息中的数据不足以确定伙伴LU上的问题，请使用连接任一侧的SNA跟踪来收集更多详细信息，或使用RRM init文件中的TRACE_LEVEL参数来启用SNA数据跟踪跟踪文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F32D2CDB-F0B7-462D-A80C-DB7B066BA534"><!-- --></a> PGA-21214：XLN中的服务标志不正确</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>从伙伴LU的RRM收到的Exchange日志名称（XLN）GDS变量中的服务标志不正确。XLN应该设置REQUEST标志。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此错误表示连接的伙伴LU端存在问题。必须由系统管理员为该LU采取纠正措施。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-FC8DB036-8C78-4601-9A14-CACE29A3296A"><!-- --></a> PGA-21215：热启动时伙伴日志名称不匹配</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>从伙伴LU的RRM接收的Exchange日志名称（XLN）GDS变量包含LU6.2日志名称，该名称与本地LU的RRM已知的日志名称不同。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果伙伴LU冷启动并且稍后热启动，则可能发生这种情况，所有这些都发生在本地LU的RRM上次关闭和热启动之间。本地LU的RRM不知道伙伴LU是冷启动的，因此假设伙伴LU的RRM使用了错误的LU6.2日志name。验证是否发生了这种情况，如果是这样，可以强制本地LU的RRM通过删除伙伴LU的本地RRM的LU6.2日志条目，然后强制，从伙伴LU的RRM接受新的LU6.2日志name。伙伴LU重新启动与本地LU的连接。有关从此错误中恢复的更多信息，请参阅第12章“两阶段提交”中的“RRM恢复”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B33E22E0-1A46-4AB6-B66D-19AA639FCB90"><!-- --></a> PGA-21216：上次存储的日志名称x' <span class="variable" translate="no">string</span> '</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>此消息始终跟在消息PGA-00213之后，并列出本地LU的RRM保存的最后一个伙伴LU LU6.2日志名称<span class="variable" translate="no">plog</span> 。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在确定日志名称不匹配的原因时，消息中的日志名称可能对合作伙伴LU的系统管理员有用。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-10A8B3CF-FA09-4E82-B44C-D32937AC5FF9"><!-- --></a> PGA-21217：合作伙伴发送日志名称x' <span class="variable" translate="no">string</span> '</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>此消息始终跟在消息PGA-00214之后，并列出伙伴LU的RRM在热启动Exchange日志名称（XLN）GDS变量中发送的<span class="variable" translate="no">plog</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在确定日志名称不匹配的原因时，消息中的日志名称可能对合作伙伴LU的系统管理员有用。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-6E096671-8C36-442E-A12C-4BA4BF29EA1B"><!-- --></a> PGA-21218：合作伙伴LU <span class="variable" translate="no">string</span>冷启动被拒绝，存在<span class="variable" translate="no">number</span>待处理事务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>合作伙伴LU的RRM请求冷启动，但本地RRM确定本地RRM的LU6.2日志中该LU仍有未解决的待处理事务。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果已解决挂起的事务，则必须先从本地RRM的LU6.2日志中手动删除它们，然后才能接受伙伴LU的冷启动请求。如果尚未解决挂起的事务，则必须先解析它们，然后在接受伙伴LU的冷启动请求之前从本地RRM的LU6.2日志中手动删除它们。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-011C9B8E-F6B1-4F93-A59D-602422BF229A"><!-- --></a> PGA-21219：本地LU <span class="variable" translate="no">string</span>需要DBA的恢复操作</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>发生了需要DBA采取措施的情况。此消息也作为警报消息发送到系统日志。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> DBA应检查RRM日志文件以确定要采取的操作。日志文件中的消息显示发生了哪些事件使DBA操作成为必要，本附录中的描述为DBA提供了一个操作过程。有关恢复的更多信息，请参阅“Oracle数据库网关APPC安装和配置指南”的第8章“实现两阶段提交”中的“RRM恢复”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B016C996-FCE5-4B9D-A8EA-711736016310"><!-- --></a> PGA-21220：超出了记录错误限制（ <span class="variable" translate="no">number</span> ），RR <span class="variable" translate="no">string</span>关闭LU <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>已超出访问RRM的本地LU6.2日志表时<span class="variable" translate="no">lim</span> Oracle错误的限制。本地LU <span class="variable" translate="no">llu</span>的RRM正在关闭。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> DBA应检查RRM日志文件以确定要采取的操作。日志文件中的消息将显示已发生的Oracle错误，DBA应采取所需的任何纠正操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C2FDAF20-1B08-49E1-9BAC-7AB7C21A7DB1"><!-- --></a> PGA-21221：在本地LU <span class="variable" translate="no">string</span>冷启动期间提交失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在本地LU <span class="variable" translate="no">llu</span>冷启动期间，RRM无法提交其本地日志的更新。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-4FBF3B11-FD9E-428E-98D8-A14E4634D5FD"><!-- --></a> PGA-21222：在本地LU <span class="variable" translate="no">string</span>热启动期间提交失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在本地LU <span class="variable" translate="no">llu</span>的热启动期间，RRM无法提交其本地日志的更新。Oracle服务器消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-321D7B07-F7F3-49D3-87BC-E9C33A6CCC45"><!-- --></a> PGA-21223：在伙伴LU <span class="variable" translate="no">string</span>的首次处理期间提交失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在合作伙伴LU <span class="variable" translate="no">plu</span>的首次处理期间，RRM无法提交其本地日志的更新。Oracle Server消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-B026B226-AF1D-403A-AFD2-709001C2102B"><!-- --></a> PGA-21224：在伙伴LU <span class="variable" translate="no">string</span>冷启动期间提交失败</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在伙伴LU <span class="variable" translate="no">plu</span>冷启动期间，RRM无法提交其本地日志的更新。Oracle Server消息将遵循此消息，并包含有关Oracle错误的信息。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保Oracle服务器及其TNS侦听器都可以运行。还要确保PGA_2PC_LUS表存在且未手动更改或更新。如果表已被篡改，则可能需要重新初始化并且RRM冷启动。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-014316B1-EE03-4FAF-95C2-3205BDFB6C9C"><!-- --></a> PGA-21300：在预期数据时未收到任何数据</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM期望从合作伙伴RRM接收数据，但未收到任何数据。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此错误表示连接的伙伴LU端可能存在问题。必须由系统管理员为该LU采取纠正措施。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-AAC387E6-94F1-4CC7-80BD-623CA6604EA8"><!-- --></a> PGA-21301：收到无效控件： <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> RRM从伙伴RRM收到无效的控制标志<span class="variable" translate="no">control</span> 。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>此错误表示连接的伙伴LU端可能存在问题。必须由系统管理员为该LU采取纠正措施。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-051F9DEE-C0E5-4501-A1FF-EA3263904E1C"><!-- --></a> PGA-21400：未设置ORACLE_HOME环境变量</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在RRM启动之前未设置ORACLE_HOME环境变量。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在RRM启动之前，必须将ORACLE_HOME环境变量设置为网关的ORACLE_HOME目录。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-69B42724-D644-4BEB-A4A5-919604C8AE0B"><!-- --></a> PGA-21401：ORACLE_HOME环境变量设置为空字符串</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> ORACLE_HOME环境变量设置为空值。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在RRM启动之前，必须将ORACLE_HOME环境变量设置为网关的ORACLE_HOME目录。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-FBB712BE-09BD-45BF-A955-1251B9F117F8"><!-- --></a> PGA-21402：错误打开文件<span class="variable" translate="no">string</span> ，fopen errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>打开RRM入队文件<span class="variable" translate="no">fn</span>进行写入时发生错误。来自fopen的错误号是<span class="variable" translate="no">errno</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用<span class="variable" translate="no">errno</span>值确定问题的原因并在重新启动RRM之前更正它。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F951FFAF-7CEE-4B75-8CBB-9B83053A9DEB"><!-- --></a> PGA-21403：写入文件<span class="variable" translate="no">string</span>出错，fputs errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>写入RRM入队文件<span class="variable" translate="no">fn</span>发生错误。来自fputs的错误号是<span class="variable" translate="no">errno</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用<span class="variable" translate="no">errno</span>值确定问题的原因并在重新启动RRM之前更正它。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C758282D-190D-4B8B-BE6D-BD18EB18DD47"><!-- --></a> PGA-21404：关闭文件<span class="variable" translate="no">string</span>出错，fclose errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>关闭RRM入队文件<span class="variable" translate="no">fn</span>发生错误。来自fclose的错误号是<span class="variable" translate="no">errno</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用<span class="variable" translate="no">errno</span>值确定问题的原因并在重新启动RRM之前更正它。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-012F0CD0-7B43-48A2-986F-68FC1C56B4E4"><!-- --></a> PGA-21405：删除文件<span class="variable" translate="no">string</span>出错，删除errno = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在关闭期间删除RRM入队文件<span class="variable" translate="no">fn</span>时发生错误。删除的错误号是<span class="variable" translate="no">errno</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用<span class="variable" translate="no">errno</span>值确定问题的原因并在重新启动RRM之前更正它。在尝试启动RRM之前，必须手动删除文件<span class="variable" translate="no">fn</span> 。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F1172A76-B4B3-43A8-9DE8-E42CC64CB04A"><!-- --></a> PGA-21450：通讯错误：' <span class="variable" translate="no">string</span> '失败，错误= <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> AIX SNA函数<span class="variable" translate="no">func</span>失败，系统错误号为<span class="variable" translate="no">errno</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> IBM SNA服务器：诊断指南和消息中记录了AIX SNA错误代码。使用本手册确定问题的原因并予以纠正。AIX SNA系统错误号也记录在AIX系统上的/usr/include/luxsna.h头文件中。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-2DDEAEAF-8A8C-4C6D-928E-C9D478A343D9"><!-- --></a> PGA-21451：SNA Server正在关闭</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>正在关闭SNA Server并将SIGUSR1发送到RRM。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> RRM必须在发生这种情况时终止。请与系统管理员联系以确定SNA Server关闭的原因。重新启动SNA Server后重新启动RRM。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-0F526FB5-87F8-40CC-82FF-C2B3A5D9EEF4"><!-- --></a> PGA-22001：远程主机名为空。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> TCP / IP协议已为远程主机名返回“null”。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通过pg4tcpmap工具验证远程主机名，然后重新执行PL / SQL语句。如果问题无法解决，受支持的客户应联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-F1D71520-EBDF-44E9-BC6A-706F834BD5DC"><!-- --></a> PGA-22002：通信错误：TCP / IP <span class="variable" translate="no">string</span>失败，rc = <span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>函数<span class="variable" translate="no">func</span>失败，返回码为<span class="variable" translate="no">rc</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果问题无法解决，受支持的客户应该使用Oracle Support Servics寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-7AF78124-2C3C-40D3-A2A0-743248F047CD"><!-- --></a> PGA-22003：通信错误：TCP / IP <span class="variable" translate="no">string</span>失败，rc = <span class="variable" translate="no">number</span> ，for， <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>执行指定的TCP / IP功能<span class="variable" translate="no">func</span>发生意外通信错误。TCP / IP函数返回码为<span class="variable" translate="no">rc</span> ，函数<span class="variable" translate="no">func</span>参数为<span class="variable" translate="no">parm</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果问题无法解决，受支持的客户应该使用Oracle Support Servics寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-BD62C452-C21D-471E-9512-1545028D4232"><!-- --></a> PGA-22004：总消息值（ <span class="variable" translate="no">number</span> ）的长度不在有效范围内（ <span class="variable" translate="no">number</span> ： <span class="variable" translate="no">number</span> ）</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>该值的长度<span class="variable" translate="no">len</span>不在有效范围<span class="variable" translate="no">min</span> ： <span class="variable" translate="no">max</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>如果问题无法解决，受支持的客户应该使用Oracle Support Servics寻求帮助。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A8CD583D-21CD-4739-941F-EC273B1DE361"><!-- --></a> PGA-22005：无效的套接字文件描述符：未找到活动的对话</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>用户没有活动的TCP / IP对话。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查应用程序是否未按顺序调用PL / SQL TIP例程。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-9B9D9FB8-D842-4901-A024-36C7FA3A9356"><!-- --></a> PGA-22006：未指定参数<span class="variable" translate="no">string</span> 。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>网关初始化文件中缺少参数<span class="variable" translate="no">parm</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>将缺少的参数添加到网关初始化文件中。有关使用TCP / IP的网关所需的初始化参数，请参阅“Oracle数据库网关安装和配置指南”。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-C8FA2F14-3A6E-4BFD-AB57-ECC3DA30D22F"><!-- --></a> PGA-22007：用户ID <span class="variable" translate="no">string</span>的长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>用户ID <span class="variable" translate="no">uid</span>过长<span class="variable" translate="no">len</span>使用。用户标识的最大允许长度为<span class="variable" translate="no">max</span>字符数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须将用户标识更改为较短的值，以便OCI登录到表PGA_TCP_IMSC。有关使用TCP / IP的网关所需的网关初始化参数，请参阅“Oracle数据库网关安装和配置指南”。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-EBF13208-B1CE-4587-865F-F02572A0DA28"><!-- --></a> PGA-22008：的密码长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>密码太长<span class="variable" translate="no">len</span>使用。密码的最大允许长度为<span class="variable" translate="no">max</span>字符数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须将密码更改为较短的值，以便OCI登录到表PGA_TCP_IMSC。有关使用TCP / IP的网关所需的网关初始化参数，请参阅“Oracle数据库网关安装和配置指南”。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-7C7E68F8-366F-4EB5-A47E-CDFA17640E4B"><!-- --></a> PGA-22009：数据库名<span class="variable" translate="no">string</span>的长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>数据库名称<span class="variable" translate="no">db name</span>太长<span class="variable" translate="no">len</span>使用。数据库名称的最大允许长度为<span class="variable" translate="no">max</span>字符数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须将数据库名称更改为较短的值，以便OCI登录到表PGA_TCP_IMSC。有关使用TCP / IP的网关所需的网关初始化参数，请参阅“Oracle数据库网关安装和配置指南”。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-D02ECEBB-CC78-4137-97D9-29478FE08263"><!-- --></a> PGA-22010：用户ID <span class="variable" translate="no">string</span>的长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> userid <span class="variable" translate="no">uid</span>太长（ <span class="variable" translate="no">len</span> ），无法与TCP / IP RACF会话安全性一起使用。仅当网关初始化参数PGA_SECURITY_TYPE设置为SAME或PROGRAM时，才会发生这种情况。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须在客户端系统和正在执行远程事务程序的系统上将userid更改为更短的值。userid的最大允许长度为<span class="variable" translate="no">max</span>字符数。此限制由RACF强加，而不是由网关强加。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-66F1091C-EBD0-45DD-B970-3BDAD558673E"><!-- --></a> PGA-22011：的密码长度<span class="variable" translate="no">number</span>是无效的;最大长度是<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>密码太长（ <span class="variable" translate="no">len</span> ），无法与TCP / IP RACF对话安全性一起使用。仅当网关初始化参数PGA_SECURITY_TYPE设置为PROGRAM时才会发生这种情况。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>必须在客户端系统和正在执行远程事务程序的系统上将密码更改为更短的值。密码的最大允许长度为<span class="variable" translate="no">max</span>字符数。此限制由RACF强加，而不是由网关强加。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-9979F786-D495-49D7-8A5E-F5317B7B491A"><!-- --></a> PGA-22012：IMS Connect错误：返回码= <span class="variable" translate="no">string</span> ，原因码= <span class="variable" translate="no">string</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>执行'recv'功能时发生意外的IMS Connect错误。消息文本中提供了返回码<span class="variable" translate="no">rc</span>和原因码<span class="variable" translate="no">rsc</span> 。有关更多信息，请查看以HWS开头的OLTP SDSF日志和IMS Connect错误消息。这些消息记录在IBM IMS Connect Guide和Refrence手册中。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确定错误原因，更正错误并重新运行事务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-0E2630AF-AA3F-4989-A4F2-DFEDEE6A15AD__GUID-A833D451-F092-46DE-9232-CE2E333D9DE6"><!-- --></a> PGA-22014：的事务代码长度<span class="variable" translate="no">number</span>超过了最大的<span class="variable" translate="no">number</span></dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>传递给PGAINIT或PGAINIT_SEC的事务代码长度<span class="variable" translate="no">len</span>大于允许的最大长度<span class="variable" translate="no">max</span> 。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查用于定义PGAU事务的PGDL和COBOL记录描述是否与事务程序同步，并且PGAU使用正确的定义生成PL / SQL TIP。如果已对生成的PL / SQL代码进行了修改，请检查它们是否正确。

                     </p>
                     
                  </dd>
               </dl>
            </div>
         </div>
      </article>
   </body>
</html><html id="04780.notification-streams-advanced-queuing.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes continuous query notification, publish-subscribe notification, and Database advanced queuing features."></meta>
      <meta name="description" content="This chapter describes continuous query notification, publish-subscribe notification, and Database advanced queuing features."></meta>
      <title>通知方法和数据库高级排队</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter describes continuous query notification, publish-subscribe notification, and Database advanced queuing features."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="high-availability-in-oci.html" title="Previous" type="text/html"></link>
      <link rel="next" href="user-defined-callback-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="high-availability-in-oci.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="user-defined-callback-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">通知方法和数据库高级排队</li>
            </ol>
            <a id="GUID-CB527931-3630-4F31-99ED-1D53C3F7FD90" name="GUID-CB527931-3630-4F31-99ED-1D53C3F7FD90"></a>
            
            <h2 id="LNOCI-GUID-CB527931-3630-4F31-99ED-1D53C3F7FD90" class="sect2"><span class="enumeration_chapter">13</span>通知方法和数据库高级排队</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍连续查询通知，发布 - 订阅通知和数据库高级排队功能。</p>
               <div class="p">本章包括以下主题：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-0D3F60BF-942A-4F50-BD58-7F719BE10529" title="连续查询通知（CQN）使客户端应用程序能够向数据库注册查询，并接收通知以响应对象上的DML或DDL更改或响应与查询关联的结果集更改。">关于连续查询通知</a></p>
                     </li>
                     <li>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4" title="发布 - 订阅通知功能允许OCI应用程序直接接收客户端通知，注册可以向其发送通知的电子邮件地址，注册可以发布通知的HTTP URL，或者注册要在其上调用的PL / SQL过程。通知。">在OCI中发布 - 订阅通知</a></p>
                     </li>
                     <li>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" title="OCI提供了数据库高级队列（Database AQ）功能的接口。数据库高级队列将消息队列作为Oracle数据库的集成部分提供。">OCI和数据库高级排队</a></p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0D3F60BF-942A-4F50-BD58-7F719BE10529" name="GUID-0D3F60BF-942A-4F50-BD58-7F719BE10529"></a><h3 id="LNOCI-GUID-0D3F60BF-942A-4F50-BD58-7F719BE10529" class="sect3"><span class="enumeration_section">13.1</span>关于连续查询通知</h3>
               <div>
                  <p>连续查询通知（CQN）使客户端应用程序能够向数据库注册查询，并接收通知以响应对象上的DML或DDL更改或响应与查询关联的结果集更改。</p>
                  <p>当DML或DDL事务提交时，通知由数据库发布。</p>
                  <p>在注册期间，应用程序指定通知处理程序并将一组有趣的查询与通知处理程序相关联。通知处理程序可以是服务器端PL / SQL过程，也可以是客户端C回调。在对象级别或查询级别创建注册。如果注册是在对象级别，那么每当事务更改任何已注册的对象和提交时，都会调用通知处理程序。如果注册是在查询级别，那么每当事务提交更改以便修改查询的结果集时，将调用通知处理程序，但如果更改不影响查询的结果集，则通知处理程序不会调用。</p>
                  <p>可以为以下类型的语句注册查询更改通知： <code class="codeph">OCI_STMT_SELECT</code> ， <code class="codeph">OCI_STMT_BEGIN</code> ， <code class="codeph">OCI_STMT_DECLARE</code>和<code class="codeph">OCI_STMT_CALL</code> 。</p>
                  <p>查询更改通知假定PLSQL代码仅为每个<code class="codeph">SELECT</code>语句执行<code class="codeph">SELECT</code>语句和寄存器。否则，如果PLSQL代码中存在任何非SELECT语句，则会引发错误。
                  </p>
                  <p>连续查询通知的一种用途是在中间层应用程序中，这些应用程序必须具有缓存数据并使后端数据库的缓存尽可能新。</p>
                  <p>通知包括以下信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>查询结果集已更改的查询的ID。这是因为注册是在查询粒度。</p>
                     </li>
                     <li>
                        <p>已修改对象或已更改行的名称。</p>
                     </li>
                     <li>
                        <p>操作类型（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ， <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ， <code class="codeph">DROP</code> <code class="codeph">TABLE</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>已更改行的<code class="codeph">ROWID</code>和关联的DML操作（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>全局数据库事件（ <code class="codeph">STARTUP</code> ， <code class="codeph">SHUTDOWN</code> ）。在Oracle Real Application Cluster（Oracle RAC）中，数据库在第一个实例启动或最后一个实例关闭时发送通知。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0D3F60BF-942A-4F50-BD58-7F719BE10529__GUID-D148FB06-37BA-4030-86FA-F7D719B3AC7F">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../adfns/cqn.html#ADFNS018" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，关于使用连续查询通知来完整讨论此功能的概念以及使用OCI和PL / SQL接口创建CQN注册的部分</p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4" title="发布 - 订阅通知功能允许OCI应用程序直接接收客户端通知，注册可以向其发送通知的电子邮件地址，注册可以发布通知的HTTP URL，或者注册要在其上调用的PL / SQL过程。通知。">在OCI中发布 - 订阅通知</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4" name="GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4"></a><h3 id="LNOCI-GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4" class="sect3"><span class="enumeration_section">13.2</span>在OCI中发布 - 订阅通知</h3>
               <div>
                  <p>发布 - 订阅通知功能允许OCI应用程序直接接收客户端通知，注册可以向其发送通知的电子邮件地址，注册可以发布通知的HTTP URL，或者注册要在其上调用的PL / SQL过程。通知。</p>
                  <p><a href="notification-streams-advanced-queuing.html#GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4__I457371">图13-1</a>说明了该过程。
                  </p>
                  <div class="figure" id="GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4__I457371">
                     <p class="titleinfigure">图13-1发布 - 订阅模型</p><img src="img/lnoci039.gif" alt="下面是图13-1的描述" title="下面是图13-1的描述" longdesc="img_text/lnoci039.html"><br><a href="img_text/lnoci039.html">“图13-1发布 - 订阅模型”的描述</a></div>
                  <!-- class="figure" -->
                  <p>OCI申请可以：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在AQ名称空间中注册对通知的兴趣，并在发生入队时通知</p>
                     </li>
                     <li>
                        <p>注册对数据库事件订阅的兴趣，并在触发事件时接收通知</p>
                     </li>
                     <li>
                        <p>管理注册，例如暂时禁用注册或完全删除注册</p>
                     </li>
                     <li>
                        <p>向注册客户发布或发送通知</p>
                     </li>
                  </ul>
                  <p>在所有上述场景中，通知可以由OCI应用程序直接接收，或者通知可以发送到预先指定的电子邮件地址，或者可以发送到预定义的HTTP URL，或者可以调用预先指定的数据库PL / SQL过程因为通知</p>
                  <p>触发事件时或在显式AQ队列中异步通知已注册的客户端。客户端不需要连接到数据库。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-1E9445D7-DFD9-4230-BFFD-EF3630691ECE" title="您可以使用轻量级目录访问协议（LDAP）直接注册到数据库或注册。">在OCI中发布 - 订阅注册功能</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5" title="客户端必须注册一个通知回调，当订阅了一些已注册兴趣的活动时，该回调会被调用。">OCI中的通知回调</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-078F3FD1-7CAA-45FC-A93F-1CE942D27CA0" title="必须在数据库中创建在已注册兴趣的订阅上存在某些活动时调用的PL / SQL通知过程。">通知程序</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-909E21A8-A247-4E54-9069-79B3EF219D2F" title="显示使用直接注册实现发布订阅通知的示例。">发布 - 订阅直接注册示例</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-9F4EEC78-5CAC-4E86-9F82-1FF9586289CF" title="显示一个示例，说明如何进行LDAP注册。">发布 - 订阅LDAP注册示例</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-9CE58707-FC18-492E-8AA9-5314041BCEE4__GUID-642616AE-C0DB-4BAE-B1C3-C044AC88CDDA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" title="OCI提供了数据库高级队列（Database AQ）功能的接口。数据库高级队列将消息队列作为Oracle数据库的集成部分提供。">OCI和数据库高级队列，</a>以获取有关数据库高级队列的信息</p>
                        </li>
                        <li>
                           <p><a href="../adque/aq-introduction.html#ADQUE0100" target="_blank"><span><cite>“Oracle数据库高级队列用户指南”</cite></span></a> ，了解有关创建队列和有关数据库AQ的信息，包括概念，功能和示例</p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">CREATE</code> <code class="codeph">TRIGGER</code> ，请参阅<a href="../sqlrf/CREATE-TRIGGER.html#SQLRF01405" target="_blank"><span><cite>Oracle数据库SQL语言参考中</cite></span></a>有关<code class="codeph">CREATE</code> <code class="codeph">TRIGGER</code>的章节</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-1E9445D7-DFD9-4230-BFFD-EF3630691ECE" name="GUID-1E9445D7-DFD9-4230-BFFD-EF3630691ECE"></a><h4 id="LNOCI-GUID-1E9445D7-DFD9-4230-BFFD-EF3630691ECE" class="sect4"><span class="enumeration_section">13.2.1</span>在OCI中发布 - 订阅注册功能</h4>
                  <div>
                     <p>您可以使用轻量级目录访问协议（LDAP）直接注册到数据库或注册。</p>
                     <p>注册可以通过两种方式完成：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>直接注册。您直接注册到数据库。这种方式很简单，注册立即生效。</p>
                        </li>
                        <li>
                           <p>公开注册。您使用轻量级目录访问协议（LDAP）注册，数据库从该协议接收注册请求。当客户端无法建立数据库连接时（客户端希望在数据库关闭时注册数据库打开事件），或者客户端想要同时在多个数据库中注册相同的事件或事件时，这非常有用。</p>
                        </li>
                     </ul>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4" title="OCI应用程序中需要以下步骤才能直接注册并接收事件通知。">发布 - 订阅直接注册到数据库</a></p>
                           </li>
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-5C733061-A0B7-4852-B0B6-A013CB0D7739" title="列出了open-subscribe的开放注册的先决条件。">打开发布 - 订阅注册</a></p>
                           </li>
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-C7ED46E0-43C2-41A3-B89E-8F05DF0C4CC8" title="演示如何使用LDAP注册打开注册。">使用OCI打开LDAP注册</a></p>
                           </li>
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-00B6E34B-201C-4C6E-B188-238FE58836D8" title="演示如何使用OCIAttrSet（）将QOSFLAGS设置为QOS级别。">设置QOS，超时间隔，命名空间，客户端地址和端口号</a></p>
                           </li>
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-362BE190-510B-4187-A93E-C4538E2C8A24" title="列出并描述用于管理发布 - 订阅通知的功能。">用于管理发布 - 订阅通知的OCI函数</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-1E9445D7-DFD9-4230-BFFD-EF3630691ECE__GUID-812E3D19-0E2E-4109-B196-4E99F51B045C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4" title="OCI应用程序中需要以下步骤才能直接注册并接收事件通知。">发布 - 订阅直接注册到数据库</a></p>
                           </li>
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-5C733061-A0B7-4852-B0B6-A013CB0D7739" title="列出了open-subscribe的开放注册的先决条件。">打开发布 - 订阅注册</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4" name="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4"></a><h5 id="LNOCI-GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4" class="sect5"><span class="enumeration_section">13.2.1.1</span>发布 - 订阅直接注册到数据库</h5>
                     <div>
                        <p>OCI应用程序中需要以下步骤才能直接注册并接收事件通知。</p>
                        <p>假设已设置适当的事件触发器或AQ队列。初始化参数<code class="codeph">COMPATIBLE</code>必须设置为8.1或更高版本。 <span class="bold"></span> 
                        </p>
                        <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-E124B95D-80B5-4B3D-A8DF-F1FCD904ADBA">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3" title="列出并描述数据库高级队列和发布 - 订阅功能。">数据库高级排队和发布 - 订阅功能</a></p>
                              </li>
                              <li>
                                 <p><a href="notification-streams-advanced-queuing.html#GUID-909E21A8-A247-4E54-9069-79B3EF219D2F" title="显示使用直接注册实现发布订阅通知的示例。">发布 - 订阅直接注册示例，</a>了解在应用程序中使用这些函数的示例</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnote" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-45D4D6C0-A953-4C66-8CA5-EA237EB1A50B">
                           <p class="notep1">注意：</p>
                           <p>发布 - 订阅功能仅适用于多线程操作系统。</p>
                        </div>
                        <ol>
                           <li>
                              <p>使用<code class="codeph">OCI_EVENTS</code>模式调用<code class="codeph">OCIEnvNlsCreate()</code> <code class="codeph">OCIEnvCreate()</code>或<code class="codeph">OCIEnvCreate()</code>以指定应用程序有兴趣注册和接收通知。这将启动一个专用的侦听线程，用于客户端上的通知。
                              </p>
                           </li>
                           <li>
                              <p>使用句柄类型<code class="codeph">OCI_HTYPE_SUBSCRIPTION</code>调用<code class="codeph">OCIHandleAlloc()</code>以分配订阅句柄。
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">OCIAttrSet()</code>来设置订阅句柄属性：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NAME</code> - 订阅名称</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code> - 订阅命名空间</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_HOSTADDR</code> - 环境句柄属性，用于设置向其发送通知的客户端IP（以IPv4或IPv6格式）</p>
                                    <p>Oracle数据库组件和实用程序支持Internet协议版本6（IPv6）地址。</p>
                                    <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-BC89470B-7AD1-4462-8D55-38CD92C761E4">
                                       <p class="notep1">也可以看看：</p>
                                       <p>有关IP地址的IPv6格式的详细信息，请<a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C__BAJHEBIA">参阅</a> <a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C__BAJDBBIC">OCI_ATTR_SUBSCR_HOSTADDR</a> ， <a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C__BAJHEBIA">OCI_ATTR_SUBSCR_IPADDR</a>和<a href="../netag/understanding-communication-layers.html#NETAG1453" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code> - 通知回调</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_CTX</code> - 回调上下文</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_PAYLOAD</code> - 用于发布的有效负载缓冲区</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_RECPT</code> - 收件人姓名</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code> - 用于接收通知的协议</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_RECPTPRES</code> - 用于接收通知的演示文稿</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_QOSFLAGS</code> - 具有以下值的QOS（服务质量）级别：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>如果设置了<code class="codeph">OCI_SUBSCR_QOS_PURGE_ON_NTFN</code> ，则在第一个通知上清除注册。
                                          </p>
                                       </li>
                                       <li>
                                          <p>如果设置了<code class="codeph">OCI_SUBSCR_QOS_RELIABLE</code> ，则通知是持久的。即使在节点发生故障后，您也可以使用Oracle RAC数据库的幸存实例来发送和检索更改通知消息，因为与此注册相关联的失效会持久排队到数据库中。如果为<code class="codeph">FALSE</code> ，则将失效排入快速内存中队列。请注意，此选项描述了通知的持久性，而不是注册的持久性。默认情况下，注册会自动保留。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_TIMEOUT</code> - 注册超时间隔（秒）。如果未设置超时，则默认值为0。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NTFN_GROUPING_CLASS</code> - 通知分组类</p>
                                    <p>通过使用具有以下常量的分组NTFN选项，可以间隔通知。通知分组类支持的值为：</p><pre class="oac_no_warn" dir="ltr">#define OCI_SUBSCR_NTFN_GROUPING_CLASS_TIME 1 / *时间* /</pre></li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NTFN_GROUPING_VALUE</code> - 以秒为单位的通知分组值</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NTFN_GROUPING_TYPE</code> - 通知分组类型</p>
                                    <p>通知分组类型支持的值：</p><pre class="oac_no_warn" dir="ltr">#define OCI_SUBSCR_NTFN_GROUPING_TYPE_SUMMARY 1 / * summary * / #define OCI_SUBSCR_NTFN_GROUPING_TYPE_LAST 2 / * last * /</pre></li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NTFN_GROUPING_START_TIME</code> - 通知分组开始时间</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_ATTR_SUBSCR_NTFN_GROUPING_REPEAT_COUNT</code> - 通知分组重复计数</p>
                                 </li>
                              </ul>
                              <p>在注册订阅之前，必须先设置<code class="codeph">OCI_ATTR_SUBSCR_NAME</code> ， <code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code>和<code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code> 。
                              </p>
                              <p>如果<code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code>设置为<code class="codeph">OCI_SUBSCR_PROTO_OCI</code> ，则还必须设置<code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code>和<code class="codeph">OCI_ATTR_SUBSCR_CTX</code> 。
                              </p>
                              <p>如果<code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code>设置为<code class="codeph">OCI_SUBSCR_PROTO_MAIL</code> ， <code class="codeph">OCI_SUBSCR_PROTO_SERVER</code>或<code class="codeph">OCI_SUBSCR_PROTO_HTTP</code> ，则还必须设置<code class="codeph">OCI_ATTR_SUBSCR_RECPT</code> 。
                              </p>
                              <p>同时设置<code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code>和<code class="codeph">OCI_ATTR_SUBSCR_RECPT</code>会导致应用程序错误。
                              </p>
                              <p>在应用程序可以对订阅执行发布之前，需要<code class="codeph">OCI_ATTR_SUBSCR_PAYLOAD</code> 。
                              </p>
                              <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-5A5F0DBF-D62E-4D29-A8DB-93647C6DAD07">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="列出并描述订阅句柄属性。">订阅句柄属性</a>和<a href="oci-programming-basics.html#GUID-083E4689-0B45-4120-9FBD-3E5FE6BB1589" title="每个OCI函数调用都是在使用OCIEnvCreate（）调用创建的环境的上下文中执行的。">关于创建OCI环境</a>以使用<code class="codeph">mode = OCI_EVENTS | OCI_OBJECT</code>设置环境<code class="codeph">mode = OCI_EVENTS | OCI_OBJECT</code> 。分组通知需要<code class="codeph">OCI_OBJECT</code> 。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>设置QOS，超时间隔，命名空间和端口的值（请参见例9-15）。</p>
                              <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-F192A4D3-36E4-4D17-8FCD-64649859E6C5">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="notification-streams-advanced-queuing.html#GUID-00B6E34B-201C-4C6E-B188-238FE58836D8" title="演示如何使用OCIAttrSet（）将QOSFLAGS设置为QOS级别。">设置QOS，超时间隔，命名空间，客户端地址和端口号</a></p>
                              </div>
                           </li>
                           <li>
                              <p>将<code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code>设置为<code class="codeph">OCI_SUBSCR_PROTO_OCI</code> ，然后定义要与订阅句柄一起使用的回调例程。
                              </p>
                              <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-F81E772A-37B5-4E60-A900-824F5D590A14">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="notification-streams-advanced-queuing.html#GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5" title="客户端必须注册一个通知回调，当订阅了一些已注册兴趣的活动时，该回调会被调用。">OCI中的通知回调</a></p>
                              </div>
                           </li>
                           <li>
                              <p>将<code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code>设置为<code class="codeph">OCI_SUBSCR_PROTO_SERVER</code> ，然后在数据库中定义要在通知时调用的PL / SQL过程。
                              </p>
                              <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-FEE7B581-AEAF-4671-A201-67C6ABC65D93">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="notification-streams-advanced-queuing.html#GUID-078F3FD1-7CAA-45FC-A93F-1CE942D27CA0" title="必须在数据库中创建在已注册兴趣的订阅上存在某些活动时调用的PL / SQL通知过程。">通知程序</a></p>
                              </div>
                           </li>
                           <li>
                              <p>调用<code class="codeph">OCISubscriptionRegister()</code>注册订阅。此调用可以同时注册多个订阅的兴趣。
                              </p>
                           </li>
                        </ol>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__CACFFAEH">例13-1</a>显示了设置QOS级别的示例。
                        </p>
                        <div class="example" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__CACFFAEH">
                           <p class="titleinexample">示例13-1设置QOS级别，通知分组类，值和类型以及命名空间特定上下文</p><pre class="oac_no_warn" dir="ltr">/ *设置QOS级别* / ub4 qosflags = OCI_SUBSCR_QOS_PAYLOAD; / *在订阅句柄中设置QOS标志* /（void）OCIAttrSet（（dvoid *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（dvoid *）＆qosflags，（ub4）0，（ub4）OCI_ATTR_SUBSCR_QOSFLAGS，errhp）; / *设置通知分组类* / ub4 ntfn_grouping_class = OCI_SUBSCR_NTFN_GROUPING_CLASS_TIME; （void）OCIAttrSet（（dvoid *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（dvoid *）＆ntfn_grouping_class，（ub4）0，（ub4）OCI_ATTR_SUBSCR_NTFN_GROUPING_CLASS，errhp）; / *设置通知分组值为10分钟* / ub4 ntfn_grouping_value = 600; （void）OCIAttrSet（（dvoid *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（dvoid *）＆ntfn_grouping_value，（ub4）0，（ub4）OCI_ATTR_SUBSCR_NTFN_GROUPING_VALUE，errhp）; / *设置通知分组类型* / ub4 ntfn_grouping_type = OCI_SUBSCR_NTFN_GROUPING_TYPE_SUMMARY; / *在订阅句柄中设置通知分组类型* /（void）OCIAttrSet（（dvoid *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（dvoid *）＆ntfn_grouping_type，（ub4）0，（ub4）OCI_ATTR_SUBSCR_NTFN_GROUPING_TYPE，errhp）; / *设置名称空间特定上下文* /（void）OCIAttrSet（（dvoid *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（dvoid *）NULL，（ub4）0，（ub4）OCI_ATTR_SUBSCR_NAMESPACE_CTX，errhp）;</pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-670B69C2-F7D9-4347-9D6E-A532A2292BE7"></p>
                           <div class="infoboxnotealso" id="GUID-4D013BA8-B824-45FB-A54A-21FF42B256F4__GUID-837FCDA2-710B-4A69-8107-A7968A674D14">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930" title="注册消息通知的回调。">OCISubscriptionRegister（）</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-5C733061-A0B7-4852-B0B6-A013CB0D7739" name="GUID-5C733061-A0B7-4852-B0B6-A013CB0D7739"></a><h5 id="LNOCI-GUID-5C733061-A0B7-4852-B0B6-A013CB0D7739" class="sect5"><span class="enumeration_section">13.2.1.2</span>发布 - 订阅的开放注册</h5>
                     <div>
                        <p>列出了open-subscribe的开放注册的先决条件。</p>
                        <div class="section">
                           <p>发布 - 订阅的开放注册的先决条件如下：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用LDAP注册（开放注册）要求客户端是企业用户。</p>
                                 <div class="infoboxnotealso" id="GUID-5C733061-A0B7-4852-B0B6-A013CB0D7739__GUID-03CE6BDB-B81B-4DA1-ADE4-24A63D764BF0">
                                    <p class="notep1">也可以看看：</p>
                                    <p> <a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>“Oracle数据库企业用户安全管理员指南”</cite></span></a> ，有关管理企业用户安全性的部分</p>
                                 </div>
                              </li>
                           </ul>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>数据库的兼容性必须为9.0或更高版本。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">LDAP_REGISTRATION_ENABLED</code>必须设置为<code class="codeph">TRUE</code> 。这可以这样做：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LDAP_REGISTRATION_ENABLED = TRUE</pre><p>默认值为<code class="codeph">FALSE</code> 。</p>
                              </li>
                              <li>
                                 <p> 必须将<code class="codeph">LDAP_REG_SYNC_INTERVAL</code>设置为从LDAP刷新注册的时间间隔（以秒为单位）：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LDAP_REG_SYNC_INTERVAL = time_interval</pre><p>默认值为0，表示不刷新。</p>
                              </li>
                              <li>
                                 <p>要立即强制数据库刷新LDAP注册信息：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM刷新LDAP_REGISTRATION</pre></li>
                           </ul>
                           <p>使用Oracle Enterprise Security Manager（OESM）进行开放式注册的步骤如下：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>在每个企业域中，创建企业角色<code class="codeph">ENTERPRISE_AQ_USER_ROLE</code> 。</span></li>
                           <li><span>对于企业域中的每个数据库，将全局角色<code class="codeph">GLOBAL_AQ_USER_ROLE</code>添加到企业角色<code class="codeph">ENTERPRISE_AQ_USER_ROLE</code> 。</span></li>
                           <li><span>对于每个企业域，将企业角色<code class="codeph">ENTERPRISE_AQ_USER_ROLE</code>添加到管理上下文下<code class="codeph">cn=oraclecontext</code>下的权限组<code class="codeph">cn=OracleDBAQUsers</code> 。</span></li>
                           <li><span>对于有权在数据库中注册事件的每个企业用户，请授予企业角色<code class="codeph">ENTERPRISE_AQ_USER_ROLE</code> 。</span></li>
                        </ol>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-C7ED46E0-43C2-41A3-B89E-8F05DF0C4CC8" name="GUID-C7ED46E0-43C2-41A3-B89E-8F05DF0C4CC8"></a><h5 id="LNOCI-GUID-C7ED46E0-43C2-41A3-B89E-8F05DF0C4CC8" class="sect5"><span class="enumeration_section">13.2.1.3</span>使用OCI打开LDAP注册</h5>
                     <div>
                        <p>演示如何使用LDAP注册打开注册。</p>
                        <ol>
                           <li class="stepexpand"><span><code class="codeph">mode</code>设置为<code class="codeph">OCI_EVENTS</code>调用<code class="codeph">OCIEnvNlsCreate()</code> <code class="codeph">OCIEnvCreate()</code>或<code class="codeph">OCIEnvCreate()</code> <code class="codeph">OCI_USE_LDAP</code> 。</span></li>
                           <li class="stepexpand"><span>调用<code class="codeph">OCIAttrSet()</code>以设置以下用于访问LDAP的环境句柄属性：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_LDAP_HOST</code> ：LDAP服务器所在的主机名</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_LDAP_PORT</code> ：LDAP服务器正在侦听的端口</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_BIND_DN</code> ：登录LDAP服务器的可分辨名称，通常是企业用户的DN</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_LDAP_CRED</code> ：用于验证客户端的凭据，例如，简单验证的密码（用户名和密码）</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_WALL_LOC</code> ：用于SSL身份验证，客户端钱包的位置</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_LDAP_AUTH</code> ：身份验证方法代码</p>
                                       <div class="infoboxnotealso" id="GUID-C7ED46E0-43C2-41A3-B89E-8F05DF0C4CC8__GUID-8CC7F3BA-DA0A-46D7-AECD-3BF1ABCD839B">
                                          <p class="notep1">也可以看看：</p>
                                          <p><a href="handle-and-descriptor-attributes.html#GUID-9CA5026C-B6A0-4233-8B22-F1DD94ACE9F8" title="列出并描述环境句柄属性。">环境处理属性</a>以获取完整的身份验证模式列表</p>
                                       </div>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_LDAP_CTX</code> ：LDAP服务器中Oracle数据库的管理上下文</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用句柄类型<code class="codeph">OCI_HTYPE_SUBSCRIPTION</code>调用<code class="codeph">OCIHandleAlloc()</code>以分配订阅句柄。</span></li>
                           <li class="stepexpand"><span>呼叫<code class="codeph">OCIArrayDescriptorAlloc()</code>与描述符类型<code class="codeph">OCI_DTYPE_SRVDN</code> ，分配服务器DN描述。</span></li>
                           <li class="stepexpand"><span>调用<code class="codeph">OCIAttrSet()</code>为<code class="codeph">OCIAttrSet()</code>设置服务器DN描述符属性， <code class="codeph">OCI_ATTR_SERVER_DN</code>是客户端想要接收通知的数据库的可分辨名称。可以多次为此属性调用<code class="codeph">OCIAttrSet()</code> ，以便在注册中包含多个数据库服务器。</span></li>
                           <li class="stepexpand"><span>调用<code class="codeph">OCIAttrSet()</code>来设置订阅句柄属性：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_NAME</code> - 订阅名称</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_NAMESPACE</code> - 订阅命名空间</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code> - 通知回调</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_CTX</code> - 回调上下文</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_PAYLOAD</code> - 用于发布的有效负载缓冲区</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_RECPT</code> - 收件人姓名</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_RECPTPROTO</code> - 用于接收通知的协议</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_RECPTRES</code> - 用于接收通知的演示文稿</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_QOSFLAGS</code> -  QOS（服务质量）级别</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_TIMEOUT</code> - 注册超时间隔（秒）。如果未设置超时，则默认值为0。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">OCI_ATTR_SUBSCR_SERVER_DN</code> - 您在步骤5中填充的描述符句柄</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>设置QOS，超时间隔，命名空间和端口的值。请参阅<a href="notification-streams-advanced-queuing.html#GUID-00B6E34B-201C-4C6E-B188-238FE58836D8" title="演示如何使用OCIAttrSet（）将QOSFLAGS设置为QOS级别。">设置QOS，超时间隔，命名空间，客户端地址和端口号</a> 。</span></li>
                           <li class="stepexpand"><span>调用<code class="codeph">OCISubscriptionRegister()</code>来注册订阅。当数据库访问LDAP以获取新注册时，注册将生效。拾取频率由<code class="codeph">LDAP_REG_SYNC_INTERVAL</code>的值<code class="codeph">LDAP_REG_SYNC_INTERVAL</code> 。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-C7ED46E0-43C2-41A3-B89E-8F05DF0C4CC8__GUID-8B491AC7-B5A8-4E63-B8C7-FFAAF266A59C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-16BDA1F1-7DAF-41CA-9EE1-C9A4CB467244" title="创建并初始化OCI函数的环境句柄。">OCIEnvCreate（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="connect-authorize-and-initialize-functions.html#GUID-0B6911A9-4B46-476C-BC5E-B87581666CD9" title="创建并初始化OCI函数的环境句柄。">OCIEnvNlsCreate（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-functions.html#GUID-C5BF55F7-A110-4CB5-9663-5056590F12B5" title="返回指向已分配和初始化句柄的指针。">OCIHandleAlloc（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="handle-and-descriptor-functions.html#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="分配一组描述符。">OCIArrayDescriptorAlloc（）</a></p>
                                 </li>
                                 <li>
                                    <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930" title="注册消息通知的回调。">OCISubscriptionRegister（）</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-00B6E34B-201C-4C6E-B188-238FE58836D8" name="GUID-00B6E34B-201C-4C6E-B188-238FE58836D8"></a><h5 id="LNOCI-GUID-00B6E34B-201C-4C6E-B188-238FE58836D8" class="sect5"><span class="enumeration_section">13.2.1.4</span>设置QOS，超时时间，命名空间，客户端地址和端口号</h5>
                     <div>
                        <p>演示如何使用<code class="codeph">OCIAttrSet()</code>将QOSFLAGS设置为QOS级别。
                        </p>
                        <div class="section">
                           <p>您可以使用<code class="codeph">OCIAttrSet()</code>将QOSFLAGS设置为以下QOS级别：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">OCI_SUBSCR_QOS_RELIABLE</code> - 在实例和数据库重新启动<code class="codeph">OCI_SUBSCR_QOS_RELIABLE</code> ，可靠通知仍然存在。可靠性仅适用于服务器，仅适用于持久性队列或缓冲消息。此选项描述通知的持久性。默认情况下注册是持久的。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCI_SUBSCR_QOS_PURGE_ON_NTFN</code> - 收到通知后，在第一次通知时清除注册。（订阅未注册。）
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">/ *设置QOS级别* / ub4 qosflags = OCI_SUBSCR_QOS_RELIABLE | OCI_SUBSCR_QOS_PURGE_ON_NTFN; / *在订阅句柄中设置标志* /（void）OCIAttrSet（（void *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）＆qosflags，（ub4）0，（ub4）OCI_ATTR_SUBSCR_QOSFLAGS，errhp）; / * 30秒后设置自动过期* / ub4 timeout = 30; （void）OCIAttrSet（（void *）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）＆timeout，（ub4）0，（ub4）OCI_ATTR_SUBSCR_TIMEOUT，errhp）;</pre><p>超过超时时将清除注册，并向客户端发送通知，以便客户端可以调用其回调并执行任何必要的操作。对于超时前的客户端故障，将清除注册。</p>
                           <p>您可以在环境句柄上设置端口号，如果客户端位于可以仅在某些端口上接收通知的防火墙后面的系统上，这一点非常重要。客户端可以使用环境句柄中的属性在第一次注册之前为侦听器线程指定端口。线程在第一次调用OCISubscriptionRegister（）时启动。如果可用，则使用此指定的端口号。如果客户端尝试使用不同的环境句柄在另一个端口上启动另一个线程，则会返回错误。</p><pre class="oac_no_warn" dir="ltr">ub4 port = 1581; （void）OCIAttrSet（（void *）envhp，（ub4）OCI_HTYPE_ENV，（void *）＆port，（ub4）0，（ub4）OCI_ATTR_SUBSCR_PORTNO，errhp）;</pre><p>相反，如果自动确定端口，则可以通过从环境句柄获取属性来获取客户端线程正在侦听通知的端口号。</p><pre class="oac_no_warn" dir="ltr">（void）OCIAttrGet（（void *）subhp，（ub4）OCI_HTYPE_ENV，（void *）＆port，（ub4）0，（ub4）OCI_ATTR_SUBSCR_PORTNO，errhp）;</pre><p>设置客户端地址的示例：</p><pre class="oac_no_warn" dir="ltr">text ipaddr [16] =“10.177.246.40”; （void）（OCIAttrSet（（dvoid *）envhp，（ub4）OCI_HTYPE_ENV，（dvoid *）ipaddr，（ub4）strlen（（const char *）ipaddr），（ub4）OCI_ATTR_SUBSCR_IPADDR，errhp））;</pre><div class="infoboxnotealso" id="GUID-00B6E34B-201C-4C6E-B188-238FE58836D8__GUID-7E360654-C212-4562-8C40-B35C38BF3EF3">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C__BAJHEBIA">OCI_ATTR_SUBSCR_IPADDR</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-362BE190-510B-4187-A93E-C4538E2C8A24" name="GUID-362BE190-510B-4187-A93E-C4538E2C8A24"></a><h5 id="LNOCI-GUID-362BE190-510B-4187-A93E-C4538E2C8A24" class="sect5"><span class="enumeration_section">13.2.1.5</span>用于管理发布 - 订阅通知的OCI函数</h5>
                     <div>
                        <p>列出并描述用于管理发布 - 订阅通知的功能。</p>
                        <div class="section">
                           <p><a href="notification-streams-advanced-queuing.html#GUID-362BE190-510B-4187-A93E-C4538E2C8A24__CACBABFH" title="该表由两列描述。第1列是功能，第2列是目的。它列出了大约五个功能并描述了每个功能的用途。">表13-1</a>列出了用于管理发布 - 订阅通知的功能。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-362BE190-510B-4187-A93E-C4538E2C8A24__CACBABFH">
                           <p class="titleintable">表13-1发布 - 订阅功能</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="发布 - 订阅功能" width="100%" border="1" summary="This table is described by two columns. Column 1 is Function and column 2 is Purpose. It lists about five functions and describes the purpose of each one." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d123500e2738">功能</th>
                                    <th align="left" valign="bottom" width="58%" id="d123500e2741">目的</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d123500e2746" headers="d123500e2738 ">
                                       <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-72C51789-C48C-4F36-800B-EECC1AD98E00" title="禁用订阅注册以关闭所有通知。">OCISubscriptionDisable（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d123500e2746 d123500e2741 ">
                                       <p>禁用订阅</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d123500e2758" headers="d123500e2738 ">
                                       <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-5C04A301-8564-46AF-A758-9DE7246F0F53" title="启用已禁用的订阅注册。">OCISubscriptionEnable（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d123500e2758 d123500e2741 ">
                                       <p>启用订阅</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d123500e2770" headers="d123500e2738 ">
                                       <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-EFD815F0-D669-4E01-AA54-E1499E302430" title="发布到订阅，允许所有注册订阅的客户端收到通知。">OCISubscriptionPost（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d123500e2770 d123500e2741 ">
                                       <p>发布订阅</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d123500e2782" headers="d123500e2738 ">
                                       <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-36729D3E-E920-4FAA-8EAA-6E033F6D8930" title="注册消息通知的回调。">OCISubscriptionRegister（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d123500e2782 d123500e2741 ">
                                       <p>注册订阅</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d123500e2794" headers="d123500e2738 ">
                                       <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-C55B6743-4BB4-4E18-931C-5FBED94592D0" title="取消注册关闭通知的订阅。">OCISubscriptionUnRegister（）</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d123500e2794 d123500e2741 ">
                                       <p>取消注册订阅</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5" name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5"></a><h4 id="LNOCI-GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5" class="sect4"><span class="enumeration_section">13.2.2</span> OCI中的通知回调</h4>
                  <div>
                     <p>客户端必须注册一个通知回调，当订阅了一些已注册兴趣的活动时，该回调会被调用。</p>
                     <p>例如，在AQ命名空间中，当感兴趣的消息入队时会发生这种情况。</p>
                     <p>此回调通常通过订阅句柄的<code class="codeph">OCI_ATTR_SUBSCR_CALLBACK</code>属性设置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-5BCA9BCF-64F0-4AE6-8EBF-3D3DA42B857C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="列出并描述订阅句柄属性。">订阅句柄属性</a> 
                        </p>
                     </div>
                     <p>回调必须返回值<code class="codeph">OCI_CONTINUE</code>并遵守以下规范：</p><pre class="oac_no_warn" dir="ltr">typedef ub4（* OCISubscriptionNotify）（void * pCtx，OCISubscription * pSubscrHp，void * pPayload，ub4 iPayloadLen，void * pDescriptor，ub4 iMode）;</pre><p>参数描述如下：</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-4B25411D-CB92-483B-A091-CF00C4128419"><!-- --></a> pCtx（IN）</dt>
                        <dd>
                           <p>注册回调时指定的用户定义上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-D16EC5EB-632F-4B6C-A416-F100727DB181"><!-- --></a> pSubscrHp（IN）</dt>
                        <dd>
                           <p>注册回调时指定的订阅句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-D831F250-90FD-4E1B-ADF3-230BEBB29329"><!-- --></a> pPayload（IN）</dt>
                        <dd>
                           <p>此通知的有效负载。目前，仅支持有效载荷的ub1 *（字节序列）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-29FAE291-172D-4417-88BE-AAD36DAECC1E"><!-- --></a> iPayloadLen（IN）</dt>
                        <dd>
                           <p>此通知的有效负载长度。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-37DE5942-26F6-4F15-B388-6EA8DB87907E"><!-- --></a> pDescriptor（IN）</dt>
                        <dd>
                           <p>特定于命名空间的描述符。可以从此描述符中提取特定于命名空间的参数。此描述符的结构对用户是不透明的，其类型取决于命名空间。</p>
                           <p>描述符的属性是特定于命名空间的。对于高级队列（AQ），描述符为<code class="codeph">OCI_DTYPE_AQNFY</code> 。对于AQ名称空间，通知描述符中提供了组中接收的通知计数。<code class="codeph">pDescriptor</code>的属性是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通知标志（常规= 0，超时= 1或分组通知= 2） - <code class="codeph">OCI_ATTR_NFY_FLAGS</code></p>
                        </li>
                        <li>
                           <p>队列名称 - <code class="codeph">OCI_ATTR_QUEUE_NAME</code></p>
                        </li>
                        <li>
                           <p>消费者名称 - <code class="codeph">OCI_ATTR_CONSUMER_NAME</code></p>
                        </li>
                        <li>
                           <p>消息ID  - <code class="codeph">OCI_ATTR_NFY_MSGID</code></p>
                        </li>
                        <li>
                           <p>消息属性 - <code class="codeph">OCI_ATTR_MSG_PROP</code></p>
                        </li>
                        <li>
                           <p>在组中收到的通知计数 - <code class="codeph">OCI_ATTR_AQ_NTFN_GROUPING_COUNT</code></p>
                        </li>
                        <li>
                           <p>该组，一个OCI集合 - <code class="codeph">OCI_ATTR_AQ_NTFN_GROUPING_MSGID_ARRAY</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-436A02DC-59DE-4E18-8CA6-C12718417184">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="notification-streams-advanced-queuing.html#GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" title="OCI提供了数据库高级队列（Database AQ）功能的接口。数据库高级队列将消息队列作为Oracle数据库的集成部分提供。">OCI和数据库高级排队</a> 
                              </p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-8C3206B2-1774-4847-B71F-C48869E0BE86" title="列出并描述通知描述符属性。">通知描述符属性</a></p>
                           </li>
                        </ul>
                     </div>
                     <dl>
                        <dt class="dlterm"><a name="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__GUID-139550CE-01B1-48C1-939E-6C65BEBE03BF"><!-- --></a> iMode（IN）</dt>
                        <dd>
                           <p>呼叫专用模式。唯一有效的值是<code class="codeph">OCI_DEFAULT</code> 。该值执行默认调用。
                           </p>
                        </dd>
                     </dl>
                     <p><a href="notification-streams-advanced-queuing.html#GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__CACGEABA">例13-2</a>显示了如何在通知回调中使用AQ分组通知属性。
                     </p>
                     <div class="example" id="GUID-6A21E98D-4921-4087-A79A-7B7C8C22ABD5__CACGEABA">
                        <p class="titleinexample">示例13-2在OCI通知回调中使用AQ分组通知属性</p><pre class="oac_no_warn" dir="ltr">ub4 notifyCB1（void * ctx，OCISubscription * subscrhp，void * pay，ub4 payl，void * desc，ub4 mode）{oratext * subname; ub4尺寸; OCIColl * msgid_array =（OCIColl *）0; ub4 msgid_cnt = 0; OCIRaw * msgid; void ** msgid_ptr; sb4 num_msgid = 0; void * elemind =（void *）0;布尔存在; ub2标志; oratext * hexit =（oratext *）“0123456789ABCDEF”; ub4 i，j; / *获取订阅名称* / OCIAttrGet（subscrhp，OCI_HTYPE_SUBSCRIPTION，（void *）＆subname，＆size，OCI_ATTR_SUBSCR_NAME，ctxptr-&gt; errhp）; / * print subscripton name * / printf（“得到％。* s \ n的通知”，大小，子名称）; fflush（（FILE *）stdout）; / *获取此组中收到的#ntfns * / OCIAttrGet（desc，OCI_DTYPE_AQNFY，（void *）＆msgid_cnt，＆size，OCI_ATTR_AQ_NTFN_GROUPING_COUNT，ctxptr-&gt; errhp）; / *获取组 -  msgids * / OCIAttrGet的集合（desc，OCI_DTYPE_AQNFY，（void *）＆msgid_array，＆size，OCI_ATTR_AQ_NTFN_GROUPING_MSGID_ARRAY，ctxptr-&gt; errhp）; / *获取通知标志 - 常规，超时或分组通知？* / OCIAttrGet（desc，OCI_DTYPE_AQNFY，（void *）＆flags，＆size，OCI_ATTR_NFY_FLAGS，ctxptr-&gt; errhp）; / * print notification flag * / printf（“Flag：％d \ n”，（int）flags）; / * get group（collection）size * / if（msgid_array）checkerr（ctxptr-&gt; errhp，OCICollSize（ctxptr-&gt; envhp，ctxptr-&gt; errhp，CONST OCIColl *）msgid_array，＆num_msgid），“inside notifyCB1-OCICollSize”）; else num_msgid = 0; / * print group size * / printf（“Collection size：％d \ n”，num_msgid）; / *打印组中的所有msgids * / for（i = 0; i &lt;num_msgid; i ++）{ub4 rawSize; / * raw size * / ub1 * rawPtr; / * raw pointer * / / *从group * / checkerr获取msgid（ctxptr-&gt; errhp，OCICollGetElem（ctxptr-&gt; envhp，ctxptr-&gt; errhp，（OCIColl *）msgid_array，i，＆exists，（void **）（＆msgid_ptr ），＆elemind），“Inside notifyCB1-OCICollGetElem”）; msgid = * msgid_ptr; rawSize = OCIRawSize（ctxptr-&gt; envhp，msgid）; rawPtr = OCIRawPtr（ctxptr-&gt; envhp，msgid）; / * print msgid size * / printf（“Msgid size：％d \ n”，rawSize）; / *以十六进制格式打印msgid * / for（j = 0; j &lt;rawSize; j ++）{/ *表示原始* / printf中的每个字节（“％c”，hexit [（rawPtr [j]＆0xf0）&gt; &gt; 4]）; printf（“％c”，hexit [（rawPtr [j]＆0x0f）]）; } printf（“\ n”）; } / * print #ntfns in group * / printf（“Notification Count：％d \ n”，msgid_cnt）;的printf（ “\ n”）;的printf（“************ ************ \ n“）; fflush（（FILE *）stdout）;返回1; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-078F3FD1-7CAA-45FC-A93F-1CE942D27CA0" name="GUID-078F3FD1-7CAA-45FC-A93F-1CE942D27CA0"></a><h4 id="LNOCI-GUID-078F3FD1-7CAA-45FC-A93F-1CE942D27CA0" class="sect4"><span class="enumeration_section">13.2.3</span>通知程序</h4>
                  <div>
                     <p>必须在数据库中创建在已注册兴趣的订阅上存在某些活动时调用的PL / SQL通知过程。</p>
                     <p>此过程通常通过订阅句柄的<code class="codeph">OCI_ATTR_SUBSCR_RECPT</code>属性设置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-078F3FD1-7CAA-45FC-A93F-1CE942D27CA0__GUID-C77CDBAB-58A4-45B3-9737-9890BD2222D8">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-A76BBB38-8F77-40B8-B5A6-1F9C9166C71C" title="列出并描述订阅句柄属性。">订阅句柄属性</a> 
                              </p>
                           </li>
                           <li>
                              <p>“Oracle数据库<a href="../arpls/index.html" target="_blank"><span><cite>PL / SQL包和类型参考</cite></span></a> ”中的“Oracle数据库AQ PL / SQL回调”，用于PL / SQL过程规范</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-909E21A8-A247-4E54-9069-79B3EF219D2F" name="GUID-909E21A8-A247-4E54-9069-79B3EF219D2F"></a><h4 id="LNOCI-GUID-909E21A8-A247-4E54-9069-79B3EF219D2F" class="sect4"><span class="enumeration_section">13.2.4</span>发布 - 订阅直接注册示例</h4>
                  <div>
                     <p>显示使用直接注册实现发布订阅通知的示例。</p>
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-909E21A8-A247-4E54-9069-79B3EF219D2F__CACHDEAE">示例13-3</a>显示了系统事件，客户端通知和高级队列如何协同工作以实现发布订阅通知。
                        </p>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-909E21A8-A247-4E54-9069-79B3EF219D2F__CACHDEAE">例13-3中</a>的PL / SQL代码创建了支持用户模式<code class="codeph">pubsub</code>下的发布 - 订阅机制所需的所有对象。在此代码中，代理<code class="codeph">snoop</code>订阅在登录事件中发布的消息。请注意，用户<code class="codeph">pubsub</code>需要<code class="codeph">AQ_ADMINISTRATOR_ROLE</code>和<code class="codeph">AQ_USER_ROLE</code>权限才能使用高级队列功能。必须将初始化参数<code class="codeph">_SYSTEM_TRIG_ENABLED</code>设置为<code class="codeph">TRUE</code> （默认值）才能启用系统事件的触发器。 <span class="bold"></span> 在运行<a href="notification-streams-advanced-queuing.html#GUID-909E21A8-A247-4E54-9069-79B3EF219D2F__CACHDEAE">Example 13-3</a>之前以<code class="codeph">pubsub</code>身份连接。
                        </p>
                        <p>创建订阅后，客户端必须使用回调函数注册通知。<a href="notification-streams-advanced-queuing.html#GUID-909E21A8-A247-4E54-9069-79B3EF219D2F__CACBBGGJ">示例13-4</a>显示了执行注册所需步骤的示例代码。为清楚起见，这里省略了分配和初始化会话句柄的初始步骤。
                        </p>
                        <p>如果用户<code class="codeph">IX</code>登录到数据库，则通过电子邮件通知客户端，并调用回调函数<code class="codeph">notifySnoop</code> 。电子邮件通知发送到地址xyz@company.com，PL / SQL过程<code class="codeph">plsqlnotifySnoop</code>也在数据库中调用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-909E21A8-A247-4E54-9069-79B3EF219D2F__CACHDEAE">
                        <p class="titleinexample">示例13-3实现发布订阅通知</p><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- -------- ----为持久多个消费者创建队列表------------------------------- --------------------------- ----创建或替换队列表开始DBMS_AQADM.CREATE_QUEUE_TABLE（QUEUE_TABLE =&gt;'pubsub.raw_msg_table' ，MULTIPLE_CONSUMERS =&gt; TRUE，QUEUE_PAYLOAD_TYPE =&gt;'RAW'，COMPATIBLE =&gt;'8.1.5'）;结束; / ------------------------------------------------- --------- ----为发布消息创建持久队列------------------------------ ---------------------------- ----为登录事件创建队列开始DBMS_AQADM.CREATE_QUEUE（QUEUE_NAME =&gt;'pubsub.logon '，QUEUE_TABLE =&gt;'pubsub.raw_msg_table'，COMMENT =&gt;'Q for error triggers'）;结束; / ------------------------------------------------- --------- ----启动队列---------------------------------- ------------------------开始DBMS_AQADM.START_QUEUE（'pubsub.logon'）;结束; / ------------------------------------------------- --------- ----为方便起见定义new_enqueue --------------------------------- -------------------------创建或替换过程new_enqueue（varchar2中的queue_name，raw中的payload，varchar2中的correlation：= NULL，varchar2中的exception_queue： = NULL）as enq_ct dbms_aq.enqueue_options_t; msg_prop dbms_aq.message_properties_t; enq_msgid raw（16）; userdata raw（1000）;开始msg_prop.exception_queue：= exception_queue; msg_prop.correlation：= correlation; userdata：= payload; DBMS_AQ.ENQUEUE（queue_name，enq_ct，msg_prop，userdata，enq_msgid）;结束; / ------------------------------------------------- --------- ----添加基于当前用户名的规则，----使用correlation_id --------------------- ------------------------------------- declare subscriber sys.aq $ _agent; begin subscriber：= sys.aq $ _agent（'SNOOP'，null，null）; dbms_aqadm.add_subscriber（queue_name =&gt;'pubsub.logon'，subscriber =&gt; subscriber，rule =&gt;'CORRID =''ix'''）;结束; / ------------------------------------------------- --------- ----在登录数据库时创建触发器------------------------------ ---------------------------- ----在登录后创建触发器创建或替换触发器systrig2登录后数据库开始new_enqueue（' pubsub.logon'，hextoraw（'9999'），dbms_standard.login_user）;结束; / ------------------------------------------------- --------- ----在数据库上创建用户'ix'登录通知的PL / SQL回调---------------- ------------------------------------------ ----创建或替换程序plsqlnotifySnoop（context raw，reginfo sys.aq $ _reg_info，descr sys.aq $ _descriptor，payload raw，payloadl number）as begin dbms_output.put_line（'Notification：User ix Logged on \ n'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-909E21A8-A247-4E54-9069-79B3EF219D2F__CACBBGGJ">
                        <p class="titleinexample">示例13-4使用回调函数注册通知</p><pre class="oac_no_warn" dir="ltr">...static ub4 namespace = OCI_SUBSCR_NAMESPACE_AQ; static OCISubscription * subscrhpSnoop =（OCISubscription *）0; static OCISubscription * subscrhpSnoopMail =（OCISubscription *）0; static OCISubscription * subscrhpSnoopServer =（OCISubscription *）0; / *回调函数，用于通知数据库上用户'ix'的登录* / static ub4 notifySnoop（ctx，subscrhp，pay，payl，desc，mode）void * ctx; OCISubscription * subscrhp;无效*支付; ub4 payl; void * desc; ub4模式; {printf（“通知：用户ix已登录\ n”）; （void）OCIHandleFree（（void *）subscrhpSnoop，（ub4）OCI_HTYPE_SUBSCRIPTION）;返回1; } static void checkerr（errhp，status）OCIError * errhp;剑的地位; {text errbuf [512]; ub4 buflen; sb4错误代码; if（status == OCI_SUCCESS）返回; switch（status）{case OCI_SUCCESS_WITH_INFO：printf（“Error  -  OCI_SUCCESS_WITH_INFO \ n”）;打破; case OCI_NEED_DATA：printf（“Error  -  OCI_NEED_DATA \ n”）;打破; case OCI_NO_DATA：printf（“Error  -  OCI_NO_DATA \ n”）;打破; case OCI_ERROR：OCIErrorGet（（void *）errhp，（ub4）1，（text *）NULL，＆errcode，errbuf，（ub4）sizeof（errbuf），（ub4）OCI_HTYPE_ERROR）; printf（“Error  - ％s \ n”，errbuf）;打破; case OCI_INVALID_HANDLE：printf（“Error  -  OCI_INVALID_HANDLE \ n”）;打破; case OCI_STILL_EXECUTING：printf（“Error  -  OCI_STILL_EXECUTING \ n”）;打破; case OCI_CONTINUE：printf（“Error  -  OCI_CONTINUE \ n”）;打破;默认值：printf（“错误 - ％d \ n”，状态）;打破; static void initSubscriptionHn（subscrhp，subscriptionName，func，recpproto，recpaddr，recppres）OCISubscription ** subscrhp; char * subscriptionName; void * func; ub4 recpproto; char * recpaddr; ub4 recppres; {/ * allocate subscription handle * /（void）OCIHandleAlloc（（void *）envhp，（void **）subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（size_t）0，（void **）0）; / *在handle中设置预订名称* /（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）subscriptionName，（ub4）strlen（（char *）subscriptionName），（ub4）OCI_ATTR_SUBSCR_NAME，errhp ）; / *设置句柄中的回调函数* / if（func）（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）func，（ub4）0，（ub4）OCI_ATTR_SUBSCR_CALLBACK，errhp）; / *在句柄中设置上下文* /（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）0，（ub4）0，（ub4）OCI_ATTR_SUBSCR_CTX，errhp）; / *在句柄中设置名称空间* /（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）＆namespace，（ub4）0，（ub4）OCI_ATTR_SUBSCR_NAMESPACE，errhp）; / *在句柄中设置接收协议* /（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）＆recpproto，（ub4）0，（ub4）OCI_ATTR_SUBSCR_RECPTPROTO，errhp）; / *在句柄中设置收件人地址* / if（recpaddr）（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）recpaddr，（ub4）strlen（recpaddr），（ub4）OCI_ATTR_SUBSCR_RECPT，errhp ）; / * set handle with handle * /（void）OCIAttrSet（（void *）* subscrhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）＆recppres，（ub4）0，（ub4）OCI_ATTR_SUBSCR_RECPTPRES，errhp）; printf（“开始注册订阅％s \ n”，subscriptionName）; checkerr（errhp，OCISubscriptionRegister（svchp，subscrhp，1，errhp，OCI_DEFAULT））;的printf（ “完成的\ n”）; } int main（argc，argv）int argc; char * argv []; {OCISession * authp =（OCISession *）0; / ******************* ****初始化OCI进程/环境初始化服务器上下文连接到服务器集服务上下文******************************** ********************** / / *注册码开始* / / *每次调用initSubscriptionHn都会为OCI通知分配和初始化注册句柄* / / *注册* / initSubscriptionHn（＆subscrhpSnoop，/ * subscription handle * /（char *）“PUBSUB.LOGON：SNOOP”，/ * subscription name * / / * &lt;queue_name&gt;：&lt;agent_name&gt; * /（void *）notifySnoop，/ * callback function * / OCI_SUBSCR_PROTO_OCI，/ *接收协议* /（char *）0，/ *收件人地址* / OCI_SUBSCR_PRES_DEFAULT）; / *收到演示文稿* / / *注册电子邮件通知* / initSubscriptionHn（＆subscrhpSnoopMail，/ *订阅句柄* /（字符*）“PUBSUB.LOGON：SNOOP”，/ *订阅名称* / / * &lt;queue_name&gt;：&lt; agent_name&gt; * /（void *）0，/ *回调函数* / OCI_SUBSCR_PROTO_MAIL，/ *接收协议* /（char *）“xyz@company.com”，/ *收件人地址* / OCI_SUBSCR_PRES_DEFAULT）; / *通过演示文稿接收* / / *注册服务器到服务器通知* / initSubscriptionHn（＆subscrhpSnoopServer，/ *订阅句柄* /（char *）“PUBSUB.LOGON：SNOOP”，/ *订阅名称* / / * &lt;queue_name&gt; ：&lt;agent_name&gt; * /（void *）0，/ *回调函数* / OCI_SUBSCR_PROTO_SERVER，/ *接收协议* /（char *）“pubsub.plsqlnotifySnoop”，/ *收件人地址* / OCI_SUBSCR_PRES_DEFAULT）; / *接收演示文稿* / checkerr（errhp，OCITransCommit（svchp，errhp，（ub4）OCI_DEFAULT））; / ******************* ****客户端进程不需要回调的实时会话。结束会话并从服务器分离。************************************************** **** / OCISessionEnd（svchp，errhp，authp，（ub4）OCI_DEFAULT）; / *从服务器分离* / OCIServerDetach（srvhp，errhp，OCI_DEFAULT）; while（1）/ *等待回调* / sleep（1）; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-9F4EEC78-5CAC-4E86-9F82-1FF9586289CF" name="GUID-9F4EEC78-5CAC-4E86-9F82-1FF9586289CF"></a><h4 id="LNOCI-GUID-9F4EEC78-5CAC-4E86-9F82-1FF9586289CF" class="sect4"><span class="enumeration_section">13.2.5</span>发布 - 订阅LDAP注册示例</h4>
                  <div>
                     <p>显示一个示例，说明如何进行LDAP注册。</p>
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-9F4EEC78-5CAC-4E86-9F82-1FF9586289CF__CACBFFEB">例13-5</a>显示了一个代码片段，说明了如何进行LDAP注册。请阅读所有计划评论。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9F4EEC78-5CAC-4E86-9F82-1FF9586289CF__CACBFFEB">
                        <p class="titleinexample">示例13-5 LDAP注册</p><pre class="oac_no_warn" dir="ltr">.../ *要使用LDAP注册功能，OCI_EVENTS | OCI_EVENTS | OCI_USE_LDAP * / / *必须在OCIEnvCreate或OCIEnvNlsCreate * / / *中设置（注意：不推荐使用OCIInitialize）：* /（void）OCIInitialize（（ub4）OCI_EVENTS | OCI_OBJECT | OCI_USE_LDAP，（void *）0，（void *（*）（void *，size_t））0，（void *（*）（void *，void *，size_t））0，（void（*）（void *，void *））0）; .../ *在环境句柄中设置LDAP属性* / / * LDAP主机名* /（void）OCIAttrSet（（void *）envhp，OCI_HTYPE_ENV，（void *）“yow”，3，OCI_ATTR_LDAP_HOST，（OCIError *）errhp）; / * LDAP服务器端口* / ldap_port = 389; （void）OCIAttrSet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆ldap_port，（ub4）0，OCI_ATTR_LDAP_PORT，（OCIError *）errhp）; / *绑定客户端的DN，通常是企业用户名* /（void）OCIAttrSet（（void *）envhp，OCI_HTYPE_ENV，（void *）“cn = orcladmin”，12，OCI_ATTR_BIND_DN，（OCIError *）errhp）; / *客户端的密码* /（void）OCIAttrSet（（void *）envhp，OCI_HTYPE_ENV，（void *）“welcome”，7，OCI_ATTR_LDAP_CRED，（OCIError *）errhp）; / *身份验证方法是“简单”，用户名/密码身份验证* / ldap_auth = 0x01; （void）OCIAttrSet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆ldap_auth，（ub4）0，OCI_ATTR_LDAP_AUTH，（OCIError *）errhp）; / *管理上下文：这是上面的DN cn = oraclecontext * /（void）OCIAttrSet（（void *）envhp，OCI_HTYPE_ENV，（void *）“cn = acme，cn = com”，14，OCI_ATTR_LDAP_CTX，（OCIError *） errhp）; .../ *从环境句柄中检索LDAP属性* / / * LDAP主机* /（void）OCIAttrGet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆buf，＆szp，OCI_ATTR_LDAP_HOST，（OCIError *）errhp）; / * LDAP服务器端口* /（void）OCIAttrGet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆intval，0，OCI_ATTR_LDAP_PORT，（OCIError *）errhp）; / *客户端绑定DN * /（void）OCIAttrGet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆buf，＆szp，OCI_ATTR_BIND_DN，（OCIError *）errhp）; / *客户端密码* /（void）OCIAttrGet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆buf，＆szp，OCI_ATTR_LDAP_CRED，（OCIError *）errhp）; / *管理上下文* /（void）OCIAttrGet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆buf，＆szp，OCI_ATTR_LDAP_CTX，（OCIError *）errhp）; / * client authentication method * /（void）OCIAttrGet（（void *）envhp，OCI_HTYPE_ENV，（void *）＆intval，0，OCI_ATTR_LDAP_AUTH，（OCIError *）errhp）; .../ *在订阅句柄中设置服务器DN描述符* / / *分配服务器DN描述符，dn的类型为“OCIServerDNs **”，subhp的类型为“OCISubscription **”* /（void）OCIDescriptorAlloc（（ void *）envhp，（void **）dn，（ub4）OCI_DTYPE_SRVDN，（size_t）0，（void **）0）; / * now * dn是服务器DN描述符，添加要注册的第一个数据库的DN * /（void）OCIAttrSet（（void *）* dn，（ub4）OCI_DTYPE_SRVDN，（void *）“cn = server1 ，cn = oraclecontext，cn = acme，cn = com“，42，（ub4）OCI_ATTR_SERVER_DN，errhp）; / *在描述符中添加另一个数据库的DN * /（void）OCIAttrSet（（void *）* dn，（ub4）OCI_DTYPE_SRVDN，（void *）“cn = server2，cn = oraclecontext，cn = acme，cn = com “，42，（ub4）OCI_ATTR_SERVER_DN，errhp）; / *将服务器DN描述符设置为预订句柄* /（void）OCIAttrSet（（void *）* subhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void *）* dn，（ub4）0，（ub4）OCI_ATTR_SERVER_DNS，errhp）; .../ *现在你将首先尝试从订阅句柄获取服务器DN信息* / / *，获取服务器DN描述符* /（void）OCIAttrGet（（void *）* subhp，（ub4）OCI_HTYPE_SUBSCRIPTION，（void * ）dn，＆szp，OCI_ATTR_SERVER_DNS，errhp）; / *然后，获取描述符中的服务器DN数* /（void）OCIAttrGet（（void *）* dn，（ub4）OCI_DTYPE_SRVDN，（void *）＆intval，＆szp，（ub4）OCI_ATTR_DN_COUNT，errhp）; / *分配一个char *数组来保存Oracle数据库返回的服务器DN指针* / if（intval）{arr =（char **）malloc（intval * sizeof（char *））; （void）OCIAttrGet（（void *）* dn，（ub4）OCI_DTYPE_SRVDN，（void *）arr，＆intval，（ub4）OCI_ATTR_SERVER_DN，errhp）; / * OCISubscriptionRegister（）调用有两种模式：OCI_DEFAULT和OCI_REG_LDAPONLY。如果使用OCI_DEFAULT，则服务器DN描述符中应该只有一个服务器DN。注册请求将被发送到数据库。如果数据库连接不可用，则注册请求将绕过LDAP服务器。但是，如果使用模式OCI_REG_LDAPONLY，则注册请求将直接发送到LDAP。当服务器DN描述符中有多个服务器DN或您确定数据库连接不可用时，应使用此模式。在此示例中，输入了两个DN，因此您应在LDAP注册中使用模式OCI_REG_LDAPONLY。* / OCISubscriptionRegister（svchp，subhp，1，errhp，OCI_REG_LDAPONLY）; .../ *作为OCISubscriptionRegister（），OCISubscriptionUnregister（）也具有模式OCI_DEFAULT和OCI_REG_LDAPONLY。用法是一样的。* / OCISubscriptionUnRegister（svchp，* subhp，errhp，OCI_REG_LDAPONLY）; } ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" name="GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8"></a><h3 id="LNOCI-GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8" class="sect3"><span class="enumeration_section">13.3</span> OCI和数据库高级排队</h3>
               <div>
                  <p>OCI提供了数据库高级队列（Database AQ）功能的接口。数据库高级队列将消息队列作为Oracle数据库的集成部分提供。</p>
                  <p>Database AQ通过将排队系统与数据库集成来提供此功能，从而创建<span class="italic">启用消息的数据库。</span> 通过提供集成解决方案，Database AQ使应用程序开发人员可以将他们的工作投入到他们的特定业务逻辑中，而不必构建消息传递基础结构。
                  </p>
                  <div class="infoboxnote" id="GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8__GUID-338E254E-D679-4142-B350-4D50B42971DF">
                     <p class="notep1">注意：</p>
                     <p>要使用数据库高级队列，您必须使用Oracle数据库企业版。</p>
                  </div>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-C7DB04D8-81D1-4253-851E-1C7C389CD7F4" title="列出OCI数据库高级排队功能。">OCI数据库高级排队功能</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-D4ED0510-8B6F-40F3-A142-F1DD89C49F02" title="列出OCI数据库高级队列描述符并显示其用法。">OCI数据库高级排队描述符</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3" title="显示OMS数据库高级排队功能和描述符的功能，参数和选项与DBMS_AQ包中的PL / SQL AQ功能之间的比较。">OCI与PL / SQL中的数据库高级排队</a></p>
                        </li>
                        <li>
                           <p><a href="notification-streams-advanced-queuing.html#GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD" title="缓冲消息传递是数据库AQ中的非持久消息传递功能，它首先在Oracle数据库10g第2版中提供。">使用缓冲消息传递</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-FF4165B2-A44C-4F76-AC26-DA860F340CA8__GUID-21E3AAFE-0383-4731-9008-76A115228B7F">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../adque/aq-introduction.html#ADQUE0100" target="_blank"><span><cite>Oracle数据库高级队列用户指南</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../adxdk/getting-started-with-XDK-for-C.html#ADXDK1300" target="_blank"><span><cite>Oracle XML Developer's Kit程序员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="使用数据库高级队列执行入队操作。">OCIAQEnq（）</a>的描述，例如代码，用于演示OCI与AQ的使用</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-C7DB04D8-81D1-4253-851E-1C7C389CD7F4" name="GUID-C7DB04D8-81D1-4253-851E-1C7C389CD7F4"></a><h4 id="LNOCI-GUID-C7DB04D8-81D1-4253-851E-1C7C389CD7F4" class="sect4"><span class="enumeration_section">13.3.1</span> OCI数据库高级排队功能</h4>
                  <div>
                     <p>列出OCI数据库高级排队功能。</p>
                     <p>OCI库包括与数据库高级队列相关的几个功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCIAQEnq（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQDeq（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQListen()</code> （已弃用）</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQListen2（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQEnqArray（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQDeqArray（）</code></p>
                        </li>
                     </ul>
                     <p>您可以将一组消息排入单个队列。消息都共享相同的排队选项，但阵列中的每条消息都可以具有不同的消息属性。您还可以从单个队列中出列一组消息。对于事务组队列，您可以使用一个调用将单个事务组的所有消息出列。</p>
                     <div class="infoboxnotealso" id="GUID-C7DB04D8-81D1-4253-851E-1C7C389CD7F4__GUID-322AC3F2-FDB3-44D6-943B-8B8EA241FCBE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-4D7FFF56-38DE-4DBF-80E8-48BF19C2B2D3" title="列出并描述数据库高级队列和发布 - 订阅功能。">数据库高级排队和发布 - 订阅功能</a></p>
                           </li>
                           <li>
                              <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="使用数据库高级队列执行入队操作。">OCIAQEnq（）</a></p>
                           </li>
                           <li>
                              <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C">OCIAQDeq（）</a></p>
                           </li>
                           <li>
                              <p><a href="deprecated-oci-functions.html#GUID-D8F0FF2D-F9D7-470A-BD5A-54E88C971777" title="在Oracle Database 11g第2版（11.2）之前的版本中不推荐使用此功能。">OCIAQListen（）</a></p>
                           </li>
                           <li>
                              <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1" title="代表代理列表侦听一个或多个队列。">OCIAQListen2（）</a></p>
                           </li>
                           <li>
                              <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-632ED6BA-017A-40C9-BC51-C9A547B7567C" title="将一组消息排入队列。">OCIAQEnqArray（）</a></p>
                           </li>
                           <li>
                              <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-F0E6A45A-AFAD-4B8F-994B-D5625D1F435A" title="从队列中取消一组消息。">OCIAQDeqArray（）</a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D4ED0510-8B6F-40F3-A142-F1DD89C49F02" name="GUID-D4ED0510-8B6F-40F3-A142-F1DD89C49F02"></a><h4 id="LNOCI-GUID-D4ED0510-8B6F-40F3-A142-F1DD89C49F02" class="sect4"><span class="enumeration_section">13.3.2</span> OCI数据库高级排队描述符</h4>
                  <div>
                     <p>列出OCI数据库高级队列描述符并显示其用法。</p>
                     <p>OCI数据库高级排队操作使用以下描述符：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCIAQEnqOptions</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQDeqOptions</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQMsgProperties</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIAQAgent</code></p>
                        </li>
                     </ul>
                     <p>您可以使用标准<code class="codeph">OCIDescriptorAlloc()</code>调用将这些描述符与服务句柄一起分配。以下代码显示了以下示例：</p><pre class="oac_no_warn" dir="ltr">OCIDescriptorAlloc（svch，＆enqueue_options，OCI_DTYPE_AQENQ_OPTIONS，0,0）; OCIDescriptorAlloc（svch，＆dequeue_options，OCI_DTYPE_AQDEQ_OPTIONS，0,0）; OCIDescriptorAlloc（svch，＆message_properties，OCI_DTYPE_AQMSG_PROPERTIES，0,0）; OCIDescriptorAlloc（svch，＆agent，OCI_DTYPE_AQAGENT，0,0）;</pre><p>每个描述符都有各种可以设置或读取的属性。</p>
                     <div class="infoboxnotealso" id="GUID-D4ED0510-8B6F-40F3-A142-F1DD89C49F02__GUID-EA903651-B715-40A1-829D-FE2FCC0A3A77">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-011A5B7A-7F24-469A-841A-2FCAF48444CB" title="列出并描述数据库高级队列描述符属性">数据库高级队列描述符属性</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-E9EF2766-E078-49A7-B1D1-738E4BA4814F" title="分配存储以保存描述符或LOB定位符。">OCIDescriptorAlloc（）</a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3" name="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3"></a><h4 id="LNOCI-GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3" class="sect4"><span class="enumeration_section">13.3.3</span> OCI与PL / SQL中的数据库高级排队</h4>
                  <div>
                     <p>显示OMS数据库高级排队功能和描述符的功能，参数和选项与DBMS_AQ包中的PL / SQL AQ功能之间的比较。</p>
                     <div class="section">
                        <p>下表比较了DBMS_AQ包中OCI数据库高级排队功能和描述符以及PL / SQL AQ功能的功能，参数和选项。<a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACIAFCB" title="该表由2列描述。第1列是PL / SQL函数，第2列是它的等效OCI函数。">表13-2</a>比较了AQ功能。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACIAFCB">
                        <p class="titleintable">表13-2 AQ功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AQ功能" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the PL/SQL function and column 2 is its equivalent OCI function. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="45%" id="d123500e4782">PL / SQL函数</th>
                                 <th align="left" valign="bottom" width="55%" id="d123500e4785">OCI功能</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d123500e4790" headers="d123500e4782 ">
                                    <p>DBMS_AQ.ENQUEUE</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d123500e4790 d123500e4785 ">
                                    <p><code class="codeph">OCIAQEnq（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d123500e4798" headers="d123500e4782 ">
                                    <p>DBMS_AQ.DEQUEUE</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d123500e4798 d123500e4785 ">
                                    <p><code class="codeph">OCIAQDeq（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d123500e4806" headers="d123500e4782 ">
                                    <p>DBMS_AQ.LISTEN</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d123500e4806 d123500e4785 ">
                                    <p><code class="codeph">OCIAQListen（），OCIAQListen2（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d123500e4814" headers="d123500e4782 ">
                                    <p>DBMS_AQ.ENQUEUE_ARRAY</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d123500e4814 d123500e4785 ">
                                    <p><code class="codeph">OCIAQEnqArray（）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d123500e4822" headers="d123500e4782 ">
                                    <p>DBMS_AQ.DEQUEUE_ARRAY</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d123500e4822 d123500e4785 ">
                                    <p><code class="codeph">OCIAQDeqArray（）</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACBJFAJ" title="该表由2列描述。第1列是DBMS_AQ.ENQUEUE参数，第2列是其等效的OCIAQEnq（）参数。">表13-3</a>比较了入队函数的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACBJFAJ">
                        <p class="titleintable">表13-3排队参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="入队参数" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the DBMS_AQ.ENQUEUE parameter and column 2 is its equivalent OCIAQEnq() parameter. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d123500e4846">DBMS_AQ.ENQUEUE参数</th>
                                 <th align="left" valign="bottom" width="61%" id="d123500e4849">OCIAQEnq（）参数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4854" headers="d123500e4846 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4854 d123500e4849 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4861" headers="d123500e4846 "><pre class="oac_no_warn" dir="ltr">enqueue_options</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4861 d123500e4849 "><pre class="oac_no_warn" dir="ltr">enqueue_options</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4868" headers="d123500e4846 "><pre class="oac_no_warn" dir="ltr">message_properties</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4868 d123500e4849 "><pre class="oac_no_warn" dir="ltr">message_properties</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4875" headers="d123500e4846 "><pre class="oac_no_warn" dir="ltr">有效载荷</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4875 d123500e4849 "><pre class="oac_no_warn" dir="ltr">有效载荷</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4882" headers="d123500e4846 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4882 d123500e4849 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4889" headers="d123500e4846 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4889 d123500e4849 ">
                                    <p>注意： <code class="codeph">OCIAQEnq()</code>需要以下附加参数： <code class="codeph">svch</code> <code class="codeph">,</code> <code class="codeph">errh, payload_tdo, payload_ind</code> <code class="codeph">, and</code> <code class="codeph">flags</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACIEGEG" title="该表由2列描述。第1列是DBMS_AQ.DEQUEUE参数，第2列是其等效的OCIAQDeq（）参数。">表13-4</a>比较了出队功能的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACIEGEG">
                        <p class="titleintable">表13-4出列参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="出列参数" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the DBMS_AQ.DEQUEUE parameter and column 2 is its equivalent OCIAQDeq() parameter. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d123500e4926">DBMS_AQ.DEQUEUE参数</th>
                                 <th align="left" valign="bottom" width="61%" id="d123500e4929">OCIAQDeq（）参数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4934" headers="d123500e4926 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4934 d123500e4929 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4941" headers="d123500e4926 "><pre class="oac_no_warn" dir="ltr">dequeue_options</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4941 d123500e4929 "><pre class="oac_no_warn" dir="ltr">dequeue_options</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4948" headers="d123500e4926 "><pre class="oac_no_warn" dir="ltr">message_properties</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4948 d123500e4929 "><pre class="oac_no_warn" dir="ltr">message_properties</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4955" headers="d123500e4926 "><pre class="oac_no_warn" dir="ltr">有效载荷</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4955 d123500e4929 "><pre class="oac_no_warn" dir="ltr">有效载荷</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4962" headers="d123500e4926 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4962 d123500e4929 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e4969" headers="d123500e4926 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d123500e4969 d123500e4929 ">
                                    <p>注意： <code class="codeph">OCIAQDeq()</code>需要以下附加参数： <code class="codeph">svch</code> <code class="codeph">,</code> <code class="codeph">errh, dequeue_options, message_properties, payload_tdo, payload, payload_ind</code> <code class="codeph">, and</code> <code class="codeph">flags</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACCCDID" title="该表由2列描述。第1列是DBMS_AQ.LISTEN参数，第2列是其等效的OCIAQListen2（）参数。">表13-5</a>比较了listen功能的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACCCDID">
                        <p class="titleintable">表13-5监听参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="听取参数" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the DBMS_AQ.LISTEN parameter and column 2 is its equivalent OCIAQListen2() parameter. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d123500e5006">DBMS_AQ.LISTEN参数</th>
                                 <th align="left" valign="bottom" width="61%" id="d123500e5009">OCIAQListen2（）参数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e5014" headers="d123500e5006 "><pre class="oac_no_warn" dir="ltr">agent_list</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e5014 d123500e5009 "><pre class="oac_no_warn" dir="ltr">agent_list</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e5021" headers="d123500e5006 "><pre class="oac_no_warn" dir="ltr">等待</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e5021 d123500e5009 "><pre class="oac_no_warn" dir="ltr">等待</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e5028" headers="d123500e5006 "><pre class="oac_no_warn" dir="ltr">代理人</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e5028 d123500e5009 "><pre class="oac_no_warn" dir="ltr">代理人</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e5035" headers="d123500e5006 "><pre class="oac_no_warn" dir="ltr">listen_delivery_mode</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d123500e5035 d123500e5009 ">
                                    <p><code class="codeph">lopts</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d123500e5043" headers="d123500e5006 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d123500e5043 d123500e5009 ">
                                    <p>注意： <code class="codeph">OCIAQListen2()</code>需要以下附加参数： <code class="codeph">svchp, errhp, agent_list, num_agents, agent</code> <code class="codeph">, lmops, and</code> <code class="codeph">flags</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACGGDAF" title="该表由2列描述。第1列是DBMS_AQ.ENQUEUE_ARRAY参数，第2列是其等效的OCIAQEnqArray（）参数。">表13-6</a>比较了数组排队函数的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACGGDAF">
                        <p class="titleintable">表13-6阵列入队参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="数组入队参数" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the DBMS_AQ.ENQUEUE_ARRAY parameter and column 2 is its equivalent OCIAQEnqArray() parameter. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d123500e5076">DBMS_AQ.ENQUEUE_ARRAY参数</th>
                                 <th align="left" valign="bottom" width="53%" id="d123500e5079">OCIAQEnqArray（）参数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5084" headers="d123500e5076 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5084 d123500e5079 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5091" headers="d123500e5076 "><pre class="oac_no_warn" dir="ltr">enqueue_options</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5091 d123500e5079 "><pre class="oac_no_warn" dir="ltr">enqopt</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5098" headers="d123500e5076 "><pre class="oac_no_warn" dir="ltr">ARRAY_SIZE</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5098 d123500e5079 "><pre class="oac_no_warn" dir="ltr">iters</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5105" headers="d123500e5076 "><pre class="oac_no_warn" dir="ltr">message_properties_array</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5105 d123500e5079 "><pre class="oac_no_warn" dir="ltr">msgProp传入</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5112" headers="d123500e5076 "><pre class="oac_no_warn" dir="ltr">payload_array</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5112 d123500e5079 "><pre class="oac_no_warn" dir="ltr">有效载荷</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5119" headers="d123500e5076 "><pre class="oac_no_warn" dir="ltr">msgid_array</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5119 d123500e5079 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5126" headers="d123500e5076 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5126 d123500e5079 ">
                                    <p>注意： <code class="codeph">OCIAQEnqArray()</code>需要以下附加参数： <code class="codeph">svch</code> <code class="codeph">,</code> <code class="codeph">errh, payload_tdo, payload_ind, ctxp, enqcbfp,</code> <code class="codeph">and</code> <code class="codeph">flags</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACFHBEI" title="该表由2列描述。第1列是DBMS_AQ.DEQUEUE_ARRAY参数，第2列是其等效的OCIAQDeqArray（）参数。">表13-7</a>比较了数组出列函数的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACFHBEI">
                        <p class="titleintable">表13-7阵列出队参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="数组出列参数" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the DBMS_AQ.DEQUEUE_ARRAY parameter and column 2 is its equivalent OCIAQDeqArray() parameter. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d123500e5165">DBMS_AQ.DEQUEUE_ARRAY参数</th>
                                 <th align="left" valign="bottom" width="53%" id="d123500e5168">OCIAQDeqArray（）参数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5173" headers="d123500e5165 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5173 d123500e5168 "><pre class="oac_no_warn" dir="ltr">queue_name</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5180" headers="d123500e5165 "><pre class="oac_no_warn" dir="ltr">dequeue_options</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5180 d123500e5168 "><pre class="oac_no_warn" dir="ltr">deqopt</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5187" headers="d123500e5165 "><pre class="oac_no_warn" dir="ltr">ARRAY_SIZE</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5187 d123500e5168 "><pre class="oac_no_warn" dir="ltr">iters</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5194" headers="d123500e5165 "><pre class="oac_no_warn" dir="ltr">message_properties_array</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5194 d123500e5168 "><pre class="oac_no_warn" dir="ltr">msgProp传入</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5201" headers="d123500e5165 "><pre class="oac_no_warn" dir="ltr">payload_array</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5201 d123500e5168 "><pre class="oac_no_warn" dir="ltr">有效载荷</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5208" headers="d123500e5165 "><pre class="oac_no_warn" dir="ltr">msgid_array</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5208 d123500e5168 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5215" headers="d123500e5165 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5215 d123500e5168 ">
                                    <p>注意： <code class="codeph">OCIAQDeqArray()</code>需要以下附加参数： <code class="codeph">svch</code> <code class="codeph">,</code> <code class="codeph">errh,</code> <code class="codeph"> </code> <code class="codeph">msgprop, payload_tdo, payload_ind, ctxp, deqcbfp,</code> <code class="codeph">and</code> <code class="codeph">flags</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACJHHDB" title="该表由2列描述。第1列是PL / SQL代理属性，第2列是其等效的OCIAQAgent属性。">表13-8</a>比较了代理属性的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACJHHDB">
                        <p class="titleintable">表13-8代理参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="代理参数" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the PL/SQL Agent property and column 2 is its equivalent OCIAQAgent attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="48%" id="d123500e5256">PL / SQL代理参数</th>
                                 <th align="left" valign="bottom" width="52%" id="d123500e5259">OCIAQAgent属性</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d123500e5264" headers="d123500e5256 "><pre class="oac_no_warn" dir="ltr">名称</pre></td>
                                 <td align="left" valign="top" width="52%" headers="d123500e5264 d123500e5259 ">
                                    <p><code class="codeph">OCI_ATTR_AGENT_NAME</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d123500e5272" headers="d123500e5256 "><pre class="oac_no_warn" dir="ltr">地址</pre></td>
                                 <td align="left" valign="top" width="52%" headers="d123500e5272 d123500e5259 ">
                                    <p><code class="codeph">OCI_ATTR_AGENT_ADDRESS</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d123500e5280" headers="d123500e5256 "><pre class="oac_no_warn" dir="ltr">协议</pre></td>
                                 <td align="left" valign="top" width="52%" headers="d123500e5280 d123500e5259 ">
                                    <p><code class="codeph">OCI_ATTR_AGENT_PROTOCOL</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACJGGBC" title="该表由2列描述。第1列是PL / SQL Message属性，第2列是其等效的OCIAQMsgProperties属性。">表13-9</a>比较了消息属性的参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACJGGBC">
                        <p class="titleintable">表13-9消息属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="消息属性" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the PL/SQL Message property and column 2 is its equivalent OCIAQMsgProperties attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d123500e5304">PL / SQL消息属性</th>
                                 <th align="left" valign="bottom" width="53%" id="d123500e5307">OCIAQMsgProperties属性</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5312" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">优先</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5312 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_PRIORITY</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5320" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">延迟</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5320 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_DELAY</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5328" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">呼气</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5328 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_EXPIRATION</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5336" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">相关</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5336 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_CORRELATION</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5344" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">尝试</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5344 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_ATTEMPTS</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5352" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">RECIPIENT_LIST</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5352 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_RECIPIENT_LIST</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5360" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">exception_queue</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5360 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_EXCEPTION_QUEUE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5368" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">enqueue_time</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5368 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_ENQ_TIME</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5376" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">州</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5376 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_MSG_STATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5384" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">发件人ID</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5384 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_SENDER_ID</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5392" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">transaction_group</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5392 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_TRANSACTION_NO</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5401" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">original_msgid</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5401 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_ORIGINAL_MSGID</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5409" headers="d123500e5304 "><pre class="oac_no_warn" dir="ltr">delivery_mode</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5409 d123500e5307 ">
                                    <p><code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACFFHAH" title="该表由2列描述。第1列是PL / SQL Enqueue选项，第2列是其等效的OCIAQEnqOptions属性。">表13-10</a>比较了enqueue选项属性。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACFFHAH">
                        <p class="titleintable">表13-10排队选项属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="入队选项属性" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the PL/SQL Enqueue option and column 2 is its equivalent OCIAQEnqOptions attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="46%" id="d123500e5433">PL / SQL入队选项</th>
                                 <th align="left" valign="bottom" width="54%" id="d123500e5436">OCIAQEnqOptions属性</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d123500e5441" headers="d123500e5433 "><pre class="oac_no_warn" dir="ltr">能见度</pre></td>
                                 <td align="left" valign="top" width="54%" headers="d123500e5441 d123500e5436 ">
                                    <p><code class="codeph">OCI_ATTR_VISIBILITY</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d123500e5449" headers="d123500e5433 "><pre class="oac_no_warn" dir="ltr">relative_msgid</pre></td>
                                 <td align="left" valign="top" width="54%" headers="d123500e5449 d123500e5436 ">
                                    <p><code class="codeph">OCI_ATTR_RELATIVE_MSGID</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d123500e5457" headers="d123500e5433 "><pre class="oac_no_warn" dir="ltr">sequence_deviation</pre></td>
                                 <td align="left" valign="top" width="54%" headers="d123500e5457 d123500e5436 ">
                                    <p><code class="codeph">OCI_ATTR_SEQUENCE_DEVIATION</code></p>
                                    <p>（废弃）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d123500e5467" headers="d123500e5433 ">
                                    <p><code class="codeph">转型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d123500e5467 d123500e5436 ">
                                    <p><code class="codeph">OCI_ATTR_TRANSFORMATION</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d123500e5476" headers="d123500e5433 "><pre class="oac_no_warn" dir="ltr">delivery_mode</pre></td>
                                 <td align="left" valign="top" width="54%" headers="d123500e5476 d123500e5436 ">
                                    <p><code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a href="notification-streams-advanced-queuing.html#GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACEAIFB" title="该表由2列描述。第1列是PL / SQL Dequeue选项，第2列是其等效的OCIAQDeqOptions属性。">表13-11</a>比较了dequeue选项属性。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__CACEAIFB">
                        <p class="titleintable">表13-11出列选项属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="出列选项属性" width="100%" border="1" summary="This table is described by 2 columns. Column 1 is the PL/SQL Dequeue option and column 2 is its equivalent OCIAQDeqOptions attribute." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d123500e5500">PL / SQL出列选项</th>
                                 <th align="left" valign="bottom" width="53%" id="d123500e5503">OCIAQDeqOptions属性</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5508" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">CONSUMER_NAME</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5508 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_CONSUMER_NAME</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5516" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">dequeue_mode</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5516 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_DEQ_MODE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5524" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">导航</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5524 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_NAVIGATION</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5532" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">能见度</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5532 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_VISIBILITY</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5540" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">等待</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5540 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_WAIT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5548" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">MSGID</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5548 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_DEQ_MSGID</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5556" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">相关</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5556 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_CORRELATION</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5564" headers="d123500e5500 ">
                                    <p><code class="codeph">deq_condition</code></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5564 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_DEQCOND</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5573" headers="d123500e5500 ">
                                    <p><code class="codeph">转型</code></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5573 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_TRANSFORMATION</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d123500e5582" headers="d123500e5500 "><pre class="oac_no_warn" dir="ltr">delivery_mode</pre></td>
                                 <td align="left" valign="top" width="53%" headers="d123500e5582 d123500e5503 ">
                                    <p><code class="codeph">OCI_ATTR_MSG_DELIVERY_MODE</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__GUID-B3E7CE42-2DE9-4687-B921-2A9C8A18F6B8">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">OCIAQEnq()</code>在指定入队选项<code class="codeph">OCI_ATTR_SEQUENCE</code>以及<code class="codeph">OCI_ATTR_RELATIVE_MSGID.</code>返回错误<code class="codeph">ORA-25219</code> <code class="codeph">OCI_ATTR_RELATIVE_MSGID.</code>排队两条消息时会发生这种情况。对于第二条消息，将排队选项<code class="codeph">OCI_ATTR_SEQUENCE</code>和<code class="codeph">OCI_ATTR_RELATIVE_MSGID</code>设置为在第一条消息之前将此消息出列。如果未指定序列，则不会返回错误，但当然，消息不会在相关消息之前出列。
                           </p>
                           <p>如果未设置<code class="codeph">OCI_ATTR_SEQUENCE</code>属性，则<code class="codeph">OCIAQEnq()</code>不会返回错误，但消息在具有相对消息ID的消息之前未出列。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-BB00AF24-95F4-4BE5-A4BE-DA9C6004F1A3__GUID-A127E45B-016A-47D0-A48C-9F580595B45F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="使用数据库高级队列执行入队操作。">OCIAQEnq（）</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_2"><a id="GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD" name="GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD"></a><h4 id="LNOCI-GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD" class="sect4"><span class="enumeration_section">13.3.4</span>使用缓冲消息传递</h4>
                  <div>
                     <p>缓冲消息传递是数据库AQ中的非持久消息传递功能，它首先在Oracle数据库<span class="italic">10g</span>第2版中提供。
                     </p>
                     <div class="section">
                        <p>缓冲消息驻留在共享内存中，如果出现实例故障，可能会丢失。与持久性消息不同，重做不会写入磁盘。缓冲消息入队和出队比持久消息操作快得多。由于共享内存有限，缓冲的消息可能必须溢出到磁盘。可以启用流控制，以防止应用程序在消息使用缓慢或由于某种原因而停止时泛滥共享内存。以下函数用于缓冲消息传递：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OCIAQEnq（）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIAQDeq（）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIAQListen2（）</code></p>
                           </li>
                        </ul>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD__CACBCHCE">例13-6</a>显示了入队缓冲消息传递的示例。
                        </p>
                        <p><a href="notification-streams-advanced-queuing.html#GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD__CACJHBEE">例13-7</a>显示了出列缓冲消息传递的示例。
                        </p>
                        <div class="infoboxnote" id="GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD__GUID-104265C9-6D47-46B1-BE21-F757E931B5B3">
                           <p class="notep1">注意：</p>
                           <p>缓冲消息传递不支持阵列操作。应用程序可以使用<code class="codeph">OCIAQEnqArray()</code>和<code class="codeph">OCIAQDeqArray()</code>函数，并将数组大小设置为1。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD__CACBCHCE">
                        <p class="titleinexample">例13-6 Enqueue Buffered Messaging</p><pre class="oac_no_warn" dir="ltr">...OCIAQMsgProperties * msgprop; OCIAQEnqueueOptions * enqopt;消息消息; / * message是对象类型* / null_message nmsg; / *消息指示符* / .../ * Allocate descriptors * / OCIDescriptorAlloc（envhp，（void **）＆enqopt，OCI_DTYPE_AQENQ_OPTIONS，0，（void **）0））; OCIDescriptorAlloc（envhp，（void **）＆msgprop，OCI_DTYPE_AQMSG_PROPERTIES，0，（void **）0））; / *将交付模式设置为缓冲* / dlvm = OCI_MSG_BUFFERED; OCIAttrSet（enqopt，OCI_DTYPE_AQENQ_OPTIONS，（void *）＆dlvm，sizeof（ub2），OCI_ATTR_MSG_DELIVERY_MODE，errhp）; / *将可见性设置为立即（缓冲消息的可见性必须始终立即）* / vis = OCI_ENQ_ON_COMMIT; OCIAttrSet（enqopt，OCI_DTYPE_AQENQ_OPTIONS，（void *）＆vis，sizeof（ub4），OCI_ATTR_VISIBILITY，errhp）/ *消息是先前创建的对象类型，msg_tdo是其类型描述符对象* / OCIAQEnq（svchp，errhp，“Test_Queue”，enqopt ，msgprop，msg_tdo，（void **）＆mesg，（void **）＆nmesg，（OCIRaw **）0,0））; ...
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD__CACJHBEE">
                        <p class="titleinexample">例13-7 Dequeue Buffered Messaging</p><pre class="oac_no_warn" dir="ltr">...OCIAQMsgProperties * msgprop; OCIAQDequeueOptions * deqopt; ...OCIDescriptorAlloc（envhp，（void **）＆mprop，OCI_DTYPE_AQMSG_PROPERTIES，0，（void **）0））; OCIDescriptorAlloc（envhp，（void **）＆deqopt，OCI_DTYPE_AQDEQ_OPTIONS，0，（void **）0）; / *将可见性设置为立即（对于缓冲的消息操作，可见性必须立即可见）* / vis = OCI_ENQ_ON_COMMIT; OCIAttrSet（deqopt，OCI_DTYPE_AQDEQ_OPTIONS，（void *）＆vis，sizeof（ub4），OCI_ATTR_VISIBILITY，errhp）/ *交付模式被缓冲* / dlvm = OCI_MSG_BUFFERED; OCIAttrSet（deqopt，OCI_DTYPE_AQDEQ_OPTIONS，（void *）＆dlvm，sizeof（ub2），OCI_ATTR_MSG_DELIVERY_MODE，errhp）; / *设置要使消息出列的使用者（无论出列的消息类型如何，都必须指定此消息）。* / consumer =“FIRST_SUBSCRIBER”; OCIAttrSet（deqopt，OCI_DTYPE_AQDEQ_OPTIONS，（void *）consumer，（ub4）strlen（（char *）consumer），OCI_ATTR_CONSUMER_NAME，errhp）; / *使消息出列但不返回有效负载（以简化代码片段）* / OCIAQDeq（svchp，errhp，“test_queue”，deqopt，msgprop，msg_tdo，（void **）0，（void **）0， （OCIRaw **）0,0）; ...</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-145D489F-52D8-4D41-8319-EF1ACA19B7AD__GUID-E5BA0F0C-AD8B-486E-8A15-EABEACB71509">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-AE3DB345-0A77-4922-ABBD-FBBFB6E1A9B4" title="使用数据库高级队列执行入队操作。">OCIAQEnq（）</a></p>
                              </li>
                              <li>
                                 <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-982A4127-C23A-43E6-94CE-D3F76EC4553C">OCIAQDeq（）</a></p>
                              </li>
                              <li>
                                 <p><a href="streams-advanced-queueing-and-publish-subscribe-functions.html#GUID-499ECEF6-F447-46C5-8F3F-48DE66839BD1" title="代表代理列表侦听一个或多个队列。">OCIAQListen2（）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html id="00097.plscope.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用PL / Scope</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="coding-subprograms-and-packages.html" title="Previous" type="text/html"></link>
      <link rel="next" href="hierarchical-profiler.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="coding-subprograms-and-packages.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="hierarchical-profiler.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="plsql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的PL / SQL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用PL / Scope</li>
            </ol>
            <a id="GUID-24109CB5-7BB9-48B2-AD7A-39458AA13C0C" name="GUID-24109CB5-7BB9-48B2-AD7A-39458AA13C0C"></a><a id="ADFNS1043"></a><a id="ADFNS022"></a>
            
            <h2 id="ADFNS-GUID-24109CB5-7BB9-48B2-AD7A-39458AA13C0C" class="sect2"><span class="enumeration_chapter">14</span>使用PL / Scope</h2>
         </header>
         <div class="ind">
            <div>
               <p>PL / Scope允许您开发功能强大且有效的PL / Scope源代码工具，通过最大限度地减少浏览和理解源代码所花费的时间来提高PL / SQL开发人员的工作效率。</p>
               <p>PL / Scope适用于应用程序开发人员，通常用于开发数据库环境。</p>
               <div class="infoboxnote" id="GUID-24109CB5-7BB9-48B2-AD7A-39458AA13C0C__GUID-492FD18B-99D4-4FB8-8832-70F4E8B7ED17">
                  <p class="notep1">注意：</p>
                  <p>PL / Scope无法收集包含源代码的PL / SQL单元的数据。有关包装PL / SQL源代码的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS016" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a> 。
                  </p>
               </div>
               <div class="section">
                  <p class="subhead1" id="GUID-24109CB5-7BB9-48B2-AD7A-39458AA13C0C__GUID-2A1AB535-8559-40D5-86EE-E2F4B2A2752D">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="plscope.html#GUID-10A7702B-41E4-405D-BFAF-622956A40650" title="PL / Scope是一个编译器驱动的工具，它收集PL / SQL和SQL标识符以及PL / SQL源代码中的SQL语句用法。">PL / Scope概述</a></p>
                  </li>
                  <li>
                     <p><a href="plscope.html#GUID-CF97DD72-26DD-4699-A499-1E4C35EA5246" title="默认情况下，PUBLIC对各种系统表和视图具有SELECT权限，对各种PL / SQL对象具有EXECUTE权限。">使用PL / Scope所需的权限</a></p>
                  </li>
                  <li>
                     <p><a href="plscope.html#GUID-3DED4E31-FC60-44BB-989F-8D61194F0CC3" title="默认情况下，PL / Scope不会收集PL / SQL源程序中的标识符和语句的数据。要启用和控制收集的内容，请设置PL / SQL编译参数PLSCOPE_SETTINGS。">指定标识符和语句集合</a></p>
                  </li>
                  <li>
                     <p><a href="plscope.html#GUID-F20FA032-8441-4913-8734-736346EA84BB">PL / Scope数据使用多少空间？</a></p>
                  </li>
                  <li>
                     <p><a href="plscope.html#GUID-7ABC54E9-BEE5-46BB-9534-44BD930740AA" title="PL / Scope用法是描述代表标识符执行的动作的动词。每个标识符使用都被赋予一个在代码单元中唯一的数字ID。这是标识符的USAGE_ID。标识符用法可以是其他标识符用法的上下文。这在用法之间创建了一对多的父子关系。父上下文使用的USAGE_ID是子用法的USAGE_CONTEXT_ID。DBA_STATEMENTS静态字典视图系列描述了PL / Scope收集的SQL语句。PL / Scope语句类型表示PL / SQL中使用的SQL语句.DBA_STATEMENTS视图中的每一行代表PL / SQL单元中SQL语句的唯一位置。这相当于编译单元中的唯一键。语句可以充当其他语句或标识符的上下文。声明也可以在其他声明或标识符的上下文中。每个SQL语句都有一个唯一的PL / Scope签名，用于标识所有PL / SQL单元中的语句实例。">查看PL /范围数据</a></p>
                  </li>
                  <li>
                     <p><a href="plscope.html#GUID-89EFC1F5-339A-4567-A360-8E2CFBE94046" title="除PL / Scope数据字典视图外，以下静态字典视图对PL / SQL程序员最有用，并且通常在与PL / SQL代码管理报告相关的查询中引用。这不是所有静态数据字典视图的详尽列表。">用于管理PL / SQL代码的数据字典视图概述</a></p>
                  </li>
                  <li>
                     <p><a href="plscope.html#GUID-1D07E448-0183-42B6-A4CA-9163F2784928">样本PL /范围会话</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-10A7702B-41E4-405D-BFAF-622956A40650" name="GUID-10A7702B-41E4-405D-BFAF-622956A40650"></a><h3 id="ADFNS-GUID-10A7702B-41E4-405D-BFAF-622956A40650" class="sect3">PL / Scope概述</h3>
               <div>
                  <p>PL / Scope是一个编译器驱动的工具，它收集PL / SQL和SQL标识符以及PL / SQL源代码中的SQL语句用法。</p>
                  <p>PL / Scope在程序单元编译时收集PL / SQL标识符，SQL标识符和SQL语句元数据，并使其在静态数据字典视图中可用。收集的数据包括有关标识符类型，用法（声明，定义，参考，调用，分配）的信息以及源代码中每种用法的位置。</p>
                  <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，PL / Scope已得到增强，可以报告静态SQL和PL / SQL单元中的动态SQL调用站点的出现情况。收集本机动态SQL（EXECUTE IMMEDIATE，OPEN CURSOR FOR）和DBMS_SQL调用的调用站点。动态SQL语句是在执行时生成的，因此在编译时只能收集调用站点。可以与新的DBA_STATEMENTS视图一起查询收集的数据以及其他数据字典视图，以帮助回答有关编程项目所需的更改范围以及执行代码分析的问题。识别SQL语句的执行情况也很有用。PL / Scope提供了对表，视图和PL / SQL单元之间的依赖关系的深入了解。此级别的详细信息可用作迁移评估工具，以确定所需更改的范围。
                  </p>
                  <div class="p">PL / Scope可以帮助您回答以下问题：<ul style="list-style-type:disc">
                        <li>
                           <p>表格y中的列x在PL / SQL代码中的使用位置和方式是什么？</p>
                        </li>
                        <li>
                           <p>我的应用程序PL / SQL代码中的SQL是否与TimesTen兼容？</p>
                        </li>
                        <li>
                           <p>我的应用程序中声明但从未使用过的常量，变量和异常是什么？</p>
                        </li>
                        <li>
                           <p>我的代码是否有SQL注入的风险？</p>
                        </li>
                        <li>
                           <p>在应用程序中编码优化器提示的SQL语句是什么？</p>
                        </li>
                        <li>
                           <p>哪个SQL有BULK COLLECT子句？从哪里调用SQL？</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-CF97DD72-26DD-4699-A499-1E4C35EA5246" name="GUID-CF97DD72-26DD-4699-A499-1E4C35EA5246"></a><h3 id="ADFNS-GUID-CF97DD72-26DD-4699-A499-1E4C35EA5246" class="sect3">使用PL / Scope所需的权限</h3>
               <div>
                  <p>默认情况下，PUBLIC对各种系统表和视图具有SELECT权限，对各种PL / SQL对象具有EXECUTE权限。</p>
                  <div class="section">
                     <p>PL / Scope数据在DBA_IDENTIFIERS和DBA_STATEMENTS数据字典视图中可用。用户必须具有在这些视图中查询数据的权限。</p>
                     <p>已在这些相关视图上授予以下权限。</p>
                     <div class="tblformal" id="GUID-CF97DD72-26DD-4699-A499-1E4C35EA5246__GUID-73B6F4FC-7BFB-4F56-BED1-83405AAD7A69">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" border="1" summary="*_IDENTIFIERS and *_STATEMENTS Views Access Privileges Granted to Roles by Default" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d65520e411">查看名称</th>
                                 <th align="left" valign="bottom" width="20%" id="d65520e413">特权授予角色</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e417" headers="d65520e411 ">USER_IDENTIFIERS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e417 d65520e413 ">阅读公开</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e422" headers="d65520e411 ">ALL_IDENTIFIERS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e422 d65520e413 ">阅读公开</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e427" headers="d65520e411 ">DBA_IDENTIFIERS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e427 d65520e413 ">SELECT到SELECT_CATALOG_ROLE</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e432" headers="d65520e411 ">USER_STATEMENTS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e432 d65520e413 ">阅读公开</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e437" headers="d65520e411 ">ALL_STATEMENTS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e437 d65520e413 ">阅读公开</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e442" headers="d65520e411 ">DBA_STATEMENTS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e442 d65520e413 ">SELECT到SELECT_CATALOG_ROLE</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>数据库管理员可以使用类似于以下内容的查询来验证这些视图的权限列表：</p>
                     <div class="p"><pre class="pre codeblock"><code>SELECT * FROM SYS.DBA_TAB_PRIVS WHERE GRANTEE ='PUBLIC'和TABLE_NAME IN（'ALL_IDENTIFIERS'，'USER_IDENTIFIERS'，'ALL_STATEMENTS'，'USER_STATEMENTS'）;</code></pre></div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS02201"></a><div class="props_rev_3"><a id="GUID-3DED4E31-FC60-44BB-989F-8D61194F0CC3" name="GUID-3DED4E31-FC60-44BB-989F-8D61194F0CC3"></a><h3 id="ADFNS-GUID-3DED4E31-FC60-44BB-989F-8D61194F0CC3" class="sect3">指定标识符和语句集合</h3>
               <div>
                  <p>默认情况下，PL / Scope不会收集PL / SQL源程序中的标识符和语句的数据。要启用和控制收集的内容，请设置PL / SQL编译参数PLSCOPE_SETTINGS。</p>
                  <div class="section">
                     <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始， <code class="codeph">PLSCOPE_SETTINGS</code>具有一种新语法，可提供更多控件和选项来收集标识符和SQL语句元数据。元数据收集在静态数据字典视图<code class="codeph">DBA_IDENTIFIERS</code>和<code class="codeph">DBA_STATEMENTS</code> 。</p>
                     <p>要收集PL / SQL源程序中所有标识符的PL / Scope数据，包括包体中的标识符，请将PL / SQL编译参数<code class="codeph">PLSCOPE_SETTINGS</code>为<code class="codeph">'IDENTIFIERS</code> ： <code class="codeph">ALL'</code> 。<code class="codeph">IDENTIFIERS</code>子句的可能值包括： <code class="codeph">ALL, NONE</code> （默认值）， <code class="codeph">PUBLIC, SQL</code>和<code class="codeph">PLSQL</code> 。引入了新的SQL标识符： <code class="codeph">ALIAS, COLUMN, MATERIALIZED VIEW, OPERATOR, TABLE, and VIEW</code> 。增强的元数据集合可以生成有助于理解应用程序的报告。PL / Scope现在可以用作评估PL / SQL应用程序编码项目复杂性的工具，其粒度比以前更精细。
                     </p>
                     <p>要收集PL / SQL源程序中使用的所有SQL语句的PL / Scope数据，请将PL / SQL编译参数<code class="codeph">PLSCOPE_SETTINGS</code>为<code class="codeph">'STATEMENTS</code> ： <code class="codeph">ALL'</code> 。默认值为<code class="codeph">NONE</code> 。</p>
                     <div class="infoboxnote" id="GUID-3DED4E31-FC60-44BB-989F-8D61194F0CC3__GUID-FAF5E7DC-1005-4483-BC39-A353EEC8B0F8">
                        <p class="notep1">注意：</p>
                        <p>收集所有标识符和语句可能会生成大量数据并缩短编译时间。</p>
                     </div>
                     <p>PL / Scope存储它在<code class="codeph">SYSAUX</code>表空间中收集的数据。如果在编译程序单元期间启用了PL / Scope集合并且<code class="codeph">SYSAUX</code>表空间不可用，则PL / Scope不会收集编译对象的数据。编译器不会发出警告，但会在<code class="codeph">USER_ERRORS</code>保存警告。</p>
                     <div class="infoboxnotealso" id="GUID-3DED4E31-FC60-44BB-989F-8D61194F0CC3__GUID-05CB1433-7843-42DB-864B-0D1BE0DAF138">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">PLSCOPE_SETTINGS</code>信息，请<code class="codeph">PLSCOPE_SETTINGS</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN10271" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p>有关PL / SQL编译参数的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS0121" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS402"></a><a id="ADFNS02202"></a><div class="props_rev_3"><a id="GUID-F20FA032-8441-4913-8734-736346EA84BB" name="GUID-F20FA032-8441-4913-8734-736346EA84BB"></a><h3 id="ADFNS-GUID-F20FA032-8441-4913-8734-736346EA84BB" class="sect3">PL / Scope数据使用多少空间？</h3>
               <div>
                  <div class="section">
                     <p>PL / Scope将其数据存储在<code class="codeph">SYSAUX</code>表空间中。如果以<code class="codeph">SYSDBA</code>身份登录，则可以使用<a href="plscope.html#GUID-F20FA032-8441-4913-8734-736346EA84BB__CDEFCGAF">示例14-1中</a>的查询显示PL / Scope数据正在使用的空间量。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F20FA032-8441-4913-8734-736346EA84BB__CDEFCGAF">
                     <p class="titleinexample">例14-1 PL / Scope数据使用了多少空间？</p>
                     <p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT VACE_USAGE_KBYTES FROM V $ SYSAUX_OCCUPANTS WHERE OCCUPANT_NAME ='PL / SCOPE';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">SPACE_USAGE_KBYTES ------------------ 1920选择1行。
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-F20FA032-8441-4913-8734-736346EA84BB__NOTE-1212-CABFF9F5">
                        <p class="notep1">也可以看看：</p>
                        <p>有关管理<code class="codeph">SYSAUX</code>表空间的信息，请<code class="codeph">SYSAUX</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11384" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS02203"></a><div class="props_rev_3"><a id="GUID-7ABC54E9-BEE5-46BB-9534-44BD930740AA" name="GUID-7ABC54E9-BEE5-46BB-9534-44BD930740AA"></a><h3 id="ADFNS-GUID-7ABC54E9-BEE5-46BB-9534-44BD930740AA" class="sect3">查看PL /范围数据</h3>
               <div>
                  <div class="section">
                     <p>要查看PL / Scope收集的数据，您可以使用以下任一方法：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="plscope.html#GUID-05D0F9D8-8344-4D77-ADAC-AA8DA59CAFD7" title="PL / Scope用法是描述代表标识符执行的动作的动词。每个标识符使用都被赋予一个在代码单元中唯一的数字ID。这是标识符的USAGE_ID。标识符用法可以是其他标识符用法的上下文。这在用法之间创建了一对多的父子关系。父上下文使用的USAGE_ID是子用法的USAGE_CONTEXT_ID。">PL / SQL和SQL标识符的静态数据字典视图</a></p>
                        </li>
                        <li>
                           <p><a href="plscope.html#GUID-4EA56F25-D73A-4346-AB9A-A62F334D6628" title="DBA_STATEMENTS静态字典视图系列描述了PL / Scope收集的SQL语句。">SQL语句的静态数据字典视图</a></p>
                        </li>
                        <li>
                           <p><a href="plscope.html#GUID-F1C70DA3-6166-41A2-89E1-215C7F994EBF">SQL Developer</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS1044"></a><a id="ADFNS403"></a><div class="props_rev_3"><a id="GUID-05D0F9D8-8344-4D77-ADAC-AA8DA59CAFD7" name="GUID-05D0F9D8-8344-4D77-ADAC-AA8DA59CAFD7"></a><h4 id="ADFNS-GUID-05D0F9D8-8344-4D77-ADAC-AA8DA59CAFD7" class="sect4">PL / SQL和SQL标识符的静态数据字典视图</h4>
                  <div>
                     <p><code class="codeph">DBA_IDENTIFIERS</code>静态数据字典视图系列显示有关PL / Scope标识符的信息，包括其类型和用法。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-05D0F9D8-8344-4D77-ADAC-AA8DA59CAFD7__GUID-2F2478EE-FE46-4C41-8279-5EF1FD3C4929">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="plscope.html#GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A">PL / Scope收集的PL / SQL和SQL标识符类型</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7" title="PL / Scope用法是描述代表标识符执行的动作的动词。">关于标识符用法</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-97EA70F4-48D3-4AC7-979D-6E186642B8AC" title="每个标识符使用都被赋予一个在代码单元中唯一的数字ID。这是标识符的USAGE_ID。">标识符用法唯一键</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-F1F1FC14-5447-4D81-8C2E-22145059BF7C" title="标识符用法可以是其他标识符用法的上下文。这在用法之间创建了一对多的父子关系。父上下文使用的USAGE_ID是子用法的USAGE_CONTEXT_ID。">关于标识符用法上下文</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1">关于标识符签名</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-05D0F9D8-8344-4D77-ADAC-AA8DA59CAFD7__GUID-20CD7B36-659D-4794-A6E0-CEA4EE2F9396">
                           <p class="notep1">也可以看看：</p>有关字典视图<code class="codeph">DBA_IDENTIFIERS</code>视图的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN-GUID-F4B4C9F7-6335-42FF-97F4-FEB902A15E6E" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS409"></a><a id="ADFNS02204"></a><div class="props_rev_3"><a id="GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A" name="GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A"></a><h5 id="ADFNS-GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A" class="sect5">PL / Scope收集的PL / SQL和SQL标识符类型</h5>
                     <div>
                        <p><a href="plscope.html#GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A__G3152275" title="此表汇总了PL / Scope收集的标识符类型。">表14-1</a>按字母顺序显示了PL / Scope收集的标识符类型。<a href="plscope.html#GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A__G3152275" title="此表汇总了PL / Scope收集的标识符类型。">表14-1中</a>的标识符类型显示在<code class="codeph">DBA_IDENTIFIERS</code>静态数据字典视图系列的<code class="codeph">TYPE</code>列中。
                        </p>
                        <div class="infoboxnote" id="GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A__GUID-EA19EE62-1ACB-41AD-AE01-C15FD6143EEC">
                           <p class="notep1">注意：</p>
                           <p>在编译单元中声明的未使用<code class="codeph">PLSCOPE_SETTINGS='IDENTIFIERS:ALL'</code>编译<code class="codeph">PLSCOPE_SETTINGS='IDENTIFIERS:ALL'</code>不会出现在<code class="codeph">DBA_IDENTIFIERS</code>静态数据字典视图系列中。
                           </p>
                           <p>不支持Pseudocolumns，例如ROWNUM，因为它们不是用户定义的标识符。</p>
                           <p>PL / Scope忽略作为文字字符串的列名。</p>
                        </div>
                        <div class="tblformal" id="GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A__G3152275">
                           <p class="titleintable">表14-1 PL / Scope收集的标识符类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PL / Scope收集的标识符类型" width="100%" border="1" summary="This table summarizes the identifier types that PL/Scope collects." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d65520e1182">TYPE列值</th>
                                    <th align="left" valign="bottom" width="58%" id="d65520e1185">评论</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1190" headers="d65520e1182 ">
                                       <p><code class="codeph">ALIAS</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1190 d65520e1185 ">
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1202" headers="d65520e1182 ">
                                       <p><code class="codeph">联合阵营</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1202 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1210" headers="d65520e1182 ">
                                       <p><code class="codeph">柱</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1210 d65520e1185 ">
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1221" headers="d65520e1182 ">
                                       <p><code class="codeph">不变</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1221 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1228" headers="d65520e1182 ">
                                       <p><code class="codeph">光标</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1228 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1235" headers="d65520e1182 ">
                                       <p><code class="codeph">BFILE DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">BLOB DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">BOOLEAN DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">字符DATATYPE</code></p>
                                       <p> <code class="codeph">CLOB DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">日期DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">INTERVAL DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">NUMBER DATATYPE</code> 
                                       </p>
                                       <p><code class="codeph">时间数据</code> 
                                       </p>
                                       <p><code class="codeph">TIMESTAMP DATATYPE</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1235 d65520e1185 ">
                                       <p>每个<code class="codeph">DATATYPE</code>都是在<code class="codeph">STANDARD</code>包中声明的基本类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1286" headers="d65520e1182 ">
                                       <p><code class="codeph">例外</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1286 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1293" headers="d65520e1182 ">
                                       <p><code class="codeph">正式的</code> 
                                       </p>
                                       <p><code class="codeph">正式进入</code></p>
                                       <p><code class="codeph">正式退出</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1293 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1308" headers="d65520e1182 ">
                                       <p><code class="codeph">功能</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1308 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1315" headers="d65520e1182 ">
                                       <p><code class="codeph">索引表</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1315 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1323" headers="d65520e1182 ">
                                       <p><code class="codeph">ITERATOR</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1323 d65520e1185 ">
                                       <p>迭代器是<code class="codeph">FOR</code>循环的索引。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1335" headers="d65520e1182 ">
                                       <p><code class="codeph">标签</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1335 d65520e1185 ">
                                       <p>标签声明也充当上下文。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1343" headers="d65520e1182 ">
                                       <p><code class="codeph">图书馆</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1343 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1350" headers="d65520e1182 ">
                                       <p><code class="codeph">物质化的视图</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1350 d65520e1185 ">
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1361" headers="d65520e1182 ">
                                       <p><code class="codeph">嵌套表</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1361 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1369" headers="d65520e1182 ">
                                       <p><code class="codeph">宾语</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1369 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1376" headers="d65520e1182 ">
                                       <p><code class="codeph">不透明</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1376 d65520e1185 ">
                                       <p>内部不透明类型的示例是<code class="codeph">ANYDATA</code>和<code class="codeph">XMLType</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1390" headers="d65520e1182 ">
                                       <p><code class="codeph">操作员</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1390 d65520e1185 ">
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1401" headers="d65520e1182 ">
                                       <p><code class="codeph">包</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1401 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1408" headers="d65520e1182 ">
                                       <p><code class="codeph">程序</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1408 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1415" headers="d65520e1182 ">
                                       <p><code class="codeph">记录</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1415 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1422" headers="d65520e1182 ">
                                       <p><code class="codeph">REFCURSOR</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1422 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1430" headers="d65520e1182 ">
                                       <p><code class="codeph">序列</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1430 d65520e1185 ">
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1441" headers="d65520e1182 ">
                                       <p><code class="codeph">SUBTYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1441 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1448" headers="d65520e1182 ">
                                       <p><code class="codeph">代名词</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1448 d65520e1185 ">
                                       <p>PL / Scope不解析同义词的基础对象名称。要查找同义词的基础对象名称，请查询<code class="codeph">*_SYNONYMS</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1459" headers="d65520e1182 ">
                                       <p><code class="codeph">表</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1459 d65520e1185 ">
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1470" headers="d65520e1182 ">
                                       <p><code class="codeph">触发</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1470 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1477" headers="d65520e1182 ">
                                       <p><code class="codeph">UROWID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1477 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1484" headers="d65520e1182 ">
                                       <p><code class="codeph">变量</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1484 d65520e1185 ">
                                       <p>可以是对象属性，局部变量，包变量或记录字段。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1492" headers="d65520e1182 ">
                                       <p><code class="codeph">VARRAY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1492 d65520e1185 ">
                                       <p></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d65520e1499" headers="d65520e1182 ">
                                       <p><code class="codeph">视图</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d65520e1499 d65520e1185 ">
                                       <p>此类型用于编辑视图。</p>
                                       <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）中引入了新的SQL标识符。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-3FD51CE9-111D-451E-A2A4-1EBC7019B15A__NOTE-124-CAC17C79">
                           <p class="notep1">也可以看看：</p>
                           <p>有关存储对象中标识符的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20599" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                  </div><a id="ADFNS410"></a><a id="ADFNS02205"></a><div class="props_rev_3"><a id="GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7" name="GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7"></a><h5 id="ADFNS-GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7" class="sect5">关于标识符用法</h5>
                     <div>
                        <p>PL / Scope用法是描述代表标识符执行的动作的动词。</p>
                        <p><a href="plscope.html#GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7__G3158742" title="此表总结了PL / Scope报告的操作。">表14-2</a>按字母顺序显示PL / Scope报告的用法。<a href="plscope.html#GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7__G3158742" title="此表总结了PL / Scope报告的操作。">表14-2中</a>的标识符操作显示在<code class="codeph">DBA_IDENTIFIERS</code>静态数据字典视图系列的<code class="codeph">USAGE</code>列中，该<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20599" target="_blank"><span class="italic">数据库</span></a>在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20599" target="_blank"><span class="italic">Oracle数据库参考中进行了</span></a>描述。
                        </p>
                        <div class="tblformal" id="GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7__G3158742">
                           <p class="titleintable">表14-2 PL / Scope报告的用法</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="用于PL /范围报告的用法" width="100%" border="1" summary="This table summarizes that actions that PL/Scope reports." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d65520e1652">使用列值</th>
                                    <th align="left" valign="bottom" width="80%" id="d65520e1655">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d65520e1660" headers="d65520e1652 ">
                                       <p><code class="codeph">分配</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d65520e1660 d65520e1655 ">
                                       <p>只能对可以具有值的标识符进行赋值，例如<code class="codeph">VARIABLE</code> 。</p>
                                       <p>作业的例子是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>使用赋值运算符左侧的标识符</p>
                                          </li>
                                          <li>
                                             <p>在<code class="codeph">FETCH</code>语句的<code class="codeph">INTO</code>子句中使用标识符</p>
                                          </li>
                                          <li>
                                             <p>通过引用将标识符传递给子程序（ <code class="codeph">OUT</code>模式）</p>
                                          </li>
                                          <li>
                                             <p>在<code class="codeph">OUT</code>或<code class="codeph">IN</code> <code class="codeph">OUT</code>模式下使用标识符作为<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>语句的<code class="codeph">USING</code>子句中的绑定变量</p>
                                          </li>
                                       </ul>
                                       <p>在<code class="codeph">IN</code> <code class="codeph">OUT</code>模式下传递给子程序的标识符具有<code class="codeph">REFERENCE</code>用法（对应于<code class="codeph">IN</code> ）和<code class="codeph">ASSIGNMENT</code>用法（对应于<code class="codeph">OUT</code> ）。
                                       </p>
                                       <p>表达式和嵌套子查询不支持作为赋值源。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d65520e1737" headers="d65520e1652 ">
                                       <p><code class="codeph">呼叫</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d65520e1737 d65520e1655 ">
                                       <p>在PL / Scope的上下文中， <code class="codeph">CALL</code>是一种将调用推送到调用堆栈的操作;那是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>对<code class="codeph">FUNCTION</code>或<code class="codeph">PROCEDURE</code>调用</p>
                                          </li>
                                          <li>
                                             <p>运行或获取游标标识符（对SQL的逻辑调用）</p>
                                          </li>
                                       </ul>
                                       <p><code class="codeph">GOTO</code>语句或异常引发不是<code class="codeph">CALL</code> ，因为它们都不会将调用推送到调用堆栈。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d65520e1768" headers="d65520e1652 ">
                                       <p><code class="codeph">宣言</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d65520e1768 d65520e1655 ">
                                       <p><code class="codeph">DECLARATION</code>告诉编译器存在标识符，并且每个标识符只有一个<code class="codeph">DECLARATION</code> 。每个<code class="codeph">DECLARATION</code>都可以具有关联的数据类型。
                                       </p>
                                       <p>对于循环索引声明， <code class="codeph">LINE</code>和<code class="codeph">COL</code> （在<code class="codeph">*_IDENTIFIERS</code>视图中）是<code class="codeph">FOR</code>子句的行和列，它隐式声明循环索引。
                                       </p>
                                       <p>对于标签声明， <code class="codeph">LINE</code>和<code class="codeph">COL</code>是在分隔符<code class="codeph">&lt;&lt;</code>和<code class="codeph">&gt;&gt;</code>出现（并隐式声明）标签的行和列。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d65520e1813" headers="d65520e1652 ">
                                       <p><code class="codeph">定义</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d65520e1813 d65520e1655 ">
                                       <p><code class="codeph">DEFINITION</code>告诉编译器如何实现或使用先前声明的标识符。
                                       </p>
                                       <p>这些类型的标识符中的每一种都有一个<code class="codeph">DEFINITION</code> ：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXCEPTION</code> （可以有多个定义）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">功能</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">宾语</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">包</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">程序</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">触发</code></p>
                                          </li>
                                       </ul>
                                       <p>仅对于顶级标识符， <code class="codeph">DEFINITION</code>和<code class="codeph">DECLARATION</code>位于同一位置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d65520e1863" headers="d65520e1652 ">
                                       <p><code class="codeph">参考</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d65520e1863 d65520e1655 ">
                                       <p><code class="codeph">REFERENCE</code>使用标识符而不改变其值。
                                       </p>
                                       <p>参考的例子是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>提出异常标识符</p>
                                          </li>
                                          <li>
                                             <p>在变量或形式参数的声明中使用类型标识符</p>
                                          </li>
                                          <li>
                                             <p>使用其类型包含字段的变量标识符来访问字段。例如，在<code class="codeph">myrecordvar</code> 。 <code class="codeph">myfield</code> <code class="codeph">:=</code> <code class="codeph">1</code> ，引用<code class="codeph">myrecordvar</code> ，并对<code class="codeph">myfield</code>进行赋值。
                                             </p>
                                          </li>
                                          <li>
                                             <p>将游标用于除<code class="codeph">FETCH</code>之外的任何目的</p>
                                          </li>
                                          <li>
                                             <p>通过值将标识符传递给子程序（ <code class="codeph">IN</code>模式）</p>
                                          </li>
                                          <li>
                                             <p>在<code class="codeph">IN</code>或<code class="codeph">IN</code> <code class="codeph">OUT</code>模式下使用标识符作为<code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code>语句的<code class="codeph">USING</code>子句中的绑定变量</p>
                                          </li>
                                       </ul>
                                       <p>在<code class="codeph">IN</code> <code class="codeph">OUT</code>模式下传递给子程序的标识符具有<code class="codeph">REFERENCE</code>用法（对应于<code class="codeph">IN</code> ）和<code class="codeph">ASSIGNMENT</code>用法（对应于<code class="codeph">OUT</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADFNS404"></a><div class="props_rev_3"><a id="GUID-97EA70F4-48D3-4AC7-979D-6E186642B8AC" name="GUID-97EA70F4-48D3-4AC7-979D-6E186642B8AC"></a><h5 id="ADFNS-GUID-97EA70F4-48D3-4AC7-979D-6E186642B8AC" class="sect5">标识符用法唯一键</h5>
                     <div>
                        <p>每个标识符使用都被赋予一个在代码单元中唯一的数字ID。这是标识符的<code class="codeph">USAGE_ID</code> 。
                        </p>
                        <p><code class="codeph">*_IDENTIFIERS</code>视图的每一行代表PL / SQL单元中标识符的唯一用法。在每个视图中，这些是编译单元中的等效唯一键：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">LINE</code> ， <code class="codeph">COL</code>和<code class="codeph">USAGE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">USAGE_ID</code></p>
                           </li>
                        </ul>
                        <p></p>
                        <div class="infoboxnote" id="GUID-97EA70F4-48D3-4AC7-979D-6E186642B8AC__GUID-887F8297-A62A-475E-9DE9-B5008626C7AF">
                           <p class="notep1">注意：</p>
                           <p>在<code class="codeph">IN OUT</code>模式下传递给子程序的标识符在<code class="codeph">*_IDENTIFIERS</code>有两行： <code class="codeph">REFERENCE</code>用法（对应于<code class="codeph">IN</code> ）和<code class="codeph">ASSIGNMENT</code>用法（对应于<code class="codeph">OUT</code> ）。
                           </p>
                        </div>
                        <p>此示例显示为PROCEDURE p1生成的USAGE_ID。</p><pre class="pre codeblock"><code>创建或替换过程p1（OUT VARCHAR2）IS b VARCHAR2（100）：='hello FROM p1';开始a：= b;结束; / SELECT USAGE_ID，USAGE，NAME FROM ALL_IDENTIFIERS WHERE OBJECT_NAME ='P1'ORDER BY USAGE_ID;</code></pre><pre class="oac_no_warn" dir="ltr">1声明P1 2定义P1 3声明A 4参考VARCHAR2 5声明B 6参考VARCHAR2 7作业B 8作业A 9参考B</pre><div class="infoboxnotealso" id="GUID-97EA70F4-48D3-4AC7-979D-6E186642B8AC__NOTE-134-CAC251B0">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="plscope.html#GUID-C7F7893F-DD26-4C1A-BDC3-4C2BCCF6BDB7" title="PL / Scope用法是描述代表标识符执行的动作的动词。">关于标识符</a> <code class="codeph">*_IDENTIFIERS</code>视图中的用法用法</p>
                        </div>
                     </div>
                  </div><a id="ADFNS405"></a><a id="ADFNS00097"></a><div class="props_rev_3"><a id="GUID-F1F1FC14-5447-4D81-8C2E-22145059BF7C" name="GUID-F1F1FC14-5447-4D81-8C2E-22145059BF7C"></a><h5 id="ADFNS-GUID-F1F1FC14-5447-4D81-8C2E-22145059BF7C" class="sect5">关于标识符用法上下文</h5>
                     <div>
                        <p>标识符用法可以是其他标识符用法的上下文。这在用法之间创建了一对多的父子关系。该<code class="codeph">USAGE_ID</code>父上下文用法是<code class="codeph">USAGE_CONTEXT_ID</code>为孩子用途。
                        </p>
                        <p>上下文对于发现用法之间的关系很有用。除了顶级模式对象声明和定义之外，标识符的每次使用都发生在另一个用法的上下文中。</p>
                        <p>默认的顶级上下文（包含所有顶级对象）由<code class="codeph">USAGE_CONTEXT_ID</code>标识为0。
                        </p>
                        <p>例如：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>局部变量声明在顶级过程声明的上下文中发生。</p>
                           </li>
                           <li>
                              <p>如果一个标识符被声明为一个变量，如<code class="codeph">x VARCHAR2(10)</code>所述<code class="codeph">USAGE_CONTEXT_ID</code>所述的<code class="codeph">VARCHAR2</code>类型的参考包含<code class="codeph">USAGE_ID</code>所述的<code class="codeph">x</code>声明，允许你的变量声明其类型相关联。
                              </p>
                           </li>
                        </ul>
                        <p>换句话说， <code class="codeph">USAGE_CONTEXT_ID</code>是自反外键<code class="codeph">USAGE_ID</code> ，如<a href="plscope.html#GUID-F1F1FC14-5447-4D81-8C2E-22145059BF7C__CHDBBBJE">实施例14-2</a>示出。
                        </p>
                        <div class="example" id="GUID-F1F1FC14-5447-4D81-8C2E-22145059BF7C__CHDBBBJE">
                           <p class="titleinexample">例14-2 USAGE_CONTEXT_ID和USAGE_ID</p><pre class="pre codeblock"><code>ALTER SESSION SET PLSCOPE_SETTINGS ='IDENTIFIERS：ALL';创建或替换程序a（p1 in BOOLEAN）AUTHID DEFINER是v PLS_INTEGER; BEGIN v：= 42; DBMS_OUTPUT.PUT_LINE（V）; RAISE_APPLICATION_ERROR（-20000，'Bad'）; Program_Error THEN NULL时的异常;结束一个; / CREATE或REPLACE PROCEDURE b（p2 OUT PLS_INTEGER，p3 IN OUT VARCHAR2）AUTHID DEFINER是n NUMBER; q BOOLEAN：= TRUE;开始为j IN 1..5 LOOP a（q）;一个（TRUE）;一个（TRUE）;如果j&gt; 2那么GOTO z;万一;结束循环; &lt;&lt; z &gt;&gt; DECLARE d CONSTANT CHAR（1）：='X'; BEGIN SELECT COUNT（*）INTO n FROM WHERE Dummy = d;结束z;结束b; / WITH v AS（SELECT Line，Col，INITCAP（NAME）Name，LOWER（TYPE）Type，LOWER（USAGE）Usage，USAGE_ID，USAGE_CONTEXT_ID FROM USER_IDENTIFIERS WHERE Object_Name ='B'AND Object_Type ='PROCEDURE'）SELECT RPAD（LPAD） （''，2 *（Level-1））|| Name，20，'。'）||' “|| RPAD（类型，20）|| RPAD（用法，20）IDENTIFIER_USAGE_CONTEXTS FROM v START WITH USAGE_CONTEXT_ID = 0 <span class="bold">CONNECT BY PRIOR USAGE_ID = USAGE_CONTEXT_ID</span> ORDER SIBLINGS BY Line，Col /</code></pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">IDENTIFIER_USAGE_CONTEXTS ------------------------------------------------- ------------ B ...................程序声明B ............... ..程序定义P2 ..............正式输出声明Pls_Integer ...子类型参考P3 ..............正式输出声明Varchar2 .. ....字符数据类型引用N ...............变量声明数字........数字数据类型引用Q ............ ...变量声明Q .............变量赋值布尔值.......布尔数据类型引用J ...............迭代器声明一个.............程序调用Q ...........变量引用A .............程序调用A ... ..........程序调用J .............迭代器参考Z .............标签参考Z ..... ..........标签声明D .............常数声明D ...........常量赋值Char ....... 。子类型引用</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADFNS406"></a><a id="ADFNS00098"></a><div class="props_rev_3"><a id="GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1" name="GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1"></a><h5 id="ADFNS-GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1" class="sect5">关于标识符签名</h5>
                     <div>
                        <p>标识符的签名在程序单元内和跨程序单元是唯一的。也就是说，签名将标识符与具有相同名称的其他标识符区分开，无论它们是在相同的程序单元中定义还是在不同的程序单元中定义。</p>
                        <p>对于<a href="plscope.html#GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1__CHDIGGCG">示例14-3</a>中具有两个名为<code class="codeph">p5</code>标识符的程序单元，静态数据字典视图<code class="codeph">USER_IDENTIFIERS</code>有几行，其中<code class="codeph">NAME</code>是<code class="codeph">p5</code> ，但在这些行中， <code class="codeph">SIGNATURE</code>有所不同。与外部过程<code class="codeph">p5</code>相关联的行具有一个签名，并且与内部过程<code class="codeph">p5</code>相关联的行具有另一个签名。如果程序单元<code class="codeph">q</code>调用过程<code class="codeph">p5</code> ，则<code class="codeph">q</code>的<code class="codeph">USER_IDENTIFIERS</code>视图有一行，其中<code class="codeph">NAME</code>是<code class="codeph">p5</code> ， <code class="codeph">SIGNATURE</code>是外部过程<code class="codeph">p5</code>的签名。
                        </p>
                        <div class="example" id="GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1__CHDIGGCG">
                           <p class="titleinexample">例14-3带有两个标识符的程序单元，命名为p5</p>
                           <p>此示例显示了一个带有两个名为p5的标识符的程序单元，以演示签名的唯一性。</p><pre class="pre codeblock"><code>创建或替换过程p5 AUTHID DEFINER是程序p5是BEGIN DBMS_OUTPUT.PUT_LINE（'Inner p5'）;结束p5; BEGIN DBMS_OUTPUT.PUT_LINE（'外部p5'）; P5（）;结束p5; / SELECT LINE || '&gt;'||文件来自ALL_SOURCE，其中NAME ='P5'和TYPE ='程序'按行排序;</code></pre><pre class="oac_no_warn" dir="ltr">1&gt;程序p5 AUTHID DEFINER是2&gt;程序p5 IS 3&gt; BEGIN 4&gt; DBMS_OUTPUT.PUT_LINE（'Inner p5'）; 5&gt;结束p5; 6&gt; BEGIN 7&gt; DBMS_OUTPUT.PUT_LINE（'外部p5'）; 8&gt; p5（）; 9&gt;结束p5;</pre><p>以下查询显示PL / SQL单元的SIGNATURE与内部和外部p5的DECLARATION和DEFINITION相同。</p><pre class="pre codeblock"><code>SELECT SIGNATURE，USAGE，LINE，COL，USAGE_ID，USAGE_CONTEXT_ID FROM ALL_IDENTIFIERS WHERE OBJECT_NAME ='P5'ORDER BY LINE，COL，USAGE_ID;</code></pre><pre class="oac_no_warn" dir="ltr">75CD5986BA2EE5C61ACEED8C7162528F声明1 11 1 0 75CD5986BA2EE5C61ACEED8C7162528F定义1 11 2 1 33FB9F948F526C4B0634C0F35DFA91F6声明2 13 3 2 33FB9F948F526C4B0634C0F35DFA91F6定义2 13 4 3 33FB9F948F526C4B0634C0F35DFA91F6 CALL 8 3 7 2</pre><pre class="pre codeblock"><code>创建或替换程序q AUTHID DEFINER开始于p5（）;结束q; /</code></pre><pre class="oac_no_warn" dir="ltr">执行q;外p5内p5</pre><pre class="pre codeblock"><code>SELECT SIGNATURE，USAGE，LINE，COL，USAGE_ID，USAGE_CONTEXT_ID FROM ALL_IDENTIFIERS WHERE OBJECT_NAME ='Q'AND NAME ='P5'ORDER BY LINE，COL，USAGE_ID;</code></pre><pre class="oac_no_warn" dir="ltr">75CD5986BA2EE5C61ACEED8C7162528F CALL 3 3 3 2</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-A0529D90-7F10-4C99-AD7D-DA8A953D20B1__FINDALLUSAGESOFVARCHAR2-1FA55A26">
                           <p class="titleinexample">示例14-4查找VARCHAR2的所有用法</p>
                           <p>标识符签名是全球唯一的。这对于查找数据库中所有单元中的标识符的所有用法很有用。此示例显示查询以查找VARCHAR2的所有用法。</p><pre class="pre codeblock"><code>SELECT UNIQUE OBJECT_NAME uses_varchar2 FROM ALL_IDENTIFIERS WHERE SIGNATURE =（选择签名来自ALL_IDENTIFIERS，其中OBJECT_NAME ='标准'和OWNER ='SYS'和USAGE ='DECLARATION'和NAME ='VARCHAR2'）ORDER BY OBJECT_NAME;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4EA56F25-D73A-4346-AB9A-A62F334D6628" name="GUID-4EA56F25-D73A-4346-AB9A-A62F334D6628"></a><h4 id="ADFNS-GUID-4EA56F25-D73A-4346-AB9A-A62F334D6628" class="sect4">SQL语句的静态数据字典视图</h4>
                  <div>
                     <p>DBA_STATEMENTS静态字典视图系列描述了PL / Scope收集的SQL语句。</p>
                     <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）开始，新视图DBA_STATEMENTS报告PL / SQL单元中出现的静态SQL。它提供有关SQL_ID，规范语句文本，语句类型，有用语句用法属性，其签名以及PL / SQL代码中的位置的信息。每行代表PL / SQL代码中的SQL语句实例。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4EA56F25-D73A-4346-AB9A-A62F334D6628__GUID-025D99EC-9956-4069-B09D-08BFF044D9B9">话题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="plscope.html#GUID-BE0806E8-8EAE-4C85-B353-3BE4D635D21A" title="PL / Scope语句类型表示PL / SQL中使用的SQL语句。">PL / Scope收集的SQL语句类型</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-B07F49CF-474B-4FA4-AED4-2DE3E30F5668" title="DBA_STATEMENTS视图中的每一行代表PL / SQL单元中SQL语句的唯一位置。这相当于编译单元中的唯一键。">声明位置唯一键</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-69BDA34C-8F80-4ECB-A83B-E268F1646923" title="语句可以充当其他语句或标识符的上下文。声明也可以在其他声明或标识符的上下文中。">关于SQL语句用法上下文</a></p>
                           </li>
                           <li>
                              <p><a href="plscope.html#GUID-2683886C-032F-4F96-8AD4-DFB007749EA2" title="每个SQL语句都有一个唯一的PL / Scope签名，用于标识所有PL / SQL单元中的语句实例。">关于SQL语句签名</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-4EA56F25-D73A-4346-AB9A-A62F334D6628__GUID-8D95BA0D-9421-4EF8-883A-E7AB1A23E7EA">
                           <p class="notep1">也可以看看：</p>有关DBA_STATEMENTS视图的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN-GUID-36FF82A6-DD4B-45E4-8B46-2ECD38C2AE47" target="_blank"><span class="italic">Oracle数据库参考</span></a></div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-BE0806E8-8EAE-4C85-B353-3BE4D635D21A" name="GUID-BE0806E8-8EAE-4C85-B353-3BE4D635D21A"></a><h5 id="ADFNS-GUID-BE0806E8-8EAE-4C85-B353-3BE4D635D21A" class="sect5">PL / Scope收集的SQL语句类型</h5>
                     <div>
                        <p>PL / Scope语句类型表示PL / SQL中使用的SQL语句。</p>
                        <p>SQL语句类型对应于可在PL / SQL中用于执行或以其他方式与SQL交互的语句。语句类型显示在DBA_STATEMENTS静态数据字典视图系列的TYPE列中。</p>
                        <p>您必须使用PLSCOPE_SETTINGS ='STATEMENTS：ALL'编译PL / SQL单元以收集此元数据。</p>
                        <div class="p" id="GUID-BE0806E8-8EAE-4C85-B353-3BE4D635D21A__SQLSTATEMENTTYPESTHATPLSCOPECOLLECT-1E98BFD3">PL / Scope收集的SQL语句类型：<ul style="list-style-type:disc">
                              <li>
                                 <p>选择</p>
                              </li>
                              <li>
                                 <p>UPDATE</p>
                              </li>
                              <li>
                                 <p>插入</p>
                              </li>
                              <li>
                                 <p>删除</p>
                              </li>
                              <li>
                                 <p>合并</p>
                              </li>
                              <li>
                                 <p>执行立即</p>
                              </li>
                              <li>
                                 <p>设置交易</p>
                              </li>
                              <li>
                                 <p>锁表</p>
                              </li>
                              <li>
                                 <p>承诺</p>
                              </li>
                              <li>
                                 <p>SAVEPOINT</p>
                              </li>
                              <li>
                                 <p>ROLLBACK</p>
                              </li>
                              <li>
                                 <p>打开</p>
                              </li>
                              <li>
                                 <p>关</p>
                              </li>
                              <li>
                                 <p>取</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B07F49CF-474B-4FA4-AED4-2DE3E30F5668" name="GUID-B07F49CF-474B-4FA4-AED4-2DE3E30F5668"></a><h5 id="ADFNS-GUID-B07F49CF-474B-4FA4-AED4-2DE3E30F5668" class="sect5">声明位置唯一键</h5>
                     <div>
                        <p>DBA_STATEMENTS视图中的每一行代表PL / SQL单元中SQL语句的唯一位置。这相当于编译单元中的唯一键。</p>
                        <p>以下列用于确定PL / SQL代码中语句的位置：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OWNER，OBJECT_NAME，OBJECT_TYPE，LINE，COL</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">USAGE_ID</code></p>
                           </li>
                        </ul>
                        <p><code class="codeph">USAGE_ID</code>在PL / SQL单元中唯一定义。与标识符不同，SQL语句没有不同的用法，例如<code class="codeph">DECLARATION</code> ， <code class="codeph">ASSIGNMENT</code>或<code class="codeph">REFERENCE</code> 。所有语句都被认为是对SQL引擎的隐式<code class="codeph">CALL</code> ，因此， <code class="codeph">DBA_STATEMENTS</code>视图没有<code class="codeph">USAGE</code>列，但它确实使用了<code class="codeph">USAGE_ID</code> 。</p>
                        <div class="example" id="GUID-B07F49CF-474B-4FA4-AED4-2DE3E30F5668__GUID-A89F62FA-0A14-40E2-931A-B26739725307">
                           <p class="titleinexample">示例14-5使用USAGE_ID列查询SQL标识符和语句</p><pre class="pre codeblock"><code>过程p1（p_cust_id NUMBER，p_cust_name OUT VARCHAR2）是BUSTIN SELECT（从CUSTOMERS中选择CUST_FIRST_NAME）INTO p_cust_name FROM CUSTOMERS WHERE CUSTOMER_ID = p_cust_id;结束; SELECT USAGE_ID，TYPE，NAME，USAGE，LINE，COL FROM（SELECT USAGE_ID，TYPE，NAME，USAGE，LINE，COL FROM ALL_IDENTIFIERS WHERE OBJECT_NAME ='P1'UNION SELECT USAGE_ID，TYPE，'SQL STATEMENT'，“”，LINE， COL FROM ALL_STATEMENTS，其中OBJECT_NAME ='P1'）按USAGE_ID排序;</code></pre><pre class="oac_no_warn" dir="ltr">USAGE_ID TYPE NAME USAGE LINE COL ---------- ------------------ ---------------  - ---------- ----- ----- 1程序P1声明1 11 2程序P1定义1 11 3 P_CUST_ID声明中的形式1 15 4数字数字参考号1 25 5正式输出P_CUST_NAME声明1 33 6字符数据表VARCHAR2参考1 49 7 SQL语句选择3 3 8表客户参考4 10 9 P_CUST_ID参考中的正式表4 38 10 CUSTOMER_ID参考表4 26 11正式输出P_CUST_NAME指派3 31 12 CUST_FIRST_NAME列13参考3 10</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-69BDA34C-8F80-4ECB-A83B-E268F1646923" name="GUID-69BDA34C-8F80-4ECB-A83B-E268F1646923"></a><h5 id="ADFNS-GUID-69BDA34C-8F80-4ECB-A83B-E268F1646923" class="sect5">关于SQL语句用法上下文</h5>
                     <div>
                        <p>语句可以充当其他语句或标识符的上下文。声明也可以在其他声明或标识符的上下文中。</p>
                        <p><code class="codeph">USAGE_CONTEXT_ID</code>列用于确定语句的上下文。出现在语句中的所有标识符都将在该语句的上下文中。
                        </p>
                        <p>表达式和嵌套子查询不支持作为赋值源。</p>
                        <div class="example" id="GUID-69BDA34C-8F80-4ECB-A83B-E268F1646923__GUID-F7953139-3090-43B2-99A1-66DA05AA7BB8">
                           <p class="titleinexample">示例14-6使用DBA_STATEMENTS USAGE_CONTEXT_ID查询标识符</p>
                           <p>此示例显示如何使用<code class="codeph">USAGE_CONTEXT_ID</code>列在<code class="codeph">SELECT</code>语句的上下文中检索标识符。
                           </p>
                           <div class="p"><pre class="pre codeblock"><code>过程p1（p_cust_id NUMBER，p_cust_name OUT VARCHAR2）是BUSTIN SELECT（从CUSTOMERS中选择CUST_FIRST_NAME）INTO p_cust_name FROM CUSTOMERS WHERE CUSTOMER_ID = p_cust_id;结束; SELECT USAGE_ID，LPAD（''，2 *（level-1））|| TO_CHAR（USAGE）|| ''|| NAME用法，LINE，COL FROM（SELECT OBJECT_NAME，USAGE，USAGE_ID，USAGE_CONTEXT_ID，NAME，LINE，COL FROM ALL_IDENTIFIERS WHERE OBJECT_NAME ='P1'UNION SELECT OBJECT_NAME，TYPE用法，USAGE_ID，USAGE_CONTEXT_ID，'Statement'名称，LINE，COL FROM ALL_STATEMENTS WHERE OBJECT_NAME ='P1'）START WITH USAGE_CONTEXT_ID = 0 AND OBJECT_NAME ='P1'INNECT BY PRIOR USAGE_ID = USAGE_CONTEXT_ID AND OBJECT_NAME ='P1';</code></pre><pre class="oac_no_warn" dir="ltr">USAGE_ID USAGES LINE COL ---------- -----------------------------------  - --------- ---------- 1声明P1 1 11 2定义P1 1 11 3声明P_CUST_ID 1 15 4参考编号1 27 5声明P_CUST_NAME 2 33 6 REFERENCE VARCHAR2 2 49 7选择语句5 5 8参考客户8 12 9参考P_CUST_ID 9 26 10参考CUSTOMER_ID 9 12 11参考客户6 20 12参考CUST_FIRST_NAME 5 20 13分配P_CUST_NAME 7 12</pre></div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2683886C-032F-4F96-8AD4-DFB007749EA2" name="GUID-2683886C-032F-4F96-8AD4-DFB007749EA2"></a><h5 id="ADFNS-GUID-2683886C-032F-4F96-8AD4-DFB007749EA2" class="sect5">关于SQL语句签名</h5>
                     <div>
                        <p>每个SQL语句都有一个唯一的PL / Scope签名，用于标识所有PL / SQL单元中的语句实例。</p>
                        <p>SQL语句签名将来自SQL的PL / SQL单元的调用与来自不同PL / SQL单元的另一个调用的相同SQL_ID进行区分。</p>
                        <p>嵌套子查询不是ALL_STATEMENTS中的单个SQL语句。</p>
                        <div class="example" id="GUID-2683886C-032F-4F96-8AD4-DFB007749EA2__GUID-F4B8A72C-4023-40EA-95AF-B0B2969A7FC2">
                           <p class="titleinexample">示例14-7从不同的PL / SQL单元调用时，同一SQL语句的不同SQL签名</p>
                           <p>此示例显示了从PROCEDURE p1和p2调用同一SQL语句时的两个不同签名。您可以观察到嵌套子查询未分配不同的SQL_ID，因此不是ALL_STATEMENTS中的单个SQL语句。</p>
                           <div class="p"><pre class="pre codeblock"><code>创建或替换过程p1（p_cust_id NUMBER，p_cust_name OUT VARCHAR2）是BUSTIN SELECT（从CUSTOMERS中选择CUST_FIRST_NAME）INTO p_cust_name FROM CUSTOMERS WHERE CUSTOMER_ID = p_cust_id;结束; /创建或替换过程P2（p_cust_id NUMBER，p_cust_name OUT VARCHAR2）是从客户端开始选择（从CUSTOMERS中选择CUST_FIRST_NAME）到c_cust_name来自CUSTOMER_ID = p_cust_id;结束; / ACCEPT nam CHAR PROMPT“输入OBJECT_NAME：”SELECT * FROM ALL_STATEMENTS WHERE OBJECT_NAME ='&amp;&amp; nam'ORDER BY LINE，COL;</code></pre></div>
                           <div class="p">为P1和P2选择<code class="codeph">ALL_STATEMENTS</code>以观察相同<code class="codeph">SQL_ID</code>的不同SQL签名。<pre class="oac_no_warn" dir="ltr">新3：WHERE OBJECT_NAME ='P1'OE 138835D3A2EBBA76A7A064E4DC14B466 SELECT P1程序7 5 5 2 c02b6yppqb46p NO NO NO NO NO NO NO SELECT（从客户中选择CUST_FIRST_NAME）来自CUSTOMER_ID = CUSTOMER_ID =的客户：B1客户选择CUST_FIRST_NAME来自客户CUSTOMER_ID 0新3：WHERE OBJECT_NAME ='P2'OE E6A5E27E5E90997A169C5C25393FAB35 SELECT P2程序7 5 5 2 c02b6yppqb46p NO NO NO NO NO NO NO YES（从客户中选择CUST_FIRST_NAME）来自CUSTOMER_ID = C的客户：B1 SELECT（从客户中选择CUST_FIRST_NAME）FROM客户在哪里CUSTOMER_ID 0</pre></div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADFNS408"></a><div class="props_rev_3"><a id="GUID-F1C70DA3-6166-41A2-89E1-215C7F994EBF" name="GUID-F1C70DA3-6166-41A2-89E1-215C7F994EBF"></a><h4 id="ADFNS-GUID-F1C70DA3-6166-41A2-89E1-215C7F994EBF" class="sect4">SQL Developer</h4>
                  <div>
                     <p>PL / Scope是SQL Developer的一个特性。有关从SQL Developer使用PL / Scope的信息，请参阅SQL Developer联机帮助</p>
                     <div class="infoboxnotealso" id="GUID-F1C70DA3-6166-41A2-89E1-215C7F994EBF__FORINFORMATIONABOUTUSINGPLSCOPEFROM-CAC295BD">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RPTUG-GUID-464C045C-FBDF-417A-A20B-037D294B3BDA" target="_blank"><span class="italic">Oracle SQL Developer用户指南</span></a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-89EFC1F5-339A-4567-A360-8E2CFBE94046" name="GUID-89EFC1F5-339A-4567-A360-8E2CFBE94046"></a><h3 id="ADFNS-GUID-89EFC1F5-339A-4567-A360-8E2CFBE94046" class="sect3">用于管理PL / SQL代码的数据字典视图概述</h3>
               <div>
                  <p>除PL / Scope数据字典视图外，以下静态字典视图对PL / SQL程序员最有用，并且通常在与PL / SQL代码管理报告相关的查询中引用。这不是所有静态数据字典视图的详尽列表。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-89EFC1F5-339A-4567-A360-8E2CFBE94046__GUID-44AB427A-B26F-4A69-931C-2F6798D4550F">用于管理PL / SQL代码的数据字典视图摘要</p>
                     <div class="tblformal" id="GUID-89EFC1F5-339A-4567-A360-8E2CFBE94046__GUID-F6895B00-D3CC-4439-AEA8-CE487C7F689A">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" border="1" summary="List of static dictionary views most often used in queries related to PL/SQL code management reports" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d65520e3363">查看名称</th>
                                 <th align="left" valign="bottom" width="20%" id="d65520e3365">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3369" headers="d65520e3363 ">ALL_ARGUMENTS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3369 d65520e3365 ">列出当前用户可访问的函数和过程的参数</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3374" headers="d65520e3363 ">ALL_DEPENDENCIES</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3374 d65520e3365 ">描述当前用户可访问的过程，包，函数，包体和触发器之间的依赖关系</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3379" headers="d65520e3363 ">ALL_ERRORS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3379 d65520e3365 ">描述当前用户可访问的存储对象的当前错误</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3384" headers="d65520e3363 ">ALL_IDENTIFIERS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3384 d65520e3365 ">显示有关当前用户可访问的存储对象中的标识符的信息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3389" headers="d65520e3363 ">USER_OBJECT_SIZE</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3389 d65520e3365 ">描述当前用户拥有的PL / SQL对象的大小（以字节为单位）。尽管此信息旨在供编译器和运行时引擎使用，但您可以使用它来标识环境中的大型程序。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3394" headers="d65520e3363 ">ALL_OBJECTS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3394 d65520e3365 ">描述当前用户可访问的所有对象</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3399" headers="d65520e3363 ">ALL_PLSQL_OBJECT_SETTINGS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3399 d65520e3365 ">显示有关当前用户可访问的存储对象的编译器设置的信息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3404" headers="d65520e3363 ">ALL_PROCEDURES</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3404 d65520e3365 ">描述当前用户可访问的所有PL / SQL函数和过程以及相关属性</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3409" headers="d65520e3363 ">ALL_SEQUENCES</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3409 d65520e3365 ">描述当前用户可访问的序列</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3414" headers="d65520e3363 ">ALL_SOURCE</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3414 d65520e3365 ">描述当前用户可访问的存储对象的文本源</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3419" headers="d65520e3363 ">ALL_STATEMENTS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3419 d65520e3365 ">描述用户可访问的存储PL / SQL对象中的所有SQL语句</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3425" headers="d65520e3363 ">ALL_STORED_SETTINGS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3425 d65520e3365 ">描述当前用户具有执行权限的已存储PL / SQL单元的持久性参数设置</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3430" headers="d65520e3363 ">ALL_SYNONYMS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3430 d65520e3365 ">描述当前用户可访问的同义词</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3435" headers="d65520e3363 ">ALL_TAB_COLUMNS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3435 d65520e3365 ">描述当前用户可访问的表，视图和集群的列</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3440" headers="d65520e3363 ">ALL_TABLES</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3440 d65520e3365 ">描述当前用户可访问的关系表</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3445" headers="d65520e3363 ">ALL_TRIGGERS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3445 d65520e3365 ">描述当前用户可访问的表上的触发器</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d65520e3450" headers="d65520e3363 ">ALL_VIEWS</td>
                                 <td align="left" valign="top" width="20%" headers="d65520e3450 d65520e3365 ">描述当前用户可访问的视图</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS02206"></a><div class="props_rev_3"><a id="GUID-1D07E448-0183-42B6-A4CA-9163F2784928" name="GUID-1D07E448-0183-42B6-A4CA-9163F2784928"></a><h3 id="ADFNS-GUID-1D07E448-0183-42B6-A4CA-9163F2784928" class="sect3">样本PL /范围会话</h3>
               <div>
                  <div class="section">
                     <p>在此示例会话中，假设您以<code class="codeph">HR</code>身份登录。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>设置会话参数：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET PLSCOPE_SETTINGS ='IDENTIFIERS：ALL';</pre></div>
                     </li>
                     <li class="stepexpand"><span>创建此包：</span><div><pre class="oac_no_warn" dir="ltr">创建或替换包PACKAGE pack1 AUTHID DEFINER是类型r1是RECORD（rf1 VARCHAR2（10））;功能f1（fp1 NUMBER）返回号码;程序p1（pp1 VARCHAR2）; END PACK1; /创建或替换包裹身体包1是功能f1（fp1号码）返回号码是一个数字：= 10; BEGIN RETURN a; END f1;程序p1（pp1 VARCHAR2）是pr1 r1; BEGIN pr1.rf1：= pp1;结束; END pack1; /</pre></div>
                     </li>
                     <li class="stepexpand"><span>验证PL / Scope是否收集了包体的所有标识符：</span><div><pre class="oac_no_warn" dir="ltr">从USER_PLSQL_OBJECT_SETTINGS中选择PLSCOPE_SETTINGS，其中NAME ='PACK1'和TYPE ='PACKAGE BODY'</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">PLSCOPE_SETTINGS ------------------------------------------------- -----------------------识别者：全部</pre></div>
                     </li>
                     <li class="stepexpand"><span>通过查询所有<code class="codeph">DECLARATION</code>用法在<code class="codeph">HR</code>显示唯一标识符。例如，要查看名称为<code class="codeph">%1</code>所有唯一标识符，请使用以下SQL * Plus格式化命令和此查询：</span><div><pre class="oac_no_warn" dir="ltr">列名称格式A6列名称格式A32列类型格式A9选择名称，签名，类型来自USER_IDENTIFIERS，其名称类似于'％1'和USAGE =''DECLARATION'ORDER BY OBJECT_TYPE，USAGE_ID;</pre><p>结果类似于：</p><pre class="oac_no_warn" dir="ltr">名称签名类型------ -------------------------------- --------- PACK1 41820FA4D5EF6BE707895178D0C5C4EF PACKAGE R1 EEBB6849DEE31BC77BF186EBAE5D4E2D RECORD RF1 41D70040337349634A7F547BC83517C7变量f1 D51E825FF334817C977174423E3D0765 FUNCTION FP1 CAC3474C112DBEC67AB926978D9A16C1形式化IN P1 B7C0576BA4D00C33A65CC0C64CADAB89 PROCEDURE PP1 6B74CF95A5B7377A735925DFAA280266形式化IN FP1 98EB63B8A4AFEB5EF94D50A20165D6CC形式化IN PP1 62D8463A314BE1F996794723402278CF形式化IN PR1 BDB1CB26C97562CCC20CD1F32D341D7C VARIABLE选择的10个行。
</pre><p><code class="codeph">*_IDENTIFIERS</code>静态数据字典视图仅显示基本类型名称;例如，局部变量或记录字段的<code class="codeph">TYPE</code>是<code class="codeph">VARIABLE</code> 。要确定<code class="codeph">VARIABLE</code>的确切类型，必须使用其<code class="codeph">USAGE_CONTEXT_ID</code> 。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>查找所有局部变量：</span><div><pre class="oac_no_warn" dir="ltr">COLUMN VARIABLE_NAME FORMAT A13 COLUMN CONTEXT_NAME格式A12选择a。名称variable_name，b。名称context_name，a。来自USER_IDENTIFIERS的签名a，USER_IDENTIFIERS b WHERE a。USAGE_CONTEXT_ID = b。USAGE_ID和a。TYPE ='VARIABLE'和a。USAGE =''DECLARATION'和a。OBJECT_NAME ='PACK1'和a。OBJECT_NAME = b。OBJECT_NAME和a。OBJECT_TYPE = b。OBJECT_TYPE和（b。TYPE ='FUNCTION'或b。TYPE ='PROCEDURE'）按顺序排序。OBJECT_TYPE，a。USAGE_ID;</pre><p>结果类似于：</p><pre class="oac_no_warn" dir="ltr">VARIABLE_NAME CONTEXT_NAME SIGNATURE ------------- ------------ ---------------------- ----------选择2行F1 1691C6B3C951FCAA2CBEEB47F85CF128 PR1 P1 BDB1CB26C97562CCC20CD1F32D341D7C。
</pre></div>
                     </li>
                     <li class="stepexpand"><span>查找在局部变量<code class="codeph">A</code>上执行的所有用法：</span><div><pre class="oac_no_warn" dir="ltr">列使用格式A11列USAGE_ID格式999 COLUMN OBJECT_NAME格式A11列OBJECT_TYPE格式A12选择使用，USAGE_ID，OBJECT_NAME，OBJECT_TYPE来自USER_IDENTIFIERS，其中SIGNATURE ='1691C6B3C951FCAA2CBEEB47F85CF128' -  A ORDER BY OBJECT_TYPE，USAGE_ID的签名;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">USAGE USAGE_ID OBJECT_NAME OBJECT_TYPE ----------- -------- ----------- ------------声明6 PACK1 PACKAGE BODY ASSIGNMENT 8 PACK1 PACKAGE BODY REFERENCE 9 PACK1 PACKAGE BODY选择3行。
</pre><p>在本地标识符<code class="codeph">A</code>上执行的使用是标识符声明（ <code class="codeph">USAGE_ID</code> <code class="codeph">6</code> ），赋值（ <code class="codeph">USAGE_ID</code> <code class="codeph">8</code> ）和引用（ <code class="codeph">USAGE_ID</code> <code class="codeph">9</code> ）。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>从本地标识符<code class="codeph">A</code>的声明中，找到它的类型：</span><div><pre class="oac_no_warn" dir="ltr">列名称格式A6列类型格式A15选择a。NAME，a。TYPE FROM USER_IDENTIFIERS a，USER_IDENTIFIERS b WHERE a。USAGE ='参考'和a。USAGE_CONTEXT_ID = b。USAGE_ID和b。USAGE =''DECLARATION'和b。SIGNATURE ='D51E825FF334817C977174423E3D0765' -  F1和a的签名。OBJECT_TYPE = b。OBJECT_TYPE和a。OBJECT_NAME = b。OBJECT_NAME;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">名称类型------ ---------------选择了NUMBER NUMBER DATATYPE 1行。</pre></div>
                     </li>
                     <li class="stepexpand"><span>找出本地标识符<code class="codeph">A</code>的分配位置：</span><div><pre class="oac_no_warn" dir="ltr">SELECT LINE，COL，OBJECT_NAME，OBJECT_TYPE FROM USER_IDENTIFIERS WHERE SIGNATURE ='1691C6B3C951FCAA2CBEEB47F85CF128' -  A和USAGE ='ASSIGNMENT'的签名;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">LINE COL OBJECT_NAME OBJECT_TYPE ---------- ---------- ----------- ------------ 3 5 PACK1 PACKAGE BODY 1行被选中。</pre></div>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01719.process-architecture.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter discusses the processes in an Oracle database."></meta>
      <meta name="description" content="This chapter discusses the processes in an Oracle database."></meta>
      <title>流程架构</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Concepts"></meta>
      <meta property="og:description" content="This chapter discusses the processes in an Oracle database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Concepts"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-concepts.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T07:47:16-08:00"></meta>
      <meta name="dcterms.title" content="Database Concepts"></meta>
      <meta name="dcterms.dateCopyrighted" content="1993, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96138-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="memory-architecture.html" title="Previous" type="text/html"></link>
      <link rel="next" href="application-and-networking-architecture.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CNCPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="memory-architecture.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="application-and-networking-architecture.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库概念</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-instance-architecture.html" property="item" typeof="WebPage"><span property="name">Oracle实例架构</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">流程架构</li>
            </ol>
            <a id="GUID-85D9852E-5BF1-4AC0-9E5A-49F0570DBD7A" name="GUID-85D9852E-5BF1-4AC0-9E5A-49F0570DBD7A"></a><a id="CNCPT008"></a>
            
            <h2 id="CNCPT-GUID-85D9852E-5BF1-4AC0-9E5A-49F0570DBD7A" class="sect2"><span class="enumeration_chapter">15</span>流程架构</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论Oracle数据库中的过程。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="process-architecture.html#GUID-FB843ADE-8DDD-4F83-8EB9-D4B5E4B6B022" title="进程是操作系统中可以运行一系列步骤的机制。">流程简介</a></p>
                  </li>
                  <li>
                     <p><a href="process-architecture.html#GUID-6B71F47F-D097-42F0-BB71-1F5270F867E1" title="当用户运行诸如Pro * C程序或SQL * Plus之类的应用程序时，操作系统会创建一个客户端进程（有时称为用户进程）来运行用户应用程序。客户端应用程序具有链接到其中的Oracle数据库库，这些库提供与数据库通信所需的API。">客户端流程概述</a></p>
                  </li>
                  <li>
                     <p><a href="process-architecture.html#GUID-310F28E9-793A-4816-87CB-FDB54AB68957" title="Oracle数据库创建服务器进程以处理连接到实例的客户端进程的请求。客户端进程始终通过单独的服务器进程与数据库通信。">服务器进程概述</a></p>
                  </li>
                  <li>
                     <p><a href="process-architecture.html#GUID-D8AE1B78-69D5-4F0F-8BE3-C91AA2514F2D" title="后台进程是多进程Oracle数据库使用的其他进程。后台进程执行操作数据库所需的维护任务，并最大限度地提高多个用户的性能。">后台流程概述</a></p>
                  </li>
               </ul>
            </div><a id="CNCPT903"></a><a id="CNCPT901"></a><div class="props_rev_3"><a id="GUID-FB843ADE-8DDD-4F83-8EB9-D4B5E4B6B022" name="GUID-FB843ADE-8DDD-4F83-8EB9-D4B5E4B6B022"></a><h3 id="CNCPT-GUID-FB843ADE-8DDD-4F83-8EB9-D4B5E4B6B022" class="sect3">流程简介</h3>
               <div>
                  <p><span class="bold">进程</span>是操作系统中可以运行一系列步骤的机制。
                  </p>
                  <p>流程执行体系结构取决于操作系统。例如，在Windows上，Oracle后台进程是进程内的执行线程。在Linux和UNIX上，Oracle进程可以是操作系统进程，也可以是操作系统进程中的线程。</p>
                  <p>进程运行代码模块。所有连接的Oracle数据库用户必须运行以下模块才能访问<a href="glossary.html#GUID-CFB1A30E-76B6-44EA-839E-9E63C8DA31AC"><span class="xrefglossterm">数据库实例</span></a> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>应用程序或Oracle Database实用程序</p>
                        <p>数据库用户运行数据库应用程序，例如<a href="glossary.html#GUID-FDCF892E-6AD5-4AC9-9D1D-A9C7D106D21D"><span class="xrefglossterm">预编译器</span></a>程序或SQL * Plus等数据库工具，它们向数据库发出SQL语句。
                        </p>
                     </li>
                     <li>
                        <p>Oracle数据库代码</p>
                        <p>每个用户都有代表他或她执行的Oracle数据库代码，用于解释和处理应用程序的SQL语句。</p>
                     </li>
                  </ul>
                  <p>进程通常在其自己的私有内存区域中运行。大多数进程可以定期写入关联的跟踪文件。</p>
                  <div class="infoboxnotealso" id="GUID-FB843ADE-8DDD-4F83-8EB9-D4B5E4B6B022__GUID-52D7A87D-5712-4E2A-9D12-5E0C19DBC1C2">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="oracle-database-instance.html#GUID-5206D90F-E288-4B60-83E9-F92A0C6E94AD" title="跟踪文件是包含用于调查问题的诊断数据的文件。此外，跟踪文件可以为调整应用程序或实例提供指导。">跟踪文件</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="concepts-for-database-administrators.html#GUID-FA659979-25B7-4611-AA8D-48B5404301FE" title="Oracle提供了几种用于管理数据库的工具。">数据库管理员工具</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="concepts-for-database-developers.html#GUID-D1C1BC1D-03C7-4A18-BB88-0D76F311DAF0" title="Oracle提供了几种用于开发数据库应用程序的工具。本节介绍一些常用的开发工具。">数据库开发人员工具</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="CNCPT89079"></a><a id="CNCPT1246"></a><div class="props_rev_3"><a id="GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC" name="GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC"></a><h4 id="CNCPT-GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC" class="sect4">流程类型</h4>
                  <div>
                     <p>数据库实例包含多个进程或与多个进程交互。</p>
                     <p>流程分为以下几种：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="glossary.html#GUID-6F3BBCE8-F471-41E8-8C98-F4C62A85862B"><span class="xrefglossterm">客户端进程</span></a>运行应用程序或Oracle工具代码。
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-DD083580-0AAF-4728-9186-BE1E319020DD"><span class="xrefglossterm">Oracle进程</span></a>是运行Oracle数据库代码的执行单元。在多线程体系结构中，Oracle进程可以是操作系统进程，也可以是操作系统进程中的线程。Oracle进程包括以下子类型：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="glossary.html#GUID-8EFE210D-EE23-42A9-B4F0-7EF79C9315EE"><span class="xrefglossterm">后台进程</span></a>从数据库实例开始并执行维护任务，例如执行<a href="glossary.html#GUID-FFDBC27D-CE99-49C7-8BB9-C8C2D8D52801"><span class="xrefglossterm">实例恢复</span></a> ，清理进程，将重做缓冲区写入磁盘等。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="glossary.html#GUID-E660AC1C-B704-4DC1-A35A-DB49EFB34F4A"><span class="xrefglossterm">服务器进程</span></a>基于客户端请求执行工作。</p>
                                 <p>例如，这些进程解析SQL查询，将它们放在<a href="glossary.html#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8"><span class="xrefglossterm">共享池中</span></a> ，为每个<a href="glossary.html#GUID-CCF91C9F-A98A-498F-A84B-58A0FA16CD6E"><span class="xrefglossterm">查询</span></a>创建和执行<a href="glossary.html#GUID-78BCF1CD-1865-4AEB-8F14-AFA4FF1981BF"><span class="xrefglossterm">查询计划</span></a> ，以及从<a href="glossary.html#GUID-7913177D-8183-4CC5-8F59-816FE66DA363"><span class="xrefglossterm">数据库缓冲区缓存</span></a>或磁盘读取缓冲区。
                                 </p>
                                 <div class="infoboxnote" id="GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC__GUID-5D832581-B0C2-4C4D-8CCB-72909319A8CF">
                                    <p class="notep1">注意：</p>
                                    <p>服务器进程以及在这些进程中分配的进程内存在数据库实例中运行。当服务器进程终止时，实例继续运行。</p>
                                 </div>
                              </li>
                              <li>
                                 <p>从属进程为后台或服务器进程执行其他任务。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>流程结构因操作系统和Oracle数据库选项的选择而异。例如，您可以为连接的用户配置<a href="glossary.html#GUID-8B14C804-9D68-471C-A581-5AEE673A9FCD"><span class="xrefglossterm">专用服务器</span></a>或<a href="glossary.html#GUID-E94CE0E3-CC86-4F46-B8EF-54945F026326"><span class="xrefglossterm">共享服务器</span></a>连接的代码。在共享服务器体系结构中，运行数据库代码的每个服务器进程可以服务多个客户端进程
                     </p>
                     <p><a href="process-architecture.html#GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC__BABHJDHD">图15-1</a>显示了使用专用服务器连接的<a href="glossary.html#GUID-78C0E867-233A-4857-B9FE-A3852A9B7BDF"><span class="xrefglossterm">系统全局区域（SGA）</span></a>和后台进程。对于每个用户连接，客户端进程运行该应用程序。此客户端进程与运行数据库代码的专用服务器进程不同。每个客户端进程都与其自己的服务器进程相关联，该进程具有自己的<a href="glossary.html#GUID-76021F69-AC7A-4D8D-A308-A7B8AC072EEF"><span class="xrefglossterm">程序全局区域（PGA）</span></a> 。
                     </p>
                     <div class="figure" id="GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC__BABHJDHD">
                        <p class="titleinfigure">图15-1 Oracle进程和SGA</p><img src="img/cncpt283.gif" alt="下面是图15-1的描述" title="下面是图15-1的描述" longdesc="img_text/cncpt283.html"><br><a href="img_text/cncpt283.html">“图15-1 Oracle进程和SGA”的描述</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-B9B8BB8D-FB3D-46BC-AFBD-346A69BAB3EC__GUID-58699DF1-67D3-4467-9CA4-1C4231A12F58">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="application-and-networking-architecture.html#GUID-94AFB4A0-4979-4B48-A19A-0D9178771FB1" title="在专用服务器体系结构中，代表每个客户端进程创建的服务器进程称为专用服务器进程（或影子进程）。">专用服务器架构</a> ”</span>和<span class="q">“ <a href="application-and-networking-architecture.html#GUID-F3281DD9-B210-463E-B572-173816D2B161" title="在共享服务器体系结构中，调度程序将多个传入网络会话请求定向到共享服务器进程池">共享服务器架构</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关配置选择的更多详细信息，请参见Oracle数据库操作系统特定文档</p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-PROCESS.html#REFRN30186" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$PROCESS</code>视图</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT1245"></a><div class="props_rev_3"><a id="GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664" name="GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664"></a><h4 id="CNCPT-GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664" class="sect4">多进程和多线程Oracle数据库系统</h4>
                  <div>
                     <p>多进程Oracle数据库（也称为多用户Oracle数据库）使用多个进程来运行Oracle数据库代码的不同部分以及用户的其他Oracle进程 - 每个连接用户的一个进程或多个用户共享的一个或多个进程。</p>
                     <p>大多数数据库都是多用户，因为数据库的主要优点是同时管理多个用户所需的数据。数据库实例中的每个进程都执行特定的作业。通过将数据库和应用程序的工作分成多个进程，多个用户和应用程序可以同时连接到实例，同时系统提供良好的性能。</p>
                     <p>在早于<span>Oracle Database 12c的版本中</span> ，Oracle进程未在UNIX和Linux系统上作为线程运行。从<span>Oracle Database 12c开始</span> ， <a href="glossary.html#GUID-A0106836-D69F-4157-A3D9-04842A99FDC8"><span class="xrefglossterm">多线程Oracle数据库模型</span></a>使Oracle进程能够在单独的地址空间中作为操作系统线程执行。安装<span>Oracle Database 12c时</span> ，数据库以进程模式运行。必须将<code class="codeph">THREADED_EXECUTION</code>初始化参数设置为<code class="codeph">TRUE</code>才能以线程模式运行数据库。在线程模式下，UNIX和Linux上的一些后台进程作为进程运行（每个进程包含一个线程），而剩余的Oracle进程作为进程内的线程运行。
                     </p>
                     <p>在以线程模式运行的数据库中，PMON和DBW可能作为操作系统进程运行，而LGWR和CMON可能在单个进程中作为线程运行。两个前台进程和并行执行（PX）服务器进程可能在第二个操作系统进程中作为线程运行。第三个操作系统进程可能包含多个前台线程。因此，“Oracle进程”并不总是意味着“操作系统进程”。</p>
                     <div class="infoboxnote" id="GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664__GUID-2317ABBD-BA01-4044-B1AC-7F95649AEB8E">
                        <p class="notep1">注意：</p>当<code class="codeph">THREADED_EXECUTION</code>初始化参数设置为<code class="codeph">TRUE</code> ，不支持操作系统身份验证。
                     </div>
                     <div class="example" id="GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664__GUID-5599E151-5CAD-40A5-BD57-C76FAE455853">
                        <p class="titleinexample">示例15-1查看Oracle Process Metadata</p>
                        <p><code class="codeph">V$PROCESS</code>视图为连接到数据库实例的每个Oracle进程包含一行。例如，您可以在SQL * Plus中运行以下查询以获取每个进程的操作系统进程ID和操作系统线程ID：</p><pre class="pre codeblock"><code>COL SPID FORMAT a8 COL STID FORMAT a8选择SPID，STID，程序来自V $流程订单的SPID;</code></pre><p>该查询产生以下部分样本输出：</p><pre class="pre codeblock"><code>SPID STID计划----- ----- --------------------------- 7190 7190 oracle @ samplehost（PMON）7192 7192 oracle @ samplehost（PSP0）7194 7194 oracle @ samplehost（VKTM）7198 7198 oracle @ samplehost（SCMN）7198 7200 oracle @ samplehost（GEN0）7202 7202 oracle @ samplehost（SCMN）7202 7204 oracle @ samplehost（DIAG）7198 7205 oracle @ samplehost（DBRM）7202 7206 oracle @ samplehost（DIA0）。。。</code></pre><div class="infoboxnotealso" id="GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664__GUID-25EA98F4-BF97-4B2A-839C-C884482C4DCF">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../tgdba/tuning-program-global-area.html#TGDBA477" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解如何使用<code class="codeph">V$PROCESS</code>视图</p>
                              </li>
                              <li>
                                 <p><a href="../refrn/THREADED_EXECUTION.html#REFRN10335" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">THREADED_EXECUTION</code>初始化参数</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="CNCPT902"></a><div class="props_rev_3"><a id="GUID-6B71F47F-D097-42F0-BB71-1F5270F867E1" name="GUID-6B71F47F-D097-42F0-BB71-1F5270F867E1"></a><h3 id="CNCPT-GUID-6B71F47F-D097-42F0-BB71-1F5270F867E1" class="sect3">客户端流程概述</h3>
               <div>
                  <p>当用户运行诸如Pro * C程序或SQL * Plus之类的应用程序时，操作系统会创建一个客户端进程（有时称为<span class="italic">用户进程</span> ）来运行用户应用程序。客户端应用程序具有链接到其中的Oracle数据库库，这些库提供与数据库通信所需的API。
                  </p>
               </div><a id="CNCPT9836"></a><div class="props_rev_3"><a id="GUID-2FE492F0-76A1-4B4A-8E2D-ABE7EC671072" name="GUID-2FE492F0-76A1-4B4A-8E2D-ABE7EC671072"></a><h4 id="CNCPT-GUID-2FE492F0-76A1-4B4A-8E2D-ABE7EC671072" class="sect4">客户端和服务器进程</h4>
                  <div>
                     <p>客户端进程在重要方面与直接与实例交互的Oracle进程有所不同。</p>
                     <p>为客户端进程提供服务的Oracle进程可以读取和写入SGA，而客户端进程则不能。客户端进程可以在数据库主机以外的主机上运行，而Oracle进程则不能。</p>
                     <p>例如，假设一个客户端主机上的用户启动的SQL * Plus，然后连接在网络上的数据库<code class="codeph">sample</code>不同的主机上，当数据库实例未启动：</p><pre class="pre codeblock"><code>SQL&gt; CONNECT SYS @ inst1 AS SYSDBA输入密码：*********连接到空闲实例。
</code></pre><p>在客户端主机上，搜索<code class="codeph">sqlplus</code>或<code class="codeph">sample</code>的进程仅显示<code class="codeph">sqlplus</code>客户端进程：</p><pre class="pre codeblock"><code>％ps -ef | grep -e sample -e sqlplus | grep -v grep clientuser 29437 29436 0 15:40 pts / 1 00:00:00 sqlplus as sysdba</code></pre><p>在数据库主机上，搜索<code class="codeph">sqlplus</code>或<code class="codeph">sample</code>的进程会显示具有非本地连接的服务器进程，但没有客户端进程：</p><pre class="pre codeblock"><code>％ps -ef | grep -e sample -e sqlplus | grep -v grep serveruser 29441 1 0 15:40？00:00:00 oraclesample（LOCAL = NO）</code></pre><div class="infoboxnotealso" id="GUID-2FE492F0-76A1-4B4A-8E2D-ABE7EC671072__GUID-CDE856A4-1C63-4F1B-9030-A887DC6E769B">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="oracle-database-instance.html#GUID-189ADDB5-1E71-4924-8371-F5B2EFB5B304" title="当Oracle数据库启动实例时，它将继续执行各个阶段。">如何启动实例</a> ”</span>以了解客户端在未启动实例时如何连接到数据库</p>
                     </div>
                  </div>
               </div><a id="CNCPT89080"></a><a id="CNCPT89081"></a><a id="CNCPT89082"></a><a id="CNCPT89083"></a><a id="CNCPT1247"></a><div class="props_rev_3"><a id="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB" name="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB"></a><h4 id="CNCPT-GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB" class="sect4">连接和会话</h4>
                  <div>
                     <p>数据库<span class="bold">连接</span>是客户端进程和数据库实例之间的物理通信路径。
                     </p>
                     <p>在连接期间，使用可用的进程间通信机制或网络软件建立通信路径。通常，客户端进程与服务器进程或调度程序之间会发生连接，但也可能在客户端进程与Oracle Connection Manager（CMAN）之间发生连接。</p>
                     <p>数据库<a href="glossary.html#GUID-0F44C072-9841-4E2E-B846-FB16A2E54139"><span class="xrefglossterm">会话</span></a>是数据库实例内存中的逻辑实体，表示当前用户登录数据库的状态。例如，当用户使用密码对数据库进行身份验证时，将为该用户建立会话。会话从用户通过数据库进行身份验证到用户断开连接或退出数据库应用程序的时间为止。
                     </p>
                     <p>单个连接可以在其上建立0,1或更多会话。会话是独立的：一个会话中的提交不会影响其他会话中的事务。</p>
                     <div class="infoboxnote" id="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__GUID-58E168A7-F4FE-4117-A02B-74B67BF24031">
                        <p class="notep1">注意：</p>
                        <p>如果配置了Oracle Net <a href="glossary.html#GUID-50E2A9E3-613B-460D-B815-E36205D4FB05"><span class="xrefglossterm">连接池</span></a> ，则可以删除连接但保持会话不变。
                        </p>
                     </div>
                     <p>对于单个数据库用户，可以同时存在多个会话。如下图所示，用户<code class="codeph">hr</code>可以与数据库建立多个连接。在专用服务器连接中，数据库代表每个连接创建服务器进程。只有导致创建专用服务器的客户端进程才会使用它。在共享服务器连接中，许多客户端进程访问单个共享服务器进程。
                     </p>
                     <div class="figure" id="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__BABDBIJC">
                        <p class="titleinfigure">图15-2每个连接的一个会话</p><img src="img/cncpt237.gif" alt="下面是图15-2的描述" title="下面是图15-2的描述" longdesc="img_text/cncpt237.html"><br><a href="img_text/cncpt237.html">“图15-2每个连接一个会话”的描述</a></div>
                     <!-- class="figure" -->
                     <p><a href="process-architecture.html#GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__BABBCEEF">图15-3</a>说明了用户<code class="codeph">hr</code>与数据库的单个连接的情况，但此连接有两个会话。
                     </p>
                     <div class="figure" id="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__BABBCEEF">
                        <p class="titleinfigure">图15-3一个连接中的两个会话</p><img src="img/cncpt238.gif" alt="下面是图15-3的描述" title="下面是图15-3的描述" longdesc="img_text/cncpt238.html"><br><a href="img_text/cncpt238.html">“图15-3一个连接中的两个会话”的描述</a></div>
                     <!-- class="figure" -->
                     <p>生成SQL语句执行统计信息的自动跟踪报告会重新创建<a href="process-architecture.html#GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__BABBCEEF">图15-3中</a>的方案。
                     </p>
                     <p><a href="process-architecture.html#GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__BABGDIIB">例15-2中</a>的<code class="codeph">DISCONNECT</code>命令实际上结束了<span class="italic">会话</span> ，而不是连接。
                     </p>
                     <div class="example" id="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__BABGDIIB">
                        <p class="titleinexample">例15-2连接和会话</p>
                        <p>以下示例将SQL * Plus作为用户<code class="codeph">SYSTEM</code>连接到数据库并启用跟踪，从而创建新会话（包括示例输出）：</p><pre class="pre codeblock"><code>SQL&gt; SELECT SID，SERIAL＃，PADDR来自V $ SESSION WHERE USERNAME = USER; SID SERIAL＃PADDR --- ------- -------- 90 91 3BE2E41C SQL&gt; SET AUTOTRACE ON STATISTICS; SQL&gt; SELECT SID，SERIAL＃，PADDR来自V $ SESSION WHERE USERNAME = USER; SID SERIAL＃PADDR --- ------- -------- 88 93 3BE2E41C 90 91 3BE2E41C ......SQL&gt; DISCONNECT</code></pre><p><code class="codeph">DISCONNECT</code>命令实际上结束<span class="italic">会话</span> ，而不是连接。打开一个新终端并以另一个用户身份连接到该实例，以下查询显示与地址<code class="codeph">3BE2E41C</code>的连接仍处于活动状态。
                        </p><pre class="pre codeblock"><code>SQL&gt; CONNECT dba1 @ inst1密码：********已连接。SQL&gt; SELECT PROGRAM FROM V $ PROCESS WHERE ADDR = HEXTORAW（'3BE2E41C'）; PROGRAM ------------------------------------------------ oracle @ stbcs09-1（TNS V1-V3）</code></pre><div class="infoboxnotealso" id="GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB__GUID-1073DD9E-2641-4C52-869E-15BD4D0F2B73">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="application-and-networking-architecture.html#GUID-F3281DD9-B210-463E-B572-173816D2B161" title="在共享服务器体系结构中，调度程序将多个传入网络会话请求定向到共享服务器进程池">共享服务器架构</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="CNCPT89228"></a><div class="props_rev_3"><a id="GUID-251AC080-BD5C-415E-8549-B67F8653AD40" name="GUID-251AC080-BD5C-415E-8549-B67F8653AD40"></a><h4 id="CNCPT-GUID-251AC080-BD5C-415E-8549-B67F8653AD40" class="sect4">数据库操作</h4>
                  <div>
                     <p>在数据库监视的上下文中， <span class="bold">数据库操作</span>是两个时间点之间的会话活动，由最终用户或应用程序代码定义。
                     </p>
                     <p><span class="bold">简单的数据库操作</span>可以是单个SQL语句，也可以是单个PL / SQL过程或函数。<span class="bold">复合数据库操作</span>是一组单个或复合操作。
                     </p>
                     <p>要监视，比较和调整任务，您可以将大量任务划分为数据库操作，并将操作细分为阶段。用例是运行速度比正常情况慢的PL / SQL批处理作业。通过将作业配置为数据库操作，您可以识别和调整作业中昂贵的步骤。</p>
                     <p>每次执行数据库操作都由一对属性唯一标识：操作名称和执行ID。一个会话可以通过指定其会话ID和序列号来启动或停止不同会话中的数据库操作。</p>
                     <p>同一数据库操作的两次出现可以使用相同的名称但不同的执行ID同时执行。每次执行具有相同名称的数据库操作都可以包含不同的语句。</p>
                     <p>您可以使用<code class="codeph">DBMS_SQL_MONITOR</code> PL / SQL包创建和管理数据库操作。您可以使用<code class="codeph">V$SQL_MONITOR</code> ， <code class="codeph">V$SQL_PLAN_MONITOR</code>和<code class="codeph">V$SQL_MONITOR_SESSTAT</code>监视操作。</p>
                     <div class="infoboxnotealso" id="GUID-251AC080-BD5C-415E-8549-B67F8653AD40__GUID-4F7A0F2D-F46F-44D9-BC28-0587311B52A7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../tgsql/monitoring-database-operations.html#TGSQL789" target="_blank"><span><cite>Oracle数据库SQL调优指南</cite></span></a> ，了解如何监控数据库操作</p>
                           </li>
                           <li>
                              <p><a href="../dwhsg/index.html" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a> ，了解如何监控长时间运行的负载</p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQL_MONITOR.html#ARPLS-GUID-13874A73-369E-42CD-9C43-A12F1B3BDEC6" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_SQL_MONITOR</code>更多信息</p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-SQL_MONITOR.html#GUID-79E97A84-9C27-4A5E-AC0D-C12CB3E748E6" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">V$SQL_MONITOR</code>更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT1248"></a><div class="props_rev_3"><a id="GUID-310F28E9-793A-4816-87CB-FDB54AB68957" name="GUID-310F28E9-793A-4816-87CB-FDB54AB68957"></a><h3 id="CNCPT-GUID-310F28E9-793A-4816-87CB-FDB54AB68957" class="sect3">服务器进程概述</h3>
               <div>
                  <p>Oracle数据库创建服务器进程以处理连接到实例的客户端进程的请求。客户端进程始终通过单独的服务器进程与数据库通信。</p>
                  <p>代表数据库应用程序创建的服务器进程可以执行以下一项或多项任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>解析并运行通过应用程序发出的SQL语句，包括创建和执行<a href="glossary.html#GUID-78BCF1CD-1865-4AEB-8F14-AFA4FF1981BF"><span class="xrefglossterm">查询计划</span></a></p>
                     </li>
                     <li>
                        <p>执行PL / SQL代码</p>
                     </li>
                     <li>
                        <p>将数据块中的数据块读入数据库缓冲区缓存（DBW后台进程的任务是将已修改的块写回磁盘）</p>
                     </li>
                     <li>
                        <p>以应用程序可以处理信息的方式返回结果</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-310F28E9-793A-4816-87CB-FDB54AB68957__GUID-73D21F6F-4949-4E28-875A-FF3E5DDF2C4F">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="sql.html#GUID-1B95E60C-99C5-446D-9C6B-5D16EFE59ACF" title="SQL处理的一般阶段是解析，优化，行源生成和执行。根据语句，数据库可能会省略其中一些步骤。">SQL处理的阶段</a> ”</span></p>
                  </div>
               </div><a id="CNCPT9838"></a><div class="props_rev_3"><a id="GUID-8EB10017-7930-45CE-8012-2E1DE8DC4EB2" name="GUID-8EB10017-7930-45CE-8012-2E1DE8DC4EB2"></a><h4 id="CNCPT-GUID-8EB10017-7930-45CE-8012-2E1DE8DC4EB2" class="sect4">专用服务器进程</h4>
                  <div>
                     <p>在专用服务器连接中，客户端连接与一个且仅一个服务器进程相关联。</p>
                     <p>在Linux上，连接到数据库实例的20个客户端进程由20个服务器进程提供服务。每个客户端进程直接与其服务器进程通信。此服务器进程专用于会话期间的客户端进程。服务器进程在其PGA中存储特定于进程的信息和UGA。</p>
                     <div class="infoboxnotealso" id="GUID-8EB10017-7930-45CE-8012-2E1DE8DC4EB2__GUID-86C47065-5FBF-4940-A679-7504F1340115">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="application-and-networking-architecture.html#GUID-94AFB4A0-4979-4B48-A19A-0D9178771FB1" title="在专用服务器体系结构中，代表每个客户端进程创建的服务器进程称为专用服务器进程（或影子进程）。">专用服务器架构</a> ”</span></p>
                           </li>
                           <li>
                              <p> <span class="q">“ <a href="memory-architecture.html#GUID-26FCB7D9-7B1D-4F5A-88AA-1DB1E0ACD2BE" title="PGA内存分配取决于数据库是使用专用服务器连接还是共享服务器连接。">专用和共享服务器模式下的PGA使用</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT9839"></a><div class="props_rev_3"><a id="GUID-A4FA88C6-8447-4636-911C-5864E0DC8572" name="GUID-A4FA88C6-8447-4636-911C-5864E0DC8572"></a><h4 id="CNCPT-GUID-A4FA88C6-8447-4636-911C-5864E0DC8572" class="sect4">共享服务器进程</h4>
                  <div>
                     <p>在共享服务器连接中，客户端应用程序通过网络连接到<span class="bold">调度程序进程</span> ，而不是服务器进程。例如，20个客户端进程可以连接到单个调度程序进程。
                     </p>
                     <p>调度程序进程接收来自已连接客户端的请求，并将它们放入大型池中的请求队列中。第一个可用的共享服务器进程从队列中获取请求并对其进行处理。之后，共享服务器将结果放入调度程序响应队列。调度程序进程监视此队列并将结果传输到客户端。</p>
                     <p>与专用服务器进程一样，共享服务器进程也有自己的PGA。但是，会话的UGA位于SGA中，因此任何共享服务器都可以访问会话数据。</p>
                     <div class="infoboxnotealso" id="GUID-A4FA88C6-8447-4636-911C-5864E0DC8572__GUID-E0BC680F-27E9-4DA9-8C4A-D99D1A4955A6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="application-and-networking-architecture.html#GUID-F3281DD9-B210-463E-B572-173816D2B161" title="在共享服务器体系结构中，调度程序将多个传入网络会话请求定向到共享服务器进程池">共享服务器架构</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="memory-architecture.html#GUID-1ECB5213-AC4E-4BB4-9113-91C761676B34" title="大型池是一个可选的内存区域，用于大于适用于共享池的内存分配。">大池</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8" name="GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8"></a><h4 id="CNCPT-GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8" class="sect4">Oracle数据库如何创建服务器进程</h4>
                  <div>
                     <p>数据库以各种方式创建服务器进程，具体取决于连接方法。</p>
                     <p>连接方法如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>遗赠</p>
                           <p>SQL * Plus，OCI客户端或其他客户端应用程序直接生成服务器进程。</p>
                        </li>
                        <li>
                           <p>Oracle Net监听器</p>
                           <p>客户端应用程序通过侦听器连接到数据库。</p>
                        </li>
                        <li>
                           <p>专注的经纪人</p>
                           <p>这是一个创建前台进程的数据库进程。与侦听器不同，代理驻留在数据库实例中。当使用专用代理时，客户端连接到侦听器，然后侦听器将连接切换到专用代理。</p>
                        </li>
                     </ul>
                     <p>当连接<span class="italic">不</span>使用遗留，在数据库中创建服务器的过程如下：</p>
                     <ol>
                        <li>
                           <p>客户端应用程序从侦听器或代理请求新连接。</p>
                        </li>
                        <li>
                           <p>侦听器或代理启动新进程或线程的创建。</p>
                        </li>
                        <li>
                           <p>操作系统创建新进程或线程。</p>
                        </li>
                        <li>
                           <p>Oracle数据库初始化各种组件和通知。</p>
                        </li>
                        <li>
                           <p>数据库移交连接和特定于连接的代码。</p>
                        </li>
                     </ol>
                     <p>（可选）如果使用专用代理连接方法，则可以使用<code class="codeph">DBMS_PROCESS</code>程序包预先创建服务器进程池。在这种情况下，进程管理器（PMAN）后台进程监视预先创建的进程池，这些进程等待与客户机请求相关联。当连接需要服务器进程时，数据库将跳过进程创建的步骤2-4，并仅执行步骤5。此优化可提高性能。
                     </p>
                     <div class="infoboxnote" id="GUID-13FE4098-61DF-4D76-882D-551A88E0EBB8__GUID-5CBF0F66-14C6-4D93-83B5-CF1AAE943978">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_PROCESS</code> PL / SQL包</p>
                           </li>
                           <li>
                              <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解PMAN后台进程</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT1249"></a><div class="props_rev_3"><a id="GUID-D8AE1B78-69D5-4F0F-8BE3-C91AA2514F2D" name="GUID-D8AE1B78-69D5-4F0F-8BE3-C91AA2514F2D"></a><h3 id="CNCPT-GUID-D8AE1B78-69D5-4F0F-8BE3-C91AA2514F2D" class="sect3">后台流程概述</h3>
               <div>
                  <p>后台进程是多进程Oracle数据库使用的其他进程。后台进程执行操作数据库所需的维护任务，并最大限度地提高多个用户的性能。</p>
                  <p>每个后台进程都有一个单独的任务，但与其他进程一起使用。例如，LGWR进程将数据<a href="glossary.html#GUID-BADF3CFF-08C6-42E8-A05E-DEB83502572A"><span class="xrefglossterm">从重做日志缓冲区</span></a>写入<a href="glossary.html#GUID-2A8BC112-AB70-4B06-9F85-FE975861CEE0"><span class="xrefglossterm">联机重做日志</span></a> 。当准备好存档已填充的重做日志文件时，LGWR会发信号通知另一个进程以存档重做日志文件。
                  </p>
                  <p>Oracle数据库实例启动时会自动创建后台进程。实例可以有许多后台进程，并非所有后台进程都存在于每个数据库配置中。以下查询列出了数据库上运行的后台进程：</p><pre class="oac_no_warn" dir="ltr">SELECT PNAME FROM V $ PROCESS在PNAME中，PNAME不是按PNAME排序;</pre><p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="process-architecture.html#GUID-2E691FEA-9027-47E4-A3D0-1B235BBA295A" title="所有典型的数据库配置中都存在强制后台进程。">强制性背景流程</a></p>
                     </li>
                     <li>
                        <p><a href="process-architecture.html#GUID-028BA4D6-F9BC-4F36-AD98-0FE3A191ED02" title="可选的后台进程是未定义为强制的任何后台进程。">可选的后台进程</a></p>
                     </li>
                     <li>
                        <p><a href="process-architecture.html#GUID-BD43E5D1-82C1-4997-8461-7CBBAFC7ED49" title="从属进程是代表其他进程执行工作的后台进程。">奴隶进程</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D8AE1B78-69D5-4F0F-8BE3-C91AA2514F2D__GUID-58621A25-4C0B-4F2A-B303-E78B80BED83B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database Reference，</cite></span></a>用于描述所有后台进程</p>
                  </div>
               </div><a id="CNCPT9840"></a><div class="props_rev_3"><a id="GUID-2E691FEA-9027-47E4-A3D0-1B235BBA295A" name="GUID-2E691FEA-9027-47E4-A3D0-1B235BBA295A"></a><h4 id="CNCPT-GUID-2E691FEA-9027-47E4-A3D0-1B235BBA295A" class="sect4">强制性背景流程</h4>
                  <div>
                     <p>所有典型的数据库配置中都存在强制后台进程。</p>
                     <p>默认情况下，这些进程在读/写数据库实例中运行，并使用最低配置的初始化参数文件启动。只读数据库实例会禁用其中一些进程。</p>
                     <p>本节介绍以下强制后台进程：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="process-architecture.html#GUID-B5CA9579-53DB-442C-A85F-F21FD334833A" title="PMON组包括PMON，清理主进程（CLMN）和清理助手进程（CLnn）。这些流程负责监视和清理其他流程。">过程监控过程（PMON）组</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-CFD15DE0-4CB6-4D22-BDA3-5EA48C9DC6A2" title="流程管理器（PMAN）监督多个后台进程，包括共享服务器，池化服务器和作业队列进程。">流程管理器（PMAN）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-9641E79F-7A45-4AB6-9A89-BF7D4C25269A" title="监听器注册过程（LREG）使用Oracle Net Listener注册有关数据库实例和调度程序进程的信息。">监听者注册流程（LREG）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-21393D94-CA2D-4551-BD20-28BEFDC98631" title="系统监视器进程（SMON）负责各种系统级清理任务。">系统监控过程（SMON）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-DC9CBDED-3978-450A-9D7A-0A94CE8FF233" title="数据库写程序进程（DBW）将数据库缓冲区的内容写入数据文件。DBW进程将数据库缓冲区高速缓存中的修改缓冲区写入磁盘。">数据库编写过程（DBW）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-B6BE2C31-1543-4504-9763-6FFBBF99DC85" title="日志写入器进程（LGWR）管理联机重做日志缓冲区。">日志编写过程（LGWR）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372" title="检查点进程（CKPT）使用检查点信息更新控制文件和数据文件头，并向DBW发送信号以将块写入磁盘。检查点信息包括检查点位置，SCN和联机重做日志中的位置以开始恢复。">检查点过程（CKPT）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-D175CA2B-20FE-4D5D-9A89-5CAA279479EC" title="可管理性监视器进程（MMON）执行与自动工作负载存储库（AWR）相关的许多任务。">可管理性监控流程（MMON和MMNL）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-9FF900D1-7DB8-4D41-8D34-8E99AF650CEC" title="在分布式数据库中，恢复程序进程（RECO）自动解决分布式事务中的故障。">回收过程（RECO）</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-2E691FEA-9027-47E4-A3D0-1B235BBA295A__GUID-DCAC8F55-0364-4765-AA4D-82C222331C6E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="oracle-database-instance.html#GUID-04EF1A27-8001-46D8-9516-69C9DC9A81BF" title="每个数据库实例都是读/写或只读。">读/写和只读实例</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database Reference，</cite></span></a>用于描述其他强制进程，包括MMAN，DIAG，VKTM，DBRM和PSP0</p>
                           </li>
                           <li>
                              <p><a href="../racad/introduction-to-oracle-rac.html#RACAD7275" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a>和“ <a href="../cwadd/introduction-to-oracle-clusterware.html#CWADD90953" target="_blank"><span><cite>Oracle Clusterware管理和部署指南”</cite></span></a> ，以获取有关Oracle RAC和Oracle Clusterware特有的后台进程的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT1254"></a><div class="props_rev_3"><a id="GUID-B5CA9579-53DB-442C-A85F-F21FD334833A" name="GUID-B5CA9579-53DB-442C-A85F-F21FD334833A"></a><h5 id="CNCPT-GUID-B5CA9579-53DB-442C-A85F-F21FD334833A" class="sect5">过程监控过程（PMON）组</h5>
                     <div>
                        <p><span class="bold">PMON组</span>包括PMON，清理主进程（CLMN）和清理助手进程（CL <span class="italic">nn</span> ）。这些流程负责监视和清理其他流程。
                        </p>
                        <p>PMON组监督缓冲区缓存的清理以及客户端进程使用的资源的释放。例如，PMON组负责重置活动事务表的状态，释放不再需要的锁，并从活动进程列表中删除已终止进程的进程ID。</p>
                        <p>数据库必须确保释放已终止进程所拥有的资源，以便其他进程可以使用它们。否则，进程可能最终被阻塞或陷入争用。</p>
                     </div>
                     <div class="sect5"><a id="GUID-68866F5E-5671-4778-8079-83056F58C53B" name="GUID-68866F5E-5671-4778-8079-83056F58C53B"></a><h6 id="CNCPT-GUID-68866F5E-5671-4778-8079-83056F58C53B" class="sect6">过程监控过程（PMON）</h6>
                        <p><span class="bold">进程监视器（PMON）</span>检测其他后台进程的终止。如果服务器或调度程序进程异常终止，则PMON组负责执行进程恢复。进程终止可能有多种原因，包括操作系统终止命令或<code class="codeph">ALTER SYSTEM KILL SESSION</code>语句。
                        </p>
                     </div>
                     <div class="sect5"><a id="GUID-91C24E10-0B28-4415-A53F-3FA4B4373DB1" name="GUID-91C24E10-0B28-4415-A53F-3FA4B4373DB1"></a><h6 id="CNCPT-GUID-91C24E10-0B28-4415-A53F-3FA4B4373DB1" class="sect6">清理主流程（CLMN）</h6>
                        <div>
                           <p>PMON将清理工作委托给清理主进程（CLMN）。检测异常终止的任务仍然是PMON。</p>
                           <p>CLMN定期执行已终止进程，已终止会话，事务，网络连接，空闲会话，分离事务以及已超出其空闲超时的已分离网络连接的清除。</p>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-A6CB6578-5661-4B1E-97ED-4C44D41CA0DB" name="GUID-A6CB6578-5661-4B1E-97ED-4C44D41CA0DB"></a><h6 id="CNCPT-GUID-A6CB6578-5661-4B1E-97ED-4C44D41CA0DB" class="sect6">清理助手进程（CLnn）</h6>
                        <div>
                           <p>CLMN将清理工作委托给CL <span class="italic">nn</span>帮助程序进程。
                           </p>
                           <p>CL <span class="italic">nn</span>进程有助于清除已终止的进程和会话。辅助进程的数量与要完成的清理工作量和当前清理效率成正比。
                           </p>
                           <p>清理过程可能会被阻止，从而阻止其继续清理其他进程。此外，如果多个进程需要清理，那么清理时间可能很长。由于这些原因，Oracle数据库可以并行使用多个辅助进程来执行清理，从而缓解性能下降。</p>
                           <p><code class="codeph">V$CLEANUP_PROCESS</code>和<code class="codeph">V$DEAD_CLEANUP</code>视图包含有关CLMN清理的元数据。<code class="codeph">V$CLEANUP_PROCESS</code>视图为每个清理过程包含一行。例如，如果<code class="codeph">V$CLEANUP_PROCESS.STATE</code>为<code class="codeph">BUSY</code> ，则该进程当前正在进行清理。
                           </p>
                           <div class="infoboxnotealso" id="GUID-A6CB6578-5661-4B1E-97ED-4C44D41CA0DB__GUID-63B36016-580C-4E9D-BFC3-0B1D59D279D9">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../refrn/V-CLEANUP_PROCESS.html#REFRN-GUID-B219D499-E80A-4FE5-8562-21CB7FD2AF69" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">V$CLEANUP_PROCESS</code>更多信息</p>
                           </div>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-9DF16592-8B68-4C68-A46B-48DDF2614705" name="GUID-9DF16592-8B68-4C68-A46B-48DDF2614705"></a><h6 id="CNCPT-GUID-9DF16592-8B68-4C68-A46B-48DDF2614705" class="sect6">数据库资源隔离</h6>
                        <div>
                           <p>如果进程或会话终止，则PMON组将保留的资源释放到数据库。在某些情况下，PMON组可以自动隔离损坏的，不可恢复的资源，以便不立即强制终止数据库实例。</p>
                           <p>PMON组继续对持有隔离资源的进程或会话执行尽可能多的清理。<code class="codeph">V$QUARANTINE</code>视图包含元数据，例如资源类型，消耗的内存量，导致隔离的Oracle错误等。
                           </p>
                           <div class="infoboxnotealso" id="GUID-9DF16592-8B68-4C68-A46B-48DDF2614705__GUID-CE18EDDD-2696-4428-8D7A-CD8554386D7B">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../refrn/V-QUARANTINE.html#REFRN-GUID-2686217E-C55A-4E10-8C1F-2B3E00D8FBCA" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">V$QUARANTINE</code>更多信息</p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-CFD15DE0-4CB6-4D22-BDA3-5EA48C9DC6A2" name="GUID-CFD15DE0-4CB6-4D22-BDA3-5EA48C9DC6A2"></a><h5 id="CNCPT-GUID-CFD15DE0-4CB6-4D22-BDA3-5EA48C9DC6A2" class="sect5">流程管理器（PMAN）</h5>
                     <div>
                        <p><span class="bold">流程管理器（PMAN）</span>监督多个后台进程，包括共享服务器，池化服务器和作业队列进程。
                        </p>
                        <p>PMAN监视，生成并停止以下类型的进程：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>调度程序和共享服务器进程</p>
                           </li>
                           <li>
                              <p>数据库驻留连接池的连接代理和池化服务器进程</p>
                           </li>
                           <li>
                              <p>作业队列进程</p>
                           </li>
                           <li>
                              <p>可重启的后台进程</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT89329"></a><div class="props_rev_3"><a id="GUID-9641E79F-7A45-4AB6-9A89-BF7D4C25269A" name="GUID-9641E79F-7A45-4AB6-9A89-BF7D4C25269A"></a><h5 id="CNCPT-GUID-9641E79F-7A45-4AB6-9A89-BF7D4C25269A" class="sect5">监听者注册流程（LREG）</h5>
                     <div>
                        <p><strong class="term">监听器注册过程（LREG）</strong>使用Oracle Net Listener注册有关数据库实例和调度程序进程的信息。
                        </p>
                        <p>实例启动时，LREG轮询侦听器以确定它是否正在运行。如果监听器正在运行，则LREG将相关参数传递给它。如果它没有运行，则LREG会定期尝试联系它。</p>
                        <div class="infoboxnote" id="GUID-9641E79F-7A45-4AB6-9A89-BF7D4C25269A__GUID-A004EB19-9A80-44F6-9146-8F0397915DA1">
                           <p class="notep1">注意：</p>
                           <p>在<span>Oracle Database 12c</span>之前的版本中，PMON执行了侦听器注册。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-9641E79F-7A45-4AB6-9A89-BF7D4C25269A__GUID-F38340BA-1B48-4B14-AE30-6C23D1F0F419">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="application-and-networking-architecture.html#GUID-D6E2465E-E8E6-4B95-95D3-B9581E264ED1" title="Oracle Net Listener（侦听器）是一个服务器端进程，它侦听传入的客户端连接请求并管理数据库的流量。当数据库实例启动时，以及在其生命周期的不同时间，实例联系侦听器并建立与此实例的通信路径。">Oracle Net Listener</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CNCPT1253"></a><div class="props_rev_3"><a id="GUID-21393D94-CA2D-4551-BD20-28BEFDC98631" name="GUID-21393D94-CA2D-4551-BD20-28BEFDC98631"></a><h5 id="CNCPT-GUID-21393D94-CA2D-4551-BD20-28BEFDC98631" class="sect5">系统监控过程（SMON）</h5>
                     <div>
                        <p><span class="bold">系统监视器进程（SMON）</span>负责各种系统级清理任务。
                        </p>
                        <p>分配给SMON的职责包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>必要时，在实例启动时执行实例恢复。在Oracle RAC数据库中，一个数据库实例的SMON进程可以为失败的实例执行实例恢复。</p>
                           </li>
                           <li>
                              <p>由于文件读取或表空间脱机错误，恢复在实例恢复期间跳过的已终止事务。当表空间或文件重新联机时，SMON将恢复事务。</p>
                           </li>
                           <li>
                              <p>清理未使用的临时段。例如，Oracle Database在创建索引时分配扩展区。如果操作失败，则SMON清理临时空间。</p>
                           </li>
                           <li>
                              <p>在字典管理的表空间中合并连续的可用扩展区。</p>
                           </li>
                        </ul>
                        <p>SMON定期检查是否需要它。如果其他进程检测到需要，则可以调用SMON。</p>
                     </div>
                  </div><a id="CNCPT1250"></a><div class="props_rev_3"><a id="GUID-DC9CBDED-3978-450A-9D7A-0A94CE8FF233" name="GUID-DC9CBDED-3978-450A-9D7A-0A94CE8FF233"></a><h5 id="CNCPT-GUID-DC9CBDED-3978-450A-9D7A-0A94CE8FF233" class="sect5">数据库编写过程（DBW）</h5>
                     <div>
                        <p><span class="bold">数据库写程序进程（DBW）</span>将数据库缓冲区的内容写入数据文件。DBW进程将数据库缓冲区高速缓存中的修改缓冲区写入磁盘。
                        </p>
                        <p>虽然一个数据库写程序进程（DBW0）适用于大多数系统，但您可以配置其他进程-DBW1到DBW9，DBWa到DBWz以及BW36到BW99-以在系统大量修改数据时提高写入性能。这些额外的DBW进程在单处理器系统上没有用。</p>
                        <p>DBW进程在以下条件下将脏缓冲区写入磁盘：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当服务器进程在扫描阈值数量的缓冲区后找不到干净的可重用缓冲区时，它会向DBW发送写入信号。在执行其他处理时，DBW会尽可能异步地将脏缓冲区写入磁盘。</p>
                           </li>
                           <li>
                              <p>DBW定期写入缓冲区以推进<a href="glossary.html#GUID-95DBDA37-4C57-444F-B660-D52B4A99D919"><span class="xrefglossterm">检查点</span></a> ，该<a href="glossary.html#GUID-95DBDA37-4C57-444F-B660-D52B4A99D919"><span class="xrefglossterm">检查点</span></a>是<a href="glossary.html#GUID-68F9BFC2-703C-48FF-BE8C-236FE3BC8977"><span class="xrefglossterm">重做线程中</span></a>从实例恢复开始的位置。检查点的日志位置由缓冲区高速缓存中最旧的脏缓冲区确定。
                              </p>
                           </li>
                        </ul>
                        <p>在许多情况下，DBW写入的块分散在整个磁盘中。因此，写入往往比LGWR执行的顺序写入慢。 DBW在可能的情况下执行多块写入以提高效率。以多块写入方式写入的块数因操作系统而异。</p>
                        <div class="infoboxnotealso" id="GUID-DC9CBDED-3978-450A-9D7A-0A94CE8FF233__GUID-7ED63A79-FD5D-4927-BE35-926FF8F50213">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="memory-architecture.html#GUID-4FF66585-E469-4631-9225-29D75594CD14" title="数据库缓冲区高速缓存（也称为缓冲区高速缓存）是存储从数据文件读取的数据块副本的存储区。">数据库缓冲区缓存</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-database-instance.html#GUID-A6959126-0ECF-40A2-880D-D74A1BFB5BC4" title="检查点通常是一致的数据库关闭，实例恢复和Oracle数据库操作的关键机制。">检查点概述</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/instance-tuning-using-performance-views.html#GUID-01C9C892-4C0B-4524-82B3-146D1C191BDD" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a> ，提供有关配置，监视和调优DBW的建议</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT1251"></a><div class="props_rev_3"><a id="GUID-B6BE2C31-1543-4504-9763-6FFBBF99DC85" name="GUID-B6BE2C31-1543-4504-9763-6FFBBF99DC85"></a><h5 id="CNCPT-GUID-B6BE2C31-1543-4504-9763-6FFBBF99DC85" class="sect5">日志编写过程（LGWR）</h5>
                     <div>
                        <p><span class="bold">日志写入器进程（LGWR）</span>管理联机重做日志缓冲区。
                        </p>
                        <p>LGWR将缓冲区的一部分写入联机重做日志。通过分离修改数据库缓冲区，执行脏缓冲区到磁盘的分散写入以及执行重做到磁盘的快速顺序写入的任务，数据库可以提高性能。</p>
                        <p>在下列情况下，LGWR会写入自上次写入以来已复制到缓冲区中的所有重做条目：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用户提交事务。</p>
                           </li>
                           <li>
                              <p>发生在线重做<a href="glossary.html#GUID-1A479613-DF95-469C-9C3B-D7DBA54F77F7"><span class="xrefglossterm">日志切换</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>自LGWR上次写作以来已过去三秒钟。</p>
                           </li>
                           <li>
                              <p>重做日志缓冲区已满三分之一或包含1 MB缓冲数据。</p>
                           </li>
                           <li>
                              <p>DBW必须将修改后的缓冲区写入磁盘。</p>
                              <p>在DBW可以写入脏缓冲区之前，数据库必须向磁盘写入与缓冲区更改相关联的重做记录（ <a href="glossary.html#GUID-A20D57FC-78FF-4F09-868E-849806568EE7"><span class="xrefglossterm">预写协议</span></a> ）。如果DBW发现某些重做记录尚未写入，则表示LGWR将记录写入磁盘，并在将数据缓冲区写入磁盘之前等待LGWR完成。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B6BE2C31-1543-4504-9763-6FFBBF99DC85__GUID-EFD78033-2AB6-4018-9824-521DA6930038">
                           <p class="notep1">也可以看看：</p>
                           <p> <span class="q">“ <a href="transactions.html#GUID-C3FE1082-94AA-4BE8-98F2-480205D99DCA" title="提交结束当前事务，并在事务中执行永久性所有更改。">交易提示</a> ”</span></p>
                        </div>
                     </div><a id="CNCPT89084"></a><div class="props_rev_3"><a id="GUID-D85E9B89-D85C-40A2-9383-0AB068BAC228" name="GUID-D85E9B89-D85C-40A2-9383-0AB068BAC228"></a><h6 id="CNCPT-GUID-D85E9B89-D85C-40A2-9383-0AB068BAC228" class="sect6">LGWR和Commits</h6>
                        <div>
                           <p>Oracle数据库使用快速提交机制来提高已提交事务的性能。</p>
                           <p>当用户发出<code class="codeph">COMMIT</code>语句时，会为事务分配<span class="bold">系统更改号（SCN）</span> 。LGWR将提交记录放入重做日志缓冲区并立即将其写入磁盘，以及提交SCN和事务的重做条目。
                           </p>
                           <p>重做日志缓冲区是循环的。当LGWR将重做条目从重做日志缓冲区写入联机重做日志文件时，服务器进程可以通过重做日志缓冲区中已写入磁盘的条目复制新条目。LGWR通常写得足够快，以确保缓冲区中的空间始终可用于新条目，即使访问在线重做日志很重。</p>
                           <p>包含事务提交记录的重做条目的原子写入是确定事务已提交的单个事件。虽然数据缓冲区尚未写入磁盘，但Oracle数据库会向提交事务返回成功代码。对数据块的相应更改将推迟，直到DBW将它们写入数据文件有效。</p>
                           <div class="infoboxnote" id="GUID-D85E9B89-D85C-40A2-9383-0AB068BAC228__GUID-B59CF13D-8D48-4640-80E7-93A898847ACE">
                              <p class="notep1">注意：</p>
                              <p>LGWR可以在事务提交之前将重做日志条目写入磁盘。仅当事务稍后提交时，受重做条目保护的更改才会成为永久更改。</p>
                           </div>
                           <p>当活动很高时，LGWR可以使用组提交。例如，用户提交，导致LGWR将事务的重做条目写入磁盘。在此写入期间，其他用户提交。在上一次写入完成之前，LGWR无法写入磁盘来提交这些事务。完成后，LGWR可以在一次操作中写入等待事务（尚未提交）的重做条目列表。通过这种方式，数据库可最大限度地减少磁盘I / O并最大限度地提高性能。如果提交请求以高速率继续，那么LGWR的每次写入都可以包含多个提交记录。</p>
                        </div>
                     </div><a id="CNCPT89085"></a><div class="props_rev_3"><a id="GUID-C0BF938F-84AB-4917-A1B3-115A2983C62C" name="GUID-C0BF938F-84AB-4917-A1B3-115A2983C62C"></a><h6 id="CNCPT-GUID-C0BF938F-84AB-4917-A1B3-115A2983C62C" class="sect6">LGWR和无法访问的文件</h6>
                        <div>
                           <p>LGWR同步写入活动镜像的联机重做日志文件组。</p>
                           <p>如果日志文件不可访问，则LGWR继续写入组中的其他文件，并将错误写入LGWR跟踪文件和<a href="glossary.html#GUID-ACC7727F-41AE-47B1-AADB-2585EE828792"><span class="xrefglossterm">警报日志</span></a> 。如果组中的所有文件都已损坏，或者该组因未归档而不可用，则LGWR无法继续运行。
                           </p>
                           <div class="infoboxnotealso" id="GUID-C0BF938F-84AB-4917-A1B3-115A2983C62C__GUID-022BB8CD-6F65-4549-BAC1-8679359C470C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="physical-storage-structures.html#GUID-09A16A4D-A618-4339-826E-E398A6B0FBF1" title="数据库实例的联机重做日志称为重做线程。">Oracle数据库如何写入联机重做日志</a> ”</span>和<span class="q">“ <a href="memory-architecture.html#GUID-C2AD1BF6-A5AE-42E9-9677-0AA08126864B" title="重做日志缓冲区是SGA中的循环缓冲区，用于存储描述对数据库所做更改的重做条目。">重做日志缓冲区</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../tgdba/tuning-database-buffer-cache.html#TGDBA553" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a> ，了解有关如何监视和调整LGWR性能的信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div><a id="CNCPT89086"></a><a id="CNCPT1252"></a><div class="props_rev_3"><a id="GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372" name="GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372"></a><h5 id="CNCPT-GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372" class="sect5">检查点过程（CKPT）</h5>
                     <div>
                        <p><span class="bold">检查点进程（CKPT）</span>使用检查点信息更新控制文件和数据文件头，并向DBW发送信号以将块写入磁盘。检查点信息包括检查点位置，SCN和联机重做日志中的位置以开始恢复。
                        </p>
                        <p><a href="process-architecture.html#GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372__BABEACIA">如图15-4</a>所示，CKPT不会将数据块写入数据文件，也不会将重做块写入联机重做日志文件。
                        </p>
                        <div class="figure" id="GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372__BABEACIA">
                           <p class="titleinfigure">图15-4检查点过程</p><img src="img/cncpt228.gif" alt="下面是图15-4的描述" title="下面是图15-4的描述" longdesc="img_text/cncpt228.html"><br><a href="img_text/cncpt228.html">“图15-4检查点过程”的描述</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnotealso" id="GUID-D3174B3E-BCCA-473F-961E-84A36FD5C372__GUID-81902423-E0A8-45AD-8D54-DE4B608B60D7">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="oracle-database-instance.html#GUID-A6959126-0ECF-40A2-880D-D74A1BFB5BC4" title="检查点通常是一致的数据库关闭，实例恢复和Oracle数据库操作的关键机制。">检查点概述</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CNCPT89087"></a><div class="props_rev_3"><a id="GUID-D175CA2B-20FE-4D5D-9A89-5CAA279479EC" name="GUID-D175CA2B-20FE-4D5D-9A89-5CAA279479EC"></a><h5 id="CNCPT-GUID-D175CA2B-20FE-4D5D-9A89-5CAA279479EC" class="sect5">可管理性监控流程（MMON和MMNL）</h5>
                     <div>
                        <p><span class="bold">可管理性监视器进程（MMON）</span>执行与<span class="bold">自动工作负载存储库（AWR）</span>相关的许多任务。
                        </p>
                        <p>例如，MMON在<span class="bold">度量标准</span>违反其阈值，拍摄快照和捕获最近修改的SQL对象的统计值时写入。
                        </p>
                        <p>可管理性监视器精简过程（MMNL）将统计信息从SGA中的活动会话历史记录（ASH）缓冲区写入磁盘。当ASH缓冲区已满时，MMNL会写入磁盘。</p>
                        <div class="infoboxnotealso" id="GUID-D175CA2B-20FE-4D5D-9A89-5CAA279479EC__GUID-46AA81F8-FAB6-4264-9918-9281F38748F1">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="concepts-for-database-administrators.html#GUID-1C0B57E9-1D1D-4C48-8A3D-5F56160435ED" title="自动工作负载存储库（AWR）是历史性能数据的存储库，其中包括系统，会话，单个SQL语句，段和服务的累积统计信息。">自动工作负载存储库（AWR）</a> ”</span>和<span class="q">“ <a href="concepts-for-database-administrators.html#GUID-12C38C77-BD4A-4D0D-8A67-FF7BF2167C77" title="活动会话历史记录（ASH）每秒对活动数据库会话进行一次采样，将数据写入内存和持久存储。ASH是数据库自我管理框架的组成部分，可用于诊断性能问题。">活动会话历史记录（ASH）</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CNCPT1255"></a><div class="props_rev_3"><a id="GUID-9FF900D1-7DB8-4D41-8D34-8E99AF650CEC" name="GUID-9FF900D1-7DB8-4D41-8D34-8E99AF650CEC"></a><h5 id="CNCPT-GUID-9FF900D1-7DB8-4D41-8D34-8E99AF650CEC" class="sect5">回收过程（RECO）</h5>
                     <div>
                        <p>在分布式数据库中， <span class="bold">恢复程序进程（RECO）</span>自动解决分布式事务中的故障。
                        </p>
                        <p>节点的RECO进程自动连接到涉及不确定分布式事务的其他数据库。当RECO重新建立数据库之间的连接时，它会自动解析所有不确定的事务，从每个数据库的挂起事务表中删除与已解析事务对应的任何行。</p>
                        <div class="infoboxnotealso" id="GUID-9FF900D1-7DB8-4D41-8D34-8E99AF650CEC__GUID-1D2703C0-F49C-4015-97D1-8444676E49D1">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../admin/managing-distributed-transactions.html#ADMIN12287" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关分布式系统中事务恢复的更多信息</p>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT9841"></a><div class="props_rev_3"><a id="GUID-028BA4D6-F9BC-4F36-AD98-0FE3A191ED02" name="GUID-028BA4D6-F9BC-4F36-AD98-0FE3A191ED02"></a><h4 id="CNCPT-GUID-028BA4D6-F9BC-4F36-AD98-0FE3A191ED02" class="sect4">可选的后台进程</h4>
                  <div>
                     <p>可选的后台进程是未定义为强制的任何后台进程。</p>
                     <p>大多数可选后台进程特定于任务或功能。例如，支持Oracle ASM的后台进程仅在启用此功能时可用。</p>
                     <p>本节介绍一些常见的可选过程：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="process-architecture.html#GUID-7D7CB783-4CE9-4005-8D1D-B3FED61BF887" title="发生重做日志切换后，归档进程（ARCn）将联机重做日志文件复制到脱机存储。">Archiver Processes（ARCn）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9" title="队列进程通常以批处理模式运行用户作业。作业是计划运行一次或多次的用户定义任务。">作业队列进程（CJQ0和Jnnn）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-20C38AD6-B413-4D04-A21C-A7B81280A153" title="闪回数据存档过程（FBDA）将历史记录的跟踪表行存档到闪回数据存档中。">闪回数据存档过程（FBDA）</a></p>
                        </li>
                        <li>
                           <p><a href="process-architecture.html#GUID-CBC4114F-88A1-442C-9327-7D36460E9EFC" title="SMCO流程协调各种与空间管理相关的任务的执行。">空间管理协调员进程（SMCO）</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-028BA4D6-F9BC-4F36-AD98-0FE3A191ED02__GUID-163A469B-8BE3-4294-8FC5-DFDDCDF270AB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="topics-for-database-administrators-and-developers.html#GUID-7CCB29F5-6B3B-4D15-B428-D10A6BFB35D5" title="高级队列（AQ）是一个与Oracle数据库集成的功能强大且功能丰富的消息队列系统。">Oracle数据库高级排队（AQ）</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database Reference，</cite></span></a>用于描述AQ和Oracle ASM特有的后台进程</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT1257"></a><div class="props_rev_3"><a id="GUID-7D7CB783-4CE9-4005-8D1D-B3FED61BF887" name="GUID-7D7CB783-4CE9-4005-8D1D-B3FED61BF887"></a><h5 id="CNCPT-GUID-7D7CB783-4CE9-4005-8D1D-B3FED61BF887" class="sect5">Archiver进程（ARC <span class="italic">n</span> ）</h5>
                     <div>
                        <p>发生重做日志切换后， <strong class="term">归档进程（ARCn）将</strong>联机重做日志文件复制到脱机存储。
                        </p>
                        <p>这些进程还可以收集事务重做数据并将其传输到<a href="glossary.html#GUID-728D4956-0F56-4D39-A63A-2E3FF5CCEDE4"><span class="xrefglossterm">备用数据库</span></a>目标。<span class="italic">仅</span>当数据库处于<a href="glossary.html#GUID-1AA9F015-FD15-4A08-BE06-04F0A6797782"><span class="xrefglossterm">ARCHIVELOG模式</span></a>且启用了自动存档时， <span class="italic">才会</span>存在ARC <span class="italic">n</span>进程。
                        </p>
                        <div class="infoboxnotealso" id="GUID-7D7CB783-4CE9-4005-8D1D-B3FED61BF887__GUID-1D4CA947-553A-4B0F-90E8-C0A3A8E6359F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="physical-storage-structures.html#GUID-4E3F6CAA-453F-4518-83B9-B3A3CCF11B2E" title="归档重做日志文件是联机重做日志组的已填充成员的副本。该文件不被视为数据库的一部分，而是由数据库创建并写入用户指定位置的联机重做日志文件的脱机副本。">归档重做日志文件</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-archived-redo-log-files.html#ADMIN11337" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何调整归档程序进程数</p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/tuning-database-buffer-cache.html#TGDBA553" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解如何调整归档程序性能</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT1256"></a><div class="props_rev_3"><a id="GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9" name="GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9"></a><h5 id="CNCPT-GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9" class="sect5">作业队列进程（CJQ0和Jnnn）</h5>
                     <div>
                        <p><span class="bold">队列进程</span>通常以批处理模式运行用户作业。作业是计划运行一次或多次的用户定义任务。
                        </p>
                        <p>例如，您可以使用作业队列在后台安排长时间运行的更新。给定开始日期和时间间隔，作业队列进程尝试在下一次出现间隔时运行作业。</p>
                        <p>Oracle数据库动态管理作业队列进程，从而使作业队列客户端在需要时可以使用更多作业队列进程。数据库释放新进程闲置时使用的资源。</p>
                        <p>动态作业队列进程可以以给定间隔同时运行许多作业。事件顺序如下：</p>
                        <ol>
                           <li>
                              <p>Oracle Scheduler根据需要自动启动和停止作业协调程序进程（CJQ0）。协调器进程定期选择需要从系统<code class="codeph">JOB$</code>表运行的<code class="codeph">JOB$</code> 。选择的新工作按时间排序。
                              </p>
                           </li>
                           <li>
                              <p>协调器进程动态生成作业队列从属进程（Jnnn）以运行作业。</p>
                           </li>
                           <li>
                              <p>作业队列进程运行CJQ0进程选择执行的作业之一。每个作业队列进程一次运行一个作业以完成。</p>
                           </li>
                           <li>
                              <p>在该过程完成单个作业的执行后，它会轮询更多作业。如果没有计划执行任务，则它进入睡眠状态，从该状态定期唤醒并轮询更多作业。如果进程未找到任何新作业，则会在预设的时间间隔后终止。</p>
                           </li>
                        </ol>
                        <p>初始化参数<code class="codeph">JOB_QUEUE_PROCESSES</code>表示可以在实例上并发运行的最大作业队列进程数。但是，客户端不应假定所有作业队列进程都可用于作业执行。
                        </p>
                        <div class="infoboxnote" id="GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9__GUID-0C5F1AD9-2AF4-43DA-BE02-8D79873257F8">
                           <p class="notep1">注意：</p>
                           <p>如果初始化参数<code class="codeph">JOB_QUEUE_PROCESSES</code>设置为0，则不会启动协调程序进程。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-C67612E5-CA83-4AE0-B56D-05993A8B38F9__GUID-F3F04009-84B2-4762-A6D5-A45E69AA7354">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="concepts-for-database-administrators.html#GUID-077CBA84-5099-4550-AA11-250B301B609A" title="Oracle Scheduler（调度程序）使数据库管理员和应用程序开发人员能够控制在数据库环境中执行各种任务的时间和位置。">Oracle Scheduler</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/scheduling-jobs-with-oracle-scheduler.html#ADMIN034" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解Oracle Scheduler作业</p>
                              </li>
                              <li>
                                 <p><a href="../adque/aq-basic-components.html#ADQUE2530" target="_blank"><span><cite>Oracle数据库高级队列用户指南</cite></span></a> ，了解AQ后台进程</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT89089"></a><div class="props_rev_3"><a id="GUID-20C38AD6-B413-4D04-A21C-A7B81280A153" name="GUID-20C38AD6-B413-4D04-A21C-A7B81280A153"></a><h5 id="CNCPT-GUID-20C38AD6-B413-4D04-A21C-A7B81280A153" class="sect5">闪回数据存档过程（FBDA）</h5>
                     <div>
                        <p><strong class="term">闪回数据存档过程（FBDA）将</strong>历史记录的跟踪表行存档到闪回数据存档中。
                        </p>
                        <p>当跟踪表上包含DML的事务提交时，此进程会将更改的行的前映像存储到闪回数据存档中。它还保留当前行的元数据。</p>
                        <p>FBDA自动管理闪回数据存档以获取空间，组织和保留。此外，该流程还会跟踪已跟踪事务的归档发生的时间。</p>
                     </div>
                  </div><a id="CNCPT89090"></a><div class="props_rev_3"><a id="GUID-CBC4114F-88A1-442C-9327-7D36460E9EFC" name="GUID-CBC4114F-88A1-442C-9327-7D36460E9EFC"></a><h5 id="CNCPT-GUID-CBC4114F-88A1-442C-9327-7D36460E9EFC" class="sect5">空间管理协调员进程（SMCO）</h5>
                     <div>
                        <p>SMCO流程协调各种与空间管理相关的任务的执行。</p>
                        <p>典型任务包括主动空间分配和空间回收。SMCO动态生成从属进程（W <span class="italic">nnn</span> ）以实现该任务。
                        </p>
                        <div class="infoboxnotealso" id="GUID-CBC4114F-88A1-442C-9327-7D36460E9EFC__GUID-DFCFE327-4BB4-4ADE-A0F6-CFB4FA75E8F0">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../adfns/flashback.html#ADFNS01011" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解闪回数据存档和时态历史记录功能</p>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT9847"></a><div class="props_rev_3"><a id="GUID-BD43E5D1-82C1-4997-8461-7CBBAFC7ED49" name="GUID-BD43E5D1-82C1-4997-8461-7CBBAFC7ED49"></a><h4 id="CNCPT-GUID-BD43E5D1-82C1-4997-8461-7CBBAFC7ED49" class="sect4">奴隶进程</h4>
                  <div>
                     <p>从属进程是代表其他进程执行工作的后台进程。</p>
                     <p>本节介绍Oracle数据库使用的一些从属进程。</p>
                     <div class="infoboxnotealso" id="GUID-BD43E5D1-82C1-4997-8461-7CBBAFC7ED49__GUID-FC301A1B-EF2D-4BA0-A52F-61F6CB977146">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle数据库参考，</cite></span></a>用于描述Oracle数据库从属进程</p>
                     </div>
                  </div><a id="CNCPT9848"></a><div class="props_rev_3"><a id="GUID-1C0B86EF-CA59-4146-BBFE-17B40CC9B02A" name="GUID-1C0B86EF-CA59-4146-BBFE-17B40CC9B02A"></a><h5 id="CNCPT-GUID-1C0B86EF-CA59-4146-BBFE-17B40CC9B02A" class="sect5">I / O从属进程</h5>
                     <div>
                        <p>I / O从属进程（Innn）为不支持它的系统和设备模拟异步I / O.</p>
                        <p>在异步I / O中，没有传输的时序要求，使得其他进程在传输完成之前启动。</p>
                        <p>例如，假设应用程序将1000个块写入不支持异步I / O的操作系统上的磁盘。每次写入顺序发生，并等待写入成功的确认。使用异步磁盘，应用程序可以批量编写块并执行其他工作，同时等待操作系统写入所有块的响应。</p>
                        <p>为了模拟异步I / O，一个进程监视多个从进程。调用程序进程将工作分配给每个从属进程，这些进程等待每个写入完成并在完成后向调用者报告。在真正的异步I / O中，操作系统等待I / O完成并报告回过程，而在模拟异步I / O中，从站等待并向调用者报告。</p>
                        <p>数据库支持不同类型的I / O从属，包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Recovery Manager（RMAN）的I / O从站</p>
                              <p>使用RMAN备份或还原数据时，可以将I / O从站用于磁盘和磁带设备。</p>
                           </li>
                           <li>
                              <p>数据库编写器奴隶</p>
                              <p>如果使用多个数据库写程序进程是不切实际的，例如当计算机有一个CPU时，则数据库可以通过多个从属进程分配I / O.DBW是扫描缓冲区高速缓存LRU列表以寻找要写入磁盘的块的唯一进程。但是，I / O从站执行这些块的I / O.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-1C0B86EF-CA59-4146-BBFE-17B40CC9B02A__GUID-1B8F63E1-4DA8-4C2A-8AF0-C3F0C33D5F75">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../bradv/tuning-rman-performance.html#BRADV90069" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解有关备份和还原操作的I / O从站的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/instance-tuning-using-performance-views.html#GUID-01C9C892-4C0B-4524-82B3-146D1C191BDD" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解有关数据库编写器从属的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT94676"></a><a id="CNCPT1475"></a><div class="props_rev_3"><a id="GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42" name="GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42"></a><h5 id="CNCPT-GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42" class="sect5">并行执行（PX）服务器进程</h5>
                     <div>
                        <p>在<span class="bold">并行执行中</span> ，多个进程同时协同工作以运行单个SQL语句。
                        </p>
                        <p>通过在多个进程之间划分工作，Oracle数据库可以更快地运行该语句。例如，四个流程在一年内处理四个不同的季度，而不是一个处理所有四个季度的流程。</p>
                        <p>并行执行与<a href="glossary.html#GUID-02F8D8C0-F2BC-44CF-8383-9803180F76F7"><span class="xrefglossterm">串行</span></a>执行形成对比，其中单个服务器进程为顺序执行SQL语句执行所有必要的处理。例如，要执行<a href="glossary.html#GUID-BF9B54D6-892E-4C3B-8536-38958ACC069D"><span class="xrefglossterm">全表扫描（</span></a>例如<code class="codeph">SELECT * FROM employees</code> ，一个服务器进程将执行所有工作， <a href="process-architecture.html#GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42__BABDHFIC">如图15-5</a>所示。
                        </p>
                        <div class="figure" id="GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42__BABDHFIC">
                           <p class="titleinfigure">图15-5串行全表扫描</p><img src="img/cncpt016.gif" alt="下面是图15-5的描述" title="下面是图15-5的描述" longdesc="img_text/cncpt016.html"><br><a href="img_text/cncpt016.html">“图15-5串行全表扫描”的说明</a></div>
                        <!-- class="figure" -->
                        <p>并行执行减少了大型数据库（如数据仓库）上数据密集型操作的响应时间。对称多处理（SMP）和集群系统从并行执行中获得最大的性能优势，因为语句处理可以在多个CPU之间分配。并行执行还可以使某些类型的<a href="glossary.html#GUID-709E943F-FF0E-4AA6-979A-C4CB2A7B0C29"><span class="xrefglossterm">OLTP</span></a>和混合系统受益。
                        </p>
                        <p>在Oracle RAC系统中，特定服务的服务放置控制并行执行。具体而言，并行进程在配置服务的节点上运行。默认情况下，Oracle数据库仅在提供用于连接数据库的服务的实例上运行并行进程。这不会影响其他并行操作，例如并行恢复或<code class="codeph">GV$</code>查询的处理。
                        </p>
                        <div class="infoboxnotealso" id="GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42__GUID-9D719B42-877E-4F24-8760-87C800AD687E">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../vldbg/using-parallel.html#VLDBG010" target="_blank"><span><cite>Oracle Database VLDB和分区指南</cite></span></a>了解有关并行执行的更多信息</p>
                              </li>
                              <li>
                                 <p>有关在Oracle RAC环境中并行执行的注意事项<a href="../racad/workload-management-with-dynamic-database-services.html#RACAD7124" target="_blank"><span><cite>，请参阅“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="CNCPT220"></a><div class="props_rev_3"><a id="GUID-6487F7FA-2299-4428-8588-7937BD8675D3" name="GUID-6487F7FA-2299-4428-8588-7937BD8675D3"></a><h6 id="CNCPT-GUID-6487F7FA-2299-4428-8588-7937BD8675D3" class="sect6">查询协调员</h6>
                        <div>
                           <p>在并行执行中，服务器进程充当<span class="bold">查询协调器</span> （也称为<span class="italic">并行执行协调器</span> ）。
                           </p>
                           <p>查询协调器负责以下事项：</p>
                           <ol>
                              <li>
                                 <p>解析查询</p>
                              </li>
                              <li>
                                 <p>分配和控制并行执行服务器进程</p>
                              </li>
                              <li>
                                 <p>将输出发送给用户</p>
                              </li>
                           </ol>
                           <p>给定<a href="glossary.html#GUID-78BCF1CD-1865-4AEB-8F14-AFA4FF1981BF"><span class="xrefglossterm">查询的查询计划</span></a> ，协调器将SQL查询中的每个<a href="glossary.html#GUID-4BC5B7D2-6483-4742-AD66-E0B7C39047E3"><span class="xrefglossterm">运算</span></a>符分解为并行块，按查询中指定的顺序运行它们，并集成执行运算符的并行执行服务器生成的部分结果。
                           </p>
                           <p>分配给单个操作的并行执行服务器的数量是操作<a href="glossary.html#GUID-C5F5E0B5-C13F-42F3-B8C4-ADCB4290C980"><span class="xrefglossterm">的并行度</span></a> 。同一SQL语句中的多个操作都具有相同的并行度。
                           </p>
                        </div>
                     </div><a id="CNCPT94677"></a><a id="CNCPT9850"></a><div class="props_rev_3"><a id="GUID-61E6A6E3-3477-44F5-9E8D-12F607BF2D83" name="GUID-61E6A6E3-3477-44F5-9E8D-12F607BF2D83"></a><h6 id="CNCPT-GUID-61E6A6E3-3477-44F5-9E8D-12F607BF2D83" class="sect6">生产者和消费者</h6>
                        <div>
                           <p>并行执行服务器分为生产者和消费者。生产者负责处理他们的数据，然后将其分发给需要它的消费者。</p>
                           <p>数据库可以使用各种技术执行分发。两种常见技术是广播和散列。在广播中，每个生产者将行发送给所有消费者。在散列中，数据库计算一组键上的散列函数，并使每个消费者负责散列值的子集。</p>
                           <p><a href="process-architecture.html#GUID-61E6A6E3-3477-44F5-9E8D-12F607BF2D83__BABIDAFF">图15-6</a>表示并行执行以下语句时生产者和使用者之间的相互作用：</p><pre class="pre codeblock"><code>SELECT * FROM employees ORDER BY last_name;</code></pre><p>执行计划实现了<code class="codeph">employees</code>表的完整扫描。扫描之后是一类检索到的行。扫描操作中涉及的所有生产者进程都将行发送到执行排序的相应使用者进程。
                           </p>
                           <div class="figure" id="GUID-61E6A6E3-3477-44F5-9E8D-12F607BF2D83__BABIDAFF">
                              <p class="titleinfigure">图15-6生产者和消费者</p><img src="img/vldbg013.gif" alt="下面是图15-6的描述" title="下面是图15-6的描述" longdesc="img_text/vldbg013.html"><br><a href="img_text/vldbg013.html">“图15-6生产者和消费者”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </div><a id="CNCPT89092"></a><a id="CNCPT94678"></a><div class="props_rev_3"><a id="GUID-DC997182-FB4F-4FD2-ACCD-654E1D623239" name="GUID-DC997182-FB4F-4FD2-ACCD-654E1D623239"></a><h6 id="CNCPT-GUID-DC997182-FB4F-4FD2-ACCD-654E1D623239" class="sect6">颗粒</h6>
                        <div>
                           <p>在并行执行中，表被动态划分为加载单元。每个单元，称为<span class="bold">颗粒</span> ，是访问数据时最小的工作单元。
                           </p>
                           <p>基于块的粒度是由单个并行执行服务器（也称为<span class="italic">PX服务器</span> ）读取的表的一系列数据块，它使用<code class="codeph">P <span class="codeinlineitalic">nnn</span></code>作为名称格式。为了在并行服务器进程之间获得均匀的工作分配，粒度的数量总是远高于请求的DOP。</p>
                           <p><a href="process-architecture.html#GUID-DC997182-FB4F-4FD2-ACCD-654E1D623239__I3086">图15-7</a>显示了<code class="codeph">employees</code>表的并行扫描。
                           </p>
                           <div class="figure" id="GUID-DC997182-FB4F-4FD2-ACCD-654E1D623239__I3086">
                              <p class="titleinfigure">图15-7并行全表扫描</p><img src="img/cncpt017.gif" alt="下面是图15-7的描述" title="下面是图15-7的描述" longdesc="img_text/cncpt017.html"><br><a href="img_text/cncpt017.html">“图15-7并行全表扫描”的描述</a></div>
                           <!-- class="figure" -->
                           <p>数据库在执行时将粒度映射到并行执行服务器。当并行执行服务器完成读取与粒度对应的行时，当粒子保留时，它从查询协调器获得另一个粒度。此操作将继续，直到读取该表为止。执行服务器将结果发送回协调器，协调器将这些部分组装成所需的<a href="glossary.html#GUID-BF9B54D6-892E-4C3B-8536-38958ACC069D"><span class="xrefglossterm">全表扫描</span></a> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-DC997182-FB4F-4FD2-ACCD-654E1D623239__GUID-5C70CA39-DC9A-4D11-B777-5EB7FA125AB6">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../vldbg/using-parallel.html#VLDBG010" target="_blank"><span><cite>Oracle Database VLDB和分区指南</cite></span></a> ，了解如何使用并行执行</p>
                                 </li>
                                 <li>
                                    <p><a href="../dwhsg/refreshing-materialized-views.html#DWHSG8371" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a> ，了解并行性的建议初始化参数</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01135.DBMS_XA.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_XA package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL."></meta>
      <meta name="description" content="The DBMS_XA package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL."></meta>
      <title>DBMS_XA</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_XA package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_WORKLOAD_REPOSITORY.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_XDB.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_WORKLOAD_REPOSITORY.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_XDB.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_XA</li>
            </ol>
            <a id="GUID-2651DDA5-02B7-4432-9843-C07E1F52E904" name="GUID-2651DDA5-02B7-4432-9843-C07E1F52E904"></a><a id="ARPLS209"></a><a id="ARPLS209"></a>
            
            <h2 id="ARPLS-GUID-2651DDA5-02B7-4432-9843-C07E1F52E904" class="sect2"><span class="enumeration_chapter">185</span> DBMS_XA</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_XA</code>包中包含XA / Open接口，供应用程序在PL / SQL中调用XA接口。使用此包，应用程序开发人员可以使用PL / SQL跨SQL * Plus会话或进程切换或共享事务。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_XA.html#GUID-3244BEBB-110C-46DE-86B9-783E9F11C943" title="这些子程序允许PL / SQL应用程序定义全局事务分支ID（XID），并将当前会话与事务分支关联或取消关联。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB" title="此包在SYS下创建。此程序包提供的操作在当前调用用户下执行，而不是在程序包所有者SYS下执行。使用当前用户的权限执行从匿名PL / SQL块调用的任何DBMS_XA子程序。从存储过程调用的任何DBMS_XA子程序都是使用存储过程所有者的权限执行的。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643" title="DBMS_XA包定义了几个可用于指定参数值的常量。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-40814FCC-E43B-411A-A27D-AC63DF20732E" title="根据分布式事务处理的X / Open CAE标准的XA规范，当事务仍与当前会话关联时，可能不会调用XA_PREPARE / COMMIT / ROLLBACK / FORGET。只有在调用XA_END以便没有与当前会话关联的任何事务之后，应用程序才可以调用XA_PREPARE / COMMIT / ROLLBACK / FORGET。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-BAB2807B-7F40-463F-BEA3-0253944BE576" title="DBMS_XA包使用此OBJECT类型和关联的TABLE类型。">数据结构</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XA.html#GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9" title="该表列出了DBMS_XA子程序并简要描述了它们。">DBMS_XA子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-2651DDA5-02B7-4432-9843-C07E1F52E904__GUID-B917CB66-A2CC-4E80-8781-5B219A41647E">
                  <p class="notep1">也可以看看：</p>
                  <p>有关<a href="../adfns/xa.html#ADFNS017" target="_blank">“使用Oracle XA开发应用程序</a> <span class="italic">”</span>的更多信息<a href="../adfns/xa.html#ADFNS017" target="_blank">，请参见“</a> <span class="italic">Oracle数据库高级应用程序开发人员指</span> 
                  </p>
               </div>
            </div><a id="ARPLS69151"></a><a id="ARPLS69151"></a><div class="props_rev_3"><a id="GUID-3244BEBB-110C-46DE-86B9-783E9F11C943" name="GUID-3244BEBB-110C-46DE-86B9-783E9F11C943"></a><h3 id="ARPLS-GUID-3244BEBB-110C-46DE-86B9-783E9F11C943" class="sect3"><span class="enumeration_section">185.1</span> DBMS_XA概述</h3>
               <div>
                  <p>这些子程序允许PL / SQL应用程序定义全局事务分支ID（ <code class="codeph">XID</code> ），并将当前会话与事务分支关联或取消关联。
                  </p>
                  <div class="section">
                     <p>随后，可以通过遵循两阶段提交协议来准备和提交这些事务分支。如果仅涉及一个资源管理器，则还支持单阶段提交协议。</p>
                     <p>还为PL / SQL应用程序提供了接口，以便为可能从当前会话开始的任何新全局事务分支设置超时值。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69152"></a><a id="ARPLS69152"></a><div class="props_rev_3"><a id="GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB" name="GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB"></a><h3 id="ARPLS-GUID-FFF8E2A1-B242-4A29-87EA-C65A5113F4DB" class="sect3"><span class="enumeration_section">185.2</span> DBMS_XA安全模型</h3>
               <div>
                  <p>此包在<code class="codeph">SYS</code>下创建。此程序包提供的操作在当前调用用户下执行，而不是在程序包所有者<code class="codeph">SYS</code>下执行。使用当前用户的权限执行从匿名PL / SQL块调用的任何<code class="codeph">DBMS_XA</code>子程序。从存储过程调用的任何<code class="codeph">DBMS_XA</code>子程序都是使用存储过程所有者的特权执行的。
                  </p>
                  <div class="section">
                     <p><code class="codeph">SYS</code> <code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限。 <code class="codeph">DBA_PENDING_TRANSACTIONS</code>需要谁需要执行用户<code class="codeph">XA_RECOVER</code>子程序。
                     </p>
                     <p>需要操纵其他用户创建的XA事务的用户需要<code class="codeph">FORCE ANY TRANSACTION</code>权限。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69153"></a><a id="ARPLS69154"></a><a id="ARPLS69155"></a><a id="ARPLS69154"></a><a id="ARPLS69155"></a><a id="ARPLS69153"></a><div class="props_rev_3"><a id="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643" name="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643"></a><h3 id="ARPLS-GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643" class="sect3"><span class="enumeration_section">185.3</span> DBMS_XA常量</h3>
               <div>
                  <p><code class="codeph">DBMS_XA</code>包定义了几个可用于指定参数值的常量。
                  </p>
                  <div class="section">
                     <p>该软件包使用<a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE" title="此表描述了DBMS_XA子程序使用的常量。">表185-1中</a>所示的常量用于<a href="DBMS_XA.html#GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" title="此函数将当前会话与xid指定的事务分支相关联。">XA_START函数</a>和<a href="DBMS_XA.html#GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" title="此函数取消当前会话与xid指定的事务分支的关联。">XA_END函数</a>的标志字段。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE">
                     <p class="titleintable">表185-1 XA_START和XA_END函数的标志字段的DBMS_XA常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBA_XA XA_START和XA_END函数的标志字段常量" width="100%" border="1" summary="This table describes constants used by DBMS_XA subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d1125079e552">名称</th>
                              <th align="left" valign="bottom" width="18%" id="d1125079e555">类型</th>
                              <th align="left" valign="bottom" width="25%" id="d1125079e558">值</th>
                              <th align="left" valign="bottom" width="32%" id="d1125079e561">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e566" headers="d1125079e552 ">
                                 <p><code class="codeph">TMNOFLAGS</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e566 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e566 d1125079e558 ">
                                 <p>00000000</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e566 d1125079e561 ">
                                 <p>表示未选择任何标志值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e581" headers="d1125079e552 ">
                                 <p><code class="codeph">TMSUCCESS</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e581 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e581 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'04000000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e581 d1125079e561 ">
                                 <p>将调用者与事务分支分离</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e598" headers="d1125079e552 ">
                                 <p><code class="codeph">TMJOIN</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e598 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e598 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'00200000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e598 d1125079e561 ">
                                 <p>Caller正在加入现有的交易分支。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e616" headers="d1125079e552 ">
                                 <p><code class="codeph">TMSUSPEND</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e616 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e616 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'02000000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e616 d1125079e561 ">
                                 <p>来电者暂停而不是结束</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e633" headers="d1125079e552 ">
                                 <p><code class="codeph">TMRESUME</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e633 d1125079e555 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d1125079e633 d1125079e558 ">
                                 <p><code class="codeph">UTL_RAW.CAST_TO_BINARY_INTEGER</code> （'08000000'）</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d1125079e633 d1125079e561 ">
                                 <p>呼叫者正在恢复与暂停的事务分支的关联。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">DBMS_XA</code>程序包使用<a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">表185-2中</a>显示的常量作为可能的返回值</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI">
                     <p class="titleintable">表185-2可能的返回值的DBMS_XA常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XA可能返回值的常量" width="100%" border="1" summary="This table describes constants used by DBMS_XA subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d1125079e672">名称</th>
                              <th align="left" valign="bottom" width="18%" id="d1125079e675">类型</th>
                              <th align="left" valign="bottom" width="24%" id="d1125079e678">值</th>
                              <th align="left" valign="bottom" width="33%" id="d1125079e681">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e686" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBBASE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e686 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e686 d1125079e678 ">
                                 <p>100</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e686 d1125079e681 ">
                                 <p>回滚代码的包含下限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e701" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBROLLBACK</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e701 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e701 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e701 d1125079e681 ">
                                 <p>回滚是由一个未指明的原因引起的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e717" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBCOMMFAIL</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e717 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e717 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +1</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e717 d1125079e681 ">
                                 <p>回滚是由通信故障引起的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e734" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBDEADLOCK</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e734 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e734 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +2</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e734 d1125079e681 ">
                                 <p>检测到死锁</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e751" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBINTEGRITY</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e751 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e751 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +3</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e751 d1125079e681 ">
                                 <p>检测到违反资源完整性的条件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e768" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBOTHER</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e768 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e768 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +4</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e768 d1125079e681 ">
                                 <p>资源管理器因未列出的原因回滚了该事务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e785" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBPROTO</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e785 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e785 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +5</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e785 d1125079e681 ">
                                 <p>资源管理器中发生协议错误</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e802" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBTIMEOUT</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e802 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e802 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +6</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e802 d1125079e681 ">
                                 <p>交易分支耗时长</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e819" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBTRANSIENT</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e819 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e819 d1125079e678 ">
                                 <p><code class="codeph">XA_RBBASE</code> +7</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e819 d1125079e681 ">
                                 <p>可以重试事务分支</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e836" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RBEND</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e836 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e836 d1125079e678 ">
                                 <p><code class="codeph">XA_RBTRANSIENT</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e836 d1125079e681 ">
                                 <p>回滚代码的包含上限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e852" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_NOMIGRATE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e852 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e852 d1125079e678 ">
                                 <p>9</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e852 d1125079e681 ">
                                 <p>交易分支可能已经启发式完成</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e868" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURHAZ</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e868 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e868 d1125079e678 ">
                                 <p>8</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e868 d1125079e681 ">
                                 <p>交易分支可能已经启发式完成</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e883" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURCOM</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e883 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e883 d1125079e678 ">
                                 <p>7</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e883 d1125079e681 ">
                                 <p>交易分支一直是启发式的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e898" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURRB</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e898 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e898 d1125079e678 ">
                                 <p>6</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e898 d1125079e681 ">
                                 <p>事务分支已经启发式回滚</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e913" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_HEURMIX</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e913 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e913 d1125079e678 ">
                                 <p>五</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e913 d1125079e681 ">
                                 <p>一些交易分支已经启发式承诺，其他分支回滚</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e928" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RETRY</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e928 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e928 d1125079e678 ">
                                 <p>4</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e928 d1125079e681 ">
                                 <p>例行程序返回时没有任何效果，可能会重新发布</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e943" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_RDONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e943 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e943 d1125079e678 ">
                                 <p>3</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e943 d1125079e681 ">
                                 <p>交易是只读的并且已经提交</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e958" headers="d1125079e672 ">
                                 <p><code class="codeph">XA_OK</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e958 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e958 d1125079e678 ">
                                 <p>0</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e958 d1125079e681 ">
                                 <p>正常执行</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e973" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_ASYNC</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e973 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e973 d1125079e678 ">
                                 <p>-2</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e973 d1125079e681 ">
                                 <p>异步操作已经非常出色</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e988" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_RMERR</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e988 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e988 d1125079e678 ">
                                 <p>-3</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e988 d1125079e681 ">
                                 <p>事务分支中发生资源管理器错误</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1003" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_NOTA</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1003 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1003 d1125079e678 ">
                                 <p>-4</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1003 d1125079e681 ">
                                 <p>XID无效</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1018" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_INVAL</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1018 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1018 d1125079e678 ">
                                 <p>-5</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1018 d1125079e681 ">
                                 <p>给出了无效的参数</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1034" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_PROTO</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1034 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1034 d1125079e678 ">
                                 <p>-6</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1034 d1125079e681 ">
                                 <p>在不正确的上下文中调用例程</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1049" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_RMFAIL</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1049 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1049 d1125079e678 ">
                                 <p>-7</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1049 d1125079e681 ">
                                 <p>资源经理不可用</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1064" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_DUPID</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1064 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1064 d1125079e678 ">
                                 <p>-8</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1064 d1125079e681 ">
                                 <p>XID已经存在</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d1125079e1079" headers="d1125079e672 ">
                                 <p><code class="codeph">XAER_OUTSIDE</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1125079e1079 d1125079e675 ">
                                 <p><code class="codeph">PLS_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d1125079e1079 d1125079e678 ">
                                 <p>-9</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d1125079e1079 d1125079e681 ">
                                 <p>资源经理在全球交易之外做工作</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS69156"></a><a id="ARPLS69156"></a><div class="props_rev_3"><a id="GUID-40814FCC-E43B-411A-A27D-AC63DF20732E" name="GUID-40814FCC-E43B-411A-A27D-AC63DF20732E"></a><h3 id="ARPLS-GUID-40814FCC-E43B-411A-A27D-AC63DF20732E" class="sect3"><span class="enumeration_section">185.4</span> DBMS_XA操作说明</h3>
               <div>
                  <p>在遵守的X / Open CAE标准的分布式事务处理，XA规范<code class="codeph">XA_PREPARE</code> / <code class="codeph">COMMIT</code> / <code class="codeph">ROLLBACK</code> / <code class="codeph">FORGET</code>当事务仍与当前会话相关联可能不会被调用。只有在<code class="codeph">XA_END</code>已调用，所以不存在与当前会话相关的任何事务，应用程序可以调用<code class="codeph">XA_PREPARE</code> / <code class="codeph">COMMIT</code> / <code class="codeph">ROLLBACK</code> / <code class="codeph">FORGET</code> 。</p>
                  <div class="section">
                     <p><code class="codeph">XAER_PROTO</code>从返回的错误<code class="codeph">XA_PREPARE</code> / <code class="codeph">COMMIT</code> / <code class="codeph">ROLLBACK</code> / <code class="codeph">FORGET</code> ，如果事务正在与当前会话相关联。
                     </p>
                     <p>在调用任何软件包子程序之前，必须已经建立了与Oracle数据库服务器后端或资源管理器的连接/会话。不支持资源管理器标识符。如果涉及多个资源管理器，则必须在调用任何包子程序之前为每个资源管理器预先建立多个连接/会话。如果在全局事务处理过程中建立了多个连接/会话，则调用者必须确保与特定全局事务分支标识符（XID）关联的所有这些连接/会话都建立到同一资源管理器。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69157"></a><a id="ARPLS69157"></a><div class="props_rev_3"><a id="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576" name="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576"></a><h3 id="ARPLS-GUID-BAB2807B-7F40-463F-BEA3-0253944BE576" class="sect3"><span class="enumeration_section">185.5</span> DBMS_XA数据结构</h3>
               <div>
                  <p><code class="codeph">DBMS_XA</code>包使用此<code class="codeph">OBJECT</code>类型和关联的<code class="codeph">TABLE</code>类型。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576__GUID-A3550EDB-3344-4C06-A18E-79AFDF5FD63E">对象类型</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BAB2807B-7F40-463F-BEA3-0253944BE576__GUID-96540941-F6B9-4449-A2B4-11F85B0E0EB0">表类型</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_XA.html#GUID-D6DAAF67-611E-4C06-A433-212C5C259726" title="此类型用于定义表示全局事务分支列表的xid数组。">DBMS_XA_XID_ARRAY表类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS69158"></a><a id="ARPLS69159"></a><a id="ARPLS69159"></a><a id="ARPLS69158"></a><div class="props_rev_3"><a id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" name="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6"></a><h4 id="ARPLS-GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" class="sect4"><span class="enumeration_section">185.5.1</span> DBMS_XA DBMS_XA_XID对象类型</h4>
                  <div>
                     <p>PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-D093D6E5-7D25-4E2D-B976-627B75D2EE1E">
                           <p class="notep1">注意：</p>
                           <p>有关更多信息，请参阅公共XA标准中的“分布式事务处理：XA规范”。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-A145AF50-7350-467B-A8D0-EEBAF7912F64">句法</p><pre class="oac_no_warn" dir="ltr">TYPE DBMS_XA_XID是OBJECT（formatid NUMBER，gtrid RAW（64），bqual RAW（64），构造函数DBMS_XA_XID（gtrid IN NUMBER）RETURN SELF AS RESULT，构造函数DBMS_XA_XID（gtrid IN RAW，bqual IN RAW） <code class="codeph">RETURN SELF AS RESULT</code> ，构造函数DBMS_XA_XID（formatid IN NUMBER，gtrid IN RAW，bqual IN RAW DEFAULT HEXTORAW（'00000000000000000000000000000001'）） <code class="codeph">RETURN SELF AS RESULT</code> ）</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-D74E2A9A-CBDB-4DC1-A08D-9FB256B3067F">属性</p>
                        <div class="tblformal" id="GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6__GUID-59043300-58C7-4223-A8A3-D952C1549B2B">
                           <p class="titleintable">表185-3 DBMS_XA_XID对象类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XA_XID对象类型" width="100%" border="1" summary="This table liststhe attributes of the DBMS_XA_XID object type and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e1469">属性</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e1472">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e1477" headers="d1125079e1469 ">
                                       <p><code class="codeph">formatid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e1477 d1125079e1472 ">
                                       <p>格式标识符，标识不同事务管理器（TM）的数字</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e1485" headers="d1125079e1469 ">
                                       <p><code class="codeph">的gtrid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e1485 d1125079e1472 ">
                                       <p>唯一标识全局事务的全局事务标识符，其最大大小为64字节</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e1493" headers="d1125079e1469 ">
                                       <p><code class="codeph">的bqual</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e1493 d1125079e1472 ">
                                       <p>分支限定符，其中最大大小为64字节</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69160"></a><a id="ARPLS69160"></a><div class="props_rev_3"><a id="GUID-D6DAAF67-611E-4C06-A433-212C5C259726" name="GUID-D6DAAF67-611E-4C06-A433-212C5C259726"></a><h4 id="ARPLS-GUID-D6DAAF67-611E-4C06-A433-212C5C259726" class="sect4"><span class="enumeration_section">185.5.2</span> DBMS_XA DBMS_XA_XID_ARRAY表类型</h4>
                  <div>
                     <p>此类型用于定义表示全局事务分支列表的<code class="codeph">xid</code>数组。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D6DAAF67-611E-4C06-A433-212C5C259726__GUID-FEEC37CF-E288-4E7B-996F-8AD3F9A13224">句法</p><pre class="oac_no_warn" dir="ltr">TYPE DBMS_XA_XID_ARRAY作为DBMS_XA_XID的表</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS69161"></a><a id="ARPLS69162"></a><a id="ARPLS69162"></a><a id="ARPLS69161"></a><div class="props_rev_3"><a id="GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9" name="GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9"></a><h3 id="ARPLS-GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9" class="sect3"><span class="enumeration_section">185.6</span> DBMS_XA子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_XA</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-F21B6DFA-2785-49B3-BFF0-CAC7181C5FA9__GUID-7F6D5B24-8F5E-4D15-A75D-7AA09B94A34E">
                     <p class="titleintable">表185-4 DBMS_XA包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XA包子程序" width="100%" border="1" summary="This table lists the DBMS_XA subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d1125079e1700">子程序</th>
                              <th align="left" valign="bottom" width="65%" id="d1125079e1703">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1708" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9" title="当其中一个Oracle Real Application Clusters（Oracle RAC）实例失败时，此过程可用于同步不确定事务。">DIST_TXN_SYNC程序</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1708 d1125079e1703 ">
                                 <p>用于在使用Oracle Real Application Clusters（Oracle RAC）时恢复同步</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1720" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-E183C7FF-6818-430B-B92D-7691DC9F8153" title="此函数提交xid指定的全局事务。">XA_COMMIT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1720 d1125079e1703 ">
                                 <p>提交<code class="codeph">xid</code>指定的全局事务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1737" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" title="此函数取消当前会话与xid指定的事务分支的关联。">XA_END功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1737 d1125079e1703 ">
                                 <p>取消当前会话与<code class="codeph">xid</code>指定的事务分支的关联</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1754" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA" title="此函数通知资源管理器忘记启发式提交或回滚事务分支。">XA_FORGET函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1754 d1125079e1703 ">
                                 <p>通知资源管理器忘记启发式提交或回滚事务分支。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1766" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08" title="如果以前的XA调用失败，此函数将获取最后一个Oracle错误代码。">XA_GETLASTOER功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1766 d1125079e1703 ">
                                 <p>如果以前的XA调用失败，则获取最后一个Oracle错误代码。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1778" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1" title="此函数准备xid中指定的事务分支，以便在可能的情况下随后提交事务。">XA_PREPARE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1778 d1125079e1703 ">
                                 <p>准备<code class="codeph">xid</code>指定的事务分支，以便在可能的情况下随后提交事务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1796" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE" title="此函数从资源管理器获取准备好或启发式完成的事务分支的列表。">XA_RECOVER函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1796 d1125079e1703 ">
                                 <p>从资源管理器获得准备好或启发式完成的事务分支的列表</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1808" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-AB177806-535A-4221-B678-0A5630289AEC" title="此函数通知资源管理器回滚代表事务分支完成的工作。">XA_ROLLBACK函数</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1808 d1125079e1703 ">
                                 <p>通知资源管理器回滚代表事务分支完成的工作</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1820" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545" title="此函数设置当前会话的事务超时（以秒为单位）。">XA_SETTIMEOUT功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1820 d1125079e1703 ">
                                 <p>设置当前会话的事务超时（以秒为单位）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d1125079e1832" headers="d1125079e1700 ">
                                 <p><a href="DBMS_XA.html#GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" title="此函数将当前会话与xid指定的事务分支相关联。">XA_START功能</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d1125079e1832 d1125079e1703 ">
                                 <p>将当前会话与<code class="codeph">xid</code>指定的事务分支关联</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS69163"></a><a id="ARPLS69163"></a><div class="props_rev_3"><a id="GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9" name="GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9"></a><h4 id="ARPLS-GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9" class="sect4"><span class="enumeration_section">185.6.1</span> DIST_TXN_SYNC过程</h4>
                  <div>
                     <p>当其中一个Oracle Real Application Clusters（Oracle RAC）实例失败时，此过程可用于同步不确定事务。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-534C5304-32D7-46D7-A059-83FF33A8A2F9__GUID-2B8F3C5E-91B7-45D3-B910-9F50429B5F5B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.DIST_TXN_SYNC;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69164"></a><a id="ARPLS69165"></a><a id="ARPLS69165"></a><a id="ARPLS69164"></a><div class="props_rev_3"><a id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153" name="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153"></a><h4 id="ARPLS-GUID-E183C7FF-6818-430B-B92D-7691DC9F8153" class="sect4"><span class="enumeration_section">185.6.2</span> XA_COMMIT函数</h4>
                  <div>
                     <p>此函数提交<code class="codeph">xid</code>指定的全局事务。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-5879765A-C9B9-41ED-90CB-D37641283668">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_COMMIT（xid IN DBMS_XA_XID，onePhase IN BOOLEAN）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-CCA1C21F-F6BA-4095-9225-F3DF76780296">参数</p>
                        <div class="tblformal" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-FCB3601F-2B6F-4994-B236-EDB4C14B3A12">
                           <p class="titleintable">表185-5 <span class="italic"><span class="bold">XA_COMMIT函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_COMMIT函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_COMMIT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2059">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2062">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2067" headers="d1125079e2059 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2067 d1125079e2062 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2081" headers="d1125079e2059 ">
                                       <p><code class="codeph">ONEPHASE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2081 d1125079e2062 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则应用单阶段提交</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-5B6A30D7-05B0-4AA0-BE8B-B32374BC67A9">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。指示错误的可能返回值为： <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>或<code class="codeph">XAER_PROTO</code> 。其他可能的返回值包括： <code class="codeph">XA_OK</code> ， <code class="codeph">XA_RB</code> *， <code class="codeph">XA_HEURHAZ</code> ， <code class="codeph">XA_HEURCOM</code> ， <code class="codeph">XA_HEURRB</code>和<code class="codeph">XA_HEURMIX</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E183C7FF-6818-430B-B92D-7691DC9F8153__GUID-866006D1-7FB8-4931-81D9-0F0BA69AA45C">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>应用程序不能调用<code class="codeph">COMMIT</code> ，而是必须调用<code class="codeph">XA_COMMIT</code>来提交<code class="codeph">xid</code>指定的全局事务。如果用户需要提交由其他用户创建的事务分支，则必须向用户授予<code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">onePhase</code>为<code class="codeph">TRUE</code> ，则资源管理器应使用单阶段提交协议来提交代表<code class="codeph">xid</code>完成的工作。否则，仅当全局事务的所有分支都已成功准备且前面的<code class="codeph">XA_PREPARE</code>调用已返回<code class="codeph">XA_OK</code> ，才应<code class="codeph">XA_COMMIT</code> 。
                              </p>
                           </li>
                           <li>
                              <p>应用程序必须为<code class="codeph">XA_PREPARE</code>已返回<code class="codeph">XA_OK</code>的全局事务的每个事务分支进行单独的<code class="codeph">XA_COMMIT</code>调用。</p>
                           </li>
                           <li>
                              <p>如果资源管理器未提交事务并且参数<code class="codeph">onePhase</code>设置为<code class="codeph">TRUE</code> ，则资源管理器可以返回<code class="codeph">XA_RB</code> *代码之一。返回后，资源管理器已回滚分支的工作并已释放所有保留的资源。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69166"></a><a id="ARPLS69167"></a><a id="ARPLS69167"></a><a id="ARPLS69166"></a><div class="props_rev_3"><a id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" name="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E"></a><h4 id="ARPLS-GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E" class="sect4"><span class="enumeration_section">185.6.3</span> XA_END功能</h4>
                  <div>
                     <p>此函数取消当前会话与<code class="codeph">xid</code>指定的事务分支的关联。
                     </p>
                     <div class="section">
                        <p>当控制线程完成或需要暂停处理事务分支时，事务管理器调用<code class="codeph">XA_END</code> 。当应用程序部分或全部完成其部分工作时（例如，在阻塞某些事件之前，为了让其他控制线程在分支上工作），就会发生这种情况。当<code class="codeph">XA_END</code>成功返回时，控制的调用线程不再与分支主动关联，但分支仍然存在</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-F3F5D129-36A0-4B51-9D51-C5200A03089D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_END（xid IN DBMS_XA_XID，标志IN PLS_INTEGER）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-9C44CDE8-5244-41CB-9DE5-091837C5FE36">参数</p>
                        <div class="tblformal" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-ABB30DA5-636C-4220-A4E8-ADAC0E634813">
                           <p class="titleintable">表185-6 <span class="italic"><span class="bold">XA_END函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_END函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_END subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2332">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2335">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2340" headers="d1125079e2332 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2340 d1125079e2335 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2354" headers="d1125079e2332 ">
                                       <p><code class="codeph">旗</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2354 d1125079e2335 ">
                                       <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE" title="此表描述了DBMS_XA子程序使用的常量。">见表185-1</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-E8703022-662B-49DD-BC8B-C48CE11B1FD7">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。错误的可能返回值是<code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAILED</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code> ， <code class="codeph">XAER_PROTO</code>或<code class="codeph">XA_RB</code> *。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF35D417-FCAF-4076-8C3F-EEDA9B9B964E__GUID-94D88503-44DC-464F-A6F8-93C83A4C1D77">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>可以在flag中指定<code class="codeph">TMSUCCESS</code>或<code class="codeph">TMSUSPEND</code> ，如果返回值为<code class="codeph">XA_OK</code> ，则事务分支与处于分离状态的当前会话解除关联。不支持<code class="codeph">TMFAIL</code> 。<code class="codeph">XA_END</code>可与任一被称为<code class="codeph">TMSUCCESS</code>或<code class="codeph">TMSUSPEND</code>撇清从当前会话由XID标识的事务分支。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">XA_END</code>成功，则返回<code class="codeph">XA_OK</code> 。应用程序必须检查返回值并处理错误情况。仅当返回<code class="codeph">XA_OK</code>时，应用程序才会继续进行其他正常操作。
                              </p>
                           </li>
                           <li>
                              <p>在不调用<code class="codeph">XA_END</code>情况下执行<code class="codeph">ROLLBACK</code>语句将回滚当前事务所做的更改。但是，在调用<code class="codeph">XA_END</code>之前，事务上下文仍与当前会话关联。
                              </p>
                           </li>
                           <li>
                              <p>在不调用<code class="codeph">XA_END</code>情况下执行<code class="codeph">COMMIT</code>语句将导致<code class="codeph">ORA</code> - <code class="codeph">02089</code> ：在从属会话中不允许<code class="codeph">COMMIT</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">XA_END</code>之后执行COMMIT或ROLLBACK语句对<code class="codeph">xid</code>标识的事务没有影响，因为此事务不再与当前会话关联。提交事务ID或<a href="DBMS_XA.html#GUID-AB177806-535A-4221-B678-0A5630289AEC" title="此函数通知资源管理器回滚代表事务分支完成的工作。">XA_ROLLBACK函数</a>以提交/回滚由<code class="codeph">xid</code>指定的事务。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69168"></a><a id="ARPLS69169"></a><a id="ARPLS69169"></a><a id="ARPLS69168"></a><div class="props_rev_3"><a id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA" name="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA"></a><h4 id="ARPLS-GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA" class="sect4"><span class="enumeration_section">185.6.4</span> XA_FORGET函数</h4>
                  <div>
                     <p>此函数通知资源管理器忘记启发式提交或回滚事务分支。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-42A4E721-D5FA-42E9-97C1-2C30259FD2A0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_FORGET（xid IN DBMS_XA_XID）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-FE71C854-8C37-4B9C-A658-22BE3933698F">参数</p>
                        <div class="tblformal" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-BD3BFAD7-7819-458C-A62F-33D73973DDDC">
                           <p class="titleintable">表185-7 <span class="italic"><span class="bold">XA_FORGET函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_FORGET函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_FORGET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2595">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2598">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2603" headers="d1125079e2595 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2603 d1125079e2598 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C7ED6D4-AE4B-45BE-B23B-F918FD49F8AA__GUID-F8C5DFBE-CCF9-4382-9D05-9715C2F6B97B">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回值是<code class="codeph">XA_OK</code> ， <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>或<code class="codeph">XAER_PROTO</code> 。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69170"></a><a id="ARPLS69170"></a><div class="props_rev_3"><a id="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08" name="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08"></a><h4 id="ARPLS-GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08" class="sect4"><span class="enumeration_section">185.6.5</span> XA_GETLASTOER函数</h4>
                  <div>
                     <p>如果以前的XA调用失败，此函数将获取最后一个Oracle错误代码。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08__GUID-E0C0804C-023A-45D7-A1FB-2E04F5B77C60">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_GETLASTOER RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0FDEBDC0-3A1A-43BF-8EE3-C8C58054ED08__GUID-E65E92AC-3837-4E92-B69D-6723F328E52F">返回值</p>
                        <p>返回值包含最后一个Oracle错误代码。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69171"></a><a id="ARPLS69172"></a><a id="ARPLS69172"></a><a id="ARPLS69171"></a><div class="props_rev_3"><a id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1" name="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1"></a><h4 id="ARPLS-GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1" class="sect4"><span class="enumeration_section">185.6.6</span> XA_PREPARE函数</h4>
                  <div>
                     <p>此函数准备<code class="codeph">xid</code>指定的事务分支，以便在可能的情况下随后提交事务。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-622B5DFA-4C2C-4AFB-88DC-E274BD718A1C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_PREPARE（xid IN DBMS_XA_XID）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-E2ECA847-73EA-4C48-938B-8FE4E2D105BA">参数</p>
                        <div class="tblformal" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-12680E1E-5767-42D2-8A08-BC8641505D16">
                           <p class="titleintable">表185-8 <span class="italic"><span class="bold">XA_PREPARE函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_PREPARE函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_PREPARE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e2861">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e2864">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e2869" headers="d1125079e2861 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e2869 d1125079e2864 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-D8BEBE2A-A285-40FD-8014-22EFEA486F28">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回码包括： <code class="codeph">XA_OK</code> ， <code class="codeph">XA_RDONLY</code> ， <code class="codeph">XA_RB</code> *， <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>或<code class="codeph">XAER_PROTO</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F19AA44E-5B1D-45BF-8B5B-2079E07CB3B1__GUID-4639F145-8C22-42FD-809D-A3F43150F05A">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果用户需要准备由其他用户创建的事务分支，则必须向用户授予<code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code> 。
                              </p>
                           </li>
                           <li>
                              <p>应用程序必须跟踪一个全局事务的所有分支，并准备每个事务分支。仅当全局事务的所有分支都已成功准备且<code class="codeph">XA_PREPARE</code>已返回<code class="codeph">XA_OK</code> ，应用程序才可以继续调用<code class="codeph">XA_COMMIT</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69173"></a><a id="ARPLS69173"></a><div class="props_rev_3"><a id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE" name="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE"></a><h4 id="ARPLS-GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE" class="sect4"><span class="enumeration_section">185.6.7</span> XA_RECOVER函数</h4>
                  <div>
                     <p>此函数从资源管理器获取准备好或启发式完成的事务分支的列表。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE__GUID-DDFEC683-1F6F-4FFC-85E0-504374C70822">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_RECOVER返回DBMS_XA_XID_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE__GUID-A84459CC-4AE3-41AE-B124-86E65CB60EFF">返回值</p>
                        <p>请参见<a href="DBMS_XA.html#GUID-D6DAAF67-611E-4C06-A433-212C5C259726" title="此类型用于定义表示全局事务分支列表的xid数组。">DBMS_XA_XID_ARRAY表类型</a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4EBFF4D3-BAC8-4BF4-9573-1270786FC1CE__GUID-CDB8A72F-2682-4E56-81D5-8B58EE64CA21">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>不支持标志<code class="codeph">TMSTARTSCAN</code> ， <code class="codeph">TMENDSCAN</code> ， <code class="codeph">TMNOFLAGS</code> 。
                              </p>
                           </li>
                           <li>
                              <p>必须将权限<code class="codeph">SELECT</code> <code class="codeph">ON</code> <code class="codeph">DBA_PENDING_TRANSACTIONS</code>授予需要调用<code class="codeph">XA_RECOVER</code>的用户。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69174"></a><a id="ARPLS69175"></a><a id="ARPLS69175"></a><a id="ARPLS69174"></a><div class="props_rev_3"><a id="GUID-AB177806-535A-4221-B678-0A5630289AEC" name="GUID-AB177806-535A-4221-B678-0A5630289AEC"></a><h4 id="ARPLS-GUID-AB177806-535A-4221-B678-0A5630289AEC" class="sect4"><span class="enumeration_section">185.6.8</span> XA_ROLLBACK函数</h4>
                  <div>
                     <p>此函数通知资源管理器回滚代表事务分支完成的工作。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-2778E7B3-FF1A-4025-BA6E-77BDF91D0534">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_ROLLBACK（xid IN DBMS_XA_XID）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-0E08D3A4-6456-4B94-8B5D-16DE8BCC90D7">参数</p>
                        <div class="tblformal" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-7AB10B23-B2FB-4704-8473-AD7BB511FAE6">
                           <p class="titleintable">表185-9 <span class="italic"><span class="bold">XA_ROLLBACK函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_ROLLBACK函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_ROLLBACK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e3198">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e3201">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3206" headers="d1125079e3198 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3206 d1125079e3201 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-AA3409D7-0510-429F-A26C-CA00851FA41D">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回值为： <code class="codeph">XA_OK</code> ， <code class="codeph">XA_RB</code> *， <code class="codeph">XA_HEURHAZ</code> ， <code class="codeph">XA_HEURCOM</code> ， <code class="codeph">XA_HEURRB</code>或<code class="codeph">XA_HEURMIX</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB177806-535A-4221-B678-0A5630289AEC__GUID-4B3542BE-4404-4185-A48C-5FCCFD6ECCC3">使用说明</p>
                        <p>如果用户需要回滚由其他用户创建的事务分支，则必须向用户授予<code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69176"></a><a id="ARPLS69177"></a><a id="ARPLS69177"></a><a id="ARPLS69176"></a><div class="props_rev_3"><a id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545" name="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545"></a><h4 id="ARPLS-GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545" class="sect4"><span class="enumeration_section">185.6.9</span> XA_SETTIMEOUT功能</h4>
                  <div>
                     <p>此函数设置当前会话的事务超时（以秒为单位）。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-541583CB-5A31-4FB1-9672-F647ABE766B0">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_SETTIMEOUT（在PLS_INTEGER中的秒数）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-B660AD2F-FA2F-4A75-92FC-7443BAD29191">参数</p>
                        <div class="tblformal" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-3AB0AF93-A741-46CD-9AB7-501A19522D99">
                           <p class="titleintable">表185-10 <span class="italic"><span class="bold">XA_SETTIMEOUT函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_SETTIMEOUT函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_SETTIMEOUTT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e3374">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e3377">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3382" headers="d1125079e3374 ">
                                       <p><code class="codeph">秒</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3382 d1125079e3377 ">
                                       <p>超时值指示在系统自动中止事务之前，事务分支可能与会话解除关联的最长时间（以秒为单位）。默认值为60秒。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-85B174D6-9A12-4657-AAB2-2658A2D0F548">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a> 。可能的返回值是<code class="codeph">XA_OK</code> ， <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code>或<code class="codeph">XAER_INVAL</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-606B11FB-5AF6-4737-A81C-BF65D9E14545__GUID-D5C1FDC1-8378-42DE-A76F-6B154935B186">使用说明</p>
                        <p>仅当返回值为<code class="codeph">XA_OK</code> ，才会成功设置超时值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69178"></a><a id="ARPLS69179"></a><a id="ARPLS69179"></a><a id="ARPLS69178"></a><div class="props_rev_3"><a id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" name="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119"></a><h4 id="ARPLS-GUID-61B54B33-22CE-4860-95FA-5B6490FC7119" class="sect4"><span class="enumeration_section">185.6.10</span> XA_START功能</h4>
                  <div>
                     <p>此函数将当前会话与<code class="codeph">xid</code>指定的事务分支相关联。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-8567E2FF-8C05-44AE-B126-12E77EBB0760">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XA.XA_START（xid IN DBMS_XA_XID，标志IN PLS_INTEGER）RETURN PLS_INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-2F8821FC-3FB4-48B0-AD58-4E1D5DA47198">参数</p>
                        <div class="tblformal" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-568EDD3B-8EA7-41E6-874B-060B8884F875">
                           <p class="titleintable">表185-11 <span class="italic"><span class="bold">XA_START功能参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XA_START函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XA.XA_STARTsubprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1125079e3534">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1125079e3537">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3542" headers="d1125079e3534 ">
                                       <p><code class="codeph">XID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3542 d1125079e3537 ">
                                       <p>请参见<a href="DBMS_XA.html#GUID-310813B4-B1BD-4022-AFD5-A44D4C5133F6" title="PL / SQL XA接口允许PL / SQL应用程序定义全局事务分支id（XID）并将当前会话与事务分支关联/取消关联。XID定义为PL / SQL对象类型。">DBMS_XA_XID对象类型</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1125079e3556" headers="d1125079e3534 ">
                                       <p><code class="codeph">旗</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1125079e3556 d1125079e3537 ">
                                       <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BEHJAGEE" title="此表描述了DBMS_XA子程序使用的常量。">见表185-1</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-847E2176-EB8B-40C5-A88E-6BF7710E72B2">返回值</p>
                        <p><a href="DBMS_XA.html#GUID-CB96E823-2462-4350-BF9A-2ACE6F29A643__BABCHFEI" title="此表描述了DBMS_XA子程序使用的常量。">见表185-2</a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61B54B33-22CE-4860-95FA-5B6490FC7119__GUID-4A637354-35D2-4CDE-B631-6F4BBD58CA8B">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果在flag中指定了<code class="codeph">TMJOIN</code>或<code class="codeph">TMRESUME</code> ，则start用于加入由<code class="codeph">xid</code>标识的现有事务分支。使用<code class="codeph">TMSUCCESS</code>标志分离事务时，应使用<code class="codeph">TMJOIN</code>标志。<code class="codeph">TMRESUME</code>当事务分支与分离应采用<code class="codeph">TMSUSPEND</code>标志。可以使用任一标志调用<code class="codeph">XA_START</code>以加入现有事务分支。
                              </p>
                           </li>
                           <li>
                              <p>如果在flag中指定了<code class="codeph">TMNOFLAGS</code> ，并且既未指定<code class="codeph">TMJOIN</code>也<code class="codeph">TMRESUME</code>指定<code class="codeph">TMJOIN</code> ， <code class="codeph">TMRESUME</code>启动新的事务分支。如果<code class="codeph">xid</code>指定的事务分支已存在，则<code class="codeph">XA_START</code>将返回<code class="codeph">XAER_DUPID</code>错误代码。
                              </p>
                           </li>
                           <li>
                              <p>错误的可能返回值包括： <code class="codeph">XAER_RMERR</code> ， <code class="codeph">XAER_RMFAIL</code> ， <code class="codeph">XAER_DUPID</code> ， <code class="codeph">XAER_OUTSIDE</code> ， <code class="codeph">XAER_NOTA</code> ， <code class="codeph">XAER_INVAL</code>和<code class="codeph">XAER_PROTO</code> 。</p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">XA_START</code>成功，则返回<code class="codeph">XA_OK</code> 。应用程序必须检查返回值并处理错误情况。仅当返回<code class="codeph">XA_OK</code>时，PL / SQL应用程序才会继续进行其他正常操作。不支持事务堆叠。如果存在与当前会话关联的活动事务，则可能不会调用它来启动或加入另一个事务。如果使用与会话关联的活动全局事务分支调用<code class="codeph">XAER_PROTO</code>则将返回<code class="codeph">XA_START</code> 。如果使用与当前会话关联的本地事务调用<code class="codeph">XAER_OUTSIDE</code>则将返回<code class="codeph">XA_START</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="09660.using-RMAN-in-oracle-data-guard-configurations.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create backup strategies using Oracle Recovery Manager (RMAN) with Oracle Data Guard and standby databases."></meta>
      <meta name="description" content="You can create backup strategies using Oracle Recovery Manager (RMAN) with Oracle Data Guard and standby databases."></meta>
      <title>使用RMAN备份和还原文件</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="You can create backup strategies using Oracle Recovery Manager (RMAN) with Oracle Data Guard and standby databases."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-oracle-data-guard-logical-standby-databases.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-sql-apply-to-perform-rolling-upgrade.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-data-guard-logical-standby-databases.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-sql-apply-to-perform-rolling-upgrade.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用RMAN备份和还原文件</li>
            </ol>
            <a id="GUID-516D9C60-F2EF-4822-BB87-5D3BE877B69B" name="GUID-516D9C60-F2EF-4822-BB87-5D3BE877B69B"></a><a id="SBYDB04700"></a>
            
            <h2 id="SBYDB-GUID-516D9C60-F2EF-4822-BB87-5D3BE877B69B" class="sect2"><span class="enumeration_chapter">12</span>使用RMAN备份和还原文件</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用带有Oracle Data Guard和备用数据库的Oracle Recovery Manager（RMAN）创建备份策略。</p>
               <p>RMAN可以对主数据库执行最小影响的备份，并可以快速从丢失单个数据文件或整个数据库中恢复。RMAN和Oracle Data Guard可以一起使用，以简化Oracle Data Guard配置的管理。</p>
               <p>请参阅以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-7B0909F0-2DEA-4A16-8E91-A4687F634D4E" title="RMAN使用恢复目录来跟踪Oracle Data Guard环境中所有数据库文件的文件名。">关于Oracle Data Guard配置中的RMAN文件管理</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-8D525402-9629-44EC-A3F1-F6B8C3307E8C" title="在Oracle Data Guard配置中，可以将备份控制文件，数据文件和存档日志的过程卸载到备用系统，从而最大限度地减少备份对生产系统的影响。">关于Oracle Data Guard环境中的RMAN配置</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-33B70E30-2454-484C-9110-A5AC452E63CB" title="这些配置可以简化备份和恢复操作。">推荐的RMAN和Oracle数据库配置</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4" title="您可以使用RMAN脚本和过程在Oracle Data Guard配置中备份Oracle数据库。">备份程序</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-9C54A243-6B84-4755-957E-AFC57B9BC3B6" title="必须使用REGISTER DATABASE命令仅显式注册主数据库。将RMAN连接到恢复目录和主数据库作为TARGET后执行此操作。">在Oracle Data Guard环境中注册和取消注册数据库</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-D13E9A5E-5DBB-4DF4-8534-F1E16FA33618" title="将RMAN LIST，REPORT和SHOW命令与FOR DB_UNIQUE_NAME子句一起使用可以查看有关特定数据库的信息。">在Oracle Data Guard环境中报告</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-4B1696A8-1A90-426C-A620-D5F313365E54" title="Oracle Data Guard环境中的文件（数据文件，存档日志，备份片，映像副本和代理副本）通过使用DB_UNIQUE_NAME参数与数据库关联。">在Oracle Data Guard环境中执行备份维护</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-44539CC5-0BAB-47F8-B51F-BFD0A1D6DA40" title="这些是Oracle Data Guard环境中可能发生的一些恢复方案。">Oracle Data Guard环境中的恢复方案</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-211E08A4-C19E-4159-80B2-429431314278" title="您可以修改其他配置的备份过程，例如备用数据库和主数据库无法共享备份文件时;备用实例仅用于远程存档重做日志文件;或者备用数据库文件名与主数据库不同。">其他备份情况</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-F0EB4F8E-7D2F-4674-9A5B-AABC368D8F11" title="从Oracle Database 12c开始，RMAN允许您通过网络连接到包含所需文件的物理备用数据库来还原或恢复文件。">通过网络恢复和恢复文件</a></p>
                  </li>
                  <li>
                     <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-72F008A1-527F-41DB-89CD-623FA06D0420" title="RMAN支持备用数据库中多租户容器数据库（CDB）的时间点恢复（PITR）。（单个可插拔数据库（PDB）没有自己的备用数据库。）">RMAN在Oracle Data Guard环境中对CDB的支持</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-516D9C60-F2EF-4822-BB87-5D3BE877B69B__GUID-B845DC4E-2CDB-4220-9B4D-4BA79F9BAF8A">
                  <p class="notep1">注意：</p>
                  <p>由于逻辑备用数据库不是主数据库的块到块副本，因此无法使用逻辑备用数据库备份主数据库。</p>
               </div>
               <div class="infoboxnotealso" id="GUID-516D9C60-F2EF-4822-BB87-5D3BE877B69B__GUID-1E5E4442-BAC3-43B3-84FF-70E9B4E14E0A">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV89346" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a> ，以获取有关RMAN概念以及在Oracle Data Guard环境中使用RMAN的更多信息</p>
                     </li>
                     <li>
                        <p>有关RMAN命令的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF001" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="SBYDB4847"></a><div class="props_rev_3"><a id="GUID-7B0909F0-2DEA-4A16-8E91-A4687F634D4E" name="GUID-7B0909F0-2DEA-4A16-8E91-A4687F634D4E"></a><h3 id="SBYDB-GUID-7B0909F0-2DEA-4A16-8E91-A4687F634D4E" class="sect3"><span class="enumeration_section">12.1</span>关于Oracle Data Guard配置中的RMAN文件管理</h3>
               <div>
                  <p>RMAN使用恢复目录来跟踪Oracle Data Guard环境中所有数据库文件的文件名。</p>
                  <p>恢复目录是RMAN用于存储有关一个或多个Oracle数据库的元数据的数据库模式。该目录还记录了联机重做日志，备用重做日志，临时文件，归档重做日志，备份集和映像副本的创建位置。</p>
               </div><a id="SBYDB4848"></a><div class="props_rev_3"><a id="GUID-075FF361-A398-4533-9E7B-9255A288A662" name="GUID-075FF361-A398-4533-9E7B-9255A288A662"></a><h4 id="SBYDB-GUID-075FF361-A398-4533-9E7B-9255A288A662" class="sect4"><span class="enumeration_section">12.1.1</span> Oracle Data Guard环境中备份的可互换性</h4>
                  <div>
                     <p>RMAN命令使用恢复目录元数据在Oracle Data Guard环境中的不同物理数据库之间透明地运行。</p>
                     <p>例如，您可以备份物理备用数据库上的表空间，并在主数据库上还原和恢复它。同样，您可以备份主数据库上的表空间，并在物理备用数据库上还原和恢复它。</p>
                     <div class="infoboxnote" id="GUID-075FF361-A398-4533-9E7B-9255A288A662__GUID-C796926F-7651-4EE5-8CC6-B34FD5EC9145">
                        <p class="notep1">注意：</p>
                        <p>逻辑备用数据库的备份在主数据库中不可用。</p>
                     </div>
                     <p>备用控制文件和非备用控制文件的备份是可互换的。例如，您可以还原主数据库上的备用控制文件和物理备用数据库上的主控制文件。这种可互换性意味着您可以将控制文件备份卸载到Oracle Data Guard环境中的一个数据库。RMAN在数据库的还原和恢复期间自动更新数据库文件的文件名。</p>
                  </div>
               </div><a id="SBYDB4849"></a><div class="props_rev_3"><a id="GUID-73A75929-1F78-46F1-9CBE-EC2611388A6B" name="GUID-73A75929-1F78-46F1-9CBE-EC2611388A6B"></a><h4 id="SBYDB-GUID-73A75929-1F78-46F1-9CBE-EC2611388A6B" class="sect4"><span class="enumeration_section">12.1.2</span> Oracle Data Guard环境中的备份关联</h4>
                  <div>
                     <p>恢复目录通过将每个数据库文件或备份文件与<code class="codeph">DB_UNIQUE_NAME</code>相关联来跟踪Oracle Data Guard环境中的文件。</p>
                     <p>创建文件的数据库与该文件相关联。例如，如果RMAN使用唯一名称<code class="codeph">standby1</code>备份数据库，则<code class="codeph">standby1</code>与此备份关联。除非您使用<code class="codeph">CHANGE</code> ，否则备份仍与创建它的数据库相关联<code class="codeph">...RESET DB_UNIQUE_NAME</code>将备份与其他数据库关联。
                     </p>
                  </div>
               </div><a id="SBYDB4850"></a><div class="props_rev_3"><a id="GUID-61ABB2C2-0813-4DD9-94F4-BB292CB21194" name="GUID-61ABB2C2-0813-4DD9-94F4-BB292CB21194"></a><h4 id="SBYDB-GUID-61ABB2C2-0813-4DD9-94F4-BB292CB21194" class="sect4"><span class="enumeration_section">12.1.3</span> Oracle Data Guard环境中备份的可访问性</h4>
                  <div>
                     <p>默认情况下，在Oracle Data Guard环境中，恢复目录将磁盘备份视为仅对与其关联的数据库可访问，而在一个数据库上创建的磁带备份可供所有数据库访问。</p>
                     <div class="p">您可以使用以下RMAN命令覆盖默认行为：<pre class="pre codeblock"><code>为设备类型设置备份文件类型device_specifier TO [NOTACCESSIBLE |无障碍]</code></pre>可访问性设置位于会话级别，这意味着在断开RMAN会话后，备份关联将恢复为默认行为。</div>
                     <p>如果备份文件未与任何数据库关联，则在恢复目录视图中描述它的行对于<code class="codeph">SITE_KEY</code>列显示为<code class="codeph">null</code> 。默认情况下，RMAN将<code class="codeph">SITE_KEY</code>为<code class="codeph">null</code>文件与目标数据库关联。
                     </p>
                     <p>RMAN命令（如<code class="codeph">BACKUP</code> ， <code class="codeph">RESTORE</code>和<code class="codeph">CROSSCHECK</code>可用于任何可访问的备份。例如，对于<code class="codeph">RECOVER COPY</code>操作，RMAN仅将与数据库关联的映像副本视为可以恢复。RMAN认为磁盘和磁带上的增量备份有资格恢复映像副本。在数据库恢复中，RMAN仅考虑与数据库关联的磁盘备份以及磁带上的所有文件都有资格恢复。
                     </p>
                     <p>为了说明备份可访问性的差异，假设数据库<code class="codeph">prod</code>和<code class="codeph">standby1</code>驻留在不同的主机上。RMAN将<code class="codeph">prod</code>上的数据文件1备份到生产主机上的<code class="codeph">/prmhost/disk1/df1.dbf</code> ，也备份到磁带。RMAN备份数据文件1上<code class="codeph">standby1</code>到<code class="codeph">/sbyhost/disk2/df1.dbf</code>备用主机上，并且还到磁带上。如果RMAN连接到数据库<code class="codeph">prod</code> ，则无法使用RMAN命令对备用主机上的<code class="codeph">/sbyhost/disk2/df1.dbf</code>备份执行操作。然而，RMAN会考虑上所做的磁带备份<code class="codeph">standby1</code>有资格得到恢复。
                     </p>
                     <div class="infoboxnote" id="GUID-61ABB2C2-0813-4DD9-94F4-BB292CB21194__GUID-77DE5DBE-E968-43BC-AF85-42BF02FF27C4">
                        <p class="notep1">注意：</p>
                        <p>您可以将备份从备用主机FTP到主要主机，反之亦然，将<code class="codeph">TARGET</code>作为<code class="codeph">TARGET</code>连接到此主机上的数据库，然后对备份进行<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF109" target="_blank"><code class="codeph">CATALOG</code></a> 。在目标数据库对文件进行编目之后，该文件将与目标数据库关联。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB4851"></a><div class="props_rev_3"><a id="GUID-8D525402-9629-44EC-A3F1-F6B8C3307E8C" name="GUID-8D525402-9629-44EC-A3F1-F6B8C3307E8C"></a><h3 id="SBYDB-GUID-8D525402-9629-44EC-A3F1-F6B8C3307E8C" class="sect3"><span class="enumeration_section">12.2</span>关于Oracle Data Guard环境中的RMAN配置</h3>
               <div>
                  <p>在Oracle Data Guard配置中，可以将备份控制文件，数据文件和存档日志的过程卸载到备用系统，从而最大限度地减少备份对生产系统的影响。</p>
                  <p>这些备份可用于恢复主数据库或备用数据库。</p>
                  <p>RMAN使用<code class="codeph">DB_UNIQUE_NAME</code>初始化参数将一个数据库站点与另一个数据库站点区分开来。因此，在Oracle Data Guard配置中维护<code class="codeph">DB_UNIQUE_NAME</code>的唯一性至关重要。
                  </p>
                  <p>必须使用RMAN <code class="codeph">REGISTER DATABASE</code>命令仅显式注册主数据库。将RMAN连接到恢复目录和主数据库作为目标后，可以执行此操作。
                  </p>
                  <p>使用RMAN <code class="codeph">CONFIGURE</code>命令设置RMAN配置。当<code class="codeph">CONFIGURE</code>命令与<code class="codeph">FOR DB_UNIQUE_NAME</code>选项一起使用时，它会使用您指定的DB_UNIQUE_NAME为数据库设置RMAN特定于站点的配置。
                  </p>
                  <p>例如，在连接到恢复目录后，可以在RMAN提示符处使用以下命令，将DBID为1625818158的<code class="codeph">BOSTON</code>数据库的默认设备类型设置为<code class="codeph">SBT</code> 。仅当您未作为目标连接到数据库时，才需要RMAN <code class="codeph">SET DBID</code>命令。
                  </p><pre class="oac_no_warn" dir="ltr">SET DBID 1625818158;为DB_UNIQUE_NAME波士顿配置默认设备类型为SBT;</pre></div>
            </div><a id="SBYDB5054"></a><a id="SBYDB4852"></a><div class="props_rev_3"><a id="GUID-33B70E30-2454-484C-9110-A5AC452E63CB" name="GUID-33B70E30-2454-484C-9110-A5AC452E63CB"></a><h3 id="SBYDB-GUID-33B70E30-2454-484C-9110-A5AC452E63CB" class="sect3"><span class="enumeration_section">12.3</span>推荐的RMAN和Oracle数据库配置</h3>
               <div>
                  <p>这些配置可以简化备份和恢复操作。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-B7FFF73A-B8C0-49DD-8404-F6FE9F784C41" title="建议在Oracle Data Guard环境中的每个主数据库和备用数据库上使用这些Oracle数据库配置。">主数据库和备用数据库上的Oracle数据库配置</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-2AEB88E7-075F-47F4-BBCE-77B274A50683" title="为了简化RMAN的持续使用，您可以在Oracle Data Guard环境中为每个数据库设置许多持久性配置设置。">主数据库中的RMAN配置</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-FBB66066-8FD4-4328-9AF2-0D7625803FDB" title="建议在备份数据库中执行这些RMAN配置。">备份数据库中执行备份的RMAN配置</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-F4CD9CD2-1006-409F-92D8-909114931B06" title="建议在未完成备份的备用数据库中使用这些RMAN配置。">处于待机状态的RMAN配置未执行备份</a></p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-33B70E30-2454-484C-9110-A5AC452E63CB__GUID-B9B1D627-EC55-4F67-AAAE-55DB07E2BECA">配置假设</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这些配置做出以下假设：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>备用数据库是物理备用数据库，仅在备用数据库上进行备份。如果在主数据库和备用数据库上都进行了<a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-75F78440-2A7C-4FDC-AFF9-CABB440CB651" title="If the standby databases are far apart from one another, then the backups taken on them may not be easily accessible by the primary system or other standby systems.">备份</a> ，请参阅<a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-75F78440-2A7C-4FDC-AFF9-CABB440CB651" title="如果备用数据库彼此相距很远，则主系统或其他备用系统可能无法轻松访问其上的备份。">备用数据库太地理位置远离共享备份</a>以进行程序更改。
                           </p>
                        </li>
                        <li>
                           <p>需要RMAN恢复目录，以便可以将在一个数据库服务器上执行的备份还原到另一个数据库服务器。仅将控制文件用作RMAN存储库是不够的，因为主数据库不了解备用数据库上的备份。</p>
                           <p>RMAN恢复目录在集中位置组织备份历史记录和其他与恢复相关的元数据。恢复目录在数据库中配置并维护备份元数据。恢复目录没有控制文件的空间限制，可以存储有关备份的更多历史数据。</p>
                           <p>建议在Oracle Data Guard配置中与主站点和备用站点物理分离的目录服务器，因为任一站点的灾难都不会影响恢复最新备份的能力。</p>
                           <div class="infoboxnotealso" id="GUID-33B70E30-2454-484C-9110-A5AC452E63CB__GUID-40CEB303-D9CD-43BE-B3EF-6D9368D1F439">
                              <p class="notep1">也可以看看：</p>
                              <p>有关管理恢复目录的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV8015" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </div>
                        </li>
                        <li>
                           <p>配置中的所有数据库都使用Oracle Database <span class="italic">11g</span>第1版（11.1）或更高版本。
                           </p>
                        </li>
                        <li>
                           <p>Oracle Secure Backup软件或第三方媒体管理软件配置了RMAN以备份到磁带。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="SBYDB4853"></a><div class="props_rev_3"><a id="GUID-B7FFF73A-B8C0-49DD-8404-F6FE9F784C41" name="GUID-B7FFF73A-B8C0-49DD-8404-F6FE9F784C41"></a><h4 id="SBYDB-GUID-B7FFF73A-B8C0-49DD-8404-F6FE9F784C41" class="sect4"><span class="enumeration_section">12.3.1</span>主数据库和备用数据库上的Oracle数据库配置</h4>
                  <div>
                     <p>建议在Oracle Data Guard环境中的每个主数据库和备用数据库上使用这些Oracle数据库配置。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>为每个数据库配置快速恢复区域（恢复区域是数据库的本地）。</p>
                           <p>快速恢复区域是文件系统或Oracle自动存储管理（Oracle ASM）磁盘组上的单个存储位置，其中包含恢复所需的所有文件。这些文件包括控制文件，存档日志，联机重做日志，闪回日志和RMAN备份。由于在快速恢复区域中创建了新备份和归档日志，因此会自动删除旧文件（保留期之外或已备份到第三级存储）以为其腾出空间。此外，可以设置通知以在快速恢复区域中的空间消耗接近其预定义限制时警告DBA。然后，DBA可以采取措施，例如增加恢复区空间限制，添加磁盘硬件或减少保留期。</p>
                           <p></p>
                           <p>设置以下初始化参数以配置快速恢复区域：</p><pre class="oac_no_warn" dir="ltr">DB_RECOVERY_FILE_DEST = &lt;文件系统位置或Oracle ASM磁盘组&gt; DB_RECOVERY_FILE_DEST_SIZE = &lt;磁盘空间配额&gt;</pre><div class="infoboxnotealso" id="GUID-B7FFF73A-B8C0-49DD-8404-F6FE9F784C41__GUID-C42B4850-3659-432F-A93B-C26A86C0F8D8">
                              <p class="notep1">也可以看看：</p>
                              <p>有关配置快速恢复区域的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV8183" target="_blank"><span class="italic">，请参见“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </div>
                        </li>
                        <li>
                           <p>使用服务器参数文件（SPFILE），以便可以备份它以在备份中保存实例参数。</p>
                        </li>
                        <li>
                           <p>在主数据库和备用数据库上启用闪回数据库。</p>
                           <p>启用闪回数据库后，Oracle数据库会在快速恢复区域中维护闪回日志。这些日志可用于将数据库回滚到较早的时间点，而无需完全还原。</p>
                           <div class="infoboxnotealso" id="GUID-B7FFF73A-B8C0-49DD-8404-F6FE9F784C41__GUID-A633BB4E-A8ED-4B72-AE87-D872ACAE1E31">
                              <p class="notep1">也可以看看：</p>
                              <p>有关启用闪回数据库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV595" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="SBYDB4854"></a><div class="props_rev_3"><a id="GUID-2AEB88E7-075F-47F4-BBCE-77B274A50683" name="GUID-2AEB88E7-075F-47F4-BBCE-77B274A50683"></a><h4 id="SBYDB-GUID-2AEB88E7-075F-47F4-BBCE-77B274A50683" class="sect4"><span class="enumeration_section">12.3.2</span>主数据库中的RMAN配置</h4>
                  <div>
                     <p>为了简化RMAN的持续使用，您可以在Oracle Data Guard环境中为每个数据库设置许多持久性配置设置。</p>
                     <div class="section">
                        <p>这些设置控制RMAN行为的许多方面。例如，您可以配置备份保留策略，备份到磁带或磁盘的默认目标，默认备份设备类型等。您可以使用<code class="codeph">CONFIGURE</code>命令设置和更改RMAN配置。建议在主数据库中使用以下RMAN配置：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将RMAN连接到主数据库和恢复目录。</span></li>
                        <li class="stepexpand"><span>将数据库的保留策略配置为<span class="italic"><code class="codeph">n</code></span>天：</span><div><pre class="oac_no_warn" dir="ltr">配置保留政策，以恢复&lt;n&gt;天的窗口;</pre><p>通过此配置，您可以将执行数据库恢复所需的备份保留在指定天数内的任何时间点。</p>
                              <p>使用<code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code>命令删除任何不需要的备份（根据保留策略）以在指定的天数内执行恢复。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">CONFIGURE ARCHIVELOG DELETION POLICY</code>命令指定何时可以删除存档日志。例如，要在确保将日志<span class="italic">发送</span>到所有目标后删除日志，请使用以下配置：</span><div><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除政策运送到所有待机;</pre><p>要在确保将日志<span class="italic">应用于</span>所有备用目标后删除日志，请使用以下配置：</p><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除政策应用于所有待机;</pre></div>
                        </li>
                        <li class="stepexpand"><span>配置主数据库和所有备用数据库的连接字符串，以便在使用<code class="codeph">RESYNC CATALOG FROM DB_UNIQUE_NAME</code>命令时，RMAN可以远程连接并执行重新同步。连接到目标实例时，必须提供网络服务名称。即使完成重新同步的其他数据库实例位于本地主机上，此要求也适用。目标和远程实例必须使用相同的<code class="codeph">SYSDBA</code> （或<code class="codeph">SYSBACKUP</code> ）密码，这意味着两个实例必须已具有密码文件。您可以使用单个密码创建密码文件，以便可以使用该密码文件启动所有数据库实例。例如，如果要连接到Boston中的备用数据库的TNS别名是<code class="codeph">boston_conn_str</code> ，则可以使用以下命令配置<code class="codeph">BOSTON</code>数据库站点的连接标识符：</span><div><pre class="oac_no_warn" dir="ltr">配置DB_UNIQUE_NAME BOSTON CONNECT IDENTIFIER'boston_conn_str';</pre><p>请注意， <code class="codeph">'boston_conn_str'</code>不包含用户名和密码。它仅包含可从任何数据库站点用于连接到<code class="codeph">BOSTON</code>数据库站点的Oracle Net服务名称。
                              </p>
                              <p>为所有备用数据库配置连接标识符后，可以使用<code class="codeph">LIST DB_UNIQUE_NAME OF DATABASE</code>命令验证备用数据库列表。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-2AEB88E7-075F-47F4-BBCE-77B274A50683__GUID-81E4B6DA-3925-474F-8A46-792AC36955CF">
                           <p class="notep1">也可以看看：</p>
                           <p> </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关RMAN配置的详细信息，请参见<a href="../bradv/configuring-rman-client-advanced.html#BRADV006" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关RMAN <code class="codeph">CONFIGURE</code>命令的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF113" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4855"></a><div class="props_rev_3"><a id="GUID-FBB66066-8FD4-4328-9AF2-0D7625803FDB" name="GUID-FBB66066-8FD4-4328-9AF2-0D7625803FDB"></a><h4 id="SBYDB-GUID-FBB66066-8FD4-4328-9AF2-0D7625803FDB" class="sect4"><span class="enumeration_section">12.3.3</span>备份数据库中执行备份的RMAN配置</h4>
                  <div>
                     <p>建议在备份数据库中执行这些RMAN配置。</p>
                     <ol>
                        <li class="stepexpand"><span>将RMAN连接到备用数据库（执行备份的位置）作为目标，并连接到恢复目录。</span></li>
                        <li class="stepexpand"><span>启用控制文件和服务器参数文件的自动备份：</span><div><pre class="oac_no_warn" dir="ltr">配置CONTROLFILE AUTOBACKUP ON;</pre></div>
                        </li>
                        <li class="stepexpand"><span>跳过备份已存在具有相同检查点的有效备份的数据文件：</span><div><pre class="oac_no_warn" dir="ltr">配置备份优化;</pre></div>
                        </li>
                        <li class="stepexpand"><span>配置磁带通道以根据介质管理软件的要求创建备份：</span><div><pre class="oac_no_warn" dir="ltr">配置通道设备类型SBT PARMS'&lt;通道参数&gt;';</pre></div>
                        </li>
                        <li class="stepexpand"><span>由于存档日志在备用数据库中备份，因此Oracle建议您为日志删除策略配置<code class="codeph">BACKED UP</code>选项：</span><div><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除政策<span class="italic">n次</span>备份到设备类型SBT;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-FBB66066-8FD4-4328-9AF2-0D7625803FDB__GUID-F042CE3F-2867-4CE4-A848-0623D0ACE30E">
                           <p class="notep1">也可以看看：</p>
                           <p>有关为存档重做日志启用删除策略的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV89439" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4856"></a><div class="props_rev_3"><a id="GUID-F4CD9CD2-1006-409F-92D8-909114931B06" name="GUID-F4CD9CD2-1006-409F-92D8-909114931B06"></a><h4 id="SBYDB-GUID-F4CD9CD2-1006-409F-92D8-909114931B06" class="sect4"><span class="enumeration_section">12.3.4</span>备用时未执行备份的RMAN配置</h4>
                  <div>
                     <p>建议在<span class="italic">未</span>完成备份的备用数据库中使用这些RMAN配置。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>将RMAN作为目标连接到备用数据库，并连接到恢复目录。</span></li>
                        <li class="stepexpand"><span>在归档日志应用于备用数据库后，启用自动删除归档日志（当使用级联或远程同步实例功能时，这也适用于所有终端数据库）：</span><div><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除政策应用于所有待机;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="SBYDB5055"></a><a id="SBYDB00755"></a><div class="props_rev_3"><a id="GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4" name="GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4"></a><h3 id="SBYDB-GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4" class="sect3"><span class="enumeration_section">12.4</span>备份程序</h3>
               <div>
                  <p>您可以使用RMAN脚本和过程在Oracle Data Guard配置中备份Oracle数据库。</p>
                  <p>请参阅以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-104006BF-5611-44C9-B892-87D140474DD3" title="备用数据库上的快速恢复区域可用作磁带备份的磁盘高速缓存。">使用磁盘作为磁带备份的缓存</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-9102A173-7F1B-46B2-A750-E2599F74305F" title="Oracle的媒体管理层（MML）API允许第三方供应商构建媒体管理器，该软件可与RMAN和供应商的硬件配合使用，以允许备份到磁带驱动器等顺序媒体设备。">直接执行磁带备份</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4__GUID-A38275CC-E493-405E-A445-9E29D19787A4">
                     <p class="notep1">注意：</p>
                     <p>Oracle的最高可用性体系结构（MAA）最佳实践建议在主数据库和备用数据库中进行备份，以便在出现双重中断时减少MTTR，并避免在切换和故障转移时引入新的站点实践。</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4__GUID-B862B1D0-AF45-46D2-84FF-0D3208E7684F">服务器参数文件的备份</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>除SPFILE的备份外，所有备份操作都可以卸载到单个备用数据库。 SPFILE的备份只能还原到备份它们的数据库。</p>
                     <p>对于未备份的数据库，Oracle建议您至少将SPFILE备份到已知的本地磁盘位置。如果需要将SPFILE备份进一步备份到磁带，则可以将它们复制到已配置备份到磁带的数据库站点。然后，可以使用以下RMAN命令在该数据库中对SPFILE备份进行编目：</p><pre class="oac_no_warn" dir="ltr">CATALOG START WITH'&lt;SPFILE backup directory&gt;';</pre><p>然后将SPFILE备份备份到磁带：</p><pre class="oac_no_warn" dir="ltr">BACKUP BACKUPSET ALL;</pre><p>当需要为特定数据库还原SPFILE时，将从磁盘或磁带还原相应的SPFILE备份。</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="SBYDB4857"></a><div class="props_rev_3"><a id="GUID-104006BF-5611-44C9-B892-87D140474DD3" name="GUID-104006BF-5611-44C9-B892-87D140474DD3"></a><h4 id="SBYDB-GUID-104006BF-5611-44C9-B892-87D140474DD3" class="sect4"><span class="enumeration_section">12.4.1</span>使用磁盘作为磁带备份的缓存</h4>
                  <div>
                     <p>备用数据库上的快速恢复区域可用作磁带备份的磁盘高速缓存。</p>
                     <p>磁盘用作备份的主存储，磁带提供长期的归档存储。每天进行增量磁带备份，每周进行一次完整的磁带备份。以下各节介绍了用于执行这些备份的命令。</p>
                  </div><a id="SBYDB4858"></a><div class="props_rev_3"><a id="GUID-88CA9C62-4AFF-4395-B47D-05A145E7EFAE" name="GUID-88CA9C62-4AFF-4395-B47D-05A145E7EFAE"></a><h5 id="SBYDB-GUID-88CA9C62-4AFF-4395-B47D-05A145E7EFAE" class="sect5"><span class="enumeration_section">12.4.1.1</span>使用磁盘作为缓存的每日磁带备份命令</h5>
                     <div>
                        <p>在决定备份策略时，Oracle建议您利用每日增量备份。</p>
                        <p>可以使用最新的增量备份前滚数据文件映像副本，从而始终提供最新的数据文件映像副本。RMAN使用生成的映像副本进行介质恢复，就像使用在系统更改号（SCN）上获取的完整映像副本一样，而无需每天执行数据库的完整映像副本。另一个优点是减少了恢复时间，因为使用最新的块更改更新映像副本，并且需要更少的重做日志以使数据库恢复到当前状态。</p>
                        <p>要实施每日增量备份，将在第一天进行完整数据库备份，然后在第二天进行增量备份。存档的重做日志可用于将数据库恢复到任一天的任何一点。对于第3天及以后，前一天的增量备份将与数据文件副本合并，并进行当前增量备份，从而可以快速恢复到最后一天内的任何点。重做日志可用于将数据库恢复到当天的任何时间点。</p>
                        <p>执行每日备份的脚本如下所示（最后一行，只有在快速恢复区域不用于存储日志时才需要<code class="codeph">DELETE ARCHIVELOG ALL</code> ）：</p><pre class="oac_no_warn" dir="ltr">来自DB_UNIQUE_NAME ALL的RESYNC CATALOG;用TAG'OSS'恢复数据库的复制;备份设备类型磁盘增量级别1用于恢复带有标记'OSS'数据库的副本;备份设备类型磁盘DATAFILECOPY所有没有在任何SCN备份;备份设备类型SBT ARCHIVELOG ALL; BACKUP BACKUPSET ALL;删除ARCHIVELOG ALL;</pre><p>备份控制文件在备份操作结束时自动备份，因为启用了控制文件自动备份。</p>
                        <p>脚本中每个命令的作用说明如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">来自DB_UNIQUE_NAME的RESYNC目录ALL</code></p>
                              <p>重新同步Oracle Data Guard设置中恢复目录已知的所有其他数据库站点（主数据库和其他备用数据库）的信息。要使<code class="codeph">RESYNC CATALOG FROM DB_UNIQUE_NAME</code>正常工作，必须使用Oracle Net服务名称将RMAN连接到目标，并且所有数据库必须使用相同的密码文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">用TAG'OSS'恢复数据库的复制</code></p>
                              <p>通过应用前一天采用的1级增量备份来转发数据库的0级副本。在刚刚显示的示例脚本中，前一天的增量级别1被标记为<code class="codeph">OSS</code> 。此增量由<code class="codeph">BACKUP DEVICE TYPE DISK ...生成<code class="codeph">BACKUP DEVICE TYPE DISK ...DATABASE</code>命令。在运行此命令的第一天，没有前滚，因为还没有增量级别1。<code class="codeph">BACKUP DEVICE TYPE DISK ...创建0级增量<code class="codeph">BACKUP DEVICE TYPE DISK ...DATABASE</code>命令。在第二天再次没有前滚，因为只有0级增量。一个1级增量标记的<code class="codeph">OSS</code>由<code class="codeph">BACKUP DEVICE TYPE DISK ...创建<code class="codeph">BACKUP DEVICE TYPE DISK ...DATABASE</code>命令。在第三天和后几天，使用前一天创建的1级增量标记<code class="codeph">OSS</code>执行前滚。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">备份设备类型磁盘增量级别1用于恢复与标签'OSS'数据库的复制</code></p>
                              <p>创建新的1级增量备份。在运行此命令的第一天，将创建基本数据文件副本。在第二天和随后的几天，这是一级增量。</p>
                           </li>
                           <li><code class="codeph">备份设备类型磁盘DATAFILECOPY所有不在任何SCN备份</code><p>仅备份尚未备份的数据文件。</p>
                           </li>
                           <li>
                              <p><code class="codeph">备份设备类型SBT ARCHIVELOG ALL</code></p>
                              <p>根据删除策略将归档日志备份到磁带。</p>
                           </li>
                           <li>
                              <p><code class="codeph">BACKUP BACKUPSET ALL</code></p>
                              <p>备份由于创建增量备份而创建的任何备份集。</p>
                           </li>
                           <li>
                              <p><code class="codeph">删除ARCHIVELOG ALL</code></p>
                              <p>根据<code class="codeph">CONFIGURE ARCHIVELOG DELETION POLICY</code>命令设置的日志删除策略删除已归档日志。如果存档日志位于快速恢复区域，则在需要更多开放磁盘空间时会自动删除它们。因此，如果您明确要每天删除日志，则只需使用此命令。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="SBYDB4859"></a><div class="props_rev_3"><a id="GUID-66665A86-0B71-41FE-BED0-B9992A405C35" name="GUID-66665A86-0B71-41FE-BED0-B9992A405C35"></a><h5 id="SBYDB-GUID-66665A86-0B71-41FE-BED0-B9992A405C35" class="sect5"><span class="enumeration_section">12.4.1.2</span>使用磁盘作为缓存的每周磁带备份命令</h5>
                     <div>
                        <p>要将所有与恢复相关的文件备份到磁带，请每周使用一次RMAN <code class="codeph">BACKUP RECOVERY FILES</code>命令。
                        </p>
                        <div class="section">
                           <p>这可确保磁盘上的所有当前增量备份，映像副本和归档日志备份都备份到磁带。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="SBYDB4860"></a><div class="props_rev_3"><a id="GUID-9102A173-7F1B-46B2-A750-E2599F74305F" name="GUID-9102A173-7F1B-46B2-A750-E2599F74305F"></a><h4 id="SBYDB-GUID-9102A173-7F1B-46B2-A750-E2599F74305F" class="sect4"><span class="enumeration_section">12.4.2</span>直接对磁带执行备份</h4>
                  <div>
                     <p>Oracle的媒体管理层（MML）API允许第三方供应商构建媒体管理器，该软件可与RMAN和供应商的硬件配合使用，以允许备份到磁带驱动器等顺序媒体设备。</p>
                     <div class="section">
                        <p>介质管理器处理顺序介质（如磁带）的加载，卸载和标记。您必须安装Oracle Secure Backup或第三方媒体管理软件才能将RMAN与顺序媒体设备配合使用。</p>
                        <p>默认情况下，请执行以下步骤直接对磁带执行备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将RMAN连接到备用数据库（作为目标数据库）和恢复目录。</span></li>
                        <li class="stepexpand"><span>执行<code class="codeph">CONFIGURE</code>命令，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">配置默认设备类型为SBT;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>在此方案中，每周进行完整备份，每天在备用数据库上进行增量备份。</p>
                        <div class="infoboxnotealso" id="GUID-9102A173-7F1B-46B2-A750-E2599F74305F__GUID-E3E29B26-407C-4576-81BF-BDF5B06A0E89">
                           <p class="notep1">也可以看看：</p>
                           <p>有关如何配置RMAN以与媒体管理器一起使用的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV132" target="_blank"><span class="italic">，请参见“Oracle数据库备份和恢复用户指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="SBYDB4861"></a><div class="props_rev_3"><a id="GUID-110EF96F-1018-44FE-A7D4-6BED2786424B" name="GUID-110EF96F-1018-44FE-A7D4-6BED2786424B"></a><h5 id="SBYDB-GUID-110EF96F-1018-44FE-A7D4-6BED2786424B" class="sect5"><span class="enumeration_section">12.4.2.1</span>每日备份直接到磁带的命令</h5>
                     <div>
                        <p>用于直接对磁带执行每日备份的RMAN命令会重新同步Oracle Data Guard环境中所有其他数据库的信息。</p>
                        <div class="section">
                           <p>执行以下步骤直接执行磁带的每日备份：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将RMAN连接到备用数据库（作为目标数据库）和恢复管理器。</span></li>
                           <li class="stepexpand"><span>执行以下RMAN命令：</span><div><pre class="oac_no_warn" dir="ltr">来自DB_UNIQUE_NAME ALL的RESYNC CATALOG; BACKUP作为BACKUPSET INCREMENTAL LEVEL 1 DATABASE PLUS ARCHIVELOG;删除ARCHIVELOG ALL;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>这些命令还会创建数据库的1级增量备份，包括所有存档日志。在运行此脚本的第一天，如果未找到0级备份，则会创建0级备份。</p>
                           <p>仅当所有归档日志文件不在快速恢复区域中时，才需要<code class="codeph">DELETE ARCHIVELOG ALL</code>命令。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4862"></a><div class="props_rev_3"><a id="GUID-859B3851-D933-44E0-A114-5430EFD1F662" name="GUID-859B3851-D933-44E0-A114-5430EFD1F662"></a><h5 id="SBYDB-GUID-859B3851-D933-44E0-A114-5430EFD1F662" class="sect5"><span class="enumeration_section">12.4.2.2</span>每周备份直接到磁带的命令</h5>
                     <div>
                        <p>每周一天，直接执行每周备份到磁带。</p>
                        <div class="section">
                           <p>采取以下步骤：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将RMAN连接到备用数据库（作为目标数据库）和恢复目录。</span></li>
                           <li class="stepexpand"><span>执行以下RMAN命令：</span><div><pre class="oac_no_warn" dir="ltr">来自DB_UNIQUE_NAME ALL的RESYNC CATALOG; BACKUP作为BACKUPSET INCREMENTAL LEVEL 0 DATABASE PLUS ARCHIVELOG;删除ARCHIVELOG ALL;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>这些命令重新同步Oracle Data Guard环境中所有其他数据库的信息，并创建包含所有已归档日志的0级数据库备份。</p>
                           <p>仅当所有归档日志文件不在快速恢复区域中时，才需要<code class="codeph">DELETE ARCHIVELOG ALL</code>命令。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB4863"></a><div class="props_rev_3"><a id="GUID-9C54A243-6B84-4755-957E-AFC57B9BC3B6" name="GUID-9C54A243-6B84-4755-957E-AFC57B9BC3B6"></a><h3 id="SBYDB-GUID-9C54A243-6B84-4755-957E-AFC57B9BC3B6" class="sect3"><span class="enumeration_section">12.5</span>在Oracle Data Guard环境中注册和取消注册数据库</h3>
               <div>
                  <p>必须使用<code class="codeph">REGISTER DATABASE</code>命令仅显式注册主数据库。将RMAN连接到恢复目录和主数据库作为<code class="codeph">TARGET</code>后执行此操作。</p>
                  <p>连接到备用数据库或使用<code class="codeph">CONFIGURE DB_UNIQUE_NAME</code>命令配置连接标识符时，会在恢复目录中自动注册新备用数据库。
                  </p>
                  <p>要取消注册有关特定备用数据库的信息，可以使用<code class="codeph">UNREGISTER DB_UNIQUE_NAME</code>命令。从Oracle Data Guard环境中完全删除备用数据库后，还可以在连接到同一Oracle Data Guard环境中的另一个数据库后删除恢复目录中的数据库信息。与未注册的数据库关联的备份仍可供其他数据库使用。您可以使用<code class="codeph">CHANGE BACKUP RESET DB_UNIQUE_NAME</code>命令将这些备份与任何其他现有数据库相关联。
                  </p>
                  <p>当<code class="codeph">UNREGISTER DB_UNIQUE_NAME</code>命令与<code class="codeph">INCLUDING BACKUPS</code>选项一起使用时，与未注册的数据库关联的所有备份文件的元数据也将从恢复目录中取消注册。
                  </p>
               </div>
            </div><a id="SBYDB4864"></a><div class="props_rev_3"><a id="GUID-D13E9A5E-5DBB-4DF4-8534-F1E16FA33618" name="GUID-D13E9A5E-5DBB-4DF4-8534-F1E16FA33618"></a><h3 id="SBYDB-GUID-D13E9A5E-5DBB-4DF4-8534-F1E16FA33618" class="sect3"><span class="enumeration_section">12.6</span>在Oracle Data Guard环境中报告</h3>
               <div>
                  <p>将RMAN <code class="codeph">LIST</code> ， <code class="codeph">REPORT</code>和<code class="codeph">SHOW</code>命令与<code class="codeph">FOR DB_UNIQUE_NAME</code>子句一起使用可以查看有关特定数据库的信息。
                  </p>
                  <p>例如，在连接到恢复目录后，可以使用以下命令显示DBID为1625818158的数据库的信息，并在Oracle Data Guard环境中列出数据库。仅当您未以<code class="codeph">TARGET</code>身份连接到数据库时，才需要<code class="codeph">SET DBID</code>命令。最后三个命令列出了具有<code class="codeph">BOSTON</code>的<code class="codeph">DB_UNIQUE_NAME</code>的数据库的存档日志，数据库文件名和RMAN配置信息。</p><pre class="oac_no_warn" dir="ltr">SET DBID 1625818158;列出数据库的DB_UNIQUE_NAME;列表ARCHIVELOG ALL FOR DB_UNIQUE_NAME BOSTON; DB_UNIQUE_NAME BOSTON的报告模式;显示全部为DB_UNIQUE_NAME波士顿;</pre></div>
            </div><a id="SBYDB4865"></a><div class="props_rev_3"><a id="GUID-4B1696A8-1A90-426C-A620-D5F313365E54" name="GUID-4B1696A8-1A90-426C-A620-D5F313365E54"></a><h3 id="SBYDB-GUID-4B1696A8-1A90-426C-A620-D5F313365E54" class="sect3"><span class="enumeration_section">12.7</span>在Oracle Data Guard环境中执行备份维护</h3>
               <div>
                  <p>Oracle Data Guard环境中的文件（数据文件，存档日志，备份片，映像副本和代理副本）通过使用<code class="codeph">DB_UNIQUE_NAME</code>参数与数据库关联。
                  </p>
                  <p>因此，为Oracle Data Guard环境中的每个数据库提供的<code class="codeph">DB_UNIQUE_NAME</code>值必须是唯一的。此信息以及文件共享属性用于确定在各种RMAN操作期间可以访问哪些文件。
                  </p>
                  <p>文件共享属性指出磁盘上的文件只能在与其关联的数据库中访问，而磁带上的所有文件都假定可供所有数据库访问。RMAN命令（如<code class="codeph">BACKUP</code>和<code class="codeph">RESTORE</code> ）以及其他维护命令根据此假设工作。例如，在数据库中的映像副本的前滚操作期间，仅前滚与数据库相关联的映像副本。与该数据库关联的磁盘上的增量备份和磁带上的任何增量备份用于前滚映像副本。同样，在恢复操作期间，只有与数据库关联的磁盘备份和磁带上的文件才会被视为备份源。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4B1696A8-1A90-426C-A620-D5F313365E54__GUID-C9F3BDAF-8809-4085-BFF6-C79AB0C3306E">
                     <p class="notep1">也可以看看：</p>
                     <p>有关RMAN命令的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF001" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                  </div>
               </div><a id="SBYDB5056"></a><a id="SBYDB5057"></a><a id="SBYDB5058"></a><a id="SBYDB4866"></a><div class="props_rev_3"><a id="GUID-13FC0BEC-C528-47DA-95D5-35A67B3A97A1" name="GUID-13FC0BEC-C528-47DA-95D5-35A67B3A97A1"></a><h4 id="SBYDB-GUID-13FC0BEC-C528-47DA-95D5-35A67B3A97A1" class="sect4"><span class="enumeration_section">12.7.1</span>更改恢复目录中的元数据</h4>
                  <div>
                     <p>RMAN <code class="codeph">CHANGE</code>命令可与各种操作数一起使用，以更改恢复目录中的元数据。
                     </p>
                     <div class="section">
                        <p>例如：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将文件关联从一个备用数据库更改为另一个</p>
                              <p>将<code class="codeph">CHANGE</code>命令与<code class="codeph">RESET DB_UNIQUE_NAME</code>选项一起使用可以更改Oracle Data Guard环境中文件从一个数据库到另一个数据库的关联。当磁盘备份或归档日志从一个数据库传输到另一个数据库并且您希望在它们传输到的数据库上使用它们时， <code class="codeph">CHANGE</code>命令很有用。<code class="codeph">CHANGE</code>命令还可以更改文件从一个数据库到另一个数据库的关联，而无需使用<code class="codeph">FOR DB_UNIQUE_NAME</code>和<code class="codeph">RESET DB_UNIQUE_NAME TO</code>选项直接连接到任一数据库。
                              </p>
                           </li>
                           <li>
                              <p>更改数据库的DB_UNIQUE_NAME初始化参数</p>
                              <p>如果<code class="codeph">DB_UNIQUE_NAME</code>初始化参数的值对数据库发生更改，则必须在Oracle Data Guard环境中进行相同的更改。连接到该数据库实例后，RMAN恢复目录知道<code class="codeph">DB_UNIQUE_NAME</code>的旧值和新值。要合并恢复目录模式中旧值和新值的信息，必须使用RMAN <code class="codeph">CHANGE DB_UNIQUE_NAME</code>命令。如果<code class="codeph">DB_UNIQUE_NAME</code>初始化参数的值更改为数据库，则必须在RMAN中进行相同的更改，以便它知道新的<code class="codeph">DB_UNIQUE_NAME</code> 。例如，执行以下步骤以将<code class="codeph">BOSTON_A</code> <code class="codeph">DB_UNIQUE_NAME</code> <code class="codeph">BOSTON_A</code>为<code class="codeph">BOSTON_B</code> ：</p>
                              <ol>
                                 <li>
                                    <p>在初始化参数文件或SQL中，将<code class="codeph">DB_UNIQUE_NAME</code>初始化参数从<code class="codeph">BOSTON_A</code>为<code class="codeph">BOSTON_B</code> 。</p>
                                 </li>
                                 <li>
                                    <div class="p">在RMAN中，连接到Oracle Data Guard环境中的任何数据库作为目标数据库并连接到恢复目录。然后执行<code class="codeph">CHANGE</code>命令：<pre class="pre codeblock"><code>将BOSTON_A从BOSTON_A更改为BOSTON_B;更改DB_UNIQUE_NAME;</code></pre></div>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>使备份不可用或删除其元数据</p>
                              <p>使用<code class="codeph">CHANGE</code>命令选项（如<code class="codeph">AVAILABLE</code> ， <code class="codeph">UNAVAILABLE</code> ， <code class="codeph">KEEP</code>和<code class="codeph">UNCATALOG</code>使备份可用或不可用于还原和恢复，以及保留或删除其元数据。
                              </p>
                              <div class="infoboxnotealso" id="GUID-13FC0BEC-C528-47DA-95D5-35A67B3A97A1__GUID-14ED5188-25A5-41F3-9B78-D1438EC22667">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关RMAN <code class="codeph">CHANGE</code>命令的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF110" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4867"></a><div class="props_rev_3"><a id="GUID-38EB0163-6F07-4F89-9A17-FC21FD779785" name="GUID-38EB0163-6F07-4F89-9A17-FC21FD779785"></a><h4 id="SBYDB-GUID-38EB0163-6F07-4F89-9A17-FC21FD779785" class="sect4"><span class="enumeration_section">12.7.2</span>删除存档日志或备份</h4>
                  <div>
                     <p>使用RMAN <code class="codeph">DELETE</code>命令删除备份集，映像副本，存档日志或代理副本。
                     </p>
                     <p>要仅删除与特定数据库关联的文件，必须使用带有<code class="codeph">DELETE</code>命令的<code class="codeph">FOR DB_UNIQUE_NAME</code>选项。
                     </p>
                     <p>对于与当前目标数据库关联的所有成功删除的文件（或与任何已知数据库无关的文件），将删除文件元数据。如果无法成功删除文件，则可以使用<code class="codeph">FORCE</code>选项删除文件的元数据。
                     </p>
                     <p>成功删除与其他数据库关联的文件后，还会删除其恢复目录中的元数据。在<code class="codeph">DELETE</code>命令完成时列出与其他数据库关联且无法成功删除的任何文件，以及在与文件关联的数据库中执行相同操作的说明（文件已分组）按数据库）。<code class="codeph">FORCE</code>选项不能用于覆盖此行为。如果您确定删除不可删除文件的元数据不会导致问题，则可以使用<code class="codeph">CHANGE RESET DB_UNIQUE_NAME</code>命令更改文件与数据库关联的元数据，并使用带有<code class="codeph">FORCE</code>选项的<code class="codeph">DELETE</code>命令删除该文件的元数据。
                     </p>
                     <div class="infoboxnotealso" id="GUID-38EB0163-6F07-4F89-9A17-FC21FD779785__GUID-06311517-F1C2-405E-B449-F64CBEBB5E1E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关RMAN <code class="codeph">DELETE</code>命令的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF121" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                     </div>
                  </div>
               </div><a id="SBYDB4868"></a><div class="props_rev_3"><a id="GUID-5C9C8A2E-E23A-4D62-BE5B-2205B5E877CB" name="GUID-5C9C8A2E-E23A-4D62-BE5B-2205B5E877CB"></a><h4 id="SBYDB-GUID-5C9C8A2E-E23A-4D62-BE5B-2205B5E877CB" class="sect4"><span class="enumeration_section">12.7.3</span>验证恢复目录元数据</h4>
                  <div>
                     <p>使用<code class="codeph">CROSSCHECK</code>命令验证和更新恢复目录架构中的文件状态。
                     </p>
                     <p>根据<code class="codeph">CROSSCHECK</code>操作的结果，与当前目标数据库（或任何与任何数据库无关的文件）关联的所有文件的元数据都标记为<code class="codeph">AVAILABLE</code>或<code class="codeph">EXPIRED</code> 。
                     </p>
                     <p>如果成功检查与另一个数据库关联的文件，则其恢复目录中的元数据也将更改为<code class="codeph">AVAILABLE</code> 。在<code class="codeph">CROSSCHECK</code>命令完成时列出与其他数据库关联且无法成功检查的任何文件，以及在与文件关联的数据库中执行相同操作的说明（文件已分组）按网站）。如果您确定配置并且仍希望更改不可用文件的状态元数据，则可以使用<code class="codeph">CHANGE RESET DB_UNIQUE_NAME</code>命令更改文件与数据库关联的元数据，并执行<code class="codeph">CROSSCHECK</code>命令以将状态元数据更新为<code class="codeph">EXPIRED</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-5C9C8A2E-E23A-4D62-BE5B-2205B5E877CB__GUID-9847EC13-4E04-4492-8E7A-55915CAE2BA6">
                        <p class="notep1">也可以看看：</p>
                        <p>有关RMAN <code class="codeph">CROSSCHECK</code>命令的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF119" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB00754"></a><div class="props_rev_3"><a id="GUID-44539CC5-0BAB-47F8-B51F-BFD0A1D6DA40" name="GUID-44539CC5-0BAB-47F8-B51F-BFD0A1D6DA40"></a><h3 id="SBYDB-GUID-44539CC5-0BAB-47F8-B51F-BFD0A1D6DA40" class="sect3"><span class="enumeration_section">12.8</span> Oracle Data Guard环境中的恢复方案</h3>
               <div>
                  <p>这些是Oracle Data Guard环境中可能发生的一些恢复方案。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-1F1D37FE-48A6-46D4-98DB-C0E3707E3BCF" title="您可以通过连接到包含所需文件的物理备用数据库来通过网络还原和恢复文件。">从主数据库或备用数据库中的文件丢失中恢复</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-7D1A6CBF-6E72-4700-87D8-64E534EFAA2B" title="如果当前ACTIVE组或尚未归档的非活动组的所有联机日志成员都丢失，则必须故障转移到备用数据库。">从在线重做日志文件丢失中恢复</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-E8430B01-A852-4EAF-A711-10F3211F36A3" title="主数据库的不完全恢复通常在数据库被逻辑损坏（由用户或应用程序）或从数据库中意外删除表空间或数据文件的情况下完成。">主数据库的不完全恢复</a></p>
                     </li>
                     <li>
                        <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424" title="在主服务器上执行RMAN表空间时间点恢复（TSPITR）后，恢复的数据文件具有新的系统更改编号（SCN），因此被视为主数据库中的新数据文件。">在主要版本的TSPITR或表空间插件之后需要的操作</a></p>
                     </li>
                  </ul>
               </div><a id="SBYDB4869"></a><div class="props_rev_3"><a id="GUID-1F1D37FE-48A6-46D4-98DB-C0E3707E3BCF" name="GUID-1F1D37FE-48A6-46D4-98DB-C0E3707E3BCF"></a><h4 id="SBYDB-GUID-1F1D37FE-48A6-46D4-98DB-C0E3707E3BCF" class="sect4"><span class="enumeration_section">12.8.1</span>从主数据库或备用数据库中的文件丢失中恢复</h4>
                  <div>
                     <p>您可以通过连接到包含所需文件的物理备用数据库来通过网络还原和恢复文件。</p>
                     <p>当您想要使用物理备用数据库上的相应文件恢复主数据库上丢失的数据文件，控制文件或表空间时，这非常有用。您还可以使用相同的进程通过使用主数据库还原物理备用数据库上的文件。</p>
                     <div class="infoboxnote" id="GUID-1F1D37FE-48A6-46D4-98DB-C0E3707E3BCF__GUID-3013E54B-17E9-4350-849F-B2740EC3DE86">
                        <p class="notep1">注意：</p>
                        <p>在之前的版本Oracle数据库<span class="italic">12c</span>中，从在主文件的丢失中恢复，则所使用的RMAN恢复目录和RMAN <code class="codeph">BACKUP</code> ， <code class="codeph">CATALOG DATAFILE</code>和<code class="codeph">SWITCH DATAFILE</code>命令。要从备用数据库上的文件丢失中恢复，您使用了<code class="codeph">RESTORE</code>和<code class="codeph">RECOVER</code>命令。从Oracle Database 12 <span class="italic">c开始，</span>不再需要这些方法。如果您需要有关使用它们的信息，请参阅Oracle Database <span class="italic">11g</span>文档。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-1F1D37FE-48A6-46D4-98DB-C0E3707E3BCF__GUID-52F9483F-E402-4FDD-9D4C-6A91C65753C1">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用RMAN通过网络还原和恢复文件的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV680" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB4873"></a><div class="props_rev_3"><a id="GUID-7D1A6CBF-6E72-4700-87D8-64E534EFAA2B" name="GUID-7D1A6CBF-6E72-4700-87D8-64E534EFAA2B"></a><h4 id="SBYDB-GUID-7D1A6CBF-6E72-4700-87D8-64E534EFAA2B" class="sect4"><span class="enumeration_section">12.8.2</span>从在线重做日志文件丢失中恢复</h4>
                  <div>
                     <p>如果当前<code class="codeph">ACTIVE</code>组或尚未归档的非活动组的所有联机日志成员都丢失，则必须故障转移到备用数据库。
                     </p>
                     <div class="section">
                        <p>请参阅<a href="managing-oracle-data-guard-role-transitions.html#GUID-44F26D5F-E036-4ACD-B8F0-224F5498FBCE" title="Oracle Data Guard配置包含一个在主角色中运行的数据库和一个在备用角色中运行的一个或多个数据库。">角色转换</a>以了解故障转移过程。
                        </p>
                        <p>有关如何在其他情况下从丢失联机重做日志文件中恢复的信息，请参阅“ <a href="../bradv/user-managed-recovery-advanced.html#BRADV229" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB5061"></a><a id="SBYDB5062"></a><a id="SBYDB5063"></a><a id="SBYDB4874"></a><div class="props_rev_3"><a id="GUID-E8430B01-A852-4EAF-A711-10F3211F36A3" name="GUID-E8430B01-A852-4EAF-A711-10F3211F36A3"></a><h4 id="SBYDB-GUID-E8430B01-A852-4EAF-A711-10F3211F36A3" class="sect4"><span class="enumeration_section">12.8.3</span>主数据库的不完全恢复</h4>
                  <div>
                     <p>主数据库的不完全恢复通常在数据库被逻辑损坏（由用户或应用程序）或从数据库中意外删除表空间或数据文件的情况下完成。</p>
                     <div class="section">
                        <p>根据备用数据库实例上的当前数据库检查点SCN，您可以使用以下过程之一来执行主数据库的不完全恢复。所有程序都按照优先顺序排列，从最耗时的程序开始。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8430B01-A852-4EAF-A711-10F3211F36A3__GUID-1CB2F407-B630-4CC0-B37A-98E013FBAF71">使用闪回数据库</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在主数据库上启用闪回数据库功能时，建议的过程是使用闪回数据库，没有数据库文件丢失，并且时间点恢复大于最早的闪回SCN或最早的闪回时间。有关<a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="If an error occurrs on the primary database in an Oracle Data Guard configuration in which the standby database is using real-time apply, then the same error is applied on the standby database. if Flashback Database is enabled, you can revert the primary and standby databases back to their pre-error condition.">使用闪</a>回数据库执行时间点恢复的过程，请参阅<a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="如果备用数据库使用实时应用的Oracle Data Guard配置中的主数据库发生错误，则在备用数据库上应用相同的错误。如果启用了闪回数据库，则可以将主数据库和备用数据库还原为其错误前的状态。">在发布Open Resetlogs语句后</a>使用闪回数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8430B01-A852-4EAF-A711-10F3211F36A3__GUID-F9282BCB-F58D-4E68-AD68-879466B6A190">使用备用数据库实例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>当备用数据库位于所需的不完全恢复时间之后，并且主数据库或备用数据库上未启用闪回数据库时，建议执行此过程：</p>
                        <ol>
                           <li>
                              <p>将备用数据库恢复到所需的时间点。在发出以下命令之前，请务必停止托管重做进程（MRP）：</p><pre class="oac_no_warn" dir="ltr">恢复数据库直到' <span class="italic">时间</span> ';</pre><p>或者，可以使用SCN或日志序列号指定不完整的恢复时间：</p><pre class="oac_no_warn" dir="ltr">RECOVER DATABASE UNTIL SCN <span class="variable" translate="no">incomplete recovery SCN</span> '; RECOVER DATABASE UNTIL LOGSEQ <span class="variable" translate="no">incomplete recovery log sequence number</span> THREAD <span class="variable" translate="no">thread number</span> ;</pre></li>
                           <li>
                              <p>以只读模式打开备用数据库以验证数据库的状态。</p>
                              <p>如果状态不是所需的，请使用LogMiner实用程序查看存档的重做日志文件以查找正确的目标时间或SCN以进行不完全恢复。或者，您可以将备用数据库恢复到您知道的目标时间之前的点，然后以只读模式打开数据库以检查数据的状态。重复此过程，直到验证数据库的状态是否正确。如果您将数据库恢复得太远（通过发生错误的SCN），则无法将其返回到早期的SCN。</p>
                           </li>
                           <li>
                              <p>启用<a id="d31144e3236" class="indexterm-anchor"></a><a id="d31144e3241" class="indexterm-anchor"></a>备用数据库使用SQL <code class="codeph">ALTER DATABASE ACTIVATE STANDBY DATABASE</code>语句。这会将备用数据库转换为主数据库，创建新的resetlogs分支并打开数据库。请参阅<a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" title="Oracle Data Guard allows recovery on a physical standby database to continue after the primary database has been opened with the RESETLOGS option.">通过OPEN RESETLOGS语句恢复</a>以了解备用数据库如何<a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" title="在使用RESETLOGS选项打开主数据库之后，Oracle Data Guard允许在物理备用数据库上进行恢复。">响应</a>新的重置日志分支。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E8430B01-A852-4EAF-A711-10F3211F36A3__GUID-D0C83B59-F397-461E-908E-8DF88C7CE0FC">使用主数据库实例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果所有备用数据库实例已在所需的时间点恢复，并且主数据库或备用数据库上未启用闪回数据库，则这是您唯一的选择。</p>
                        <p>使用以下过程在主数据库上执行不完全恢复：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用LogMiner或其他方法来识别数据库中所有数据都知道良好的时间或SCN。</span></li>
                        <li class="stepexpand"><span>使用时间或SCN，发出以下RMAN命令以执行不完整的数据库恢复，并使用<code class="codeph">RESETLOGS</code>选项打开数据库（在连接到目录数据库和处于<code class="codeph">MOUNT</code>状态的主实例之后）：</span><div><pre class="oac_no_warn" dir="ltr">RUN {SET UNTIL TIME' <span class="italic">时间</span> '; RESTORE DATABASE;恢复数据库; ALTER DATABASE OPEN RESETLOGS;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>完成此过程后，必须在Oracle Data Guard配置中重新建立所有备用数据库实例。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB5429"></a><div class="props_rev_3"><a id="GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424" name="GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424"></a><h4 id="SBYDB-GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424" class="sect4"><span class="enumeration_section">12.8.4</span>主节点上TSPITR或表空间插件后待机所需的操作</h4>
                  <div>
                     <p>在主服务器上执行RMAN表空间时间点恢复（TSPITR）后，恢复的数据文件具有新的系统更改编号（SCN），因此被视为主数据库中的新数据文件。</p>
                     <p>无法在备用数据库中自动创建这些数据文件。</p>
                     <p>同样，当将新插入的表空间添加到主数据库时，数据文件将被视为主数据库中的新数据文件。</p>
                     <p>当重做应用进程遇到这些新文件的创建时，备用数据库上的托管重做进程（MRP）将停止。必须复制所需的新数据文件并将其还原到备用数据库。您可以使用备份或主数据库中的直接副本执行此操作。例如，要复制属于已经过RMAN TSPITR的表空间的所有文件，可以使用以下RMAN命令：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE TABLESPACE &lt;tbs_name1，tbs_name2&gt; FROM SERVICE &lt;tnsalias-of-primary&gt;</pre><p>分配的磁盘通道数是每RMAN配置。因此，如果执行<code class="codeph">CONFIGURE DEVICE TYPE DISK PARALLELISM 4</code> ，则使用4个磁盘通道从主数据库中提取文件。
                     </p>
                     <p>当备用数据库中有新数据文件可用时，请重新启动MRP以继续应用日志。</p>
                     <div class="infoboxnotealso" id="GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424__GUID-DC7926CE-9304-45EE-9975-3FF148B12D51">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关RMAN TSPITR的详细信息，请参见<a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB00752"></a><div class="props_rev_3"><a id="GUID-211E08A4-C19E-4159-80B2-429431314278" name="GUID-211E08A4-C19E-4159-80B2-429431314278"></a><h3 id="SBYDB-GUID-211E08A4-C19E-4159-80B2-429431314278" class="sect3"><span class="enumeration_section">12.9</span>其他备份情况</h3>
               <div>
                  <p>您可以修改其他配置的备份过程，例如备用数据库和主数据库无法共享备份文件时;备用实例仅用于远程存档重做日志文件;或者备用数据库文件名与主数据库不同。</p>
               </div><a id="SBYDB4875"></a><div class="props_rev_3"><a id="GUID-75F78440-2A7C-4FDC-AFF9-CABB440CB651" name="GUID-75F78440-2A7C-4FDC-AFF9-CABB440CB651"></a><h4 id="SBYDB-GUID-75F78440-2A7C-4FDC-AFF9-CABB440CB651" class="sect4"><span class="enumeration_section">12.9.1</span>备用数据库在地理位置上远离共享备份</h4>
                  <div>
                     <p>如果备用数据库彼此相距很远，则主系统或其他备用系统可能无法轻松访问其上的备份。</p>
                     <div class="section">
                        <p>在所有系统上执行数据库的完整备份以执行恢复操作。快速恢复区域可以驻留在主系统和备用系统上;对于主数据库和备用数据库，它不必相同。</p>
                        <p>在此方案中，您仍可以使用<a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-44539CC5-0BAB-47F8-B51F-BFD0A1D6DA40" title="These are some of recovery scenarios that can occur in an Oracle Data Guard environment.">Oracle Data Guard环境</a>中的<a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-44539CC5-0BAB-47F8-B51F-BFD0A1D6DA40" title="这些是Oracle Data Guard环境中可能发生的一些恢复方案。">恢复方案中</a>描述的常规策略，但以下情况除外：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>必须使用本地系统名称标记RMAN创建的备份文件，并使用标记必须用于限制RMAN选择在同一主机上执行的备份的<code class="codeph">RESTORE</code>操作。换句话说， <code class="codeph">BACKUP</code>命令在创建备份时必须使用<code class="codeph">TAG</code> <span class="variable" translate="no">system name</span>选项; <code class="codeph">RESTORE</code>命令必须使用<code class="codeph">FROM TAG</code> <span class="variable" translate="no">system name</span>选项;并且<code class="codeph">RECOVER</code>命令必须使用<code class="codeph">FROM TAG</code> <span class="variable" translate="no">system name</span> <code class="codeph">ARCHIVELOG TAG</code> <span class="variable" translate="no">system name</span>选项。
                              </p>
                           </li>
                           <li>
                              <p>备用站点的灾难恢复：</p>
                              <ol>
                                 <li>
                                    <p>使用备用数据库之前运行的相同参数文件，以<code class="codeph">NOMOUNT</code>状态启动备用实例。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用SQL <code class="codeph">ALTER DATABASE CREATE STANDBY CONTROLFILE AS</code> <span class="variable" translate="no">filename</span>语句在主实例上创建备用控制文件，并使用创建的控制文件挂载备用实例。
                                    </p>
                                 </li>
                                 <li>
                                    <p>发出以下RMAN命令以还原和恢复数据库文件：</p><pre class="oac_no_warn" dir="ltr">从TAG' <span class="variable" translate="no">system name</span> '恢复数据库';从TAG中恢复数据库' <span class="variable" translate="no">system name</span> 'ARCHIVELOG TAG' <span class="variable" translate="no">system name</span> ';</pre></li>
                                 <li>
                                    <p>重新启动重做应用。</p>
                                 </li>
                              </ol>
                           </li>
                        </ul>
                        <p>备用实例获取剩余的归档重做日志文件。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4876"></a><div class="props_rev_3"><a id="GUID-BA288622-6D29-444E-ACD6-7CFC293C32D5" name="GUID-BA288622-6D29-444E-ACD6-7CFC293C32D5"></a><h4 id="SBYDB-GUID-BA288622-6D29-444E-ACD6-7CFC293C32D5" class="sect4"><span class="enumeration_section">12.9.2</span>备用数据库不包含用作FAL服务器的数据文件</h4>
                  <div>
                     <p>FAL服务器可用作所有归档重做日志文件的备份源，从而将归档重做日志文件的备份卸载到FAL服务器。</p>
                     <div class="section">
                        <p>使用“ <a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-410FEFAD-7805-405A-8C02-B9D8F74C60F4" title="您可以使用RMAN脚本和过程在Oracle Data Guard配置中备份Oracle数据库。">备份</a>过程”中描述的相同过程，但不能对FAL服务器运行备份数据库文件的RMAN命令。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4877"></a><div class="props_rev_3"><a id="GUID-75A2D339-D737-44A1-B0E0-3BF8443D2FA4" name="GUID-75A2D339-D737-44A1-B0E0-3BF8443D2FA4"></a><h4 id="SBYDB-GUID-75A2D339-D737-44A1-B0E0-3BF8443D2FA4" class="sect4"><span class="enumeration_section">12.9.3</span>备用数据库文件名与主数据库不同</h4>
                  <div>
                     <p>从Oracle Database <span class="italic">11g开始</span> ，恢复目录可以重新同步每个备用数据库站点的文件名。
                     </p>
                     <p>但是，如果从未重新同步的主数据库和备用数据库上的数据库文件名不同，则您使用的<code class="codeph">RESTORE</code>和<code class="codeph">RECOVER</code>命令略有不同。要获取备用数据库上的实际数据文件名，请查询<code class="codeph">V$DATAFILE</code>视图，并为数据库中的所有数据文件指定<code class="codeph">SET NEWNAME</code>选项：</p><pre class="oac_no_warn" dir="ltr">运行{ <span class="variable" translate="no">existing file location for file#1</span>设置NEWNAME 1到'来自V $ DATAFILE'的<span class="variable" translate="no">existing file location for file#1</span>的<span class="variable" translate="no">existing file location for file#1</span> ';将DATAFILE的NEWNAME设置为'来自V $ DATAFILE'的<span class="variable" translate="no">existing file location for file#2</span>的<span class="variable" translate="no">existing file location for file#2</span> '; ......为DATAFILE设置NEWNAME <span class="variable" translate="no">n</span> '从V $ DATAFILE'到' <span class="variable" translate="no">existing file location for file#n</span> #n的<span class="variable" translate="no">existing file location for file#n</span> '; RESTORE {DATAFILE &lt; <span class="variable" translate="no">n,m,…</span> &gt; | TABLESPACE <span class="variable" translate="no">tbs_name_1, 2, …</span> |数据库; SWITCH DATAFILE ALL; RECOVER DATABASE {NOREDO}; }</pre><p>同样，您使用RMAN <code class="codeph">DUPLICATE</code>命令的<code class="codeph">SET NEWNAME</code>选项在备用数据库创建期间指定新文件名。或者您可以设置<code class="codeph">LOG_FILE_NAME_CONVERT</code>和<code class="codeph">DB_FILE_NAME_CONVERT</code>参数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-75A2D339-D737-44A1-B0E0-3BF8443D2FA4__GUID-ED37F32E-B0F2-4901-A7F2-901C835FB989">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="examples-of-using-oracle-data-guard.html#GUID-6FB574E5-2F3A-4C9E-A3F0-7C9154B0F540" title="When you create standby databases, there are additional steps that must be performed if the primary database uses Oracle Managed Files (OMF) or Oracle Automatic Storage Management (Oracle ASM).">在备用数据库</a>上设置<code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">DB_CREATE_FILE_DEST</code>参数时， <a href="examples-of-using-oracle-data-guard.html#GUID-6FB574E5-2F3A-4C9E-A3F0-7C9154B0F540" title="创建备用数据库时，如果主数据库使用Oracle托管文件（OMF）或Oracle自动存储管理（Oracle ASM），则必须执行其他步骤。">创建使用OMF或Oracle ASM的备用数据库，</a>以获取有关优先规则的信息</p>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB5457"></a><div class="props_rev_3"><a id="GUID-F0EB4F8E-7D2F-4674-9A5B-AABC368D8F11" name="GUID-F0EB4F8E-7D2F-4674-9A5B-AABC368D8F11"></a><h3 id="SBYDB-GUID-F0EB4F8E-7D2F-4674-9A5B-AABC368D8F11" class="sect3"><span class="enumeration_section">12.10</span>通过网络恢复和恢复文件</h3>
               <div>
                  <p>从Oracle Database 12 <span class="italic">c开始</span> ，RMAN允许您通过网络连接到包含所需文件的物理备用数据库来还原或恢复文件。
                  </p>
                  <p>您可以还原整个数据库，数据文件，控制文件，spfile或表空间。在需要同步主数据库和备用数据库的情况下，通过网络还原文件非常有用。</p>
                  <p>RMAN使用<code class="codeph">RESTORE</code>命令的<code class="codeph">FROM</code> <code class="codeph">SERVICE</code>子句从物理备用数据库通过网络还原数据库文件。<code class="codeph">FROM</code> <code class="codeph">SERVICE</code>子句提供必须从中还原文件的物理备用数据库的服务名称。在还原操作期间，RMAN在物理备用数据库上创建需要还原的文件的备份集，然后通过网络将这些备份集传输到目标数据库。
                  </p>
                  <div class="infoboxnote" id="GUID-F0EB4F8E-7D2F-4674-9A5B-AABC368D8F11__GUID-063A5B63-188F-4B0E-80D3-E27100F43128">
                     <p class="notep1">注意：</p>
                     <p>在Oracle数据库<span class="italic">12c</span>中之前的版本中，还原和恢复文件在网络上，你使用的<a id="d31144e3944" class="indexterm-anchor"></a><a id="d31144e3946" class="indexterm-anchor"></a><a id="d31144e3950" class="indexterm-anchor"></a> RMAN <code class="codeph">BACKUP INCREMENTAL FROM SCN</code>命令，用于在备用数据库的当前SCN上启动的主数据库上创建备份，然后用于及时向前滚动备用数据库。从Oracle Database 12 <span class="italic">c开始，</span>不需要该手动，多步骤方法。如果您需要有关使用该方法的信息，请参阅Oracle Database <span class="italic">11g</span>文档。
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-F0EB4F8E-7D2F-4674-9A5B-AABC368D8F11__GUID-B8967DE5-3197-42F7-9165-98AABB3EAC1E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用RMAN通过网络还原和恢复文件的详细信息，请参见<a href="../bradv/rman-recovery-advanced.html#BRADV680" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                        </li>
                        <li>
                           <p>有关使用跨平台增量备份减少可传输表空间停机时间的信息，请访问<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> My Oracle Support说明2005729.1。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-53AF8403-7ECC-4329-966E-965FDBFB4455" name="GUID-53AF8403-7ECC-4329-966E-965FDBFB4455"></a><h3 id="SBYDB-GUID-53AF8403-7ECC-4329-966E-965FDBFB4455" class="sect3"><span class="enumeration_section">12.11</span>使用一个命令滚动待机</h3>
               <div>
                  <p>从Oracle Database 18c开始，您可以使用一个RMAN命令<code class="codeph">RECOVER STANDBY DATABASE</code>通过网络刷新备用数据库。</p>
                  <p><code class="codeph">RECOVER STANDBY DATABASE</code>命令重新启动备用实例，从主数据库刷新控制文件，并自动重命名数据文件，临时文件和联机日志。它还原已添加到主数据库的新数据文件，并将备用数据库恢复到当前时间。
                  </p>
                  <p>使用<code class="codeph">RECOVER STANDBY DATABASE</code>命令刷新备用数据库时，可以指定<code class="codeph">FROM SERVICE</code>子句或<code class="codeph">NOREDO</code>子句。<code class="codeph">FROM SERVICE</code>子句指定主服务的名称。<code class="codeph">NOREDO</code>子句指定应该用于刷新备份，这允许备用数据库前滚到特定时间或SCN。</p>
                  <p>在尝试与主数据库同步之前，必须在备用数据库上手动停止MRP。</p>
                  <p>以下是使用<code class="codeph">RECOVER STANDBY DATABASE</code>命令的示例。它显示了<code class="codeph">PFILE</code>子句的可选用法，以指定备用数据库的参数文件（在spfile不可用时使用）。
                  </p><pre class="pre codeblock"><code>从服务中恢复STANDBY数据库service_name PFILE = pfile_location;</code></pre><div class="infoboxnotealso" id="GUID-53AF8403-7ECC-4329-966E-965FDBFB4455__GUID-D8EAEF1D-6BE6-4B7F-8B25-AC2D6B3D51D8">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用<code class="codeph">RECOVER STANDBY DATABASE</code>命令刷新物理备用数据库以及对主数据库所做更改的更多信息，请<code class="codeph">RECOVER STANDBY DATABASE</code> <a href="../bradv/rman-recovery-advanced.html#BRADV-GUID-828A4953-3F7E-4975-ADA4-5469D6794BB0" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a> 。</p>
                        </li>
                     </ul> 
                  </div>
               </div>
            </div><a id="SBYDB5261"></a><div class="props_rev_3"><a id="GUID-72F008A1-527F-41DB-89CD-623FA06D0420" name="GUID-72F008A1-527F-41DB-89CD-623FA06D0420"></a><h3 id="SBYDB-GUID-72F008A1-527F-41DB-89CD-623FA06D0420" class="sect3"><span class="enumeration_section">12.12</span> RMAN在Oracle Data Guard环境中对CDB的支持</h3>
               <div>
                  <p>RMAN支持备用数据库中多租户容器数据库（CDB）的时间点恢复（PITR）。（单个可插拔数据库（PDB）没有自己的备用数据库。）</p>
                  <p>这是RMAN在备用数据库中提供完整数据库恢复和完整数据文件恢复的支持。</p>
                  <p>要在备用数据库上执行CDB PITR，请以root身份连接到CDB，并根据需要发出RMAN <code class="codeph">BACKUP</code> ， <code class="codeph">RESTORE</code>和<code class="codeph">RECOVER</code>命令。
                  </p>
                  <p>请注意，在备用数据库上执行CDB PITR时，任何在CDB PITR启用之前处于禁用状态的可插拔数据库（PDB）。要返回PDB为禁用状态，连接到它，确保它关闭（ <code class="codeph">OPEN_MODE</code>列<code class="codeph">V$PDBS</code>视图显示的值<code class="codeph">MOUNTED</code> ），然后执行SQL语句<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">DISABLE</code> <code class="codeph">RECOVERY</code> 。</p>
                  <p><code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">DISABLE</code> <code class="codeph">RECOVERY</code>语句将属于PDB的所有数据文件脱机并禁用PDB的恢复。在再次启用PDB之前，属于PDB的数据文件不属于任何恢复会话。禁用恢复时创建的任何新数据文件都将创建为未命名文件并标记为脱机。
                  </p>
                  <p>提起这属于PDB重新联机所有数据文件，并使其恢复，连接到它，确保它被关闭（ <code class="codeph">OPEN_MODE</code>列<code class="codeph">V$PDBS</code>视图显示的值<code class="codeph">MOUNTED</code> ），并发出SQL语句<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">ENABLE</code> <code class="codeph">RECOVERY</code> 。</p>
                  <p>要检查PDB上是启用还是禁用恢复，请按如下方式查询<code class="codeph">V$PDBS</code>视图：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT RECOVERY_STATUS FROM V $ PDBS;</pre><div class="section">
                     <p class="subhead2" id="GUID-72F008A1-527F-41DB-89CD-623FA06D0420__GUID-A86DE91D-C851-4188-8BB4-9E2D47B77BF4">闪回PDB</p>
                     <p>如Oracle数据库<span class="italic">12c的</span>第2版（12.2.0.1）的，则可以使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令（可通过SQL或恢复管理器），以在一个特定的PDB执行闪回操作。您可以闪回到特定还原点 - 系统更改号（SCN）的别名 - 过去不会影响CDB中的其他PDB。 （在PDB上执行此类操作类似于非CDB中的<code class="codeph">FLASHBACK DATABASE</code> 。）
                     </p>
                     <p>您还可以在备用数据库上闪回PDB。实际上，在备用数据库上闪回PDB会将PDB的数据文件倒回到先前的某个时间点，就像恢复PDB的备份一样。在备用数据库上闪回PDB允许备用数据库在主数据库上执行PDB PITR /闪回操作后快速跟随主数据库，如主数据库上的<a href="examples-of-using-oracle-data-guard.html#GUID-8D948A24-A3B7-4E4F-917A-00B047CF3CAF" title="在主服务器上执行PDB PITR或PDB闪回后，您可以还原PDB或闪回备用服务器上的PDB以使备用服务器跟随主服务器。">PDB PITR后备用操作所需的操作中所述</a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-72F008A1-527F-41DB-89CD-623FA06D0420__FILESTHATAREBROUGHTONLINEOROFFLINEA-43A25B1E">
                        <p class="notep1">注意：</p>
                        <p>由于<code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> <code class="codeph">[</code> <code class="codeph">ENABLE</code> <code class="codeph">|</code>而导致联机或脱机的文件即使您将数据库闪回到执行操作之前的某个点， <code class="codeph">DISABLE</code> <code class="codeph">]</code>操作仍保持该状态。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-72F008A1-527F-41DB-89CD-623FA06D0420__ACTIONSNEEDEDONASTANDBYAFTERAPDBPIT-43A25B1E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="examples-of-using-oracle-data-guard.html#GUID-8D948A24-A3B7-4E4F-917A-00B047CF3CAF" title="After you perform a PDB PITR or PDB Flashback on a primary, you can either restore the PDB or flashback the PDB on the standby to let the standby follow the primary.">PDB PITR后备用时所需的操作在主服务器</a>上获取有关<a href="examples-of-using-oracle-data-guard.html#GUID-8D948A24-A3B7-4E4F-917A-00B047CF3CAF" title="在主服务器上执行PDB PITR或PDB闪回后，您可以还原PDB或闪回备用服务器上的PDB以使备用服务器跟随主服务器。">主服务器</a>上PDB PITR后备用服务器所需操作的信息</p>
                           </li>
                           <li>
                              <p><a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424" title="After an RMAN tablespace point-in-time recovery (TSPITR) is performed at the primary, the recovered data files have a new system change number (SCN), and are therefore treated like new data files at the primary.">在主服务器</a>上的TSPITR或表空间插件之后所需的操作，以获取有关<a href="using-RMAN-in-oracle-data-guard-configurations.html#GUID-2B3CB228-F8AD-4FE0-8C3B-BEED91DFB424" title="在主服务器上执行RMAN表空间时间点恢复（TSPITR）后，恢复的数据文件具有新的系统更改编号（SCN），因此被视为主数据库中的新数据文件。">在主服务器</a>上的TSPITR或表空间插件之后备用服务器上所需操作的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00629.XML-DB-repository-events.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use Oracle XML DB Repository to store and access data of any kind, in the form of repository resources. You can access repository data from any application. Sometimes your application needs to perform certain actions whenever a particular repository operation occurs. You can do this using repository events."></meta>
      <meta name="description" content="You can use Oracle XML DB Repository to store and access data of any kind, in the form of repository resources. You can access repository data from any application. Sometimes your application needs to perform certain actions whenever a particular repository operation occurs. You can do this using repository events."></meta>
      <title>Oracle XML DB存储库事件</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can use Oracle XML DB Repository to store and access data of any kind, in the form of repository resources. You can access repository data from any application. Sometimes your application needs to perform certain actions whenever a particular repository operation occurs. You can do this using repository events."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="user-defined-repository-metadata.html" title="Previous" type="text/html"></link>
      <link rel="next" href="how-to-write-XML-DB-applications-in-Java.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="user-defined-repository-metadata.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="how-to-write-XML-DB-applications-in-Java.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle XML DB存储库事件</li>
            </ol>
            <a id="GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" name="GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532"></a><a id="ADXDB2580"></a>
            
            <h2 id="ADXDB-GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" class="sect2"><span class="enumeration_chapter">30个</span> Oracle XML DB存储库事件</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用Oracle XML DB Repository以存储库资源的形式存储和访问任何类型的数据。您可以从任何应用程序访问存储库数据。有时您的应用程序需要在发生特定存储库操作时执行某些操作。您可以使用存储库事件执行此操作。</p>
               <div class="section"></div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-33531811-B433-4257-A176-88D7AAAD48EC">存储库事件概述</a><br>当与存储库操作相关联的事件发生时，您的应用程序可以执例如，您可能希望在删除资源时执行move-to-wastebasket或其他备份操作。
                  </li>
                  <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1">可能的存储库事件</a><br>存储库操作与预定义事件相关联。除了渲染操作之外，事件都是前后对。
                  </li>
                  <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-5821696E-5128-4221-9E9F-D36E2ACE5834">存储库操作和事件</a><br>使用不同的Oracle XML DB Repository操作可以发生相同的存储库事件，并且给定的存储库操作可以生成多个存储库事件。
                  </li>
                  <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-C4139224-FF34-4B6D-9B68-481FA41E634C">存储库事件处理程序注意事项</a><br>列出了一些注意事项，用于定义Oracle XML DB Repository事件的处理程序。
                  </li>
                  <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119">存储库事件的配置</a><br>在资源配置文件中，使用元素<code class="codeph">event-listeners</code> （元素<code class="codeph">ResConfig</code>子）来配置Oracle XML DB存储库事件处理。
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="configuration-of-XML-DB-repository.html#GUID-E44B59D4-7A7E-4303-ACE3-B801797B06AF" title="Oracle XML DB Repository的整体配置适用于所有存储库资源。它不包括配置用于处理事件或管理XLink和XInclude处理的参数。您使用资源配置文件来配置资源。">配置Oracle XML DB存储库</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5591"></a><div class="props_rev_3"><a id="GUID-33531811-B433-4257-A176-88D7AAAD48EC" name="GUID-33531811-B433-4257-A176-88D7AAAD48EC"></a><h3 id="ADXDB-GUID-33531811-B433-4257-A176-88D7AAAD48EC" class="sect3"><span class="enumeration_section">30.1</span>存储库事件概述</h3>
               <div>
                  <p>当与存储库操作相关联的事件发生时，您的应用程序可以执例如，您可能希望在删除资源时执行move-to-wastebasket或其他备份操作。</p>
                  <p>存储库资源操作包括创建，删除，锁定，解锁，呈现，链接，取消链接，置于版本控制，签入，签出，取消选中（还原签出版本），打开和更新。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-8D76D959-A3B7-4401-9024-ADB29A703B36">存储库事件：用例</a><br>可以使用存储库事件的示例包括将资源移动到废纸篓并根据其MIME类型对资源进行分类。
                     </li>
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-9CC45EFA-9CBF-415D-A150-911F0A64A087">存储库事件和数据库触发器</a><br>您无法使用数据库触发器让应用程序对存储库操作做出反应。给定的存储库操作可以包含多个底层内部表的多个数据库操作。由于这些基础表是Oracle XML DB的内部表，因此无法轻松将它们映射到特定的存储库操作。
                     </li>
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-65551F91-CDC8-4053-A2F6-E949027BD604">存储库事件监听器和事件处理程序</a><br>每个存储库操作都与事件相关联。您的应用程序可以为特定资源或整个存储库配置事件侦听器。侦听器可以受节点存在前提条件的限制。侦听器是一组PL / SQL或Java处理程序，每个处理程序处理一个事件。
                     </li>
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-AC610F25-FF1F-418E-8F92-515C219E9523">存储库事件配置</a><br>存储库事件配置涉及定义资源配置文件并定义它们的处理顺序。这些文件定义了事件监听器。此类配置适用于整个存储库的各个资源和事件的事件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" title="您可以使用Oracle XML DB Repository以存储库资源的形式存储和访问任何类型的数据。您可以从任何应用程序访问存储库数据。有时您的应用程序需要在发生特定存储库操作时执行某些操作。您可以使用存储库事件执行此操作。">Oracle XML DB存储库事件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5592"></a><div class="props_rev_3"><a id="GUID-8D76D959-A3B7-4401-9024-ADB29A703B36" name="GUID-8D76D959-A3B7-4401-9024-ADB29A703B36"></a><h4 id="ADXDB-GUID-8D76D959-A3B7-4401-9024-ADB29A703B36" class="sect4"><span class="enumeration_section">30.1.1</span>存储库事件：用例</h4>
                  <div>
                     <p>可以使用存储库事件的示例包括将资源移动到废纸篓并根据其MIME类型对资源进行分类。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic">废纸篓 -</span>您可以使用<code class="codeph">UnLink</code>预事件处理程序将资源有效地移动到废纸篓而不是删除它。在删除原始链接之前，在废纸篓文件夹中创建链接。废纸篓中的链接可确保不删除资源。当您随后从废纸篓取消删除资源时，可以再次创建原始链接并删除废纸篓链接。废纸篓链接名称可以与要删除的链接的名称不同，因为某个路径上的资源可以从该路径多次取消链接。然后废纸篓将具有与该路径相对应的多个链接，具有不同的链接属性并且可能指向不同的资源。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">分类 -</span>应用程序可能会根据MIME类型或其他属性对其管理的资源进行分类。它可以通过维护来自存储库文件夹<code class="codeph">/my-app/gif</code> ， <code class="codeph">/my-app/txt</code>和<code class="codeph">/my-app/xml</code>链接来跟踪GIF，文本和XML文件。三个事件后的处理程序可以在这里使用： <code class="codeph">LinkIn</code> ， <code class="codeph">UnlinkIn</code>和<code class="codeph">Update</code> 。<code class="codeph">LinkIn</code>事件后处理程序将检查资源并在相应的类别文件夹中创建链接（如果尚未存在）。<code class="codeph">UnlinkIn</code>事件后处理程序将从类别文件夹中删除该链接。如果类别更改， <code class="codeph">Update</code>事件后处理程序将有效地将资源从一个类别文件夹移动到另一个类别文件夹。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-33531811-B433-4257-A176-88D7AAAD48EC" title="当与存储库操作相关联的事件发生时，您的应用程序可以执例如，您可能希望在删除资源时执行move-to-wastebasket或其他备份操作。">存储库事件概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5593"></a><div class="props_rev_3"><a id="GUID-9CC45EFA-9CBF-415D-A150-911F0A64A087" name="GUID-9CC45EFA-9CBF-415D-A150-911F0A64A087"></a><h4 id="ADXDB-GUID-9CC45EFA-9CBF-415D-A150-911F0A64A087" class="sect4"><span class="enumeration_section">30.1.2</span>存储库事件和数据库触发器</h4>
                  <div>
                     <p>您无法使用数据库触发器让应用程序对存储库操作做出反应。给定的存储库操作可以包含多个底层内部表的多个数据库操作。由于这些基础表是Oracle XML DB的内部表，因此无法轻松将它们映射到特定的存储库操作。</p>
                     <p>例如，内部表<code class="codeph">XDB$H_INDEX</code>可能由数据库更新操作（如果更改ACL）或链接操作更新。即使在您可能使用数据库触发器完成相同操作的情况下，您也不希望这样做：存储库事件是比基础表上的一组数据库触发器更高级别的抽象。
                     </p>
                     <p>发生存储库事件时，可以将与操作关联的信息（例如，使用的资源路径）传递到相应的事件处理程序。使用数据库触发器无法获得此类信息。</p>
                     <p>存储库事件和数据库触发器都可以应用于XML数据。例如，您可以在<code class="codeph">XMLType</code>表上使用触发器。但是，如果<code class="codeph">XMLType</code>表也是存储库表（启用了层次结构），则不要在事件处理程序中复制应用于表的任何触发器代码。否则，该代码执行两次。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-33531811-B433-4257-A176-88D7AAAD48EC" title="当与存储库操作相关联的事件发生时，您的应用程序可以执例如，您可能希望在删除资源时执行move-to-wastebasket或其他备份操作。">存储库事件概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5594"></a><div class="props_rev_3"><a id="GUID-65551F91-CDC8-4053-A2F6-E949027BD604" name="GUID-65551F91-CDC8-4053-A2F6-E949027BD604"></a><h4 id="ADXDB-GUID-65551F91-CDC8-4053-A2F6-E949027BD604" class="sect4"><span class="enumeration_section">30.1.3</span>存储库事件监听器和事件处理程序</h4>
                  <div>
                     <p>每个存储库操作都与事件相关联。您的应用程序可以为特定资源或整个存储库配置事件侦听器。侦听器可以受节点存在前提条件的限制。侦听器是一组PL / SQL或Java处理程序，每个处理程序处理一个事件。</p>
                     <p></p>
                     <p>存储库<strong class="term">事件侦听器</strong>是Java类或PL / SQL包或对象类型。它包含一组PL / SQL过程或Java方法，每个过程称为<strong class="term">事件处理程序</strong> 。
                     </p>
                     <p>通过将<strong class="term">资源配置文件</strong>映射到<strong class="term">资源，可以</strong>将存储库事件侦听器与资源相关联。您使用PL / SQL包<code class="codeph">DBMS_RESCONFIG</code>来操作资源配置文件，包括将它们与它们配置的资源相关联。特别是，PL / SQL函数<code class="codeph">DBMS_RESCONFIG.getListeners</code>列出给定资源的所有事件侦听器。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-33531811-B433-4257-A176-88D7AAAD48EC" title="当与存储库操作相关联的事件发生时，您的应用程序可以执例如，您可能希望在删除资源时执行move-to-wastebasket或其他备份操作。">存储库事件概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5595"></a><div class="props_rev_3"><a id="GUID-AC610F25-FF1F-418E-8F92-515C219E9523" name="GUID-AC610F25-FF1F-418E-8F92-515C219E9523"></a><h4 id="ADXDB-GUID-AC610F25-FF1F-418E-8F92-515C219E9523" class="sect4"><span class="enumeration_section">30.1.4</span>存储库事件配置</h4>
                  <div>
                     <p>存储库事件配置涉及定义资源配置文件并定义它们的处理顺序。这些文件定义了事件监听器。此类配置适用于整个存储库的各个资源和事件的事件。</p>
                     <p>可以通过多个资源配置文件配置给定资源。它们存储在<strong class="term">资源配置列表中</strong> ，并按列表顺序处理。整个存储库的事件也可以由多个资源配置文件配置。同样，存储库也有一个资源配置列表。为整个存储库配置的事件处理在任何特定于资源的事件处理之前生效。在任何特定于资源的事件之前处理所有适用的存储库范围的事件。
                     </p>
                     <p>给定的资源配置文件可以为其配置的资源定义多个事件侦听器，每个事件侦听器都可以定义多个事件处理程序。</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="XML-DB-repository-events.html#GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" title="在资源配置文件中，使用元素事件侦听器（元素ResConfig的子）来配置Oracle XML DB存储库事件处理。">存储库事件的配置</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AC610F25-FF1F-418E-8F92-515C219E9523__GUID-E13A1B35-9ADA-455A-9100-98BAF411026F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="configuration-of-XML-DB-repository.html#GUID-5ADEA709-733D-4E05-933A-AB1E7262D8AA" title="您可以通过将资源配置文件与资源配置文件相关联来为任何目的配置Oracle XML DB资源库资源，该资源配置文件定义资源的可配置参数。资源配置文件本身是Oracle XML DB Repository中的资源。">资源配置文件</a> ，了解有关资源配置和资源配置列表的一般信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-33531811-B433-4257-A176-88D7AAAD48EC" title="当与存储库操作相关联的事件发生时，您的应用程序可以执例如，您可能希望在删除资源时执行move-to-wastebasket或其他备份操作。">存储库事件概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5597"></a><a id="ADXDB5596"></a><div class="props_rev_3"><a id="GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1" name="GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1"></a><h3 id="ADXDB-GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1" class="sect3"><span class="enumeration_section">30.2</span>可能的存储库事件</h3>
               <div>
                  <p>存储库操作与预定义事件相关联。除了渲染操作之外，事件都是前后对。</p>
                  <p>呈现操作与单个存储库事件相关联。除了呈现之外，所有存储库操作都与一<span class="italic">对</span>或多<span class="italic">对</span>事件相关联。
                  </p>
                  <p>例如，资源创建与三对事件相关联，事件按以下顺序发生：</p>
                  <ol>
                     <li>
                        <p>预创作活动</p>
                     </li>
                     <li>
                        <p>创作后的活动</p>
                     </li>
                     <li>
                        <p>预链接事件</p>
                     </li>
                     <li>
                        <p>预链接到事件</p>
                     </li>
                     <li>
                        <p>链接后事件</p>
                     </li>
                     <li>
                        <p>后链接事件</p>
                     </li>
                  </ol>
                  <p><a href="XML-DB-repository-events.html#GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1__BABHJGBH" title="此表列出了与每个存储库操作关联的事件。它们的顺序在处理程序列中指示。">表30-1</a>列出了与每个存储库操作关联的事件。它们的顺序在处理程序列中指示。
                  </p>
                  <div class="tblformalwide" id="GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1__BABHJGBH">
                     <p class="titleintable">表30-1预定义的存储库事件</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="预定义的存储库事件" width="100%" border="1" summary="This table lists the events associated with each repository operation. Their order is indicated in the handler columns. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d146411e511">存储库事件类型</th>
                              <th align="left" valign="bottom" width="36%" id="d146411e514">描述</th>
                              <th align="left" valign="bottom" width="23%" id="d146411e517">预处理程序执行</th>
                              <th align="left" valign="bottom" width="21%" id="d146411e520">后处理程序执行</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e525" headers="d146411e511 ">
                                 <p><code class="codeph">给予</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e525 d146411e514 ">
                                 <p><code class="codeph">Render</code>事件仅针对<span class="italic">文件</span>资源发生，永远不会针对文件夹资源发生。
                                 </p>
                                 <p>使用以下任一方法访问资源内容时发生：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>协议</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">XDBURIType</code>方法<code class="codeph">getCLOB()</code> ， <code class="codeph">getBLOB()</code>和<code class="codeph">getXML()</code></p>
                                    </li>
                                 </ul>
                                 <p>使用以下任何一项访问资源内容时<span class="italic">不会</span>发生：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">选择 ...来自RESOURCE_VIEW</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">XDBURIType</code>方法<code class="codeph">getResource()</code></p>
                                    </li>
                                 </ul>
                                 <p><code class="codeph">Render</code>事件只有一个处理程序可以设置渲染输出。调用<code class="codeph">setRenderStream</code>或<code class="codeph">setRenderPath</code>的第一个处理程序控制渲染。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e525 d146411e517 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e525 d146411e520 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e592" headers="d146411e511 ">
                                 <p><code class="codeph">创建</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e592 d146411e514 ">
                                 <p>在创建资源时发生。执行的前处理程序和后处理程序是在新资源的文件夹上定义的处理程序。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e592 d146411e517 ">
                                 <p>在预解析之后，在验证父资源ACL并锁定之后，以及在将默认值分配给未定义的属性之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e592 d146411e520 ">
                                 <p>将资源插入系统资源表后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e606" headers="d146411e511 ">
                                 <p><code class="codeph">删除</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e606 d146411e514 ">
                                 <p>从磁盘中删除资源及其内容时发生，即资源<code class="codeph">REF</code>计数为零（0）时发生。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e606 d146411e517 ">
                                 <p>验证资源ACL和锁之后以及从磁盘中删除资源之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e606 d146411e520 ">
                                 <p>从磁盘中删除资源及其内容后，触摸父文件夹后更新其上一个修改器和修改时间。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e623" headers="d146411e511 ">
                                 <p><code class="codeph">更新</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e623 d146411e514 ">
                                 <p>在磁盘上更新资源时发生。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e623 d146411e517 ">
                                 <p>验证资源ACL和锁定之后以及更新上一个修饰符和修改时间之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e623 d146411e520 ">
                                 <p>将资源写入磁盘后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e637" headers="d146411e511 ">
                                 <p><code class="codeph">锁</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e637 d146411e514 ">
                                 <p>在锁资源操作期间发生。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e637 d146411e517 ">
                                 <p>验证资源ACL和锁之后以及在资源上创建新锁之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e637 d146411e520 ">
                                 <p>创建新锁后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e651" headers="d146411e511 ">
                                 <p><code class="codeph">开锁</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e651 d146411e514 ">
                                 <p>在解锁资源操作期间发生。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e651 d146411e517 ">
                                 <p>验证资源ACL并删除令牌后。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e651 d146411e520 ">
                                 <p>取下锁后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e665" headers="d146411e511 ">
                                 <p><code class="codeph">林肯</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e665 d146411e514 ">
                                 <p>在链接操作期间在<code class="codeph">LinkTo</code>事件之前发生。事件目标是创建链接的文件夹。始终伴随着<code class="codeph">LinkTo</code>活动。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e665 d146411e517 ">
                                 <p>验证资源ACL和锁定之后以及创建链接之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e665 d146411e520 ">
                                 <p>执行<code class="codeph">LinkTo</code>后处理程序后。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e688" headers="d146411e511 ">
                                 <p><code class="codeph">链接到</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e688 d146411e514 ">
                                 <p>在链接操作期间在<code class="codeph">LinkIn</code>事件之后发生。事件目标是作为链接目标的资源。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e688 d146411e517 ">
                                 <p>执行<code class="codeph">LinkIn</code>预处理程序之后和创建链接之前。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e688 d146411e520 ">
                                 <p>创建链接后以及更新父文件夹的最后修饰符和修改时间之后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e708" headers="d146411e511 ">
                                 <p><code class="codeph">UnLinkIn</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e708 d146411e514 ">
                                 <p>在取消链接操作期间在<code class="codeph">UnlinkFrom</code>事件之前发生。始终伴随着<code class="codeph">UnlinkFrom</code>活动。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e708 d146411e517 ">
                                 <p>验证资源ACL和锁定之后以及删除链接之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e708 d146411e520 ">
                                 <p>执行<code class="codeph">UnlinkFrom</code>后处理程序后。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e731" headers="d146411e511 ">
                                 <p><code class="codeph">UnlinkFrom</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e731 d146411e514 ">
                                 <p>在取消链接操作期间在<code class="codeph">UnlinkIn</code>事件之后发生。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e731 d146411e517 ">
                                 <p>执行<code class="codeph">UnlinkIn</code>预处理程序后。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e731 d146411e520 ">
                                 <p>删除链接后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e751" headers="d146411e511 ">
                                 <p><code class="codeph">报到</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e751 d146411e514 ">
                                 <p>在资源签入期间发生。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e751 d146411e517 ">
                                 <p>验证资源ACL和锁之后以及验证资源是否受版本控制并已签出之后。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e751 d146411e520 ">
                                 <p>签入资源后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e766" headers="d146411e511 ">
                                 <p><code class="codeph">查看</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e766 d146411e514 ">
                                 <p>在签出资源期间发生。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e766 d146411e517 ">
                                 <p>验证资源ACL和锁之后以及验证资源是否受版本控制且尚未检出之后。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e766 d146411e520 ">
                                 <p>签出资源后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e780" headers="d146411e511 ">
                                 <p><code class="codeph">取消签</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e780 d146411e514 ">
                                 <p>在取消选中资源期间发生。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e780 d146411e517 ">
                                 <p>在删除资源签出的记录之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e780 d146411e520 ">
                                 <p>取消选中资源后。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d146411e794" headers="d146411e511 ">
                                 <p><code class="codeph">版本控制</code></p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d146411e794 d146411e514 ">
                                 <p>在为资源创建版本历史记录时发生。</p>
                                 <p>注意：您可以多次调用<code class="codeph">DBMS_XDB_VERSION.MakeVersioned()</code> ，但仅在第一次调用时创建版本历史记录。后续调用无效，因此不会发生<code class="codeph">VersionControl</code>事件。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d146411e794 d146411e517 ">
                                 <p>在创建资源的版本历史记录之前。</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d146411e794 d146411e520 ">
                                 <p>创建资源的第一个版本之后。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>为简单起见，文档通常将存储库事件对的两个成员一起处理，例如，将<code class="codeph">LinkIn</code>事件类型称为预链接和后链接事件类型的简写。出于同样的原因，这里使用的事件类型名称是通过删除前缀<code class="codeph">handlePre</code>和<code class="codeph">handlePost</code>从Java接口<code class="codeph">XDBRepositoryEventListener</code> <code class="codeph">handlePost</code> 。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1__GUID-B09E0E1F-45BC-4E97-841C-A913C5C661FB">
                     <p class="notep1">也可以看看：</p>
                     <p>适用于PL / SQL存储库事件类型的<a href="../arpls/DBMS_XEVENT.html#ARPLS210" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" title="您可以使用Oracle XML DB Repository以存储库资源的形式存储和访问任何类型的数据。您可以从任何应用程序访问存储库数据。有时您的应用程序需要在发生特定存储库操作时执行某些操作。您可以使用存储库事件执行此操作。">Oracle XML DB存储库事件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5599"></a><a id="ADXDB5598"></a><div class="props_rev_3"><a id="GUID-5821696E-5128-4221-9E9F-D36E2ACE5834" name="GUID-5821696E-5128-4221-9E9F-D36E2ACE5834"></a><h3 id="ADXDB-GUID-5821696E-5128-4221-9E9F-D36E2ACE5834" class="sect3"><span class="enumeration_section">30.3</span>存储库操作和事件</h3>
               <div>
                  <p>使用不同的Oracle XML DB Repository操作可以发生相同的存储库事件，并且给定的存储库操作可以生成多个存储库事件。</p>
                  <p> <a href="XML-DB-repository-events.html#GUID-5821696E-5128-4221-9E9F-D36E2ACE5834__BABCCJGG" title="此表列出了与每个存储库操作关联的事件。">表30-2</a>列出了与每个存储库操作关联的事件。有关相同操作发生多个存储库事件时的事件顺序，请参阅<a href="XML-DB-repository-events.html#GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1__BABHJGBH" title="此表列出了与每个存储库操作关联的事件。它们的顺序在处理程序列中指示。">表30-1</a> 。
                  </p>
                  <div class="tblformalwide" id="GUID-5821696E-5128-4221-9E9F-D36E2ACE5834__BABCCJGG">
                     <p class="titleintable">表30-2 Oracle XML DB存储库操作和事件</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle XML DB存储库操作和事件" width="100%" border="1" summary="This table lists the events that are associated with each repository operation." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="55%" id="d146411e893">手术</th>
                              <th align="left" valign="bottom" width="45%" id="d146411e896">存储库事件发生</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e901" headers="d146411e893 ">
                                 <p>按路径名获取资源内容的二进制表示</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e901 d146411e896 ">
                                 <p><code class="codeph">给予</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e909" headers="d146411e893 ">
                                 <p>按路径名获取资源内容的XML表示</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e909 d146411e896 ">
                                 <p><code class="codeph">给予</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e917" headers="d146411e893 ">
                                 <p>创建或更新资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e917 d146411e896 ">
                                 <p>如果资源已经存在： <code class="codeph">Create</code> ， <code class="codeph">LinkIn</code> ， <code class="codeph">LinkTo</code></p>
                                 <p>如果资源目标尚不存在（仅限HTTP和FTP）： <code class="codeph">Update</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e936" headers="d146411e893 ">
                                 <p>创建一个文件夹</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e936 d146411e896 ">
                                 <p><code class="codeph">Create</code> ， <code class="codeph">LinkIn</code> ， <code class="codeph">LinkTo</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e950" headers="d146411e893 ">
                                 <p>创建指向现有资源的链接</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e950 d146411e896 ">
                                 <p><code class="codeph">LinkIn</code>包含链接目标的文件夹上， <code class="codeph">LinkTo</code>对目标资源被链接</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e962" headers="d146411e893 ">
                                 <p>取消链接文件资源或空文件夹资源。（递减<code class="codeph">RefCount</code> ，如果它变为零，则从磁盘中删除资源。）
                                 </p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e962 d146411e896 ">
                                 <p><code class="codeph">UnlinkIn</code> ， <code class="codeph">UnlinkFrom</code> ，如果<code class="codeph">RefCount</code>为零，则<code class="codeph">Delete</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e982" headers="d146411e893 ">
                                 <p>强行删除文件夹及其内容</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e982 d146411e896 ">
                                 <p>递归地生成用于取消链接资源的事件。递归删除文件夹子资源，然后删除该文件夹。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e989" headers="d146411e893 ">
                                 <p>强制删除资源的所有链接</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e989 d146411e896 ">
                                 <p>为删除的每个链接生成取消链接事件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e996" headers="d146411e893 ">
                                 <p>按路径名更新资源的内容，属性或ACL</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e996 d146411e896 ">
                                 <p><code class="codeph">更新</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1004" headers="d146411e893 ">
                                 <p>在资源上放置一个深度为零的WebDAV锁</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1004 d146411e896 ">
                                 <p><code class="codeph">锁</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1012" headers="d146411e893 ">
                                 <p>从资源中删除深度为零的WebDAV锁</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1012 d146411e896 ">
                                 <p><code class="codeph">锁</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1021" headers="d146411e893 ">
                                 <p>重命名（移动）资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1021 d146411e896 ">
                                 <p><code class="codeph">LinkIn</code>和<code class="codeph">LinkTo</code>上的新位置， <code class="codeph">UnlinkIn</code>和<code class="codeph">UnlinkFrom</code>在老位置</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1039" headers="d146411e893 ">
                                 <p>复制资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1039 d146411e896 ">
                                 <p><code class="codeph">Create</code> ， <code class="codeph">LinkIn</code>和<code class="codeph">LinkTo</code>上的新位置</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1054" headers="d146411e893 ">
                                 <p>查看资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1054 d146411e896 ">
                                 <p><code class="codeph">查看</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1062" headers="d146411e893 ">
                                 <p>签入资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1062 d146411e896 ">
                                 <p><code class="codeph">报到</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1070" headers="d146411e893 ">
                                 <p>在资源控制下放置资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1070 d146411e896 ">
                                 <p><code class="codeph">版本控制</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="55%" id="d146411e1078" headers="d146411e893 ">
                                 <p>取消选中资源</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d146411e1078 d146411e896 ">
                                 <p><code class="codeph">取消签</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="XML-DB-repository-events.html#GUID-5821696E-5128-4221-9E9F-D36E2ACE5834__BABCCJGG" title="此表列出了与每个存储库操作关联的事件。">表30-2</a>中列出的所有操作都是原子操作，但以下情况除外：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>强制删除文件夹及其内容</p>
                     </li>
                     <li>
                        <p>使用HTTP（仅）通过路径名更新资源属性</p>
                     </li>
                     <li>
                        <p>使用HTTP复制文件夹（仅限）</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-5821696E-5128-4221-9E9F-D36E2ACE5834__GUID-7FF30433-3489-441D-8DA6-439037134710">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用API和协议访问资源的信息，请<a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="此表描述了用于访问Oracle XML DB存储库的API选项。">参见表21-3</a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" title="您可以使用Oracle XML DB Repository以存储库资源的形式存储和访问任何类型的数据。您可以从任何应用程序访问存储库数据。有时您的应用程序需要在发生特定存储库操作时执行某些操作。您可以使用存储库事件执行此操作。">Oracle XML DB存储库事件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5600"></a><div class="props_rev_3"><a id="GUID-C4139224-FF34-4B6D-9B68-481FA41E634C" name="GUID-C4139224-FF34-4B6D-9B68-481FA41E634C"></a><h3 id="ADXDB-GUID-C4139224-FF34-4B6D-9B68-481FA41E634C" class="sect3"><span class="enumeration_section">30.4</span>存储库事件处理程序注意事项</h3>
               <div>
                  <p>列出了一些注意事项，用于定义Oracle XML DB Repository事件的处理程序。</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在任何处理程序中：不要在处理程序中使用<code class="codeph">COMMIT</code> ， <code class="codeph">ROLLBACK</code>或数据定义语言（DDL）语句。不要调用行为与DDL语句类似的PL / SQL函数或过程，例如<code class="codeph">DBMS_XMLSCHEMA.registerSchema</code> 。在<code class="codeph">Render</code>处理程序中：不要使用数据操作语言（DML）语句。
                        </p>
                        <p>要解决这些限制，处理程序可以在自治事务中使用此类语句，但必须确保不会出现锁定冲突。</p>
                     </li>
                     <li>
                        <p>在<code class="codeph">Render</code>处理程序中，不要关闭输出流。（您可以附加到流中。）
                        </p>
                     </li>
                     <li>
                        <p><span class="italic">不要</span>使用修改方法从类<code class="codeph">XDBResource</code>的处理，除非它是一个<code class="codeph">Pre-Create</code>或<code class="codeph">Pre-Update</code>处理。<span class="italic">不要</span>使用方法<code class="codeph">XDBResource.save()</code>中的任何处理。
                        </p>
                     </li>
                     <li>
                        <p>Oracle建议您仅开发安全的存储库事件处理程序。特别是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>仅写入应用程序拥有的名称空间中的资源属性，永远不会在<code class="codeph">xdb</code>名称空间中。
                              </p>
                           </li>
                           <li>
                              <p>在创建资源时不要删除它。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>存储库事件处理程序传递给<code class="codeph">XDBRepositoryEvent</code>对象，该对象仅在当前SQL语句或协议操作期间存在。您可以在此对象上使用PL / SQL过程和Java方法来获取有关资源，事件和关联事件处理程序的信息。
                        </p>
                     </li>
                     <li>
                        <p>当事件处理程序执行导致其他存储库事件发生的操作时，会立即发生这些级联事件。在当前事件的处理程序完成后，它们不会排队等待。因此，每个事件都在其相应操作的上下文中发生。</p>
                     </li>
                     <li>
                        <p>存储库事件处理程序是同步调用的。它们在相应操作的进程，会话和事务上下文中执行。但是，处理程序可以使用Oracle数据库高级队列（AQ）对存储库事件进行排队，然后由其他进程异步处理。</p>
                     </li>
                     <li>
                        <p>由于存储库事件处理程序在其相应操作的事务上下文中执行，因此该操作或先前在事务中运行的其他操作获取的任何锁定仍处于活动状态。事件处理程序不得启动尝试获取此类锁定的单独会话或事务。否则，处理程序挂起。</p>
                     </li>
                     <li>
                        <p>存储库事件处理程序按它们在资源配置文件中出现的顺序调用。如果为资源配置定义了前提条件，则仅调用满足前提条件的那些处理程序。</p>
                     </li>
                     <li>
                        <p>尽管处理程序是按照它们在配置文件中定义的顺序调用的，但请避免让代码依赖于此。如果在调用处理程序时当前的用户具有特权<code class="codeph">write-config</code> ，则可以在执行处理程序内更改处理程序调用顺序。
                        </p>
                     </li>
                     <li>
                        <p>在调用任何处理程序之前，确定适用于给定存储库事件发生的整个处理程序列表。这尤其意味着在调用任何处理程序之前评估每个处理程序的前提条件。</p>
                     </li>
                     <li>
                        <p>以下注意事项适用于存储库事件的<span class="italic">错误处理</span> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果操作的访问检查失败，则永远不会调用操作前事件处理程序。</p>
                           </li>
                           <li>
                              <p>在调用任何事件之前，将检查给定事件的所有处理程序。如果它们中的任何一个不可用（例如，不再存在），则<span class="italic">不会</span>调用它们。
                              </p>
                           </li>
                           <li>
                              <p>如果在事件处理期间引发错误，则不会针对相同的SQL语句或协议操作调用其他后续事件处理程序。取消当前语句或操作，并回滚其所有更改。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>以下注意事项适用于存储库事件的<span class="italic">资源安全性</span> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>事件处理程序可以具有调用者权限或定义者权限。您在创建包时指定PL / SQL包的执行权限。使用<code class="codeph">loadjava</code>实用程序将Java类加载到数据库时，可以指定Java类的执行权限。如果指定了调用者的权限，但未为调用者的权限配置给定的处理程序，则会引发权限不足的错误。
                              </p>
                           </li>
                           <li>
                              <p>在事件处理程序中，当前用户权限（无论是通过调用者还是定义者权限获得）由其ACL对给定资源进行详细确定。这些权限决定了处理程序可以对资源执行的操作。例如，如果当前用户具有特定资源的<code class="codeph">read-properties</code>和<code class="codeph">read-contents</code>权限，则事件处理程序可以读取该资源。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>以下注意事项适用于<span class="italic">链接</span>和<span class="italic">取消</span> <span class="italic">链接的</span>存储库事件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建资源链接后，如果要将父文件夹的任何资源配置文件也应用于链接资源，请使用过程<code class="codeph">DBMS_RESCONFIG.appendResConfig</code>将配置文件添加到链接资源。您可以从链接资源的<code class="codeph">Post-LinkTo</code>事件处理程序调用此过程。
                              </p>
                           </li>
                           <li>
                              <p>取消链接资源后，如果要删除链接时添加的任何此类资源配置文件，请使用过程<code class="codeph">DBMS_RESCONFIG.deleteResConfig</code>将其从未链接的资源中删除。您可以从<code class="codeph">Post-UnlinkFrom</code>资源的<code class="codeph">Post-UnlinkFrom</code>事件处理程序中调用此过程。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>不要为文件夹<code class="codeph">/sys/schemas</code>上的事件或此文件夹下的资源定义处理程序。任何此类资源都不会发生事件，因此会忽略此类事件处理程序。这意味着影响存储库（注册，删除等）的XML模式操作不会产生事件。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C4139224-FF34-4B6D-9B68-481FA41E634C__GUID-9974B3C1-2ED9-4C48-8823-85F0F8415501">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关PL / SQL函数和操作存储库事件的过程的信息，请参阅<a href="../arpls/DBMS_XEVENT.html#ARPLS210" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../jaxml/index.html" target="_blank"><span><cite>Oracle数据库XML Java API参考</cite></span></a> ，类<code class="codeph">XDBRepositoryEvent</code>和<code class="codeph">XDBEvent</code>以获取有关操作存储库事件的Java方法的信息</p>
                        </li>
                        <li>
                           <p><a href="XML-DB-repository-events.html#GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" title="在资源配置文件中，使用元素事件侦听器（元素ResConfig的子）来配置Oracle XML DB存储库事件处理。">配置存储库事件</a>以获取有关使用调用者权限定义存储库事件处理程序的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" title="您可以使用Oracle XML DB Repository以存储库资源的形式存储和访问任何类型的数据。您可以从任何应用程序访问存储库数据。有时您的应用程序需要在发生特定存储库操作时执行某些操作。您可以使用存储库事件执行此操作。">Oracle XML DB存储库事件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5601"></a><div class="props_rev_3"><a id="GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" name="GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119"></a><h3 id="ADXDB-GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" class="sect3"><span class="enumeration_section">30.5</span>存储库事件的配置</h3>
               <div>
                  <p>在资源配置文件中，使用元素<code class="codeph">event-listeners</code> （元素<code class="codeph">ResConfig</code>子）来配置Oracle XML DB存储库事件处理。
                  </p>
                  <p>您可以配置Oracle XML DB存储库资源的事件处理，就像配置存储库资源的任何其他处理一样 - 请参阅<span class="q">“ <a href="configuration-of-XML-DB-repository.html#GUID-AB3B6205-AE7B-4A12-A6B9-C3CC0C1108D3" title="配置Oracle XML DB存储库资源涉及创建配置文件，将该文件作为配置资源添加到存储库，并将配置资源映射到它配置的资源或整个存储库。">配置资源</a> ”</span> 。
                  </p>
                  <p>默认情况下，会启用存储库事件，但您可以通过将参数<code class="codeph">XML_DB_EVENTS</code>设置为<code class="codeph">DISABLE</code>来禁用它们。要在会话级别禁用存储库事件，请使用以下SQL * Plus命令。您必须具有角色<code class="codeph">XDBADMIN</code>才能执行此操作。
                  </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET XML_DB_EVENTS = DISABLE;</pre><p>要在系统级别禁用存储库事件，请使用以下SQL * Plus命令，然后重新启动数据库。为后续会话禁用存储库事件。您必须具有<code class="codeph">ALTER SYSTEM</code>权限才能执行此操作。
                  </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET XML_DB_EVENTS = DISABLE;</pre><p>要再次启用存储库事件，请将<code class="codeph">XML_DB_EVENTS</code>的值设置为<code class="codeph">ENABLE</code> 。</p>
                  <p>资源配置文件是符合XML模式<code class="codeph">XDBResConfig.xsd</code>的XML文件，可在Oracle XML DB Repository的路径<code class="codeph">/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResConfig.xsd</code> 。您可以使用元素<code class="codeph">event-listeners</code> （元素<code class="codeph">ResConfig</code>子元素）来配置存储库事件处理。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-FC91D1C8-A5BF-4FEB-B6C9-6953FA9F6279">配置元素事件侦听器</a><br>每个资源配置文件都可以有一个<code class="codeph">event-listeners</code>元素，作为元素<code class="codeph">ResConfig</code>的子元素。这将配置目标资源的所有事件处理。如果资源配置文件适用于整个存储库，而不是特定资源，则它会定义存储库中所有资源的事件处理。
                     </li>
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-BA0619E8-B9F4-4824-BD6A-0C65A3C040C8">配置元素侦听器</a><br>元素<code class="codeph">listener</code>是元素<code class="codeph">event-listeners</code> <code class="codeph">listener</code>器的子元素，它配置单个存储库事件侦听器。
                     </li>
                     <li class="ulchildlink"><a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976">存储库事件配置示例</a><br>提供了配置存储库事件的示例。资源配置文件分别定义了带有和不带前置条件的Java和PL / SQL事件侦听器。示例根据MIME类型对资源进行分类。它包括用于创建资源配置文件的PL / SQL代码。示例使用Java和PL / SQL实现侦听器。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119__GUID-1867B84E-ADA5-490B-98EE-4F8E680F4E6E">
                     <p class="notep1">也可以看看：</p>
                     <p>有关配置存储库资源的一般信息，请配置<a href="configuration-of-XML-DB-repository.html#GUID-E44B59D4-7A7E-4303-ACE3-B801797B06AF" title="Oracle XML DB Repository的整体配置适用于所有存储库资源。它不包括配置用于处理事件或管理XLink和XInclude处理的参数。您使用资源配置文件来配置资源。">Oracle XML DB存储</a>库</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-1A25D4D1-2353-41FC-9D86-9C35F9F95532" title="您可以使用Oracle XML DB Repository以存储库资源的形式存储和访问任何类型的数据。您可以从任何应用程序访问存储库数据。有时您的应用程序需要在发生特定存储库操作时执行某些操作。您可以使用存储库事件执行此操作。">Oracle XML DB存储库事件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5602"></a><div class="props_rev_3"><a id="GUID-FC91D1C8-A5BF-4FEB-B6C9-6953FA9F6279" name="GUID-FC91D1C8-A5BF-4FEB-B6C9-6953FA9F6279"></a><h4 id="ADXDB-GUID-FC91D1C8-A5BF-4FEB-B6C9-6953FA9F6279" class="sect4"><span class="enumeration_section">30.5.1</span>配置元素事件监听器</h4>
                  <div>
                     <p>每个资源配置文件都可以有一个<code class="codeph">event-listeners</code>元素，作为元素<code class="codeph">ResConfig</code>的子元素。这将配置目标资源的所有事件处理。如果资源配置文件适用于整个存储库，而不是特定资源，则它会定义存储库中所有资源的事件处理。
                     </p>
                     <p>元素<code class="codeph">event-listeners</code>具有以下可选属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">set-invoker</code> - 如果资源配置定义了一个或多个存储库事件处理程序以具有调用者权限，则将其设置为<code class="codeph">true</code> 。默认值为<code class="codeph">false</code> ，表示使用定义者权限。
                           </p>
                           <p>要定义调用者权限存储库事件处理程序，您必须具有数据库角色<code class="codeph">XDB_SET_INVOKER</code> 。此角色授予<code class="codeph">DBA</code> ，但不授予<code class="codeph">XDBADMIN</code> 。仅在创建或更新资源配置文件时才检查角色<code class="codeph">XDB_SET_INVOKER</code> 。在运行时仅检查属性<code class="codeph">set-invoker</code>而不是角色<code class="codeph">XDB_SET_INVOKER</code>以确保足够的权限。
                           </p>
                           <div class="infoboxnotealso" id="GUID-FC91D1C8-A5BF-4FEB-B6C9-6953FA9F6279__GUID-72EEDD2E-3937-4C70-8C6D-8D0C78091409">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="XML-DB-repository-events.html#GUID-C4139224-FF34-4B6D-9B68-481FA41E634C" title="Some considerations are listed for defining handlers for Oracle XML DB Repository events.">存储库事件处理程序</a>有关特权不足错误的信息的<a href="XML-DB-repository-events.html#GUID-C4139224-FF34-4B6D-9B68-481FA41E634C" title="列出了一些注意事项，用于定义Oracle XML DB Repository事件的处理程序。">注意事项</a></p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">default-schema</code> - 默认架构值，用于未定义<code class="codeph">schema</code>元素的侦听器。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">default-language</code> - 默认语言值，用于未定义<code class="codeph">language</code>元素的侦听器。
                           </p>
                        </li>
                     </ul>
                     <p>元素<code class="codeph">event-listeners</code>具有一系列<code class="codeph">listener</code>元素作为子元素。这些配置单个存储库事件侦听器。监听器在运行时按<code class="codeph">listener</code>元素的顺序处理。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" title="在资源配置文件中，使用元素事件侦听器（元素ResConfig的子）来配置Oracle XML DB存储库事件处理。">存储库事件的配置</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5603"></a><div class="props_rev_3"><a id="GUID-BA0619E8-B9F4-4824-BD6A-0C65A3C040C8" name="GUID-BA0619E8-B9F4-4824-BD6A-0C65A3C040C8"></a><h4 id="ADXDB-GUID-BA0619E8-B9F4-4824-BD6A-0C65A3C040C8" class="sect4"><span class="enumeration_section">30.5.2</span>配置元素监听器</h4>
                  <div>
                     <p>元素<code class="codeph">listener</code>是元素<code class="codeph">event-listeners</code> <code class="codeph">listener</code>器的子元素，它配置单个存储库事件侦听器。
                     </p>
                     <div class="section">
                        <p>每个<code class="codeph">listener</code>元素都具有以下子元素。所有这些都是可选的，除了<code class="codeph">source</code> ，它们可以按任何顺序出现（它们的顺序无关紧要）。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">description</code> - 侦听器的描述。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">schema</code> - 存储库事件处理程序的Java或PL / SQL实现的数据库模式。如果既未定义此<code class="codeph">default-schema</code>也未定义<code class="codeph">default-schema</code> ，则会引发错误。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">source</code> （必需） - 提供处理程序方法的Java类，PL / SQL包或对象类型的名称。必须使用包名限定Java类名。使用空的<code class="codeph">source</code>元素指示存储库事件处理程序是独立的PL / SQL存储过程。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">language</code> - 侦听器类（Java）或包（PL / SQL）的实现语言。如果既未定义此<code class="codeph">default-language</code>也未定义<code class="codeph">default-language</code> ，则会引发错误。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pre-condition</code> - 要执行此侦听器中的任何存储库事件处理程序的前提条件。这与常规资源配置元素<code class="codeph">configuration</code>的<code class="codeph">pre-condition</code>子元素相同 - 请参阅<a href="configuration-of-XML-DB-repository.html#GUID-5010D4C5-38CA-4ABE-A559-C1D1001359D3" title="配置元素defaultChildConfig仅适用于文件夹。它包含要应用于文件夹中所有子资源的配置信息。元素defaultChildConfig具有一个或多个配置子元素，每个元素都定义文件夹中资源的可能配置。">配置元素defaultChildConfig和配置</a> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">events</code> - 唯一存储库事件类型名称的序列： <code class="codeph">Render</code> ， <code class="codeph">Pre-Create</code>等。仅为侦听器启用了这些类型的存储库事件的处理程序。有关<a href="XML-DB-repository-events.html#GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1" title="Repository operations are associated with predefined events. Except for a rendering operation, events come in pre and post pairs.">可能的存储</a>库事件类型的列表，请参阅<a href="XML-DB-repository-events.html#GUID-5F7D0772-848D-49EA-832B-AB1117B9E3F1" title="存储库操作与预定义事件相关联。除了渲染操作之外，事件都是前后对。">可能的存储</a>库事件。如果元素<code class="codeph">events</code>不存在，则为侦听器启用所有类型的存储库事件的处理程序，这可能是浪费的。提供元素<code class="codeph">events</code>以消除无效的存储库事件的处理程序调用。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" title="在资源配置文件中，使用元素事件侦听器（元素ResConfig的子）来配置Oracle XML DB存储库事件处理。">存储库事件的配置</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5605"></a><a id="ADXDB5606"></a><a id="ADXDB5607"></a><a id="ADXDB5608"></a><a id="ADXDB5609"></a><a id="ADXDB5604"></a><div class="props_rev_3"><a id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976" name="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976"></a><h4 id="ADXDB-GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976" class="sect4"><span class="enumeration_section">30.5.3</span>存储库事件配置示例</h4>
                  <div>
                     <p>提供了配置存储库事件的示例。资源配置文件分别定义了带有和不带前置条件的Java和PL / SQL事件侦听器。示例根据MIME类型对资源进行分类。它包括用于创建资源配置文件的PL / SQL代码。示例使用Java和PL / SQL实现侦听器。</p>
                     <div class="section">
                        <p><a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABDEGAA">示例30-1</a>显示了定义两个事件侦听器的资源配置文件的内容。每个听者定义的类型库的事件处理程序<code class="codeph">Post-LinkIn</code> ， <code class="codeph">Post-UnlinkIn</code> ，以及<code class="codeph">Post-Update</code> 。它定义了前提条件，默认语言（Java）和默认数据库模式。
                        </p>
                        <p>第一个侦听器的处理程序的实现是在数据库模式<code class="codeph">CM</code>定义的Java类<code class="codeph">oracle.cm.quota</code>中。仅为<code class="codeph">ContentType</code> <code class="codeph">image/gif</code>资源上的事件调用这些处理程序。
                        </p>
                        <p>第二个侦听器的处理程序的实现是在数据库模式<code class="codeph">IFS</code> （此资源配置文件的默认模式）中定义的Java类<code class="codeph">oracle.ifs.quota</code>中。仅对名称空间为<code class="codeph">http://foo.xsd</code> <code class="codeph">ifs-file</code>类型的资源上的事件调用这些处理程序。</p>
                        <div class="infoboxnotealso" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__GUID-81D0675B-D3D5-4DD8-8ABE-0FC83C72E847">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="configuration-of-XML-DB-repository.html#GUID-5010D4C5-38CA-4ABE-A559-C1D1001359D3" title="配置元素defaultChildConfig仅适用于文件夹。它包含要应用于文件夹中所有子资源的配置信息。元素defaultChildConfig具有一个或多个配置子元素，每个元素都定义文件夹中资源的可能配置。">配置元素defaultChildConfig和配置元素</a>的描述<code class="codeph">defaultChildConfig</code>和<code class="codeph">applicationData</code></p>
                        </div>
                        <p>作为一个简单的端到端说明，假设应用程序需要根据MIME类型对文件夹<code class="codeph">/public/res-app</code>的资源进行分类。它创建了文件夹<code class="codeph">/public/app/XML-TXT</code> ， <code class="codeph">/public/app/IMG</code>和<code class="codeph">/public/app/FOLDER</code>中资源的链接，具体取决于资源MIME类型是<code class="codeph">text/xml</code> ， <code class="codeph">image/gif</code>还是<code class="codeph">application/octet-stream</code> ，分别。这在<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABBJGAC">例30-2</a> ， <a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCDJEH">例30-3</a>和<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABIHGGH">例30-5中说明</a> 。
                        </p>
                        <p><a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABBJGAC">示例30-2</a>显示了为此分类说明创建配置文件的PL / SQL代码。它定义了一个处理<code class="codeph">Pre-UnlinkIn</code>和<code class="codeph">Post-LinkIn</code> <code class="codeph">Pre-UnlinkIn</code>类型事件的侦听器。它明确定义了语言（PL / SQL）和数据库模式。没有定义任何先决条件。
                        </p>
                        <p><a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCDJEH">例30-3</a>显示了实现<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABBJGAC">示例30-2</a>中配置的事件处理程序的PL / SQL代码。<code class="codeph">Post-LinkIn</code>事件处理程序在其中一个文件夹<code class="codeph">/public/app/XML-TXT</code> ， <code class="codeph">/public/app/IMG</code>和<code class="codeph">/public/app/FOLDER</code>创建指向<code class="codeph">eventObject</code>资源的链接，具体取决于资源MIME类型。<code class="codeph">Pre-UnlinkIn</code>事件处理程序删除<code class="codeph">Post-LinkIn</code> <code class="codeph">Pre-UnlinkIn</code>事件处理程序创建的链接。
                        </p>
                        <div class="infoboxnotealso" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__GUID-34892E6E-8B01-423B-A170-E0504253AF45">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关PL / SQL包<code class="codeph">DBMS_XDBRESOURCE</code>信息，请参阅<a href="../arpls/DBMS_XDBRESOURCE.html#ARPLS230" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关PL / SQL包<code class="codeph">DBMS_XEVENT</code>信息，请参阅<a href="../arpls/DBMS_XEVENT.html#ARPLS210" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>信息，请参阅<a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74188" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p>Java示例的配置与<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABBJGAC">示例30-2中</a>的相同，但这两行除外，它们将替换<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABBJGAC">示例30-2中</a>具有相同名称的元素：</p><pre class="oac_no_warn" dir="ltr">&lt;source&gt; <span class="bold">category</span> &lt;/ source&gt; &lt;language&gt; <span class="bold">Java</span> &lt;/ language&gt;</pre><p><a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCFCIH">示例30-4</a>显示了实现事件处理程序的Java代码。逻辑与<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCDJEH">例30-3中</a>的逻辑相同。
                        </p>
                        <p><a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABIHGGH">例30-5</a>演示了如<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCDJEH">例30-3</a>或<a href="XML-DB-repository-events.html#GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCFCIH">例30-4</a>中实现的事件处理程序的调用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABDEGAA">
                        <p class="titleinexample">示例30-1具有前提条件的Java事件侦听器的资源配置文件</p><pre class="oac_no_warn" dir="ltr">&lt;ResConfig xmlns =“http://xmlns.oracle.com/xdb/XDBResConfig.xsd”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“http：/ /xmlns.oracle.com/xdb/XDBResConfig.xsd http://xmlns.oracle.com/xdb/XDBResConfig.xsd“&gt; &lt;event-listeners <span class="bold">default-language =”Java“default-schema =”IFS“</span> &gt; &lt;listener &gt; &lt;description&gt;类别应用程序&lt;/ description&gt; &lt;schema&gt; CM &lt;/ schema&gt; &lt;source&gt; <span class="bold">oracle.cm.category</span> &lt;/ source&gt; &lt;events <span class="bold">&gt;</span> <span class="bold">&lt;Post-LinkIn /&gt;</span> <span class="bold">&lt;Post-</span> <span class="bold">UnlinkIn /&gt;</span> <span class="bold">&lt;Post-Update / &gt;</span> &lt;/ events&gt; &lt;pre-condition&gt; &lt;existsNode&gt; &lt;XPath&gt; / Resource <span class="bold">[ContentType =“image / gif”]</span> &lt;/ XPath&gt; &lt;/ existsNode&gt; &lt;/ pre-condition&gt; &lt;/ listener&gt; &lt;listener&gt; &lt;description &gt;检查配额&lt;/描述&gt; &lt;源&gt; <span class="bold">oracle.ifs.quota</span> &lt;/源&gt; &lt;事件&gt; <span class="bold">&lt;后林肯/&gt;</span> <span class="bold">&lt;后UnlinkIn /&gt;</span> <span class="bold">&lt;更新后/&gt;</span> &lt;/事件&gt; &lt;先决条件&gt; &lt; existsNode&gt; &lt;XPath&gt; r：/ Resource / <span class="bold">[ns：type =“ifs-file”]</span> &lt;/ XPath&gt; &lt;namespace&gt; xmlns：r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”xmlns ： <span class="bold">ns =“http：//foo.xsd</span> ”&lt;/ namespace&gt; &lt;/ existsNode&gt; &lt;/ pre-condition&gt; &lt;/ listener&gt; &lt;/ event-listeners&gt; &lt;defaultChildConfig&gt; &lt;configuration&gt; &lt;path&gt; /sys/xdb/resconfig/user_rc.xml &lt;/ path&gt; &lt;/ configuration&gt; &lt;/ defaultChildConfig&gt; &lt;applicationData&gt; &lt;foo：data xmlns：foo =“http：//foo.xsd “&gt; &lt;foo：item1&gt; 1234 &lt;/ foo：item1&gt; &lt;/ foo：data&gt; &lt;/ applicationData&gt; &lt;/ ResConfig&gt;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABBJGAC">
                        <p class="titleinexample">示例30-2没有前提条件的PL / SQL事件监听器的资源配置文件</p><pre class="oac_no_warn" dir="ltr">DECLARE b BOOLEAN：= FALSE; BEGIN b：= DBMS_XDB_REPOS.createFolder（'/ public / resconfig'）; b：= DBMS_XDB_REPOS.createResource（'/ public /resconfig/appcatg-rc1.xml'，'&lt;ResConfig xmlns =“http://xmlns.oracle.com/xdb/XDBResConfig.xsd”xmlns：xsi =“http：/ /www.w3.org/2001/XMLSchema-instance“xsi：schemaLocation =”http://xmlns.oracle.com/xdb/XDBResConfig.xsd http://xmlns.oracle.com/xdb/XDBResConfig.xsd“&gt; &lt;event-listeners&gt; &lt;listener&gt; &lt;description&gt;类别应用程序&lt;/ description&gt; <span class="bold">&lt;schema&gt; APPCATGUSER1 &lt;/ schema&gt;</span> <span class="bold">&lt;source&gt; APPCATG_EVT_PKG1 &lt;/ source&gt;</span> <span class="bold">&lt;language&gt; PL / SQL &lt;/ language&gt;</span> &lt;events&gt; <span class="bold">&lt;Pre-UnlinkIn /&gt;</span> <span class="bold">&lt;Post-LinkIn /&gt;</span> &lt;/ events&gt; &lt;/ listener&gt; &lt;/ event-listeners&gt; &lt;defaultChildConfig&gt; &lt;configuration&gt; &lt;path&gt; /public/resconfig/appcatg-rc1.xml &lt;/ path&gt; &lt;/ configuration&gt; &lt; / defaultChildConfig&gt; &lt;/ ResConfig&gt;'，'http：//xmlns.oracle.com/xdb/XDBResConfig.xsd'，'ResConfig'）;结束; / BEGIN DBMS_RESCONFIG.appendResConfig（'/ public / res-app'，'/ public / resconfig / appcatg-rc.xml'，DBMS_RESCONFIG.APPEND_RECURSIVE）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCDJEH">
                        <p class="titleinexample">示例30-3实现事件监听器的PL / SQL代码</p><pre class="oac_no_warn" dir="ltr">创建或替换包appcatg_evt_pkg1 AS PROCEDURE handlePreUnlinkIn（eventObject DBMS_XEVENT.XDBRepositoryEvent）; PROCEDURE handlePostLinkIn（eventObject DBMS_XEVENT.XDBRepositoryEvent）;结束; / CREATE OR REPLACE PACKAGE BODY appcatg_evt_pkg1 AS PROCEDURE <span class="bold">handlePreUnlinkIn</span> （eventObject DBMS_XEVENT.XDBRepositoryEvent）AS XDBResourceObj DBMS_XDBRESOURCE.XDBResource; ResDisplayName VARCHAR2（100）; ResPath VARCHAR2（1000）; ResOwner VARCHAR2（1000）; ResDeletedBy VARCHAR2（1000）; XDBPathobj DBMS_XEVENT.XDBPath; XDBEventobj DBMS_XEVENT.XDBEvent; SeqChar VARCHAR2（1000）; LinkName VARCHAR2（10000）; ResType VARCHAR2（100）; LinkFolder VARCHAR2（100）; BEGIN XDBResourceObj：= DBMS_XEVENT.getResource（eventObject）; ResDisplayName：= DBMS_XDBRESOURCE.getDisplayName（XDBResourceObj）; ResOwner：= DBMS_XDBRESOURCE.getOwner（XDBResourceObj）; XDBPathobj：= DBMS_XEVENT.getPath（eventObject）; ResPath：= DBMS_XEVENT.getName（XDBPathObj）; XDBEventobj：= DBMS_XEVENT.getXDBEvent（eventObject）; ResDeletedBy：= DBMS_XEVENT.getCurrentUser（XDBEventobj）; BEGIN SELECT XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”; / ns：Resource / ns：ContentType'PASSING r。RES RETURNING CONTENT）AS VARCHAR2（100））INTO ResType FROM PATH_VIEW r WHERE r。PATH = ResPath;除非其他人之外的例外情况;结束;如果ResType =' <span class="bold">text / xml</span> '那么LinkFolder：=' <span class="bold">/ public / app / XML-TXT /</span> ';万一;如果ResType =' <span class="bold">image / gif</span> '那么LinkFolder：=' <span class="bold">/ public / app / IMG /</span> ';万一; IF ResType =' <span class="bold">application / octet-</span> stream'THEN LinkFolder：='/ <span class="bold">public / app / FOLDER /</span> ';万一; DBMS_XDB_REPOS。 <span class="bold">deleteResource</span> （LinkFolder || ResDisplayName）;结束; PROCEDURE <span class="bold">handlePostLinkIn</span> （eventObject DBMS_XEVENT.XDBRepositoryEvent）AS XDBResourceObj DBMS_XDBRESOURCE.XDBResource; ResDisplayName VARCHAR2（100）; ResPath VARCHAR2（1000）; ResOwner VARCHAR2（1000）; ResDeletedBy VARCHAR2（1000）; XDBPathobj DBMS_XEVENT.XDBPath; XDBEventobj DBMS_XEVENT.XDBEvent; SeqChar VARCHAR2（1000）; LinkName VARCHAR2（10000）; ResType VARCHAR2（100）; LinkFolder VARCHAR2（100）; BEGIN XDBResourceObj：= DBMS_XEVENT.getResource（eventObject）; ResDisplayName：= DBMS_XDBRESOURCE.getDisplayName（XDBResourceObj）; ResOwner：= DBMS_XDBRESOURCE.getOwner（XDBResourceObj）; XDBPathobj：= DBMS_XEVENT.getPath（eventObject）; ResPath：= DBMS_XEVENT.getName（XDBPathObj）; XDBEventobj：= DBMS_XEVENT.getXDBEvent（eventObject）; ResDeletedBy：= DBMS_XEVENT.getCurrentUser（XDBEventobj）; SELECT XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”; / ns：Resource / ns：ContentType'PASSING r。RES RETURNING CONTENT）AS VARCHAR2（100））INTO ResType FROM PATH_VIEW r WHERE r。PATH = ResPath; IF ResType =' <span class="bold">text / xml</span> '那么LinkFolder：=' <span class="bold">/ public / app / XML-TXT</span> ';万一;如果ResType =' <span class="bold">image / gif</span> '那么LinkFolder：=' <span class="bold">/ public / app / IMG</span> ';万一; IF ResType =' <span class="bold">application / octet-</span> stream'THEN LinkFolder：=' <span class="bold">/ public / app / FOLDER</span> ';万一; DBMS_XDB_REPOS。 <span class="bold">link</span> （ResPath，LinkFolder，ResDisplayName）;结束;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABCFCIH">
                        <p class="titleinexample">示例30-4 Java代码实现事件监听器</p><pre class="oac_no_warn" dir="ltr">import oracle.xdb.event。*; import oracle.xdb.spi。*; import java.sql。*; import java.io.*; import java.net。*; import oracle.jdbc。*; import oracle.sql。*; import oracle.xdb。XMLType的; import oracle.xdb.dom。*;公共类<span class="bold">类</span>扩展了oracle.xdb.event。XDBBasicEventListener {public Connection <span class="bold">connectToDB</span> （）抛出java.sql。SQLException {try {String strUrl =“jdbc：oracle：kprb：”; String strUname =“appcatguser1”; String strPwd =“appcatguser1”;连接conn = null; OraclePreparedStatement stmt = null; DriverManager.registerDriver（新的oracle.jdbc。一个OracleDriver（））; conn = DriverManager.getConnection（strUrl，strUname，strPwd）;返回; } catch（Exception e1）{System.out.println（“connectToDB java function中的异常”）; System.out.println（“e1：”+ e1.toString（））; return null; public void <span class="bold">handlePostLinkIn</span> （XDBRepositoryEvent eventObject）{XDBPath objXDBPath = null; String strPathName =“”; objXDBPath = eventObject.getPath（）; strPathName = objXDBPath.getName（）; XDBResource objXDBResource1; objXDBResource1 = eventObject.getResource（）; String textResDisplayName = objXDBResource1.getDisplayName（）; String resType = objXDBResource1.getContentType（）; String linkFolder =“”; System.out.println（“resType”+ resType +“sumit”）; System.out.println（“strPathName：”+ strPathName）; System.out.println（“textResDisplayName：”+ textResDisplayName）; if（resType.equals（“ <span class="bold">text / xml</span> ”））linkFolder =“ <span class="bold">/ public / app / XML-TXT /</span> ”;否则if（resType.equals（“ <span class="bold">image / gif</span> ”））linkFolder =“ <span class="bold">/ public / app / IMG /</span> ”;否则if（resType.equals（“ <span class="bold">application / octet-stream</span> ”））linkFolder =“ <span class="bold">/ public / app / FOLDER /</span> ”; System.out.println（“linkFolder：”+ linkFolder）;尝试{Connection con1 = connectToDB（）; OraclePreparedStatement stmt = null;语句=（OraclePreparedStatement）con1.prepareStatement（“CALL DBMS_XDB_REPOS。 <span class="bold">链路</span> （？，？，？）“）; stmt.setString（1，strPathName）; stmt.setString（2，linkFolder）; stmt.setString（3，textResDisplayName）; stmt.execute（）; stmt.close（）; con1.close（）;} catch （java.sql中。SQLException ej1）{System.out.println（“ej1：”+ ej1.toString（））; } / *确保链接不在类别文件夹中。然后检查目标资源的mime类型，并在相应的类别文件夹中创建一个链接。* /} public void <span class="bold">handlePreUnlinkIn</span> （XDBRepositoryEvent eventObject）{XDBPath objXDBPath = null; String strPathName =“”; objXDBPath = eventObject.getPath（）; strPathName = objXDBPath.getName（）; XDBResource objXDBResource1; objXDBResource1 = eventObject.getResource（）; String textResDisplayName = objXDBResource1.getDisplayName（）; String resType = objXDBResource1.getContentType（）; String linkFolder =“”; if（resType.equals（“ <span class="bold">text / xml</span> ”））linkFolder =“ <span class="bold">/ public / app / XML-TXT /</span> ”;否则if（resType.equals（“ <span class="bold">image / gif</span> ”））linkFolder =“ <span class="bold">/ public / app / IMG /</span> ”;否则if（resType.equals（“ <span class="bold">application / octet-stream</span> ”））linkFolder =“ <span class="bold">/ public / app / FOLDER /</span> ”;尝试{Connection con1 = connectToDB（）; OraclePreparedStatement stmt = null;语句=（OraclePreparedStatement）con1.prepareStatement（“CALL <span class="bold">DBMS_XDB_REPOS。deleteResource（？）</span>“）; stmt.setString（1，linkFolder + textResDisplayName）; stmt.execute（）; stmt.close（）; con1.close（）;} catch（java.sql。SQLException ej1）{System.out.println（“ej1：”+ ej1.toString（））; }}}</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-52AEF536-45B7-40B3-88FF-0B1DD0C56976__BABIHGGH">
                        <p class="titleinexample">示例30-5调用事件处理程序</p><pre class="oac_no_warn" dir="ltr">DECLARE ret BOOLEAN; BEGIN ret：= DBMS_XDB_REPOS.createResource（'/ public / <span class="bold">res-app / res1.xml</span> '，'&lt;name&gt; TestForEventType-1 &lt;/ name&gt;'）;结束; / DECLARE b BOOLEAN：= FALSE; dummy_data CLOB：='AAA'; BEGIN b：= DBMS_XDB_REPOS.createResource（'/ public / <span class="bold">res-app / res2.gif</span> '，dummy_data）;结束; / DECLARE b BOOLEAN：= FALSE; dummy_data CLOB：='AAA'; BEGIN b：= DBMS_XDB_REPOS.createFolder（'/ public / <span class="bold">res-app / res-appfolder1</span> '）;结束; SELECT PATH FROM PATH_VIEW WHERE PATH LIKE'/ public / <span class="bold">app</span> /％'ORDER BY PATH;路径--------------------------------- / public / app / FOLDER / public / <span class="bold">app / FOLDER / res-appfolder1</span> / public / app / IMG / public / <span class="bold">app / IMG / res2.gif</span> / public / app / XML-TXT / public / <span class="bold">app / XML-TXT / res1.xml</span>选择了6行。- 删除/ res-app资源。/ app资源也会被删除。EXEC DBMS_XDB_REPOS.deleteResource（'/ public / res-app / res2.gif'）; EXEC DBMS_XDB_REPOS.deleteResource（'/ public / res-app / res1.xml'）; EXEC DBMS_XDB_REPOS.deleteResource（'/ public / res-app / res-appfolder1'）; SELECT PATH FROM PATH_VIEW WHERE PATH LIKE'/ public / <span class="bold">app</span> /％'ORDER BY PATH; PATH ------------------- / public / app / FOLDER / public / app / IMG / public / app / XML-TXT 3行选中。</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XML-DB-repository-events.html#GUID-C7D110F1-CB15-475B-83E6-7C186DF0E119" title="在资源配置文件中，使用元素事件侦听器（元素ResConfig的子）来配置Oracle XML DB存储库事件处理。">存储库事件的配置</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="02662.administering-enterprise-user-security.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>管理企业用户安全性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Enterprise User Security Administrator&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Enterprise User Security Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="enterprise-user-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:14:01-08:00"></meta>
      <meta name="dcterms.title" content="Enterprise User Security Administrator&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2000, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96086-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="enterprise-user-security-configuration-tasks-and-troubleshooting.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-oracle-wallet-manager.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="DBIMI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="enterprise-user-security-configuration-tasks-and-troubleshooting.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-oracle-wallet-manager.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">企业用户安全管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理企业用户安全性</li>
            </ol>
            <a id="GUID-5D6F6512-751D-4918-BD69-E19C39DDF2F7" name="GUID-5D6F6512-751D-4918-BD69-E19C39DDF2F7"></a><a id="DBIMI130"></a>
            
            <h2 id="DBIMI-GUID-5D6F6512-751D-4918-BD69-E19C39DDF2F7" class="sect2"><span class="enumeration_chapter">5</span>管理企业用户安全性</h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">本章介绍如何使用Oracle Enterprise Manager管理Oracle数据库中的企业用户安全性。本章包含以下主题：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="administering-enterprise-user-security.html#GUID-E1AE9543-3177-4686-B738-79EEE2FA171B">管理身份管理领域</a></p>
                     </li>
                     <li>
                        <p><a href="administering-enterprise-user-security.html#GUID-9EDEE774-CD10-4E52-A8F5-B143014F5FEC">管理企业用户</a></p>
                     </li>
                     <li>
                        <p><a href="administering-enterprise-user-security.html#GUID-70D49166-491F-416B-8CCB-F09B3DDB64E2">配置用户定义的企业组</a></p>
                     </li>
                     <li>
                        <p><a href="administering-enterprise-user-security.html#GUID-0EBE5754-4005-4AEA-8C49-CE0F85093DD3">为企业用户安全配置数据库</a></p>
                     </li>
                     <li>
                        <p><a href="administering-enterprise-user-security.html#GUID-AFE7B1B2-A7E1-4548-BF05-EDC57313005D">管理企业域</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBIMI270"></a><div class="props_rev_3"><a id="GUID-E1AE9543-3177-4686-B738-79EEE2FA171B" name="GUID-E1AE9543-3177-4686-B738-79EEE2FA171B"></a><h3 id="DBIMI-GUID-E1AE9543-3177-4686-B738-79EEE2FA171B" class="sect3">管理身份管理领域</h3>
               <div>
                  <p>身份管理领域是目录条目的子树，所有这些都由相同的管理策略管理。领域Oracle Context是目录标识管理领域中的子树，其中包含使用该目录的任何已安装Oracle产品所使用的数据。</p>
                  <p>您可以使用Oracle Internet Directory工具（如Oracle Internet Directory自助服务控制台）设置身份管理领域的属性。</p>
                  <p>通过Oracle Enterprise Manager Web界面，您可以在身份管理领域中管理与Enterprise User Security相关的条目。</p>
                  <div class="p">本节介绍管理企业用户安全性的身份管理领域。它包含以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-D070FED4-014E-4BE3-825C-097C99FB5D9C">身份管理领域版本</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9">设置身份管理领域的属性</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-EEDDF2CA-0078-4AF8-A513-438429EEA370">设置Identity Management领域的默认数据库到目录身份验证类型</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC">管理身份管理领域管理员</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnote" id="GUID-E1AE9543-3177-4686-B738-79EEE2FA171B__GUID-D82F1917-B297-418B-BAAE-0F960A8E6A60">
                     <p class="notep1">注意：</p>
                     <p>不要在领域Oracle Context中创建用户。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-E1AE9543-3177-4686-B738-79EEE2FA171B__GUID-B5C3F352-DA73-4551-A536-E655977B7B37">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="introducing-enterprise-user-security.html#GUID-C0DA3539-0811-4384-9CC3-47A78F59A581">Oracle Internet Directory如何实现身份管理</a> ”</span> ，讨论身份管理领域和领域Oracle上下文以及它们如何相互关联</p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="introducing-enterprise-user-security.html#GUID-C5CE376D-2FB1-4A5C-8B5E-D93585621205">关于企业用户安全目录条目</a> ”，</span>用于讨论用于企业用户安全性的Oracle Internet Directory条目</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBIMI271"></a><div class="props_rev_3"><a id="GUID-D070FED4-014E-4BE3-825C-097C99FB5D9C" name="GUID-D070FED4-014E-4BE3-825C-097C99FB5D9C"></a><h4 id="DBIMI-GUID-D070FED4-014E-4BE3-825C-097C99FB5D9C" class="sect4">身份管理领域版本</h4>
                  <div>
                     <p>Enterprise User Security只能使用Oracle Internet Directory <span class="italic">10g</span> （9.0.4）或更高版本提供的身份管理领域，该领域随Oracle Application Server <span class="italic">10g</span> （9.0.4）或更高版本提供。您可以使用Oracle Enterprise Manager for Oracle Database 12 <span class="italic">c</span>第1版（12.1）管理9.0.4版（或更高版本）身份管理领域中的Enterprise User Security目录条目。
                     </p>
                  </div>
               </div><a id="DBIMI603"></a><a id="DBIMI272"></a><div class="props_rev_3"><a id="GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9" name="GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9"></a><h4 id="DBIMI-GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9" class="sect4">设置身份管理领域的属性</h4>
                  <div>
                     <div class="section">
                        <p>身份管理领域具有许多属性，可以使用Oracle Internet Directory工具（如Oracle Internet Directory自助服务控制台）查看和管理这些属性。<a href="administering-enterprise-user-security.html#GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9__G1012360" title="此表有2列并列出并描述了与Enterprise User Security相关的身份管理领域属性。第1列是属性，第2列是其描述。">表5-1</a>中描述了这些属性。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9__G1012360">
                        <p class="titleintable">表5-1身份管理领域属性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="身份管理领域属性" width="100%" border="1" summary="This table has 2 columns and lists and describes the identity management realm properties that pertain to Enterprise User Security. Column 1 is the property and column 2 is its description." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d21530e449">属性</th>
                                 <th align="left" valign="bottom" width="69%" id="d21530e452">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d21530e457" headers="d21530e449 ">
                                    <p>登录名的属性</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d21530e457 d21530e452 ">
                                    <p>用于存储登录名的目录属性的名称。默认情况下，登录名存储在<code class="codeph">uid</code>属性中，但可以更改它们以对应于目录配置。在以前的版本中，这是<code class="codeph">cn</code>属性。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d21530e470" headers="d21530e449 ">
                                    <p>Kerberos主体名称的属性</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d21530e470 d21530e452 ">
                                    <p>用于存储Kerberos主体名称的目录属性的名称。默认情况下，Kerberos主体名称存储在<code class="codeph">krbPrincipalName</code>目录属性中，但可以通过更改身份管理领域中的<code class="codeph">orclCommonKrbPrincipalAttribute</code>来更改它们以对应于您的目录配置。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d21530e483" headers="d21530e449 ">
                                    <p>用户搜索库</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d21530e483 d21530e452 ">
                                    <p>企业用户存储在目录中的节点的完整可分辨名称（DN）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d21530e490" headers="d21530e449 ">
                                    <p>组搜索库</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d21530e490 d21530e452 ">
                                    <p>在该目录中为此身份管理领域存储用户组的节点的完整DN。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d21530e497" headers="d21530e449 ">
                                    <p>版本兼容性</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d21530e497 d21530e452 ">
                                    <p>此属性不再使用。但是，您应该确保它未设置为<code class="codeph">81000</code> ，因为版本8.1.7和更早版本的数据库不能与Oracle数据库<span class="italic">10g</span>或更高版本的数据库位于同一领域。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-CE62462D-4A95-4E6E-A0F2-A4EF8BBB24C9__GUID-EABE6770-1D4A-473B-862B-F9ECAB46F238">
                           <p class="notep1">注意：</p>
                           <p>每个身份管理领域都包括一个<code class="codeph">orcladmin</code>用户，该用户只是该领域的root用户。这些特定<code class="codeph">orcladmin</code>领域的<code class="codeph">orcladmin</code>用户由目录条目<code class="codeph">cn=orcladmin,cn=Users,</code> <span class="italic"><code class="codeph">realm_DN</code></span> 。请注意，当您以特定<code class="codeph">orcladmin</code>领域的<code class="codeph">orcladmin</code>用户身份登录Enterprise User Security管理工具时，您只能管理该领域的目录对象。要管理其他领域中的对象，您必须以该领域的<code class="codeph">orcladmin</code>用户身份登录管理工具。
                           </p>
                           <p>本节包括以下主题： <a href="administering-enterprise-user-security.html#GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA">设置登录名，Kerberos主体名称，用户搜索库和组搜索基本身份管理领域属性</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DBIMI604"></a><a id="DBIMI273"></a><div class="props_rev_3"><a id="GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA" name="GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA"></a><h5 id="DBIMI-GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA" class="sect5">设置登录名，Kerberos主体名称，用户搜索库和组搜索基本身份管理领域属性</h5>
                     <div>
                        <div class="section">
                           <p>通过设置这些身份管理领域属性，数据库可以找到Enterprise User Security条目。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA__GUID-4BD7E950-EC66-44DA-BD36-E0B189032A18">设置登录名，Kerberos主体名称，用户搜索库和组搜索基本身份管理领域属性：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>登录Oracle Internet Directory自助服务控制台。</span><div>
                                 <p>在浏览器窗口中输入用于访问Oracle Internet Directory自助服务控制台的URL。例如：</p><pre class="oac_no_warn" dir="ltr">HTTP：// myhost1：7777 / oiddas</pre><p>以<code class="codeph">orcladmin</code>用户身份登录。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击“ <span class="bold">配置”</span>选项卡。单击“ <span class="bold">身份管理领域”</span>子标签。</span><div>
                                 <p>将显示“目录配置”页面。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在可用字段中输入适当的信息。</span></li>
                           <li class="stepexpand"><span>单击“ <span class="bold">提交”</span>以将更改保存到目录中。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA__GUID-F55716BA-D52A-42CF-A1CB-E7ED5804A1C7">
                              <p class="notep1">也可以看看：</p>
                              <p>有关使用Oracle Internet Directory自助服务控制台的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbimi&amp;id=OIMDA004" target="_blank"><span class="italic">Oracle身份管理指南</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DBIMI605"></a><a id="DBIMI274"></a><div class="props_rev_3"><a id="GUID-EEDDF2CA-0078-4AF8-A513-438429EEA370" name="GUID-EEDDF2CA-0078-4AF8-A513-438429EEA370"></a><h4 id="DBIMI-GUID-EEDDF2CA-0078-4AF8-A513-438429EEA370" class="sect4">设置Identity Management领域的默认数据库到目录身份验证类型</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">LDAP_DIRECTORY_ACCESS</code>参数的初始值是从领域级别的默认数据库到目录身份验证属性设置中选取的。在Oracle Internet Directory中注册时，此参数在各个数据库上设置。
                        </p>
                        <p>通过Oracle Enterprise Manager界面，您可以设置数据库用于向Oracle Internet Directory进行身份验证的身份验证机制。身份验证机制可以设置为密码或SSL。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EEDDF2CA-0078-4AF8-A513-438429EEA370__GUID-D40D5A16-9051-4F08-AC89-B395F9308D81">要为身份管理领域设置默认的数据库到目录身份验证类型：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">OID领域管理</span> 。</span><div>
                              <p>将显示“OID域管理”页面。显示当前的DB-OID身份验证方法。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要更改当前的DB-OID身份验证方法，请单击“ <span class="bold">更改”</span> 。</span><div>
                              <p>将显示“域配置”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在<span class="bold">DB-OID身份验证</span>下选择密码或SSL。</span></li>
                        <li class="stepexpand"><span>如果领域中的所有数据库和客户端都是10 <span class="italic">g</span>或更高版本，则可以关闭密码验证程序功能。目录使用此功能为<span class="italic">10g之前的</span>数据库填充其他密码字段。要关闭密码验证程序，请取消选择<span class="bold">密码验证程序</span> 。</span></li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI606"></a><a id="DBIMI607"></a><a id="DBIMI275"></a><div class="props_rev_3"><a id="GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC" name="GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC"></a><h4 id="DBIMI-GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC" class="sect4">管理身份管理领域管理员</h4>
                  <div>
                     <div class="section">
                        <p>身份管理领域包含具有不同权限级别的管理组。<a href="administering-enterprise-user-security.html#GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC__G1012386" title="此表有2列并列出并描述了管理目录中的企业用户安全对象的身份管理领域管理员。第1列是管理组，第2列是其定义。">表5-2</a>中定义了与企业用户安全性相关的身份管理领域的管理组。有关这些组的详细信息，请参阅<span class="q">“ <a href="introducing-enterprise-user-security.html#GUID-973D39A9-33F1-4A47-9DF0-9D455076E02A">管理组</a> ”</span> 。
                        </p>
                        <div class="tblformal" id="GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC__G1012386">
                           <p class="titleintable">表5-2企业用户安全身份管理领域管理员</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="企业用户安全身份管理领域管理员" width="100%" border="1" summary="This table has 2 columns and lists and describes the identity management realm administrators who manage enterprise user security objects in the directory. Column 1 is the administrative group and column 2 is its definition." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="37%" id="d21530e972">行政组</th>
                                    <th align="left" valign="bottom" width="63%" id="d21530e975">定义</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d21530e980" headers="d21530e972 ">
                                       <p>Oracle数据库注册管理员</p>
                                       <p>（OracleDBCreators）</p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d21530e980 d21530e975 ">
                                       <p>在域中注册新数据库。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d21530e989" headers="d21530e972 ">
                                       <p>Oracle数据库安全管理员</p>
                                       <p>（OracleDBSecurityAdmins）</p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d21530e989 d21530e975 ">
                                       <p>拥有OracleDBSecurity目录子树的所有权限。创建，修改并可以读取所有Enterprise User Security目录对象。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d21530e998" headers="d21530e972 ">
                                       <p>Oracle上下文管理员</p>
                                       <p>（OracleContextAdmins）</p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d21530e998 d21530e975 ">
                                       <p>可以完全访问其相关领域内的所有组和条目。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="37%" id="d21530e1007" headers="d21530e972 ">
                                       <p>用户安全管理员</p>
                                       <p>（OracleUserSecurityAdmins）</p>
                                    </td>
                                    <td align="left" valign="top" width="63%" headers="d21530e1007 d21530e975 ">
                                       <p>具有管理目录中企业用户的安全性方面所需的相关权限。例如，OracleUserSecurityAdmins可以修改用户密码。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EEC0E949-1A69-4A16-8352-A3493E2AA1EC__GUID-22A1DA66-AFA7-409C-B3D5-1C41257A96D8">管理身份管理领域管理员：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">OID领域管理</span> 。</span><div>
                              <p>将显示“OID域管理”页面。此页面列出了身份管理领域中与Enterprise User Security相关的管理组。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要编辑的管理组。单击<span class="bold">编辑</span> 。</span><div>
                              <p>出现“编辑”页面。它列出了目前在OID领域管理页面中选择的组成员的目录用户。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要将目录用户添加到组，请单击“ <span class="bold">添加”</span> 。</span><div>
                              <p>将出现“选择用户”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择<span class="bold">搜索库</span> 。搜索库是您希望搜索以查找用户的目录子树。单击<span class="bold">Go</span> 。</span></li>
                        <li class="stepexpand"><span>选择要以管理员身份添加的用户。单击<span class="bold">选择</span> 。</span><div>
                              <p>用户将添加到“编辑”页面中。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="DBIMI276"></a><div class="props_rev_3"><a id="GUID-9EDEE774-CD10-4E52-A8F5-B143014F5FEC" name="GUID-9EDEE774-CD10-4E52-A8F5-B143014F5FEC"></a><h3 id="DBIMI-GUID-9EDEE774-CD10-4E52-A8F5-B143014F5FEC" class="sect3">管理企业用户</h3>
               <div>
                  <div class="p">本节介绍如何使用Oracle Internet Directory自助服务控制台和Oracle Enterprise Manager管理企业用户。它包含以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-250B15FC-6A53-4688-9A56-8B08D030EA46">创建新的企业用户</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-D839CEDE-6FF5-4FF5-B2C5-04C9767341A5">设置企业用户密码</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-5D59386E-68C9-43DD-B3FF-AB4BB41A743D">向企业用户授予企业角色</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-A43BE0BB-9846-4D8B-867E-4E058D55E69E">向企业用户授予代理权限</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-C000CF3B-AB20-4241-B388-716138580B91">为企业用户创建用户架构映射</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-098BC2C4-BEFF-46FD-BB6A-1BC79F858564">为企业用户创建标签授权</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBIMI608"></a><a id="DBIMI277"></a><div class="props_rev_3"><a id="GUID-250B15FC-6A53-4688-9A56-8B08D030EA46" name="GUID-250B15FC-6A53-4688-9A56-8B08D030EA46"></a><h4 id="DBIMI-GUID-250B15FC-6A53-4688-9A56-8B08D030EA46" class="sect4">创建新的企业用户</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用Oracle Internet Directory工具（如Oracle Internet Directory自助服务控制台）在目录中创建用户。</p>
                        <div class="infoboxnote" id="GUID-250B15FC-6A53-4688-9A56-8B08D030EA46__GUID-CBB18472-B5F3-4E2B-B6F7-ACA70AD5CC6A">
                           <p class="notep1">注意：</p>
                           <p>在创建新的企业用户之前，必须首先在目录中定义用户搜索库，并验证用户创建基础。请参阅<span class="q">“ <a href="administering-enterprise-user-security.html#GUID-CE2E1AE1-D6FB-40D2-AEAB-125A163F8CCA">设置登录名，Kerberos主体名称，用户搜索库和组搜索基本身份管理领域属性</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-250B15FC-6A53-4688-9A56-8B08D030EA46__GUID-15838A70-5F79-4D00-9A5F-8F2B8D790601">要创建新的企业用户：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录Oracle Internet Directory自助服务控制台。</span><div>
                              <p>在浏览器窗口中输入用于访问Oracle Internet Directory自助服务控制台的URL。例如：</p><pre class="oac_no_warn" dir="ltr">HTTP：// myhost1：7777 / oiddas</pre><p>以<code class="codeph">orcladmin</code>用户身份登录。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">目录”</span>选项卡。单击“ <span class="bold">用户”</span>子选项卡。</span><div>
                              <p>将显示“用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">创建”</span>以创建新用户。</span><div>
                              <p>将出现“创建用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“创建用户”页面中输入相应的用户信息。单击“ <span class="bold">提交”</span>以创建新的企业用户。</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-250B15FC-6A53-4688-9A56-8B08D030EA46__GUID-B8A2BC01-71C7-469F-9BC1-4DE4AEC2B766">
                           <p class="notep1">注意：</p>
                           <p>请注意，如果您的用户使用Kerberos凭据对数据库进行了身份验证，并且<code class="codeph">krbPrincipalName</code>属性不存在，那么请参阅<span class="q">“ <a href="enterprise-user-security-configuration-tasks-and-troubleshooting.html#GUID-73C75D2F-5A13-49AA-B55A-0CBA14FD602F__I1009790">任务1：配置Oracle Internet Directory自助服务控制台以显示Kerberos主体名称属性</a> ”</span>以获取有关如何使用的信息配置这个。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DBIMI609"></a><a id="DBIMI278"></a><div class="props_rev_3"><a id="GUID-D839CEDE-6FF5-4FF5-B2C5-04C9767341A5" name="GUID-D839CEDE-6FF5-4FF5-B2C5-04C9767341A5"></a><h4 id="DBIMI-GUID-D839CEDE-6FF5-4FF5-B2C5-04C9767341A5" class="sect4">设置企业用户密码</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用Oracle Internet Directory自助服务控制台在Oracle Internet Directory中设置和维护企业用户密码。</p>
                        <p>企业用户密码用于：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>目录登录</p>
                           </li>
                           <li>
                              <p>数据库登录，指向支持全局用户密码身份验证的数据库</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D839CEDE-6FF5-4FF5-B2C5-04C9767341A5__GUID-853B74E1-C4D6-47CF-B250-909697109020">要为企业用户设置密码：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录Oracle Internet Directory自助服务控制台。</span><div>
                              <p>在浏览器窗口中输入用于访问Oracle Internet Directory自助服务控制台的URL。例如：</p><pre class="oac_no_warn" dir="ltr">HTTP：// myhost1：7777 / oiddas</pre><p>以<code class="codeph">orcladmin</code>用户身份登录。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">目录”</span>选项卡。单击“ <span class="bold">用户”</span>子选项卡。</span><div>
                              <p>将显示“用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“ <span class="bold">搜索”</span>字段中输入企业用户的用户名（登录名）或电子邮件地址的一部分。单击<span class="bold">Go</span> 。</span><div>
                              <p>将显示符合搜索条件的所有用户的列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择您要为其创建新密码的用户。单击<span class="bold">编辑</span> 。</span><div>
                              <p>将出现“编辑用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“ <span class="bold">密码”</span>字段中输入新密码。在“ <span class="bold">确认密码”</span>字段中<span class="bold">确认密码</span> 。单击“ <span class="bold">提交”</span></span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI279"></a><div class="props_rev_3"><a id="GUID-5D59386E-68C9-43DD-B3FF-AB4BB41A743D" name="GUID-5D59386E-68C9-43DD-B3FF-AB4BB41A743D"></a><h4 id="DBIMI-GUID-5D59386E-68C9-43DD-B3FF-AB4BB41A743D" class="sect4">向企业用户授予企业角色</h4>
                  <div>
                     <div class="section">
                        <p>企业角色是目录对象，允许您从各种数据库对全局角色进行分组。您可以为企业用户分配企业角色，从而为企业用户提供跨企业数据库的权限。</p>
                        <p>要向企业用户授予企业角色：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">配置企业用户</span> 。</span><div>
                              <p>将显示“配置企业用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择企业用户所在的<span class="bold">搜索库</span> 。搜索库是包含企业用户条目的子树。您可以选择在“ <span class="bold">名称”</span>字段中输入企业用户的公用名。在“ <span class="bold">视图”</span>框中选择“用户”。单击<span class="bold">Go</span> 。</span><div>
                              <p>将显示具有匹配条件的用户列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业用户。单击<span class="bold">配置</span> 。</span><div>
                              <p>将出现“配置用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“企业角色”选项卡。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">授予”</span></span><div>
                              <p>将出现“选择企业角色”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择您要授予的企业角色。单击<span class="bold">选择</span> 。</span></li>
                        <li class="stepexpand"><span>在“配置用户”页面中单击“ <span class="bold">确定</span> ”</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI280"></a><div class="props_rev_3"><a id="GUID-A43BE0BB-9846-4D8B-867E-4E058D55E69E" name="GUID-A43BE0BB-9846-4D8B-867E-4E058D55E69E"></a><h4 id="DBIMI-GUID-A43BE0BB-9846-4D8B-867E-4E058D55E69E" class="sect4">向企业用户授予代理权限</h4>
                  <div>
                     <div class="section">
                        <p>代理权限允许企业用户代理本地数据库用户，这意味着企业用户可以作为本地数据库用户登录数据库。您可以向单个用户或组授予代理权限。代理权限对于作为企业用户跨多个数据库运行的中间层应用程序特别有用。</p>
                        <p>代理权限是在企业域级别创建的。为企业域创建代理权限后，您可以将其授予企业用户。</p>
                        <p>要向企业用户授予代理权限：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">配置企业用户</span> 。</span><div>
                              <p>将显示“配置企业用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择企业用户所在的<span class="bold">搜索库</span> 。搜索库是包含企业用户条目的子树。您可以选择在“ <span class="bold">名称”</span>字段中输入企业用户的公用名。在“ <span class="bold">视图”</span>框中选择“用户”。单击<span class="bold">Go</span> 。</span><div>
                              <p>将显示具有匹配条件的用户列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业用户。单击<span class="bold">配置</span> 。</span><div>
                              <p>将出现“配置用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">代理权限”</span>选项卡。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">授予”</span></span><div>
                              <p>将出现“选择代理权限”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要授予的代理权限。必须已为企业域创建代理权限。单击<span class="bold">选择</span> 。</span></li>
                        <li class="stepexpand"><span>在“配置用户”页面中单击“ <span class="bold">确定</span> ”</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI281"></a><div class="props_rev_3"><a id="GUID-C000CF3B-AB20-4241-B388-716138580B91" name="GUID-C000CF3B-AB20-4241-B388-716138580B91"></a><h4 id="DBIMI-GUID-C000CF3B-AB20-4241-B388-716138580B91" class="sect4">为企业用户创建用户架构映射</h4>
                  <div>
                     <div class="section">
                        <p>用户架构映射将企业用户映射到全局数据库架构。当企业用户登录数据库时，默认情况下，他将连接到映射的架构。</p>
                        <p>要创建用户架构映射：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">配置企业用户</span> 。</span><div>
                              <p>将显示“配置企业用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择企业用户所在的<span class="bold">搜索库</span> 。搜索库是包含企业用户条目的子树。您可以选择在“ <span class="bold">名称”</span>字段中输入企业用户的公用名。在“ <span class="bold">视图”</span>框中选择“用户”。单击<span class="bold">Go</span> 。</span><div>
                              <p>将显示具有匹配条件的用户列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业用户。单击<span class="bold">配置</span> 。</span><div>
                              <p>将出现“配置用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">用户架构映射”</span>选项卡。将显示直接或间接应用于用户的所有用户架构映射。</span><div>
                              <p>用户可以单独映射到架构。或者，您可以将包含多个用户的目录子树映射到数据库模式。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">创建”</span></span><div>
                              <p>系统弹出“创建映射”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“发件人”部分下，选择“ <span class="bold">用户”</span>以将单个企业用户映射到数据库模式。或者，选择<span class="bold">“</span>子<span class="bold">树”</span>以映射包含多个用户的目录子树。</span></li>
                        <li class="stepexpand"><span>在“收件人”下，选择“ <span class="bold">数据库”</span>以映射到数据库架构选择“ <span class="bold">域”</span>以映射到企业域中所有数据库通用的模式。</span><div>
                              <p>您可以在企业域中拥有具有公共模式名称的多个数据库。将企业用户映射到此类模式时，企业用户将自动映射到域中包含的每个数据库中的各个模式。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果在上一步中选择了“数据库”，则选择包含该架构的数据库的名称。接下来，输入数据库模式名称。您还可以使用搜索图标选择架构。您将需要登录数据库以选择架构。</span><div>
                              <p>如果在上一步中选择了“域”，则选择域的名称，然后在“ <span class="bold">架构”</span>字段中输入公共架构名称。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在Create Mapping页面中单击<span class="bold">Continue</span> 。</span></li>
                        <li class="stepexpand"><span>在“配置用户”页面中单击“ <span class="bold">确定</span> ”</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI282"></a><div class="props_rev_3"><a id="GUID-098BC2C4-BEFF-46FD-BB6A-1BC79F858564" name="GUID-098BC2C4-BEFF-46FD-BB6A-1BC79F858564"></a><h4 id="DBIMI-GUID-098BC2C4-BEFF-46FD-BB6A-1BC79F858564" class="sect4">为企业用户创建标签授权</h4>
                  <div>
                     <div class="section">
                        <p>存储在目录中的Oracle Label Security（OLS）策略可以具有与之关联的多个配置文件。每个配置文件都是一组策略授权和权限。这些策略授权和特权适用于属于该配置文件的所有企业用户。您可以将配置文件分配给企业用户。</p>
                        <p>要为企业用户分配标签授权：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">配置企业用户</span> 。</span><div>
                              <p>将显示“配置企业用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择企业用户所在的<span class="bold">搜索库</span> 。搜索库是包含企业用户条目的子树。您可以选择在“ <span class="bold">名称”</span>字段中输入企业用户的公用名。在“ <span class="bold">视图”</span>框中选择“用户”。单击<span class="bold">Go</span> 。</span><div>
                              <p>将显示具有匹配条件的用户列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业用户。单击<span class="bold">配置</span> 。</span><div>
                              <p>将出现“配置用户”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">标签授权”</span>选项卡。</span><div>
                              <p>显示与用户关联的所有用户配置文件的列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">添加</span> 。</span><div>
                              <p>出现“选择用户配置文件”窗口</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要将用户添加到的用户配置文件，然后单击“ <span class="bold">选择”</span> 。每个策略只能选择一个配置文件。</span></li>
                        <li class="stepexpand"><span>在“配置用户”页面中单击“ <span class="bold">确定</span> ”</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="DBIMI283"></a><div class="props_rev_3"><a id="GUID-70D49166-491F-416B-8CCB-F09B3DDB64E2" name="GUID-70D49166-491F-416B-8CCB-F09B3DDB64E2"></a><h3 id="DBIMI-GUID-70D49166-491F-416B-8CCB-F09B3DDB64E2" class="sect3">配置用户定义的企业组</h3>
               <div>
                  <p>用户定义的企业组可帮助将需要相同角色或特权的企业用户组合在一起，以跨企业数据库进企业组存储在目录中。</p>
                  <p>本节包括以下主题： <a href="administering-enterprise-user-security.html#GUID-7FEDBD6F-5427-4824-A401-C9C2C88CBDAB">向用户定义的企业组授予企业角色</a> 。
                  </p>
               </div><a id="DBIMI284"></a><a id="EUSTK013"></a><div class="props_rev_3"><a id="GUID-7FEDBD6F-5427-4824-A401-C9C2C88CBDAB" name="GUID-7FEDBD6F-5427-4824-A401-C9C2C88CBDAB"></a><h4 id="DBIMI-GUID-7FEDBD6F-5427-4824-A401-C9C2C88CBDAB" class="sect4">将企业角色授予用户定义的企业组</h4>
                  <div>
                     <div class="section">
                        <p>企业角色是目录对象，允许您从各种数据库对全局角色进行分组。您可以将企业角色分配给企业组，从而为组成员提供跨企业数据库的权限。</p>
                        <p>要将企业角色授予企业组：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">配置用户定义的企业组”</span> 。</span><div>
                              <p>将显示“配置企业组”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择企业组所在的<span class="bold">搜索库</span> 。搜索库是包含企业组条目的子树。（可选）在“ <span class="bold">名称”</span>字段中输入企业组的公用名。在“ <span class="bold">视图”</span>框中选择“组”。单击<span class="bold">Go</span> 。</span><div>
                              <p>将显示具有匹配条件的组列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业组。单击<span class="bold">配置</span> 。</span><div>
                              <p>将出现“配置组”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“企业角色”选项卡。</span><div>
                              <p>将显示授予企业组的企业角色列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">授予”</span>以向组授予新的企业角色。</span><div>
                              <p>将出现“选择企业角色”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择您要授予的企业角色。单击<span class="bold">选择</span> 。</span></li>
                        <li class="stepexpand"><span>在“配置组”页面中单击“ <span class="bold">确定</span> ”。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="DBIMI285"></a><div class="props_rev_3"><a id="GUID-0EBE5754-4005-4AEA-8C49-CE0F85093DD3" name="GUID-0EBE5754-4005-4AEA-8C49-CE0F85093DD3"></a><h3 id="DBIMI-GUID-0EBE5754-4005-4AEA-8C49-CE0F85093DD3" class="sect3">为企业用户安全配置数据库</h3>
               <div>
                  <p>可以使用Enterprise Manager配置向Oracle Internet Directory注册的数据库的企业用户安全性。您可以将用户或子树映射到数据库模式。您还可以在目录中配置可以修改数据库的架构映射和企业域成员身份的管理员。</p>
                  <div class="p">有关更多信息，请参阅以下部分：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-CA33BD75-D63D-4EF2-8C2E-4D4796563284">为数据库创建用户架构映射</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-63EDAE01-CABC-4254-AF8A-869A7336FFAA">添加管理员以管理数据库架构映射</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBIMI286"></a><a id="EUSTK016"></a><div class="props_rev_3"><a id="GUID-CA33BD75-D63D-4EF2-8C2E-4D4796563284" name="GUID-CA33BD75-D63D-4EF2-8C2E-4D4796563284"></a><h4 id="DBIMI-GUID-CA33BD75-D63D-4EF2-8C2E-4D4796563284" class="sect4">为数据库创建用户架构映射</h4>
                  <div>
                     <div class="section">
                        <p>用户架构映射将企业用户映射到数据库中的全局架构。当企业用户登录数据库时，默认情况下，他将连接到映射的架构。</p>
                        <p>要创建用户架构映射：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">配置数据库”</span> 。</span><div>
                              <p>将显示“配置数据库”页面。显示在身份管理领域中注册的数据库列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择数据库名称。单击<span class="bold">配置</span> 。</span><div>
                              <p>出现“配置数据库”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">用户架构映射”</span>选项卡。将显示在数据库级别创建的所有用户架构映射。此处不显示在企业域级别创建的用户架构映射。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">创建”</span>以为数据库创建新的用户架构映射。</span><div>
                              <p>系统弹出“创建映射”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“发件人”部分下，选择“ <span class="bold">用户”</span>以将单个企业用户映射到数据库模式。或者，选择<span class="bold">“</span>子<span class="bold">树”</span>以映射包含多个用户的目录子树。您可以使用“搜索”图标搜索相应的用户或子树。</span></li>
                        <li class="stepexpand"><span>在“收件人”部分下，输入用户或子树应映射到的<span class="bold">架构</span>的名称。您可以使用搜索图标在数据库中搜索相应的架构。您将需要登录数据库才能访问模式名称。</span></li>
                        <li class="stepexpand"><span>在Create Mapping页面中单击<span class="bold">Continue</span> 。</span></li>
                        <li class="stepexpand"><span>在Configure Database页面中单击<span class="bold">OK</span> 。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI287"></a><a id="EUSTK018"></a><div class="props_rev_3"><a id="GUID-63EDAE01-CABC-4254-AF8A-869A7336FFAA" name="GUID-63EDAE01-CABC-4254-AF8A-869A7336FFAA"></a><h4 id="DBIMI-GUID-63EDAE01-CABC-4254-AF8A-869A7336FFAA" class="sect4">添加管理员以管理数据库架构映射</h4>
                  <div>
                     <div class="section">
                        <p>有权管理数据库的数据库模式映射的目录用户可以为数据库创建或删除数据库模式映射。</p>
                        <p>添加管理员以管理数据库模式映射：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">配置数据库”</span> 。</span><div>
                              <p>将显示“配置数据库”页面。显示在身份管理领域中注册的数据库列表。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择数据库名称。单击<span class="bold">配置</span> 。</span><div>
                              <p>出现“配置数据库”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理员”</span>选项卡。将显示可以管理数据库模式映射的管理员列表。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">添加”</span>以添加管理员。</span><div>
                              <p>将出现“选择用户”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择<span class="bold">搜索库</span> 。搜索库是您希望搜索以查找用户的目录子树。单击<span class="bold">Go</span> 。</span></li>
                        <li class="stepexpand"><span>选择要以管理员身份添加的用户。单击<span class="bold">选择</span> 。</span><div>
                              <p>用户将添加到“配置数据库”页面中。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果您希望用户能够添加或删除其他管理员，请选中与添加的用户对应的<span class="bold">管理员组所有者</span>复选框。</span></li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="DBIMI288"></a><div class="props_rev_3"><a id="GUID-AFE7B1B2-A7E1-4548-BF05-EDC57313005D" name="GUID-AFE7B1B2-A7E1-4548-BF05-EDC57313005D"></a><h3 id="DBIMI-GUID-AFE7B1B2-A7E1-4548-BF05-EDC57313005D" class="sect3">管理企业域</h3>
               <div>
                  <p>Enterprise Domains是可以共享企业角色，代理权限，用户架构映射，当前用户数据库链接和允许的身份验证机制的数据库组。数据库只能属于一个企业域。</p>
                  <p>企业域可以被视为管理域，由该域的Domain Admins组管理。这些管理员可以将数据库添加到企业域。</p>
                  <p>身份管理领域包含名为<code class="codeph">OracleDefaultDomain</code>的企业域。<code class="codeph">OracleDefaultDomain</code>是首次在目录中创建的领域的一部分。当新数据库注册到<code class="codeph">OracleDefaultDomain</code> ，它将自动成为该<code class="codeph">OracleDefaultDomain</code>的成员。您可以创建和删除自己的企业域，但不能从域中删除<code class="codeph">OracleDefaultDomain</code> 。
                  </p>
                  <div class="p">本节介绍如何使用Oracle Enterprise Manager管理目录中的企业域。它包含以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-38C395C8-3D91-4177-9A0E-D24A3744080F">创建企业域</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-694B2052-0A04-4A76-9A2E-73334A3CA4ED">将数据库添加到企业域</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-8386D563-E7B0-41F4-B052-7726523205C7">为企业域创建用户架构映射</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-00E6222A-4690-475F-9814-C02848C48003">配置企业角色</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-8DA40CE7-514C-4200-9A9F-93D1DB46A93E">配置代理权限</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-1338F679-CC93-4A46-9676-47248F110393">配置用户身份验证类型和启用当前用户数据库链接</a></p>
                        </li>
                        <li>
                           <p><a href="administering-enterprise-user-security.html#GUID-0738C81F-B1D1-4C63-B59C-1607F4EB1DC6">配置域管理员</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBIMI289"></a><div class="props_rev_3"><a id="GUID-38C395C8-3D91-4177-9A0E-D24A3744080F" name="GUID-38C395C8-3D91-4177-9A0E-D24A3744080F"></a><h4 id="DBIMI-GUID-38C395C8-3D91-4177-9A0E-D24A3744080F" class="sect4">创建企业域</h4>
                  <div>
                     <div class="section">
                        <p>企业域是数据库的管理域，可以共享企业角色，代理权限，用户架构映射，当前用户数据库链接和允许的身份验证机制。</p>
                        <p>如果您不想使用<code class="codeph">OracleDefaultDomain</code> ，则可以在身份管理领域中创建新的企业域。
                        </p>
                        <p>要创建企业域：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理企业域”</span> 。</span><div>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">创建”</span>以创建新的企业域。</span><div>
                              <p>将出现“创建域”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“ <span class="bold">名称”</span>字段中输入新企业域的<span class="bold">名称</span> 。单击<span class="bold">确定</span> 。</span><div>
                              <p>新企业域将添加到“企业域”页面中的企业域列表中。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="DBIMI290"></a><div class="props_rev_3"><a id="GUID-694B2052-0A04-4A76-9A2E-73334A3CA4ED" name="GUID-694B2052-0A04-4A76-9A2E-73334A3CA4ED"></a><h4 id="DBIMI-GUID-694B2052-0A04-4A76-9A2E-73334A3CA4ED" class="sect4">将数据库添加到企业域</h4>
                  <div>
                     <div class="section">
                        <p>Domain Admins组的成员可以将数据库添加到企业域。您可以从“配置域”页面将数据库添加到企业域。如果要创建新的企业域，还可以从“创建域”页面添加数据库。</p>
                        <div class="infoboxnote" id="GUID-694B2052-0A04-4A76-9A2E-73334A3CA4ED__GUID-FE0BB98B-8CE0-4CE1-A602-8FE117CDCBD7">
                           <p class="notep1">注意：</p>
                           <p>以下限制适用于将数据库添加到企业域：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>仅当数据库和企业域都存在时，才能将数据库添加到企业域<span class="italic"> </span>在相同的<span class="italic"> </span>领域。
                                 </p>
                              </li>
                              <li>
                                 <p>无法将数据库添加为两个不同企业域的成员。</p>
                              </li>
                           </ul>
                        </div>
                        <p>要将数据库添加到企业域：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理企业域”</span> 。</span><div>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业域。单击<span class="bold">配置</span> 。</span><div>
                              <p>将显示“配置域”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>确保选中“数据库”选项卡。单击“ <span class="bold">添加”</span>以将新数据库<span class="bold">添加</span>到企业域。</span><div>
                              <p>将出现“选择数据库”页面。显示在身份管理领域注册的数据库列表。仅当数据库不属于任何其他企业域时，才能添加数据库。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要添加的数据库。单击<span class="bold">选择</span> 。</span></li>
                        <li class="stepexpand"><span>在“配置域”页面中单击“ <span class="bold">确定</span> ”。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI291"></a><div class="props_rev_3"><a id="GUID-8386D563-E7B0-41F4-B052-7726523205C7" name="GUID-8386D563-E7B0-41F4-B052-7726523205C7"></a><h4 id="DBIMI-GUID-8386D563-E7B0-41F4-B052-7726523205C7" class="sect4">为企业域创建用户架构映射</h4>
                  <div>
                     <div class="section">
                        <p>用户架构映射将企业用户映射到数据库中的全局架构。当企业用户登录数据库时，默认情况下，他将连接到映射的架构。</p>
                        <p>为企业域创建用户架构映射时，它适用于域中的所有数据库。但是，要使映射在数据库中有效，该数据库必须具有带有映射中使用的名称的模式。</p>
                        <p>要为企业域创建用户架构映射，请执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理企业域”</span> 。</span><div>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业域。单击<span class="bold">配置</span> 。</span><div>
                              <p>将显示“配置域”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">用户架构映射”</span>选项卡。将显示在域级别创建的所有用户架构映射。此处不显示在数据库级别创建的用户架构映射。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">创建”</span>以为域创建新的用户架构映射。</span><div>
                              <p>系统弹出“创建映射”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“发件人”部分下，选择“ <span class="bold">用户”</span>以将单个企业用户映射到数据库模式。或者，选择<span class="bold">“</span>子<span class="bold">树”</span>以映射包含多个用户的目录子树。您可以使用“搜索”图标搜索相应的用户或子树。</span></li>
                        <li class="stepexpand"><span>在“收件人”部分下，输入用户或子树应映射到的<span class="bold">架构</span>的名称。</span></li>
                        <li class="stepexpand"><span>在Create Mapping页面中单击<span class="bold">Continue</span> 。</span></li>
                        <li class="stepexpand"><span>在“配置域”页面中单击“ <span class="bold">确定</span> ”。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI292"></a><div class="props_rev_3"><a id="GUID-00E6222A-4690-475F-9814-C02848C48003" name="GUID-00E6222A-4690-475F-9814-C02848C48003"></a><h4 id="DBIMI-GUID-00E6222A-4690-475F-9814-C02848C48003" class="sect4">配置企业角色</h4>
                  <div>
                     <div class="section">
                        <p>一个<a href="glossary.html#GUID-54BA3120-94F0-4B48-8A39-7B81DA675240"><span class="xrefglossterm">企业域</span></a>的身份管理领域内可以包含多个<a href="glossary.html#GUID-2038C643-C389-452E-9317-2105E39909A8"><span class="xrefglossterm">企业的作用</span></a> <span class="bold">秒</span> 。一个企业的作用是一组基于角色的Oracle <a href="glossary.html#GUID-4484B1EF-5BBA-4AFF-BA8E-88844A58C2B4"><span class="xrefglossterm">授权</span></a>的企业域跨越一个或多个数据库<span class="bold">秒</span> 。
                        </p>
                        <p>企业角色允许您从属于企业域的不同数据库中对全局角色进行分组。可以将企业角色分配给企业用户。</p>
                        <p>要创建企业角色：</p>
                        <ol>
                           <li>
                              <p>以管理用户身份登录Enterprise Manager Cloud Control。</p>
                           </li>
                           <li>
                              <p>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。
                              </p>
                           </li>
                           <li>
                              <p>单击出现的列表中的数据库名称。出现数据库页面。</p>
                           </li>
                           <li>
                              <p>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。
                              </p>
                              <p>将显示“企业用户安全性”页面</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">管理企业域”</span> 。
                              </p>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </li>
                           <li>
                              <p>选择要配置的企业域。单击<span class="bold">配置</span> 。
                              </p>
                              <p>将显示“配置域”页面。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">企业角色”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>以创建新的企业角色。
                              </p>
                              <p>将显示“ <span class="bold">创建企业角色”</span>页面。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="bold">名称”</span>字段中输入企业角色的<span class="bold">名称</span> 。单击<span class="bold">继续</span> 。
                              </p>
                              <p>新角色显示在“配置域”页面中。</p>
                           </li>
                        </ol>
                        <p>接下来，您可以配置刚刚创建的企业角色。配置企业角色包括将数据库全局角色添加到企业角色，以及将企业角色分配给企业用户或组。</p>
                        <p>要将数据库全局角色添加到企业角色：</p>
                        <ol>
                           <li>
                              <p>在“配置域”页面中选择刚刚创建的企业角色。单击<span class="bold">编辑</span> 。
                              </p>
                              <p>将显示“编辑企业角色”页面。</p>
                           </li>
                           <li id="GUID-00E6222A-4690-475F-9814-C02848C48003__CACHGGCE">
                              <p>确保已选中“ <span class="bold">DB全局角色”</span>选项卡。单击“ <span class="bold">添加”</span>以从属于企业域的数据库中添加全局角色。
                              </p>
                              <p>将显示“搜索和选择数据库全局角色”页面。</p>
                           </li>
                           <li>
                              <p>选择包含要添加的全局角色的<span class="bold">数据库</span> 。通过提供<span class="bold">用户名</span>和<span class="bold">密码</span>登录到所选数据库。单击<span class="bold">Go</span> 。</p>
                           </li>
                           <li id="GUID-00E6222A-4690-475F-9814-C02848C48003__CACGBEDJ">
                              <p>选择要添加的全局角色。单击<span class="bold">选择</span> 。
                              </p>
                              <p>所选角色将显示在“编辑企业角色”页面中。</p>
                           </li>
                           <li>
                              <p>对其他数据库重复步骤2到4。</p>
                           </li>
                        </ol>
                        <p>您现在可以将企业角色分配给企业用户或组。</p>
                        <p>要将企业角色分配给企业用户或组：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>单击“编辑企业角色”页面中的“ <span class="bold">受赠者”</span>选项卡。</span></li>
                        <li class="stepexpand"><span>单击<span class="bold">添加</span> 。</span><div>
                              <p>将显示“选择用户或组”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择<span class="bold">搜索库</span>或包含用户或组的子树。如果要向用户授予企业角色，请在“ <span class="bold">查看”</span>下选择“用户”。如果要将角色授予组，请在“ <span class="bold">查看”</span>下选择“组”。（可选）在“ <span class="bold">名称”</span>字段中输入用户或组的公用名。单击<span class="bold">Go</span> 。</span></li>
                        <li class="stepexpand"><span>选择要授予企业角色的用户或组。单击<span class="bold">选择</span> 。</span></li>
                        <li class="stepexpand"><span>单击“编辑企业角色”页面中的“ <span class="bold">继续</span> ”</span></li>
                        <li class="stepexpand"><span>在“配置域”页面中单击“ <span class="bold">确定</span> ”。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI293"></a><div class="props_rev_3"><a id="GUID-8DA40CE7-514C-4200-9A9F-93D1DB46A93E" name="GUID-8DA40CE7-514C-4200-9A9F-93D1DB46A93E"></a><h4 id="DBIMI-GUID-8DA40CE7-514C-4200-9A9F-93D1DB46A93E" class="sect4">配置代理权限</h4>
                  <div>
                     <div class="section">
                        <p>代理权限是在企业域级别创建的。代理权限允许企业用户代理本地数据库用户，这意味着企业用户可以作为本地数据库用户登录数据库。您可以向单个企业用户或组授予代理权限。代理权限对于作为企业用户跨多个数据库运行的中间层应用程序特别有用。</p>
                        <p>要为企业域创建代理权限，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>以管理用户身份登录Enterprise Manager Cloud Control。</p>
                           </li>
                           <li>
                              <p>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。
                              </p>
                           </li>
                           <li>
                              <p>单击出现的列表中的数据库名称。出现数据库页面。</p>
                           </li>
                           <li>
                              <p>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。
                              </p>
                              <p>将显示“企业用户安全性”页面</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">管理企业域”</span> 。
                              </p>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </li>
                           <li>
                              <p>选择要配置的企业域。单击<span class="bold">配置</span> 。
                              </p>
                              <p>将显示“配置域”页面。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">代理权限”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>以创建新的代理权限。
                              </p>
                              <p>将出现“ <span class="bold">创建代理权限”</span>页面。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="bold">名称”</span>字段中输入代理权限的<span class="bold">名称</span> 。单击<span class="bold">继续</span> 。
                              </p>
                              <p>代理权限显示在“配置域”页面中。</p>
                           </li>
                        </ol>
                        <p>接下来，您需要为该权限添加目标数据库用户。您还需要向企业用户或组授予权限，然后企业用户或组可以代理目标数据库用户。</p>
                        <p>要为代理权限添加目标数据库用户：</p>
                        <ol>
                           <li>
                              <p>在“配置域”页面中选择刚刚创建的代理权限。单击<span class="bold">编辑</span> 。
                              </p>
                              <p>将显示“编辑代理权限”页面。</p>
                           </li>
                           <li>
                              <p>确保选中“ <span class="bold">目标数据库用户”</span>选项卡。单击<span class="bold">添加</span> 。
                              </p>
                              <p>将出现“搜索和选择”窗口。显示已更改为允许企业用户代理的所有数据库用户的列表。</p>
                           </li>
                           <li>
                              <p>选择要代理的目标数据库用户。单击<span class="bold">选择</span> 。
                              </p>
                           </li>
                        </ol>
                        <p>您现在可以向企业用户或组授予代理权限。</p>
                        <p>要向企业用户或组授予代理权限，请执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>单击“编辑代理权限”页面中的“ <span class="bold">受赠人”</span>选项卡。</span></li>
                        <li class="stepexpand"><span>单击<span class="bold">添加</span> 。</span><div>
                              <p>将出现“选择用户或组”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择<span class="bold">搜索库</span>或包含用户或组的子树。如果要向用户授予代理权限，请在“ <span class="bold">查看”</span>下选择“用户”。如果要授予组的代理权限，请在“ <span class="bold">查看”</span>下选择“组”。（可选）在“ <span class="bold">名称”</span>字段中输入用户或组的公用名。单击<span class="bold">Go</span> 。</span></li>
                        <li class="stepexpand"><span>选择“用户”或“组”以授予他们代理权限。单击<span class="bold">选择</span> 。</span></li>
                        <li class="stepexpand"><span>在“编辑代理权限”页面中单击“ <span class="bold">继续</span> ”。</span></li>
                        <li class="stepexpand"><span>在“配置域”页面中单击“ <span class="bold">确定</span> ”。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI294"></a><div class="props_rev_3"><a id="GUID-1338F679-CC93-4A46-9676-47248F110393" name="GUID-1338F679-CC93-4A46-9676-47248F110393"></a><h4 id="DBIMI-GUID-1338F679-CC93-4A46-9676-47248F110393" class="sect4">配置用户身份验证类型和启用当前用户数据库链接</h4>
                  <div>
                     <div class="section">
                        <p>可以使用密码身份验证，SSL身份验证或Kerberos身份验证对企业用户进行身份验证。您可以使用Enterprise Manager设置企业域允许的身份验证模式。您还可以为企业域中的数据库启用当前用户数据库链接。这些链接使数据库能够相互信任以对用户进行身份验证。</p>
                        <p>要配置用户身份验证类型并启用当前用户数据库链接：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理企业域”</span> 。</span><div>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业域。单击<span class="bold">配置</span> 。</span><div>
                              <p>将显示“配置域”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">配置”</span>选项卡。</span></li>
                        <li class="stepexpand"><span>在“接受的用户身份验证类型”下，选择要允许的身份验证类型。</span></li>
                        <li class="stepexpand"><span>如果要为域<span class="bold">启用当前用户数据库链接，请</span>选择“ <span class="bold">在此域中启用当前用户数据库链接”</span> 。</span></li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                     </ol>
                  </div>
               </div><a id="DBIMI295"></a><div class="props_rev_3"><a id="GUID-0738C81F-B1D1-4C63-B59C-1607F4EB1DC6" name="GUID-0738C81F-B1D1-4C63-B59C-1607F4EB1DC6"></a><h4 id="DBIMI-GUID-0738C81F-B1D1-4C63-B59C-1607F4EB1DC6" class="sect4">配置域管理员</h4>
                  <div>
                     <div class="section">
                        <p>域管理员在域中具有完全权限。他们可以向域添加或删除数据库，创建用户架构映射，管理代理权限以及修改域配置设置。您可以从Enterprise Manager添加或删除域管理员。</p>
                        <p>要添加企业域管理员：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以管理用户身份登录Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>要导航到数据库，请从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库</span> ”。</span></li>
                        <li class="stepexpand"><span>单击出现的列表中的数据库名称。出现数据库页面。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Administration</span>菜单下，选择<span class="bold">Security，Enterprise User Security。</span> 将显示“Oracle Internet Directory登录”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">用户”</span>字段中输入可以管理企业用户的目录用户的可分辨名称（DN）。在“ <span class="bold">密码”</span>字段中输入用户密码。单击<span class="bold">登录</span> 。</span><div>
                              <p>将显示“企业用户安全性”页面</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理企业域”</span> 。</span><div>
                              <p>将显示“管理企业域”页面。此页面列出了身份管理领域中的企业域。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择要配置的企业域。单击<span class="bold">配置</span> 。</span><div>
                              <p>将显示“配置域”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">管理员”</span>选项卡。将显示企业域的管理员列表。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">添加”</span>以添加管理员。</span><div>
                              <p>将出现“选择用户”窗口。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>选择<span class="bold">搜索库</span> 。搜索库是您希望搜索以查找用户的目录子树。单击<span class="bold">Go</span> 。</span></li>
                        <li class="stepexpand"><span>选择要以管理员身份添加的用户。单击<span class="bold">选择</span> 。</span><div>
                              <p>用户将添加到“配置域”页面中。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果您希望用户能够添加或删除其他管理员，请选中与添加的用户对应的<span class="bold">管理员组所有者</span>复选框。</span></li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00556.aq-operations-using-pl-sql.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="These topics describes the Oracle Database Advanced Queuing (AQ) PL/SQL operational interface."></meta>
      <meta name="description" content="These topics describes the Oracle Database Advanced Queuing (AQ) PL/SQL operational interface."></meta>
      <title>使用PL / SQL的Oracle数据库高级排队操作</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content="These topics describes the Oracle Database Advanced Queuing (AQ) PL/SQL operational interface."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="aq-messaging-gateway-views.html" title="Previous" type="text/html"></link>
      <link rel="next" href="jms-introduction.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-messaging-gateway-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="jms-introduction.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用PL / SQL的Oracle数据库高级排队操作</li>
            </ol>
            <a id="GUID-B302CBDB-0B75-4BF6-B705-5DC3EA26E605" name="GUID-B302CBDB-0B75-4BF6-B705-5DC3EA26E605"></a><a id="ADQUE1000"></a>
            
            <h2 id="ADQUE-GUID-B302CBDB-0B75-4BF6-B705-5DC3EA26E605" class="sect2"><span class="enumeration_chapter">10</span>使用PL / SQL进行Oracle数据库高级排队操作</h2>
         </header>
         <div class="ind">
            <div>
               <p>这些主题描述了Oracle数据库高级队列（AQ）PL / SQL操作界面。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-5A2D60AC-21B1-4F6E-BA1E-78071CA98FD4" title="对于安全队列，您必须在messages_properties参数中指定sender_id。">使用安全队列</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35" title="此过程将消息添加到指定的队列。">排队邮件</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-92FCE63B-7713-443A-84A3-9F543F0A8819" title="使用ENQUEUE_ARRAY函数使用相应的消息属性数组将有效负载数组排入队列。">排队消息数组</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-B5606574-8C70-41AE-A362-A753033C3A70" title="此过程指定要监视的队列。">听一个或多个队列</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54" title="此过程使来自指定队列的消息出列。">出列消息</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-0B018200-824D-458D-98E7-7445AF8B628F" title="使用DEQUEUE_ARRAY函数将有效负载数组和相应的消息属性数组出列。">出列消息数组</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5" title="此过程注册电子邮件地址，用户定义的PL / SQL过程或HTTP URL以进行消息通知。">注册通知</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-4C80C7E8-DAD2-49CA-9294-895581A64378" title="此过程发布到匿名订阅列表，允许所有注册订阅的客户端获取持久消息的通知。">发布订阅者通知</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-E4F131CA-964F-4DF7-86EE-FB37078DD157" title="此过程为LDAP服务器中的Oracle Database Advanced Queuing代理创建条目。">将代理添加到LDAP服务器</a></p>
                  </li>
                  <li>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-E6B7E2DC-9FD6-4EA8-8A92-D9929B9EA1B7" title="此过程从LDAP服务器中删除Oracle Database Advanced Queuing代理的条目。">从LDAP服务器中删除代理</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-B302CBDB-0B75-4BF6-B705-5DC3EA26E605__GUID-28DFCBA4-B8D5-4261-91C3-8FA46FFA1784">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-program-interfaces.html#GUID-9A4C8FD4-235D-4F90-B757-3E36B2E5CF76" title="这些主题描述了在准备Oracle数据库高级队列（AQ）应用程序环境时必须使用的各种语言选项和元素以及需要考虑的问题。">Oracle数据库高级队列：程序化接口，</a>用于列出每个编程接口中的可用功能</p>
                     </li>
                     <li>
                        <p>有关PL / SQL接口的更多信息，请参阅<a href="../arpls/DBMS_AQ.html#ARPLS004" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考中的</span></a> “DBMS_AQ”</p>
                     </li>
                     <li>
                        <p>有关Java接口的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=JAJMS" target="_blank"><span class="italic">参见Oracle数据库高级队列Java API参考</span></a></p>
                     </li>
                     <li>
                        <p>“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=LNOCI160" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a> ”中的“更多OCI关系函数”</p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=LNOCI090" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide中的</span></a> “OCI编程高级主题”，了解有关<a href="glossary.html#GUID-4C11A79C-E65E-4B48-8A30-E628E322B025"><span class="xrefglossterm">Oracle调用接口</span></a> （OCI）的更多信息</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADQUE2812"></a><div class="props_rev_3"><a id="GUID-5A2D60AC-21B1-4F6E-BA1E-78071CA98FD4" name="GUID-5A2D60AC-21B1-4F6E-BA1E-78071CA98FD4"></a><h3 id="ADQUE-GUID-5A2D60AC-21B1-4F6E-BA1E-78071CA98FD4" class="sect3"><span class="enumeration_section">10.1</span>使用安全队列</h3>
               <div>
                  <p>对于安全队列，您必须在<code class="codeph">messages_properties</code>参数中指定<code class="codeph">sender_id</code> 。
                  </p>
                  <p>有关<code class="codeph">sender_id</code>详细信息，请参阅“ <a href="../arpls/advanced-queuing-AQ-types.html#ARPLS71690" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> ”中的“MESSAGE_PROPERTIES_T类型”。
                  </p>
                  <p>使用安全队列时，需要以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您必须使用<code class="codeph">DBMS_AQADM.CREATE_AQ_AGENT</code>创建了有效的Oracle数据库高级队列代理。</p>
                     </li>
                     <li>
                        <p>您必须将<code class="codeph">sender_id</code>映射到具有安全队列的入队权限的数据库用户。使用<code class="codeph">DBMS_AQADM.ENABLE_DB_ACCESS</code>执行此操作。
                        </p>
                        <div class="infoboxnotealso" id="GUID-5A2D60AC-21B1-4F6E-BA1E-78071CA98FD4__GUID-D2FAC091-B405-4A6E-AEF0-2B80819A8CF1">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="aq-administrative-interface.html#GUID-ECF60C92-C8D6-4027-BE63-63C3D92872BD" title="DBMS_AQADM.CREATE_AQ_AGENT使用HTTP协议注册Oracle Database Advanced Queuing Internet访问的代理。">创建Oracle数据库高级排队代理</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="aq-administrative-interface.html#GUID-8CD0B0E9-37F8-4B70-95BD-75DE22F92586" title="DBMS_AQADM.ENABLE_DB_ACCESS授予Oracle数据库高级排队Internet代理特定数据库用户的特权。应该先前使用CREATE_AQ_AGENT过程创建代理。">启用数据库访问</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
            </div><a id="ADQUE2814"></a><a id="ADQUE2815"></a><a id="ADQUE2818"></a><a id="ADQUE2821"></a><a id="ADQUE2823"></a><a id="ADQUE2826"></a><a id="ADQUE2828"></a><a id="ADQUE2816"></a><a id="ADQUE2817"></a><a id="ADQUE2819"></a><a id="ADQUE2820"></a><a id="ADQUE2822"></a><a id="ADQUE2824"></a><a id="ADQUE2825"></a><a id="ADQUE2827"></a><a id="ADQUE2829"></a><a id="ADQUE2830"></a><a id="ADQUE2813"></a><div class="props_rev_3"><a id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35" name="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35"></a><h3 id="ADQUE-GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35" class="sect3"><span class="enumeration_section">10.2</span>排队消息</h3>
               <div>
                  <p>此过程将消息添加到指定的队列。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.ENQUEUE（queue_name IN VARCHAR2，enqueue_options IN enqueue_options_t，message_properties IN message_properties_t，payload IN“ <span class="italic">type_name</span> ”，msgid OUT RAW）;</pre><p>在<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">邮件</span></a>入队后，无法更新<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a>有效内容。如果要更改消息有效内容，则必须使消息出列并将新消息排入队列。
                     </p>
                     <p>为了存储<code class="codeph">RAW</code>类型的有效负载，Oracle数据库高级队列创建一个带有<code class="codeph">LOB</code>列的<a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">队列表</span></a>作为有效负载存储库。有效负载的最大大小取决于您用于访问Oracle数据库高级队列的编程接口。对于PL / SQL，Java和预编译器，限制为32K;对于OCI，限制是4G。</p>
                     <p>如果消息入队到没有<a href="glossary.html#GUID-F50CE039-717A-4D4C-B4D9-62EB3191885A"><span class="xrefglossterm">收件人</span></a>的多消息队列且<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a>没有订户（或者与此消息匹配的基于规则的订户），则会引发Oracle错误ORA 24033。这是一条警告，该邮件将被丢弃，因为没有收件人或订阅者可以将邮件传递给谁。
                     </p>
                     <p>如果多个消息在同一秒中排队，那么它们都具有相同的<code class="codeph">enq_time</code> 。在这种情况下，消息出队的顺序取决于<code class="codeph">step_no</code> ，这是一个变量，对于具有相同<code class="codeph">enq_time</code>每条消息，该变量单调递增。对于在同一会话中排队的两个消息， <code class="codeph">enq_time</code>和<code class="codeph">step_no</code>都不相同。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGBIHI">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-76732F12-5ED0-4BFB-8C7C-C41774B30189">入队选项</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">enqueue_options</code>参数指定可用于入队操作的选项。它具有以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d61372e491" class="indexterm-anchor"></a><a id="d61372e495" class="indexterm-anchor"></a><code class="codeph">visibility</code></p>
                           <p><code class="codeph">visibility</code>属性指定了enqueue请求的事务行为。 <code class="codeph">ON_COMMIT</code> （默认值）使enqueue成为当前事务的一部分。<code class="codeph">IMMEDIATE</code>使入队操作成为一个自治事务，它在操作结束时提交。
                           </p>
                           <p>如果要使用<a href="glossary.html#GUID-E0E22C6A-42AE-41CF-A021-5CB63BABB48E"><span class="xrefglossterm">LOB</span></a>定位器，请不要使用<code class="codeph">IMMEDIATE</code>选项。LOB定位器仅在事务期间有效。您的定位器无效，因为<code class="codeph">immediate</code>选项会自动提交事务。
                           </p>
                           <p>您必须将<code class="codeph">visibility</code>属性设置为<code class="codeph">IMMEDIATE</code>才能使用缓冲消息传递。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e534" class="indexterm-anchor"></a><code class="codeph">relative_msgid</code></p>
                           <p><code class="codeph">relative_msgid</code>属性指定序列偏差操作中引用的消息的消息标识符。除非使用<code class="codeph">BEFORE</code>属性指定<code class="codeph">sequence_deviation</code>否则将忽略此参数。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e553" class="indexterm-anchor"></a><code class="codeph">sequence_deviation</code></p>
                           <p><code class="codeph">sequence_deviation</code>属性指定消息应该何时出列，相对于队列中已有的其他消息。<code class="codeph">BEFORE</code>将消息放在<code class="codeph">relative_msgid</code>指定的消息之前。<code class="codeph">TOP</code>将消息置于任何其他消息之前。
                           </p>
                           <p>为消息指定<code class="codeph">sequence_deviation</code>会对可以为此消息指定的延迟和优先级值引入一些限制。此消息的延迟必须小于或等于此消息入队之前的消息延迟。此消息的优先级必须大于或等于此消息入队之前的消息的优先级。
                           </p>
                           <div class="infoboxnote" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-392936A6-CAC3-4107-8ADD-DCD2DA03A3E7">
                              <p class="notep1">注意：</p>
                              <p>如果<code class="codeph">message_grouping</code>设置为<code class="codeph">TRANSACTIONAL</code>则在Oracle数据库高级队列<span class="italic">10g</span>第1版（10.1）之前的版本中， <code class="codeph">sequence_deviation</code>属性不起作用。</p>
                              <p>Oracle Database Advanced Queuing <span class="italic">10g</span>第2版（10.2）中不推荐使用序列偏差功能。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">转型</code></p>
                           <p><code class="codeph">transformation</code>属性指定在排队消息之前应用的转换。转换函数的返回类型必须与队列的类型匹配。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e609" class="indexterm-anchor"></a><code class="codeph">delivery_mode</code></p>
                           <p>如果<code class="codeph">delivery_mode</code>属性是默认的<code class="codeph">PERSISTENT</code> ，则该消息将作为持久消息入队。如果将其设置为<code class="codeph">BUFFERED</code> ，则将消息排入缓冲消息。不允许空值。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDEHJBH">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-BE7741DD-0DA3-4539-B78A-88875F18922E">消息属性</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">message_properties</code>参数包含Oracle数据库高级队列用于管理各个消息的信息。它具有以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d61372e638" class="indexterm-anchor"></a><code class="codeph">priority</code></p>
                           <p><code class="codeph">priority</code>属性指定消息的优先级。它可以是任何数字，包括负数。数字越小表示优先级越高。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e651" class="indexterm-anchor"></a><code class="codeph">delay</code></p>
                           <p><code class="codeph">delay</code>属性指定消息处于<code class="codeph">WAITING</code>状态的秒数。在此秒数之后，消息处于<code class="codeph">READY</code>状态并可用于出列。如果指定<code class="codeph">NO_DELAY</code> ，则该消息可用于立即出列。<code class="codeph">msgid</code>会覆盖<code class="codeph">delay</code>规范。
                           </p>
                           <div class="infoboxnote" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-CED76F26-467F-41C8-A970-CF3312DE1EF6">
                              <p class="notep1">注意：</p>
                              <p>缓冲消息传递不支持延迟。</p>
                           </div>
                        </li>
                        <li>
                           <p><a id="d61372e683" class="indexterm-anchor"></a><code class="codeph">expiration</code></p>
                           <p><code class="codeph">expiration</code>属性指定消息可用于出列的秒数，从消息达到<code class="codeph">READY</code>状态开始。如果消息在到期之前未出列，则将其移至<code class="codeph">EXPIRED</code>状态的异常队列。如果指定<code class="codeph">NEVER</code> ，则消息不会过期。
                           </p>
                           <div class="infoboxnote" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-6A23C691-6D72-479E-BA72-D8A16990074D">
                              <p class="notep1">注意：</p>
                              <p>消息延迟和到期由队列监视器（ <code class="codeph">QMN</code> ）后台进程强制执行。如果要使用Oracle Database Advanced Queuing的延迟和过期功能，则必须启动数据库的QMN进程。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><a id="d61372e711" class="indexterm-anchor"></a><a id="d61372e715" class="indexterm-anchor"></a><code class="codeph">correlation</code></p>
                           <p><code class="codeph">correlation</code>属性是在入队时由消息的制作者提供的标识符。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e728" class="indexterm-anchor"></a><code class="codeph">attempts</code></p>
                           <p>所述<code class="codeph">attemps</code>属性指定已经进行出列消息的尝试次数。此参数不能在入队时设置。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e741" class="indexterm-anchor"></a><code class="codeph">recipient_list</code></p>
                           <p><code class="codeph">recipient_list</code>参数仅对允许多个使用者的队列有效。默认收件人是队列订户。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e754" class="indexterm-anchor"></a><code class="codeph">exception_queue</code></p>
                           <p><code class="codeph">exception_queue</code>属性指定在无法成功处理消息时将消息移动到的队列的名称。如果在移动时指定的异常队列不存在，则将消息移动到与队列表关联的缺省异常队列，并在警报日志中记录警告。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e767" class="indexterm-anchor"></a><code class="codeph">delivery_mode</code></p>
                           <p>在入队时在消息属性中指定的<code class="codeph">delivery_mode</code>任何值都将被忽略。enqueue选项中指定的值用于设置消息的传递模式。如果未指定enqueue选项中的传递模式，则默认为持久性。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e780" class="indexterm-anchor"></a><code class="codeph">enqueue_time</code></p>
                           <p><code class="codeph">enqueue_time</code>属性指定消息入队的时间。该值由系统确定，用户无法在入队时设置。
                           </p>
                           <div class="infoboxnote" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-646FD683-98E1-4FE4-9934-674E5317A11A">
                              <p class="notep1">注意：</p>
                              <p>由于系统时钟中的季节性变化信息（例如，在标准时间和夏令时之间切换）与每个队列表一起存储，因此季节性变化会自动反映在<code class="codeph">enqueue_time</code> 。如果由于某些其他原因更改了系统时钟，则必须重新启动Oracle Database Advanced Queuing数据库才能获取更改的时间。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><a id="d61372e799" class="indexterm-anchor"></a><code class="codeph">state</code></p>
                           <p><code class="codeph">state</code>属性指定出队时的消息状态。此参数不能在入队时设置。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e812" class="indexterm-anchor"></a><code class="codeph">sender_id</code></p>
                           <p><code class="codeph">sender_id</code>属性是消息生产者在入队时指定的类型<code class="codeph">aq$_agent</code>的标识符。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e829" class="indexterm-anchor"></a><code class="codeph">original_msgid</code></p>
                           <p>Oracle Database AQ使用original_msgid属性来传播消息。</p>
                        </li>
                        <li>
                           <p><a id="d61372e839" class="indexterm-anchor"></a><code class="codeph">transaction_group</code></p>
                           <p><code class="codeph">transaction_group</code>属性指定消息的事务组。此属性仅由<code class="codeph">DBMS_AQ.DEQUEUE_ARRAY</code>设置。此属性不能用于通过<code class="codeph">DBMS_AQ.ENQUEUE</code>或<code class="codeph">DBMS_AQ.ENQUEUE_ARRAY</code>设置消息的事务组。</p>
                        </li>
                        <li>
                           <p><a id="d61372e861" class="indexterm-anchor"></a><code class="codeph">user_property</code></p>
                           <p><code class="codeph">user_property</code>属性是可选的。它用于存储有关负载的其他信息。
                           </p>
                        </li>
                     </ul>
                     <p>以下主题中的示例使用与<a href="aq-administrative-interface.html#GUID-31CF7723-6AB8-455A-8841-8683D936DD3E" title="这些主题描述了Oracle数据库高级队列（AQ）管理界面。">Oracle数据库高级队列管理界面中</a>的示例相同的用户，消息类型，队列表和队列。如果尚未在测试环境中创建这些结构，则必须运行以下示例：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDECGGJ">例8-1</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDJIFCF">例8-2</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDCBGCF">例8-3</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDBEADD">例8-5</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDEAEID">例8-7</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDFEDEC">例8-8</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDEFAFG">例8-23</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDHEAID">例8-25</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDHEACA">例8-26</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDGCFHI">例8-27</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324__CHDIAEEH">例8-28</a></p>
                        </li>
                        <li>
                           <p><a href="aq-administrative-interface.html#GUID-264A3C43-93B3-43B5-820F-C25F686E97BD__CHDCIADC">例8-36</a></p>
                        </li>
                     </ul>
                     <p>对于<a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDECGGJ">示例8-1</a> ，您必须以具有管理权限的用户身份进行连接。对于上面列表中的其他示例，您可以以用户<code class="codeph">test_adm</code>进行连接。创建队列后，必须按<span class="q">“ <a href="aq-administrative-interface.html#GUID-8370927B-0D5E-4E75-A2A5-7309BC13219C" title="DBMS_AQADM.START_QUEUE启用指定的非分片队列以进行入队或出列。">启动队列</a> ”中的说明</span>启动它们。除非另有说明，否则您可以连接普通队列用户<code class="codeph">'test'</code>来运行所有示例。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-547D3A7A-CD28-41CF-9ABE-E4C33179EF4A">排队LOB类型消息</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGJCIG">例10-3</a>使用<a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41__CHDECGGJ">例8-1中</a>创建的<code class="codeph">test.lob_type</code>消息有效负载对象类型创建过程<code class="codeph">blobenqueue()</code> 。在入队时，LOB属性设置为<code class="codeph">EMPTY_BLOB</code> 。在enqueue完成之后，但在提交事务之前，从<code class="codeph">test.lob_qtab</code>队列表的<code class="codeph">user_data</code>列中选择LOB属性。使用<code class="codeph">LOB</code>接口（可通过OCI和PL / SQL获得）将LOB数据写入队列。实际的排队操作如下所示</p>
                     <p>在出列时，消息有效负载将包含LOB定位器。您可以在出列后使用此LOB定位器，但在提交事务之前，可以读取LOB数据。这在<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDGIIIC">例10-14中显示</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-54A30117-6D9C-4C38-8C05-DB438DF05CD3">将多个消息排入单个使用者队列</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGIJGG">例10-5</a>将六条消息排入<code class="codeph">test.obj_queue</code> 。这些消息在<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDIACIJ">例10-17</a>中出列。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-D341EC8C-B504-4FA3-AAAC-D15A19F1FD81">将多个消息排入多消息队列</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDBGAFA">示例10-6</a>要求您以用户<code class="codeph">'test_adm</code> '连接以将订户<code class="codeph">RED</code>和<code class="codeph">GREEN</code>添加到队列<code class="codeph">test.multiconsumer_queue</code> 。<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDHGEFG">示例10-7</a>需要订户。
                     </p>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDHGEFG">例10-7</a>将来自发送方001的多条消息排入队列。消息1适用于所有队列订户。MESSAGE 2适用于RED和BLUE。这些消息在<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDIACIJ">例10-17</a>中出列。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-55E07B91-FFEE-4148-862C-6D502F4CA3B0">排队分组的消息</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDFBDDD">例10-8</a>将三组消息排队，每组中有三条消息。这些消息在<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDGAIBA">例10-16</a>中出列。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-361520D8-6C61-4AF3-8A8A-414E1493335B">将延迟和到期消息排入队列</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>在<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDIIGAG">示例10-9中</a> ，应用程序希望消息在不迟于一周之后出现，但不迟于三周后。由于到期时间是从最早的出队时间计算出来的，因此需要将到期时间设置为两周。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__I1005829">
                     <p class="titleinexample">示例10-1排队消息，指定队列名称和有效负载</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN消息：= test.message_typ（001，'TEST MESSAGE'，'给obj_queue的第一条消息'）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__I1005850">
                     <p class="titleinexample">示例10-2将消息排入队列，指定优先级</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.order_typ; BEGIN消息：= test.order_typ（002，'PRIORITY MESSAGE'，'priority 30'）; message_properties.priority：= 30; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.priority_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGJCIG">
                     <p class="titleinexample">示例10-3为LOB类型消息创建入队过程</p><pre class="oac_no_warn" dir="ltr">创建或替换程序blobenqueue（msgno IN NUMBER）AS enq_userdata test.lob_typ; enq_msgid RAW（16）; enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; lob_loc BLOB;缓冲RAW（4096）; BEGIN缓冲区：= HEXTORAW（RPAD（'FF'，4096，'FF'））; enq_userdata：= test.lob_typ（msgno，'Large Lob data'，EMPTY_BLOB（），msgno）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.lob_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; enq_userdata，msgid =&gt; enq_msgid）; SELECT t.user_data.data INTO lob_loc FROM lob_qtab t WHERE t.msgid = enq_msgid; DBMS_LOB.WRITE（lob_loc，2000,1，buffer）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGECGJ">
                     <p class="titleinexample">例10-4排队LOB类型消息</p><pre class="oac_no_warn" dir="ltr">开始为i IN 1..5 LOOP blobenqueue（i）;结束循环;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGIJGG">
                     <p class="titleinexample">示例10-5排队多个消息</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN消息：= test.message_typ（001，'ORANGE'，'ORANGE排在第一位。“）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; message：= test.message_typ（001，'ORANGE'，'ORANGE也排在第二位。“）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;消息：= test.message_typ（001，'黄色'，'黄色排队第三。“）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; message：= test.message_typ（001，'VIOLET'，'VIOLET排队第四。“）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; message：= test.message_typ（001，'PURPLE'，'PURPLE排队第五。“）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; message：= test.message_typ（001，'PINK'，'PINK排队第六。“）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDBGAFA">
                     <p class="titleinexample">示例10-6添加订户RED和GREEN</p><pre class="oac_no_warn" dir="ltr">DECLARE订户sys.aq $ _agent; BEGIN subscriber：= sys.aq $ _agent（'RED'，NULL，NULL）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_queue'，subscriber =&gt; subscriber）; subscriber：= sys.aq $ _agent（'GREEN'，NULL，NULL）; DBMS_AQADM.ADD_SUBSCRIBER（queue_name =&gt;'test.multiconsumer_queue'，subscriber =&gt; subscriber）;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDHGEFG">
                     <p class="titleinexample">示例10-7将多个消息排入多消息队列</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t;收件人DBMS_AQ.aq $ _recipient_list_t; message_handle RAW（16）; message test.message_typ; BEGIN消息：= test.message_typ（001，'MESSAGE 1'，'For queue subscriber'）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.multiconsumer_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; message：= test.message_typ（001，'MESSAGE 2'，'For two recipients'）; recipients（1）：= sys.aq $ _agent（'RED'，NULL，NULL）; recipients（2）：= sys.aq $ _agent（'BLUE'，NULL，NULL）; message_properties.recipient_list：=收件人; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.multiconsumer_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDFBDDD">
                     <p class="titleinexample">示例10-8将分组消息排入队列</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN FOR groupno in 1..3 LOOP FOR msgno in 1..3 LOOP message：= test.message_typ（001，'GROUP'|| groupno，'Message'|| msgno ||'in group'|| groupno）; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.group_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;结束循环;承诺;结束循环;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDIIGAG">
                     <p class="titleinexample">示例10-9将消息排入队列，指定延迟和到期时间</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN消息：= test.message_typ（001，'DELAYED'，'消息延迟一周。“）; message_properties.delay：= 7 * 24 * 60 * 60; message_properties.expiration：= 2 * 7 * 24 * 60 * 60; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__GUID-8E44D782-7D0F-4A57-82F1-4410AE9A27F1">
                     <p class="titleinexample">示例10-10排队消息，指定转换</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN消息：= test.message_typ（001，'NORMAL MESSAGE'，'enqueued to obj_queue'）; enqueue_options.transformation：='message_order_transform'; DBMS_AQ.ENQUEUE（queue_name =&gt;'test.priority_queue'，enqueue_options =&gt; enqueue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2832"></a><a id="ADQUE2831"></a><div class="props_rev_3"><a id="GUID-92FCE63B-7713-443A-84A3-9F543F0A8819" name="GUID-92FCE63B-7713-443A-84A3-9F543F0A8819"></a><h3 id="ADQUE-GUID-92FCE63B-7713-443A-84A3-9F543F0A8819" class="sect3"><span class="enumeration_section">10.3</span>排队消息数组</h3>
               <div>
                  <p>使用<code class="codeph">ENQUEUE_ARRAY</code>函数使用相应的消息属性数组将有效负载数组排入队列。
                  </p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.ENQUEUE_ARRAY（queue_name IN VARCHAR2，enqueue_options IN enqueue_options_t，array_size IN PLS_INTEGER，message_properties_array IN message_properties_array_t，payload_array IN VARRAY，msid_array OUT msgid_array_t）RETURN PLS_INTEGER;</pre><p>输出是排队消息的消息标识符数组。该函数返回成功入队的消息数。</p>
                     <p>缓冲消息不支持数组入队，但您仍然可以使用<code class="codeph">DBMS_AQ.ENQUEUE_ARRAY()</code>通过将<code class="codeph">array_size</code>设置为<code class="codeph">1</code>来使缓冲的消息入队。
                     </p>
                     <p><a id="d61372e1196" class="indexterm-anchor"></a> <code class="codeph">message_properties_array</code>参数是消息属性的数组。有效负载数组中的每个元素必须在此记录中具有相应的元素。阵列中的所有消息都具有相同的传递模式。
                     </p>
                     <p>有效负载结构可以是VARRAY或嵌套表。消息ID返回到<code class="codeph">DBMS_AQ.msgid_array_t</code>类型的RAW（16）条目数组中。
                     </p>
                     <p>与关系世界中的数组操作一样，不可能提供在所有情况下都是正确的单个最佳阵列大小。应用程序开发人员必须尝试不同的数组大小，以确定其特定应用程序的最佳值。</p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-92FCE63B-7713-443A-84A3-9F543F0A8819__GUID-C7F9D646-5989-437A-90E9-724FA0FD0D0C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“入队<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGBIHI">选项</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDEHJBH">消息属性</a> ”</span></p>
                                 <p></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-92FCE63B-7713-443A-84A3-9F543F0A8819__CHDHAFJA">
                     <p class="titleinexample">示例10-11排队消息数组</p><pre class="oac_no_warn" dir="ltr">DECLARE enqueue_options DBMS_AQ.enqueue_options_t; msg_prop_array DBMS_AQ.message_properties_array_t; msg_prop DBMS_AQ.message_properties_t; payload_array test.msg_table; msgid_array DBMS_AQ.msgid_array_t; retval PLS_INTEGER; BEGIN payload_array：= msg_table（message_typ（001，'MESSAGE 1'，'数组入队到obj_queue'），message_typ（001，'MESSAGE 2'，'数组入队到obj_queue'））; msg_prop_array：= DBMS_AQ.message_properties_array_t（msg_prop，msg_prop）; retval：= DBMS_AQ.ENQUEUE_ARRAY（queue_name =&gt;'test.obj_queue'，enqueue_options =&gt; enqueue_options，array_size =&gt; 2，message_properties_array =&gt; msg_prop_array，payload_array =&gt; payload_array，msgid_array =&gt; msgid_array）;承诺;结束;/</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2834"></a><a id="ADQUE2833"></a><div class="props_rev_3"><a id="GUID-B5606574-8C70-41AE-A362-A753033C3A70" name="GUID-B5606574-8C70-41AE-A362-A753033C3A70"></a><h3 id="ADQUE-GUID-B5606574-8C70-41AE-A362-A753033C3A70" class="sect3"><span class="enumeration_section">10.4</span>收听一个或多个队列</h3>
               <div>
                  <p>此过程指定要监视的队列。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.LISTEN（agent_list IN aq $ _agent_list_t，等待IN BINARY_INTEGER DEFAULT FOREVER，listen_delivery_mode IN PLS_INTEGER DEFAULT PERSISTENT，agent OUT sys.aq $ _agent message_delivery_mode OUT PLS_INTEGER）; TYPE aq $ _agent_list_t是BINARY_INTEGER的aq $ _agent INDEXED的表;</pre><p>此调用将代理列表作为参数。每个代理都由名称，地址和协议的唯一组合标识。</p>
                     <p>您可以在列出的每个代理的地址字段中指定要监视的队列。代理必须具有每个受监视队列的出列权限。监控多个用户队列时，必须指定代理的名称;但是您不能为单个使用者队列指定代理名称。仅支持本地队列作为地址。协议保留供将来使用。</p>
                     <div class="infoboxnote" id="GUID-B5606574-8C70-41AE-A362-A753033C3A70__GUID-C30E8565-C2A5-4CAA-88D8-2CB98D12F85E">
                        <p class="notep1">注意：</p>
                        <p>Java <a href="glossary.html#GUID-2003BA71-5534-477C-990D-5ABE432A5907"><span class="xrefglossterm">API</span></a>不支持侦听多队列队列。</p>
                     </div>
                     <p><a id="d61372e1335" class="indexterm-anchor"></a><a id="d61372e1337" class="indexterm-anchor"></a><a id="d61372e1339" class="indexterm-anchor"></a><a id="d61372e1341" class="indexterm-anchor"></a><a id="d61372e1345" class="indexterm-anchor"></a><a id="d61372e1349" class="indexterm-anchor"></a> <code class="codeph">listen_delivery_mode</code>参数指定代理感兴趣的消息类型。如果它是默认的<code class="codeph">PERSISTENT</code> ，则仅向代理通知持久性消息。如果将其设置为<code class="codeph">BUFFERED</code> ，则仅向代理通知缓冲的消息。如果将其设置为<code class="codeph">PERSISTENT_OR_BUFFERED</code> ，则会向代理通知两种类型。
                     </p>
                     <p>这是一个阻塞调用，当有消息准备好供列表中的代理使用时，它会返回代理和消息类型。如果有多个代理的消息，则仅返回列出的第一个代理。如果在等待时间到期时没有找到消息，则会引发错误。</p>
                     <p>来自<code class="codeph">listen</code>调用的成功返回仅表示在一个指定队列中存在针对所列代理之一的消息。感兴趣的代理人仍然必须将相关消息出列。
                     </p>
                     <div class="infoboxnote" id="GUID-B5606574-8C70-41AE-A362-A753033C3A70__GUID-5B5EB749-0D97-42BD-BA20-88A7A6C8159B">
                        <p class="notep1">注意：</p>
                        <p>您不能在<a href="glossary.html#GUID-A91ACE79-576B-49F6-BE03-D4A792B9B468"><span class="xrefglossterm">非持久</span></a>队列上调用<code class="codeph">LISTEN</code> 。
                        </p>
                     </div>
                     <p>尽管<code class="codeph">test.obj_queue</code>和<code class="codeph">test.priority_queue</code>都包含消息（分别在<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__I1005829">例10-1</a>和<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__I1005850">例10-2中</a>排队），但<a href="aq-operations-using-pl-sql.html#GUID-B5606574-8C70-41AE-A362-A753033C3A70__I1006167">示例10-12</a>仅返回：</p><pre class="oac_no_warn" dir="ltr">队列中的消息：“TEST”。“OBJ_QUEUE”</pre><p>如果<code class="codeph">test_agent_list</code>的代理顺序颠倒过来，那么<code class="codeph">test.priority_queue</code>出现在<code class="codeph">test.obj_queue</code>之前，那么示例将返回：</p><pre class="oac_no_warn" dir="ltr">队列中的消息：“TEST”。“PRIORITY_QUEUE”</pre><div class="p">
                        <div class="infoboxnotealso" id="GUID-B5606574-8C70-41AE-A362-A753033C3A70__GUID-838E4211-ABD3-4179-AF08-A4210592F6CD">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="aq-basic-components.html#GUID-2C5557D9-E11B-4AB9-94E0-F923C85D6E0A" title="该组件标识消息的生产者或消费者。">AQ代理类型</a> ”</span></p>
                        </div>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B5606574-8C70-41AE-A362-A753033C3A70__I1006167">
                     <p class="titleinexample">示例10-12使用零超时收听单个使用者队列</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE代理sys.aq $ _agent; test_agent_list DBMS_AQ.aq $ _agent_list_t; BEGIN test_agent_list（1）：= sys.aq $ _agent（NULL，'test.obj_queue'，NULL）; test_agent_list（2）：= sys.aq $ _agent（NULL，'test.priority_queue'，NULL）; DBMS_AQ.LISTEN（agent_list =&gt; test_agent_list，wait =&gt; 0，agent =&gt; agent）; DBMS_OUTPUT.PUT_LINE（'队列中的消息：'|| agent.address）;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2836"></a><a id="ADQUE2838"></a><a id="ADQUE2841"></a><a id="ADQUE2843"></a><a id="ADQUE2845"></a><a id="ADQUE2837"></a><a id="ADQUE2839"></a><a id="ADQUE2840"></a><a id="ADQUE2842"></a><a id="ADQUE2844"></a><a id="ADQUE2846"></a><a id="ADQUE2847"></a><a id="ADQUE2835"></a><div class="props_rev_3"><a id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54" name="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54"></a><h3 id="ADQUE-GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54" class="sect3"><span class="enumeration_section">10.5出</span>列消息</h3>
               <div>
                  <p>此过程使来自指定队列的消息出列。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.DEQUEUE（queue_name IN VARCHAR2，dequeue_options IN dequeue_options_t，message_properties OUT message_properties_t，payload OUT“ <span class="italic">type_name</span> ”，msgid OUT RAW）;</pre><p>您可以选择仅将持久性消息，仅缓冲消息或两者都出列。请参阅以下dequeue选项列表中的<code class="codeph">delivery_mode</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-1829FDEA-E6AF-4073-92A1-F448F7A7DBA5">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDEHJBH">消息属性</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDBBGGE">
                     <p class="subhead2" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-C982B34C-340F-4111-A84C-5EB96605498E">出列选项</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">dequeue_options</code>参数指定可用于出列操作的选项。它具有以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d61372e1550" class="indexterm-anchor"></a><code class="codeph">consumer_name</code></p>
                           <p>使用者可以通过提供在<code class="codeph">AQ$_AGENT</code>的<code class="codeph">AQ$_AGENT</code>类型中使用的名称来从队列<code class="codeph">AQ$_AGENT</code>出<code class="codeph">DBMS_AQADM</code> 。 <code class="codeph">ADD_SUBSCRIBER</code>过程或消息属性的收件人列表。如果指定了值，则仅访问与<code class="codeph">consumer_name</code>匹配的那些消息。如果没有为多个使用者设置队列，则必须将此字段设置为NULL（默认值）。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1572" class="indexterm-anchor"></a><code class="codeph">dequeue_mode</code></p>
                           <p><code class="codeph">dequeue_mode</code>属性指定与出列关联的锁定行为。如果指定了<code class="codeph">BROWSE</code> ，则消息将在不获取任何锁定的情况下出列。如果指定了<code class="codeph">LOCKED</code> ，则消息将使用写入锁定出列，该写入锁定持续到事务的持续时间。如果指定了<code class="codeph">REMOVE</code> ，则消息将被出列并删除（默认值）。可以根据保留属性将消息保留在队列表中。如果指定了<code class="codeph">REMOVE_NO_DATA</code> ，则将消息标记为已更新或已删除。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1597" class="indexterm-anchor"></a><code class="codeph">navigation</code></p>
                           <p><code class="codeph">navigation</code>属性指定出列消息的位置。如果指定了<code class="codeph">FIRST_MESSAGE</code> ，则匹配搜索条件的第一个可用消息将出列。如果指定了<code class="codeph">NEXT_MESSAGE</code> ，则下一个与搜索条件匹配的可用消息将出列（默认值）。如果先前的消息属于消息组，则与消息组中的搜索条件匹配的下一个可用消息将出列。
                           </p>
                           <p>如果指定了<code class="codeph">NEXT_TRANSACTION</code> ，则跳过当前事务组中的任何消息，并将下一个事务组的第一条消息出列。仅当为队列启用了邮件分组时，才能使用此设置。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1621" class="indexterm-anchor"></a><a id="d61372e1625" class="indexterm-anchor"></a><code class="codeph">visibility</code></p>
                           <p><code class="codeph">visibility</code>属性指定新消息何时出列。如果指定了<code class="codeph">ON_COMMIT</code> ，则dequeue是当前事务的一部分（默认值）。如果指定了<code class="codeph">IMMEDIATE</code> ，则dequeue操作是在操作结束时提交的自治事务。<code class="codeph">BROWSE</code>出队模式中忽略<code class="codeph">visibility</code>属性。
                           </p>
                           <p>使用交付模式<code class="codeph">DBMS_AQ.BUFFERED</code>或<code class="codeph">DBMS_AQ.PERSISTENT_OR_BUFFERED</code>消息进行出列时，可见性必须始终为<code class="codeph">IMMEDIATE</code> 。</p>
                        </li>
                        <li>
                           <p><a id="d61372e1661" class="indexterm-anchor"></a><code class="codeph">wait</code></p>
                           <p>如果当前没有可用的消息与搜索条件匹配，则<code class="codeph">wait</code>属性指定等待时间。如果指定了数字，则操作将等待该秒数。如果指定了<code class="codeph">FOREVER</code> ，则操作将永远等待（默认值）。如果指定了<code class="codeph">NO_WAIT</code> ，则操作不会等待。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1680" class="indexterm-anchor"></a><code class="codeph">msgid</code></p>
                           <p><code class="codeph">msgid</code>属性指定出列消息的消息标识符。除非指定了<code class="codeph">msgid</code>否则只有处于<code class="codeph">READY</code>状态的消息才会出列。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1699" class="indexterm-anchor"></a><a id="d61372e1703" class="indexterm-anchor"></a><code class="codeph">correlation</code></p>
                           <p>correlation属性指定出队消息的相关标识符。在没有指定<code class="codeph">FIRST_MESSAGE</code>导航选项的情况下，不能在连续的出队呼叫之间更改相关标识符。
                           </p>
                           <p>关联标识符是Oracle Database Advanced Queuing不解释的应用程序定义的标识符。您可以使用特殊模式匹配字符，例如百分号和下划线。如果多个消息满足该模式，则出列的顺序是不确定的，并且不遵守队列的排序顺序。</p>
                           <div class="infoboxnote" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-375C4287-02E6-4B0D-B46D-1F948E0097A2">
                              <p class="notep1">注意：</p>
                              <p>虽然缓冲消息支持出列选项<code class="codeph">correlation</code>和<code class="codeph">deq_condition</code> ，但是无法创建索引来优化这些查询。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><a id="d61372e1727" class="indexterm-anchor"></a><code class="codeph">deq_condition</code></p>
                           <p><code class="codeph">deq_condition</code>属性是一个类似于SQL查询的WHERE子句的布尔表达式。此布尔表达式可以包括有关消息属性，用户数据属性（仅限对象有效内容）以及PL / SQL或SQL函数的条件。
                           </p>
                           <p>要在消息有效内容（对象有效内容）上指定出列条件，请在子句中使用对象类型的属性。必须使用<code class="codeph">tab.user_data</code>作为限定符为每个属性添加前缀，以指示存储有效内容的队列表的特定列。
                           </p>
                           <p><code class="codeph">deq_condition</code>属性不能超过4000个字符。如果多个消息满足出列条件，则出列的顺序是不确定的，并且不遵守队列的排序顺序。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1750" class="indexterm-anchor"></a><code class="codeph">transformation</code></p>
                           <p><code class="codeph">transformation</code>属性指定在消息出列之后但在将消息返回给调用者之前应用的转换。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e1763" class="indexterm-anchor"></a><code class="codeph">delivery_mode</code></p>
                           <p><code class="codeph">delivery_mode</code>属性指定要出列的消息类型。如果将其设置为<code class="codeph">DBMS_AQ.PERSISTENT</code> ，则只将持久性消息出列。如果它设置为<code class="codeph">DBMS_AQ.BUFFERED</code> ，则只有缓冲的消息出列。
                           </p>
                           <p>如果它是默认的<code class="codeph">DBMS_AQ.PERSISTENT_OR_BUFFERED</code> ，则持久和缓冲的消息都会出列。出列消息的消息属性中的<code class="codeph">delivery_mode</code>属性指示出列消息是缓冲的还是持久的。
                           </p>
                        </li>
                     </ul>
                     <p>出列顺序由创建队列表时指定的值确定，除非被出列选项中的消息标识符和相关标识符覆盖。</p>
                     <p>数据库一致性读取机制适用于队列操作。例如， <code class="codeph">BROWSE</code>调用可能看不到在浏览事务开始后排队的消息。
                     </p>
                     <p>在<a href="glossary.html#GUID-F4FC927D-BBFE-451D-9CCA-96C7387A39B0"><span class="xrefglossterm">提交时队列中</span></a> ，消息对<code class="codeph">BROWSE</code>或<code class="codeph">DEQUEUE</code>调用不可见，直到可以基于<a href="glossary.html#GUID-30A3A407-F784-4083-9041-D548D9E1C6C5"><span class="xrefglossterm">近似CSCN</span></a>在它们之间建立确定性顺序。</p>
                     <p>如果<code class="codeph">dequeue_conditions</code>参数的<code class="codeph">navigation</code>属性是<code class="codeph">NEXT</code> _ <code class="codeph">MESSAGE</code> （默认值），则后续的队列将根据在第一个队列中获取的快照从队列中检索消息。因此，只有在处理队列中的所有剩余消息之后，才会处理在第一个dequeue命令之后排队的消息。如果所有消息都已排队或队列没有基于优先级的排序，则这不是问题。但是，如果应用程序必须处理队列中的最高优先级消息，那么它必须使用<code class="codeph">FIRST_MESSAGE</code>导航选项。
                     </p>
                     <div class="infoboxnote" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-8E7AAAEC-9DCE-4CCC-905B-8942EFE5EC15">
                        <p class="notep1">注意：</p>
                        <p>当有消息同时入队时，使用<code class="codeph">FIRST_MESSAGE</code>导航选项也会更有效。如果未指定<code class="codeph">FIRST_MESSAGE</code>选项，则Oracle Database Advanced Queuing会在第一个dequeue命令中不断生成快照，从而导致性能下降。如果指定了<code class="codeph">FIRST_MESSAGE</code>选项，则Oracle Database Advanced Queuing会为每个dequeue命令使用新快照。
                        </p>
                     </div>
                     <p>将同一事务中排队的消息放入已启用消息分组的队列中，形成一个组。如果事务中只有一条消息入队，那么这实际上形成了一组消息。可以在单个事务中分组的消息数没有上限。</p>
                     <p>在尚未启用消息分组的队列中， <code class="codeph">LOCKED</code>或<code class="codeph">REMOVE</code>模式下的出队仅锁定单个消息。相反，寻求使作为组的一部分的消息出列的出列操作锁定整个组。当组中的所有消息必须作为一个单元处理时，这非常有用。
                     </p>
                     <p>当组中的所有消息都已出列时，出队返回一个错误，指示已处理该组中的所有消息。然后，应用程序可以使用<code class="codeph">NEXT_TRANSACTION</code>开始从下一个可用组中出列消息。如果没有可用的组，则dequeue会在<code class="codeph">dequeue_options</code>的<code class="codeph">wait</code>属性中指定的时间段后<code class="codeph">dequeue_options</code> 。
                     </p>
                     <p>通常，您希望消息使用者使用出列接口访问消息。您可以通过按消息ID或使用<code class="codeph">SELECT</code>命令进行浏览来查看仍处理的已处理消息或消息。
                     </p>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__I1007064">例10-13</a>返回<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__I1005829">例10-1中</a>排队的消息。它返回：</p><pre class="oac_no_warn" dir="ltr">来自Sender No.1主题：TEST MESSAGE文本：obj_queue的第一条消息</pre><div class="infoboxnotealso" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-8152627B-1C44-45C5-9318-9F2CAC878BA8">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="aq-introduction.html#GUID-AA8621D3-88E6-460A-8EC4-8EE6F53DE56A__CHDCEDDG">出局模式</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-9176C3FC-41D5-4ECE-AC76-45D87ABB2A95">出列LOB类型消息</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDGIIIC">例10-14</a>创建了一个<code class="codeph">blobdequeue()</code>过程，用于使<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGECGJ">示例10-4中</a>排队的LOB类型消息出列。实际的出队率如<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDDJJDC">例10-15</a>所示。它返回：</p><pre class="oac_no_warn" dir="ltr">读取的数据量：2000读取的数据量：2000读取的数据量：2000读取的数据量：2000读取的数据量：2000</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-20130382-02AC-4E0A-81DD-38C8BFDB7315">将分组消息出列</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您可以通过运行<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDGAIBA">示例10-16将</a> <a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDFBDDD">示例10-8中</a>排队的分组消息出列。它返回：</p><pre class="oac_no_warn" dir="ltr">组1：组1中的消息1组1：组1中的消息2组1：组1中的消息3完成组1组2：组2中的消息1组2：组2中的消息2组2：组中的消息3 2完成的GROUP 2组3：组3中的消息1组3：组3中的消息2组3：组3中的消息3完成组3没有更多消息</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-383818A3-E888-4864-A6C3-D89FD80DA1CC">从多消息队列中出队</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您可以通过运行<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDIACIJ">示例10-17将</a> <a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDHGEFG">示例10-7中</a>为<code class="codeph">RED</code>排队的消息出列。如果将<code class="codeph">RED</code>更改为<code class="codeph">GREEN</code>然后更改为<code class="codeph">BLUE</code> ，则可以使用它将其消息出列。在每种情况下，示例的输出都是不同的。
                     </p>
                     <p><code class="codeph">RED</code>是多消费者队列的订阅者，也是MESSAGE 2的指定接收者，因此它获取两个消息：</p><pre class="oac_no_warn" dir="ltr">消息：消息1 ..对于队列订阅者消息：MESSAGE 2 ..对于两个收件人没有更多的RED消息</pre><p><code class="codeph">GREEN</code>只是一个订阅者，因此它只获取队列中没有指定收件人的消息（在本例中为MESSAGE 1）：</p><pre class="oac_no_warn" dir="ltr">消息：消息1 ..对于队列订阅者没有更多绿色消息</pre><p>然而， <code class="codeph">BLUE</code>虽然不是队列的订户，但仍被指定接收MESSAGE 2。
                     </p><pre class="oac_no_warn" dir="ltr">消息：MESSAGE 2 ..对于两个收件人没有更多蓝色消息</pre><p><a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDBJBDB">例10-18</a>浏览在<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGIJGG">例10-5中</a>排队的消息，直到找到它删除的PINK。该示例返回：</p><pre class="oac_no_warn" dir="ltr">浏览消息文本：ORANGE首先排队。浏览消息文本：ORANGE也排在第二位。浏览消息文本：YELLOW排队第三。浏览消息文本：VIOLET排队第四。浏览消息文本：PURPLE排队第五。浏览消息文本：PINK排队第六。删除了消息文本：PINK排队第六。</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__GUID-5AC58A5D-35D0-4D5C-9650-EDB98872FEBF">出列模式</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDDCJFF">示例10-19</a>以锁定模式预览<a href="aq-operations-using-pl-sql.html#GUID-1CEA86B9-4FDF-445F-93C1-67E21C033D35__CHDGIJGG">示例10-5中</a>排队的消息，直到找到PURPLE，并将其删除。该示例返回：</p><pre class="oac_no_warn" dir="ltr">锁定消息文本：ORANGE首先排队。锁定的消息文本：ORANGE也排在第二位。锁定的消息文本：黄色排队第三。锁定的消息文本：VIOLET排队第四。锁定的消息文本：PURPLE排队第五。删除了消息文本：PURPLE排队第五。</pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__I1007064">
                     <p class="titleinexample">示例10-13使对象类型消息出列</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE dequeue_options DBMS_AQ.dequeue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN dequeue_options.navigation：= DBMS_AQ.FIRST_MESSAGE; DBMS_AQ.DEQUEUE（queue_name =&gt;'test.obj_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（'From Sender No.'|| message.sender_id）; DBMS_OUTPUT.PUT_LINE（'Subject：'|| message.subject）; DBMS_OUTPUT.PUT_LINE（'Text：'|| message.text）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDGIIIC">
                     <p class="titleinexample">示例10-14为LOB类型消息创建出列过程</p><pre class="oac_no_warn" dir="ltr">创建或替换过程blobdequeue（msgno IN NUMBER）AS dequeue_options DBMS_AQ.dequeue_options_t; message_properties DBMS_AQ.message_properties_t; msgstr RAW（16）;有效载荷test.lob_typ; lob_loc BLOB;金额BINARY_INTEGER;缓冲RAW（4096）; BEGIN DBMS_AQ.DEQUEUE（queue_name =&gt;'test.lob_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; payload，msgid =&gt; msgid）; lob_loc：= payload.data;金额：= 2000; DBMS_LOB.READ（lob_loc，amount，1，buffer）; DBMS_OUTPUT.PUT_LINE（'读取的数据量：'||金额）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDDJJDC">
                     <p class="titleinexample">例10-15使LOB类型消息出列</p><pre class="oac_no_warn" dir="ltr">开始为我在1..5 LOOP blobdequeue（i）;结束循环;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDGAIBA">
                     <p class="titleinexample">示例10-16使分组消息出列</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE dequeue_options DBMS_AQ.dequeue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; no_messages例外; end_of_group异常; PRAGMA EXCEPTION_INIT（no_messages，-25228）; PRAGMA EXCEPTION_INIT（end_of_group，-25235）; BEGIN dequeue_options.wait：= DBMS_AQ.NO_WAIT; dequeue_options.navigation：= DBMS_AQ.FIRST_MESSAGE; LOOP BEGIN DBMS_AQ.DEQUEUE（queue_name =&gt;'test.group_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（message.subject ||'：'|| message.text）; dequeue_options.navigation：= DBMS_AQ.NEXT_MESSAGE; end_of_group THEN DBMS_OUTPUT.PUT_LINE（'Finished'|| message.subject）之外的异常;承诺; dequeue_options.navigation：= DBMS_AQ.NEXT_TRANSACTION;结束;结束循环; no_messages然后DBMS_OUTPUT.PUT_LINE（'没有更多消息'）的例外;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDIACIJ">
                     <p class="titleinexample">示例10-17从多消息队列中使RED的消息出列</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE dequeue_options DBMS_AQ.dequeue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; no_messages例外; PRAGMA EXCEPTION_INIT（no_messages，-25228）; BEGIN dequeue_options.wait：= DBMS_AQ.NO_WAIT; dequeue_options.consumer_name：='RED'; dequeue_options.navigation：= DBMS_AQ.FIRST_MESSAGE; LOOP BEGIN DBMS_AQ.DEQUEUE（queue_name =&gt;'test.multiconsumer_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（'Message：'|| message.subject ||'..'|| message.text）; dequeue_options.navigation：= DBMS_AQ.NEXT_MESSAGE;结束;结束循环; no_messages，然后DBMS_OUTPUT.PUT_LINE（'没有更多消息为红色'）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDBJBDB">
                     <p class="titleinexample">示例10-18在浏览模式下出列并删除指定的消息</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE dequeue_options DBMS_AQ.dequeue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN dequeue_options.dequeue_mode：= DBMS_AQ.BROWSE; LOOP DBMS_AQ.DEQUEUE（queue_name =&gt;'test.obj_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（'浏览消息文本：'|| message.text）;当message.subject ='PINK'时退出;结束循环; dequeue_options.dequeue_mode：= DBMS_AQ.REMOVE; dequeue_options.msgid：= message_handle; DBMS_AQ.DEQUEUE（queue_name =&gt;'test.obj_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（'Removed Message Text：'|| message.text）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54__CHDDCJFF">
                     <p class="titleinexample">示例10-19在锁定模式下出列并删除指定消息</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE dequeue_options DBMS_AQ.dequeue_options_t; message_properties DBMS_AQ.message_properties_t; message_handle RAW（16）; message test.message_typ; BEGIN dequeue_options.dequeue_mode：= DBMS_AQ.LOCKED; LOOP DBMS_AQ.dequeue（queue_name =&gt;'test.obj_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（'Locked Message Text：'|| message.text）;当message.subject ='PURPLE'时退出;结束循环; dequeue_options.dequeue_mode：= DBMS_AQ.REMOVE; dequeue_options.msgid：= message_handle; DBMS_AQ.DEQUEUE（queue_name =&gt;'test.obj_queue'，dequeue_options =&gt; dequeue_options，message_properties =&gt; message_properties，payload =&gt; message，msgid =&gt; message_handle）; DBMS_OUTPUT.PUT_LINE（'Removed Message Text：'|| message.text）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2849"></a><a id="ADQUE2848"></a><div class="props_rev_3"><a id="GUID-0B018200-824D-458D-98E7-7445AF8B628F" name="GUID-0B018200-824D-458D-98E7-7445AF8B628F"></a><h3 id="ADQUE-GUID-0B018200-824D-458D-98E7-7445AF8B628F" class="sect3"><span class="enumeration_section">10.6</span>使消息数组出列</h3>
               <div>
                  <p>使用<code class="codeph">DEQUEUE_ARRAY</code>函数将有效负载数组和相应的消息属性数组出列。
                  </p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.DEQUEUE_ARRAY（queue_name IN VARCHAR2，dequeue_options IN dequeue_options_t，array_size IN PLS_INTEGER，message_properties_array OUT message_properties_array_t，payload_array OUT VARRAY，msgid_array OUT msgid_array_t）RETURN PLS_INTEGER;</pre><p>输出是出列消息的有效负载，消息ID和消息属性的数组。该函数返回成功出列的消息数。</p>
                     <p><a id="d61372e2102" class="indexterm-anchor"></a>缓冲消息不支持数组出列，但您仍然可以使用<code class="codeph">DBMS_AQ.DEQUEUE_ARRAY()</code>通过将<code class="codeph">array_size</code>设置为<code class="codeph">1</code>来使缓冲的消息出<code class="codeph">array_size</code> 。
                     </p>
                     <p>有效负载结构可以是<code class="codeph">VARRAY</code>或嵌套表。消息标识符返回到<code class="codeph">DBMS_AQ.msgid_array_t</code>类型的<code class="codeph">RAW(16)</code>条目数组中。消息属性将返回到<code class="codeph">DBMS_AQ.message_properties_array_t</code>类型的数组中。
                     </p>
                     <p>与关系世界中的数组操作一样，不可能提供在所有情况下都是正确的单个最佳阵列大小。应用程序开发人员必须尝试不同的数组大小，以确定其特定应用程序的最佳值。</p>
                     <p><code class="codeph">DBMS_AQ.DEQUEUE</code>也提供<code class="codeph">DBMS_AQ.DEQUEUE_ARRAY</code>可用的所有出队选项。您可以选择仅将持久性消息，仅缓冲消息或两者都出列。此外， <code class="codeph">dequeue_options</code>的<code class="codeph">navigation</code>属性提供了两个特定于<code class="codeph">DBMS_AQ.DEQUEUE_ARRAY</code>选项。</p>
                     <p>将消息出列时，您可能希望使用单个调用将事务组的所有消息出列。您可能还希望将跨多个事务组的邮件出列。您可以使用以下导航方法之一指定这些方法之一：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">NEXT_MESSAGE_ONE_GROUP</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FIRST_MESSAGE_ONE_GROUP</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">NEXT_MESSAGE_MULTI_GROUP</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FIRST_MESSAGE_MULTI_GROUP</code> 
                           </p>
                        </li>
                     </ul>
                     <p>导航方法<code class="codeph">NEXT_MESSAGE_ONE_GROUP</code>将与下一个可用事务组中的搜索条件匹配的消息<code class="codeph">NEXT_MESSAGE_ONE_GROUP</code>到数组中。导航方法<code class="codeph">FIRST_MESSAGE_ONE_GROUP</code>将位置重置为队列的开头，并使单个事务组中可用的所有消息出列并且与搜索条件匹配。
                     </p>
                     <p>出列的消息数由数组大小限制确定。如果事务组中的消息数超过<code class="codeph">array_size</code> ，则必须多次调用<code class="codeph">DEQUEUE_ARRAY</code>才能使事务组的所有消息出列。
                     </p>
                     <p>导航方法<code class="codeph">NEXT_MESSAGE_MULTI_GROUP</code>和<code class="codeph">FIRST_MESSAGE_MULTI_GROUP</code>工作方式与<code class="codeph">FIRST_MESSAGE_MULTI_GROUP</code> <code class="codeph">ONE_GROUP</code> ，但它们不限于单个事务组。每个出列到数组中的消息都有一组关联的消息属性。消息属性<code class="codeph">transaction_group</code>确定哪些消息属于同一事务组。
                     </p>
                     <p><a href="aq-operations-using-pl-sql.html#GUID-0B018200-824D-458D-98E7-7445AF8B628F__BCFEACBF">例10-20</a>使<a href="aq-operations-using-pl-sql.html#GUID-92FCE63B-7713-443A-84A3-9F543F0A8819__CHDHAFJA">例10-11中</a>排队的消息出列。它返回：</p><pre class="oac_no_warn" dir="ltr">出列的消息数：2</pre><div class="infoboxnotealso" id="GUID-0B018200-824D-458D-98E7-7445AF8B628F__GUID-F361158F-D049-488D-AF9F-B24E0E89A854">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“出<a href="aq-operations-using-pl-sql.html#GUID-5F84DA85-7D5B-4EEC-9785-80877F3FCA54" title="此过程使来自指定队列的消息出列。">列消息</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-0B018200-824D-458D-98E7-7445AF8B628F__BCFEACBF">
                     <p class="titleinexample">示例10-20使消息数组出列</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON DECLARE dequeue_options DBMS_AQ.dequeue_options_t; msg_prop_array DBMS_AQ.message_properties_array_t：= DBMS_AQ.message_properties_array_t（）; payload_array test.msg_table; msgid_array DBMS_AQ.msgid_array_t; retval PLS_INTEGER; BEGIN retval：= DBMS_AQ.DEQUEUE_ARRAY（queue_name =&gt;'test.obj_queue'，dequeue_options =&gt; dequeue_options，array_size =&gt; 2，message_properties_array =&gt; msg_prop_array，payload_array =&gt; payload_array，msgid_array =&gt; msgid_array）; DBMS_OUTPUT.PUT_LINE（'出列的消息数：'|| retval）;结束;/</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2851"></a><a id="ADQUE2850"></a><div class="props_rev_3"><a id="GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5" name="GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5"></a><h3 id="ADQUE-GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5" class="sect3"><span class="enumeration_section">10.7</span>注册通知</h3>
               <div>
                  <p>此过程注册电子邮件地址，用户定义的PL / SQL过程或HTTP URL以进行消息通知。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.REGISTER（reg_list IN SYS.AQ $ _REG_INFO_LIST，reg_count IN NUMBER）;</pre><div class="infoboxnote" id="GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5__GUID-6B6EAB4C-AB32-4C3C-A4AC-7C396FB3DDED">
                        <p class="notep1">注意：</p>
                        <p>从12 <span class="italic">c</span>版本2（12.2。）开始，用户生成的队列名称的最大长度为122个字节。请参阅<span class="q">“ <a href="aq-administrative-interface.html#GUID-E140B4B5-DB4C-4DFC-8F67-C032516D0324" title="DBMS_AQADM.CREATE_QUEUE创建非分片队列。">创建队列</a> ”</span> 。
                        </p>
                     </div>
                     <p><a id="d61372e2326" class="indexterm-anchor"></a> <code class="codeph">reg_list</code>参数是<code class="codeph">reg_list</code> <code class="codeph">SYS.AQ$_REG_INFO</code>对象的列表。您可以使用<code class="codeph">qosflags</code> <code class="codeph">SYS.AQ$_REG_INFO</code>的<code class="codeph">qosflags</code>属性指定服务通知质量。</p>
                     <p><a id="d61372e2344" class="indexterm-anchor"></a>该<code class="codeph">reg_count</code>参数指定的条目数<code class="codeph">reg_list</code> 。每个订阅都需要自己的<code class="codeph">reg_list</code>条目。可以一次注册对多个订阅的兴趣。
                     </p>
                     <p>当接收PL / SQL通知，Oracle数据库高级队列消息属性描述符回调调用与指定的<code class="codeph">delivery_mode</code>通知作为消息的<code class="codeph">DBMS_AQ.PERSISTENT</code>或<code class="codeph">DBMS_AQ.BUFFERED</code> 。</p>
                     <p>如果注册电子邮件通知，则必须设置数据库将用于发送电子邮件通知的SMTP服务器的主机名和端口名称。如果需要，您应设置send-from电子邮件地址，该地址由数据库设置为<code class="codeph">sent from</code>字段<code class="codeph">sent from</code> 。您需要支持Java的数据库才能使用此功能。
                     </p>
                     <p>如果您注册HTTP通知，则可能需要设置代理服务器的主机名和端口号以及数据库将用于发布HTTP通知的无代理域列表。</p>
                     <p>名为<code class="codeph">SYS.AQ_SRVNTFN_TABLE_Q</code>的内部队列存储要由作业队列进程处理的通知。如果通知失败，则Oracle数据库高级队列会重试失败的通知，最多尝试<code class="codeph">MAX_RETRIES</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5__GUID-AC99BBC6-B0E9-4AAC-882D-D5FBCF031214">
                        <p class="notep1">注意：</p>
                        <p>您可以更改<code class="codeph">MAX_RETRIES</code>和<code class="codeph">RETRY_DELAY</code>的性质<code class="codeph">SYS.AQ_SRVNTFN_TABLE_Q</code> 。新设置适用于所有通知。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5__GUID-4648DC70-9119-4219-9335-AB242EBBBE0A">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">SYS.AQ$_REG_INFO</code>对象的更多信息，请<code class="codeph">SYS.AQ$_REG_INFO</code> <span class="q">“ <a href="aq-basic-components.html#GUID-94CBE09C-EE8C-4874-A30D-CCBE1F8D862E" title="该组件标识消息的生产者或消费者。">AQ注册信息类型</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="aq-basic-components.html#GUID-5B9C62D6-ED8A-4E35-9889-16F5166D4144" title="此组件指定AQ PL / SQL回调在收到通知时收到的Oracle数据库高级队列描述符。">AQ通知描述符类型</a> ”</span>有关消息属性描述符的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-DBBE096A-EEA0-4E1E-AC3F-6E1B492D1FB5__GUID-67FA4C4E-5B24-46EB-90DC-32E056D08BF1">
                     <p class="titleinexample">示例10-21注册通知</p><pre class="oac_no_warn" dir="ltr">DECLARE reginfo sys.aq $ _reg_info; reg_list sys.aq $ _reg_info_list; BEGIN reginfo：= sys.aq $ _reg_info（'test.obj_queue'，DBMS_AQ.NAMESPACE_ANONYMOUS，'http://www.company.com：8080'，HEXTORAW（'FF'））; reg_list：= sys.aq $ _reg_info_list（reginfo）; DBMS_AQ.REGISTER（reg_list =&gt; reg_list，reg_count =&gt; 1）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2852"></a><div class="props_rev_3"><a id="GUID-3FD95C26-D2FF-49CF-BBCF-A6E40468D55E" name="GUID-3FD95C26-D2FF-49CF-BBCF-A6E40468D55E"></a><h3 id="ADQUE-GUID-3FD95C26-D2FF-49CF-BBCF-A6E40468D55E" class="sect3"><span class="enumeration_section">10.8</span>取消注册通知</h3>
               <div>
                  <p>此过程取消注册用于消息通知的电子邮件地址，用户定义的PL / SQL过程或HTTP URL。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.UNREGISTER（reg_list IN SYS.AQ $ _REG_INFO_LIST，reg_count IN NUMBER）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE2854"></a><a id="ADQUE2853"></a><div class="props_rev_3"><a id="GUID-4C80C7E8-DAD2-49CA-9294-895581A64378" name="GUID-4C80C7E8-DAD2-49CA-9294-895581A64378"></a><h3 id="ADQUE-GUID-4C80C7E8-DAD2-49CA-9294-895581A64378" class="sect3"><span class="enumeration_section">10.9</span>发布订户通知</h3>
               <div>
                  <p>此过程发布到匿名订阅列表，允许所有注册订阅的客户端获取持久消息的通知。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.POST（post_list IN SYS.AQ $ _POST_INFO_LIST，post_count IN NUMBER）;</pre><p>缓冲消息不支持此功能。</p>
                     <p><code class="codeph">count</code>参数指定<code class="codeph">post_list</code>的条目数。每个发布的订阅必须在<code class="codeph">post_list</code>有自己的条目。可以一次发布多个订阅。
                     </p>
                     <p><code class="codeph">post_list</code>参数指定要发布的匿名订阅的列表。它有三个属性：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d61372e2592" class="indexterm-anchor"></a><code class="codeph">name</code></p>
                           <p><code class="codeph">name</code>属性指定要发布的匿名订阅的名称。
                           </p>
                        </li>
                        <li>
                           <p><a id="d61372e2605" class="indexterm-anchor"></a><code class="codeph">namespace</code></p>
                           <p><code class="codeph">namespace</code>属性指定订阅的命名空间。要通过<code class="codeph">DBMS_AQ.POST</code>从其他应用程序接收通知，名称空间必须是<code class="codeph">DBMS_AQ.NAMESPACE_ANONYMOUS</code> 。</p>
                        </li>
                        <li>
                           <p><a id="d61372e2624" class="indexterm-anchor"></a><code class="codeph">payload</code></p>
                           <p><code class="codeph">payload</code>属性指定要发布到匿名订阅的有效负载。没有有效负载可能与此调用相关联。
                           </p>
                        </li>
                     </ul>
                     <p>此呼叫提供尽力而为的保证。最多只有一次通知注册客户。此调用主要用于轻量级通知。如果应用程序需要更严格的保证，那么它可以排入队列。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4C80C7E8-DAD2-49CA-9294-895581A64378__GUID-94657F22-8CCB-44FB-9686-716FBFE77755">
                     <p class="titleinexample">示例10-22发布对象类型消息</p><pre class="oac_no_warn" dir="ltr">DECLARE postinfo sys.aq $ _post_info; post_list sys.aq $ _post_info_list; BEGIN postinfo：= sys.aq $ _post_info（'test.obj_queue'，0，HEXTORAW（'FF'））; post_list：= sys.aq $ _post_info_list（postinfo）; DBMS_AQ.POST（post_list =&gt; post_list，post_count =&gt; 1）;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2855"></a><div class="props_rev_3"><a id="GUID-E4F131CA-964F-4DF7-86EE-FB37078DD157" name="GUID-E4F131CA-964F-4DF7-86EE-FB37078DD157"></a><h3 id="ADQUE-GUID-E4F131CA-964F-4DF7-86EE-FB37078DD157" class="sect3"><span class="enumeration_section">10.10</span>将代理添加到LDAP服务器</h3>
               <div>
                  <p>此过程为LDAP服务器中的Oracle Database Advanced Queuing代理创建条目。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.BIND_AGENT（代理IN SYS.AQ $ _AGENT，证书IN VARCHAR2默认为NULL）;</pre><p><code class="codeph">agent</code>参数指定要在<a href="glossary.html#GUID-6BF3485C-E98F-4344-A7DE-64950BCCE160"><span class="xrefglossterm">轻量级目录访问协议</span></a> （LDAP）服务器中注册的Oracle数据库高级队列代理。
                     </p>
                     <p><a id="d61372e2718" class="indexterm-anchor"></a> <code class="codeph">certificate</code>参数指定LDAP中<code class="codeph">OrganizationalPerson</code>条目的位置（LDAP专有名称），其数字证书（属性<code class="codeph">usercertificate</code> ）将用于此代理。例如，“ <code class="codeph">cn=OE, cn=ACME, cn=com</code> ”是<code class="codeph">OrganizationalPerson</code> <code class="codeph">OE</code>的专有名称，其证书将与指定的代理一起使用。如果代理没有数字证书，则此参数默认为null。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E4F131CA-964F-4DF7-86EE-FB37078DD157__GUID-31833F55-0391-4079-9C42-9B56505965F8">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="aq-basic-components.html#GUID-2C5557D9-E11B-4AB9-94E0-F923C85D6E0A" title="该组件标识消息的生产者或消费者。">AQ代理类型</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE2856"></a><div class="props_rev_3"><a id="GUID-E6B7E2DC-9FD6-4EA8-8A92-D9929B9EA1B7" name="GUID-E6B7E2DC-9FD6-4EA8-8A92-D9929B9EA1B7"></a><h3 id="ADQUE-GUID-E6B7E2DC-9FD6-4EA8-8A92-D9929B9EA1B7" class="sect3"><span class="enumeration_section">10.11</span>从LDAP服务器中删除代理</h3>
               <div>
                  <p>此过程从LDAP服务器中删除Oracle Database Advanced Queuing代理的条目。</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_AQ.UNBIND_AGENT（代理IN SYS.AQ $ _AGENT）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13406.upgrading-oracle-database-upgrade-assistant-dbua.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Database Upgrade Assistant (DBUA) provides a graphical user interface to guide you through the upgrade of Oracle Database. DBUA works for CDB and non-CDB database systems."></meta>
      <meta name="description" content="Database Upgrade Assistant (DBUA) provides a graphical user interface to guide you through the upgrade of Oracle Database. DBUA works for CDB and non-CDB database systems."></meta>
      <title>使用Oracle数据库升级助手（DBUA）进行升级</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="Database Upgrade Assistant (DBUA) provides a graphical user interface to guide you through the upgrade of Oracle Database. DBUA works for CDB and non-CDB database systems."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="upgrading-parallel-upgrade-utility-catctl-pl.html" title="Previous" type="text/html"></link>
      <link rel="next" href="upgrade-scenarios-non-cdb-oracle-databases.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="upgrading-parallel-upgrade-utility-catctl-pl.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="upgrade-scenarios-non-cdb-oracle-databases.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="upgrading-oracle-database.html" property="item" typeof="WebPage"><span property="name">升级Oracle数据库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle数据库升级助手（DBUA）进行升级</li>
            </ol>
            <a id="GUID-BBF591A5-EB02-405A-9F99-572429838C73" name="GUID-BBF591A5-EB02-405A-9F99-572429838C73"></a><a id="UPGRD105"></a>
            
            <h2 id="UPGRD-GUID-BBF591A5-EB02-405A-9F99-572429838C73" class="sect2">使用Oracle数据库升级助手（DBUA）进行升级</h2>
         </header>
         <div class="ind">
            <div>
               <p>数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。</p>
               <div class="infoboxnote" id="GUID-BBF591A5-EB02-405A-9F99-572429838C73__GUID-9D6A6600-CD13-4A5C-99AE-334C4DD0EB43">
                  <p class="notep1">注意：</p>
                  <p>您可以在静默模式下启动DBUA，该模式不提供用户界面。静默模式对于大型扩展和脚本非常有用。</p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-04161A85-6A67-4404-B7A7-69A3713C5F99">使用DBUA的建议</a><br>查看此主题以使用数据库升级助手（DBUA）进行多租户架构和非CDB Oracle数据库升级。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E">关于升级时停止DBUA</a><br>如果停止DBUA，则必须手动完成升级。</li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA">DBUA如何处理Oracle数据库的升级</a><br>您可以将DBUA作为数据库软件安装的一部分启动，也可以在安装软件后手动启动它。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-8BDDF859-1638-45AC-824D-78FC8154847C">DBUA启动的升级脚本</a><br>在升级期间，DBUA会自动运行相应的升级脚本以自动升级并最大限度地减少停机时间。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-307DACD9-ECEE-4079-B767-B22620B99900">使用DBUA在Linux，Unix和Windows系统上升级数据库</a><br>要使用DBUA图形用户界面升级数据库，请在新的Oracle主目录中执行这些步骤。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F">从现有Oracle主目录移动数据库</a><br>使用此过程将Oracle数据库迁移到另一个Oracle Database 18c或更高版本的主目录。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57">在无提示模式下使用DBUA升级Oracle数据库</a><br>您可以使用<code>-silent</code>命令行选项DBUA使用DBUA执行非交互（“静默”）升级。</li>
               </ul>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" title="您可以使用-silent命令行选项DBUA使用DBUA执行非交互（“静默”）升级。">在无提示模式下使用DBUA升级Oracle数据库</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="upgrading-oracle-database.html#GUID-CC88F262-3370-4FFA-8604-EDA9F20F56D9" title="Oracle提供了一套全面的工具，用于以最短的停机时间升级Oracle数据库，以及将应用程序迁移到新版本。">升级Oracle数据库</a></p>
                  </div>
               </div>
            </div><a id="UPGRD52727"></a><div class="props_rev_3"><a id="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99" name="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99"></a><h3 id="UPGRD-GUID-04161A85-6A67-4404-B7A7-69A3713C5F99" class="sect3">使用DBUA的建议</h3>
               <div>
                  <p>查看此主题以使用数据库升级助手（DBUA）进行多租户架构和非CDB Oracle数据库升级。</p>
                  <p>您可以使用DBUA升级多租户架构容器数据库（CDB），可插拔数据库（PDB）和非CDB数据库。过程是相同的，但您必须做出的选择和DBUA的行为是不同的，具体取决于升级类型：</p>
                  <div class="infoboxnote" id="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99__GUID-1CCC8017-B87A-4886-A797-25EDF0EAAA25">
                     <p class="notep1">注意：</p>
                     <p>从Oracle Database 12 <span class="italic">c</span> （第1版（12.1））开始，不推荐使用非CDB体系结构。它可以在将来的版本中得到支持。
                     </p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于所有升级，在使用DBUA升级系统之前，Oracle强烈建议您手动运行升级前信息工具。DBUA运行升级前信息工具，作为在开始升级之前执行的先决条件检查的一部分。但是，为了减少停机时间，Oracle建议您在升级计划中运行升级前信息工具，以便分析数据库，并在计划的升级日期之前采取主动措施。</p>
                     </li>
                     <li>
                        <div class="p">要使用有保证的还原点，请确保在升级期间启用了数据库ARCHIVE LOG和FLASHBACK模式。您可以通过输入以下SQL命令来确认它们已启用：<pre class="pre codeblock"><code>SQL&gt;从v $ database中选择log_mode，flashback_on;</code></pre></div>
                     </li>
                     <li>
                        <p>如果数据库实例未运行，则DBUA会尝试启动该实例。如果实例已启动并正在运行，则DBUA将连接到该实例。</p>
                     </li>
                     <li>
                        <p>如果手动还原数据库（不使用DBUA），则在启动DBUA之前，删除<code class="codeph">Welcome_</code> <span class="variable" translate="no">SID</span> <code class="codeph">.txt</code>文件，该文件位于<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> /cfgtoollogs/dbua/logs/</code> 。如果DBUA找到此文件，则DBUA将在重新运行操作中启动。
                        </p>
                     </li>
                     <li>
                        <p>还原脚本通常使您能够将数据库（非CDB单实例，高可用性或Oracle RAC）还原到早期版本和早期Oracle主目录位置。但是，如果已使用Oracle Internet Directory（OID）注册数据库，则还原脚本无法取消注册Oracle Internet Directory。您必须以授权用户身份登录，并手动取消注册更高版本的数据库。</p>
                     </li>
                     <li>
                        <p>如果启用了Oracle Database Vault，请在本文档中查看“升级使用Oracle Database Vault的Oracle数据库的要求”。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99__GUID-7C229766-ACAD-45F2-AAA7-F5286FF58892">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle数据库概念</cite></span></a> ，提供了使用CDB和PDB的概述和文档路线图</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60156"></a><div class="props_rev_3"><a id="GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E" name="GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E"></a><h3 id="UPGRD-GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E" class="sect3">关于升级时停止DBUA</h3>
               <div>
                  <p>如果停止DBUA，则必须手动完成升级。</p>
                  <p>如果停止升级但不还原数据库，则无法继续使用DBUA进行升级。您必须使用手动（命令行）升级过程继续升级。除非还原数据库，否则无法返回到原始Oracle数据库服务器。</p>
                  <p></p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="manual-upgrade-scenarios-multitenant-architecture-oracle-databases.html#GUID-7E127507-D2F5-4771-A8A9-BAF6E553831B">手动升级多租户容器Oracle数据库（CDB）</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52728"></a><div class="props_rev_3"><a id="GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA" name="GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA"></a><h3 id="UPGRD-GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA" class="sect3">DBUA如何处理Oracle数据库的升级</h3>
               <div>
                  <p>您可以将DBUA作为数据库软件安装的一部分启动，也可以在安装软件后手动启动它。</p>
                  <p>如果安装新的Oracle数据库软件，并指定要升级现有Oracle数据库，则DBUA会自动启动。您也可以在安装完成后单独启动DBUA。</p>
                  <p>升级过程中，DBUA会显示每个组件的升级进度。DBUA编写详细的跟踪和日志文件，并生成完整的HTML报告供以后参考。为了增强安全性，DBUA会自动锁定已升级数据库中的新用户帐户。然后，DBUA继续在新的Oracle主目录中创建新的配置文件（参数和侦听器文件）。</p>
                  <p>在完成所有升级前步骤之前，DBUA不会开始升级过程。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="rerunning-upgrades-oracle-database.html#GUID-190D00A4-BE9A-4139-B3FC-A29C2BFBE91B">重新启动Oracle数据库升级</a></li>
                        <li><a href="tasks-to-prepare-for-oracle-database-upgrades.html#GUID-3C319260-B5CD-4C50-B606-36D060FDF0BE">准备Oracle数据库升级的任务</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52730"></a><div class="props_rev_3"><a id="GUID-8BDDF859-1638-45AC-824D-78FC8154847C" name="GUID-8BDDF859-1638-45AC-824D-78FC8154847C"></a><h3 id="UPGRD-GUID-8BDDF859-1638-45AC-824D-78FC8154847C" class="sect3">DBUA启动的升级脚本</h3>
               <div>
                  <p>在升级期间，DBUA会自动运行相应的升级脚本以自动升级并最大限度地减少停机时间。</p>
                  <p></p>
                  <p>在先决条件阶段，DBUA运行升级前信息工具脚本，并使用以下逻辑来修改或创建新的必需表空间：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果数据文件是可自动扩展的并且有足够的磁盘空间来增长，那么DBUA将继续升级。</p>
                     </li>
                     <li>
                        <p>如果数据文件不是可自动扩展的，则DBUA会提示您并使文件可自动扩展。</p>
                     </li>
                     <li>
                        <p>如果表空间是可自动扩展的并且需要调整<code class="codeph">MAXSIZE</code>初始化参数，则DBUA会提示您进行此调整，并调整<code class="codeph">MAXSIZE</code>参数。
                        </p>
                     </li>
                     <li>
                        <p>如果没有足够的磁盘空间来增长，则DBUA会通过添加更多数据文件来提示您创建空间。DBUA不会自动添加新数据文件，因为DBUA无法确定创建文件的位置。</p>
                     </li>
                  </ul>
                  <p>DBUA解决了在前提阶段发现的许多问题。例如，DBUA可以确保使用正确的时区文件，并对网络访问控制列表进行ACL调整。</p>
                  <p>在升级阶段，DBUA运行<code class="codeph">catctl.pl</code> ，它以并行方式而不是串行方式运行升级过程。并行运行可优化CPU资源的利用率，从而加速升级并最大限度地减少停机时间。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52860"></a><div class="props_rev_3"><a id="GUID-307DACD9-ECEE-4079-B767-B22620B99900" name="GUID-307DACD9-ECEE-4079-B767-B22620B99900"></a><h3 id="UPGRD-GUID-307DACD9-ECEE-4079-B767-B22620B99900" class="sect3">使用DBUA在Linux，Unix和Windows系统上升级数据库</h3>
               <div>
                  <p>要使用DBUA图形用户界面升级数据库，请在新的Oracle主目录中执行这些步骤。</p>
                  <p>在Microsoft Windows系统（Windows）上，将DBUA作为Oracle数据库管理用户（具有操作系统分配的<code class="codeph">ORA_DBA</code>角色的用户）或Oracle安装所有者帐户运行。
                  </p>
                  <ol id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__OL_YND_2LF_WFB">
                     <li>
                        <p>从安装了新数据库软件的Oracle主目录启动Oracle数据库升级助手（DBUA）。<code>dbua</code>可执行文件位于目录路径<code><span class="variable" translate="no">ORACLE_HOME</span> /bin</code> 。
                        </p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_ZND_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>在Linux或Unix平台上，以具有SYSDBA权限的用户身份登录，并在Oracle数据库19c的新主目录中的系统提示符处输入以下命令：</p><pre class="pre codeblock"><code>./dbua</code></pre></li>
                           <li>
                              <p>在Windows操作系统上，依次选择“ <span class="uicontrol bold">开始”</span> ，“ <span class="uicontrol bold">程序”</span> ，“ <span class="uicontrol bold">Oracle <span class="variable" translate="no">HOME_NAME</span></span> ，“ <span class="uicontrol bold">配置和迁移工具”</span> ，然后选择“ <span class="uicontrol bold">数据库升级助手”</span> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>将显示“ <span class="wintitle">选择数据库”</span>窗口如果您之前已发布Oracle数据库安装，则会列出这些安装可用于升级。
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__FIG_GWQ_4KJ_SFB"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_QY2_TKJ_SFB" src="img/dbua_1.png" alt="下面是dbua_1.png的描述" title="下面是dbua_1.png的描述" longdesc="img_text/dbua_1.html"><br><a href="img_text/dbua_1.html">说明dbua_1.png的说明</a></div>
                        <!-- class="figure" -->
                        <p>如果您在任何DBUA窗口上需要帮助，或者如果您想查阅有关DBUA的更多文档，请单击“ <span class="uicontrol bold">帮助”</span>以打开联机帮助。
                        </p>
                        <p>如果需要，请输入所选数据库的SYSDBA用户名和密码。</p>
                        <p>如果从没有<code class="codeph">SYSDBA</code>权限的用户帐户运行DBUA，或者源数据库没有操作系统身份验证，则必须输入用户名和密码凭据才能为所选数据库启用<code class="codeph">SYSDBA</code>权限。如果您使用的用户帐户具有SYSDBA权限，或者您使用了操作系统身份验证，则无需输入用户名和密码。
                        </p>
                        <p>选择后单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                        <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-9A3BD702-6F5A-48BD-9F1F-72AF1AA0EF4E">
                           <p class="notep1">注意：</p>
                           <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_A4D_2LF_WFB" style="list-style-type:disc">
                              <li>
                                 <p>您一次只能选择一个数据库。</p>
                              </li>
                              <li>
                                 <p>对于单实例升级，如果数据库未出现在列表中，则检查<code>/etc/oratab</code>存在具有数据库名称的条目。如果未在此列出数据库，则指示DBUA升级特定数据库：</p>
                                 <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_B4D_2LF_WFB" style="list-style-type:disc">
                                    <li>
                                       <p>如果您的单实例数据库未在<code class="codeph">/etc/oratab</code>列出，并且DBUA可以连接到数据库，那么您可以通过使用命令行参数<code class="codeph">-sid <span class="variable" translate="no">Oracle_SID</span></code> ， <code class="codeph">-oracleHome <span class="variable" translate="no">Oracle_home</span> , and <code class="codeph">sysDBAPassword <span class="variable" translate="no">password</span></code></code>启动DBUA来指示DBUA显式升级该数据库<code class="codeph">-oracleHome <span class="variable" translate="no">Oracle_home</span> , and <code class="codeph">sysDBAPassword <span class="variable" translate="no">password</span></code></code>作为命令行参数。例如：</p><pre class="pre codeblock"><code>dbua -sid <span class="variable" translate="no">Oracle_SID</span> -oracleHome /u01/app/oracle/18.1.0/dbhome1 -sysDBAUserName SYS -sysDBAPassword <span class="variable" translate="no">password</span></code></pre></li>
                                 </ul>
                              </li>
                              <li>
                                 <div class="p">如果您的帐户没有SYSDBA权限，或者您没有设置操作系统身份验证，则可以使用以下语法进行连接，其中<code class="codeph"><span class="variable" translate="no">mydb</span></code>是您的Oracle数据库SID， <code class="codeph"><span class="variable" translate="no">username</span></code>是具有SYSDBA权限的用户名， <code class="codeph"><span class="variable" translate="no">password</span></code>是用户名的密码：<pre class="pre codeblock"><code>dbua -sid <span class="variable" translate="no">mydb</span> -oracleHome /u01/app/oracle/18.1.0/dbhome1 -sysDBAUserName  - <span class="variable" translate="no">username</span> -sysDBAPassword  - <span class="variable" translate="no">password</span></code></pre></div>
                              </li>
                              <li>
                                 <p>Oracle Real Application Clusters（Oracle RAC）升级：如果数据库未出现在列表中，请输入以下<code class="codeph">crsctl</code>命令以检查Oracle RAC实例：</p>
                                 <p><code class="codeph">crsctl status resource -t</code></p>
                                 <p>您还可以输入以下命令来检查特定的Oracle RAC数据库，其中<code class="codeph"><span class="variable" translate="no">db_name</span></code>是Oracle RAC数据库名称：</p>
                                 <p><code class="codeph">crsctl status resource ora。 <span class="variable" translate="no">db_name</span> .db</code></p>
                              </li>
                              <li>
                                 <p>在Microsoft Windows上，以下安全更改会影响身份验证和用户帐户：</p>
                                 <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_C4D_2LF_WFB" style="list-style-type:disc">
                                    <li>
                                       <p>出于安全原因，不再支持使用NTLM协议的Windows NTS身份验证。Kerberos身份验证是唯一受支持的身份验证。在此版本中，NTS在Windows NT域或Windows NT控制器的域中不起作用。</p>
                                    </li>
                                    <li>
                                       <p>Oracle使用标准Microsoft Windows用户帐户而不是Windows <code class="codeph">LocalSystem</code>帐户来运行Oracle数据库服务。减少Oracle安装所有者的帐户访问权限可在Microsoft Windows上提供更好的安全性。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>如果所选数据库是多租户容器数据库（CDB），则DBUA将显示“ <span class="wintitle">可插拔数据库”</span>窗口。“ <span class="wintitle">可插拔数据库”</span>窗口列出了CDB中包含的可插拔数据库。列出的PDB将作为所选CDB升级的一部分进行升级。</p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-67555BED-FD39-47A0-A127-2C7900FD17BD"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_E3Q_ZNJ_SFB" src="img/dbua_2.png" alt="下面是dbua_2.png的描述" title="下面是dbua_2.png的描述" longdesc="img_text/dbua_2.html"><br><a href="img_text/dbua_2.html">说明dbua_2.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>您可以选择PDB的升级优先级。单击每个PDB的优先级列，然后输入升级优先级的数值，其中1先升级，2升级第二，依此类推。</p>
                        <p>默认情况下， <code class="codeph">CDB$ROOT</code> ， <code class="codeph">PDB$SEED</code>以及插入CDB的所有PDB都会升级。如果您现在不想升级某些PDB，请拔下这些PDB。
                        </p>
                        <p>完成选择PDB和升级优先级后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>仅限Windows平台：如果升级目标主目录是与Oracle主目录用户关联的安全主目录，则会打开“ <span class="wintitle">指定Oracle主目录用户密码”</span>窗口。对于其他平台，请继续执行下一步。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-5A3948CA-F65D-4F9A-87E7-66E82E7A9DDD"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_TZT_M42_TFB" src="img/dbua3a-win.png" alt="下面是dbua3a-win.png的描述" title="下面是dbua3a-win.png的描述" longdesc="img_text/dbua3a-win.html"><br><a href="img_text/dbua3a-win.html">说明dbua3a-win.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>提供Oracle主用户名，并提供此用户帐户的密码，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将打开“ <span class="wintitle">先决条件检查”</span>窗口。DBUA分析数据库，执行预升级检查并根据需要显示警告。以下是DBUA检查的示例列表，以及DBUA对数据库执行的操作的列表：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_D4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>空数据库回收站。</p>
                           </li>
                           <li>
                              <p>识别无效对象。</p>
                           </li>
                           <li>
                              <p>识别已弃用和不支持的初始化参数。</p>
                           </li>
                           <li>
                              <p>确定时区数据文件版本。</p>
                           </li>
                        </ul>
                        <p>分析需要几分钟才能完成。</p>
                        <p>当DBUA完成其分析时，将再次显示“ <span class="wintitle">先决条件检查”</span>窗口，显示检查结果。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-24158971-D20A-4D41-B274-01DF86FF4EA8"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_O3D_RPJ_SFB" src="img/dbua_3.png" alt="下面是dbua_3.png的描述" title="下面是dbua_3.png的描述" longdesc="img_text/dbua_3.html"><br><a href="img_text/dbua_3.html">说明dbua_3.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>“ <span class="wintitle">先决条件检查”</span>窗口显示DBUA已完成的检查以及发现的任何错误的严重性。当DBUA发现错误时，它指示哪些错误是可修复的，以及您可以采取哪些操作来纠正错误。
                        </p>
                        <p>如果出现DBUA可以修复的任何错误， <span class="uicontrol bold">请</span>选择“ <span class="uicontrol bold">修复并再次检查”</span> 。
                        </p>
                        <p>如果DBUA检测到无法纠正的错误， <span class="uicontrol bold">请</span>手动修复错误原因，然后选择“ <span class="uicontrol bold">再次检查”</span> 。
                        </p>
                        <p>如果DBUA没有发现错误或警告，则DBUA会自动绕过此窗口并进入下一个窗口。</p>
                        <p>修复检测到的错误后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将显示“ <span class="wintitle">选择升级选项”</span>窗口。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-80053CDF-0A36-4BFA-A3F4-CE9B177FDCF5"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_PZH_4QJ_SFB" src="img/dbua_4.png" alt="下面是dbua_4.png的描述" title="下面是dbua_4.png的描述" longdesc="img_text/dbua_4.html"><br><a href="img_text/dbua_4.html">说明dbua_4.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>该窗口提供以下选项：</p>
                        <p><span class="uicontrol bold">启用并行升级</span></p>
                        <p>如果要在升级过程中启用并行性，请选择此选项。并行运行升级过程可根据可用于同时处理脚本和进程运行的CPU数量，减少执行升级所需的时间。</p>
                        <p><span class="uicontrol bold">在升级后重新编译无效对象</span></p>
                        <p>升级完成后，此选项将重新编译所有无效的PL / SQL模块。如果在升级后阶段没有DBUA重新编译无效对象，则必须在升级数据库后手动重新编译无效对象。</p>
                        <p><span class="uicontrol bold">升级时区数据</span></p>
                        <p>此选项更新此版本的时区数据文件。如果未选择此选项，则必须在升级后手动更新时区配置文件。</p>
                        <p><span class="uicontrol bold">指定要执行的自定义SQL脚本</span> 。
                        </p>
                        <p>如果要在升级过程中运行自定义SQL脚本，请选择此选项。根据需要，单击“ <span class="uicontrol bold">浏览”</span>以获取“ <span class="uicontrol bold">升级前”</span>或“ <span class="uicontrol bold">升级后”</span>输入字段。导航到自定义SQL脚本所在的位置。
                        </p>
                        <p>完成选择后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将出现“ <span class="wintitle">选择恢复选项”</span>窗口。要在升级期间发生故障时恢复数据库，请从以下选项之一中进行选择：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_E4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p><span class="uicontrol bold">使用闪回和保证还原点</span> 。
                              </p>
                              <p>您可以创建新的保证还原点，也可以使用现有的还原点。如果使用现有还原点，则单击选择域以选择要使用的还原点。</p>
                              <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-8D48FEDD-7742-4B20-87BA-AF4C9D69B90D">
                                 <p class="notep1">注意：</p>
                                 <p>如果要升级的数据库具有Oracle Data Guard物理备用数据库，则必须先在每个备用数据库上创建保证还原点，然后才能在主数据库上创建一个备用数据库。如果不首先在每个备用数据库上创建还原点，则必须在使用保证还原点降级主数据库后再次重新创建所有备用数据库。升级成功后，您必须手动删除备用数据库上所有保证还原点。</p>
                              </div>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">使用RMAN备份</span></p>
                              <p>您可以创建新的脱机RMAN备份，也可以使用现有备份。单击“ <span class="uicontrol bold">浏览”</span>以指定备份的路径。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">使用最新可用的RMAN备份</span></p>
                              <p>您可以使用现有备份。单击“ <span class="uicontrol bold">查看/编辑还原脚本”</span>以选择要使用的备份。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">我有自己的备份和恢复策略</span> 。
                              </p>
                              <p>仅当您具有适用于现有数据库的第三方备份解决方案时，才选择此选项。</p>
                           </li>
                        </ul>
                        <p>完成选择后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>对于单实例数据库安装，将打开“ <span class="wintitle">配置网络”</span>窗口。从源Oracle主目录中选择一个或多个要迁移到新升级的Oracle主目录的侦听器，或在安装期间创建新的侦听器。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-C2DC7C5D-4369-436A-BA18-4CECA2AD2FDC"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_EMT_FSJ_SFB" src="img/dbua_6.png" alt="下面是dbua_6.png的描述" title="下面是dbua_6.png的描述" longdesc="img_text/dbua_6.html"><br><a href="img_text/dbua_6.html">说明dbua_6.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>“网络配置”窗口的“侦听器选择”区域显示包含以下列的表：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_F4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>选择列。选择要更新的侦听器。</p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">名称</span>此列显示侦听器名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">端口</span>此列显示配置侦听器的端口。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">Oracle Home</span>此列显示配置了侦听器的Oracle主目录。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">状态</span>此列显示侦听器状态（向上或向下）。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">迁移</span>选择此列，然后选择“ <kbd class="userinput">是”</kbd>以进行迁移，或者选择<kbd class="userinput">“</kbd> <kbd class="userinput">否”（</kbd>如果您不想迁移）。
                              </p>
                           </li>
                        </ul>
                        <p>您还可以选择创建新的侦听器。如果创建新侦听器，则提供侦听器名称，要放置的Oracle主目录以及要配置侦听器要监视的端口。</p>
                        <p>做出选择后，DBUA会为您迁移的所有侦听器完成以下步骤：</p>
                        <ol type="a" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__OL_G4D_2LF_WFB">
                           <li>
                              <p>DBUA将选定的侦听器添加到目标Oracle主目录的<code>listener.ora</code>文件中，然后启动它。
                              </p>
                           </li>
                           <li>
                              <p>DBUA从旧（源） <code>listener.ora</code>文件中删除已升级数据库的条目。
                              </p>
                           </li>
                           <li>
                              <p>DBUA在源和目标Oracle数据库环境中重新加载<code>listener.ora</code>文件。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-1FB4DACA-15B2-4CAF-8DDB-940C6145FBB4">
                           <p class="notep1">注意：</p>
                           <p>如果在同一侦听器中注册了其他数据库，则在侦听器迁移期间可能会影响其新的客户端连接请求。</p>
                        </div>
                        <p>完成选择后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>出现“ <span class="wintitle">配置管理”</span>窗口。在“ <span class="wintitle">配置管理”</span>窗口中，选择管理选项：</p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-9E8CB2FC-E203-400B-BD14-B719BC533F4B"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_A5L_25J_SFB" src="img/dbua_7.png" alt="下面是dbua_7.png的描述" title="下面是dbua_7.png的描述" longdesc="img_text/dbua_7.html"><br><a href="img_text/dbua_7.html">说明dbua_7.png的描述</a></div>
                        <!-- class="figure" -->
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_H4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p><span class="uicontrol bold">配置企业管理器（EM）数据库快速</span></p>
                              <p>Oracle Enterprise Manager Database Express是基于Web的数据库管理应用程序，内置于Oracle数据库中。EM Express替换了早期版本中可用的DB Control组件。如果选择配置Enterprise Manager Database Express，请输入EM Database Express端口号。例如：5500。您也可以选中该复选框以将快速端口配置为全局端口。</p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">注册企业管理器（EM）云控制</span></p>
                              <p>注册Oracle Enterprise Manager Cloud Control会将数据库及其相关实体（如监听器，Oracle ASM磁盘组和Oracle Clusterware）添加为可以使用EM Cloud Control管理的目标。</p>
                              <p>如果选择此选项，则必须在以下字段中提供信息：</p>
                              <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_I4D_2LF_WFB" style="list-style-type:disc">
                                 <li>
                                    <p>OMS主机</p>
                                 </li>
                                 <li>
                                    <p>OMS端口</p>
                                 </li>
                                 <li>
                                    <p>EM管理员用户名</p>
                                 </li>
                                 <li>
                                    <p>EM管理员密码</p>
                                 </li>
                                 <li>
                                    <p>DBSNMP用户密码</p>
                                 </li>
                                 <li>
                                    <p>ASMSNMP用户密码</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>完成输入信息后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>“ <span class="wintitle">摘要”</span>窗口打开。“摘要”窗口显示您为升级提供的信息。向下滚动列表以查看信息。摘要包括以下信息：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_J4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>源数据库</p>
                           </li>
                           <li>
                              <p>目标数据库</p>
                           </li>
                           <li>
                              <p>可插拔数据库</p>
                           </li>
                           <li>
                              <p>升级前检查</p>
                           </li>
                           <li>
                              <p>初始化参数更改</p>
                           </li>
                           <li>
                              <p>时区升级</p>
                           </li>
                        </ul>
                        <p>检查您的选择。然后，选择要更改的项目的链接，或单击“上<span class="uicontrol bold">一步”</span>转到<span class="uicontrol bold">上一页</span> ，或选择“ <span class="uicontrol bold">完成”</span> ：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_K4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>如果您在“ <span class="wintitle">摘要”</span>窗口中看到要更正的信息，请单击要更新的项目上的链接，或单击“上<span class="uicontrol bold">一步”</span>以向后浏览DBUA配置面试。
                              </p>
                           </li>
                           <li>
                              <p>如果在“ <span class="wintitle">摘要”</span>窗口中看到的信息正确，请单击“ <span class="uicontrol bold">完成”</span> 。选择“ <span class="uicontrol bold">完成”</span>后，将开始升级。
                              </p>
                           </li>
                        </ul>
                        <p>当DBUA开始升级时， <span class="wintitle">进度</span>窗口会显示进度条。“ <span class="wintitle">进度”</span>窗口显示一个表，其中显示了DBUA在升级期间完成的步骤。此表显示升级过程中的持续时间和升级步骤状态。如果您此时必须取消升级，DBUA会提供“ <span class="uicontrol bold">停止”</span>按钮。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-5A0F0230-11C8-4892-9BF4-5DB7B3E2C31E"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_EHN_WTD_TFB" src="img/dbua_9.png" alt="下面是dbua_9.png的描述" title="下面是dbua_9.png的描述" longdesc="img_text/dbua_9.html"><br><a href="img_text/dbua_9.html">说明dbua_9.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>升级完成CDB根目录和每个PDB种子的升级后，“ <span class="wintitle">进度”</span>窗口将状态标记为“已<span class="uicontrol bold">完成”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>升级完成后，将打开“ <span class="wintitle">结果”</span>窗口。“ <span class="wintitle">结果”</span>窗口显示有关原始数据库以及已升级数据库的信息。“升级结果”报告还显示DBUA对初始化参数所做的更改。如果要升级多租户体系结构数据库，则“ <span class="wintitle">结果”</span>窗口还会显示可插拔数据库以及升级后存储日志文件的目录。向下滚动以查看有关预升级检查的更多详细信息。如果升级成功，则“升级结果”字段将报告结果，并且您看不到警告消息。如果升级失败，如此示例图像所示，则“ <span class="uicontrol bold">还原数据库”</span>按钮将显示在显示字段下方的右下角。您可以单击此按钮以启动数据库还原。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-5E5FCA53-7DBA-42CC-9BD0-E394C91DA6AA"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_GYJ_Q5D_TFB" src="img/dbua_10.png" alt="下面是dbua_10.png的描述" title="下面是dbua_10.png的描述" longdesc="img_text/dbua_10.html"><br><a href="img_text/dbua_10.html">说明dbua_10.png的描述</a></div>
                        <!-- class="figure" -->
                     </li>
                     <li>
                        <p>可选：检查日志文件以获取有关升级过程的更多详细信息。如果设置了Oracle基本环境变量，则DBUA日志文件位于路径<code>/ <span class="variable" translate="no">ORACLE_BASE</span> /cfgtoollogs/dbua/upgradesession_ <span class="variable" translate="no">timestamp</span> / <span class="variable" translate="no">SID</span></code> 。如果未设置Oracle base，则DBUA日志文件位于路径<code>/ <span class="variable" translate="no">ORACLE_HOME</span> /cfgtoollogs/dbua/upgradesession_ <span class="variable" translate="no">timestamp</span> / <span class="variable" translate="no">SID</span></code></p>
                        <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-D621C2AA-E950-4E9C-9783-3534ED5F7A9B">
                           <p class="notep1">注意：</p>
                           <p>升级结果窗口的HTML版本也保存在日志文件目录中。您可以单击此HTML窗口中的链接以在浏览器中查看日志窗口。</p>
                        </div>
                        <p>如果您对升级结果感到满意，请单击“ <span class="uicontrol bold">关闭”</span>以退出DBUA。</p>
                     </li>
                     <li>
                        <p>升级完成后，执行本书中描述的升级后过程。完成升级后过程后，即可使用升级后的数据库。</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-660564CA-EA5E-45A1-A62D-A46BC94FE6AB">
                     <p class="notep1">警告：</p>
                     <p>为防止未经授权使用数据库，Oracle建议您在升级数据库后立即更改所有用户密码。</p>
                     <p>如果Oracle Database 12c及更高版本的默认安全设置已就绪，则密码必须至少为八个字符。不允许使用<code class="codeph">welcome</code>和<code class="codeph">oracle</code>等密码。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60002"></a><div class="props_rev_3"><a id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F" name="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F"></a><h3 id="UPGRD-GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F" class="sect3">从现有Oracle主目录移动数据库</h3>
               <div>
                  <p>使用此过程将Oracle数据库迁移到另一个Oracle Database 18c或更高版本的主目录。</p>
                  <p>使用Oracle Database 18c和更高版本，您可以使用数据库升级助手（DBUA）将Oracle数据库数据库从现有Oracle主目录迁移到另一个Oracle主目录。</p>
                  <ol>
                     <li>
                        <p>启动DBUA。</p>
                        <p>DBUA打开“ <span class="wintitle">选择数据库”</span>窗口。
                        </p>
                        <p>列出服务器上的所有数据库。DBUA指示您可以为每个数据库执行的操作类型（升级，移动，就地），具体取决于数据库版本和位置。</p>
                        <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-C2588B20-8EA4-4B6F-BECF-7AD76580AA51"><img id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__IMAGE_PXK_QW2_TFB" src="img/dbua_11.png" alt="下面是dbua_11.png的描述" title="下面是dbua_11.png的描述" longdesc="img_text/dbua_11.html"><br><a href="img_text/dbua_11.html">说明dbua_11.png的描述</a></div>
                        <!-- class="figure" -->
                        <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-CBFB059C-F0F2-4DA4-9EA9-96013AE2A048"></div>
                        <!-- class="figure" -->
                        <p>选择要移动到新Oracle主目录的数据库。如果尚未为数据库启用操作系统身份验证，请提供所选数据库的SYSDBA用户名和密码。</p>
                        <p>单击<span class="uicontrol bold">下一步</span> 。<span class="wintitle">将</span>出现“ <span class="wintitle">移动数据库选项”</span>窗口
                        </p>
                     </li>
                     <li>
                        <div class="p">在“ <span class="wintitle">选择移动选项”</span>窗口中，您可以指定在移动数据库后要运行的自定义SQL脚本，并确定文件的位置。
                           <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-B3D2857A-84F2-4CEF-A0A6-A8544CAC350A"><img id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__IMAGE_BVL_1Y2_TFB" src="img/dbua_12.png" alt="下面是dbua_12.png的描述" title="下面是dbua_12.png的描述" longdesc="img_text/dbua_12.html"><br><a href="img_text/dbua_12.html">说明dbua_12.png的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <p>单击<span class="uicontrol bold">下一步</span> 。出现“ <span class="wintitle">配置网络”</span>窗口。
                        </p>
                     </li>
                     <li>
                        <p>在单实例系统上，您可以选择现有侦听器，也可以创建新侦听器。如果创建新侦听器，则必须提供侦听器名称和侦听器的端口号。</p>
                        <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-5D92FF18-1909-43D5-B6AB-8BA072F467A2"><img id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__IMAGE_RRV_VNZ_XFB" src="img/dbua3mvnetwork.png" alt="下面是dbua3mvnetwork.png的描述" title="下面是dbua3mvnetwork.png的描述" longdesc="img_text/dbua3mvnetwork.html"><br><a href="img_text/dbua3mvnetwork.html">说明dbua3mvnetwork.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>单击<span class="uicontrol bold">下一步</span> 。出现“ <span class="wintitle">数据库移动摘要”</span>窗口。
                        </p>
                     </li>
                     <li>
                        <p>查看移动操作的摘要，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将出现“ <span class="wintitle">设置”</span>窗口，其中显示DBUA进程在移动数据库时的过程。
                        </p>
                     </li>
                     <li>
                        <p>移动操作完成后，单击“ <span class="uicontrol bold">完成”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将出现“ <span class="wintitle">结果”</span>窗口。您可以查看源和目标数据库信息，并检查移动步骤或检查日志文件。完成审阅后，单击“ <span class="uicontrol bold">关闭”</span> 。
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52861"></a><div class="props_rev_3"><a id="GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" name="GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57"></a><h3 id="UPGRD-GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" class="sect3">在无提示模式下使用DBUA升级Oracle数据库</h3>
               <div>
                  <p>您可以使用<code>-silent</code>命令行选项DBUA使用DBUA执行非交互（“静默”）升级。</p>
                  <p>。在静默模式下，DBUA不提供用户界面。DBUA将消息（包括信息，错误和警告）写入<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> /cfgtools/dbua/upgrade <span class="variable" translate="no">session_timestamp</span></code>的日志文件，其中<code class="codeph"><span class="variable" translate="no">session_timestamp</span></code>表示DBUA已运行的升级的时间戳。Oracle强烈建议您阅读生成的DBUA日志文件以确保升级成功。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B">以无提示模式运行DBUA</a><br>使用此过程以非交互（或“静默”）模式启动DBUA。
                     </li>
                     <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1">用于静默模式的DBUA命令行语法</a><br>使用此语法可以使用<code class="codeph">-silent</code>选项运行数据库升级助手（DBUA）。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B" name="GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B"></a><h4 id="UPGRD-GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B" class="sect4">以无提示模式运行DBUA</h4>
                  <div>
                     <p>使用此过程以非交互（或“静默”）模式启动DBUA。</p>
                     <p></p>
                     <ol>
                        <li>
                           <p>要以静默方式启动DBUA，请输入<code class="codeph">dbua -silent -sid</code>命令。该命令以静默方式启动DBUA，并标识要升级的数据库。
                           </p>
                           <p>例如，输入以下命令，其中数据库名称为ORCL：</p><pre class="pre codeblock"><code>dbua -silent -sid ORCL＆</code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" title="您可以使用-silent命令行选项DBUA使用DBUA执行非交互（“静默”）升级。">在无提示模式下使用DBUA升级Oracle数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1" name="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1"></a><h4 id="UPGRD-GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1" class="sect4">用于静默模式的DBUA命令行语法</h4>
                  <div>
                     <p>使用此语法可以使用<code class="codeph">-silent</code>选项运行数据库升级助手（DBUA）。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-4104CC38-C755-4F5B-A8C5-AD0E92310C66">目的</p>
                        <p>使用命令行选项运行DBUA时，可以在脚本表单中指定所有有效的DBUA选项。脚本表单使您可以避免在图形用户界面对话框中输入配置信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-60AB6FE4-E917-4A3B-8F23-ACAD4FC9E39F">文件路径</p><code><span class="variable" translate="no">$ORACLE_HOME</span> / directory_name</code></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-4878548E-50D7-4EBC-BCB2-E55EE704A524">句法</p><pre class="pre codeblock"><code>dbua [-silent] [-sid <span class="variable" translate="no">SID</span> ] [-oracleHome <span class="variable" translate="no">Oraclehome_path_and_name</span> ] [-oracleBase <span class="variable" translate="no">Oraclebase_path_and_name</span> ] [-asmsnmpPassword  - <span class="variable" translate="no">password</span> ] [-auditFileDest  - <span class="variable" translate="no">Database_Audit_File_path</span> ] [-backupLocation  - <span class="variable" translate="no">backup_directory_filepath</span> ] [-changeUserTablespacesReadOnly  -  [true | false]] [-createGRP  -  true | false] [-createListener  -  true | false] [ -  listener_name：listener_port]] [-dbName  - <span class="variable" translate="no">database_name</span> ] [-dbsnmpPassword  - <span class="variable" translate="no">password</span> ] [-disableArchiveLogMode  -  true | false] [ -  disableUpgradeScriptLogging  -  true | false]] [ -  emConfiguration  -  [DBEXPRESS | CENTRAL |两个| NONE] [-emExpressPort  - <span class="variable" translate="no">port</span> ] [-emPassword  - <span class="variable" translate="no">password</span> ] [-emUser  - <span class="variable" translate="no">Enterprise_Manager_Admin_User</span> ] [-enablePasswordProfile  -  true | false] [ -  signorePreReqs  -  true | false] [ -  signoreScriptErrors  -  true | false] [-initParam  - <span class="variable" translate="no">initname</span> = <span class="variable" translate="no">value</span> ， <span class="variable" translate="no">initname</span> = <span class="variable" translate="no">value</span> ， <span class="variable" translate="no">initname</span> = <span class="variable" translate="no">value</span> ,. 。 ][-initParamsEscapeChar  - <span class="variable" translate="no">character</span> ] [-keepDeprecatedParams  -  true | false] [-listeners  - <span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oracle_home</span> ， <span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oracle_home</span> ， <span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oracle_home</span> ,. 。 ][-localRacSid  - <span class="variable" translate="no">localSID</span> ] [-logDir  - <span class="variable" translate="no">custom_log_path</span> ] [-newGlobalDbName  - <span class="variable" translate="no">GlobalDBname</span> ]（仅限Oracle Express Edition升级）[ -  newsSid  -  sid]（仅限Oracle Express Edition升级）[-omsHost  - <span class="variable" translate="no">Enterprise_Management_Server_Hostname</span> ] [-omsPort  - <span class="variable" translate="no">Enterprise_Management_Server_port</span> ] [-oracleHome  - <span class="variable" translate="no">Oracle_DB_Oracle_home</span> ] [-oracleHomeUserPassword  - <span class="variable" translate="no">Oracle_home_installation_owner_password</span> ] [-pdbs  - <span class="variable" translate="no">pdb-A</span> ， <span class="variable" translate="no">pdb-B</span> ， <span class="variable" translate="no">pdb-C</span> ,. 。 。|所有|无] -pdbsWithPriority  - <span class="variable" translate="no">pdb-A</span> ：1， <span class="variable" translate="no">pdb-B</span> ：2， <span class="variable" translate="no">pdb-C</span> ：3 ,. 。 。] [-performFixUp  -  true | false] [-postUpgradeScripts  - <span class="variable" translate="no">filepath/script1</span> ， <span class="variable" translate="no">filepath/script2</span> ,. 。 ][-preUpgradeScripts  - <span class="variable" translate="no">filepath/script1</span> ， <span class="variable" translate="no">filepath/script2</span> ,. 。 ][-recompile_invalid_objects  -  true | false] [-sid  - <span class="variable" translate="no">SID</span> ] [-sysDBAPassword  - <span class="variable" translate="no">SYSDBA_UserName_password</span> ] [-sysDBAUserName  - <span class="variable" translate="no">SYSDBA_UserName_password</span> ] [-upgrade_parallelism  - <span class="variable" translate="no">cpu_number_for_parallel_upgrade</span> ] [-upgradeTimezone  -  true | false] [-useExistingBackup  -  true | false] [-useGRP  -  true |假]</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-1AD3BC46-FD74-402B-A739-B725EFFB99C7">选项</p>
                        <p>下表列出了DBUA命令行选项：</p>
                        <div class="tblformal" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-B73D4111-55E0-42B2-9769-EC1D9EDC3643">
                           <p class="titleintable">表4-2静默模式的DBUA命令行语法</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="用于静默模式的DBUA命令行语法" width="100%" border="1" summary="DBUA command-line options for silent mode" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d28060e1919">命令选项</th>
                                    <th align="left" valign="bottom" id="d28060e1921">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1925" headers="d28060e1919 ">
                                       <p><code class="codeph">-asmsnmpPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1925 d28060e1921 ">
                                       <p>指定ASMSNMP用户的密码。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1933" headers="d28060e1919 ">
                                       <p><code class="codeph">-auditFileDest</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1933 d28060e1921 ">
                                       <p>指定Oracle数据库审计文件目标。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1941" headers="d28060e1919 ">
                                       <p><code class="codeph">-backupLocation</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1941 d28060e1921 ">
                                       <p>（可选）指定在开始升级之前备份数据库的目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1949" headers="d28060e1919 ">
                                       <p><code class="codeph">-changeUserTablespacesReadOnly</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1949 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。如果为<code class="codeph">true</code> ，则在升级期间将用户表空间更改为只读。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1966" headers="d28060e1919 ">
                                       <p><code class="codeph">-createGRP</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1966 d28060e1921 ">
                                       <p>如果为<code class="codeph">true</code> ，则指定DBUA在数据库处于归档日志和闪回模式时创建保证还原点（GRP）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1977" headers="d28060e1919 ">
                                       <p><code class="codeph">-createListener</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1977 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。如果为<code class="codeph">true</code> ，则指定在新的Oracle主版本中创建侦听器。以<kbd class="userinput"><span class="variable" translate="no">listener_name</span> ： <span class="variable" translate="no">listener_port</span></kbd>格式提供侦听器名称和端口</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2000" headers="d28060e1919 ">
                                       <p><code class="codeph">-dbName</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2000 d28060e1921 ">
                                       <p>指定要升级的数据库名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2008" headers="d28060e1919 ">
                                       <p><code class="codeph">-dbsnmpPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2008 d28060e1921 ">
                                       <p>指定DBSNMP用户密码</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2016" headers="d28060e1919 ">
                                       <p><code class="codeph">-disableArchiveLogMode</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2016 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。如果为<code class="codeph">true</code> ，则在升级期间关闭存档和闪回日志记录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2033" headers="d28060e1919 ">
                                       <p><code class="codeph">-disableParallelUpgrade</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2033 d28060e1921 ">
                                       <p>禁用数据库升级的并行执行</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2041" headers="d28060e1919 ">
                                       <p><code class="codeph">-disableUpgradeScriptLogging</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2041 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。默认情况下，此选项为<code class="codeph">true</code> 。设置为<code class="codeph">false</code> ，禁用在升级过程中运行SQL脚本的详细日志生成。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2062" headers="d28060e1919 ">
                                       <p><code class="codeph">-emConfiguration</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2062 d28060e1921 ">
                                       <p>选项<code>DBEXPRESS</code> | <code>CENTRAL</code> | <code>BOTH</code> | <code>NONE</code> 。指定要通过升级实现的Oracle Enterprise Manager部署的类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2082" headers="d28060e1919 ">
                                       <p><code class="codeph">-emExpressPort</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2082 d28060e1921 ">
                                       <p>指定企业管理器Express端口。仅在将<code class="codeph">-emConfiguration</code>选项与<code class="codeph">dbua -silent</code>一起使用时才设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2096" headers="d28060e1919 ">
                                       <p><code class="codeph">-emPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2096 d28060e1921 ">
                                       <p>指定企业管理器管理员用户密码。仅在将<code class="codeph">-emConfiguration</code>选项与<code class="codeph">dbua -silent</code>一起使用时才设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2110" headers="d28060e1919 ">
                                       <p><code class="codeph">-emUser</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2110 d28060e1921 ">
                                       <p>指定具有管理员权限的企业管理器用户，以添加或修改目标。仅在将<code class="codeph">-emConfiguration</code>选项与<code class="codeph">dbua -silent</code>一起使用时才设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2124" headers="d28060e1919 ">
                                       <p><code class="codeph">-enablePasswordProfile</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2124 d28060e1921 ">
                                       <p>如果为<code class="codeph">true</code> ，则为管理用户启用密码配置文件，作为数据库升级的一部分。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2135" headers="d28060e1919 ">
                                       <p><code class="codeph">-executePreReqs -sid <span class="variable" translate="no">name</span> | -dbName <span class="variable" translate="no">name</span></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2135 d28060e1921 ">
                                       <p>仅运行指定数据库的预升级检查。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2148" headers="d28060e1919 ">
                                       <p><code class="codeph">-救命</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2148 d28060e1921 ">
                                       <p>显示命令语法及其使用说明。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2156" headers="d28060e1919 ">
                                       <p><code class="codeph">-ignorePreReqs</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2156 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，DBUA将忽略升级前检查中的错误条件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2173" headers="d28060e1919 ">
                                       <p><code class="codeph">-ignoreScriptErrors</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2173 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则DBUA会在您运行自定义脚本时忽略<code class="codeph">ORA-</code>错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2193" headers="d28060e1919 ">
                                       <p><code class="codeph">-initParam</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2193 d28060e1921 ">
                                       <p>使用格式<code class="codeph"><span class="variable" translate="no">name</span> = <span class="variable" translate="no">value</span> , <span class="variable" translate="no">name</span> = <span class="variable" translate="no">value</span></code>指定逗号分隔的初始化参数值列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2213" headers="d28060e1919 ">
                                       <p><code class="codeph">-initParamsEscapeChar</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2213 d28060e1921 ">
                                       <p>当初始化参数具有多个值时，为逗号指定转义字符。如果未指定转义字符，则默认转义字符为反斜杠[ <code class="codeph">/</code> ]。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2225" headers="d28060e1919 ">
                                       <p><code class="codeph">-keepDeprecatedParams</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2225 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则DBUA会在数据库升级期间保留已弃用的参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2242" headers="d28060e1919 ">
                                       <p><code class="codeph">-听众</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2242 d28060e1921 ">
                                       <p>使用升级的数据库迁移和注册指定的现有早期版本侦听器。指定使用下列选项之一监听器：监听器名称，格式OA逗号分隔的列表<span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oraclehome</span> 。
                                       </p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>以逗号分隔的侦听器名称列表，格式如下：</p>
                                             <p><kbd class="userinput">-lisnrName1，LsnrName2，LsnrName3</kbd></p>
                                          </li>
                                          <li>
                                             <p>由Oracle家庭限定的以逗号分隔的侦听器名称列表，格式如下：</p>
                                             <p><code class="codeph">-listeners lsnrName1：Oracle_home_path，-listeners lsnrName2：Oracle_home_path</code></p>
                                          </li>
                                       </ul>
                                       <p>选择此选项时，DBUA按以下顺序搜索指定的侦听器：在Oracle Grid Infrastructure主目录（Grid home）中，在目标主目录中，然后在源主目录中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2271" headers="d28060e1919 ">
                                       <p><code class="codeph">-localListenerWithoutAlias</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2271 d28060e1921 ">
                                       <p>在不使用TNS别名的情况下设置LOCAL_LISTENER。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2279" headers="d28060e1919 ">
                                       <p><code class="codeph">-localRacSid</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2279 d28060e1921 ">
                                       <p>如果Oracle RAC数据库未在群集Oracle Cluster Registry（OCR）中注册，则此选项指定Oracle Real Application Clusters（Oracle RAC）数据库的本地系统标识符（SID）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2287" headers="d28060e1919 ">
                                       <p><code class="codeph">-logDir</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2287 d28060e1921 ">
                                       <p>指定自定义日志目录的路径。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2295" headers="d28060e1919 ">
                                       <p><code class="codeph">-newGlobalDbName</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2295 d28060e1921 ">
                                       <p>指定新的全局数据库名称。您只能将此选项用于Oracle Express Edition升级。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2303" headers="d28060e1919 ">
                                       <p><code class="codeph">-newSid</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2303 d28060e1921 ">
                                       <p>指定新的系统标识符（SID）。您只能将此选项用于Oracle Express Edition升级。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2311" headers="d28060e1919 ">
                                       <p><code class="codeph">-omsHost</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2311 d28060e1921 ">
                                       <p>指定Oracle Enterprise Manager管理服务器主机名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2319" headers="d28060e1919 ">
                                       <p><code class="codeph">-omsPort</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2319 d28060e1921 ">
                                       <p>指定Oracle Enterprise Manager管理服务器端口号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2327" headers="d28060e1919 ">
                                       <p><code class="codeph">-oracleHome -sid <span class="variable" translate="no">id</span> | dbName <span class="variable" translate="no">name</span></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2327 d28060e1921 ">
                                       <p>指定数据库的Oracle主路径。通过使用<code class="codeph">–sid</code>标志，提供系统标识符或使用<code class="codeph">–dbName</code>标志并指定数据库名称来标识数据库。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2346" headers="d28060e1919 ">
                                       <p><code class="codeph">-oracleHomeUserPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2346 d28060e1921 ">指定要升级的Oracle数据库的Oracle安装所有者的密码。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2354" headers="d28060e1919 ">
                                       <p><code class="codeph">-pdbs</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2354 d28060e1921 ">指定升级哪些PDB。使用以下选项指定您的选择：<ul style="list-style-type:disc">
                                          <li>
                                             <p>您希望DBUA使用CDB升级的可插拔数据库（PDB）名称的逗号分隔列表。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ，表示您希望所有使用CDB升级的PDB。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NONE</code> ，表示您只想升级CDB。没有PDB升级。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2375" headers="d28060e1919 ">
                                       <p><code class="codeph">-pdbsWithPriority</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2375 d28060e1921 ">
                                       <p>指定您希望DBUA升级PDB的优先级顺序。使用逗号分隔的可插入数据库（PDB）名称列表以下列格式指定优先级顺序，其中1是最高优先级： <code class="codeph">pdb-A:1,pdb-B:2,pdb-C:3</code> 。在此示例中，首先升级PDB-A，最后升级pdb-C。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2386" headers="d28060e1919 ">
                                       <p><code class="codeph">-performFixUp</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2386 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则启用DBUA以在静默升级模式期间执行修正。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2403" headers="d28060e1919 ">
                                       <p><code class="codeph">-postUpgradeScripts</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2403 d28060e1921 ">
                                       <p>指定在DBUA完成升级后要运行的SQL脚本。提供以逗号分隔的脚本列表及其完整的文件路径。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2411" headers="d28060e1919 ">
                                       <p><code class="codeph">preUpgradeScripts</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2411 d28060e1921 ">
                                       <p>指定在DBUA完成升级之前要运行的SQL脚本。提供以逗号分隔的SQL脚本列表及其完整的文件路径。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2419" headers="d28060e1919 ">
                                       <p><code class="codeph">-recompile_invalid_objects</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2419 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则DBUA会在升级过程中重新编译无效对象。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2436" headers="d28060e1919 ">
                                       <p><code class="codeph">-sid</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2436 d28060e1921 ">
                                       <p>指定要升级的数据库的系统标识符（SID）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2444" headers="d28060e1919 ">
                                       <p><code class="codeph">-sysDBAPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2444 d28060e1921 ">
                                       <p>指定您指定为具有<code>sysDBAUserName</code>的SYSDBA权限用户的用户名的密码。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2455" headers="d28060e1919 ">
                                       <p><code class="codeph">-sysDBAUserName</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2455 d28060e1921 ">
                                       <p>指定为数据库授予SYSDBA系统特权的用户名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2463" headers="d28060e1919 ">
                                       <p><code class="codeph">-upgrade_parallelism</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2463 d28060e1921 ">
                                       <p>指定您希望DBUA用于并行升级的CPU数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2471" headers="d28060e1919 ">
                                       <p><code class="codeph">-upgradeTimezone</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2471 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，DBUA会升级Oracle数据库时区文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2489" headers="d28060e1919 ">
                                       <p><code class="codeph">-useExistingBackup</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2489 d28060e1921 ">
                                       <p>如果为<code class="codeph">true</code> ，则指定DBUA使用现有RMAN备份来还原数据库。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2500" headers="d28060e1919 ">
                                       <p><code class="codeph">-useGRP</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2500 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则指定DBUA使用命名保证还原点来还原数据库。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-69FC119A-76C8-4E71-8C3D-1DB5D74B2EFA">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-584967C8-D4BA-4962-A6A6-6B9C0170F8BE">
                        <p class="titleinexample">示例4-3使用DBUA选择要升级的数据库</p>
                        <p>以下命令选择要升级的数据库<code class="codeph">orcl</code> ：</p><pre class="pre codeblock"><code>dbua -sid orcl</code></pre><div class="infoboxnote" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-A1DF2064-D340-44B5-BFF1-A166FBFA7EFA">
                           <p class="notep1">注意：</p>
                           <p>您可以使用DBUA命令设置密码。如果默认的Oracle数据库安全设置已就绪，则密码必须至少为八个字符，并且不允许使用<code class="codeph">welcome</code>和<code class="codeph">oracle</code>等密码。
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-BEBB59CB-2D39-4531-A9C1-633853D12A73">
                        <p class="titleinexample">示例4-4使用非交互式（“静默”）选项选择要使用DBUA升级的数据库</p>
                        <p>以下命令使用noninteractive（“silent”）选项选择要升级的数据库<code class="codeph">orcl</code> ：</p><pre class="pre codeblock"><code>dbua -silent -sid orcl</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-7E94ACA8-1A3E-48FF-AAC9-97033A3BE3F9">
                        <p class="titleinexample">示例4-5在非交互（“静默”）模式下运行DBUA的用例</p>
                        <p>下面的示例说明了如何使用DBUA和非交互（“静默”）选项来执行各种升级方案。</p><pre class="pre codeblock"><code>dbua -silent -sid sidb112 -backupLocation / u01 / sidb1123 / backup -sysDBAUserName sys -sysDBAPassword r3aDy2upg -oracleHome /u01/app/product/11.2.0/dbhome_1 -upgradeTimezone true dbua -silent -sid sidb1123 -backupLocation / u01 / sidb1123 / backup -sysDBAUserName sys -sysDBAPassword r3aDy2upg -oracleHome /u01/app/product/11.2.0/dbhome_1 -upgrade_parallelism 1 -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -sid db1124 -backupLocation / u01 / sidb1123 / backup -sysDBAUserName sys -sysDBAPassword r3aDy2upg -performFixUp true -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName rdbcdb -oracleHome /u01/app/product/11.2.0/dbhome_1 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -backupLocation / u01 / sidb1123 / backup -recompile_invalid_objects true -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName amdb -oracleHome /u01/app/product/11.2.0/dbhome_1 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -recompile_invalid_objects true -useGRP GRP_20170620bfupgrade -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName rdb121 -oracleHome /u01/app/product/12.1.0/dbhome_2 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -backupLocation / u01 / sidb1123 / backup -recompile_invalid_objects true -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName ronedb -oracleHome /u01/app/product/12.1.0/dbhome_2 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -changeUserTablespacesReadOnly true -recompile_invalid_objects true -upgradeTimezone true -createGRP true</code></pre><div class="infoboxnote" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-B514E5B1-A35D-43C6-B0F5-779407279E80">
                           <p class="notep1">注意：</p>
                           <p>有关安全性最佳实践的信息，请参阅<cite>Oracle数据库安全性指南</cite> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" title="您可以使用-silent命令行选项DBUA使用DBUA执行非交互（“静默”）升级。">在无提示模式下使用DBUA升级Oracle数据库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01878.SH-sample-schema-table-descriptions.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SH示例模式表说明</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Sample Schemas"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Sample Schemas"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-sample-schemas.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T19:24:57-08:00"></meta>
      <meta name="dcterms.title" content="Database Sample Schemas"></meta>
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96482-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SH-sample-schema-scripts-and-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="COMSC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SH-sample-schema-scripts-and-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库示例模式</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sample-schema-scripts-and-object-descriptions.html" property="item" typeof="WebPage"><span property="name">示例模式脚本和对象描述</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SH示例模式表说明</li>
            </ol>
            <a id="GUID-537FD098-CB66-4436-A36F-2500698E5B58" name="GUID-537FD098-CB66-4436-A36F-2500698E5B58"></a><a id="COMSC00033"></a>
            
            <h2 id="COMSC-GUID-537FD098-CB66-4436-A36F-2500698E5B58" class="sect2"><span class="enumeration_section">4.11</span> SH示例模式表说明</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>考虑<code class="codeph">SH</code>示例模式的每个表的列。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-8DAEEFE9-51FD-4CA6-8E84-F099CE43AFEB">表SH.CHANNELS</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-450FA78C-0399-41E0-8AAD-AAD9E6115E0A">表SH.COSTS</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-43E79743-FC96-40F5-858C-3F6BB65ADAD0">表SH.COUNTRIES</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-92E421F1-C6F0-4474-A4BE-040A9D233279">表SH.CUSTOMERS</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-6DF1685B-444B-4DCF-9255-62D0518958C4">表SH.PRODUCTS</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-9A2BAA1F-E27B-4D4F-85CD-00BC42BB950B">表SH.PROMOTIONS</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-6ABFB1BA-7676-44DD-AAEB-A42032EB3063">表SH.SALES</a></p>
                     </li>
                     <li>
                        <p><a href="SH-sample-schema-table-descriptions.html#GUID-06826F1B-0565-4CD6-AC47-999A60512BEC">表SH.TIMES</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="COMSC144"></a><div class="props_rev_3"><a id="GUID-8DAEEFE9-51FD-4CA6-8E84-F099CE43AFEB" name="GUID-8DAEEFE9-51FD-4CA6-8E84-F099CE43AFEB"></a><h3 id="COMSC-GUID-8DAEEFE9-51FD-4CA6-8E84-F099CE43AFEB" class="sect3"><span class="enumeration_section">4.11.1</span>表SH.CHANNELS</h3>
               <div>
                  <div class="tblformal" id="GUID-8DAEEFE9-51FD-4CA6-8E84-F099CE43AFEB__GUID-5AA16F4C-2F37-4393-AEFA-7960ED98A7E8">
                     <p class="titleintable">表4-28 SH.CHANNELS表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.CHANNELS表描述" width="100%" border="1" summary="SH.CHANNELS table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e154">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e157">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e160">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e165" headers="d20373e154 ">
                                 <p><code class="codeph">CHANNEL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e165 d20373e157 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e165 d20373e160 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e178" headers="d20373e154 ">
                                 <p><code class="codeph">CHANNEL_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e178 d20373e157 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e178 d20373e160 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e191" headers="d20373e154 ">
                                 <p><code class="codeph">CHANNEL_CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e191 d20373e157 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e191 d20373e160 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e204" headers="d20373e154 ">
                                 <p><code class="codeph">CHANNEL_CLASS_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e204 d20373e157 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e204 d20373e160 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e217" headers="d20373e154 ">
                                 <p><code class="codeph">CHANNEL_TOTAL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e217 d20373e157 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e217 d20373e160 ">
                                 <p><code class="codeph">VARCHAR2（13）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e230" headers="d20373e154 ">
                                 <p><code class="codeph">CHANNEL_TOTAL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e230 d20373e157 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e230 d20373e160 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC145"></a><div class="props_rev_3"><a id="GUID-450FA78C-0399-41E0-8AAD-AAD9E6115E0A" name="GUID-450FA78C-0399-41E0-8AAD-AAD9E6115E0A"></a><h3 id="COMSC-GUID-450FA78C-0399-41E0-8AAD-AAD9E6115E0A" class="sect3"><span class="enumeration_section">4.11.2</span>表SH.COSTS</h3>
               <div>
                  <div class="tblformal" id="GUID-450FA78C-0399-41E0-8AAD-AAD9E6115E0A__GUID-B5BA3928-DBC1-41F0-BE07-EA07FDFD4499">
                     <p class="titleintable">表4-29 SH.COSTS表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.COSTS表描述" width="100%" border="1" summary="SH.COSTS table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e310">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e313">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e316">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e321" headers="d20373e310 ">
                                 <p><code class="codeph">PROD_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e321 d20373e313 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e321 d20373e316 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e334" headers="d20373e310 ">
                                 <p><code class="codeph">TIME_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e334 d20373e313 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e334 d20373e316 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e347" headers="d20373e310 ">
                                 <p><code class="codeph">PROMO_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e347 d20373e313 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e347 d20373e316 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e360" headers="d20373e310 ">
                                 <p><code class="codeph">CHANNEL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e360 d20373e313 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e360 d20373e316 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e373" headers="d20373e310 ">
                                 <p><code class="codeph">单位成本</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e373 d20373e313 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e373 d20373e316 ">
                                 <p><code class="codeph">NUMBER（10,2）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e386" headers="d20373e310 ">
                                 <p><code class="codeph">单价</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e386 d20373e313 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e386 d20373e316 ">
                                 <p><code class="codeph">NUMBER（10,2）</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC146"></a><div class="props_rev_3"><a id="GUID-43E79743-FC96-40F5-858C-3F6BB65ADAD0" name="GUID-43E79743-FC96-40F5-858C-3F6BB65ADAD0"></a><h3 id="COMSC-GUID-43E79743-FC96-40F5-858C-3F6BB65ADAD0" class="sect3"><span class="enumeration_section">4.11.3</span>表SH.COUNTRIES</h3>
               <div>
                  <div class="tblformal" id="GUID-43E79743-FC96-40F5-858C-3F6BB65ADAD0__GUID-87D2F95C-D24D-468E-9280-464B3A219D27">
                     <p class="titleintable">表4-30 SH.COUNTRIES表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.COUNTRIES表描述" width="100%" border="1" summary="SH.COUNTRIES table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e475">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e478">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e481">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e486" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e486 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e486 d20373e481 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e499" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_ISO_CODE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e499 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e499 d20373e481 ">
                                 <p><code class="codeph">CHAR（2）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e512" headers="d20373e475 ">
                                 <p><code class="codeph">国家的名字</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e512 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e512 d20373e481 ">
                                 <p><code class="codeph">VARCHAR2（40）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e525" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_SUBREGION</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e525 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e525 d20373e481 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e538" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_SUBREGION_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e538 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e538 d20373e481 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e551" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_REGION</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e551 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e551 d20373e481 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e564" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_REGION_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e564 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e564 d20373e481 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e577" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_TOTAL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e577 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e577 d20373e481 ">
                                 <p><code class="codeph">VARCHAR2（11）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e590" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_TOTAL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e590 d20373e478 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e590 d20373e481 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e603" headers="d20373e475 ">
                                 <p><code class="codeph">COUNTRY_NAME_HIST</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e603 d20373e478 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e603 d20373e481 ">
                                 <p><code class="codeph">VARCHAR2（40）</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC147"></a><div class="props_rev_3"><a id="GUID-92E421F1-C6F0-4474-A4BE-040A9D233279" name="GUID-92E421F1-C6F0-4474-A4BE-040A9D233279"></a><h3 id="COMSC-GUID-92E421F1-C6F0-4474-A4BE-040A9D233279" class="sect3"><span class="enumeration_section">4.11.4</span>表SH.CUSTOMERS</h3>
               <div>
                  <div class="tblformal" id="GUID-92E421F1-C6F0-4474-A4BE-040A9D233279__GUID-CFE5597E-C3D7-4F8C-A599-9D25CDEE838C">
                     <p class="titleintable">表4-31 SH.CUSTOMERS表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.CUSTOMERS表描述" width="100%" border="1" summary="SH.CUSTOMERS table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e719">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e722">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e725">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e730" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e730 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e730 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e743" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_FIRST_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e743 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e743 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e756" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_LAST_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e756 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e756 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（40）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e769" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_GENDER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e769 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e769 d20373e725 ">
                                 <p><code class="codeph">CHAR（1）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e782" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_YEAR_OF_BIRTH</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e782 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e782 d20373e725 ">
                                 <p><code class="codeph">号（4）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e795" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_MARITAL_STATUS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e795 d20373e722 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e795 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e808" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_STREET_ADDRESS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e808 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e808 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（40）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e821" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_POSTAL_CODE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e821 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e821 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（10）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e834" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_CITY</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e834 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e834 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e847" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_CITY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e847 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e847 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e860" headers="d20373e719 ">
                                 <p><code class="codeph">cust_state_province两个</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e860 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e860 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（40）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e874" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_STATE_PROVINCE_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e874 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e874 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e887" headers="d20373e719 ">
                                 <p><code class="codeph">COUNTRY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e887 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e887 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e900" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_MAIN_PHONE_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e900 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e900 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（25）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e913" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_INCOME_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e913 d20373e722 ">
                                 <p> </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e913 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e925" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_CREDIT_LIMIT</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e925 d20373e722 ">
                                 <p> </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e925 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e937" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_EMAIL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e937 d20373e722 ">
                                 <p> </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e937 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e949" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_TOTAL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e949 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e949 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（14）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e962" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_TOTAL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e962 d20373e722 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e962 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e975" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_SRC_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e975 d20373e722 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e975 d20373e725 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e988" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_EFF_FROM</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e988 d20373e722 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e988 d20373e725 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1001" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_EFF_TO</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1001 d20373e722 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1001 d20373e725 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1015" headers="d20373e719 ">
                                 <p><code class="codeph">CUST_VALID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1015 d20373e722 ">
                                 <p> </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1015 d20373e725 ">
                                 <p><code class="codeph">VARCHAR2（1）</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC148"></a><div class="props_rev_3"><a id="GUID-6DF1685B-444B-4DCF-9255-62D0518958C4" name="GUID-6DF1685B-444B-4DCF-9255-62D0518958C4"></a><h3 id="COMSC-GUID-6DF1685B-444B-4DCF-9255-62D0518958C4" class="sect3"><span class="enumeration_section">4.11.5</span>表SH.PRODUCTS</h3>
               <div>
                  <div class="tblformal" id="GUID-6DF1685B-444B-4DCF-9255-62D0518958C4__GUID-C47CECEA-FCB2-4662-9379-D5EED4AD2904">
                     <p class="titleintable">表4-32 SH.PRODUCTS表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.PRODUCTS表描述" width="100%" border="1" summary="SH.PRODUCTS table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e1128">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e1131">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e1134">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1139" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1139 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1139 d20373e1134 ">
                                 <p><code class="codeph">NUMBER（6）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1152" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1152 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1152 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（50）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1165" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1165 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1165 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（4000）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1178" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_SUBCATEGORY</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1178 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1178 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（50）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1191" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_SUBCATEGORY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1191 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1191 d20373e1134 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1204" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_SUBCATEGORY_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1204 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1204 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（2000）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1217" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_CATEGORY</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1217 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1217 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（50）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1230" headers="d20373e1128 ">
                                 <p><code class="codeph">PRD_CATEGORY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1230 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1230 d20373e1134 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1243" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_CATEGORY_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1243 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1243 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（2000）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1256" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_WEIGHT_CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1256 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1256 d20373e1134 ">
                                 <p><code class="codeph">NUMBER（3）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1269" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_UNIT_OF_MEASURE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1269 d20373e1131 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1269 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1283" headers="d20373e1128 ">
                                 <p><code class="codeph">PRD_PACK_SIZE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1283 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1283 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1296" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_SUPPLIER_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1296 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1296 d20373e1134 ">
                                 <p><code class="codeph">NUMBER（6）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1309" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_STATUS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1309 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1309 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（20）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1322" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_LIST_PRICE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1322 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1322 d20373e1134 ">
                                 <p><code class="codeph">NUMBER（8,2）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1335" headers="d20373e1128 ">
                                 <p><code class="codeph">PRD_MIN_PRICE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1335 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1335 d20373e1134 ">
                                 <p><code class="codeph">NUMBER（8,2）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1348" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_TOTAL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1348 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1348 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（13）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1361" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_TOTAL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1361 d20373e1131 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1361 d20373e1134 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1374" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_SRC_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1374 d20373e1131 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1374 d20373e1134 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1387" headers="d20373e1128 ">
                                 <p><code class="codeph">PRD_EFF_FROM</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1387 d20373e1131 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1387 d20373e1134 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1400" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_EFF_TO</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1400 d20373e1131 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1400 d20373e1134 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1413" headers="d20373e1128 ">
                                 <p><code class="codeph">PROD_VALID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1413 d20373e1131 ">
                                 <p><code class="codeph"> </code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1413 d20373e1134 ">
                                 <p><code class="codeph">VARCHAR2（1）</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC149"></a><div class="props_rev_3"><a id="GUID-9A2BAA1F-E27B-4D4F-85CD-00BC42BB950B" name="GUID-9A2BAA1F-E27B-4D4F-85CD-00BC42BB950B"></a><h3 id="COMSC-GUID-9A2BAA1F-E27B-4D4F-85CD-00BC42BB950B" class="sect3"><span class="enumeration_section">4.11.6</span>表SH.PROMOTIONS</h3>
               <div>
                  <div class="tblformal" id="GUID-9A2BAA1F-E27B-4D4F-85CD-00BC42BB950B__GUID-6E4AAE3B-41DC-43C6-AF1D-7464F4D6389D">
                     <p class="titleintable">表4-33 SH.PROMOTIONS表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.PROMOTIONS表说明" width="100%" border="1" summary="SH.PROMOTIONS table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e1502">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e1505">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e1508">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1513" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1513 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1513 d20373e1508 ">
                                 <p><code class="codeph">NUMBER（6）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1526" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1526 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1526 d20373e1508 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1539" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_SUBCATEGORY</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1539 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1539 d20373e1508 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1552" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_SUBCATEGORY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1552 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1552 d20373e1508 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1565" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_CATEGORY</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1565 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1565 d20373e1508 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1578" headers="d20373e1502 ">
                                 <p><code class="codeph">PRMO_CATEGORY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1578 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1578 d20373e1508 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1591" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_COST</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1591 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1591 d20373e1508 ">
                                 <p><code class="codeph">NUMBER（10,2）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1604" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_BEGIN_DATE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1604 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1604 d20373e1508 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1617" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_END_DATE</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1617 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1617 d20373e1508 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1630" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_TOTAL</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1630 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1630 d20373e1508 ">
                                 <p><code class="codeph">VARCHAR2（15）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1643" headers="d20373e1502 ">
                                 <p><code class="codeph">PROMO_TOTAL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1643 d20373e1505 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1643 d20373e1508 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC150"></a><div class="props_rev_3"><a id="GUID-6ABFB1BA-7676-44DD-AAEB-A42032EB3063" name="GUID-6ABFB1BA-7676-44DD-AAEB-A42032EB3063"></a><h3 id="COMSC-GUID-6ABFB1BA-7676-44DD-AAEB-A42032EB3063" class="sect3"><span class="enumeration_section">4.11.7</span>表SH.SALES</h3>
               <div>
                  <div class="tblformal" id="GUID-6ABFB1BA-7676-44DD-AAEB-A42032EB3063__GUID-953EA06F-D221-445E-81E2-4758D2C08696">
                     <p class="titleintable">表4-34 SH.SALES表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.SALES表说明" width="100%" border="1" summary="SH.SALES table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e1725">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e1728">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e1731">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1736" headers="d20373e1725 ">
                                 <p><code class="codeph">PROD_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1736 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1736 d20373e1731 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1749" headers="d20373e1725 ">
                                 <p><code class="codeph">CUST_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1749 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1749 d20373e1731 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1762" headers="d20373e1725 ">
                                 <p><code class="codeph">TIME_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1762 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1762 d20373e1731 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1775" headers="d20373e1725 ">
                                 <p><code class="codeph">CHANNEL_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1775 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1775 d20373e1731 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1788" headers="d20373e1725 ">
                                 <p><code class="codeph">PROMO_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1788 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1788 d20373e1731 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1801" headers="d20373e1725 ">
                                 <p><code class="codeph">QUANTITY_SOLD</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1801 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1801 d20373e1731 ">
                                 <p><code class="codeph">NUMBER（10,2）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1814" headers="d20373e1725 ">
                                 <p><code class="codeph">AMOUNT_SOLD</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1814 d20373e1728 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1814 d20373e1731 ">
                                 <p><code class="codeph">NUMBER（10,2）</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="COMSC151"></a><div class="props_rev_3"><a id="GUID-06826F1B-0565-4CD6-AC47-999A60512BEC" name="GUID-06826F1B-0565-4CD6-AC47-999A60512BEC"></a><h3 id="COMSC-GUID-06826F1B-0565-4CD6-AC47-999A60512BEC" class="sect3"><span class="enumeration_section">4.11.8</span>表SH.TIMES</h3>
               <div>
                  <div class="tblformal" id="GUID-06826F1B-0565-4CD6-AC47-999A60512BEC__GUID-D96192D2-9D6B-4305-A2AA-80671BE590FF">
                     <p class="titleintable">表4-35 SH.TIMES表说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SH.TIMES表描述" width="100%" border="1" summary="SH.TIMES table description. This is a 3 column table. Column 1 is the table column name. Column 2 indicates whether it is a null value. Column 3 gives the data type and length." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d20373e1961">列名称</th>
                              <th align="left" valign="bottom" width="20%" id="d20373e1964">空值？</th>
                              <th align="left" valign="bottom" width="41%" id="d20373e1967">类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1972" headers="d20373e1961 ">
                                 <p><code class="codeph">TIME_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1972 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1972 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1985" headers="d20373e1961 ">
                                 <p><code class="codeph">DAY_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1985 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1985 d20373e1967 ">
                                 <p><code class="codeph">VARCHAR2（9）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e1998" headers="d20373e1961 ">
                                 <p><code class="codeph">DAY_NUMBER_IN_WEEK</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e1998 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e1998 d20373e1967 ">
                                 <p><code class="codeph">1号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2011" headers="d20373e1961 ">
                                 <p><code class="codeph">DAY_NUMBER_IN_MONTH</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2011 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2011 d20373e1967 ">
                                 <p><code class="codeph">2号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2024" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_WEEK_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2024 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2024 d20373e1967 ">
                                 <p><code class="codeph">2号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2037" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_WEEK_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2037 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2037 d20373e1967 ">
                                 <p><code class="codeph">2号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2050" headers="d20373e1961 ">
                                 <p><code class="codeph">WEEK_ENDING_DAY</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2050 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2050 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2063" headers="d20373e1961 ">
                                 <p><code class="codeph">WEEK_ENDING_DAY_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2063 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2063 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2076" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_MONTH_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2076 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2076 d20373e1967 ">
                                 <p><code class="codeph">2号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2089" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_MONTH_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2089 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2089 d20373e1967 ">
                                 <p><code class="codeph">2号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2102" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_MONTH_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2102 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2102 d20373e1967 ">
                                 <p><code class="codeph">VARCHAR2（8）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2116" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_MONTH_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2116 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2116 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2129" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_MONTH_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2129 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2129 d20373e1967 ">
                                 <p><code class="codeph">VARCHAR2（8）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2142" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_MONTH_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2142 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2142 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2155" headers="d20373e1961 ">
                                 <p><code class="codeph">DAYS_IN_CAL_MONTH</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2155 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2155 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2168" headers="d20373e1961 ">
                                 <p><code class="codeph">DAYS_IN_FIS_MONTH</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2168 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2168 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2181" headers="d20373e1961 ">
                                 <p><code class="codeph">END_OF_CAL_MONTH</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2181 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2181 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2194" headers="d20373e1961 ">
                                 <p><code class="codeph">END_OF_FIS_MONTH</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2194 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2194 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2207" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_MONTH_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2207 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2207 d20373e1967 ">
                                 <p><code class="codeph">VARCHAR2（9）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2220" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_MONTH_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2220 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2220 d20373e1967 ">
                                 <p><code class="codeph">VARCHAR2（9）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2233" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_QUARTER_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2233 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2233 d20373e1967 ">
                                 <p><code class="codeph">CHAR（7）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2246" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENBDAR_QUARTER_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2246 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2246 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2260" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_QUARTER_DESC</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2260 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2260 d20373e1967 ">
                                 <p><code class="codeph">CHAR（7）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2273" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_QUARTER_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2273 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2273 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2286" headers="d20373e1961 ">
                                 <p><code class="codeph">DAYS_IN_CAL_QUARTER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2286 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2286 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2299" headers="d20373e1961 ">
                                 <p><code class="codeph">DAYS_IN_FIS_QUARTER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2299 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2299 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2312" headers="d20373e1961 ">
                                 <p><code class="codeph">END_OF_CAL_QUARTER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2312 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2312 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2325" headers="d20373e1961 ">
                                 <p><code class="codeph">END_OF_FIS_QUARTER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2325 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2325 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2338" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_QUARTER_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2338 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2338 d20373e1967 ">
                                 <p><code class="codeph">1号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2351" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_QUARTER_NUMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2351 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2351 d20373e1967 ">
                                 <p><code class="codeph">1号）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2364" headers="d20373e1961 ">
                                 <p><code class="codeph">公历年</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2364 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2364 d20373e1967 ">
                                 <p><code class="codeph">号（4）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2377" headers="d20373e1961 ">
                                 <p><code class="codeph">CALENDAR_YEAR_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2377 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2377 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2390" headers="d20373e1961 ">
                                 <p><code class="codeph">财政年度</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2390 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2390 d20373e1967 ">
                                 <p><code class="codeph">号（4）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2404" headers="d20373e1961 ">
                                 <p><code class="codeph">FISCAL_YEAR_ID</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2404 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2404 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2417" headers="d20373e1961 ">
                                 <p><code class="codeph">DAYS_IN_CAL_YEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2417 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2417 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2430" headers="d20373e1961 ">
                                 <p><code class="codeph">DAYS_IN_FIS_YEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2430 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2430 d20373e1967 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2443" headers="d20373e1961 ">
                                 <p><code class="codeph">END_OF_CAL_YEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2443 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2443 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d20373e2456" headers="d20373e1961 ">
                                 <p><code class="codeph">END_OF_FIS_YEAR</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d20373e2456 d20373e1964 ">
                                 <p><code class="codeph">不是NULL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d20373e2456 d20373e1967 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html id="06341.RESTORE.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>恢复</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="RESET-DATABASE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="RESYNC-CATALOG.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="RESET-DATABASE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="RESYNC-CATALOG.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN命令：RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">恢复</li>
            </ol>
            <a id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B" name="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B"></a><a id="RCMRF90294"></a><a id="RCMRF90622"></a><a id="RCMRF90295"></a><a id="RCMRF90296"></a><a id="RCMRF90297"></a><a id="RCMRF90298"></a><a id="RCMRF90299"></a><a id="RCMRF90300"></a><a id="RCMRF90301"></a><a id="RCMRF90302"></a><a id="RCMRF90623"></a><a id="RCMRF90303"></a><a id="RCMRF90304"></a><a id="RCMRF90305"></a><a id="RCMRF90306"></a><a id="RCMRF90307"></a><a id="RCMRF90308"></a><a id="RCMRF90309"></a><a id="RCMRF90310"></a><a id="RCMRF90311"></a><a id="RCMRF90312"></a><a id="RCMRF90313"></a><a id="RCMRF90314"></a><a id="RCMRF90315"></a><a id="RCMRF90316"></a><a id="RCMRF90317"></a><a id="RCMRF90318"></a><a id="RCMRF90319"></a><a id="RCMRF90624"></a><a id="RCMRF90625"></a><a id="RCMRF90626"></a><a id="RCMRF90627"></a><a id="RCMRF90628"></a><a id="RCMRF90629"></a><a id="RCMRF149"></a>
            
            <h2 id="RCMRF-GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B" class="sect2"><span class="enumeration_section">3.8</span>恢复</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-38EB3B5B-F7F7-4C9D-8E8D-6F75B60D68B4">目的</p>
                  <p>使用<code class="codeph">RESTORE</code>命令还原，验证或预览RMAN备份。通常，在介质故障损坏当前数据文件，控制文件或归档重做日志时或在执行时间点恢复之前还原备份。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-443D7784-C602-4DB7-B0F8-6D8B23C14E46">先决条件</p>
                  <p>要将数据文件还原到其当前位置，必须使用要脱机还原的表空间或数据文件启动，装入或打开数据库。</p>
                  <p>如果在Data Guard环境中使用RMAN，则将RMAN连接到恢复目录。</p>
                  <p>如果要对生产数据库执行试验性还原，请在测试环境中还原数据库之前执行以下任一操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果测试数据库使用的物理快速恢复区域与生产数据库使用的恢复区域<span class="italic">不同</span> ，则将测试数据库实例中的<code class="codeph">DB_RECOVERY_FILE_DEST</code>设置为新位置。
                        </p>
                     </li>
                     <li>
                        <p>如果测试数据库使用的快速恢复区域与生产数据库使用的恢复区域在物理上<span class="italic">相同</span> ，则将测试数据库实例中的<code class="codeph">DB_UNIQUE_NAME</code>设置为与生产数据库不同的名称。
                        </p>
                     </li>
                  </ul>
                  <p>如果不执行上述任一操作，则RMAN会假定您要还原生产数据库并删除<a id="d82198e229" class="indexterm-anchor"></a>闪回日志来自快速恢复区域，因为它们被认为是不可用的。
                  </p>
                  <p>如果还原加密数据库或表空间，则必须先打开Oracle密钥库，然后再执行还原操作。</p>
                  <p></p>
                  <p>要使用预刷新备份还原目标CDB中的数据文件，必须打开root用户，并且必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到root用户。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-A8181FDC-09AE-4A86-9399-6E1D2AEB5FF6">使用说明</p>
                  <p><code class="codeph">RESTORE</code>命令可还原完整备份，0级增量备份或映像副本。您可以将文件还原到其默认位置或其他位置。
                  </p>
                  <p>默认情况下，RMAN会检查只读数据文件以确保它们存在，可读并具有正确的检查点。如果不满足任何条件，则RMAN将恢复文件。如果满足所有条件，则RMAN不会还原文件。</p>
                  <p></p>
                  <p>您不能使用单个<code class="codeph">RESTORE</code>命令来还原属于多个PDB备份的数据文件。
                  </p>
                  <p><span class="bold">备份选择</span></p>
                  <p>默认情况下， <code class="codeph">RESTORE</code>选择最新的备份集或文件副本，即需要最少介质恢复的文件副本或备份集。RMAN仅还原在<code class="codeph">RESTORE</code>命令分配的相同类型通道上创建的备份。例如，如果使用<code class="codeph">DISK</code>和<code class="codeph">sbt</code>通道备份数据文件，并且仅为<code class="codeph">RESTORE</code>命令分配了<code class="codeph">DISK</code>通道，则RMAN不会还原<code class="codeph">sbt</code>备份。如果您不手动分配频道，则RMAN会根据<code class="codeph">DEVICE TYPE</code>选项施加的任何限制来分配它可能需要的所有自动频道。
                  </p>
                  <p>在Oracle RAC配置中，RMAN会自动从可以读取磁带或本地文件系统上的文件的通道还原备份，控制文件副本和数据文件副本。例如，如果信道<code class="codeph">ch1</code>连接到<code class="codeph">inst1</code>可以读取它的磁带驱动器日志1000，但信道<code class="codeph">ch2</code>连接到<code class="codeph">inst2</code>不能读取从它的磁带驱动器相同的日志，然后<code class="codeph">ch2</code>不能参与恢复日志等<code class="codeph">ch1</code>恢复日志。当通道具有不同的<code class="codeph">PARMS</code>或<code class="codeph">CONNECT</code>设置时，将自动启用自动<code class="codeph">PARMS</code> 。
                  </p>
                  <p>如果数据文件名是符号链接，则控制文件存储链接文件的文件名，但RMAN对链接文件指向的数据文件执行I / O.如果链接文件丢失并且您在不重新创建符号链接的情况下还原数据文件，则RMAN会将数据文件还原到链接文件的位置，而不是链接文件指向的位置。</p>
                  <div class="infoboxnotealso" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-7648D567-3EEA-4A1B-B0D3-45460A104162">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../bradv/rman-data-repair-concepts.html#BRADV30001" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a> ，了解有关还原故障转移的详细信息</p>
                  </div>
                  <p><span class="bold">恢复CDB和PDB的操作</span><a id="d82198e328" class="indexterm-anchor"></a><a id="d82198e332" class="indexterm-anchor"></a><a id="d82198e336" class="indexterm-anchor"></a><a id="d82198e340" class="indexterm-anchor"></a></p>
                  <p><code class="codeph">RESTORE</code>命令可用于还原整个多租户容器数据库（CDB），根，一个或多个可插拔数据库（PDB）以及PDB中的表空间。本节中有关恢复数据的信息也适用于恢复CDB和PDB。
                  </p>
                  <p>恢复CDB和PDB的过程类似于非CDB的过程。唯一的区别在于连接数据库和使用的命令。要还原整个CDB，根或多个PDB，请连接到根。要还原特定PDB，请连接到该PDB。在还原PDB时，请使用<code class="codeph">RESTORE PLUGGABLE DATABASE</code> 。要还原CDB，请使用<code class="codeph">RESTORE DATABASE</code>并还原根，请使用<code class="codeph">RESTORE DATABASE ROOT</code> 。</p>
                  <div class="infoboxnotealso" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-EFA9690C-7997-40F0-83A5-E68819C273EB">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></p>
                        </li>
                        <li>
                           <p>有关如何还原CDB和PDB的详细信息，请参见<a href="../bradv/rman-complete-database-recovery.html#BRADV-GUID-D908719C-9D46-4084-850C-0F81C25094EB" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <p><span class="bold">稀疏数据库的还原操作</span></p>
                  <p>RMAN还允许您在<code class="codeph">COMPATIBLE</code>初始化参数设置为12.2或更高的情况下对多租户和非CDB稀疏数据库执行还原。RMAN允许您通过识别所选稀疏备份的最相关备份集或映像副本来还原数据文件，表空间，PDB或CDB。要还原稀疏备份，请运行<code class="codeph">RESTORE FROM SPARSE</code>命令。
                  </p>
                  <p></p>
                  <p>对于非临时稀疏文件，如果稀疏数据文件最初位于稀疏磁盘组上，但<code class="codeph">DB_CREATE_FILE_DEST</code>指定的备用位置是非稀疏磁盘组，则RMAN会在其原始磁盘组（而不是磁盘组）中创建数据文件由<code class="codeph">DB_CREATE_FILE_DEST</code>指定）</p>
                  <p><span class="bold">使用加密备份集还原操作</span></p>
                  <p><a id="d82198e400" class="indexterm-anchor"></a>如<span class="q">“ <a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHIGD">备份集加密</a> ”中所述</span> ，RMAN在还原操作期间如何处理加密备份集取决于创建备份的加密模式。您可以使用<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>和<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code>来管理数据库的RMAN备份加密设置。请注意以下还原注意事项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d82198e422" class="indexterm-anchor"></a>对于透明模式加密备份，必须在Oracle软件密钥库中提供所需的密码。创建备份时使用的相同密钥库必须在打开并在还原时可用。如果在创建备份时使用了基于密码的密钥库，则必须使用<code class="codeph">SET DECRYPTION WALLET OPEN IDENTIFIED BY</code>来提供用于打开密钥库的密码。
                        </p>
                     </li>
                     <li>
                        <p><a id="d82198e430" class="indexterm-anchor"></a>对于密码模式加密备份，必须使用<code class="codeph">SET DECRYPTION</code>提供所需的密码。</p>
                     </li>
                     <li>
                        <p>对于双模式加密备份，必须在Oracle软件密钥库中提供所需的密码，或者使用<code class="codeph">SET DECRYPTION</code>提供所需的密码。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-6C245F3A-6EDA-4339-994F-5DD3315343FA">
                     <p class="notep1">注意：</p>
                     <p>基于密钥库的加密比基于密码的加密更安全，因为不涉及密码。仅在绝对必要时才使用基于密码的加密，因为备份必须是可传输的。</p>
                  </div>
                  <p><span class="bold">还原故障转移</span></p>
                  <p>如果无法访问备份片，映像副本或代理副本，或者块已损坏，则RMAN会执行<a id="d82198e453" class="indexterm-anchor"></a><a id="d82198e455" class="indexterm-anchor"></a><a id="d82198e459" class="indexterm-anchor"></a><a id="d82198e463" class="indexterm-anchor"></a><a id="d82198e467" class="indexterm-anchor"></a>恢复故障转移。<code class="codeph">RESTORE</code>命令自动在同一设备和其他设备上查找备份或映像副本的另一个可用副本。如果没有可用的副本，则RMAN将搜索以前的备份。RMAN会不断搜索以前可用的备份，直到它耗尽所有可能性。如果需要，RMAN会自动使用以前数据库版本中符合条件的备份。
                  </p>
                  <p>如果要还原没有可用备份的数据文件，则RMAN会创建一个空数据文件，并将检查点更改为创建SCN。在恢复期间，将恢复所有存档的重做日志文件回到数据文件的创建，并重新应用数据文件历史记录期间的所有更改以重新创建其内容。</p>
                  <div class="infoboxnotealso" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-897548D0-B773-41A9-BDA6-3BE44939323E">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDIHIGD">备份集的加密</a> ”</span>以及“ <a href="../bradv/backing-up-database-advanced.html#BRADV72450" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a> <span class="q">”中</span>的扩展讨论</p>
                  </div>
                  <p><span class="bold">已还原数据文件的位置</span></p>
                  <p><a id="d82198e491" class="indexterm-anchor"></a>如果将数据文件还原到默认位置，则RMAN将使用相同的文件名覆盖文件。默认情况下，如果数据文件位于正确的位置且其标头包含预期数据，则RMAN不会还原该数据文件。RMAN不会扫描数据文件正文以查找损坏的块。
                  </p>
                  <p>如果RMAN检测到无法使用默认文件名（例如，该文件可能是Oracle管理的文件，或者是<a id="d82198e498" class="indexterm-anchor"></a>自动存储管理磁盘组），然后RMAN尝试在同一位置或磁盘组中创建新文件。
                  </p>
                  <p>RMAN将数据文件还原到当前存储在恢复目录中的位置。此默认行为消除了将数据文件还原到自原始备份以来可能已过时的位置的问题。这也意味着，如果您已从原始备份位置更改了数据文件的位置，则该RMAN会将文件还原到最新或更改的位置。</p>
                  <p>要将文件还原到非默认位置，请使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>命令重命名还原的文件，然后使用<code class="codeph"><a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C">SWITCH</a></code>命令使还原的文件保持最新（如<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEAAH">示例3-25中所示</a> ）。如果不发出<code class="codeph">SWITCH</code>命令，则RMAN会将还原的文件视为有效副本，以便在将来的还原操作中使用。<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDCJADE" title="解释SET NEWNAME，SWITCH和RESTORE之间的交互">表3-8</a>介绍了<code class="codeph">RESTORE</code> ， <code class="codeph">SET NEWNAME</code>和<code class="codeph">SWITCH</code>命令的行为。
                  </p>
                  <div class="tblformal" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDCJADE">
                     <p class="titleintable">表3-8设置NEWNAME，SWITCH和RESTORE</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="设置NEWNAME，SWITCH和RESTORE" width="100%" border="1" summary="Explains the interaction between SET NEWNAME, SWITCH, and RESTORE" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="17%" id="d82198e551">SET NEWNAME运行</th>
                              <th align="left" valign="bottom" width="17%" id="d82198e554">SWITCH Run</th>
                              <th align="left" valign="bottom" width="67%" id="d82198e557">恢复行为</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d82198e562" headers="d82198e551 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e562 d82198e554 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d82198e562 d82198e557 ">
                                 <p>RMAN将文件还原到存储在恢复目录中的最新位置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d82198e572" headers="d82198e551 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e572 d82198e554 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d82198e572 d82198e557 ">
                                 <p>RMAN将文件还原为<code class="codeph">SET</code> <code class="codeph">NEWNAME</code>指定的路径名。 RMAN使用还原文件的名称替换控制文件中的当前数据文件名。RMAN使用旧名称记录数据文件作为数据文件副本。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d82198e588" headers="d82198e551 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e588 d82198e554 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d82198e588 d82198e557 ">
                                 <p>RMAN将文件还原为<code class="codeph">SET</code> <code class="codeph">NEWNAME</code>指定的路径名。 RMAN不会更新控制文件中的当前数据文件名。还原的文件在RMAN存储库中列为数据文件副本。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>由于无法备份临时文件，并且因为没有为它们生成重做，因此RMAN永远不会恢复或恢复临时文件。RMAN会跟踪临时文件的名称，但只能在需要时自动重新创建它们。</p>
                  <p><span class="bold">还原控制文件时的RMAN行为</span></p>
                  <p>恢复控制文件时RMAN的行为取决于各种因素，如<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9所示</a> 。<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD" title="描述使用各种选项从自动备份恢复">表3-10</a>总结了还原自动备份所需的命令和选项。
                  </p>
                  <div class="tblformalwide" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD">
                     <p class="titleintable">表3-9 RESTORE CONTROLFILE场景</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="恢复控制文件场景" width="100%" border="1" summary="Describes restoration of control files under various scenarios" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="12%" id="d82198e634">RMAN连接</th>
                              <th align="left" valign="bottom" width="12%" id="d82198e637">RESTORE CONTROLFILE;</th>
                              <th align="left" valign="bottom" width="25%" id="d82198e640">从AUTOBACKUP恢复CONTROLFILE;</th>
                              <th align="left" valign="bottom" width="25%" id="d82198e643">恢复控制文件...TO'文件名';</th>
                              <th align="left" valign="bottom" width="25%" id="d82198e649">恢复控制文件...来自'media_handle'或TAG'user_tag';</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d82198e660" headers="d82198e634 ">
                                 <p>没有目录，目标数据库在<code class="codeph">NOMOUNT</code>状态下启动</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d82198e660 d82198e637 ">
                                 <p>错误。必须指定<code class="codeph">FROM AUTOBACKUP</code> 。</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e660 d82198e640 ">
                                 <p>恢复到<code class="codeph">CONTROL_FILES</code>位置。有关所需的命令和选项，请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD" title="描述使用各种选项从自动备份恢复">表3-10</a> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e660 d82198e643 ">
                                 <p>必须指定<code class="codeph">FROM AUTOBACKUP</code> 。仅恢复到<span class="italic"><code class="codeph">filename</code></span> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e660 d82198e649 ">
                                 <p>首先运行<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code> 。从指定文件恢复（无法从<code class="codeph">TAG</code>恢复）。如果<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span>不使用”，恢复到全部<code class="codeph">CONTROL_FILES</code>位置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d82198e719" headers="d82198e634 ">
                                 <p>没有目录，目标数据库已挂载或打开</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d82198e719 d82198e637 ">
                                 <p>错误。必须使用<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span> ”，其中<span class="italic"><code class="codeph">filename</code></span>是不是在<code class="codeph">CONTROL_FILES</code>列表。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e719 d82198e640 ">
                                 <p>错误。必须使用<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span> ”，其中<span class="italic"><code class="codeph">filename</code></span>是不是在<code class="codeph">CONTROL_FILES</code>列表。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e719 d82198e643 ">
                                 <p>仅恢复为<span class="italic"><code class="codeph">filename</code></span> ，其中<span class="italic"><code class="codeph">filename</code></span>不在<code class="codeph">CONTROL_FILES</code>列表中。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e719 d82198e649 ">
                                 <p>RMAN发出错误<a id="d82198e773" class="indexterm-anchor"></a><a id="d82198e775" class="indexterm-anchor"></a> <code class="codeph">RMAN-06496</code> 。使用<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span> ”代替。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d82198e790" headers="d82198e634 ">
                                 <p>目录，目标数据库在<code class="codeph">NOMOUNT</code>状态下启动</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d82198e790 d82198e637 ">
                                 <p>恢复到<code class="codeph">CONTROL_FILES</code>位置。仅当<code class="codeph">DB_NAME</code>在目录中不唯一时才运行<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e790 d82198e640 ">
                                 <p>仅用于恢复目录以进行测试。</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e790 d82198e643 ">
                                 <p>仅恢复为<span class="italic"><code class="codeph">filename</code></span> ，其中<span class="italic"><code class="codeph">filename</code></span>不在<code class="codeph">CONTROL_FILES</code>列表中。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e790 d82198e649 ">
                                 <p>从指定文件恢复。如果<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span>不使用”，恢复到全部<code class="codeph">CONTROL_FILES</code>位置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="12%" id="d82198e844" headers="d82198e634 ">
                                 <p>目录，目标数据库已安装或打开</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d82198e844 d82198e637 ">
                                 <p>错误。必须使用<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span> ”，其中<span class="italic"><code class="codeph">filename</code></span>是不是在<code class="codeph">CONTROL_FILES</code>列表。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e844 d82198e640 ">
                                 <p>不要与恢复目录一起使用。</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e844 d82198e643 ">
                                 <p>仅恢复为<span class="italic"><code class="codeph">filename</code></span> ，其中<span class="italic"><code class="codeph">filename</code></span>不在<code class="codeph">CONTROL_FILES</code>列表中。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d82198e844 d82198e649 ">
                                 <p>RMAN发出错误<a id="d82198e884" class="indexterm-anchor"></a><a id="d82198e886" class="indexterm-anchor"></a> <code class="codeph">RMAN-06496</code> 。使用<code class="codeph">TO</code> “ <span class="italic"><code class="codeph">filename</code></span> ”代替。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>如果你在一个使用RMAN <a id="d82198e902" class="indexterm-anchor"></a> Data Guard环境，然后RMAN透明地将主控制文件转换为备用控制文件，反之亦然。当您发出<code class="codeph">RESTORE</code>和<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code>时，RMAN会自动更新数据文件，联机重做日志，备用重做日志和临时文件的文件名。恢复目录始终包含有关每个数据库的备份文件名的正确信息，如<span class="q">“ <a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDJIIGD">Data Guard环境中的RMAN备份”中所述</a></span> 。
                  </p>
                  <p><span class="bold">控制文件和服务器参数文件自动备份选项</span></p>
                  <p><a id="d82198e923" class="indexterm-anchor"></a><a id="d82198e927" class="indexterm-anchor"></a><a id="d82198e931" class="indexterm-anchor"></a>还原自动备份时，您使用的命令和选项取决于自动备份类型（控制文件或服务器参数文件）和位置（快速恢复区域内部或外部）。<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD" title="描述使用各种选项从自动备份恢复">表3-10</a>总结了这些选项。
                  </p>
                  <div class="tblformalwide" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD">
                     <p class="titleintable">表3-10 RESTORE ...来自AUTOBACKUP</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="恢复......来自AUTOBACKUP" width="100%" border="1" summary="Describes restoration from autobackups using various options" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="11%" id="d82198e955">恢复对象</th>
                              <th align="left" valign="bottom" width="16%" id="d82198e958">自动备份位置</th>
                              <th align="left" valign="bottom" width="15%" id="d82198e961">运行SET DBID？</th>
                              <th align="left" valign="bottom" width="17%" id="d82198e964">在RESTORE上指定RECOVERY AREA？</th>
                              <th align="left" valign="bottom" width="20%" id="d82198e967">在RESTORE上指定DB_NAME或DB_UNIQUE_NAME？</th>
                              <th align="left" valign="bottom" width="22%" id="d82198e970">运行SET CONTROLFILE AUTOBACKUP格式？</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="11%" id="d82198e975" headers="d82198e955 ">
                                 <p>SPFILE</p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d82198e975 d82198e958 ">
                                 <p>恢复区</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d82198e975 d82198e961 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e975 d82198e964 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d82198e975 d82198e967 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d82198e975 d82198e970 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="11%" id="d82198e994" headers="d82198e955 ">
                                 <p>SPFILE</p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d82198e994 d82198e958 ">
                                 <p>外部恢复区</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d82198e994 d82198e961 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e994 d82198e964 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d82198e994 d82198e967 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d82198e994 d82198e970 ">
                                 <p>仅当自动备份不在默认位置时</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="11%" id="d82198e1013" headers="d82198e955 ">
                                 <p>控制文件</p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d82198e1013 d82198e958 ">
                                 <p>恢复区</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d82198e1013 d82198e961 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e1013 d82198e964 ">
                                 <p>仅当自动备份处于非当前恢复区域时</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d82198e1013 d82198e967 ">
                                 <p>仅当自动备份位于非当前恢复区域并使用非当前<code class="codeph">DB_UNIQUE_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d82198e1013 d82198e970 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="11%" id="d82198e1034" headers="d82198e955 ">
                                 <p>控制文件</p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d82198e1034 d82198e958 ">
                                 <p>外部恢复区</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d82198e1034 d82198e961 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d82198e1034 d82198e964 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d82198e1034 d82198e967 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d82198e1034 d82198e970 ">
                                 <p>仅当自动备份不在默认位置时</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><span class="bold">在NOCATALOG模式下从存档备份还原控制文件</span></p>
                  <p>您可以将存储在磁盘上的备份卸载到磁带或Oracle Cloud。启用控制文件自动备份并使用以下命令之一将磁盘备份存档到磁带或Oracle Cloud时，RMAN包括最新控制文件到磁带或Oracle Cloud的备份：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">BACKUP BACKUPSET ALL</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">备份恢复区域</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">备份数据文件复制全部</code></p>
                     </li>
                  </ul>
                  <p>要还原这些备份，在未使用恢复目录时，必须配置一个或多个磁盘和SBT通道（用于磁带或Oracle Cloud）。</p>
                  <p>参见<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-24D7B81E-CECC-44EF-B6B7-6DD2F4766423">例3-29</a> 。
                  </p>
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CFAFGIJJ"><span class="bold">使用远程主机中的文件还原数据文件和控制文件</span><a id="d82198e1080" class="indexterm-anchor"></a><a id="d82198e1084" class="indexterm-anchor"></a><a id="d82198e1088" class="indexterm-anchor"></a><a id="d82198e1092" class="indexterm-anchor"></a></p>
                  <p>与Oracle数据库<span class="italic">12c的</span>开始，你可以恢复数据库，数据文件，控制文件，表空间，或使用文件从远程数据库的是spfile。RMAN连接到远程数据库，并使用备份集将所需文件通过网络传输到目标数据库。这在Data Guard环境中非常有用。您可以通过网络连接到备用数据库来还原主数据库上的数据文件。您还可以通过连接到主数据库来还原备用数据库上的数据文件。
                  </p>
                  <p>通过网络从远程主机还原文件时，必须使用<code class="codeph">FROM SERVICE</code>指定从中获取文件的远程主机的服务名称。（可选）使用<code class="codeph">SECTION SIZE</code>将源数据库中的文件还原为多节备份集。您可以通过指定<code class="codeph">USING COMPRESSED BACKUPSET</code>来压缩传输的文件。</p>
                  <p>要加密从源数据库传输的文件，请在RESTORE命令之前使用<code class="codeph">SET ENCRYPTION</code>命令。您还可以使用<code class="codeph">SET COMPRESSION ALGORITHM</code>指定在通过网络传输备份集之前压缩备份集的算法。
                  </p>
                  <p><span class="bold">使用远程主机还原文件的先决条件</span></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>源数据库和目标数据库上的密码文件必须相同。</p>
                     </li>
                     <li>
                        <p>目标数据库中的<code class="codeph">tnsnames.ora</code>文件必须包含与远程数据库对应的条目。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-EAECBC7B-CE1C-4344-924C-FBEDBFF6ECC8">句法</p>
                  <p><a id="d82198e1137" class="indexterm-anchor"></a><a id="d82198e1141" class="indexterm-anchor"></a> <span class="bold"><span class="italic">restore</span> :: =</span></p>
                  <div class="figure" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-13F7CB53-33B9-4CF4-B2C7-6EB2C07473F1"><img src="img/restore.gif" alt="restore.eps的描述如下" title="restore.eps的描述如下" longdesc="img_text/restore.html"><br><a href="img_text/restore.html">说明restore.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDIJJJD">restoreObject :: =</a></span> ， <span class="italic"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDCEJCJ">restoreSpecOperand :: =</a></span> ， <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier :: =</a></span> ， <span class="italic"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A__BABEDABD">untilClause :: =</a></span> ）</p>
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDIJJJD"><a id="d82198e1171" class="indexterm-anchor"></a><a id="d82198e1175" class="indexterm-anchor"></a> <span class="bold"><span class="italic">restoreObject</span> :: =</span></p>
                  <div class="figure" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-A2277858-B4FD-425A-B3D1-CE25FADD42C1"><img src="img/restoreobject.gif" alt="restoreobject.eps的描述如下" title="restoreobject.eps的描述如下" longdesc="img_text/restoreobject.html"><br><a href="img_text/restoreobject.html">说明restoreobject.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BABJGBFG">archivelogRecordSpecifier :: =</a></span> ， <span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec :: =</a></span> ， <span class="italic"><a href="foreignFileSpec.html#GUID-38CC0715-B32B-4394-92FB-3E0CB7C3ABE3__CIHFBDBF">foreignFileSpec :: =</a></span> ）</p>
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDCEJCJ"><a id="d82198e1201" class="indexterm-anchor"></a><a id="d82198e1203" class="indexterm-anchor"></a> <span class="bold"><span class="italic">restoreSpecOperand</span> :: =</span></p>
                  <div class="figure" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-BA92DFD7-1618-4B78-A4F0-1247AF3194B9"><img src="img/restorespecoperand.gif" alt="restorespecoperand.eps的描述如下" title="restorespecoperand.eps的描述如下" longdesc="img_text/restorespecoperand.html"><br><a href="img_text/restorespecoperand.html">说明restorespecoperand.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p><a id="d82198e1215" class="indexterm-anchor"></a><a id="d82198e1219" class="indexterm-anchor"></a> <span class="bold"><span class="italic">autoBackupOptList</span> :: =</span></p>
                  <div class="figure" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-805921B0-4F3B-4C1C-AF5D-103F0AAF2A83"><img src="img/autobackupoptlist.gif" alt="autobackupoptlist.eps的描述如下" title="autobackupoptlist.eps的描述如下" longdesc="img_text/autobackupoptlist.html"><br><a href="img_text/autobackupoptlist.html">autobackupoptlist.eps插图的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-B62EA39D-58EE-46D2-88E7-AF7EF5207F25">语义</p>
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__I1017375"><span class="bold"><span class="italic">恢复</span></span></p>
                  <p>此子句使您可以选择要还原的文件，并指定控制还原操作行为的参数。</p>
                  <div class="tblformalwide" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-8DE95FE2-A16D-4EF1-8B52-859C89D4AB6E">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RESTORE command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d82198e1247">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d82198e1250">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1255" headers="d82198e1247 ">
                                 <p><span class="italic"><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBJJGCB">restoreObject</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1255 d82198e1250 ">
                                 <p>指定要还原的文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1265" headers="d82198e1247 ">
                                 <p><span class="italic"><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__I1036865">restoreSpecOperand</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1265 d82198e1250 ">
                                 <p>指定<span class="italic"><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBJJGCB">restoreObject</a></code></span>子句的选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1280" headers="d82198e1247 ">
                                 <p><code class="codeph">作为加密</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1280 d82198e1250 ">
                                 <p></p>
                                 <p>通过加密已还原的数据文件块来还原数据库或指定表空间的备份。当您希望使用现有RMAN备份将内部部署数据库移动到Oracle Cloud时，这非常有用。内部部署数据库及其备份未加密。使用<code class="codeph">AS ENCRYPTED</code>还原这些备份可确保Oracle Cloud数据库已加密。RMAN使用数据库密钥加密数据。
                                 </p>
                                 <p>必须安装目标数据库。在运行<code class="codeph">RESTORE...之前，必须创建并打开钱包<code class="codeph">RESTORE...AS ENCRYPTED</code>命令。
                                 </p>
                                 <p>要使用此子句，必须将目标数据库的<code class="codeph">COMPATIBLE</code>参数设置为12.2或更高，并且必须在<code class="codeph">COMPATIBLE</code>设置为12.2或更高时创建所使用的备份。
                                 </p>
                                 <p><span class="bold">注意：</span>仅在还原整个数据库或表空间时才支持此子句。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能对<code class="codeph">AS ENCRYPTED</code>使用<code class="codeph">DATAFILE</code> ， <code class="codeph">FOREIGN DATAFILE</code> ， <code class="codeph">ARCHIVELOG</code> ， <code class="codeph">FOREIGN ARCHIVELOG</code> ， <code class="codeph">SPFILE</code>和<code class="codeph">CONTROLFILE</code>子句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1335" headers="d82198e1247 ">
                                 <p><code class="codeph">作为解密</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1335 d82198e1250 ">
                                 <p></p>
                                 <p>恢复加密数据库或表空间的备份，以便恢复的数据块不加密。通过使用现有RMAN备份将Oracle云上的数据库移动到本地安装时，这非常有用。加密用于Oracle Cloud中的数据文件和备份。您可以选择还原在Oracle Cloud上创建的加密数据库或表空间的备份，并创建不使用加密的内部部署数据库。必须安装目标数据库。</p>
                                 <p>您只能将使用数据库密钥加密的表空间还原为未加密的备份。这包括先前使用在Oracle Cloud上创建的加密或表空间进行恢复的表空间，而没有显式加密子句。创建为加密的表空间或在使用加密的还原操作后显式重新键入的表空间将不会被解密。</p>
                                 <p>要使用此子句，必须将<code class="codeph">COMPATIBLE</code>参数设置为12.2或更高，并且必须在<code class="codeph">COMPATIBLE</code>设置为12.2或更高时创建备份。
                                 </p>
                                 <p><span class="bold">注意：</span>建议您在加密后不解密<code class="codeph">SYSTEM</code>和<code class="codeph">UNDO</code>表空间。这将导致加密表空间的回滚段被解密。
                                 </p>
                                 <p><span class="bold">注意：</span>仅在还原整个数据库或表空间时才支持此子句。
                                 </p>
                                 <p><span class="bold">注意：</span>您不能对<code class="codeph">AS DECRYPTED</code>使用<code class="codeph">DATAFILE</code> ， <code class="codeph">FOREIGN DATAFILE</code> ， <code class="codeph">ARCHIVELOG</code> ， <code class="codeph">FOREIGN ARCHIVELOG</code> ， <code class="codeph">SPFILE</code>和<code class="codeph">CONTROLFILE</code>子句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1394" headers="d82198e1247 ">
                                 <p><code class="codeph">CHANNEL</code> <span class="italic"><code class="codeph">channel_id</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1394 d82198e1250 ">
                                 <p>请参阅<span class="italic"><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__I1036865">restoreSpecOperand</a></code></span>子句。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1411" headers="d82198e1247 ">
                                 <p><code class="codeph">检查逻辑</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1411 d82198e1250 ">
                                 <p>测试通过物理损坏检查逻辑损坏的数据和索引块，例如，行片段或索引条目的损坏。如果RMAN发现逻辑损坏，则它会将该日志记录在警报日志和服务器会话跟踪文件中。</p>
                                 <p>如果文件中检测到的物理和逻辑损坏总数小于其<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">MAXCORRUPT</code>设置，则RMAN命令完成，数据库将填充具有损坏块范围的<code class="codeph">V$DATABASE_BLOCK_CORRUPTION</code>视图。如果超过<code class="codeph">MAXCORRUPT</code> ，则命令终止而不填充视图。
                                 </p>
                                 <p>还原备份数据文件时，RMAN <code class="codeph">DB_BLOCK_CHECKSUM</code>初始化参数设置。如果<code class="codeph">DB_BLOCK_CHECKSUM</code>设置为<code class="codeph">false</code> RMAN将清除校验和。如果设置为<code class="codeph">typical</code> ，则RMAN会在从备份还原并写入数据文件时验证校验和。如果初始化参数<code class="codeph">DB_BLOCK_CHECKSUM=typical</code> ，并且未设置<code class="codeph">MAXCORRUPT</code> ，则指定<code class="codeph">CHECK LOGICAL</code>会检测可能检测到的所有类型的损坏。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">MAXCORRUPT</code>设置表示文件允许的物理和逻辑损坏总数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1466" headers="d82198e1247 ">
                                 <p><code class="codeph">DEVICE TYPE</code> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1466 d82198e1250 ">
                                 <p>仅为指定的设备类型分配自动通道。例如，如果配置自动磁盘和磁带通道，并发出<code class="codeph">RESTORE ...DEVICE TYPE DISK</code> ，然后RMAN仅分配磁盘通道。在指定<code class="codeph">DEVICE TYPE</code>选项之前，必须使用<code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code> （预先配置的<code class="codeph">DISK</code>除外）配置<code class="codeph">DEVICE TYPE</code> 。
                                 </p>
                                 <p><span class="bold">注意：</span>您无法在<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>块中手动分配通道，然后使用<code class="codeph">DEVICE TYPE</code>子句运行<code class="codeph">RESTORE</code> 。
                                 </p>
                                 <p> <span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABHDFAD">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1517" headers="d82198e1247 ">
                                 <p><code class="codeph">力</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1517 d82198e1250 ">
                                 <p>覆盖可重新启动的还原功能并还原所有文件，无论它们是否必须还原。如果未指定<code class="codeph">FORCE</code> ，则仅当RMAN的标头信息与控制文件中的信息不匹配时，RMAN才会还原该文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1528" headers="d82198e1247 "><code class="codeph">FROM COPY NUMBER <span class="codeinlineitalic">整数</span></code></td>
                              <td align="left" valign="top" width="71%" headers="d82198e1528 d82198e1250 ">指定一组双工备份片段中备份片的副本号。如果未执行双面打印，则副本编号为<code class="codeph">1</code> 。否则，拷贝数值的范围是<code class="codeph">2</code>到<code class="codeph">4</code> 。
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1545" headers="d82198e1247 ">
                                 <p><code class="codeph">来自BACKUPSET</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1545 d82198e1250 ">
                                 <p>仅从备份集还原。默认情况下， <code class="codeph">RESTORE</code>选择需要最少介质恢复的文件副本或备份集。
                                 </p>
                                 <p>如果使用<code class="codeph">FROM BACKUPSET</code>选项，则必须为必须还原的备份集分配适当类型的存储设备的通道。例如，如果所需备份仅在磁带上可用，并且未分配任何<code class="codeph">sbt</code>通道，则RMAN无法找到要还原的候选备份集，并且<code class="codeph">RESTORE</code>命令将失败。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1568" headers="d82198e1247 ">
                                 <p><code class="codeph">来自DATAFILECOPY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1568 d82198e1250 ">
                                 <p>仅恢复数据文件副本。默认情况下， <code class="codeph">RESTORE</code>选择需要最少介质恢复的文件副本或备份集。如果使用<code class="codeph">FROM DATAFILECOPY</code>选项，则分配的通道必须为<code class="codeph">DEVICE TYPE DISK</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1586" headers="d82198e1247 ">
                                 <p></p><code class="codeph">从SPARSE</code></td>
                              <td align="left" valign="top" width="71%" headers="d82198e1586 d82198e1250 ">从适当的稀疏备份集或所选备份的映像副本还原数据文件。恢复的数据文件很稀疏。如果此操作没有可用的稀疏备份，则还原将失败。
                                 <p>必须将数据库兼容性参数设置为12.2或更高才能执行<code class="codeph">RESTORE FROM SPARSE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1598" headers="d82198e1247 "><code class="codeph">来自NONSPARSE</code></td>
                              <td align="left" valign="top" width="71%" headers="d82198e1598 d82198e1250 ">
                                 <p>从适当的非稀疏备份还原数据文件。此选定备份可以是备份集格式或映像副本格式。恢复的数据文件是非稀疏的。如果此操作没有可用的非稀疏备份，则还原将失败。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1605" headers="d82198e1247 ">
                                 <p> <code class="codeph">即时完整</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1605 d82198e1250 ">
                                 <p>本条款保留给将来的版本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1614" headers="d82198e1247 ">
                                 <p><code class="codeph">即时消息</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1614 d82198e1250 ">
                                 <p>本条款保留给将来的版本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1622" headers="d82198e1247 ">
                                 <p><code class="codeph">FROM PLATFORM</code> <span class="italic"><code class="codeph">platform</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1622 d82198e1250 ">
                                 <p>指定创建跨平台备份的平台的名称。从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始支持跨平台数据传输。此子句必须附带<span class="italic"><code class="codeph">foreignFileSpec</code></span> ，该指定指定包含要还原的数据的备份集。<code class="codeph">FROM PLATFORM</code>子句是可选的。您可以通过仅指定<span class="italic"><code class="codeph">foreignFileSpec</code></span>来还原跨平台备份。但是，如果使用<code class="codeph">FROM PLATFORM</code>指定平台名称，则该名称必须与存储在跨平台备份标头中的平台标识符匹配。
                                 </p>
                                 <p></p>
                                 <p>要通过网络连接到远程数据库来执行跨平台表空间传输，请使用带有<code class="codeph">FROM SERVICE</code>子句的<code class="codeph">FROM PLATFORM</code>子句。然后，RMAN在源数据库上创建所需的备份集，将它们传输到目标数据库，然后在目标上还原它们。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1660" headers="d82198e1247 ">
                                 <p><code class="codeph">来自PREPLUGIN</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1660 d82198e1250 ">
                                 <p>通过使用在源非CDB或PDB作为PDB插入目标CDB之前创建的预刷新备份来还原目标CDB中的数据文件和归档重做日志文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1668" headers="d82198e1247 ">
                                 <p><code class="codeph">FROM SERVICE</code> <span class="italic"><code class="codeph">service_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1668 d82198e1250 ">
                                 <p>使用通过网络从远程数据库传输的文件还原目标数据库上的数据文件，控制文件或spfile。 <span class="italic"><code class="codeph">service_name</code></span>指定远程数据库的服务名称。
                                 </p>
                                 <p></p>
                                 <p>要通过网络连接到远程数据库来执行跨平台表空间传输，请使用带有<code class="codeph">FROM SERVICE</code>子句的<code class="codeph">FROM PLATFORM</code>子句。RMAN连接到源数据库，创建所需的备份，将它们传输到目标，然后还原目标上的备份。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1693" headers="d82198e1247 ">
                                 <p><code class="codeph">FROM TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1693 d82198e1250 ">
                                 <p>请参阅<span class="italic"><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__I1036865">restoreSpecOperand</a></code></span>子句。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1710" headers="d82198e1247 ">
                                 <p><code class="codeph">FILE_NAME_CONVERT</code> <code class="codeph"><span class="codeinlineitalic">string_pattern</span></code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1710 d82198e1250 ">
                                 <p>指定在将PDB跨平台传输到目标CDB期间，源CDB上的Oracle数据库文件名如何映射到目标CDB上的相应文件。</p>
                                 <p>指定用于转换文件名的字符串对。您可以根据需要使用多对源和目标替换字符串。例如，您可以将字符串模式设置为以下值：</p>
                                 <p><code class="codeph">FILE_NAME_CONVERT =（'str1'，'str2'，'str3'，'str4'...）</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1727" headers="d82198e1247 ">
                                 <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI"><code class="codeph">预习</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1727 d82198e1250 ">
                                 <p>报告 - 但不还原 -  RMAN可用于将数据库还原并恢复到指定时间的备份和归档重做日志文件。RMAN查询元数据，但实际上并未读取备份文件。</p>
                                 <p><code class="codeph">RESTORE ...PREVIEW</code>输出的格式与<code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">BACKUP</code>输出的格式相同（参见<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDEFIAA">例3-31</a> ）。
                                 </p>
                                 <p><a id="d82198e1750" class="indexterm-anchor"></a><a id="d82198e1752" class="indexterm-anchor"></a>某些媒体管理器向RMAN提供有关哪些备份不在现场的状态信息。异地备份存储在远程位置，例如安全存储设施，并且不能在不检索媒体的情况下使用。
                                 </p>
                                 <p>即使必须从存储中检索介质，然后才能恢复备份，异地备份在RMAN存储库中标记为<code class="codeph">AVAILABLE</code> 。如果RMAN尝试还原非现场备份，则还原操作将失败。<code class="codeph">恢复......PREVIEW</code>可以识别存储在需要检索的介质上的<code class="codeph">RESTORE</code>操作所需的备份。输出指示备份是否存储在异地。
                                 </p>
                                 <p>如果需要的备份存储在异地，但媒体管理器不支持异地备份，那么您的选项是：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>使用<code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code> <code class="codeph">...UNAVAILABLE</code>阻止RMAN选择所需的异地备份，并尝试<code class="codeph">RESTORE ...再次执行PREVIEW</code>操作以确定RMAN是否选择另一个异地备份。当RMAN未选择任何异地备份时，您可以执行还原操作。
                                       </p>
                                    </li>
                                    <li>
                                       <p>使用<code class="codeph">RESTORE ...使用<code class="codeph">RECALL</code>选项进行PREVIEW</code> 。
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">另请参阅：</span> <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> ，特别是<code class="codeph">BACKUPS</code>和<code class="codeph">SUMMARY</code>选项，以及<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> <code class="codeph">...VALIDATE HEADER</code>命令</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1818" headers="d82198e1247 ">
                                 <p><code class="codeph">召回</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1818 d82198e1250 ">
                                 <p>指示介质管理器从非现场存储中检索指定还原操作所需的备份介质（请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDDHJHH">示例3-32</a> ）。
                                 </p>
                                 <p></p>
                                 <p>还原存储在Oracle Cloud Infrastructure Classic中的存档存储中的备份时，请使用此选项在还原之前首先调用备份。</p>
                                 <p><span class="bold">注意：</span>此选项仅在媒体管理器支持此功能时有效。你可以使用<code class="codeph">RESTORE ...定期PREVIEW</code>以监视所需备份是否再次存储在本地。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1839" headers="d82198e1247 ">
                                 <p><code class="codeph">摘要</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1839 d82198e1250 ">
                                 <p>总结RMAN将还原的备份。输出格式与<code class="codeph">LIST BACKUPS ...的输出格式相同<code class="codeph">LIST BACKUPS ...SUMMARY</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1850" headers="d82198e1247 ">
                                 <p><code class="codeph">部分尺寸</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1850 d82198e1250 ">
                                 <p>恢复多节备份。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1858" headers="d82198e1247 ">
                                 <p></p>
                                 <p><code class="codeph">跳过预备</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1858 d82198e1250 ">
                                 <p>排除预先存储的数据文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1867" headers="d82198e1247 ">
                                 <p><code class="codeph">跳过READONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1867 d82198e1250 ">
                                 <p>不还原只读文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1875" headers="d82198e1247 "><code class="codeph">TO RESTORE POINT</code> <span class="italic"><code class="codeph">restore_point_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d82198e1875 d82198e1250 ">
                                 <p>指定还原点，其中创建还原点的SCN为包含上限的上限。由于限制是包含的，因此RMAN仅选择可用于还原文件的文件<span class="italic">，包括</span>与还原点对应的SCN。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1889" headers="d82198e1247 ">
                                 <p><span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1889 d82198e1250 ">
                                 <p>将选择限制为适合于时间点恢复到指定时间，SCN或日志序列号的备份集或文件副本。</p>
                                 <p>在没有任何其他条件的情况下，RMAN会选择要还原的最新文件副本或备份集。<code class="codeph">UNTIL</code>子句中指定的时间必须属于当前的数据库化身。
                                 </p>
                                 <p><span class="bold">另见：</span> <span class="italic"><code class="codeph"><a href="untilClause.html#GUID-6A6C502A-6E21-4673-9FC9-C075D1E2F97A">untilClause</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1914" headers="d82198e1247 ">
                                 <p><code class="codeph">使用[COMPRESSED] BACKUPSET</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1914 d82198e1250 ">
                                 <p>指定必须通过网络还原的文件作为压缩备份集从远程数据库传输。默认情况下，RMAN将文件作为备份集传输。因此，即使省略<code class="codeph">USING BACKUPSET</code>子句，文件也会作为备份集传输。默认情况下，使用RMAN配置中设置的压缩算法执行压缩。在执行<code class="codeph">RESTORE</code>命令之前，可以通过执行<code class="codeph">SET COMPRESSION ALGORITHM</code>命令来使用不同的压缩算法。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1931" headers="d82198e1247 ">
                                 <p><code class="codeph">VALIDATE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1931 d82198e1250 ">
                                 <p>RMAN标识必须还原哪些备份集，数据文件副本和归档重做日志文件，然后验证它们（请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDHIEJA">示例3-33</a> ）。没有文件被恢复。
                                 </p>
                                 <p>对于磁盘和磁带上的文件，RMAN读取备份片或映像副本中的所有块。RMAN还验证异地备份。除了RMAN不写输出文件之外，验证与实际还原操作相同。</p>
                                 <p><span class="bold">注意：</span>如果将<code class="codeph">RESTORE</code>与<code class="codeph">VALIDATE</code>选项一起使用，则可以使用联机数据文件打开数据库。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <code class="codeph"><a href="VALIDATE.html#GUID-ECE57997-40CE-4029-A434-320441D2AD1E">VALIDATE</a></code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e1961" headers="d82198e1247 ">
                                 <p><code class="codeph">HEADER</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e1961 d82198e1250 ">
                                 <p>报告和验证 - 但不还原 -  RMAN可用于还原到指定时间的备份。</p>
                                 <p>指定此选项时，RMAN执行与使用<code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code>选项运行<code class="codeph">RESTORE</code>时相同的功能。但是，除了列出还原和恢复所需的文件之外，RMAN还会验证备份文件头，以确定磁盘上或介质管理目录中的文件是否与RMAN存储库中的元数据相对应。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <code class="codeph">RESTORE</code> <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFAJFI">PREVIEW</a></code>选项和<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> <code class="codeph">...VALIDATE HEADER</code>选项</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBJJGCB"><span class="bold"><span class="italic">restoreObject</span></span></p>
                  <p>本小节指定要还原的对象：控制文件，数据文件，归档重做日志文件或服务器参数文件。RMAN不支持备份和恢复更改跟踪文件。数据库恢复和恢复后，RMAN重新创建更改跟踪文件;任何恢复后的下一个增量备份都可以使用该文件。因此，还原和恢复对更改跟踪没有用户可见的影响。</p>
                  <div class="tblformalwide" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-4DD39ED2-61C4-486B-89CD-377539B3CCA6">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RESTORE command restoreObject parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d82198e2010">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d82198e2013">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2018" headers="d82198e2010 ">
                                 <p><span class="italic"><code class="codeph"><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703">archivelogRecordSpecifier</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2018 d82198e2013 ">
                                 <p><a id="d82198e2027" class="indexterm-anchor"></a>恢复指定范围的归档重做日志文件。
                                 </p>
                                 <p>默认还原位置为<code class="codeph">DB_RECOVERY_FILE_DEST</code> （如果其中一个<code class="codeph">LOG_ARCHIVE_DEST_n</code>被隐式或显式配置为<code class="codeph">USE_DB_RECOVERY_FILE_DEST</code> ）。否则，使用目标数据库的<code class="codeph">LOG_ARCHIVE_FORMAT</code>和<code class="codeph">LOG_ARCHIVE_DEST_1</code>初始化参数构造默认恢复文件名。这些参数以特定于端口的方式组合，以导出已还原日志的名称。您可以使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">ARCHIVELOG DESTINATION</code>命令覆盖默认位置。
                                 </p>
                                 <p>由于<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code>命令会根据需要自动还原存档的重做日志文件，因此您很少需要手动还原日志。手动还原存档重做日志文件的可能原因是加速恢复，将日志分级到多个目标，或者在时间点恢复后分析日志内容。要在不关闭数据库的情况下还原以前版本的日志，可以使用<code class="codeph">RESTORE ARCHIVELOG</code> ：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>...<code class="codeph">来自SCN</code></p>
                                    </li>
                                    <li>
                                       <p>.. <code class="codeph">.SCN BETWEEN ......和</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">来自SCN ......INCARNATION &lt;整数&gt;</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">来自SCN ......否定所有</code> 
                                       </p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">注意：</span>可以为此操作启动，装入或打开数据库。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703">archivelogRecordSpecifier</a></code></span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2103" headers="d82198e2010 ">
                                 <p><code class="codeph">CONTROLFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2103 d82198e2013 ">
                                 <p>根据目标数据库角色还原备用或备份控制文件。</p>
                                 <p>如果控制文件丢失，则还原控制文件（请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9</a> ）并在安装还原的控制文件后还原数据库。在安装已还原的控制文件后，必须始终运行<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code>命令，并且必须使用<code class="codeph">RESETLOGS</code>选项打开数据库。
                                 </p>
                                 <p><span class="bold">注意：</span>如果未装入目标数据库，并且RMAN未连接到恢复目录，则必须使用<code class="codeph">RESTORE CONTROLFILE</code>指定<code class="codeph">FROM AUTOBACKUP</code>子句。如果自动备份是非默认格式，则首先使用<code class="codeph">SET CONTROLFILE AUTOBACKUP FORMAT</code>命令指定格式。如果已挂载或打开目标数据库，则必须使用<code class="codeph">RESTORE CONTROLFILE</code>指定<code class="codeph">TO</code> <span class="italic"><code class="codeph">filename</code></span>子句。</p>
                                 <p>在连接到恢复目录时使用备份控制文件运行<code class="codeph">RESTORE</code> （请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDGHAJH">示例3-26</a> ），RMAN会根据目录中的元数据自动更新控制文件以反映已还原数据库的结构。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2157" headers="d82198e2010 ">
                                 <p><code class="codeph">TO</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2157 d82198e2013 ">
                                 <p>将控制文件还原为指定的文件名。</p>
                                 <p><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9</a>说明了使用<code class="codeph">TO</code>子句还原控制文件时的RMAN行为。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2182" headers="d82198e2010 "><code class="codeph">应用根数据库</code></td>
                              <td align="left" valign="top" width="71%" headers="d82198e2182 d82198e2013 ">
                                 <p></p>
                                 <p>指定应用程序根目录中的所有数据文件。</p>
                                 <p>使用<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限以普通用户身份连接到CDB根目录。或者，以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的应用程序通用用户身份连接到应用程序根目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2204" headers="d82198e2010 ">
                                 <p><code class="codeph">数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2204 d82198e2013 ">
                                 <p>恢复数据库中除脱机之外的所有数据文件。默认情况下，RMAN将数据文件还原到只读表空间中。</p>
                                 <p>在CDB中，恢复整个CDB。您连接到根以还原CDB。在PDB中，还原指定PDB中的数据文件。要备份PDB，请连接到该PDB。请参阅<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”</span> 。
                                 </p>
                                 <p></p>
                                 <p>在应用程序容器中，还原整个应用程序容器。这包括应用程序根目录和属于此应用程序根目录的所有应用程序PDB。您以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的应用程序通用用户身份连接到应用程序根目录。
                                 </p>
                                 <p>与<code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DATABASE</code> ， <code class="codeph">RESTORE DATABASE</code> <span class="italic">并不</span>自动包括控制文件和服务器参数文件，则必须增发<code class="codeph">RESTORE CONTROLFILE</code>和<code class="codeph">RESTORE SPFILE</code>命令来恢复这些文件。
                                 </p>
                                 <p><span class="bold">注意：</span>要还原脱机数据文件，必须使用<code class="codeph">RESTORE DATAFILE</code>或<code class="codeph">RESTORE TABLESPACE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2260" headers="d82198e2010 ">
                                 <p><code class="codeph">数据库根</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2260 d82198e2013 ">
                                 <p>在CDB中，还原属于根的所有在线数据文件。按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到根目录。
                                 </p>
                                 <p></p>
                                 <p>在应用程序容器中，还原属于应用程序根目录和所有应用程序PDB的联机数据文件。以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的应用程序通用用户身份连接到应用程序根目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2281" headers="d82198e2010 ">
                                 <p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2281 d82198e2013 ">
                                 <p>在CDB中，还原属于指定PDB的所有数据文件。没有其他PDB受到影响;他们可以保持开放和运作。使用逗号分隔列表还原多个PDB。按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到根目录。
                                 </p>
                                 <p></p>
                                 <p>在应用程序容器，连接到CDB根作为与普通用户<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限和指定应用程序根目录的名称<code class="codeph">pdb_name</code>恢复属于该应用程序根目录和所有的应用程序PDBS的数据文件。
                                 </p>
                                 <p>要还原属于指定应用程序PDB的所有数据文件，请以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACK</code>权限的应用程序通用用户身份连接到应用程序根目录。要还原多个应用程序PDB的文件，请指定应用程序PDB名称的公共分隔列表。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2317" headers="d82198e2010 "><code class="codeph">SKIP [FOREVER]</code> <code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d82198e2317 d82198e2013 ">
                                 <p>从还原操作中排除指定的表空间。此选项对于避免还原包含临时数据的表空间很有用。在CDB中，当连接到根时指向根中的表空间，并且当直接连接到PDB时引用PDB中的表空间。</p>
                                 <p>指定<code class="codeph">FOREVER</code>关键字不会更改<code class="codeph">SKIP</code>的行为。 <code class="codeph">FOREVER</code>关键字仅用于维护<code class="codeph">RESTORE SKIP FOREVER</code>和<code class="codeph">RECOVER SKIP FOREVER</code>之间的兼容语法。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2348" headers="d82198e2010 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">pdb_name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2348 d82198e2013 ">
                                 <p>在CDB中，从还原操作中排除指定的表空间。仅当连接到根时才需要此语法。直接连接到PDB时，请使用<code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2371" headers="d82198e2010 ">
                                 <p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2371 d82198e2013 ">
                                 <p>恢复由文件名或绝对数据文件号指定的数据文件（参见<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEAAH">例3-25</a> ）。
                                 </p>
                                 <p><span class="bold">注意：</span>请勿在还原作业中多次指定数据文件。例如，以下命令无效，因为数据文件1既被显式指定又被<code class="codeph">SYSTEM</code>表空间隐含：</p><pre class="oac_no_warn" dir="ltr">RESTORE TABLESPACE SYSTEM DATAFILE 1;</pre><p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2405" headers="d82198e2010 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph"><a href="foreignFileSpec.html#GUID-38CC0715-B32B-4394-92FB-3E0CB7C3ABE3">foreignFileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2405 d82198e2013 ">
                                 <p>还原使用备份集的跨平台备份。执行跨平台还原操作时，必须指定<span class="italic"><code class="codeph"><a href="foreignFileSpec.html#GUID-38CC0715-B32B-4394-92FB-3E0CB7C3ABE3">foreignFileSpec</a></code></span> 。此子句指定必须还原的数据（数据文件，表空间或整个数据库）以及包含要还原的数据的备份集。正在还原的跨平台备份可以包含多个备份集或多个备份片。
                                 </p>
                                 <p>使用<code class="codeph">BACKUPSET</code>语法指定要还原的备份集。要恢复数据文件，请使用<code class="codeph">ALL FOREIGN DATAFILES</code>或<code class="codeph">FOREIGN DATAFILE</code> 。要还原表空间。使用<code class="codeph">FOREIGN TABLESPACE</code> 。要还原整个数据库，请使用<code class="codeph">FOREIGN DATABASE</code> 。</p>
                                 <p>要将已还原的表空间插入目标数据库，请使用包含与备份一起创建的表空间元数据的导出转储文件。使用<code class="codeph">DUMP FILE</code> ，以表明备份包含导出转储文件和<code class="codeph">BACKUPSET</code>指定包含导出转储文件的备份集。
                                 </p>
                                 <p><span class="bold">注意：</span>此子句仅可用于还原使用备份集备份的数据。它不能用于作为映像副本创建的备份。
                                 </p>
                                 <p><span class="bold">另请参见：</span> <span class="italic"><code class="codeph"><a href="foreignFileSpec.html#GUID-38CC0715-B32B-4394-92FB-3E0CB7C3ABE3">foreignFileSpec</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2463" headers="d82198e2010 ">
                                 <p><code class="codeph">FOREIGN PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span> FROM SERVICE</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2463 d82198e2013 ">
                                 <p></p>
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2476" headers="d82198e2010 ">
                                 <p><code class="codeph">主要控制文件</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2476 d82198e2013 ">
                                 <p>在Data Guard环境中还原主数据库的控制文件。</p>
                                 <p>RMAN根据适当情况恢复正常或备用控制文件，具体取决于目标数据库的恢复目录（ <code class="codeph"><a href="RC_SITE.html#GUID-5A53B4D3-7E4C-40AF-B5DB-560FCAFB8293" title="此视图列出了有关恢复目录中已知的Data Guard环境中所有数据库的信息。">RC_SITE</a></code> <code class="codeph">.DATABASE_ROLE</code> ）已知的最新数据库角色。此选项的目的是在最新数据库角色已过期的情况下覆盖默认设置。
                                 </p>
                                 <p><a id="d82198e2496" class="indexterm-anchor"></a>假设您执行从主数据库<code class="codeph">dgny</code>到备用数据库<code class="codeph">dgsf</code> ，以便<code class="codeph">dgsf</code>是新的主数据库。您希望在<code class="codeph">dgsf</code>上还原控制文件，但恢复目录未重新同步，仍将<code class="codeph">dgsf</code>显示为备用数据库。在这种情况下，您可以指定<code class="codeph">PRIMARY CONTROLFILE</code>以覆盖默认的RMAN行为并恢复正常的控制文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2521" headers="d82198e2010 ">
                                 <p><code class="codeph">SPFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2521 d82198e2013 ">
                                 <p>将主服务器或备用服务器参数文件还原到备份它的位置。RMAN无法覆盖目标数据库当前使用的服务器参数文件。</p>
                                 <p>默认情况下，RMAN会还原最新的服务器参数文件。指定<code class="codeph">UNTIL</code>或<code class="codeph">TAG</code>选项以还原旧版本的服务器参数文件。
                                 </p>
                                 <p>如果服务器参数文件丢失，则将RMAN连接到目标数据库（如果使用的话还有恢复目录）并运行<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code> 。在运行<code class="codeph">RESTORE SPFILE</code>之前运行<code class="codeph"><a href="STARTUP.html#GUID-96DFEF80-A2D1-493C-8CFF-BF0CB4BE281D">STARTUP</a></code> <code class="codeph">FORCE NOMOUNT</code> 。然后运行<code class="codeph">STARTUP FORCE</code>以使用还原的服务器参数文件重新启动数据库实例。
                                 </p>
                                 <p><span class="bold">注意：</span>如果未装入目标数据库，并且RMAN未连接到恢复目录，则必须使用<code class="codeph">RESTORE SPFILE</code>指定<code class="codeph">FROM AUTOBACKUP</code>子句。如果自动备份是非默认格式，则首先使用<code class="codeph">SET CONTROLFILE AUTOBACKUP FORMAT</code>命令指定格式。如果目标数据库已启动，装入或打开，并且数据库是使用服务器参数文件启动的，则必须使用<code class="codeph">RESTORE SPFILE</code>指定<code class="codeph">TO</code> <span class="italic"><code class="codeph">filename</code></span>子句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2586" headers="d82198e2010 ">
                                 <p><code class="codeph">TO [PFILE]</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2586 d82198e2013 ">
                                 <p><a id="d82198e2600" class="indexterm-anchor"></a><a id="d82198e2602" class="indexterm-anchor"></a>将主服务器或备用服务器参数文件还原到<code class="codeph">TO</code>子句指定的位置。指定<code class="codeph">PFILE</code>以将服务器参数文件另存为基于文本的初始化参数文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2612" headers="d82198e2010 "><code class="codeph">FOR DB_UNIQUE_NAME</code> <span class="italic"><code class="codeph">db_unique_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d82198e2612 d82198e2013 ">
                                 <p>未启动实例时指定目标数据库的<code class="codeph">DB_UNIQUE_NAME</code> 。此参数仅在Data Guard环境中有用。
                                 </p>
                                 <p><a id="d82198e2626" class="indexterm-anchor"></a>指定<code class="codeph">FOR DB_UNIQUE_NAME</code> ，RMAN可以为正在还原<code class="codeph">SPFILE</code>的主机找到正确的RMAN配置，并使用它们来访问备份设备。否则，RMAN无法选择正确的通道配置并返回<a id="d82198e2637" class="indexterm-anchor"></a><a id="d82198e2639" class="indexterm-anchor"></a> <code class="codeph">RMAN-6758</code>错误。
                                 </p>
                                 <p>在Data Guard环境中，主要主机和备用主机可能具有不同的通道配置，以便与其关联的SBT备份和磁盘设备进行通信。如果恢复目录中已知主数据库和备用数据库，则两个数据库的配置设置都将记录在恢复目录中。由于这两个数据库具有相同的<code class="codeph">DB_NAME</code> ，因此只能使用<code class="codeph">DB_UNIQUE_NAME</code>初始化参数区分恢复目录中的记录。
                                 </p>
                                 <p><span class="bold">注意：</span>当<code class="codeph">DB_NAME</code>在恢复目录中不唯一时，使用<code class="codeph">RESTORE SPFILE</code>会产生<code class="codeph">RMAN-6758</code>错误。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a> ，以获取在Data Guard环境中还原服务器参数文件的详细过程</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2677" headers="d82198e2010 ">
                                 <p><code class="codeph">TO</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2677 d82198e2013 ">
                                 <p>将备用控制文件还原为指定的文件名。<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9</a>说明了使用<code class="codeph">TO</code>子句还原控制文件时的RMAN行为。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2701" headers="d82198e2010 ">
                                 <p><code class="codeph">备用控制文件</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2701 d82198e2013 ">
                                 <p>恢复备用数据库的控制文件。RMAN可以透明地还原正常的控制文件备份，并使其可用于备用数据库。</p>
                                 <p>RMAN根据适当情况恢复正常或备用控制文件，具体取决于目标数据库的恢复目录（ <code class="codeph"><a href="RC_SITE.html#GUID-5A53B4D3-7E4C-40AF-B5DB-560FCAFB8293" title="此视图列出了有关恢复目录中已知的Data Guard环境中所有数据库的信息。">RC_SITE</a></code> <code class="codeph">.DATABASE_ROLE</code> ）已知的最新数据库角色。此选项的目的是在最新数据库角色已过期的情况下覆盖默认设置。假设您执行从主数据库<code class="codeph">dgny</code>到备用数据库<code class="codeph">dgsf</code> ，以便<code class="codeph">dgsf</code>是新的主数据库。后来，你让<code class="codeph">dgny</code>一个备用数据库<code class="codeph">dgsf</code> 。您希望在<code class="codeph">dgny</code>上还原控制文件，但恢复目录未重新同步，仍将<code class="codeph">dgny</code>显示为主数据库。在这种情况下，您可以指定<code class="codeph">STANDBY CONTROLFILE</code>以覆盖默认的RMAN行为并还原备用控制文件。
                                 </p>
                                 <p>如果还原其恢复目录已知<code class="codeph">DB_UNIQUE_NAME</code>的数据库的控制文件，则RMAN会将控制文件中的所有文件名更新为恢复目录中已知的文件名。使用<code class="codeph">ALTER DATABASE RENAME FILE</code>显式重命名的任何文件名优先于恢复目录中的文件名。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9</a>了解限制和使用说明</p>
                                 <p><span class="bold">注意：</span>必须始终在安装已还原的控制文件后运行<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code>命令，并且还必须始终使用<code class="codeph">RESETLOGS</code>选项打开数据库。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2775" headers="d82198e2010 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2775 d82198e2013 ">
                                 <p>恢复指定表空间中的所有数据文件（请参见<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDGADCD">示例3-24</a> ）。
                                 </p>
                                 <p>RMAN将表空间名称内部转换为数据文件列表。如果重命名表空间（例如，从<code class="codeph">users</code>重命名为<code class="codeph">customers</code> ），则只要尚未创建具有旧名称（ <code class="codeph">users</code> ）的其他表空间，就可以使用旧名称（ <code class="codeph">users</code> ）或新名称（ <code class="codeph">customers</code> ）用于表空间。RMAN检测到表空间已更改其名称，并在下次重新同步时更新恢复目录。
                                 </p>
                                 <p><span class="bold">注意：</span> RMAN可以备份和还原由字典管理的临时表空间，但它无法备份本地管理的临时表空间。但是，RMAN会在还原数据库后自动重新创建本地管理的临时表空间。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__I1036865"><span class="bold"><span class="italic">restoreSpecOperand</span></span></p>
                  <p><span class="italic"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBJJGCB">本子</a></span>条款指定<span class="italic"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBJJGCB">restoreObject</a></span>子句的选项。这些参数在<code class="codeph">RESTORE</code>命令级别覆盖具有相同名称的参数。
                  </p>
                  <div class="tblformalwide" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-7A286BD4-5147-4DE8-841F-7567B8D0B30F">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RESTORE command restoreSpecOperand parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d82198e2830">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d82198e2833">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2838" headers="d82198e2830 ">
                                 <p><code class="codeph">CHANNEL</code> <span class="italic"><code class="codeph">channel_id</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2838 d82198e2833 ">
                                 <p>指定用于此还原操作的通道的区分大小写的名称。如果未指定通道，则<code class="codeph">RESTORE</code>将使用使用正确设备类型分配的任何可用通道。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2853" headers="d82198e2830 ">
                                 <p><a id="d82198e2855" class="indexterm-anchor"></a><a id="d82198e2857" class="indexterm-anchor"></a><a id="d82198e2859" class="indexterm-anchor"></a><code class="codeph">FROM AUTOBACKUP</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2853 d82198e2833 ">
                                 <p>恢复控制文件自动备份（参见<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBAFDB">例3-27</a> ）。
                                 </p>
                                 <p>此选项仅对<code class="codeph">RESTORE CONTROLFILE</code>和<code class="codeph">RESTORE SPFILE</code>命令有效。在<code class="codeph">NOCATALOG</code>模式下还原任一类型的文件时，需要<code class="codeph">FROM AUTOBACKUP</code>子句。
                                 </p>
                                 <p>RMAN在当前日或在<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">UNTIL</code>指定的日期开始搜索。在搜索的第一天，搜索从序列号256（或<code class="codeph">MAXSEQ</code>指定的序列号，如果提供）开始，并计数回到序列0。如果在当前或<code class="codeph">SET UNTIL</code>日没有找到自动备份，则RMAN将检查前几天，从序列256开始并重新计数到0。在当前或<code class="codeph">SET UNTIL</code>日之前，搜索将持续到<code class="codeph">MAXDAYS</code>天（默认值为7，最多为366）。如果在<code class="codeph">MAXDAYS</code>天内未找到自动备份，则RMAN发出错误信号并停止命令。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9</a>了解限制和使用说明。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2920" headers="d82198e2830 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBHBIAC">autoBackupOptList</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2920 d82198e2833 ">
                                 <p>指定控制搜索控制文件自动备份的参数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2932" headers="d82198e2830 ">
                                 <p><code class="codeph">   </code> <code class="codeph">'</code> <span class="italic"><code class="codeph">media_handle</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2932 d82198e2833 ">
                                 <p>指定包含控制文件的控制文件副本或备份片的名称。<span class="italic"><code class="codeph">media_handle</code></span>可以是包含控制文件备份的任何备份片段：控制文件备份不需要是自动备份。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEFBD" title="描述在各种情况下恢复控制文件">表3-9</a>了解限制和使用说明。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2960" headers="d82198e2830 ">
                                 <p><code class="codeph">FROM SERVICE</code> <span class="italic"><code class="codeph">service_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2960 d82198e2833 ">
                                 <p>使用通过网络从远程数据库传输的备份来还原数据文件或控制文件。 <span class="italic"><code class="codeph">service_name</code></span>指定远程数据库的服务名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e2976" headers="d82198e2830 ">
                                 <p><code class="codeph">FROM TAG</code> <span class="italic"><code class="codeph">tag_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e2976 d82198e2833 ">
                                 <p>覆盖最新备份或可用文件副本的默认选择。标签将自动选择限制为使用指定标签创建的备份集或文件副本。如果多个备份集或副本具有匹配的标记，则RMAN将选择最新的备份集。标记名称不区分大小写。</p>
                                 <p><span class="bold">另请参阅：</span> <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code>以获取有关如何将标记应用于双工备份集的单个副本的说明，以及有关标记的默认文件名格式的说明。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__BGBHBIAC"><span class="bold"><span class="italic">autoBackupOptList</span></span></p>
                  <p>本小节指定控制搜索控制文件自动备份的参数。</p>
                  <div class="tblformalwide" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-F53EFB76-A84F-4C8B-9261-F596381C8164">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes RESTORE command autoBackupOptList parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d82198e3011">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d82198e3014">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3019" headers="d82198e3011 ">
                                 <p><code class="codeph">DB_NAME</code> <span class="italic"><code class="codeph">database_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e3019 d82198e3014 ">
                                 <p>提供用于搜索控制文件自动备份的<code class="codeph">DB_NAME</code> 。请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD" title="描述使用各种选项从自动备份恢复">表3-10</a>以确定何时设置此参数。
                                 </p>
                                 <p>默认值<a id="d82198e3040" class="indexterm-anchor"></a><a id="d82198e3042" class="indexterm-anchor"></a> <code class="codeph">DB_UNIQUE_NAME</code>初始化参数是<code class="codeph">DB_NAME</code>初始化参数设置。如果没有为目标数据库设置<code class="codeph">DB_UNIQUE_NAME</code>初始化参数，则使用<code class="codeph">RESTORE ...DB_NAME</code>或<code class="codeph">RESTORE ...DB_UNIQUE_NAME</code> 。如果目标数据库的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数设置与<code class="codeph">DB_NAME</code>不同，则使用<code class="codeph">RESTORE ...DB_UNIQUE_NAME</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3072" headers="d82198e3011 ">
                                 <p><code class="codeph">MAXDAYS</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e3072 d82198e3014 ">
                                 <p>将搜索控制文件自动备份限制在指定的天数之内。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3084" headers="d82198e3011 ">
                                 <p><code class="codeph">MAXSEQ</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e3084 d82198e3014 ">
                                 <p>指定控制文件自动备份搜索的最高序列号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3096" headers="d82198e3011 ">
                                 <p><code class="codeph">RECOVERY AREA</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">pathname</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d82198e3096 d82198e3014 ">
                                 <p>指定快速恢复区域的路径以搜索自动备份。<code class="codeph">RECOVERY AREA</code>和<code class="codeph">DB_RECOVERY_FILE_DEST</code>是同义词。请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD" title="描述使用各种选项从自动备份恢复">表3-10</a>以确定何时设置此参数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3123" headers="d82198e3011 "><code class="codeph">DB_RECOVERY_FILE_DEST</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">pathname</code></span> <code class="codeph">'</code></td>
                              <td align="left" valign="top" width="71%" headers="d82198e3123 d82198e3014 ">
                                 <p><code class="codeph">RECOVERY AREA</code>和<code class="codeph">DB_RECOVERY_FILE_DEST</code>是同义词。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3143" headers="d82198e3011 "><code class="codeph">DB_NAME</code> <span class="italic"><code class="codeph">database_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d82198e3143 d82198e3014 ">
                                 <p>提供用于搜索控制文件自动备份的<code class="codeph">DB_NAME</code> 。请参阅<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBGBBD" title="描述使用各种选项从自动备份恢复">表3-10</a>以确定何时设置此参数。
                                 </p>
                                 <p><code class="codeph">DB_UNIQUE_NAME</code>初始化参数的默认值是<code class="codeph">DB_NAME</code>初始化参数设置。如果没有为目标数据库设置<code class="codeph">DB_UNIQUE_NAME</code>初始化参数，则使用<code class="codeph">RESTORE ...DB_NAME</code>或<code class="codeph">RESTORE ...DB_UNIQUE_NAME</code> 。如果目标数据库的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数设置与<code class="codeph">DB_NAME</code>不同，则使用<code class="codeph">RESTORE ...DB_UNIQUE_NAME</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d82198e3189" headers="d82198e3011 "><code class="codeph">   DB_UNIQUE_NAME</code> <code class="codeph">   </code><span class="italic"><code class="codeph">db_unique_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d82198e3189 d82198e3014 ">
                                 <p>指定作为还原操作目标的指定快速恢复区域中数据库的<code class="codeph">DB_UNIQUE_NAME</code> 。
                                 </p>
                                 <p><code class="codeph">DB_UNIQUE_NAME</code>初始化参数的默认值是<code class="codeph">DB_NAME</code>初始化参数设置。如果没有为目标数据库设置<code class="codeph">DB_UNIQUE_NAME</code>初始化参数，则使用<code class="codeph">RESTORE ...DB_NAME</code>或<code class="codeph">RESTORE ...DB_UNIQUE_NAME</code> 。如果目标数据库的<code class="codeph">DB_UNIQUE_NAME</code>初始化参数设置与<code class="codeph">DB_NAME</code>不同，则使用<code class="codeph">RESTORE ...DB_UNIQUE_NAME</code> 。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-ACC21950-8201-4FA4-9121-234121C8C39F">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDGADCD">
                  <p class="titleinexample">示例3-24恢复表空间</p>
                  <p>此示例使表空间脱机，恢复它，然后执行介质恢复。</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户立即离线; RESTORE TABLESPACE用户; RECOVER TABLESPACE用户; ALTER TABLESPACE用户在线;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDFEAAH">
                  <p class="titleinexample">示例3-25为还原的数据文件设置新名称</p>
                  <p>假设包含数据文件<code class="codeph">9</code> <code class="codeph">/disk1</code>遭受介质故障。此示例为数据文件指定新名称，还原它，更新控制文件以使用新名称，将其恢复，然后将其联机：</p><pre class="oac_no_warn" dir="ltr">运行{ALTER DATABASE DATAFILE 9 OFFLINE;将DATAFILE 9的NEWNAME设置为'/disk2/users01.dbf'; RESTORE DATAFILE 9; SWITCH DATAFILE ALL; RECOVER DATAFILE 9; ALTER DATABASE DATAFILE 9 ONLINE; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDGHAJH">
                  <p class="titleinexample">示例3-26使用恢复目录时恢复控制文件</p>
                  <p>假设您要使用标记<code class="codeph">monday_cf_backup</code>恢复控制文件备份。启动RMAN客户端，连接到目标和恢复目录数据库，然后运行以下命令：</p><pre class="oac_no_warn" dir="ltr">当RMAN连接到恢复目录STARTUP FORCE NOMOUNT时，不需要运行{#SET DBID;从TAG'mondday_cf_backup'恢复CONTROLFILE; ALTER DATABASE MOUNT; RESTORE DATABASE;恢复数据库; ALTER DATABASE OPEN RESETLOGS;使用备份控制文件恢复后需要＃</pre><p>RMAN将控制文件还原到其默认位置，并自动将其复制到所有<code class="codeph">CONTROL_FILES</code>位置。RMAN安装控制文件并恢复和恢复数据库。RMAN根据恢复目录中的元数据自动更新控制文件以反映已还原数据库的结构。
                  </p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBAFDB">
                  <p class="titleinexample">示例3-27使用控制文件自动备份恢复数据库</p>
                  <p>假设控制文件和某些数据文件丢失，必须从磁带恢复。由于RMAN在此方案中不使用恢复目录，因此需要<a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3__CHDFHGDI">SET</a> <code class="codeph">DBID</code>命令来标识要还原的控制文件。该示例从磁带还原控制文件，装入数据库，然后还原和恢复数据库。
                  </p><pre class="oac_no_warn" dir="ltr">连接目标/启动力量NOMOUNT; SET DBID 36508508; ＃在NOCATALOG模式下恢复控制文件时需要RUN {ALLOCATE CHANNEL c1 DEVICE TYPE sbt;从AUTOBACKUP恢复CONTROLFILE; ALTER DATABASE MOUNT; RESTORE DATABASE;恢复数据库; ALTER DATABASE OPEN RESETLOGS;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-C8B73D43-EF8C-44F6-825F-1BC8730CB692">
                  <p class="titleinexample">示例3-28将控制文件自动备份还原到非缺省位置</p>
                  <p>此示例是<a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDBAFDB">示例3-27</a>的变体。在此方案中，控制文件自动备份位于非默认位置的磁盘上。RMAN开始搜索序列号为20的备份，并向后搜索5个月：</p><pre class="oac_no_warn" dir="ltr">CONNECT TARGET / STARTUP FORCE NOMOUNT SET DBID 36508508; ＃在NOCATALOG模式下恢复控制文件时需要RUN {设备类型磁盘的SET CONTROLFILE AUTOBACKUP格式为'/ disk1 / prod_cf_auto_％F';从AUTOBACKUP MAXSEQ 20 MAXDAYS 150恢复CONTROLFILE到'/tmp/cf_auto.dbf'; ALTER DATABASE MOUNT; RESTORE DATABASE;恢复数据库; ALTER DATABASE OPEN RESETLOGS;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-24D7B81E-CECC-44EF-B6B7-6DD2F4766423">
                  <p class="titleinexample">示例3-29恢复存储在磁带或Oracle Cloud上的控制文件自动备份</p>
                  <p>根据备份计划在磁盘上创建数据库备份。已启用控制文件自动备份，但未使用恢复目录。随后，使用<code class="codeph">BACKUP BACKUPSET ALL</code>命令将这些备份集备份到Oracle Cloud。此示例使用在Oracle Cloud上创建的自动备份还原控制文件。RMAN扫描磁盘和Oracle云备份，然后检索最新的控制文件自动备份。您必须为Oracle Cloud配置一个磁盘通道和一个SBT通道。
                  </p><pre class="pre codeblock"><code>RUN {SET DBID 1928835918; ALLOCATE CHANNEL disk1 DEVICE TYPE DISK; ALLOCATE CHANNEL sbt1设备类型'SBT_TAPE'参数'SBT_LIBRARY = / disk1 / oss / libopc.so ENV =（OPC_PFILE = / disk1 / oss / opc_sbt.ora）';从AUTOBACKUP恢复CONTROLFILE; }</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-24AA3226-F3F0-4E61-B8AC-A9F5DE32B281">
                  <p class="titleinexample">示例3-30恢复服务器参数文件自动备份到当前位置</p>
                  <p>以下一系列命令以<code class="codeph">NOCATALOG</code>模式还原当前服务器参数文件，然后使用还原的服务器参数文件启动实例。
                  </p><pre class="oac_no_warn" dir="ltr">CONNECT TARGET / SET DBID 1620189241; ＃将dbid设置为目标数据库的dbid STARTUP FORCE NOMOUNT; #start instance with dummy SPFILE RUN {ALLOCATE CHANNEL c1 DEVICE TYPE sbt;从AUTOBACKUP恢复SPFILE; ＃FROM AUTOBACKUP在NOCATALOG模式下需要STARTUP FORCE; #recovery with restored SPFILE}</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDEFIAA">
                  <p class="titleinexample">示例3-31预览备份</p>
                  <p>此示例显示<code class="codeph">RESTORE ...的结果<code class="codeph">RESTORE ...PREVIEW</code>命令，用于标识RMAN选择用于还原存档重做日志文件的备份集。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE ARCHIVELOG所有设备类型sbt预览;在01-MAR-13发布通道开始恢复：ORA_SBT_TAPE_1已分配通道：ORA_SBT_TAPE_1通道ORA_SBT_TAPE_1：SID = 85设备类型= SBT_TAPE通道ORA_SBT_TAPE_1：Oracle安全备份备份集列表============== ===== BS密钥大小设备类型经过时间完成时间------- ---------- ----------- -------- ---- --------------- 53 1.25M SBT_TAPE 00:00:18 01-MAR-13 BP Key：53状态：AVAILABLE压缩：无标签：TAG20130301T150155手柄：2aibhej3_1_1媒体：RMAN-DEFAULT-000001备份集中的存档日志列表53 Thrd Seq低SCN低时间下一个SCN下一次---- ------- ---------- ----- ---- ---------- --------- 1 8 526376 01-MAR-13 527059 01-MAR-13 1 9 527059 01-MAR-13 527074 01-MAR- 13 1 10 527074 01-MAR-13 527091 01-MAR-13 1 11 527091 01-MAR-13 527568 01-MAR-13 1 12 527568 01-MAR-13 527598 01-MAR-13验证成功备份件完成恢复在1月1日至3月13日</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDDHJHH">
                  <p class="titleinexample">示例3-32从非现场存储中调用非现场备份</p>
                  <p>与媒体管理器一起使用时，它会报告有关备份的异地存储的信息，并支持调用异地备份， <code class="codeph">RESTORE ...PREVIEW RECALL</code>请求从异地存储中调用从备份还原归档重做日志文件所需的任何介质。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE ARCHIVELOG ALL PREVIEW RECALL;使用通道ORA_DBK_1使用通道ORA_DISK_1在10-JUN-13开始恢复ORA_SBT_TAPE_1备份集列表=================== BS密钥大小设备类型经过时间完成时间---- --- ---------- ----------- ------------ -------------- -  31 12.75M SBT_TAPE 00:00:02 10-JUN-13 BP密钥：33状态：可用压缩：无标签：TAG20130610T152755句柄：15gmknbs媒体：/ v1,15gmknbs备份集中的存档日志列表31 Thrd Seq低SCN低下一次SCN的下一次---- ------- ---------- --------- ---------- ----- ---- 1 1 221154 06-JUN-13 222548 06-JUN-13 1 2 222548 06-JUN-13 222554 06-JUN-13 1 3 222554 06-JUN-13 222591 06-JUN-13 1 4 222591 06 -JUN-13 246629 07-JUN-13 1 5 246629 07-JUN-13 262451 10-JUN-13 BS密钥尺寸设备类型经过时间完成时间------- ---------- ----------- ------------ --------------- 32 256.00K SBT_TAPE 00:00:01 10-JUN -13 BP Key：34状态：AVAILABLE压缩：无标签：TAG20130610T153105句柄：17gmknhp_1_1媒体：/ v1,17gmknhp_1_1 b中的存档日志列表ackup设置32 Thrd Seq低SCN低时间下一个SCN下一次---- ------- ---------- --------- ------- --- --------- 1 6 262451 10-JUN-13 262547 10-JUN-13 1 7 262547 10-JUN-13 262565 10-JUN-13启动召回以下异地备份文件列表================================================== ========句柄：15gmknbs媒体：/ v1,15gmknbs在10-JUN-13完成恢复</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CHDHIEJA">
                  <p class="titleinexample">示例3-33验证备份的还原</p>
                  <p>以下示例说明如何使用<code class="codeph">RESTORE...VALIDATE</code>确认恢复数据库所需的备份存在于磁盘或磁带，可读的，并没有损坏：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; RESTORE DATABASE VALIDATE;使用通道ORA_DISK_1分配的通道在0-MAR-13开始恢复：ORA_SBT_TAPE_1通道ORA_SBT_TAPE_1：SID = 85设备类型= SBT_TAPE通道ORA_SBT_TAPE_1：Oracle安全备份通道ORA_DISK_1：开始验证数据文件备份集通道ORA_DISK_1：从备份片/ disk2读取/ PROD / backupset / 2013_03_01 / o1_mf_nnndf_TAG20130301T161038_2ygtvzg0_.bkp channel ORA_DISK_1：piece handle = / disk2 / PROD / backupset / 2013_03_01 / o1_mf_nnndf_TAG20130301T161038_2ygtvzg0_.bkp tag = TAG20130301T161038 channel ORA_DISK_1：恢复备份1通道ORA_DISK_1：验证完成，已用时间：00：00： 16完成恢复于01-MAR-13</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-F3A8E3B5-91C6-4528-994C-2BEB2DB49A33">
                  <p class="titleinexample">示例3-34使用备用数据库恢复主数据库上的数据文件</p>
                  <p>此示例通过网络从备用数据库恢复在主数据库上丢失的数据文件<code class="codeph">users.dbf</code> ：</p><pre class="oac_no_warn" dir="ltr">RESTORE DATAFILE'/oradata/files/users.dbf' FROM SERVICE standby_tns SECTION SIZE 200M使用COMPRESSED BACKUPSET;</pre><p>包含要还原的数据文件的远程数据库的服务名称是<code class="codeph">standby_tns</code> 。<code class="codeph">SECTION SIZE</code>子句指示使用多节备份集还原数据文件。<code class="codeph">USING COMPRESSED BACKUPSET</code>子句指定使用为RMAN配置的默认压缩算法压缩备份集。</p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-4A098666-190F-41FD-8F74-FA59042AEBE2">
                  <p class="titleinexample">示例3-35从跨平台数据库备份还原数据库</p>
                  <p>此示例使用在<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBECGFG">示例2-34</a>中创建的跨平台备份还原数据库。此备份是在Microsoft Windows IA（32位）平台上创建的，并且正在Linux x86 64位上进行还原。包含数据库的备份集存储在<code class="codeph">/tmp/xplat_restores/full_db.bck</code> 。已恢复的数据文件使用以<code class="codeph">df_</code>开头的唯一文件名存储在<code class="codeph">/oradata/datafiles</code></p><pre class="oac_no_warn" dir="ltr">从平台恢复'Microsoft Windows IA（32位）'所有外国数据文件格式'/ oradata / datafiles / df_％U'从BACKUPSET'/ tmp / xplat_restores / full_db.bck';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-30865953-C561-49AF-AC5A-3310E3BF6431">
                  <p class="titleinexample">示例3-36从跨平台表空间备份还原表空间</p>
                  <p>此示例从<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBJFJAC">示例2-35中</a>创建的跨平台备份还原表空间<code class="codeph">example</code> 。包含要还原的表空间的备份集存储在<code class="codeph">/tmp/xplat_restores/example_readonly.bck</code> 。已还原的数据文件使用与<code class="codeph">example_readonly_</code>一起使用的唯一名称。将此表空间插入目标数据库所需的元数据存储在备份集<code class="codeph">/tmp/xplat_restores/example_dmp.bck</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">RESTORE FOREIGN TABLESPACE示例格式'/ tmp / xplat_restores / example_readonly_％U_％n'来自BACKUPSET'/ tmp / xplat_restores / example_readonly.bck'DUMP FILE DATAPUMP DESTINATION'/ tmp / datapump'FROM BACKUPSET'/tmp/xplat_restores/example_dmp.bck “;</pre><div class="infoboxnotealso" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-CE4AC678-A9C0-4AB7-9DF0-23AFD016AF6B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../bradv/rman-transporting-data-across-platforms.html#BRADV-GUID-7E1B3B10-CDA2-4E79-9F4C-AC8E51BCDE54" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a> ，提供备份和还原多个表空间的示例</p>
                  </div>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-0D8CF88F-B6D9-4EBD-91F9-14995B61CFFB">
                  <p class="titleinexample">示例3-37使用由多个备份集组成的跨平台备份还原表空间</p>
                  <p>此示例从跨平台备份还原表空间<code class="codeph">example</code> ，该备份包含在<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBFJIGG">示例2-36</a>中创建的多个备份集。您必须为每个备份集使用单独的<code class="codeph">BACKUPSET</code>子句。必须按照创建顺序列出备份集，从第一个备份集开始。
                  </p><pre class="oac_no_warn" dir="ltr">RESTORE BACKUPSET '/ TMP / xplat_restores / db_multiple_59nkcln6_1_1' BACKUPSET '/ TMP / xplat_restores / db_multiple_5ankcln7_1_1' BACKUPSET '/ TMP / xplat_restores / db_multiple_5bnkcln8_1_1' BACKUPSET '/ TMP / xplat_restores / db_multiple_5cnkcln9_1_1' 转储文件FROM BACKUPSET“/tmp/xplat_restores/db_multiple.dmp “;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__CFADGAFF">
                  <p class="titleinexample">示例3-38使用包含多个备份片的跨平台一致性备份还原表空间</p>
                  <p>此示例从跨平台备份还原表空间<code class="codeph">example</code> ，该备份包含在<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBCECEE">示例2-37</a>中创建的多个备份片段。包含表空间元数据的导出转储文件存储在<code class="codeph">/tmp/xplat_restores/example_mutli-piece_dmp.bck</code> 。<code class="codeph">FROM BACKUPSET</code>子句包含所有备份片段的逗号分隔列表。按照创建备份的顺序列出备份件。
                  </p><pre class="oac_no_warn" dir="ltr">RESTORE FOREIGN TABLESPACE销售FORMAT'/ tmp / xplat_restores / datafiles / example_mult_％u'FROM BACKUPSET'/ tmp / xplat_restores / example_multi-piece_0lnjnujs_1_1'，'/ tmp / xplat_restores / example_multi-piece_0lnjnujs_2_1'，'/ tmp / xplat_restores / example_multi-piece_0lnjnujs_3_1 '来自BACKUPSET的DUMP文件'/tmp/xplat_restores/example_multi-piece_dmp.bck';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-8C951D9D-F006-4F24-98EB-230D83085F77">
                  <p class="titleinexample">示例3-39恢复跨平台不一致的表空间备份</p>
                  <p>此示例从<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__BGBEJBGF">示例2-38中</a>创建的跨平台不一致备份还原表空间<code class="codeph">example</code> 。使用以<code class="codeph">inconsist_</code>开头的唯一名称存储还原的数据文件。由于在创建备份时表空间不是只读的，因此无法将其直接插入目标数据库。当表空间只读取到恢复的外部数据文件时，必须对表空间应用增量备份。
                  </p><pre class="oac_no_warn" dir="ltr">RESTORE FOREIGN TABLESPACE示例FORMAT'/ tmp / xplat_restores / datafiles / inconsist_％u'FROM BACKUPSET'/tmp/xplat_backups/example_inconsist.bck';</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-337C1520-09A8-4B2F-9372-C029D4ADCD3E">
                  <p class="titleinexample">示例3-40 <span class="bold">使用PDB的跨平台备份将PDB还原到新CDB</span></p>
                  <p></p>
                  <p>此示例还原目标CDB上的可插拔数据库（PDB） <code class="codeph">pdb3</code>的跨平台备份。目标CDB和源CDB位于不同的平台上，但使用相同的endian格式。
                  </p>
                  <p>目标CDB以读写模式打开。包含源PDB的跨平台备份的备份集存储在<code class="codeph">/u02/backups/backup_full_pdb3.bck</code> 。将源PDB插入目标CDB所需的元数据存储在<code class="codeph">/u02/backups/metadata_pdb3.xml</code> 。<code class="codeph">FILE_NAME_CONVERT</code>子句指定必须如何在目标CDB中重命名源CDB上的文件名。</p><pre class="pre codeblock"><code>从PLATFORM恢复'Linux x86 64位'使用'/u02/backups/metadata_pdb3.xml'FILE_NAME_CONVERT =（'/ u01 / oradata'，'/ u02 / oradata / cdb'）FOREIGN PLUGGABLE DATABASE pdb3 FORMAT'/ u02 / oradata / cdb / pdb3_％U'FROM BACKUPSET'/u02/backups/backup_full_pdb3.bck';</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-A97F11DD-1E97-43A9-A857-4D2E87EA236E">
                  <p class="titleinexample">示例3-41使用加密将内部部署数据库移动到Oracle Cloud</p>
                  <p></p>
                  <p>此示例通过还原数据库备份将内部部署数据库移动到Oracle Cloud。内部部署数据库不使用加密，数据库备份也不加密。但是，Oracle Cloud上的数据库必须使用加密。因此，为了保持一致性和安全性，必须使用加密在Oracle Cloud上恢复未加密数据库的备份。您可以通过使用<code class="codeph">AS ENCRYPTED</code>子句和<code class="codeph">RESTORE</code>命令来实现此目的。必须在<code class="codeph">RESTORE...之前打开Oracle密钥库<code class="codeph">RESTORE...AS ENCRYPTED</code>命令运行。
                  </p>
                  <p>内部部署数据库的<code class="codeph">COMPATIBLE</code>参数设置为12.2，并且<code class="codeph">COMPATIBLE</code>设置为12.2创建备份。以下命令还原未加密的备份以在Oracle Cloud上通过加密创建数据库：</p><pre class="pre codeblock"><code>SELECT ts＃，encryptionalg，encryptedts，key_version，status FROM v $ encrypted_tablespaces; STARTUP FORCE MOUNT; RESTORE DATABASE as ENCRYPTED;恢复数据库; ALTER DATABASE OPEN;</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B__GUID-1C6A58BB-9484-4EDF-A9CB-8B0CE2ECB61C">
                  <p class="titleinexample">示例3-42将数据库从Oracle Cloud移动到内部部署模型</p>
                  <p></p>
                  <p>此示例将数据库从使用加密的Oracle Cloud移动到内部部署模型。由于加密对于内部部署数据库不是必需的，因此您决定在不使用加密的情况下从Oracle Cloud还原加密的备份。使用<code class="codeph">RESTORE</code>命令的<code class="codeph">AS DECRYPTED</code>子句执行此还原操作。
                  </p>
                  <p>内部部署数据库的<code class="codeph">COMPATIBLE</code>参数设置为12.2。使用<code class="codeph">COMPATIBLE</code>设置为12.2创建备份。以下命令将加密的备份从Oracle Cloud还原到内部部署数据库，而不使用加密：</p><pre class="pre codeblock"><code>SELECT ts＃，encryptionalg，encryptedts，key_version，status FROM v $ encrypted_tablespaces; STARTUP FORCE MOUNT; RESTORE DATABASE as DECRYPTED RECOVER DATABASE; ALTER DATABASE OPEN;</code></pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="05480.creating-and-configuring-a-cdb.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Creating and configuring a  multitenant container database (CDB) includes tasks such as planning, creating the CDB, and optionally configuring EM Express."></meta>
      <meta name="description" content="Creating and configuring a  multitenant container database (CDB) includes tasks such as planning, creating the CDB, and optionally configuring EM Express."></meta>
      <title>创建和配置CDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="Creating and configuring a  multitenant container database (CDB) includes tasks such as planning, creating the CDB, and optionally configuring EM Express."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="overview-of-managing-a-multitenant-environment.html" title="Previous" type="text/html"></link>
      <link rel="next" href="creating-pdbs.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="overview-of-managing-a-multitenant-environment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="creating-pdbs.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="creating-and-configuring-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">创建和配置多租户环境</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建和配置CDB</li>
            </ol>
            <a id="GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" name="GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215"></a><a id="ADMIN13514"></a>
            
            <h2 id="MULTI-GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" class="sect2"><span class="enumeration_chapter">4</span>创建和配置CDB</h2>
         </header>
         <div class="ind">
            <div>
               <p>创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。</p>
               <p>本节包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-A79B2572-10FA-4AC1-91BD-7A6F9512C80C">关于创建CDB</a><br>创建多租户容器数据库（CDB）的过程类似于创建非CDB的过程。</li>
                  <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555">规划CDB创作</a><br>CDB创建准备多个操作系统文件作为CDB一起工作。</li>
                  <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-25F77431-C454-4B2A-8083-21165E59549A">创建CDB</a><br>您可以使用DBCA或手动发出<code class="codeph">CREATE DATABASE</code> SQL语句来创建CDB。
                  </li>
                  <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009">为CDB配置EM Express</a><br>对于CDB，您可以通过设置全局HTTPS端口为根和每个PDB配置Oracle Enterprise Manager Database Express（EM Express），也可以为CDB中的每个容器设置不同的端口。</li>
                  <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078">创建CDB之后</a><br>创建后，CDB由根和PDB种子组成。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="creating-and-configuring-a-multitenant-environment.html#GUID-21128F70-E47F-47BD-9294-982A1A6B29B9" title="您可以创建和配置多租户环境。">创建和配置多租户环境</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-A79B2572-10FA-4AC1-91BD-7A6F9512C80C" name="GUID-A79B2572-10FA-4AC1-91BD-7A6F9512C80C"></a><h3 id="MULTI-GUID-A79B2572-10FA-4AC1-91BD-7A6F9512C80C" class="sect3"><span class="enumeration_section">4.1</span>关于创建CDB</h3>
               <div>
                  <p>创建多租户容器数据库（CDB）的过程类似于创建非CDB的过程。</p>
                  <p>“ <a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-807DE711-C82C-4BB2-8C31-5EE89CA71349" target="_blank"><span><cite>Oracle数据库管理员指南”中</cite></span></a>介绍了创建非CDB的过程。在创建CDB之前，您必须了解本文档中描述的概念和任务。
                  </p>
                  <p>本章介绍了创建CDB的特殊注意事项。本章还介绍了在<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-807DE711-C82C-4BB2-8C31-5EE89CA71349" target="_blank"><span><cite>Oracle数据库管理员指南中</cite></span></a>创建非CDB的过程与创建CDB的过程之间的差异。</p>
                  <p>使用<span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555" title="CDB creation prepares several operating system files to work together as a CDB.">规划CDB创建</a> ”中</span>提供的一些准则<span class="q"><a href="creating-and-configuring-a-cdb.html#GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555" title="CDB创建准备多个操作系统文件作为CDB一起工作。">规划CDB后</a></span> ，可以在安装Oracle数据库软件期间或之后创建CDB。以下是安装后创建CDB的典型原因：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您使用Oracle Universal Installer（OUI）仅安装软件，并且未创建CDB。</p>
                     </li>
                     <li>
                        <p>您希望在与现有CDB或现有非CDB相同的主机上创建另一个CDB。在本例中，本章假定新CDB使用与现有数据库相同的Oracle主目录。您还可以通过再次运行OUI在新的Oracle主目录中创建CDB。</p>
                     </li>
                  </ul>
                  <p>创建CDB的具体方法是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用Database Configuration Assistant（DBCA），一个图形工具。</p>
                        <p>请参阅<span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-2ACFB225-F895-4B6F-B601-F09A388A4449" title="Oracle强烈建议使用Database Configuration Assistant（DBCA）来创建CDB。">关于使用DBCA创建CDB</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">CREATE DATABASE</code> SQL语句。
                        </p>
                        <p>请参阅<span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-25F77431-C454-4B2A-8083-21165E59549A" title="您可以使用DBCA或手动发出CREATE DATABASE SQL语句来创建CDB。">创建CDB</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。">创建和配置CDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555" name="GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555"></a><h3 id="MULTI-GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555" class="sect3"><span class="enumeration_section">4.2</span> CDB创建计划</h3>
               <div>
                  <p>CDB创建准备多个操作系统文件作为CDB一起工作。</p>
                  <div class="infoboxnote" id="GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555__GUID-8AE91970-29C1-4029-809F-2CC8EF56BF89">
                     <p class="notep1">注意：</p>
                     <p>在规划CDB之前，请在<span class="q">“ <a href="introduction-to-the-multitenant-architecture.html#GUID-267F7D12-D33F-4AC9-AA45-E9CD671B6F22" title="熟悉Oracle Multitenant选项。">多租户架构简介</a> ”中</span>查看有关CDB和PDB的概念信息。
                     </p>
                  </div>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909">决定如何配置CDB</a><br>准备通过研究和精心规划来创建CDB。
                     </li>
                     <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-E5B7C444-1961-4719-AE75-1FD6C295189F">CDB创建的先决条件</a><br>您必须在创建新CDB之前完成先决条件。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。">创建和配置CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-144959A9-50EB-4A94-AF36-49FA8A379909" name="GUID-144959A9-50EB-4A94-AF36-49FA8A379909"></a><h4 id="MULTI-GUID-144959A9-50EB-4A94-AF36-49FA8A379909" class="sect4"><span class="enumeration_section">4.2.1</span>决定如何配置CDB</h4>
                  <div>
                     <p>准备通过研究和精心规划来创建CDB。</p>
                     <p>作为第一步，请参阅<a href="../rnrdm/index.html" target="_blank"><span><cite>Oracle数据库发行说明</cite></span></a> ，其中包括CDB当前不支持的Oracle数据库功能列表。如果必须使用这些功能中的一个或多个，请创建非CDB。</p>
                     <p>以下部分描述了适用于CDB的建议操作和注意事项：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-5455ED65-9E83-4C96-9556-C67B48B03410">规划PDB</a><br>规划可插拔数据库（PDB）的表和索引，并估计它们所需的空间量。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-5A21937A-D0FA-4EE1-9C44-BC5EB4FCBCC2">规划物理布局</a><br>规划CDB将包含的基础操作系统文件的布局。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F">了解如何管理初始化参数</a><br>熟悉可以包含在初始化参数文件中的初始化参数。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-17F7AB91-4090-402F-8AEA-40B7218709F7">选择字符集</a><br>您必须为CDB选择一个字符集。</li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-516C1387-E354-4960-A0E6-36C2AFD12A6E">决定支持哪个时区</a><br>考虑您的CDB必须支持哪些时区。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-8D4DAE59-8AFB-495C-8EE6-B5CB5AED2EDE">选择数据库和重做日志块大小</a><br>选择CDB的标准数据库块大小。</li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-E670BDB7-8BBB-4283-919F-840E883BEEF8">规划SYSTEM和SYSAUX表空间</a><br>CDB根和每个PDB都有一个单独的<code class="codeph">SYSAUX</code>和<code class="codeph">SYSTEM</code>表空间。</li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-A976FE53-2BFA-4A80-B570-563391396DE9">规划临时表空间</a><br>计划使用默认临时表空间。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-EC8912EB-8389-4B97-8B9A-90F817D1785C">选择撤消模式</a><br>计划使用撤消表空间来管理撤消数据。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-3A8DD596-4730-4DE0-9680-AC13C9EA03F9">为您的应用程序规划服务</a><br>规划满足应用程序需求所需的数据库服务。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-7FD9AA57-016C-49A1-85F5-4C9AD74FAEDB">了解如何启动和关闭CDB</a><br>熟悉启动和关闭数据库实例以及安装和打开CDB的原则和选项。</li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-A905D497-8331-4A25-9DAE-B5976E80E3C8">规划Oracle RAC</a><br>如果您计划使用Oracle RAC，请计划Oracle RAC环境。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555" title="CDB创建准备多个操作系统文件作为CDB一起工作。">规划CDB创建</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-5455ED65-9E83-4C96-9556-C67B48B03410" name="GUID-5455ED65-9E83-4C96-9556-C67B48B03410"></a><h5 id="MULTI-GUID-5455ED65-9E83-4C96-9556-C67B48B03410" class="sect5"><span class="enumeration_section">4.2.1.1</span>规划PDB</h5>
                     <div>
                        <p>规划可插拔数据库（PDB）的表和索引，并估计它们所需的空间量。</p>
                        <p>在CDB中，大多数用户数据驻留在PDB中。根目录不包含用户数据或最小用户数据。规划将成为国家开发银行一部分的PDB。 CDB的磁盘存储空间要求是Oracle数据库安装所需的空间加上将成为CDB一部分的所有PDB的空间要求总和。</p>
                        <p><code class="codeph">MAX_PDBS</code>初始化参数指定可以在CDB根或应用程序根目录中创建的PDB总数的限制。<code class="codeph">MAX_PDBS</code>的默认值和最大值取决于您的Oracle数据库产品。有关不同版本和服务支持哪些功能的详细信息，请参阅“ <a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle数据库许可信息用户手册</cite></span></a> ”。
                        </p>
                        <p>您还可以在CDB中创建应用程序容器。应用程序容器是应用程序PDB的集合，用于存储一个或多个应用程序的数据。此外，应用程序容器支持用户创建的应用程序公共对象，这些对象可以由应用程序容器中的应用程序PDB共享。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5455ED65-9E83-4C96-9556-C67B48B03410__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-5455ED65-9E83-4C96-9556-C67B48B03410__UL_M53_TCW_NGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="overview-of-the-multitenant-architecture.html#GUID-B964031E-8ACE-4603-8F1E-DD173BE5BA01" title="在应用程序容器中，应用程序是存储在应用程序根目录中的命名的，版本化的公共数据和元数据集。">应用程序容器中的应用程序概述</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span><cite>Oracle数据库管理员指南</cite></span> ，了解有关<a href="../admin/oracle-database-structure-and-storage.html#ADMIN-GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a>和<a href="../admin/schema-objects.html#ADMIN-GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" target="_blank">架构对象的更多信息</a></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/MAX_PDBS.html#GUID-55526BAC-DCB2-4C76-9ACF-1E3D2047E267" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">MAX_PDBS</code>更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-5A21937A-D0FA-4EE1-9C44-BC5EB4FCBCC2" name="GUID-5A21937A-D0FA-4EE1-9C44-BC5EB4FCBCC2"></a><h5 id="MULTI-GUID-5A21937A-D0FA-4EE1-9C44-BC5EB4FCBCC2" class="sect5"><span class="enumeration_section">4.2.1.2</span>规划物理布局</h5>
                     <div>
                        <p>规划CDB将包含的基础操作系统文件的布局。</p>
                        <p>CDB根， <code class="codeph">PDB$SEED</code> ，每个PDB，每个应用程序根和每个应用程序PDB都有单独的数据文件。</p>
                        <p>单实例CDB有一个重做日志，或者Oracle Real Application Clusters（Oracle RAC）CDB的每个实例都有一个重做日志。此外，对于Oracle RAC，所有数据文件和重做日志文件都必须位于共享存储上。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5A21937A-D0FA-4EE1-9C44-BC5EB4FCBCC2__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-5A21937A-D0FA-4EE1-9C44-BC5EB4FCBCC2__UL_M53_TCW_NGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="overview-of-the-multitenant-architecture.html#GUID-B964031E-8ACE-4603-8F1E-DD173BE5BA01" title="在应用程序容器中，应用程序是存储在应用程序根目录中的命名的，版本化的公共数据和元数据集。">应用程序容器中的应用程序概述</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关Oracle数据库结构和存储的信息，请参见<a href="../admin/oracle-database-structure-and-storage.html#ADMIN-GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../admin/schema-objects.html#ADMIN-GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关架构对象的信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F" name="GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F"></a><h5 id="MULTI-GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F" class="sect5"><span class="enumeration_section">4.2.1.3</span>了解如何管理初始化参数</h5>
                     <div>
                        <p>熟悉可以包含在初始化参数文件中的初始化参数。</p>
                        <p>在创建CDB之前，请确保您熟悉服务器参数文件（SPFILE）的概念和操作。SPFILE文件允许您在服务器端二进制文件中持久存储和管理初始化参数。</p>
                        <p>CDB使用单个SPFILE或单个文本初始化参数文件（PFILE）。为根设置的初始化参数的值可以由PDB继承。您可以使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句为PDB设置一些初始化参数。
                        </p>
                        <p>当您操作SPFILE时，CDB根目录必须是当前容器。创建或修改SPFILE的用户必须是具有<code class="codeph">SYSDBA</code> ， <code class="codeph">SYSOPER</code>或<code class="codeph">SYSBACKUP</code>管理权限的公共用户，并且用户必须分别通过连接<code class="codeph">AS SYSDBA</code> ， <code class="codeph">AS SYSOPER</code>或<code class="codeph">AS SYSBACKUP</code>来行使权限。
                        </p>
                        <p>以下初始化参数很重要：</p>
                        <ul id="GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F__UL_XBN_1FW_NGB" style="list-style-type:disc">
                           <li>
                              <p>要创建CDB，必须将<code class="codeph">ENABLE_PLUGGABLE_DATABASE</code>初始化参数设置为<code class="codeph">TRUE</code> 。</p>
                           </li>
                           <li>
                              <p>通过设置<code class="codeph">DB_NAME</code>和<code class="codeph">DB_DOMAIN</code>初始化参数，为CDB根创建全局数据库名称。根的全局数据库名称是CDB的全局数据库名称。 PDB的全局数据库名称由PDB名称和<code class="codeph">DB_DOMAIN</code>初始化参数定义。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-12ADA04D-F81D-4579-A68C-0958CC7D6C2F__UL_M53_TCW_NGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="CDB中每个容器中的数据字典是独立的，当前容器是其数据字典用于名称解析和权限授权的容器。">关于当前的容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95" title="要在系统级别修改CDB，请使用ALTER SYSTEM语句。">使用ALTER SYSTEM修改CDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-6BF52FD2-AD0D-469F-AD2B-E5254FB9AD72" title="在CDB中，一些初始化参数适用于根和所有PDB。当这样的初始化参数改变时，它会影响整个CDB。您可以将其他初始化参数设置为每个容器中的不同值。">在PDB中列出可修改的初始化参数</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/schema-objects.html#ADMIN-GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关架构对象的信息</p>
                              </li>
                              <li>
                                 <p>有关确定全局数据库名称的信息，请参见“ <a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-9698EA9B-013C-40AC-8CFB-12171A4B4974" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/initialization-parameters-2.html#GUID-FD266F6F-D047-4EBB-8D96-B51B1DCA2D61" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-17F7AB91-4090-402F-8AEA-40B7218709F7" name="GUID-17F7AB91-4090-402F-8AEA-40B7218709F7"></a><h5 id="MULTI-GUID-17F7AB91-4090-402F-8AEA-40B7218709F7" class="sect5"><span class="enumeration_section">4.2.1.4</span>选择字符集</h5>
                     <div>
                        <p>您必须为CDB选择一个字符集。</p>
                        <p>为CDB选择数据库字符集时，必须考虑要合并（插入）到此CDB的数据库的当前字符集。 Oracle建议CD32数据库字符集使用AL32UTF8，CDB国家字符集使用AL16UTF6，因为它们提供了最大的灵活性。</p>
                        <p>当CDB根的字符集是AL32UTF8时，插入CDB的PDB可以具有与CDB根不同的字符集。从<code class="codeph">PDB$SEED</code>创建的<code class="codeph">PDB$SEED</code>从其继承AL32UTF8字符集，但您可以将PDB迁移到其他字符集。当根的字符集不是AL32UTF8时，CDB中的所有PDB都使用CDB根的字符集。
                        </p>
                        <p>将非CDB移动到CDB时，最好先将非CDB迁移到AL32UTF8。您可以使用Oracle Database Migration Assistant for Unicode（DMU）将非CDB迁移到AL32UTF8。创建CDB后，无法使用DMU迁移CDB的字符集。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-17F7AB91-4090-402F-8AEA-40B7218709F7__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../nlspg/choosing-character-set.html#GUID-09777A99-B7DD-4695-9B2B-278122131000" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-516C1387-E354-4960-A0E6-36C2AFD12A6E" name="GUID-516C1387-E354-4960-A0E6-36C2AFD12A6E"></a><h5 id="MULTI-GUID-516C1387-E354-4960-A0E6-36C2AFD12A6E" class="sect5"><span class="enumeration_section">4.2.1.5</span>确定要支持的时区</h5>
                     <div>
                        <p>考虑您的CDB必须支持哪些时区。</p>
                        <p>您可以设置整个CDB的时区（包括所有PDB）。您还可以为每个PDB单独设置时区。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-516C1387-E354-4960-A0E6-36C2AFD12A6E__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <p>有关指定数据库时区和时区文件的信息，请参见“ <a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-E331FC80-451A-4775-B58E-BBFEEBAC3C93" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-8D4DAE59-8AFB-495C-8EE6-B5CB5AED2EDE" name="GUID-8D4DAE59-8AFB-495C-8EE6-B5CB5AED2EDE"></a><h5 id="MULTI-GUID-8D4DAE59-8AFB-495C-8EE6-B5CB5AED2EDE" class="sect5"><span class="enumeration_section">4.2.1.6</span>选择“数据库”和“重做日志块大小”</h5>
                     <div>
                        <p>选择CDB的标准数据库块大小。</p>
                        <p>这是在DBB创建时通过<code class="codeph">DB_BLOCK_SIZE</code>初始化参数指定的，并且在创建CDB后无法更改。标准块大小适用于整个CDB。</p>
                        <p>如果计划在具有4K字节扇区大小的磁盘上存储联机重做日志文件，请确定是否必须手动指定联机重做日志块大小。</p>
                        <ul id="GUID-8D4DAE59-8AFB-495C-8EE6-B5CB5AED2EDE__UL_RYK_RHW_NGB" style="list-style-type:disc">
                           <li>
                              <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-55124C2D-98FF-4305-8F25-58245C9BEC1E" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关指定数据库块大小的信息</p>
                           </li>
                           <li>
                              <p>有关规划重做日志文件的块大小的信息，请参见<a href="../admin/managing-the-redo-log.html#ADMIN-GUID-AC858C69-317E-4193-838D-59F8DDEA1927" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E670BDB7-8BBB-4283-919F-840E883BEEF8" name="GUID-E670BDB7-8BBB-4283-919F-840E883BEEF8"></a><h5 id="MULTI-GUID-E670BDB7-8BBB-4283-919F-840E883BEEF8" class="sect5"><span class="enumeration_section">4.2.1.7</span>规划SYSTEM和SYSAUX表空间</h5>
                     <div>
                        <p>CDB根和每个PDB都有一个单独的<code class="codeph">SYSAUX</code>和<code class="codeph">SYSTEM</code>表空间。</p>
                        <p>您必须为<code class="codeph">SYSAUX</code>表空间确定适当的初始大小。此外，计划为非<code class="codeph">SYSTEM</code>用户使用默认表空间，以防止无意中在<code class="codeph">SYSTEM</code>表空间中保存数据库对象。您可以为CDB根和每个PDB指定单独的默认表空间。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E670BDB7-8BBB-4283-919F-840E883BEEF8__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-E670BDB7-8BBB-4283-919F-840E883BEEF8__UL_EBP_PMW_NGB" style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">SYSAUX</code>表空间的信息，请<code class="codeph">SYSAUX</code> <a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-C70E0886-7D9A-4B0D-BA0B-DF71AB5A2154" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关创建默认永久表空间的信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-4EBA1922-B701-4009-B662-6A17B314E2E9" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14" title="ALTER DATABASE语句修改CDB。连接到CDB根目录时，ALTER PLUGGABLE DATABASE语句可以修改一个或多个PDB的打开模式。">关于连接到CDB Root时的容器修改</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-A976FE53-2BFA-4A80-B570-563391396DE9" name="GUID-A976FE53-2BFA-4A80-B570-563391396DE9"></a><h5 id="MULTI-GUID-A976FE53-2BFA-4A80-B570-563391396DE9" class="sect5"><span class="enumeration_section">4.2.1.8</span>规划临时表空间</h5>
                     <div>
                        <p>计划使用默认临时表空间。</p>
                        <p>CDB中每个容器的默认临时表空间，包括CDB根和每个PDB，应用程序根和应用程序PDB。</p>
                        <p>共享临时表空间仅用于递归SQL。托管的PDB租户不直接使用此表空间。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A976FE53-2BFA-4A80-B570-563391396DE9__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-A976FE53-2BFA-4A80-B570-563391396DE9__UL_ZCT_T4W_NGB" style="list-style-type:disc">
                              <li>
                                 <p>有关创建默认临时表空间的信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-AF2D7962-B165-423B-8FE3-29E7F30A2A3D" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-EABCEE30-0C2C-493C-83E0-F5D72D8F8E14" title="ALTER DATABASE语句修改CDB。连接到CDB根目录时，ALTER PLUGGABLE DATABASE语句可以修改一个或多个PDB的打开模式。">关于连接到CDB Root时的容器修改</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-EC8912EB-8389-4B97-8B9A-90F817D1785C" name="GUID-EC8912EB-8389-4B97-8B9A-90F817D1785C"></a><h5 id="MULTI-GUID-EC8912EB-8389-4B97-8B9A-90F817D1785C" class="sect5"><span class="enumeration_section">4.2.1.9</span>选择撤消模式</h5>
                     <div>
                        <p>计划使用撤消表空间来管理撤消数据。</p>
                        <p>CDB可以在不同的撤销模式下运行。您可以将CDB配置为为整个CDB提供一个活动的撤消表空间，或为CDB中的每个容器配置单独的撤消表空间。您可以在创建CDB期间指定撤消模式，也可以在创建CDB后更改撤消模式。</p>
                        <p>如果为整个CDB选择一个活动的撤消表空间，则使用共享撤消，并禁用本地撤消。在此配置中，单实例CDB有一个活动的撤消表空间。启用本地撤消后，单个实例配置中的每个容器都有一个撤消表空间。对于Oracle RAC CDB，每个PDB在其打开的每个节点中都有一个撤消表空间。使用共享撤消时，只有具有相应权限且当前容器为根的公共用户才能创建撤消表空间。</p>
                        <p>最佳做法是对CDB使用本地撤消。支持共享撤消主要仅用于升级和过渡目的。虽然与共享撤消相比，本地撤消会产生较小的开销，但本地撤消的好处使其在大多数环境中更受欢迎。本地撤消可以更快地执行拔出操作和时间点恢复，并且某些功能需要它，例如重新定位PDB。默认情况下，DBCA会创建启用了本地撤消的新CDB。</p>
                        <p>在CDB中， <code class="codeph">UNDO_MANAGEMENT</code>初始化参数必须设置为<code class="codeph">AUTO</code> ，并且需要使用撤消表空间来管理撤消数据。
                        </p>
                        <p>如果未启用本地撤消，则当前容器为根时，撤消表空间在静态数据字典视图和动态性能（V $）视图中可见。当前容器是PDB时，撤消表空间仅在动态性能视图中可见。</p>
                        <p>此外，当禁用本地撤消时，Oracle数据库会在当前容器为PDB时静默忽略撤消表空间和回滚段操作。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EC8912EB-8389-4B97-8B9A-90F817D1785C__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-EC8912EB-8389-4B97-8B9A-90F817D1785C__UL_OZ3_GQW_NGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-24EA5811-94F0-4EEC-864F-23AEF48F2D51" title="启用本地撤消后，每个容器都有自己的撤消表空间，用于打开它的每个实例。禁用本地撤消后，整个CDB都有一个撤消表空间。">使用ALTER DATABASE在CDB中设置撤消模式</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-undo.html#ADMIN-GUID-2C865CF9-A8B5-4BF1-A451-E8C08D3611F0" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关管理撤消的信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="CDB中每个容器中的数据字典是独立的，当前容器是其数据字典用于名称解析和权限授权的容器。">关于当前的容器</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-3A8DD596-4730-4DE0-9680-AC13C9EA03F9" name="GUID-3A8DD596-4730-4DE0-9680-AC13C9EA03F9"></a><h5 id="MULTI-GUID-3A8DD596-4730-4DE0-9680-AC13C9EA03F9" class="sect5"><span class="enumeration_section">4.2.1.10</span>为您的应用程序规划服务</h5>
                     <div>
                        <p>规划满足应用程序需求所需的数据库服务。</p>
                        <p>根和每个PDB可能需要多个服务。您可以为根或单个PDB创建服务。</p>
                        <p>数据库服务具有可选的<code class="codeph">PDB</code>属性。您可以通过指定<code class="codeph">PDB</code>属性来创建服务并将其与特定PDB关联。具有空<code class="codeph">PDB</code>属性的服务与CDB根相关联。
                        </p>
                        <p>您还可以使用<code class="codeph">DBMS_SERVICE</code>提供的PL / SQL包来创建服务并将它们与PDB关联。运行<code class="codeph">CREATE_SERVICE</code>过程时，该服务与当前容器关联。
                        </p>
                        <p>您可以使用SRVCTL实用程序，Oracle Enterprise Manager云控制和<code class="codeph">DBMS_SERVICE</code>提供的PL / SQL包来管理服务。
                        </p>
                        <p>创建PDB时，会自动创建PDB的新默认服务。该服务与PDB同名。您无法使用SRVCTL实用程序管理此服务。但是，您可以创建用户定义的服务并为您的应用程序自定义它们。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3A8DD596-4730-4DE0-9680-AC13C9EA03F9__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-3A8DD596-4730-4DE0-9680-AC13C9EA03F9__UL_XLL_XQW_NGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-6FDBCEFC-29DF-4CBB-A000-B105A7328955" title="您可以为PDB创建，修改或删除服务。">管理PDB服务</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-1739D947-9967-4A40-8CE6-6EA7F46D4D9F" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关使用数据库服务管理应用程序工作负载</p>
                              </li>
                              <li>
                                 <p>有关将SRVCTL实用程序与单实例数据库一起使用的信息，请参见<a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#ADMIN-GUID-B2D64FD5-0DE7-4201-AB0F-3941955CADB8" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../racad/server-control-utility-reference.html#RACAD-GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”，</cite></span></a>以获取有关将SRVCTL实用程序与Oracle RAC数据库一起使用的信息</p>一世</li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-7FD9AA57-016C-49A1-85F5-4C9AD74FAEDB" name="GUID-7FD9AA57-016C-49A1-85F5-4C9AD74FAEDB"></a><h5 id="MULTI-GUID-7FD9AA57-016C-49A1-85F5-4C9AD74FAEDB" class="sect5"><span class="enumeration_section">4.2.1.11</span>了解如何启动和关闭CDB</h5>
                     <div>
                        <p>熟悉启动和关闭数据库实例以及安装和打开CDB的原则和选项。</p>
                        <p>在CDB中，CDB根和所有容器共享一个数据库实例，或者在使用Oracle RAC时共享多个并发实例。您可以启动和关闭整个CDB，从而确定托管PDB的状态。当CDB打开时，您可以通过在CDB或PDB的上下文中使用<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句来打开或关闭托管的PDB来控制PDB的打开模式。为了保持向后兼容性，在执行它们并且PDB是当前容器时，支持<code class="codeph">ALTER DATABASE OPEN</code>和<code class="codeph">ALTER DATABASE CLOSE</code>语句。当PDB是当前容器时，您还可以使用SQL * Plus <code class="codeph">STARTUP</code>命令和SQL * Plus <code class="codeph">SHUTDOWN</code>命令。但是，SQL * Plus <code class="codeph">STARTUP MOUNT</code>命令是仅CDB操作，当PDB是当前容器时不能使用。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7FD9AA57-016C-49A1-85F5-4C9AD74FAEDB__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-7FD9AA57-016C-49A1-85F5-4C9AD74FAEDB__UL_EZ2_NRW_NGB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="您可以使用ALTER PLUGGABLE DATABASE SQL语句或SQL * Plus STARTUP命令修改PDB的打开模式。">修改一个或多个PDB的开放模式</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-E73BCAED-FF57-474A-A8C5-207D3F465413" title="要修改单个PDB的属性，请使用ALTER PLUGGABLE DATABASE语句。">使用ALTER PLUGGABLE DATABASE语句修改PDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关启动数据库的信息，请参见<a href="../admin/starting-up-and-shutting-down.html#ADMIN-GUID-203404B5-5157-4F29-A241-B8ABC4753819" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-A905D497-8331-4A25-9DAE-B5976E80E3C8" name="GUID-A905D497-8331-4A25-9DAE-B5976E80E3C8"></a><h5 id="MULTI-GUID-A905D497-8331-4A25-9DAE-B5976E80E3C8" class="sect5"><span class="enumeration_section">4.2.1.12</span>规划Oracle RAC</h5>
                     <div>
                        <p>如果您计划使用Oracle RAC，请计划Oracle RAC环境。</p>
                        <p>Oracle RAC文档描述了Oracle RAC环境中CDB的特殊注意事项。有关在Oracle RAC环境中创建CDB的信息，请参阅特定于平台的Oracle RAC安装指南。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A905D497-8331-4A25-9DAE-B5976E80E3C8__GUID-974BD2BB-0AF7-4CAB-9F97-AA0841D259FD">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="administering-a-cdb-with-sql-plus.html#GUID-57166C75-59D4-4037-81CD-8CAD753DA64D" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-144959A9-50EB-4A94-AF36-49FA8A379909" title="准备通过研究和精心规划来创建CDB。">决定如何配置CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E5B7C444-1961-4719-AE75-1FD6C295189F" name="GUID-E5B7C444-1961-4719-AE75-1FD6C295189F"></a><h4 id="MULTI-GUID-E5B7C444-1961-4719-AE75-1FD6C295189F" class="sect4"><span class="enumeration_section">4.2.2</span>创建CDB的先决条件</h4>
                  <div>
                     <p>您必须在创建新CDB之前完成先决条件。</p>
                     <p>在创建新CDB之前，必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>确保满足<span class="q">“ <a href="overview-of-managing-a-multitenant-environment.html#GUID-4C1CBB82-7DBF-4784-8010-917513AE11DD" title="Prerequisites must be met for a multitenant environment.">多租户环境</a></span>的先决条件”中描述的<span class="q"><a href="overview-of-managing-a-multitenant-environment.html#GUID-4C1CBB82-7DBF-4784-8010-917513AE11DD" title="多租户环境必须满足先决条件。">先决条件</a></span> 。
                           </p>
                        </li>
                        <li>
                           <p>必须有足够的内存来启动Oracle数据库实例。</p>
                           <p>调整CDB所需的内存大小，以适应每个容器的工作负载和容器数量。</p>
                        </li>
                        <li>
                           <p>必须为运行Oracle数据库的计算机上的计划PDB提供足够的磁盘存储空间。在Oracle RAC环境中，必须有足够的共享存储。</p>
                           <p>CDB所需的磁盘存储空间是将驻留在CDB中的所有PDB的空间要求的总和。</p>
                        </li>
                     </ul>
                     <p>这些先决条件在特定于您的操作系统的“ <a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle数据库安装指南”</cite></span></a>或“ <a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南”中</cite></span></a>进行了讨论。如果您使用Oracle Universal Installer，它将指导您完成安装并提供有关设置环境变量以及建立目录结构和授权的帮助。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-752E9D1D-02DF-4A68-8AB7-41AFF2AB0555" title="CDB创建准备多个操作系统文件作为CDB一起工作。">规划CDB创建</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN13521"></a><div class="props_rev_3"><a id="GUID-25F77431-C454-4B2A-8083-21165E59549A" name="GUID-25F77431-C454-4B2A-8083-21165E59549A"></a><h3 id="MULTI-GUID-25F77431-C454-4B2A-8083-21165E59549A" class="sect3"><span class="enumeration_section">4.3</span>创建CDB</h3>
               <div>
                  <p>您可以使用DBCA或手动发出<code class="codeph">CREATE DATABASE</code> SQL语句来创建CDB。
                  </p>
                  <div class="infoboxnote" id="GUID-25F77431-C454-4B2A-8083-21165E59549A__GUID-2FC5E141-5D0D-4BF4-943C-FCFC50A04E73">
                     <p class="notep1">注意：</p>
                     <p>Oracle强烈建议使用Database Configuration Assistant（DBCA）模板部署而不是<code class="codeph">CREATE DATABASE</code> SQL语句来创建CDB，因为使用DBCA是一种更自动化的方法，并且您的CDB可以在DBCA完成时使用。
                     </p>
                  </div>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-2ACFB225-F895-4B6F-B601-F09A388A4449">关于使用DBCA创建CDB</a><br>Oracle强烈建议使用Database Configuration Assistant（DBCA）来创建CDB。</li>
                     <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22">关于使用SQL语句创建CDB</a><br>使用<code class="codeph">CREATE DATABASE</code> SQL语句创建CDB与创建非CDB类似。</li>
                     <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5">使用CREATE DATABASE语句创建CDB</a><br>使用<code class="codeph">CREATE DATABASE</code>语句创建CDB时，必须先完成其他操作才能拥有可操作的CDB。</li>
                     <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-F20BEFA4-3F40-421E-B5BB-EE6D9808E3F0">使用CREATE DATABASE语句创建CDB：示例</a><br>这些示例创建名为<code class="codeph">newcdb</code>的CDB。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。">创建和配置CDB</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13520"></a><div class="props_rev_3"><a id="GUID-2ACFB225-F895-4B6F-B601-F09A388A4449" name="GUID-2ACFB225-F895-4B6F-B601-F09A388A4449"></a><h4 id="MULTI-GUID-2ACFB225-F895-4B6F-B601-F09A388A4449" class="sect4"><span class="enumeration_section">4.3.1</span>关于使用DBCA创建CDB</h4>
                  <div>
                     <p>Oracle强烈建议使用Database Configuration Assistant（DBCA）来创建CDB。</p>
                     <div class="section">
                        <p>DBCA与其他技术相比具有以下优势：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创作主要是自动化的。</p>
                           </li>
                           <li>
                              <p>DBCA使您可以在创建CDB时指定CDB的数量。</p>
                           </li>
                           <li>
                              <p>当DBCA完成时，CDB就可以使用了。</p>
                           </li>
                           <li>
                              <p>创建CDB后，您可以使用DBCA执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>克隆本地PDB</p>
                                 </li>
                                 <li>
                                    <p>插入和拔出PDB</p>
                                 </li>
                                 <li>
                                    <p>复制CDB（仅限静音模式）</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>根据您选择的安装类型，Oracle Universal Installer（OUI）可以启动DBCA。您也可以在安装Oracle数据库后随时启动DBCA作为独立工具。</p>
                        <p>您可以使用DBCA以下列任一模式创建CDB：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>互动模式</p>
                              <p>此模式提供用于创建和配置CDB的图形界面和指导工作流程。</p>
                           </li>
                           <li>
                              <p>非交互模式（也称为<span class="italic">静音模式</span> ）</p>
                              <p>通过此模式，您可以使用适合克隆的自定义PDB种子数据库为预配置的CDB模板部署编写脚本。通过指定命令行参数，响应文件或两者来以静默方式运行DBCA。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2ACFB225-F895-4B6F-B601-F09A388A4449__GUID-629F334A-CCBB-47BA-AE6D-67858A639AFA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-9E65AD37-BEDC-462A-A381-64C0380E0CCF" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何使用DBCA创建数据库</p>
                           </li>
                           <li>
                              <p><a href="../admqs/installing-oracle-database-creating-database.html#ADMQS002" target="_blank"><span><cite>Oracle数据库2天DBA</cite></span></a></p>
                           </li>
                           <li>
                              <p>DBCA在线帮助</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-25F77431-C454-4B2A-8083-21165E59549A" title="您可以使用DBCA或手动发出CREATE DATABASE SQL语句来创建CDB。">创建CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13522"></a><div class="props_rev_3"><a id="GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22" name="GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22"></a><h4 id="MULTI-GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22" class="sect4"><span class="enumeration_section">4.3.2</span>关于使用SQL语句创建CDB</h4>
                  <div>
                     <p>使用<code class="codeph">CREATE DATABASE</code> SQL语句创建CDB与创建非CDB类似。</p>
                     <p>本节介绍了创建CDB的其他要求。使用<code class="codeph">CREATE DATABASE</code>创建CDB时，必须执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>启用PDB</p>
                        </li>
                        <li>
                           <p>指定CDB根文件的名称和位置</p>
                        </li>
                        <li>
                           <p>指定<code class="codeph">PDB$SEED</code>文件的名称和位置</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22__GUID-21985A91-9DD4-4208-89D0-F916D1CFA997">
                        <p class="notep1">注意：</p>与使用DBCA相比，使用<code class="codeph">CREATE DATABASE</code> SQL语句是创建CDB的更手动方法。</div>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-ED7C61FB-1FBB-40B2-93DE-11349350A32E">关于启用PDB</a><br>要创建CDB， <code class="codeph">CREATE DATABASE</code>语句必须包含<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903">关于Root和PDB种子的文件的名称和位置</a><br><code class="codeph">CREATE DATABASE</code>语句使用根文件（例如数据文件）生成<code class="codeph">PDB$SEED</code>文件的名称。</li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-F10C66E1-9194-418D-9F6A-C18B0F6550C7">关于PDB $ SEED的数据文件的属性</a><br>您可以使用PDB种子（ <code class="codeph">PDB$SEED</code> ）作为模板来创建新容器。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-2839D949-B46F-4205-9C1F-ADD346407FCB">关于CDB撤消模式</a><br>将<span class="italic">undo_mode_clause</span>添加到<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句以指定CDB的撤消模式。</li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22__GUID-40AE090F-6E79-42AE-A687-D4CC0B66EC36">
                        <p class="notep1">也可以看看：</p>
                        <p>有关CDB中文件的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=CNCPT89268" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-25F77431-C454-4B2A-8083-21165E59549A" title="您可以使用DBCA或手动发出CREATE DATABASE SQL语句来创建CDB。">创建CDB</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13523"></a><div class="props_rev_3"><a id="GUID-ED7C61FB-1FBB-40B2-93DE-11349350A32E" name="GUID-ED7C61FB-1FBB-40B2-93DE-11349350A32E"></a><h5 id="MULTI-GUID-ED7C61FB-1FBB-40B2-93DE-11349350A32E" class="sect5"><span class="enumeration_section">4.3.2.1</span>关于启用PDB</h5>
                     <div>
                        <p>要创建CDB， <code class="codeph">CREATE DATABASE</code>语句必须包含<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句。
                        </p>
                        <p>此子句影响<code class="codeph">CREATE DATABASE</code>语句，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>包括<code class="codeph">ENABLE PLUGGABLE DATABASE</code></p>
                              <p>该语句创建了一个带有root和<code class="codeph">PDB$SEED</code>的CDB。您永远不能将CDB更改为非CDB。</p>
                           </li>
                           <li>
                              <p>不包括<code class="codeph">ENABLE PLUGGABLE DATABASE</code></p>
                              <p>新创建的数据库是非CDB，这意味着它不包含CDB根或<code class="codeph">PDB$SEED</code> 。非CDB永远不能包含PDB。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22" title="使用CREATE DATABASE SQL语句创建CDB与创建非CDB类似。">关于使用SQL语句创建CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13524"></a><div class="props_rev_3"><a id="GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" name="GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903"></a><h5 id="MULTI-GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" class="sect5"><span class="enumeration_section">4.3.2.2</span>关于Root和PDB种子文件的名称和位置</h5>
                     <div>
                        <p><code class="codeph">CREATE DATABASE</code>语句使用根文件（例如数据文件）生成<code class="codeph">PDB$SEED</code>文件的名称。</p>
                        <p>您必须为root和<code class="codeph">PDB$SEED</code>指定文件的名称和位置。 <code class="codeph">CREATE DATABASE</code>语句成功完成后，您可以使用<code class="codeph">PDB$SEED</code>及其文件来创建新的PDB。创建后无法修改PDB种子。
                        </p>
                        <p>您必须通过以下方式之一为<code class="codeph">PDB$SEED</code>指定文件的名称和位置：</p>
                        <ol>
                           <li>
                              <p><code class="codeph">SEED FILE_NAME_CONVERT</code>子句</p>
                           </li>
                           <li>
                              <p>Oracle托管文件</p>
                           </li>
                           <li>
                              <p><code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数</p>
                           </li>
                        </ol>
                        <p>如果您使用的不仅仅是技术，那么<code class="codeph">CREATE DATABASE</code>语句将按照前一个列表的优先顺序使用一种技术。例如，如果使用所有技术，则<code class="codeph">CREATE DATABASE</code>语句仅使用<code class="codeph">SEED FILE_NAME_CONVERT</code>子句中的规范，因为它是列表中的第一个。
                        </p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-519CEA96-0B3D-40D5-9710-53E38C941617">SEED FILE_NAME_CONVERT条款</a><br><code class="codeph">CREATE DATABASE</code>语句的<code class="codeph">SEED FILE_NAME_CONVERT</code>子句指定如何使用CDB根文件的名称生成<code class="codeph">PDB$SEED</code>文件的名称。
                           </li>
                           <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-5E01818B-38EE-428E-ADD0-A5784FF0AC33">Oracle托管文件</a><br>启用Oracle Managed Files时，它可以确定<code class="codeph">PDB$SEED</code>文件的名称和位置。
                           </li>
                           <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-12AA97B3-6D4C-45A6-96C8-DE9B8AAA045C">PDB_FILE_NAME_CONVERT初始化参数</a><br><code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数可以指定种子文件的名称和位置。
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903__GUID-CC886A4D-5B2B-4BEB-A528-6A963D24255C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="creating-a-pdb-from-scratch.html#GUID-CCA938BD-52BE-422C-86AF-576D3E02B96B" title="使用CREATE PLUGGABLE DATABASE语句使用PDB种子（PDB $ SEED）的文件在CDB中创建PDB。">从头开始创建PDB</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22" title="使用CREATE DATABASE SQL语句创建CDB与创建非CDB类似。">关于使用SQL语句创建CDB</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13526"></a><a id="ADMIN13525"></a><div class="props_rev_3"><a id="GUID-519CEA96-0B3D-40D5-9710-53E38C941617" name="GUID-519CEA96-0B3D-40D5-9710-53E38C941617"></a><h6 id="MULTI-GUID-519CEA96-0B3D-40D5-9710-53E38C941617" class="sect6"><span class="enumeration_section">4.3.2.2.1</span> SEED FILE_NAME_CONVERT条款</h6>
                        <div>
                           <p><code class="codeph">CREATE DATABASE</code>语句的<code class="codeph">SEED FILE_NAME_CONVERT</code>子句指定如何使用CDB根文件的名称生成<code class="codeph">PDB$SEED</code>文件的名称。
                           </p>
                           <p>您可以使用此子句指定以下选项之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>一个或多个文件名模式和替换文件名模式，格式如下：</p><pre class="pre codeblock"><code>' <span class="italic">string1</span> '，' <span class="italic">string2</span> '，' <span class="italic">string3</span> '，' <span class="italic">string4</span> '，...
</code></pre><p>该<span class="italic">字符串2</span>文件名模式替换<span class="italic">字符串1</span>文件名模式，以及<span class="italic">串，4</span>文件名模式替换<span class="italic">STRING3</span>文件名模式。您可以根据需要使用多对文件名模式和替换文件名模式字符串。
                                 </p>
                                 <p>如果指定奇数个字符串（最后一个字符串没有相应的替换字符串），则返回错误。不要指定多个匹配单个文件名或目录的模式/替换字符串。</p>
                                 <p>文件名模式与Oracle Managed Files管理的文件或目录不匹配。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">NONE</code>当没有文件名应转换。省略<code class="codeph">SEED FILE_NAME_CONVERT</code>子句与指定<code class="codeph">NONE</code>相同。</p>
                              </li>
                           </ul>
                           <div class="example" id="GUID-519CEA96-0B3D-40D5-9710-53E38C941617__GUID-AD982C0A-9584-452C-94A1-60190725E097">
                              <p class="titleinexample">示例4-1 SEED FILE_NAME_CONVERT子句</p>
                              <p>此<code class="codeph">SEED FILE_NAME_CONVERT</code>子句使用<code class="codeph">/oracle/dbs</code>目录中的文件名为<code class="codeph">/oracle/pdbseed/</code>目录中的<code class="codeph">PDB$SEED</code>文件生成文件名。
                              </p><pre class="pre codeblock"><code>SEED FILE_NAME_CONVERT =（'/ oracle / dbs /'，'/ oracle / pdbseed /'）</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-519CEA96-0B3D-40D5-9710-53E38C941617__GUID-B8309C7B-6F28-4850-ABB8-DAD43E695E4D">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">SEED FILE_NAME_CONVERT</code>子句语法的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=SQLRF-GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" title="CREATE DATABASE语句使用根文件（例如数据文件）生成PDB $ SEED文件的名称。">关于Root和PDB种子的文件的名称和位置</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13527"></a><div class="props_rev_3"><a id="GUID-5E01818B-38EE-428E-ADD0-A5784FF0AC33" name="GUID-5E01818B-38EE-428E-ADD0-A5784FF0AC33"></a><h6 id="MULTI-GUID-5E01818B-38EE-428E-ADD0-A5784FF0AC33" class="sect6"><span class="enumeration_section">4.3.2.2.2</span> Oracle托管文件</h6>
                        <div>
                           <p>启用Oracle Managed Files时，它可以确定<code class="codeph">PDB$SEED</code>文件的名称和位置。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-5E01818B-38EE-428E-ADD0-A5784FF0AC33__GUID-6BFCF2AA-A782-4448-8095-E7390B73984C">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" title="CREATE DATABASE语句使用根文件（例如数据文件）生成PDB $ SEED文件的名称。">关于Root和PDB种子的文件的名称和位置</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13528"></a><div class="props_rev_3"><a id="GUID-12AA97B3-6D4C-45A6-96C8-DE9B8AAA045C" name="GUID-12AA97B3-6D4C-45A6-96C8-DE9B8AAA045C"></a><h6 id="MULTI-GUID-12AA97B3-6D4C-45A6-96C8-DE9B8AAA045C" class="sect6"><span class="enumeration_section">4.3.2.2.3</span> PDB_FILE_NAME_CONVERT初始化参数</h6>
                        <div>
                           <p><code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数可以指定种子文件的名称和位置。
                           </p>
                           <p>要使用此技术，请确保在创建CDB时， <code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数包含在初始化参数文件中。</p>
                           <p>此初始化参数中指定的文件名模式不能与Oracle Managed Files管理的文件或目录匹配。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-12AA97B3-6D4C-45A6-96C8-DE9B8AAA045C__GUID-DD962036-7316-415E-AAE2-F56C3AE931A2">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=REFRN10322" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" title="CREATE DATABASE语句使用根文件（例如数据文件）生成PDB $ SEED文件的名称。">关于Root和PDB种子的文件的名称和位置</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADMIN14084"></a><a id="ADMIN14083"></a><div class="props_rev_3"><a id="GUID-F10C66E1-9194-418D-9F6A-C18B0F6550C7" name="GUID-F10C66E1-9194-418D-9F6A-C18B0F6550C7"></a><h5 id="MULTI-GUID-F10C66E1-9194-418D-9F6A-C18B0F6550C7" class="sect5"><span class="enumeration_section">4.3.2.3</span>关于PDB $ SEED数据文件的属性</h5>
                     <div>
                        <p>您可以使用PDB种子（ <code class="codeph">PDB$SEED</code> ）作为模板来创建新容器。
                        </p>
                        <p>CDB根<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的数据文件的属性可能不适合PDB种子。在这种情况下，您可以使用<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句为PDB种子数据文件指定不同的属性。使用这些子句指定PDB种子中包含<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的所有数据文件的属性。从根继承的值用于尚未提供其值的任何属性。
                        </p>
                        <p><span class="italic"><code class="codeph">tablespace_datafile</code></span>子句的语法与数据文件规范的语法相同，不包括数据文件的名称和位置以及<code class="codeph">REUSE</code>属性。您可以将<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句与任何方法一起使用，以指定<span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" title="The CREATE DATABASE statement uses the root files (such as data files) to generate the names of the files for PDB$SEED.">关于根文件和PDB种子的文件的名称和位置</a> ”中</span>描述的PDB种子数据文件<span class="q"><a href="creating-and-configuring-a-cdb.html#GUID-6F2F739B-E4D3-40E2-91ED-1F99BE290903" title="CREATE DATABASE语句使用根文件（例如数据文件）生成PDB $ SEED文件的名称。">的名称和位置</a></span> 。
                        </p>
                        <p><span class="italic"><code class="codeph">tablespace_datafile</code></span>子句不指定PDB种子数据文件的名称和位置。相反，它们指定PDB种子中<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>数据文件的属性，这些属性与根中的不同。如果未在<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句中为表空间指定<code class="codeph">SIZE</code> ，则<span class="italic"><code class="codeph">tablespace_datafile</code></span>空间的数据文件大小将设置为相应根数据文件大小的预定部分。
                        </p>
                        <div class="example" id="GUID-F10C66E1-9194-418D-9F6A-C18B0F6550C7__GUID-1719B97C-EF40-4AE4-9E18-62BF2FBF81D8">
                           <p class="titleinexample">示例4-2使用tablespace_datafile子句</p>
                           <p>假设以下<code class="codeph">CREATE DATABASE</code>子句指定组成根中的<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的数据文件的名称，位置和属性。
                           </p><pre class="pre codeblock"><code>DATAFILE'/u01/app/oracle/oradata/newcdb/system01.dbf'SIZE 325M REUSE SYSAUX DATAFILE'/u01/app/oracle/oradata/newcdb/sysaux01.dbf'SIZE 325M REUSE</code></pre><p>您可以使用以下<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句为这些数据文件指定不同的属性：</p><pre class="pre codeblock"><code>种子系统数据文件大小为125M自动扩展，下一个10M MAXSIZE无限的SYSAUX数据文件大小100M</code></pre><p>在此示例中，PDB种子的<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的数据文件从根的数据文件继承<code class="codeph">REUSE</code>属性。但是，PDB种子的数据文件的以下属性与根的不同：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">SYSTEM</code>表空间的数据文件对于PDB种子为125 MB，对于根为325 MB。
                                 </p>
                              </li>
                              <li>
                                 <p>为PDB种子的<code class="codeph">SYSTEM</code>数据文件启用了<code class="codeph">AUTOEXTEND</code> ，默认情况下，它对根的<code class="codeph">SYSTEM</code>数据文件禁用。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSAUX</code>表空间的数据文件对于PDB种子为100 MB，对于根为325 MB。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F10C66E1-9194-418D-9F6A-C18B0F6550C7__GUID-2BB9B515-7891-41FC-9DA9-7E697678C4A0">
                           <p class="notep1">也可以看看：</p>
                           <p>有关数据文件规范的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=SQLRF52248" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22" title="使用CREATE DATABASE SQL语句创建CDB与创建非CDB类似。">关于使用SQL语句创建CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-2839D949-B46F-4205-9C1F-ADD346407FCB" name="GUID-2839D949-B46F-4205-9C1F-ADD346407FCB"></a><h5 id="MULTI-GUID-2839D949-B46F-4205-9C1F-ADD346407FCB" class="sect5"><span class="enumeration_section">4.3.2.4</span>关于CDB撤销模式</h5>
                     <div>
                        <p>将<span class="italic">undo_mode_clause</span>添加到<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句以指定CDB的撤消模式。</p>
                        <p><span class="italic">undo_mode_clause</span>指定CDB撤消模式是本地还是共享。本地撤消模式意味着CDB中的每个容器都使用本地撤消。要为CDB配置本地撤消模式，请指定<code class="codeph">LOCAL UNDO ON</code> 。共享撤消模式意味着单实例CDB有一个活动的撤消表空间，或者对于Oracle RAC CDB，每个实例都有一个活动的撤消表空间。要为CDB配置共享撤消模式，请指定<code class="codeph">LOCAL UNDO OFF</code> 。如果未将<span class="italic">undo_mode_clause</span>添加到<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句，则默认使用共享撤消模式。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-F90F2625-60F1-4C26-81D0-E91CAF540B22" title="使用CREATE DATABASE SQL语句创建CDB与创建非CDB类似。">关于使用SQL语句创建CDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13529"></a><div class="props_rev_3"><a id="GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5" name="GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5"></a><h4 id="MULTI-GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5" class="sect4"><span class="enumeration_section">4.3.3</span>使用CREATE DATABASE语句创建CDB</h4>
                  <div>
                     <p>使用<code class="codeph">CREATE DATABASE</code>语句创建CDB时，必须先完成其他操作才能拥有可操作的CDB。</p>
                     <div class="section"> 
                        <p>这些操作包括在数据字典表上构建视图以及在根目录中安装标准PL / SQL包。通过运行提供的<code class="codeph">catcdb.sql</code>脚本来执行这些操作，该脚本将安装CDB所需的所有组件。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5__GUID-09775A10-08A0-4681-9CAA-EFED0857EA7C">先决条件</p>
                        <p>请注意以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>本节中的说明仅适用于<span class="italic">单实例数据库安装</span> 。有关创建Oracle RAC CDB的说明，请参见适用于您的平台的Oracle Real Application Clusters（Oracle RAC）安装指南。</p>
                           </li>
                           <li>
                              <p>如果使用Oracle ASM管理磁盘存储，则必须先启动Oracle ASM实例并配置磁盘组，然后再执行这些步骤。</p>
                           </li>
                           <li>
                              <p>必须将<code class="codeph">ENABLE_PLUGGABLE_DATABASE</code>初始化参数设置为<code class="codeph">true</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5__GUID-2993B25F-BD2D-4E7B-8EFB-02935356CEF3">使用CREATE DATABASE语句创建CDB：</p>
                        <ol>
                           <li>
                              <p>完成“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-0306126A-D63C-41E0-8D6E-48020FC18697" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ”中的“使用<code class="codeph">CREATE DATABASE</code>语句<code class="codeph">CREATE DATABASE</code> ”主题中的步骤1  -  8。
                              </p>
                              <p>在CDB中， <code class="codeph">DB_NAME</code>初始化参数指定根的名称。此外，通常的做法是将SID设置为根的名称。此名称的最大字符数为30。有关更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=REFRN10041" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>中对<code class="codeph">DB_NAME</code>初始化参数的讨论。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">CREATE DATABASE</code>语句创建新的CDB。</p>
                              <p>请参阅<span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-158375D0-E084-423B-BD91-0C84FB50BF2F" title="This example illustrates creating a CDB with Oracle Managed Files, which enables you to use a much simpler CREATE DATABASE statement.">使用Oracle托管文件创建CDB：示例</a> ”</span>和<span class="q">“ <a href="creating-and-configuring-a-cdb.html#GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010" title="以下语句创建名为newcdb的CDB。此名称必须与初始化参数文件中的DB_NAME参数一致。">在不使用Oracle托管文件的情况下创建CDB</a> ”中的</span> <span class="q"><a href="creating-and-configuring-a-cdb.html#GUID-158375D0-E084-423B-BD91-0C84FB50BF2F" title="此示例说明如何使用Oracle Managed Files创建CDB，这使您可以使用更简单的CREATE DATABASE语句。">示例</a></span> 。
                              </p>
                              <div class="infobox-tip" id="GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5__GUID-368F6DB4-51CC-44B0-85F3-15FB47918C9D">
                                 <p class="notep1">小费：</p>
                                 <p>如果您的<code class="codeph">CREATE DATABASE</code>语句失败，并且未在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-0306126A-D63C-41E0-8D6E-48020FC18697" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a>中的“使用<code class="codeph">CREATE DATABASE</code>语句<code class="codeph">CREATE DATABASE</code> ”主题中完成步骤7，请确保没有预先存在的服务器参数文件（SPFILE）以意外方式设置初始化参数的实例。例如，SPFILE包含所有控制文件的完整路径的设置，如果这些控制文件不存在，则<code class="codeph">CREATE DATABASE</code>语句将失败。删除不需要的SPFILE后，请确保关闭并重新启动实例（使用<code class="codeph">STARTUP NOMOUNT</code> ）。</p>
                              </div>
                           </li>
                           <li>
                              <p>运行<code class="codeph">catcdb.sql</code> SQL脚本。
                              </p>
                              <p>在SQL * Plus中输入以下内容以运行脚本：</p><pre class="pre codeblock"><code>@？/rdbms/admin/catcdb.sql</code></pre></li>
                           <li>
                              <p>在脚本提示时，输入参数<code class="codeph">1</code>的日志文件目录和参数<code class="codeph">2</code>的日志文件名。
                              </p>
                              <p>对于以下示例，为第一个提示输入<code class="codeph">/tmp</code> ，为第二个提示输入<code class="codeph">create_cdb.log</code> ：</p><pre class="pre codeblock"><code>SQL&gt; host perl -I &amp;&amp; rdbms_admin &amp;&amp; rdbms_admin_catcdb --logDirectory &amp;&amp; 1 --logFilename &amp;&amp; 2输入1的值： <span class="bold">/ tmp</span>输入2的值： <span class="bold">create_cdb.log</span></code></pre></li>
                           <li>
                              <p>在脚本提示时，输入任何其他所需信息。</p>
                              <p>例如，脚本会提示输入管理员密码和临时表空间名称：</p><pre class="pre codeblock"><code>输入SYS的新密码： <span class="bold">********</span>输入SYSTEM的新密码： <span class="bold">********</span>输入临时表空间名称： <span class="bold">TEMP</span>
</code></pre></li>
                           <li>
                              <p><code class="codeph">catcdb.sql</code>完成后，执行“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-0306126A-D63C-41E0-8D6E-48020FC18697" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ”中的“使用<code class="codeph">CREATE DATABASE</code>语句<code class="codeph">CREATE DATABASE</code> ”主题中的步骤12-14。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-54C5126C-427A-4BFE-81BF-950FB1A062D5__GUID-A226DB8B-2A0F-49DB-9DA5-C14CCFFBE54F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-C9D7241C-3E18-4C8B-9ACD-D7097E273A5B" target="_blank"><code class="codeph">CREATE DATABASE</code></a>子句和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-30FB0B67-31D8-42EE-BA46-7949F6B6AFCD" target="_blank">Oracle Managed Files的</a>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-C9D7241C-3E18-4C8B-9ACD-D7097E273A5B" target="_blank"><code class="codeph">CREATE DATABASE</code></a> <span><cite>“Oracle数据库管理员指南</cite></span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-30FB0B67-31D8-42EE-BA46-7949F6B6AFCD" target="_blank">”</a></p>
                           </li>
                           <li>
                              <p>有关Oracle RAC的更多信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=RACAD-GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" target="_blank"><span><cite>，请参见“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=OSTMG1390" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></p>
                           </li>
                           <li>一世<p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=SQLRF01204" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>以了解有关<code class="codeph">CREATE DATABASE</code>语句的子句和参数值的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-25F77431-C454-4B2A-8083-21165E59549A" title="您可以使用DBCA或手动发出CREATE DATABASE SQL语句来创建CDB。">创建CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F20BEFA4-3F40-421E-B5BB-EE6D9808E3F0" name="GUID-F20BEFA4-3F40-421E-B5BB-EE6D9808E3F0"></a><h4 id="MULTI-GUID-F20BEFA4-3F40-421E-B5BB-EE6D9808E3F0" class="sect4"><span class="enumeration_section">4.3.4</span>使用CREATE DATABASE语句创建CDB：示例</h4>
                  <div>
                     <p>这些示例创建名为<code class="codeph">newcdb</code>的CDB。
                     </p>
                     <p>这些示例假定您已完成<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-0306126A-D63C-41E0-8D6E-48020FC18697" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a>中的“使用<code class="codeph">CREATE DATABASE</code>语句<code class="codeph">CREATE DATABASE</code> ”主题中的步骤1  -  8。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010">在不使用Oracle托管文件的情况下创建CDB</a><br>以下语句创建名为<code class="codeph">newcdb</code>的CDB。此名称必须与初始化参数文件中的<code class="codeph">DB_NAME</code>参数一致。
                        </li>
                        <li class="ulchildlink"><a href="creating-and-configuring-a-cdb.html#GUID-158375D0-E084-423B-BD91-0C84FB50BF2F">使用Oracle托管文件创建CDB：示例</a><br>此示例说明如何使用Oracle Managed Files创建CDB，这使您可以使用更简单的<code class="codeph">CREATE DATABASE</code>语句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-25F77431-C454-4B2A-8083-21165E59549A" title="您可以使用DBCA或手动发出CREATE DATABASE SQL语句来创建CDB。">创建CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010" name="GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010"></a><h5 id="MULTI-GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010" class="sect5"><span class="enumeration_section">4.3.4.1</span>在不使用Oracle托管文件的情况下创建CDB</h5>
                     <div>
                        <p>以下语句创建名为<code class="codeph">newcdb</code>的CDB。此名称必须与初始化参数文件中的<code class="codeph">DB_NAME</code>参数一致。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010__GUID-A1B8B504-EEFB-49D3-8541-A277B0CBD50D">假设</p>
                           <p>此示例假定以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>初始化参数文件使用<code class="codeph">CONTROL_FILES</code>参数指定控制文件的数量和位置。
                                 </p>
                              </li>
                              <li>
                                 <p>目录<code class="codeph">/u01/app/oracle/oradata/newcdb</code>存在。
                                 </p>
                              </li>
                              <li>
                                 <p>目录<code class="codeph">/u01/app/oracle/oradata/pdbseed</code>存在。
                                 </p>
                              </li>
                              <li>
                                 <p>目录<code class="codeph">/u01/logs/my</code>和<code class="codeph">/u02/logs/my</code>存在。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>此示例包括<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句，用于创建具有根和PDB种子的CDB。此示例还包括<code class="codeph">SEED FILE_NAME_CONVERT</code>子句，用于指定PDB种子文件的名称和位置。此示例还包括<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句，这些子句指定与根数据文件不同的<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的PDB种子数据文件的属性。此示例包括<span class="italic"><code class="codeph">undo_mode_clause</code></span>用于指定CDB撤消模式是本地的。
                           </p><pre class="pre codeblock"><code>CREATE DATABASE newcdb由<span class="italic">sys_password</span>标识的USER SYS由<span class="italic">system_password</span>标识的用户系统LOGFILE GROUP 1（'/ u01 / logs / my / red01a.log'，'/ u02 / logs / my / red01b.log'）SIZE 100M BLOCKSIZE 512，GROUP 2 （'/ u01/logs/my/redo02a.log','/u02/logs/my/redo02b.log'）SIZE 100M BLOCKSIZE 512，GROUP 3（'/ u01 / logs / my / redo03a.log'，'/ u02 / logs / my / redo03b.log'）SIZE 100M BLOCKSIZE 512 MAXLOGHISTORY 1 MAXLOGFILES 16 MAXLOGMEMBERS 3 MAXDATAFILES 1024 CHARACTER SET AL32UTF8 NATIONAL CHARACTER SET AL16UTF16 EXTENT MANAGEMENT LOCAL DATAFILE'/u01/app/oracle/oradata/newcdb/system01.dbf' SIZE 700M REUSE AUTOEXTEND ON NEXT 10240K MAXSIZE UNLIMITED SYSAUX DATAFILE'/u01/app/oracle/oradata/newcdb/sysaux01.dbf'SIZE 550M REUSE AUTOEXTEND ON NEXT 10240K MAXSIZE UNLIMITED DEFAULT TABLESPACE deftbs DATAFILE'/ u01 / app / oracle / oradata / newcdb / deftbs01.dbf'SIZE 500M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED DEFAULT TEMPORARY TABLESPACE tempts1 TEMPFILE'/u01/app/oracle/oradata/newcdb/temp01.dbf'SIZE 20M REUSE AUTOEXTEN d ON NEXT 640K MAXSIZE无限撤消TABLESPACE UNDOTBS1 DATAFILE '/u01/app/oracle/oradata/newcdb/undotbs01.dbf' SIZE 200M REUSE AUTOEXTEND ON NEXT 5120K MAXSIZE无限<span class="bold">ENABLE PLUGGABLE DATABASE</span> <span class="bold">SEED</span> <span class="bold">FILE_NAME_CONVERT =（'/ U01 /应用/ ORACLE / oradata / newcdb /'，</span> <span class="bold">'/ u01 / app / oracle / oradata / pdbseed /'）</span> <span class="bold">SYSTEM DATAFILES SIZE 125M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED</span> <span class="bold">SYSAUX DATAFILES SIZE 100M</span> <span class="bold">USER_DATA TABLESPACE usertbs</span> <span class="bold">DATAFILE'/ u01 / app / oracle / oradata / pdbseed / usertbs01.dbf'SIZE</span> <span class="bold">200M REUSE AUTOEXTEND MAXSIZE UNLIMITED</span> <span class="bold">LOCAL UNDO ON;</span>
</code></pre><p>创建具有以下特征的CDB：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>CDB名为<code class="codeph">newcdb</code> 。其全局数据库名称为<code class="codeph">newcdb.us.example.com</code> ，其中域部分（ <code class="codeph">us.example.com</code> ）取自初始化参数文件。有关确定全局数据库名称的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-9698EA9B-013C-40AC-8CFB-12171A4B4974" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>根据<code class="codeph">CONTROL_FILES</code>初始化参数指定创建三个控制文件，该参数在初始化参数文件中创建CDB之前设置。有关指定控制文件的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-4ECB5C59-ED5A-4A87-9EEA-6C687AB8986D" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a>以获取示例初始化参数文件和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-80067DCA-9E48-4232-8D37-667B4A085465" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>用户帐户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>的密码设置为您指定的值。密码区分大小写。在此版本的Oracle数据库中，指定<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>密码的两个子句不是必需的。但是，如果指定任一子句，则必须指定两个子句。有关使用这些子句的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-55208EEE-5B31-4B7F-81A4-AF7AFE8630BE" target="_blank"><span><cite>Oracle数据库管理员指南”，</cite></span></a>以获取有关为用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>指定密码的信息。</p>
                              </li>
                              <li>
                                 <p>新CDB有三个在线重做日志文件组，每个文件组有两个成员，如<code class="codeph">LOGFILE</code>子句中所指定。<code class="codeph">MAXLOGFILES</code> ， <code class="codeph">MAXLOGMEMBERS</code>和<code class="codeph">MAXLOGHISTORY</code>定义重做日志的限制。有关选择重做日志文件数的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-11CAAE2C-D46D-4611-8AAB-F9CB941D3934" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。重做日志的块大小设置为512字节，与磁盘上的物理扇区大小相同。如果块大小与物理扇区大小（默认值）相同，则<code class="codeph">BLOCKSIZE</code>子句是可选的。典型的扇区大小因此典型的块大小为512。<code class="codeph">BLOCKSIZE</code>允许值为<code class="codeph">BLOCKSIZE</code>和4096。对于具有4K扇区大小的较新磁盘，可选择将<code class="codeph">BLOCKSIZE</code>指定为4096。有关规划重做日志文件的块大小的详细信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-AC858C69-317E-4193-838D-59F8DDEA1927" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">MAXDATAFILES</code>指定可在CDB中打开的最大数据文件数。此数字会影响控制文件的初始大小。对于CDB，除了CDB根文件之外，还要将<code class="codeph">MAXDATAFILES</code>设置为一个较高的数字，以预测所有容器的数据文件的总数。
                                 </p>
                                 <div class="infoboxnote" id="GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010__GUID-6A8F1D2A-016F-4488-8D3C-604D81BBD7B8">
                                    <p class="notep1">注意：</p>
                                    <p>您可以在创建CDB期间设置多个限制。其中一些限制受操作系统限制的限制和影响。例如，如果设置<code class="codeph">MAXDATAFILES</code> ，则Oracle数据库会在控制文件中分配足够的空间来存储<code class="codeph">MAXDATAFILES</code>文件名，即使CDB最初只有一个数据文件也是如此。但是，由于最大控制文件大小受限且依赖于操作系统，因此您可能无法将所有<code class="codeph">CREATE DATABASE</code>参数设置为其理论最大值。
                                    </p>
                                    <p>有关在创建CDB期间设置限制的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=SQLRF01204" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a>和特定于操作系统的Oracle文档。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p><code class="codeph">AL32UTF8</code>字符集用于在此CDB中存储数据。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">AL16UTF16</code>字符集被指定为<code class="codeph">NATIONAL CHARACTER SET</code>用于将数据存储在专门定义为<code class="codeph">NCHAR</code> ， <code class="codeph">NCLOB</code>或<code class="codeph">NVARCHAR2</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSTEM</code>表空间由操作系统文件<code class="codeph">/u01/app/oracle/oradata/newcdb/system01.dbf</code> ，由<code class="codeph">DATAFILE</code>子句指定创建。如果已存在具有该名称的文件，则会覆盖该文件。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSTEM</code>表空间创建为本地管理的表空间。有关创建本地管理的<code class="codeph">SYSTEM</code>表空间的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-D8061728-6A13-4F30-AA91-EBE52F276AC3" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>创建一个<code class="codeph">SYSAUX</code>表空间，包含<code class="codeph">SYSAUX DATAFILE</code>子句中指定的操作系统文件<code class="codeph">/u01/app/oracle/oradata/newcdb/sysaux01.dbf</code> 。有关<code class="codeph">SYSAUX</code>表空间的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-C70E0886-7D9A-4B0D-BA0B-DF71AB5A2154" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DEFAULT</code> <code class="codeph">TABLESPACE</code>子句为此CDB创建并命名默认永久表空间。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">DEFAULT TEMPORARY TABLESPACE</code>子句为此CDB的根创建并命名默认临时表空间。有关创建默认临时表空间的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-AF2D7962-B165-423B-8FE3-29E7F30A2A3D" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">UNDO TABLESPACE</code>子句创建并命名一个撤消表空间，用于存储此CDB的撤消数据。在CDB中，需要使用撤消表空间来管理撤消数据，并且必须将<code class="codeph">UNDO_MANAGEMENT</code>初始化参数设置为<code class="codeph">AUTO</code> 。如果省略此参数，则默认为<code class="codeph">AUTO</code> 。有关创建撤消表空间的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-BC27AC63-6E76-4C34-A0FE-9C51FFB3487C" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>最初不会归档重做日志文件，因为此<code class="codeph">CREATE DATABASE</code>语句中未指定<code class="codeph">ARCHIVELOG</code>子句。这在CDB创建期间是惯常的。您可以稍后使用<code class="codeph">ALTER DATABASE</code>语句切换到<code class="codeph">ARCHIVELOG</code>模式。与归档相关的<code class="codeph">newcdb</code>的初始化参数文件中的初始化参数是<code class="codeph">LOG_ARCHIVE_DEST_1</code>和<code class="codeph">LOG_ARCHIVE_FORMAT</code> 。有关管理归档重做日志文件的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句创建具有根和PDB种子的CDB。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FILE_NAME_CONVERT</code>子句和<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句需要<code class="codeph">SEED</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FILE_NAME_CONVERT</code>子句使用<code class="codeph">/u01/app/oracle/oradata/pdbseed</code>目录中的文件名为<code class="codeph">/u01/app/oracle/oradata/newcdb</code>目录中的PDB种子文件生成文件名。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSTEM DATAFILES</code>子句指定与根目录不同的PDB种子<code class="codeph">SYSTEM</code>表空间数据文件的属性。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSAUX DATAFILES</code>子句指定与根目录不同的PDB种子<code class="codeph">SYSAUX</code>表空间数据文件的属性。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">USER_DATA TABLESPACE</code>子句创建并命名PDB种子的表空间，用于存储用户数据和数据库选项，如Oracle XML DB。使用PDB种子创建的PDB包括此表空间及其数据文件。根目录不使用此子句中指定的表空间和数据文件。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">LOCAL UNDO ON</code>子句将CDB撤消模式设置为local，这意味着CDB中的每个容器都使用本地撤消。
                                 </p>
                                 <p>当在本地撤消模式下创建CDB时，PDB种子包括撤销表空间，以便从PDB种子创建的任何新PDB具有撤销表空间。通过插入或克隆远程PDB创建PDB，并且源PDB处于共享撤消模式时，将在第一次打开PDB时自动为PDB创建撤消表空间。</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-B6878799-CADD-4E84-BBEB-5C8E582B9010__GUID-C781A12D-DDF2-4952-A5FF-C3B26DD4CE38">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>确保存在<code class="codeph">CREATE DATABASE</code>语句中使用的所有目录。<code class="codeph">CREATE DATABASE</code>语句不创建目录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果您未使用Oracle Managed Files，则每个tablespace子句都必须包含<code class="codeph">DATAFILE</code>或<code class="codeph">TEMPFILE</code>子句。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果CDB创建失败，则可以查看警报日志以确定失败的原因并确定纠正措施。有关查看警报日志的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-D6512D97-FFC3-4BF0-BF50-1F77D150C922" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。如果收到包含进程号的错误消息，请检查该进程的跟踪文件。在跟踪文件名中查找包含进程号的跟踪文件。有关更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-34137402-19A6-4134-93AE-D6DD02242F61" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要在失败后重新提交<code class="codeph">CREATE DATABASE</code>语句，必须先关闭实例并删除先前<code class="codeph">CREATE DATABASE</code>语句创建的所有文件。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-F20BEFA4-3F40-421E-B5BB-EE6D9808E3F0" title="这些示例创建名为newcdb的CDB。">使用CREATE DATABASE语句创建CDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-158375D0-E084-423B-BD91-0C84FB50BF2F" name="GUID-158375D0-E084-423B-BD91-0C84FB50BF2F"></a><h5 id="MULTI-GUID-158375D0-E084-423B-BD91-0C84FB50BF2F" class="sect5"><span class="enumeration_section">4.3.4.2</span>使用Oracle托管文件创建CDB：示例</h5>
                     <div>
                        <p>此示例说明如何使用Oracle Managed Files创建CDB，这使您可以使用更简单的<code class="codeph">CREATE DATABASE</code>语句。
                        </p>
                        <div class="section">
                           <p>要使用Oracle Managed Files，必须设置初始化参数<code class="codeph">DB_CREATE_FILE_DEST</code> 。此参数定义CDB创建并自动命名的各种CDB文件的基目录。
                           </p>
                           <p>以下语句是在初始化参数文件中设置此参数的示例：</p><pre class="pre codeblock"><code>DB_CREATE_FILE_DEST = '/ U01 /应用/ ORACLE / ORADATA'</code></pre><p>此示例设置参数Oracle ASM存储：</p><pre class="pre codeblock"><code>DB_CREATE_FILE_DEST = +数据</code></pre><p>此示例包括<code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句，用于创建具有根和PDB种子的CDB。此示例不包括<code class="codeph">SEED FILE_NAME_CONVERT</code>子句，因为Oracle Managed Files确定PDB种子文件的名称和位置。但是，此示例包括<span class="italic"><code class="codeph">tablespace_datafile</code></span>子句，这些子句指定<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间的PDB种子数据文件的属性，这些表空间与根数据文件不同。
                           </p>
                           <p>使用Oracle Managed Files和以下<code class="codeph">CREATE DATABASE</code>语句，CDB创建<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间，创建语句中指定的其他表空间，并为所有数据文件，控制文件和重做日志文件选择默认大小和属性。请注意，此方法设置的这些属性和其他默认CDB属性可能不适合您的生产环境，因此建议您检查生成的配置并在必要时进行修改。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="pre codeblock"><code>CREATE DATABASE newcdb USER SYS由<span class="italic">sys_password</span>识别用户系统由<span class="italic">system_password</span>识别EXTENT管理本地默认<span class="italic">表格</span>用户默认临时<span class="bold">表格</span> temp UNDO TABLESPACE undotbs1 <span class="bold">启用可插拔数据库</span> <span class="bold">种子</span> <span class="bold">系统数据文件大小125M自动扩展下一个10M最大化无限</span> <span class="bold">SYSAUX数据文件大小100M;</span>
</code></pre><p>创建具有以下特征的CDB：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>CDB名为<code class="codeph">newcdb</code> 。其全局数据库名称为<code class="codeph">newcdb.us.example.com</code> ，其中域部分（ <code class="codeph">us.example.com</code> ）取自初始化参数文件。有关确定全局数据库名称的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-9698EA9B-013C-40AC-8CFB-12171A4B4974" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>用户帐户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>的密码设置为您指定的值。密码区分大小写。在此版本的Oracle数据库中，指定<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>密码的两个子句不是必需的。但是，如果指定任一子句，则必须指定两个子句。有关使用这些子句的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-55208EEE-5B31-4B7F-81A4-AF7AFE8630BE" target="_blank"><span><cite>Oracle数据库管理员指南”，</cite></span></a>以获取有关为用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>指定密码的信息。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">DEFAULT TABLESPACE</code>子句为此CDB创建并命名默认永久表空间。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">DEFAULT TEMPORARY TABLESPACE</code>子句为此CDB的根创建并命名默认临时表空间。有关创建默认临时表空间的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-AF2D7962-B165-423B-8FE3-29E7F30A2A3D" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">UNDO TABLESPACE</code>子句创建并命名一个撤消表空间，用于存储此CDB的撤消数据。在CDB中，需要使用撤消表空间来管理撤消数据，并且必须将<code class="codeph">UNDO_MANAGEMENT</code>初始化参数设置为<code class="codeph">AUTO</code> 。如果省略此参数，则默认为<code class="codeph">AUTO</code> 。有关创建撤消表空间的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-BC27AC63-6E76-4C34-A0FE-9C51FFB3487C" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>最初不会归档重做日志文件，因为此<code class="codeph">CREATE DATABASE</code>语句中未指定<code class="codeph">ARCHIVELOG</code>子句。这在CDB创建期间是惯常的。您可以稍后使用<code class="codeph">ALTER DATABASE</code>语句切换到<code class="codeph">ARCHIVELOG</code>模式。与归档相关的<code class="codeph">newcdb</code>的初始化参数文件中的初始化参数是<code class="codeph">LOG_ARCHIVE_DEST_1</code>和<code class="codeph">LOG_ARCHIVE_FORMAT</code> 。有关管理归档重做日志文件的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMIN-GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ENABLE PLUGGABLE DATABASE</code>子句创建具有根和PDB种子的CDB。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">tablespace_datafile</code></span>子句需要<code class="codeph">SEED</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSTEM DATAFILES</code>子句指定PDB种子的<code class="codeph">SYSTEM</code>表空间数据文件的属性，这些属性与根目录不同。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SYSAUX DATAFILES</code>子句指定PDB种子的<code class="codeph">SYSAUX</code>表空间数据文件的属性，这些属性与根目录不同。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-F20BEFA4-3F40-421E-B5BB-EE6D9808E3F0" title="这些示例创建名为newcdb的CDB。">使用CREATE DATABASE语句创建CDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN14210"></a><div class="props_rev_3"><a id="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009" name="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009"></a><h3 id="MULTI-GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009" class="sect3"><span class="enumeration_section">4.4</span>为CDB配置EM Express</h3>
               <div>
                  <p>对于CDB，您可以通过设置全局HTTPS端口为根和每个PDB配置Oracle Enterprise Manager Database Express（EM Express），也可以为CDB中的每个容器设置不同的端口。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009__GUID-2060CDD6-164E-42BB-BBD7-74247FC03A19">要为CDB配置EM Express：</p>
                     <p>您可以设置全局端口，使您可以使用EM Express使用CDB的HTTP或HTTPS端口连接到CDB中的所有PDB。或者，您可以为CDB中的每个容器设置不同的HTTP或HTTPS端口。</p>
                     <ol>
                        <li id="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009__BABBBIGC">
                           <p>在SQL * Plus中，访问CDB中的容器。</p>
                           <p>用户必须具有通用的<code class="codeph">SYSDBA</code>管理权限，并且必须在连接时使用<code class="codeph">AS SYSDBA</code>执行此权限。容器可以是根或PDB。</p>
                           <p>请参阅<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span> 。
                           </p>
                        </li>
                        <li id="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009__BABJJDIG">
                           <p>使用以下方法之一设置端口：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要设置全局端口，请连接到<code class="codeph">CDB$ROOT</code> ，并发出以下SQL语句以配置CDB的全局端口：</p><pre class="pre codeblock"><code>exec DBMS_XDB_CONFIG.SETGLOBALPORTENABLED（TRUE）;</code></pre></li>
                              <li>
                                 <p>要为当前容器设置HTTP端口，请运行以下过程：</p><pre class="pre codeblock"><code>exec DBMS_XDB_CONFIG.SETHTTPPORT（ <span class="italic">http_port_number</span> ）;</code></pre><p>将<span class="italic"><code class="codeph">http_port_number</code></span>替换为适当的HTTP端口号。
                                 </p>
                              </li>
                              <li>
                                 <p>要为当前容器设置HTTPS端口，请运行以下过程：</p><pre class="pre codeblock"><code>exec DBMS_XDB_CONFIG.SETHTTPSPORT（ <span class="italic">https_port_number</span> ）;</code></pre><p>将<span class="italic"><code class="codeph">https_port_number</code></span>替换为相应的HTTPS端口号。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>通过以下方式之一访问EM Express：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要使用全局端口，请在配置包含PDB的CDB时输入Database Configuration Assistant（DBCA）提供的EM Express URL。出现EM Express登录屏幕时，请指定管理员凭据，然后在“ <span class="uicontrol bold">容器名称”</span>字段中输入要连接的PDB的<span class="uicontrol bold">名称</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>容器的HTTP端口的URL：</p><pre class="pre codeblock"><code>http：// <span class="italic">database_hostname</span> ： <span class="italic">http_port_number</span> / em /</code></pre><p>将<span class="italic"><code class="codeph">database_hostname</code></span>替换为运行数据库实例的计算机的主机名，并将<span class="italic"><code class="codeph">http_port_number</code></span>替换为相应的HTTP端口号。
                                 </p>
                              </li>
                              <li>
                                 <p>容器的HTTPS端口的URL：</p><pre class="pre codeblock"><code>https：// <span class="italic">database_hostname</span> ： <span class="italic">https_port_number</span> / em /</code></pre><p>将<span class="italic"><code class="codeph">database_hostname</code></span>替换为运行数据库实例的计算机的主机名，并将<span class="italic"><code class="codeph">https_port_number</code></span>替换为相应的HTTPS端口号。
                                 </p>
                              </li>
                           </ul>
                           <p>连接到根目录时，EM Express会显示数据并启用适用于整个CDB的操作。连接到PDB时，EM Express会显示数据并启用仅适用于PDB的操作。</p>
                           <div class="infoboxnote" id="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009__GUID-5FC112CA-FCB5-4698-A793-D366ABD71AB6">
                              <p class="notep1">注意：</p>
                              <p>如果未在端口1521上配置侦听器，则必须手动为EM Express配置端口。有关说明，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMQS032" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-21DEC1B3-471C-4220-A0F6-6780E6DC6009__GUID-F8D277FB-27CC-4451-B80B-6A08CEEE962A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关EM Express的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=ADMQS003" target="_blank"><span><cite>Oracle Database 2 Day DBA</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。">创建和配置CDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN13750"></a><a id="ADMIN13751"></a><a id="ADMIN13547"></a><div class="props_rev_3"><a id="GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078" name="GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078"></a><h3 id="MULTI-GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078" class="sect3"><span class="enumeration_section">4.5</span>创建CDB后</h3>
               <div>
                  <p>创建后，CDB由根和PDB种子组成。</p>
                  <p>根包含系统提供的元数据和可以管理PDB的普通用户。PDB种子是可用于创建新PDB的模板。下图显示了新创建的CDB。</p>
                  <div class="figure" id="GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078__BABEJEAH">
                     <p class="titleinfigure">图4-1新创建的CDB</p><img src="img/admin0951.png" width="480" alt="下面是图4-1的描述" title="下面是图4-1的描述" longdesc="img_text/admin0951.html"><br><a href="img_text/admin0951.html">“图4-1新创建的CDB”的描述</a></div>
                  <!-- class="figure" -->
                  <p>在CDB中，根包含最少的用户数据或没有用户数据。用户数据驻留在PDB中。因此，在创建CDB之后，首要任务之一是添加将包含用户数据的PDB。</p>
                  <p>下图显示了带有PDB的CDB。</p>
                  <div class="figure" id="GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078__BABFJDBG">
                     <p class="titleinfigure">图4-2带有PDB的CDB</p><img src="img/admin094.png" width="473" alt="下面是图4-2的描述" title="下面是图4-2的描述" longdesc="img_text/admin094.html"><br><a href="img_text/admin094.html">“图4-2带有PDB的CDB”的描述</a></div>
                  <!-- class="figure" -->
                  <p>您可以选择创建一个或多个应用程序容器。应用程序容器由应用程序根和应用程序PDB组成，它存储一个或多个应用程序的数据。应用程序容器可以存储应用程序公共对象，其包含可以由应用程序容器中的应用程序PDB共享的用户数据。它还可以包含应用程序种子，以便在应用程序容器中快速创建应用程序PDB。</p>
                  <div class="figure" id="GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078__GUID-0C985BE3-0C58-4AFA-BEFA-6C9BAD75AFB5">
                     <p class="titleinfigure">图4-3 CDB中的应用程序容器</p><img src="img/admin112.png" alt="下面是图4-3的描述" title="下面是图4-3的描述" longdesc="img_text/admin112.html"><br><a href="img_text/admin112.html">“图4-3 CDB中的应用程序容器”的描述</a></div>
                  <!-- class="figure" -->
                  <p>将PDB和应用程序容器添加到CDB后，CDB的物理结构与非CDB的物理结构非常相似。 CDB包含以下文件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>一个控制文件</p>
                     </li>
                     <li>
                        <p>针对单实例CDB的一个活动联机重做日志，或者针对Oracle RAC CDB的每个实例的一个活动联机重做日志</p>
                     </li>
                     <li>
                        <p>临时文件集</p>
                        <p>CDB的根有一个默认临时表空间，每个PDB，应用程序根和应用程序PDB有一个默认临时表空间。</p>
                     </li>
                     <li>
                        <p>系统数据文件集</p>
                        <p>CDB和非CDB之间的主要物理差异在于数据文件。非CDB只有一组系统数据文件。相反，CDB包括CDB中每个容器的一组系统数据文件，包括每个PDB，应用程序根和应用程序PDB的一组系统数据文件。此外，CDB为每个容器都有一组用户创建的数据文件。如果CDB处于本地撤消模式，则每个容器也有自己的撤销表空间和关联的数据文件。</p>
                     </li>
                     <li>
                        <p>用户创建的数据文件集</p>
                        <p>每个PDB都有自己的一组非系统数据文件。这些数据文件包含PDB的用户定义模式和数据库对象。</p>
                     </li>
                  </ul>
                  <p>对于CDB的备份和恢复，建议使用Recovery Manager（RMAN）。必须使用RMAN执行PDB时间点恢复（PDB PITR）。默认情况下，RMAN打开CDB的控制文件自动备份。强烈建议为CDB启用控制文件自动备份，以确保PDB PITR可以撤消数据文件的添加或删除。</p>
                  <p>
                     </p><div class="video-box">
                        <div id="6411" class="video-container"></div>
                     </div>
                  
                  <p>由于CDB和非CDB的物理结构相似，因此对于CDB和非CDB，大多数管理任务是相同的。但是，某些管理任务特定于CDB。以下章节描述了这些任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用PDB种子创建PDB</p>
                           </li>
                           <li>
                              <p>通过克隆现有PDB或非CDB来创建PDB</p>
                           </li>
                           <li>
                              <p>通过重新定位来创建PDB</p>
                           </li>
                           <li>
                              <p>将PDB创建为代理PDB</p>
                           </li>
                           <li>
                              <p>插入PDB</p>
                           </li>
                           <li>
                              <p>拔掉PDB</p>
                           </li>
                           <li>
                              <p>删除PDB</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-E2B95068-D16D-438D-9A0B-974540988990" title="您可以通过多种不同方式创建应用程序容器和应用程序种子您还可以从CDB中删除应用程序容器，并且可以从应用程序容器中删除应用程序种子。">创建和删除应用程序容器和种子</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建应用程序容器</p>
                           </li>
                           <li>
                              <p>创建应用程序种子</p>
                           </li>
                           <li>
                              <p>拔掉应用程序容器</p>
                           </li>
                           <li>
                              <p>拔掉应用程序种子</p>
                           </li>
                           <li>
                              <p>删除应用程序容器</p>
                           </li>
                           <li>
                              <p>丢弃应用程序种子</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-2E5025EE-BED3-45A4-9EAA-B05C8DA66F97" title="管理多租户容器数据库（CDB）包括访问容器，修改CDB，执行DDL语句以及运行Oracle提供的SQL脚本等任务。">管理CDB</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到容器</p>
                           </li>
                           <li>
                              <p>切换到容器</p>
                           </li>
                           <li>
                              <p>修改CDB</p>
                           </li>
                           <li>
                              <p>修改根目录</p>
                           </li>
                           <li>
                              <p>更改PDB的打开模式</p>
                           </li>
                           <li>
                              <p>在CDB中执行DDL语句</p>
                           </li>
                           <li>
                              <p>关闭CDB实例</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-702231AB-ABDA-42F4-918C-4539BF8135D6" title="管理PDB包括诸如连接到PDB，修改PDB以及管理与PDB相关联的服务之类的任务。">管理PDB</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>连接到PDB</p>
                           </li>
                           <li>
                              <p>修改PDB</p>
                           </li>
                           <li>
                              <p>管理与PDB相关的服务</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>管理应用程序容器中的应用程序，包括安装，升级和修补应用程序</p>
                           </li>
                           <li>
                              <p>管理应用程序常用对象</p>
                           </li>
                           <li>
                              <p>在应用程序容器中的容器上发出DML语句</p>
                           </li>
                           <li>
                              <p>PDB使用容器映射进行分区</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-208C0C35-D105-443B-B788-381F090B1D11" title="您可以使用SQL * Plus或SQL Developer查看有关CDB和PDB的信息。">监控CDB和PDB</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询监控CDB及其PDB的视图</p>
                           </li>
                           <li>
                              <p>运行提供有关CDB及其PDB的信息的示例查询</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" title="使用PL / SQL包过程来管理Oracle Resource Manager（资源管理器），以便将资源分配给多租户容器数据库（CDB）中的可插拔数据库（PDB）。">将Oracle Resource Manager用于PDB</a> ”</span></p>
                        <p>本章介绍了以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在CDB中创建资源计划</p>
                           </li>
                           <li>
                              <p>管理CDB中的资源计划</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="using-oracle-scheduler-with-a-cdb.html#GUID-5BD1ACC9-D10D-4573-860F-5F8A65AE8554" title="您可以使用Oracle Scheduler在多租户容器数据库（CDB）中计划作业。">将Oracle Scheduler与CDB一起使用</a> ”</span></p>
                        <p>本章介绍以下主题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>CDB中的<code class="codeph">DBMS_SCHEDULER</code>调用</p>
                           </li>
                           <li>
                              <p>CDB中的工作协调员和从属流程</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_JOB</code></p>
                           </li>
                           <li>
                              <p>关闭PDB的过程</p>
                           </li>
                           <li>
                              <p>新的和更改的视图</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-0FCC4914-8FFF-41AD-BA5E-74698931F078__GUID-615778D9-4615-4FAF-A728-851E230921F1">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>用于多租户体系结构文档路线图的<a href="introduction-to-the-multitenant-architecture.html#CNCPT89247" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关RMAN的信息，请参见<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV640" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="创建和配置多租户容器数据库（CDB）包括计划，创建CDB和可选配置EM Express等任务。">创建和配置CDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="01916.managing-oracle-cluster-registry-and-voting-files.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Clusterware includes two important components that manage configuration and node membership: Oracle Cluster Registry (OCR), which also includes the local component Oracle Local Registry (OLR), and voting files."></meta>
      <meta name="description" content="Oracle Clusterware includes two important components that manage configuration and node membership: Oracle Cluster Registry (OCR), which also includes the local component Oracle Local Registry (OLR), and voting files."></meta>
      <title>管理Oracle Cluster Registry和Voting Files</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Oracle Clusterware includes two important components that manage configuration and node membership: Oracle Cluster Registry (OCR), which also includes the local component Oracle Local Registry (OLR), and voting files."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="rapid-home-provisioning.html" title="Previous" type="text/html"></link>
      <link rel="next" href="adding-and-deleting-cluster-nodes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rapid-home-provisioning.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="adding-and-deleting-cluster-nodes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Oracle Cluster Registry和Voting Files</li>
            </ol>
            <a id="GUID-70E524E1-0FAD-4962-9B9F-0691EAEE7A9F" name="GUID-70E524E1-0FAD-4962-9B9F-0691EAEE7A9F"></a><a id="CWADD92368"></a>
            
            <h2 id="CWADD-GUID-70E524E1-0FAD-4962-9B9F-0691EAEE7A9F" class="sect2"><span class="enumeration_chapter">6</span>管理Oracle Cluster Registry and Voting Files</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Clusterware包括两个管理配置和节点成员资格的重要组件：Oracle Cluster Registry（OCR），它还包括本地组件Oracle Local Registry（OLR）和投票文件。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>OCR存储Oracle Clusterware和Oracle RAC数据库配置信息</p>
                  </li>
                  <li>
                     <p>OLR驻留在集群中的每个节点上，并管理每个特定节点的Oracle Clusterware配置信息</p>
                  </li>
                  <li>
                     <p>投票文件存储有关节点成员资格的信息。群集中的所有节点都必须可以访问每个投票文件，以使节点成为群集的成员</p>
                  </li>
               </ul>
               <p></p>
               <div class="infoboxnote" id="GUID-70E524E1-0FAD-4962-9B9F-0691EAEE7A9F__GUID-966156EE-A381-46C5-A60F-9C911005ACCF">
                  <p class="notep1">笔记：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle Clusterware 12 <span class="italic">c</span>不支持使用原始设备或块设备。要升级到Oracle集群从以前的Oracle集群件12 <span class="italic">c。</span>关于您所使用的原料或块设备，必须迁移OCR和表决文件到Oracle自动存储管理（Oracle ASM的），或在升级前的共享文件系统。
                        </p>
                     </li>
                     <li>
                        <p>您可以在Oracle ASM上存储OCR和投票文件，也可以在独立群集上存储共享文件系统。</p>
                        <p>在Oracle Database 12c第2版（12.2）中，不支持将OCR和Voting磁盘文件直接放置在共享文件系统上。从Oracle Database 19c（19.3）开始，该独立集群的desupport被取消。对于Oracle域服务群集，您必须继续将OCR和表决磁盘文件放在由Oracle ASM管理的磁盘组中。</p>
                     </li>
                  </ul>
               </div>
               <p>Oracle建议您在Oracle Clusterware安装期间配置多个投票文件以提高可用性。如果选择将表决文件放入Oracle ASM磁盘组，则Oracle ASM会确保在使用普通或高冗余磁盘组时配置多个表决文件。如果选择将投票文件存储在共享文件系统上，则选择配置多个投票文件的选项，在这种情况下，您必须根据不同的磁盘指定三个不同的文件系统。</p>
               <p>如有必要，您可以在完成Oracle Clusterware安装过程后动态添加或替换投票文件，而无需停止群集。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-20101C89-B87C-49C9-BA63-634376EDB62E" title="使用OCRCONFIG，OCRDUMP和OCRCHECK来管理OCR和Oracle本地注册表（OLR）。">管理Oracle Cluster Registry和Oracle Local Registry</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-00137A43-61A5-446B-BFEA-D7EFDA535E81" title="如果选择将表决文件存储在Oracle ASM中，则Oracle ASM会将群集的所有表决文件存储在您选择的磁盘组中。作为任何配置更改的一部分，Oracle Clusterware会自动备份OCR中的投票文件数据，并自动将数据还原到您添加的任何投票文件。">管理投票文件</a></p>
                  </li>
               </ul>
            </div><a id="CWADD70700"></a><div class="props_rev_3"><a id="GUID-20101C89-B87C-49C9-BA63-634376EDB62E" name="GUID-20101C89-B87C-49C9-BA63-634376EDB62E"></a><h3 id="CWADD-GUID-20101C89-B87C-49C9-BA63-634376EDB62E" class="sect3">管理Oracle Cluster Registry和Oracle Local Registry</h3>
               <div>
                  <p>使用OCRCONFIG，OCRDUMP和OCRCHECK来管理OCR和Oracle本地注册表（OLR）。</p>
                  <p>OCR包含有关群集中所有Oracle资源的信息。</p>
                  <p>OLR是一个类似于位于群集中每个节点上的OCR的注册表，但包含特定于每个节点的信息。它包含有关Oracle Clusterware的可管理性信息，包括各种服务之间的依赖关系。Oracle High Availability Services使用此信息。OLR位于群集中每个节点上的本地存储上。其默认位置位于<code class="codeph"><span class="variable" translate="no">Grid_home</span> /cdata <span class="variable" translate="no">host_name</span> .olr</code>路径中，其中<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>是Oracle Grid Infrastructure主目录， <code class="codeph"><span class="variable" translate="no">host_name</span></code>是节点的主机名。
                  </p>
                  <p>管理OCR在以下主题中描述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC" title="借助驻留在Oracle ASM磁盘组中的Oracle Clusterware存储，您可以使用Oracle Enterprise Manager管理数据库和集群件存储。">将Oracle Cluster Registry迁移到Oracle自动存储管理</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034" title="使用OCRCONFIG管理OCR位置。">添加_替换_修复_并删除Oracle集群注册表位置</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-8554ACE4-44DF-4DB5-A939-1DC6D62BAE60">备份Oracle Cluster Registry</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-648BB199-AFB9-416A-8438-E0331C255E78" title="为您的平台恢复OCR的过程。">还原Oracle Cluster Registry</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-D3B9559B-054A-4574-854E-9865FEDF5EDD" title="使用OCRDUMP和OCRCHECK实用程序诊断OCR问题。">诊断Oracle Cluster Registry问题</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E" title="使用此过程在Linux或UNIX系统上导入OCR。使用此过程在Windows系统上导入OCR。">使用导出和导入命令管理Oracle Cluster Registry</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-4DEA42E9-8E97-474B-AAD8-E5E626FB8B07">Oracle Local Registry</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-1D3FDBE6-03ED-49B9-A181-2463C59331DA">升级和降级Oracle Cluster Registry Configuration</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-cluster-registry-utility-reference.html#GUID-D881BC9C-74F0-44A5-91EC-0341C1C81ED4" title="使用ocrconfig命令管理OCR。使用此实用程序，您可以导入，导出，添加，删除，还原，覆盖，备份，修复，替换，移动，升级或降级OCR。">关于OCRCONFIG</a></li>
                        <li><a href="oracle-cluster-registry-utility-reference.html#GUID-AAEF4603-0943-434D-8152-5A71BD6976B1">Oracle Cluster Registry故障排除</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD91099"></a><div class="props_rev_3"><a id="GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC" name="GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC"></a><h4 id="CWADD-GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC" class="sect4">将Oracle Cluster Registry迁移到Oracle自动存储管理</h4>
                  <div>
                     <p>借助驻留在Oracle ASM磁盘组中的Oracle Clusterware存储，您可以使用Oracle Enterprise Manager管理数据库和集群件存储。</p>
                     <div class="section">
                        <p>为了提高Oracle Clusterware存储的可管理性，默认情况下，OCR配置为在Oracle Database 12 <span class="italic">c中</span>使用Oracle ASM。但是，如果从先前版本的Oracle Clusterware升级，则可以将OCR迁移到驻留在Oracle ASM上，并利用管理Oracle Clusterware存储的改进。
                        </p>
                        <div class="infoboxnote" id="GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC__GUID-66A5C727-16DC-4472-AB00-6E292BA62DC5">
                           <p class="notep1">注意：</p>
                           <p>如果您从以前版本的Oracle集群到Oracle集群<span class="italic">12c的</span>升级，要存储OCR的Oracle ASM磁盘组中，则必须将<span class="bold">ASM兼容性</span>兼容性属性设置为<code class="codeph">11.2.0.2</code> ，或更高版本。
                           </p>
                        </div>
                        <p>使用OCRCONFIG将OCR迁移到Oracle ASM：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>确保已完成对Oracle Clusterware 12 <span class="italic">c</span>的升级。运行以下命令以验证当前运行的版本：</span><div><pre class="pre codeblock"><code>$ crsctl查询crs activeversion</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用Oracle ASM Configuration Assistant（ASMCA）在群集中的所有节点上配置和启动Oracle ASM。</span><div></div>
                        </li>
                        <li class="stepexpand"><span>使用ASMCA创建至少与现有OCR大小相同且至少具有正常冗余的Oracle ASM磁盘组。</span><div>
                              <div class="infoboxnote" id="GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC__GUID-F34C5E10-56DE-40B5-BBE1-C8BAA9F54E0E">
                                 <p class="notep1">注意：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果OCR存储在具有外部冗余的Oracle ASM磁盘组中，则Oracle建议您将另一个OCR位置添加到另一个磁盘组，以避免在磁盘组中磁盘发生故障时丢失OCR。</p>
                                       <p>Oracle不支持同时在不同的存储类型上存储OCR，例如在Oracle ASM和共享文件系统上存储OCR，但迁移期间除外。</p>
                                    </li>
                                    <li>
                                       <p>如果任何节点上的Oracle ASM实例失败，则该特定节点上的OCR将变为不可用。</p>
                                       <p>如果受Oracle ASM实例故障影响的节点上运行的CRSD进程是<a href="glossary.html#GUID-20E48152-87E0-4668-B8E6-3B0CF469B544"><span class="xrefglossterm">OCR编写器</span></a> ，则大多数OCR位置存储在Oracle ASM中，并且在Oracle ASM实例关闭期间在OCR上尝试I / O此节点，然后CRSD停止并变得不可操作。现在，此特定节点上的群集管理受到影响。
                                       </p>
                                       <p>在任何情况下，一个节点上的一个Oracle ASM实例的故障都不会影响整个集群。</p>
                                    </li>
                                    <li>
                                       <p>确保您创建的Oracle ASM磁盘组已安装在群集中的所有节点上。</p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要将OCR添加到Oracle ASM磁盘组，请确保<a href="glossary.html#GUID-C1F07478-A146-48E0-94E2-A93F6ED7B34A"><span class="xrefglossterm">Oracle Clusterware堆栈</span></a>正在运行并以<code class="codeph">root</code>身份运行以下命令：</span><div><pre class="pre codeblock"><code><span class="variable" translate="no">new_disk_group</span> -add + <span class="variable" translate="no">new_disk_group</span></code></pre><p>如果添加多个OCR位置，则可以多次运行此命令。您最多可以有五个OCR位置。但是，每次连续运行必须指向不同的磁盘组。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要删除不再使用的存储配置，请以<code class="codeph">root</code>身份运行以下命令：</span><div><pre class="pre codeblock"><code><span class="variable" translate="no">old_storage_location</span> -delete <span class="variable" translate="no">old_storage_location</span></code></pre><p>对每个配置的OCR运行此命令。</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>以下示例说明如何使用OCRCONFIG将两个OCR迁移到Oracle ASM。</p><pre class="pre codeblock"><code><span class="variable" translate="no">new_disk_group</span> -add + <span class="variable" translate="no">new_disk_group</span> ＃ocrconfig -delete / ocrdata / ocr_1＃ocrconfig -delete / ocrdata / ocr_2</code></pre><div class="infoboxnote" id="GUID-94CE3710-770D-45BB-B67B-0A2BC6DBE3AC__GUID-88CE998C-0FE6-4468-B3A3-E829ABAC7929">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>OCR继承了磁盘组的冗余。如果要为OCR提供高冗余，则必须在创建磁盘组时配置具有高冗余的磁盘组。</p>
                              </li>
                              <li>
                                 <p>Oracle建议您将SPFILE for Oracle ASM放在这个新创建的OCR位置。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../ostmg/diskgroup-compatibility.html#OSTMG-GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           <li><a href="../ostmg/manage-asm-asmca.html#OSTMG-GUID-C29F444F-C440-450B-A13B-84CC2147826F" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           <li><a href="../ostmg/asmcmd-instance-commands.html#OSTMG-GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div><a id="CWADD91101"></a><div class="props_rev_3"><a id="GUID-45585A36-F1D3-49AC-B2FB-4EE0F608C6DF" name="GUID-45585A36-F1D3-49AC-B2FB-4EE0F608C6DF"></a><h5 id="CWADD-GUID-45585A36-F1D3-49AC-B2FB-4EE0F608C6DF" class="sect5">将Oracle Cluster Registry从Oracle ASM迁移到其他类型的存储</h5>
                     <div>
                        <div class="section">
                           <p>至<a id="d37753e788" class="indexterm-anchor"></a><a id="d37753e792" class="indexterm-anchor"></a><a id="d37753e798" class="indexterm-anchor"></a>将OCR从Oracle ASM迁移到另一种存储类型：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>确保已完成对Oracle Clusterware 12 <span class="italic">c</span>的升级。运行以下命令以验证当前运行的版本：</span><div><pre class="oac_no_warn" dir="ltr">$ crsctl查询crs activeversion</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下权限在共享或群集文件系统中创建文件： <code class="codeph">root</code> ， <code class="codeph">oinstall</code> ， <code class="codeph">640</code> 。</span><div>
                                 <div class="infoboxnote" id="GUID-45585A36-F1D3-49AC-B2FB-4EE0F608C6DF__GUID-E97B52AF-AF87-49A0-8F2C-1193840235DB">
                                    <p class="notep1">注意：</p>
                                    <p>创建主存储位置的至少两个镜像，以消除OCR的单点故障。 OCR最多支持五个位置。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保安装分区上至少有500 MB的空间。</span></li>
                           <li class="stepexpand"><span>确保您创建的文件在群集中的所有节点上都可见。</span></li>
                           <li class="stepexpand"><span>要将文件添加为OCR位置，请确保Oracle Clusterware堆栈正在运行并以<code class="codeph">root</code>身份运行以下命令：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">#ocrconfig</span> -add <span class="italic">file_location</span>
</pre><p>如果添加多个OCR位置，则可以多次运行此命令。此命令的每次连续运行必须指向不同的文件位置。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保未在Oracle ASM磁盘组上配置OCR备份位置。</span><div>
                                 <p>要将OCR备份位置迁移到文件系统，请以<code class="codeph">root</code>身份运行以下命令：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">#ocrconfig</span> -backuploc <span class="italic">file_location</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>要删除不再使用的存储配置，请以<code class="codeph">root</code>身份运行以下命令：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">#ocrconfig</span> -delete + <span class="italic">asm_disk_group</span>
</pre><p>如果配置了多个OCR位置，则可以多次运行此命令。</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>以下示例说明如何使用OCRCONFIG将OCR从Oracle ASM迁移到NAS。</p><pre class="oac_no_warn" dir="ltr">#ocrconfig -add / nas / ocr</pre><p>对于未存储在Oracle ASM上的OCR，Oracle建议您在不同设备上镜像OCR。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="CWADD90964"></a><div class="props_rev_3"><a id="GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034" name="GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034"></a><h4 id="CWADD-GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034" class="sect4">添加，替换，修复和删除Oracle Cluster Registry Locations</h4>
                  <div>
                     <p>使用OCRCONFIG管理OCR位置。</p>
                     <p>Oracle Clusterware的Oracle安装过程为您提供了自动镜像OCR的选项。您可以手动将镜像OCR放在共享网络文件系统（NFS）上，也可以放在Oracle认证的任何群集文件系统上。或者，您可以将OCR放在Oracle ASM上，并允许它自动创建镜像，具体取决于您选择的冗余选项。</p>
                     <p>如果您执行以下操作，则可以按照<span class="italic">添加Oracle Cluster Registry Location</span>部分中的说明手动镜像OCR：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>升级到Oracle Clusterware 12 <span class="italic">c</span>但未在升级期间选择镜像OCR</p>
                        </li>
                        <li>
                           <p>在Oracle Clusterware安装期间仅创建一个OCR位置</p>
                        </li>
                     </ul>
                     <p>Oracle建议您配置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果在非镜像或非冗余存储上配置OCR，则至少有三个OCR位置。如果底层存储不是RAID，Oracle强烈建议您镜像OCR。镜像可以帮助防止OCR成为单点故障。</p>
                        </li>
                        <li>
                           <p>如果在Oracle ASM磁盘组上配置了OCR，则至少有两个OCR位置。您应该在两个独立的磁盘组中配置OCR。通常，这是工作区域和恢复区域。</p>
                        </li>
                        <li>
                           <p>如果在镜像硬件或第三方镜像卷上配置了OCR，则至少有两个OCR位置。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034__GUID-5DE55C88-31DB-4FD8-AB66-05624BAEB92C">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果原始OCR位置不存在，则必须在运行<code class="codeph">ocrconfig -add</code>或<code class="codeph">ocrconfig -replace</code>命令之前创建具有适当权限的空（0字节）OCR位置。
                              </p>
                           </li>
                           <li>
                              <p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                           </li>
                           <li>
                              <p>确保您指定的Oracle ASM磁盘组存在且已装入。</p>
                           </li>
                           <li>
                              <p>必须可以从群集中的所有活动节点访问新的OCR文件，设备或磁盘组。</p>
                           </li>
                        </ul>
                     </div>
                     <p>除镜像OCR位置外，管理OCR位置还包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-582CE178-A9C2-4685-81BC-E31F1DDBE60C">添加Oracle Cluster Registry Location</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-7B9D91BC-7E40-4643-AF7A-37D695875BF8">删除Oracle Cluster Registry Location</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-699F70A0-254C-4FF5-A5AA-334EE9E29FC6">替换Oracle Cluster Registry Location</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-D8EB7441-378F-41A6-863A-A1706CC48680" title="如果在该节点停止且此节点是群集中的唯一成员时，如果群集配置发生更改，则可能需要修复OCR。">修复本地节点上的Oracle Cluster Registry配置</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-32DC0B83-6EA9-4FF2-BC39-4EC54728C392">覆盖Oracle Cluster Registry数据丢失保护机制</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-BFBBF4EC-5227-4413-98E0-93B62AA44034__GUID-8847F4A1-6D0C-4E3F-9AA3-7DB5A0D85647">
                        <p class="notep1">注意：</p>
                        <p>本节中的操作会影响整个集群中的OCR：操作会更改Linux和UNIX系统上的<code class="codeph">ocr.loc</code>文件中的OCR配置信息以及Windows系统上的注册表项。但是， <code class="codeph">ocrconfig</code>命令无法修改已关闭的节点或未运行Oracle Clusterware的节点的OCR配置信息。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div><a id="CWADD90965"></a><div class="props_rev_3"><a id="GUID-582CE178-A9C2-4685-81BC-E31F1DDBE60C" name="GUID-582CE178-A9C2-4685-81BC-E31F1DDBE60C"></a><h5 id="CWADD-GUID-582CE178-A9C2-4685-81BC-E31F1DDBE60C" class="sect5">添加Oracle Cluster Registry Location</h5>
                     <div>
                        <div class="section">
                           <p><a id="d37753e1251" class="indexterm-anchor"></a>使用本节中的过程添加OCR位置。Oracle Clusterware最多可以管理五个冗余OCR位置。
                           </p>
                           <div class="infoboxnote" id="GUID-582CE178-A9C2-4685-81BC-E31F1DDBE60C__GUID-37BB2B35-FF05-43BE-ACEB-42ED10626323">
                              <p class="notep1">注意：</p>
                              <p>如果OCR驻留在群集文件系统文件或网络文件系统上，请在执行本节中的过程之前创建一个空（0字节）OCR位置文件。</p>
                           </div>
                           <p>以<code class="codeph">root</code>用户身份运行以下命令，将OCR位置添加到Oracle ASM或其他存储设备：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">#ocrconfig</span> -add + <span class="italic">asm_disk_group</span> | <span class="italic">文件名</span></pre><div class="infoboxnote" id="GUID-582CE178-A9C2-4685-81BC-E31F1DDBE60C__GUID-38E63004-BB3F-44D9-B5C4-BEF799EB241E">
                              <p class="notep1">注意：</p>
                              <p>在Linux和UNIX系统上，您必须是<code class="codeph">root</code>才能运行<code class="codeph">ocrconfig</code>命令。在Windows系统上，用户必须是管理员组的成员。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD90968"></a><div class="props_rev_3"><a id="GUID-7B9D91BC-7E40-4643-AF7A-37D695875BF8" name="GUID-7B9D91BC-7E40-4643-AF7A-37D695875BF8"></a><h5 id="CWADD-GUID-7B9D91BC-7E40-4643-AF7A-37D695875BF8" class="sect5">删除Oracle Cluster Registry Location</h5>
                     <div>
                        <div class="section">
                           <p>要删除OCR位置或失败的OCR位置，至少有一个其他OCR必须在线。<a id="d37753e1400" class="indexterm-anchor"></a>您可以删除OCR位置以减少与OCR相关的开销或停止镜像OCR，因为您已将OCR移至冗余存储（如RAID）。</p>
                           <p>以<code class="codeph">root</code>用户身份执行以下过程以从Oracle Clusterware环境中删除OCR位置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>确保您要删除的OCR位置以外的<span class="italic">至少一个</span> OCR位置处于联机状态。</span><div>
                                 <div class="infoboxnote" id="GUID-7B9D91BC-7E40-4643-AF7A-37D695875BF8__GUID-7D6108A3-07D5-42D4-8417-E263772F5E62">
                                    <p class="notep1">警告：</p>
                                    <p>除非有至少一个其他活性OCR位置网上<span class="italic">不要</span>执行此OCR取出过程。
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在群集中的任何节点上运行以下命令，以从Oracle ASM或其他位置删除OCR位置：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">#ocrconfig</span> -delete + <span class="italic">ASM_disk_group</span> | <span class="italic">文件名</span>
</pre><p><span class="italic"><code class="codeph">file_name</code></span>变量可以是设备名称或文件名。此命令更新运行Oracle Clusterware的所有节点上的OCR配置。
                                 </p>
                                 <div class="infoboxnote" id="GUID-7B9D91BC-7E40-4643-AF7A-37D695875BF8__GUID-A2F356E2-35C3-449F-B959-269047EDC389">
                                    <p class="notep1">注意：</p>
                                    <p>无法删除唯一配置的Oracle ASM OCR位置，该位置位于与Oracle ASM OCR备份位置不同的Oracle ASM磁盘组上。</p>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CWADD91264"></a><a id="CWADD90966"></a><div class="props_rev_3"><a id="GUID-699F70A0-254C-4FF5-A5AA-334EE9E29FC6" name="GUID-699F70A0-254C-4FF5-A5AA-334EE9E29FC6"></a><h5 id="CWADD-GUID-699F70A0-254C-4FF5-A5AA-334EE9E29FC6" class="sect5">替换Oracle Cluster Registry Location</h5>
                     <div>
                        <div class="section">
                           <p>如果必须更改现有OCR位置，或将失败的OCR位置更改为工作位置，则可以使用以下过程（如果所有剩余的OCR位置保持联机状态）。<code class="codeph">ocrconfig -replace</code>命令要求至少配置两个OCR位置。
                           </p>
                           <p><span class="bold">要更改Oracle Cluster Registry位置：</span></p>
                           <p>完成以下过程：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>使用OCRCHECK实用程序使用以下命令验证除了要替换的OCR之外的OCR副本是否<span class="italic">在线</span> ：</span><div><pre class="pre codeblock"><code>$ ocrcheck</code></pre><p>OCRCHECK显示已注册的所有OCR位置以及它们是否可用（在线）。如果OCR位置突然变得不可用，则Oracle Clusterware可能需要很短的时间才能显示状态的变化。</p>
                                 <div class="infoboxnote" id="GUID-699F70A0-254C-4FF5-A5AA-334EE9E29FC6__GUID-ADDAFD5F-2790-4346-B361-ACB3B2A9E50D">
                                    <p class="notep1">注意：</p>
                                    <p>您要<span class="italic">替换</span>的OCR位置可以是在线或离线。
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令验证Oracle Clusterware是否在要执行替换操作的节点上运行：</span><div><pre class="pre codeblock"><code>$ crsctl check crs</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>以<code class="codeph">root</code>身份运行以下命令，使用<code class="codeph"><span class="variable" translate="no">destination_file</span></code>或<code class="codeph">+ <span class="variable" translate="no">ASM_disk_group</span></code>替换当前OCR位置，以指示当前和目标OCR位置：</span><div><pre class="pre codeblock"><code><span class="variable" translate="no">new_OCR_location</span> -replace <span class="variable" translate="no">current_OCR_location</span> -replacement <span class="variable" translate="no">new_OCR_location</span></code></pre><p>如果配置的OCR位置少于两个，则上述命令将失败。</p>
                                 <p>如果您只配置了一个OCR位置并在线，则必须先添加新位置，然后删除失败位置，如下所示：</p><pre class="pre codeblock"><code><span class="variable" translate="no">new_OCR_location</span> -add <span class="variable" translate="no">new_OCR_location</span> ＃ocrconfig -delete <span class="variable" translate="no">current_OCR_location</span></code></pre><div class="infoboxnote" id="GUID-699F70A0-254C-4FF5-A5AA-334EE9E29FC6__GUID-732E1A96-DB40-47ED-B2E8-E5C739059BA3">
                                    <p class="notep1">注意：</p>
                                    <p>如果在停止OCR所在的节点时集群配置发生更改，并且Oracle Clusterware堆栈正在其他节点上运行，则OCR会检测配置更改并通过更改<code class="codeph">ocr.loc</code>文件的内容来自行更正配置。
                                    </p>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../ostmg/asm-migration-rman.html#OSTMG-GUID-EE232095-823A-4717-8629-75E6A750FCDB" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD90967"></a><div class="props_rev_3"><a id="GUID-D8EB7441-378F-41A6-863A-A1706CC48680" name="GUID-D8EB7441-378F-41A6-863A-A1706CC48680"></a><h5 id="CWADD-GUID-D8EB7441-378F-41A6-863A-A1706CC48680" class="sect5">修复本地节点上的Oracle Cluster Registry配置</h5>
                     <div>
                        <p>如果在该节点停止且此节点是群集中的唯一成员时，如果群集配置发生更改，则可能需要修复OCR。</p>
                        <div class="section">
                           <p>修复OCR涉及添加，删除或替换OCR位置。例如，如果关闭了当前Oracle RAC集群中的任何节点，则必须更新已停止节点上的OCR配置，以便在重新启动节点后让该节点重新加入集群。在重新启动的节点上以<code class="codeph">root</code>身份使用以下命令语法，您可以使用<code class="codeph"><span class="variable" translate="no">destination_file</span></code>或<code class="codeph">+ <span class="variable" translate="no">ASM_disk_group</span></code>来指示当前和目标OCR位置：</p><pre class="pre codeblock"><code>#ocrconfig -repair -replace <span class="variable" translate="no">current_OCR_location</span> -replacement <span class="variable" translate="no">target_OCR_location</span></code></pre><p>此操作仅更改运行此命令的节点上的OCR。例如，如果OCR位置是<code class="codeph">/dev/sde1</code> ，则在此节点上使用命令语法<code class="codeph">ocrconfig -repair -add /dev/sde1</code>来修复该节点上的OCR。
                           </p>
                           <div class="infoboxnote" id="GUID-D8EB7441-378F-41A6-863A-A1706CC48680__GUID-A74E483B-E875-44D4-B578-E085C4F07095">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>您无法在运行Oracle Cluster Ready Service守护程序的节点上修复OCR配置。</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">ocrconfig -repair</code>在停止的节点上修复OCR时，必须提供与其他节点上的OCR文件名相同的OCR文件名（应区分大小写）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果你运行<code class="codeph">ocrconfig -add | -repair | -replace</code>命令，然后必须可以访问要添加的设备，文件或Oracle ASM磁盘组。这意味着必须存在设备。您必须创建一个空（0字节）OCR位置，或者必须存在并装入Oracle ASM磁盘组。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-cluster-registry-utility-reference.html#GUID-2029B8DE-F140-43EF-B4F8-26CC7D31D179" title="将OCR位置添加到Oracle自动存储管理（Oracle ASM）磁盘组。指定OCR备份目录位置。将OCR备份文件从一个位置复制到另一个位置。删除OCR设备或文件。只有root脚本才能使用此命令将OCR降级到较早指定的版本。将OCR的内容导出到目标文件。将导出OCR内容的目标文件的内容导入OCR。根据需要将OCR备份到特定位置。使用当前OCR配置信息覆盖OCR元数据中的OCR配置，该信息位于运行此命令的节点上。在运行此命令的节点上修复OCR配置。将OCR位置替换为Oracle自动存储管理（Oracle ASM）磁盘组。从自动创建的OCR备份文件中恢复OCR。显示所有可用备份。显示OCR和OLR备份文件的备份位置。从先前版本升级OCR。">OCRCONFIG命令参考</a></li>
                              <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD90969"></a><div class="props_rev_3"><a id="GUID-32DC0B83-6EA9-4FF2-BC39-4EC54728C392" name="GUID-32DC0B83-6EA9-4FF2-BC39-4EC54728C392"></a><h5 id="CWADD-GUID-32DC0B83-6EA9-4FF2-BC39-4EC54728C392" class="sect5">覆盖Oracle Cluster Registry数据丢失保护机制</h5>
                     <div>
                        <div class="section">
                           <p>OCR <a id="d37753e1959" class="indexterm-anchor"></a>有一种机制可以防止意外覆盖造成的数据丢失。如果配置镜像OCR，并且Oracle Clusterware无法访问镜像OCR位置，并且无法验证可用OCR位置是否包含最新配置，则Oracle Clusterware会阻止对可用OCR位置的进一步修改。此外，该过程通过禁止Oracle Clusterware在只有一个OCR可用的节点上启动来防止覆盖。在这种情况下，Oracle数据库会在Oracle Enterprise Manager，Oracle Clusterware警报日志文件或两者中显示警报消息。如果此问题仅对一个节点是本地问题，则可以使用其他节点启动集群数据库。
                           </p>
                           <p>但是，如果您无法在环境中启动任何群集节点，并且既无法修复OCR也无法恢复对所有OCR位置的访问，则可以覆盖保护机制。通过以下列表中描述的过程，您可以使用可用的OCR位置启动集群。但是，覆盖保护机制可能会导致在创建先前已知的良好状态时丢失的数据丢失。</p>
                           <div class="infoboxnote" id="GUID-32DC0B83-6EA9-4FF2-BC39-4EC54728C392__GUID-E2952B5E-2C4D-4B31-8721-26221FBB6400">
                              <p class="notep1">警告：</p>
                              <p>使用以下过程覆盖OCR可能导致在对当前可访问的OCR进行的最后一次已知良好OCR更新时间与执行覆盖的时间之间进行的OCR更新丢失。换句话说，如果用于执行覆盖的OCR位置不包含群集环境的最新配置更新，则运行<code class="codeph">ocrconfig -overwrite</code>命令可能会导致数据丢失。
                              </p>
                           </div>
                           <p>如果节点无法启动<span class="italic">且</span>警报日志包含，请执行以下过程以覆盖OCR <a id="d37753e1977" class="indexterm-anchor"></a> CLSD-1009和<a id="d37753e1982" class="indexterm-anchor"></a> CLSD-1011消息。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>尝试解决CLSD-1009和CLSD-1011消息的原因。</span><div>
                                 <p>将节点的OCR配置（Linux和UNIX系统上的<code class="codeph">ocr.loc</code>和Windows系统上的Registry）与运行Oracle Clusterware的其他节点进行比较。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果配置不匹配，请运行<code class="codeph">ocrconfig -repair</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果配置匹配，请确保该节点可以通过在Linux和UNIX系统上运行<code class="codeph">ls</code>命令来访问所有已配置的OCR。在Windows上，如果OCR位置是文件，请使用<code class="codeph">dir</code>命令并运行<code class="codeph">GuiOracleObjectManager.exe</code>以验证具有该名称的群集部分是否存在。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保最新的OCR包含最新的OCR更新。</span><div>
                                 <p>查看<code class="codeph">ocrdump</code>命令的输出并确定它是否具有最新更新。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果无法解决导致CLSD消息的问题，请运行命令<code class="codeph">ocrconfig -overwrite</code>以启动节点。</span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="CWADD90970"></a><div class="props_rev_3"><a id="GUID-8554ACE4-44DF-4DB5-A939-1DC6D62BAE60" name="GUID-8554ACE4-44DF-4DB5-A939-1DC6D62BAE60"></a><h4 id="CWADD-GUID-8554ACE4-44DF-4DB5-A939-1DC6D62BAE60" class="sect4">备份Oracle Cluster Registry</h4>
                  <div>
                     <p>本节介绍<a id="d37753e2149" class="indexterm-anchor"></a>如何备份OCR内容并将其用于恢复。第一种方法使用自动生成的OCR副本，第二种方法允许您手动发出备份命令：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">自动备份</span> ： <a id="d37753e2160" class="indexterm-anchor"></a> Oracle Clusterware每四个小时自动创建一次OCR备份。在任何时候，Oracle数据库始终保留OCR的最后三个备份副本。创建备份的CRSD进程还会为每个<span class="italic">完整日期</span>和<span class="italic">每周后</span>创建并保留OCR备份。您无法自定义备份频率或Oracle数据库保留的文件数。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">手动备份</span> ：运行<a id="d37753e2176" class="indexterm-anchor"></a>在Oracle Clusterware堆栈启动并运行的节点上的<code class="codeph">ocrconfig -manualbackup</code>命令，以强制Oracle Clusterware随时执行OCR备份，而不是等待自动备份。您必须以具有管理权限的用户身份运行该命令。当您希望按需获取二进制备份时（例如在更改OCR之前），- <code class="codeph">-manualbackup</code>选项特别有用。 OLR仅支持手动备份。
                           </p>
                        </li>
                     </ul>
                     <p>当群集中的所有节点上的集群件堆栈关闭时， <code class="codeph">ocrconfig -showbackup</code>命令列出的备份可能因节点而异。
                     </p>
                     <div class="infoboxnote" id="GUID-8554ACE4-44DF-4DB5-A939-1DC6D62BAE60__GUID-2E25EC79-BC7D-4B7A-902A-914A9061E834">
                        <p class="notep1">注意：</p>
                        <p>在节点上安装或升级Oracle Clusterware或向集群添加节点后，当<code class="codeph">root.sh</code>脚本完成后，它将备份OLR。</p>
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-6921B0DB-4C97-48D6-9128-373544663DCF">列出备份文件</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-619A16D6-AF79-4A48-950B-673F2A496408">更改备份位置</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-6921B0DB-4C97-48D6-9128-373544663DCF" name="GUID-6921B0DB-4C97-48D6-9128-373544663DCF"></a><h5 id="CWADD-GUID-6921B0DB-4C97-48D6-9128-373544663DCF" class="sect5">列出备份文件</h5>
                     <div>
                        <div class="section">
                           <p>运行以下命令列出备份文件：</p><pre class="oac_no_warn" dir="ltr">ocrconfig -showbackup</pre><p><code class="codeph">ocrconfig -showbackup</code>命令显示Oracle Clusterware创建的备份文件的备份位置，时间戳和原始节点名称。默认情况下， <code class="codeph">-showbackup</code>选项显示自动和手动备份的信息，但您可以包括<code class="codeph">auto</code>或<code class="codeph">manual</code>标志，分别仅显示自动备份信息或仅显示手动备份信息。
                           </p>
                           <p>运行以下命令以检查内容并验证备份文件的完整性：</p><pre class="oac_no_warn" dir="ltr">ocrdump -backupfile <span class="italic">backup_file_name</span>
</pre><p>您可以使用任何备份软件将每天至少一次自动生成的备份文件复制到主OCR所在的其他设备。</p>
                           <p>从Oracle Clusterware 12 <span class="italic">c第</span> 2版（12.2）开始，生成备份的默认位置是Oracle ASM磁盘组，您可以在Oracle ASM磁盘组之间进行更改，但<span class="italic">无法</span>更改为本地文件系统。Oracle建议您使用标准操作系统或第三方工具将使用OCRCONFIG实用程序创建的备份文件包含在操作系统备份中。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-619A16D6-AF79-4A48-950B-673F2A496408" name="GUID-619A16D6-AF79-4A48-950B-673F2A496408"></a><h5 id="CWADD-GUID-619A16D6-AF79-4A48-950B-673F2A496408" class="sect5">更改备份位置</h5>
                     <div>
                        <div class="section">
                           <p>运行以下命令以更改OCR创建备份的位置：</p><pre class="pre codeblock"><code>#ocrconfig -backuploc <span class="variable" translate="no">file_name</span></code></pre><p>上述命令中的<code class="codeph"><span class="variable" translate="no">file_name</span></code>变量可以是所有节点都可以访问的完整目录路径名，也可以是安装在所有节点上的Oracle ASM磁盘组。在将OCR备份位置更改为Oracle ASM磁盘组之前，必须将OCR迁移到Oracle ASM。仅当单独磁盘组中至少有一个Oracle ASM OCR位置时，才能将OCR备份位置更改为Oracle ASM磁盘组。
                           </p>
                           <p>例如，要在目录中指定OCR备份位置：</p><pre class="pre codeblock"><code><span class="variable" translate="no">Grid_home</span> -backuploc <span class="variable" translate="no">Grid_home</span> / cdata / cluster3</code></pre><p>要在Oracle ASM磁盘组中指定OCR备份位置，请执行以下操作：</p><pre class="pre codeblock"><code>#ocrconfig -backuploc + bkupdg</code></pre><div class="infoboxnote" id="GUID-619A16D6-AF79-4A48-950B-673F2A496408__GUID-341FAD09-B726-48BC-8F44-5A5D7299304C">
                              <p class="notep1">注意：</p>
                              <p>在Linux和UNIX系统上，您必须是<code class="codeph">root</code>用户才能运行大多数但不是所有<code class="codeph">ocrconfig</code>命令选项。在Windows系统上，用户必须是管理员组的成员。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E" title="使用此过程在Linux或UNIX系统上导入OCR。使用此过程在Windows系统上导入OCR。">使用导出和导入命令管理Oracle Cluster Registry</a></li>
                              <li><a href="oracle-cluster-registry-utility-reference.html#GUID-2029B8DE-F140-43EF-B4F8-26CC7D31D179" title="将OCR位置添加到Oracle自动存储管理（Oracle ASM）磁盘组。指定OCR备份目录位置。将OCR备份文件从一个位置复制到另一个位置。删除OCR设备或文件。只有root脚本才能使用此命令将OCR降级到较早指定的版本。将OCR的内容导出到目标文件。将导出OCR内容的目标文件的内容导入OCR。根据需要将OCR备份到特定位置。使用当前OCR配置信息覆盖OCR元数据中的OCR配置，该信息位于运行此命令的节点上。在运行此命令的节点上修复OCR配置。将OCR位置替换为Oracle自动存储管理（Oracle ASM）磁盘组。从自动创建的OCR备份文件中恢复OCR。显示所有可用备份。显示OCR和OLR备份文件的备份位置。从先前版本升级OCR。">OCRCONFIG命令参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92002"></a><div class="props_rev_3"><a id="GUID-648BB199-AFB9-416A-8438-E0331C255E78" name="GUID-648BB199-AFB9-416A-8438-E0331C255E78"></a><h4 id="CWADD-GUID-648BB199-AFB9-416A-8438-E0331C255E78" class="sect4">还原Oracle Cluster Registry</h4>
                  <div>
                     <p>为您的平台恢复OCR的过程。</p>
                     <p>如果资源出现故障，则在尝试还原OCR之前，请重新启动资源。作为OCR失败的确定验证，运行<code class="codeph">ocrcheck</code>并且如果命令返回失败消息，则主OCR和OCR镜像都失败。
                     </p>
                     <div class="infoboxnote" id="GUID-648BB199-AFB9-416A-8438-E0331C255E78__GUID-9C9E0B85-EE30-4845-A0BF-7D7A7BB4A0C8">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您<span class="italic">无法</span>使用<code class="codeph">-import</code>选项从OCR备份文件还原配置，该选项在<span class="q">“使用导出和导入命令管理Oracle Cluster Registry”中进行了说明</span> 。您<span class="italic">必须</span>使用<code class="codeph">-restore</code>选项，如以下部分所述。
                              </p>
                           </li>
                           <li>
                              <p>如果将OCR存储在Oracle ASM磁盘组上且磁盘组不可用，则必须恢复并装入Oracle ASM磁盘组。</p>
                           </li>
                        </ul>
                     </div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988" title="使用此过程可在Linux或UNIX系统上还原OCR。">在Linux或UNIX系统上还原Oracle Cluster Registry</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB" title="使用此过程在Windows系统上还原OCR。">在Windows系统上还原Oracle Cluster Registry</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392" title="使用此过程在Oracle Restart环境中还原OCR。">在Oracle Restart Environment中恢复Oracle Cluster Registry</a></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E" title="使用此过程在Linux或UNIX系统上导入OCR。使用此过程在Windows系统上导入OCR。">使用导出和导入命令管理Oracle Cluster Registry</a></li>
                           <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988" name="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988"></a><h5 id="CWADD-GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988" class="sect5">在Linux或UNIX系统上还原Oracle Cluster Registry</h5>
                     <div>
                        <p>使用此过程可在Linux或UNIX系统上还原OCR。</p>
                        <div class="section">
                           <p>如果要在Oracle ASM磁盘组上存储OCR，并且该磁盘组已损坏，则必须使用Oracle ASM实用程序还原Oracle ASM磁盘组，然后在恢复OCR之前再次装入磁盘组。按照以下过程中的说明运行<code class="codeph">ocrconfig -restore</code>命令恢复OCR。
                           </p>
                           <div class="infoboxnote" id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__GUID-BC1A351D-E254-47B0-9E1F-20728249A8DE">
                              <p class="notep1">注意：</p>
                              <p>如果原始OCR位置不存在，则必须在运行<code class="codeph">ocrconfig -restore</code>命令之前创建一个与原始OCR位置同名的空（0字节）OCR位置。
                              </p>
                           </div>
                           <p>使用以下过程在Linux或UNIX系统上还原OCR：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>通过在一个节点上运行以下命令来列出群集中的节点：</span><div><pre class="pre codeblock"><code>$ olsnodes</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>根据OCR是位于Oracle ASM磁盘组还是位于网络连接存储（NAS）上，通过在所有节点上以root用户身份运行以下命令之一来停止Oracle Clusterware：</span><div>
                                 <p>如果OCR位于Oracle ASM磁盘组中，请停止Oracle Clusterware守护程序：</p><pre class="pre codeblock"><code>#crsctl停止crs</code></pre><p>如果上述命令由于OCR损坏而返回任何错误，则通过在所有节点上以<code class="codeph">root</code>身份运行以下命令来强制停止Oracle Clusterware：</p><pre class="pre codeblock"><code>#crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>如果要将OCR还原到群集文件系统或网络文件系统，请以<code class="codeph">root</code>身份运行以下命令以使用可在<span class="q">“列出备份文件”中</span>标识的OCR备份还原OCR：</span><div><pre class="pre codeblock"><code>#ocrconfig -restore <span class="variable" translate="no">file_name</span></code></pre><div class="infoboxnote" id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__GUID-CB3047A5-9646-4C48-B2EA-F0658F23A30B">
                                    <p class="notep1">注意：</p>
                                    <p>如果OCR备份文件位于Oracle ASM磁盘组中，请确保磁盘组存在且已装入。</p>
                                 </div>
                                 <p>完成此步骤后，请继续执行步骤<a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__CHDCIGEE">11</a> 。
                                 </p>
                                 <p>如果<span class="italic">不</span>将OCR还原到群集文件系统或网络文件系统，请继续执行下一步。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过以<code class="codeph">root</code>身份运行以下命令，以独占模式在一个节点上启动Oracle Clusterware堆栈：</span><div><pre class="pre codeblock"><code>#crsctl start crs -excl -nocrs</code></pre><p><code class="codeph">-nocrs</code>选项可确保CRSD进程和OCR不会从Oracle Clusterware堆栈的其余部分开始。
                                 </p>
                                 <p>忽略显示的任何错误。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过运行以下命令检查CRSD是否正在运行：</span><div><pre class="pre codeblock"><code>$ crsctl status resource ora.crsd -init</code></pre><p>如果CRSD正在运行，请以<code class="codeph">root</code>身份运行以下命令来停止它：</p><pre class="pre codeblock"><code>#crsctl stop resource ora.crsd -init</code></pre><div class="infoboxnote" id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__GUID-A1CDB843-0497-4251-8FE9-FB71879AF66B">
                                    <p class="notep1">警告：</p>
                                    <p><span class="italic">不要</span>将<code class="codeph">-init</code>标志与任何其他命令一起使用，除非My Oracle Support指示这样做。
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>要将OCR还原到Oracle ASM磁盘组，必须首先使用与要还原的磁盘组同名的SQL * Plus创建磁盘组，然后将其装入本地节点。</span><div>
                                 <p>如果无法在本地装入磁盘组，请运行以下SQL * Plus命令：</p><pre class="pre codeblock"><code>SQL&gt; drop diskgroup <span class="variable" translate="no">disk_group_name</span> force包含内容;</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>使用OCR备份还原OCR，您可以通过以<code class="codeph">root</code>身份运行以下命令在<span class="q">“列出备份文件”中</span>进行识别：</span><div><pre class="pre codeblock"><code>#ocrconfig -restore <span class="variable" translate="no">file_name</span></code></pre><div class="infoboxnote" id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__GUID-3F136B1E-8331-4E8D-96F0-8BD82A11B8A5">
                                    <p class="notep1">注意：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>如果原始OCR位置不存在，则必须在运行<code class="codeph">ocrconfig -restore</code>命令之前创建一个空（0字节）OCR位置。
                                          </p>
                                       </li>
                                       <li>
                                          <p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                       </li>
                                       <li>
                                          <p>如果在Oracle ASM磁盘组中配置了OCR，请确保存在并装入Oracle ASM磁盘组。</p>
                                       </li>
                                       <li>
                                          <p>如果OCR备份文件位于Oracle ASM磁盘组中，请确保磁盘组存在且已装入。</p>
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__GUID-4EBBE40F-34D3-45EB-A050-0091E2D33DDA">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关创建OCR的信息，请参阅<span><cite>“Oracle Grid Infrastructure安装和升级指南”</cite></span></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>验证OCR的完整性：</span><div><pre class="pre codeblock"><code>#ocrcheck</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>在独占模式下运行的节点上停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>在<span class="italic">没有</span>运行<code class="codeph">ocrconfig -restore</code>命令的集群中的所有节点上以<code class="codeph">root</code> <code class="codeph">ocrconfig -repair -replace</code>运行<code class="codeph">ocrconfig -repair -replace</code>命令。例如，如果在四节点群集的节点1上运行<code class="codeph">ocrconfig -restore</code>命令，则必须在节点2,3和4上运行<code class="codeph">ocrconfig -repair -replace</code>命令。</span></li>
                           <li class="stepexpand" id="GUID-3ADF0C33-9B4C-4FC5-88C5-4C736159E988__CHDCIGEE"><span>通过在所有节点上以<code class="codeph">root</code>身份运行以下命令，开始启动Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl start crs</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过运行以下CVU命令，验证配置为群集一部分的所有群集节点的OCR完整性：</span><div><pre class="pre codeblock"><code>$ cluvfy comp ocr -n all -verbose</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../ostmg/asmcmd-diskgroup-commands.html#OSTMG-GUID-FEA13FA9-4FB3-4C4B-B728-99AD2452888A" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                              <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-6921B0DB-4C97-48D6-9128-373544663DCF">列出备份文件</a></li>
                              <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                              <li><a href="cluster-verification-utility-reference.html#GUID-B445A858-9F00-4423-990E-109545AC11C3" title="CVU可以在操作阶段或阶段验证主要群集组件。下表包含已弃用和不支持的CLUVFY命令：本节列出并描述了CVU命令。检查群集中所有节点上的Oracle自动存储管理群集文件系统（Oracle ACFS）的完整性。在您在节点列表中指定的所有节点上检查-o参数指定的操作所需的管理权限。检查群集中特定节点上的Oracle自动存储管理（Oracle ASM）的完整性。捕获系统和群集配置信息以创建基准。检查节点列表中所有节点的时钟同步。检查节点列表中节点上的集群管理器子组件或Oracle集群同步服务（CSS）的完整性。检查指定节点上的Cluster Ready Services（CRS）守护程序的完整性。验证网络上是否存在DHCP服务器，并且它可以提供所需数量的IP地址。验证是否已在域名服务（DNS）服务器中正确设置了网格命名服务（GNS）子域委派。检查Oracle Clusterware主存储中可用的可用空间，并确保至少有5％的可用空间。验证群集上的网格命名服务（GNS）的完整性。检查群集中节点列表上的网格即插即用的完整性。检查本地节点上Oracle Restart的完整性。检查Oracle Clusterware和Oracle数据库安装是否符合强制性要求和最佳实践指南，并确保它们正常运行。检查所有指定节点上是否存在节点应用程序，即VIP，NETWORK和ONS。检查节点列表中指定的节点之间的连接。如果提供接口列表，则CVU仅使用指定的接口检查连接。确定源节点是否可以与其他特定节点通信。检查所有指定节点上的Oracle Cluster Registry（OCR）的完整性。检查Oracle High Availability Services守护程序的完整性。检查本地节点上的Oracle Local Registry（OLR）的完整性。检查指定节点与引用节点的兼容性和属性。检查单客户端访问名称（SCAN）配置。检查随Oracle软件一起安装的文件和属性。检查在所有指定节点上的-l参数中指定的位置的可用磁盘空间。使用cluvfy comp ssa component verification命令发现并检查指定存储位置的共享。CVU检查节点列表中节点的共享。检查所有指定节点上的指定产品是否满足最低系统要求。检查所有指定节点上的投票文件的投票文件配置和udev设置。在配置Oracle自动存储管理群集文件系统（Oracle ACFS）之前，请使用cluvfy stage -pre acfscfg命令验证群集节点是否已正确设置。配置Oracle ACFS后，使用cluvfy stage -post acfscfg检查现有集群。对所有节点上的Oracle Clusterware应用程序集群安装执行相应的后期检查。在配置OCFS2之前，使用cluvfy stage -pre cfs stage verification命令验证是否正确设置了集群节点。使用cluvfy stage -post cfs stage verification命令在配置OCFS2后对指定节点执行相应的检查。在安装或升级Oracle Clusterware之前，请使用带有-file，-n，-flex或-upgrade参数的cluvfy stage -pre crsinst命令检查指定的节点。使用cluvfy stage -post crsinst命令在安装Oracle Clusterware后检查指定的节点。在配置Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足创建数据库或更改数据库配置的所有条件。在安装或创建Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足安装或创建Oracle RAC数据库的所有条件。配置Oracle Restart后检查本地节点。在安装Oracle软件之前，请检查群集中指定节点上的网络和存储。此命令还检查支持的存储类型，并检查每个类型以进行共享。使用cluvfy stage -pre nodeadd命令在将指定节点添加到现有集群之前验证它们是否已正确配置，并在添加节点之前验证集群的完整性。使用cluvfy stage -post nodeadd命令验证指定的节点是否已成功添加到网络，共享存储和集群件级别的集群中。验证是否已从群集中成功删除特定节点。通常，此命令将验证是否已删除特定于节点的接口配置详细信息，节点不再是群集配置的一部分，并且已执行正确的Oracle ASM清理。">群集验证实用程序参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB" name="GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB"></a><h5 id="CWADD-GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB" class="sect5">在Windows系统上还原Oracle Cluster Registry</h5>
                     <div>
                        <p>使用此过程在Windows系统上还原OCR。</p>
                        <div class="section">
                           <p>如果要在Oracle ASM磁盘组上存储OCR，并且该磁盘组已损坏，则必须使用Oracle ASM实用程序还原Oracle ASM磁盘组，然后在恢复OCR之前再次装入磁盘组。通过运行<code class="codeph">ocrconfig -restore</code>命令恢复OCR。
                           </p>
                           <div class="infoboxnote" id="GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB__GUID-1F0EE3ED-BB74-46E3-A4E1-7BA586EABF96">
                              <p class="notep1">注意：</p>
                              <p>如果原始OCR位置不存在，则必须在运行<code class="codeph">ocrconfig -restore</code>命令之前创建一个与原始OCR位置同名的空（0字节）OCR位置。
                              </p>
                           </div>
                           <p>使用以下过程在Windows系统上还原OCR：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>通过在一个节点上运行以下命令来列出群集中的节点：</span><div><pre class="pre codeblock"><code>C：\&gt; olsnodes</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过在所有节点上以Administrators组成员身份运行以下命令来停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl停止crs</code></pre><p>如果上述命令由于OCR损坏而返回任何错误，请通过在所有节点上以Administrators组成员身份运行以下命令来停止Oracle Clusterware：</p><pre class="pre codeblock"><code>C：\&gt; crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过以Administrators组成员身份运行以下命令，以独占模式在一个节点上启动Oracle Clusterware堆栈：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl start crs -excl -nocrs</code></pre><p><code class="codeph">-nocrs</code>选项可确保CRSD进程和OCR不会从Oracle Clusterware堆栈的其余部分开始。
                                 </p>
                                 <p>忽略显示的任何错误。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过以管理员组成员身份运行以下命令，使用您在<span class="q">“列出备份文件”中</span>标识的OCR备份文件恢复OCR：</span><div><pre class="pre codeblock"><code>C：\&gt; ocrconfig -restore <span class="variable" translate="no">file_name</span></code></pre><p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                 <div class="infoboxnote" id="GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB__GUID-4DEDA6FF-538D-46EF-BC57-CFCE4E117877">
                                    <p class="notep1">注意：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                       </li>
                                       <li>
                                          <p>确保您指定的Oracle ASM磁盘组存在且已装入。</p>
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-7372F903-4BC0-4FB1-80AA-33B7BBD726EB__GUID-8B945264-FB4B-405F-9DB1-56060B613EE0">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关创建OCR的信息，请参阅<span><cite>“Oracle Grid Infrastructure安装和升级指南”</cite></span></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>验证OCR的完整性：</span><div><pre class="pre codeblock"><code>C：\&gt; ocrcheck</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>在独占模式下运行的节点上停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过在所有节点上以Administrators组成员的身份运行以下命令，开始启动Oracle Clusterware：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl start crs</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>运行以下Cluster Verification Utility（CVU）命令以验证群集数据库中所有节点的OCR完整性：</span><div><pre class="pre codeblock"><code>C：\&gt; cluvfy comp ocr -n all -verbose</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-6921B0DB-4C97-48D6-9128-373544663DCF">列出备份文件</a></li>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                              <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                              <li><a href="cluster-verification-utility-reference.html#GUID-B445A858-9F00-4423-990E-109545AC11C3" title="CVU可以在操作阶段或阶段验证主要群集组件。下表包含已弃用和不支持的CLUVFY命令：本节列出并描述了CVU命令。检查群集中所有节点上的Oracle自动存储管理群集文件系统（Oracle ACFS）的完整性。在您在节点列表中指定的所有节点上检查-o参数指定的操作所需的管理权限。检查群集中特定节点上的Oracle自动存储管理（Oracle ASM）的完整性。捕获系统和群集配置信息以创建基准。检查节点列表中所有节点的时钟同步。检查节点列表中节点上的集群管理器子组件或Oracle集群同步服务（CSS）的完整性。检查指定节点上的Cluster Ready Services（CRS）守护程序的完整性。验证网络上是否存在DHCP服务器，并且它可以提供所需数量的IP地址。验证是否已在域名服务（DNS）服务器中正确设置了网格命名服务（GNS）子域委派。检查Oracle Clusterware主存储中可用的可用空间，并确保至少有5％的可用空间。验证群集上的网格命名服务（GNS）的完整性。检查群集中节点列表上的网格即插即用的完整性。检查本地节点上Oracle Restart的完整性。检查Oracle Clusterware和Oracle数据库安装是否符合强制性要求和最佳实践指南，并确保它们正常运行。检查所有指定节点上是否存在节点应用程序，即VIP，NETWORK和ONS。检查节点列表中指定的节点之间的连接。如果提供接口列表，则CVU仅使用指定的接口检查连接。确定源节点是否可以与其他特定节点通信。检查所有指定节点上的Oracle Cluster Registry（OCR）的完整性。检查Oracle High Availability Services守护程序的完整性。检查本地节点上的Oracle Local Registry（OLR）的完整性。检查指定节点与引用节点的兼容性和属性。检查单客户端访问名称（SCAN）配置。检查随Oracle软件一起安装的文件和属性。检查在所有指定节点上的-l参数中指定的位置的可用磁盘空间。使用cluvfy comp ssa component verification命令发现并检查指定存储位置的共享。CVU检查节点列表中节点的共享。检查所有指定节点上的指定产品是否满足最低系统要求。检查所有指定节点上的投票文件的投票文件配置和udev设置。在配置Oracle自动存储管理群集文件系统（Oracle ACFS）之前，请使用cluvfy stage -pre acfscfg命令验证群集节点是否已正确设置。配置Oracle ACFS后，使用cluvfy stage -post acfscfg检查现有集群。对所有节点上的Oracle Clusterware应用程序集群安装执行相应的后期检查。在配置OCFS2之前，使用cluvfy stage -pre cfs stage verification命令验证是否正确设置了集群节点。使用cluvfy stage -post cfs stage verification命令在配置OCFS2后对指定节点执行相应的检查。在安装或升级Oracle Clusterware之前，请使用带有-file，-n，-flex或-upgrade参数的cluvfy stage -pre crsinst命令检查指定的节点。使用cluvfy stage -post crsinst命令在安装Oracle Clusterware后检查指定的节点。在配置Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足创建数据库或更改数据库配置的所有条件。在安装或创建Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足安装或创建Oracle RAC数据库的所有条件。配置Oracle Restart后检查本地节点。在安装Oracle软件之前，请检查群集中指定节点上的网络和存储。此命令还检查支持的存储类型，并检查每个类型以进行共享。使用cluvfy stage -pre nodeadd命令在将指定节点添加到现有集群之前验证它们是否已正确配置，并在添加节点之前验证集群的完整性。使用cluvfy stage -post nodeadd命令验证指定的节点是否已成功添加到网络，共享存储和集群件级别的集群中。验证是否已从群集中成功删除特定节点。通常，此命令将验证是否已删除特定于节点的接口配置详细信息，节点不再是群集配置的一部分，并且已执行正确的Oracle ASM清理。">群集验证实用程序参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392" name="GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392"></a><h5 id="CWADD-GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392" class="sect5">在Oracle Restart Environment中恢复Oracle Cluster Registry</h5>
                     <div>
                        <p>使用此过程在Oracle Restart环境中还原OCR。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392__GUID-F6F7178A-5A04-4A25-9FD4-309F79C18B4F">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>OCR用于向后兼容。</p>
                                 </li>
                                 <li>
                                    <p>创建OCR位置后，它不会在Oracle Restart环境中更新。</p>
                                 </li>
                                 <li>
                                    <p>如果已备份Oracle Restart主目录，并且出现故障，则还原Oracle Restart主目录会还原OCR。</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>通过在所有节点上以<code class="codeph">root</code>身份运行以下命令来停止Oracle高可用性服务：</span><div><pre class="pre codeblock"><code>#crsctl stop有[-f]</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ocrcheck -config</code>命令以确定OCR位置，然后在该位置创建一个具有适当权限的空（0字节）OCR位置。</span></li>
                           <li class="stepexpand"><span>通过以<code class="codeph">root</code>身份运行以下命令来还原OCR：</span><div><pre class="pre codeblock"><code>#crsctl pin css -n <span class="variable" translate="no">host_name</span></code></pre><div class="infoboxnote" id="GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392__GUID-E91D4120-BD84-41EB-B5DB-7FFCD773F85A">
                                    <p class="notep1">注意：</p>
                                    <p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-F15F9F72-90F3-456D-8E55-5E3FA0959392__GUID-D75CA63F-4D83-4636-8C44-EE2A760601D7">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关创建OCR的信息，请参阅<span><cite>“Oracle Grid Infrastructure安装和升级指南”</cite></span></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ocrcheck</code>命令以验证OCR的完整性：</span></li>
                           <li class="stepexpand"><span>通过在所有节点上运行以下命令来启动Oracle高可用性服务：</span><div><pre class="pre codeblock"><code>$ crsctl start有</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD90974"></a><div class="props_rev_3"><a id="GUID-D3B9559B-054A-4574-854E-9865FEDF5EDD" name="GUID-D3B9559B-054A-4574-854E-9865FEDF5EDD"></a><h4 id="CWADD-GUID-D3B9559B-054A-4574-854E-9865FEDF5EDD" class="sect4">诊断Oracle Cluster Registry问题</h4>
                  <p>使用OCRDUMP和OCRCHECK实用程序诊断OCR问题。</p>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-cluster-registry-utility-reference.html#GUID-F4CE8CF1-24FD-43FA-BF62-70718955B386">OCRDUMP实用程序语法和选项</a></li>
                           <li><a href="oracle-cluster-registry-utility-reference.html#GUID-458233B3-54A8-4D2E-A9B5-1D3BF6ADEAE5" title="OCRCHECK实用程序显示OCR块格式的版本，可用空间和已用空间，OCRID以及已配置的OCR位置。">使用OCRCHECK实用程序</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD834"></a><div class="props_rev_3"><a id="GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E" name="GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E"></a><h4 id="CWADD-GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E" class="sect4">使用导出和导入命令管理Oracle Cluster Registry</h4>
                  <div>
                     <p><a id="d37753e3893" class="indexterm-anchor"></a>除了使用自动创建的OCR备份文件之外，还应在进行重要配置更改之前和之后导出OCR内容，例如在环境中添加或删除节点，修改Oracle Clusterware资源以及升级，降级或创建数据库。通过使用<code class="codeph">ocrconfig -export</code>命令执行此操作，该命令将OCR内容导出为文件格式。
                     </p>
                     <div class="infoboxnote" id="GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E__GUID-B5864A03-9AE3-4345-9996-F67600461A23">
                        <p class="notep1">警告：</p>
                        <p>请注意以下恢复OCR的限制：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ocrconfig -restore</code>生成的文件格式与<code class="codeph">ocrconfig -export</code>生成的文件格式不兼容。<code class="codeph">ocrconfig -export</code>和<code class="codeph">ocrconfig -import</code>命令是兼容的。<code class="codeph">ocrconfig -manualbackup</code>和<code class="codeph">ocrconfig -restore</code>命令是兼容的。这两种文件格式不兼容，不得互换使用。
                              </p>
                           </li>
                           <li>
                              <p>导出OCR时，Oracle建议在名称字符串中包含“ <code class="codeph">ocr</code> ”，群集名称和时间戳。例如：</p><pre class="oac_no_warn" dir="ltr">ocr_mycluster1_20090521_2130_export</pre></li>
                        </ul>
                     </div>
                     <p><a id="d37753e3936" class="indexterm-anchor"></a><a id="d37753e3940" class="indexterm-anchor"></a>如果配置更改导致错误，则使用<code class="codeph">ocrconfig -export</code>命令还可以使用<code class="codeph">-import</code>选项还原OCR。例如，如果你有<a id="d37753e3951" class="indexterm-anchor"></a>您无法解决的配置问题，或者在此类更改后无法重新启动Oracle Clusterware，然后使用适用于您的平台的过程还原配置。
                     </p>
                     <p>Oracle建议您使用自动或手动备份，并使用<code class="codeph">ocrconfig -restore</code>命令而不是<code class="codeph">ocrconfig -export</code>和<code class="codeph">ocrconfig -import</code>命令来恢复OCR，原因如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>备份是OCR的一致快照，而导出则不是。</p>
                        </li>
                        <li>
                           <p>系统联机时会创建备份。您必须在群集中的所有节点上关闭Oracle Clusterware，才能使用<code class="codeph">ocrconfig -export</code>命令获取一致的快照。
                           </p>
                        </li>
                        <li>
                           <p>您可以使用OCRDUMP实用程序检查备份。您无法检查导出的内容。</p>
                        </li>
                        <li>
                           <p>您可以使用<code class="codeph">ocrconfig -showbackup</code>命令列出备份，而<span class="italic">您</span>必须跟踪所有生成的导出。
                           </p>
                        </li>
                     </ul>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-257FAFEE-51BE-4472-96F3-22DF84023793" title="使用此过程在Linux或UNIX系统上导入OCR。">在Linux或UNIX系统上导入Oracle Cluster Registry Content</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E" title="使用此过程在Windows系统上导入OCR。">在Windows系统上导入Oracle Cluster Registry Content</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-7B87F4D6-4146-4EB0-BD2F-17AED8C5F72E__GUID-3D39B776-87C6-40D5-9B8C-2D8E9F233C80">
                        <p class="notep1">注意：</p>
                        <p>您所做的大多数配置更改不仅会更改OCR内容，配置更改还会导致创建文件和数据库对象。恢复OCR时，通常无法恢复其中一些更改。如果某些配置更改失败，请不要将OCR恢复为恢复到先前配置的更正。这可能导致OCR位置的内容与系统其余部分的状态不匹配。</p>
                     </div>
                  </div><a id="CWADD90977"></a><div class="props_rev_3"><a id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793" name="GUID-257FAFEE-51BE-4472-96F3-22DF84023793"></a><h5 id="CWADD-GUID-257FAFEE-51BE-4472-96F3-22DF84023793" class="sect5">在Linux或UNIX系统上导入Oracle Cluster Registry Content</h5>
                     <div>
                        <p>使用此过程在Linux或UNIX系统上导入OCR。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793__GUID-397DBF26-DA77-43D6-A909-9ADD2A77F839">
                              <p class="notep1">注意：</p>
                              <p>此过程假定在群集中启用了Oracle Clusterware自动启动的所有节点上默认安装Oracle Clusterware。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>通过在一个节点上运行以下命令来列出群集中的节点：</span><div><pre class="pre codeblock"><code>$ olsnodes</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过在所有节点上以<code class="codeph">root</code>身份运行以下命令来停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl停止crs</code></pre><p>如果上述命令由于OCR损坏而返回任何错误，请通过在所有节点上以<code class="codeph">root</code>身份运行以下命令来停止Oracle Clusterware：</p><pre class="pre codeblock"><code>#crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过以<code class="codeph">root</code>身份运行以下命令，以独占模式在一个节点上启动Oracle Clusterware堆栈：</span><div><pre class="pre codeblock"><code>#crsctl start crs -excl</code></pre><p>忽略显示的任何错误。</p>
                                 <p>检查CRSD是否正在运行。如果是，请以<code class="codeph">root</code>身份运行以下命令来停止它：</p><pre class="pre codeblock"><code>#crsctl stop resource ora.crsd -init</code></pre><div class="infoboxnote" id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793__GUID-9035DE83-4A8F-4B22-A4F3-892FD5256DD8">
                                    <p class="notep1">警告：</p>
                                    <p><span class="italic">不要</span>将<code class="codeph">-init</code>标志与任何其他命令一起使用。
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>以<code class="codeph">root</code>身份运行以下命令导入OCR：</span><div><pre class="pre codeblock"><code>#ocrconfig -import <span class="variable" translate="no">file_name</span></code></pre><p>如果要将OCR导入群集或网络文件系统，请跳至步骤<a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-257FAFEE-51BE-4472-96F3-22DF84023793__BGBIJGAI">7</a> 。
                                 </p>
                                 <div class="infoboxnote" id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793__GUID-B12EC987-97CC-4525-92E7-C7DB2E2C28A1">
                                    <p class="notep1">注意：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>如果原始OCR位置不存在，则必须在运行<code class="codeph">ocrconfig -import</code>命令之前创建一个空（0字节）OCR位置。
                                          </p>
                                       </li>
                                       <li>
                                          <p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                       </li>
                                       <li>
                                          <p>如果在Oracle ASM磁盘组中配置了OCR，请确保存在并装入Oracle ASM磁盘组。</p>
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="infoboxnotealso" id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793__GUID-F784FF21-BF8F-45C2-9D45-D086D077E213">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关创建OCR的信息，请参阅<span><cite>“Oracle Grid Infrastructure安装和升级指南”</cite></span></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>验证OCR的完整性：</span><div><pre class="pre codeblock"><code>#ocrcheck</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>在独占模式下运行的节点上停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793__BGBIJGAI"><span>通过在所有节点上以<code class="codeph">root</code>身份运行以下命令，开始启动Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl start crs</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过运行以下CVU命令，验证配置为群集一部分的所有群集节点的OCR完整性：</span><div><pre class="pre codeblock"><code>$ cluvfy comp ocr -n all -verbose</code></pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-257FAFEE-51BE-4472-96F3-22DF84023793__GUID-97C8B82D-8ADD-412F-8D86-11CBFFA01BFC">
                              <p class="notep1">注意：</p>
                              <p>您<span class="italic">只能</span>导入导出的OCR。要从备份还原OCR，必须使用<code class="codeph">-restore</code>选项，如<span class="q">“备份Oracle Cluster Registry”中所述</span> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                              <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                              <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-8554ACE4-44DF-4DB5-A939-1DC6D62BAE60">备份Oracle Cluster Registry</a></li>
                              <li><a href="cluster-verification-utility-reference.html#GUID-B445A858-9F00-4423-990E-109545AC11C3" title="CVU可以在操作阶段或阶段验证主要群集组件。下表包含已弃用和不支持的CLUVFY命令：本节列出并描述了CVU命令。检查群集中所有节点上的Oracle自动存储管理群集文件系统（Oracle ACFS）的完整性。在您在节点列表中指定的所有节点上检查-o参数指定的操作所需的管理权限。检查群集中特定节点上的Oracle自动存储管理（Oracle ASM）的完整性。捕获系统和群集配置信息以创建基准。检查节点列表中所有节点的时钟同步。检查节点列表中节点上的集群管理器子组件或Oracle集群同步服务（CSS）的完整性。检查指定节点上的Cluster Ready Services（CRS）守护程序的完整性。验证网络上是否存在DHCP服务器，并且它可以提供所需数量的IP地址。验证是否已在域名服务（DNS）服务器中正确设置了网格命名服务（GNS）子域委派。检查Oracle Clusterware主存储中可用的可用空间，并确保至少有5％的可用空间。验证群集上的网格命名服务（GNS）的完整性。检查群集中节点列表上的网格即插即用的完整性。检查本地节点上Oracle Restart的完整性。检查Oracle Clusterware和Oracle数据库安装是否符合强制性要求和最佳实践指南，并确保它们正常运行。检查所有指定节点上是否存在节点应用程序，即VIP，NETWORK和ONS。检查节点列表中指定的节点之间的连接。如果提供接口列表，则CVU仅使用指定的接口检查连接。确定源节点是否可以与其他特定节点通信。检查所有指定节点上的Oracle Cluster Registry（OCR）的完整性。检查Oracle High Availability Services守护程序的完整性。检查本地节点上的Oracle Local Registry（OLR）的完整性。检查指定节点与引用节点的兼容性和属性。检查单客户端访问名称（SCAN）配置。检查随Oracle软件一起安装的文件和属性。检查在所有指定节点上的-l参数中指定的位置的可用磁盘空间。使用cluvfy comp ssa component verification命令发现并检查指定存储位置的共享。CVU检查节点列表中节点的共享。检查所有指定节点上的指定产品是否满足最低系统要求。检查所有指定节点上的投票文件的投票文件配置和udev设置。在配置Oracle自动存储管理群集文件系统（Oracle ACFS）之前，请使用cluvfy stage -pre acfscfg命令验证群集节点是否已正确设置。配置Oracle ACFS后，使用cluvfy stage -post acfscfg检查现有集群。对所有节点上的Oracle Clusterware应用程序集群安装执行相应的后期检查。在配置OCFS2之前，使用cluvfy stage -pre cfs stage verification命令验证是否正确设置了集群节点。使用cluvfy stage -post cfs stage verification命令在配置OCFS2后对指定节点执行相应的检查。在安装或升级Oracle Clusterware之前，请使用带有-file，-n，-flex或-upgrade参数的cluvfy stage -pre crsinst命令检查指定的节点。使用cluvfy stage -post crsinst命令在安装Oracle Clusterware后检查指定的节点。在配置Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足创建数据库或更改数据库配置的所有条件。在安装或创建Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足安装或创建Oracle RAC数据库的所有条件。配置Oracle Restart后检查本地节点。在安装Oracle软件之前，请检查群集中指定节点上的网络和存储。此命令还检查支持的存储类型，并检查每个类型以进行共享。使用cluvfy stage -pre nodeadd命令在将指定节点添加到现有集群之前验证它们是否已正确配置，并在添加节点之前验证集群的完整性。使用cluvfy stage -post nodeadd命令验证指定的节点是否已成功添加到网络，共享存储和集群件级别的集群中。验证是否已从群集中成功删除特定节点。通常，此命令将验证是否已删除特定于节点的接口配置详细信息，节点不再是群集配置的一部分，并且已执行正确的Oracle ASM清理。">群集验证实用程序参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD90978"></a><div class="props_rev_3"><a id="GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E" name="GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E"></a><h5 id="CWADD-GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E" class="sect5">在Windows系统上导入Oracle Cluster Registry Content</h5>
                     <div>
                        <p>使用此过程在Windows系统上导入OCR。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E__GUID-2E1B0179-6501-4D84-B6FF-2AA4866EFF4F">
                              <p class="notep1">注意：</p>
                              <p>此过程假定在群集中启用了Oracle Clusterware自动启动的所有节点上默认安装Oracle Clusterware。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>通过在一个节点上运行以下命令来列出群集中的节点：</span><div><pre class="pre codeblock"><code>C：\&gt; olsnodes</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过在所有节点上以Administrators组成员身份运行以下命令来停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl停止crs</code></pre><p>如果上述命令由于OCR损坏而返回任何错误，请通过在所有节点上以Administrators组成员身份运行以下命令来停止Oracle Clusterware：</p><pre class="pre codeblock"><code>C：\&gt; crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过以Administrators组成员身份运行以下命令，以独占模式在一个节点上启动Oracle Clusterware堆栈：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl start crs -excl</code></pre><p>忽略显示的任何错误。</p>
                                 <p>检查CRSD是否正在运行。如果是，请通过以管理员组成员身份运行以下命令来停止它：</p><pre class="pre codeblock"><code>C：\&gt; crsctl停止资源ora.crsd -init</code></pre><div class="infoboxnote" id="GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E__GUID-8F2E6637-4378-4602-BEF9-7FB4989FAD2F">
                                    <p class="notep1">警告：</p>
                                    <p><span class="italic">不要</span>在任何其他命令中使用<code class="codeph">-init</code>标志。
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过以Administrators组成员身份运行以下命令来导入OCR：</span><div><pre class="pre codeblock"><code>C：\&gt; ocrconfig -import <span class="variable" translate="no">file_name</span></code></pre><p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                 <div class="infoboxnote" id="GUID-DBF6C260-369E-47B3-B8F2-495A703ABC8E__GUID-66408D96-B1B7-498F-9302-1BA50A47C8C4">
                                    <p class="notep1">注意：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>如果原始OCR位置不存在，则必须在运行<code class="codeph">ocrconfig -import</code>命令之前创建一个空（0字节）OCR位置。
                                          </p>
                                       </li>
                                       <li>
                                          <p>确保您在OCR配置中指定的OCR设备存在且这些OCR设备有效。</p>
                                       </li>
                                       <li>
                                          <p>确保您指定的Oracle ASM磁盘组存在且已装入。</p>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>验证OCR的完整性：</span><div><pre class="pre codeblock"><code>C：\&gt; ocrcheck</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>在独占模式下运行的节点上停止Oracle Clusterware：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl stop crs -f</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>通过在所有节点上以Administrators组成员的身份运行以下命令，开始启动Oracle Clusterware：</span><div><pre class="pre codeblock"><code>C：\&gt; crsctl start crs</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>运行以下Cluster Verification Utility（CVU）命令以验证群集数据库中所有节点的OCR完整性：</span><div><pre class="pre codeblock"><code>C：\&gt; cluvfy comp ocr -n all -verbose</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                              <li><a href="cluster-verification-utility-reference.html#GUID-B445A858-9F00-4423-990E-109545AC11C3" title="CVU可以在操作阶段或阶段验证主要群集组件。下表包含已弃用和不支持的CLUVFY命令：本节列出并描述了CVU命令。检查群集中所有节点上的Oracle自动存储管理群集文件系统（Oracle ACFS）的完整性。在您在节点列表中指定的所有节点上检查-o参数指定的操作所需的管理权限。检查群集中特定节点上的Oracle自动存储管理（Oracle ASM）的完整性。捕获系统和群集配置信息以创建基准。检查节点列表中所有节点的时钟同步。检查节点列表中节点上的集群管理器子组件或Oracle集群同步服务（CSS）的完整性。检查指定节点上的Cluster Ready Services（CRS）守护程序的完整性。验证网络上是否存在DHCP服务器，并且它可以提供所需数量的IP地址。验证是否已在域名服务（DNS）服务器中正确设置了网格命名服务（GNS）子域委派。检查Oracle Clusterware主存储中可用的可用空间，并确保至少有5％的可用空间。验证群集上的网格命名服务（GNS）的完整性。检查群集中节点列表上的网格即插即用的完整性。检查本地节点上Oracle Restart的完整性。检查Oracle Clusterware和Oracle数据库安装是否符合强制性要求和最佳实践指南，并确保它们正常运行。检查所有指定节点上是否存在节点应用程序，即VIP，NETWORK和ONS。检查节点列表中指定的节点之间的连接。如果提供接口列表，则CVU仅使用指定的接口检查连接。确定源节点是否可以与其他特定节点通信。检查所有指定节点上的Oracle Cluster Registry（OCR）的完整性。检查Oracle High Availability Services守护程序的完整性。检查本地节点上的Oracle Local Registry（OLR）的完整性。检查指定节点与引用节点的兼容性和属性。检查单客户端访问名称（SCAN）配置。检查随Oracle软件一起安装的文件和属性。检查在所有指定节点上的-l参数中指定的位置的可用磁盘空间。使用cluvfy comp ssa component verification命令发现并检查指定存储位置的共享。CVU检查节点列表中节点的共享。检查所有指定节点上的指定产品是否满足最低系统要求。检查所有指定节点上的投票文件的投票文件配置和udev设置。在配置Oracle自动存储管理群集文件系统（Oracle ACFS）之前，请使用cluvfy stage -pre acfscfg命令验证群集节点是否已正确设置。配置Oracle ACFS后，使用cluvfy stage -post acfscfg检查现有集群。对所有节点上的Oracle Clusterware应用程序集群安装执行相应的后期检查。在配置OCFS2之前，使用cluvfy stage -pre cfs stage verification命令验证是否正确设置了集群节点。使用cluvfy stage -post cfs stage verification命令在配置OCFS2后对指定节点执行相应的检查。在安装或升级Oracle Clusterware之前，请使用带有-file，-n，-flex或-upgrade参数的cluvfy stage -pre crsinst命令检查指定的节点。使用cluvfy stage -post crsinst命令在安装Oracle Clusterware后检查指定的节点。在配置Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足创建数据库或更改数据库配置的所有条件。在安装或创建Oracle RAC数据库之前检查指定的节点，以验证您的系统是否满足安装或创建Oracle RAC数据库的所有条件。配置Oracle Restart后检查本地节点。在安装Oracle软件之前，请检查群集中指定节点上的网络和存储。此命令还检查支持的存储类型，并检查每个类型以进行共享。使用cluvfy stage -pre nodeadd命令在将指定节点添加到现有集群之前验证它们是否已正确配置，并在添加节点之前验证集群的完整性。使用cluvfy stage -post nodeadd命令验证指定的节点是否已成功添加到网络，共享存储和集群件级别的集群中。验证是否已从群集中成功删除特定节点。通常，此命令将验证是否已删除特定于节点的接口配置详细信息，节点不再是群集配置的一部分，并且已执行正确的Oracle ASM清理。">群集验证实用程序参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD90963"></a><div class="props_rev_3"><a id="GUID-4DEA42E9-8E97-474B-AAD8-E5E626FB8B07" name="GUID-4DEA42E9-8E97-474B-AAD8-E5E626FB8B07"></a><h4 id="CWADD-GUID-4DEA42E9-8E97-474B-AAD8-E5E626FB8B07" class="sect4">Oracle Local Registry</h4>
                  <div>
                     <p>在Oracle集群<span class="italic">12c</span>中，集群中的每个节点具有用于节点特定的资源的本地注册表中，称为<a id="d37753e4746" class="indexterm-anchor"></a><a id="d37753e4750" class="indexterm-anchor"></a> Oracle Clusterware（OLR），在Oracle Clusterware安装OCR时安装和配置。无论Oracle Clusterware是运行还是完全正常运行，每个节点上的多个进程都可以同时对OLR进行读写访问，特别是对其所在的节点。
                     </p>
                     <p>默认情况下，OLR位于每个节点上的<span class="italic"><code class="codeph">Grid_home</code></span> <code class="codeph">/cdata/</code> <span class="italic"><code class="codeph">host_name</code></span> <code class="codeph">.olr</code> 。
                     </p>
                     <p>使用OCRCHECK，OCRDUMP和OCRCONFIG实用程序以<code class="codeph">root</code>身份使用<code class="codeph">-local</code>选项管理OLR。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以使用以下命令检查本地节点上OLR的状态<a id="d37753e4780" class="indexterm-anchor"></a><a id="d37753e4784" class="indexterm-anchor"></a> OCRCHECK实用程序，如下：</p><pre class="oac_no_warn" dir="ltr">#ocrcheck -local Oracle Cluster Registry的状态如下：版本：3总空间（kbytes）：262132已用空间（kbytes）：9200可用空间（kbytes）：252932 ID：604793089设备/文件名：/ private2 / crs / cdata / localhost / dglnx6.olr设备/文件完整性检查成功本地OCR完整性检查成功</pre></li>
                        <li>
                           <p>您可以使用本地节点将OLR的内容显示到启动程序的文本终端<a id="d37753e4794" class="indexterm-anchor"></a><a id="d37753e4798" class="indexterm-anchor"></a> OCRDUMP实用程序，如下：</p><pre class="oac_no_warn" dir="ltr">#ocrdump -local -stdout</pre></li>
                        <li>
                           <p>您可以使用在本地节点上的OLR上执行管理任务<a id="d37753e4808" class="indexterm-anchor"></a><a id="d37753e4812" class="indexterm-anchor"></a> OCRCONFIG实用程序。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a id="d37753e4820" class="indexterm-anchor"></a>要将OLR导出到文件：</p><pre class="oac_no_warn" dir="ltr">#ocrconfig -local -export <span class="italic">file_name</span></pre><div class="infoboxnote" id="GUID-4DEA42E9-8E97-474B-AAD8-E5E626FB8B07__GUID-4B8A6070-237E-4DC6-A15F-F4DE5EB44351">
                                    <p class="notep1">注意：</p>
                                    <p></p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>Oracle建议您使用<code class="codeph">-manualbackup</code>和<code class="codeph">-restore</code>命令，而不是<code class="codeph">-import</code>和<code class="codeph">-export</code>命令。
                                          </p>
                                       </li>
                                       <li>
                                          <p>导出OLR时，Oracle建议在名称字符串中包含“ <code class="codeph">olr</code> ”，主机名和时间戳。例如：</p><pre class="oac_no_warn" dir="ltr">olr_myhost1_20090603_0130_export</pre></li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p><a id="d37753e4857" class="indexterm-anchor"></a>要将指定文件导入OLR：</p><pre class="oac_no_warn" dir="ltr">#ocrconfig -local -import <span class="italic">file_name</span>
</pre></li>
                              <li>
                                 <p><a id="d37753e4869" class="indexterm-anchor"></a>要手动备份OLR：</p><pre class="oac_no_warn" dir="ltr">#ocrconfig -local -manualbackup</pre><div class="infoboxnote" id="GUID-4DEA42E9-8E97-474B-AAD8-E5E626FB8B07__GUID-4DFA5399-F9B0-4353-B34C-978950F80703">
                                    <p class="notep1">注意：</p>
                                    <p>Oracle Clusterware在安装或升级后备份OLR，并且默认情况下会定期备份OLR。在初始备份后的任何时候，您都可以手动备份OLR。</p>
                                    <p>Oracle还建议您在将OCR从Oracle ASM迁移到其他存储时，或者将OCR从其他存储迁移到Oracle ASM时创建新备份。</p>
                                    <p>OLR的默认备份位置位于<span class="italic"><code class="codeph">Grid_home</code></span> <code class="codeph">/cdata/</code> <span class="italic"><code class="codeph">host_name</code></span>路径中。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p><a id="d37753e4894" class="indexterm-anchor"></a>要查看OLR备份文件的内容：</p><pre class="oac_no_warn" dir="ltr">ocrdump -local -backupfile <span class="italic">olr_backup_file_name</span>
</pre></li>
                              <li>
                                 <p>要更改OLR备份位置：</p><pre class="oac_no_warn" dir="ltr">ocrconfig -local -backuploc <span class="italic">new_olr_backup_path</span>
</pre></li>
                              <li>
                                 <p><a id="d37753e4914" class="indexterm-anchor"></a>要恢复OLR：</p><pre class="oac_no_warn" dir="ltr">#crsctl stop crs＃ocrconfig -local -restore <span class="italic">file_name</span> ＃ocrcheck -local #crsctl start crs $ cluvfy comp olr</pre></li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div><a id="CWADD837"></a><div class="props_rev_3"><a id="GUID-1D3FDBE6-03ED-49B9-A181-2463C59331DA" name="GUID-1D3FDBE6-03ED-49B9-A181-2463C59331DA"></a><h4 id="CWADD-GUID-1D3FDBE6-03ED-49B9-A181-2463C59331DA" class="sect4">升级和降级Oracle Cluster Registry Configuration</h4>
                  <div>
                     <div class="section">
                        <p><a id="d37753e5043" class="indexterm-anchor"></a><a id="d37753e5047" class="indexterm-anchor"></a>升级Oracle Clusterware时，它会自动运行<code class="codeph">ocrconfig -upgrade</code>命令。要降级，请遵循每个组件的降级说明，并使用<code class="codeph">ocrconfig -downgrade</code>命令降级OCR。如果要升级OCR，则可以使用OCRCHECK实用程序验证OCR的完整性。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD833"></a><div class="props_rev_3"><a id="GUID-00137A43-61A5-446B-BFEA-D7EFDA535E81" name="GUID-00137A43-61A5-446B-BFEA-D7EFDA535E81"></a><h3 id="CWADD-GUID-00137A43-61A5-446B-BFEA-D7EFDA535E81" class="sect3">管理投票文件</h3>
               <div>
                  <p>本节包括以下有关管理群集中的投票文件的主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-7680E1EB-C91F-4B32-82B8-80AC5D57D13C" title="如果选择将表决文件存储在Oracle ASM中，则Oracle ASM会将群集的所有表决文件存储在您选择的磁盘组中。">在Oracle ASM上存储投票文件</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-6F5C4029-78F0-4A06-ADC7-70E1E2C597C8" title="作为任何配置更改的一部分，Oracle Clusterware会自动备份OCR中的投票文件数据，并自动将数据还原到您添加的任何投票文件。">备份投票文件</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1">恢复投票文件</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6">添加_删除_或迁移投票文件</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-00137A43-61A5-446B-BFEA-D7EFDA535E81__GUID-1E8B8703-4B81-46B8-B353-3CA22CB48159">
                     <p class="notep1">警告：</p>
                     <p>该<code class="codeph">dd</code>用于备份和恢复表决文件Oracle集群件的早期版本中的命令在Oracle集群件<span class="italic">12c</span>中不被支持。恢复使用<code class="codeph">dd</code>或<code class="codeph">cp</code>命令复制的投票文件可能会阻止Oracle Clusterware 12 <span class="italic">c</span>堆栈启动。使用本章中介绍的备份和还原过程可确保正确的投票文件功能。
                     </p>
                  </div>
                  <div class="infoboxnote" id="GUID-00137A43-61A5-446B-BFEA-D7EFDA535E81__GUID-B7A4CAE8-5323-4A41-B880-2BFDF118E95A">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>投票文件管理需要有效且有效的OCR。在添加，删除，替换或恢复投票文件之前，请以<code class="codeph">root</code>身份运行<code class="codeph">ocrcheck</code>命令。如果OCR不可用或已损坏，则必须按照<span class="q">“还原Oracle Cluster Registry”中的说明</span>恢复OCR。
                           </p>
                        </li>
                        <li>
                           <p>如果您从以前版本的Oracle集群到Oracle集群<span class="italic">12c的</span>升级，要存储的Oracle ASM磁盘组中投票的文件，则必须将<span class="bold">ASM兼容性</span> （设置<code class="codeph">COMPATIBLE.ASM</code> ）的兼容性属性为<code class="codeph">12.1.0.0</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-648BB199-AFB9-416A-8438-E0331C255E78" title="为您的平台恢复OCR的过程。">还原Oracle Cluster Registry</a></li>
                        <li><a href="../ostmg/diskgroup-compatibility.html#OSTMG-GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="CWADD91889"></a><div class="props_rev_3"><a id="GUID-7680E1EB-C91F-4B32-82B8-80AC5D57D13C" name="GUID-7680E1EB-C91F-4B32-82B8-80AC5D57D13C"></a><h4 id="CWADD-GUID-7680E1EB-C91F-4B32-82B8-80AC5D57D13C" class="sect4">在Oracle ASM上存储投票文件</h4>
                  <div>
                     <p>如果选择将表决文件存储在Oracle ASM中，则Oracle ASM会将群集的所有表决文件存储在您选择的磁盘组中。</p>
                     <p>Oracle ASM管理投票文件的方式与其存储的其他文件不同。您不能使用存储在Oracle ASM中的投票文件和未存储在同一集群中的Oracle ASM中的投票文件。</p>
                     <p>在Oracle ASM上配置投票文件后，您只能使用<code class="codeph">crsctl replace votedisk</code>命令更改投票文件的配置。即使在没有工作投票文件的情况下也是如此。尽管<code class="codeph">crsctl query css votedisk</code>报告使用了零投票磁盘，但Oracle Clusterware还记得Oracle ASM正在使用中，并且需要<code class="codeph">replace</code>谓词。只有在使用<code class="codeph">replace</code>动词将表决文件移回非Oracle ASM存储之后，动词<code class="codeph">add css votedisk</code>并<code class="codeph">delete css votedisk</code>再次可用。
                     </p>
                     <p>可以存储在特定Oracle ASM磁盘组中的表决文件数取决于磁盘组的冗余。</p>
                     <p>默认情况下，Oracle ASM将每个投票文件放在磁盘组中的自己的故障组中。故障组是磁盘组中磁盘的子集。故障组定义共享组件的磁盘，这样如果一个组件出现故障，则共享该组件的其他磁盘也可能会失败。您可能定义为故障组的示例是一组共享同一SCSI控制器的SCSI磁盘。故障组用于确定用于存储冗余数据的Oracle ASM磁盘。例如，如果为文件指定了双向镜像，则文件范围的冗余副本必须存储在单独的故障组中。</p>
                     <p>您为Oracle ASM磁盘组选择的冗余级别确定Oracle ASM如何镜像磁盘组中的文件，并确定所需的磁盘数和磁盘空间量。如果表决文件位于磁盘组中，则包含Oracle Clusterware文件（OCR和表决文件）的磁盘组具有比其他磁盘组更低的最小故障组数，因为表决文件存储在仲裁失败组中。</p>
                     <p>仲裁失败组是一种特殊类型的故障组，用于存储Oracle Clusterware投票文件。仲裁失败组用于确保指定故障组的法定数量可用。当Oracle ASM安装包含Oracle Clusterware文件的磁盘组时，仲裁失败组用于确定在丢失一个或多个故障组时是否可以装入磁盘组。仲裁失败组中的磁盘不包含用户数据，因此在确定存储用户数据的冗余要求时不考虑仲裁失败组。</p>
                     <p>Oracle ASM Flex磁盘组是支持Oracle ASM文件组和配额组的磁盘组类型。通常，除磁盘组级别外，灵活磁盘组还允许用户以数据库的粒度管理存储。</p>
                     <p>冗余级别包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">外部冗余</span> ：外部冗余磁盘组至少需要一个磁盘设备。外部冗余磁盘组中的有效磁盘空间是其所有设备中磁盘空间的总和。
                           </p>
                           <p>由于Oracle ASM不镜像外部冗余磁盘组中的数据，因此Oracle建议您对存储设备（如RAID）或其他提供自己的数据保护机制的类似设备使用外部冗余。</p>
                        </li>
                        <li>
                           <p><span class="bold">正常冗余</span> ：正常冗余磁盘组至少需要两个磁盘设备（或两个故障组）。普通冗余磁盘组中的有效磁盘空间是其所有设备中磁盘空间总和的一半。
                           </p>
                           <p>对于Oracle Clusterware文件，正常冗余磁盘组至少需要三个磁盘设备（故障组使用三个磁盘中的两个，仲裁故障组使用所有三个磁盘）并提供三个投票文件和一个OCR和镜像OCR。使用普通冗余磁盘组时，群集可以在丢失一个故障组后继续运行。</p>
                        </li>
                        <li>
                           <p><span class="bold">高冗余</span> ：在高冗余磁盘组中，Oracle ASM使用三向镜像来提高性能并提供最高级别的可靠性。高冗余磁盘组至少需要三个磁盘设备（或三个故障组）。高冗余磁盘组中的有效磁盘空间是其所有设备中磁盘空间总和的三分之一。
                           </p>
                           <p>对于Oracle Clusterware文件，高冗余磁盘组至少需要五个磁盘设备（故障组使用五个磁盘中的三个，仲裁故障组使用所有五个磁盘）并提供五个投票文件和一个OCR和两个OCR的镜像。通过高冗余，群集可以在丢失两个故障组后继续存在。</p>
                        </li>
                     </ul>
                     <p>使用<code class="codeph">crsctl replace votedisk</code>命令，您可以将一组给定的投票文件从一个Oracle ASM磁盘组移动到另一个，或者移动到经过认证的文件系统上。如果将表决文件从一个Oracle ASM磁盘组移动到另一个Oracle ASM磁盘组，则可以通过将表决文件放在与前一个磁盘组不同的冗余级别的磁盘组中来更改表决文件的数量。
                     </p>
                     <div class="infoboxnote" id="GUID-7680E1EB-C91F-4B32-82B8-80AC5D57D13C__GUID-A64F98A4-44B1-4CBD-87D9-51B30C52BB33">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您无法直接影响一个磁盘组中的投票文件数。</p>
                           </li>
                           <li>
                              <p>你不能使用<code class="codeph">crsctl add | delete votedisk</code>存储在Oracle ASM磁盘组中的投票文件的<code class="codeph">crsctl add | delete votedisk</code>命令，因为Oracle ASM根据磁盘组的冗余级别管理投票文件的数量。
                              </p>
                           </li>
                           <li>
                              <p>如果投票文件存储在Oracle ASM磁盘组中，则无法将投票文件添加到群集文件系统。Oracle不支持在Oracle ASM中同时使用投票文件，也不支持同时在同一集群的集群文件系统上使用投票文件。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../ostmg/diskgroup-compatibility.html#OSTMG-GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6">添加，删除或迁移投票文件</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD90960"></a><div class="props_rev_3"><a id="GUID-6F5C4029-78F0-4A06-ADC7-70E1E2C597C8" name="GUID-6F5C4029-78F0-4A06-ADC7-70E1E2C597C8"></a><h4 id="CWADD-GUID-6F5C4029-78F0-4A06-ADC7-70E1E2C597C8" class="sect4">备份投票文件</h4>
                  <div>
                     <p>作为任何配置更改的一部分，Oracle Clusterware会自动备份OCR中的投票文件数据，并自动将数据还原到您添加的任何投票文件。</p>
                     <div class="section">
                        <p>但是，如果所有投票文件都已损坏，您可以按照<span class="q">“恢复投票文件”中的说明</span>恢复它们。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1">恢复投票文件</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD90961"></a><div class="props_rev_3"><a id="GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1" name="GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1"></a><h4 id="CWADD-GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1" class="sect4">恢复投票文件</h4>
                  <div>
                     <div class="section">
                        <p>如果所有投票文件都已损坏，则可以将其还原，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>如有必要，按<span class="q">“还原Oracle Cluster Registry”中的说明</span>还原OCR。</span><div>
                              <p>仅当OCR也已损坏或无法使用时，此步骤才是必需的，例如，如果OCR位于Oracle ASM上且磁盘组不再可用。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>仅从一个节点以<code class="codeph">root</code>身份运行以下命令，以独占模式启动Oracle Clusterware堆栈，这不需要投票文件存在或可用：</span><div><pre class="pre codeblock"><code>#crsctl start crs -excl</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">crsctl query css votedisk</code>命令以检索当前定义的投票文件列表，类似于以下内容：</span><div><pre class="pre codeblock"><code>$ crsctl query css votedisk  -  ----- ----------------- --------- --------- ## STATE文件通用ID文件名磁盘组1。在线6f57843d89464c46ea747362e8a3fa43（/ dev / sdb1）[DATA] 2。在线7c54856e98474f61bf349401e7c9fb95（/ dev / sdc1）[DATA] 3。在线9c46232b76234f61fc934673d5c8ec59（/ dev / sdd1）[DATA]</code></pre><p>如果所有投票文件都已损坏，则此列表可能为空，或者可能具有标记为状态<code class="codeph">3</code>或<code class="codeph">OFF</code>条目。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>根据您存储投票文件的位置，执行以下操作之一：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果表决文件存储在Oracle ASM中，则运行以下命令将表决文件迁移到您指定的Oracle ASM磁盘组：</p><pre class="pre codeblock"><code>crsctl替换votedisk + <span class="variable" translate="no">asm_disk_group</span></code></pre><p>迁移表决文件的Oracle ASM磁盘组必须存在于Oracle ASM中。无论投票文件是存储在Oracle ASM还是其他存储设备中，都可以使用此命令。</p>
                                 </li>
                                 <li>
                                    <p>如果未在Oracle ASM中存储投票文件，请使用上一步中获取的文件通用标识符（FUID）运行以下命令：</p><pre class="pre codeblock"><code>$ crsctl删除css votedisk <span class="variable" translate="no">FUID</span></code></pre><p>添加投票文件，如下所示：</p><pre class="pre codeblock"><code>$ crsctl add css votedisk <span class="variable" translate="no">path_to_voting_disk</span></code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">root</code>身份停止Oracle Clusterware堆栈：</span><div><pre class="pre codeblock"><code>#crsctl停止crs</code></pre><div class="infoboxnote" id="GUID-D977F7F1-94FB-425C-A284-F45C102CE6C1__GUID-E8268B76-35CA-4299-8D0A-98A6C11A1637">
                                 <p class="notep1">注意：</p>
                                 <p>如果Oracle Clusterware堆栈以独占模式运行，则使用<code class="codeph">-f</code>选项强制关闭堆栈。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">root</code>身份以正常模式重新启动Oracle Clusterware堆栈：</span><div><pre class="pre codeblock"><code>#crsctl start crs</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-oracle-cluster-registry-and-voting-files.html#GUID-648BB199-AFB9-416A-8438-E0331C255E78" title="为您的平台恢复OCR的过程。">还原Oracle Cluster Registry</a></li>
                           <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD90962"></a><div class="props_rev_3"><a id="GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6" name="GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6"></a><h4 id="CWADD-GUID-044D58CA-6392-40A1-AB31-C84A2A5A5CE6" class="sect4">添加，删除或迁移投票文件</h4>
                  <div>
                     <p><a id="d37753e5993" class="indexterm-anchor"></a><a id="d37753e5997" class="indexterm-anchor"></a><a id="d37753e6001" class="indexterm-anchor"></a>安装Oracle Clusterware后，您可以添加，删除和迁移投票文件。请注意，用于执行此操作的命令是不同的，具体取决于您的投票文件是位于Oracle ASM中还是位于另一个存储选项中。
                     </p>
                  </div>
                  <div class="props_rev_3"><a id="GUID-168E2ACA-185B-48B7-AC17-49422A43A32D" name="GUID-168E2ACA-185B-48B7-AC17-49422A43A32D"></a><h5 id="CWADD-GUID-168E2ACA-185B-48B7-AC17-49422A43A32D" class="sect5">修改Oracle ASM中存储的投票文件</h5>
                     <div>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>至<a id="d37753e6132" class="indexterm-anchor"></a>显示投票文件FUID和每个当前投票文件的文件路径，运行<code class="codeph">crsctl query css votedisk</code>命令显示类似如下的输出：</p><pre class="oac_no_warn" dir="ltr">$ crsctl query css votedisk  -  ----- ----------------- --------- --------- ## STATE文件通用ID文件名磁盘组1。在线6f57843d89464c46ea747362e8a3fa43（/ dev / sdb1）[DATA] 2。在线7c54856e98474f61bf349401e7c9fb95（/ dev / sdc1）[DATA] 3。在线9c46232b76234f61fc934673d5c8ec59（/ dev / sdd1）[DATA]</pre><p>此命令返回磁盘序列号，磁盘状态，FUID，磁盘路径以及存储磁盘的Oracle ASM磁盘组的名称。</p>
                              </li>
                              <li>
                                 <p><a id="d37753e6148" class="indexterm-anchor"></a>要将表决文件从Oracle ASM迁移到备用存储设备，请使用以下命令指定要用其替换Oracle ASM磁盘组的非Oracle ASM存储设备的路径：</p><pre class="oac_no_warn" dir="ltr">$ crsctl替换votedisk <span class="italic">path_to_voting_disk</span>
</pre><p>您可以在群集中的任何节点上运行此命令。</p>
                              </li>
                              <li>
                                 <p>至<a id="d37753e6163" class="indexterm-anchor"></a>使用Oracle ASM磁盘组中由Oracle ASM管理的投票文件替换未存储在Oracle ASM中的所有投票文件，运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ crsctl替换votedisk + <span class="italic">asm_disk_group</span></pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-C5843B47-5815-4D64-B455-D27A2752A7A4" name="GUID-C5843B47-5815-4D64-B455-D27A2752A7A4"></a><h5 id="CWADD-GUID-C5843B47-5815-4D64-B455-D27A2752A7A4" class="sect5">修改Oracle ASM上未存储的投票文件</h5>
                     <div>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>至<a id="d37753e6298" class="indexterm-anchor"></a>显示每个当前投票文件的投票文件FUID和文件路径，运行以下命令：</p><pre class="oac_no_warn" dir="ltr">$ crsctl query css votedisk ## STATE File Universal Id文件名磁盘组 -  ----- ----------------- ---------  - ------- 1。在线7c54856e98474f61bf349401e7c9fb95（/ cfs / host09_vd3）[]</pre><p>此命令返回磁盘序列号，磁盘状态，FUID和磁盘路径，而不返回Oracle ASM磁盘组的名称。</p>
                              </li>
                              <li>
                                 <p>至<a id="d37753e6312" class="indexterm-anchor"></a>添加一个或多个投票文件，运行以下命令，将<span class="italic"><code class="codeph">path_to_voting_disk</code></span>变量替换为要添加的投票文件的一个或多个以空格分隔的完整路径：</p><pre class="oac_no_warn" dir="ltr">$ crsctl add css votedisk <span class="italic">path_to_voting_disk</span> [...]
</pre></li>
                              <li>
                                 <p>至<a id="d37753e6329" class="indexterm-anchor"></a>用投票文件B替换投票文件A，必须添加投票文件B，然后删除投票文件A.要添加新磁盘并删除现有磁盘，请运行以下命令，将<span class="italic"><code class="codeph">path_to_voting_diskB</code></span>变量替换为完全限定的路径名投票文件B：</p><pre class="oac_no_warn" dir="ltr">$ crsctl add css votedisk <span class="italic">path_to_voting_diskB</span> -purge</pre><p><code class="codeph">-purge</code>选项删除现有的投票文件。
                                 </p>
                              </li>
                              <li>
                                 <p>至<a id="d37753e6351" class="indexterm-anchor"></a>删除投票文件，运行以下命令，指定一个或多个以空格分隔的投票文件FUID或逗号分隔的目录路径到要删除的投票文件：</p><pre class="oac_no_warn" dir="ltr">$ crsctl删除css votedisk { <span class="italic">FUID</span> | <span class="italic">path_to_voting_disk</span> [...]}</pre></li>
                           </ul>
                           <div class="infoboxnote" id="GUID-C5843B47-5815-4D64-B455-D27A2752A7A4__GUID-1C98D09D-3B2D-4D56-AAAA-A2558A1E3AC4">
                              <p class="notep1">注意：</p>
                              <p>如果群集已关闭且由于丢失的投票文件而无法重新启动，则必须通过以<code class="codeph">root</code>身份运行以下命令以独占模式启动CSS：</p><pre class="oac_no_warn" dir="ltr">#crsctl start crs -excl</pre><p>在独占模式下启动CSS后，您可以替换投票文件，如下所示：</p><pre class="oac_no_warn" dir="ltr">#crsctl replace votedisk <span class="italic">path_to_voting_disk</span></pre></div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-B2F1E3CA-AD08-41C2-AC07-746F45EFDE3E" name="GUID-B2F1E3CA-AD08-41C2-AC07-746F45EFDE3E"></a><h5 id="CWADD-GUID-B2F1E3CA-AD08-41C2-AC07-746F45EFDE3E" class="sect5">将投票文件迁移到Oracle ASM</h5>
                     <div>
                        <div class="section">
                           <p>至<a id="d37753e6497" class="indexterm-anchor"></a>将表决文件迁移到Oracle ASM，在以下命令中指定Oracle ASM磁盘组名称：</p><pre class="oac_no_warn" dir="ltr">$ crsctl替换votedisk + <span class="italic">asm_disk_group</span>
</pre><p>您可以在群集中的任何节点上运行此命令。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-3CFFB9B4-9DD2-45F1-B4AF-90CB5FB51095" name="GUID-3CFFB9B4-9DD2-45F1-B4AF-90CB5FB51095"></a><h5 id="CWADD-GUID-3CFFB9B4-9DD2-45F1-B4AF-90CB5FB51095" class="sect5">验证投票文件位置</h5>
                     <div>
                        <div class="section">
                           <p>修改投票文件后，验证投票文件位置，如下所示：</p><pre class="pre codeblock"><code>$ crsctl查询css votedisk</code></pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-D8EE89D2-BC62-4C16-A157-BFFAD80295F8" title="显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。">crsctl查询css votedisk</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00087.flashback.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用Oracle闪回技术</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="advanced-part.html" title="Previous" type="text/html"></link>
      <link rel="next" href="application-architecture.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="advanced-part.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="application-architecture.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-part.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle闪回技术</li>
            </ol>
            <a id="GUID-03D1CAAE-D940-444A-8771-B1BC636D105D" name="GUID-03D1CAAE-D940-444A-8771-B1BC636D105D"></a><a id="ADFNS1069"></a><a id="ADFNS1008"></a>
            
            <h2 id="ADFNS-GUID-03D1CAAE-D940-444A-8771-B1BC636D105D" class="sect2"><span class="enumeration_chapter">19</span>使用Oracle闪回技术</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何在数据库应用程序中使用Oracle闪回技术。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-03D1CAAE-D940-444A-8771-B1BC636D105D__GUID-FCFE9B61-1D9A-4A0A-9483-D7F6945E940E">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="flashback.html#GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876">Oracle闪回技术概述</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF">为Oracle闪回技术配置数据库</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E">使用Oracle闪回查询（SELECT AS OF）</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039">使用Oracle闪回版本查询</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D">使用Oracle闪回事务查询</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063">将Oracle闪回事务查询与Oracle闪回版本查询一起使用</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691">使用DBMS_FLASHBACK包</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-43425A2F-5932-4310-B387-C08D5331A74F">使用闪回事务</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">使用闪回数据存档</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-0DAA9454-D91A-46AC-A8E0-510670672F19">Oracle闪回技术的一般指南</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA">Oracle闪回技术的性能指南</a></p>
                  </li>
                  <li>
                     <p><a href="flashback.html#GUID-DECBC705-B421-4861-A341-E07EBB883AC9">Oracle闪回技术的多租户容器数据库限制</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS1070"></a><a id="ADFNS01001"></a><div class="props_rev_3"><a id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876" name="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876"></a><h3 id="ADFNS-GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876" class="sect3">Oracle闪回技术概述</h3>
               <div>
                  <p>Oracle闪回技术是一组Oracle数据库功能，可让您查看数据库对象的过去状态或将数据库对象返回到先前状态，而无需使用时间点介质恢复。</p>
                  <p>使用闪回功能，您可以：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>执行返回过去数据的查询</p>
                     </li>
                     <li>
                        <p>执行返回元数据的查询，这些元数据显示数据库更改的详细历史记录</p>
                     </li>
                     <li>
                        <p>将表或行恢复到以前的某个时间点</p>
                     </li>
                     <li>
                        <p>自动跟踪和归档事务数据更改</p>
                     </li>
                     <li>
                        <p>在数据库保持联机状态时回滚事务及其相关事务</p>
                     </li>
                  </ul>
                  <p>Oracle闪回功能使用自动撤消管理（AUM）系统来获取事务的元数据和历史数据。它们依赖于<strong class="term">撤销数据</strong> ，这些<strong class="term">数据</strong>是各个交易影响的记录。例如，如果用户运行<code class="codeph">UPDATE</code>语句将薪水从1000更改为1100，则Oracle数据库会将值1000存储在撤消数据中。
                  </p>
                  <p>撤消数据是持久的，并在数据库关闭后继续存在。它在<code class="codeph">undo_retention</code>指定的时间内保留，或者在自动撤消管理（AUM）存在的情况下保留调整的撤消保留。通过使用闪回功能，您可以使用撤消数据查询过去的数据或从逻辑损坏中恢复。除了在闪回功能中使用它之外，Oracle数据库还使用撤消数据来执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>回滚活动交易</p>
                     </li>
                     <li>
                        <p>使用数据库或进程恢复来恢复已终止的事务</p>
                     </li>
                     <li>
                        <p>为SQL查询提供读一致性</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__GUID-D68E454A-8FAC-4CFB-B827-6C344C2D38C9">
                     <p class="notep1">注意：</p>
                     <p>执行<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句后，请至少等待15秒以提交任何事务，以确保Oracle闪回功能（尤其是Oracle闪回版本查询）反映这些事务。
                     </p>
                  </div>
                  <div class="infoboxnote" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__GUID-FBD3ADC9-C9A4-4DCA-8C61-419C57426AD4">
                     <p class="notep1">注意：</p>
                     <p>Oracle数据库建议避免使用<code class="codeph">versions_starttime</code> ， <code class="codeph">versions_endtime</code>或<code class="codeph">scn_to_timestamp</code>列</p>
                     <p><code class="codeph">VERSIONS</code>查询（包括<code class="codeph">CTAS</code>查询）以提高性能。
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__GUID-085A8492-72A8-43AB-847F-43819862187A">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="flashback.html#GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55">应用开发功能</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E">数据库管理功能</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-CAC23AAE-AD5A-47FA-B446-B4DE00B2B876__FORADDITIONALGENERALINFORMATIONABOU-CADB9C11">
                        <p class="notep1">也可以看看：</p>
                        <p>有关闪回功能的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1439" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS599"></a><a id="ADFNS364"></a><a id="ADFNS604"></a><a id="ADFNS623"></a><a id="ADFNS624"></a><a id="ADFNS625"></a><a id="ADFNS598"></a><div class="props_rev_3"><a id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55" name="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55"></a><h4 id="ADFNS-GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55" class="sect4">应用开发功能</h4>
                  <div>
                     <p>在应用程序开发中，您可以使用这些闪回功能来报告历史数据或撤消错误更改。（您还可以以数据库用户或管理员的身份交互使用这些功能。）</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-CA81BED0-3487-4A9F-ABE5-8EE3947F1508">Oracle闪回查询</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可以检索使用<code class="codeph">SELECT</code>语句的<code class="codeph">AS</code> <code class="codeph">OF</code>子句指定的较早时间的数据。
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__FORMOREINFORMATIONSEEUSINGORACLEFLA-CADBF787">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="flashback.html#GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E">使用Oracle闪回查询（SELECT AS OF）</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-9F42FBD8-3B4D-4468-94E2-C37882F3CB99">Oracle闪回版本查询</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可检索特定时间间隔的元数据和历史数据（例如，查看在给定时间间隔内存在的表的所有行）。每个行版本的元数据包括开始和结束时间，更改操作类型以及创建行版本的事务的标识。要创建Oracle闪回版本查询，请使用<code class="codeph">SELECT</code>语句的<code class="codeph">VERSIONS</code> <code class="codeph">BETWEEN</code>子句。
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__FORMOREINFORMATIONSEEUSINGORACLEFLA-CADC0449">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="flashback.html#GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039">使用Oracle闪回版本查询</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-851E5C4F-8CCF-4B21-A34B-E2E968DB4724">Oracle闪回事务查询</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可检索给定事务或给定时间间隔内所有事务的元数据和历史数据。要执行Oracle闪回事务查询，请从静态数据字典视图<code class="codeph">FLASHBACK_TRANSACTION_QUERY</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGORACLEFLASHBACKTRANSACTIONQUER-CADC0F8A">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="flashback.html#GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D">使用Oracle闪回事务查询</a> 。
                           </p>
                        </div>
                        <p>通常，您将Oracle闪回事务查询与Oracle闪回版本查询一起使用，该查询为感兴趣的行提供事务ID。</p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGORACLEFLASHBACKTRANSACTIONQUER-CADC1987">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="flashback.html#GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063">将Oracle闪回事务查询与Oracle闪回版本查询一起使用</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-69A9D99E-F677-4433-ACDD-36F7D625EC81">DBMS_FLASHBACK包</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可将内部Oracle数据库时钟设置为较早的时间，以便您可以检查当时的当前数据，或在数据库保持联机时回滚事务及其相关事务。</p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGDBMS_FLASHBACKPACKAGE-CADC2A94">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="flashback.html#GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__BJFIIEAA">闪回事务</a></p>
                              </li>
                              <li>
                                 <p><a href="flashback.html#GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691">使用DBMS_FLASHBACK包</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__BJFIIEAA">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-1F735DFA-C42D-4848-A9C0-1314FFB4A349">闪回事务</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用闪回事务在数据库保持联机时回滚事务及其相关事务。此恢复操作使用撤消数据来创建和运行相应的补偿事务，该事务将受影响的数据返回到其原始状态。（闪回事务是<code class="codeph">DBMS_FLASHBACK</code>包的一部分）。
                        </p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGDBMS_FLASHBACKPACKAGE.-CADC4377">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="flashback.html#GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691">使用DBMS_FLASHBACK包</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__GUID-9D48BD97-77F7-455E-8826-A17C155101D6">闪回数据存档</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用闪回数据存档自动跟踪和存档为闪回存档启用的表的更改的历史版本，确保对数据库对象的SQL版本访问，而不会出现快照太旧的错误。</p>
                        <div class="infoboxnotealso" id="GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55__USINGFLASHBACKDATAARCHIVE.-CADC496E">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">使用闪回数据存档</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS606"></a><a id="ADFNS607"></a><a id="ADFNS608"></a><a id="ADFNS605"></a><div class="props_rev_3"><a id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E" name="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E"></a><h4 id="ADFNS-GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E" class="sect4">数据库管理功能</h4>
                  <div>
                     <p>这些闪回功能主要用于数据恢复。通常，您仅将这些功能用作数据库管理员。</p>
                     <p>本章重点介绍<a href="flashback.html#GUID-EFCF3C98-C700-4578-A4E1-1F57A0FBEC55">应用程序开发功能</a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__ORACLEDATABASEADMINISTRATORSGUIDEOR-CADCC0D6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN015" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=BRADV80055" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__GUID-B42F260A-A693-4D82-957A-4972B6D1B71B">Oracle闪回表</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可将表还原到以前某个时间点的状态。您可以在数据库联机时还原表，从而撤消对指定表的更改。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__GUID-8857E1F7-DC17-4615-8BF0-4B30FD57907D">Oracle Flashback Drop</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可恢复已删除的表。此功能可以反转<code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句的效果。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-603A2020-1F8E-4C2C-BAE6-73454C4CFD7E__GUID-4CE51EEE-B818-4DE1-84FC-6834501DD702">Oracle闪回数据库</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用此功能可以使用恢复区域将数据库快速返回到较早的时间点。这很快，因为您不必还原数据库备份。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS01002"></a><div class="props_rev_3"><a id="GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF" name="GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF"></a><h3 id="ADFNS-GUID-779FB434-F3EA-4334-8B2A-A328555B5AFF" class="sect3">为Oracle闪回技术配置数据库</h3>
               <div>
                  <div class="section">
                     <p>在应用程序中使用闪回功能之前，您或您的数据库管理员必须执行以下主题中描述的配置任务：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="flashback.html#GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3">配置数据库以进行自动撤消管理</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF">为Oracle闪回事务查询配置数据库</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000">为闪回事务配置数据库</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1">在特定LOB列上启用Oracle闪回操作</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C">授予必要的特权</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS609"></a><div class="props_rev_3"><a id="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3" name="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3"></a><h4 id="ADFNS-GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3" class="sect4">配置数据库以进行自动撤消管理</h4>
                  <div>
                     <div class="section">
                        <p>要为自动撤消管理（AUM）配置数据库，您或您的数据库管理员必须：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建具有足够空间的撤消表空间，以保留闪回操作所需的数据。</p>
                              <p>用户更新数据的频率越高，所需的空间就越大。数据库管理员通常会计算空间要求。</p>
                           </li>
                           <li>
                              <p>启用AUM，如“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN013" target="_blank"><span class="italic">Oracle数据库管理员指南”中所述</span></a> 。设置这些数据库初始化参数</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">UNDO_MANAGEMENT</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">UNDO_TABLESPACE</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">UNDO_RETENTION</code></p>
                                 </li>
                              </ul>
                              <p>对于固定大小的撤消表空间，Oracle数据库会自动调整系统以使撤消表空间具有最佳的撤消保留。</p>
                              <p>对于可自动扩展的撤消表空间，Oracle数据库保留的撤消数据的长度超过<code class="codeph">UNDO_RETENTION</code>参数指定的最长查询持续时间和撤消保留的低阈值。
                              </p>
                              <div class="infoboxnote" id="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3__GUID-45DE2398-98F5-419C-8364-B37B7D35FA7C">
                                 <p class="notep1">注意：</p>
                                 <p>您可以查询<code class="codeph">V$UNDOSTAT</code> 。 <code class="codeph">TUNED_UNDORETENTION</code>用于确定为当前还原表空间保留还原的时间。
                                 </p>
                              </div>
                              <p>设置<code class="codeph">UNDO_RETENTION</code>并不保证不会丢弃未到期的撤消数据。如果系统需要更多空间，Oracle数据库可以使用最近生成的撤消数据覆盖未过期的撤消。
                              </p>
                           </li>
                           <li>
                              <p>为撤消表空间指定<code class="codeph">RETENTION</code> <code class="codeph">GUARANTEE</code>子句，以确保不会丢弃未到期的撤消数据。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-D1F53BB8-8E1B-4171-857F-72B33447BFC3__GUID-B8514A50-E871-4484-A63B-427DCA491228">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关创建撤消表空间和启用AUM的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN013" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">V$UNDOSTAT</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN30295" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS610"></a><div class="props_rev_3"><a id="GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF" name="GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF"></a><h4 id="ADFNS-GUID-EBC8258B-03D9-4037-8B31-1A2EE4C73FCF" class="sect4">为Oracle闪回事务查询配置数据库</h4>
                  <div>
                     <div class="section">
                        <p>要为Oracle闪回事务查询功能配置数据库，您或您的数据库管理员必须：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>确保Oracle Database与10.0版兼容性运行。</p>
                           </li>
                           <li>
                              <p>启用补充日志记录：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加补充日志数据;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS611"></a><div class="props_rev_3"><a id="GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000" name="GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000"></a><h4 id="ADFNS-GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000" class="sect4">为闪回事务配置数据库</h4>
                  <div>
                     <div class="section">
                        <p>要为闪回事务功能配置数据库，您或您的数据库管理员必须：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>安装数据库但未打开，启用<code class="codeph">ARCHIVELOG</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ARCHIVELOG;</pre></li>
                           <li>
                              <p>至少打开一个存档日志：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT;</pre></li>
                           <li>
                              <p>如果没有完成，请启用最小和主键补充日志记录：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加补充日志数据; ALTER DATABASE添加补充日志数据（PRIMARY KEY）列;</pre></li>
                           <li>
                              <p>如果要跟踪外键依赖关系，请启用外键补充日志记录：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加补充日志数据（外键）列;</pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-AFDC64F5-915A-4B72-BB80-AEBA445C8000__GUID-C0F0D2F1-A657-4466-B6F4-B57FC8C2933A">
                           <p class="notep1">注意：</p>
                           <p>如果您有很多外键约束，启用外键补充日志记录可能不值得性能损失。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS612"></a><div class="props_rev_3"><a id="GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1" name="GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1"></a><h4 id="ADFNS-GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1" class="sect4">在特定LOB列上启用Oracle闪回操作</h4>
                  <div>
                     <div class="section">
                        <p>要在表的特定LOB列上启用闪回操作，请使用带有<code class="codeph">RETENTION</code>选项的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句。
                        </p>
                        <p>由于LOB列的撤消数据可能很大，因此必须定义要用于闪回操作的LOB列。</p>
                        <div class="infoboxnotealso" id="GUID-9FEB8DBB-7763-49C2-A1D2-97B4DFF85AC1__GUID-6ACA95C8-A69B-4CF1-8B34-C4FE392E3DFC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADLOB101" target="_blank"><span class="italic">Oracle Database SecureFiles和Large Objects Developer's Guide</span></a> ，了解LOB存储和<code class="codeph">RETENTION</code>参数</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS614"></a><a id="ADFNS615"></a><a id="ADFNS616"></a><a id="ADFNS617"></a><a id="ADFNS613"></a><div class="props_rev_3"><a id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C" name="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C"></a><h4 id="ADFNS-GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C" class="sect4">授予必要的特权</h4>
                  <div>
                     <div class="section">
                        <p>您或您的数据库管理员必须向必须使用这些闪回功能的用户，角色或应用程序授予权限。</p>
                        <div class="infoboxnotealso" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__FORINFORMATIONABOUTTHEGRANTSTATEMEN-CADD3A45">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">GRANT</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-C4D6BF66-E34F-44EF-9D17-CFB68139801D">对于Oracle闪回查询和Oracle闪回版本查询</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要在查询期间允许访问特定对象，请为这些对象授予<code class="codeph">FLASHBACK</code>以及<code class="codeph">READ</code>或<code class="codeph">SELECT</code>权限。
                        </p>
                        <p>要允许对所有表进行查询，请授予<code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-A54C42FA-15A0-4AA1-8D8E-CD6B2AA88507">对于Oracle闪回事务查询</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>授予<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code>权限。
                        </p>
                        <p>要允许执行Oracle闪回事务查询检索的撤消SQL代码，请为特定表授予<code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">INSERT</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-56BB5AAB-C32E-4C18-B6F4-00398387AAC1">对于DBMS_FLASHBACK包</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要允许访问的功能<code class="codeph">DBMS_FLASHBACK</code>包，授予<code class="codeph">EXECUTE</code>的特权<code class="codeph">DBMS_FLASHBACK</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BA59D897-C98B-4418-8CAE-42C35AC5B08C__GUID-C8B20D79-DC3F-48E3-AADD-FF36BBCC916C">对于闪回数据存档</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要允许特定用户使用特定的闪回数据存档在表上启用闪回数据存档，请将该闪回数据存档的<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>对象权限授予该用户。要授予<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>对象权限，您必须以<code class="codeph">SYSDBA</code>身份登录或具有<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code>系统特权。
                        </p>
                        <p>要允许执行这些语句，请授予<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code>系统特权：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                           </li>
                        </ul>
                        <p>要授予<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code>系统特权，您必须以<code class="codeph">SYSDBA</code>身份登录。</p>
                        <p>要使用<code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>或<code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句创建默认闪回数据存档，您必须以<code class="codeph">SYSDBA</code>身份登录。</p>
                        <p>要为已为闪回数据存档启用的表禁用闪回数据存档，您必须以<code class="codeph">SYSDBA</code>身份登录或具有<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code>系统特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1071"></a><a id="ADFNS01003"></a><div class="props_rev_3"><a id="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E" name="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E"></a><h3 id="ADFNS-GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E" class="sect3">使用Oracle闪回查询（SELECT AS OF）</h3>
               <div>
                  <div class="section">
                     <p>要使用Oracle闪回查询，请使用带有<code class="codeph">AS</code> <code class="codeph">OF</code>子句的<code class="codeph">SELECT</code>语句。Oracle闪回查询检索较早时存在的数据。查询通过时间戳或系统变更号（SCN）显式引用过去时间。它返回在该时间点当前的已提交数据。
                     </p>
                     <p>Oracle闪回查询的使用包括：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>恢复丢失的数据或撤消不正确的已提交更改。</p>
                           <p>例如，如果您错误地删除或更新行，然后提交它们，则可以立即撤消该错误。</p>
                        </li>
                        <li>
                           <p>在较早时间将当前数据与相应数据进行比较。</p>
                           <p>例如，您可以运行每日报告，显示昨天数据的变化。您可以比较表数据的各行或查找行集的交集或联合。</p>
                        </li>
                        <li>
                           <p>检查特定时间的事务数据的状态。</p>
                           <p>例如，您可以验证某一天的帐户余额。</p>
                        </li>
                        <li>
                           <p>选择在特定时间或在用户定义的有效时间段内的任何时间有效的数据。</p>
                           <p>例如，您可以在指定的有效时间段内找到具有有效员工信息的员工，该员工信息具有特定时间戳或指定的开始和结束时间。（有关更多信息，请参阅<a href="design_basics.html#GUID-53F19441-81F3-4A4D-923C-464CAE0964D3">时间有效性支持</a> 。）
                           </p>
                        </li>
                        <li>
                           <p>通过消除存储某些时态数据的需要简化应用程序设计。</p>
                           <p>Oracle闪回查询允许您直接从数据库中检索过去的数据。</p>
                        </li>
                        <li>
                           <p>将打包的应用程序（如报告生成工具）应用于过去的数据。</p>
                        </li>
                        <li>
                           <p>为应用程序提供自助服务纠错，从而使用户能够撤消和纠正他们的错误。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E__GUID-EF0D44C4-4969-4AB5-8230-A1540466408A">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="flashback.html#GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8">示例：检查和恢复过去的数据</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE">Oracle闪回查询指南</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-0BD1F4BD-894B-47BA-A44B-74BCA4CFD60E__FORMOREINFORMATIONABOUTTHESELECTASO-CADD8969">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">SELECT</code> <code class="codeph">AS</code> <code class="codeph">OF</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01702" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS619"></a><a id="ADFNS620"></a><a id="ADFNS618"></a><div class="props_rev_3"><a id="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8" name="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8"></a><h4 id="ADFNS-GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8" class="sect4">示例：检查和恢复过去的数据</h4>
                  <div>
                     <p>假设您在下午12:30发现员工Chung的行已从<code class="codeph">employees</code>表中删除，并且您知道在上午9:30，Chung的数据已正确存储在数据库中。您可以使用Oracle闪回查询在上午9:30检查表的内容，以找出丢失的数据。如果适用，您可以恢复丢失的数据。
                     </p>
                     <p><a href="flashback.html#GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABHIHFF">例19-1</a>在2004年4月4日上午9:30检索<code class="codeph">Chung</code>的记录状态：</p>
                     <div class="example" id="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABHIHFF">
                        <p class="titleinexample">示例19-1使用Oracle闪回查询检索丢失的行</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees OF TIMESTAMP TO_TIMESTAMP（'2004-04-04 09:30:00'，'YYYY-MM-DD HH：MI：SS'）WHERE last_name ='Chung';</pre><p><a href="flashback.html#GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABJJCFE">例19-2</a>将Chung的信息恢复到<code class="codeph">employees</code>表：</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-19914A94-FAE3-41CF-925E-22294CAFCBF8__BABJJCFE">
                        <p class="titleinexample">示例19-2 Oracle闪回查询后恢复丢失的行</p><pre class="oac_no_warn" dir="ltr">INSERT INTO员工（SELECT * FROM员工AS OF TIMESTAMP TO_TIMESTAMP（'2004-04-04 09:30:00'，'YYYY-MM-DD HH：MI：SS'）WHERE last_name ='Chung'）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS621"></a><div class="props_rev_3"><a id="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE" name="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE"></a><h4 id="ADFNS-GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE" class="sect4">Oracle闪回查询指南</h4>
                  <div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以为每个表指定或省略<code class="codeph">AS</code> <code class="codeph">OF</code>子句，并为不同的表指定不同的时间。
                           </p>
                           <div class="infoboxnote" id="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE__GUID-E43E43D9-13F9-4F95-8E60-EB2D935660E6">
                              <p class="notep1">注意：</p>
                              <p>如果表是闪回数据存档，并且您为其指定的时间早于其创建时间，则查询将返回该表的零行，而不是导致错误。</p>
                           </div>
                        </li>
                        <li>
                           <p>您可以在查询中使用<code class="codeph">AS</code> <code class="codeph">OF</code>子句在与Oracle闪回查询相同的会话中执行数据定义语言（DDL）操作（如创建和截断表）或数据操作语言（DML）语句（如<code class="codeph">INSERT</code>和<code class="codeph">DELETE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>要在影响数据库当前状态的DDL或DML语句中使用Oracle闪回查询的结果，请在<code class="codeph">INSERT</code>或<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句中使用<code class="codeph">AS</code> <code class="codeph">OF</code>子句。
                           </p>
                        </li>
                        <li>
                           <p>如果可能的3秒错误（最大值）对应用程序中的Oracle闪回查询很重要，请使用SCN而不是时间戳。请参阅<a href="flashback.html#GUID-0DAA9454-D91A-46AC-A8E0-510670672F19">Oracle闪回技术的一般准则</a> 。
                           </p>
                        </li>
                        <li>
                           <p>您可以使用定义视图的<code class="codeph">SELECT</code>语句中的<code class="codeph">AS</code> <code class="codeph">OF</code>子句创建引用过去数据的视图。
                           </p>
                           <p>如果通过从数据库主机上的当前时间减去指定相对时间，则会为每个查询重新计算过去时间。例如：</p><pre class="oac_no_warn" dir="ltr">创建视图hour_ago AS SELECT *来自员工AS OF TIMESTAMP（SYSTIMESTAMP  -  INTERVAL'60'MECUTE）;</pre><p><code class="codeph">SYSTIMESTAMP</code>是指数据库主机环境的时区。
                           </p>
                        </li>
                        <li>
                           <p>您可以在自联接中使用<code class="codeph">AS</code> <code class="codeph">OF</code>子句，也可以在诸如<code class="codeph">INTERSECT</code>和<code class="codeph">MINUS</code>类的集合操作中使用<code class="codeph">AS</code> <code class="codeph">OF</code>子句来提取或比较来自两个不同时间的数据。
                           </p>
                           <p>您可以通过前面的Oracle闪回查询与<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>或<code class="codeph">INSERT</code> <code class="codeph">INTO</code> <code class="codeph">TABLE</code> <code class="codeph">SELECT</code>语句存储结果。例如，此查询将一小时前存在的行重新插入表<code class="codeph">employees</code> ：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO员工（SELECT * FROM员工AS OF TIMESTAMP（SYSTIMESTAMP  -  INTERVAL'60'MINUTE）MINUS SELECT * FROM employees;</pre><p><code class="codeph">SYSTIMESTAMP</code>是指数据库主机环境的时区。
                           </p>
                        </li>
                        <li>
                           <p>您可以在查询中使用<code class="codeph">AS</code> <code class="codeph">OF</code>子句来检查在特定时间有效的数据。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-32B9B091-2BE6-486D-B7E6-3A1BAF37BCCE__GUID-6989D7BA-FF19-4781-86BB-5CD26A6B975F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="design_basics.html#GUID-53F19441-81F3-4A4D-923C-464CAE0964D3">时间有效性支持</a></p>
                           </li>
                           <li>
                              <p><a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">使用闪回数据存档</a>获取有关闪<a href="flashback.html#GUID-06AA782A-3F79-4235-86D5-2D136485F093">回数据存档</a>的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS622"></a><a id="ADFNS01004"></a><div class="props_rev_3"><a id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039" name="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039"></a><h3 id="ADFNS-GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039" class="sect3">使用Oracle闪回版本查询</h3>
               <div>
                  <div class="section">
                     <p>使用Oracle闪回版本查询检索给定时间间隔内存在的特定行的不同版本。每当执行<code class="codeph">COMMIT</code>语句时，都会创建行版本。
                     </p>
                     <div class="infoboxnote" id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__GUID-5F6D784C-46C6-4B26-8D9B-D7862B2E072D">
                        <p class="notep1">注意：</p>
                        <p>执行<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句后，请至少等待15秒以提交任何事务，以确保Oracle闪回版本查询反映这些事务。
                        </p>
                     </div>
                     <p>使用<code class="codeph">SELECT</code>语句的<code class="codeph">VERSIONS</code> <code class="codeph">BETWEEN</code>子句指定Oracle闪回版本查询。语法是：</p><pre class="oac_no_warn" dir="ltr">{SCN |之间的版本TIMESTAMP} <span class="italic"><code class="codeph">start</code></span>和<span class="italic"><code class="codeph">end</code></span>
</pre><p>其中<span class="italic"><code class="codeph">start</code></span>和<span class="italic"><code class="codeph">end</code></span>分别表示要查询的时间间隔的<span class="italic"><code class="codeph">start</code></span>和<span class="italic"><code class="codeph">end</code></span>的表达式。时间间隔包括（ <span class="italic"><code class="codeph">start</code></span>和<span class="italic"><code class="codeph">end</code></span> ）。
                     </p>
                     <p>要么：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">user_valid_time</span> [BETWEEN TIMESTAMP <span class="italic"><code class="codeph">start</code></span>和<span class="italic"><code class="codeph">end</code></span> ]的版本周期</pre><p>其中<span class="italic"><code class="codeph">user_valid_time</code></span>指用户指定的有效时间段，如<a href="design_basics.html#GUID-53F19441-81F3-4A4D-923C-464CAE0964D3">时间有效性支持中所述</a> 。
                     </p>
                     <p>Oracle闪回版本查询返回一个表，该表在指定的时间间隔内随时存在的每行版本都有一行。表中的每一行都包含有关行版本的元数据的伪列，可以显示数据库发生特定更改（可能是错误的）的时间和方式。</p>
                     <p><a href="flashback.html#GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__G1020732" title="此表汇总了闪回版本查询行的伪列。">表19-1</a>描述了有关行版本的元数据的伪列。<code class="codeph">VERSIONS_*</code>伪列仅具有事务时闪回版本查询的值（即具有<code class="codeph">BETWEEN</code> <code class="codeph">TIMESTAMP</code>子句<span class="italic"><code class="codeph">start</code></span> <code class="codeph">AND</code> <span class="italic"><code class="codeph">end</code></span> ）。
                     </p>
                     <div class="tblformal" id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__G1020732">
                        <p class="titleintable">表19-1 Oracle闪回版本查询行数据伪列</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle闪回版本查询行数据伪列" width="100%" border="1" summary="This table summarizes the pseudocolumns of Flashback Version Query rows." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d111972e2489">伪列名称</th>
                                 <th align="left" valign="bottom" width="79%" id="d111972e2492">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2497" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_STARTSCN</code></p>
                                    <p><code class="codeph">VERSIONS_STARTTIME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2497 d111972e2492 ">
                                    <p>创建行版本时启动系统更改编号（SCN）或<code class="codeph">TIMESTAMP</code> 。此伪列标识数据首次具有行版本中反映的值的时间。使用此伪列来标识Oracle闪回表或Oracle闪回查询的过去目标时间。
                                    </p>
                                    <p>如果此伪列为<code class="codeph">NULL</code> ，则在<span class="italic"><code class="codeph">start</code></span>之前创建行版本。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2520" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_ENDSCN</code></p>
                                    <p><code class="codeph">VERSIONS_ENDTIME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2520 d111972e2492 ">
                                    <p>行版本过期时的SCN或<code class="codeph">TIMESTAMP</code> 。
                                    </p>
                                    <p>如果此伪列为<code class="codeph">NULL</code> ，则行版本在查询时是当前的，或者行对应于<code class="codeph">DELETE</code>操作。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2542" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_XID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2542 d111972e2492 ">
                                    <p>创建行版本的事务的标识符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d111972e2550" headers="d111972e2489 ">
                                    <p><code class="codeph">VERSIONS_OPERATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="79%" headers="d111972e2550 d111972e2492 ">
                                    <p>事务执行的操作： <code class="codeph">I</code>表示插入， <code class="codeph">D</code>表示删除， <code class="codeph">U</code>表示更新。版本是插入，删除或更新的行的版本;即， <code class="codeph">INSERT</code>操作之后的行， <code class="codeph">DELETE</code>操作之前的行或受<code class="codeph">UPDATE</code>操作影响的行。
                                    </p>
                                    <p>对于索引键的用户更新，Oracle闪回版本查询可能将<code class="codeph">UPDATE</code>操作视为两个操作， <code class="codeph">DELETE</code>加<code class="codeph">INSERT</code> ，表示为两个版本行，其中<code class="codeph">D</code>后跟<code class="codeph">I</code> <code class="codeph">VERSIONS_OPERATION</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>给定的行版本在其时间<code class="codeph">VERSIONS_START*</code>开始有效，但不包括其时间<code class="codeph">VERSIONS_END*</code> 。也就是说，它在任何时间<span class="italic">t</span>都有效，使得<code class="codeph">VERSIONS_START*</code> <span class="bold">&lt;=</span> <span class="italic">t</span> <span class="bold">&lt;</span> <code class="codeph">VERSIONS_END*</code> 。例如，此输出表明从2002年9月9日起包括的截止日期为2003年11月25日的工资为10243。
                     </p><pre class="oac_no_warn" dir="ltr">VERSIONS_START_TIME VERSIONS_END_TIME SALARY ------------------- ----------------- ------ 09-SEP-2003 25-NOV-2003 10243</pre><p>以下是Oracle闪回版本查询的典型用法：</p><pre class="oac_no_warn" dir="ltr">SELECT versions_startscn，versions_starttime，versions_endscn，versions_endtime，versions_xid，versions_operation，last_name，salary FROM员工在TIMESTAMP TO_TIMESTAMP之间的版本（'2008-12-18 14:00:00'，'YYYY-MM-DD HH24：MI：SS'）和TO_TIMESTAMP（'2008-12-18 17:00:00'，'YYYY-MM-DD HH24：MI：SS'）WHERE first_name ='John';</pre><p>您可以将<code class="codeph">VERSIONS_XID</code>与Oracle闪回事务查询一起使用来查找此事务的元数据，包括撤消行更改所需的SQL以及负责更改的用户。
                     </p>
                     <p>闪回版本查询仅允许使用IOT（索引组织表）进行仅索引访问，但不允许使用索引快速完全扫描。</p>
                     <div class="infoboxnotealso" id="GUID-544C00A0-D4F5-4B32-BE2F-5332EDCDD039__GUID-EFC77F2C-E339-4E16-B1ED-5A9B437C0FEE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关Oracle闪回版本查询伪列的信息以及<code class="codeph">VERSIONS</code>子句的语法，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01702" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="flashback.html#GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D">使用Oracle闪回事务查询</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS01005"></a><div class="props_rev_3"><a id="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D" name="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D"></a><h3 id="ADFNS-GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D" class="sect3">使用Oracle闪回事务查询</h3>
               <div>
                  <div class="section">
                     <p>使用Oracle闪回事务查询检索给定事务或给定时间间隔内所有事务的元数据和历史数据。Oracle闪回事务查询查询静态数据字典视图<code class="codeph">FLASHBACK_TRANSACTION_QUERY</code> ，其列在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN29086" target="_blank"><span class="italic">Oracle数据库参考</span></a>中描述。
                     </p>
                     <p><code class="codeph">UNDO_SQL</code>列显示的SQL代码与事务执行的DML操作逻辑相反。您通常可以使用此代码来反转事务期间采取的逻辑步骤。但是，有些情况下<code class="codeph">UNDO_SQL</code>代码与原始事务不完全相反。例如， <code class="codeph">UNDO_SQL</code> <code class="codeph">INSERT</code>操作可能不会在与删除它的<code class="codeph">ROWID</code>相同的表中插入一行。
                     </p>
                     <p>此语句在<code class="codeph">FLASHBACK_TRANSACTION_QUERY</code>视图中查询事务信息，包括事务ID，操作，操作开始和结束SCN，负责操作的用户以及显示操作逻辑相反的SQL代码：</p><pre class="oac_no_warn" dir="ltr">SELECT xid，operation，start_scn，commit_scn，logon_user，undo_sql FROM flashback_transaction_query WHERE xid = HEXTORAW（'000200030000002D'）;</pre><p>此语句使用Oracle闪回版本查询作为子查询，将每个行版本与负责行数据更改的<code class="codeph">LOGON_USER</code>相关联：</p><pre class="oac_no_warn" dir="ltr">SELECT xid，logon_user FROM flashback_transaction_query WHERE xid IN（SELECT versions_xid FROM employees VERSIONS BETWEEN TIMESTAMP TO_TIMESTAMP（'2003-07-18 14:00:00'，'YYYY-MM-DD HH24：MI：SS'）和TO_TIMESTAMP（'2003 -07-18 17:00:00'，'YYYY-MM-DD HH24：MI：SS'））;</pre><div class="infoboxnote" id="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D__GUID-70943774-9713-4087-9B22-53D0508CC0A8">
                        <p class="notep1">注意：</p>
                        <p>如果在<code class="codeph">WHERE</code>子句中未指定<code class="codeph">XID</code>情况下查询<code class="codeph">FLASHBACK_TRANSACTION_QUERY</code> ，则查询会扫描许多不相关的行，从而降低性能。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-212A4073-ABE2-4053-A852-3A41DEF6A24D__GUID-A4F63316-8FD0-4C60-ACB2-2DB6F07D8B10">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=BRADV81517" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南。</span></a>有关数据库管理员如何使用闪回表来还原整个表而不是单个行的信息</p>
                           </li>
                           <li>
                              <p>有关数据库管理员如何使用闪回表来还原整个表而不是单个行的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN01512" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1006"></a><div class="props_rev_3"><a id="GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063" name="GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063"></a><h3 id="ADFNS-GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063" class="sect3">将Oracle闪回事务查询与Oracle闪回版本查询一起使用</h3>
               <div>
                  <div class="section">
                     <p>在此示例中，数据库管理员执行此操作：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE emp; CREATE TABLE emp（empno NUMBER PRIMARY KEY，empname VARCHAR2（16），薪水NUMBER）; INSERT INTO emp（empno，empname，salary）VALUES（111，'Mike'，555）;承诺; DROP TABLE dept; CREATE TABLE dept（deptno NUMBER，deptname VARCHAR2（32））; INSERT INTO dept（deptno，deptname）VALUES（10，'Accounting'）;承诺;</pre><p>现在<code class="codeph">emp</code>和<code class="codeph">dept</code>各有一行。就行版本而言，每个表都有一行的一个版本。假设一个错误的事务从表<code class="codeph">emp</code>删除了<code class="codeph">empno</code> <code class="codeph">111</code> ：</p><pre class="oac_no_warn" dir="ltr">UPDATE emp SET salary = salary + 100 WHERE empno = 111; INSERT INTO dept（deptno，deptname）VALUES（20，'Finance'）; DELETE FROM emp WHERE empno = 111;承诺;</pre><p>接下来，事务将<code class="codeph">empno</code> <code class="codeph">111</code>重新插入到具有新员工姓名的<code class="codeph">emp</code>表中：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO emp（empno，empname，salary）VALUES（111，'Tom'，777）; UPDATE emp SET salary = salary + 100 WHERE empno = 111; UPDATE emp SET salary = salary + 50 WHERE empno = 111;承诺;</pre><p>数据库管理员检测到应用程序错误，并且必须诊断问题。数据库管理员发出此查询以检索<code class="codeph">emp</code>表中与empno <code class="codeph">111</code>对应的行的版本。该查询使用Oracle闪回版本查询伪列：</p><pre class="oac_no_warn" dir="ltr">SELECT versions_xid XID，versions_startscn START_SCN，versions_endscn END_SCN，versions_operation OPERATION，empname，salary FROM emp VERSIONS BETWEEN SCN MINVALUE AND MAXVALUE WHERE empno = 111;</pre><p>结果类似于：</p><pre class="oac_no_warn" dir="ltr">XID START_SCN END_SCN O EMPNAME SALARY ---------------- ---------- ----------  -  ------- ---------- ---------- 09001100B2200000 10093466 I Tom 927 030002002B210000 10093459 D Mike 555 0800120096200000 10093375 10093459 I Mike 555 3行被选中。
</pre><p>结果表行按时间顺序递减。第三行对应于表<code class="codeph">emp</code>中创建表时插入表中的行的版本。第二行对应于删除错误事务的<code class="codeph">emp</code>中的行。第一行对应于<code class="codeph">emp</code>中使用新员工名称重新插入的行的版本。
                     </p>
                     <p>数据库管理员将事务<code class="codeph">030002002B210000</code>识别为错误事务，并使用Oracle闪回事务查询来审计此事务所做的所有更改：</p><pre class="oac_no_warn" dir="ltr">SELECT xid，start_scn，commit_scn，operation，logon_user，undo_sql FROM flashback_transaction_query WHERE xid = HEXTORAW（' <span class="bold">000200030000002D</span> '）;</pre><p>结果类似于：</p><pre class="oac_no_warn" dir="ltr">XID START_SCN COMMIT_SCN操作LOGON_USER ---------------- ---------- ---------- --------- ------------------------------ UNDO_SQL ------------------- -------------------------------------------------- ----------- 030002002B210000 10093452 10093459删除HR插入“HR”。“EMP”（“EMPNO”，“EMPNAME”，“SALARY”）值（'111'，'Mike'，'655 “）; 030002002B210000 10093452 10093459 INSERT HR从“HR”删除。“DEPT”其中ROWID ='AAATjuAAEAAAAJrAAB'; 030002002B210000 10093452 10093459 UPDATE HR更新“HR”。“EMP”设置“SALARY”='555'，其中ROWID ='AAATjsAAEAAAAJ7AAA'; 030002002B210000 10093452 10093459 BEGIN HR选择4行。
</pre><p>为了使下一个查询的结果更易于阅读，数据库管理员使用以下SQL * Plus命令：</p><pre class="oac_no_warn" dir="ltr">COLUMN操作FORMAT A9 COLUMN table_name FORMAT A10 COLUMN table_owner FORMAT A11</pre><p>要查看错误事务和所有后续事务的详细信息，数据库管理员将执行以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT xid，start_scn，commit_scn，operation，table_name，table_owner FROM flashback_transaction_query WHERE table_owner ='HR'AND start_timestamp&gt; = TO_TIMESTAMP（'2002-04-16 11:00:00'，'YYYY-MM-DD HH：MI：SS “）;</pre><p>结果类似于：</p><pre class="oac_no_warn" dir="ltr">XID START_SCN COMMIT_SCN操作TABLE_NAME TABLE_OWNER ---------------- ---------- ---------- -------- -  ---------- ----------- 02000E0074200000 10093435 10093446 INSERT DEPT HR 030002002B210000 10093452 10093459 DELETE EMP HR 030002002B210000 10093452 10093459 INSERT DEPT HR 030002002B210000 10093452 10093459 UPDATE EMP HR 0800120096200000 10093374 10093375 INSERT EMP HR 09001100B2200000 10093462 10093466 UPDATE EMP HR 09001100B2200000 10093462 10093466 UPDATE EMP HR 09001100B2200000 10093462 10093466 INSERT EMP HR 8行已选择。
</pre><div class="infoboxnote" id="GUID-115952E6-DB02-48D5-A2D3-B5C04AB68063__GUID-A85FE82C-1F7E-4349-AACE-6A9A377A9F41">
                        <p class="notep1">注意：</p>
                        <p>由于前面的查询未在<code class="codeph">WHERE</code>子句中指定<code class="codeph">XID</code> ，因此它会扫描许多不相关的行，从而降低性能。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS01009"></a><div class="props_rev_3"><a id="GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691" name="GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691"></a><h3 id="ADFNS-GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691" class="sect3">使用DBMS_FLASHBACK包</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">DBMS_FLASHBACK</code>包提供与Oracle闪回查询相同的功能，但Oracle闪回查询有时更方便。
                     </p>
                     <p><code class="codeph">DBMS_FLASHBACK</code>包充当时间机器：您可以转回时钟，执行正常查询，就像您在较早时间一样，然后返回到当前。因为您可以使用<code class="codeph">DBMS_FLASHBACK</code>包来执行对过去数据的查询而不需要<code class="codeph">AS</code> <code class="codeph">OF</code>或<code class="codeph">VERSIONS</code> <code class="codeph">BETWEEN</code>类的特殊子句，所以您可以重用现有的PL / SQL代码来提前查询数据库。
                     </p>
                     <p>您必须具有<code class="codeph">DBMS_FLASHBACK</code>包的<code class="codeph">EXECUTE</code>特权。
                     </p>
                     <p>要在PL / SQL代码中使用<code class="codeph">DBMS_FLASHBACK</code>包：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>通过调用<code class="codeph">DBMS_FLASHBACK</code>指定过去时间。 <code class="codeph">ENABLE_AT_TIME</code>或<code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">ENABLE_AT_SYSTEM_CHANGE_NUMBER</code> 。</span></li>
                     <li class="stepexpand"><span>执行常规查询（即没有特殊闪回功能语法的查询，例如<code class="codeph">AS</code> <code class="codeph">OF</code> ）。不要执行DDL或DML操作。</span><div>
                           <p>在指定的过去时间查询数据库。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>通过调用<code class="codeph">DBMS_FLASHBACK.DISABLE</code>返回到当前。</span><div>
                           <p>您必须调用<code class="codeph">DBMS_FLASHBACK</code> 。在调用<code class="codeph">DBMS_FLASHBACK</code>之前<code class="codeph">DISABLE</code> 。 <code class="codeph">ENABLE_AT_TIME</code>或<code class="codeph">DBMS_FLASHBACK</code> 。再次<code class="codeph">ENABLE_AT_SYSTEM_CHANGE_NUMBER</code> 。您无法嵌套启用/禁用对。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>要使用游标存储查询结果，请在调用<code class="codeph">DBMS_FLASHBACK</code>之前打开游标。 <code class="codeph">DISABLE</code> 。存储结果并调用<code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">DISABLE</code> ，你可以：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行<code class="codeph">INSERT</code>或<code class="codeph">UPDATE</code>操作以使用过去存储的结果修改当前数据库状态。
                           </p>
                        </li>
                        <li>
                           <p>将当前数据与过去的数据进行比较。在调用<code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">DISABLE</code> ，打开第二个光标。从第一个光标获取以检索过去的数据;从第二个光标获取以检索当前数据。您可以将过去的数据存储在临时表中，然后使用集合运算符（如<code class="codeph">MINUS</code>或<code class="codeph">UNION</code>来对比或组合过去和当前数据。
                           </p>
                        </li>
                     </ul>
                     <p>您可以调用<code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">GET_SYSTEM_CHANGE_NUMBER</code>随时可以获取当前的系统变更编号（SCN）。<code class="codeph">DBMS_FLASHBACK</code> 。无论先前的<code class="codeph">DBMS_FLASHBACK</code>调用如何， <code class="codeph">GET_SYSTEM_CHANGE_NUMBER</code>返回当前的SCN。 <code class="codeph">ENABLE</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-AE6515D5-F5F5-46BF-85D8-EB9349737691__GUID-EDCCFEAF-536C-4139-B996-1BBDBB891FE4">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">DBMS_FLASHBACK</code>包的详细信息，请<code class="codeph">DBMS_FLASHBACK</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS142" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADFNS1073"></a><a id="ADFNS1010"></a><div class="props_rev_3"><a id="GUID-43425A2F-5932-4310-B387-C08D5331A74F" name="GUID-43425A2F-5932-4310-B387-C08D5331A74F"></a><h3 id="ADFNS-GUID-43425A2F-5932-4310-B387-C08D5331A74F" class="sect3">使用闪回事务</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">TRANSACTION_BACKOUT</code>过程在数据库保持联机时回滚事务及其相关事务。此恢复操作使用撤消数据来创建和运行将受影响的数据恢复到其原始状态的<span class="bold">补偿事务</span> 。
                     </p>
                     <p>正在回滚的交易受以下限制：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>他们不能执行改变数据库表逻辑结构的DDL操作。</p>
                        </li>
                        <li>
                           <p>他们不能使用大对象（LOB）数据类型：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">BFILE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">BLOB</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CLOB</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">NCLOB</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>他们无法使用LogMiner不支持的功能。</p>
                           <p>LogMiner支持的功能取决于回滚事务的数据库的<code class="codeph">COMPATIBLE</code>初始化参数的值。默认值是最新主要版本的版本号。
                           </p>
                           <p>闪回事务从LogMiner继承SQL数据类型支持。因此，如果LogMiner因事务中的SQL数据类型不受支持而失败，则Flashback Transaction也会失败。</p>
                           <p>虽然LogMiner支持某些数据类型，但不会生成撤消信息，作为修改此类类型列的操作的一部分。因此，闪回事务不支持包含这些数据类型的表。这些包括具有BLOB，CLOB和XML类型的表。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-43425A2F-5932-4310-B387-C08D5331A74F__GUID-A08AFCA6-0CAF-49E3-A9B6-946A8C5780D3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关逻辑备用数据库上的数据类型和DDL支持的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SBYDB00305" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                           </li>
                           <li>
                              <p>有关LOB数据类型的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF50994" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关LogMiner的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SUTIL019" target="_blank"><span class="italic">Oracle数据库实用程序</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">COMPATIBLE</code>初始化参数的信息，请<code class="codeph">COMPATIBLE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11112" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-43425A2F-5932-4310-B387-C08D5331A74F__GUID-16F4E208-C19E-475E-998B-65D41E225B80">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="flashback.html#GUID-94AF779C-E12E-4953-B25A-5370EFE3A279">依赖交易</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648">TRANSACTION_BACKOUT参数</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46">TRANSACTION_BACKOUT报告</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS1074"></a><div class="props_rev_3"><a id="GUID-94AF779C-E12E-4953-B25A-5370EFE3A279" name="GUID-94AF779C-E12E-4953-B25A-5370EFE3A279"></a><h4 id="ADFNS-GUID-94AF779C-E12E-4953-B25A-5370EFE3A279" class="sect4">依赖交易</h4>
                  <div>
                     <p>在闪回事务的上下文中，事务2可以通过以下任何方式依赖于事务1：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">写后写依赖性</span></p>
                           <p>事务1更改表的一行，稍后事务2更改同一行。</p>
                        </li>
                        <li>
                           <p><span class="bold">主键依赖</span></p>
                           <p>表在列c上具有主键约束。在表的一行中，列c具有值v。事务1删除该行，稍后事务2将行插入同一表中，将值v分配给列c。</p>
                        </li>
                        <li>
                           <p><span class="bold">外键依赖</span></p>
                           <p>在表b中，列b1对表a的列a1具有外键约束。事务1更改a1中的值，稍后事务2更改b1中的值。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS627"></a><a id="ADFNS626"></a><div class="props_rev_3"><a id="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648" name="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648"></a><h4 id="ADFNS-GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648" class="sect4">TRANSACTION_BACKOUT参数</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_BACKOUT</code>过程的参数是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要撤消的事务数</p>
                           </li>
                           <li>
                              <p>要撤消的事务列表，按名称或XID标识</p>
                           </li>
                           <li>
                              <p>时间提示，如果您按名称识别交易</p>
                              <p>指定早于任何已启动事务的时间。</p>
                           </li>
                           <li>
                              <p><a href="flashback.html#GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648__G4913725" title="此表总结了Flashback TRANSACTION_BACKOUT选项。">表19-2中的</a>退出选项</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648__G4913725">
                        <p class="titleintable">表19-2闪回TRANSACTION_BACKOUT选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="闪回TRANSACTION_BACKOUT选项" width="100%" border="1" summary="This table summarizes the Flashback TRANSACTION_BACKOUT options." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d111972e3761">选项</th>
                                 <th align="left" valign="bottom" width="74%" id="d111972e3764">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3769" headers="d111972e3761 ">
                                    <p><code class="codeph">级联</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3769 d111972e3764 ">
                                    <p>以后序方式退回指定的事务和所有相关事务（即，在父项退出之前退出子项）。</p>
                                    <p>如果没有<code class="codeph">CASCADE</code> ，如果未指定任何相关事务，则会发生错误。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3782" headers="d111972e3761 ">
                                    <p><code class="codeph">NOCASCADE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3782 d111972e3764 ">
                                    <p>默认。退出指定的事务，这些事务预计没有依赖事务。第一个从属事务导致错误并出现在<code class="codeph">*_FLASHBACK_TXN_REPORT</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3793" headers="d111972e3761 ">
                                    <p><code class="codeph">NOCASCADE_FORCE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3793 d111972e3764 ">
                                    <p>退出指定的事务，忽略从属事务。服务器以提交时间的相反顺序运行指定事务的撤消SQL语句。</p>
                                    <p>如果没有约束中断并且您对结果感到满意，则可以提交更改;否则，你可以回滚它们。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d111972e3803" headers="d111972e3761 ">
                                    <p><code class="codeph">NONCONFLICT_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d111972e3803 d111972e3764 ">
                                    <p>回退对指定事务的非冲突行的更改。数据库保持一致，但事务原子性丢失。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_BACKOUT</code>分析事务依赖关系，执行DML操作并生成报告。<code class="codeph">TRANSACTION_BACKOUT</code>不提交它作为事务回退的一部分执行的DML操作，但它以正确的形式保存行和表上的所有必需锁，防止其他依赖项进入系统。要使事务撤销永久，您必须显式提交事务。
                        </p>
                        <div class="infoboxnotealso" id="GUID-E7E19FDE-2F69-4F9E-95A7-69BE906DC648__FORTHESYNTAXOFTHETRANSACTION_BACKOU-CAF3EA82">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS66407" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>了解<code class="codeph">TRANSACTION_BACKOUT</code>过程的语法和详细参数说明</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS628"></a><div class="props_rev_3"><a id="GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46" name="GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46"></a><h4 id="ADFNS-GUID-B1449BF8-678C-4AB5-96EB-884AE428BD46" class="sect4">TRANSACTION_BACKOUT报告</h4>
                  <div>
                     <div class="section">
                        <p>要查看<code class="codeph">TRANSACTION_BACKOUT</code>生成的报告，请查询静态数据字典视图<code class="codeph">*_FLASHBACK_TXN_STATE</code>和<code class="codeph">*_FLASHBACK_TXN_REPORT</code> 。</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS629"></a><div class="props_rev_3"><a id="GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113" name="GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113"></a><h5 id="ADFNS-GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113" class="sect5">* _FLASHBACK_TXN_STATE</h5>
                     <div>
                        <div class="section">
                           <p>静态数据字典视图<code class="codeph">*_FLASHBACK_TXN_STATE</code>显示事务是处于活动状态还是已退出。如果此视图中显示某个事务，则会将其撤消。
                           </p>
                           <p><code class="codeph">*_FLASHBACK_TXN_STATE</code>以原子方式维护以补偿交易。如果<code class="codeph">*_FLASHBACK_TXN_STATE</code>补偿事务，则还会<code class="codeph">*_FLASHBACK_TXN_STATE</code>所做的所有更改，并且<code class="codeph">*_FLASHBACK_TXN_STATE</code>反映此情况。例如，如果补偿交易<code class="codeph">ct</code>支持交易<code class="codeph">t1</code>和<code class="codeph">t2</code> ，则<code class="codeph">t1</code>和<code class="codeph">t2</code>出现在<code class="codeph">*_FLASHBACK_TXN_STATE</code> 。如果稍后退出<code class="codeph">ct</code>本身，则恢复<code class="codeph">t1</code>和<code class="codeph">t2</code>的效果，并且<code class="codeph">t1</code>和<code class="codeph">t2</code>从<code class="codeph">*_FLASHBACK_TXN_STATE</code>消失。</p>
                           <div class="infoboxnotealso" id="GUID-86D7C7BA-0542-45B6-9D43-3BD13C975113__GUID-09C7540E-7068-46E7-9AB5-27851262264A">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">*_FLASHBACK_TXN_STATE</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23588" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS630"></a><div class="props_rev_3"><a id="GUID-789658E2-21E6-4301-97CF-FC722F3445D5" name="GUID-789658E2-21E6-4301-97CF-FC722F3445D5"></a><h5 id="ADFNS-GUID-789658E2-21E6-4301-97CF-FC722F3445D5" class="sect5">* _FLASHBACK_TXN_REPORT</h5>
                     <div>
                        <div class="section">
                           <p>静态数据字典视图<code class="codeph">*_FLASHBACK_TXN_REPORT</code>为每个退出的事务提供详细的报告。
                           </p>
                           <div class="infoboxnotealso" id="GUID-789658E2-21E6-4301-97CF-FC722F3445D5__GUID-F4399864-CFBB-4391-8166-BA1FFCD4399A">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">*_FLASHBACK_TXN_REPORT</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23587" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1075"></a><a id="ADFNS01011"></a><div class="props_rev_3"><a id="GUID-06AA782A-3F79-4235-86D5-2D136485F093" name="GUID-06AA782A-3F79-4235-86D5-2D136485F093"></a><h3 id="ADFNS-GUID-06AA782A-3F79-4235-86D5-2D136485F093" class="sect3">使用闪回数据存档</h3>
               <div>
                  <div class="section">
                     <p>闪回数据存档提供了在表的生命周期内跟踪和存储表的事务更改的功能。闪回数据存档对于遵守记录阶段策略和审计报告非常有用。</p>
                     <p>闪回数据存档由一个或多个表空间或其部分组成。您可以拥有多个闪回数据存档。如果以<code class="codeph">SYSDBA</code>身份登录，则可以为系统指定默认的闪回数据存档。闪回数据存档配置了保留时间。在闪回数据存档中存档的数据将保留创建闪回数据存档时指定的保留时间。
                     </p>
                     <p>默认情况下，不为任何表启用闪回数据存档。如果满足所有这些条件，则可以为表启用闪回数据存档：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您具有闪回数据存档的<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>对象权限，可用于该表。
                           </p>
                        </li>
                        <li>
                           <p>该表不是嵌套的，临时的，远程的或外部的。</p>
                        </li>
                        <li>
                           <p>该表既不包含<code class="codeph">LONG</code>也不包含嵌套列。
                           </p>
                        </li>
                        <li>
                           <p>该表不使用任何这些闪回数据存档保留字作为列名：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">STARTSCN</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">ENDSCN</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">RID</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">XID</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">OP</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">操作</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>您无法在嵌套表，临时表，外部表，物化视图，高级查询（AQ）表或非表对象上启用闪回数据存档。</p>
                     <p>为表启用闪回数据存档后，只有具有<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code>系统特权或以<code class="codeph">SYSDBA</code>身份登录时才能禁用它。</p>
                     <p>为特定表选择闪回数据存档时，请考虑表的数据保留要求以及具有<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>对象权限的闪回数据存档的保留时间。
                     </p>
                     <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.1）开始，闪回数据存档已得到增强，包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">用户上下文跟踪</span> 。用于跟踪事务的元数据信息可以包括（如果该特征被启用）用户上下文，这使得更容易确定哪个用户对表进行了哪些更改。
                           </p>
                           <p>要设置用户上下文级别（确定要保存多少用户上下文），请使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS74566" target="_blank"><code class="codeph">DBMS_FLASHBACK_ARCHIVE.SET_CONTEXT_LEVEL</code></a>过程。要访问上下文信息，请使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS74555" target="_blank"><code class="codeph">DBMS_FLASHBACK_ARCHIVE.GET_SYS_CONTEXT</code></a>函数。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">数据库强化</span> 。此功能使您可以在“应用程序”中将一组表关联在一起，然后使用单个命令在所有这些表上启用闪回数据存档。此外，数据库强化使您可以使用单个命令锁定所有表，从而防止这些表上的任何DML，直到它们随后被解锁。数据库强化旨在使闪回数据存档更容易使用，以跟踪和保护应用程序的安全敏感表。
                           </p>
                           <p>要注册数据库强化的应用程序，请使用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS74562" target="_blank"><code class="codeph">DBMS_FLASHBACK_ARCHIVE.REGISTER_APPLICATION</code></a>过程，该过程在<span class="italic">Oracle Database PL / SQL包和类型参考中进行了描述</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-06AA782A-3F79-4235-86D5-2D136485F093__GUID-FD8940DD-95FA-407F-AF49-EC8E4A5566B7">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="flashback.html#GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308">创建闪回数据存档</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037">改变闪回数据档案</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-5E8447E3-3122-47C8-A791-125D784C51FC">删除闪回数据存档</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-51570960-CB42-4A13-BE80-00EB84E765B0">指定默认闪回数据存档</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41">启用和禁用闪回数据存档</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D">表格上的DDL语句为闪回数据存档启用</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F">查看闪回数据存档数据</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-3386EBA7-91D8-432A-B92F-F1546700FE08">闪回数据存档方案</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-06AA782A-3F79-4235-86D5-2D136485F093__NOTE-1342-CAF66260">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">DBMS_FLASHBACK_ARCHIVE</code>包的更多信息，请<code class="codeph">DBMS_FLASHBACK_ARCHIVE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS72463" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS632"></a><a id="ADFNS631"></a><div class="props_rev_3"><a id="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308" name="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308"></a><h4 id="ADFNS-GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308" class="sect4">创建闪回数据存档</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句创建闪回数据存档，指定：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>闪回数据存档的名称</p>
                           </li>
                           <li>
                              <p>闪回数据存档的第一个表空间的名称</p>
                           </li>
                           <li>
                              <p>（可选）闪回数据存档可在第一个表空间中使用的最大空间量</p>
                              <p>默认值是无限制的。除非第一个表空间的空间配额也是无限制的，否则必须指定此值;否则，出现错误ORA-55621。</p>
                           </li>
                           <li>
                              <p>保留时间（保证存储表的闪回数据存档数据的天数）</p>
                           </li>
                           <li>
                              <p>（可选）是否使用<code class="codeph">[NO]</code> <code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code> <code class="codeph">OPTIMIZE</code>闪回数据存档中维护的历史表中的<code class="codeph">DATA</code> 。</p>
                              <p>默认值为<code class="codeph">NO</code> <code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code> 。</p>
                           </li>
                        </ul>
                        <p>如果以<code class="codeph">SYSDBA</code>身份登录，则还可以指定这是系统的默认闪回数据存档。如果省略此选项，您仍可以在以后将此闪回数据存档设为默认值。
                        </p>
                        <p>Oracle建议所有必须使用闪回数据存档的用户在闪回数据存档表空间上具有无限制的配额;但是，如果不是这种情况，则必须在该表空间上为这些用户授予足够的配额。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308__GUID-4773BC71-C8BC-4CFB-B0F1-077FB00B6C66">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建一个名为<code class="codeph">fla1</code>的默认闪回数据存档，它使用最多10 G的表空间<code class="codeph">tbs1</code> ，其数据保留一年：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK ARCHIVE DEFAULT fla1 TABLESPACE tbs1 QUOTA 10G保留1年;</pre></li>
                           <li>
                              <p>创建一个名为<code class="codeph">fla2</code>的闪回数据存档，它使用表空间<code class="codeph">tbs2</code> ，其数据保留两年：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK ARCHIVE fla2 TABLESPACE tbs2保留2年;</pre></li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-28F62D88-B5DF-4A09-9D72-6605F9A56308__NOTE-1243-CAF81924">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20008" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="flashback.html#GUID-51570960-CB42-4A13-BE80-00EB84E765B0">指定默认闪回数据存档</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS634"></a><a id="ADFNS633"></a><div class="props_rev_3"><a id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037" name="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037"></a><h4 id="ADFNS-GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037" class="sect4">改变闪回数据档案</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句，您可以：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>更改闪回数据存档的保留时间</p>
                           </li>
                           <li>
                              <p>清除部分或全部数据</p>
                           </li>
                           <li>
                              <p>添加，修改和删除表空间</p>
                              <div class="infoboxnote" id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037__GUID-38D3C1BE-8AB8-4FA4-8E72-AFB53201CE20">
                                 <p class="notep1">注意：</p>
                                 <p>删除闪回数据存档的所有表空间会导致错误。</p>
                              </div>
                           </li>
                        </ul>
                        <p>如果以<code class="codeph">SYSDBA</code>身份登录，还可以使用<code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句将特定文件作为系统的默认闪回数据存档。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037__GUID-25121B22-97F7-4AA9-B7E3-882F0DD13112">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使闪回数据存档<code class="codeph">fla1</code>成为默认的闪回数据存档：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 SET DEFAULT;</pre></li>
                           <li>
                              <p>要闪回数据存档<code class="codeph">fla1</code> ，最多可添加5 G表空间<code class="codeph">tbs3</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1添加TABLESPACE tbs3 QUOTA 5G;</pre></li>
                           <li>
                              <p>要闪回数据存档<code class="codeph">fla1</code> ，根据需要添加尽可能多的表空间<code class="codeph">tbs4</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 ADD TABLESPACE tbs4;</pre></li>
                           <li>
                              <p>将闪回数据存档<code class="codeph">fla1</code>在表空间<code class="codeph">tbs3</code>可以使用的最大空间更改为20 G：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 MODIFY TABLESPACE tbs3 QUOTA 20G;</pre></li>
                           <li>
                              <p>允许闪回数据存档<code class="codeph">fla1</code>根据需要使用尽可能多的表空间<code class="codeph">tbs1</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 MODIFY TABLESPACE tbs1;</pre></li>
                           <li>
                              <p>将闪回数据存档<code class="codeph">fla1</code>的保留时间更改为两年：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 MODIFY RETENTION 2年;</pre></li>
                           <li>
                              <p>从闪回数据存档<code class="codeph">fla1</code>删除表空间<code class="codeph">tbs2</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1删除TABLESPACE tbs2;</pre><p>（表空间<code class="codeph">tbs2</code>不会被删除。）
                              </p>
                           </li>
                           <li>
                              <p>清除闪回数据存档<code class="codeph">fla1</code>所有历史数据：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 PURGE ALL;</pre></li>
                           <li>
                              <p>清除闪回数据存档<code class="codeph">fla1</code>超过一天的所有历史数据：</p><pre class="oac_no_warn" dir="ltr">在TIMESTAMP之前清洗FLASHBACK ARCHIVE fla1（SYSTIMESTAMP  -  INTERVAL'1'天）;</pre></li>
                           <li>
                              <p>从闪回数据存档<code class="codeph">fla1</code>清除所有早于SCN 728969的历史数据：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1在SCN 728969之前清除;</pre></li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-FC792CEF-8F8C-4FC4-91A4-ED5CD4321037__FORMOREINFORMATIONABOUTTHEALTERFLAS-CAF873C3">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20009" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS636"></a><a id="ADFNS635"></a><div class="props_rev_3"><a id="GUID-5E8447E3-3122-47C8-A791-125D784C51FC" name="GUID-5E8447E3-3122-47C8-A791-125D784C51FC"></a><h4 id="ADFNS-GUID-5E8447E3-3122-47C8-A791-125D784C51FC" class="sect4">删除闪回数据存档</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句删除闪回数据存档。删除闪回数据存档会删除其历史数据，但不会删除其表空间。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5E8447E3-3122-47C8-A791-125D784C51FC__GUID-0635D20D-C12E-4FA7-9EE6-F2BA23CD3014">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>删除闪回数据存档<code class="codeph">fla1</code>及其所有历史数据，但不删除其表空间：</p><pre class="oac_no_warn" dir="ltr">DROP FLASHBACK ARCHIVE fla1;</pre><p>有关<code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句的详细信息，请<a href="../sqlrf/DROP-FLASHBACK-ARCHIVE.html#SQLRF20010" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS637"></a><div class="props_rev_3"><a id="GUID-51570960-CB42-4A13-BE80-00EB84E765B0" name="GUID-51570960-CB42-4A13-BE80-00EB84E765B0"></a><h4 id="ADFNS-GUID-51570960-CB42-4A13-BE80-00EB84E765B0" class="sect4">指定默认闪回数据存档</h4>
                  <div>
                     <div class="section">
                        <p>默认情况下，系统没有默认的闪回数据存档。如果以<code class="codeph">SYSDBA</code>身份登录，则可以通过以下任一方式指定默认闪回数据存档：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句的<code class="codeph">SET</code> <code class="codeph">DEFAULT</code>子句中指定现有闪回数据存档的名称。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER FLASHBACK ARCHIVE fla1 SET DEFAULT;</pre><p>如果<code class="codeph">fla1</code>不存在，则会发生错误。
                              </p>
                           </li>
                           <li>
                              <p>创建闪回数据存档时，在<code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句中包含<code class="codeph">DEFAULT</code> 。例如：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK ARCHIVE DEFAULT fla2 TABLESPACE tbs1 QUOTA 10G保留1年;</pre></li>
                        </ul>
                        <p>对于没有自己的默认闪回数据存档的每个用户，系统的默认闪回数据存档是默认的闪回数据存档。</p>
                        <div class="infoboxnotealso" id="GUID-51570960-CB42-4A13-BE80-00EB84E765B0__GUID-3AD582E6-8D71-474C-9FD9-4E9380847AEF">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>语句的更多信息，请<a href="../sqlrf/CREATE-FLASHBACK-ARCHIVE.html#SQLRF20008" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>语句的更多信息，请<a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS639"></a><a id="ADFNS638"></a><div class="props_rev_3"><a id="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41" name="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41"></a><h4 id="ADFNS-GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41" class="sect4">启用和禁用闪回数据存档</h4>
                  <div>
                     <div class="section">
                        <p>默认情况下，对任何表禁用闪回数据存档。如果您具有要用于该表的闪回数据存档的<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>对象权限，则可以为表启用闪回数据存档。
                        </p>
                        <p>要为表启用闪回数据存档，请在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中包含<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>子句。在<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>子句中，您可以指定存储表的历史数据的闪回数据存档。默认值是系统的默认闪回数据存档。如果指定不存在的闪回数据存档，则会发生错误。
                        </p>
                        <p>如果为表启用闪回数据存档，但禁用了AUM，则在尝试修改表时会出现错误ORA-55614。</p>
                        <p>如果某个表启用了闪回数据存档，并且您尝试使用其他闪回数据存档再次启用它，则会发生错误。</p>
                        <p>为表启用闪回数据存档后，只有具有<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> <code class="codeph">ADMINISTER</code>系统特权或以<code class="codeph">SYSDBA</code>身份登录时才能禁用它。要为表禁用闪回数据存档，请在<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句中指定<code class="codeph">NO</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> 。（没有必要在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句中指定<code class="codeph">NO</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code> ，因为这是默认值。）
                        </p>
                        <p>在表上启用闪回数据存档后，Oracle建议在将数据插入表之前等待至少20秒，并等待最多5分钟后再使用表上的闪回查询。</p>
                        <div class="infoboxnotealso" id="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41__GUID-358FA1FA-3A42-48CE-B66B-31F757CDCD10">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句的<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>子句的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF30014" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ，包括对其使用的限制</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CF548A0-FA45-45B2-87CE-9F6F17ED1A41__GUID-56D00A7D-1967-4633-9AD3-9BAE3B7D7514">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建表<code class="codeph">employee</code>并将历史数据存储在默认的闪回数据存档中：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee（EMPNO NUMBER（4）NOT NULL，ENAME VARCHAR2（10），JOB VARCHAR2（9），MGR NUMBER（4））FLASHBACK ARCHIVE;</pre></li>
                           <li>
                              <p>创建表<code class="codeph">employee</code>并将历史数据存储在闪回数据存档<code class="codeph">fla1</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee（EMPNO NUMBER（4）NOT NULL，ENAME VARCHAR2（10），JOB VARCHAR2（9），MGR NUMBER（4））FLASHBACK ARCHIVE fla1;</pre></li>
                           <li>
                              <p>为表<code class="codeph">employee</code>启用闪回数据存档，并将历史数据存储在默认的闪回数据存档中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工FLASHBACK ARCHIVE;</pre></li>
                           <li>
                              <p>为表<code class="codeph">employee</code>启用闪回数据存档并将历史数据存储在闪回数据存档<code class="codeph">fla1</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工FLASHBACK ARCHIVE fla1;</pre></li>
                           <li>
                              <p>禁用表<code class="codeph">employee</code>闪回数据存档：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工没有FLASHBACK ARCHIVE;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS640"></a><div class="props_rev_3"><a id="GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D" name="GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D"></a><h4 id="ADFNS-GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D" class="sect4">表格上的DDL语句为闪回数据存档启用</h4>
                  <div>
                     <p>闪回数据存档仅支持以下DDL语句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行以下任何操作的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>添加，删除，重命名或修改列</p>
                              </li>
                              <li>
                                 <p>添加，删除或重命名约束</p>
                              </li>
                              <li>
                                 <p>删除或截断分区或子分区操作</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句</p>
                        </li>
                        <li>
                           <p>重命名表的<code class="codeph">RENAME</code>语句</p>
                        </li>
                     </ul>
                     <p>闪回数据存档不支持移动，拆分，合并或合并分区或子分区，移动表或将<code class="codeph">LONG</code>列转换为<code class="codeph">LOB</code>列的DDL语句。
                     </p>
                     <p>例如，以下DDL语句在为闪回数据存档启用的表上使用时会导致错误ORA-55610：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句，包含<code class="codeph">UPGRADE</code> <code class="codeph">TABLE</code>子句，包含或不包含<code class="codeph">INCLUDING</code> <code class="codeph">DATA</code>子句</p>
                        </li>
                        <li>
                           <p>移动或交换分区或子分区操作的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句</p>
                        </li>
                        <li>
                           <p><code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句</p>
                        </li>
                     </ul>
                     <p>如果必须在为闪回数据存档启用的表上使用不受支持的DDL语句，请使用<code class="codeph">DBMS_FLASHBACK_ARCHIVE</code> 。 <code class="codeph">DISASSOCIATE_FBA</code>过程将基表与其闪回数据存档解除关联。要在之后将闪回数据存档与基表重新关联，请使用<code class="codeph">DBMS_FLASHBACK_ARCHIVE</code> 。 <code class="codeph">REASSOCIATE_FBA</code>程序。另外，要删除为闪回数据存档启用的表，必须首先使用<code class="codeph">ALTER TABLE ...禁用表上的闪回数据存档<code class="codeph">ALTER TABLE ...NO FLASHBACK ARCHIVE</code>子句。
                     </p>
                     <div class="infoboxnotealso" id="GUID-D01864A9-C642-4EDF-9EB0-796020A26F2D__GUID-8E5FB68C-F9B0-40E1-876F-430760618AE3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01707" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">RENAME</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01608" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句的信息，请<a href="../sqlrf/DROP-TABLE.html#SQLRF01806" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">DBMS_FLASHBACK_ARCHIVE</code>包的信息，请<code class="codeph">DBMS_FLASHBACK_ARCHIVE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS72463" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS642"></a><a id="ADFNS641"></a><div class="props_rev_3"><a id="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F" name="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F"></a><h4 id="ADFNS-GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F" class="sect4">查看闪回数据存档数据</h4>
                  <div>
                     <div class="section">
                        <p><a href="flashback.html#GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F__BJFJFFJD" title="此表汇总了显示有关闪回数据存档的信息的静态数据字典视图。">表19-3</a>列出并简要描述了可以查询有关闪回数据存档文件的静态数据字典视图。
                        </p>
                        <div class="tblformal" id="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F__BJFJFFJD">
                           <p class="titleintable">表19-3闪回数据存档文件的静态数据字典视图</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="闪回数据存档文件的静态数据字典视图" width="100%" border="1" summary="This table summarizes the static data dictionary views that display information about Flashback Data Archives." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="39%" id="d111972e5893">视图</th>
                                    <th align="left" valign="bottom" width="61%" id="d111972e5896">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d111972e5901" headers="d111972e5893 ">
                                       <p><code class="codeph">* _FLASHBACK_ARCHIVE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d111972e5901 d111972e5896 ">
                                       <p>显示有关闪回数据存档文件的信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d111972e5909" headers="d111972e5893 ">
                                       <p><code class="codeph">* _FLASHBACK_ARCHIVE_TS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d111972e5909 d111972e5896 ">
                                       <p>显示闪回数据存档文件的表空间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d111972e5917" headers="d111972e5893 ">
                                       <p><code class="codeph">* _FLASHBACK_ARCHIVE_TABLES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d111972e5917 d111972e5896 ">
                                       <p>显示有关为数据闪回存档文件启用的表的信息。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-CDD50508-CCFA-4A15-8512-63DB2AA1984F__GUID-8F1FC4B2-CE16-471C-BDB4-3F8ACF434625">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">*_FLASHBACK_ARCHIVE</code>详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN26719" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">*_FLASHBACK_ARCHIVE_TS</code>详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23720" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">*_FLASHBACK_ARCHIVE_TABLES</code>详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN26715" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS643"></a><div class="props_rev_3"><a id="GUID-3386EBA7-91D8-432A-B92F-F1546700FE08" name="GUID-3386EBA7-91D8-432A-B92F-F1546700FE08"></a><h4 id="ADFNS-GUID-3386EBA7-91D8-432A-B92F-F1546700FE08" class="sect4">闪回数据存档方案</h4>
                  <div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="flashback.html#GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687">场景：使用闪回数据存档实施数字碎化</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3">场景：使用闪回数据存档访问历史数据</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443">场景：使用闪回数据存档生成报告</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-AEB6257D-3277-4740-A576-08F275A75C42">场景：使用闪回数据存档进行审计</a></p>
                        </li>
                        <li>
                           <p><a href="flashback.html#GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA">场景：使用闪回数据存档来恢复数据</a></p>
                        </li>
                     </ul>
                  </div><a id="ADFNS644"></a><div class="props_rev_3"><a id="GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687" name="GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687"></a><h5 id="ADFNS-GUID-4BB5C910-ADEC-4975-9D87-F8003EC9C687" class="sect5">场景：使用闪回数据存档实施数字碎化</h5>
                     <div>
                        <p>您的公司希望在十年后将历史数据更改“粉碎”（删除）到“ <code class="codeph">Taxes</code>表中。在为<code class="codeph">Taxes</code>创建闪回数据存档时，您指定的保留时间为十年：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK ARCHIVE tax_archive TABLESPACE tbs1保留10年;</pre><p>当<code class="codeph">Taxes</code>交易的历史数据超过十年时，它被清除。（ <code class="codeph">Taxes</code>表本身以及来自不到十年的交易的历史数据不会被清除。）
                        </p>
                     </div>
                  </div><a id="ADFNS645"></a><div class="props_rev_3"><a id="GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3" name="GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3"></a><h5 id="ADFNS-GUID-ED0F756B-99FA-4B2F-94B5-744687EDB0F3" class="sect5">场景：使用闪回数据存档访问历史数据</h5>
                     <div>
                        <p>您希望能够从表格<code class="codeph">inventory</code>中检索年初所有项目的<code class="codeph">inventory</code> ，并且能够在一年中任何指定日期的业务结束时检索投资组合中每个符号的股票价格。从表<code class="codeph">stock_data</code> 。
                        </p>
                        <p>创建一个名为<code class="codeph">fla1</code>的默认闪回数据存档，它使用最多10 G的表空间<code class="codeph">tbs1</code> ，其数据保留五年（您必须以<code class="codeph">SYSDBA</code>身份登录）：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK存档默认fla1 TABLESPACE tbs1 QUOTA 10G保留5年;</pre><p>为表<code class="codeph">inventory</code>和<code class="codeph">stock_data</code>启用闪回数据存档，并将历史数据存储在默认的闪回数据存档中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE库存FLASHBACK ARCHIVE; ALTER TABLE stock_data FLASHBACK ARCHIVE;</pre><p>要检索2007年年初所有项目的清单，请使用以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT product_number，product_name，count FROM Inventory OF TIMESTAMP TO_TIMESTAMP（'2007-01-01 00:00:00'，'YYYY-MM-DD HH24：MI：SS'）;</pre><p>要在2007年7月23日营业结束时检索投资组合中每个符号的股票价格，请使用以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT符号，stock_price FROM stock_data AS OF TIMESTAMP TO_TIMESTAMP（'2007-07-23 16:00:00'，'YYYY-MM-DD HH24：MI：SS'）WHERE symbol in my_portfolio;</pre></div>
                  </div><a id="ADFNS646"></a><div class="props_rev_3"><a id="GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443" name="GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443"></a><h5 id="ADFNS-GUID-74B7EA4F-CF41-4633-A24E-66F7B89C6443" class="sect5">场景：使用闪回数据存档生成报告</h5>
                     <div>
                        <p>您希望用户能够从表<code class="codeph">investments</code>生成报告，以获取过去五年中存储的数据。
                        </p>
                        <p>创建一个名为<code class="codeph">fla2</code>的默认闪回数据存档，它使用最多20 G的表空间<code class="codeph">tbs1</code> ，其数据保留五年（您必须以<code class="codeph">SYSDBA</code>身份登录）：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK存档默认fla2 TABLESPACE tbs1 QUOTA 20G保留5年;</pre><p>为表<code class="codeph">investments</code>启用闪回数据存档，并将历史数据存储在默认闪回数据存档中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE投资FLASHBACK ARCHIVE;</pre><p>Lisa希望在2006年12月31日收盘时报告她的投资表现。她使用这个查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM投资AS TIMESTAMP TO_TIMESTAMP（'2006-12-31 16:00:00'，'YYYY-MM-DD HH24：MI：SS'）姓名='LISA';</pre></div>
                  </div><a id="ADFNS648"></a><div class="props_rev_3"><a id="GUID-AEB6257D-3277-4740-A576-08F275A75C42" name="GUID-AEB6257D-3277-4740-A576-08F275A75C42"></a><h5 id="ADFNS-GUID-AEB6257D-3277-4740-A576-08F275A75C42" class="sect5">场景：使用闪回数据存档进行审计</h5>
                     <div>
                        <p>医疗保险公司必须审核医疗诊所。这家医疗保险公司在<code class="codeph">Billings</code>表中提出了索赔，并创建了一个名为<code class="codeph">fla4</code>的默认闪回数据存档，它使用了多达100 G的表空间<code class="codeph">tbs1</code> ，其数据保留了10年：</p><pre class="oac_no_warn" dir="ltr">创建FLASHBACK存档默认fla4 TABLESPACE tbs1 QUOTA 100G保留10年;</pre><p>该公司为<code class="codeph">Billings</code>表启用闪回数据存档，并将历史数据存储在默认的闪回数据存档中：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE Billings FLASHBACK ARCHIVE;</pre><p>2007年5月1日，客户被收取了错误的金额用于某些诊断和测试。要查看截至2007年5月1日的记录，公司使用此查询：</p><pre class="oac_no_warn" dir="ltr">SELECT date_billed，amount_billed，patient_name，claim_Id，test_costs，诊断FROM Billings AS OF TIMESTAMP TO_TIMESTAMP（'2007-05-01 00:00:00'，'YYYY-MM-DD HH24：MI：SS'）;</pre></div>
                  </div><a id="ADFNS649"></a><div class="props_rev_3"><a id="GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA" name="GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA"></a><h5 id="ADFNS-GUID-E7372F07-2795-42CA-A1BC-8799CE8659AA" class="sect5">场景：使用闪回数据存档来恢复数据</h5>
                     <div>
                        <p>最终用户从先前在数据库中提交的错误事务中恢复。错误事务的撤消数据不再可用，但由于闪回数据存档中提供了所需的历史信息，因此闪回查询可以无缝地工作。</p>
                        <p>Lisa管理着一个软件开发团队，其产品销售情况良好。2007年11月3日，她决定给所有三年级员工，他们有超过两年的工作经验，加薪10％，晋升到四级。丽莎要求她的人力资源代表鲍勃做出改变。</p>
                        <p>使用HR Web应用程序，Bob更新<code class="codeph">employee</code>表，为Lisa的三级员工提高10％，将提升提升到四级。然后鲍勃完成了当天的工作并离开了家，没有意识到他在他的交易中省略了两年的经验要求。几天后，Lisa检查Bob是否已完成更新并发现该组中的每个人都获得加薪！她立即打电话给鲍勃并要求他纠正错误。
                        </p>
                        <p>起初，Bob认为他无法在不进行备份的情况下将employee表恢复到先前的状态。然后他记得<code class="codeph">employee</code>表启用了闪回数据存档。
                        </p>
                        <p>首先，他验证没有其他事务在他的后面修改了<code class="codeph">employee</code>表：两天前，来自事务查询的提交时间戳对应于Bob的事务。
                        </p>
                        <p>接下来，Bob使用这些语句将<code class="codeph">employee</code>表恢复为错误更改之前的状态：</p><pre class="oac_no_warn" dir="ltr">DELERE EMPLOYEE WHERE MANAGER ='LISA JOHNSON';插入员工选择*来自雇员的TIMESTAMP（SYSTIMESTAMP  -  INTERVAL'2'天），在那里经理='LISA JOHNSON';</pre><p>然后Bob重新执行Lisa请求的更新。</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS01012"></a><div class="props_rev_3"><a id="GUID-0DAA9454-D91A-46AC-A8E0-510670672F19" name="GUID-0DAA9454-D91A-46AC-A8E0-510670672F19"></a><h3 id="ADFNS-GUID-0DAA9454-D91A-46AC-A8E0-510670672F19" class="sect3">Oracle闪回技术的一般指南</h3>
               <div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">ENABLE</code>和<code class="codeph">DBMS_FLASHBACK</code> 。围绕您无法控制的SQL代码的<code class="codeph">DISABLE</code>过程，或者您希望在几个连续查询中使用相同的过去时间。
                        </p>
                     </li>
                     <li>
                        <p>为方便起见，请对您编写的SQL代码使用Oracle闪回查询，Oracle闪回版本查询或Oracle闪回事务查询。例如，Oracle闪回查询足够灵活，可以在单个查询中进行比较和存储结果。</p>
                     </li>
                     <li>
                        <p>要获得稍后使用闪回功能的SCN，请使用<code class="codeph">DBMS_FLASHBACK</code> 。 <code class="codeph">GET_SYSTEM_CHANGE_NUMBER</code> 。</p>
                     </li>
                     <li>
                        <p>要计算或检索要在查询中使用的过去时间，请使用函数返回值作为时间戳或SCN参数。例如，将<code class="codeph">INTERVAL</code>值添加或减去<code class="codeph">SYSTIMESTAMP</code>函数的值。
                        </p>
                     </li>
                     <li>
                        <p>在本地或远程使用Oracle闪回查询，Oracle闪回版本查询和Oracle闪回事务查询。远程Oracle闪回查询的示例是：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees @ some_remote_host AS OF TIMESTAMP（SYSTIMESTAMP  -  INTERVAL'60'MECUTE）;</pre></li>
                     <li>
                        <p>要确保数据库一致性，请在查询过去的数据之前执行<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>操作。
                        </p>
                     </li>
                     <li>
                        <p>请记住，所有闪回处理都使用当前会话设置，例如国家语言和字符集，而不是当前查询时生效的设置。</p>
                     </li>
                     <li>
                        <p>请记住，更改表结构的DDL（例如，删除/修改列，移动表，删除分区，截断表/分区和添加约束）会使表的任何现有撤消数据无效。如果您尝试从执行此DDL之前的时间检索数据，则会发生错误ORA-01466。更改表的存储属性（例如<code class="codeph">PCTFREE</code> ， <code class="codeph">INITRANS</code>和<code class="codeph">MAXTRANS</code> ）的DDL操作不会使撤消数据无效。
                        </p>
                     </li>
                     <li>
                        <p>要在精确时间查询过去的数据，请使用SCN。如果使用时间戳，则查询的实际时间可能比指定的时间早3秒。Oracle数据库在内部使用SCN，并以3秒的粒度将它们映射到时间戳。</p>
                        <p>例如，假设SCN值1000和1005分别映射到时间戳8:41 AM和8:46 AM。对8:41:00到8:45:59 AM之间的时间的查询映射到SCN 1000;上午8:46的Oracle闪回查询映射到SCN 1005。因此，如果指定DDL操作稍后的时间（例如创建表），Oracle数据库可能会使用紧接在DDL操作之前的SCN，从而导致错误ORA-01466。</p>
                     </li>
                     <li>
                        <p>您无法从动态性能（ <code class="codeph">V$</code> ）视图中检索过去的数据。对此类视图的查询将返回当前数据。
                        </p>
                     </li>
                     <li>
                        <p>您可以对静态数据字典视图中的过去数据执行查询，例如<code class="codeph">*_TABLES</code> 。</p>
                     </li>
                     <li>
                        <p>通过在创建或更改闪回数据存档时指定<code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code> ，可以为闪回数据存档维护的历史表启用数据存储优化。
                        </p>
                        <p><code class="codeph">OPTIMIZE</code> <code class="codeph">DATA</code>使用以下任何功能优化历史记录表中的数据存储：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>高级行压缩</p>
                           </li>
                           <li>
                              <p>高级LOB压缩</p>
                           </li>
                           <li>
                              <p>高级LOB重复数据删除</p>
                           </li>
                           <li>
                              <p>段级压缩分层</p>
                           </li>
                           <li>
                              <p>行级压缩分层</p>
                           </li>
                        </ul>
                        <p>默认情况下不是优化历史表中的数据存储。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-0DAA9454-D91A-46AC-A8E0-510670672F19__IMPORTINGUSER-GENERATEDHISTORYCANLE-09803154">
                     <p class="notep1">警告：</p>
                     <p>导入用户生成的历史记录可能会导致结果不准确或不可靠。只有在咨询Oracle支持后才能使用此过程。</p>
                  </div>
               </div>
            </div><a id="ADFNS01013"></a><div class="props_rev_3"><a id="GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA" name="GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA"></a><h3 id="ADFNS-GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA" class="sect3">Oracle闪回技术的性能指南</h3>
               <div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">DBMS_STATS</code>包为Oracle闪回查询中涉及的所有表生成统计信息。保持统计数据最新。Oracle闪回查询使用基于成本的优化器，该优化器依赖于这些统计信息。
                        </p>
                     </li>
                     <li>
                        <p>最小化必须访问的撤消数据量。使用查询使用索引选择过去数据的小组，而不是扫描整个表。如果必须扫描完整表，请在查询中添加并行提示。</p>
                        <p>I / O中的性能成本是数据中的分页成本和不在缓冲区高速缓存中的撤消块。CPU使用中的性能成本是将撤消信息应用于受影响的数据块的成本。在对最近的更改进行操作时，闪回操作受CPU限制。</p>
                        <p>Oracle建议您有足够的缓冲区缓存，以便归档程序的版本查询在缓冲区缓存中查找撤消数据。缓冲区缓存访问速度明显快于磁盘访问速度。</p>
                     </li>
                     <li>
                        <p>如果在跟踪表上执行非常大的事务（例如影响超过100万行），则将并行查询的大池大小设置得足够高（至少1 GB），而不必从SGA中分配新的块。</p>
                     </li>
                     <li>
                        <p>对于Oracle闪回版本查询，请使用索引结构。Oracle数据库保留用于索引更改和数据更改的撤消数据。基于索引查找的Oracle闪回版本查询的性能比其他需要的全表扫描快一个数量级。</p>
                     </li>
                     <li>
                        <p>在Oracle闪回事务查询中， <code class="codeph">xid</code>列的类型为<code class="codeph">RAW(8)</code> 。要利用<code class="codeph">xid</code>列上构建的索引，请使用<code class="codeph">HEXTORAW</code>转换函数： <code class="codeph">HEXTORAW(xid)</code> 。
                        </p>
                     </li>
                     <li>
                        <p>针对实例化视图的Oracle闪回查询不利用查询重写优化。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-B681D62C-E66C-4C77-A03B-2C2CE8FA49CA__NOTE-132-CAFE29F4">
                     <p class="notep1">也可以看看：</p>
                     <p>有关设置大池大小的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=TGDBA558" target="_blank"><span class="italic">参见“Oracle数据库性能调整指南”</span></a></p>
                  </div>
               </div>
            </div><a id="ADFNS98765"></a><div class="props_rev_3"><a id="GUID-DECBC705-B421-4861-A341-E07EBB883AC9" name="GUID-DECBC705-B421-4861-A341-E07EBB883AC9"></a><h3 id="ADFNS-GUID-DECBC705-B421-4861-A341-E07EBB883AC9" class="sect3">Oracle闪回技术的多租户容器数据库限制</h3>
               <div>
                  <p>这些Oracle闪回技术功能不适用于多租户容器数据库（CDB）：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.1），CDB不支持闪回数据存档（FDA）。</p>
                        <p>对于Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.2），此限制已删除。
                        </p>
                     </li>
                     <li>
                        <p>CDB不支持闪回事务查询。</p>
                     </li>
                     <li>
                        <p>CDB不支持闪回事务回退。</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00382.installing-oracle-database-creating-database.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to install Oracle Database software and create a single instance Oracle Database."></meta>
      <meta name="description" content="This chapter describes how to install Oracle Database software and create a single instance Oracle Database."></meta>
      <title>安装Oracle数据库和创建数据库</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day DBA"></meta>
      <meta property="og:description" content="This chapter describes how to install Oracle Database software and create a single instance Oracle Database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day DBA"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-dba.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T23:13:13-07:00"></meta>
      <meta name="dcterms.title" content="2 Day DBA"></meta>
      <meta name="dcterms.dateCopyrighted" content="2004, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96197-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction.html" title="Previous" type="text/html"></link>
      <link rel="next" href="getting-started-with-database-administration.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADMQS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="getting-started-with-database-administration.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天DBA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">安装Oracle数据库和创建数据库</li>
            </ol>
            <a id="GUID-6B14A3EB-DD51-43C3-AB26-6978B13E2E1E" name="GUID-6B14A3EB-DD51-43C3-AB26-6978B13E2E1E"></a><a id="ADMQS002"></a>
            
            <h2 id="ADMQS-GUID-6B14A3EB-DD51-43C3-AB26-6978B13E2E1E" class="sect2"><span class="enumeration_chapter">2</span>安装Oracle数据库和创建数据库</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何安装Oracle数据库软件并创建单个实例Oracle数据库。</p>
               <p>如果您使用的是早期版本的Oracle数据库并希望安装更高版本的Oracle数据库软件，则可以<span class="italic">升级</span>现有的Oracle数据库并将其与新版本的数据库软件一起使用。请参阅<span class="q">“ <a href="managing-oracle-database-software.html#GUID-CCF98C09-4211-4F87-B097-1FBCD0A2E9ED" title="Oracle提供了专为您的数据库环境设计的升级选项和策略，以及一系列自动执行Oracle数据库升级过程的工具。">升级数据库</a> ”</span> 。
               </p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="installing-oracle-database-creating-database.html#GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1" title="要安装Oracle数据库软件，请使用Oracle Universal Installer（OUI）。OUI是一个图形用户界面实用程序，可用于安装新的Oracle数据库软件。">安装Oracle数据库软件和创建数据库概述</a></p>
                  </li>
                  <li>
                     <p><a href="installing-oracle-database-creating-database.html#GUID-011C3545-9427-44F7-9645-2D402A88017F" title="本节简要介绍系统类安装的步骤。大多数步骤对所有平台都是通用的，涉及运行Oracle Universal Installer（OUI）。">安装Oracle数据库软件</a></p>
                  </li>
                  <li>
                     <p><a href="installing-oracle-database-creating-database.html#GUID-2A1B1AF2-CC36-405A-89EB-72E7A33F7E2B" title="除非您指定仅安装Oracle数据库软件，否则Oracle Universal Installer（OUI）会在软件安装完成后自动运行Database Configuration Assistant（DBCA）。">使用DBCA创建和管理数据库</a></p>
                  </li>
                  <li>
                     <p><a href="installing-oracle-database-creating-database.html#GUID-75C198E5-5690-43F4-990E-91A3892F7A54" title="您可以在初始数据库安装后的某个时间决定要安装数据库示例模式。您可以通过运行SQL脚本手动创建示例模式。">手动安装数据库示例模式安装后</a></p>
                  </li>
                  <li>
                     <p><a href="installing-oracle-database-creating-database.html#GUID-1426CDE5-D4E2-428D-8409-0333799EE8C2" title="Oracle示例（OBE）有一系列关于Oracle Database 2 Day DBA指南的系列文章。本OBE将引导您完成本章中的任务，并包含带注释的屏幕截图。">安装：Oracle示例系列</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-6B14A3EB-DD51-43C3-AB26-6978B13E2E1E__GUID-2589A04D-CEAE-461D-9316-95ABCFED3715">
                  <p class="notep1">注意：</p>
                  <p>本章概述了如何安装Oracle数据库软件和创建单个实例Oracle数据库。本章不是Oracle数据库的完整安装指南。</p>
                  <p>有关安装Oracle数据库软件的更多详细信息，请参见所用平台的<a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle数据库安装指南”</cite></span></a> 。
                  </p>
               </div>
            </div><a id="ADMQS021"></a><div class="props_rev_3"><a id="GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1" name="GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1"></a><h3 id="ADMQS-GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1" class="sect3"><span class="enumeration_section">2.1</span>安装Oracle数据库软件和创建数据库概述</h3>
               <div>
                  <div><span>要安装Oracle数据库软件，请使用Oracle Universal Installer（OUI）。OUI是一个图形用户界面实用程序，可用于安装新的Oracle数据库软件。</span> 在线帮助可指导您完成安装过程。
                  </div>
                  <p>在安装过程中，您有机会创建数据库。如果您选择这样做，那么OUI会自动启动Oracle数据库配置助手（DBCA），以指导您完成创建和配置数据库的过程。</p>
                  <p>在开始安装过程之前，请参阅以下部分以获取有关先决条件和安装选择的信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-B13AFC3F-970C-4E86-94B3-A169142E52AC" title="在安装软件之前，Oracle Universal Installer（OUI）会执行多项自动检查，以确保您的计算机满足Oracle数据库安装的基本硬件和软件要求。">检查Oracle数据库安装先决条件</a></p>
                     </li>
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-BB081EDA-2652-4AB1-B1D6-B03EE08917B3" title="Oracle Universal Installer（OUI）将指导您完成面试阶段，您可以在其中指定安装和数据库创建的选择。确切的步骤顺序取决于您的操作系统。在完成安装过程中，您将看到有关如何配置数据库的选项。">决定Oracle数据库安装选择</a></p>
                     </li>
                  </ul>
                  <p>如果在安装期间未创建数据库，则必须在安装后的某个时刻运行DBCA以创建数据库。</p>
                  <div class="infoboxnote" id="GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1__GUID-B44DB889-E56F-4239-B9F6-E38872A4E327">
                     <p class="notep1">注意：</p>
                     <p>在安装期间或作为独立操作创建数据库之后，您不必创建另一个数据库。您可以将数据分成单个Oracle数据库中的不同<span class="italic">模式</span> ，而不是要求您创建多个数据库以适应不同的应用程序。有关架构的更多信息，请参阅<span class="q">“ <a href="administering-user-accounts-and-security.html#GUID-434BA586-DDFC-4C37-B442-C9348C2853AE" title="要使用户访问您的数据库，您必须创建用户帐户并为这些帐户授予适当的数据库访问权限。">关于用户帐户</a> ”</span> 。
                     </p>
                     <p>从Oracle Database 12 <span class="italic">c开始</span> ，还可以创建一个<a id="d5037e167" class="indexterm-anchor"></a>多租户容器数据库（CDB），可以支持零个，一个或多个用户创建的p luggable数据库（PDB）。Oracle数据库<span class="italic">12c</span>中之前创建的所有Oracle数据库都是非的CDB。本手册介绍了用于创建的OUI和DBCA选项<a id="d5037e180" class="indexterm-anchor"></a>国家开发银行和<a id="d5037e186" class="indexterm-anchor"></a> PDB和后续章节提供了有关管理CDB和PDB的信息。
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1__GUID-8E4C12DB-DE87-48E1-8BE7-1B0FFFD732EB">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关CDB和PDBS的概念性信息的<a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Multitenant管理员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关管理CDB和PDB的信息，请参阅<a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADMQS0211"></a><div class="props_rev_3"><a id="GUID-B13AFC3F-970C-4E86-94B3-A169142E52AC" name="GUID-B13AFC3F-970C-4E86-94B3-A169142E52AC"></a><h4 id="ADMQS-GUID-B13AFC3F-970C-4E86-94B3-A169142E52AC" class="sect4"><span class="enumeration_section">2.1.1</span>检查Oracle数据库安装先决条件</h4>
                  <div>
                     <div><span>在安装软件之前，Oracle Universal Installer（OUI）会执行多项自动检查，以确保您的计算机满足Oracle数据库安装的基本硬件和软件要求。</span> 如果您的计算机不符合要求，则会显示错误消息。
                     </div>
                     <p>要求可能因您使用的计算机和操作系统的类型而异，但有些先决条件包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d5037e246" class="indexterm-anchor"></a>至少有1 GB的物理内存。
                           </p>
                        </li>
                        <li>
                           <p>提供足够的调页空间。</p>
                        </li>
                        <li>
                           <p>将安装适用于您的操作系统的相应Service Pack或修补程序。</p>
                        </li>
                        <li>
                           <p>正在使用适当的文件系统格式。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B13AFC3F-970C-4E86-94B3-A169142E52AC__GUID-49AF4D04-FEDF-4847-AB77-808F12CADA54">
                        <p class="notep1">也可以看看：</p>
                        <p>适用于您的平台的<a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle数据库安装指南</span></a> ，以获取有关预安装要求和任务的更多信息</p>
                     </div>
                  </div>
               </div><a id="ADMQS0212"></a><div class="props_rev_3"><a id="GUID-BB081EDA-2652-4AB1-B1D6-B03EE08917B3" name="GUID-BB081EDA-2652-4AB1-B1D6-B03EE08917B3"></a><h4 id="ADMQS-GUID-BB081EDA-2652-4AB1-B1D6-B03EE08917B3" class="sect4"><span class="enumeration_section">2.1.2</span>确定Oracle数据库安装选择</h4>
                  <div>
                     <p>Oracle Universal Installer（OUI）将指导您完成面试阶段，您可以在其中指定安装和数据库创建的选择。确切的步骤顺序取决于您的操作系统。在完成安装过程中，您将看到有关如何配置数据库的选项。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-6E134F2D-0E9E-4283-884C-75AF8EE82E00" title="您可以选择创建和配置数据库，也可以仅安装数据库软件。">安装Oracle数据库选件</a></p>
                        </li>
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-88C6DF2F-C098-4B46-9639-150053639D7A" title="安装类是Desktop Class和Server Class。">Oracle数据库的安装类</a></p>
                        </li>
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-BC2E9026-1EE7-46BD-8F2B-64FE9719832A" title="在基本安装和高级安装期间安装Oracle数据库时，可以选择数据库版本。">适用于Oracle数据库的安装版</a></p>
                        </li>
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-8DF09815-92DE-47D5-A96B-691C05F86483" title="您必须指定安装Oracle数据库软件的目录，或者从安装介质中复制产品二进制文件的位置。">Oracle数据库的软件安装目录</a></p>
                        </li>
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-B35A1130-F17A-42BA-A455-2D351CF4A96F" title="数据库包括多个文件，用于存储用户数据，数据库元数据以及从故障中恢复所需的信息。作为管理员，您可以决定将哪种存储子系统用于这些文件。">Oracle数据库的数据库文件位置</a></p>
                        </li>
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-B30C4CAE-CC53-4285-8D6C-C50A8E3B497E" title="这些选项包括您的全局数据库名称和系统标识符（SID）。">Oracle数据库的数据库标识符</a></p>
                        </li>
                        <li>
                           <p><a href="installing-oracle-database-creating-database.html#GUID-88470480-5B7B-467C-9C66-894B77CA8C63" title="在使用Server Class方法进行高级安装期间，系统会提示您进行本节中列出的其他选择以及典型安装的选项。">关于Oracle数据库的高级安装</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12378"></a><div class="props_rev_3"><a id="GUID-6E134F2D-0E9E-4283-884C-75AF8EE82E00" name="GUID-6E134F2D-0E9E-4283-884C-75AF8EE82E00"></a><h5 id="ADMQS-GUID-6E134F2D-0E9E-4283-884C-75AF8EE82E00" class="sect5"><span class="enumeration_section">2.1.2.1</span>安装Oracle数据库选项</h5>
                     <div>
                        <p>您可以选择创建和配置数据库，也可以仅安装数据库软件。</p>
                        <p>您可以在安装期间创建预配置的数据库或自定义配置的数据库。如果在安装期间选择不创建数据库，则必须在安装后运行Database Configuration Assistant（DBCA）以创建数据库。</p>
                        <div class="infoboxnote" id="GUID-6E134F2D-0E9E-4283-884C-75AF8EE82E00__GUID-9965E407-2F0D-48DB-BEBE-43E338932AD9">
                           <p class="notep1">注意：</p>
                           <p>如果选择创建和配置数据库，则Oracle Universal Installer（OUI）将在安装结束时启动DBCA以配置数据库。</p>
                           <p>如果选择仅使用OUI安装数据库软件，则必须在安装后手动运行DBCA以创建和配置数据库。使用此方法，可以使用更多选项来控制数据库配置。</p>
                        </div>
                        <p>预配置的数据库基于Oracle提供或您创建的模板。每个Oracle提供的模板都针对特定工作负载类型进行了优化。有关预配置数据库类型的信息，请参阅<a href="installing-oracle-database-creating-database.html#GUID-E59E0AE9-AF91-4DD2-B311-C92E3EFE9948__BABHDEDA" title="此表描述了DBCA模板环境。">表2-2</a> 。
                        </p>
                        <p>如果选择使用Desktop Class安装，则使用通用数据库模板。要创建用于配置自己的数据库结构的自定义数据库，请参阅<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-88470480-5B7B-467C-9C66-894B77CA8C63" title="在使用Server Class方法进行高级安装期间，系统会提示您进行本节中列出的其他选择以及典型安装的选项。">关于Oracle数据库的高级安装</a> ”。</span></p>
                        <div class="infoboxnote" id="GUID-6E134F2D-0E9E-4283-884C-75AF8EE82E00__GUID-962176D3-8BAF-4700-ACF3-1426624506D1">
                           <p class="notep1">注意：</p>
                           <p>如果必须创建新数据库，则Oracle建议您安装预配置的数据库，这样更快速，更轻松。您可以在创建数据库后对其进行自定义。</p>
                        </div>
                     </div>
                  </div><a id="ADMQS12379"></a><div class="props_rev_3"><a id="GUID-88C6DF2F-C098-4B46-9639-150053639D7A" name="GUID-88C6DF2F-C098-4B46-9639-150053639D7A"></a><h5 id="ADMQS-GUID-88C6DF2F-C098-4B46-9639-150053639D7A" class="sect5"><span class="enumeration_section">2.1.2.2</span> Oracle数据库的安装类</h5>
                     <div>
                        <p>安装类是Desktop Class和Server Class。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">桌面类</span> - 此安装类最适合笔记本电脑或台式电脑。它包括一个入门数据库，需要最少的配置。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">服务器类</span> - 此安装类适用于服务器，例如您在数据中心中找到的服务器，或用于支持企业级应用程序的服务器。如果需要访问高级配置选项，请选择此安装类。
                              </p>
                           </li>
                        </ul>
                        <p>在桌面类安装期间，您只进行基本选择。对于服务器类安装，您可以选择典型安装（仅进行基本选择）或高级安装。</p>
                        <p>在桌面类或典型安装期间，Oracle数据库会自动安装示例模式。</p>
                     </div>
                  </div><a id="ADMQS02121"></a><div class="props_rev_3"><a id="GUID-BC2E9026-1EE7-46BD-8F2B-64FE9719832A" name="GUID-BC2E9026-1EE7-46BD-8F2B-64FE9719832A"></a><h5 id="ADMQS-GUID-BC2E9026-1EE7-46BD-8F2B-64FE9719832A" class="sect5"><span class="enumeration_section">2.1.2.3</span> Oracle数据库的安装版</h5>
                     <div>
                        <p>在基本安装和高级安装期间安装Oracle数据库时，可以选择数据库版本。</p>
                        <p>例如，您可以选择以下数据库版本之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">企业版</span> - 此安装类型是功能齐全的Oracle数据库产品，可为企业级应用程序提供数据管理。它适用于关键任务，高安全性的在线事务处理（OLTP）和数据仓库环境。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">标准版2</span> - 此安装类型专为部门或工作组级应用程序以及中小型企业（SME）而设计。它旨在提供核心关系数据库管理服务和选项。它安装了一套集成的管理工具，完整的分发，复制，Web功能和用于构建业务关键型应用程序的工具。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADMQS12380"></a><div class="props_rev_3"><a id="GUID-8DF09815-92DE-47D5-A96B-691C05F86483" name="GUID-8DF09815-92DE-47D5-A96B-691C05F86483"></a><h5 id="ADMQS-GUID-8DF09815-92DE-47D5-A96B-691C05F86483" class="sect5"><span class="enumeration_section">2.1.2.4</span> Oracle数据库的软件安装目录</h5>
                     <div>
                        <div><span>您必须指定安装Oracle数据库软件的目录，或者从安装介质中复制产品二进制文件的位置。</span> 您必须选择具有足够磁盘空间的位置来包含软件，并且可由执行安装的操作系统用户访问。
                        </div>
                        <p>您还可以指定Oracle基本目录的位置，该目录由服务器上安装的所有Oracle软件产品使用。首次在服务器上安装Oracle软件时，系统会提示您指定清单目录的位置，称为<code class="codeph">oraInventory</code> 。此目录提供服务器上安装的所有Oracle软件产品的集中清单。每次在服务器上执行Oracle软件安装时，都应该为Oracle清单目录使用相同的值。
                        </p>
                     </div>
                  </div><a id="ADMQS12381"></a><div class="props_rev_3"><a id="GUID-B35A1130-F17A-42BA-A455-2D351CF4A96F" name="GUID-B35A1130-F17A-42BA-A455-2D351CF4A96F"></a><h5 id="ADMQS-GUID-B35A1130-F17A-42BA-A455-2D351CF4A96F" class="sect5"><span class="enumeration_section">2.1.2.5</span> Oracle数据库的数据库文件位置</h5>
                     <div>
                        <p>数据库包括多个文件，用于存储用户数据，数据库元数据以及从故障中恢复所需的信息。作为管理员，您可以决定将哪种存储子系统用于这些文件。</p>
                        <p>您可以选择以下选项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">文件系统</span> - 此默认选项创建由操作系统的文件系统管理的数据库文件。您可以指定要存储数据库文件的目录路径。Oracle数据库可以创建和管理实际文件。
                              </p>
                              <p>如果您不确定要使用哪个选项，请选择“文件系统”（默认设置）。</p>
                           </li>
                           <li>
                              <p><span class="bold">自动存储管理</span> - <a id="d5037e586" class="indexterm-anchor"></a>此选项使您可以将数据文件放在Oracle自动存储管理（Oracle ASM）磁盘组中。如果选择Oracle ASM，则Oracle数据库会自动管理数据库文件放置和命名。对于具有大量磁盘的环境，此选项可简化数据库管理并最大限度地提高性能。Oracle ASM在文件级别执行软件条带化和镜像，以实现最大的存储灵活性，性能和可用性。
                              </p>
                              <p>Oracle ASM使用与数据库实例不同的Oracle ASM实例来配置和管理磁盘组。单个Oracle ASM实例可以为同一服务器上的多个数据库提供存储。</p>
                              <p>有关更多信息，请参见“ <a href="../ostmg/asm-intro.html#OSTMG036" target="_blank"><span class="italic">Oracle自动存储管理管理员指南”</span></a> 。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-B35A1130-F17A-42BA-A455-2D351CF4A96F__GUID-8B2CF73C-212D-4FD2-972A-F687A92C6567">
                           <p class="notep1">注意：</p>
                           <p>在以前的版本中，Oracle ASM是作为Oracle数据库安装的一部分安装的。使用Oracle Database <span class="italic">11g</span>第2版（11.2），Oracle ASM是Oracle Grid Infrastructure安装的一部分。
                           </p>
                           <p>要使用Oracle ASM存储数据库文件，必须先安装Oracle ASM并在执行Oracle数据库安装之前创建一个或多个磁盘组。</p>
                        </div>
                     </div>
                  </div><a id="ADMQS12382"></a><div class="props_rev_3"><a id="GUID-B30C4CAE-CC53-4285-8D6C-C50A8E3B497E" name="GUID-B30C4CAE-CC53-4285-8D6C-C50A8E3B497E"></a><h5 id="ADMQS-GUID-B30C4CAE-CC53-4285-8D6C-C50A8E3B497E" class="sect5"><span class="enumeration_section">2.1.2.6</span> Oracle数据库的数据库标识符</h5>
                     <div>
                        <div><span>这些选项包括您的全局数据库名称和系统标识符（SID）。</span> <span class="bold">SID</span>是一个唯一标识符，用于将此实例与您稍后可能创建并在系统上并发运行的其他Oracle数据库实例区分开来。
                        </div>
                        <p>全局数据库名称是数据库的全名，可以将其与任何其他数据库进行唯一区分。全局数据库名称的格式为<code class="codeph">database_name.database_domain</code> ，例如<code class="codeph">sales.example.com</code> 。数据库名称部分<code class="codeph">sales</code>是您调用数据库的简单名称。数据库域部分<code class="codeph">example.com</code>指定数据库所在的数据库域。数据库名称和域一起构成全局数据库名称。
                        </p>
                     </div>
                  </div><a id="ADMQS02122"></a><div class="props_rev_3"><a id="GUID-88470480-5B7B-467C-9C66-894B77CA8C63" name="GUID-88470480-5B7B-467C-9C66-894B77CA8C63"></a><h5 id="ADMQS-GUID-88470480-5B7B-467C-9C66-894B77CA8C63" class="sect5"><span class="enumeration_section">2.1.2.7</span>关于Oracle数据库的高级安装</h5>
                     <div>
                        <div><span>在使用Server Class方法进行高级安装期间，系统会提示您进行本节中列出的其他选择以及典型安装的选项。</span> 安装过程为每个选项提供默认值。
                        </div>
                        <p>本指南介绍但未记录这些其他高级安装选项。有关更多信息，请参见所用平台的<a href="../install-and-upgrade.html" target="_blank"><span class="italic">“Oracle数据库安装指南”</span></a> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d5037e705" class="indexterm-anchor"></a>产品语言</p>
                              <p>您可以选择软件安装后应使用的语言。您可以选择多种语言。默认值为英语。如果选择英语以外的值，则不会更改安装使用的语言。</p>
                           </li>
                           <li>
                              <p>数据库配置类型</p>
                              <p>您选择配置数据库时要使用的模板。您可以选择通用/事务处理或数据仓库。</p>
                           </li>
                           <li>
                              <p><a id="d5037e719" class="indexterm-anchor"></a><a id="d5037e721" class="indexterm-anchor"></a><a id="d5037e723" class="indexterm-anchor"></a><a id="d5037e725" class="indexterm-anchor"></a>数据库配置选项</p>
                              <p>您可以选择如何配置安装程序创建的数据库。您可以选择内存大小和管理选项，用于存储数据的字符集，数据库访问的安全选项以及是否应安装示例模式。</p>
                              <p>要完成本指南和相关课程材料中的练习，您必须安装示例模式。整个Oracle数据库文档中的大多数示例中也使用此数据。Oracle建议您安装示例模式。</p>
                              <p>此选项仅在高级安装期间是配置选项。在典型或Desktop类安装期间，默认情况下会安装示例模式。</p>
                           </li>
                           <li>
                              <p>恢复选项</p>
                              <p>在高级安装期间，您可以为数据库配置备份和恢复选择。如果选择此选项，则必须指定恢复区域是应存储在本地文件系统还是存储在Oracle ASM磁盘组中。</p>
                              <div class="infoboxnote" id="GUID-88470480-5B7B-467C-9C66-894B77CA8C63__GUID-D014944A-B201-40E3-8841-98D28B2B0095">
                                 <p class="notep1">注意：</p>
                                 <p>要将Oracle ASM用于恢复区存储，必须已将Oracle ASM作为Oracle Grid Infrastructure安装的一部分进行安装，并在执行Oracle数据库安装之前创建一个或多个磁盘组。</p>
                              </div>
                           </li>
                           <li>
                              <p>架构密码</p>
                              <p>创建数据库时，会自动创建某些管理用户帐户。系统会提示您输入管理帐户的密码，例如<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>帐户，这使您可以管理和管理数据库。您可以为每个帐户使用相同的密码，也可以单独为每个帐户指定密码。如果您未输入安全密码，则在安装过程中将收到警告消息。
                              </p>
                           </li>
                           <li>
                              <p><a id="d5037e757" class="indexterm-anchor"></a><a id="d5037e759" class="indexterm-anchor"></a><a id="d5037e761" class="indexterm-anchor"></a>操作系统组</p>
                              <p>对某些操作系统组的成员资格授予对数据库的管理访问权限。您可以选择用于<code class="codeph">SYSDBA</code>访问（通常为<code class="codeph">dba</code> ）和<code class="codeph">SYSOPER</code>访问（通常为<code class="codeph">oper</code> ）的操作系统组。
                              </p>
                              <p><code class="codeph">SYSDBA</code>组标识具有数据库管理权限的操作系统用户帐户，并且可以使用<code class="codeph">SYSDBA</code>访问权限登录。<code class="codeph">SYSOPER</code>组是应具有有限数据库管理权限的用户的可选组。有关这些组和权限的更多信息，请参见<span class="q">“ <a href="administering-user-accounts-and-security.html#GUID-2033E766-8FE6-4FBA-97E0-2607B083FA2C" title="SYSDBA和SYSOPER是执行高级管理操作（如创建，启动，关闭，备份或恢复数据库）所需的管理权限。">SYSDBA和SYSOPER系统权限</a> ”</span> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS12124"></a><a id="ADMQS022"></a><div class="props_rev_3"><a id="GUID-011C3545-9427-44F7-9645-2D402A88017F" name="GUID-011C3545-9427-44F7-9645-2D402A88017F"></a><h3 id="ADMQS-GUID-011C3545-9427-44F7-9645-2D402A88017F" class="sect3"><span class="enumeration_section">2.2</span>安装Oracle数据库软件</h3>
               <div>
                  <div><span>本节简要介绍系统类安装的步骤。大多数步骤对所有平台都是通用的，涉及运行Oracle Universal Installer（OUI）。</span> 注意到特定于平台的步骤。有关进一步的帮助，请参阅适用于您的平台的联机帮助或<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle数据库安装指南</cite></span></a> 。
                  </div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-011C3545-9427-44F7-9645-2D402A88017F__GUID-8368BD9F-428C-4E55-B820-5945A8F775A1">
                        <p class="notep1">注意：</p>
                        <p>以下步骤描述了未安装以前Oracle软件的主机的OUI工作流程。如果您的主机安装了Oracle软件，那么您可能会看到不同的工作流程。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-011C3545-9427-44F7-9645-2D402A88017F__GUID-690015CD-19F4-4918-AAEE-D06CA36A531A">要执行基本安装：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>以有权安装Oracle数据库软件并创建和运行数据库的管理组成员的身份登录计算机。</span><div>
                           <p><a id="d5037e864" class="indexterm-anchor"></a>请参阅特定于操作系统的文档或与系统管理员联系，以确定您是否具有安装新软件所需的特权和权限。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>执行以下操作之一：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果从分发介质进行安装，请将数据库的分发介质插入计算机。</p>
                                 <p>自动运行功能会自动打开“选择要安装的产品”窗口。</p>
                              </li>
                              <li>
                                 <p>如果从Oracle Web站点下载了安装软件，请按照站点上的说明运行Oracle Universal Installer。或者，请参见适用于您的平台的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle数据库安装指南</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>出现的第一个窗口是“配置选项”窗口。选择“ <span class="uicontrol bold">创建并配置数据库单实例”</span>选项。或者，您也可以选择仅安装数据库软件，但必须在安装软件后的其他步骤中创建数据库。如果您当前使用的是以前版本的Oracle数据库，请选择“ <span class="uicontrol bold">升级现有数据库”</span> 。选择选项后，单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>
                           <p>出现“系统类”窗口。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="uicontrol bold">服务器类</span> 。</span><div>
                           <p>您可以选择“服务器类”选项来自定义安装。例如，您可以使用此方法为数据库配置Oracle自动存储管理，安装示例模式或配置备份和恢复选项。</p>
                           <p>Desktop Class安装的步骤类似于Server Class安装的步骤，但安装数据库的选择较少。</p>
                           <p>单击<span class="uicontrol bold">下一步</span> 。
                           </p>
                           <p>出现“安装类型”窗口。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>选择<span class="uicontrol bold">典型安装</span> ，然后单击<span class="uicontrol bold">下一步</span></span><div>如果选择“ <span class="uicontrol bold">高级安装”</span> ，则本指南中未记录某些安装步骤。有关高级选项的详细信息，请参阅<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-88470480-5B7B-467C-9C66-894B77CA8C63" title="在使用Server Class方法进行高级安装期间，系统会提示您进行本节中列出的其他选择以及典型安装的选项。">关于Oracle数据库的高级安装</a> ”</span> 。另请参见适用于您的平台的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Database Installation Guide</cite></span></a> 。
                           <div class="infoboxnote" id="GUID-011C3545-9427-44F7-9645-2D402A88017F__GUID-06759BF4-8A59-49C7-B89F-BAFD354FAF1C">
                              <p class="notep1">注意：</p>
                              <p><span class="italic">仅在Microsoft Windows操作系统上</span> ，将显示“指定Oracle主页用户”窗口。通过此窗口，您可以使用非管理员，低权限的Windows用户帐户作为Oracle Home用户。建议将此选项用于数据库安装，以确保Oracle服务以有限的权限运行。对于单实例数据库，您还可以选择允许Oracle安装程序创建新的Windows用户帐户（仅限本地用户），然后将其用作Oracle Home用户。
                              </p>
                              <p>如果拒绝此选项，将安装所有服务并以System用户身份运行。</p>
                              <p>有关此功能的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=NTQRF672" target="_blank"><span><cite>适用于Microsoft Windows的Oracle数据库管理员参考</cite></span></a> 。
                              </p>
                           </div>
                           <p>将出现“典型安装”窗口。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>提供数据库的以下配置详细信息：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a id="d5037e972" class="indexterm-anchor"></a><a id="d5037e974" class="indexterm-anchor"></a> Oracle基础 -  Oracle基本目录有助于组织多个Oracle软件安装。有关<code class="codeph">ORACLE_BASE</code>详细信息，请参见适用于您的平台的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle数据库安装指南</cite></span></a> 。</p>
                                 <p>如果在启动OUI之前未设置<code class="codeph">ORACLE_BASE</code>环境变量，那么将在<code class="codeph">/u01</code>到<code class="codeph">/u09</code>的第一个现有和可写目录的<code class="codeph">app/</code> <span class="italic"><code class="codeph">username</code></span> <code class="codeph">/</code>目录中为UNIX和Linux系统创建Oracle基本目录，或者在磁盘上创建Oracle基目录为Windows系统提供最多可用空间。如果UNIX或Linux系统上不存在<code class="codeph">/u01</code>到<code class="codeph">/u09</code> ，则默认位置为<span class="italic"><code class="codeph">user_home_directory</code></span> <code class="codeph">/app/</code> <span class="italic"><code class="codeph">username</code></span> 。
                                 </p>
                                 <p>您可以单击“ <span class="uicontrol bold">浏览”</span>以查找要用作Oracle基本目录的目录。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d5037e1028" class="indexterm-anchor"></a><a id="d5037e1030" class="indexterm-anchor"></a>软件位置 - 软件位置是数据库的Oracle主目录。您必须为每个新安装的Oracle数据库软件指定一个新的Oracle主目录。默认情况下，Oracle主目录是Oracle基目录的子目录。
                                 </p>
                                 <p>您可以单击“ <span class="uicontrol bold">浏览”</span>以查找要安装Oracle数据库软件的目录。
                                 </p>
                              </li>
                              <li>
                                 <p>存储类型 - 您可以选择<span class="uicontrol bold">文件系统</span>或<span class="uicontrol bold">Oracle自动存储管理</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>数据库文件位置 - 数据库文件位置是Oracle数据库文件的存储位置。默认情况下，此位置为<span class="italic"><code class="codeph">Oracle_base</code></span> <code class="codeph">/oradata</code> 。您可以单击“ <span class="uicontrol bold">浏览”</span>以选择其他位置。
                                 </p>
                              </li>
                              <li>
                                 <p>数据库版本 - 选择<span class="uicontrol bold">Enterprise Edition</span>或<span class="uicontrol bold">Personal Edition</span> （仅限Microsoft Windows平台）。请参阅<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-BC2E9026-1EE7-46BD-8F2B-64FE9719832A" title="在基本安装和高级安装期间安装Oracle数据库时，可以选择数据库版本。">Oracle数据库的安装版</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>OSDBA组（仅限Linux和UNIX平台） - 指定操作系统DBA组。该组中的主机计算机用户具有数据库的管理权限。该组通常命名为<span class="bold"><code class="codeph">dba</code></span> 。有关更多详细信息，请参阅<a href="../ladbi/index.html" target="_blank"><span><cite>适用于Linux的Oracle数据库安装指南</cite></span></a>或UNIX平台。
                                 </p>
                              </li>
                              <li>
                                 <p>全局数据库名称 - 输入完全限定的全局数据库名称。有关全局数据库名称的详细信息，请参阅<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-B30C4CAE-CC53-4285-8D6C-C50A8E3B497E" title="这些选项包括您的全局数据库名称和系统标识符（SID）。">Oracle数据库的数据库标识符</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>管理密码 - 指定管理员帐户（如<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>帐户）的初始密码。如果您选择的密码不是安全密码，则会显示警告消息。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="uicontrol bold">创建为容器数据库</span> ：启用此选项<a id="d5037e1112" class="indexterm-anchor"></a><a id="d5037e1116" class="indexterm-anchor"></a>将数据库创建为多租户容器数据库（CDB），可以支持零个，一个或多个用户创建的可插拔数据库（PDB）。
                                 </p>
                                 <p>如果希望Database Configuration Assistant（DBCA）在创建CDB时创建PDB，请在<span class="uicontrol bold">Pluggable database name</span>字段中指定PDB名称。
                                 </p>
                              </li>
                           </ul>
                           <p>输入所需信息后，单击“ <span class="uicontrol bold">下一步”</span> 。
                           </p>
                           <p><span class="italic">对于仅在Linux和UNIX操作系统上的首次安装</span> ，如果先前未在此服务器上安装Oracle软件，则会显示“创建库存”窗口。如果这不是此服务器上的第一次安装尝试，则会显示“执行先决条件检查”窗口。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果出现“创建清单”窗口，请指定安装文件的目录以及对该目录具有写入权限的操作系统组的名称。</span><div>
                           <p><a id="d5037e1140" class="indexterm-anchor"></a>如果这是您第一次在此计算机上安装任何Oracle软件，则会出现“创建库存目录”窗口。您必须为清单指定本地目录，OUI使用该目录来跟踪计算机上安装的所有Oracle软件。在应用修补程序或升级现有安装时以及卸载Oracle软件时使用此信息。请注意，此目录与Oracle主目录不同。inventory目录的建议值是<span class="italic"><code class="codeph">Oracle_base</code></span> <code class="codeph">/../oraInventory</code> ，或<code class="codeph">oraInventory</code>子目录中Oracle基本目录之上的一个级别。如果您的Oracle基本目录是<code class="codeph">/u01/app/oracle</code> ，那么Oracle清单目录默认为<code class="codeph">/u01/app/oraInventory</code> 。
                           </p>
                           <p>在此窗口中，您还可以指定对inventory目录具有写入权限的操作系统组。这可以防止其他用户编写Oracle产品安装文件。</p>
                           <p>输入目录路径并指定操作系统组后，单击“ <span class="uicontrol bold">下一步”</span>继续。
                           </p>
                           <p>将出现“执行先决条件检查”窗口。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>如果任何检查失败，则采取纠正措施。</span><div>
                           <p>OUI执行多个环境检查，并指示检查是否成功，或导致警告或失败。显示的窗口中提供了检查的详细信息。只有当所有检查的状态为“成功”或“警告”时，才能继续安装。如果任何环境检查失败，则必须手动解决它们。有关详细信息，请参阅<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-B13AFC3F-970C-4E86-94B3-A169142E52AC" title="在安装软件之前，Oracle Universal Installer（OUI）会执行多项自动检查，以确保您的计算机满足Oracle数据库安装的基本硬件和软件要求。">检查Oracle数据库安装先决条件</a> ”</span> 。
                           </p>
                           <p>如果通过了所有先决条件检查，或单击“ <span class="uicontrol bold">下一步”后</span> ，将显示“摘要”窗口。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>查看安装摘要，然后单击“ <span class="uicontrol bold">安装”</span>以开始安装。</span><div>
                           <p>将出现“安装产品”窗口，其中显示安装进度。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span><span class="italic">仅对于Linux和UNIX操作系统，系统</span>会提示您运行配置脚本。要自动运行根脚本，请选择“ <span class="bold">自动运行配置脚本”</span> 。或者，您可以以<code class="codeph">root</code>用户身份手动运行配置脚本。运行脚本，然后单击“ <span class="uicontrol bold">确定”</span> 。</span><div>
                           <p>安装完成后，将显示“完成”窗口。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>记下“完成”窗口中的信息，然后单击“ <span class="uicontrol bold">关闭”</span>以退出OUI。</span><div>
                           <p>您的安装和数据库创建现已完成。</p>
                           <p>您可以使用Oracle Enterprise Manager Database Express（EM Express）执行常见的数据库管理任务。</p>
                           <p>使用“完成”窗口中提供的EM Express URL启动EM Express，指定数据库主机名而不是“localhost”。'当EM Express提示您输入用户名和密码时，请以具有DBA权限的用户身份登录（例如SYSTEM）。</p>
                           <div class="infoboxnote" id="GUID-011C3545-9427-44F7-9645-2D402A88017F__GUID-FA3927F4-56A7-4E82-B131-4BE364C29C84">
                              <p class="notep1">注意：</p>
                              <p>默认情况下，DBCA从5500到5599范围内选择一个空闲端口用作EM Express端口。</p>
                              <p>如果你想要一个<a id="d5037e1229" class="indexterm-anchor"></a>要用作EM Express端口的特定端口，请在启动OUI或DBCA之前使用<code class="codeph">DBEXPRESS_HTTPS_PORT</code>操作系统环境变量指定该端口。</p>
                              <p>有关设置环境变量的详细信息，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-EC18C4A6-3BA5-4C14-9D76-B0DD62FEFFF2" title="在使用访问Oracle数据库的某些工具（例如SQL * Plus）之前，必须为操作系统配置环境变量。Oracle数据库使用这些环境变量来确定工具应连接的数据库实例。">配置操作系统环境变量”</a> 。</span></p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-011C3545-9427-44F7-9645-2D402A88017F__GUID-1074340E-88E5-4823-A0DB-85561BBD93C4">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关CDB和PDB的概念性信息的<a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Multitenant管理员指南</cite></span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>有关管理CDB和PDB的信息，请参阅<a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="administering-user-accounts-and-security.html#GUID-CF1CD853-AF15-41EC-BC80-61918C73FDB5" title="安装Oracle数据库时会自动创建SYS和SYSTEM管理用户帐户。它们都是使用您在安装时提供的密码创建的，并且它们都自动被授予DBA角色。">SYS和SYSTEM用户</a> ”</span> ，了解有关使用<code class="codeph">SYSTEM</code>帐户进行日常管理任务的建议替代方法的信息。
                                    </p>
                                 </li>
                                 <li>
                                    <p>有关使用EM Express的更多信息，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-2BF9BB16-53C9-4E40-952D-774FEA514335" title="本章提供了管理数据库的简要路线图。它向您介绍了Oracle Enterprise Manager Database Express（EM Express），这是用于管理Oracle数据库的基于Web的界面。">数据库管理入门</a> ”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="ADMQS023"></a><div class="props_rev_3"><a id="GUID-2A1B1AF2-CC36-405A-89EB-72E7A33F7E2B" name="GUID-2A1B1AF2-CC36-405A-89EB-72E7A33F7E2B"></a><h3 id="ADMQS-GUID-2A1B1AF2-CC36-405A-89EB-72E7A33F7E2B" class="sect3"><span class="enumeration_section">2.3</span>使用DBCA创建和管理数据库</h3>
               <div>
                  <div><span>除非您指定仅安装Oracle数据库软件，否则Oracle Universal Installer（OUI）会在软件安装完成后自动运行Database Configuration Assistant（DBCA）。</span> 然后，DBCA使用您提供的信息创建数据库。如果您不创建启动数据库，以后想要创建启动数据库，或者要创建其他数据库，请使用DBCA。</div>
                  <div class="infoboxnote" id="GUID-2A1B1AF2-CC36-405A-89EB-72E7A33F7E2B__GUID-784D35A2-7818-400C-8EC9-F68608AEEAFC">
                     <p class="notep1">注意：</p>
                     <p>使用Oracle数据库，您通常拥有一个托管多个应用程序的数据库。您不需要多个数据库来运行不同的应用程序。相反，您可以将支持每个不同应用程序的对象分离到同一数据库中的不同<span class="italic">模式</span>中。但是，在某些情况下，您可能希望在同一台主机上创建多个Oracle数据库。使用DBCA执行此操作时，新数据库通常使用与第一个数据库相同的Oracle主目录，但将数据库数据文件与第一个数据库的数据库文件分开存储。
                     </p>
                  </div>
                  <p>DBCA还允许您修改数据库配置，删除数据库等。您可以执行以下DBCA任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></p>
                     </li>
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-3584C0F1-E59E-4EB6-9566-55D325DDA9AD" title="通过Database Configuration Assistant（DBCA），您可以按照分步指导的工作流程创建Oracle数据库。">使用DBCA创建数据库</a></p>
                     </li>
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-FA73C24D-64ED-419C-A9F5-3550BFEA64EA" title="您可以使用Database Configuration Assistant（DBCA）更改现有数据库的配置。">使用DBCA更改数据库的配置</a></p>
                     </li>
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-C0DDA1A8-90CE-4A99-8C3B-B72A40D96D0B" title="您可以使用Database Configuration Assistant（DBCA）删除数据库。">使用DBCA删除数据库</a></p>
                     </li>
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-2B8A3B5E-D319-4377-8B22-8BB67DCC9885" title="Database Configuration Assistant（DBCA）模板是包含创建数据库所需信息的XML文件。DBCA中使用模板来创建新数据库并复制现有数据库。">使用DBCA管理模板</a></p>
                     </li>
                     <li>
                        <p><a href="installing-oracle-database-creating-database.html#GUID-42F4AB20-8DD8-48B3-B7B9-FCC151C06987" title="当存在多租户容器数据库（CDB）时，您可以使用Database Configuration Assistant（DBCA）在CDB中执行可插入数据库（PDB）操作。">使用DBCA管理PDB</a></p>
                     </li>
                  </ul>
                  <p>单击“ <span class="bold">帮助”</span>可以获得联机<span class="bold">帮助</span> 。它提供的信息可指导您选择配置选项。
                  </p>
               </div><a id="ADMQS12125"></a><a id="ADMQS0231"></a><div class="props_rev_3"><a id="GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" name="GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD"></a><h4 id="ADMQS-GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" class="sect4"><span class="enumeration_section">2.3.1</span>启动DBCA</h4>
                  <div>
                     <p>本节介绍如何启动Database Configuration Assistant（DBCA）。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD__GUID-D1FECB4E-6F0C-487D-9C56-67359385C6C9">
                           <p class="notep1">注意：</p>
                           <p>如果选择在安装Oracle数据库软件时创建入门数据库，则Oracle Universal Installer（OUI）会自动启动DBCA。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD__GUID-BFC6616F-44EA-4197-B6B5-BDC3261ED798">要启动DBCA：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以有权安装Oracle数据库软件并创建和运行数据库的管理组成员的身份登录计算机。</span></li>
                        <li class="stepexpand"><span>执行以下操作之一：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要在Microsoft Windows操作系统上启动DBCA，请单击“ <span class="bold">开始”</span> ，选择“ <span class="bold">程序”</span> （或“ <span class="bold">所有程序”</span> ），然后选择“ <span class="bold">Oracle  -</span> <span class="italic"><span class="bold">HOME_NAME”</span></span> ，“ <span class="bold">配置和迁移工具”</span> ，再选择“ <span class="bold">数据库配置助手”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要在UNIX或Linux上启动DBCA，或在Windows操作系统上的命令行提示符下启动DBCA，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">DBCA</pre><p><code class="codeph">dbca</code>实用程序通常位于<span class="italic"><code class="codeph"><span class="codeinlineitalic"><code class="codeph">ORACLE_HOME</code></span></code></span> <code class="codeph">/bin</code>目录中。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12126"></a><a id="ADMQS0232"></a><div class="props_rev_3"><a id="GUID-3584C0F1-E59E-4EB6-9566-55D325DDA9AD" name="GUID-3584C0F1-E59E-4EB6-9566-55D325DDA9AD"></a><h4 id="ADMQS-GUID-3584C0F1-E59E-4EB6-9566-55D325DDA9AD" class="sect4"><span class="enumeration_section">2.3.2</span>使用DBCA创建数据库</h4>
                  <div>
                     <p>通过Database Configuration Assistant（DBCA），您可以按照分步指导的工作流程创建Oracle数据库。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3584C0F1-E59E-4EB6-9566-55D325DDA9AD__GUID-9A601B6C-3102-48E1-9B17-FCC86A88EFF7">使用DBCA创建数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>按<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="This section describes how to start Database Configuration Assistant (DBCA).">启动DBCA</a> ”</span>中的说明<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></span> 。</span></li>
                        <li><span><a id="d5037e1522" class="indexterm-anchor"></a>在Database Operation窗口中，选择<span class="bold">Create a database</span>并单击<span class="bold">Next</span>以启动用于创建数据库的指导工作流。如果您随后选择“ <span class="bold">高级模式”</span>并单击“ <span class="bold">下一步”</span> ，则工作流会在以下窗口中请求您的输入：</span></li>
                     </ol>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-4EFA14AD-37E6-43A8-88F5-7574EB06ACB9" title="通过Database Configuration Assistant（DBCA）创建模式窗口，您可以创建具有典型配置或高级配置的数据库。">DBCA创建模式窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-157FFD6E-04B0-46D8-A6C9-A9362E5D717D" title="Database Configuration Assistant（DBCA）部署类型窗口允许您选择用于创建数据库的数据库模板的类型。">DBCA部署类型窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-38477526-1CA5-49DD-9C61-F99C96D8CFE6" title="在“数据库配置助手（DBCA）数据库标识”窗口的“全局数据库名称”字段中，以database_name.domain_name格式输入数据库名称。">DBCA数据库识别窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-48D4F967-B447-4DB4-BFCD-F1E08BB91552" title="在“数据库配置助手（DBCA）存储选项”窗口中，指定数据库的存储选项。">DBCA存储选项窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-390885BE-7455-4EC0-AF69-870F6B74DC42" title="DBCA快速恢复选项窗口使您可以为数据库配置备份和恢复区域。">DBCA快速恢复选项窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-DE22D504-4BCC-4592-AECA-EDEF75533480" title="在Database Configuration Assistant（DBCA）网络配置窗口中，将显示当前Oracle主目录中的侦听器。">DBCA网络配置窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-C273DC80-842C-4853-B34D-92CF8742BF15" title="通过Database Configuration Assistant（DBCA）Database Vault Option窗口，您可以为数据库配置Oracle Database Vault和Oracle Database Label Security。">DBCA数据库库选项窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-6BB6422C-296D-4040-9A78-5ADED91FCF44" title="“数据库配置助手”（DBCA）“配置选项”窗口中的链接提供对其他窗口的访问，使您可以进一步配置数据库。">DBCA配置选项窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-C617CBCD-B9E8-4458-A000-67D27E1D6A33" title="使用Database Configuration Assistant（DBCA）管理选项窗口设置数据库，以便可以使用Oracle Enterprise Manager进行管理。">DBCA管理选项窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-0711B83C-CA06-4869-AEAF-D406758B9E1D" title="在“数据库配置助手（DBCA）用户凭据”窗口中，指定管理帐户的密码，例如SYS，SYSTEM和PDBADMIN。">DBCA用户凭据窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-86C6F0BB-9274-4B7A-AD98-62CD50C89C6F" title="Database Configuration Assistant（DBCA）创建选项窗口允许您选择用于创建数据库的不同选项。">DBCA创建选项窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-782D8C37-473B-42F2-AF5E-7975DE9CF421" title="“数据库配置助手（DBCA）摘要”窗口显示您为数据库选择的配置选项的摘要。">DBCA摘要窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-41D812A9-4073-472B-946F-8B97FD233B4E" title="Database Configuration Assistant（DBCA）Progress窗口显示数据库创建操作的进度。">DBCA进度窗口</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-6B4E99C9-36C5-4D9B-BDDA-4931F554EBDA" title="DBCA完成数据库配置后，将显示DBCA Finish窗口。">DBCA完成窗口</a></p>
                           </li>
                        </ul>
                        <p>大多数这些窗口都提供默认设置。根据您在DBCA中选择的选项，可能无法显示其中一些窗口。</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADMQS12393"></a><div class="props_rev_3"><a id="GUID-4EFA14AD-37E6-43A8-88F5-7574EB06ACB9" name="GUID-4EFA14AD-37E6-43A8-88F5-7574EB06ACB9"></a><h5 id="ADMQS-GUID-4EFA14AD-37E6-43A8-88F5-7574EB06ACB9" class="sect5"><span class="enumeration_section">2.3.2.1</span> DBCA创建模式窗口</h5>
                     <div>
                        <p>通过Database Configuration Assistant（DBCA）创建模式窗口，您可以创建具有典型配置或高级配置的数据库。</p>
                        <div class="section">
                           <p>如果选择“ <span class="bold">高级配置”</span> ，则可以为管理员用户帐户自定义存储位置，管理选项，数据库选项和不同密码。
                           </p>
                           <p>如果选择“ <span class="bold">典型配置”</span> ，则可以在数据库选项中做出较少的选择，这样可以更快地创建数据库。
                           </p>
                           <p>选择“ <span class="bold">典型配置”时</span> ，可以选择以下选项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">全局数据库名</span> ：形式<span class="italic">database_name.domain_name</span>输入数据库名称。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">存储类型</span> ：选择“ <span class="bold">文件系统”</span>或“ <span class="bold">自动存储管理”</span> 。
                                 </p>
                                 <p>选择“ <span class="bold">文件系统”时</span> ，数据库文件由操作系统的文件系统管理。
                                 </p>
                                 <p>选择“ <span class="bold">自动存储管理”时</span> ，将数据文件放在Oracle自动存储管理（Oracle ASM）磁盘组中。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">数据库文件位置</span> ：您对“ <span class="bold">存储类型”</span>选项所做的选择决定了您为“ <span class="bold">数据库文件位置”</span>选项指定的内容。
                                 </p>
                                 <p>在“ <span class="bold">存储类型”</span>字段中选择“ <span class="bold">文件系统”</span>时，可以在“ <span class="bold">数据库文件位置”</span>字段中指定要存储数据库文件的目录路径。Oracle数据库可以创建和管理实际文件。
                                 </p>
                                 <p>在“ <span class="bold">存储类型”</span>字段中选择“ <span class="bold">自动存储管理”</span>时，可以在“ <span class="bold">数据库文件位置”</span>字段中指定要使用的磁盘组（磁盘组必须已存在）。使用Oracle ASM，Oracle数据库可自动管理数据库文件放置和命名。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">快速恢复区（FRA）</span> ：指定备份和恢复区域。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">数据库字符集</span> ：选择要用于数据库的字符集。有关<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D" title="Use the Character sets tab of the Database Configuration Assistant (DBCA) Configuration Options window to determine how character data is stored in the database.">字符集</a></span>的更多信息，请参见<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D" title="使用“数据库配置助手”（DBCA）“配置选项”窗口的“字符集”选项卡可确定字符数据在数据库中的存储方式。">字符集</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">管理密码</span> ：输入用于数据库管理密码的密码（例如<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>帐户）。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">用户“Oracle Home User”密码</span> <span class="italic">（仅限Microsoft Windows操作系统）</span> ：如果在安装过程中您指定了一个非管理员，低权限的Windows用户帐户（作为Oracle Home User）来运行数据库服务，则会提示您输入该用户帐户的密码。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">创建为容器数据库</span> ：启用此选项<a id="d5037e1804" class="indexterm-anchor"></a><a id="d5037e1808" class="indexterm-anchor"></a>将数据库创建为多租户容器数据库（CDB），可以支持零个，一个或多个用户创建的可插拔数据库（PDB）。
                                 </p>
                                 <p>如果希望DBCA在创建CDB时创建PDB，请在“ <span class="bold">可插入数据库名称”</span>字段中指定PDB名称。
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-4EFA14AD-37E6-43A8-88F5-7574EB06ACB9__GUID-B3082120-C159-442C-9CD4-0577AB27542C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=NTQRF672" target="_blank"><span class="italic">适用于Microsoft Windows的Oracle数据库平台指南，</span></a>以获取有关Oracle Home User功能的更多信息</p>
                                 </li>
                                 <li>
                                    <p>有关CDB和PDB简介的<a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Multitenant管理员指南</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关管理CDB和PDB的信息，请参阅<a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS02321"></a><div class="props_rev_3"><a id="GUID-157FFD6E-04B0-46D8-A6C9-A9362E5D717D" name="GUID-157FFD6E-04B0-46D8-A6C9-A9362E5D717D"></a><h5 id="ADMQS-GUID-157FFD6E-04B0-46D8-A6C9-A9362E5D717D" class="sect5"><span class="enumeration_section">2.3.2.2</span> DBCA部署类型窗口</h5>
                     <div>
                        <div><span>Database Configuration Assistant（DBCA）部署类型窗口允许您选择用于创建数据库的数据库模板的类型。</span> 你可以选择：</div>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">数据仓库</span></p>
                              </li>
                              <li>
                                 <p><span class="bold">通用或交易处理</span></p>
                              </li>
                              <li>
                                 <p><span class="bold">定制数据库</span></p>
                              </li>
                           </ul>
                           <p>Oracle Enterprise Manager Database Express（EM Express）支持Oracle单实例数据库，包括非CDB，多租户容器数据库（CDB）和可插拔数据库（PDB）。</p>
                           <p>您可以使用DBCA从Oracle提供的模板或您创建的模板创建数据库。模板包含针对特定类型的工作负载优化的设置。</p>
                           <p>Oracle提供以下两种工作负载类型的模板：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>通用或交易处理</p>
                              </li>
                              <li>
                                 <p>数据仓库</p>
                              </li>
                           </ul>
                           <p>选择适合您的数据库将支持的工作负载类型的模板。如果您不确定选择哪个，请选择默认的<span class="bold">通用或事务处理</span>模板。
                           </p>
                           <div class="infoboxnote" id="GUID-157FFD6E-04B0-46D8-A6C9-A9362E5D717D__GUID-1EC9A0A6-948F-472D-BECD-9179B857CFED">
                              <p class="notep1">注意：</p>
                              <p>通用或事务模板和数据仓库模板创建一个<code class="codeph">COMPATIBLE</code>初始化参数设置为<code class="codeph">12.2.0.0.0</code> 。
                              </p>
                           </div>
                           <p>对于更复杂的环境，您可以选择“ <span class="bold">自定义数据库”</span>选项。此选项不使用模板并导致更广泛的访谈，这意味着创建数据库需要更长的时间。
                           </p>
                           <div class="infoboxnotealso" id="GUID-157FFD6E-04B0-46D8-A6C9-A9362E5D717D__GUID-841DE0BC-61FE-4F06-AF16-CB7363542F69">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">COMPATIBLE</code>初始化参数的更多信息，请<a href="../refrn/COMPATIBLE.html#REFRN10019" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-2B8A3B5E-D319-4377-8B22-8BB67DCC9885" title="Database Configuration Assistant（DBCA）模板是包含创建数据库所需信息的XML文件。DBCA中使用模板来创建新数据库并复制现有数据库。">使用DBCA管理模板</a> ”</span>以获取有关使用数据库模板的更多信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS02322"></a><div class="props_rev_3"><a id="GUID-38477526-1CA5-49DD-9C61-F99C96D8CFE6" name="GUID-38477526-1CA5-49DD-9C61-F99C96D8CFE6"></a><h5 id="ADMQS-GUID-38477526-1CA5-49DD-9C61-F99C96D8CFE6" class="sect5"><span class="enumeration_section">2.3.2.3</span> DBCA数据库识别窗口</h5>
                     <div>
                        <p>在数据库配置助手（DBCA）数据库标识窗口的<span class="bold">全局数据库名</span>场，形式<span class="italic">数据库名称</span>输入数据库名。 <span class="italic">domain_name</span> 。
                        </p>
                        <div class="section">
                           <p>在<span class="bold">SID</span>字段中，输入系统标识符。SID默认为数据库名称，并唯一标识运行数据库的实例。
                           </p>
                           <p>如果启用“ <span class="bold">创建为容器”数据库</span>选项，则会将数据库创建为<a id="d5037e1987" class="indexterm-anchor"></a><a id="d5037e1991" class="indexterm-anchor"></a>多租户容器数据库（CDB），可以支持零个，一个或多个用户创建的可插拔数据库（PDB）。
                           </p>
                           <p>如果您不希望DBCA在创建CDB时创建PDB，请启用“ <span class="bold">创建空容器数据库”</span>选项。
                           </p>
                           <p>如果您希望DBCA在创建CDB时创建一个或多个PDB，请启用“ <span class="bold">使用一个或多个PDB创建容器数据库”</span>选项。然后在“PDB <span class="bold">数量”</span>字段中输入要创建<span class="bold">的PDB</span>数。在“ <span class="bold">PDB名称”</span>字段中，指定要用于创建PDB或PDBS的名称。创建多个PDB时，您指定的PDB名称将用作要创建的PDB的前缀。例如，如果要求创建3个PDB并将SANDBOXPDB指定为PDB名称，则创建的PDB的名称将为SANDBOXPDB1，SANDBOXPDB2和SANDBOXPDB3。
                           </p>
                           <div class="infoboxnotealso" id="GUID-38477526-1CA5-49DD-9C61-F99C96D8CFE6__GUID-051AE7AB-521A-4319-BE8A-51AFA743364A">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关CDB和PDB简介的<a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Multitenant管理员指南</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关管理CDB和PDB的信息，请参阅<a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS02326"></a><div class="props_rev_3"><a id="GUID-48D4F967-B447-4DB4-BFCD-F1E08BB91552" name="GUID-48D4F967-B447-4DB4-BFCD-F1E08BB91552"></a><h5 id="ADMQS-GUID-48D4F967-B447-4DB4-BFCD-F1E08BB91552" class="sect5"><span class="enumeration_section">2.3.2.4</span> DBCA存储选项窗口</h5>
                     <div>
                        <p>在“数据库配置助手（DBCA）存储选项”窗口中，指定数据库的存储选项。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="uicontrol bold">将模板文件用于数据库存储属性</span> - 此选项指示DBCA使用模板中指定的目录信息。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="uicontrol bold">对数据库存储属性使用以下命令</span> - 此选项要求您指定数据库文件的存储位置。
                                 </p>
                                 <p>使用此选项，您需要选择如何管理数据库文件：</p>
                                 <p>如果选择“ <span class="uicontrol bold">文件系统”</span> ，则数据库文件由操作系统的文件系统管理。
                                 </p>
                                 <p>如果选择<span class="uicontrol bold">自动存储管理（ASM）</span> ，则将数据文件放在Oracle自动存储管理（Oracle ASM）磁盘组中。
                                 </p>
                                 <p>如果指定<span class="uicontrol bold">使用Oracle托管文件（OMF）</span>选项，Oracle数据库将直接管理包含Oracle数据库的操作系统文件。您为所有文件指定默认位置（称为数据库区域）。此后，Oracle数据库会根据需要自动创建和删除此位置中的文件。选择此选项时，将数据库文件的完整管理委派给数据库。您不必再指定文件名，位置或大小。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-390885BE-7455-4EC0-AF69-870F6B74DC42" name="GUID-390885BE-7455-4EC0-AF69-870F6B74DC42"></a><h5 id="ADMQS-GUID-390885BE-7455-4EC0-AF69-870F6B74DC42" class="sect5"><span class="enumeration_section">2.3.2.5</span> DBCA快速恢复选项窗口</h5>
                     <div>
                        <p>DBCA快速恢复选项窗口使您可以为数据库配置备份和恢复区域。</p>
                        <div class="section">
                           <p>然后指定Oracle数据库文件的位置。选择以下选项之一：</p>
                           <p>创建新数据库时，配置数据库非常重要，以便在发生系统故障时恢复数据。联机重做日志文件包含对数据文件所做更改的记录。联机重做日志文件存储在联机重做日志组中。您的数据库必须至少有两个联机重做日志组。在组中的联机重做日志文件填满后，日志写入器进程（LGWR）将重做记录的写入切换到新的联机重做日志组。Oracle数据库可以自动将非活动的联机重做日志文件组保存到一个或多个脱机目标，统称为<span class="bold">归档重做日志</span> （也称为归档日志）。将联机重做日志文件转换为归档重做日志文件的过程称为<span class="bold">归档</span> 。
                           </p>
                           <p>仅当数据库在<code class="codeph">ARCHIVELOG</code>模式下运行时，才能执行存档。在归档组之前，日志写入程序（LGWR）进程无法重用一组联机重做日志文件。如果数据库在<code class="codeph">NOARCHIVELOG</code>模式下运行，则当LGWR进程切换到新组后组变为非活动状态时，非活动组可供LGWR进程立即重用。
                           </p>
                           <p><code class="codeph">NOARCHIVELOG</code>模式保护数据库免受实例故障的影响，但不保护介质故障。只有对数据库所做的最新更改（存储在联机重做日志文件中）才可用于实例恢复。要还原在<code class="codeph">NOARCHIVELOG</code>模式下运行的数据库，只能在数据库关闭时使用整个数据库备份。因此，如果在<code class="codeph">NOARCHIVELOG</code>模式下操作数据库，则定期，频繁地备份整个数据库。
                           </p>
                           <p>在线重做日志文件的归档具有以下优点：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>具有联机和归档重做日志文件的数据库备份可确保在操作系统或硬件发生故障时可以恢复所有已提交的事务。</p>
                              </li>
                              <li>
                                 <p>如果您拥有在备份数据库时写入的归档日志文件的副本，则可以使用在数据库打开和使用时执行的备份来恢复数据库。</p>
                              </li>
                              <li>
                                 <p>您可以执行联机表空间备份，并使用这些备份在介质故障后还原表空间。</p>
                              </li>
                              <li>
                                 <p>通过将原始归档重做日志文件连续应用于备用数据库，可以使备用数据库与其原始数据库保持同步。</p>
                              </li>
                           </ul>
                           <p>在归档联机重做日志文件之前，必须确定要归档的目标。Oracle建议将归档日志存储在快速恢复区中，因为它可以简化数据库的备份和恢复操作。<span class="bold">快速恢复区域</span>是Oracle数据库可以存储和管理与备份和恢复相关的文件的位置。它与数据库区域不同，数据库区域是当前数据库文件（数据文件，控制文件和联机重做日志文件）的位置。
                           </p>
                           <p>创建数据库时，可以选择以下选项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="uicontrol bold">指定快速恢复区 -</span>选择此选项可指定备份和恢复区域及其目录位置和大小。您可以使用变量来标识标准位置。
                                 </p>
                                 <div class="p">使用此选项，您还可以选择以下字段：<ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="uicontrol bold">恢复文件存储类型</span> - 指定用于快速恢复区域的目录。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="uicontrol bold">快速恢复区</span> - 指定您希望数据库用于恢复相关文件的存储类型。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="uicontrol bold">快速恢复区域大小</span> - 指定<span class="uicontrol bold">快速恢复区域的大小</span> 。
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p><span class="uicontrol bold">启用存档 -</span>选择此选项可启用数据库联机重做日志文件的存档，该文件可用于恢复数据库。选择此选项与在<code class="codeph">ARCHIVELOG</code>模式下运行数据库相同。
                                 </p>
                                 <p>Oracle建议您选择“ <span class="bold">启用存档”</span> 。选择此选项可为数据库提供更好的软件或硬件故障保护。如果您现在不选择此选项，则可以稍后启用ARCHIVELOG模式。请参阅<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="本节介绍如何设置数据库以利用Oracle建议的备份策略。">为基本备份和恢复配置数据库</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12457"></a><div class="props_rev_3"><a id="GUID-DE22D504-4BCC-4592-AECA-EDEF75533480" name="GUID-DE22D504-4BCC-4592-AECA-EDEF75533480"></a><h5 id="ADMQS-GUID-DE22D504-4BCC-4592-AECA-EDEF75533480" class="sect5"><span class="enumeration_section">2.3.2.6</span> DBCA网络配置窗口</h5>
                     <div>
                        <div><span>在Database Configuration Assistant（DBCA）网络配置窗口中，将显示当前Oracle主目录中的侦听器。</span> 如果要在当前Oracle主目录中创建新侦听器，可以在“网络配置”窗口中执行此操作。
                        </div>
                     </div>
                  </div><a id="ADMQS02328"></a><div class="props_rev_3"><a id="GUID-C273DC80-842C-4853-B34D-92CF8742BF15" name="GUID-C273DC80-842C-4853-B34D-92CF8742BF15"></a><h5 id="ADMQS-GUID-C273DC80-842C-4853-B34D-92CF8742BF15" class="sect5"><span class="enumeration_section">2.3.2.7</span> DBCA数据库库选项窗口</h5>
                     <div>
                        <p>通过Database Configuration Assistant（DBCA）Database Vault Option窗口，您可以为数据库配置Oracle Database Vault和Oracle Database Label Security。</p>
                        <div class="section">
                           <p>您可以在此窗口中配置Oracle Database Vault和Oracle Label Security，也可以单击“ <span class="uicontrol bold">下一步”</span>继续通过DBCA，而无需配置Oracle Database Vault和Oracle Label Security。
                           </p>
                           <div class="infoboxnotealso" id="GUID-C273DC80-842C-4853-B34D-92CF8742BF15__GUID-82133DFD-D70A-4B2D-B811-2FFBBD4D93E2">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM001" target="_blank"><span class="italic">有关Oracle Database Vault的</span></a>详细信息，请参见<a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM001" target="_blank"><span class="italic">“Oracle Database Vault管理员指南”</span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../olsag/introduction-to-oracle-label-security.html#OLSAG001" target="_blank"><span class="italic">有关Oracle Label Security的</span></a>详细信息，请参阅<a href="../olsag/introduction-to-oracle-label-security.html#OLSAG001" target="_blank"><span class="italic">“Oracle Label Security管理员指南”</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS02329"></a><div class="props_rev_3"><a id="GUID-6BB6422C-296D-4040-9A78-5ADED91FCF44" name="GUID-6BB6422C-296D-4040-9A78-5ADED91FCF44"></a><h5 id="ADMQS-GUID-6BB6422C-296D-4040-9A78-5ADED91FCF44" class="sect5"><span class="enumeration_section">2.3.2.8</span> DBCA配置选项窗口</h5>
                     <div>
                        <p>“数据库配置助手”（DBCA）“配置选项”窗口中的链接提供对其他窗口的访问，使您可以进一步配置数据库。</p>
                        <p>例如，您可以使用此窗口为数据库配置以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-58B107F9-3009-4E88-9136-C0B020CB8297" title="使用Database Configuration Assistant（DBCA）配置选项窗口的Memory选项卡控制数据库管理其内存的方式。">记忆</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-FACA06D5-8BB7-43D1-AE43-110BBA3E4837" title="在“数据库配置助手（DBCA）配置选项”窗口的“大小调整”选项卡中，指定可以同时连接到数据库的最小块大小和最大操作系统用户进程数。">浆纱</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D" title="使用“数据库配置助手”（DBCA）“配置选项”窗口的“字符集”选项卡可确定字符数据在数据库中的存储方式。">字符集</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-74B81780-1E65-400C-A5A4-380715C84515" title="使用Database Configuration Assistant（DBCA）配置选项窗口的“连接模式”选项卡选择数据库连接模式。">连接模式</a></p>
                           </li>
                           <li>
                              <p><a href="installing-oracle-database-creating-database.html#GUID-5A53654C-12AA-4AD0-95CF-C0D771E7F10F" title="使用Database Configuration Assistant（DBCA）配置选项窗口的“示例模式”选项卡配置Oracle数据库示例模式。">示例模式</a></p>
                           </li>
                        </ul>
                     </div><a id="ADMQS02332"></a><div class="props_rev_3"><a id="GUID-58B107F9-3009-4E88-9136-C0B020CB8297" name="GUID-58B107F9-3009-4E88-9136-C0B020CB8297"></a><h6 id="ADMQS-GUID-58B107F9-3009-4E88-9136-C0B020CB8297" class="sect6"><span class="enumeration_section">2.3.2.8.1</span>记忆</h6>
                        <div>
                           <p>使用Database Configuration Assistant（DBCA）配置选项窗口的Memory选项卡控制数据库管理其内存的方式。</p>
                           <div class="section">
                              <p>您可以选择以下内存管理方法：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">使用自动共享内存管理</span></p>
                                    <p>此方法使您可以为SGA分配特定数量的内存并聚合PGA。为SGA启用自动共享内存管理，并根据需要将内存分配给各个PGA。</p>
                                    <p>要了解有关SGA和PGA的更多信息，请参阅<span class="q">“ <a href="managing-the-oracle-instance.html#GUID-5B7510F1-C811-4B74-A847-7C9D67CA933E" title="实例内存结构的大小会影响数据库性能，并由初始化参数控制。">关于实例内存结构</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">使用手动共享内存管理</span></p>
                                    <p>此方法要求您为每个SGA组件和聚合PGA输入特定值。您可以确定SGA内存在SGA内存组件之间的分布情况。此方法适用于有经验的Oracle数据库管理员。</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">使用自动内存管理</span></p>
                                    <p>此方法要求您在<span class="uicontrol bold">Memory target</span>字段中设置Oracle系统范围的可用内存，然后系统会自动调整SGA的许多内存组件，并根据需要为各个PGA分配内存。系统还可以动态地减少或增加分配给SGA或聚合PGA的内存总量，具体取决于处理需求。用于数据库实例的总内存永远不会超过您指定的数量。
                                    </p>
                                    <div class="infoboxnote" id="GUID-58B107F9-3009-4E88-9136-C0B020CB8297__GUID-FC87DEA3-A146-457C-8FCB-E6C90496ECFC">
                                       <p class="notep1">注意：</p>
                                       <p>如果数据库实例的总物理内存大于4 GB，则无法选择“ <span class="uicontrol bold">使用自动内存管理”</span>选项。而是使用自动共享内存管理。自动共享内存管理根据需要自动在各种组件之间分配可用内存，从而允许系统最大限度地使用所有可用的SGA内存。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-58B107F9-3009-4E88-9136-C0B020CB8297__GUID-001630CE-D0FE-4ACC-8D1E-E87A8D5DE559">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关内存管理选项的更多信息，请参阅<span class="q">“ <a href="managing-the-oracle-instance.html#GUID-579B4CD1-8A8D-4F6B-BBDF-EEC4DFEC98CD" title="本章提供有关Oracle实例的背景信息以及管理实例的说明。">管理Oracle实例</a> ”</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS02333"></a><div class="props_rev_3"><a id="GUID-FACA06D5-8BB7-43D1-AE43-110BBA3E4837" name="GUID-FACA06D5-8BB7-43D1-AE43-110BBA3E4837"></a><h6 id="ADMQS-GUID-FACA06D5-8BB7-43D1-AE43-110BBA3E4837" class="sect6"><span class="enumeration_section">2.3.2.8.2</span>尺寸</h6>
                        <div>
                           <p>在“数据库配置助手（DBCA）配置选项”窗口的“大小调整”选项卡中，指定可以同时连接到数据库的最小块大小和最大操作系统用户进程数。</p>
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a id="d5037e2500" class="indexterm-anchor"></a> <span class="bold">块大小 -</span>使用此列表选择块大小，或接受默认值。Oracle数据库数据存储在指定大小的数据块中。一个数据块对应于磁盘上特定数量的物理空间字节。选择除默认的8千字节（KB）值以外的块大小需要高级知识，并且只有在绝对需要时才应该完成。
                                    </p>
                                    <p>使用预定义模板时，未启用此列表，因为将使用默认块大小8 KB创建数据库。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">进程</span> - 在此字段中，指定可以同时连接到数据库的最大进程数。输入一个数字或接受默认值320。此参数的默认值适用于许多环境。您选择的值应该允许所有<a id="d5037e2514" class="indexterm-anchor"></a>后台进程，用户进程和并行执行进程。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS02334"></a><div class="props_rev_3"><a id="GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D" name="GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D"></a><h6 id="ADMQS-GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D" class="sect6"><span class="enumeration_section">2.3.2.8.3</span>字符集</h6>
                        <div>
                           <div><span>使用“数据库配置助手”（DBCA）“配置选项”窗口的“字符集”选项卡可确定字符数据在数据库中的存储方式。</span> <span class="bold">字符集</span>是用于在计算机屏幕上显示字符的编码方案。字符集确定可以在数据库中表示的语言。
                           </div>
                           <div class="section">
                              <p>Oracle建议使用Unicode（AL32UTF8）作为数据库字符集。AL32UTF8是Oracle标准的UTF-8编码的名称。Unicode标准是通用字符集，支持世界上大多数当前使用的语言。Unicode标准的使用对于任何多语言技术都是必不可少的，包括数据库处理。</p>
                              <p>创建数据库并累积生产数据后，更改数据库字符集是一个耗时且复杂的项目。因此，在安装时选择正确的字符集非常重要。即使数据库当前没有存储多语言数据，但预计会在几年内存储多语言数据，但AL32UTF8对数据库字符集的选择通常是唯一的好决定。</p>
                              <p>如果创建多租户容器数据库（CDB），请考虑选择的字符集确定以后可以将哪些其他数据库插入CDB。只有具有兼容数据库字符集的数据库才能插入CDB。</p>
                              <p>Oracle Universal Installer（OUI）和DBCA用于UNIX，Linux和Microsoft Windows平台的默认字符集不是AL32UTF8，而是称为ANSI代码页的Microsoft Windows字符集。根据启动OUI或DBCA的操作系统会话的当前语言（区域设置）选择特定字符集。如果语言是美国英语或西欧语言，则默认字符集为WE8MSWIN1252。每个Microsoft Windows ANSI代码页只能存储来自一种语言或有限语言组的数据，例如仅限西欧语言，或仅存储东欧语言，或仅存储日语。</p>
                              <p>即使对于在UNIX和Linux平台上创建的数据库，Microsoft Windows字符集也是默认设置，因为Microsoft Windows是客户端工作站的流行平台。Oracle客户端库自动在数据库字符集和非Windows客户端应用程序使用的字符集之间执行必要的字符集转换。</p>
                              <p>您还可以选择使用显示的字符集列表中的任何其他字符集。您可以使用此选项选择应用程序供应商所需的特定字符集，或选择特定字符集，该字符集是连接到此数据库的所有客户端使用的公共字符集。</p>
                              <p>由于AL32UTF8是一个多字节字符集，因此与单字节数据库字符集（如WE8MSWIN1252）相比，对字符数据的数据库操作可能会稍微慢一些。与支持该语言的传统字符集相比，AL32UTF8中使用ASCII指令集以外的字符的大多数语言的文本的存储空间要求更高。请注意，存储空间的增加仅涉及字符数据，而仅涉及非英语数据。Unicode的普遍性和灵活性通常超过了这些额外的成本。</p>
                              <p>为数据库字符集选择以下选项之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">使用Unicode（AL32UTF8） -</span>选择此选项可为数据库用户和数据库应用程序支持多种语言。
                                    </p>
                                    <div class="infoboxnote" id="GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D__GUID-279F167E-3864-45DE-A347-841B8DA2C665">
                                       <p class="notep1">注意：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>AL32UTF8是一个可变宽度的多字节字符集。连接到使用AL32UTF8进行字符数据处理的数据库的应用程序必须正确编程才能使用此类字符集。始终验证使用数据库的应用程序的字符集要求。如果您当前的应用程序版本不支持Unicode标准，请联系应用程序供应商并要求提供支持Unicode的版本。</p>
                                          </li>
                                          <li>
                                             <p>Oracle建议使用AL32UTF8作为数据库字符集。AL32UTF8是Unicode编码UTF-8的正确实现。从Oracle Database 12c第2版开始，在使用OUI和DBCA创建数据库时，AL32UTF8用作默认数据库字符集。</p>
                                          </li>
                                          <li>
                                             <p>不要使用UTF8作为数据库字符集，因为它不是Unicode编码UTF-8的正确实现。如果在预期使用UTF-8处理的情况下使用UTF8字符集，则可能会发生数据丢失和安全问题。对于Web相关数据（例如XML和URL地址）尤其如此。</p>
                                          </li>
                                          <li>
                                             <p>AL32UTF8和UTF8字符集彼此不兼容，因为它们具有不同的最大字符宽度（每个字符四个对三个字节）。</p>
                                          </li>
                                       </ul>
                                    </div>
                                 </li>
                                 <li>
                                    <p><span class="bold">使用OS字符集（WE8MSWIN1252） -</span>选择此选项可仅为所有数据库用户和数据库应用程序选择操作系统当前使用的语言。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">从字符集列表中进行</span>选择 - 如果希望Oracle数据库使用除操作系统使用的默认字符集之外的字符集<span class="bold">，请</span>选择此选项。
                                    </p>
                                 </li>
                              </ul>
                              <p>选择国家字符集：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">国家字符集 -</span>在此列表中，选择一个字符集或接受默认值。国家字符集，也称为<code class="codeph">NCHAR</code>字符集，是用于存储和处理数据类型<code class="codeph">NVARCHAR2</code> ， <code class="codeph">NCHAR</code>和<code class="codeph">NCLOB</code>的数据的字符集。这些数据类型允许在没有Unicode数据库字符集的数据库中存储Unicode字符。除非您的任何应用程序的安装要求另有说明，否则请接受AL16UTF16的默认值作为国家字符集。
                                    </p>
                                    <div class="infoboxnote" id="GUID-D2FC796C-4FE1-4B97-A4DE-55F9FF2B106D__GUID-5E722C92-7D29-4C9D-9A2D-511D2B4AEBE3">
                                       <p class="notep1">注意：</p>
                                       <p>虽然这个字符集在SQL标准（ISO / IEC 9075）之后被称为“国家”，但它不适合支持全局化应用程序而不是数据库字符集。因为使用国家字符集数据需要在客户端应用程序中进行额外的API调用，并且由于某些数据库组件（如Oracle Text）不支持国家字符集数据，Oracle建议多语言应用程序使用<code class="codeph">VARCHAR2</code> ， <code class="codeph">CHAR</code>和<code class="codeph">CLOB</code>数据类型以及Oracle数据库与数据库字符集AL32UTF8。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><span class="bold">默认语言</span> - 在此列表中，选择默认数据库语言或接受默认语言。默认语言确定数据库如何支持区域设置敏感信息，如日期和月份缩写，字符数据的默认排序顺序和阅读方向（从左到右或从右到左）。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">默认区域 -</span>在此列表中，选择要遵循其约定的区域名称，以进行日期和星期编号，或接受默认区域。默认区域还会建立默认日期格式，默认十进制字符和组分隔符以及默认的国际标准化组织（ISO）和本地货币符号。例如，在英国，默认日期格式为DD-MON-YYYY，其中DD是月中的日期（1-31），MON是月份的缩写名称，YYYY是4位数年份。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS02335"></a><div class="props_rev_3"><a id="GUID-74B81780-1E65-400C-A5A4-380715C84515" name="GUID-74B81780-1E65-400C-A5A4-380715C84515"></a><h6 id="ADMQS-GUID-74B81780-1E65-400C-A5A4-380715C84515" class="sect6"><span class="enumeration_section">2.3.2.8.4</span>连接方式</h6>
                        <div>
                           <div><span>使用Database Configuration Assistant（DBCA）配置选项窗口的“连接模式”选项卡选择数据库连接模式。</span> 您可以使用以下任一连接模式运行数据库：</div>
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">专用服务器模式</span> - 此模式允许为每个用户进程提供专用服务器进程。当总客户端数量预计很小时（例如，50或更少），请选择此选项。当数据库客户端通常向数据库发出持久的，长时间运行的请求时，您也可以选择此选项。默认情况下，数据库配置为专用服务器进程。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">共享服务器模式 -</span>此模式允许多个客户端连接共享数据库分配的资源池。在配置中使用此模式，其中客户端负载预计会对内存和其他系统资源造成压力。如果选择共享服务器模式，则必须指定在启动数据库实例时要创建的服务器进程数。有关设置此参数的详细信息，请单击“ <span class="uicontrol bold">帮助”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-5A53654C-12AA-4AD0-95CF-C0D771E7F10F" name="GUID-5A53654C-12AA-4AD0-95CF-C0D771E7F10F"></a><h6 id="ADMQS-GUID-5A53654C-12AA-4AD0-95CF-C0D771E7F10F" class="sect6"><span class="enumeration_section">2.3.2.8.5</span>示例模式</h6>
                        <div>
                           <p>使用Database Configuration Assistant（DBCA）配置选项窗口的“示例模式”选项卡配置Oracle数据库示例模式。</p>
                           <div class="section">
                              <p>要在数据库中包含示例模式，请选择“ <span class="uicontrol bold">将示例模式添加到数据库”</span> 。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADMQS02323"></a><div class="props_rev_3"><a id="GUID-C617CBCD-B9E8-4458-A000-67D27E1D6A33" name="GUID-C617CBCD-B9E8-4458-A000-67D27E1D6A33"></a><h5 id="ADMQS-GUID-C617CBCD-B9E8-4458-A000-67D27E1D6A33" class="sect5"><span class="enumeration_section">2.3.2.9</span> DBCA管理选项窗口</h5>
                     <div>
                        <div><span>使用Database Configuration Assistant（DBCA）管理选项窗口设置数据库，以便可以使用Oracle Enterprise Manager进行管理。</span> Oracle Enterprise Manager为各个数据库提供基于Web的管理工具，以及用于管理整个Oracle环境的集中管理工具。
                        </div>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要在本地管理数据库，请选择“ <span class="uicontrol bold">配置企业管理器（EM）数据库快速”</span> 。您可以接受EM Express的已分配端口或输入其他未使用的端口。
                                 </p>
                              </li>
                              <li>
                                 <p>如果主机上安装了Oracle Management Agent，则可以选择“ <span class="uicontrol bold">注册企业管理器（EM）云控制”</span> ，然后指定管理服务的主机和端口以及EM管理员用户名和密码。
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-C617CBCD-B9E8-4458-A000-67D27E1D6A33__GUID-45BA1A2F-0BE3-45DF-B9F7-7C680882C88D">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关Oracle企业管理器云控制的更多信息，请参见<a href="../admin/distributed-database-concepts.html#ADMIN12110" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                                 </div>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS02324"></a><div class="props_rev_3"><a id="GUID-0711B83C-CA06-4869-AEAF-D406758B9E1D" name="GUID-0711B83C-CA06-4869-AEAF-D406758B9E1D"></a><h5 id="ADMQS-GUID-0711B83C-CA06-4869-AEAF-D406758B9E1D" class="sect5"><span class="enumeration_section">2.3.2.10</span> DBCA用户凭据窗口</h5>
                     <div>
                        <p>在“数据库配置助手（DBCA）用户凭据”窗口中，指定管理帐户的密码，例如<code class="codeph">SYS</code> ， <code class="codeph">SYSTEM</code>和<code class="codeph">PDBADMIN</code> 。</p>
                        <div class="section">
                           <p><span class="italic">仅在Microsoft Windows操作系统上：</span>如果在安装期间您指定了非管理员，低权限Windows用户帐户作为Oracle Home User，则系统会提示您输入该用户帐户的密码。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS02337"></a><div class="props_rev_3"><a id="GUID-86C6F0BB-9274-4B7A-AD98-62CD50C89C6F" name="GUID-86C6F0BB-9274-4B7A-AD98-62CD50C89C6F"></a><h5 id="ADMQS-GUID-86C6F0BB-9274-4B7A-AD98-62CD50C89C6F" class="sect5"><span class="enumeration_section">2.3.2.11</span> DBCA创建选项窗口</h5>
                     <div>
                        <p>Database Configuration Assistant（DBCA）创建选项窗口允许您选择用于创建数据库的不同选项。</p>
                        <div class="section">
                           <p>例如，在“数据库配置助手（DBCA）创建选项”窗口中，选择以下任一选项以创建数据库：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">创建数据库 -</span>选择此选项以立即创建数据库。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">另存为数据库模板 -</span>选择此选项可将数据库定义另存为模板，以便以后使用。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">生成数据库创建脚本 -</span>选择此选项可生成可在以后运行的SQL数据库创建脚本。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12395"></a><div class="props_rev_3"><a id="GUID-782D8C37-473B-42F2-AF5E-7975DE9CF421" name="GUID-782D8C37-473B-42F2-AF5E-7975DE9CF421"></a><h5 id="ADMQS-GUID-782D8C37-473B-42F2-AF5E-7975DE9CF421" class="sect5"><span class="enumeration_section">2.3.2.12</span> DBCA摘要窗口</h5>
                     <div>
                        <div><span>“数据库配置助手（DBCA）摘要”窗口显示您为数据库选择的配置选项的摘要。</span> 查看摘要信息。
                        </div>
                        <div class="section">
                           <p>要更改任何这些选项，请单击“上<span class="bold">一步”</span>并返回到可以修改该选项的窗口。
                           </p>
                           <p>单击“ <span class="bold">完成”</span>以使DBCA使用指定的配置选项开始创建数据库。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12396"></a><div class="props_rev_3"><a id="GUID-41D812A9-4073-472B-946F-8B97FD233B4E" name="GUID-41D812A9-4073-472B-946F-8B97FD233B4E"></a><h5 id="ADMQS-GUID-41D812A9-4073-472B-946F-8B97FD233B4E" class="sect5"><span class="enumeration_section">2.3.2.13</span> DBCA进度窗口</h5>
                     <div>
                        <p>Database Configuration Assistant（DBCA）Progress窗口显示数据库创建操作的进度。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-6B4E99C9-36C5-4D9B-BDDA-4931F554EBDA" name="GUID-6B4E99C9-36C5-4D9B-BDDA-4931F554EBDA"></a><h5 id="ADMQS-GUID-6B4E99C9-36C5-4D9B-BDDA-4931F554EBDA" class="sect5"><span class="enumeration_section">2.3.2.14</span> DBCA完成窗口</h5>
                     <div>
                        <p>DBCA完成数据库配置后，将显示DBCA Finish窗口。</p>
                        <div class="section">
                           <p>“完成”窗口提供以下信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>DBCA日志文件的位置</p>
                              </li>
                              <li>
                                 <p>数据库的全局数据库名称，SID和服务器参数文件名</p>
                              </li>
                              <li>
                                 <p>用于访问Enterprise Manager以管理数据库的URL</p>
                              </li>
                              <li>
                                 <p>管理已创建的数据库帐户</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS12127"></a><a id="ADMQS0233"></a><div class="props_rev_3"><a id="GUID-FA73C24D-64ED-419C-A9F5-3550BFEA64EA" name="GUID-FA73C24D-64ED-419C-A9F5-3550BFEA64EA"></a><h4 id="ADMQS-GUID-FA73C24D-64ED-419C-A9F5-3550BFEA64EA" class="sect4"><span class="enumeration_section">2.3.3</span>使用DBCA更改数据库配置</h4>
                  <div>
                     <div><span>您可以使用Database Configuration Assistant（DBCA）更改现有数据库的配置。</span> 例如，您可以进行配置更改，例如：</div>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>添加先前未配置的数据库选项（例如，Oracle Label Security或Oracle OLAP）</p>
                           </li>
                           <li>
                              <p>更改默认安全设置</p>
                           </li>
                           <li>
                              <p>将服务器模式从专用更改为共享，或相反</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FA73C24D-64ED-419C-A9F5-3550BFEA64EA__GUID-801CC112-C689-4DAC-9244-B21F032EE3E6">要使用DBCA更改数据库的配置：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>按<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="This section describes how to start Database Configuration Assistant (DBCA).">启动DBCA</a> ”</span>中的说明<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></span> 。</span></li>
                        <li><span>在Database Operation窗口中，选择<span class="bold">Configure an existing database</span> ，然后单击<span class="bold">Next</span> 。</span></li>
                        <li><span>按照DBCA指导工作流程中的说明进行操作。</span></li>
                     </ol>
                  </div>
               </div><a id="ADMQS12128"></a><a id="ADMQS0234"></a><div class="props_rev_3"><a id="GUID-C0DDA1A8-90CE-4A99-8C3B-B72A40D96D0B" name="GUID-C0DDA1A8-90CE-4A99-8C3B-B72A40D96D0B"></a><h4 id="ADMQS-GUID-C0DDA1A8-90CE-4A99-8C3B-B72A40D96D0B" class="sect4"><span class="enumeration_section">2.3.4</span>使用DBCA删除数据库</h4>
                  <div>
                     <div><span>您可以使用Database Configuration Assistant（DBCA）删除数据库。</span> 当DBCA删除数据库时，它会关闭数据库实例，然后删除所有数据库文件。在Windows平台上，它还会删除关联的Windows服务。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-C0DDA1A8-90CE-4A99-8C3B-B72A40D96D0B__GUID-5EE04131-058E-4A52-8990-68D48AD876CF">要使用DBCA删除数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>按<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="This section describes how to start Database Configuration Assistant (DBCA).">启动DBCA</a> ”</span>中的说明<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></span> 。</span></li>
                        <li><span>在Database Operation窗口中，选择<span class="bold">Delete database</span>并单击<span class="bold">Next</span> 。</span></li>
                        <li><span>选择要删除的数据库并单击“ <span class="bold">下一步”</span> 。</span></li>
                        <li><span>按照DBCA指导工作流程中的说明进行操作。</span></li>
                     </ol>
                  </div>
               </div><a id="ADMQS0235"></a><div class="props_rev_3"><a id="GUID-2B8A3B5E-D319-4377-8B22-8BB67DCC9885" name="GUID-2B8A3B5E-D319-4377-8B22-8BB67DCC9885"></a><h4 id="ADMQS-GUID-2B8A3B5E-D319-4377-8B22-8BB67DCC9885" class="sect4"><span class="enumeration_section">2.3.5</span>使用DBCA管理模板</h4>
                  <div>
                     <div><span>Database Configuration Assistant（DBCA）模板是包含创建数据库所需信息的XML文件。DBCA中使用模板来创建新数据库并复制现有数据库。</span> 模板中的信息包括数据库选项，初始化参数和存储属性（用于数据文件，表空间，控制文件和联机重做日志文件）。
                     </div>
                     <p>模板可以像脚本一样使用，但它们比脚本更强大，因为您可以选择复制数据库。复制可节省时间，因为您将现有数据库（称为<span class="italic">种子数据库）</span>的文件复制到正确的位置。
                     </p>
                     <p>模板存储在以下目录中：</p><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">ORACLE_HOME</code></span> / assistantants / dbca / templates</pre></div><a id="ADMQS02351"></a><div class="props_rev_3"><a id="GUID-2BE4A2D6-E2DA-47B9-A708-6329CDAB42D9" name="GUID-2BE4A2D6-E2DA-47B9-A708-6329CDAB42D9"></a><h5 id="ADMQS-GUID-2BE4A2D6-E2DA-47B9-A708-6329CDAB42D9" class="sect5"><span class="enumeration_section">2.3.5.1</span>使用DBCA模板的优点</h5>
                     <div>
                        <div><span>使用Database Configuration Assistant（DBCA）模板有几个优点。</span> 例如：</div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>节省时间。如果使用模板，则无需定义数据库。</p>
                           </li>
                           <li>
                              <p>轻松复制。通过创建包含数据库设置的模板，您可以轻松创建重复数据库，而无需两次指定参数。</p>
                           </li>
                           <li>
                              <p>轻松编辑。您可以从模板设置快速更改数据库选项。</p>
                           </li>
                           <li>
                              <p>轻松分享。模板可以从一台计算机复制到另一台计算机。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADMQS12327"></a><a id="ADMQS02352"></a><div class="props_rev_3"><a id="GUID-418CDFD6-340C-40B4-AC08-5005560ED9DC" name="GUID-418CDFD6-340C-40B4-AC08-5005560ED9DC"></a><h5 id="ADMQS-GUID-418CDFD6-340C-40B4-AC08-5005560ED9DC" class="sect5"><span class="enumeration_section">2.3.5.2</span> DBCA模板的类型</h5>
                     <div>
                        <p>数据库配置助手（DBCA）模板包括种子模板和非种子模板。</p>
                        <p>各自的特性如<a href="installing-oracle-database-creating-database.html#GUID-418CDFD6-340C-40B4-AC08-5005560ED9DC__BABJJIIG" title="此表描述了DBCA模板类型。">表2-1</a>所示。
                        </p>
                        <div class="tblformal" id="GUID-418CDFD6-340C-40B4-AC08-5005560ED9DC__BABJJIIG">
                           <p class="titleintable">表2-1 DBCA模板类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBCA模板类型" width="100%" border="1" summary="This table describes the DBCA template types." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="12%" id="d5037e3268">类型</th>
                                    <th align="left" valign="bottom" width="16%" id="d5037e3271">文件扩展名</th>
                                    <th align="left" valign="bottom" width="12%" id="d5037e3274">包括数据文件</th>
                                    <th align="left" valign="bottom" width="60%" id="d5037e3277">数据库结构</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d5037e3282" headers="d5037e3268 ">
                                       <p>种子</p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d5037e3282 d5037e3271 ">
                                       <p><code class="codeph">.DBC</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d5037e3282 d5037e3274 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d5037e3282 d5037e3277 ">
                                       <p>此类型的模板包含现有数据库的结构和物理数据文件，称为<span class="italic">种子数据库</span> 。您的新数据库作为种子数据库的副本启动，并且只需要进行以下更改：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>数据库的名称</p>
                                          </li>
                                          <li>
                                             <p>数据文件的目标</p>
                                          </li>
                                          <li>
                                             <p>控制文件数</p>
                                          </li>
                                          <li>
                                             <p>联机重做日志组的数量</p>
                                          </li>
                                          <li>
                                             <p>初始化参数</p>
                                          </li>
                                       </ul>
                                       <p>使用可由DBCA，命令行SQL语句或Oracle Enterprise Manager Database Express（EM Express）调用的自定义脚本创建数据库之后，可以进行其他更改。</p>
                                       <p>种子数据库的数据文件以压缩的恢复管理器（RMAN）备份格式存储在扩展名为.dfb的文件中。种子数据库控制文件存储在扩展名为.ctl的文件中。（仅当将数据文件存储在Oracle自动存储管理（Oracle ASM）磁盘组或Oracle托管文件中时才需要此文件。）.dbc文件包含种子数据库数据文件的位置，并包含用于装入控制文件的源数据库名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d5037e3319" headers="d5037e3268 ">
                                       <p>非种子</p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d5037e3319 d5037e3271 ">
                                       <p><code class="codeph">.dbt</code></p>
                                    </td>
                                    <td align="left" valign="top" width="12%" headers="d5037e3319 d5037e3274 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d5037e3319 d5037e3277 ">
                                       <p>此类模板用于创建新数据库。它包含要创建的数据库的特征。非种子模板比种子对应物更灵活，因为所有数据文件和在线重做日志文件都是根据您的规范创建的，名称，大小和其他属性可以根据需要进行更改。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADMQS12328"></a><a id="ADMQS02353"></a><div class="props_rev_3"><a id="GUID-E59E0AE9-AF91-4DD2-B311-C92E3EFE9948" name="GUID-E59E0AE9-AF91-4DD2-B311-C92E3EFE9948"></a><h5 id="ADMQS-GUID-E59E0AE9-AF91-4DD2-B311-C92E3EFE9948" class="sect5"><span class="enumeration_section">2.3.5.3</span> Oracle提供的DBCA模板</h5>
                     <div>
                        <div><span>Oracle为数据仓库，通用或事务处理数据库以及自定义数据库提供数据库配置助手（DBCA）模板。</span> <a href="installing-oracle-database-creating-database.html#GUID-E59E0AE9-AF91-4DD2-B311-C92E3EFE9948__BABHDEDA" title="此表描述了DBCA模板环境。">表2-2</a>中描述了这些模板。
                        </div>
                        <div class="tblformal" id="GUID-E59E0AE9-AF91-4DD2-B311-C92E3EFE9948__BABHDEDA">
                           <p class="titleintable">表2-2 Oracle提供的DBCA模板及其相应的工作负载</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle提供的DBCA模板及其相应的工作量" width="100%" border="1" summary="This table describes the DBCA template environments." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d5037e3374">模板</th>
                                    <th align="left" valign="bottom" width="73%" id="d5037e3377">工作负荷</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d5037e3382" headers="d5037e3374 ">
                                       <p>数据仓库</p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d5037e3382 d5037e3377 ">
                                       <p>用户执行处理大量数据的大量复杂查询。响应时间，准确性和可用性是关键问题。</p>
                                       <p>这些查询（ <code class="codeph">SELECT</code>语句）的范围从提取几条记录到对来自许多不同表的数千条记录进行排序的查询。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d5037e3394" headers="d5037e3374 ">
                                       <p>通用或交易处理</p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d5037e3394 d5037e3377 ">
                                       <p>许多并发用户执行许多需要快速访问数据的事务。可用性，速度，并发性和可恢复性是关键问题。</p>
                                       <p>事务包括读取（ <code class="codeph">SELECT</code>语句），写入（ <code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>语句）以及删除（ <code class="codeph">DELETE</code>语句）数据库表中的数据。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d5037e3415" headers="d5037e3374 ">
                                       <p>定制数据库</p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d5037e3415 d5037e3377 ">
                                       <p>此模板允许您在定义数据库时具有最大的灵活性，因为您可以更改正在创建的数据库的任何设置。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADMQS12129"></a><a id="ADMQS02354"></a><div class="props_rev_3"><a id="GUID-30EAECFB-26D2-4D97-8450-75838B8229F4" name="GUID-30EAECFB-26D2-4D97-8450-75838B8229F4"></a><h5 id="ADMQS-GUID-30EAECFB-26D2-4D97-8450-75838B8229F4" class="sect5"><span class="enumeration_section">2.3.5.4</span>使用DBCA创建模板</h5>
                     <div>
                        <p>按照本节中的说明创建自己的Database Configuration Assistant（DBCA）模板。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-30EAECFB-26D2-4D97-8450-75838B8229F4__GUID-1303D761-44BA-4F1D-9345-C2B34B417722">要创建模板：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="This section describes how to start Database Configuration Assistant (DBCA).">启动DBCA</a> ”</span>中的说明<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></span> 。</span></li>
                           <li class="stepexpand"><span>在Database Operation窗口中，选择<span class="uicontrol bold">Manage templates</span> ，然后单击<span class="uicontrol bold">Next</span> 。</span></li>
                           <li class="stepexpand"><span>在“模板管理”窗口中，选择“ <span class="uicontrol bold">创建数据库模板”</span> ，输入以下字段的值，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="uicontrol bold">模板名称</span></p>
                                       <p>在<span class="uicontrol bold">模板名称</span>字段中提供的<span class="uicontrol bold">名称</span>标识模板在创建新数据库时显示在“数据库模板”页面上的时间。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="uicontrol bold">模板位置</span></p>
                                       <p>指定存储模板的位置。</p>
                                    </li>
                                    <li>
                                       <p><span class="uicontrol bold">描述</span></p>
                                       <p>使用“ <span class="uicontrol bold">描述”</span>字段提供有关使用模板创建的数据库的用途和功能的信息。在“部署类型”页面上单击模板的“ <span class="uicontrol bold">查看详细信息”</span>时，说明将显示在模板名称下方。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>按照DBCA指导工作流程中的说明创建模板。</span></li>
                        </ol>
                     </div>
                  </div><a id="ADMQS12130"></a><a id="ADMQS02355"></a><div class="props_rev_3"><a id="GUID-AE6DC463-FBA6-494E-8559-3F60FEB709B1" name="GUID-AE6DC463-FBA6-494E-8559-3F60FEB709B1"></a><h5 id="ADMQS-GUID-AE6DC463-FBA6-494E-8559-3F60FEB709B1" class="sect5"><span class="enumeration_section">2.3.5.5</span>删除DBCA模板</h5>
                     <div>
                        <p>删除数据库配置助手（DBCA）模板时，它不再可用于创建新数据库或新模板。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-AE6DC463-FBA6-494E-8559-3F60FEB709B1__GUID-D3BA40D4-4CC6-42ED-8AC0-C914BAE146F6">要删除模板：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>按<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="This section describes how to start Database Configuration Assistant (DBCA).">启动DBCA</a> ”</span>中的说明<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></span> 。</span></li>
                           <li><span>在Database Operation窗口中，选择<span class="uicontrol bold">Manage templates</span> ，然后单击<span class="uicontrol bold">Next</span> 。</span></li>
                           <li><span>在Template Management窗口中，选择<span class="uicontrol bold">Delete a database template</span> ，然后单击<span class="uicontrol bold">Next</span> 。</span></li>
                           <li><span>选择要删除的模板并单击“ <span class="uicontrol bold">下一步”</span> 。</span></li>
                           <li><span>按照DBCA指导工作流程中的说明进行操作。</span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="ADMQS12458"></a><div class="props_rev_3"><a id="GUID-42F4AB20-8DD8-48B3-B7B9-FCC151C06987" name="GUID-42F4AB20-8DD8-48B3-B7B9-FCC151C06987"></a><h4 id="ADMQS-GUID-42F4AB20-8DD8-48B3-B7B9-FCC151C06987" class="sect4"><span class="enumeration_section">2.3.6</span>使用DBCA管理PDB</h4>
                  <div>
                     <div><span>当存在多租户容器数据库（CDB）时，您可以使用Database Configuration Assistant（DBCA）在CDB中执行可插入数据库（PDB）操作。</span>例如，您可以使用DBCA在CDB中执行以下PDB操作：</div>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建一个PDB</p>
                              <p>此选项在CDB中创建新的PDB。</p>
                              <p>DBCA可以创建新的PDB：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>来自现有的PDB</p>
                                 </li>
                                 <li>
                                    <p>来自CDB种子，PDB $ SEED</p>
                                 </li>
                                 <li>
                                    <p>将PDB存档（.pdb）文件用于未插入的PDB</p>
                                 </li>
                                 <li>
                                    <p>使用PDB文件设置为未插入的PDB</p>
                                    <p>PDB文件集包括PDB元数据（.xml）文件和PDB数据文件备份（.dfb）文件。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>删除PDB</p>
                              <p>此选项删除PDB。</p>
                           </li>
                           <li>
                              <p>拔掉PDB</p>
                              <p>此选项会拔出PDB。未插入的PDB可以插入相同的CDB或其他CDB。</p>
                              <p>拔出PDB时，可以使用DBCA创建PDB存档（.pdb）文件或PDB文件集（.xml文件和.dfb文件）。</p>
                           </li>
                           <li>
                              <p>配置PDB</p>
                              <p>此选项使您可以为PDB指定Oracle Enterprise Manager Database Express（EM Express）端口，以便您可以使用EM Express管理PDB。它还允许您为PDB配置其他数据库选项。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADMQS12460"></a><a id="ADMQS12459"></a><div class="props_rev_3"><a id="GUID-4B0E065E-86FF-464F-B5B3-F3AB6A17666E" name="GUID-4B0E065E-86FF-464F-B5B3-F3AB6A17666E"></a><h5 id="ADMQS-GUID-4B0E065E-86FF-464F-B5B3-F3AB6A17666E" class="sect5"><span class="enumeration_section">2.3.6.1</span>使用DBCA管理CDB中的PDB</h5>
                     <div>
                        <p>您可以使用Database Configuration Assistant（DBCA）在现有多租户容器数据库（CDB）中创建，拔出，删除或配置可插拔数据库（PDB）。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-4B0E065E-86FF-464F-B5B3-F3AB6A17666E__GUID-1B591722-B532-4139-97B0-E65B0C66248A">
                              <p class="notep1">注意：</p>
                              <p>PDB操作只能在CDB中执行。如果您尝试在不是CDB的数据库中执行PDB操作，DBCA会发出错误消息。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4B0E065E-86FF-464F-B5B3-F3AB6A17666E__GUID-7164086E-5489-4DD1-8CAB-B980EC011466">使用DBCA管理PDB：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>按<span class="q">“ <a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="This section describes how to start Database Configuration Assistant (DBCA).">启动DBCA</a> ”</span>中的说明<span class="q"><a href="installing-oracle-database-creating-database.html#GUID-F922EBB9-BA89-4A94-B89F-E3BB4BA14ACD" title="本节介绍如何启动Database Configuration Assistant（DBCA）。">启动DBCA</a></span> 。</span></li>
                           <li><span>在Database Operation窗口中，选择<span class="uicontrol bold">Manage Pluggable databases</span> ，然后单击<span class="uicontrol bold">Next</span></span></li>
                           <li><span>在“管理可插拔数据库”窗口中，选择一个PDB操作，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span></li>
                           <li><span>在“选择数据库”窗口中，选择要在其中执行所选PDB操作的CDB，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span></li>
                           <li><span>按照DBCA指导工作流程中的说明进行选定的PDB操作。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-4B0E065E-86FF-464F-B5B3-F3AB6A17666E__GUID-00923466-844C-45E2-8EF1-4D0E7783CC71">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关CDB和PDB简介的<a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle Multitenant管理员指南</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关管理CDB和PDB的信息，请参阅<a href="../multi/managing-a-multitenant-environment.html#ADMIN13506" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS12461"></a><div class="props_rev_3"><a id="GUID-75C198E5-5690-43F4-990E-91A3892F7A54" name="GUID-75C198E5-5690-43F4-990E-91A3892F7A54"></a><h3 id="ADMQS-GUID-75C198E5-5690-43F4-990E-91A3892F7A54" class="sect3"><span class="enumeration_section">2.4</span>手动安装数据库示例模式安装后</h3>
               <div>
                  <p>您可以在初始数据库安装后的某个时间决定要安装数据库示例模式。您可以通过运行SQL脚本手动创建示例模式。</p>
                  <div class="infoboxnotealso" id="GUID-75C198E5-5690-43F4-990E-91A3892F7A54__GUID-C54B2E4A-BF56-440D-A933-D04705D1252E">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用SQL手动创建<a href="../comsc/installing-sample-schemas.html#COMSC-GUID-A2C3DC59-CDA1-47C0-BA6B-F6EA6395A85F" target="_blank"><span><cite>示例模式</cite></span></a>的详细信息，请<a href="../comsc/installing-sample-schemas.html#COMSC-GUID-A2C3DC59-CDA1-47C0-BA6B-F6EA6395A85F" target="_blank"><span><cite>参见Oracle数据库示例模式</cite></span></a></p>
                  </div>
               </div>
            </div><a id="ADMQS025"></a><div class="props_rev_3"><a id="GUID-1426CDE5-D4E2-428D-8409-0333799EE8C2" name="GUID-1426CDE5-D4E2-428D-8409-0333799EE8C2"></a><h3 id="ADMQS-GUID-1426CDE5-D4E2-428D-8409-0333799EE8C2" class="sect3"><span class="enumeration_section">2.5</span>安装：Oracle示例系列</h3>
               <div>
                  <p>Oracle示例（OBE）有一系列关于<span class="italic">Oracle Database 2 Day DBA</span>指南的系列文章。本OBE将引导您完成本章中的任务，并包含带注释的屏幕截图。
                  </p>
                  <div class="section">
                     <p>要查看安装Oracle数据库和创建数据库OBE，请在Web浏览器中输入以下URL：</p>
                     <p><a href="https://apexapps.oracle.com/pls/apex/f?p=44785:24:::NO:24:P24_CONTENT_ID:16826" target="_blank"><code class="codeph">https://apexapps.oracle.com/pls/apex/f?p=44785:24:::NO:24:P24_CONTENT_ID:16826</code></a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00564.jms-basic-operation.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle Java消息服务基本操作</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="jms-introduction.html" title="Previous" type="text/html"></link>
      <link rel="next" href="jms-point-to-point.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jms-introduction.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="jms-point-to-point.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Java消息服务基本操作</li>
            </ol>
            <a id="GUID-5A5BF079-B078-46FD-A29E-41192DC459B0" name="GUID-5A5BF079-B078-46FD-A29E-41192DC459B0"></a><a id="ADQUE1200"></a>
            
            <h2 id="ADQUE-GUID-5A5BF079-B078-46FD-A29E-41192DC459B0" class="sect2"><span class="enumeration_chapter">12</span> Oracle Java消息服务基本操作</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题描述了Oracle数据库高级队列（AQ）的基本操作<a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS）管理界面。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-8B40F957-13A1-430A-BC95-344AE4E66F55">DBMS_AQIN上的EXECUTE特权</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-39A4A122-2DED-4CFC-B9F2-7757A2A900F1">注册ConnectionFactory</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-46B979D5-6D78-483D-AF29-B1D2DBAF9B19">取消注册队列/主题ConnectionFactory</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-584FEE3F-7C94-4EC4-8500-128D47BFDA74">获取QueueConnectionFactory或TopicConnectionFactory</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-2F381380-8A18-40CB-918B-70544AB610CA">在LDAP中获取队列或主题</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E">创建非分片队列表</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-C5773BA3-31DD-4860-B894-579F97C4581D">创建队列</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-225E5EC1-1D99-432D-A031-5959005D953A">获取非分片队列表</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-E1BE8E40-4CB2-4366-B161-DCB4F6E62DC0">授予和撤销权限</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-3F0936CB-2532-4C08-A620-F2054BDD7160">管理目的地</a></p>
                  </li>
                  <li>
                     <p><a href="jms-basic-operation.html#GUID-5916ED2D-BF69-4033-8E5C-1CF00657966A">传播时间表</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE2935"></a><div class="props_rev_3"><a id="GUID-8B40F957-13A1-430A-BC95-344AE4E66F55" name="GUID-8B40F957-13A1-430A-BC95-344AE4E66F55"></a><h3 id="ADQUE-GUID-8B40F957-13A1-430A-BC95-344AE4E66F55" class="sect3"><span class="enumeration_section">12.1</span> DBMS_AQIN上的EXECUTE特权</h3>
               <div>
                  <p>用户永远不应该直接调用<code class="codeph">DBMS_AQIN</code>包中的方法，但是他们确实需要<code class="codeph">DBMS_AQIN</code>的<code class="codeph">EXECUTE</code>特权。使用以下语法来完成此任务：</p><pre class="oac_no_warn" dir="ltr">向<span class="italic">用户</span>授予DBMS_AQIN执行<span class="italic">权限</span> ;</pre></div>
            </div><a id="ADQUE2936"></a><div class="props_rev_3"><a id="GUID-39A4A122-2DED-4CFC-B9F2-7757A2A900F1" name="GUID-39A4A122-2DED-4CFC-B9F2-7757A2A900F1"></a><h3 id="ADQUE-GUID-39A4A122-2DED-4CFC-B9F2-7757A2A900F1" class="sect3"><span class="enumeration_section">12.2</span>注册ConnectionFactory</h3>
               <div>
                  <p>您可以通过以下四种方式注册<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">ConnectionFactory</span></a> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-B05B8B15-C664-4BC5-A134-BAFFAF4E65EC">使用JDBC连接参数通过数据库注册</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-63C09F7B-EC9F-4509-8B52-9C41FA220A7B">使用JDBC URL通过数据库注册</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-6ADF431B-AEEF-41FD-86DA-D0733E1BB751">使用JDBC连接参数通过LDAP注册</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-27A881D3-1755-4CF6-8288-607A8DE62C2B">使用JDBC URL通过LDAP注册</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2938"></a><a id="ADQUE2937"></a><div class="props_rev_3"><a id="GUID-B05B8B15-C664-4BC5-A134-BAFFAF4E65EC" name="GUID-B05B8B15-C664-4BC5-A134-BAFFAF4E65EC"></a><h4 id="ADQUE-GUID-B05B8B15-C664-4BC5-A134-BAFFAF4E65EC" class="sect4"><span class="enumeration_section">12.2.1</span>使用JDBC连接参数通过数据库注册</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static int registerConnectionFactory（java.sql。连接连接，java.lang。String conn_name，java.lang。字符串主机名，java.lang。String oracle_sid，int portno，java.lang。字符串驱动程序，java.lang。String type）抛出JMSException</pre><p>此方法通过数据库将<code class="codeph">QueueConnectionFactory</code>或TopicConnectionFactory注册到具有JDBC连接参数的<a href="glossary.html#GUID-6BF3485C-E98F-4344-A7DE-64950BCCE160"><span class="xrefglossterm">轻量级目录访问协议</span></a> （LDAP）服务器。此方法是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-B05B8B15-C664-4BC5-A134-BAFFAF4E65EC__GUID-037FD542-5649-4D1F-861C-76675EE958FE">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e329">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e332">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e337" headers="d78385e329 ">
                                       <p><code class="codeph">连接</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e337 d78385e332 ">
                                       <p>注册时使用的JDBC连接</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e345" headers="d78385e329 ">
                                       <p><code class="codeph">conn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e345 d78385e332 ">
                                       <p>要注册的连接的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e353" headers="d78385e329 ">
                                       <p><code class="codeph">主机名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e353 d78385e332 ">
                                       <p>运行Oracle数据库高级队列的主机的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e361" headers="d78385e329 ">
                                       <p><code class="codeph">ORACLE_SID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e361 d78385e332 ">
                                       <p>Oracle系统标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e369" headers="d78385e329 ">
                                       <p><code class="codeph">PORTNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e369 d78385e332 ">
                                       <p>端口号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e377" headers="d78385e329 ">
                                       <p><code class="codeph">司机</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e377 d78385e332 ">
                                       <p>JDBC驱动程序类型</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e385" headers="d78385e329 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e385 d78385e332 ">
                                       <p>连接工厂类型（ <code class="codeph">QUEUE</code>或<code class="codeph">TOPIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>传递给<code class="codeph">registerConnectionFactory</code>的数据库连接必须被授予<code class="codeph">AQ_ADMINISTRATOR_ROLE</code> 。注册后，您可以使用<a href="glossary.html#GUID-73476CA0-7AD9-41B9-97E6-7A34F0D4161F"><span class="xrefglossterm">Java命名和目录接口</span></a> （JNDI）查找连接工厂。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B05B8B15-C664-4BC5-A134-BAFFAF4E65EC__GUID-51558DD1-7D10-4FC6-987A-2FDD2B96C69E">
                        <p class="titleinexample">示例12-1使用JDBC连接参数注册数据库</p><pre class="oac_no_warn" dir="ltr">字符串网址; java.sql.connection db_conn; url =“jdbc：oracle：thin：@ sun-123：1521：db1”; db_conn = DriverManager.getConnection（url，“scott”，“tiger”）; AQjmsFactory.registerConnectionFactory（db_conn，“queue_conn1”，“sun-123”，“db1”，1521，“thin”，“queue”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2940"></a><a id="ADQUE2939"></a><div class="props_rev_3"><a id="GUID-63C09F7B-EC9F-4509-8B52-9C41FA220A7B" name="GUID-63C09F7B-EC9F-4509-8B52-9C41FA220A7B"></a><h4 id="ADQUE-GUID-63C09F7B-EC9F-4509-8B52-9C41FA220A7B" class="sect4"><span class="enumeration_section">12.2.2</span>使用JDBC URL通过数据库注册</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static int registerConnectionFactory（java.sql。连接连接，java.lang。String conn_name，java.lang。字符串jdbc_url，java.util。属性信息，java.lang。String type）抛出JMSException</pre><p>此方法通过数据库向LDAP注册<code class="codeph">QueueConnectionFactory</code>或TopicConnectionFactory。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-63C09F7B-EC9F-4509-8B52-9C41FA220A7B__GUID-96F5E9A8-166D-4217-8D8A-D6F1A5FDE085">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e507">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e510">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e515" headers="d78385e507 ">
                                       <p><code class="codeph">连接</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e515 d78385e510 ">
                                       <p>注册时使用的JDBC连接</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e523" headers="d78385e507 ">
                                       <p><code class="codeph">conn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e523 d78385e510 ">
                                       <p>要注册的连接的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e531" headers="d78385e507 ">
                                       <p><code class="codeph">jdbc_url</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e531 d78385e510 ">
                                       <p>要连接的URL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e539" headers="d78385e507 ">
                                       <p><code class="codeph">信息</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e539 d78385e510 ">
                                       <p>属性信息</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e547" headers="d78385e507 ">
                                       <p><code class="codeph">PORTNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e547 d78385e510 ">
                                       <p>端口号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e555" headers="d78385e507 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e555 d78385e510 ">
                                       <p>连接工厂类型（ <code class="codeph">QUEUE</code>或<code class="codeph">TOPIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a id="d78385e569" class="indexterm-anchor"></a><a id="d78385e573" class="indexterm-anchor"></a><a id="d78385e577" class="indexterm-anchor"></a>传递给<code class="codeph">registerConnectionFactory</code>的数据库连接必须被授予<code class="codeph">AQ_ADMINISTRATOR_ROLE</code> 。注册后，您可以使用JNDI查找连接工厂。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-63C09F7B-EC9F-4509-8B52-9C41FA220A7B__GUID-35985DC7-913A-4774-A20A-E2D41B916EB2">
                        <p class="titleinexample">示例12-2使用JDBC URL通过数据库注册</p><pre class="oac_no_warn" dir="ltr">字符串网址; java.sql.connection db_conn; url =“jdbc：oracle：thin：@ sun-123：1521：db1”; db_conn = DriverManager.getConnection（url，“scott”，“tiger”）; AQjmsFactory.registerConnectionFactory（db_conn，“topic_conn1”，url，null，“topic”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2942"></a><a id="ADQUE2941"></a><div class="props_rev_3"><a id="GUID-6ADF431B-AEEF-41FD-86DA-D0733E1BB751" name="GUID-6ADF431B-AEEF-41FD-86DA-D0733E1BB751"></a><h4 id="ADQUE-GUID-6ADF431B-AEEF-41FD-86DA-D0733E1BB751" class="sect4"><span class="enumeration_section">12.2.3</span>使用JDBC连接参数通过LDAP注册</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static int registerConnectionFactory（java.util。Hashtable env，java.lang。String conn_name，java.lang。字符串主机名，java.lang。String oracle_sid，int portno，java.lang。字符串驱动程序，java.lang。String type）抛出JMSException</pre><p>此方法通过LDAP将JDBC连接参数注册到LDAP的<code class="codeph">QueueConnectionFactory</code>或TopicConnectionFactory。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-6ADF431B-AEEF-41FD-86DA-D0733E1BB751__GUID-F8836CD9-E623-4FC3-83F0-A60747EE606C">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e682">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e685">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e690" headers="d78385e682 ">
                                       <p><code class="codeph">ENV</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e690 d78385e685 ">
                                       <p>LDAP连接的环境</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e698" headers="d78385e682 ">
                                       <p><code class="codeph">conn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e698 d78385e685 ">
                                       <p>要注册的连接的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e706" headers="d78385e682 ">
                                       <p><code class="codeph">主机名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e706 d78385e685 ">
                                       <p>运行Oracle数据库高级队列的主机的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e714" headers="d78385e682 ">
                                       <p><code class="codeph">ORACLE_SID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e714 d78385e685 ">
                                       <p>Oracle系统标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e722" headers="d78385e682 ">
                                       <p><code class="codeph">PORTNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e722 d78385e685 ">
                                       <p>端口号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e730" headers="d78385e682 ">
                                       <p><code class="codeph">司机</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e730 d78385e685 ">
                                       <p>JDBC驱动程序类型</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e738" headers="d78385e682 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e738 d78385e685 ">
                                       <p>连接工厂类型（ <code class="codeph">QUEUE</code>或<code class="codeph">TOPIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a id="d78385e752" class="indexterm-anchor"></a><a id="d78385e756" class="indexterm-anchor"></a><a id="d78385e760" class="indexterm-anchor"></a>传递给<code class="codeph">registerConnectionFactory()</code>的哈希表必须包含建立与LDAP服务器的有效连接的所有信息。此外，连接必须具有对LDAP服务器中连接工厂条目的写访问权（这要求LDAP用户是数据库本身或被授予<code class="codeph">GLOBAL_AQ_USER_ROLE</code> ）。注册后，使用JNDI查找连接工厂。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6ADF431B-AEEF-41FD-86DA-D0733E1BB751__GUID-D0B36527-243B-403D-91CD-7FD936D31C62">
                        <p class="titleinexample">示例12-3使用JDBC连接参数通过LDAP注册</p><pre class="oac_no_warn" dir="ltr">Hashtable env = new Hashtable（5,0.75f）; / *以下语句在哈希表env中设置：*服务提供程序包* ldap服务器的URL *数据库服务器的可分辨名称*身份验证方法（简单）* LDAP用户名* LDAP用户密码* / env.put （上下文。INITIAL_CONTEXT_FACTORY，“com.sun.jndi.ldap。LdapCtxFactory“）; env.put（Context。PROVIDER_URL，“ldap：// sun-456：389”）; env.put（“searchbase”，“cn = db1，cn = Oraclecontext，cn = acme，cn = com”）; env.put（上下文。SECURITY_AUTHENTICATION，“简单”）; env.put（上下文。SECURITY_PRINCIPAL，“cn = db1aqadmin，cn = acme，cn = com”）; env.put（上下文。SECURITY_CREDENTIALS，“欢迎”）; AQjmsFactory.registerConnectionFactory（env，“queue_conn1”，“sun-123”，“db1”，1521，“thin”，“queue”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2944"></a><a id="ADQUE2943"></a><div class="props_rev_3"><a id="GUID-27A881D3-1755-4CF6-8288-607A8DE62C2B" name="GUID-27A881D3-1755-4CF6-8288-607A8DE62C2B"></a><h4 id="ADQUE-GUID-27A881D3-1755-4CF6-8288-607A8DE62C2B" class="sect4"><span class="enumeration_section">12.2.4</span>使用JDBC URL通过LDAP注册</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static int registerConnectionFactory（java.util。Hashtable env，java.lang。String conn_name，java.lang。字符串jdbc_url，java.util。属性信息，java.lang。String type）抛出JMSException</pre><p>此方法通过LDAP将JDBC连接参数注册到LDAP的<code class="codeph">QueueConnectionFactory</code>或TopicConnectionFactory。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-27A881D3-1755-4CF6-8288-607A8DE62C2B__GUID-5030AF3B-7578-4203-AE1F-BFE35ECB2574">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e868">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e871">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e876" headers="d78385e868 ">
                                       <p><code class="codeph">ENV</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e876 d78385e871 ">
                                       <p>LDAP连接的环境</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e884" headers="d78385e868 ">
                                       <p><code class="codeph">conn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e884 d78385e871 ">
                                       <p>要注册的连接的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e892" headers="d78385e868 ">
                                       <p><code class="codeph">jdbc_url</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e892 d78385e871 ">
                                       <p>要连接的URL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e900" headers="d78385e868 ">
                                       <p>信息</p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e900 d78385e871 ">
                                       <p>属性信息</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e907" headers="d78385e868 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e907 d78385e871 ">
                                       <p>连接工厂类型（ <code class="codeph">QUEUE</code>或<code class="codeph">TOPIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>传递给<code class="codeph">registerConnectionFactory()</code>的哈希表必须包含建立与LDAP服务器的有效连接的所有信息。此外，连接必须具有对LDAP服务器中连接工厂条目的写访问权（这要求LDAP用户是数据库本身或被授予<code class="codeph">GLOBAL_AQ_USER_ROLE)</code> 。注册后，使用JNDI查找连接工厂。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-27A881D3-1755-4CF6-8288-607A8DE62C2B__GUID-B85D2DA7-0D60-4E4E-BB54-C0DF68C3BDE4">
                        <p class="titleinexample">示例12-4使用JDBC URL通过LDAP注册</p><pre class="oac_no_warn" dir="ltr">字符串网址; Hashtable env = new Hashtable（5,0.75f）; / *以下语句在哈希表env中设置：*服务提供程序包* ldap服务器的URL *数据库服务器的可分辨名称*身份验证方法（简单）* LDAP用户名* LDAP用户密码* / env.put （上下文。INITIAL_CONTEXT_FACTORY，“com.sun.jndi.ldap。LdapCtxFactory“）; env.put（Context。PROVIDER_URL，“ldap：// sun-456：389”）; env.put（“searchbase”，“cn = db1，cn = Oraclecontext，cn = acme，cn = com”）; env.put（上下文。SECURITY_AUTHENTICATION，“简单”）; env.put（上下文。SECURITY_PRINCIPAL，“cn = db1aqadmin，cn = acme，cn = com”）; env.put（上下文。SECURITY_CREDENTIALS，“欢迎”）; url =“jdbc：oracle：thin：@ sun-123：1521：db1”; AQjmsFactory.registerConnectionFactory（env，“topic_conn1”，url，null，“topic”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2945"></a><div class="props_rev_3"><a id="GUID-46B979D5-6D78-483D-AF29-B1D2DBAF9B19" name="GUID-46B979D5-6D78-483D-AF29-B1D2DBAF9B19"></a><h3 id="ADQUE-GUID-46B979D5-6D78-483D-AF29-B1D2DBAF9B19" class="sect3"><span class="enumeration_section">12.3</span>取消注册队列/主题ConnectionFactory</h3>
               <div>
                  <div class="section">
                     <p>您可以通过两种方式在LDAP中取消注册队列/主题<code class="codeph">ConnectionFactory</code> ：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-54F0C563-919E-4AB6-B852-A9E06614732D">通过数据库取消注册</a></p>
                        </li>
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-23ECDDCA-FC09-4536-B8CD-B8FD3559AB0B">通过LDAP取消注册</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADQUE2947"></a><a id="ADQUE2946"></a><div class="props_rev_3"><a id="GUID-54F0C563-919E-4AB6-B852-A9E06614732D" name="GUID-54F0C563-919E-4AB6-B852-A9E06614732D"></a><h4 id="ADQUE-GUID-54F0C563-919E-4AB6-B852-A9E06614732D" class="sect4"><span class="enumeration_section">12.3.1</span>通过数据库取消注册</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static int unregisterConnectionFactory（java.sql。连接连接，java.lang。String conn_name）抛出JMSException</pre><p>此方法在LDAP中取消注册<code class="codeph">QueueConnectionFactory</code>或<code class="codeph">TopicConnectionFactory</code> 。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-54F0C563-919E-4AB6-B852-A9E06614732D__GUID-2DC684E6-4461-45EF-8328-1F3B00991342">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e1092">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e1095">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1100" headers="d78385e1092 ">
                                       <p><code class="codeph">连接</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1100 d78385e1095 ">
                                       <p>注册时使用的JDBC连接</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1108" headers="d78385e1092 ">
                                       <p><code class="codeph">conn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1108 d78385e1095 ">
                                       <p>要注册的连接的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>传递给<code class="codeph">unregisterConnectionFactory()</code>的数据库连接必须被授予<code class="codeph">AQ_ADMINISTRATOR_ROLE</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-54F0C563-919E-4AB6-B852-A9E06614732D__GUID-83092A18-4582-4898-93CB-A78EE1247E78">
                        <p class="titleinexample">示例12-5通过数据库取消注册</p><pre class="oac_no_warn" dir="ltr">字符串网址; java.sql.connection db_conn; url =“jdbc：oracle：thin：@ sun-123：1521：db1”; db_conn = DriverManager.getConnection（url，“scott”，“tiger”）; AQjmsFactory.unregisterConnectionFactory（db_conn，“topic_conn1”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2949"></a><a id="ADQUE2948"></a><div class="props_rev_3"><a id="GUID-23ECDDCA-FC09-4536-B8CD-B8FD3559AB0B" name="GUID-23ECDDCA-FC09-4536-B8CD-B8FD3559AB0B"></a><h4 id="ADQUE-GUID-23ECDDCA-FC09-4536-B8CD-B8FD3559AB0B" class="sect4"><span class="enumeration_section">12.3.2</span>通过LDAP取消注册</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static int unregisterConnectionFactory（java.util。Hashtable env，java.lang。String conn_name）抛出JMSException</pre><p>此方法在LDAP中取消注册<code class="codeph">QueueConnectionFactory</code>或TopicConnectionFactory。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-23ECDDCA-FC09-4536-B8CD-B8FD3559AB0B__GUID-4B933D40-1058-48C6-AA64-EE836B1E1F47">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e1218">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e1221">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1226" headers="d78385e1218 ">
                                       <p><code class="codeph">ENV</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1226 d78385e1221 ">
                                       <p>LDAP连接的环境</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1234" headers="d78385e1218 ">
                                       <p><code class="codeph">conn_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1234 d78385e1221 ">
                                       <p>要注册的连接的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>传递给<code class="codeph">unregisterConnectionFactory()</code>的哈希表必须包含建立与LDAP服务器的有效连接的所有信息。此外，连接必须具有对LDAP服务器中连接工厂条目的写访问权（这要求LDAP用户是数据库本身或被授予<code class="codeph">GLOBAL_AQ_USER_ROLE</code> ）。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-23ECDDCA-FC09-4536-B8CD-B8FD3559AB0B__GUID-21DB945E-8024-4EE5-802B-AF30B03008F5">
                        <p class="titleinexample">示例12-6通过LDAP取消注册</p><pre class="oac_no_warn" dir="ltr">Hashtable env = new Hashtable（5,0.75f）; / *以下语句在哈希表env中设置：*服务提供程序包*数据库服务器的可分辨名称*身份验证方法（简单）* LDAP用户名* LDAP用户密码* / env.put（上下文。INITIAL_CONTEXT_FACTORY，“com.sun.jndi.ldap。LdapCtxFactory“）; env.put（Context。PROVIDER_URL，“ldap：// sun-456：389”）; env.put（“searchbase”，“cn = db1，cn = Oraclecontext，cn = acme，cn = com”）; env.put（上下文。SECURITY_AUTHENTICATION，“简单”）; env.put（上下文。SECURITY_PRINCIPAL，“cn = db1aqadmin，cn = acme，cn = com”）; env.put（上下文。SECURITY_CREDENTIALS，“欢迎”）; url =“jdbc：oracle：thin：@ sun-123：1521：db1”; AQjmsFactory.unregisterConnectionFactory（env，“queue_conn1”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2950"></a><div class="props_rev_3"><a id="GUID-584FEE3F-7C94-4EC4-8500-128D47BFDA74" name="GUID-584FEE3F-7C94-4EC4-8500-128D47BFDA74"></a><h3 id="ADQUE-GUID-584FEE3F-7C94-4EC4-8500-128D47BFDA74" class="sect3"><span class="enumeration_section">12.4</span>获取QueueConnectionFactory或TopicConnectionFactory</h3>
               <div>
                  <div class="section">
                     <p>本节包含以下主题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-3C6BB70B-A655-4EDC-BA2B-11137CD64177">使用JDBC URL获取QueueConnectionFactory</a></p>
                        </li>
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-5F834FCA-61D5-4530-9824-CDEFDD025E3B">使用JDBC连接参数获取QueueConnectionFactory</a></p>
                        </li>
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-B7BE60B5-CA40-43AC-800F-AAF54B944454">使用JDBC URL获取TopicConnectionFactory</a></p>
                        </li>
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-B80C7CFE-7821-4093-A49E-A6268D3988F4">使用JDBC连接参数获取TopicConnectionFactory</a></p>
                        </li>
                        <li>
                           <p><a href="jms-basic-operation.html#GUID-03035D18-B86B-49B1-A204-F985E27AF491">在LDAP中获取QueueConnectionFactory或TopicConnectionFactory</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADQUE2952"></a><a id="ADQUE2951"></a><div class="props_rev_3"><a id="GUID-3C6BB70B-A655-4EDC-BA2B-11137CD64177" name="GUID-3C6BB70B-A655-4EDC-BA2B-11137CD64177"></a><h4 id="ADQUE-GUID-3C6BB70B-A655-4EDC-BA2B-11137CD64177" class="sect4"><span class="enumeration_section">12.4.1</span>使用JDBC URL获取QueueConnectionFactory</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。QueueConnectionFactory getQueueConnectionFactory（java.lang。字符串jdbc_url，java.util。属性信息）抛出JMSException</pre><p>此方法获取带有JDBC URL的<code class="codeph">QueueConnectionFactory</code> 。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-3C6BB70B-A655-4EDC-BA2B-11137CD64177__GUID-A8B7D6CF-51C7-4FBD-9B9D-01FAACFA0559">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e1413">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e1416">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1421" headers="d78385e1413 ">
                                       <p><code class="codeph">jdbc_url</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1421 d78385e1416 ">
                                       <p>要连接的URL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1429" headers="d78385e1413 ">
                                       <p>信息</p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1429 d78385e1416 ">
                                       <p>属性信息</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3C6BB70B-A655-4EDC-BA2B-11137CD64177__GUID-28D6670A-A1C5-46C0-BEE3-C01327AA8E0E">
                        <p class="titleinexample">示例12-7使用JDBC URL获取QueueConnectionFactory</p><pre class="oac_no_warn" dir="ltr">String url =“jdbc：oracle：oci10：internal / oracle”属性info = new Properties（）; QueueConnectionFactory qc_fact; info.put（“internal_logon”，“sysdba”）; qc_fact = AQjmsFactory.getQueueConnectionFactory（url，info）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2954"></a><a id="ADQUE2953"></a><div class="props_rev_3"><a id="GUID-5F834FCA-61D5-4530-9824-CDEFDD025E3B" name="GUID-5F834FCA-61D5-4530-9824-CDEFDD025E3B"></a><h4 id="ADQUE-GUID-5F834FCA-61D5-4530-9824-CDEFDD025E3B" class="sect4"><span class="enumeration_section">12.4.2</span>使用JDBC连接参数获取QueueConnectionFactory</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。QueueConnectionFactory getQueueConnectionFactory（java.lang。字符串主机名，java.lang。String oracle_sid，int portno，java.lang。字符串驱动程序）抛出JMSException</pre><p>此方法获取带有JDBC连接参数的<code class="codeph">QueueConnectionFactory</code> 。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-5F834FCA-61D5-4530-9824-CDEFDD025E3B__GUID-C147AAA7-BB51-4E87-AE40-9FF1D0F0E161">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e1512">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e1515">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1520" headers="d78385e1512 ">
                                       <p><code class="codeph">主机名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1520 d78385e1515 ">
                                       <p>运行Oracle数据库高级队列的主机的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1528" headers="d78385e1512 ">
                                       <p><code class="codeph">ORACLE_SID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1528 d78385e1515 ">
                                       <p>Oracle系统标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1536" headers="d78385e1512 ">
                                       <p><code class="codeph">PORTNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1536 d78385e1515 ">
                                       <p>端口号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1544" headers="d78385e1512 ">
                                       <p><code class="codeph">司机</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1544 d78385e1515 ">
                                       <p>JDBC驱动程序类型</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5F834FCA-61D5-4530-9824-CDEFDD025E3B__GUID-81C1D1C2-0964-48F1-9FA9-659E6F3A65FC">
                        <p class="titleinexample">示例12-8使用JDBC连接参数获取QueueConnectionFactory</p><pre class="oac_no_warn" dir="ltr">String host =“dlsun”; String ora_sid =“rdbms10i”String driver =“thin”; int port = 5521; QueueConnectionFactory qc_fact; qc_fact = AQjmsFactory.getQueueConnectionFactory（host，ora_sid，port，driver）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2956"></a><a id="ADQUE2955"></a><div class="props_rev_3"><a id="GUID-B7BE60B5-CA40-43AC-800F-AAF54B944454" name="GUID-B7BE60B5-CA40-43AC-800F-AAF54B944454"></a><h4 id="ADQUE-GUID-B7BE60B5-CA40-43AC-800F-AAF54B944454" class="sect4"><span class="enumeration_section">12.4.3</span>使用JDBC URL获取TopicConnectionFactory</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。QueueConnectionFactory getQueueConnectionFactory（java.lang。字符串jdbc_url，java.util。属性信息）抛出JMSException</pre><p>此方法获取带有JDBC URL的<code class="codeph">TopicConnectionFactory</code> 。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-B7BE60B5-CA40-43AC-800F-AAF54B944454__GUID-C2D18EE2-0C45-4748-8873-F4D9BC0E1C08">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e1631">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e1634">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1639" headers="d78385e1631 ">
                                       <p><code class="codeph">jdbc_url</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1639 d78385e1634 ">
                                       <p>要连接的URL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1647" headers="d78385e1631 ">
                                       <p>信息</p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1647 d78385e1634 ">
                                       <p>属性信息</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B7BE60B5-CA40-43AC-800F-AAF54B944454__GUID-42409D94-EBEC-406E-9692-060589366A17">
                        <p class="titleinexample">示例12-9使用JDBC URL获取TopicConnectionFactory</p><pre class="oac_no_warn" dir="ltr">String url =“jdbc：oracle：oci10：internal / oracle”属性info = new Properties（）; TopicConnectionFactory tc_fact; info.put（“internal_logon”，“sysdba”）; tc_fact = AQjmsFactory.getTopicConnectionFactory（url，info）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2958"></a><a id="ADQUE2957"></a><div class="props_rev_3"><a id="GUID-B80C7CFE-7821-4093-A49E-A6268D3988F4" name="GUID-B80C7CFE-7821-4093-A49E-A6268D3988F4"></a><h4 id="ADQUE-GUID-B80C7CFE-7821-4093-A49E-A6268D3988F4" class="sect4"><span class="enumeration_section">12.4.4</span>使用JDBC连接参数获取TopicConnectionFactory</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。TopicConnectionFactory getTopicConnectionFactory（java.lang。字符串主机名，java.lang。String oracle_sid，int portno，java.lang。字符串驱动程序）抛出JMSException</pre><p>此方法获取带有JDBC连接参数的<code class="codeph">TopicConnectionFactory</code> 。它是静态的，具有以下参数：</p>
                        <div class="tblformal" id="GUID-B80C7CFE-7821-4093-A49E-A6268D3988F4__GUID-A2F81B94-8C2B-4B58-9E0D-9D6DC3BF3922">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e1732">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e1735">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1740" headers="d78385e1732 ">
                                       <p><code class="codeph">主机名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1740 d78385e1735 ">
                                       <p>运行Oracle数据库高级队列的主机的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1748" headers="d78385e1732 ">
                                       <p><code class="codeph">ORACLE_SID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1748 d78385e1735 ">
                                       <p>Oracle系统标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1756" headers="d78385e1732 ">
                                       <p><code class="codeph">PORTNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1756 d78385e1735 ">
                                       <p>端口号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e1764" headers="d78385e1732 ">
                                       <p><code class="codeph">司机</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e1764 d78385e1735 ">
                                       <p>JDBC驱动程序类型</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B80C7CFE-7821-4093-A49E-A6268D3988F4__GUID-19E0781F-6B26-49B5-90B2-3D3B79488D56">
                        <p class="titleinexample">示例12-10使用JDBC连接参数获取TopicConnectionFactory</p><pre class="oac_no_warn" dir="ltr">String host =“dlsun”; String ora_sid =“rdbms10i”String driver =“thin”; int port = 5521; TopicConnectionFactory tc_fact; tc_fact = AQjmsFactory.getTopicConnectionFactory（host，ora_sid，port，driver）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2960"></a><a id="ADQUE2959"></a><div class="props_rev_3"><a id="GUID-03035D18-B86B-49B1-A204-F985E27AF491" name="GUID-03035D18-B86B-49B1-A204-F985E27AF491"></a><h4 id="ADQUE-GUID-03035D18-B86B-49B1-A204-F985E27AF491" class="sect4"><span class="enumeration_section">12.4.5</span>在LDAP中获取QueueConnectionFactory或TopicConnectionFactory</h4>
                  <div>
                     <div class="section">
                        <p>此方法从LDAP获取<code class="codeph">QueueConnectionFactory</code>或<code class="codeph">TopicConnectionFactory</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-03035D18-B86B-49B1-A204-F985E27AF491__GUID-21D83AA0-16E9-4B1E-9E86-4BBBC5C943B0">
                        <p class="titleinexample">示例12-11在LDAP中获取QueueConnectionFactory或TopicConnectionFactory</p><pre class="oac_no_warn" dir="ltr">Hashtable env = new Hashtable（5,0.75f）; DirContext ctx; queueConnectionFactory qc_fact; / *以下语句在哈希表env中设置：*服务提供程序包* ldap服务器的URL *数据库服务器的可分辨名称*身份验证方法（简单）* LDAP用户名* LDAP用户密码* / env.put （上下文。INITIAL_CONTEXT_FACTORY，“com.sun.jndi.ldap。LdapCtxFactory“）; env.put（Context。PROVIDER_URL，“ldap：// sun-456：389”）; env.put（上下文。SECURITY_AUTHENTICATION，“简单”）; env.put（上下文。SECURITY_PRINCIPAL，“cn = db1aquser1，cn = acme，cn = com”）; env.put（上下文。SECURITY_CREDENTIALS，“欢迎”）; ctx = new InitialDirContext（env）; ctx =（DirContext）ctx.lookup（“cn = OracleDBConnections，cn = db1，cn = Oraclecontext，cn = acme，cn = com”）; qc_fact =（queueConnectionFactory）ctx.lookup（“cn = queue_conn1”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2962"></a><a id="ADQUE2961"></a><div class="props_rev_3"><a id="GUID-2F381380-8A18-40CB-918B-70544AB610CA" name="GUID-2F381380-8A18-40CB-918B-70544AB610CA"></a><h3 id="ADQUE-GUID-2F381380-8A18-40CB-918B-70544AB610CA" class="sect3"><span class="enumeration_section">12.5</span>在LDAP中获取队列或主题</h3>
               <div>
                  <div class="section">
                     <p>此方法从LDAP获取队列或主题。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2F381380-8A18-40CB-918B-70544AB610CA__GUID-F9D198B9-2CC2-41BF-A911-4208E8A46D06">
                     <p class="titleinexample">示例12-12在LDAP中获取队列或主题</p><pre class="oac_no_warn" dir="ltr">Hashtable env = new Hashtable（5,0.75f）; DirContext ctx;话题topic_1; / *以下语句在哈希表env中设置：*服务提供程序包* ldap服务器的URL *数据库服务器的可分辨名称*身份验证方法（简单）* LDAP用户名* LDAP用户密码* / env.put （上下文。INITIAL_CONTEXT_FACTORY，“com.sun.jndi.ldap。LdapCtxFactory“）; env.put（Context。PROVIDER_URL，“ldap：// sun-456：389”）; env.put（上下文。SECURITY_AUTHENTICATION，“简单”）; env.put（上下文。SECURITY_PRINCIPAL，“cn = db1aquser1，cn = acme，cn = com”）; env.put（上下文。SECURITY_CREDENTIALS，“欢迎”）; ctx = new InitialDirContext（env）; ctx =（DirContext）ctx.lookup（“cn = OracleDBQueues，cn = db1，cn = Oraclecontext，cn = acme，cn = com”）; topic_1 =（topic）ctx.lookup（“cn = topic_1”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2964"></a><a id="ADQUE2963"></a><div class="props_rev_3"><a id="GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E" name="GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E"></a><h3 id="ADQUE-GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E" class="sect3"><span class="enumeration_section">12.6</span>创建非分片队列表</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">公共神谕。AQ.AQQueueTable createQueueTable（java.lang。字符串所有者，java.lang。字符串名称，oracle。AQ.AQQueueTableProperty属性）抛出JMSException</pre><p>此方法创建一个<a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">队列表</span></a> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E__GUID-6C77926E-2E43-4E59-96AD-7B18216DF47C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d78385e2020">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d78385e2023">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d78385e2028" headers="d78385e2020 ">
                                    <p><code class="codeph">所有者</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d78385e2028 d78385e2023 ">
                                    <p>队列表所有者（ <a href="glossary.html#GUID-CBE1EC43-DFD2-4701-B758-DCE2C98C277A"><span class="xrefglossterm">架构</span></a> ）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d78385e2040" headers="d78385e2020 ">
                                    <p>名称</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d78385e2040 d78385e2023 ">
                                    <p>队列表名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d78385e2047" headers="d78385e2020 ">
                                    <p>属性</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d78385e2047 d78385e2023 ">
                                    <p>队列表属性</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果队列表用于保存队列，则队列表不能启用多消费者（默认）。如果队列表用于保存主题，则队列表必须启用多个消费者。</p>
                     <p><a href="glossary.html#GUID-6A19CAEE-F2E5-435D-B582-2ECB47FD4D06"><span class="xrefglossterm">CLOB</span></a> ， <a href="glossary.html#GUID-A62D4CF7-C903-40B3-89DC-0D6E4233D7C9"><span class="xrefglossterm">BLOB</span></a>和<a href="glossary.html#GUID-A8B4B248-A9A3-462C-A52B-517BCFAEE0ED"><span class="xrefglossterm">BFILE</span></a>对象是Oracle数据库高级队列<a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型</span></a>加载的有效属性。但是，在Oracle8 <span class="italic">i</span>及更高版本中，只能使用Oracle数据库高级队列<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a>来传播CLOB和BLOB。
                     </p>
                     <div class="infoboxnote" id="GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E__GUID-077D28C3-32A5-4316-938F-7682683C227D">
                        <p class="notep1">注意：</p>
                        <p>目前，只能通过<code class="codeph">DBMS_AQADM</code> PL / SQL API创建和删除JMS Sharded Queues。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-CAE40CF5-1060-45AE-96A0-8FB7016D038E__GUID-810C1B17-91C8-4A7E-B6D3-BECD5C085CBA">
                     <p class="titleinexample">示例12-13创建队列表</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess = null; AQQueueTable q_table = null; AQQueueTableProperty qt_prop = null; qt_prop = new AQQueueTableProperty（“SYS.AQ $ _JMS_BYTES_MESSAGE”）; q_table =（（AQjmsSession）q_sess）.createQueueTable（“boluser”，“bol_ship_queue_table”，qt_prop）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2967"></a><div class="props_rev_3"><a id="GUID-C5773BA3-31DD-4860-B894-579F97C4581D" name="GUID-C5773BA3-31DD-4860-B894-579F97C4581D"></a><h3 id="ADQUE-GUID-C5773BA3-31DD-4860-B894-579F97C4581D" class="sect3"><span class="enumeration_section">12.7</span>创建队列</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-7FBF80A4-ABD8-47FD-AAC4-EF17C732A12E">创建点对点队列</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3">创建发布/订阅主题</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-FC3FA789-8ECD-4259-A9F5-AD3BB3A6F48E">为点对点队列和发布/订阅主题创建分片队列</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2969"></a><a id="ADQUE2968"></a><div class="props_rev_3"><a id="GUID-7FBF80A4-ABD8-47FD-AAC4-EF17C732A12E" name="GUID-7FBF80A4-ABD8-47FD-AAC4-EF17C732A12E"></a><h4 id="ADQUE-GUID-7FBF80A4-ABD8-47FD-AAC4-EF17C732A12E" class="sect4"><span class="enumeration_section">12.7.1</span>创建点对点队列</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。队列createQueue（oracle。AQ.AQQueueTable q_table，java.lang。String queue_name，oracle.jms。AQjmsDestinationProperty dest_property）抛出JMSException</pre><p>此方法在指定的队列表中创建队列。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-7FBF80A4-ABD8-47FD-AAC4-EF17C732A12E__GUID-29378977-5F78-49AC-84C9-C2490ADD7DDE">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e2237">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e2240">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2245" headers="d78385e2237 ">
                                       <p><code class="codeph">q_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2245 d78385e2240 ">
                                       <p>要在其中创建队列的队列表。队列表必须是单用户。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2253" headers="d78385e2237 ">
                                       <p><code class="codeph">queue_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2253 d78385e2240 ">
                                       <p>要创建的队列的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2261" headers="d78385e2237 ">
                                       <p><code class="codeph">dest_property</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2261 d78385e2240 ">
                                       <p>队列属性</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>此方法特定于Oracle JMS。您不能使用标准Java <code class="codeph">javax.jms.Session</code>对象与它。相反，您必须将标准类型<code class="codeph">oracle.jms.转换为Oracle JMS具体类<code class="codeph">oracle.jms.AQjmsSession</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7FBF80A4-ABD8-47FD-AAC4-EF17C732A12E__GUID-90EADA94-A112-4902-B126-86517492638D">
                        <p class="titleinexample">示例12-14创建点对点队列</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess; AQQueueTable q_table; AqjmsDestinationProperty dest_prop;队列队列; queue =（（AQjmsSession）q_sess）。createQueue（q_table，“jms_q1”，dest_prop）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2971"></a><a id="ADQUE2972"></a><a id="ADQUE2970"></a><div class="props_rev_3"><a id="GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3" name="GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3"></a><h4 id="ADQUE-GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3" class="sect4"><span class="enumeration_section">12.7.2</span>创建发布/订阅主题</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。主题createTopic（oracle。AQ.AQQueueTable q_table，java.lang。String topic_name，oracle.jms。AQjmsDestinationProperty dest_property）抛出JMSException</pre><p>此方法在<a href="glossary.html#GUID-C1099A1A-C20D-4C9C-AD73-BBF6BC8939B5"><span class="xrefglossterm">发布/订阅</span></a>模型中创建主题。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3__GUID-F76FAA7F-BD5A-418E-AFD6-760CB01B9943">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e2353">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e2356">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2361" headers="d78385e2353 ">
                                       <p><code class="codeph">q_table</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2361 d78385e2356 ">
                                       <p>要在其中创建队列的队列表。队列表必须是多个用户。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2369" headers="d78385e2353 ">
                                       <p><code class="codeph">queue_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2369 d78385e2356 ">
                                       <p>要创建的队列的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2377" headers="d78385e2353 ">
                                       <p><code class="codeph">dest_property</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2377 d78385e2356 ">
                                       <p>队列属性</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>此方法特定于Oracle JMS。您不能使用标准Java <code class="codeph">javax.jms.Session</code>对象与它。相反，您必须将标准类型<code class="codeph">oracle.jms.转换为Oracle JMS具体类<code class="codeph">oracle.jms.AQjmsSession</code> 。
                        </p>
                        <p>在<a href="jms-basic-operation.html#GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3__CHDIGCAE">例12-16中</a> ，如果由于库存不足而无法填写订单，则终止处理订单的交易。<code class="codeph">bookedorders</code>主题设置为<code class="codeph">max_retries</code> = 4和<code class="codeph">retry_delay</code> = 12小时。因此，如果订单未在两天内填满，则会将其移至异常队列。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3__GUID-EAD1FE4F-058B-493A-8C39-5FC4FB484189">
                        <p class="titleinexample">示例12-15创建发布/订阅主题</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess; AQQueueTable q_table; AqjmsDestinationProperty dest_prop;主题话题; topic =（（AQjmsSessa）t_sess）。createTopic（q_table，“jms_t1”，dest_prop）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B484260C-4585-4FD0-954F-7D32B80A3DB3__CHDIGCAE">
                        <p class="titleinexample">示例12-16指定消息中的最大重试次数和最大延迟次数</p><pre class="oac_no_warn" dir="ltr">public BolOrder process_booked_order（TopicSession jms_session）{主题; TopicSubscriber tsubs; ObjectMessage obj_message; BolCustomer客户; BolOrder booked_order = null;字符串国家; int i = 0;尝试{/ *获取OE_bookedorders_topic的句柄* / topic =（（AQjmsSession）jms_session）.getTopic（“WS”，“WS_bookedorders_topic”）; / *创建本地订阅者 - 跟踪Western Region的消息* / tsubs = jms_session.createDurableSubscriber（topic，“SUBS1”，“Region ='Western'”，false）; / *等待主题中显示的消息* / obj_message =（ObjectMessage）tsubs.receive（10）; booked_order =（BolOrder）obj_message.getObject（）; customer = booked_order.getCustomer（）; country = customer.getCountry（）; if（country ==“US”）{jms_session.commit（）; } else {jms_session.rollback（）; booked_order = null; catch（JMSException ex）{System.out.println（“Exception”+ ex）;} return booked_order; }</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-FC3FA789-8ECD-4259-A9F5-AD3BB3A6F48E" name="GUID-FC3FA789-8ECD-4259-A9F5-AD3BB3A6F48E"></a><h4 id="ADQUE-GUID-FC3FA789-8ECD-4259-A9F5-AD3BB3A6F48E" class="sect4"><span class="enumeration_section">12.7.3</span>为点对点队列和发布/订阅主题创建分片队列</h4>
                  <div>
                     <div class="section">
                        <p>AQ JMS定义了一个新的API来创建和删除分片队列。JMS中没有alter queue API。签名如下：</p><pre class="oac_no_warn" dir="ltr">/ ** *创建JMS分片队列。它还在内部基于此名称创建相关的队列*对象（表，索引）。* * @param queueName要创建的队列的名称，格式为<span class="italic">schema</span> 。 <span class="italic">queueName</span> *（其中<span class="italic">schema</span> 。是可选的* @param isMultipleConsumer标志，用于指示队列是*多消费者队列还是单消费者队列* @return javax.jms。Destination * @throws JMSException如果无法创建队列* / public synchronized javax.jms。目标createJMSShardedQueue（String queueName，boolean isMultipleConsumer）抛出JMSException {return createJMSShardedQueue（queueName，isMultipleConsumer，null，0，null）; }</pre><pre class="oac_no_warn" dir="ltr">/ ** *创建JMS分片队列。它还在内部基于此名称创建相关的队列*对象（表，索引）。* * @param queueName要创建的队列的名称，格式为<span class="italic">schema</span> 。 <span class="italic">queueName</span> *（其中<span class="italic">schema</span> 。是可选的* @param isMultipleConsumer标志，用于指示队列是*多用户还是单用户队列* @param storageClause附加存储子句* @param maxRetries重试计数，然后在出队时跳过消息* @param评论队列的评论* @return javax.jms。Destination * @throws JMSException如果无法创建队列* / public Destination createJMSShardedQueue（java.lang。String queueName，boolean isMultipleConsumer，java.lang。String storageClause，int maxRetries，java.lang。String comment）抛出JMSException</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADQUE2966"></a><a id="ADQUE2965"></a><div class="props_rev_3"><a id="GUID-225E5EC1-1D99-432D-A031-5959005D953A" name="GUID-225E5EC1-1D99-432D-A031-5959005D953A"></a><h3 id="ADQUE-GUID-225E5EC1-1D99-432D-A031-5959005D953A" class="sect3"><span class="enumeration_section">12.8</span>获取非分片队列表</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">公共神谕。AQ.AQQueueTable getQueueTable（java.lang。字符串所有者，java.lang。String name）抛出JMSException</pre><p>此方法获取非分片队列的队列表。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-225E5EC1-1D99-432D-A031-5959005D953A__GUID-F9E22AEA-2E6B-4F10-A39C-6C40DBB860A2">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d78385e2568">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d78385e2571">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d78385e2576" headers="d78385e2568 ">
                                    <p><code class="codeph">所有者</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d78385e2576 d78385e2571 ">
                                    <p>队列表所有者（ <a href="glossary.html#GUID-CBE1EC43-DFD2-4701-B758-DCE2C98C277A"><span class="xrefglossterm">架构</span></a> ）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d78385e2588" headers="d78385e2568 ">
                                    <p>名称</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d78385e2588 d78385e2571 ">
                                    <p>队列表名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果打开连接的调用方不是队列表的所有者，则调用方必须具有<a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">队列表</span></a>中队列/主题的Oracle数据库高级<a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">队</span></a>列入<a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">队</span></a> / <a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">出</span></a>列队列权限。否则，不返回队列表。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-225E5EC1-1D99-432D-A031-5959005D953A__GUID-8EC710C3-4DA7-48EF-AC2B-8ED34FCE599B">
                     <p class="titleinexample">示例12-17获取队列表</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess; AQQueueTable q_table; q_table =（（AQjmsSession）q_sess）.getQueueTable（“boluser”，“bol_ship_queue_table”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE2973"></a><div class="props_rev_3"><a id="GUID-E1BE8E40-4CB2-4366-B161-DCB4F6E62DC0" name="GUID-E1BE8E40-4CB2-4366-B161-DCB4F6E62DC0"></a><h3 id="ADQUE-GUID-E1BE8E40-4CB2-4366-B161-DCB4F6E62DC0" class="sect3"><span class="enumeration_section">12.9</span>授予和撤销权限</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-28C0E4D2-57DC-40F4-82A7-1342DCC0E77D">授予Oracle数据库高级排队系统权限</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-6FCA0DB4-8716-4780-8F64-B02DFE35A7F1">撤销Oracle数据库高级排队系统权限</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-831E4DC7-9EBC-446E-BC55-B5C39C56ED6A">授予发布/订阅主题权限</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-54BD1CAE-E66F-4E1C-8398-22FDEB3F6166">撤消发布/订阅主题权限</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-FDD257B4-ACBA-43E7-940C-E515F6946081">授予点对点队列权限</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-CF07D682-06AF-4F6D-958C-81415605E540">撤销点对点队列权限</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2975"></a><a id="ADQUE2974"></a><div class="props_rev_3"><a id="GUID-28C0E4D2-57DC-40F4-82A7-1342DCC0E77D" name="GUID-28C0E4D2-57DC-40F4-82A7-1342DCC0E77D"></a><h4 id="ADQUE-GUID-28C0E4D2-57DC-40F4-82A7-1342DCC0E77D" class="sect4"><span class="enumeration_section">12.9.1</span>授予Oracle数据库高级排队系统权限</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void grantSystemPrivilege（java.lang。字符串特权，java.lang。String grantee，boolean admin_option）抛出JMSException</pre><p>此方法为用户或角色授予Oracle数据库高级队列系统特权。</p>
                        <div class="tblformal" id="GUID-28C0E4D2-57DC-40F4-82A7-1342DCC0E77D__GUID-B67A7907-7484-4B4C-8235-4FE9498682F3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e2769">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e2772">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2777" headers="d78385e2769 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2777 d78385e2772 ">
                                       <p><code class="codeph">ENQUEUE_ANY</code> ， <code class="codeph">DEQUEUE_ANY</code>或<code class="codeph">MANAGE_ANY</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2792" headers="d78385e2769 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2792 d78385e2772 ">
                                       <p>受赠人（用户，角色或<code class="codeph">PUBLIC</code> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2803" headers="d78385e2769 ">
                                       <p><code class="codeph">ADMIN_OPTION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2803 d78385e2772 ">
                                       <p>如果将此设置为true，则允许被授权者使用此过程将系统特权授予其他用户或角色</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>最初只有<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code>才能成功使用此过程。允许授予<code class="codeph">ENQUEUE_ANY</code>权限的用户将消息排入数据库中的任何队列。允许授予<code class="codeph">DEQUEUE_ANY</code>权限的用户从数据库中的任何队列中出列消息。允许授予<code class="codeph">MANAGE_ANY</code>权限的用户对数据库中的任何模式运行<code class="codeph">DBMS_AQADM</code>调用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-28C0E4D2-57DC-40F4-82A7-1342DCC0E77D__GUID-BF561370-2569-40A1-AAC1-AD3414CFAE66">
                        <p class="titleinexample">示例12-18授予Oracle数据库高级排队系统权限</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess; （（AQjmsSession）t_sess）.grantSystemPrivilege（“ENQUEUE_ANY”，“scott”，false）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2977"></a><a id="ADQUE2976"></a><div class="props_rev_3"><a id="GUID-6FCA0DB4-8716-4780-8F64-B02DFE35A7F1" name="GUID-6FCA0DB4-8716-4780-8F64-B02DFE35A7F1"></a><h4 id="ADQUE-GUID-6FCA0DB4-8716-4780-8F64-B02DFE35A7F1" class="sect4"><span class="enumeration_section">12.9.2</span>撤销Oracle数据库高级排队系统权限</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void revokeSystemPrivilege（java.lang。字符串特权，java.lang。String grantee）抛出JMSException</pre><p>此方法从用户或角色撤消Oracle数据库高级队列系统特权。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-6FCA0DB4-8716-4780-8F64-B02DFE35A7F1__GUID-41E5FE8D-1357-4D5B-A3B1-384834A69DA9">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e2919">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e2922">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2927" headers="d78385e2919 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2927 d78385e2922 ">
                                       <p><code class="codeph">ENQUEUE_ANY</code> ， <code class="codeph">DEQUEUE_ANY</code>或<code class="codeph">MANAGE_ANY</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e2942" headers="d78385e2919 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e2942 d78385e2922 ">
                                       <p>受赠人（用户，角色或<code class="codeph">PUBLIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>允许授予<code class="codeph">ENQUEUE_ANY</code>权限的用户将消息排入数据库中的任何队列。允许授予<code class="codeph">DEQUEUE_ANY</code>权限的用户从数据库中的任何队列中出列消息。允许授予<code class="codeph">MANAGE_ANY</code>权限的用户对数据库中的任何模式运行<code class="codeph">DBMS_AQADM</code>调用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6FCA0DB4-8716-4780-8F64-B02DFE35A7F1__GUID-4ADD89C9-6599-4B6D-BFFF-7E614D2B9FA0">
                        <p class="titleinexample">示例12-19撤消Oracle数据库高级排队系统权限</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess; （（AQjmsSession）t_sess）.revokeSystemPrivilege（“ENQUEUE_ANY”，“scott”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2979"></a><a id="ADQUE2978"></a><div class="props_rev_3"><a id="GUID-831E4DC7-9EBC-446E-BC55-B5C39C56ED6A" name="GUID-831E4DC7-9EBC-446E-BC55-B5C39C56ED6A"></a><h4 id="ADQUE-GUID-831E4DC7-9EBC-446E-BC55-B5C39C56ED6A" class="sect4"><span class="enumeration_section">12.9.3</span>授予发布/订阅主题权限</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void grantTopicPrivilege（javax.jms。会话会话，java.lang。字符串特权，java.lang。String grantee，boolean grant_option）抛出JMSException</pre><p>此方法在发布/订阅模型中授予主题权限。最初，只有队列表所有者才能使用此过程授予该主题的权限。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-831E4DC7-9EBC-446E-BC55-B5C39C56ED6A__GUID-BAA7C31A-D222-402C-88F0-F74D686737A3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3045">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3048">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3053" headers="d78385e3045 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3053 d78385e3048 ">
                                       <p><a href="glossary.html#GUID-F7331CE7-BF82-4FA0-81B3-42D454068F03"><span class="xrefglossterm">JMS会话</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3063" headers="d78385e3045 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3063 d78385e3048 ">
                                       <p><code class="codeph">ENQUEUE</code> ， <code class="codeph">DEQUEUE,</code>或<code class="codeph">ALL</code> （ <code class="codeph">ALL</code>表示两者。）
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3082" headers="d78385e3045 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3082 d78385e3048 ">
                                       <p>受赠人（用户，角色或<code class="codeph">PUBLIC</code> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3093" headers="d78385e3045 ">
                                       <p><code class="codeph">grant_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3093 d78385e3048 ">
                                       <p>如果将此设置为true，则允许被授权者使用此过程将系统特权授予其他用户或角色</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-831E4DC7-9EBC-446E-BC55-B5C39C56ED6A__GUID-FE472CD9-F2B8-4C42-A692-6C1FBEAF4DE8">
                        <p class="titleinexample">示例12-20授予发布/订阅主题权限</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.grantTopicPrivilege（t_sess，“ENQUEUE”，“scott”，false）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2981"></a><a id="ADQUE2980"></a><div class="props_rev_3"><a id="GUID-54BD1CAE-E66F-4E1C-8398-22FDEB3F6166" name="GUID-54BD1CAE-E66F-4E1C-8398-22FDEB3F6166"></a><h4 id="ADQUE-GUID-54BD1CAE-E66F-4E1C-8398-22FDEB3F6166" class="sect4"><span class="enumeration_section">12.9.4</span>撤消发布/订阅主题权限</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void revokeTopicPrivilege（javax.jms。会话会话，java.lang。字符串特权，java.lang。String grantee）抛出JMSException</pre><p>此方法撤消发布/订阅模型中的主题权限。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-54BD1CAE-E66F-4E1C-8398-22FDEB3F6166__GUID-69BAAB69-58DE-4EBF-B82A-F219A9BCE61F">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3174">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3177">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3182" headers="d78385e3174 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3182 d78385e3177 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3190" headers="d78385e3174 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3190 d78385e3177 ">
                                       <p><code class="codeph">ENQUEUE</code> ， <code class="codeph">DEQUEUE,</code>或<code class="codeph">ALL</code> （ <code class="codeph">ALL</code>表示两者。）
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3209" headers="d78385e3174 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3209 d78385e3177 ">
                                       <p>撤销被授予者（用户，角色或<code class="codeph">PUBLIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-54BD1CAE-E66F-4E1C-8398-22FDEB3F6166__GUID-0342E667-71DD-4383-80C8-8D2155622DBB">
                        <p class="titleinexample">示例12-21撤消发布/订阅主题权限</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.revokeTopicPrivilege（t_sess，“ENQUEUE”，“scott”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2983"></a><a id="ADQUE2982"></a><div class="props_rev_3"><a id="GUID-FDD257B4-ACBA-43E7-940C-E515F6946081" name="GUID-FDD257B4-ACBA-43E7-940C-E515F6946081"></a><h4 id="ADQUE-GUID-FDD257B4-ACBA-43E7-940C-E515F6946081" class="sect4"><span class="enumeration_section">12.9.5</span>授予点对点队列权限</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void grantQueuePrivilege（javax.jms。会话会话，java.lang。字符串特权，java.lang。String grantee，boolean grant_option）抛出JMSException</pre><p>此方法在点对点模型中授予队列特权。最初，只有队列表所有者才能使用此过程为队列授予权限。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-FDD257B4-ACBA-43E7-940C-E515F6946081__GUID-D14E7410-DE6C-4CFD-8E9F-D903372839FF">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3301">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3304">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3309" headers="d78385e3301 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3309 d78385e3304 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3317" headers="d78385e3301 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3317 d78385e3304 ">
                                       <p><code class="codeph">ENQUEUE</code> ， <code class="codeph">DEQUEUE,</code>或<code class="codeph">ALL</code> （ <code class="codeph">ALL</code>表示两者。）
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3336" headers="d78385e3301 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3336 d78385e3304 ">
                                       <p>受赠人（用户，角色或<code class="codeph">PUBLIC</code> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3347" headers="d78385e3301 ">
                                       <p><code class="codeph">grant_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3347 d78385e3304 ">
                                       <p>如果将此设置为true，则允许被授权者使用此过程将系统特权授予其他用户或角色</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FDD257B4-ACBA-43E7-940C-E515F6946081__GUID-D46FDB5E-FFDB-4B99-8634-84F67109B78B">
                        <p class="titleinexample">示例12-22授予点对点队列权限</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess;队列队列; （（AQjmsDestination）队列）.grantQueuePrivilege（q_sess，“ENQUEUE”，“scott”，false）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2985"></a><a id="ADQUE2984"></a><div class="props_rev_3"><a id="GUID-CF07D682-06AF-4F6D-958C-81415605E540" name="GUID-CF07D682-06AF-4F6D-958C-81415605E540"></a><h4 id="ADQUE-GUID-CF07D682-06AF-4F6D-958C-81415605E540" class="sect4"><span class="enumeration_section">12.9.6</span>撤销点对点队列权限</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void revokeQueuePrivilege（javax.jms。会话会话，java.lang。字符串特权，java.lang。String grantee）抛出JMSException</pre><p>此方法撤消点对点模型中的队列特权。最初，只有队列表所有者才能使用此过程为队列授予权限。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-CF07D682-06AF-4F6D-958C-81415605E540__GUID-A2A791EE-1D96-4E70-B604-60A2647DF74A">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3437">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3440">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3445" headers="d78385e3437 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3445 d78385e3440 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3453" headers="d78385e3437 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3453 d78385e3440 ">
                                       <p><code class="codeph">ENQUEUE</code> ， <code class="codeph">DEQUEUE,</code>或<code class="codeph">ALL</code> （ <code class="codeph">ALL</code>表示两者。）
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3472" headers="d78385e3437 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3472 d78385e3440 ">
                                       <p>撤销被授予者（用户，角色或<code class="codeph">PUBLIC</code> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>要撤销特权，撤销者必须是特权的原始设保人。如果授予者权限也被撤销，则通过<code class="codeph">GRANT</code>选项传播的权限将被撤销。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-CF07D682-06AF-4F6D-958C-81415605E540__GUID-B1E470C3-D99A-468F-A117-4499CDC1F79A">
                        <p class="titleinexample">示例12-23撤消点对点队列权限</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess;队列队列; （（AQjmsDestination）队列）.revokeQueuePrivilege（q_sess，“ENQUEUE”，“scott”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2986"></a><div class="props_rev_3"><a id="GUID-3F0936CB-2532-4C08-A620-F2054BDD7160" name="GUID-3F0936CB-2532-4C08-A620-F2054BDD7160"></a><h3 id="ADQUE-GUID-3F0936CB-2532-4C08-A620-F2054BDD7160" class="sect3"><span class="enumeration_section">12.10</span>管理目的地</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-671472A1-A13F-4BEA-BCDF-F336838800B8">启动目的地</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-667929DA-D743-4A84-8B4C-DFEA44871DFE">停止目的地</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-EE2368BC-8B0D-4FD6-9B1D-4B966702D0CB">改变目的地</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-6A77B510-BA26-483F-B55F-4CCB69AF14B9">删除目的地</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-3F0936CB-2532-4C08-A620-F2054BDD7160__GUID-3DA62304-F8B9-4308-BF74-E59082BB3F98">
                     <p class="notep1">注意：</p>
                     <p>目前，只能通过<code class="codeph">DBMS_AQADM</code> PL / SQL API管理JMS Sharded Queues。</p>
                  </div>
               </div><a id="ADQUE2988"></a><a id="ADQUE2987"></a><div class="props_rev_3"><a id="GUID-671472A1-A13F-4BEA-BCDF-F336838800B8" name="GUID-671472A1-A13F-4BEA-BCDF-F336838800B8"></a><h4 id="ADQUE-GUID-671472A1-A13F-4BEA-BCDF-F336838800B8" class="sect4"><span class="enumeration_section">12.10.1</span>启动目的地</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void start（javax.jms。Session session，boolean enqueue，boolean dequeue）抛出JMSException</pre><p>此方法启动目标。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-671472A1-A13F-4BEA-BCDF-F336838800B8__GUID-A663B8CF-903B-4143-A605-91F1807DF963">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3633">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3636">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3641" headers="d78385e3633 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3641 d78385e3636 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3649" headers="d78385e3633 ">
                                       <p><code class="codeph">排队</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3649 d78385e3636 ">
                                       <p>如果设置为<code class="codeph">TRUE</code> ，则启用enqueue</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3660" headers="d78385e3633 ">
                                       <p>出队</p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3660 d78385e3636 ">
                                       <p>如果设置为<code class="codeph">TRUE</code> ，则启用出列</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-671472A1-A13F-4BEA-BCDF-F336838800B8__GUID-8851156D-C798-4FC2-98BB-4630875D8BA2">
                        <p class="titleinexample">示例12-24启动目标</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess; QueueSession q_sess;主题话题;队列队列; （AQjmsDestination）topic.start（t_sess，true，true）; （AQjmsDestination）queue.start（q_sess，true，true）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2990"></a><a id="ADQUE2989"></a><div class="props_rev_3"><a id="GUID-667929DA-D743-4A84-8B4C-DFEA44871DFE" name="GUID-667929DA-D743-4A84-8B4C-DFEA44871DFE"></a><h4 id="ADQUE-GUID-667929DA-D743-4A84-8B4C-DFEA44871DFE" class="sect4"><span class="enumeration_section">12.10.2</span>停止目的地</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void stop（javax.jms。Session session，boolean enqueue，boolean dequeue，boolean wait）抛出JMSException</pre><p>此方法停止目的地。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-667929DA-D743-4A84-8B4C-DFEA44871DFE__GUID-1568D617-184D-4812-8322-CD2A7E674DE9">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3737">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3740">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3745" headers="d78385e3737 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3745 d78385e3740 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3753" headers="d78385e3737 ">
                                       <p><code class="codeph">排队</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3753 d78385e3740 ">
                                       <p>如果设置为<code class="codeph">TRUE</code> ，则禁用入队</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3764" headers="d78385e3737 ">
                                       <p>出队</p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3764 d78385e3740 ">
                                       <p>如果设置为<code class="codeph">TRUE</code> ，则禁用出列</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3774" headers="d78385e3737 ">
                                       <p><code class="codeph">等待</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3774 d78385e3740 ">
                                       <p>如果设置为true，则允许在目标停止之前完成队列/主题上的挂起事务</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-667929DA-D743-4A84-8B4C-DFEA44871DFE__GUID-DD6C8480-734F-452F-AC28-2A6F8646077F">
                        <p class="titleinexample">示例12-25停止目标</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.stop（t_sess，true，false）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2992"></a><a id="ADQUE2991"></a><div class="props_rev_3"><a id="GUID-EE2368BC-8B0D-4FD6-9B1D-4B966702D0CB" name="GUID-EE2368BC-8B0D-4FD6-9B1D-4B966702D0CB"></a><h4 id="ADQUE-GUID-EE2368BC-8B0D-4FD6-9B1D-4B966702D0CB" class="sect4"><span class="enumeration_section">12.10.3</span>更改目的地</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void alter（javax.jms。会话会话，oracle.jms。AQjmsDestinationProperty dest_property）抛出JMSException</pre><p>此方法更改目的地。它具有以下属性：</p>
                        <div class="tblformal" id="GUID-EE2368BC-8B0D-4FD6-9B1D-4B966702D0CB__GUID-01E065BC-89A2-4190-91CD-375F149E35E7">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3850">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3853">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3858" headers="d78385e3850 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3858 d78385e3853 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3866" headers="d78385e3850 ">
                                       <p>dest_property</p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3866 d78385e3853 ">
                                       <p>队列或主题的新属性</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EE2368BC-8B0D-4FD6-9B1D-4B966702D0CB__GUID-DEB9C472-FDA6-4C50-8D95-6E41CFD26797">
                        <p class="titleinexample">示例12-26更改目标</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess;队列队列; TopicSession t_sess;主题话题; AQjmsDestionationProperty dest_prop1，dest_prop2; （（AQjmsDestination）队列）.alter（dest_prop1）; （（AQjmsDestination）主题）.alter（dest_prop2）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2994"></a><a id="ADQUE2993"></a><div class="props_rev_3"><a id="GUID-6A77B510-BA26-483F-B55F-4CCB69AF14B9" name="GUID-6A77B510-BA26-483F-B55F-4CCB69AF14B9"></a><h4 id="ADQUE-GUID-6A77B510-BA26-483F-B55F-4CCB69AF14B9" class="sect4"><span class="enumeration_section">12.10.4</span>删除目的地</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void drop（javax.jms。会话会话）抛出JMSException</pre><p>此方法删除目标。它有以下参数：</p>
                        <div class="tblformal" id="GUID-6A77B510-BA26-483F-B55F-4CCB69AF14B9__GUID-7BA5199B-C1F6-4012-8A35-F466FC019EFF">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e3940">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e3943">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e3948" headers="d78385e3940 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e3948 d78385e3943 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6A77B510-BA26-483F-B55F-4CCB69AF14B9__GUID-5DAF65BD-69B4-40A3-8C9A-1C50BE0CEB55">
                        <p class="titleinexample">示例12-27删除目标</p><pre class="oac_no_warn" dir="ltr">QueueSession q_sess;队列队列; TopicSession t_sess;主题话题; （（AQjmsDestionation）队列）.drop（q_sess）; （（AQjmsDestionation）主题）.drop（t_sess）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE2995"></a><div class="props_rev_3"><a id="GUID-5916ED2D-BF69-4033-8E5C-1CF00657966A" name="GUID-5916ED2D-BF69-4033-8E5C-1CF00657966A"></a><h3 id="ADQUE-GUID-5916ED2D-BF69-4033-8E5C-1CF00657966A" class="sect3"><span class="enumeration_section">12.11</span>传播时间表</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-6AE9BA1A-2413-4656-855D-62470AD0328D">调度传播</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-D66614E3-6291-4C23-B60C-5D150AE769E3">启用传播计划</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-C27DC562-4602-4862-A64F-15DD4FF5BFF7">改变传播时间表</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-DA8925B2-A76D-45E6-AA05-638A0386C2F1">禁用传播计划</a></p>
                     </li>
                     <li>
                        <p><a href="jms-basic-operation.html#GUID-2CB43510-0940-4866-8F24-87DF05C01D2C">不安排传播</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-5916ED2D-BF69-4033-8E5C-1CF00657966A__GUID-55963588-65F5-4B96-AFE5-7C8F43F9BEA2">
                     <p class="notep1">注意：</p>
                     <p>JMS Sharded Queues目前仅通过<code class="codeph">DBMS_AQADM</code> PL / SQL API进行管理，不支持传播。
                     </p>
                  </div>
               </div><a id="ADQUE2997"></a><a id="ADQUE2996"></a><div class="props_rev_3"><a id="GUID-6AE9BA1A-2413-4656-855D-62470AD0328D" name="GUID-6AE9BA1A-2413-4656-855D-62470AD0328D"></a><h4 id="ADQUE-GUID-6AE9BA1A-2413-4656-855D-62470AD0328D" class="sect4"><span class="enumeration_section">12.11.1</span>调度传播</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void schedulePropagation（javax.jms。会话会话，java.lang。字符串目标，java.util。日期start_time，java.lang。双持续时间，java.lang。String next_time，java.lang。双延迟）抛出JMSException</pre><p>该方法调度传播。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-6AE9BA1A-2413-4656-855D-62470AD0328D__GUID-EDB18AF0-CF3F-4100-8798-5F6FAC51316C">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e4118">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e4121">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4126" headers="d78385e4118 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4126 d78385e4121 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4134" headers="d78385e4118 ">
                                       <p><code class="codeph">目的地</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4134 d78385e4121 ">
                                       <p>正在调度传播的远程数据库的数据库链接。空字符串表示为主题数据库中的所有订户调度传播。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4142" headers="d78385e4118 ">
                                       <p><code class="codeph">开始时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4142 d78385e4121 ">
                                       <p>时间传播开始</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4150" headers="d78385e4118 ">
                                       <p><code class="codeph">持续时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4150 d78385e4121 ">
                                       <p>传播持续时间</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4158" headers="d78385e4118 ">
                                       <p><code class="codeph">下次</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4158 d78385e4121 ">
                                       <p>下次传播开始</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4166" headers="d78385e4118 ">
                                       <p><code class="codeph">潜伏</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4166 d78385e4121 ">
                                       <p>可以容忍的延迟（以秒为单位）。延迟是消息入队的时间与传播时间之间的差异。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">邮件</span></a>在相同或不同队列中的同一目标上有多个收件人，则它会同时传播到所有这些收件人。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6AE9BA1A-2413-4656-855D-62470AD0328D__GUID-8CD6BDE0-EF59-44C7-9F29-128452AA59C2">
                        <p class="titleinexample">例12-28调度传播</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.schedulePropagation（t_sess，null，null，null，null，new Double（0））;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2999"></a><a id="ADQUE2998"></a><div class="props_rev_3"><a id="GUID-D66614E3-6291-4C23-B60C-5D150AE769E3" name="GUID-D66614E3-6291-4C23-B60C-5D150AE769E3"></a><h4 id="ADQUE-GUID-D66614E3-6291-4C23-B60C-5D150AE769E3" class="sect4"><span class="enumeration_section">12.11.2</span>启用传播计划</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void enablePropagationSchedule（javax.jms。会话会话，java.lang。String destination）抛出JMSException</pre><p>该方法实现了传播计划。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-D66614E3-6291-4C23-B60C-5D150AE769E3__GUID-02935B7E-707F-4F5E-AEB2-71FBAE0E15A1">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e4253">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e4256">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4261" headers="d78385e4253 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4261 d78385e4256 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4269" headers="d78385e4253 ">
                                       <p><code class="codeph">目的地</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4269 d78385e4256 ">
                                       <p>目标数据库的数据库链接。空字符串表示传播到本地数据库。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D66614E3-6291-4C23-B60C-5D150AE769E3__GUID-20CE848D-23A7-4FCA-8C42-2E5247D9A816">
                        <p class="titleinexample">示例12-29启用传播计划</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.enablePropagationSchedule（t_sess，“dbs1”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE3001"></a><a id="ADQUE3000"></a><div class="props_rev_3"><a id="GUID-C27DC562-4602-4862-A64F-15DD4FF5BFF7" name="GUID-C27DC562-4602-4862-A64F-15DD4FF5BFF7"></a><h4 id="ADQUE-GUID-C27DC562-4602-4862-A64F-15DD4FF5BFF7" class="sect4"><span class="enumeration_section">12.11.3</span>改变传播时间表</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void alterPropagationSchedule（javax.jms。会话会话，java.lang。字符串目标，java.lang。双持续时间，java.lang。String next_time，java.lang。双延迟）抛出JMSException</pre><p>该方法改变了传播时间表。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-C27DC562-4602-4862-A64F-15DD4FF5BFF7__GUID-C540F04B-58A9-4336-A1E4-58338E07D5EE">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e4351">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e4354">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4359" headers="d78385e4351 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4359 d78385e4354 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4367" headers="d78385e4351 ">
                                       <p><code class="codeph">目的地</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4367 d78385e4354 ">
                                       <p>正在调度传播的远程数据库的数据库链接。空字符串表示为主题数据库中的所有订户调度传播。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4375" headers="d78385e4351 ">
                                       <p><code class="codeph">持续时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4375 d78385e4354 ">
                                       <p>传播持续时间</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4383" headers="d78385e4351 ">
                                       <p><code class="codeph">下次</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4383 d78385e4354 ">
                                       <p>下次传播开始</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4391" headers="d78385e4351 ">
                                       <p><code class="codeph">潜伏</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4391 d78385e4354 ">
                                       <p>可以容忍的延迟（以秒为单位）。延迟是消息入队的时间与传播时间之间的差异。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C27DC562-4602-4862-A64F-15DD4FF5BFF7__GUID-252688D0-3FBA-497F-8CEA-EE44850D8191">
                        <p class="titleinexample">例12-30改变传播时间表</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.alterPropagationSchedule（t_sess，null，30，null，new Double（30））;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE3003"></a><a id="ADQUE3002"></a><div class="props_rev_3"><a id="GUID-DA8925B2-A76D-45E6-AA05-638A0386C2F1" name="GUID-DA8925B2-A76D-45E6-AA05-638A0386C2F1"></a><h4 id="ADQUE-GUID-DA8925B2-A76D-45E6-AA05-638A0386C2F1" class="sect4"><span class="enumeration_section">12.11.4</span>禁用传播计划</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void disablePropagationSchedule（javax.jms。会话会话，java.lang。String destination）抛出JMSException</pre><p>此方法禁用传播计划。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-DA8925B2-A76D-45E6-AA05-638A0386C2F1__GUID-0F96EC9A-AE53-498B-B41B-4FCC7C72D02B">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e4472">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e4475">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4480" headers="d78385e4472 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4480 d78385e4475 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4488" headers="d78385e4472 ">
                                       <p><code class="codeph">目的地</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4488 d78385e4475 ">
                                       <p>目标数据库的数据库链接。空字符串表示传播到本地数据库。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DA8925B2-A76D-45E6-AA05-638A0386C2F1__GUID-EA8430E5-50AD-4736-BA3D-9160C187E388">
                        <p class="titleinexample">示例12-31禁用传播计划</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.disablePropagationSchedule（t_sess，“dbs1”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE3005"></a><a id="ADQUE3004"></a><div class="props_rev_3"><a id="GUID-2CB43510-0940-4866-8F24-87DF05C01D2C" name="GUID-2CB43510-0940-4866-8F24-87DF05C01D2C"></a><h4 id="ADQUE-GUID-2CB43510-0940-4866-8F24-87DF05C01D2C" class="sect4"><span class="enumeration_section">12.11.5不安排</span>传播</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public void unschedulePropagation（javax.jms。会话会话，java.lang。String destination）抛出JMSException</pre><p>此方法取消预先安排先前安排的传播。它具有以下参数：</p>
                        <div class="tblformal" id="GUID-2CB43510-0940-4866-8F24-87DF05C01D2C__GUID-7E5F9698-A3D1-4C37-879B-29842D494F37">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d78385e4575">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d78385e4578">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4583" headers="d78385e4575 ">
                                       <p><code class="codeph">会议</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4583 d78385e4578 ">
                                       <p>JMS会话</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d78385e4591" headers="d78385e4575 ">
                                       <p><code class="codeph">目的地</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d78385e4591 d78385e4578 ">
                                       <p>目标数据库的数据库链接。空字符串表示传播到本地数据库。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2CB43510-0940-4866-8F24-87DF05C01D2C__GUID-A5FDF52A-5ECA-4A70-991B-0B1497BFAB17">
                        <p class="titleinexample">例12-32取消传播传播</p><pre class="oac_no_warn" dir="ltr">TopicSession t_sess;主题话题; （（AQjmsDestination）主题）.unschedulePropagation（t_sess，“dbs1”）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
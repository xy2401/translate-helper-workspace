<html id="10295.ADMINISTER-KEY-MANAGEMENT.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>管理员密钥管理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="How-the-SQL-Statement-Chapters-are-Organized.html" title="Previous" type="text/html"></link>
      <link rel="next" href="ALTER-ANALYTIC-VIEW.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="How-the-SQL-Statement-Chapters-are-Organized.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="ALTER-ANALYTIC-VIEW.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ADMINISTER-KEY-MANAGEMENT-to-ALTER-JAVA.html" property="item" typeof="WebPage"><span property="name">SQL语句：管理密钥管理到ALTER JAVA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理员密钥管理</li>
            </ol>
            <a id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9" name="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9"></a><a id="SQLRF55977"></a><a id="SQLRF55978"></a><a id="SQLRF55979"></a><a id="SQLRF55983"></a><a id="SQLRF56251"></a><a id="SQLRF55984"></a><a id="SQLRF55980"></a><a id="SQLRF55981"></a><a id="SQLRF55982"></a><a id="SQLRF55986"></a><a id="SQLRF56252"></a><a id="SQLRF55987"></a><a id="SQLRF55988"></a><a id="SQLRF55989"></a><a id="SQLRF55991"></a><a id="SQLRF55990"></a><a id="SQLRF56071"></a><a id="SQLRF56253"></a><a id="SQLRF55992"></a><a id="SQLRF55993"></a><a id="SQLRF55994"></a><a id="SQLRF56254"></a><a id="SQLRF56255"></a><a id="SQLRF56256"></a><a id="SQLRF56257"></a><a id="SQLRF56258"></a><a id="SQLRF56259"></a><a id="SQLRF56260"></a><a id="SQLRF56261"></a><a id="SQLRF56262"></a><a id="SQLRF56267"></a><a id="SQLRF56268"></a><a id="SQLRF56269"></a><a id="SQLRF56272"></a><a id="SQLRF56270"></a><a id="SQLRF56271"></a><a id="SQLRF56273"></a><a id="SQLRF56275"></a><a id="SQLRF56625"></a><a id="SQLRF56274"></a><a id="SQLRF56276"></a><a id="SQLRF56277"></a><a id="SQLRF56278"></a><a id="SQLRF56279"></a><a id="SQLRF56280"></a><a id="SQLRF56522"></a><a id="SQLRF56340"></a><a id="SQLRF56341"></a><a id="SQLRF56493"></a><a id="SQLRF56494"></a><a id="SQLRF56495"></a><a id="SQLRF56496"></a><a id="SQLRF56497"></a><a id="SQLRF56498"></a><a id="SQLRF56499"></a><a id="SQLRF56500"></a><a id="SQLRF56501"></a><a id="SQLRF56502"></a><a id="SQLRF56503"></a><a id="SQLRF56504"></a><a id="SQLRF56626"></a><a id="SQLRF56505"></a><a id="SQLRF56506"></a><a id="SQLRF56507"></a><a id="SQLRF55976"></a>
            
            <h2 id="SQLRF-GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9" class="sect2">管理员密钥管理</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-B5E6F278-EC9B-4DC5-B5E0-47B00945B36F">目的</p>
                  <p><code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code>语句为透明数据加密提供统一的密钥管理界面。使用此声明：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>管理软件和硬件密钥库</p>
                     </li>
                     <li>
                        <p>管理加密密钥</p>
                     </li>
                     <li>
                        <p>管理秘密</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-240DA612-1671-4378-A66D-154A981CDC9F">先决条件</p>
                  <p>您必须具有<code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code>或<code class="codeph">SYSKM</code>系统特权。
                  </p>
                  <p>要指定<code class="codeph">CONTAINER</code>子句，必须连接到多租户容器数据库（CDB）。要指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> ，当前容器必须是root，并且您必须具有通常授予的<code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-6CF17967-CAFC-47E7-8712-5BDFBFE27BA4">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-56C8FC2B-3170-4C86-8881-C12F1EC0011B"><span class="italic">administration_key_management</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-153AE32B-309C-4F30-A706-664D18507604"><img src="img/administer_key_management.gif" alt="ADMIN_key_management.eps的描述如下" title="ADMIN_key_management.eps的描述如下" longdesc="img_text/administer_key_management.html"><br><a href="img_text/administer_key_management.html">admin_key_management.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJEEFB">keystore_management_clauses :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFECGG">key_management_clauses :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEJDAI">secret_management_clauses :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJEEFB">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-78098F38-585E-4EEB-A3B4-58A9F04D1219"><span class="italic">keystore_management_clauses</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C48F50F7-BEAE-4DCD-9470-7994B53BDA6E"><img src="img/keystore_management_clauses.gif" alt="下面是keystore_management_clauses.eps的描述" title="下面是keystore_management_clauses.eps的描述" longdesc="img_text/keystore_management_clauses.html"><br><a href="img_text/keystore_management_clauses.html">keystore_management_clauses.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFAFFD">create_keystore :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDBEJF">open_keystore :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDHCEE">close_keystore :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJDBFF">backup_keystore :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFDIEE">alter_keystore_password :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGJCGG">merge_into_new_keystore :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFFGDF">merge_into_existing_keystore :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFAFFD">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-959D5464-035C-4B37-8CF4-66EA17543430"><span class="italic">create_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-237FEC5C-365A-4EA6-B4BC-CAB276A92613"><img src="img/create_keystore.gif" alt="下面是create_keystore.eps的描述" title="下面是create_keystore.eps的描述" longdesc="img_text/create_keystore.html"><br><a href="img_text/create_keystore.html">说明create_keystore.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDBEJF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-65DD492B-F0E1-4714-BA38-C34599350B48"><span class="italic">open_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F77A22EF-D732-47C9-8539-47F949D484C9"><img src="img/open_keystore.gif" alt="下面是open_keystore.eps的描述" title="下面是open_keystore.eps的描述" longdesc="img_text/open_keystore.html"><br><a href="img_text/open_keystore.html">open_keystore.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEDHCEE">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5C592801-3D26-425D-803F-DA3F7A9E3D28"><span class="italic">close_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-E4ABEB03-9472-4ECC-AC75-B69E8C7E34B8"><img src="img/close_keystore.gif" alt="close_keystore.eps的描述如下" title="close_keystore.eps的描述如下" longdesc="img_text/close_keystore.html"><br><a href="img_text/close_keystore.html">插图描述close_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJDBFF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-950A0E57-307E-4BF5-9EDF-6F6EA36A7473"><span class="italic">backup_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-2BFE6D64-8679-41B3-BD27-284E751B3D3D"><img src="img/backup_keystore.gif" alt="backup_keystore.eps的描述如下" title="backup_keystore.eps的描述如下" longdesc="img_text/backup_keystore.html"><br><a href="img_text/backup_keystore.html">说明backup_keystore.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFDIEE">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8CDA471F-4B5E-44A8-A20F-E6E88014B20F"><span class="italic">alter_keystore_password</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9791208A-A4B2-416C-BD60-96A568DBE6A2"><img src="img/alter_keystore_password.gif" alt="下面是alter_keystore_password.eps的说明" title="下面是alter_keystore_password.eps的说明" longdesc="img_text/alter_keystore_password.html"><br><a href="img_text/alter_keystore_password.html">说明alter_keystore_password.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGJCGG">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-96F61513-7E8D-4F46-BBB7-8B1E7BA45BE2"><span class="italic">merge_into_new_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-DC120BBD-AAD7-4694-872F-A89EE4923EC7"><img src="img/merge_into_new_keystore.gif" alt="merge_into_new_keystore.eps的描述如下" title="merge_into_new_keystore.eps的描述如下" longdesc="img_text/merge_into_new_keystore.html"><br><a href="img_text/merge_into_new_keystore.html">merge_into_new_keystore.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFFGDF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C0BF7400-1381-46F3-AA2D-221918DDDCBE"><span class="italic">merge_into_existing_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-06368538-79EE-4283-BD52-B28D65015EB4"><img src="img/merge_into_existing_keystore.gif" alt="merge_into_existing_keystore.eps的描述如下" title="merge_into_existing_keystore.eps的描述如下" longdesc="img_text/merge_into_existing_keystore.html"><br><a href="img_text/merge_into_existing_keystore.html">merge_into_existing_keystore.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-543FE332-9838-4F1D-A9BC-4EB8AB011161"><span class="italic">isolate_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F037B44B-1450-4D44-902F-6FC1B8E6DC01"><img src="img/isolate_keystore.gif" alt="下面是isolate_keystore.eps的描述" title="下面是isolate_keystore.eps的描述" longdesc="img_text/isolate_keystore.html"><br><a href="img_text/isolate_keystore.html">插图说明isolate_keystore.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-03BB1F8F-DAC6-4A7F-8960-36982969CF6B"><span class="italic">unite_keystore</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-2F0FE261-F31C-47F1-9E54-051BF50563D9"><img src="img/unite_keystore.gif" alt="下面是unite_keystore.eps的描述" title="下面是unite_keystore.eps的描述" longdesc="img_text/unite_keystore.html"><br><a href="img_text/unite_keystore.html">说明unite_keystore.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFECGG">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9249C472-D4F7-4368-94F3-84EC55052857"><span class="italic">key_management_clauses</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9CFBDAE5-D4CA-4BD8-875D-2D9D9AEDAA0A"><img src="img/key_management_clauses.gif" alt="key_management_clauses.eps的描述如下" title="key_management_clauses.eps的描述如下" longdesc="img_text/key_management_clauses.html"><br><a href="img_text/key_management_clauses.html">key_management_clauses.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEHAIAI">set_key :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEHAIAI">create_key :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGGEGI">use_key :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJHBCJ">set_key_tag :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBBAC">export_keys :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGECAFFH">import_keys :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJBIFJ">migrate_key</a></span> <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBHGHA">:: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEAGHG">reverse_migrate_key :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEHAIAI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-13644FFD-38F4-43FB-A043-E7FFD35935DD"><span class="italic">set_key</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-38DA1A10-3ED1-4314-8111-D7E9FA377590"><img src="img/set_key.gif" alt="下面是set_key.eps的描述" title="下面是set_key.eps的描述" longdesc="img_text/set_key.html"><br><a href="img_text/set_key.html">插图描述set_key.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEGGEGI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-96B7F9AE-432D-4DDC-9845-40BF6DAF78F9"><span class="italic">create_key</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5B421E25-BD50-461A-ABAA-81CBB8C55AF7"><img src="img/create_key.gif" alt="下面是create_key.eps的描述" title="下面是create_key.eps的描述" longdesc="img_text/create_key.html"><br><a href="img_text/create_key.html">说明create_key.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJHBCJ">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-656E033B-6D26-4E4B-A90D-0417B4FE3CAE"><span class="italic">use_key</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-011FE799-EF5A-4724-A5BE-C357AED57915"><img src="img/use_key.gif" alt="use_key.eps的描述如下" title="use_key.eps的描述如下" longdesc="img_text/use_key.html"><br><a href="img_text/use_key.html">说明use_key.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBBAC">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-35AB658F-0A56-4012-972D-9A081DDD7202"><span class="italic">set_key_tag</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-51283FCF-615E-4DDC-B264-B6AAC7302A8C"><img src="img/set_key_tag.gif" alt="下面是set_key_tag.eps的描述" title="下面是set_key_tag.eps的描述" longdesc="img_text/set_key_tag.html"><br><a href="img_text/set_key_tag.html">插图描述set_key_tag.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGECAFFH">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5F8328C3-DB8B-49CC-9B53-6CA3EA741176"><span class="italic">export_keys</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C13EE6AD-98E1-42ED-9EA5-CE708AD6BA87"><img src="img/export_keys.gif" alt="export_keys.eps的描述如下" title="export_keys.eps的描述如下" longdesc="img_text/export_keys.html"><br><a href="img_text/export_keys.html">说明export_keys.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJBIFJ">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-3D4B59EB-B502-4F8C-92A0-945178095E2B"><span class="italic">import_keys</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-37B83242-EF07-4D82-BFD7-ADB1070A6446"><img src="img/import_keys.gif" alt="随后是import_keys.eps的描述" title="随后是import_keys.eps的描述" longdesc="img_text/import_keys.html"><br><a href="img_text/import_keys.html">import_keys.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBHGHA">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-DBB1EE5A-ECD8-4B8A-8B38-50F33186C432"><span class="italic">migrate_key</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C1BA77A8-0A97-4667-8BF2-1F6D16BF8D93"><img src="img/migrate_key.gif" alt="随后说明migrate_key.eps" title="随后说明migrate_key.eps" longdesc="img_text/migrate_key.html"><br><a href="img_text/migrate_key.html">说明migrate_key.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEAGHG">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-4B8361FC-1199-4EE5-BDFB-E24EB58B3911"><span class="italic">reverse_migrate_key</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F214D1D3-F8ED-4718-A933-7CA2547B276E"><img src="img/reverse_migrate_key.gif" alt="下面是reverse_migrate_key.eps的描述" title="下面是reverse_migrate_key.eps的描述" longdesc="img_text/reverse_migrate_key.html"><br><a href="img_text/reverse_migrate_key.html">说明reverse_migrate_key.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-EB7696E0-84AF-4B82-AF82-664830BC1BD2"><span class="italic">move_keys</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-517305B4-32B7-4722-9695-214311827438"><img src="img/move_keys.gif" alt="下面是move_keys.eps的描述" title="下面是move_keys.eps的描述" longdesc="img_text/move_keys.html"><br><a href="img_text/move_keys.html">说明move_keys.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEJDAI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5EDED6A1-5D25-4DA8-B0EA-E952149A0F6E"><span class="italic">secret_management_clauses</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-B3627463-A82F-432A-8BE5-D7A68E8446BB"><img src="img/secret_management_clauses.gif" alt="secret_management_clauses.eps的描述如下" title="secret_management_clauses.eps的描述如下" longdesc="img_text/secret_management_clauses.html"><br><a href="img_text/secret_management_clauses.html">插图描述secret_management_clauses.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBDBJI">add_update_secret :: =</a></span> ， <span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBIEH">delete_secret :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEBDBJI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-D28BB8DA-2A62-44E5-ABD0-8BCCDADC4343"><span class="italic">add_update_secret</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-3B971662-D93F-4F10-A1CE-8D70A50495F2"><img src="img/add_update_secret.gif" alt="add_update_secret.eps的描述如下" title="add_update_secret.eps的描述如下" longdesc="img_text/add_update_secret.html"><br><a href="img_text/add_update_secret.html">插图说明add_update_secret.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEBIEH">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-7F785DB9-6A78-450A-A68E-08CD2AFC19D1"><span class="italic">delete_secret</span> :: =</p>
                  <div class="figure" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8BB58324-F0E9-4F22-BF14-DC8582FF8F84"><img src="img/delete_secret.gif" alt="随后是delete_secret.eps的描述" title="随后是delete_secret.eps的描述" longdesc="img_text/delete_secret.html"><br><a href="img_text/delete_secret.html">插图说明delete_secret.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0F4FF106-6E12-4C3D-9F87-781E580F667B">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-62DF4331-1F17-4D20-B782-3EA9EE705D8C"><span class="italic">keystore_management_clauses</span></p>
                  <p>使用这些子句执行以下密钥库管理操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建一个软件密钥库</p>
                     </li>
                     <li>
                        <p>打开和关闭软件密钥库或硬件密钥库</p>
                     </li>
                     <li>
                        <p>备份受密码保护的软件密钥库</p>
                     </li>
                     <li>
                        <p>更改受密码保护的软件密钥库的密码</p>
                     </li>
                     <li>
                        <p>将两个现有软件密钥库合并到一个新的受密码保护的软件密钥库中</p>
                     </li>
                     <li>
                        <p>将一个现有软件密钥库合并到现有的受密码保护的软件密钥库中</p>
                     </li>
                     <li>
                        <p>从容器数据库（CDB）中隔离可插拔数据库（PDB）的密钥库，以便PDB可以管理自己的密钥库。</p>
                     </li>
                     <li>
                        <p>将PDB的密钥库与CDB联合起来。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-60C0E624-8B52-4528-857B-0DC159F1D528"><span class="italic">create_keystore</span></p>
                  <p>此子句允许您创建以下类型的软件密钥库：受密码保护的软件密钥库和自动登录软件密钥库。要在多租户环境中发出此子句，您必须连接到根。</p>
                  <p><span class="bold">创建KEYSTORE</span></p>
                  <p>指定此子句以创建受密码保护的软件密钥库。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore_location</code></span> ，请指定软件密钥库目录的完整路径名。密钥库将在此目录中的名为<code class="codeph">ewallet.p12</code>的文件中创建。如果已设置<code class="codeph">WALLET_ROOT</code>参数，则此子句是可选的。请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10276" target="_blank"><span class="italic">Oracle数据库高级安全指南”</span></a>以了解如何确定系统的软件密钥库目录。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句设置密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">创建[LOCAL] AUTO_LOGIN KEYSTORE</span></p>
                  <p>指定此子句以创建自动登录软件密钥库。从现有受密码保护的软件密钥库创建自动登录软件密钥库。自动登录密钥库具有系统生成的密码。它存储在名为<code class="codeph">cwallet.sso</code>的基于PKCS＃12的文件中，与受密码保护的软件密钥库位于同一目录中。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>默认情况下，Oracle会创建一个自动登录密钥库，可以从密钥库所在的计算机以外的计算机打开。如果指定<code class="codeph">LOCAL</code>关键字，则Oracle数据库会创建本地自动登录密钥库，该密钥库只能从密钥库所在的计算机上打开。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore_location</code></span> ，请指定现有受密码保护的软件密钥库所在的目录的完整路径名。受密码保护的软件密钥库可以打开或关闭。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定现有受密码保护的软件密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">创建密钥库的限制</span></p>
                  <p>您可以在任何单个目录中创建最多一个受密码保护的软件密钥库和一个本地或非本地自动登录软件密钥库。</p>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-23BB4783-6DA1-4260-9D49-F574949C2338">
                     <p class="notep1">也可以看看：</p>
                     <p>有关创建软件密钥库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10282" target="_blank"><span class="italic">“Oracle数据库高级安全性指南</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__OPEN_KEYSTORE-2C9ED408">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-F6137BE3-A9FC-42A0-97D2-CF1300F0004A"><span class="italic">open_keystore</span></p>
                  <p>此子句允许您打开受密码保护的软件密钥库或硬件密钥库。</p>
                  <div class="infoboxnote" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-69716C18-E518-494E-BFB4-03DA5616E1C5">
                     <p class="notep1">注意：</p>
                     <p>您无需使用此子句打开自动登录和本地自动登录软件密钥库，因为它们在需要时自动打开 - 即访问主加密密钥时。</p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在PDB中打开密钥库时， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句很有用。它确保在打开PDB密钥库之前打开CDB根密钥库。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>当您连接到CDB时， <code class="codeph">CONTAINER</code>子句适用。</p>
                        <p>如果当前容器是可插拔数据库（PDB），则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以在PDB中打开密钥库。在PDB中打开密钥库之前，密钥库必须在根目录中打开。</p>
                        <p>如果当前容器是根，则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以在根中打开密钥库，或指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code>以在根和所有PDB中打开密钥库。
                        </p>
                        <p>如果省略此子句，则默认为<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0B76CA9F-CA45-4C2C-B604-08F4D1DAFF3C">
                     <p class="notep1">也可以看看：</p>
                     <p>有关打开<a href="../asoag/configuring-transparent-data-encryption.html#ASOAG10285" target="_blank">基于密码的软件密钥库</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10296" target="_blank">硬件密钥库的</a>详细信息，请参见<span class="italic">“Oracle数据库高级安全指南”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-E52DC06A-64FC-4B40-B7E7-F10337933389"><span class="italic">close_keystore</span></p>
                  <p>此子句允许您关闭受密码保护的软件密钥库，自动登录软件密钥库或硬件密钥库。关闭密钥库会禁用所有加密和解密操作。任何加密或解密数据或访问加密数据的尝试都会导致错误。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>要关闭受密码保护的软件密钥库或硬件密钥库，请指定<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>要关闭自动登录密钥库，请不要指定<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句。在关闭自动登录密钥库之前，请检查<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WALLET_TYPE</code>列。如果它返回<code class="codeph">AUTOLOGIN</code> ，那么您可以关闭密钥库。否则，如果您尝试关闭密钥库，则会发生错误。
                        </p>
                     </li>
                     <li>
                        <p>当您连接到CDB时， <code class="codeph">CONTAINER</code>子句适用。</p>
                        <p>如果当前容器是PDB，则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以关闭PDB中的密钥库。</p>
                        <p>如果当前容器是根，则<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>和<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code>子句具有相同的效果;这两个子句关闭根目录和所有PDB中的密钥库。
                        </p>
                        <p>如果省略此子句，则默认为<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0EE29E4A-1B40-46B5-8F7E-A7841747FF86">
                     <p class="notep1">也可以看看：</p>
                     <p>有关关闭密钥库的更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10321" target="_blank"><span class="italic">“Oracle数据库高级安全性指南</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-CA07D2EF-8E8F-431C-B711-0E74267EC616"><span class="italic">backup_keystore</span></p>
                  <p>此子句允许您备份受密码保护的软件密钥库。密钥库必须是开放的。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>默认情况下，Oracle数据库创建一个具有形式的名称备份文件<code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">timestamp</code></span> <code class="codeph">.p12</code> ，其中<span class="italic"><code class="codeph">timestamp</code></span>是UTC格式的文件创建时间戳记。可选<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>子句允许指定将添加到备份文件名的备份标识符。例如，如果您指定的备份标识<code class="codeph">'Backup1'</code> ，那么Oracle数据库中创建与形式的名称备份文件<code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">timestamp</code></span> <code class="codeph">_Backup1.p12</code> 。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>可选的<code class="codeph">TO</code> ' <span class="italic"><code class="codeph">keystore_location</code></span>子句允许指定在其中创建备份文件的目录。如果省略此子句，则会在与要备份的密钥库相同的目录中创建备份。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9E919638-F7BC-40AB-89B8-C33999F02AAA">
                     <p class="notep1">也可以看看：</p>
                     <p>有关备份基于密码的软件密钥库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10313" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-C340E639-AF3A-40DA-8B4D-1D52E93547FC"><span class="italic">alter_keystore_password</span></p>
                  <p>此子句允许您更改受密码保护的软件密钥库的密码。密钥库必须是开放的。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">old_keystore_password</code></span> ，请指定密钥库的旧密码。对于<span class="italic"><code class="codeph">new_keystore_password</code></span> ，请指定密钥库的新密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>可选的<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句指示数据库在更改密码之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5D6F1521-42E5-4596-874F-82BC62D5DB91">
                     <p class="notep1">也可以看看：</p>
                     <p>有关更改基于密码的软件密钥库密码的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10312" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8FE7159A-6CE0-4DC7-B0CE-08C31BE6900D"><span class="italic">merge_into_new_keystore</span></p>
                  <p>此子句允许您将两个软件密钥库合并到一个新的密钥库中。两个组成密钥库中的密钥和属性将添加到新密钥库中。组成密钥库可以是基于密码的或自动登录（包括本地自动登录）软件密钥库;它们可以是开放的或封闭的。新密钥库是受密码保护的软件密钥库。合并完成后，它处于关闭状态。此子句中指定的任何密钥库或者没有密钥库都可以是配置为供数据库使用的密钥库。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore1_location</code></span> ，请指定第一个密钥库所在目录的完整路径名。
                        </p>
                     </li>
                     <li>
                        <p>仅当第一个密钥库是基于密码的软件密钥<span class="italic"><code class="codeph">keystore1_password</code></span>才指定<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> keystore1_password。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore2_location</code></span> ，请指定第二个密钥库所在目录的完整路径名。
                        </p>
                     </li>
                     <li>
                        <p>仅当第二个密钥库是基于密码的软件密钥<span class="italic"><code class="codeph">keystore2_password</code></span>才指定<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> keystore2_password。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore3_location</code></span> ，请指定创建新密钥库的目录的完整路径名。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore3_password</code></span> ，请指定新密钥库的密码。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-23E7D3D8-C402-495D-8CDA-1E3EE95283BC">
                     <p class="notep1">也可以看看：</p>
                     <p>有关合并软件密钥库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10314" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-779C6BE2-46D6-4668-8A08-81899C7E5D6D"><span class="italic">merge_into_existing_keystore</span></p>
                  <p>此子句允许您将软件密钥库合并到另一个现有软件密钥库中。您合并的密钥库中的键和属性将添加到您合并到的密钥库中。您合并的密钥库可以是受密码保护或自动登录（包括本地自动登录）软件密钥库;它可以是开放的或封闭的。您合并到的密钥库必须是基于密码的软件密钥库。合并开始时可以打开或关闭它。但是，当合并完成时，它将处于关闭状态。此子句中指定的密钥库中的任何一个或两个都不是配置为供数据库使用的密钥库。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore1_location</code></span> ，请指定合并所在的密钥库所在目录的完整路径名。
                        </p>
                     </li>
                     <li>
                        <p>仅当您合并的密钥库是基于密码的软件密钥<span class="italic"><code class="codeph">keystore1_password</code></span>才指定<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code> keystore1_password。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore2_location</code></span> ，请指定合并到的密钥库所在目录的完整路径名。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">keystore2_password</code></span> ，请指定要合并到的密钥库的密码。
                        </p>
                     </li>
                     <li>
                        <p>可选的<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句指示数据库在执行合并之前创建合并到的密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-9B64296B-0EE6-4002-8BE0-7DE9C85A83CD">
                     <p class="notep1">也可以看看：</p>
                     <p>有关合并软件密钥库的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10314" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-FFADADBE-1518-4CEA-83FC-704B6449A90B"><span class="italic">isolate_keystore</span></p>
                  <p>容器数据库（CDB）中的可插拔数据库（PDB）可以创建和管理自己的密钥库。<code class="codeph">isolate_keystore</code>子句允许租户：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>独立于CDB管理其透明数据加密密钥。</p>
                     </li>
                     <li>
                        <p>为其独立密钥库创建密码。</p>
                     </li>
                  </ul>
                  <p>在CDB环境中，您可以选择如何保护给定PDB的密钥。PDB可以使用独立密码保护其密钥，也可以使用CDB的统一密码。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">isolated_keystore_password</code></span>是指PDB密钥库的独立密码。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">united_keystore_password</code></span>指的是CDB密钥库的密码。
                        </p>
                     </li>
                     <li>
                        <p>可选的<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句指示数据库在更改密码之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-B342EFFC-CF55-48F5-942A-328654C2B1F8">与<span class="italic">isolate_keystore的</span> FORCE子句 
                  </p>
                  <p>当PDB的克隆使用被隔离的主密钥时，使用<code class="codeph">ADMINISTER KEY MANAGEMENT FORCE ISOLATE KEYSTORE</code>命令的<code class="codeph">FORCE</code>子句。此命令将密钥从CDB密钥库复制到隔离的PDB密钥库中。例如：</p><pre class="pre codeblock"><code>管理员密钥管理强制隔离密钥由&lt;isolated_keystore_password&gt;从ROOT KEYSTORE [FORCE KEYSTORE]识别[外部商店| &lt;united_keystore_password&gt;] [WITH BACKUP [使用&lt;backup_identifier&gt;]</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-A1ACF10F-C064-4947-97FD-9BC59A66F773"><span class="italic">unite_keystore</span></p>
                  <p><code class="codeph">unite_keystore</code>子句允许独立管理其密钥库的PDB将其密钥库管理模式更改为联合。在联合模式下， <code class="codeph">CDB$ROOT</code>密钥库密码用于管理CDB中的PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">isolated_keystore_password</code></span>是指PDB密钥库的独立密码。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">united_keystore_password</code></span>指的是CDB密钥库的密码。
                        </p>
                     </li>
                     <li>
                        <p>可选的<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句指示数据库在更改密码之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <p>例如：</p><pre class="pre codeblock"><code>管理员密钥管理UNITE KEYSTORE由&lt;isolated_keystore_password&gt;识别，具有ROOT KEYSTORE [FORCE KEYSTORE]由[EXTERNAL STORE | &lt;united_keystore_password&gt;] [WITH BACKUP [使用&lt;backup_identifier&gt;]</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-80A7C71F-5E93-4DA4-96C6-492D592EBEA4"><span class="italic">key_management_clauses</span></p>
                  <p>使用这些子句执行以下密钥管理操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建并激活主加密密钥</p>
                     </li>
                     <li>
                        <p>设置加密密钥的标记</p>
                     </li>
                     <li>
                        <p>将加密密钥从密钥库导出到文件中</p>
                     </li>
                     <li>
                        <p>将加密密钥从文件导入密钥库</p>
                     </li>
                     <li>
                        <p>从受密码保护的软件密钥库迁移到硬件密钥库</p>
                     </li>
                     <li>
                        <p>从硬件密钥库迁移到受密码保护的软件密钥库</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__SET_KEY-52AF4A21">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-E4E28A09-7746-4C5D-81CC-7267491C98FE"><span class="italic">set_key</span></p>
                  <p>该子句创建一个新的主加密密钥并激活它。您可以使用此子句在密钥库中创建第一个主加密密钥，或者旋转（更改）主加密密钥。如果在使用此子句时主加密密钥处于活动状态，则在激活新的主加密密钥之前将其取消激活。包含密钥的密钥库可以是受密码保护的软件密钥库或硬件密钥库。密钥库必须是开放的。</p>
                  <p>为TDE主密钥ID（ <code class="codeph">MKID</code> ）指定所需的值，并为TDE主加密密钥（ <code class="codeph">MK</code> ）指定所需的值，以创建自己的TDE主加密密钥。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在TDE加密数据库中，TDE主密钥ID（ <code class="codeph">MKID</code> ）用于跟踪正在使用的TDE主加密密钥。<code class="codeph">MKID:MK</code>选项允许指定<code class="codeph">MKID</code>和<code class="codeph">MK</code> 。
                        </p>
                     </li>
                     <li>
                        <p>如果仅指定了<code class="codeph">MK</code> ，则数据库会为您生成<code class="codeph">MKID</code> ，以便您可以跟踪具有您指定的<code class="codeph">MK</code>值的TDE主加密密钥。
                        </p>
                     </li>
                     <li>
                        <p>如果<code class="codeph">MKID</code>无效，例如，如果长度错误，或者它是一串零，您将看到以下错误： <code class="codeph">ORA-46685: invalid master key identifier or master key value.</code></p>
                     </li>
                     <li>
                        <p>如果<code class="codeph">MKID</code>您指定的是一样的<code class="codeph">MKID</code>密钥库中现有的TDE主加密密钥，你会看到以下错误： <code class="codeph">ORA-46684: master key identifier exists in the keystore.</code></p>
                     </li>
                     <li>
                        <p>如果<code class="codeph">MKID</code>或<code class="codeph">MK</code>无效，您将看到以下错误： <code class="codeph">ORA-46685: invalid master key identifier or master key value.</code></p>
                     </li>
                     <li>
                        <p>您可以为<code class="codeph">set_key</code>子句和<code class="codeph">create_key</code>子句指定<code class="codeph">MKID:MK</code>选项。
                        </p>
                     </li>
                  </ul>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>指定可选的<code class="codeph">USING</code> <code class="codeph">TAG</code>子句以将标记关联到新的主加密密钥。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE">使用TAG条款的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">USING</code> <code class="codeph">ALGORITHM</code>子句，则数据库将创建符合指定加密算法的主加密密钥。对于<span class="italic"><code class="codeph">encrypt_algorithm</code></span> ，您可以指定<code class="codeph">AES256</code> ， <code class="codeph">ARIA256</code> ， <code class="codeph">GOST256</code>或<code class="codeph">SEED128</code> 。要指定此子句， <code class="codeph">COMPATIBLE</code>初始化参数必须设置为<code class="codeph">12</code> 。 <code class="codeph">2</code>或更高。如果省略此子句，则默认为<code class="codeph">AES256</code> 。
                        </p>
                        <p>ARIA，SEED和GOST算法是针对加密和散列的国家特定国家和政府标准。有关更多信息，请参见<a href="../dbseg/configuring-network-data-encryption-and-integrity.html#DBSEG1047" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，将创建新的主密钥之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>当您连接到CDB时， <code class="codeph">CONTAINER</code>子句适用。</p>
                        <p>如果当前容器是PDB，则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以在PDB中创建并激活新的主加密密钥。在PDB中创建主加密密钥之前，必须在根中存在主加密密钥。</p>
                        <p>如果当前容器是根，则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以在根中创建并激活新的主加密密钥，或指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code>以在根和所有PDB中创建和激活新的主加密密钥。
                        </p>
                        <p>如果省略此子句，则默认为<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-A37AFA12-6D9D-452D-B42F-8B8A47B536FC">
                     <p class="notep1">也可以看看：</p>
                     <p>有关创建和激活主加密密钥的详细信息，请参见<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG9527" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__CREATE_KEY-52AF5596">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5462340C-2F5D-401F-B0E2-2116B9DE5583"><span class="italic">create_key</span></p>
                  <p>有关指定<code class="codeph">MKID:MK</code>选项的详细信息，请参阅<code class="codeph">set_key</code>子句的语义。
                  </p>
                  <p>此子句允许您创建主加密密钥供以后使用。随后可以使用<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEIBAF">use_key</a></span>子句激活密钥。包含密钥的密钥库可以是受密码保护的软件密钥库或硬件密钥库。密钥库必须是开放的。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>指定可选的<code class="codeph">USING</code> <code class="codeph">TAG</code>子句以将标记与加密密钥相关联。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE">使用TAG条款的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">USING</code> <code class="codeph">ALGORITHM</code>子句，则数据库将创建符合指定加密算法的主加密密钥。对于<span class="italic"><code class="codeph">encrypt_algorithm</code></span> ，您可以指定<code class="codeph">AES256</code> ， <code class="codeph">ARIA256</code> ， <code class="codeph">GOST256</code>或<code class="codeph">SEED128</code> 。要指定此子句， <code class="codeph">COMPATIBLE</code>初始化参数必须设置为<code class="codeph">12</code> 。 <code class="codeph">2</code>或更高。如果省略此子句，则默认为<code class="codeph">AES256</code> 。
                        </p>
                        <p>ARIA，SEED和GOST算法是针对加密和散列的国家特定国家和政府标准。有关更多信息，请参见<a href="../dbseg/configuring-network-data-encryption-and-integrity.html#DBSEG1047" target="_blank"><span class="italic">Oracle数据库安全指南</span></a>
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定将在其中创建密钥的密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，是创建密钥之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>当您连接到CDB时， <code class="codeph">CONTAINER</code>子句适用。</p>
                        <p>如果当前容器是PDB，则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以在PDB中创建主加密密钥。在PDB中创建主加密密钥之前，必须在根中存在主加密密钥</p>
                        <p>如果当前容器是根，则指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code>以在根中创建主加密密钥，或指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code>以在根和所有PDB中创建主加密密钥。
                        </p>
                        <p>如果省略此子句，则默认为<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-91BBB94B-412F-4765-8E1D-AEDB3E2580BB">
                     <p class="notep1">也可以看看：</p>
                     <p>有关创建主加密密钥供以后使用的详细信息，请参见<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10414" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEIBAF">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5A652755-8D2C-4460-B822-DE28A7F8F00B"><span class="italic">use_key</span></p>
                  <p>此子句允许您激活已创建的主加密密钥。如果在使用此子句时主加密密钥处于活动状态，则在激活新的主加密密钥之前将其取消激活。包含密钥的密钥库可以是基于密码的软件密钥库或硬件密钥库。密钥库必须是开放的</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">key_id</code></span> ，请指定要激活的密钥的标识符。您可以通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列来查找密钥标识符。
                        </p>
                     </li>
                     <li>
                        <p>指定可选的<code class="codeph">USING</code> <code class="codeph">TAG</code>子句以将标记与加密密钥相关联。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE">使用TAG条款的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定包含密钥的密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，以创建密钥库的备份密钥激活之前。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-110CD1D5-B916-4704-88A2-CAF882AB47A8">
                     <p class="notep1">也可以看看：</p>
                     <p>有关激活主加密密钥的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10419" target="_blank"><span class="italic">“Oracle数据库高级安全性指南</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-BD8CC4A3-9274-4F26-817B-A4D876E457EE"><span class="italic">set_key_tag</span></p>
                  <p>此子句允许您为指定的加密密钥设置标记。标记是密钥的可选的，用户定义的描述符。如果密钥没有标记，则使用此子句创建标记。如果密钥已有标记，则使用此子句替换标记。您可以通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">TAG</code>列来查看加密密钥标记。密钥库必须是开放的。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">tag</code></span> ，请指定字母数字字符串。将<span class="italic"><code class="codeph">tag</code></span>括在单引号中。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">key_id</code></span> ，请指定加密密钥的标识符。您可以通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列来查找密钥标识符。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定包含密钥的密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，你设置的键标记之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-6103784E-27E1-4EE7-B2DD-276F7F45577E">
                     <p class="notep1">也可以看看：</p>
                     <p>有关设置密钥标记的详细信息，请<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10335" target="_blank"><span class="italic">参见“Oracle数据库高级安全指南</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEACDI">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-894F9B0E-AEB2-43F8-9223-17BDCDB4FD45"><span class="italic">export_keys</span></p>
                  <p>使用此子句将一个或多个加密密钥从受密码保护的软件密钥库导出到文件中。密钥库必须是开放的。每个加密密钥与其密钥标识符和密钥属性一起导出。导出的密钥在文件中受密码（密码）保护。随后，您可以使用<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFGECA">import_keys</a></span>子句将一个或多个密钥导入受密码保护的软件密钥库中。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>指定<span class="italic"><code class="codeph">secret</code></span>以设置保护文件中密钥的密码（secret）。秘密是一个字母数字字符串。您可以选择将密钥括在双引号中。引用和非引用的秘密区分大小写。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">filename</code></span> ，请指定要将键导出到的文件的完整路径名。用单引号括起<span class="italic"><code class="codeph">filename</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定包含要导出的键的密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">WITH</code> <code class="codeph">IDENTIFIER</code> <code class="codeph">IN</code>子句指定要使用以下方法之一导出的一个或多个加密密钥：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<span class="italic"><code class="codeph">key_id</code></span>指定要导出的加密密钥的标识符。您可以在逗号分隔列表中指定多个<span class="italic"><code class="codeph">key_id</code></span> 。您可以通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列来查找键标识符。
                              </p>
                           </li>
                           <li>
                              <p>使用<span class="italic"><code class="codeph">subquery</code></span>指定一个查询，该查询返回您要导出的加密密钥的密钥标识符列表。例如，以下<span class="italic"><code class="codeph">subquery</code></span>返回数据库中所有加密密钥的密钥标识符，其标记以字符串<code class="codeph">mytag</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V $ ENCRYPTION_KEYS WHAG TAG LIKE'mytag％'</pre><p>请注意，Oracle数据库在当前用户的权限内执行<span class="italic"><code class="codeph">subquery</code></span> ，而不是使用定义者的权限。
                              </p>
                           </li>
                           <li>
                              <p>如果省略<code class="codeph">WITH</code> <code class="codeph">IDENTIFIER</code> <code class="codeph">IN</code>子句，则导出数据库中的所有加密密钥。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><span class="bold">WITH IDENTIFIER IN子句的限制</span></p>
                  <p>在多租户环境中，从PDB导出密钥时，不能指定<code class="codeph">WITH</code> <code class="codeph">IDENTIFIER</code> <code class="codeph">IN</code> 。这可确保导出PDB中的所有密钥以及有关活动加密密钥的元数据。如果随后克隆PDB，或拔下并插入PDB，则可以使用导出文件将密钥导入克隆或新插入的PDB，并保留有关活动加密密钥的信息。
                  </p>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-8AFC9E63-12BD-421E-8107-8ECF971E73C8">
                     <p class="notep1">也可以看看：</p>
                     <p>有关导出加密密钥的详细信息，请参见<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10424" target="_blank"><span class="italic">Oracle数据库高级安全性</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEFGECA">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-CA5C5D63-0C4C-4A34-A5F5-F82171E7A685"><span class="italic">import_keys</span></p>
                  <p>使用此子句可将一个或多个加密密钥从文件导入基于密码的软件密钥库。密钥库必须是开放的。每个加密密钥与其密钥标识符和密钥属性一起导入。必须先使用<span class="italic"><a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEACDI">export_keys</a></span>子句将密钥导出到文件中。您无法重新导入已导入密钥库的密钥。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">secret</code></span> ，请指定保护文件中密钥的密码（secret）。秘密是一个字母数字字符串。您可以选择将密钥括在双引号中。引用和非引用的秘密区分大小写。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">filename</code></span> ，请指定要从中导入密钥的文件的完整路径名。用单引号括起<span class="italic"><code class="codeph">filename</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定要将密钥导入其中的密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，都是进口的钥匙之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5F2AB37D-F9EA-464C-B608-0E57769F520C">
                     <p class="notep1">也可以看看：</p>
                     <p>有关导入加密密钥的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ASOAG10427" target="_blank"><span class="italic">Oracle数据库高级安全性</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-0499C829-F8B1-466C-B213-4BCFC90FF580"><span class="italic">migrate_key</span></p>
                  <p>使用此子句从受密码保护的软件密钥库迁移到硬件密钥库。此子句使用软件密钥库中的主加密密钥解密现有的表加密密钥和表空间加密密钥，然后使用硬件密钥库中新创建的主加密密钥对它们进行重新加密。</p>
                  <div class="infoboxnote" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-D3B93698-BDC8-4F45-9349-398244660C81">
                     <p class="notep1">注意：</p>
                     <p>使用此子句只是从密码保护的软件密钥库迁移到硬件密钥库的一系列步骤中的一个步骤。在使用此子句之前，请参阅<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10377" target="_blank"><span class="italic">Oracle数据库高级安全性指南</span></a>以获取完整的步骤集。
                     </p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">HSM_auth_string</code></span> ，请指定硬件密钥库密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">software_keystore_password</code></span> 。，请指定基于密码的软件密钥库密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句，和任选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>子句，迁移发生之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5DAF656C-6921-4BD4-9D68-74A95C44FA8A"><span class="italic">reverse_migrate_key</span></p>
                  <p>使用此子句可以从硬件密钥库迁移到受密码保护的软件密钥库。此子句使用硬件密钥库中的主加密密钥解密现有的表加密密钥和表空间加密密钥，然后使用密码保护的软件密钥库中新创建的主加密密钥对其进行重新加密。</p>
                  <div class="infoboxnote" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-33DB4C7C-12A0-4202-A187-7FCC5B996572">
                     <p class="notep1">注意：</p>
                     <p>使用此子句只是从硬件密钥库迁移到受密码保护的软件密钥库的一系列步骤中的一个步骤。在使用此子句之前，请参阅<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10327" target="_blank"><span class="italic">Oracle数据库高级安全性指南</span></a>以获取完整的步骤集。
                     </p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ENCRYPTION</code>关键字是可选的，用于语义清晰度。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">software_keystore_password</code></span> 。，请指定基于密码的软件密钥库密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">HSM_auth_string</code></span> ，请指定硬件密钥库密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-D42FE53B-0076-463D-9AA1-7ABF13C27A71"><span class="italic">move_keys</span></p>
                  <p>使用<code class="codeph">move_keys</code>子句将加密密钥移动到新的密钥库中。您必须是具有<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户才能登录数据库。您必须查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列，以查找要将密钥移动到的密钥库的密钥标识符。
                  </p>
                  <p><code class="codeph">keystore_location1</code>是将存储新密钥库<code class="codeph">.p12</code>文件的wallet目录的路径。默认情况下，此目录位于<code class="codeph">$ORACLE_BASE/admin/db_unique_name/wallet</code> 。
                  </p>
                  <p><code class="codeph">keystore1_password</code>是新密钥库的密码。
                  </p>
                  <p><code class="codeph">keystore_password</code>是密钥从中移动的密钥<code class="codeph">keystore_password</code>的密码。
                  </p>
                  <p><code class="codeph">key_identifier</code>是您查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列时找到的密钥标识符。将此设置括在单引号（''）中。
                  </p>
                  <p><code class="codeph">subquery</code>可用于查找所需的确切密钥标识符。
                  </p>
                  <p><code class="codeph">backup_identifier</code>是备份的可选描述。将<code class="codeph">backup_identifier</code>括在单引号（''）中。
                  </p>
                  <p>例如：</p><pre class="pre codeblock"><code>ADMINISTER密钥管理将密钥移动到新的KEYSTORE $ ORACLE_BASE / admin / orcl / wallet IDENTIFIED by keystore_password FROM FORCE KEYSTORE IDENTIFIED by keystore_password WITH IDENTIFIER IN（SELECT KEY_ID FROM V $ ENCRYPTION_KEYS WHERE ROWNUM &lt;2）;</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-96D2A2FB-BA66-4BC0-9A69-409C20392A03"><span class="italic">secret_management_clauses</span></p>
                  <p>使用这些子句在受密码保护的软件密钥库或硬件密钥库中添加，更新和删除机密。</p>
                  <div class="infoboxnotealso" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-5A9F98AF-E79F-47F5-8F65-C5FE93E77BE8">
                     <p class="notep1">也可以看看：</p>
                     <p>有关添加，更新和删除机密的详细信息，请参见<a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG10398" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-EAF01301-B4FB-476A-BE99-9F9A42035FDC"><span class="italic">add_update_secret</span></p>
                  <p>此子句允许您向密钥库添加密钥或更新密钥库中的现有密钥。密钥库必须是开放的。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">ADD</code>以将密钥添加到密钥库。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">UPDATE</code>以更新密钥库中的现有密钥。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">secret</code></span> ，请指定要添加或更新的密码。秘密是一个字母数字字符串。用单引号括起秘密。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">client_identifier</code></span> ，请指定用于标识密钥的字母数字字符串。将<span class="italic"><code class="codeph">client_identifier</code></span>在单引号中。此值区分大小写。
                        </p>
                     </li>
                     <li>
                        <p>指定可选的<code class="codeph">USING</code> <code class="codeph">TAG</code>子句以将标记关联到<span class="italic"><code class="codeph">secret</code></span> 。<span class="italic"><code class="codeph">tag</code></span>是用于秘密的可选的，用户定义的描述符。将标记括在单引号中。您可以通过查询<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">SECRET_TAG</code>列来查看秘密标记。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，添加或更新的基于密码的软件密钥库的秘密之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-2D97D8F8-7E11-4901-B1C6-1845FE140DE9"><span class="italic">delete_secret</span></p>
                  <p>此子句允许您从密钥库中删除密钥。密钥库必须是开放的。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">client_identifier</code></span> ，请指定用于标识密钥的字母数字字符串。将<span class="italic"><code class="codeph">client_identifier</code></span>在单引号中。您可以通过查询<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">CLIENT</code>列来查看客户端标识符。
                        </p>
                     </li>
                     <li>
                        <p>即使密钥库已关闭， <code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句也会启用此操作。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF">关于FORCE KEYSTORE子句的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">IDENTIFIED</code> <code class="codeph">BY</code>子句指定密钥库的密码。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD">有关指定密钥库密码的说明</a> ”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>条款，以及可选的<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>条款，从基于密码的软件密钥库删除秘密之前创建密钥库的备份。有关更多信息，请参阅<span class="q">“ <a href="ADMINISTER-KEY-MANAGEMENT.html#GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB">WITH BACKUP子句的注意事项</a> ”</span> 。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEJGHAE"><span class="bold">关于使用TAG条款的说明</span></p>
                  <p>许多<code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code>操作包括<code class="codeph">USING</code> <code class="codeph">TAG</code>子句，该子句允许您将标记与加密密钥相关联。<span class="italic"><code class="codeph">tag</code></span>是密钥的可选的，用户定义的描述符。它是用单引号括起来的字符串。
                  </p>
                  <p>您可以通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">TAG</code>列来查看加密密钥标记。
                  </p>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__P-13445-4DFB2BAF"><span class="bold">关于FORCE KEYSTORE条款的说明</span></p>
                  <p>当存在自动登录钱包时，即使密钥库已关闭， <code class="codeph">FORCE KEYSTORE</code>子句<code class="codeph">FORCE KEYSTORE</code>启用密钥库操作。此子句的行为取决于您是否连接到非CDB，CDB根或PDB。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>当您连接到非CDB时：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果密码保护的软件或硬件密钥库已关闭，则数据库会在执行操作时打开受密码保护的软件或硬件密钥库并使其保持打开状态，然后使用新的更新自动登录密钥库（如果存在）信息。</p>
                           </li>
                           <li>
                              <p>如果自动登录密钥库已打开，则数据库会在执行操作时临时打开受密码保护的软件或硬件密钥库，并使用新信息更新自动登录密钥库，而不会关闭自动登录密钥库。</p>
                           </li>
                           <li>
                              <p>如果受密码保护的软件或硬件密钥库已打开，则<code class="codeph">FORCE</code> <code class="codeph">KEYSTORE</code>子句不是必需的，并且不起作用。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>当您连接到CDB根目录时：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要在CDB根密钥库（ <code class="codeph">CONTAINER=CURRENT</code> ）上执行操作，必须打开CDB根密钥库。因此，针对非CDB描述的行为适用于CDB根。
                              </p>
                           </li>
                           <li>
                              <p>要对CDB根密钥库和所有PDB密钥库（ <code class="codeph">CONTAINER=ALL</code> ）执行操作，必须打开CDB根密钥库和所有PDB密钥库。因此，针对非CDB描述的行为适用于CDB根和每个PDB。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>当您连接到PDB时：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要在PDB密钥库上执行操作，必须打开CDB根密钥库和该PDB的密钥库。因此，针对非CDB描述的行为适用于CDB根和该PDB。</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEEFBCD"><span class="bold">有关指定密钥库密码的说明</span></p>
                  <p>指定密钥库密码，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于受密码保护的软件密钥库，请将密码指定为字符串。您可以选择将密码括在双引号中。带引号和非带引号的密码区分大小写。密钥库密码遵循与数据库用户密码相同的规则。有关完整的详细信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">USER</code>的<a href="CREATE-USER.html#GUID-F0246961-558F-480B-AC0F-14B50134621C__BABHHFHD">BY密码</a>子句。
                        </p>
                     </li>
                     <li>
                        <p>对于硬件密钥库，请将密码指定为<code class="codeph">"</code> <span class="italic"><code class="codeph">user_id</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">password</code></span> <code class="codeph">"</code>形式的字符串，其中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">user_id</code></span>是使用HSM管理界面为数据库创建的用户标识</p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">password</code></span>是使用HSM管理界面为用户标识创建的密码</p>
                           </li>
                        </ul>
                        <p>包围<span class="italic"><code class="codeph">user_id</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">password</code></span>串在双引号（ <code class="codeph">"</code> <code class="codeph">"</code> ）和独立的<span class="italic"><code class="codeph">user_id</code></span>和<span class="italic"><code class="codeph">password</code></span>以冒号（ <code class="codeph">:</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>如果指定<code class="codeph">EXTERNAL</code> <code class="codeph">STORE</code> ，则数据库使用存储在外部存储中的密钥库密码来执行操作。此功能使您可以将密码存储在可以集中管理和访问的单独位置。要使用此功能，必须首先将<code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code>初始化参数设置为将存储密钥库密码的位置。有关为密钥库密码配置外部存储的详细信息，请参阅“ <a href="../asoag/managing-keystore-and-tde-master-encryption-key.html#ASOAG-GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" target="_blank"><span class="italic">Oracle数据库高级安全性指南”</span></a> 。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__BGEIBFFB"><span class="bold">关于WITH BACKUP子句的说明</span></p>
                  <p>许多<code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code>操作包括<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句。本节仅适用于受密码保护的软件密钥库。它表示必须在执行操作之前备份密钥库。因此，您必须在执行操作时指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句，或者<span class="italic">在</span>执行操作<span class="italic">之前</span>立即发出<code class="codeph">ADMINISTER</code> <code class="codeph">KEY</code> <code class="codeph">MANAGEMENT</code> <span class="italic"><code class="codeph">backup_clause</code></span>语句。
                  </p>
                  <p>当指定<code class="codeph">WITH</code> <code class="codeph">BACKUP</code>子句，Oracle数据库创建一个具有形式的名称备份文件<code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">timestamp</code></span> <code class="codeph">.p12</code> ，其中<span class="italic"><code class="codeph">timestamp</code></span>是UTC格式的文件创建时间戳记。备份文件创建在与要备份的密钥库相同的目录中。
                  </p>
                  <p>可选<code class="codeph">USING</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">backup_identifier</code></span> <code class="codeph">'</code>子句允许您指定的备份标识符，它被添加到备份文件名。例如，如果您指定的备份标识<code class="codeph">'Backup1'</code> ，那么Oracle数据库中创建与形式的名称备份文件<code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">timestamp</code></span> <code class="codeph">_Backup1.p12</code> 。
                  </p>
                  <p><code class="codeph">WITH</code> <code class="codeph">BACKUP</code>对于受密码保护的软件密钥库是必需的，但对于硬件密钥库是可选的。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-E5B2746F-19DC-4E94-83EC-A6A5C84A3EA9__GUID-1A0CDE8B-82FF-4892-B03E-23D9D2C50A69">例子</p>
                  <p><span class="bold">创建密钥库：示例</span></p>
                  <p>以下语句在目录<code class="codeph">/etc/ORACLE/WALLETS/orcl</code>创建受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE密钥库'的/ etc / ORACLE /钱包/ ORCL' IDENTIFIED BY <span class="italic">密码</span> ;</pre><p>以下语句从上一语句中创建的密钥库创建自动登录软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理从KEYSTORE创建AUTO_LOGIN KEYSTORE'/ etc / ORACLE / WALLETS / orcl'通过<span class="italic">密码</span>识别;</pre><p><span class="bold">打开密钥库：示例</span></p>
                  <p>以下语句打开受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由<span class="italic">密码</span>识别;</pre><p>如果您已连接到CDB，则以下语句将在当前容器中打开受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN由<span class="italic">密码</span> CONTAINER = CURRENT识别;</pre><p>以下语句将打开硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理设置KEYSTORE OPEN由“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”标识;</pre><p>以下语句将打开一个密钥库，其密码存储在外部存储中：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN由外部商店识别;</pre><p><span class="bold">关闭密钥库：示例</span></p>
                  <p>以下语句关闭受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE CLOSE通过<span class="italic">密码</span>识别;</pre><p>以下语句关闭自动登录软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE CLOSE;</pre><p>以下语句关闭硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理设置KEYSTORE CLOSE由“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”标识;</pre><p>以下语句关闭密码存储在外部存储中的密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置由外部商店识别的KEYSTORE CLOSE;</pre><p><span class="bold">备份密钥库：示例</span></p>
                  <p>以下语句创建受密码保护的软件密钥库的备份。备份存储在目录<code class="codeph">/etc/ORACLE/KEYSTORE/DB1</code> ，备份文件名包含标记<code class="codeph">hr.emp_keystore</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理备份KEYSTORE使用'hr.emp_keystore'IDENTIFIED BY <span class="italic">password</span> TO'/ etc / ORACLE / KEYSTORE / DB1 /';</pre><p><span class="bold">更改密钥库密码：示例</span></p>
                  <p>以下语句更改受密码保护的软件密钥库的密码。在更改密码之前，它还会使用标记<code class="codeph">pwd_change</code>创建密钥库的备份。
                  </p><pre class="oac_no_warn" dir="ltr">通过<span class="italic">old_password</span>标识的ADMINISTER密钥管理ALTER KEYSTORE PASSWORD使用'pwd_change'设置<span class="italic">new_password</span> WITH BACKUP</pre><p><span class="bold">将两个密钥库合并到一个新的密钥库中：示例</span></p>
                  <p>以下语句将自动登录软件密钥库与受密码保护的软件密钥库合并，以在新位置创建新的受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE'/ etc / ORACLE / KEYSTORE / DB1'和KEYSTORE'/ etc / ORACLE / KEYSTORE / DB2'通过<span class="italic">existing_keystore_password</span>识别INTO NEW KEYSTORE'/ etc / ORACLE / KEYSTORE / DB3'由<span class="italic">new_keystore_password</span>识别;</pre><p><span class="bold">将密钥库合并到现有密钥库中：示例</span></p>
                  <p>以下语句将自动登录软件密钥库合并到受密码保护的软件密钥库中。在执行合并之前，它还会创建受密码保护的软件密钥库的备份。</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE'/ etc / ORACLE / KEYSTORE / DB1'进入现有的KEYSTORE'/ etc / ORACLE / KEYSTORE / DB2'ENFENTIFIED BY <span class="italic">existing_keystore_password</span> WITH BACKUP;</pre><p><span class="bold">创建和激活主加密密钥：示例</span></p>
                  <p>以下语句在受密码保护的软件密钥库中创建并激活主加密密钥。它使用<code class="codeph">SEED128</code>算法加密密钥。它还会在创建新的主加密密钥之前创建密钥库的备份。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理使用通过<span class="italic">密码</span>和备份识别的算法'SEED128'设置密钥;</pre><p>以下语句在受密码保护的软件密钥库中创建主加密密钥，但不激活密钥。它还会在创建新的主加密密钥之前创建密钥库的备份。</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理使用标记'mykey1'创建密钥使用<span class="italic">密码</span> WITH BACKUP标识;</pre><p>以下查询显示在上一个语句中创建的主加密密钥的密钥标识符：</p><pre class="oac_no_warn" dir="ltr">SELECT TAG，KEY_ID from V $ ENCRYPTION_KEYS WHERE TAG ='mykey1'; TAG KEY_ID --- --------------------------------------------- ------- mykey1 ARgEtzPxpE / Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre><p>以下语句将激活在上一个语句中查询的主加密密钥。它还会在激活新的主加密密钥之前创建密钥库的备份。</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理使用密钥'ARgEtzPxpE / Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'由<span class="italic">密码</span>和备份识别;</pre><p><span class="bold">设置密钥标记：示例</span></p>
                  <p>此示例假定密钥库已关闭。以下语句临时打开密钥库，并将标记更改为<code class="codeph">mykey2</code> ，以<code class="codeph">mykey2</code>在上一示例中激活的主加密密钥。它还会在更改标记之前创建密钥库的备份。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置标记'mykey2'FOR'ARgEtzPxpE / Nv8WdPu8LJJUAAAAAAAAAAAAAAAAAAAAAAAAAAAA'由<span class="italic">密码</span>和备份识别的FORCE KEYSTORE;</pre><p><span class="bold">导出密钥：示例</span></p>
                  <p>以下语句将两个主加密密钥从受密码保护的软件密钥库<code class="codeph">/etc/TDE/export.exp</code>到文件<code class="codeph">/etc/TDE/export.exp</code> 。该语句使用秘密<code class="codeph">my_secret</code>加密文件中的主加密密钥。要导出的主加密密钥的标识符以逗号分隔列表的形式提供。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出密钥与秘密“my_secret”TO“/etc/TDE/export.exp”通过<span class="italic">密码</span>与IDENTIFIER在“AdoxnJ0uH08cv7xkz83ovwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA”，“AW5z3CoyKE / yv3cNT5CWCXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA”中识别;</pre><p>以下语句将主密钥加密密钥从受密码保护的软件密钥库<code class="codeph">/etc/TDE/export.exp</code>到文件<code class="codeph">/etc/TDE/export.exp</code> 。仅导出标签为<code class="codeph">mytag1</code>或<code class="codeph">mytag2</code>的键。文件中的主加密密钥使用秘密<code class="codeph">my_secret</code>加密。通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图找到密钥标识符。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出密钥与秘密“my_secret”TO“/etc/TDE/export.exp”通过<span class="italic">密码</span>与IDENTIFIER IN识别（从V $ ENCRYPTION_KEYS中选择KEY_ID标记输入（'mytag1'，'mytag2'））;</pre><p>以下语句将数据库的所有主加密密钥导出到文件<code class="codeph">/etc/TDE/export.exp</code> 。文件中的主加密密钥使用秘密<code class="codeph">my_secret</code>加密。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出密钥与秘密“my_secret”TO'/etc/TDE/export.exp'通过<span class="italic">密码</span>识别;</pre><p>在多租户环境中，以下语句将PDB <code class="codeph">salespdb</code>所有主加密密钥以及元数据<code class="codeph">/etc/TDE/salespdb.exp</code>到文件<code class="codeph">/etc/TDE/salespdb.exp</code> 。文件中的主加密密钥使用秘密<code class="codeph">my_secret</code>加密。如果随后克隆或拔出PDB并重新插入，则可以使用此语句创建的导出文件将密钥导入克隆或新插入的PDB。</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET CONTAINER = salespdb; ADMINISTER密钥管理导出密钥与SECRET“my_secret”TO“/etc/TDE/salespdb.exp”IDENTIFIED BY <span class="italic">密码</span> ;</pre><p><span class="bold">导入密钥：示例</span></p>
                  <p>以下语句将使用secret <code class="codeph">my_secret</code>加密的主加密密钥从文件<code class="codeph">/etc/TDE/export.exp</code>受密码保护的软件密钥库。它还会在导入密钥之前创建受密码保护的软件密钥库的备份。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导入密钥与秘密“my_secret”FROM“/etc/TDE/export.exp”通过<span class="italic">密码</span> WITH BACKUP识别;</pre><p><span class="bold">迁移密钥库：示例</span></p>
                  <p>以下语句从受密码保护的软件密钥库迁移到硬件密钥库。在执行迁移之前，它还会创建受密码保护的软件密钥库的备份。</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集由“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”标识的加密密钥MIGRATE使用<span class="italic">software_keystore_password</span> WITH BACKUP;</pre><p><span class="bold">反向迁移密钥库：示例</span></p>
                  <p>以下语句反向从硬件密钥库迁移到受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集由<span class="italic">software_keystore_password</span>标识的加密密钥REVERSE MIGRATE使用“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”;</pre><p><span class="bold">向密钥库添加密钥：示例</span></p>
                  <p>以下语句将客户端<code class="codeph">client1</code>秘密<code class="codeph">secret1</code> （标记为<code class="codeph">My first secret</code>添加到受密码保护的软件密钥库。在添加密钥之前，它还会创建受密码保护的软件密钥库的备份。
                  </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密'secret1'为客户'client1'使用标签'我的第一个秘密'通过<span class="italic">密码</span> WITH BACKUP识别;</pre><p>以下语句向硬件密钥库添加了类似的秘密：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密'secret2'为客户'client2'使用标签'我的第二个秘密'标识为“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”;</pre><p><span class="bold">更新密钥库中的密钥：示例</span></p>
                  <p>以下语句更新了基于密码的软件密钥库中前一个示例中创建的密码。在更新密钥之前，它还会创建受密码保护的软件密钥库的备份。</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理更新秘密'secret1'为客户'client1'使用标签'新标签1'通过<span class="italic">密码</span> WITH BACKUP标识;</pre><p>以下语句更新了硬件密钥库中前一个示例中创建的密码：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理更新秘密'secret2'为客户'client2'使用标签'新标签2'标识为“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”;</pre><p><span class="bold">从密钥库中删除密钥：示例</span></p>
                  <p>以下语句从受密码保护的软件密钥库中删除上一个示例中更新的密码。它还会在删除密码之前创建受密码保护的软件密钥库的备份。</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理删除客户端'client1'的秘密IDENTIFIED BY <span class="italic">密码</span> WITH BACKUP;</pre><p>以下语句从硬件密钥库中删除上一个示例中更新的密码：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理删除客户端'client2'的秘密IDENTIFIED BY“ <span class="italic">user_id</span> ： <span class="italic">password</span> ”;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="00083.data-integrity.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>维护数据库应用程序中的数据完整性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="indexes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="plsql-for-application-developers.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="indexes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="plsql-for-application-developers.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的SQL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">维护数据库应用程序中的数据完整性</li>
            </ol>
            <a id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8" name="GUID-398ECF26-572D-49D4-B957-803A962A8BE8"></a><a id="ADFNS1023"></a><a id="ADFNS004"></a>
            
            <h2 id="ADFNS-GUID-398ECF26-572D-49D4-B957-803A962A8BE8" class="sect2"><span class="enumeration_chapter">12</span>维护数据库应用程序中的数据完整性</h2>
         </header>
         <div class="ind">
            <div>
               <p>在数据库应用程序中， <span class="bold">维护数据完整性</span>意味着确保应用程序操作的表中的数据符合相应的业务规则。<span class="bold">业务规则</span>指定必须始终为true或必须始终为false的条件或关系。例如，业务规则可能是没有员工的薪水超过100,000美元，或者<code class="codeph">EMPLOYEES</code>表中的每个员工都必须属于<code class="codeph">DEPARTMENTS</code>表中的<code class="codeph">DEPARTMENTS</code> 。业务规则因公司而异，因为每家公司都定义了自己的工资，员工编号，库存跟踪等政策。
               </p>
               <p>有几种方法可以确保数据完整性，尽可能使用的方法是<span class="bold">完整性约束</span> （或<span class="bold">约束</span> ）。
               </p>
               <p>本章补充了以下信息：</p>
               <div class="infoboxnote" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__GUID-B6C051EE-FAA7-4B89-A44B-5706FDF281A1">
                  <p class="notep1">注意：</p>
                  <p>本章仅适用于表的约束。视图上的约束无助于维护数据完整性或具有关联的索引。相反，它们允许对涉及视图的查询进行查询重写，从而在使用实体化视图和其他数据仓库功能时提高性能。</p>
               </div>
               <div class="infoboxnotealso" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__ORACLEDATABASECONCEPTSFORINFORMATIO-CA456CAE">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT021" target="_blank"><span class="italic">Oracle Database Concepts</span></a> ，了解有关数据完整性和约束的信息</p>
                     </li>
                     <li>
                        <p><a href="../admin/managing-schema-objects.html#ADMIN11537" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关管理约束的更多信息</p>
                     </li>
                     <li>
                        <p>有关约束的语法和语义信息的<a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </li>
                     <li>
                        <p>有关视图约束的更多信息，请<a href="../sqlrf/constraint.html#SQLRF52181" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </li>
                     <li>
                        <p>有关在数据仓库中使用约束的信息，请参阅<a href="../dwhsg/index.html" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
                     </li>
                     <li>
                        <p><a href="sql-data-types.html#GUID-A3D8B49A-EEE1-4B76-BEC0-6FF821BBE005">正确数据类型如何增加数据完整性</a> ，以获取有关数据类型在数据完整性中所起作用的更多信息</p>
                     </li>
                  </ul>
               </div>
               <div class="section">
                  <p class="subhead1" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__GUID-C88BEE2C-D2BD-4E37-A993-C09573828915">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8">使用约束实施业务规则</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD">使用约束和应用程序代码实施业务规则</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E">创建用于约束的索引</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D">何时使用NOT NULL约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99">何时使用默认列值</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88">选择表的主键（PRIMARY KEY约束）</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7">何时使用UNIQUE约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53">用FOREIGN KEY约束实现参照完整性</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA">最小化与约束相关的索引的空间和时间开销</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7">索引外键索引指南</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1">分布式数据库中的参照完整性</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-8F512577-F51D-4309-B987-C364D1D71779">何时使用CHECK约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8">定义约束的示例</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD">启用和禁用约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0">修改约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D">重命名约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC">减少限制</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2">管理FOREIGN KEY约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4">查看有关约束的信息</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS1024"></a><a id="ADFNS262"></a><div class="sect2"><a id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8" name="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8"></a><h3 id="ADFNS-GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8" class="sect3">使用约束实施业务规则</h3>
               <div>
                  <p>尽可能使用约束来强制执行业务规则。约束具有速度的优势：Oracle数据库可以检查表中的所有数据是否比应用程序代码执行等效检查更快地遵循约束。</p>
                  <p><a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">示例12-1</a>创建了一个部门表，一个员工表，一个约束来强制执行部门表中所有值都是唯一的规则，以及一个约束来强制执行每个员工必须为有效部门工作的规则。
                  </p>
                  <div class="example" id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">
                     <p class="titleinexample">示例12-1使用约束实施业务规则</p>
                     <p>创建部门表：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE dept_tab; CREATE TABLE dept_tab（deptname VARCHAR2（20），deptno INTEGER）;</pre><p>创建员工表：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE emp_tab; CREATE TABLE emp_tab（empname VARCHAR2（80），empno INTEGER，deptno INTEGER）;</pre><p>创建约束以强制执行department表中的所有值都是唯一的规则：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept_tab ADD PRIMARY KEY（deptno）;</pre><p>创建约束以强制执行每个员工必须为有效部门工作的规则：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE emp_tab ADD FOREIGN KEY（deptno）REFERENCES dept_tab（deptno）;</pre><p>现在，每当您将员工记录插入<code class="codeph">emp_tab</code> ，Oracle数据库都会检查其<code class="codeph">deptno</code>值是否出现在<code class="codeph">dept_tab</code> 。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <p>假设不使用约束来强制执行每个员工必须为有效部门工作的规则，而是使用查询<code class="codeph">dept_tab</code>的触发器来检查它是否包含要插入<code class="codeph">emp_tab</code>的员工记录的<code class="codeph">deptno</code>值。由于查询使用一致性读取（CR），因此可能会错过其他事务的未提交更改。
                  </p>
                  <div class="infoboxnotealso" id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__GUID-8FE26EA1-8EDF-4ADF-A3CA-BFE833BD9E1C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关约束的语法和语义信息的<a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="../cncpt/data-integrity.html#CNCPT33334" target="_blank"><span class="italic">Oracle Database Concepts</span></a>获取完整性约束的完整优势列表</p>
                        </li>
                        <li>
                           <p>有关使用触发器实施业务规则的更多信息，请参阅<a href="../cncpt/server-side-programming.html#CNCPT88945" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1025"></a><a id="ADFNS263"></a><div class="sect2"><a id="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD" name="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD"></a><h3 id="ADFNS-GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD" class="sect3">使用约束和应用程序代码实施业务规则</h3>
               <div>
                  <p>当应用程序代码可以在不查询表的情况下确定数据值无效时，建议使用约束和应用程序代码实施业务规则。应用程序代码可以向用户提供即时反馈，并通过阻止尝试将无效数据插入表来减少数据库的负载。</p>
                  <p>对于<a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">示例12-2</a> ，假设已运行<a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">示例12-1</a> ，然后将此列添加到表<code class="codeph">emp_tab</code> ：</p><pre class="oac_no_warn" dir="ltr">empgender VARCHAR2（1）</pre><p><code class="codeph">empgender</code>唯一有效的值是<code class="codeph">'M'</code>和<code class="codeph">'F'</code> 。当有人试图插入行<code class="codeph">emp_tab</code>或更新的价值<code class="codeph">emp_tab</code> 。 <code class="codeph">empgender</code> ，应用程序代码可以确定<code class="codeph">emp_tab</code>的新值是否为。在没有查询表的情况下， <code class="codeph">empgender</code>是有效的。如果该值无效，则应用程序代码可以通知用户，而不是尝试插入无效值，如<a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">例12-2所示</a> 。
                  </p>
                  <div class="example" id="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">
                     <p class="titleinexample">示例12-2使用约束和应用程序代码实施业务规则</p><pre class="oac_no_warn" dir="ltr">创建或替换过程add_employee（e_name emp_tab.empname％TYPE，e_gender emp_tab.empgender％TYPE，e_number emp_tab.empno％TYPE，e_dept emp_tab.deptno％TYPE）AUTHID DEFINER <span class="bold">如果UPPER（e_gender）IN（'M'，'则开始） F'）然后</span> <span class="bold">插入到emp_tab VALUES（e_name，e_gender，e_number，e_dept）;</span> <span class="bold">ELSE</span> <span class="bold">DBMS_OUTPUT.PUT_LINE（'性别必须是M或F'）;</span> <span class="bold">万一;</span>结束; / BEGIN add_employee（'Smith'， <span class="bold">'H'</span> ，356,20）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">性别必须是M或F.</span></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS264"></a><div class="sect2"><a id="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E" name="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E"></a><h3 id="ADFNS-GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E" class="sect3">创建用于约束的索引</h3>
               <div>
                  <p>启用唯一或主键约束时，Oracle数据库会自动创建索引，但Oracle建议您显式创建这些索引。如果要使用具有外键约束的索引，则必须显式创建索引。</p>
                  <p>当约束可以使用现有索引时，Oracle数据库不会为该约束创建索引。注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>唯一或主键约束可以使用唯一索引，整个非唯一索引或非唯一索引的前几列。</p>
                     </li>
                     <li>
                        <p>如果唯一或主键约束使用非唯一索引，则没有其他唯一或主键约束可以使用该非唯一索引。</p>
                     </li>
                     <li>
                        <p>约束和索引中的列顺序不需要匹配。</p>
                     </li>
                     <li>
                        <p>唯一或主键约束使用的索引的对象编号存储在<code class="codeph">CDEF$</code> 。为此约束<code class="codeph">ENABLED</code>了。没有静态数据字典视图或动态性能视图显示此信息。
                        </p>
                        <p>如果启用的唯一键或主键约束使用索引，则不能仅删除索引。要删除索引，必须先删除约束或禁用约束，然后删除索引。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E__GUID-10A66D65-6174-4F8C-B8A5-66553DB6A389">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关与约束关联的索引的详细信息，请参见<a href="../admin/managing-indexes.html#ADMIN11725" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></p>
                        </li>
                        <li>
                           <p>有关禁用和删除约束的信息，请参见<a href="../admin/managing-schema-objects.html#ADMIN11546" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11723" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关显式创建索引的信息</p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-5C53546D-8C54-4F38-B472-835F94030016" title="您可以为计算机算术表达式创建复合索引。您可以使用NLSSORT API进行依赖于语言的排序。">在数据库应用程序中使用索引</a></p>
                        </li>
                        <li>
                           <p>有关显式创建索引的信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS266"></a><a id="ADFNS265"></a><div class="sect2"><a id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D" name="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D"></a><h3 id="ADFNS-GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D" class="sect3">何时使用NOT NULL约束</h3>
               <div>
                  <p>默认情况下，列可以包含<code class="codeph">NULL</code>值。要确保列永远不包含<code class="codeph">NULL</code>值，请使用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                  </p>
                  <p>在以下两种情况下使用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>列必须包含非<code class="codeph">NULL</code>值。
                        </p>
                        <p>例如，在表<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code> ，每位员工必须拥有员工ID。因此，列<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code> 。 <code class="codeph">EMPLOYEE_ID</code>具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，没有人可以将新员工记录插入<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code>没有为<code class="codeph">EMPLOYEE_ID</code>指定非<code class="codeph">NULL</code>值。您<span class="italic">可以</span>将新员工记录插入<code class="codeph">HR</code> 。没有指定薪水的<code class="codeph">EMPLOYEES</code> ;因此，列<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code> 。 <code class="codeph">SALARY</code> <span class="italic">没有</span>一个<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                        </p>
                     </li>
                     <li>
                        <p>您希望允许对表进行索引扫描，或允许需要索引所有行的操作。</p>
                        <p>Oracle数据库索引不存储其值均为<code class="codeph">NULL</code>键。因此，对于前面的操作类型，至少一个索引列必须具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                        </p>
                     </li>
                  </ul>
                  <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__CHDFBFDH">示例12-3</a>使用SQL * Plus命令<code class="codeph">DESCRIBE</code>显示<code class="codeph">DEPARTMENTS</code>表的哪些列具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，然后显示如果尝试在具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的列中插入<code class="codeph">NULL</code>值会发生什么。
                  </p>
                  <div class="example" id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__CHDFBFDH">
                     <p class="titleinexample">示例12-3将NULL值插入具有NOT NULL约束的列中</p><pre class="oac_no_warn" dir="ltr">描述部门;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">名字空？输入----------------------------------------- -------- ------------ DEPARTMENT_ID NOT NULL NUMBER（4）DEPARTMENT_NAME NOT NULL VARCHAR2（30）MANAGER_ID NUMBER（6）LOCATION_ID NUMBER（4）</pre><p>尝试在<code class="codeph">DEPARTMENT_ID</code>列中插入<code class="codeph">NULL</code> ：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO DEPARTMENTS（ <span class="bold">DEPARTMENT_ID</span> ，DEPARTMENT_NAME，MANAGER_ID，LOCATION_ID）VALUES（ <span class="bold">NULL</span> ，'Sales'，200,1700）;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">VALUES（NULL，'Sales'，200,1700）*第4行的错误：ORA-01400：无法插入NULL（“HR”。“DEPARTMENTS”。“DEPARTMENT_ID”）</pre><p>省略对于不能是列的值<code class="codeph">NULL</code>相同分配值<code class="codeph">NULL</code> ：</p><pre class="oac_no_warn" dir="ltr">插入部门（DEPARTMENT_NAME，MANAGER_ID，LOCATION_ID）VALUES（'Sales'，200,1700）;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">插入部门（*第1行的错误：ORA-01400：无法插入NULL（“HR”。“DEPARTMENTS”。“DEPARTMENT_ID”）</pre></div>
                  <!-- class="example" -->
                  <p>您可以通过为<code class="codeph">DEPARTMENT_ID</code>提供非<code class="codeph">NULL</code>默认值来防止前面的错误。
                  </p>
                  <p>您可以将<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束与其他约束结合使用，以进一步限制特定列中允许的值。例如， <code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">UNIQUE</code>约束的组合强制在<code class="codeph">UNIQUE</code>键中输入值，从而消除了新数据与现有行中的数据冲突的可能性。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__GUID-779D7FAC-A3D4-45CA-9088-8833F65CCFC6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的更多信息，请<a href="../sqlrf/constraint.html#SQLRF30038" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99">何时使用默认列值</a>以获取有关默认列值用法的更多信息</p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__BEIBDAJJ">外键上的UNIQUE和NOT NULL约束</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS267"></a><div class="sect2"><a id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99" name="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99"></a><h3 id="ADFNS-GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99" class="sect3">何时使用默认列值</h3>
               <div>
                  <p>当<code class="codeph">INSERT</code>语句未指定特定列的值时，该列将接收其默认值。默认情况下，该默认值为<code class="codeph">NULL</code> 。在创建表时定义列或使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句更改列时，可以更改默认值。
                  </p>
                  <div class="infoboxnote" id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99__GUID-CB68FE82-4942-4FE9-B7E7-4343BFCE20D9">
                     <p class="notep1">注意：</p>
                     <p>为列提供非<code class="codeph">NULL</code>默认值并不能确保列的值永远不会为<code class="codeph">NULL</code> ，因为<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束会。
                     </p>
                  </div>
                  <p>在这些情况下使用默认列值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>该列具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                        </p>
                        <p>为列提供非<code class="codeph">NULL</code>默认值可防止在有人插入行而未指定列值时发生的错误。
                        </p>
                     </li>
                     <li>
                        <p>该列有一个最常见的值。</p>
                        <p>例如，如果公司中的大多数部门都在纽约，那么设置<code class="codeph">DEPARTMENTS</code>列的默认值。 <code class="codeph">LOCATION</code> <code class="codeph">'NEW YORK'</code> 。
                        </p>
                     </li>
                     <li>
                        <p>有一个非<code class="codeph">NULL</code>值表示没有条目。
                        </p>
                        <p>例如，如果<code class="codeph">EMPLOYEES</code>列中的值为零。 <code class="codeph">SALARY</code>表示尚未确定工资，然后将该列的默认值设置为零。
                        </p>
                        <p>表示没有条目的默认列值可以简化测试。例如，它允许您更改此测试：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">IF（employees.salary IS NOT NULL）AND（employees.salary &lt;50000）</code>
</pre><p>到这个测试：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">IF employees.salary &lt;50000</code>
</pre></li>
                     <li>
                        <p>您希望自动记录修改表的用户的名称。</p>
                        <p>例如，假设您允许用户通过视图将行插入表中。您为基表提供一个名为<code class="codeph">inserter</code>的列（不需要包含在视图的定义中），以存储插入该行的用户的名称。要自动记录用户名，请定义调用<code class="codeph">USER</code>函数的默认值。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE audit_trail（value1 NUMBER，value2 VARCHAR2（32），inserter VARCHAR2（30） <span class="bold"><code class="codeph">DEFAULT USER</code></span> ）;</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99__GUID-4E04CB40-6E3D-48AE-9C83-52D55FA94298">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">INSERT</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01604" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01402" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D">当使用NOT NULL约束</a>的信息，有关<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS99957"></a><div class="sect2"><a id="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88" name="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88"></a><h3 id="ADFNS-GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88" class="sect3">选择表的主键（PRIMARY KEY约束）</h3>
               <div>
                  <p>表的主键唯一标识每一行，并确保不存在重复行（通常，这是它的唯一目的）。因此，主键值不能为<code class="codeph">NULL</code> 。</p>
                  <p>一个表最多只能有一个主键，但该键可以有多个列（也就是说，它可以是一个复合键）。要指定主键，请使用<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束。
                  </p>
                  <p>在可行的情况下，将一个列的值作为主键选择，其值由序列生成。</p>
                  <p>主键的第二个最佳选择是单个列，其值全部如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>独特</p>
                     </li>
                     <li>
                        <p>从未改变过</p>
                     </li>
                     <li>
                        <p>绝不是<code class="codeph">NULL</code></p>
                     </li>
                     <li>
                        <p>短和数字（因此易于输入）</p>
                     </li>
                  </ul>
                  <p>最大限度地减少对复合主键的使用，复合主键的值很长，并且不能由序列生成。</p>
                  <div class="infoboxnotealso" id="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88__GUID-07E2D26A-A822-4FA2-8F6E-0ECC777AC790">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关主键约束的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1646" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关主键约束（包括限制）的完整信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52197" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p> 有关序列的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00253" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS270"></a><a id="ADFNS269"></a><div class="sect2"><a id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7" name="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7"></a><h3 id="ADFNS-GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7" class="sect3">何时使用UNIQUE约束</h3>
               <div>
                  <p>在任何列或组合列（主键除外）上使用<code class="codeph">UNIQUE</code>约束（指定唯一键），其中不允许重复的非<code class="codeph">NULL</code>值。例如：</p>
                  <div class="tblformal" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__GUID-A74054A1-8C71-401E-9FF2-12EB66D7AC71">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table shows four examples of unique keys and primary keys in the same table." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="75%" id="d53462e1721">独特的关键</th>
                              <th align="left" valign="bottom" width="25%" id="d53462e1724">首要的关键</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1729" headers="d53462e1721 ">
                                 <p>员工社会安全号码</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1729 d53462e1724 ">
                                 <p>员工编号</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1736" headers="d53462e1721 ">
                                 <p>卡车车牌号码</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1736 d53462e1724 ">
                                 <p>卡车号码</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1743" headers="d53462e1721 ">
                                 <p>客户电话号码（国家/地区代码列，区号列和本地电话号码列）</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1743 d53462e1724 ">
                                 <p>顾客号码</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1750" headers="d53462e1721 ">
                                 <p>部门名称列和位置列</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1750 d53462e1724 ">
                                 <p>部门编号</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="data-integrity.html#GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__I1015083">图12-1</a>显示了一个带有<code class="codeph">UNIQUE</code>约束的表，一个违反约束的行，以及一个满足它的行。
                  </p>
                  <div class="figure" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__I1015083">
                     <p class="titleinfigure">图12-1违反并满足独特约束的行</p><img src="img/adfns039.gif" alt="下面是图12-1的描述" title="下面是图12-1的描述" longdesc="img_text/adfns039.html"><br><a href="img_text/adfns039.html">“图12-1违反并满足独特约束的行”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__GUID-09C6DF38-5184-4DBE-992D-EAF49C91BE04">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">UNIQUE</code>约束的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1642" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">UNIQUE</code>约束的完整信息，包括限制，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52195" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS272"></a><a id="ADFNS1026"></a><a id="ADFNS00602"></a><div class="sect2"><a id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53" name="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53"></a><h3 id="ADFNS-GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53" class="sect3">用FOREIGN KEY约束实现参照完整性</h3>
               <div>
                  <p>当两个表共享一个或多个列时，您可以使用<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束来强制引用完整性，即确保共享列在两个表中始终具有相同的值。
                  </p>
                  <div class="infoboxnote" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-F2C9CAC7-869F-41F9-9BB4-1395E94F14F0">
                     <p class="notep1">注意：</p>
                     <p>一个<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束也称为<span class="bold">引用完整性约束</span> ，其<code class="codeph">CONSTRAINT_TYPE</code>是<code class="codeph">R</code>静态数据字典视图<code class="codeph">*_CONSTRAINTS</code> 。</p>
                  </div>
                  <p>将一个表指定为<span class="bold">引用表或父表</span> ，将另一个<span class="bold">表</span>指定为<span class="bold">依赖表或子表</span> 。在父表中，在共享列上定义<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>或<code class="codeph">UNIQUE</code>约束。在子表中，在共享列上定义<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束。共享列现在包含<span class="bold">外键</span> 。在外键上定义其他约束会影响父子关系。
                  </p>
                  <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">图12-2</a>显示了在部门编号上定义的外键。它保证此列中的每个值都必须与department表的主键中的值匹配。此约束可防止错误的部门号进入员工表。
                  </p>
                  <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">图12-2</a>显示了共享一列的父表和子表，违反<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的行以及满足它的行。
                  </p>
                  <div class="figure" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">
                     <p class="titleinfigure">图12-2违反和满足外键约束的行</p><img src="img/adfns040.gif" width="610" alt="下面是图12-2的描述" title="下面是图12-2的描述" longdesc="img_text/adfns040.html"><br><a href="img_text/adfns040.html">“图12-2违反和满足外键约束的行”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-A67BAE8C-0AB4-432E-B4FA-37B2DE7C4E63">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-integrity.html#GUID-70F1D209-144D-4479-ABB8-559734B11E00">FOREIGN KEY约束和NULL值</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1">定义父表和子表之间的关系</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185">多个FOREIGN KEY约束的规则</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB">推迟约束检查</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-4CFA9458-B6F5-4854-951A-FEC75F96FA70">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关外键约束的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1649" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关外键约束（包括限制）的完整信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52199" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1">定义父表和子表之间的关系</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS273"></a><div class="sect3"><a id="GUID-70F1D209-144D-4479-ABB8-559734B11E00" name="GUID-70F1D209-144D-4479-ABB8-559734B11E00"></a><h4 id="ADFNS-GUID-70F1D209-144D-4479-ABB8-559734B11E00" class="sect4">FOREIGN KEY约束和NULL值</h4>
                  <div>
                     <p>即使没有匹配的<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键，外键也允许全部为<code class="codeph">NULL</code>键值。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>默认情况下（没有任何<code class="codeph">NOT</code> <code class="codeph">NULL</code>或<code class="codeph">CHECK</code>子句）， <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束对ANSI / ISO标准中的复合外键强制执行<span class="bold">match</span> <span class="bold">none</span>规则。
                           </p>
                        </li>
                        <li>
                           <p>要在复合外键中强制执行<code class="codeph">NULL</code>值的<span class="bold">匹配</span> <span class="bold">完整</span>规则，这要求键的所有组件都为<code class="codeph">NULL</code>或全部为非<code class="codeph">NULL</code> ，请定义<code class="codeph">CHECK</code>约束，该约束仅允许复合外键中的所有<code class="codeph">NULL</code>或所有非<code class="codeph">NULL</code>值键。例如，使用由<code class="codeph">A</code> ， <code class="codeph">B</code>和<code class="codeph">C</code>列组成的复合键：</p><pre class="oac_no_warn" dir="ltr">检查（（一个是空，B是空，C是空）或（一个不是空，B不是空，C不是空））</pre></li>
                        <li>
                           <p>通常，不可能使用声明性引用完整性来对复合外键中的<code class="codeph">NULL</code>值强制执行<span class="bold">匹配</span> <span class="bold">部分</span>规则，这要求键的非<code class="codeph">NULL</code>部分出现在主键或唯一键中的相应部分中。引用表中的单行。您经常可以使用触发器来处理这种情况。
                           </p>
                           <div class="infoboxnotealso" id="GUID-70F1D209-144D-4479-ABB8-559734B11E00__NOTE-13233-CA500E1F">
                              <p class="notep1">也可以看看：</p>有关触发器的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS275"></a><a id="ADFNS276"></a><a id="ADFNS277"></a><a id="ADFNS278"></a><a id="ADFNS274"></a><div class="sect3"><a id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1" name="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1"></a><h4 id="ADFNS-GUID-526C89D0-35BF-4854-8B57-06192FC34CB1" class="sect4">定义父表和子表之间的关系</h4>
                  <div>
                     <p>父表和子表之间的几个关系可以由子表中的外键上定义的其他类型的约束来确定。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-02C5A3CA-2F05-484C-B628-2FE27964DBA3">对外键没有限制</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果未在外键上定义其他约束，则子表中的任何行数都可以引用相同的父键值。此模型允许外键中的空值。</p>
                     <p>此模型在父键和外键之间建立一对多关系，允许外键中的未确定值（空值）。<a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">图12-2</a>显示了<code class="codeph">employee</code>和<code class="codeph">department</code>表之间的这种关系的一个示例。每个部门（父密钥）都有许多员工（外键），有些员工可能不在某个部门（外键中为空）。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-3FC115F4-021B-4DCE-989B-9D63A5220947">外键上的NOT NULL约束</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果外键中不允许空值，则子表中的每一行都必须显式引用父键中的值，因为外键中不允许使用空值。</p>
                     <p>子表中的任意数量的行都可以引用相同的父键值，因此该模型在父键和外键之间建立一对多关系。但是，子表中的每一行都必须引用父键值;不允许在外键中缺少值（null）。上一节中的相同示例说明了这种关系。但是，在这种情况下，员工必须具有对特定部门的引用。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-31DBD38C-DC6C-46B3-9D4A-48F9D14E35A3">对外键的唯一约束</p>
                     </div>
                     <!-- class="section" -->
                     <p>在外键上定义<code class="codeph">UNIQUE</code>约束时，子表中只有一行可以引用给定的父键值。此模型允许外键中的空值。
                     </p>
                     <p>此模型在父键和外键之间建立一对一关系，允许外键中的未确定值（空值）。例如，假设employee表有一个名为<code class="codeph">MEMBERNO</code>的列，指的是公司保险计划中的员工成员编号。此外，名为<code class="codeph">INSURANCE</code>的表具有名为<code class="codeph">MEMBERNO</code>的主键，该表的其他列保留与员工保险单相关的相应信息。employee表中的<code class="codeph">MEMBERNO</code>必须是外键和唯一键：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在<code class="codeph">EMP_TAB</code>和<code class="codeph">INSURANCE</code>表之间强制执行参照完整性规则（ <code class="codeph">FOREIGN KEY</code>约束）</p>
                        </li>
                        <li>
                           <p>保证每个员工都有唯一的会员编号（ <code class="codeph">UNIQUE</code>键约束）</p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__BEIBDAJJ">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-0F1F2E73-5917-416A-BEDC-BA8F519054B6">外键上的UNIQUE和NOT NULL约束</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果在外键上定义了<code class="codeph">UNIQUE</code>和<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，则子表中只有一行可以引用给定的父键值，并且因为外键中不允许使用<code class="codeph">NULL</code>值，所以子表中的每一行都必须显式引用父键中的值。
                     </p>
                     <p>此模型在父键和外键之间建立一对一关系，该关系不允许外键中的未确定值（空值）。如果通过在employee表的<code class="codeph">MEMBERNO</code>列上添加<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束来扩展前一个示例，除了保证每个员工都具有唯一的成员资格编号外，还要确保<code class="codeph">MEMBERNO</code>列中不允许使用未确定的值（空值）员工表的。
                     </p>
                  </div>
               </div><a id="ADFNS279"></a><div class="sect3"><a id="GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185" name="GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185"></a><h4 id="ADFNS-GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185" class="sect4">多个FOREIGN KEY约束的规则</h4>
                  <div>
                     <p>Oracle数据库允许多个<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束引用列;从属密钥的数量没有限制。如果单个列是两个不同的复合外键的一部分，则可能存在这种情况。
                     </p>
                  </div>
               </div><a id="ADFNS281"></a><a id="ADFNS280"></a><div class="sect3"><a id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB" name="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB"></a><h4 id="ADFNS-GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB" class="sect4">推迟约束检查</h4>
                  <div>
                     <p>当Oracle数据库检查约束时，如果不满足约束，则会发出错误信号。要将检查约束推迟到当前事务结束，请使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句。
                     </p>
                     <div class="infoboxnote" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__GUID-AC2C9A69-091E-479D-A23E-978564EE8DEE">
                        <p class="notep1">注意：</p>
                        <p>您不能在触发器中使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句。
                        </p>
                     </div>
                     <p>推迟约束检查时：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>选择适当的数据。</p>
                           <p>如果您使用的数据具有以下任何特征，您可能希望推迟对<code class="codeph">UNIQUE</code>和<code class="codeph">FOREIGN</code>键的约束检查：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>表是快照。</p>
                              </li>
                              <li>
                                 <p>某些表包含由另一个应用程序操作的大量数据，这些数据可能不会以相同的顺序返回数据。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>更新外键的级联操作。</p>
                        </li>
                        <li>
                           <p>确保约束可以推迟。</p>
                           <p>确定适当的表后，请确保创建其<code class="codeph">FOREIGN</code> ， <code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code>键约束<code class="codeph">DEFERRABLE</code> 。</p>
                        </li>
                        <li>
                           <p>在操作数据的应用程序中，在开始处理任何数据之前设置延迟的所有约束，如下所示：</p><pre class="oac_no_warn" dir="ltr">设置约束所有延迟;</pre></li>
                        <li>
                           <p>（可选）在提交事务之前立即检查约束违规。</p>
                           <p>紧接在<code class="codeph">COMMIT</code>语句之前，运行<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> <code class="codeph">ALL</code> <code class="codeph">IMMEDIATE</code>语句。如果约束存在任何问题，则此语句将失败，并标识导致错误的约束。如果在违反约束的情况下提交，事务将回退并收到错误消息。
                           </p>
                        </li>
                     </ul>
                     <p>在<a href="data-integrity.html#GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__BEICHCGC">例12-4中</a> ，表<code class="codeph">emp</code>的<code class="codeph">PRIMARY</code>和<code class="codeph">FOREIGN</code>键被创建为<code class="codeph">DEFERRABLE</code> ，然后被延迟。
                     </p>
                     <div class="example" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__BEICHCGC">
                        <p class="titleinexample">例12-4延迟约束检查</p><pre class="oac_no_warn" dir="ltr">DROP TABLE dept; CREATE TABLE dept（deptno NUMBER PRIMARY KEY，dname VARCHAR2（30））; DROP TABLE emp; CREATE TABLE emp（empno NUMBER，ename VARCHAR2（30），deptno NUMBER， <span class="bold">CONSTRAINT pk_emp_empno PRIMARY KEY（empno）DEFERRABLE，</span> <span class="bold">CONSTRAINT fk_emp_deptno FOREIGN KEY（deptno）</span> <span class="bold">REFERENCES dept（deptno）DEFERRABLE</span> ）; INSERT INTO dept（deptno，dname）VALUES（10，'Accounting'）; INSERT INTO dept（deptno，dname）VALUES（20，'SALES'）; INSERT INTO emp（empno，ename，deptno）VALUES（1，'Corleone'，10）; INSERT INTO emp（empno，ename，deptno）VALUES（2，'Costanza'，20）;承诺; <span class="bold">设置约束所有延迟;</span> UPDATE dept SET deptno = deptno + 10 WHERE deptno = 20;</pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * from dept ORDER BY deptno;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPTNO DNAME ---------- ------------------------------ 10会计30销售2行选择。
 </pre><p>更新：</p><pre class="oac_no_warn" dir="ltr">UPDATE emp SET deptno = deptno + 10 WHERE deptno = 20;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">1行更新。
 </pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT *来自emp ORDER BY deptno;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">EMPNO ENAME DEPTNO ---------- ------------------------------ ------- --- 1 Corleone 10 2 Costanza 30 2行选择。
</pre></div>
                     <!-- class="example" -->
                     <p><code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>仅适用于当前事务，其设置将持续到事务的持续时间，或者直到另一个<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句重置该模式。<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句仅适用于当前会话。在约束存在时，保留创建约束时指定的默认值。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__GUID-E4FBD308-1ADB-449B-95A8-42C6BB633413">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01703" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS00603"></a><div class="sect2"><a id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA" name="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA"></a><h3 id="ADFNS-GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA" class="sect3">最小化与约束相关的索引的空间和时间开销</h3>
               <div>
                  <p>创建<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY</code>键时，Oracle数据库会检查现有索引是否强制实施约束的唯一性。如果没有这样的索引，则数据库会创建一个索引。
                  </p>
                  <p>当Oracle数据库使用唯一索引来强制执行约束，并且删除或禁用与唯一索引关联的约束时，将删除索引。要保留与索引关联的统计信息（需要很长时间才能重新创建），请在<code class="codeph">DROP</code> <code class="codeph">CONSTRAINT</code>语句中指定<code class="codeph">KEEP</code> <code class="codeph">INDEX</code>子句。
                  </p>
                  <p>启用外键引用<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键时，不能禁用或删除<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键约束或索引。
                  </p>
                  <div class="infoboxnote" id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA__GUID-975A9C57-91BD-4EC3-9803-3F77B057CB8D">
                     <p class="notep1">注意：</p>
                     <p>具有可延迟约束的<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code>键必须都使用非唯一索引。
                     </p>
                  </div>
                  <p>要在创建唯一和主键约束时使用现有索引，请在<code class="codeph">CONSTRAINT</code>子句中包含<code class="codeph">USING</code> <code class="codeph">INDEX</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA__NOTE-136-CA5097EC">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52180" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>有关完整性约束的更多详细信息和示例</p>
                  </div>
               </div>
            </div><a id="ADFNS00604"></a><div class="sect2"><a id="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7" name="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7"></a><h3 id="ADFNS-GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7" class="sect3">索引外键索引指南</h3>
               <div>
                  <p>索引外键，除非永远不会更新或删除匹配的唯一键或主键。</p>
                  <div class="infoboxnotealso" id="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7__GUID-90A0F7D4-2DA4-41BD-9D04-80811BF4F63A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关索引外键的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1657" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                  </div>
               </div>
            </div><a id="ADFNS00605"></a><div class="sect2"><a id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1" name="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1"></a><h3 id="ADFNS-GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1" class="sect3">分布式数据库中的参照完整性</h3>
               <div>
                  <p>引用约束的声明不能指定引用远程表的主键或唯一键的外键。</p>
                  <p>但是，您可以使用触发器维护跨节点的父/子表关系。</p>
                  <div class="infoboxnotealso" id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1__GUID-7CB93855-BEAA-4FA2-B280-A42E948D4FAE">
                     <p class="notep1">也可以看看：</p>
                     <p>有关强制引用完整性的触发器的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                  </div>
                  <div class="infoboxnote" id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1__GUID-1320A8F9-DDF2-4231-8C09-A8937D134D1F">
                     <p class="notep1">注意：</p>
                     <p><span class="italic"> </span>如果决定使用触发器在分布式数据库的节点上定义参照完整性，请注意网络故障可能使父表和子表都不可访问。
                     </p>
                     <p>例如，假设子表位于<code class="codeph">SALES</code>数据库中，而父表位于<code class="codeph">HQ</code>数据库中。
                     </p>
                     <p>如果两个数据库之间的网络连接失败，则针对子表（插入行或更新外键值的那些）的一些数据操作语言（DML）语句无法继续，因为参照完整性触发器必须能够访问父表在<code class="codeph">HQ</code>数据库中。
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS00606"></a><div class="sect2"><a id="GUID-8F512577-F51D-4309-B987-C364D1D71779" name="GUID-8F512577-F51D-4309-B987-C364D1D71779"></a><h3 id="ADFNS-GUID-8F512577-F51D-4309-B987-C364D1D71779" class="sect3">何时使用CHECK约束</h3>
               <div>
                  <p>必须在基于逻辑表达式（例如比较）的情况下强制实施完整性规则时，请使用<code class="codeph">CHECK</code>约束。当任何其他类型的约束可以提供必要的检查时，切勿使用<code class="codeph">CHECK</code>约束。
                  </p>
                  <div class="infoboxnotealso" id="GUID-8F512577-F51D-4309-B987-C364D1D71779__GUID-DBF2799C-63F9-4581-9D8B-045124655B6F">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="data-integrity.html#GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC">在CHECK和NOT NULL约束之间选择</a></p>
                  </div>
                  <p><code class="codeph">CHECK</code>约束的示例包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对员工工资的<code class="codeph">CHECK</code>约束，以便没有工资值大于10000。
                        </p>
                     </li>
                     <li>
                        <p>部门位置的<code class="codeph">CHECK</code>约束，以便只允许“ <code class="codeph">BOSTON</code> ”，“ <code class="codeph">NEW</code> <code class="codeph">YORK</code> ”和“ <code class="codeph">DALLAS</code> ”位置。
                        </p>
                     </li>
                     <li>
                        <p>对薪水和佣金列的<code class="codeph">CHECK</code>约束，以防止佣金大于薪水。
                        </p>
                     </li>
                  </ul>
               </div><a id="ADFNS282"></a><div class="sect3"><a id="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142" name="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142"></a><h4 id="ADFNS-GUID-56B3A4F1-68CD-459E-98EC-A5035795D142" class="sect4">CHECK约束的限制</h4>
                  <div>
                     <p>对于表的每一行， <code class="codeph">CHECK</code>约束要求条件为真或未知。如果语句导致条件计算为false，则回滚该语句。<code class="codeph">CHECK</code>约束的条件具有以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>条件必须是布尔表达式，可以使用插入或更新的行中的值来计算。</p>
                        </li>
                        <li>
                           <p>条件不能包含子查询或序列。</p>
                        </li>
                        <li>
                           <p>该条件不能包括<code class="codeph">SYSDATE</code> ， <code class="codeph">UID</code> ， <code class="codeph">USER</code>或<code class="codeph">USERENV</code> SQL函数。
                           </p>
                        </li>
                        <li>
                           <p>条件不能包含伪列<code class="codeph">LEVEL</code>或<code class="codeph">ROWNUM</code> 。</p>
                        </li>
                        <li>
                           <p>条件不能包含<code class="codeph">PRIOR</code>运算符。
                           </p>
                        </li>
                        <li>
                           <p>条件不能包含用户定义的函数。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142__GUID-F49FE81A-C35E-483F-B6CC-204DE9C4749E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">LEVEL</code>伪列的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00251" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ROWNUM</code>伪列的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00255" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF007" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>有关<code class="codeph">PRIOR</code>运算符的信息（用于分层查询）</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS283"></a><div class="sect3"><a id="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671" name="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671"></a><h4 id="ADFNS-GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671" class="sect4">设计CHECK约束</h4>
                  <div>
                     <p>使用<code class="codeph">CHECK</code>约束时，请记住仅当条件计算结果为false时才违反<code class="codeph">CHECK</code>约束; true和unknown值（例如与null的比较）不违反检查条件。确保您定义的任何<code class="codeph">CHECK</code>约束都足以强制执行规则。
                     </p>
                     <p>例如，考虑这个<code class="codeph">CHECK</code>约束：</p><pre class="oac_no_warn" dir="ltr">检查（Sal&gt; 0或Comm&gt; = 0）</pre><p>乍一看，此规则可能会被解释为“除非员工薪水大于零或员工佣金大于或等于零，否则不允许员工表中的行。”但是，如果插入一个带有空工资的行，则该行不会违反<code class="codeph">CHECK</code>约束，无论佣金值是否有效，因为整个检查条件被评估为未知。在这种情况下，您可以通过在<code class="codeph">SAL</code>和<code class="codeph">COMM</code>列上放置<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束来防止此类违规。
                     </p>
                     <div class="infoboxnote" id="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671__GUID-D136E229-B588-4AD7-9D9B-6042A7EF4F34">
                        <p class="notep1">注意：</p>
                        <p>如果您不确定何时未知值导致<code class="codeph">NULL</code>条件，请查看<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF005" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>逻辑条件的真值表</p>
                     </div>
                  </div>
               </div><a id="ADFNS284"></a><div class="sect3"><a id="GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6" name="GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6"></a><h4 id="ADFNS-GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6" class="sect4">多个CHECK约束的规则</h4>
                  <div>
                     <p>单个列可以具有多个<code class="codeph">CHECK</code>约束，这些约束在其定义中引用该列。可以定义引用列的<code class="codeph">CHECK</code>约束的数量没有限制。
                     </p>
                     <p>未定义约束的计算顺序，因此请注意不要依赖顺序或定义彼此冲突的多个约束。</p>
                  </div>
               </div><a id="ADFNS285"></a><div class="sect3"><a id="GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC" name="GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC"></a><h4 id="ADFNS-GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC" class="sect4">在CHECK和NOT NULL约束之间选择</h4>
                  <div>
                     <p>根据ANSI / ISO标准， <code class="codeph">NOT</code> <code class="codeph">NULL</code>约束是<code class="codeph">CHECK</code>约束的示例，其中条件是：</p><pre class="oac_no_warn" dir="ltr">CHECK（ <span class="italic">column_name</span> IS NOT NULL）</pre><p>因此，您可以使用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束或<code class="codeph">CHECK</code>约束为单个列编写<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束比<code class="codeph">CHECK</code>约束更容易使用。
                     </p>
                     <p>在复合键只允许所有<code class="codeph">NULL</code>或所有非<code class="codeph">NULL</code>值的情况下，必须使用<code class="codeph">CHECK</code>约束。例如，此<code class="codeph">CHECK</code>约束允许由列<code class="codeph">C1</code>和<code class="codeph">C2</code>组成的组合键中的键值包含所有空值或所有值：</p><pre class="oac_no_warn" dir="ltr">检查（（C1是空和C2是空）或（C1不是空，C2不是空））</pre></div>
               </div>
            </div><a id="ADFNS286"></a><a id="ADFNS287"></a><a id="ADFNS00607"></a><div class="sect2"><a id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8" name="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8"></a><h3 id="ADFNS-GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8" class="sect3">定义约束的示例</h3>
               <div>
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">示例12-5</a>和<a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">示例12-6</a>显示了如何在数据库设计的原型阶段创建简单约束。在这些示例中，每个约束都有一个名称。如果数据定义语言（DDL）语句多次运行，则命名约束会阻止数据库使用不同的系统生成的名称创建相同约束的多个副本。
                  </p>
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">示例12-5</a>使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句同时创建表及其约束。
                  </p>
                  <div class="example" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">
                     <p class="titleinexample">示例12-5使用CREATE TABLE语句定义约束</p><pre class="oac_no_warn" dir="ltr">DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3） <span class="bold">CONSTRAINT pk_DeptTab_Deptno PRIMARY KEY</span> ，Dname VARCHAR2（15），Loc VARCHAR2（15）， <span class="bold">CONSTRAINT u_DeptTab_Dname_Loc UNIQUE（Dname，Loc）</span> ， <span class="bold">CONSTRAINT c_DeptTab_Loc</span> <span class="bold">CHECK（Loc IN（'NEW YORK'，'BOSTON'） ，'芝加哥'）））</span> ; DROP TABLE EmpTab; CREATE TABLE EmpTab（Empno NUMBER（5） <span class="bold">CONSTRAINT pk_EmpTab_Empno PRIMARY KEY</span> ，Ename VARCHAR2（15） <span class="bold">NOT NULL</span> ，Job VARCHAR2（10），Mgr NUMBER（5） <span class="bold">CONSTRAINT r_EmpTab_Mgr REFERENCES EmpTab</span> ，Hiredate DATE，Sal NUMBER（7,2），Comm NUMBER（5,2），Deptno NUMBER（3） <span class="bold">NOT NULL</span> <span class="bold">CONSTRAINT r_EmpTab_DeptTab REFERENCES DeptTab ON DELETE CASCADE</span> ）;</pre></div>
                  <!-- class="example" -->
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">示例12-6</a>使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句为现有表创建约束。
                  </p>
                  <p>如果表包含违反约束的行，则无法在表上创建经过验证的约束。</p>
                  <div class="example" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">
                     <p class="titleinexample">示例12-6使用ALTER TABLE语句定义约束</p><pre class="oac_no_warn" dir="ltr">- 创建没有约束的表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3），Dname VARCHAR2（15），Loc VARCHAR2（15））; DROP TABLE EmpTab; CREATE TABLE EmpTab（Empno NUMBER（5），Ename VARCHAR2（15），Job VARCHAR2（10），经理NUMBER（5），Hiredate DATE，Sal NUMBER（7,2），Comm NUMBER（5,2），Deptno NUMBER（ 3））; <span class="bold">- 使用ALTER TABLE语句定义约束：</span> <span class="bold">ALTER TABLE DeptTab</span> <span class="bold">ADD CONSTRAINT pk_DeptTab_Deptno PRIMARY KEY（Deptno）;</span> <span class="bold">ALTER TABLE EmpTab</span> <span class="bold">ADD CONSTRAINT fk_DeptTab_Deptno</span> <span class="bold">FOREIGN KEY（Deptno）REFERENCES DeptTab;</span> <span class="bold">ALTER TABLE EmpTab MODIFY（Ename VARCHAR2（15）NOT NULL）;</span></pre></div>
                  <!-- class="example" -->
                  <div class="infoboxnotealso" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__GUID-A71D6534-18C3-488D-AAB5-6FFCA09CAA74">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关为大型生产数据库创建和维护约束的信息</p>
                  </div>
               </div><a id="ADFNS288"></a><div class="sect3"><a id="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE" name="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE"></a><h4 id="ADFNS-GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE" class="sect4">定义约束所需的权限</h4>
                  <div>
                     <p>如果您具有<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权，则可以在您创建的表上定义约束。
                     </p>
                     <p>如果您具有<code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权，则可以在任何现有表上定义约束。
                     </p>
                     <p>如果您具有特定表的<code class="codeph">ALTER</code>对象特权，则可以在该表上定义约束。
                     </p>
                     <p><code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束要求表所有者具有<code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code>系统特权或包含关联索引的表空间的配额。
                     </p>
                     <p>如果父表或视图位于模式中，或者您对父表或视图中引用键的列具有<code class="codeph">REFERENCES</code>特权，则可以定义<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束。
                     </p>
                     <div class="infoboxnotealso" id="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE__NOTE-136-CA50E8EC">
                        <p class="notep1">也可以看看：</p><a href="data-integrity.html#GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB">创建FOREIGN KEY约束所需的权限</a></div>
                  </div>
               </div><a id="ADFNS289"></a><div class="sect3"><a id="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4" name="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4"></a><h4 id="ADFNS-GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4" class="sect4">命名约束</h4>
                  <div>
                     <p>使用约束子句的<code class="codeph">CONSTRAINT</code>选项将名称分配给约束<code class="codeph">NOT</code> <code class="codeph">NULL</code> ， <code class="codeph">UNIQUE</code> ， <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> ， <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>和<code class="codeph">CHECK</code> 。此名称在您拥有的约束中必须是唯一的。如果未指定约束名称，则Oracle Database会自动分配一个约束名称。
                     </p>
                     <p>选择您自己的名称会使约束违规的错误消息更容易理解，并且如果SQL语句多次运行，则会阻止使用不同名称创建重复约束。</p>
                     <p>有关<code class="codeph">constraint</code>子句的<code class="codeph">CONSTRAINT</code>选项的示例，请参阅前面的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>和<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句示例。每个约束的名称包含在数据字典中有关约束的其他信息中。
                     </p>
                     <div class="infoboxnotealso" id="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4__GUID-1C7DABF8-2805-4CF6-B755-8B5A3C31C33E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4">查看关于约束的信息</a> ”</span>以获取静态数据字典视图的示例</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1027"></a><a id="ADFNS00608"></a><div class="sect2"><a id="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD" name="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD"></a><h3 id="ADFNS-GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD" class="sect3">启用和禁用约束</h3>
               <div>
                  <p>本节介绍手动启用和禁用约束的机制和过程。</p>
                  <p><strong class="term">启用约束</strong> 。启用约束后，将对关联列中的数据值强制执行相应的规则。约束的定义存储在数据字典中。
                  </p>
                  <p><strong class="term">禁用约束</strong> 。禁用约束时，不会强制执行相应的规则。约束的定义仍存储在数据字典中。
                  </p>
                  <p>完整性约束表示关于数据库中的数据的断言。启用约束时，此断言始终为true。禁用约束时，断言可能不正确，因为违反完整性约束的数据可能位于数据库中。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD__GUID-764D3D99-D557-410C-8D71-1ABD65B4F122">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-integrity.html#GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20">为什么禁用约束？</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948">创建启用的约束（默认）</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-32182C58-2918-431F-A1A3-F33BFE764C4D">创建禁用约束</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-63DF885E-A240-47BA-9BA3-151EF4233F15">启用现有约束</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6">禁用现有约束</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA">启用和禁用键约束的准则</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a></p>
                     </li>
                  </ul>
               </div><a id="ADFNS290"></a><div class="sect3"><a id="GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20" name="GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20"></a><h4 id="ADFNS-GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20" class="sect4">为什么禁用约束？</h4>
                  <div>
                     <p>在日常操作中，保持启用约束。在某些情况下，暂时禁用表的约束对于性能原因是有意义的。例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用SQL * Loader将大量数据加载到表中时</p>
                        </li>
                        <li>
                           <p>执行对表进行大量更改的批处理操作时（例如通过向现有编号添加1000来更改每个员工编号）</p>
                        </li>
                        <li>
                           <p>一次导入或导出一个表时</p>
                        </li>
                     </ul>
                     <p>暂时关闭约束可以加快这些操作。</p>
                  </div>
               </div><a id="ADFNS292"></a><a id="ADFNS291"></a><div class="sect3"><a id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948" name="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948"></a><h4 id="ADFNS-GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948" class="sect4">创建启用的约束（默认）</h4>
                  <div>
                     <p>定义完整性约束（使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ）时，Oracle数据库默认启用约束。为了清楚代码，您可以通过在其定义中包含<code class="codeph">ENABLE</code>子句来显式启用约束，如<a href="data-integrity.html#GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__BEIEHFFC">例12-7所示</a> 。
                     </p>
                     <div class="example" id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__BEIEHFFC">
                        <p class="titleinexample">示例12-7创建启用的约束</p><pre class="oac_no_warn" dir="ltr">/ *使用CREATE TABLE语句创建启用约束（ENABLE关键字是可选的）：* / DROP TABLE t1; CREATE TABLE t1（Empno NUMBER（5）PRIMARY KEY <span class="bold">ENABLE</span> ）; / *创建没有约束的表，然后使用ALTER TABLE语句添加启用的约束（ENABLE关键字是可选的）：* / DROP TABLE t2; CREATE TABLE t2（Empno NUMBER（5））; ALTER TABLE t2 ADD PRIMARY KEY（Empno） <span class="bold">ENABLE</span> ;</pre></div>
                     <!-- class="example" -->
                     <p>在为每个事务一次填充一行的表定义约束时包括<code class="codeph">ENABLE</code>子句。这可确保数据始终保持一致，并降低每个DML语句的性能开销。
                     </p>
                     <p>如果<code class="codeph">TABLE</code>的现有行违反完整性约束，则尝试启用完整性约束的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句将失败。该语句回退，既不存储也不启用约束定义。
                     </p>
                     <div class="infoboxnotealso" id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__GUID-78173330-E758-485F-B0D2-E3027C869C94">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a> ，以获取有关违反约束的行的更多信息</p>
                     </div>
                  </div>
               </div><a id="ADFNS294"></a><a id="ADFNS293"></a><div class="sect3"><a id="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D" name="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D"></a><h4 id="ADFNS-GUID-32182C58-2918-431F-A1A3-F33BFE764C4D" class="sect4">创建禁用约束</h4>
                  <div>
                     <p>您可以通过在其定义中包含<code class="codeph">DISABLE</code>子句来定义和禁用完整性约束（使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ），如<a href="data-integrity.html#GUID-32182C58-2918-431F-A1A3-F33BFE764C4D__BEIDJABH">例12-8所示</a> 。
                     </p>
                     <div class="example" id="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D__BEIDJABH">
                        <p class="titleinexample">示例12-8创建禁用的约束</p><pre class="oac_no_warn" dir="ltr">/ *使用CREATE TABLE语句创建禁用约束* / DROP TABLE t1;创建表t1（Empno NUMBER（5）PRIMARY KEY <span class="bold">DISABLE</span> ）; / *创建没有约束的表，然后使用ALTER TABLE语句添加禁用约束* / DROP TABLE t2; CREATE TABLE t2（Empno NUMBER（5））; ALTER TABLE t2添加主键（Empno） <span class="bold">禁用</span> ;</pre></div>
                     <!-- class="example" -->
                     <p>在定义表的约束时，包括<code class="codeph">DISABLE</code>子句，以便在任何其他人访问之前插入大量数据，特别是如果必须在插入数据后清理数据，或者必须用序列号或父/子关系填充空列。
                     </p>
                     <p>定义和禁用约束的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句永远不会失败，因为它的规则不会强制执行。
                     </p>
                  </div>
               </div><a id="ADFNS296"></a><a id="ADFNS295"></a><div class="sect3"><a id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15" name="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15"></a><h4 id="ADFNS-GUID-63DF885E-A240-47BA-9BA3-151EF4233F15" class="sect4">启用现有约束</h4>
                  <div>
                     <p>清理数据并填充空列后，可以启用数据插入期间禁用的约束。</p>
                     <p>要启用现有约束，请使用带有<code class="codeph">ENABLE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句，如<a href="data-integrity.html#GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__BEIFJEII">例12-9所示</a> 。
                     </p>
                     <div class="example" id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__BEIFJEII">
                        <p class="titleinexample">示例12-9启用现有约束</p><pre class="oac_no_warn" dir="ltr">- 创建具有禁用约束的表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY DISABLE，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc）DISABLE，CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'） ，'芝加哥'））DISABLE）; <span class="bold">- 启用约束：</span> ALTER TABLE DeptTab <span class="bold">ENABLE PRIMARY KEY</span> <span class="bold">ENABLE CONSTRAINT uk_DeptTab_Dname_Loc</span> <span class="bold">ENABLE CONSTRAINT c_DeptTab_Loc;</span>
</pre></div>
                     <!-- class="example" -->
                     <p>如果任何表行违反完整性约束，则尝试启用完整性约束的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句将失败。回滚该语句并且未启用约束。
                     </p>
                     <div class="infoboxnotealso" id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__GUID-2499668D-6CF2-496E-B269-D139DA7C724B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a> ，以获取有关违反约束的行的更多信息</p>
                     </div>
                  </div>
               </div><a id="ADFNS298"></a><a id="ADFNS297"></a><div class="sect3"><a id="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6" name="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6"></a><h4 id="ADFNS-GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6" class="sect4">禁用现有约束</h4>
                  <div>
                     <p>如果必须在表包含数据时执行大型插入或更新，则可以临时禁用约束以提高批量操作的性能。</p>
                     <p>要禁用现有约束，请使用带有<code class="codeph">DISABLE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句，如<a href="data-integrity.html#GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6__BEIBEAEF">例12-10所示</a> 。
                     </p>
                     <div class="example" id="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6__BEIBEAEF">
                        <p class="titleinexample">示例12-10禁用现有约束</p><pre class="oac_no_warn" dir="ltr">- 使用启用的约束创建表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY ENABLE，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc）ENABLE，CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'） ，'芝加哥'））ENABLE）; <span class="bold">- 禁用约束：</span> ALTER TABLE DeptTab <span class="bold">DISABLE PRIMARY KEY</span> <span class="bold">DISABLE CONSTRAINT uk_DeptTab_Dname_Loc</span> <span class="bold">DISABLE CONSTRAINT c_DeptTab_Loc;</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS299"></a><div class="sect3"><a id="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA" name="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA"></a><h4 id="ADFNS-GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA" class="sect4">启用和禁用键约束的准则</h4>
                  <div>
                     <p>启用或禁用<code class="codeph">UNIQUE</code> ， <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束时，请注意几个重要问题和先决条件。<code class="codeph">UNIQUE</code>键和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束通常由数据库管理员管理。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA__GUID-892A2B9A-F56B-497C-BD34-99C580436903">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a>和<a href="data-integrity.html#GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2">管理FOREIGN KEY约束</a></p>
                     </div>
                  </div>
               </div><a id="ADFNS300"></a><div class="sect3"><a id="GUID-15695420-BD41-4572-90A5-3452EEFF167F" name="GUID-15695420-BD41-4572-90A5-3452EEFF167F"></a><h4 id="ADFNS-GUID-15695420-BD41-4572-90A5-3452EEFF167F" class="sect4">修复约束异常</h4>
                  <div>
                     <p>如果表的某一行违反了完整性约束，则该行违反约束并被称为约束的<strong class="term">异常</strong> 。如果存在任何异常，则无法启用约束。必须先更新或删除违反约束的行，然后才能启用约束。
                     </p>
                     <p>在尝试启用约束时，可以标识特定完整性约束的异常。</p>
                     <div class="infoboxnotealso" id="GUID-15695420-BD41-4572-90A5-3452EEFF167F__GUID-C7912A98-43BA-4660-98A1-5D04C94A7E3E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关此过程的详细信息，请<a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a></p>
                     </div>
                     <p>当您尝试创建或启用约束时，由于存在完整性约束异常，语句将失败，因此将回滚该语句。在更新或删除所有异常之前，您无法启用约束。要确定哪些行违反了完整性约束，请在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">ENABLE</code>子句中包含<code class="codeph">EXCEPTIONS</code>选项。
                     </p>
                     <div class="infoboxnotealso" id="GUID-15695420-BD41-4572-90A5-3452EEFF167F__GUID-A6B8720D-6220-47FB-92FA-FCFC0CCF998B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关响应约束异常的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS301"></a><a id="ADFNS00609"></a><div class="sect2"><a id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0" name="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0"></a><h3 id="ADFNS-GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0" class="sect3">修改约束</h3>
               <div>
                  <p>从Oracle8 <span class="italic">i</span>开始，您可以使用<code class="codeph">MODIFY</code> <code class="codeph">CONSTRAINT</code>子句修改现有约束，如<a href="data-integrity.html#GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__BEIJBACB">例12-11所示</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__GUID-B3EFD7FA-4782-4D55-8781-2C001CBE6A07">
                     <p class="notep1">也可以看看：</p>
                     <p>有关可以修改的参数的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                  </div>
                  <div class="example" id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__BEIJBACB">
                     <p class="titleinexample">例12-11修改约束</p><pre class="oac_no_warn" dir="ltr">/ *创建然后修改CHECK约束：* / DROP TABLE X1Tab;创建表X1Tab（a1 NUMBER CONSTRAINT c_X1Tab_a1检查（a1&gt; 3）DEFERRABLE DISABLE）; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 ENABLE</span> ; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 RELY</span> ; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1初步推迟</span> ; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 ENABLE NOVALIDATE</span> ; / *创建然后修改PRIMARY KEY约束：* / DROP TABLE t1; CREATE TABLE t1（a1 INT，b1 INT）; ALTER TABLE t1 ADD CONSTRAINT pk_t1_a1 PRIMARY KEY（a1）DISABLE;更改表t1 <span class="bold">使用索引</span> <span class="bold">初始修改主要关键字</span> <span class="bold">PCTFREE = 30启用无法使用</span> ; ALTER TABLE t1 <span class="bold">MODIFY PRIMARY KEY ENABLE NOVALIDATE</span> ;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS303"></a><a id="ADFNS302"></a><div class="sect2"><a id="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D" name="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D"></a><h3 id="ADFNS-GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D" class="sect3">重命名约束</h3>
               <div>
                  <p>您可以修改的约束的一个属性是其名称。您将重命名约束的情况包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您想要克隆表及其约束。</p>
                        <p>约束名称必须是唯一的，即使在多个模式中也是如此。因此，原始表中的约束不能与克隆表中的约束相同。</p>
                     </li>
                     <li>
                        <p>您使用默认的系统生成名称创建了约束，现在您希望为其指定一个易于记忆的名称，以便您可以轻松启用和禁用它。</p>
                     </li>
                  </ul>
                  <p><a href="data-integrity.html#GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D__BEIBIHGF">例12-12</a>显示了如何查找系统生成的约束名称并进行更改。
                  </p>
                  <div class="example" id="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D__BEIBIHGF">
                     <p class="titleinexample">示例12-12重命名约束</p><pre class="oac_no_warn" dir="ltr">DROP TABLE T;创建表T（C1号主键，C2号）;</pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME ='T'AND CONSTRAINT_TYPE ='P';</pre><p>结果（系统生成的约束名称名称不同）：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME ------------------------------ <span class="bold">SYS_C0013059</span>选择了1行。
 </pre><p>将前一个查询中报告的名称中的约束重命名为<code class="codeph">T_C1_PK</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE T RENAME CONSTRAINT SYS_C0013059 TO T_C1_PK;</pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME ='T'AND CONSTRAINT_TYPE ='P';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME ------------------------------ T_C1_PK选择了1行。</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS304"></a><a id="ADFNS00610"></a><div class="sect2"><a id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC" name="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC"></a><h3 id="ADFNS-GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC" class="sect3">减少限制</h3>
               <div>
                  <p>您可以使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">DROP</code>子句删除约束。您将删除约束的情况包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>约束强制执行不再为真的规则。</p>
                     </li>
                     <li>
                        <p>不再需要约束。</p>
                     </li>
                  </ul>
                  <p>要删除约束以及依赖于它的所有其他完整性约束，请指定<code class="codeph">CASCADE</code> 。</p>
                  <div class="example" id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC__GUID-29E0B450-3E16-4D79-9A0C-CDCB4EA9B106">
                     <p class="titleinexample">例12-13删除约束</p><pre class="oac_no_warn" dir="ltr">- 使用约束创建表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc），CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'，'芝加哥'）） ）; - 删除约束：ALTER TABLE DeptTab <span class="bold">DROP PRIMARY KEY</span> <span class="bold">DROP CONSTRAINT uk_DeptTab_Dname_Loc</span> <span class="bold">DROP CONSTRAINT c_DeptTab_Loc</span> ;</pre></div>
                  <!-- class="example" -->
                  <p>删除<code class="codeph">UNIQUE</code> ， <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束时，请注意几个重要问题和先决条件。<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束通常由数据库管理员管理。
                  </p>
                  <div class="infoboxnotealso" id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC__GUID-E1A0CA84-313A-436F-B73B-A67088931762">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">DROP</code>子句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关删除约束的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11549" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句的<code class="codeph">CASCADE</code> <code class="codeph">CONSTRAINTS</code>子句的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01806" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ，该子句删除引用已删除表中主键和唯一键的所有参照完整性约束</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS00611"></a><div class="sect2"><a id="GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2" name="GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2"></a><h3 id="ADFNS-GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2" class="sect3">管理FOREIGN KEY约束</h3>
               <div>
                  <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束强制执行不同表中列之间的关系。因此，如果引用的主键或唯一键的约束不存在或未启用，则无法启用它们。
                  </p>
               </div><a id="ADFNS305"></a><div class="sect3"><a id="GUID-C86E69EC-35E8-4440-8444-443085384D7F" name="GUID-C86E69EC-35E8-4440-8444-443085384D7F"></a><h4 id="ADFNS-GUID-C86E69EC-35E8-4440-8444-443085384D7F" class="sect4">外键列的数据类型和名称</h4>
                  <div>
                     <p>必须对从属表和引用表中的相应列使用相同的数据类型。列名称不需要匹配。</p>
                  </div>
               </div><a id="ADFNS306"></a><div class="sect3"><a id="GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579" name="GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579"></a><h4 id="ADFNS-GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579" class="sect4">限制复合外键中的列</h4>
                  <div>
                     <p>由于外键引用父表的<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">UNIQUE</code>键，并且使用索引强制执行<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">UNIQUE</code>键约束，因此复合外键限制为32列。
                     </p>
                  </div>
               </div><a id="ADFNS307"></a><div class="sect3"><a id="GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618" name="GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618"></a><h4 id="ADFNS-GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618" class="sect4">默认情况下外键引用主键</h4>
                  <div>
                     <p>如果在定义<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束（单列或复合）时列列表未包含在<code class="codeph">REFERENCES</code>选项中，则Oracle数据库假定您打算引用指定表的主键。或者，您可以在括号中的父表中显式指定要引用的列。Oracle数据库会自动检查以验证此列列表是否引用了父表的主键或唯一键。如果没有，则返回信息性错误。
                     </p>
                  </div>
               </div><a id="ADFNS308"></a><div class="sect3"><a id="GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB" name="GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB"></a><h4 id="ADFNS-GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB" class="sect4">创建FOREIGN KEY约束所需的权限</h4>
                  <div>
                     <p>要创建<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束，约束的创建者必须具有父表和子表的特权访问权限。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">父表</strong>引用完整性约束的创建者必须拥有父表，或者对构成父表的父键的列具有<code class="codeph">REFERENCES</code>对象特权。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">子表</strong>引用完整性约束的创建者必须能够创建表（即<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权）或更改子表的能力（即子表的<code class="codeph">ALTER</code>对象特权）或<code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权）。
                           </p>
                        </li>
                     </ul>
                     <p>在这两种情况下，都无法通过角色获得必要的特权;必须将它们显式授予约束的创建者。</p>
                     <p>这些限制允许：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>子表的所有者明确决定强制执行哪些约束以及哪些其他用户可以创建约束</p>
                        </li>
                        <li>
                           <p>父表的所有者明确决定外键是否可以依赖于表中的主键和唯一键</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS309"></a><div class="sect3"><a id="GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640" name="GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640"></a><h4 id="ADFNS-GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640" class="sect4">选择外键如何实现参照完整性</h4>
                  <div>
                     <p>Oracle数据库允许强制执行不同类型的参照完整性操作，如<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的定义所指定的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">阻止删除或更新</strong>父键如果子表中有一行引用该键，则默认设置可防止删除或更新父键。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab（FOREIGN KEY（Deptno）REFERENCES Dept_tab）;</pre></li>
                        <li>
                           <p><strong class="term">删除父密钥时删除子行</strong> <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code>操作允许删除从子表引用的父密钥数据，但不会更新。删除父键中的数据时，还会删除子表中依赖于已删除父键值的所有行。要指定此引用操作，请在<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的定义中包含<code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code>选项。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab（FOREIGN KEY（Deptno）REFERENCES Dept_tab ON DELETE CASCADE）;</pre></li>
                        <li>
                           <p><strong class="term">删除父键时将外键设置为空</strong> <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">SET</code> <code class="codeph">NULL</code>操作允许删除引用父键的数据，但不更新。删除父键中的引用数据时，子表中依赖于这些父键值的所有行的外键都设置为<code class="codeph">NULL</code> 。要指定此引用操作，请在<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的定义中包含<code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">SET</code> <code class="codeph">NULL</code>选项。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab（FOREIGN KEY（Deptno）REFERENCES Dept_tab ON DELETE SET NULL）;</pre></li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS310"></a><a id="ADFNS00613"></a><div class="sect2"><a id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4" name="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4"></a><h3 id="ADFNS-GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4" class="sect3">查看有关约束的信息</h3>
               <div>
                  <p>要查找约束的名称，它们影响的列以及帮助您管理它们的其他信息，请查询静态数据字典视图<code class="codeph">*_CONSTRAINTS</code>和<code class="codeph">*_CONS_COLUMNS</code> ，如<a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__BEIHBHDA">例12-14所示</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-E81487D7-E2FB-4B6D-AEAE-11D4FCB1AC75">
                     <p class="notep1">也可以看看：</p>
                     <p> 有关<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20047" target="_blank"><code class="codeph">*_CONSTRAINTS</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20045" target="_blank"><code class="codeph">*_CONS_COLUMNS</code></a>信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20047" target="_blank"><code class="codeph">*_CONSTRAINTS</code></a> <span class="italic">Oracle数据库参考</span></p>
                  </div>
                  <div class="example" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__BEIHBHDA">
                     <p class="titleinexample">示例12-14查看有关约束的信息</p><pre class="oac_no_warn" dir="ltr">DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc），CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'，'芝加哥'）） ）; DROP TABLE EmpTab; CREATE TABLE EmpTab（Empno NUMBER（5）PRIMARY KEY，Ename VARCHAR2（15）NOT NULL，Job VARCHAR2（10），Mgr NUMBER（5）CONSTRAINT r_EmpTab_Mgr REFERENCES EmpTab ON DELETE CASCADE，Hiredate DATE，Sal NUMBER（7,2）， Comm NUMBER（5,2），Deptno NUMBER（3）NOT NULL CONSTRAINT r_EmpTab_Deptno REFERENCES DeptTab）; - 格式列（可选）：COLUMN CONSTRAINT_NAME FORMAT A20; COLUMN CONSTRAINT_TYPE FORMAT A4 HEADING'TYPE'; COLUMN TABLE_NAME格式A10; COLUMN R_CONSTRAINT_NAME格式A17; COLUMN SEARCH_CONDITION FORMAT A40; COLUMN COLUMN_NAME FORMAT A12;</pre><p>在DeptTab和EmpTab中列出可访问的约束：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME，CONSTRAINT_TYPE，TABLE_NAME，R_CONSTRAINT_NAME来自USER_CONSTRAINTS WHERE（TABLE_NAME ='DEPTTAB'或TABLE_NAME ='EMPTAB'）按CONSTRAINT_NAME订购;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME TYPE TABLE_NAME R_CONSTRAINT_NAME -------------------- ---- ---------- ------------ ----- C_DEPTTAB_LOC C DEPTTAB R_EMPTAB_DEPTNO R EMPTAB SYS_C006286 R_EMPTAB_MGR R EMPTAB SYS_C006290 SYS_C006286 E DEPTTAB SYS_C006288 C EMPTAB SYS_C006289 C EMPTAB SYS_C006290 P EMPTAB UK_DEPTTAB_DNAME_LOC U DEPTTAB选择了8行。
 </pre><p>在<code class="codeph">DeptTab</code>和<code class="codeph">EmpTab</code>区分<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">CHECK</code>约束：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME，SEARCH_CONDITION来自USER_CONSTRAINTS WHERE（TABLE_NAME ='DEPTTAB'或TABLE_NAME ='EMPTAB'）AND CONSTRAINT_TYPE ='C'ORDER BY CONSTRAINT_NAME;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME SEARCH_CONDITION -------------------- ---------------------------- ------------ C_DEPTTAB_LOC Loc IN（'NEW YORK'，'BOSTON'，'CHICAGO'）SYS_C006288“ENAME”不为空SYS_C006289“DEPTNO”不为空3行选择。
 </pre><p>对于<code class="codeph">DeptTab</code>和<code class="codeph">EmpTab</code> ，列出构成约束的列：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME，TABLE_NAME，COLUMN_NAME FROM USER_CONS_COLUMNS WHERE（TABLE_NAME ='DEPTTAB'或TABLE_NAME ='EMPTAB'）按CONSTRAINT_NAME订购;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME TABLE_NAME COLUMN_NAME -------------------- ---------- ------------ C_DEPTTAB_LOC DEPTTAB LOC R_EMPTAB_DEPTNO EMPTAB DEPTNO R_EMPTAB_MGR EMPTAB MGR SYS_C006286 DEPTTAB DEPTNO SYS_C006288 EMPTAB ENAME SYS_C006289 EMPTAB DEPTNO SYS_C006290 EMPTAB EMPNO UK_DEPTTAB_DNAME_LOC DEPTTAB LOC UK_DEPTTAB_DNAME_LOC DEPTTAB DNAME选择了9行。
</pre></div>
                  <!-- class="example" -->
                  <p>注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>某些约束名称是用户指定的（例如<code class="codeph">UK_DEPTTAB_DNAME_LOC</code> ），而其他约束名称是系统指定的（例如<code class="codeph">SYS_C006290</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>每个约束类型在<code class="codeph">CONSTRAINT_TYPE</code>列中用不同的字符表示。此表汇总了每种约束类型使用的字符：</p>
                        <div class="tblformal" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-16980D4A-4238-4CF5-BFD0-B4044854E0B3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="90%" border="1" summary="This table summarizes CONSTRAINT_TYPE column characters." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d53462e7288">约束类型</th>
                                    <th align="left" valign="bottom" width="77%" id="d53462e7291">字符</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7296" headers="d53462e7288 ">
                                       <p><code class="codeph">PRIMARY</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7296 d53462e7291 ">
                                       <p><code class="codeph">P</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7308" headers="d53462e7288 ">
                                       <p><code class="codeph">UNIQUE</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7308 d53462e7291 ">
                                       <p><code class="codeph">ü</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7320" headers="d53462e7288 ">
                                       <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7320 d53462e7291 ">
                                       <p><code class="codeph">[R</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7332" headers="d53462e7288 ">
                                       <p><code class="codeph">CHECK</code> ， <code class="codeph">NOT</code> <code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7332 d53462e7291 ">
                                       <p><code class="codeph">C</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-1723DC4B-8D01-4201-89BA-6C27F8F20F67">
                           <p class="notep1">注意：</p>
                           <p>附加约束类型由<code class="codeph">CONSTRAINT_TYPE</code>列中的字符“ <code class="codeph">V</code> ”表示。此约束类型对应于使用<code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code>为视图创建的约束。
                           </p>
                        </div>
                     </li>
                  </ul>
                  <p>这些约束明确列在<code class="codeph">SEARCH_CONDITION</code>列中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">NULL</code>约束</p>
                     </li>
                     <li>
                        <p>用户定义的<code class="codeph">CHECK</code>约束的条件</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01923.oracle-clusterware-resource-reference.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle Clusterware资源参考</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="cluster-verification-utility-reference.html" title="Previous" type="text/html"></link>
      <link rel="next" href="olsnodes-command-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cluster-verification-utility-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="olsnodes-command-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware资源参考</li>
            </ol>
            <a id="GUID-9C074F34-F180-4200-A99B-72186DAB56E1" name="GUID-9C074F34-F180-4200-A99B-72186DAB56E1"></a><a id="CWADD91383"></a>
            
            <h2 id="CWADD-GUID-9C074F34-F180-4200-A99B-72186DAB56E1" class="sect2"><span class="enumeration_appendix">B</span> Oracle Clusterware资源参考</h2>
         </header>
         <div class="ind">
            <div>
               <p>本附录是Oracle Clusterware资源的参考。本附录包括资源属性的描述和用法示例以及资源属性操作脚本的详细描述和示例。本附录包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="oracle-clusterware-resource-reference.html#GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">资源属性</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26">第三方应用程序的操作脚本示例</a></p>
                  </li>
               </ul>
            </div><a id="CWADD91443"></a><div class="sect2"><a id="GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" name="GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D"></a><h3 id="CWADD-GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" class="sect3">资源属性</h3>
               <div>
                  <p>本节列出并描述了在Oracle Clusterware中将应用程序注册为资源时使用的属性。将这些属性与<code class="codeph">crsctl add resource</code>命令一起使用，如下所示：</p><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -type <span class="variable" translate="no">resource_type</span> -group <span class="variable" translate="no">group_name</span> {[-attr“ <span class="variable" translate="no">attribute_name</span> =' <span class="variable" translate="no">attribute_value</span> '， <span class="variable" translate="no">attribute_name</span> =' <span class="variable" translate="no">attribute_value</span> '，...”] | [-file <span class="variable" translate="no">file_name</span> ]}</code></pre><p>在<code class="codeph">-attr</code>标志之后以逗号分隔的列表中列出属性 - 值对，并将每个属性的值用单引号（ <code class="codeph">''</code> ）括起来。您无法配置的某些资源属性是只读的。
                  </p>
                  <p>或者，您可以创建包含属性 - 值对的文本文件。例如：</p><pre class="pre codeblock"><code>PLACEMENT = favored HOSTING_MEMBERS = node1 node2 node3 RESTART_ATTEMPTS @ CARDINALITYID（1）= 0 RESTART_ATTEMPTS @ CARDINALITYID（2）= 0 FAILURE_THRESHOLD @ CARDINALITYID（1）= 2 FAILURE_THRESHOLD @ CARDINALITYID（2）= 4 FAILURE_INTERVAL @ CARDINALITYID（1）= 300 FAILURE_INTERVAL @ CARDINALITYID（2）= 500 CHECK_INTERVAL = 2 CARDINALITY = 2</code></pre><div class="infoboxnote" id="GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D__GUID-5FEC96C0-38DF-4AC2-9EFE-90992BA598A5">
                     <p class="notep1">注意：</p>
                     <p>这些属性的长度限制为254个字符。</p>
                  </div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-clusterware-resource-reference.html#GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。">可配置的资源属性</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-resource-reference.html#GUID-A0E2752E-F36E-41B9-B859-57862B4745D5" title="属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">只读资源属性</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-resource-reference.html#GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22">不推荐使用的资源属性</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91385"></a><div class="sect3"><a id="GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF" name="GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF"></a><h4 id="CWADD-GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF" class="sect4">可配置的资源属性</h4>
                  <div>
                     <p>本节介绍在Oracle Clusterware中将应用程序注册为资源时可以配置的以下资源属性：</p>
                     <div class="infoboxnote" id="GUID-40C778FA-EE8C-4CC8-9391-6A534A6348AF__GUID-F4A6924C-8711-4B30-A179-2C6A8C2132D0">
                        <p class="notep1">注意：</p>
                        <p>所有属性的值必须为小写。属性名称必须全部为大写字母。</p>
                     </div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728">ACL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D">ACTION_SCRIPT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-0867CD88-EF55-4128-BD27-0C40519B9C52">ACTION_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488">行动</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286">ACTIVE_PLACEMENT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-98296B6F-5477-46B4-A8C3-D91655C6C017">AGENT_FILENAME</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-F6338E02-5405-4898-8E3F-D83896982BB8">ALERT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-889D6367-B991-4C02-9782-7A79BAC9F608">自动开启</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0">CARDINALITY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579" title="每个INSTANCE_COUNT个资源实例的整数不同。">CARDINALITY_ID</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21">CHECK_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA">CLEAN_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6" title="资源组属性，包含标记为资源组关键的资源列表。">CRITICAL_RESOURCES</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5">DELETE_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5">描述</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9">启用</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-EC735949-C55E-423F-AA22-179CD5B311B7">FAILURE_INTERVAL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9">FAILURE_THRESHOLD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5">INSTANCE_FAILOVER</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981">INTERMEDIATE_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3592659F-ECDB-4117-B1B4-70095179A5B7">加载</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-74941A1B-F011-45B2-8F35-8BAE992417A2">MODIFY_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F">名称</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-441C06D9-18E9-4CA6-9D23-17FD54602171">OFFLINE_CHECK_INTERVAL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5">ONLINE_RELOCATION_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">放置</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8">RELOCATE_BY_DEPENDENCY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79">RELOCATE_KIND</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8">RESTART_ATTEMPTS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9">START_CONCURRENCY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B">START_DEPENDENCIES</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-956F4157-F793-40B8-B0E8-2193124F5F9A">START_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-4AE674F7-431D-4333-93E3-73274D3F8F11">STOP_CONCURRENCY</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928">STOP_DEPENDENCIES</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE">STOP_TIMEOUT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D">UPTIME_THRESHOLD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-D78C1390-D875-46B0-894C-288907E62D10">USER_WORKLOAD</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3744BB7A-0D83-45A3-A024-957CD868435F">USE_STICKINESS</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91387"></a><a id="CWADD91386"></a><div class="sect4"><a id="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728" name="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728"></a><h5 id="CWADD-GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728" class="sect5">ACL</h5>
                     <div>
                        <p><a id="d67172e785" class="indexterm-anchor"></a><a id="d67172e789" class="indexterm-anchor"></a>定义资源的所有者以及授予各种操作系统用户和组的访问权限。资源所有者定义所有者的操作系统用户及其权限。您在创建资源时配置此可选属性。如果未配置此属性，则该值基于创建资源的进程的标识。如果根据资源的现有权限允许更改，则可以更改属性的值。
                        </p>
                        <div class="infoboxnote" id="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728__GUID-01DAE1BE-CF61-4690-99C0-C81703B066EE">
                           <p class="notep1">注意：</p>
                           <p><span class="italic">必须</span>在群集中的<span class="italic">所有</span>服务器上注册所有操作系统用户名和用户组，包括<code class="codeph">owner</code> ， <code class="codeph">pgrp</code> ， <code class="codeph">user</code>和<code class="codeph">group</code> 。
                           </p>
                        </div>
                        <p>在字符串中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">owner</code> ：拥有资源的操作系统用户以及运行操作脚本或特定于应用程序的代理程序的用户，后跟所有者的权限。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pgrp</code> ：作为资源所有者的主要组的操作系统组，后跟主要组成员的权限。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">other</code> ：既不是主要组所有者也不是主要组成员的操作系统用户</p>
                           </li>
                           <li>
                              <p><code class="codeph">r</code> ：读取选项，它只能查看资源，状态和配置</p>
                           </li>
                           <li>
                              <p><code class="codeph">w</code> ：write选项，它提供修改资源属性和删除资源的能力</p>
                           </li>
                           <li>
                              <p><code class="codeph">x</code> ：执行选项，它提供启动，停止和重定位资源的功能</p>
                           </li>
                        </ul>
                        <p>默认情况下，创建资源的客户端的标识是<code class="codeph">owner</code> 。此外，默认情况下， <code class="codeph">root</code>用户和<code class="codeph">owner</code>指定的用户具有完全权限。您可以通过向<code class="codeph">ACL</code>属性添加以下行来向所需的操作系统用户和操作系统组授予其权限：</p><pre class="oac_no_warn" dir="ltr">user： <span class="italic">user_name</span> ：rwx group： <span class="italic">group_name</span> ：rwx</pre><div class="section">
                           <p class="subhead3" id="GUID-AC5397D7-4AD5-4D93-B54F-03B12196F728__GUID-94583875-8C8B-4C16-A6C5-4536F4FA125D">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACL =所有者：USER_1：RWX，PGRP：OSDBA：RWX，其他:: R-</pre><p>在前面的示例中，资源的所有者是<code class="codeph">user_1</code> ，其主要组是<code class="codeph">osdba</code> 。用户<code class="codeph">user_1</code>具有所有权限， <code class="codeph">osdba</code>组也是<code class="codeph">osdba</code> ，而其他用户只能查看资源。
                        </p>
                     </div>
                  </div><a id="CWADD91508"></a><a id="CWADD91390"></a><div class="sect4"><a id="GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D" name="GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D"></a><h5 id="CWADD-GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D" class="sect5">ACTION_SCRIPT</h5>
                     <div>
                        <p><a id="d67172e1008" class="indexterm-anchor"></a><a id="d67172e1012" class="indexterm-anchor"></a>绝对文件名，包含操作脚本的路径和文件名。<code class="codeph">AGENT_FILENAME</code>属性中指定的代理<code class="codeph">AGENT_FILENAME</code>调用<code class="codeph">ACTION_SCRIPT</code>属性中指定的脚本。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D__GUID-30B5D3E0-8B15-44DF-8CFD-0D5364DAF12A">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACTION_SCRIPT = <span class="italic">fully_qualified_path_to_action_script</span></pre></div>
                  </div><a id="CWADD92652"></a><a id="CWADD92651"></a><div class="sect4"><a id="GUID-0867CD88-EF55-4128-BD27-0C40519B9C52" name="GUID-0867CD88-EF55-4128-BD27-0C40519B9C52"></a><h5 id="CWADD-GUID-0867CD88-EF55-4128-BD27-0C40519B9C52" class="sect5">ACTION_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e1149" class="indexterm-anchor"></a><a id="d67172e1153" class="indexterm-anchor"></a> Oracle Clusterware可以对资源执行的所有受支持操作的单个超时值（以秒为单位）。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0867CD88-EF55-4128-BD27-0C40519B9C52__GUID-7BA40240-68EE-427C-8D42-4DBCEDDB44B7">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACTION_TIMEOUT = 30</pre></div>
                  </div><a id="CWADD92654"></a><a id="CWADD92653"></a><div class="sect4"><a id="GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488" name="GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488"></a><h5 id="CWADD-GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488" class="sect5">行动</h5>
                     <div>
                        <p><a id="d67172e1281" class="indexterm-anchor"></a><a id="d67172e1285" class="indexterm-anchor"></a> <code class="codeph">ACTIONS</code>属性声明了一个名称表，列出了Oracle Clusterware可以对资源执行的操作以及与操作对应的权限。<code class="codeph">ACTIONS</code>属性包含以空格分隔的操作规范列表，其中每个规范具有以下格式，其中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">actionName</code></span>是动作的名称（最大长度为32 US7ASCII字母数字，区分大小写的字符）</p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">userName</code></span>是启用以执行操作的操作系统用户名</p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">groupName</code></span>是一个操作系统组名，可以执行该操作</p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">actionName</code></span> [，user： <span class="italic">userName</span> | group： <span class="italic">groupName</span> ] [...]
</pre><p>如果未指定<span class="italic"><code class="codeph">userName</code></span>或<span class="italic"><code class="codeph">groupName</code></span> ，则Oracle Clusterware会假定这些操作是普遍可访问的。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B931CF90-18E6-45B6-A75B-CB25EE88A488__GUID-BD35ACF0-5C06-456F-BD15-0CE086525877">用法示例</p>
                        </div>
                        <!-- class="section" -->
                        <p>以下示例启用多个操作：</p><pre class="oac_no_warn" dir="ltr">ACTIONS ='action1 action2，user：user2 action3，group：group1'</pre></div>
                  </div><a id="CWADD91509"></a><a id="CWADD91394"></a><div class="sect4"><a id="GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286" name="GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286"></a><h5 id="CWADD-GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286" class="sect5">ACTIVE_PLACEMENT</h5>
                     <div>
                        <p><a id="d67172e1461" class="indexterm-anchor"></a><a id="d67172e1465" class="indexterm-anchor"></a>设置为<code class="codeph">1</code> ，Oracle Clusterware使用此属性在添加或重新启动集群服务器期间重新评估资源的放置。对于<code class="codeph">PLACEMENT=favored</code>资源，如果资源在非受欢迎的服务器上运行时，Oracle Clusterware可能会重新定位正在运行的资源。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-CFC2F19C-4970-4DB6-BE01-CA68781CD286__GUID-0CC59AB9-ED50-4790-95A6-026FA7C864A7">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ACTIVE_PLACEMENT = 1</pre></div>
                  </div><a id="CWADD91510"></a><a id="CWADD91392"></a><div class="sect4"><a id="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017" name="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017"></a><h5 id="CWADD-GUID-98296B6F-5477-46B4-A8C3-D91655C6C017" class="sect5">AGENT_FILENAME</h5>
                     <div>
                        <p><a id="d67172e1600" class="indexterm-anchor"></a><a id="d67172e1604" class="indexterm-anchor"></a>资源类型用于管理其资源的代理程序的标准文件名。每种资源类型都必须具有代理程序来管理其资源。资源类型通过为此属性指定值或从其基本资源类型继承它来使用代理程序。Oracle Clusterware 12 <span class="italic">c</span>附带了两个脚本代理： <code class="codeph">application</code>和<code class="codeph">scriptagent</code> 。Oracle Clusterware将<code class="codeph">application</code>脚本代理用于已弃用的<code class="codeph">application</code>资源类型的资源。此属性的默认值为<code class="codeph">scriptagent</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017__GUID-6BB724C0-036F-41EC-9845-6A774AC9C54A">
                           <p class="notep1">注意：</p>
                           <p>创建资源后，您将无法再修改此属性。</p>
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-98296B6F-5477-46B4-A8C3-D91655C6C017__GUID-BFA0E172-DFC7-422D-ACDB-91BB61585B08">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">AGENT_FILENAME =％Grid_home％/ bin中/应用</pre></div>
                  </div><a id="CWADD92656"></a><a id="CWADD92655"></a><div class="sect4"><a id="GUID-F6338E02-5405-4898-8E3F-D83896982BB8" name="GUID-F6338E02-5405-4898-8E3F-D83896982BB8"></a><h5 id="CWADD-GUID-F6338E02-5405-4898-8E3F-D83896982BB8" class="sect5">ALERT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e1754" class="indexterm-anchor"></a><a id="d67172e1758" class="indexterm-anchor"></a>用于指定要包含在资源状态警报消息中的其他资源属性。您可以将该属性指定为以空格分隔的资源属性列表。必须可以从资源类型访问这些属性以在警报消息中显示。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F6338E02-5405-4898-8E3F-D83896982BB8__GUID-913A4AEC-E963-447A-B177-B70145F99435">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ALERT_TEMPLATE =“DESCRIPTION HOSTING_MEMBERS”</pre></div>
                  </div><a id="CWADD91444"></a><div class="sect4"><a id="GUID-889D6367-B991-4C02-9782-7A79BAC9F608" name="GUID-889D6367-B991-4C02-9782-7A79BAC9F608"></a><h5 id="CWADD-GUID-889D6367-B991-4C02-9782-7A79BAC9F608" class="sect5">自动开启</h5>
                     <div>
                        <p><a id="d67172e1885" class="indexterm-anchor"></a><a id="d67172e1889" class="indexterm-anchor"></a>指示Oracle Clusterware在群集服务器重新启动后是否自动启动资源。有效的<code class="codeph">AUTO_START</code>值为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">always</code> ：在服务器重新启动时重新启动资源，而不管服务器停止时资源的状态如何。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">restore</code> ：将资源恢复到服务器停止时的状态。如果在服务器停止之前<code class="codeph">TARGET</code>的值为<code class="codeph">ONLINE</code> ，Oracle Clusterware会尝试重新启动资源。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">never</code> ：Oracle服务器停止时，无论资源状态如何，Oracle Clusterware都不会重新启动资源。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD91446"></a><a id="CWADD91445"></a><div class="sect4"><a id="GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0" name="GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0"></a><h5 id="CWADD-GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0" class="sect5">CARDINALITY</h5>
                     <div>
                        <p>同时运行资源或资源组的服务器数。这是资源基数的上限。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5C55701B-3E89-4C01-85F0-7FCC77B915D0__GUID-72BDF134-622B-422E-9390-601C67610EE0">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>CARDINALITY = 1</code></pre><p>您还可以使用一个值，使得基数始终随着分配给资源或资源组配置为运行的服务器池的服务器数量的增加而减少。价值是：</p><pre class="pre codeblock"><code>CARDINALITY =％CRS_SERVER_POOL_SIZE％</code></pre><p>只有<code class="codeph">PLACEMENT=restricted</code>且使用<code class="codeph">SERVER_POOLS</code>属性的资源才能使用此值。
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579" name="GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579"></a><h5 id="CWADD-GUID-F78FD747-A42B-4F08-8FC2-D70E47F83579" class="sect5">CARDINALITY_ID</h5>
                     <div>
                        <p>每个INSTANCE_COUNT个资源实例的整数不同。</p>
                        <div class="section">
                           <p>此参数的值从1到CARDINALITY * 2不等。仅当您使用联机重定位（RELOCATE_KIND = online）或减少资源实例计数时，资源实例的数量可能大于CARDINALITY的值。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD91448"></a><a id="CWADD91447"></a><div class="sect4"><a id="GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D" name="GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D"></a><h5 id="CWADD-GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D" class="sect5">CHECK_INTERVAL</h5>
                     <div>
                        <p><a id="d67172e2330" class="indexterm-anchor"></a><a id="d67172e2334" class="indexterm-anchor"></a>重复执行<code class="codeph">check</code>操作之间的时间间隔（以秒为单位）。较短的间隔可以更频繁地进行检查，但如果使用脚本代理，则会增加资源消耗。使用特定于应用程序的代理来减少资源消耗。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D__GUID-C9B7479D-BB4C-445D-8946-C2D6BEE9BAF2">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">CHECK_INTERVAL = 60</pre></div>
                  </div><a id="CWADD92417"></a><a id="CWADD92416"></a><div class="sect4"><a id="GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21" name="GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21"></a><h5 id="CWADD-GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21" class="sect5">CHECK_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e2466" class="indexterm-anchor"></a><a id="d67172e2470" class="indexterm-anchor"></a>检查操作可以运行的最长时间（以秒为单位）。如果操作未在指定的时间内完成，Oracle Clusterware将返回错误消息。如果未指定此属性或指定0秒，则Oracle Clusterware将使用<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-704F6BF2-50B8-48D2-AB6F-9D7EA8723C21__GUID-1597116E-98F3-4A54-9F2F-9BABE55404C0">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">CHECK_TIMEOUT = 30</pre></div>
                  </div><a id="CWADD92658"></a><a id="CWADD92657"></a><div class="sect4"><a id="GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA" name="GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA"></a><h5 id="CWADD-GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA" class="sect5">CLEAN_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e2603" class="indexterm-anchor"></a><a id="d67172e2607" class="indexterm-anchor"></a>干净操作可以运行的最长时间（以秒为单位）。如果操作未在指定的时间内完成，Oracle Clusterware将返回错误消息。如果未指定此属性的值或指定<code class="codeph">0</code>秒，则Oracle Clusterware将使用<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE">STOP_TIMEOUT</a></code>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-34E77C9D-DDCE-44B1-8B78-79768CED18BA__GUID-36F0F3F9-C24D-4240-8688-9FF8015A3C8C">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">CLEAN_TIMEOUT = 30</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6" name="GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6"></a><h5 id="CWADD-GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6" class="sect5">CRITICAL_RESOURCES</h5>
                     <div>
                        <p>资源组属性，包含标记为资源组关键的资源列表。</p>
                        <div class="section">
                           <p>您可以在资源组的CRITICAL_RESOURCES属性中指定以空格分隔的关键资源列表。将此属性用于本地和群集资源组类型。您可以添加<code class="codeph">type:</code>选项，后跟资源类型名称，以指示指定类型的所有成员资源都是该组的关键资源。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9CC3A8B6-CDB3-4F4F-9E72-7F9D1A7C6EE6__GUID-BF206AA3-B4D7-4F14-86B8-964EFCBB1C56">
                           <p class="titleinexample">实施例B-1使用实施例</p><pre class="pre codeblock"><code>CRITICAL_RESOURCES =“r1 r2 r3”CRITICAL_RESOURCES =“appvip type：ora.export.type”</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="CWADD92660"></a><a id="CWADD92659"></a><div class="sect4"><a id="GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5" name="GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5"></a><h5 id="CWADD-GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5" class="sect5">DELETE_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e2882" class="indexterm-anchor"></a><a id="d67172e2886" class="indexterm-anchor"></a>删除操作可以运行的最长时间（以秒为单位）。如果操作未在指定的时间内完成，Oracle Clusterware将返回错误消息。如果未指定此属性的值或指定<code class="codeph">0</code>秒，则Oracle Clusterware将使用<a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-56D22C90-5C05-48B0-811B-5D236FF5B0E5__GUID-5DAE5085-BD8E-4846-911E-7F5425ED3FDB">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">DELETE_TIMEOUT = 30</pre></div>
                  </div><a id="CWADD91452"></a><a id="CWADD91451"></a><div class="sect4"><a id="GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5" name="GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5"></a><h5 id="CWADD-GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5" class="sect5">描述</h5>
                     <div>
                        <p><a id="d67172e3021" class="indexterm-anchor"></a><a id="d67172e3025" class="indexterm-anchor"></a>输入要添加的资源的描述。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-CDB4E035-FAD9-4A82-84F5-96FF72AB52C5__GUID-E077AAEA-E406-4FB5-89BB-C8AF6E55D1CC">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">DESCRIPTION = Apache Web服务器</pre></div>
                  </div><a id="CWADD91454"></a><a id="CWADD91453"></a><div class="sect4"><a id="GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9" name="GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9"></a><h5 id="CWADD-GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9" class="sect5">启用</h5>
                     <div>
                        <p><a id="d67172e3153" class="indexterm-anchor"></a><a id="d67172e3157" class="indexterm-anchor"></a> Oracle Clusterware使用此属性来管理资源的状态。Oracle Clusterware不会尝试直接管理已禁用的（ <code class="codeph">ENABLED=0</code> ）资源，也不会尝试依赖于其他资源。已禁用的资源无法启动，但可以停止。Oracle Clusterware不会主动监视已禁用的资源，这意味着Oracle Clusterware不会检查其状态。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D1B7E01B-3D24-4B9C-87A3-E5F9E43FCFD9__GUID-D48707BE-AE45-4FDF-B0F6-D2C25A4B09BF">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">ENABLED = 1</pre></div>
                  </div><a id="CWADD91456"></a><a id="CWADD91455"></a><div class="sect4"><a id="GUID-EC735949-C55E-423F-AA22-179CD5B311B7" name="GUID-EC735949-C55E-423F-AA22-179CD5B311B7"></a><h5 id="CWADD-GUID-EC735949-C55E-423F-AA22-179CD5B311B7" class="sect5">FAILURE_INTERVAL</h5>
                     <div>
                        <p><a id="d67172e3289" class="indexterm-anchor"></a><a id="d67172e3293" class="indexterm-anchor"></a> Oracle Clusterware在资源超过<code class="codeph">FAILURE_THRESHOLD</code>属性指定的故障数的情况下停止资源的时间间隔（以秒为单位）。如果该值为零（ <code class="codeph">0</code> ），则禁用跟踪故障。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-EC735949-C55E-423F-AA22-179CD5B311B7__GUID-07A80B2C-259B-4F3E-A2BD-F0DCC458EFF8">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">FAILURE_INTERVAL = 30</pre></div>
                  </div><a id="CWADD91458"></a><a id="CWADD91457"></a><div class="sect4"><a id="GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9" name="GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9"></a><h5 id="CWADD-GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9" class="sect5">FAILURE_THRESHOLD</h5>
                     <div>
                        <p><a id="d67172e3427" class="indexterm-anchor"></a><a id="d67172e3431" class="indexterm-anchor"></a>在Oracle Clusterware将资源标记为不可用且不再监视资源之前，在资源的指定<code class="codeph">FAILURE_INTERVAL</code>内检测到的资源的故障数。如果资源失败指定的次数，则Oracle Clusterware将停止该资源。如果该值为零（ <code class="codeph">0</code> ），则禁用跟踪故障。最大值为<code class="codeph">20</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-FC72C129-45AE-49CE-9D3A-6175C45F33D9__GUID-DF7F947B-4AA5-4FA3-B8E3-19E34088DC4C">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">FAILURE_THRESHOLD = 3</pre></div>
                  </div><a id="CWADD91511"></a><a id="CWADD91459"></a><div class="sect4"><a id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88" name="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88"></a><h5 id="CWADD-GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88" class="sect5">HOSTING_MEMBERS</h5>
                     <div>
                        <p><a id="d67172e3568" class="indexterm-anchor"></a><a id="d67172e3572" class="indexterm-anchor"></a>可以托管资源的以空格分隔的有序集群服务器名称列表。仅当使用管理员管理时，以及<code class="codeph">PLACEMENT</code>属性的值设置为<code class="codeph">favored</code>或<code class="codeph">restricted</code>时，才需要此属性。将应用程序注册为Oracle Clusterware资源时，请改用<code class="codeph">SERVER_POOLS</code>属性。
                        </p>
                        <div class="infoboxnote" id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88__GUID-3A528DEA-088B-473A-A1D0-12692FA95622">
                           <p class="notep1">注意：</p>
                           <p>对于<code class="codeph">application</code>类型的资源，Oracle Clusterware将<code class="codeph">HOSTING_MEMBERS</code>属性中列出的服务器放在通用服务器池中。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88__GUID-987F4E82-8CBC-4597-89BF-C1F242C8C24D">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="policy-based-cluster-and-capacity-management.html#GUID-C0D8A868-2AC4-485C-B558-E60E3977BB81">默认服务器池</a> ”</span>有关通用服务器池的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-3592659F-ECDB-4117-B1B4-70095179A5B7">LOAD</a> ”</span>以获取有关此属性的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a> ”</span>有关此属性的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <p>要获取候选节点名称列表，请运行<code class="codeph">olsnodes</code>命令以显示服务器名称列表。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88__GUID-51AACD34-E490-4642-ADB1-B2465FC1C468">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">HOSTING_MEMBERS = server1 server2 server3</pre></div>
                  </div><a id="CWADD92664"></a><a id="CWADD92663"></a><div class="sect4"><a id="GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5" name="GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5"></a><h5 id="CWADD-GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5" class="sect5">INSTANCE_FAILOVER</h5>
                     <div>
                        <p><a id="d67172e3751" class="indexterm-anchor"></a><a id="d67172e3755" class="indexterm-anchor"></a>对<code class="codeph">CLUSTER_RESOURCE</code>类型的资源使用<code class="codeph">INSTANCE_FAILOVER</code>属性。使用此属性可以禁止资源实例从失败的服务器进行故障转移。这使您可以将资源绑定到特定服务器。
                        </p>
                        <p>设置为<code class="codeph">0</code>以禁用实例故障转移。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0F90FA29-16E1-4CD0-BF4F-152CD1E084E5__GUID-237C407F-6A09-47E2-A0EE-D1D237B859A1">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">INSTANCE_FAILOVER = 1</pre></div>
                  </div><a id="CWADD92666"></a><a id="CWADD92665"></a><div class="sect4"><a id="GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981" name="GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981"></a><h5 id="CWADD-GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981" class="sect5">INTERMEDIATE_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e3894" class="indexterm-anchor"></a><a id="d67172e3898" class="indexterm-anchor"></a>表示在资源声明为失败之前资源可以保持在<code class="codeph">INTERMEDIATE</code>状态的最长时间（以秒为单位）。<code class="codeph">INTERMEDIATE_TIMEOUT</code>的值必须大于<code class="codeph">0</code>才能生效。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E2C06AD3-2120-4FFE-B6DF-BD88C2AE9981__GUID-528F713E-3439-4206-9DCB-815920B7BC6E">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">INTERMEDIATE_TIMEOUT = 60</pre></div>
                  </div><a id="CWADD91461"></a><a id="CWADD91460"></a><div class="sect4"><a id="GUID-3592659F-ECDB-4117-B1B4-70095179A5B7" name="GUID-3592659F-ECDB-4117-B1B4-70095179A5B7"></a><h5 id="CWADD-GUID-3592659F-ECDB-4117-B1B4-70095179A5B7" class="sect5">加载</h5>
                     <div>
                        <p><a id="d67172e4035" class="indexterm-anchor"></a><a id="d67172e4039" class="indexterm-anchor"></a> Oracle Clusterware将此属性的值与<code class="codeph">PLACEMENT</code>属性的值一起解释。当<code class="codeph">PLACEMENT</code>的值<code class="codeph">balanced</code> ， <code class="codeph">LOAD</code>的值决定了放置资源的最佳位置。非负数值，定量表示资源实例相对于其他资源消耗的服务器容量。Oracle Clusterware尝试将资源放置在运行资源总负载最少的服务器上。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3592659F-ECDB-4117-B1B4-70095179A5B7__GUID-D826DDCF-2380-4F0B-BCB8-3B3F79FB7A1B">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">LOAD = 1</pre></div>
                  </div><a id="CWADD92668"></a><a id="CWADD92667"></a><div class="sect4"><a id="GUID-74941A1B-F011-45B2-8F35-8BAE992417A2" name="GUID-74941A1B-F011-45B2-8F35-8BAE992417A2"></a><h5 id="CWADD-GUID-74941A1B-F011-45B2-8F35-8BAE992417A2" class="sect5">MODIFY_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e4180" class="indexterm-anchor"></a><a id="d67172e4184" class="indexterm-anchor"></a>修改操作可以运行的最长时间（以秒为单位）。如果操作未在指定的时间内完成，Oracle Clusterware将返回错误消息。如果未指定此属性的值或指定<code class="codeph">0</code>秒，则Oracle Clusterware将使用<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-74941A1B-F011-45B2-8F35-8BAE992417A2__GUID-68F56CD3-9D95-4E1D-8725-07C865DAFB9E">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">MODIFY_TIMEOUT = 30</pre></div>
                  </div><a id="CWADD91463"></a><a id="CWADD91462"></a><div class="sect4"><a id="GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F" name="GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F"></a><h5 id="CWADD-GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F" class="sect5">名称</h5>
                     <div>
                        <p><a id="d67172e4320" class="indexterm-anchor"></a><a id="d67172e4324" class="indexterm-anchor"></a>用于命名资源的区分大小写的字母数字字符串。Oracle建议使用以字母数字前缀开头的命名约定，例如<code class="codeph">myApache</code> ，并使用标识符来完成名称以描述它。资源名称可以包含除感叹号（！）之外的任何平台支持的字符和波浪号（〜）。资源名称不能以句点（。）开头，也不能以字符串<span class="italic">ora</span>开头。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-69DA6B0F-D08C-4BF8-A5AA-D7808372F62F__GUID-C911A1D7-4FA2-49C2-957D-BD78AA633D05">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">NAME = myApache</pre></div>
                  </div><a id="CWADD91465"></a><a id="CWADD91464"></a><div class="sect4"><a id="GUID-441C06D9-18E9-4CA6-9D23-17FD54602171" name="GUID-441C06D9-18E9-4CA6-9D23-17FD54602171"></a><h5 id="CWADD-GUID-441C06D9-18E9-4CA6-9D23-17FD54602171" class="sect5">OFFLINE_CHECK_INTERVAL</h5>
                     <div>
                        <p><a id="d67172e4458" class="indexterm-anchor"></a><a id="d67172e4462" class="indexterm-anchor"></a>控制资源的离线监视。该值表示Oracle Clusterware在其状态为<code class="codeph">OFFLINE</code>时监视资源的时间间隔（以秒为单位）。如果值为<code class="codeph">0</code>则禁用监视。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-441C06D9-18E9-4CA6-9D23-17FD54602171__GUID-7AA052E5-6AA5-4520-B0C9-92C10D66209A">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">OFFLINE_CHECK_INTERVAL = 30</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5" name="GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5"></a><h5 id="CWADD-GUID-FC983B26-D3F6-425B-A37A-952C27E8FAA5" class="sect5">ONLINE_RELOCATION_TIMEOUT</h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>（可选）在此处描述参数。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD91467"></a><a id="CWADD91466"></a><div class="sect4"><a id="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16" name="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16"></a><h5 id="CWADD-GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16" class="sect5">放置</h5>
                     <div>
                        <p><a id="d67172e4726" class="indexterm-anchor"></a><a id="d67172e4730" class="indexterm-anchor"></a>指定Oracle Clusterware如何选择要在其上启动资源的群集服务器。有效值是<code class="codeph">balanced</code> ， <code class="codeph">favored</code>或<code class="codeph">restricted</code> 。
                        </p>
                        <p>如果将<code class="codeph">PLACEMENT</code>属性设置为<code class="codeph">favored</code>或<code class="codeph">restricted</code> ，则还必须为<code class="codeph">SERVER_POOLS</code>和<code class="codeph">HOSTING_MEMBERS</code>属性分配值。如果设置的值<code class="codeph">PLACEMENT</code>属性来<code class="codeph">balanced</code> ，那么<code class="codeph">HOSTING_MEMBERS</code>属性不是必需的。
                        </p>
                        <div class="infoboxnotealso" id="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16__GUID-B9C593A6-138B-4ECD-A3E2-C496BF3B5230">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="可以在任何服务器上启动资源，具体取决于放置策略，资源启动依赖关系以及该服务器上操作脚本的可用性。">应用程序放置策略</a> ”</span>以获取有关<code class="codeph">PLACEMENT</code>属性的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a> ”</span>有关此属性的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a> ”</span>以获取有关此属性的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16__GUID-7357C1DA-B83B-4A0D-A1CA-5220E23C60DD">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">PLACEMENT =青睐</pre></div>
                  </div>
                  <div class="sect4"><a id="GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79" name="GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79"></a><h5 id="CWADD-GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79" class="sect5">RELOCATE_KIND</h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>用于控制资源的重定位方式。在脱机重定位操作期间，目标资源实例在源服务器上停止，随后在目标服务器上启动。联机重定位操作首先在目标服务器上启动资源实例，然后在源服务器上停止它。Start-only启动目标服务器上的资源实例，但不会停止源服务器上的资源实例。相反，代理会在重定位完成后停止资源实例。</p>
                           <p>您可以选择<code class="codeph">offline/0</code> ， <code class="codeph">online/1</code>或<code class="codeph">start-only/2</code>作为此参数的值。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3DC6BAA1-0980-4790-9B96-3228BBB10B79__GUID-F6D7E61F-6059-4381-9E9E-A3311514853E">用法示例</p><pre class="pre codeblock"><code>RELOCATE_KIND = 1 RELOCATE_KIND =仅启动</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD92670"></a><a id="CWADD92669"></a><div class="sect4"><a id="GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8" name="GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8"></a><h5 id="CWADD-GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8" class="sect5">RELOCATE_BY_DEPENDENCY</h5>
                     <div>
                        <p><a id="d67172e5073" class="indexterm-anchor"></a><a id="d67172e5077" class="indexterm-anchor"></a>用于声明是否由于对请求重定位的资源的依赖性而在请求时启用资源以进行重定位。如果为0，则由于对发出重定位请求的资源的依赖性，将不允许资源重定位。有效值为<code class="codeph">1</code>或<code class="codeph">0</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9C70ABEB-3AEB-4809-B888-399B04D25DD8__GUID-845AC6FD-169E-42F9-908B-769FFF367A8C">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">RELOCATE_BY_DEPENDENCY = 1</pre></div>
                  </div><a id="CWADD91471"></a><a id="CWADD91470"></a><div class="sect4"><a id="GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8" name="GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8"></a><h5 id="CWADD-GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8" class="sect5">RESTART_ATTEMPTS</h5>
                     <div>
                        <p><a id="d67172e5211" class="indexterm-anchor"></a><a id="d67172e5215" class="indexterm-anchor"></a>在尝试重新定位资源之前，Oracle Clusterware尝试在资源的当前服务器上重新启动资源的次数。值为<code class="codeph">1</code>表示Oracle Clusterware仅尝试在服务器上重新启动一次资源。第二次故障导致Oracle Clusterware尝试重新定位资源。值为<code class="codeph">0</code>表示没有尝试重新启动但Oracle Clusterware总是尝试将资源故障转移到另一台服务器。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8__GUID-2EF32B4E-10F5-4A2C-B633-FF19F79D6B07">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">RESTART_ATTEMPTS = 2</pre></div>
                  </div><a id="CWADD91473"></a><a id="CWADD91472"></a><div class="sect4"><a id="GUID-81B142FF-266E-46CF-9202-3BA44300C5EE" name="GUID-81B142FF-266E-46CF-9202-3BA44300C5EE"></a><h5 id="CWADD-GUID-81B142FF-266E-46CF-9202-3BA44300C5EE" class="sect5">SCRIPT_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e5349" class="indexterm-anchor"></a><a id="d67172e5353" class="indexterm-anchor"></a>要运行的操作的最长时间（以秒为单位）。如果操作脚本未在指定的时间内完成，Oracle Clusterware将返回错误消息。超时适用于所有操作（ <code class="codeph">start</code> ， <code class="codeph">stop</code> ， <code class="codeph">check</code>和<code class="codeph">clean</code> ）。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-81B142FF-266E-46CF-9202-3BA44300C5EE__GUID-F4DC1437-E893-48DB-A8FC-4E9C8F65264A">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">SCRIPT_TIMEOUT = 45</pre></div>
                  </div><a id="CWADD92672"></a><a id="CWADD92671"></a><div class="sect4"><a id="GUID-85112566-7B71-423B-87DF-8F5B50CAAF58" name="GUID-85112566-7B71-423B-87DF-8F5B50CAAF58"></a><h5 id="CWADD-GUID-85112566-7B71-423B-87DF-8F5B50CAAF58" class="sect5">SERVER_CATEGORY</h5>
                     <div>
                        <p><a id="d67172e5494" class="indexterm-anchor"></a><a id="d67172e5498" class="indexterm-anchor"></a>对于本地资源， <code class="codeph">local_resource</code>类型的定义扩展为类别感知。换句话说，您可以将本地资源限制为属于特定服务器类别。对于集群资源，为价值<code class="codeph">SERVER_CATEGORY</code>属性始终为价值功能<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>属性。设置<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></code>到<code class="codeph">*</code>当<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>受到限制， <code class="codeph">SERVER_CATEGORY</code>使用。如果将<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>设置为<code class="codeph">restricted</code> ，则Oracle Clusterware还需要设置以下属性之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code></p>
                           </li>
                           <li>
                              <p><code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></code></p>
                           </li>
                           <li>
                              <p><code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code></p>
                           </li>
                        </ul>
                        <p>例如，资源，被称为<code class="codeph">resource1,</code>可以有设置的值的策略<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>进行<code class="codeph">restricted</code> ，并<code class="codeph">SERVER_CATEGORY</code>设置为<code class="codeph">HubCategory</code> 。在这种情况下，Oracle Clusterware只会使<code class="codeph">resource1</code>在属于<code class="codeph">HubCategory</code>的服务器上运行。
                        </p>
                        <p>如果<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>设置为<code class="codeph">favored</code> ，如果只有一个<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code> ， <code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></code> ，或<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code>设置，则该值表示的偏好。如果<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code>填充和之一<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></code>或<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code>被设置，则该<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code>指示放置偏好和<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></code>或<code class="codeph">SERVER_CATEGORY</code>指示的限制。例如， <code class="codeph">ora.cluster.vip</code>资源可以具有的值设置政策<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>到<code class="codeph">favored</code> ，并<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></code>设置为<code class="codeph">HubCategory</code>和<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></code>设置为<code class="codeph">server_name1</code> 。在这种情况下，Oracle集群限制的放置<code class="codeph">ora.cluster.vip</code>在服务器<code class="codeph">HubCategory</code> ，然后将它倾向于被称为服务器<code class="codeph">server_name1</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-85112566-7B71-423B-87DF-8F5B50CAAF58__GUID-3279D87B-6DF1-4CEE-9FB7-A8388FE3EC9F">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">SERVER_CATEGORY = my_category</pre></div>
                  </div><a id="CWADD91512"></a><a id="CWADD91474"></a><div class="sect4"><a id="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" name="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F"></a><h5 id="CWADD-GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" class="sect5">SERVER_POOLS</h5>
                     <div>
                        <p>描述了SERVER_POOLS资源属性。</p>
                        <p>空间分隔的特定资源可以属于的服务器池列表。如果资源可以在群集中的任何服务器上运行，则使用默认值<code class="codeph">*</code> ，除非资源是<code class="codeph">cluster_resource</code>类型，在这种情况下， <code class="codeph">SERVER_POOLS</code>属性的默认值为空。只有集群管理员可以指定<code class="codeph">*</code>作为此属性的值。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>属性与<code class="codeph">SERVER_POOLS</code>属性一起使用，如下所示：如果将<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>属性的值设置为<code class="codeph">restricted</code>或<code class="codeph">favored</code> ，则在使用资源的策略管理时，还必须为<code class="codeph">SERVER_POOLS</code>属性提供值。
                              </p>
                           </li>
                           <li>
                              <p>如果该值<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>设置为<code class="codeph">balanced</code> ，那么资源只能运行在通用和自由池，除非<code class="codeph">SERVER_POOLS=*</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>此属性在资源和一个或多个服务器池之间创建关于放置的关联，并取决于<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a></code>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F__GUID-CC16F770-5BD5-4F78-B6AA-82959A475F96">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="pre codeblock"><code>SERVER_POOLS = pool1 pool2 pool3</code></pre><div class="infoboxnotealso" id="GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F__GUID-442F730A-9764-4533-984E-748F1E6C2322">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关服务器池的更多信息，请参阅<a href="policy-based-cluster-and-capacity-management.html#GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" title="Oracle Clusterware管理的资源包含在称为服务器池的逻辑服务器组中。这是在Oracle Clusterware 11g第2版（11.2）中引入的。通过基于策略的管理，管理员可以指定运行服务器的服务器池（不包括通用池和空闲池）。您可以使用SRVCTL或CRSCTL分别为数据库和其他应用程序创建服务器池。通过服务器分类，您可以使用处理器类型，内存和其他区分系统功能等属性将服务器组织到特定类别中。群集配置策略是一个文档，其中只包含群集配置策略集管理的每个服务器池的一个定义。群集配置策略集是一个文档，用于定义为群集配置的所有服务器池的名称以及所有策略的定义。您可以配置数据库，以便Oracle Clusterware了解给定数据库的CPU要求和限制。只要将服务器添加到群集，Oracle Clusterware就会为每个服务器分配一组属性。由于过多的打开会话或失控的工作负载，企业数据库服务器可以使用所有可用内存。内存不足可能导致事务失败，或者在极端情况下，导致服务器重新启动以及丢失应用程序的宝贵资源。Oracle数据库QoS管理实时检测服务器上的内存压力，并将新会话重定向到其他服务器，以防止使用压力服务器上的所有可用内存。您将服务器定义为命名类别，并指定将服务器定义为该类别成员的属性。">基于策略的群集和容量管理</a></p>
                                 <p>有关群集管理员的详细信息，请参阅<span class="q">“ <a href="oracle-clusterware-administration.html#GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" title="角色分离管理是一种以协调的方式管理集群资源和工作负载的方法，以减少资源冲突和短缺的风险。">角色分离管理</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a> ”</span>有关此属性的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-712863E7-326F-4BBC-9CB2-BD9A1C4C2E16">PLACEMENT</a> ”</span>有关此属性的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92674"></a><a id="CWADD92673"></a><div class="sect4"><a id="GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9" name="GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9"></a><h5 id="CWADD-GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9" class="sect5">START_CONCURRENCY</h5>
                     <div>
                        <p><a id="d67172e6050" class="indexterm-anchor"></a><a id="d67172e6054" class="indexterm-anchor"></a>描述一次可以并发的最大启动操作数。值为<code class="codeph">0</code>表示“无限制”。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-402D6EFE-DC3A-4808-83DF-62D4D45777B9__GUID-906B9F99-98E8-4A39-88FA-74EAD0D6B1A7">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">START_CONCURRENCY = 10</pre></div>
                  </div><a id="CWADD91476"></a><a id="CWADD91475"></a><div class="sect4"><a id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B" name="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B"></a><h5 id="CWADD-GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B" class="sect5">START_DEPENDENCIES</h5>
                     <div>
                        <p><a id="d67172e6186" class="indexterm-anchor"></a><a id="d67172e6190" class="indexterm-anchor"></a>指定Oracle Clusterware在启动资源时考虑的一组关系。您可以在特定资源可依赖的多种资源和资源类型上指定以空格分隔的依赖关系列表。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-8BAD91C9-9F1E-4090-A80B-FAD28164BC4B">句法</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">START_DEPENDENCIES = <span class="italic">依赖项</span> （ <span class="italic">resource_set</span> ）[ <span class="italic">依赖项</span> （ <span class="italic">resource_set</span> ）] [...]
</pre><p>在前面的语法示例中，定义了变量，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">dependency</code></span> ：可能的值是<code class="codeph">attraction</code> ， <code class="codeph">dispersion</code> ， <code class="codeph">exclusion</code> ， <code class="codeph">hard</code> ， <code class="codeph">pullup</code>和<code class="codeph">weak</code> 。您可以只指定每个依赖项一次，但<code class="codeph">pullup</code>除外，您可以多次指定它。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">resource_set</code></span> ：以逗号分隔的资源实体列表 - 单个资源或资源类型 - 括在括号<code class="codeph">()</code>中，格式为<code class="codeph">res1[, res2[, ...]]</code> ，您正在配置的资源依赖于该资源实体。
                              </p>
                              <p>定义每个资源实体，如下所示：</p><pre class="oac_no_warn" dir="ltr">[ <span class="italic">修饰符</span> 1：[ <span class="italic">修饰符</span> 2：]] { <span class="italic">resource_name</span> |类型： <span class="italic">resource_type</span> }</pre><p>在前面的语法示例中， <span class="italic"><code class="codeph">resource_name</code></span>是特定资源的名称，并且<code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span>是特定资源类型的名称。资源类型必须在前面加<code class="codeph">type</code>和<code class="codeph">type</code>修饰符必须在列表中的最后一个资源实体。
                              </p>
                              <p>（可选）您可以指定修饰符以进一步配置资源实体依赖性。您可以通过将以下修饰符添加到资源实体前面来修改每个依赖项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a id="d67172e6294" class="indexterm-anchor"></a><a id="d67172e6300" class="indexterm-anchor"></a> <code class="codeph">attraction([intermediate:]{</code> <span class="italic"><code class="codeph">resource_name</code></span> <code class="codeph">|</code> <code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span> <code class="codeph">})</code>当您希望此资源在具有特定命名资源的同一服务器或特定类型的任何资源上运行时，使用<code class="codeph">attraction</code>启动依赖项。
                                    </p>
                                    <p>使用<code class="codeph">intermediate</code>指定此资源被吸引到它所依赖的处于<code class="codeph">INTERMEDIATE</code>状态的资源实体。如果未指定，则资源必须处于<code class="codeph">ONLINE</code>状态以吸引依赖资源。
                                    </p>
                                    <p>如果为资源的资源类型指定<code class="codeph">attraction</code>依赖项，则该特定类型的任何资源都会吸引依赖资源。
                                    </p>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6340" class="indexterm-anchor"></a><a id="d67172e6346" class="indexterm-anchor"></a> <code class="codeph">exclusion([[preempt_pre: | preempt_post:]]</code> <span class="italic"><code class="codeph">target_resource_name</code></span> <code class="codeph">| type:</code> <span class="italic"><code class="codeph">target_resource_type</code></span> <code class="codeph">])</code>使用<code class="codeph">exclusion</code>启动依赖项来保持具有此依赖关系的资源在同一节点上运行。
                                    </p>
                                    <p>使用<code class="codeph">preempt_pre</code>修饰符配置<code class="codeph">exclusion</code>依赖项，以在启动源资源之前停止由特定资源类型定义的指定目标资源。
                                    </p>
                                    <p>使用<code class="codeph">preempt_post</code>修饰符将<code class="codeph">exclusion</code>依赖关系配置为在启动源资源后停止和重定位（如果可能）指定的特定资源类型定义的目标资源。
                                    </p>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6385" class="indexterm-anchor"></a><a id="d67172e6391" class="indexterm-anchor"></a> <code class="codeph">dispersion[:active]([intermediate:][pool:]{</code> <span class="italic"><code class="codeph">resource_name</code></span> <code class="codeph">|</code> <code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span> <code class="codeph">})</code> - 指定要在不同于命名资源或资源的服务器上运行的资源的<code class="codeph">dispersion</code>开始依赖关系特殊类型。资源可能最终仍在同一台服务器上运行，具体取决于服务器的可用性。
                                    </p>
                                    <p>使用<code class="codeph">active</code>修饰符配置<code class="codeph">dispersion</code>依赖关系，以便Oracle Clusterware尝试将依赖资源重新定位到另一个服务器（如果它与另一个资源并置，另一个服务器联机）。除非指定<code class="codeph">active</code>修饰符，否则Oracle Clusterware不会将资源重定位到新可用的服务器。
                                    </p>
                                    <p>如果资源处于<code class="codeph">ONLINE</code>或<code class="codeph">INTERMEDIATE</code>状态，请使用<code class="codeph">intermediate</code>修饰符指定Oracle Clusterware可以重定位依赖资源。如果未指定，则资源必须处于<code class="codeph">ONLINE</code>状态，以便发生依赖资源的分散。
                                    </p>
                                    <p>如果希望资源位于与目标不同的服务器池中，而不是仅使用其他服务器，请使用<code class="codeph">pool</code>修饰符。
                                    </p>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6445" class="indexterm-anchor"></a><a id="d67172e6451" class="indexterm-anchor"></a> <code class="codeph">hard([intermediate:][global:][uniform:]{</code> <span class="italic"><code class="codeph">resource_name</code></span> <code class="codeph">|</code> <code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span> <code class="codeph">})</code> - 当您希望资源仅在特定类型的特定资源或资源启动时启动时，指定<span class="italic"><code class="codeph">resource_type</code></span>的<code class="codeph">hard</code>启动依赖项。
                                    </p>
                                    <p>使用<code class="codeph">intermediate</code>修饰符指定Oracle Clusterware可以启动此资源，如果它所依赖的资源处于<code class="codeph">ONLINE</code>或<code class="codeph">INTERMEDIATE</code>状态。如果未指定，则Oracle Clusterware的资源<span class="italic">必须</span>处于<code class="codeph">ONLINE</code>状态才能启动此资源。
                                    </p>
                                    <p>使用<code class="codeph">global</code>修饰符指定资源<span class="italic">并不</span>需要驻留在同一台服务器上，以Oracle集群的条件启动该资源。如果未指定，则资源必须驻留在同一服务器上，以便Oracle Clusterware启动此资源。
                                    </p>
                                    <p>使用<code class="codeph">uniform</code>修饰符尝试启动资源B的所有实例，但只有一个实例，至少必须开始满足依赖关系。
                                    </p>
                                    <p>如果为资源的资源类型指定<code class="codeph">hard</code>依赖关系，则在该特定类型的任何资源正在运行时，资源可以启动。
                                    </p>
                                    <div class="infoboxnote" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-ABC07783-52D2-4430-AB9F-5FE873BA668D">
                                       <p class="notep1">注意：</p>
                                       <p>Oracle建议具有<code class="codeph">hard</code>启动依赖性的资源也具有<code class="codeph">pullup</code>启动依赖性。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6519" class="indexterm-anchor"></a><a id="d67172e6525" class="indexterm-anchor"></a> <code class="codeph">pullup[:always]([intermediate:][global:]{</code> <span class="italic"><code class="codeph">resource_name</code></span> <code class="codeph">|</code> <code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span> <code class="codeph">})</code> - 当您为资源指定<code class="codeph">pullup</code> start依赖项时，由于命名资源启动，此资源将启动。
                                    </p>
                                    <p>使用<code class="codeph">always</code>修饰符进行<code class="codeph">pullup</code>以便Oracle Clusterware尽管其<code class="codeph">TARGET</code>属性值，无论该值是<code class="codeph">ONLINE</code>还是<code class="codeph">OFFLINE</code> ，都会启动此资源。否则，如果未指定<code class="codeph">always</code>修饰符，则仅当此资源的<code class="codeph">TARGET</code>属性值为<code class="codeph">ONLINE</code> ，Oracle Clusterware才会启动此资源。
                                    </p>
                                    <p>使用<code class="codeph">intermediate</code>修饰符指定Oracle Clusterware可以启动此资源，如果它所依赖的资源处于<code class="codeph">ONLINE</code>或<code class="codeph">INTERMEDIATE</code>状态。如果未指定，则Oracle Clusterware的资源必须处于<code class="codeph">ONLINE</code>状态才能启动此资源。
                                    </p>
                                    <p>使用<code class="codeph">global</code>修饰符来指定，该资源依赖的资源<span class="italic">并不</span>需要驻留在同一台服务器上，以Oracle集群的条件启动该资源。如果未指定，则此资源所依赖的资源必须位于同一服务器上，以便Oracle Clusterware启动此资源。
                                    </p>
                                    <p>如果为资源的资源类型指定<code class="codeph">pullup</code>依赖关系，则当该特定类型的任何资源启动时，Oracle Clusterware可以启动此资源。
                                    </p>
                                    <div class="infoboxnote" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-B20BE62B-99F0-4923-994A-15DD104722F1">
                                       <p class="notep1">注意：</p>
                                       <p>Oracle建议具有<code class="codeph">hard</code>启动依赖性的资源也具有<code class="codeph">pullup</code>启动依赖性。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><a id="d67172e6612" class="indexterm-anchor"></a><a id="d67172e6618" class="indexterm-anchor"></a> <code class="codeph">weak([concurrent:][global:][uniform:]{</code> <span class="italic"><code class="codeph">resource_name</code></span> <code class="codeph">|</code> <code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span> <code class="codeph">})</code> - 当您希望该资源启动时，指定<span class="italic"><code class="codeph">resource_type</code></span>的<code class="codeph">weak</code>启动依赖关系，无论命名资源是否正在运行。尝试启动此资源还会尝试启动此资源所依赖的任何资源（如果它们未运行）。
                                    </p>
                                    <p>使用<code class="codeph">concurrent</code>修饰符指定Oracle Clusterware可以启动依赖资源，而它所依赖的资源正处于启动过程中。如果未指定<code class="codeph">concurrent</code> ，则在Oracle Clusterware可以启动依赖资源之前，资源必须完成启动。
                                    </p>
                                    <p>使用<code class="codeph">global</code>修饰符指定资源<span class="italic">并不</span>需要驻留在同一服务器作为条件，Oracle集群启动相关的资源上。
                                    </p>
                                    <p>使用<code class="codeph">uniform</code>修饰符可以在资源可以运行的任何位置启动资源的所有实例。如果未指定修饰符（缺省值），则资源将在与其所依赖的资源相同的服务器上启动。
                                    </p>
                                    <p>如果为资源的资源类型指定<code class="codeph">weak</code>启动依赖项，则可以在该特定类型的任何资源正在运行时启动资源。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B__GUID-D08F7CCD-1CAE-4887-974B-D0626B9C8D34">
                           <p class="notep1">也可以看看：</p>
                           <p>有关启动依赖项的更多详细信息，请参阅<span class="q">“ <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7">启动依赖关系</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CWADD91478"></a><a id="CWADD91477"></a><div class="sect4"><a id="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A" name="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A"></a><h5 id="CWADD-GUID-956F4157-F793-40B8-B0E8-2193124F5F9A" class="sect5">START_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e6791" class="indexterm-anchor"></a><a id="d67172e6795" class="indexterm-anchor"></a>启动操作可以运行的最长时间（以秒为单位）。如果操作未在指定的时间内完成，Oracle Clusterware将返回错误消息。如果未指定此属性的值或指定<code class="codeph">0</code>秒，则Oracle Clusterware将使用<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A__GUID-06D8CA30-EA6C-45F4-B4FD-5820E52A9D57">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">START_TIMEOUT = 30</pre><div class="infoboxnotealso" id="GUID-956F4157-F793-40B8-B0E8-2193124F5F9A__GUID-F6AB08CA-4A41-4C6A-A39C-CFE729CFCB80">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a> ”</span>有关此属性的更多信息</p>
                        </div>
                     </div>
                  </div><a id="CWADD92676"></a><a id="CWADD92675"></a><div class="sect4"><a id="GUID-4AE674F7-431D-4333-93E3-73274D3F8F11" name="GUID-4AE674F7-431D-4333-93E3-73274D3F8F11"></a><h5 id="CWADD-GUID-4AE674F7-431D-4333-93E3-73274D3F8F11" class="sect5">STOP_CONCURRENCY</h5>
                     <div>
                        <p><a id="d67172e6938" class="indexterm-anchor"></a><a id="d67172e6942" class="indexterm-anchor"></a>描述一次可以并发的最大停止操作数。值为<code class="codeph">0</code>表示“无限制”。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4AE674F7-431D-4333-93E3-73274D3F8F11__GUID-A70A1049-3B28-4474-8841-26DFDDFD77EC">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">STOP_CONCURRENCY = 10</pre></div>
                  </div><a id="CWADD91482"></a><a id="CWADD91481"></a><div class="sect4"><a id="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928" name="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928"></a><h5 id="CWADD-GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928" class="sect5">STOP_DEPENDENCIES</h5>
                     <div>
                        <p><a id="d67172e7074" class="indexterm-anchor"></a><a id="d67172e7078" class="indexterm-anchor"></a>指定Oracle Clusterware在停止资源时考虑的一组关系。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928__GUID-3BFCE919-6B01-4D83-8F8A-B45E9D9F2DB3">句法</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">STOP_DEPENDENCIES = <span class="italic">依赖项</span> （ <span class="italic">resource_set</span> ）[ <span class="italic">依赖项</span> （ <span class="italic">resource_set</span> ）] ...
</pre><p>在前面的语法示例中，定义了变量，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">dependency</code></span> ：唯一可能的价值<code class="codeph">hard</code> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">resource_set</code></span> ：以<code class="codeph">res1[, res2 [,...]]</code>的形式的逗号分隔列表，用于资源实体（单个资源或资源类型），您正在配置的资源依赖于该列表。
                              </p>
                              <p>定义每个资源实体，如下所示：</p><pre class="oac_no_warn" dir="ltr">[ <span class="italic">修饰符</span> 1：[ <span class="italic">修饰符</span> 2：] [ <span class="italic">修饰符</span> 3：]] <span class="italic">resource_name</span> | type： <span class="italic">resource_type</span>
</pre><p>在前面的语法示例中， <span class="italic"><code class="codeph">resource_name</code></span>是特定资源的名称，并且<code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span>是特定资源类型的名称。资源类型必须以<code class="codeph">type:</code>开头。
                              </p>
                              <p>（可选）您可以指定修饰符以进一步配置资源实体依赖性。您可以通过将以下修饰符添加到资源实体前面来修改每个依赖项：</p>
                              <p><a id="d67172e7158" class="indexterm-anchor"></a><a id="d67172e7164" class="indexterm-anchor"></a> <code class="codeph">hard([intermediate:][global:][shutdown:]{</code> <span class="italic"><code class="codeph">resource_name</code></span> <code class="codeph">|</code> <code class="codeph">type:</code> <span class="italic"><code class="codeph">resource_type</code></span> <code class="codeph">})</code> - 指定当命名资源或特定资源类型的资源停止时要停止的资源的<code class="codeph">hard</code>停止依赖项。
                              </p>
                              <p>使用<code class="codeph">intermediate</code>指定从属资源可以保持在一个<code class="codeph">ONLINE</code>状态如果资源是在任一<code class="codeph">ONLINE</code>或<code class="codeph">INTERMEDIATE</code>的状态。如果未指定，则Oracle Clusterware会停止依赖资源，除非资源处于<code class="codeph">ONLINE</code>状态。
                              </p>
                              <p>使用<code class="codeph">global</code>指定依赖资源保持在<code class="codeph">ONLINE</code>状态，如果资源处于<code class="codeph">ONLINE</code>状态的集群中的任何节点上。如果未指定，则当驻留在同一服务器上的资源脱机时，Oracle Clusterware将停止依赖资源。
                              </p>
                              <p><code class="codeph">shutdown</code> Oracle Clusterware堆栈时，使用<code class="codeph">shutdown</code>来应用此依赖关系。这是一种在停止堆栈时影响停止资源的顺序的便捷方式，而不会对单个资源上的计划事件或计划外事件产生任何影响。当与<code class="codeph">shutdown</code>修饰符一起使用时，此依赖关系不会在有人直接停止资源时生效，但仅在堆栈关闭时才会生效。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928__GUID-6DF74015-DF1D-45F5-9458-929EBC27FBBB">
                           <p class="notep1">也可以看看：</p>
                           <p>有关停止依赖关系的更多详细信息，请<span class="q">“ <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516">停止依赖关系</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CWADD91484"></a><a id="CWADD91483"></a><div class="sect4"><a id="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE" name="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE"></a><h5 id="CWADD-GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE" class="sect5">STOP_TIMEOUT</h5>
                     <div>
                        <p><a id="d67172e7347" class="indexterm-anchor"></a><a id="d67172e7351" class="indexterm-anchor"></a> <code class="codeph">stop</code>或<code class="codeph">clean</code>操作可以运行的最长时间（以秒为单位）。如果操作未在指定的时间内完成，Oracle Clusterware将返回错误消息。如果未指定此属性或指定<code class="codeph">0</code>秒，则Oracle Clusterware将使用<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a></code>属性的值。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE__GUID-62DE5BF4-5ED5-442B-AFD8-ECBEBAEF335E">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">STOP_TIMEOUT = 30</pre><div class="infoboxnotealso" id="GUID-7DE018EC-77F0-4212-98FA-7B359BCD0DDE__GUID-056A4FA4-4D3B-42C6-92B6-B90646131B77">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-81B142FF-266E-46CF-9202-3BA44300C5EE">SCRIPT_TIMEOUT</a> ”</span>有关此属性的更多信息</p>
                              </li>
                              <li>
                                 <p>有关此属性的详细信息，请参阅<span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-956F4157-F793-40B8-B0E8-2193124F5F9A">START_TIMEOUT</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD91487"></a><div class="sect4"><a id="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D" name="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D"></a><h5 id="CWADD-GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D" class="sect5">UPTIME_THRESHOLD</h5>
                     <div>
                        <p><a id="d67172e7509" class="indexterm-anchor"></a><a id="d67172e7513" class="indexterm-anchor"></a> <code class="codeph">UPTIME_THRESHOLD</code>的值表示在Oracle Clusterware认为资源稳定之前资源必须达到的时间长度。通过设置<code class="codeph">UPTIME_THRESHOLD</code>属性的值，可以指示资源的稳定性。
                        </p>
                        <p>输入此属性的值作为数字，后跟表示秒（s），分钟（m），小时（h），天（d）或周（w）的字母。例如，值<code class="codeph">7h</code>表示7小时的正常运行时间阈值。
                        </p>
                        <p>在为<code class="codeph">UPTIME_THRESHOLD</code>指定的时间段过后，Oracle Clusterware会在下一个资源状态更改事件（例如，停止，启动，重定位或失败）中将<code class="codeph">RESTART_COUNT</code>的值重置为<code class="codeph">0</code> 。当<code class="codeph">RESTART_COUNT</code>的值达到您为<code class="codeph">RESTART_ATTEMPTS</code>设置的值时，Oracle Clusterware可以提醒您。下次资源发生故障或重新启动时，计数器将被有效重置。阈值表示重新计算和丢弃重新启动的时间量。如果资源在阈值之后失败，它仍将重新启动。
                        </p>
                        <div class="infoboxnote" id="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D__GUID-65D70AD4-59B5-4E01-8690-939350EB3A40">
                           <p class="notep1">注意：</p>
                           <p>当<code class="codeph">RESTART_COUNT</code>的值达到您为<code class="codeph">RESTART_ATTEMPTS</code>设置的值时，Oracle Clusterware会向集群件警报日志文件写入警报。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7A21CB00-DBE3-43BC-B8A5-74F59E74BA3D__GUID-B3509685-8DAB-4F7C-8918-6DBB2B9F473B">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-BF93C142-F11D-4163-B81C-C6DB437FD6F8">RESTART_ATTEMPTS</a> ”</span>有关此属性的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-clusterware-resource-reference.html#GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955">RESTART_COUNT</a> ”</span>以获取有关此属性的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92680"></a><a id="CWADD92679"></a><div class="sect4"><a id="GUID-D78C1390-D875-46B0-894C-288907E62D10" name="GUID-D78C1390-D875-46B0-894C-288907E62D10"></a><h5 id="CWADD-GUID-D78C1390-D875-46B0-894C-288907E62D10" class="sect5">USER_WORKLOAD</h5>
                     <div>
                        <p><a id="d67172e7691" class="indexterm-anchor"></a><a id="d67172e7695" class="indexterm-anchor"></a>用于指示资源是否是用于假设分析的工作负载生成资源。可能的值是<code class="codeph">yes</code>或<code class="codeph">no</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D78C1390-D875-46B0-894C-288907E62D10__GUID-6D8EC1C3-1A45-4036-84FF-D8A913622AB3">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">USER_WORKLOAD = YES</pre></div>
                  </div><a id="CWADD92682"></a><a id="CWADD92681"></a><div class="sect4"><a id="GUID-3744BB7A-0D83-45A3-A024-957CD868435F" name="GUID-3744BB7A-0D83-45A3-A024-957CD868435F"></a><h5 id="CWADD-GUID-3744BB7A-0D83-45A3-A024-957CD868435F" class="sect5">USE_STICKINESS</h5>
                     <div>
                        <p><a id="d67172e7829" class="indexterm-anchor"></a><a id="d67172e7833" class="indexterm-anchor"></a>用于指示资源应在上次运行的位置运行（如果可能），并且不允许以其他方式应用的负载平衡。如果设置为<code class="codeph">1</code> ，Oracle Clusterware将尝试启动上次运行的资源。启用<code class="codeph">USE_STICKINESS</code>还会禁用负载平衡。默认值为<code class="codeph">0</code> 。可能的值为<code class="codeph">0</code>和<code class="codeph">1</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3744BB7A-0D83-45A3-A024-957CD868435F__GUID-5E9F4300-3837-44E8-958F-A219ABD50DC1">用法示例</p>
                        </div>
                        <!-- class="section" --><pre class="oac_no_warn" dir="ltr">USE_STICKINESS = 1</pre></div>
                  </div>
               </div><a id="CWADD91488"></a><div class="sect3"><a id="GUID-A0E2752E-F36E-41B9-B859-57862B4745D5" name="GUID-A0E2752E-F36E-41B9-B859-57862B4745D5"></a><h4 id="CWADD-GUID-A0E2752E-F36E-41B9-B859-57862B4745D5" class="sect4">只读资源属性</h4>
                  <div>
                     <p>在特定资源上运行<code class="codeph">crsctl status resource</code>命令时，可以查看这些属性。注册资源时，Oracle Clusterware会设置这些属性。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046">ACTION_FAILURE_EVENT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170">INSTANCE_COUNT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1">INTERNAL_STATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF">LAST_SERVER</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377">LAST_STATE_CHANGE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D">PROFILE_CHANGE_EVENT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955">RESTART_COUNT</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF">州</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-DEA86F42-F78A-4BD0-854E-BE4627641968">STATE_CHANGE_EVENT_TEMPLATE</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F">STATE_DETAILS</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376">目标</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7">TARGET_SERVER</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-resource-reference.html#GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE">类型</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91388"></a><div class="sect4"><a id="GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046" name="GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046"></a><h5 id="CWADD-GUID-3ECDFB6B-0CC7-42CF-8567-6F9692FD3046" class="sect5">ACTION_FAILURE_EVENT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e8164" class="indexterm-anchor"></a><a id="d67172e8168" class="indexterm-anchor"></a>这是<code class="codeph">ora.*</code>资源的内部管理属性。您无法编辑此属性。
                        </p>
                     </div>
                  </div><a id="CWADD92661"></a><div class="sect4"><a id="GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170" name="GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170"></a><h5 id="CWADD-GUID-2172E6F6-4A64-4EF5-A4C6-BDE624FDD170" class="sect5">INSTANCE_COUNT</h5>
                     <div>
                        <p><a id="d67172e8293" class="indexterm-anchor"></a><a id="d67172e8297" class="indexterm-anchor"></a> <code class="codeph">INSTANCE_COUNT</code>属性是内部托管属性，包含资源当前具有的实例数。
                        </p>
                     </div>
                  </div><a id="CWADD92145"></a><div class="sect4"><a id="GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1" name="GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1"></a><h5 id="CWADD-GUID-DFB47E27-E348-4EF2-A9D2-A9E295A194A1" class="sect5">INTERNAL_STATE</h5>
                     <div>
                        <p><a id="d67172e8423" class="indexterm-anchor"></a><a id="d67172e8427" class="indexterm-anchor"></a>内部管理的只读属性，描述策略引擎当前在资源上执行的操作（如果有）。可能的值及其含义如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">STARTING</code> ：策略引擎当前正在启动资源</p>
                           </li>
                           <li>
                              <p><code class="codeph">STOPPING</code> ：策略引擎当前正在停止资源</p>
                           </li>
                           <li>
                              <p><code class="codeph">CLEANING</code> ：策略引擎当前正在清洁资源</p>
                           </li>
                           <li>
                              <p><code class="codeph">STABLE</code> ：策略引擎当前没有对资源执行任何操作</p>
                              <p>但请注意，资源仍可以作为其他命令的一部分进行锁定。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD91489"></a><div class="sect4"><a id="GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF" name="GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF"></a><h5 id="CWADD-GUID-606B2033-8DE4-4A85-BB4E-63FF125D3FEF" class="sect5">LAST_SERVER</h5>
                     <div>
                        <p><a id="d67172e8572" class="indexterm-anchor"></a><a id="d67172e8576" class="indexterm-anchor"></a>对于<code class="codeph">cluster_resource</code> -type资源，这是一个内部管理的只读属性，其中包含资源的上次<code class="codeph">start</code>操作成功的服务器的名称。
                        </p>
                        <p>对于<code class="codeph">local_resource</code> -type资源，这是固定资源实例的服务器的名称。
                        </p>
                     </div>
                  </div><a id="CWADD92146"></a><div class="sect4"><a id="GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377" name="GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377"></a><h5 id="CWADD-GUID-9B98CBA8-645C-4D02-813F-C7C7432C5377" class="sect5">LAST_STATE_CHANGE</h5>
                     <div>
                        <p><a id="d67172e8709" class="indexterm-anchor"></a><a id="d67172e8713" class="indexterm-anchor"></a>内部管理的只读属性，描述策略引擎何时注册资源的当前状态。请注意，这可能是资源状态更改时或策略引擎发现状态时的时间戳，如CRSD重新启动时发生的那样。
                        </p>
                     </div>
                  </div><a id="CWADD91468"></a><div class="sect4"><a id="GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D" name="GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D"></a><h5 id="CWADD-GUID-ACB872D2-8AF1-4BC7-A676-8BA1AD7CD59D" class="sect5">PROFILE_CHANGE_EVENT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e8836" class="indexterm-anchor"></a><a id="d67172e8840" class="indexterm-anchor"></a>这是<code class="codeph">ora.*</code>资源的内部管理属性。您无法编辑此属性。
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-5D3DB43E-E017-4461-A795-6779B3BBFC5B" name="GUID-5D3DB43E-E017-4461-A795-6779B3BBFC5B"></a><h5 id="CWADD-GUID-5D3DB43E-E017-4461-A795-6779B3BBFC5B" class="sect5">RESOURCE_LIST</h5>
                     <div>
                        <p>属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。</p>
                        <div class="section">
                           <p>将此属性与资源组一起使用。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD91490"></a><div class="sect4"><a id="GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955" name="GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955"></a><h5 id="CWADD-GUID-A3F96DC7-EFC0-4B28-A328-8BBA66E3C955" class="sect5">RESTART_COUNT</h5>
                     <div>
                        <p><a id="d67172e9095" class="indexterm-anchor"></a><a id="d67172e9099" class="indexterm-anchor"></a> Oracle Clusterware守护程序使用的内部管理属性，用于计算重新启动资源的尝试次数，从零开始到<code class="codeph">RESTART_ATTEMPTS</code>属性中指定的<code class="codeph">RESTART_ATTEMPTS</code> 。您无法编辑此属性。
                        </p>
                     </div>
                  </div><a id="CWADD92147"></a><div class="sect4"><a id="GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF" name="GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF"></a><h5 id="CWADD-GUID-BE5FA270-FDB6-453D-8B00-17B01BF9B1BF" class="sect5">州</h5>
                     <div>
                        <p>内部管理的属性，反映Oracle Clusterware报告的资源的当前状态。资源的状态可以是以下之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ONLINE</code> ：资源<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></code>联机状态，并且启用了资源监视（请参阅<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></code> ）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OFFLINE</code> ：资源处于脱机状态，如果已配置，则仅启用脱机资源监视（请参阅<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-441C06D9-18E9-4CA6-9D23-17FD54602171">OFFLINE_CHECK_INTERVAL</a></code> ）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">INTERMEDIATE</code> ：资源要么部分在线，要么已知在线之前和后续尝试确定其状态失败;资源监视已启用（请参阅<code class="codeph"><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></code> ）。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNKNOWN</code> ：资源无法管理，其当前状态未知;需要人工干预才能恢复运作。不监视此状态的资源。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD91479"></a><div class="sect4"><a id="GUID-DEA86F42-F78A-4BD0-854E-BE4627641968" name="GUID-DEA86F42-F78A-4BD0-854E-BE4627641968"></a><h5 id="CWADD-GUID-DEA86F42-F78A-4BD0-854E-BE4627641968" class="sect5">STATE_CHANGE_EVENT_TEMPLATE</h5>
                     <div>
                        <p><a id="d67172e9379" class="indexterm-anchor"></a><a id="d67172e9383" class="indexterm-anchor"></a>这是<code class="codeph">ora.*</code>资源的内部管理属性。您无法编辑此属性。
                        </p>
                     </div>
                  </div><a id="CWADD91491"></a><div class="sect4"><a id="GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F" name="GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F"></a><h5 id="CWADD-GUID-444604DE-7C8A-49C7-9BC7-C5A2FCCF495F" class="sect5">STATE_DETAILS</h5>
                     <div>
                        <p><a id="d67172e9508" class="indexterm-anchor"></a><a id="d67172e9512" class="indexterm-anchor"></a>内部管理的只读属性，包含有关资源状态的详细信息。
                        </p>
                        <p>四种资源状态 - <code class="codeph">ONLINE</code> ， <code class="codeph">OFFLINE</code> ， <code class="codeph">UNKNOWN</code>和<code class="codeph">INTERMEDIATE</code> - 可以映射到不同的特定于资源的值，例如已挂载，未挂载和打开。资源代理开发人员可以使用<code class="codeph">STATE_DETAILS</code>属性来提供此映射的更详细描述，资源到资源状态。
                        </p>
                        <p>提供细节是可选的。如果未提供详细信息，则Oracle Clusterware仅使用四种可能的资源状态。此外，如果代理无法提供这些详细信息（也可能发生在资源状态的值上），则Oracle Clusterware会设置此属性的值，以提供有关资源处于其当前状态的最低详细信息。</p>
                     </div>
                  </div><a id="CWADD91492"></a><div class="sect4"><a id="GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376" name="GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376"></a><h5 id="CWADD-GUID-1258C4A5-63A4-458C-832F-8EB2C20D9376" class="sect5">目标</h5>
                     <div>
                        <p><a id="d67172e9654" class="indexterm-anchor"></a><a id="d67172e9658" class="indexterm-anchor"></a>内部只读属性，用于描述所需的资源状态。但是，使用<code class="codeph">crsctl start</code> <span class="italic"><code class="codeph">resource_name</code></span>或<code class="codeph">crsctl stop</code> <span class="italic"><code class="codeph">resource_name</code></span>命令可能会影响此属性的值。
                        </p>
                     </div>
                  </div><a id="CWADD92677"></a><div class="sect4"><a id="GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7" name="GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7"></a><h5 id="CWADD-GUID-227AE398-98A2-480A-B4C5-CCADF3A7C7F7" class="sect5">TARGET_SERVER</h5>
                     <div>
                        <p><a id="d67172e9792" class="indexterm-anchor"></a><a id="d67172e9796" class="indexterm-anchor"></a>这是一个内部管理的属性，包含资源启动的服务器的名称。资源启动时，此值是相关的。
                        </p>
                     </div>
                  </div><a id="CWADD91485"></a><div class="sect4"><a id="GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE" name="GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE"></a><h5 id="CWADD-GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE" class="sect5">类型</h5>
                     <div>
                        <p><a id="d67172e9918" class="indexterm-anchor"></a><a id="d67172e9922" class="indexterm-anchor"></a>创建资源时指示的资源类型。创建资源时需要此属性，并且在创建资源后无法更改此属性。
                        </p>
                        <div class="infoboxnotealso" id="GUID-662A4A29-FD24-4D1B-B8C1-9ED939FA27FE__GUID-9247619B-0559-4363-95FA-2ACE3E22E09C">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware资源类型</a> ”</span>有关资源类型的详细信息</p>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92897"></a><div class="sect3"><a id="GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22" name="GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22"></a><h4 id="CWADD-GUID-1F6DCC68-2E8C-40F4-BCAD-9CA02B253F22" class="sect4">不推荐使用的资源属性</h4>
                  <div>
                     <p>Oracle Clusterware 12 <span class="italic">c</span>中不推荐使用以下资源属性：</p>
                  </div><a id="CWADD91449"></a><div class="sect4"><a id="GUID-AD966822-7D31-49CF-A25B-96C73F23F3DC" name="GUID-AD966822-7D31-49CF-A25B-96C73F23F3DC"></a><h5 id="CWADD-GUID-AD966822-7D31-49CF-A25B-96C73F23F3DC" class="sect5">学位</h5>
                     <div>
                        <p>可以在单个服务器上运行的群集资源的实例数。</p>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92006"></a><a id="CWADD91496"></a><a id="CWADD91497"></a><a id="CWADD91495"></a><div class="sect2"><a id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26" name="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26"></a><h3 id="CWADD-GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26" class="sect3">第三方应用程序的操作脚本示例</h3>
               <div>
                  <p>本节包括使用脚本代理的第三方应用程序的示例。</p>
                  <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDJABHC">示例B-2</a>显示了通过Apache Web服务器进行故障转移的操作脚本。
                  </p>
                  <div class="example" id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDJABHC">
                     <p class="titleinexample">示例B-2 Apache动作脚本</p><pre class="oac_no_warn" dir="ltr">＃！/ bin / sh HTTPDCONFLOCATION = / etc / httpd / conf / httpd.conf WEBPAGECHECK = http：// &lt;MyVIP&gt;：80 / icons / apache_pb.gif case'1 in'start'）/ usr / sbin / apachectl -k start  - f $ HTTPDCONFLOCATION RET = $？;;睡觉（10）;; 'stop'）/ usr / sbin / apachectl -k stop RET = $？;; 'clean'）/ usr / sbin / apachectl -k stop RET = $？;; 'check'）/ usr / bin / wget -q --delete-after $ WEBPAGECHECK RET = $？;; *）RET = 0 ;; esac＃0：成功; 1：如果[$ RET -eq 0]错误;然后退出0，否则退出1 fi</pre></div>
                  <!-- class="example" -->
                  <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDCDGHF">示例B-3</a>显示了<span class="bold">xclock</span>脚本，它是一个简单的动作脚本，在所有Linux和UNIX平台上都使用<code class="codeph">xclock</code>作为默认二进制文件。
                  </p>
                  <div class="example" id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDCDGHF">
                     <p class="titleinexample">示例B-3 xclock动作脚本</p><pre class="oac_no_warn" dir="ltr">＃！/ bin / bash #start / stop / check for xclock example＃要测试此更改BIN_DIR到xclock所基于的目录＃并将DISPLAY变量设置为网络中的服务器。BIN_DIR = / usr / X11R6 / bin LOG_DIR = / tmp BIN_NAME = xclock DISPLAY = yourhost.domain.com:0.0 export DISPLAY exit_code = 0 if [！ -d $ BIN_DIR]然后echo“start failed”退出2 fi PID1 =`ps -ef | grep $ BIN_NAME | grep -v grep | grep -v xclock_app | awk'{print $ 2}'`case $ 1 in'start'）if [“$ PID1”！=“”]然后status_p1 =“正在运行”否则如果[-x $ BIN_DIR / $ BIN_NAME]则umask 002 $ {BIN_DIR} / $ {BIN_NAME}＆2&gt; $ {LOG_DIR} / $ {BIN_NAME} .log status_p1 =“启动“else echo`basename $ 0`”：$ BIN_NAME：找不到可执行文件“exit_code = 1 fi fi echo”$ BIN_NAME：$ status_p1“exit $ exit_code ;; 'stop'）if [“$ {PID1}”！=“”]然后kill -9 $ {PID1} &amp;&amp; echo“$ BIN_NAME守护程序被杀死”否则回显“$ BIN_NAME：没有正在运行的进程！“fi exit $ exit_code ;;'check'）if [”$ PID1“！=“”]然后echo“running”退出0 else echo“not running”exit 1 fi ;; *）echo“Usage：”`basename $ 0`“{start | stop | check}”;; ESAC</pre></div>
                  <!-- class="example" -->
                  <p><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDGJFJG">示例B-4</a>显示了代理程序监视文件的shell脚本示例。启动代理程序时，它会创建文件（通过属性指定），并在停止时删除文件。CHECK操作仅包括检查文件是否存在。带有<code class="codeph">_CRS_</code>前缀的变量是在其环境中提供给脚本的属性值。
                  </p>
                  <div class="example" id="GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26__CHDGJFJG">
                     <p class="titleinexample">示例B-4动作脚本示例</p><pre class="oac_no_warn" dir="ltr">＃！/ bin / sh TOUCH = / bin / touch RM = / bin / rm PATH_NAME = / tmp / $ _ CRS_NAME ##这些消息进入CRSD代理日志文件。echo“*******`date` **********”echo“资源[$ _ CRS_NAME]的动作脚本'$ _CRS_ACTION_SCRIPT'要求行动$ 1”＃case“$ 1”in'start '）echo“START入口点已被调用..”echo“创建文件：$ PATH_NAME”$ TOUCH $ PATH_NAME退出0 ;; 'stop'）echo“STOP入口点已被调用..”echo“正在删除文件：$ PATH_NAME”$ RM $ PATH_NAME退出0 ;; 'check'）echo“CHECK入口点已被调用..”如果[-e $ PATH_NAME];然后回显“Check  -  SUCCESS”退出0否则回显“Check  -  FAILED”退出1 fi ;; 'clean'）echo“CLEAN入口点已被调用..”echo“正在删除文件：$ PATH_NAME”$ RM -f $ PATH_NAME退出0 ;; ESAC</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03800.in-memory-column-store-architecture.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously."></meta>
      <meta name="description" content="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously."></meta>
      <title>内存列存储架构</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database In-Memory Guide"></meta>
      <meta property="og:description" content="The In-Memory Column Store (IM column store) stores tables and partitions in memory using a columnar format optimized for rapid scans. Oracle Database uses a sophisticated architecture to manage data in columnar and row formats simultaneously."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database In-Memory Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00"></meta>
      <meta name="dcterms.title" content="Database In-Memory Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96137-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="intro-to-in-memory-column-store.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-the-im-column-store.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="intro-to-in-memory-column-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-the-im-column-store.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库内存指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="concepts-for-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">Oracle数据库内存概念</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">内存列存储架构</li>
            </ol>
            <a id="GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" name="GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224"></a>
            
            <h2 id="INMEM-GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" class="sect2"><span class="enumeration_chapter">2</span>内存中列存储架构</h2>
         </header>
         <div class="ind">
            <div>
               <p><span class="bold">内存中列存储</span> （IM列存储）使用针对快速扫描优化的<span class="bold">柱形格式</span>将表和分区存储在内存中。Oracle数据库使用复杂的体系结构同时管理柱形和行格式的数据。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-FF2499C5-C582-496A-B547-CFE49C84185E">双格式：列和行</a><br>启用IM列存储时，SGA在不同位置管理数据：内存区域和数据库缓冲区高速缓存。
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1">内存存储单元</a><br>IM列存储以优化的存储单元管理数据和元数据，而不是传统的Oracle数据块。
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757">表达式统计存储（ESS）</a><br><strong class="term">表达式统计信息存储（ESS）</strong>是由优化程序维护的存储库，用于存储有关表达式评估的统计信息。ESS驻留在SGA中并保留在磁盘上。
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2">内存中流程架构</a><br>为了响应查询和DML，服务器进程扫描列数据并更新SMU元数据。后台进程将行数据从磁盘填充到IM列存储中。
                  </li>
                  <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310">CPU架构：SIMD矢量处理</a><br>对于在IM列存储中填充的数据，数据库使用SIMD（单指令，多数据）向量处理。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="concepts-for-the-im-column-store.html#GUID-5A72B48A-8427-41AE-9220-E46042BC90C4" title="本部分介绍Oracle数据库内存（Database In-Memory）功能集，并说明内存中列存储（IM列存储）的基本体系结构。">Oracle数据库内存中概念</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-FF2499C5-C582-496A-B547-CFE49C84185E" name="GUID-FF2499C5-C582-496A-B547-CFE49C84185E"></a><h3 id="INMEM-GUID-FF2499C5-C582-496A-B547-CFE49C84185E" class="sect3"><span class="enumeration_section">2.1</span>双格式：列和行</h3>
               <div>
                  <p>启用IM列存储时，SGA在不同位置管理数据：内存区域和数据库缓冲区高速缓存。</p>
                  <p>IM列存储以列式格式对数据进行编码：每列是单独的结构。这些列是连续存储的，可以优化它们以进行分析查询。数据库缓冲区高速缓存可以修改也在IM列存储中填充的对象。但是，缓冲区缓存以传统的行格式存储数据。数据块连续存储行，为事务优化它们。</p>
                  <p>下图说明了基于行的存储和列式存储之间的区别。</p>
                  <div class="figure" id="GUID-FF2499C5-C582-496A-B547-CFE49C84185E__GUID-D12E234B-F0E5-49BD-B891-ED7A9F4643B2">
                     <p class="titleinfigure">图2-1基于列和行的存储</p><img src="img/inmem_3v_012.png" alt="下面描述图2-1" title="下面描述图2-1" longdesc="img_text/inmem_3v_012.html"><br><a href="img_text/inmem_3v_012.html">“图2-1柱状和行存储”的描述</a></div>
                  <!-- class="figure" -->
                  <p>本节创建以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-2D072622-139C-4617-88ED-F07D530B8E1E">内存区域中的列数据</a><br><strong class="term">内存区域</strong>是一个可选的SGA组件，包含IM列存储。
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6">数据库缓冲区高速缓存中的行数据</a><br>无论是启用还是禁用IM列存储，数据库缓冲区高速缓存都以相同的方式存储和处理数据块。缓冲区I / O和缓冲池的功能相同。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="内存中列存储（IM列存储）使用针对快速扫描优化的柱形格式将表和分区存储在内存中。Oracle数据库使用复杂的体系结构同时管理柱形和行格式的数据。">内存中列存储架构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-2D072622-139C-4617-88ED-F07D530B8E1E" name="GUID-2D072622-139C-4617-88ED-F07D530B8E1E"></a><h4 id="INMEM-GUID-2D072622-139C-4617-88ED-F07D530B8E1E" class="sect4"><span class="enumeration_section">2.1.1</span>内存区域中的列数据</h4>
                  <div>
                     <p><strong class="term">内存区域</strong>是一个可选的SGA组件，包含IM列存储。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09">内存区域的大小</a><br>内存区域由<code class="codeph">INMEMORY_SIZE</code>初始化参数控制。默认情况下，内存区域的大小为0，这意味着禁用了IM列存储。
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8">内存区域中的内存池</a><br>内存区域分为子列，用于列数据和元数据。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-FF2499C5-C582-496A-B547-CFE49C84185E" title="启用IM列存储时，SGA在不同位置管理数据：内存区域和数据库缓冲区高速缓存。">双格式：列和行</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09" name="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09"></a><h5 id="INMEM-GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09" class="sect5"><span class="enumeration_section">2.1.1.1</span>内存区域的大小</h5>
                     <div>
                        <p>内存区域由<code class="codeph">INMEMORY_SIZE</code>初始化参数控制。默认情况下，内存区域的大小为0，这意味着禁用了IM列存储。
                        </p>
                        <p>要启用IM列存储，请将内存区域设置为至少100 MB。尺寸以<code class="codeph">V$SGA</code> 。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-4C7789E3-082A-4CC4-8C94-D930183EC920">内存区域和SGA_TARGET</p>
                           <p>从<code class="codeph">SGA_TARGET</code>初始化参数设置中减去内存区域。例如，如果将<code class="codeph">SGA_TARGET</code>设置为10 GB，并且将<code class="codeph">INMEMORY_SIZE</code>设置为4 GB，则将<code class="codeph">SGA_TARGET</code>设置的40％分配给内存区域。下图说明了这种关系。
                           </p>
                           <div class="figure" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-E78F7C9F-2719-49C1-BC10-B8C2BF0C58ED">
                              <p class="titleinfigure">图2-2 INMEMORY_SIZE和SGA_TARGET</p><img id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__IMAGE_OPT_ZLQ_JHB" src="img/inmem_3v_017.png" alt="下面是图2-2的描述" title="下面是图2-2的描述" longdesc="img_text/inmem_3v_017.html"><br><a href="img_text/inmem_3v_017.html">“图2-2 INMEMORY_SIZE和SGA_TARGET”的描述</a></div>
                           <!-- class="figure" -->
                           <p>与SGA的其他组件（包括缓冲区高速缓存和共享池）不同，内存区域大小不受自动内存管理控制。当缓冲区高速缓存或共享池需要更多内存时，数据库不会自动缩小内存区域，或者当空间不足时增加内存区域。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-2CB4368C-52C6-4DD3-9836-E08424919F3C">动态调整内存区域的大小</p>
                           <p>从<span>Oracle Database 12c</span>第2版（12.2）开始，您可以使用<code class="codeph">ALTER SYSTEM</code>语句动态增加<code class="codeph">INMEMORY_SIZE</code> 。满足以下条件时，数据库会分配增加的内存：</p>
                           <ul id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__UL_CKG_FMQ_JHB" style="list-style-type:disc">
                              <li>
                                 <p>SGA提供可用内存。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">INMEMORY_SIZE</code>的新大小至少比当前设置大128 MB。
                                 </p>
                                 <div class="infoboxnote" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-A27A9DCE-E50E-454B-A0A7-3D9D016A6BEE">
                                    <p class="notep1">注意：</p>
                                    <p>您不能使用<code class="codeph">ALTER SYSTEM</code>来减少<code class="codeph">INMEMORY_SIZE</code> 。</p>
                                 </div>
                              </li>
                           </ul>
                           <p><code class="codeph">V$INMEMORY_AREA</code>和<code class="codeph">V$SGA</code>视图立即反映了这一变化。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-D2F123B0-1704-4709-877A-BB17A38711D1">多租户环境中的内存区域</p>
                           <p>在CDB中，IM列存储的大小由CDB根目录中的<code class="codeph">INMEMORY_SIZE</code>参数设置。默认情况下，IM列存储在PDB之间共享。因此，PDB可以通过消耗可用内存来“饿死”其他PDB。
                           </p>
                           <p>在PDB中，您可以使用<code class="codeph">ALTER SYSTEM SET INMEMORY_SIZE</code>限制内存消耗。例如，在CDB级别，您可以将<code class="codeph">INMEMORY_SIZE</code>设置为<code class="codeph">20G</code> ，然后按如下方式配置PDB：</p>
                           <ul id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__UL_VYM_TNQ_JHB" style="list-style-type:disc">
                              <li>
                                 <p>在<code class="codeph">hrpdb</code> ，将<code class="codeph">INMEMORY_SIZE</code>设置为<code class="codeph">0</code></p>
                              </li>
                              <li>
                                 <p>在<code class="codeph">salespdb</code> ，将<code class="codeph">INMEMORY_SIZE</code>设置为<code class="codeph">10G</code></p>
                              </li>
                              <li>
                                 <p>在<code class="codeph">oepdb</code> ，将<code class="codeph">INMEMORY_SIZE</code>设置为<code class="codeph">11G</code></p>
                              </li>
                           </ul>
                           <p>在前面的示例中，PDB级别的<code class="codeph">INMEMORY_SIZE</code>设置<code class="codeph">INMEMORY_SIZE</code>达到<code class="codeph">21G</code> ，即使CDB级别的<code class="codeph">INMEMORY_SIZE</code>仅为<code class="codeph">20G</code> 。超额订阅可确保在关闭或拔出PDB时不会浪费IM列存储中的宝贵空间。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-C5D36B41-A8C7-4A09-A9B1-55748922EC09__UL_AKZ_GMQ_JHB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“动态<a href="enabling-the-im-column-store.html#GUID-48581A2D-1650-410D-8E02-1D8250CCDBED" title="如果IM列存储需要更多内存，则可以动态增加其大小。">增加IM列存储的大小</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-memory.html#GUID-8F54391B-D42A-4FDA-9D12-E1F81FD113EA" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关自动内存管理的更多信息</p>
                              </li>
                              <li>
                                 <p><span><cite>Oracle Database Reference</cite></span>了解<a href="../refrn/INMEMORY_SIZE.html#GUID-B5BEB6BF-5308-485F-920D-CBB584DDDE8F" target="_blank"><code class="codeph">INMEMORY_SIZE</code></a> ， <a href="../refrn/V-INMEMORY_AREA.html#GUID-EDC517A6-FF55-4294-B348-032A3FC498EB" target="_blank"><code class="codeph">V$INMEMORY_AREA</code></a>和<a href="../refrn/V-SGA.html#GUID-4E216A4C-5C7E-43F6-8E2C-CDE442A1CEEC" target="_blank"><code class="codeph">V$SGA</code></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-2D072622-139C-4617-88ED-F07D530B8E1E" title="内存区域是一个可选的SGA组件，包含IM列存储。">内存区域中的列数据</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8" name="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8"></a><h5 id="INMEM-GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8" class="sect5"><span class="enumeration_section">2.1.1.2</span>内存区域中的内存池</h5>
                     <div>
                        <p>内存区域分为子列，用于列数据和元数据。</p>
                        <p>内存区域细分为以下子池：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="glossary.html#GUID-3259010C-D7F2-4AA8-95CB-ED1E3908EA0D"><span class="xrefglossterm">柱状数据池</span></a></p>
                              <p>该子池存储包含柱状数据的IMCU。<code class="codeph">V$INMEMORY_AREA.POOL</code>列将此子<code class="codeph">1MB POOL</code>标识为<code class="codeph">1MB POOL</code> ，如<a href="in-memory-column-store-architecture.html#GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-4B237F25-BD87-4A64-8A99-C35091631C85">示例2-1</a>所示。
                              </p>
                           </li>
                           <li>
                              <p><a href="glossary.html#GUID-464A0659-4527-4730-A1A8-9D94B0A3B1DE"><span class="xrefglossterm">元数据池</span></a></p>
                              <p>此子池存储有关驻留在IM列存储中的对象的元数据。<code class="codeph">V$INMEMORY_AREA.POOL</code>列将此子<code class="codeph">64KB POOL</code>标识为<code class="codeph">64KB POOL</code> ，如<a href="in-memory-column-store-architecture.html#GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-4B237F25-BD87-4A64-8A99-C35091631C85">例2-1</a>所示。
                              </p>
                           </li>
                        </ul>
                        <div class="figure" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-713DCAE4-82DD-4C0D-901F-52F9985B2257">
                           <p class="titleinfigure">图2-3内存区域中的子池</p><img src="img/cncpt_vm_380.png" alt="下面是图2-3的描述" title="下面是图2-3的描述" longdesc="img_text/cncpt_vm_380.html"><br><a href="img_text/cncpt_vm_380.html">“图2-3内存区域中的子池”的描述</a></div>
                        <!-- class="figure" -->
                        <p>数据库使用内部启发式确定两个子池的相对大小。数据库将内存区域中的大部分空间分配给列式数据池（1 MB池）。</p>
                        <div class="infoboxnote" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-E350FF1C-FFB6-4C12-80C0-15BDF108517C">
                           <p class="notep1">注意：</p>
                           <p>Oracle数据库自动确定子池大小。您无法更改空间分配。</p>
                        </div>
                        <div class="example" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-4B237F25-BD87-4A64-8A99-C35091631C85">
                           <p class="titleinexample">示例2-1 V $ INMEMORY_AREA视图</p>
                           <p>此示例查询<code class="codeph">V$INMEMORY_AREA</code>视图以确定每个子池中的可用内存量（包括样本输出）：</p><pre class="pre codeblock"><code>COL POOL FORMAT a9 COL POPULATE_STATUS格式a15 SSELECT POOL，TRUNC（ALLOC_BYTES /（1024 * 1024 * 1024），2）“ALLOC_GB”，TRUNC（USED_BYTES /（1024 * 1024 * 1024），2）“USED_GB”，POPULATE_STATUS FROM V $ INMEMORY_AREA; POOL ALLOC_GB USED_GB POPULATE_STATUS --------- ---------- ---------- --------------- 1MB POOL 7.99 0完成64KB POOL 1.98 0完成</code></pre><p>内存区域的当前大小在<code class="codeph">V$SGA</code>可见：</p><pre class="pre codeblock"><code>SELECT NAME，VALUE /（1024 * 1024 * 1024）“SIZE_IN_GB”FROM V $ SGA WHERE NAME LIKE'％Mem％'; NAME SIZE_IN_GB -------------------- ---------- In-Memory Area 10</code></pre><p>在此示例中，分配给子池的内存为9.97 GB，而内存区域的大小为10 GB。数据库使用一小部分内存用于内部管理结构。</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-74B9B6CD-CF94-4883-ABF0-8EFCE4E69BC8__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                           <p class="notep1">也可以看看：</p><a href="../refrn/V-INMEMORY_AREA.html#GUID-EDC517A6-FF55-4294-B348-032A3FC498EB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$INMEMORY_AREA</code></div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-2D072622-139C-4617-88ED-F07D530B8E1E" title="内存区域是一个可选的SGA组件，包含IM列存储。">内存区域中的列数据</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6" name="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6"></a><h4 id="INMEM-GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6" class="sect4"><span class="enumeration_section">2.1.2</span>数据库缓冲区高速缓存中的行数据</h4>
                  <div>
                     <p>无论是启用还是禁用IM列存储，数据库缓冲区高速缓存都以相同的方式存储和处理数据块。缓冲区I / O和缓冲池的功能相同。</p>
                     <p>IM列存储使数据能够以传统的行格式（缓冲区缓存）和列式格式同时填充在SGA中。数据库透明地将OLTP查询（例如主键查找）发送到缓冲区高速缓存，并将分析和报告查询发送到IM列存储。在获取数据时，Oracle数据库还可以从同一查询中的两个内存区域读取数据。</p>
                     <div class="infoboxnote" id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6__GUID-8B772890-5222-4FCC-848B-C376707C3906">
                        <p class="notep1">注意：</p>
                        <p>在执行计划中，操作<code class="codeph">TABLE ACCESS IN MEMORY FULL</code>指示在IM列存储中访问一些或所有数据。
                        </p>
                     </div>
                     <p>双格式架构不会使内存要求增加一倍。缓冲区缓存经过优化，运行时的大小远小于数据库的大小。</p>
                     <p>下图显示了一个示例IM列存储。数据库以传统的行格式将<code class="codeph">sh.sales</code>表存储在磁盘上。SGA以列式格式将数据存储在IM列存储中，并以行格式存储在数据库缓冲区高速缓存中。
                     </p>
                     <div class="figure" id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6__BGBEFJBH">
                        <p class="titleinfigure">图2-4 IM列存储</p><img src="img/cncpt_vm_379.png" width="540" alt="下面是图2-4的描述" title="下面是图2-4的描述" longdesc="img_text/cncpt_vm_379.html"><br><a href="img_text/cncpt_vm_379.html">“图2-4 IM列存储”的描述</a></div>
                     <!-- class="figure" -->
                     <p>IM列存储支持永久堆组织表的每个磁盘数据格式。列式格式不会影响存储在数据文件或缓冲区缓存中的数据格式，也不会影响撤消数据和联机重做日志记录。</p>
                     <p>通过更新缓冲区缓存，联机重做日志和撤消表空间，数据库以相同的方式处理DML修改，无论是否启用了IM列存储。但是，数据库使用内部机制来跟踪更改并确保IM列存储与数据库的其余部分保持一致。例如，如果在IM列存储中填充了<code class="codeph">sales</code>表，并且如果应用程序更新了<code class="codeph">sales</code>的行，则数据库会自动保持IM列存储中的<code class="codeph">sales</code>表的副本在事务上保持一致。访问IM列存储的查询始终返回访问缓冲区高速缓存的查询的相同结果。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6__GUID-39A46614-F669-4EF9-B92D-82CC4B56AC94">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-4FF66585-E469-4631-9225-29D75594CD14" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解有关数据库缓冲区缓存的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-FF2499C5-C582-496A-B547-CFE49C84185E" title="启用IM列存储时，SGA在不同位置管理数据：内存区域和数据库缓冲区高速缓存。">双格式：列和行</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" name="GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1"></a><h3 id="INMEM-GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" class="sect3"><span class="enumeration_section">2.2</span>内存存储单元</h3>
               <div>
                  <p>IM列存储以优化的存储单元管理数据和元数据，而不是传统的Oracle数据块。</p>
                  <p>Oracle数据库维护内存区域中的存储单元。下图概述了内存区域以及与之交互的数据库进程。其余章节描述了各种内存组件。</p>
                  <div class="figure" id="GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1__GUID-FDB37040-B670-4D1E-96D0-9357E9117F95">
                     <p class="titleinfigure">图2-5 IM列存储：内存和进程体系结构</p><img src="img/inmem_3v_013.png" alt="下面是图2-5的描述" title="下面是图2-5的描述" longdesc="img_text/inmem_3v_013.html"><br><a href="img_text/inmem_3v_013.html">“图2-5 IM列存储：存储器和进程架构”的描述</a></div>
                  <!-- class="figure" -->
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE">内存中压缩单元（IMCU）</a><br><strong class="term">内存中压缩单元（IMCU）</strong>是一个压缩的只读存储单元，包含一列或多列的数据。
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2">快照元数据单元（SMU）</a><br>快照元数据单元（SMU）包含关联的IMCU的元数据和事务信息。</li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-E1A74436-E719-4FC3-A141-41B160792E51">内存表达单元（IMEU）</a><br><span class="bold">内存中表达单元</span> （IMEU）是物化<span class="bold">内存表达式</span> （IM表达式）和用户定义虚拟列的存储容器。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="内存中列存储（IM列存储）使用针对快速扫描优化的柱形格式将表和分区存储在内存中。Oracle数据库使用复杂的体系结构同时管理柱形和行格式的数据。">内存中列存储架构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" name="GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE"></a><h4 id="INMEM-GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" class="sect4"><span class="enumeration_section">2.2.1</span>内存中压缩单元（IMCU）</h4>
                  <div>
                     <p><strong class="term">内存中压缩单元（IMCU）</strong>是一个压缩的只读存储单元，包含一列或多列的数据。
                     </p>
                     <p>IMCU类似于表空间范围。IMCU有两部分：一组列压缩单元（CU），以及包含元数据（如<a href="glossary.html#GUID-B9859425-36BD-40B7-9F9D-FA52CD215B69"><span class="xrefglossterm">IM存储索引</span></a> ）的标头。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8">IMCU和模式对象</a><br>IM列存储将一个对象（表，分区，物化视图）的数据存储在一组IMCU中。IMCU存储一个且仅一个对象的列数据。
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7">列压缩单元（CU）</a><br><span class="bold">列压缩单元（CU）</span>是IMCU中单个列的连续存储。每个IMCU都有一个或多个CU。
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-A38FF2B6-506E-412A-9FE5-1CE709556379">内存存储索引</a><br>每个IMCU标头都会自动为其CU创建和管理<span class="bold">内存存储索引</span> （IM存储索引）。IM存储索引存储IMCU中所有列的最小值和最大值。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" title="IM列存储以优化的存储单元管理数据和元数据，而不是传统的Oracle数据块。">内存存储单元</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" name="GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8"></a><h5 id="INMEM-GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" class="sect5"><span class="enumeration_section">2.2.1.1</span> IMCU和模式对象</h5>
                     <div>
                        <p>IM列存储将一个对象（表，分区，物化视图）的数据存储在一组IMCU中。IMCU存储一个且仅一个对象的列数据。</p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41">IMCU和INMEMORY列</a><br>对于指定为<code class="codeph">INMEMORY</code>的对象， <code class="codeph">INMEMORY</code>子句中列出的每个列都包含在每个IMCU中。</li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED">内存中压缩</a><br>IM列存储使用针对访问速度优化的特殊压缩格式，而不是存储减少。列式格式使查询能够直接针对压缩列执行。
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F">IMCU和行</a><br>每个IMCU包含表段中行的子集的所有列值（包括空值）。行的子集称为<span class="italic">粒度</span> 。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="内存中压缩单元（IMCU）是一个压缩的只读存储单元，包含一列或多列的数据。">内存中压缩单元（IMCU）</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41" name="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41"></a><h6 id="INMEM-GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41" class="sect6"><span class="enumeration_section">2.2.1.1.1</span> IMCU和INMEMORY列</h6>
                        <div>
                           <p>对于指定为<code class="codeph">INMEMORY</code>的对象， <code class="codeph">INMEMORY</code>子句中列出的每个列都包含在每个IMCU中。</p>
                           <p>例如， <code class="codeph">sh.sales</code>表有7列。以下DDL语句将表指定为<code class="codeph">INMEMORY</code> ，这意味着每个<code class="codeph">sales</code> IMCU都包含这7列的列数据：</p><pre class="pre codeblock"><code>ALTER TABLE sh.sales INMEMORY MEMCOMPRESS for QUERY LOW;</code></pre><div class="section">
                              <p class="subhead3" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__GUID-6A346F9B-6E35-4064-8211-D0E68DFF685D">INMEMORY对象中没有INMEMORY列</p>
                              <p>您可以指定<code class="codeph">INMEMORY</code>表中的某些列但不是所有列都具有<code class="codeph">INMEMORY</code>属性。例如， <code class="codeph">sh.customers</code>表有23列。以下DDL语句指定<code class="codeph">sh.customers</code>中的15个列具有<code class="codeph">NO INMEMORY</code>属性，这意味着表中的其他8列具有<code class="codeph">INMEMORY</code>属性：</p><pre class="pre codeblock"><code>ALTER TABLE sh.customers INMEMORY MEMCOMPRESS for QUERY LOW NO INMEMORY（cust_gender，cust_year_of_birth，cust_marital_status，cust_postal_code，cust_city，cust_state_province，cust_main_phone_number，cust_income_level，cust_credit_limit，cust_email，cust_total，cust_total_id，cust_eff_from，cust_eff_to，cust_valid）;</code></pre><p>以下查询显示<code class="codeph">sh.customers</code>列的压缩级别，指示哪些<code class="codeph">NO INMEMORY</code> ：</p><pre class="pre codeblock"><code>SET LINESIZE 200 COL TABLE_NAME FORMAT a25 COL SEG_COL_ID FORMAT 999 COL COLUMN_NAME FORMAT a25 COL INMEMORY_COMPRESSION FORMAT a11 SELECT SEGMENT_COLUMN_ID AS“SEG_COL_ID”，COLUMN_NAME，INMEMORY_COMPRESSION FROM V $ IM_COLUMN_LEVEL WHERE TABLE_NAME ='CUSTOMERS'ORDER by SEG_COL_ID; SEG_COL_ID COLUMN_NAME INMEMORY_CO ---------- ------------------------- ----------- 1 CUST_ID DEFAULT 2 CUST_FIRST_NAME DEFAULT 3 CUST_LAST_NAME DEFAULT 4 CUST_GENDER NO INMEMORY 5 CUST_YEAR_OF_BIRTH NO INMEMORY 6 CUST_MARITAL_STATUS NO INMEMORY 7 CUST_STREET_ADDRESS DEFAULT 8 CUST_POSTAL_CODE NO INMEMORY 9 CUST_CITY NO INMEMORY 10 CUST_CITY_ID DEFAULT 11 cust_state_province两个NO INMEMORY 12 CUST_STATE_PROVINCE_ID DEFAULT 13 COUNTRY_ID DEFAULT 14 CUST_MAIN_PHONE_NUMBER NO INMEMORY 15 CUST_INCOME_LEVEL没有INMEMORY 16 CUST_CREDIT_LIMIT NO INMEMORY 17 CUST_EMAIL NO INMEMORY 18 CUST_TOTAL NO INMEMORY 19 CUST_TOTAL_ID NO INMEMORY 20 CUST_SRC_ID DEFAULT 21 CUST_EFF_FROM NO INMEMORY 22 CUST_EFF_TO NO INMEMORY 23 CUST_VALID NO INMEMORY</code></pre><p>下图显示了IM列存储中填充的<code class="codeph">sh</code>模式中的三个表： <code class="codeph">customers</code> ， <code class="codeph">products</code>和<code class="codeph">sales</code> 。在此示例中，每个表都具有指定<code class="codeph">INMEMORY</code>的不同列<code class="codeph">INMEMORY</code> 。每个表的<code class="codeph">INMEMORY</code>仅包含<code class="codeph">INMEMORY</code>列的数据。
                              </p>
                              <div class="figure" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__BGBJCAIB">
                                 <p class="titleinfigure">图2-6列和IMCU</p><img id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__IMAGE_W4T_MS4_LHB" src="img/cncpt_vm_378.png" alt="下面是图2-6的描述" title="下面是图2-6的描述" longdesc="img_text/cncpt_vm_378.html"><br><a href="img_text/cncpt_vm_378.html">“图2-6列和IMCU”的说明</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__GUID-1B5444AC-CD3B-4782-A673-BD5564033FC8">引用NO INMEMORY列的查询</p>
                              <p>当查询引用<code class="codeph">NO INMEMORY</code>列时，表扫描将从行存储中检索数据，而不是从IM列存储中的IMCU检索数据。即使查询中引用的所有其他列都填充了<code class="codeph">INMEMORY</code>列，也会发生行存储访问。
                              </p>
                              <p>例如，假设<code class="codeph">customers</code>表填充到IM列存储中。<code class="codeph">cust_id</code>和<code class="codeph">cust_last_name</code>列指定为<code class="codeph">INMEMORY</code> ，但<code class="codeph">cust_postal_code</code>列指定为<code class="codeph">NO INMEMORY</code> 。您发出以下查询：</p><pre class="pre codeblock"><code>SELECT cust_id，cust_last_name，cust_postal_code FROM customers WHERE cust_id &lt;5001 ORDER BY cust_id;</code></pre><p>在这种情况下，即使<code class="codeph">cust_postal_code</code>是查询中引用的唯一<code class="codeph">NO INMEMORY</code>列，数据库也会访问行存储而不是IM列存储。以下查询在谓词中具有<code class="codeph">cust_postal_code</code>但不包含<code class="codeph">SELECT</code>列表，还必须访问行存储：</p><pre class="pre codeblock"><code>SELECT cust_id，cust_last_name FROM customers WHERE cust_postal_code = 77501 ORDER BY cust_id;</code></pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__GUID-78C230E9-D084-4D55-81E8-BF318D242D71">
                              <p class="notep1">也可以看看：</p>
                              <ul id="GUID-EF783480-CF7A-40B9-8824-11AD3EDFEF41__UL_ACJ_2V4_LHB" style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="populating-objects-in-memory.html#GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617" title="对于内部表，内存中的虚拟列（IM虚拟列）和非虚拟列都符合IM填充的条件。对于外部表，只有非虚拟列才符合条件。">关于启用INMEMORY列</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://blogs.oracle.com/in-memory/what-happens-if-a-column-is-not-populated" target="_blank">https://blogs.oracle.com/in-memory/what-happens-if-a-column-is-not-populated</a>用于访问未在IM列存储中填充的列的博客条目</p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解<code class="codeph">ALTER TABLE</code>语句</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" title="IM列存储将一个对象（表，分区，物化视图）的数据存储在一组IMCU中。IMCU存储一个且仅一个对象的列数据。">IMCU和模式对象</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED" name="GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED"></a><h6 id="INMEM-GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED" class="sect6"><span class="enumeration_section">2.2.1.1.2</span>内存中压缩</h6>
                        <div>
                           <p>IM列存储使用针对访问速度优化的特殊压缩格式，而不是存储减少。列式格式使查询能够直接针对压缩列执行。</p>
                           <p>压缩使扫描和过滤操作能够处理更少量的数据，从而优化查询性能。Oracle数据库仅在结果集需要时解压缩数据。</p>
                           <p>IM列存储中应用的压缩与混合列压缩密切相关。两种技术都处理列向量。主要区别在于IM列存储的列向量针对SIMD向量处理进行了优化，而混合列压缩的列向量针对磁盘存储进行了优化。</p>
                           <p>当您为IM列存储启用填充对象时，可以在<code class="codeph">INMEMORY</code>子句中指定压缩类型： <code class="codeph">FOR DML</code> ， <code class="codeph">FOR QUERY</code> （ <code class="codeph">LOW</code>或<code class="codeph">HIGH</code> ）， <code class="codeph">FOR CAPACITY</code> （ <code class="codeph">LOW</code>或<code class="codeph">HIGH</code> ）或<code class="codeph">NONE</code> 。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED__GUID-78432B01-CDB7-4B10-BE07-E5090D01273C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="使用DDL语句中的INMEMORY子句指定哪些对象有资格进入IM列存储。您可以启用表空间，表（内部和外部），分区和物化视图。">对记忆中人口的控制</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../cncpt/tables-and-table-clusters.html#GUID-901A054B-B47F-4ADF-A57B-2074EBB85341" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解有关混合列压缩的更多信息</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" title="IM列存储将一个对象（表，分区，物化视图）的数据存储在一组IMCU中。IMCU存储一个且仅一个对象的列数据。">IMCU和模式对象</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F" name="GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F"></a><h6 id="INMEM-GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F" class="sect6"><span class="enumeration_section">2.2.1.1.3</span> IMCU和行</h6>
                        <div>
                           <p>每个IMCU包含表段中行的子集的所有列值（包括空值）。行的子集称为<span class="italic">粒度</span> 。
                           </p>
                           <p>给定段的所有IMCU包含大致相同的行数。Oracle数据库根据数据类型，数据格式和压缩类型自动确定粒度的大小。较高的压缩级别会导致IMCU中的行数增加。</p>
                           <p>IMCU和一组数据库块之间存在一对多映射。如<a href="in-memory-column-store-architecture.html#GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F__GUID-C6CBB52C-9E9C-42BB-9C91-1BD37B73254D">例2-2所示</a> ，每个IMCU存储不同块集的列值。
                           </p>
                           <p>IMCU中的列未排序。Oracle数据库按照从磁盘读取的顺序填充它们。</p>
                           <p>IMCU中的行数决定了IMCU消耗的空间量。如果目标行数导致IMCU增长超过1 MB池中可用的连续1 MB扩展区的数量，则IMCU会创建其他扩展区（块）以保留其余列CU。IMCU始终以1 MB为增量分配空间。</p>
                           <div class="example" id="GUID-C1CAECB5-87F3-49E4-9F90-488A6834764F__GUID-C6CBB52C-9E9C-42BB-9C91-1BD37B73254D">
                              <p class="titleinexample">例2-2 IMCU和行子集</p>
                              <p>在此简化示例中，只有<code class="codeph">customers</code>表的以下4列具有<code class="codeph">INMEMORY</code>属性： <code class="codeph">cust_id</code> ， <code class="codeph">cust_first_name</code> ， <code class="codeph">cust_last_name</code>和<code class="codeph">cust_gender</code> 。表中仅存在5行，存储在2个数据块中。从概念上讲，第一个数据块按如下方式存储其行：</p><pre class="pre codeblock"><code>82，麦德兰，李，F; 37004，ABEL Embrey，M; 1714，哈代，温和，男</code></pre><p>第二个数据块按如下方式存储行：</p><pre class="pre codeblock"><code>100439，乌玛，坎贝尔，F; 3047，露西亚，尼，F</code></pre><p>假设IMCU 1存储第一数据块的数据。在这种情况下，此数据块存储中3行的<code class="codeph">cust_id</code>列值将“垂直”存储在CU中，如下所示：</p><pre class="pre codeblock"><code>82 37004 1714</code></pre><p>IMCU 2存储来自第二数据块的数据。这两行的<code class="codeph">cust_id</code>列值存储在CU中，如下所示：</p><pre class="pre codeblock"><code>100439 3047</code></pre><p>由于<code class="codeph">cust_id</code>值是数据块中每行的第一个值，因此<code class="codeph">cust_id</code>列位于IMCU中的第一个位置。列始终占据相同的位置，因此Oracle数据库可以通过读取段的IMCU来重建行。
                              </p>
                           </div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="使用DDL语句中的INMEMORY子句指定哪些对象有资格进入IM列存储。您可以启用表空间，表（内部和外部），分区和物化视图。">对记忆内人口的控制</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-5DFDC353-CE50-4E26-9DFD-E6046A1582A8" title="IM列存储将一个对象（表，分区，物化视图）的数据存储在一组IMCU中。IMCU存储一个且仅一个对象的列数据。">IMCU和模式对象</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" name="GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7"></a><h5 id="INMEM-GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" class="sect5"><span class="enumeration_section">2.2.1.2</span>列压缩单元（CU）</h5>
                     <div>
                        <p><span class="bold">列压缩单元（CU）</span>是IMCU中单个列的连续存储。每个IMCU都有一个或多个CU。
                        </p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E">CU的结构</a><br>CU被分为主体和头部。
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB">本地词典</a><br>在CU中，本地字典具有不同值的列表及其对应的字典代码。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="内存中压缩单元（IMCU）是一个压缩的只读存储单元，包含一列或多列的数据。">内存中压缩单元（IMCU）</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E" name="GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E"></a><h6 id="INMEM-GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E" class="sect6"><span class="enumeration_section">2.2.1.2.1</span> CU的结构</h6>
                        <div>
                           <p>CU被分为主体和头部。</p>
                           <p>每个CU的主体存储IMCU中包含的行范围的列值。标头包含关于存储在CU主体中的值的元数据，例如，CU内的最小值和最大值。它还可以包含<a href="glossary.html#GUID-10ECFDBB-1835-4634-B1E6-5E156614B6DE"><span class="xrefglossterm">本地字典</span></a> ，该<a href="glossary.html#GUID-10ECFDBB-1835-4634-B1E6-5E156614B6DE"><span class="xrefglossterm">字典</span></a>是该列中不同值的排序列表及其对应的字典代码。
                           </p>
                           <p>下图显示了具有4个CU的IMCU，用于<code class="codeph">sales</code>表： <code class="codeph">prod_id</code> ， <code class="codeph">cust_id</code> ， <code class="codeph">time_id</code>和<code class="codeph">channel_id</code> 。每个CU存储IMCU中包括的行范围的列值。</p>
                           <div class="figure" id="GUID-DDF4E628-0A07-42F3-8B8E-2B166F6A824E__GUID-ACC3BC93-A2D6-44CF-BCF7-F5996EED03A8">
                              <p class="titleinfigure">图2-7 IMCU中的CU</p><img src="img/inmem_3v_007.png" alt="下面是图2-7的描述" title="下面是图2-7的描述" longdesc="img_text/inmem_3v_007.html"><br><a href="img_text/inmem_3v_007.html">“图2-7 IMCU中的CU”的描述</a></div>
                           <!-- class="figure" -->
                           <p>CU以rowid顺序存储值。因此，数据库可以通过将行“拼接”在一起来回答查询。例如，应用程序发出以下查询：</p><pre class="pre codeblock"><code>SELECT cust_id，time_id，channel_id FROM sales WHERE prod_id = 5;</code></pre><p>数据库首先扫描<code class="codeph">prod_id</code>列以查找值为<code class="codeph">5</code>条目。假设数据库在<code class="codeph">prod_id</code>列中的位置2中找到<code class="codeph">5</code> 。数据库现在必须找到该行的相应<code class="codeph">cust_id</code> ， <code class="codeph">time_id</code>和<code class="codeph">channel_id</code> 。由于CU以rowid顺序存储数据，因此数据库可以在这些列中的位置2中找到相应的<code class="codeph">cust_id</code> ， <code class="codeph">time_id</code>和<code class="codeph">channel_id</code>值。因此，要回答查询，数据库必须从<code class="codeph">cust_id</code> ， <code class="codeph">time_id</code>和<code class="codeph">channel_id</code>列中的位置2提取值，然后将该行重新拼接在一起以将其返回给最终用户。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" title="列压缩单元（CU）是IMCU中单个列的连续存储。每个IMCU都有一个或多个CU。">列压缩单元（CU）</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB" name="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB"></a><h6 id="INMEM-GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB" class="sect6"><span class="enumeration_section">2.2.1.2.2</span>本地词典</h6>
                        <div>
                           <p>在CU中，本地字典具有不同值的列表及其对应的字典代码。</p>
                           <p>本地字典存储列中包含的符号。下图说明了CU如何在<code class="codeph">vehicles</code>表中存储<code class="codeph">name</code>列。
                           </p>
                           <div class="figure" id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB__GUID-D5FF2EE9-ED35-4F2C-858F-356CDBD2429D">
                              <p class="titleinfigure">图2-8本地字典</p><img src="img/inmem_3v_006.png" alt="下面是图2-8的描述" title="下面是图2-8的描述" longdesc="img_text/inmem_3v_006.html"><br><a href="img_text/inmem_3v_006.html">“图2-8本地词典”的描述</a></div>
                           <!-- class="figure" -->
                           <p>在上图中，CU仅包含7行。此CU中的每个不同值（例如<code class="codeph">Cadillac</code>或<code class="codeph">Audi</code> ）都会分配不同的字典代码，例如<code class="codeph">Cadillac</code> <code class="codeph">2</code>和<code class="codeph">Audi</code> <code class="codeph">0</code> 。CU存储字典代码而不是原始值。
                           </p>
                           <div class="infoboxnote" id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB__GUID-BA81A5E1-BFA7-4247-891F-E3DD21F980C3">
                              <p class="notep1">注意：</p>
                              <p>当数据库使用<a href="glossary.html#GUID-D04AB5B8-A58B-4494-A54F-09CEBC113460"><span class="xrefglossterm">公共字典</span></a>作为<a href="glossary.html#GUID-0DCA9B69-43D8-4940-9CC0-8753061F27CA"><span class="xrefglossterm">连接组时</span></a> ，本地字典包含<span class="italic">对</span>公共字典的<span class="italic">引用</span>而不是<span class="italic">符号</span> 。例如，而不是存储值<code class="codeph">Audi</code> ， <code class="codeph">BWM</code>和<code class="codeph">Cadillac</code>为<code class="codeph">vehicles.name</code>柱，本地字典中存储的字典编码，例如<code class="codeph">101</code> ， <code class="codeph">220</code> ，和<code class="codeph">66</code> 。
                              </p>
                           </div>
                           <p>CU标头包含列的最小值和最大值。在此示例中，最小值为<code class="codeph">Audi</code> ，最大值为<code class="codeph">Cadillac</code> 。本地词典存储了不同值的列表： <code class="codeph">Audi</code> ， <code class="codeph">BMW</code>和<code class="codeph">Cadillac</code> 。它们相应的字典码（ <code class="codeph">0</code> ， <code class="codeph">1</code> ，和<code class="codeph">2</code> ）是隐含的。每个IMCU中CU的本地字典独立于其他IMCU中的本地字典。
                           </p>
                           <p>如果查询过滤奥迪汽车，则数据库仅扫描此IMCU的<code class="codeph">0</code>代码。
                           </p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="optimizing-queries-with-join-groups.html#GUID-88A573DD-99D3-48D7-8310-B46F70184793" title="公共字典是表级特定于实例的字典代码集。">加入组如何使用公共字典</a></li>
                              </ul>
                           </div>
                           <div class="infoboxnotealso" id="GUID-729DBF0D-7DE4-4B1A-886E-8BE5F6017DAB__GUID-8A82B6DF-69A5-47DF-AA1A-3825D2F78035">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="optimizing-queries-with-join-groups.html#GUID-88A573DD-99D3-48D7-8310-B46F70184793" title="公共字典是表级特定于实例的字典代码集。">加入组如何使用通用词典</a> ”</span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-DD7106DB-0BCE-4251-B808-8341507FDFC7" title="列压缩单元（CU）是IMCU中单个列的连续存储。每个IMCU都有一个或多个CU。">列压缩单元（CU）</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A38FF2B6-506E-412A-9FE5-1CE709556379" name="GUID-A38FF2B6-506E-412A-9FE5-1CE709556379"></a><h5 id="INMEM-GUID-A38FF2B6-506E-412A-9FE5-1CE709556379" class="sect5"><span class="enumeration_section">2.2.1.3</span>内存存储索引</h5>
                     <div>
                        <p>每个IMCU标头都会自动为其CU创建和管理<span class="bold">内存存储索引</span> （IM存储索引）。IM存储索引存储IMCU中所有列的最小值和最大值。</p>
                        <p>例如， <code class="codeph">sales</code>填充在IM列存储中。该表的每个IMCU都包含所有列。<code class="codeph">sales.prod_id</code>列存储在每个IMCU内的单独CU中。 IMCU标头具有每个<code class="codeph">prod_id</code> CU（以及每个其他CU）的最小值和最大值。
                        </p>
                        <p>为了消除不必要的扫描，数据库可以基于SQL过滤器谓词执行<a href="glossary.html#GUID-824EDD0E-2FF3-411E-A2B2-C7B542EADFDC"><span class="xrefglossterm">IMCU修剪</span></a> 。数据库仅扫描满足查询谓词的IMCU，如下图中的<code class="codeph">WHERE prod_id &gt; 14 AND prod_id &lt; 29</code>示例所示。
                        </p>
                        <div class="figure" id="GUID-A38FF2B6-506E-412A-9FE5-1CE709556379__BGBGBJJB">
                           <p class="titleinfigure">图2-9柱状数据的存储索引</p><img src="img/inmem_3v_016.png" alt="下面是图2-9的描述" title="下面是图2-9的描述" longdesc="img_text/inmem_3v_016.html"><br><a href="img_text/inmem_3v_016.html">“图2-9柱状数据存储索引”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="内存中压缩单元（IMCU）是一个压缩的只读存储单元，包含一列或多列的数据。">内存中压缩单元（IMCU）</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" name="GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2"></a><h4 id="INMEM-GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" class="sect4"><span class="enumeration_section">2.2.2</span>快照元数据单元（SMU）</h4>
                  <div>
                     <p>快照元数据单元（SMU）包含关联的IMCU的元数据和事务信息。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF">IMCU和SMU</a><br>内存区域的柱状池存储实际数据：IMCU和IMEU。内存区域中的元数据池存储SMU。
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1">交易日记</a><br>每个SMU都包含一个<span class="bold">事务日志</span> 。数据库使用事务日志来保持IMCU的事务一致性。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" title="IM列存储以优化的存储单元管理数据和元数据，而不是传统的Oracle数据块。">内存存储单元</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF" name="GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF"></a><h5 id="INMEM-GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF" class="sect5"><span class="enumeration_section">2.2.2.1</span> IMCU和SMU</h5>
                     <div>
                        <p>内存区域的柱状池存储实际数据：IMCU和IMEU。内存区域中的元数据池存储SMU。</p>
                        <div class="figure" id="GUID-344E6053-2B12-4E8D-B37C-7B74D8F02DCF__GUID-AC063DFD-ADC3-42BF-A971-A86F7C4812DF">
                           <p class="titleinfigure">图2-10 IMCU和SMU</p>
                           <p>此图显示数据池中的IMCU和元数据池中的SMU。</p><img src="img/inmem_3v_014.png" alt="下面是图2-10的描述" title="下面是图2-10的描述" longdesc="img_text/inmem_3v_014.html"><br><a href="img_text/inmem_3v_014.html">“图2-10 IMCU和SMU”的描述</a></div>
                        <!-- class="figure" -->
                        <p>每个IMCU都映射到一个单独的SMU。因此，如果列式数据池包含100个IMCU，则元数据池包含100个SMU。SMU为其关联的IMCU存储多种类型的元数据，包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对象编号</p>
                           </li>
                           <li>
                              <p>列号</p>
                           </li>
                           <li>
                              <p>映射行的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" title="快照元数据单元（SMU）包含关联的IMCU的元数据和事务信息。">快照元数据单元（SMU）</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1" name="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1"></a><h5 id="INMEM-GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1" class="sect5"><span class="enumeration_section">2.2.2.2</span>交易日志</h5>
                     <div>
                        <p>每个SMU都包含一个<span class="bold">事务日志</span> 。数据库使用事务日志来保持IMCU的事务一致性。
                        </p>
                        <p>数据库使用缓冲区缓存来处理DML，就像未启用IM列存储一样。例如， <code class="codeph">UPDATE</code>语句可能会修改IMCU中的行。在这种情况下，数据库将修改后的行的rowid添加到事务日志中，并将其标记为DML语句的SCN。如果查询需要访问该行的新版本，则数据库将从数据库缓冲区高速缓存中获取该行。
                        </p>
                        <div class="figure" id="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1__GUID-FA73343D-ED4F-4C7A-80B2-57DC5D14651C">
                           <p class="titleinfigure">图2-11交易日记帐</p><img src="img/inmem_3v_020.png" alt="下面是图2-11的描述" title="下面是图2-11的描述" longdesc="img_text/inmem_3v_020.html"><br><a href="img_text/inmem_3v_020.html">“图2-11交易日记”的描述</a></div>
                        <!-- class="figure" -->
                        <p>数据库通过合并列，事务日志和缓冲区高速缓存的内容来实现读取一致性。在<a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">重新填充</span></a>期间刷新IMCU时，查询可以直接从IMCU访问最新的行。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1__GUID-78FCBDF5-0498-4504-A82C-1ED36BAA1A05">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="IM列存储定期刷新已修改的对象。您可以使用初始化参数和DBMS_INMEMORY包来控制此行为。">优化IM列存储的重新填充</a> ”</span> ，深入讨论IM列存储如何维护事务一致性</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-850DDEFB-6B9F-461B-AAF0-DB6DAFAFCBA2" title="快照元数据单元（SMU）包含关联的IMCU的元数据和事务信息。">快照元数据单元（SMU）</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E1A74436-E719-4FC3-A141-41B160792E51" name="GUID-E1A74436-E719-4FC3-A141-41B160792E51"></a><h4 id="INMEM-GUID-E1A74436-E719-4FC3-A141-41B160792E51" class="sect4"><span class="enumeration_section">2.2.3</span>内存表达单元（IMEU）</h4>
                  <div>
                     <p><span class="bold">内存中表达单元</span> （IMEU）是物化<span class="bold">内存表达式</span> （IM表达式）和用户定义虚拟列的存储容器。
                     </p>
                     <p>数据库处理物化表达式就像IMCU中的其他列一样。从概念上讲，IMEU是其父IMCU的逻辑扩展。就像IMCU可以包含多个列一样，IMEU可以包含多个虚拟列。</p>
                     <p>每个IMEU映射到一个IMCU，映射到同一行集。IMEU包含其相关IMCU中包含的数据的表达式结果。填充IMCU时，也会填充关联的IMEU。</p>
                     <p>典型的IM表达式涉及一个或多个列，可能具有常量，并且与表中的行具有一对一映射。例如， <code class="codeph">employees</code>表的IMCU包含<code class="codeph">weekly_salary</code>列的行1-1000。对于存储在此IMCU中的行，IMEU计算自动检测到的IM表达式<code class="codeph">weekly_salary*52</code> ，以及用户定义的虚拟列<code class="codeph">quarterly_salary</code>定义为<code class="codeph">weekly_salary*12</code> 。IMCU中的第3行向下映射到IMEU中的第3行。</p>
                     <p>IMEU是特定段的IMCU的逻辑扩展。默认情况下，IMEU从基本段继承<code class="codeph">INMEMORY</code>子句属性，包括Oracle Real Application Clusters（Oracle RAC）属性，如<code class="codeph">DISTRIBUTE</code>和<code class="codeph">DUPLICATE</code> 。您可以有选择地启用或禁用虚拟列以存储在IMEU中。您还可以为不同的列指定压缩级别。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="populating-objects-in-memory.html#GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617" title="对于内部表，内存中的虚拟列（IM虚拟列）和非虚拟列都符合IM填充的条件。对于外部表，只有非虚拟列才符合条件。">关于启用INMEMORY列</a></li>
                           <li><a href="views-related-to-im-column-store.html#GUID-2EBF8D9B-FA9E-4D67-8934-5908E6018D4E" title="本主题描述与内存中列存储（IM列存储）相关的数据字典和动态性能视图。">内存中的视图</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-D61E56A9-B152-49D1-9956-BE9E882E3DE1" title="IM列存储以优化的存储单元管理数据和元数据，而不是传统的Oracle数据块。">内存存储单元</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757" name="GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757"></a><h3 id="INMEM-GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757" class="sect3"><span class="enumeration_section">2.3</span>表达统计存储（ESS）</h3>
               <div>
                  <p><strong class="term">表达式统计信息存储（ESS）</strong>是由优化程序维护的存储库，用于存储有关表达式评估的统计信息。ESS驻留在SGA中并保留在磁盘上。
                  </p>
                  <p>启用IM列存储后，数据库会利用ESS实现其内存中表达式（IM表达式）功能。但是，ESS独立于IM列存储。ESS是数据库的永久组件，无法禁用。</p>
                  <p>数据库使用ESS来确定表达式是否“热”（经常访问），因此是IM表达式的候选者。在查询的硬分析期间，ESS在<code class="codeph">SELECT</code>列表， <code class="codeph">WHERE</code>子句， <code class="codeph">GROUP BY</code>子句等中查找活动表达式。
                  </p>
                  <p>对于每个段，ESS维护表达式统计信息，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>执行频率</p>
                     </li>
                     <li>
                        <p>评估成本</p>
                     </li>
                     <li>
                        <p>时间戳评估</p>
                     </li>
                  </ul>
                  <p>优化程序根据成本和评估次数为每个表达式分配加权分数。值是近似值而不是精确值。更活跃的表达有更高的分数。ESS维护最常访问的表达式的内部列表。</p>
                  <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN</code>包控制IM表达式的行为。例如， <code class="codeph">IME_CAPTURE_EXPRESSIONS</code>过程会提示数据库识别并逐渐填充数据库中最热门的表达式。<code class="codeph">IME_POPULATE_EXPRESSIONS</code>过程强制数据库立即填充表达式。
                  </p>
                  <p>ESS信息存储在数据字典中，并在<code class="codeph">DBA_EXPRESSION_STATISTICS</code>视图中公开。此视图显示优化程序在ESS中收集的元数据。 IM表达式在<code class="codeph">DBA_IM_EXPRESSIONS</code>视图中以系统生成的虚拟列（以字符串<code class="codeph">SYS_IME</code>为前缀） <code class="codeph">DBA_IM_EXPRESSIONS</code> 。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-BF90E4D7-DA7B-4B2B-A0BB-AE88E0C39757__GUID-32526C6F-6AA1-4856-A80B-A2B1ED9DB9CA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="optimizing-in-memory-expressions.html#GUID-1B849DAF-277E-4B09-8275-367592115B06" title="默认情况下，DBMS_INMEMORY_ADMIN.IME_CAPTURE_EXPRESSIONS过程标识并填充“热”表达式，称为内存中表达式（IM表达式）。">关于IM表达</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../tgsql/query-optimizer-concepts.html#GUID-44EB8261-A7B1-4402-94ED-5152EE1C5D08" target="_blank"><span><cite>Oracle数据库SQL调优指南</cite></span></a> ，了解有关ESS的更多信息</p>
                        </li>
                        <li>
                           <p><a href="../refrn/DBA_EXPRESSION_STATISTICS.html#GUID-9617514D-FFED-4B5D-B8C7-FB08FCB9CC91" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">DBA_EXPRESSION_STATISTICS</code>视图的更多信息</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-398720DF-7D8D-4418-B395-5F7C5FC85BC5" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_INMEMORY_ADMIN</code>包的更多信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="内存中列存储（IM列存储）使用针对快速扫描优化的柱形格式将表和分区存储在内存中。Oracle数据库使用复杂的体系结构同时管理柱形和行格式的数据。">内存中列存储架构</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" name="GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2"></a><h3 id="INMEM-GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" class="sect3"><span class="enumeration_section">2.4</span>内存中过程体系结构</h3>
               <div>
                  <p>为了响应查询和DML，服务器进程扫描列数据并更新SMU元数据。后台进程将行数据从磁盘填充到IM列存储中。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E">内存协调器进程（IMCO）</a><br>内存中协调器进程（IMCO）管理IM列存储的许多任务。其主要任务是启动背景人口和重新填充柱状数据。
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3">空间管理工作者流程（Wnnn）</a><br>空间管理工作者流程（W <span class="italic">nnn</span> ）代表IMCO填充或重新填充数据。</li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70">内存中动态扫描</a><br><strong class="term">内存中动态扫描（IM动态扫描）</strong>使用轻量级线程来并行化内存中的表扫描。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="内存中列存储（IM列存储）使用针对快速扫描优化的柱形格式将表和分区存储在内存中。Oracle数据库使用复杂的体系结构同时管理柱形和行格式的数据。">内存中列存储架构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E" name="GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E"></a><h4 id="INMEM-GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E" class="sect4"><span class="enumeration_section">2.4.1</span>内存协调器进程（IMCO）</h4>
                  <div>
                     <p>内存中协调器进程（IMCO）管理IM列存储的许多任务。其主要任务是启动背景人口和重新填充柱状数据。</p>
                     <p>Population是一种流式传输机制，将行数据转换为柱状格式，然后压缩它。IMCO自动启动除<code class="codeph">NONE</code>以外的任何优先级的<code class="codeph">INMEMORY</code>对象的<code class="codeph">INMEMORY</code> 。当访问优先级为<code class="codeph">NONE</code>对象时，IMCO使用空间管理工作进程（W <span class="italic">nnn</span> ）进程填充它们。
                     </p>
                     <p>IMCO后台进程还会在IM列存储对象满足过期阈值时启动<a href="glossary.html#GUID-6F8CD872-FBA2-4519-8204-66D3E45FA1C9"><span class="xrefglossterm">基于阈值的重新填充</span></a> 。IMCO可能会对IM列存储中任何具有陈旧条目但不满足<a href="glossary.html#GUID-78ED27B2-6946-4302-BDD2-3F8A4F0DA42C"><span class="xrefglossterm">过期阈值的</span></a> IMCU进行<a href="glossary.html#GUID-34CC73ED-D322-4628-AC54-3F51065E8BCE"><span class="xrefglossterm">涓流重新填充</span></a> 。
                     </p>
                     <p>涓流重新填充在后台自动发生。步骤如下：</p>
                     <ol>
                        <li>
                           <p>IMCO醒来。</p>
                        </li>
                        <li>
                           <p>IMCO确定是否需要执行人口任务，包括IMCU中是否存在任何陈旧条目。</p>
                        </li>
                        <li>
                           <p>如果IMCO发现过时的条目，那么它会触发空间管理工作进程在IMCU中重新填充这些条目。</p>
                        </li>
                        <li>
                           <p>IMCO睡了两分钟，然后返回到步骤1。</p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E__GUID-8B8A0400-F744-4034-99A4-6EAACB984D69">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="IM列存储定期刷新已修改的对象。您可以使用初始化参数和DBMS_INMEMORY包来控制此行为。">优化IM列存储的重新填充</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-86184690-5531-405F-AA05-BB935F57B76D" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关后台进程的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="为了响应查询和DML，服务器进程扫描列数据并更新SMU元数据。后台进程将行数据从磁盘填充到IM列存储中。">内存中过程体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" name="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3"></a><h4 id="INMEM-GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" class="sect4"><span class="enumeration_section">2.4.2</span>空间管理工作者流程（Wnnn）</h4>
                  <div>
                     <p>空间管理工作者流程（W <span class="italic">nnn</span> ）代表IMCO填充或重新填充数据。</p>
                     <p>在人口中，W <span class="italic">nnn</span>进程负责创建IMCU，SMU和IMEU。创建IMEU时，工作进程执行以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>确定人口的虚拟列</p>
                        </li>
                        <li>
                           <p>创建虚拟列值</p>
                        </li>
                        <li>
                           <p>计算每行的值，将数据转换为列式格式并压缩它</p>
                        </li>
                        <li>
                           <p>使用空间图层注册对象</p>
                        </li>
                        <li>
                           <p>将IMEU与其对应的IMCU相关联</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3__GUID-683499D3-4356-4C9E-AC8E-CA92059FB61A">
                        <p class="notep1">注意：</p>
                        <p>在IMEU创建期间，父IMCU仍可用于查询。</p>
                     </div>
                     <p>在重新填充期间，W <span class="italic">nnn</span>进程基于现有的IMCU和事务日志创建新版本的IMCU，同时暂时保留旧版本。这种机制称为<a href="glossary.html#GUID-D54C930C-1B27-40FC-9B15-25670A707365"><span class="xrefglossterm">双缓冲</span></a> 。
                     </p>
                     <p>数据库可以快速将IM表达式移入和移出IM列存储。例如，如果在没有IMEU的情况下创建IMCU，则数据库可以在以后添加IMEU而不强制IMCU经历完整的重新填充机制。</p>
                     <p><code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code>初始化参数控制可以为填充启动的最大工作进程数。<code class="codeph">INMEMORY_TRICKLE_REPOPULATE_PERCENT</code>初始化参数控制工作进程可执行涓流重新填充的最大时间百分比。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3__GUID-7CC05002-BC25-4942-8AEC-B6319D935B81">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" title="当数据库从磁盘读取现有行格式数据，将其转换为列格式，然后将其存储在IM列存储中时，会发生内存中的填充（填充）。">关于记忆中的人口</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="重大修改后自动刷新柱状数据称为重新填充。">关于IM列存储的重新填充</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="init-parameters-for-im-column-store.html#GUID-A67ABCAC-C6B9-499E-8AE0-BD7922B239BE" title="几个初始化参数控制IM列存储的行为。">内存中初始化参数</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-86184690-5531-405F-AA05-BB935F57B76D" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关后台进程的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="为了响应查询和DML，服务器进程扫描列数据并更新SMU元数据。后台进程将行数据从磁盘填充到IM列存储中。">内存中过程体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" name="GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70"></a><h4 id="INMEM-GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" class="sect4"><span class="enumeration_section">2.4.3</span>内存中动态扫描</h4>
                  <div>
                     <p><strong class="term">内存中动态扫描（IM动态扫描）</strong>使用轻量级线程来并行化内存中的表扫描。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59">IM动态扫描的目的</a><br>当其他CPU可用时，IM动态扫描会加速CPU绑定的内存中表扫描。
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9">IM动态扫描如何工作</a><br>IM Dynamic Scans通过并行读取IMCU获得最佳性能。
                        </li>
                        <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5">IM动态扫描的界面</a><br>IM动态扫描是透明的，这意味着它们不需要更改应用程序，并且由资源管理器自动控制。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="为了响应查询和DML，服务器进程扫描列数据并更新SMU元数据。后台进程将行数据从磁盘填充到IM列存储中。">内存中过程体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59" name="GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59"></a><h5 id="INMEM-GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59" class="sect5"><span class="enumeration_section">2.4.3.1</span> IM动态扫描的目的</h5>
                     <div>
                        <p>当其他CPU可用时，IM动态扫描会加速CPU绑定的内存中表扫描。</p>
                        <p>IM动态扫描自动使用空闲CPU资源并行扫描IMCU并最大化CPU使用率。当CPU资源可用时，应用程序可以自动获得更快的分析查询结果。由于扫描是动态的，因此可以在不影响现有工作负载的情况下使用过多的CPU带宽。</p>
                        <p>IM动态扫描比传统的Oracle并行执行更灵活，尽管两者并不相互排斥。动态扫描在进程中使用多个轻量级执行线程。通常，动态扫描的性能开销很低。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F2F87876-E138-43D1-ADD6-D9A5D5903C59__GUID-0A9319C3-8D43-45CD-AB5D-9913517D9337">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关Resource Manager的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="内存中动态扫描（IM动态扫描）使用轻量级线程来并行化内存中的表扫描。">内存中动态扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" name="GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9"></a><h5 id="INMEM-GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" class="sect5"><span class="enumeration_section">2.4.3.2</span> IM动态扫描的工作原理</h5>
                     <div>
                        <p>IM Dynamic Scans通过并行读取IMCU获得最佳性能。</p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-4DDD1A53-D634-4201-B46F-626DAE16A447">关于轻量级线程</a><br><strong class="term">轻量级线程</strong>是一个执行实体，有助于并行化全表扫描。它是“轻量级的”，因为它不会导致Oracle进程的更高内存开销。
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A">当数据库考虑IM动态扫描时</a><br>启用CPU资源计划（例如， <code class="codeph">RESOURCE_MANAGER_PLAN=DEFAULT_PLAN</code> ）并且数据库的CPU利用率较低时，将启用轻量级线程。
                           </li>
                           <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-0D557669-B378-4514-A0D3-FBE054AA9F57">IM动态扫描如何工作</a><br>资源管理器分配轻量级线程以并行化IMCU的扫描。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="内存中动态扫描（IM动态扫描）使用轻量级线程来并行化内存中的表扫描。">内存中动态扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447" name="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447"></a><h6 id="INMEM-GUID-4DDD1A53-D634-4201-B46F-626DAE16A447" class="sect6"><span class="enumeration_section">2.4.3.2.1</span>关于轻量级线程</h6>
                        <div>
                           <p><strong class="term">轻量级线程</strong>是一个执行实体，有助于并行化全表扫描。它是“轻量级的”，因为它不会导致Oracle进程的更高内存开销。
                           </p>
                           <div class="infoboxnote" id="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447__GUID-0FBCF10B-88C4-4A6F-9A7D-935799771F09">
                              <p class="notep1">注意：</p>
                              <p>IM动态扫描使用的轻量级线程与多线程Oracle数据库模型中的常规线程不同。</p>
                           </div>
                           <p>轻量级线程共享父前台或PQ进程的资源，称为<a href="glossary.html#GUID-9938DE9E-21B0-4A21-B69B-A80CA6295B44"><span class="xrefglossterm">表扫描进程</span></a> ，用于协调一组IMCU的扫描。线程保持自己独立的执行流程。数据库可以通过确定线程优先级并异步执行它们来并行化扫描。
                           </p>
                           <p>对于符合条件的查询，该进程会分配一个线程池。资源管理器根据数据库主机中的CPU计数和系统上的当前负载自动确定池中的线程数。除非空闲时间达到内部阈值，否则线程池仍可用于后续查询的会话，此时数据库将终止线程。</p>
                           <p>线程之间的通信仅在进程内发生。因此，在数据库实例级别不会发生争用。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-4DDD1A53-D634-4201-B46F-626DAE16A447__GUID-1F61E3C4-2B57-49E0-BCBD-98D05866076A">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=CNCPT-GUID-4B460E97-18A0-4F5A-A62F-9608FFD43664" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解多线程Oracle数据库模型</p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" title="IM Dynamic Scans通过并行读取IMCU获得最佳性能。">IM动态扫描的工作原理</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A" name="GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A"></a><h6 id="INMEM-GUID-9DD695DF-A4A9-408C-A7FE-9AC001B0590A" class="sect6"><span class="enumeration_section">2.4.3.2.2</span>当数据库考虑IM动态扫描时</h6>
                        <div>
                           <p>启用CPU资源计划（例如， <code class="codeph">RESOURCE_MANAGER_PLAN=DEFAULT_PLAN</code> ）并且数据库的CPU利用率较低时，将启用轻量级线程。
                           </p>
                           <p>如果启用了轻量级线程，则当应用程序查询当前在IM列存储中填充的对象时，数据库会考虑IM动态扫描。通常，当具有以下特征时，串行或并行查询是IM动态扫描的候选者：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>访问大量IMCU或列</p>
                              </li>
                              <li>
                                 <p>消耗表中的所有行</p>
                              </li>
                              <li>
                                 <p>是CPU密集型的</p>
                              </li>
                           </ul>
                           <p>IM动态扫描需要Oracle数据库资源管理器（资源管理器），它在<code class="codeph">INMEMORY_SIZE</code>大于<code class="codeph">0</code>时自动启用。资源管理器决定何时以及如何使用轻量级线程。轻量级线程是数据库中优先级最低的操作，因为它们利用未使用的资源。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" title="IM Dynamic Scans通过并行读取IMCU获得最佳性能。">IM动态扫描的工作原理</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-0D557669-B378-4514-A0D3-FBE054AA9F57" name="GUID-0D557669-B378-4514-A0D3-FBE054AA9F57"></a><h6 id="INMEM-GUID-0D557669-B378-4514-A0D3-FBE054AA9F57" class="sect6"><span class="enumeration_section">2.4.3.2.3</span> IM动态扫描的工作原理</h6>
                        <div>
                           <p>资源管理器分配轻量级线程以并行化IMCU的扫描。</p>
                           <p>当数据库确定查询可以从IM动态扫描中受益时，它通常按如下方式进行：</p>
                           <ol>
                              <li>
                                 <p>表扫描过程产生一个轻量级线程池。</p>
                              </li>
                              <li>
                                 <p>表扫描过程为每个必须扫描的IMCU创建单独的任务，然后将每个任务添加到任务队列。</p>
                              </li>
                              <li>
                                 <p>资源管理器确定可以参与表扫描的线程数。</p>
                              </li>
                              <li>
                                 <p>活动线程从任务队列中获取任务，表扫描过程消耗完成任务的结果。</p>
                              </li>
                           </ol>
                           <p>根据数据库负载，资源管理器会在查询运行时不断调整活动轻量级线程的数量。如果CPU资源不可用，则表扫描进程在<span class="italic">不</span>使用轻量级线程的<span class="italic">情况下</span>执行扫描。
                           </p>
                           <p>下图说明了<code class="codeph">sales</code>表中12个IMCU的IM动态扫描。
                           </p>
                           <div class="figure" id="GUID-0D557669-B378-4514-A0D3-FBE054AA9F57__GUID-398D201A-1CD8-4400-B08E-C200FDDD7B85">
                              <p class="titleinfigure">图2-12 IM动态扫描</p><img src="img/inmem_pb_001b.png" alt="下面是图2-12的描述" title="下面是图2-12的描述" longdesc="img_text/inmem_pb_001b.html"><br><a href="img_text/inmem_pb_001b.html">“图2-12 IM动态扫描”的说明</a></div>
                           <!-- class="figure" -->
                           <p>在上图中，数据库主机有8个CPU核心。基于内部算法，资源管理器分配4个线程来协助表扫描过程。在这种情况下，4个CPU核心保持空闲状态，以供其他并发数据库操作使用。</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-CB4A29B8-46EA-417C-B9CC-6F65295A69E9" title="IM Dynamic Scans通过并行读取IMCU获得最佳性能。">IM动态扫描的工作原理</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5" name="GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5"></a><h5 id="INMEM-GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5" class="sect5"><span class="enumeration_section">2.4.3.3</span> IM动态扫描的接口</h5>
                     <div>
                        <p>IM动态扫描是透明的，这意味着它们不需要更改应用程序，并且由资源管理器自动控制。</p>
                        <div class="section">
                           <p>IM动态扫描需要资源管理器，当<code class="codeph">INMEMORY_SIZE</code>大于<code class="codeph">0</code>时，资源管理器会自动启用。不需要特定的资源计划。
                           </p>
                           <p>几个新的会话统计信息跟踪IM动态扫描的使用情况。每个线程将跟踪数据写入单独的跟踪文件。</p>
                           <p>执行计划不变。下图显示了一个示例执行计划。</p><pre class="pre codeblock"><code>SQL&gt; SELECT MAX（l_quantity）maximum_order FROM lineitem; LARGEST_ORDER ------------- 50 Elapsed：00：00：03.41执行计划-------------------------- --------------------------------计划哈希值：1885658499 ------------- -------------------------------------------------- --------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| Pstart时| Pstop | -------------------------------------------------- -------------------------------------------------- -  | 0 |选择声明| | 1 | 3 | 116K（4）| 00:00:05 | | | | 1 | SORT AGGREGATE | | 1 | 3 | | | | | | 2 | PARTITION RANGE ALL | | 600M | 1716M | 116K（4）| 00:00:05 | 1 | 84 | | 3 |表访问INMEMORY FULL | LINEITEM | 600M | 1716M | 116K（4）| 00:00:05 | 1 | 84 | -------------------------------------------------- -------------------------------------------------- -  NAME VALUE ---------------------------------------------- --------- IM扫描CU查询报文低1147 IM扫描字节内存5.1790E + 10 IM扫描字节未压缩7.6722E + 10 IM扫描CU列访问1147 IM扫描行600037902 IM扫描行投影29 IM扫描（动态）行600037902 IM扫描（动态）多线程扫描1线程1146处理的IM扫描（动态）任务</code></pre><p>考虑一下计划的特点：</p>
                           <ol>
                              <li>
                                 <p>执行计划没有变化。</p>
                                 <p>请注意，该计划未在步骤3中提及IM动态扫描。但是，单击SQL监视器报告中的双目图标将显示“线程上的动态扫描任务”。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan (dynamic) multi-threaded scans</code>非零，这意味着数据库使用IM动态扫描。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan CUs memcompress for query low</code>表示<code class="codeph">lineitem</code>表中存在1147个IMCU。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan (dynamic) tasks processed by thread</code>表示并行处理了多少个IMCU。
                                 </p>
                                 <p>该数字为1146，小于<code class="codeph">IM scan CUs memcompress for query low</code>的总数1147。数据库分析了没有并行化的第一个IMCU，以确定并行化是否值得。因为答案是肯定的，所以数据库继续并行扫描剩余的1146个IMCU。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">IM scan (dynamic) rows</code>和<code class="codeph">IM scan rows are equal</code> ，这意味着线程检索了查询的所有行。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C5D44481-13B9-4C6F-BD6E-B6E75A901BA5__GUID-CDAA9B98-FEB7-406D-BDD7-F1F76628FB03">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=ADMIN-GUID-E8FABE8D-A781-49BB-B623-98F096DED239" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关资源管理器的更多信息</p>
                              </li>
                              <li>
                                 <p>有关内存中统计信息描述的<a href="../refrn/statistics-descriptions-2.html#REFRN-GUID-2FBC1B7E-9123-41DD-8178-96176260A639" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="内存中动态扫描（IM动态扫描）使用轻量级线程来并行化内存中的表扫描。">内存中动态扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" name="GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310"></a><h3 id="INMEM-GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" class="sect3"><span class="enumeration_section">2.5</span> CPU架构：SIMD矢量处理</h3>
               <div>
                  <p>对于在IM列存储中填充的数据，数据库使用SIMD（单指令，多数据）向量处理。</p>
                  <p>IM列存储最大化CPU可以加载到向量寄存器并进行评估的列条目数。数据库不是一次评估列中的每个条目，而是评估单个CPU指令中的一组列值。SIMD矢量处理使数据库能够每秒扫描数十亿行。</p>
                  <p>例如，应用程序发出查询以查找<code class="codeph">sales</code>表中使用<code class="codeph">promo_id</code>值<code class="codeph">9999</code>的订单总数。<code class="codeph">sales</code>表位于IM列存储中。查询首先只扫描<code class="codeph">sales.promo_id</code>列，如下图所示：</p>
                  <div class="figure" id="GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310__GUID-20F920D6-E978-476E-A578-32B4C05F50B0">
                     <p class="titleinfigure">图2-13 SIMD矢量处理</p><img src="img/cncpt_vm_382.png" alt="下面是图2-13的描述" title="下面是图2-13的描述" longdesc="img_text/cncpt_vm_382.html"><br><a href="img_text/cncpt_vm_382.html">“图2-13 SIMD矢量处理”的描述</a></div>
                  <!-- class="figure" -->
                  <p>CPU按如下方式评估数据：</p>
                  <ol>
                     <li>
                        <p>将<code class="codeph">promo_id</code>列中的前8个值（数量因数据类型和压缩模式而异） <code class="codeph">promo_id</code>到SIMD寄存器中，然后在单个指令中将它们与值<code class="codeph">9999</code>进行比较</p>
                     </li>
                     <li>
                        <p>丢弃条目。</p>
                     </li>
                     <li>
                        <p>将另外8个值加载到SIMD寄存器中，然后以这种方式继续，直到它评估了所有条目。</p>
                     </li>
                  </ol>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA">SIMD和Oracle LOB</a><br><span>Oracle Database 18c</span>为涉及特定LOB列上的SQL运算符的查询提供SIMD向量支持。
                     </li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534">SIMD和Oracle数字</a><br><span>对于使用<code class="codeph">QUERY LOW</code>压缩的表格， <code class="codeph">NUMBER</code>列使用优化格式进行编码，以便在硬件中进行本机计算。</span></li>
                     <li class="ulchildlink"><a href="in-memory-column-store-architecture.html#GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4">SIMD和Exadata智能闪存缓存</a><br>除了以混合列压缩格式存储数据外，Exadata智能闪存缓存还可以以纯列式格式存储数据。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-EEA265EE-8FBA-4457-8C3F-315B9EEA2224" title="内存中列存储（IM列存储）使用针对快速扫描优化的柱形格式将表和分区存储在内存中。Oracle数据库使用复杂的体系结构同时管理柱形和行格式的数据。">内存中列存储架构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA" name="GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA"></a><h4 id="INMEM-GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA" class="sect4"><span class="enumeration_section">2.5.1</span> SIMD和Oracle LOB</h4>
                  <div>
                     <p><span>Oracle Database 18c</span>为涉及特定LOB列上的SQL运算符的查询提供SIMD向量支持。
                     </p>
                     <p>支持的性质取决于LOB的类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>内联LOB</p>
                           <p>IM列存储为IMCU内的LOB（小于4 KB的LOB）提供连续存储。通过消除从数据库缓冲区高速缓存组装LOB数据的开销，列式存储可以加快查询处理速度。</p>
                        </li>
                        <li>
                           <p>外线LOB</p>
                           <p>在这种情况下，IM列存储仅存储LOB定位符，即40个字节。外部列不受柱状优化的影响。</p>
                        </li>
                     </ul>
                     <p>前面的规则有一个例外。IMEU可以为定义为LOB数据类型的JSON列分配最多32 KB的连续存储。IMEU以<a href="glossary.html#GUID-96C1EFE2-69DD-4E78-97DA-25253A51E3A5"><span class="xrefglossterm">OSON</span></a>格式存储这些列，使用SIMD处理可以提供更快的查询性能。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3F150041-3EBC-4EC7-AE95-4B17CD5960EA__GUID-30A42379-36EF-42C3-95D6-B12116C71695">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../adlob/introduction-to-large-objects.html#ADLOB-GUID-1A2B0023-9EE8-48AF-AA76-171D1FC5C241" target="_blank"><span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a> ，了解有关LOB的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="对于在IM列存储中填充的数据，数据库使用SIMD（单指令，多数据）向量处理。">CPU架构：SIMD矢量处理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534" name="GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534"></a><h4 id="INMEM-GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534" class="sect4"><span class="enumeration_section">2.5.2</span> SIMD和Oracle编号</h4>
                  <div>
                     <p><span>对于使用<code class="codeph">QUERY LOW</code>压缩的表格， <code class="codeph">NUMBER</code>列使用优化格式进行编码，以便在硬件中进行本机计算。</span></p>
                     <p><span>SIMD矢量处理使简单聚合， <code class="codeph">GROUP BY</code>聚合和算术运算能够显着受益。性能改进取决于聚合在算术计算上花费的时间量。一些聚合可能会受益高达9倍。</span></p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C7D70CB1-8BD8-4252-89ED-59C88F7C9534__GUID-09CA3951-DE7D-427A-9CE2-8D357B64F8E5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="optimizing-in-memory-aggregation.html#GUID-4321558D-853B-41A0-9098-4A45204F21BD" title="内存优化算法使用优化的NUMBER格式，使用SIMD硬件进行快速计算。">优化内存中算术</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Data-Types.html#SQLRF-GUID-9401BC04-81C4-4CD5-99E7-C5E25C83F608" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="对于在IM列存储中填充的数据，数据库使用SIMD（单指令，多数据）向量处理。">CPU架构：SIMD矢量处理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4" name="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4"></a><h4 id="INMEM-GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4" class="sect4"><span class="enumeration_section">2.5.3</span> SIMD和Exadata智能闪存缓存</h4>
                  <div>
                     <p>除了以混合列压缩格式存储数据外，Exadata智能闪存缓存还可以以纯列式格式存储数据。</p>
                     <p>Exadata Smart Scan支持SIMD谓词。优点是内存中性能从DRAM存储扩展到二级存储。</p>
                     <p>默认情况下，Exadata智能闪存缓存使用<code class="codeph">MEMCOMPRESS FOR CAPACITY LOW</code>级别压缩数据。若要更改压缩级别或完全禁用列式格式，请使用<code class="codeph">ALTER TABLE ...NO CELLMEMORY</code>声明。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4__GUID-ECB949A8-37D3-4DF0-923D-C433D823C8FC">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="intro-to-in-memory-column-store.html#GUID-3C7A9421-141C-43F8-9CFC-D0D516E19D3B" title="并非所有标记为INMEMORY的对象都可以同时适合DRAM内存。如果使用Oracle Exadata存储服务器软件，则Exadata智能闪存缓存可用作补充内存。">Exadata Flash Cache的内存支持</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=DBMSO-GUID-D3F05A21-F1A8-48D0-AC3C-88AF3D725DCD" target="_blank"><span id="GUID-A48C2F4B-52E7-4BB7-8649-D315C78413C4__DBMSO"><cite>Oracle数据库云服务器系统概述</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="对于在IM列存储中填充的数据，数据库使用SIMD（单指令，多数据）向量处理。">CPU架构：SIMD矢量处理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13479.types-parallelism.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="There are multiple types of parallelism."></meta>
      <meta name="description" content="There are multiple types of parallelism."></meta>
      <title>并行的类型</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="VLDB and Partitioning Guide"></meta>
      <meta property="og:description" content="There are multiple types of parallelism."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="VLDB and Partitioning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00"></meta>
      <meta name="dcterms.title" content="VLDB and Partitioning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96199-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="about-parallel-queuing.html" title="Previous" type="text/html"></link>
      <link rel="next" href="parameters-parallel-exec.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-parallel-queuing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="parameters-parallel-exec.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB和分区指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-parallel.html" property="item" typeof="WebPage"><span property="name">使用并行执行</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">并行的类型</li>
            </ol>
            <a id="GUID-FCE748F1-0CDB-4D95-9849-6A062E653945" name="GUID-FCE748F1-0CDB-4D95-9849-6A062E653945"></a><a id="VLDBG0107"></a>
            
            <h2 id="VLDBG-GUID-FCE748F1-0CDB-4D95-9849-6A062E653945" class="sect2">并行的类型</h2>
         </header>
         <div class="ind">
            <div>
               <p>有多种类型的并行性。</p>
               <p>本节讨论以下主题中的并行性类型：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="types-parallelism.html#GUID-D48BFF12-4630-444F-B165-1C8E019D2656" title="您可以在SELECT语句中使用并行查询和并行子查询，并且并行执行DDL语句和DML语句（INSERT，UPDATE和DELETE）的查询部分。">关于并行查询</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-41774038-773B-40A5-BDCD-AB16A189C035" title="本主题介绍了DDL语句的并行性。">关于并行DDL语句</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" title="本主题中介绍了并行DML操作。">关于并行DML操作</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" title="SQL语句可以包含用PL / SQL，Java编写的用户定义函数，也可以包含C语言中的外部过程，这些函数可以作为SELECT列表，SET子句或WHERE子句的一部分出现。">关于函数的并行执行</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" title="Oracle数据库可以在多种类型的操作中使用并行性。">关于其他类型的并行性</a></p>
                  </li>
                  <li>
                     <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句的并行度规则</a></p>
                  </li>
               </ul>
            </div><a id="VLDBG1403"></a><div class="props_rev_3"><a id="GUID-D48BFF12-4630-444F-B165-1C8E019D2656" name="GUID-D48BFF12-4630-444F-B165-1C8E019D2656"></a><h3 id="VLDBG-GUID-D48BFF12-4630-444F-B165-1C8E019D2656" class="sect3">关于并行查询</h3>
               <div>
                  <p>您可以在<code class="codeph">SELECT</code>语句中使用并行查询和并行子查询，并且并行执行DDL语句和DML语句（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code> ）的查询部分。
                  </p>
                  <p>您还可以并行查询外部表。</p>
                  <p>SQL查询的并行化决策有两个组成部分：并行化决策和并行度（DOP）。对于查询，DDL操作和DML操作，这些组件的确定方式不同。要确定DOP，Oracle数据库会查看引用对象：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>并行查询查看要并行执行的查询部分中的每个表和索引，以确定哪个是引用表。基本规则是选择具有最大DOP的表或索引。</p>
                     </li>
                     <li>
                        <p>对于并行DML（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code> ），确定DOP的引用对象是由插入，更新或删除操作修改的表。并行DML还为DOP增加了一些限制以防止死锁。如果并行DML语句包含子查询，则子查询的DOP等同于DML操作的DOP。
                        </p>
                     </li>
                     <li>
                        <p>对于并行DDL，确定DOP的引用对象是正在创建，重建，拆分或移动的表，索引或分区。如果并行DDL语句包含子查询，则子查询的DOP等效于DDL操作。</p>
                     </li>
                  </ul>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" title="索引组织表支持几种并行扫描方法。">索引组织表上的并行查询</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" title="非分区索引组织表上的并行查询使用并行快速全扫描。">非分区索引组织表</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" title="索引范围扫描和快速全扫描都可以并行执行。">分区索引组织表</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" title="可以对包含对象类型列的对象类型表和表执行并行查询。">对象类型的并行查询</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行化查询的规则</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D48BFF12-4630-444F-B165-1C8E019D2656__GUID-EC437C87-72E2-4556-A1C7-0F0657361BE6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="parallel-exec-intro.html#GUID-1DF2B82C-DD29-4500-B0B4-F296F1AC6240" title="每个SQL语句在解析时都会经历优化和并行化过程。">并行执行SQL语句</a> ，以解释进程如何执行并行查询</p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-09FC59FF-9F63-453C-86D3-6D171022314A" title="本主题将讨论分布式事务限制。">分布式事务限制，</a>用于引用远程对象的查询示例</p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="A SQL query can only be executed in parallel under certain conditions.">并行化查询的规则，</a>以获取有关<a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行</a>执行查询的条件以及确定DOP的因素的信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="VLDBG1404"></a><div class="props_rev_3"><a id="GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" name="GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB"></a><h4 id="VLDBG-GUID-A36C5B68-A4ED-44F4-A6E0-E906E4280AEB" class="sect4">索引组织表上的并行查询</h4>
                  <div>
                     <p>索引组织表支持几种并行扫描方法。</p>
                     <p>这些并行扫描方法包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>并行快速全扫描非分区索引组织表</p>
                        </li>
                        <li>
                           <p>并行快速全扫描分区索引组织表</p>
                        </li>
                        <li>
                           <p>分区索引组织表的并行索引范围扫描</p>
                        </li>
                     </ul>
                     <p>您可以将这些扫描方法用于具有溢出区域的索引组织表以及包含LOB的索引组织表。</p>
                  </div>
               </div><a id="VLDBG1405"></a><div class="props_rev_3"><a id="GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" name="GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0"></a><h4 id="VLDBG-GUID-022729FC-67A8-49F6-8D4A-9144B55A62D0" class="sect4">非分区索引组织表</h4>
                  <div>
                     <p>非分区索引组织表上的并行查询使用并行快速全扫描。</p>
                     <p>通过将索引段划分为足够大的块范围，然后以需求驱动的方式将块范围分配给并行执行服务器来分配工作。对应于任何行的溢出块仅由具有该行的进程以需求驱动的方式访问。</p>
                  </div>
               </div><a id="VLDBG1406"></a><div class="props_rev_3"><a id="GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" name="GUID-E7921774-F550-4E85-8349-D85C40EDB6AB"></a><h4 id="VLDBG-GUID-E7921774-F550-4E85-8349-D85C40EDB6AB" class="sect4">分区索引组织表</h4>
                  <div>
                     <p>索引范围扫描和快速全扫描都可以并行执行。</p>
                     <p>对于并行快速全扫描，并行化与非分区索引组织表相同。根据DOP，每个并行执行服务器获得一个或多个分区，每个分区包含主键索引段和关联的溢出段（如果有）。</p>
                  </div>
               </div><a id="VLDBG1407"></a><div class="props_rev_3"><a id="GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" name="GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA"></a><h4 id="VLDBG-GUID-80117C32-A2A0-477B-B609-E2EA4D7598AA" class="sect4">对象类型的并行查询</h4>
                  <div>
                     <p>可以对包含对象类型列的对象类型表和表执行并行查询。</p>
                     <p>对象类型的并行查询支持可用于对象类型的顺序查询的所有功能，包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对象类型的方法</p>
                        </li>
                        <li>
                           <p>对象类型的属性访问</p>
                        </li>
                        <li>
                           <p>用于创建对象类型实例的构造函数</p>
                        </li>
                        <li>
                           <p>对象视图</p>
                        </li>
                        <li>
                           <p>PL / SQL和Oracle调用接口（OCI）查询对象类型</p>
                        </li>
                     </ul>
                     <p>并行查询的对象类型的大小没有限制。</p>
                     <p>以下限制适用于对对象类型使用并行查询：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于涉及连接和排序的查询（通过<code class="codeph">ORDER</code> <code class="codeph">BY</code> ， <code class="codeph">GROUP</code> <code class="codeph">BY</code>或set操作），需要<code class="codeph">MAP</code>函数来并行执行查询。如果没有<code class="codeph">MAP</code>功能，查询将自动连续执行。
                           </p>
                        </li>
                        <li>
                           <p>对象类型不支持并行DML和并行DDL，并且这些语句总是以串行方式执行。</p>
                        </li>
                     </ul>
                     <p>在由于任何这些限制而无法并行执行查询的所有情况下，整个查询将按顺序执行而不会给出错误消息。</p>
                  </div>
               </div><a id="VLDBG1408"></a><div class="props_rev_3"><a id="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" name="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C"></a><h4 id="VLDBG-GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" class="sect4">并行化查询的规则</h4>
                  <div>
                     <p>SQL查询只能在某些条件下并行执行。</p>
                     <p>仅当满足下列条件之一时，才能并行执行<code class="codeph">SELECT</code>语句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该查询包括语句级别或对象级别并行提示规范（ <code class="codeph">PARALLEL</code>或<code class="codeph">PARALLEL_INDEX</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>查询中引用的模式对象具有与之关联的<code class="codeph">PARALLEL</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>此外，执行计划应至少具有以下之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>全表扫描</p>
                        </li>
                        <li>
                           <p>跨越多个分区的索引范围扫描</p>
                        </li>
                        <li>
                           <p>索引快速全扫描</p>
                        </li>
                        <li>
                           <p>并行表函数</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0C96782">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
            </div><a id="VLDBG1411"></a><div class="props_rev_3"><a id="GUID-41774038-773B-40A5-BDCD-AB16A189C035" name="GUID-41774038-773B-40A5-BDCD-AB16A189C035"></a><h3 id="VLDBG-GUID-41774038-773B-40A5-BDCD-AB16A189C035" class="sect3">关于并行DDL语句</h3>
               <div>
                  <p>本主题介绍了DDL语句的并行性。</p>
                  <p>有关DDL语句的并行性的此部分包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" title="您可以并行执行未分区或分区的表和索引的DDL语句。">可并行化的DDL语句</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" title="并行执行使您可以并行执行查询，并创建从另一个表或一组表创建表作为子查询的操作。">关于并行使用CREATE TABLE AS SELECT</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" title="并行DDL通常用于创建汇总表或执行作为独立事务的大量数据加载，这些事务并不总是需要可恢复。">可恢复性和并行DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F002024A-0EA9-4526-900E-02815077E8C9" title="并行创建表或索引会影响空间管理。">并行DDL的空间管理</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" title="并行创建表或索引时，每个并行执行服务器使用CREATE语句的STORAGE子句中的值来创建临时段来存储行。">使用字典管理表空间时的存储空间</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" title="并行创建索引和表时，每个并行执行服务器都会分配一个新范围，并使用表或索引数据填充范围。">自由空间和并行DDL</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">DDL声明规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1412"></a><div class="props_rev_3"><a id="GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" name="GUID-365F1095-6434-44E2-AE16-F2777EDC82F1"></a><h4 id="VLDBG-GUID-365F1095-6434-44E2-AE16-F2777EDC82F1" class="sect4">可并行化的DDL语句</h4>
                  <div>
                     <p>您可以并行执行未分区或分区的表和索引的DDL语句。</p>
                     <p>非分区表和索引的并行DDL语句是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">MOVE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code></p>
                        </li>
                     </ul>
                     <p>分区表和索引的并行DDL语句是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code> { <code class="codeph">MOVE|SPLIT|COALESCE}</code> <code class="codeph">PARTITION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code> { <code class="codeph">REBUILD|SPLIT</code> } <code class="codeph">PARTITION</code></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>仅当分割的（全局）索引分区可用时，才能并行执行此语句。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>所有这些DDL操作都可以在<code class="codeph">NOLOGGING</code>模式下执行，以进行并行或串行执行。
                     </p>
                     <p>索引组织表<code class="codeph">The CREATE</code> <code class="codeph">TABLE</code>语句可以使用或不使用<code class="codeph">AS</code> <code class="codeph">SELECT</code>子句并行执行。
                     </p>
                     <p>在具有对象列的表上不能发生并行DDL。并行DDL不能出现在具有<code class="codeph">LOB</code>列的非分区表上。
                     </p>
                  </div>
               </div><a id="VLDBG1414"></a><a id="VLDBG1413"></a><div class="props_rev_3"><a id="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" name="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7"></a><h4 id="VLDBG-GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7" class="sect4">关于并行使用CREATE TABLE AS SELECT</h4>
                  <div>
                     <p>并行执行使您可以并行执行查询，并创建从另一个表或一组表创建表作为子查询的操作。</p>
                     <p>此并行功能在创建汇总表或汇总表时非常有用。</p>
                     <p>请注意，无法并行创建和填充群集表。</p>
                     <p><a href="types-parallelism.html#GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7__I1006622">图8-4</a>说明了并行创建子查询的汇总表。
                     </p>
                     <div class="figure" id="GUID-7E3B7D97-3AF2-4A5D-8C48-64AD35FD55D7__I1006622">
                        <p class="titleinfigure">图8-4并行创建汇总表</p><img src="img/vldbg012.gif" width="600" alt="下面是图8-4的描述" title="下面是图8-4的描述" longdesc="img_text/vldbg012.html"><br><a href="img_text/vldbg012.html">“图8-4并行创建汇总表”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="VLDBG1415"></a><div class="props_rev_3"><a id="GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" name="GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1"></a><h4 id="VLDBG-GUID-6F71DFCF-9449-4910-8ADF-35A2821E42D1" class="sect4">可恢复性和并行DDL</h4>
                  <div>
                     <p>并行DDL通常用于创建汇总表或执行作为独立事务的大量数据加载，这些事务并不总是需要可恢复。</p>
                     <p>通过关闭Oracle数据库的日志记录，没有撤销或重做日志生成，所以并行DML操作很可能会表现得更好，而成为<span class="italic">全</span> <span class="italic"><span class="italic">有</span>或</span> <span class="italic">全无</span>操作。换句话说，如果操作失败，无论出于何种原因，您必须重做操作，无法重新启动它。
                     </p>
                     <p>如果在并行表创建（或任何其他并行DDL操作）期间禁用日志记录，则应在创建表后备份包含表的表空间，以避免因介质故障而丢失表。</p>
                     <p>使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ， <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> ， <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>和<code class="codeph">ALTER</code> <code class="codeph">INDEX</code>语句的<code class="codeph">NOLOGGING</code>子句禁用撤消和重做日志生成。
                     </p>
                  </div>
               </div><a id="VLDBG1416"></a><div class="props_rev_3"><a id="GUID-F002024A-0EA9-4526-900E-02815077E8C9" name="GUID-F002024A-0EA9-4526-900E-02815077E8C9"></a><h4 id="VLDBG-GUID-F002024A-0EA9-4526-900E-02815077E8C9" class="sect4">并行DDL的空间管理</h4>
                  <div>
                     <p>并行创建表或索引会影响空间管理。</p>
                     <p>这些空间管理含义会影响并行操作期间所需的存储空间以及创建表或索引后可用的可用空间。</p>
                  </div>
               </div><a id="VLDBG1417"></a><div class="props_rev_3"><a id="GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" name="GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4"></a><h4 id="VLDBG-GUID-603ABE50-6C5E-4B77-B49F-6846B2351FA4" class="sect4">使用字典管理表空间时的存储空间</h4>
                  <div>
                     <p>并行创建表或索引时，每个并行执行服务器使用<code class="codeph">CREATE</code>语句的<code class="codeph">STORAGE</code>子句中的值来创建临时段来存储行。
                     </p>
                     <p>在创建表时，使用<code class="codeph">NEXT</code>设置为4 MB且<code class="codeph">PARALLEL</code> <code class="codeph">DEGREE</code>为16创建的表占用至少64兆字节（MB），因为每个并行服务器进程的启动范围为4 MB。当并行执行协调器组合段时，可以修剪一些段，并且得到的表可能小于请求的64 MB。</p>
                  </div>
               </div><a id="VLDBG1419"></a><a id="VLDBG1418"></a><div class="props_rev_3"><a id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" name="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794"></a><h4 id="VLDBG-GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794" class="sect4">自由空间和并行DDL</h4>
                  <div>
                     <p>并行创建索引和表时，每个并行执行服务器都会分配一个新范围，并使用表或索引数据填充范围。</p>
                     <p>例如，如果创建DOP为4的索引，则索引最初至少有四个范围。对于并行重建索引以及并行移动，拆分或重建分区，这种扩展区分配是相同的。</p>
                     <p>串行操作要求架构对象至少具有一个扩展区。并行创建要求表或索引至少具有与创建模式对象的并行执行服务器一样多的扩展区。</p>
                     <p>并行创建表或索引时，可以创建可用空间区域。当并行执行服务器使用的临时段大于存储行所需的临时段时，会发生这种情况。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果每个临时段中未使用的空间大于表空间级别设置的<code class="codeph">MINIMUM</code> <code class="codeph">EXTENT</code>参数的值，则Oracle数据库会在将所有临时段中的行合并到表或索引中时修剪未使用的空间。未使用的空间将返回到系统可用空间，并且可以为新扩展区分配，但由于它不是连续的空间（外部碎片），因此无法合并为更大的段。
                           </p>
                        </li>
                        <li>
                           <p>如果每个临时段中未使用的空间小于<code class="codeph">MINIMUM</code> <code class="codeph">EXTENT</code>参数的值，则在合并临时段中的行时，无法修剪未使用的空间。此未使用的空间不会返回到系统可用空间;它成为表或索引的一部分（内部碎片），仅适用于后续插入或需要额外空间的更新。
                           </p>
                        </li>
                     </ul>
                     <p>例如，如果为<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句指定DOP为3，但表空间中只有一个数据文件，则可能发生内部碎片， <a href="types-parallelism.html#GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__I1006705">如图8-5</a>所示。数据文件的内部表范围内的可用空间区域不能与其他可用空间合并，也不能作为扩展区分配。
                     </p>
                     <div class="figure" id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__I1006705">
                        <p class="titleinfigure">图8-5无法使用的可用空间（内部碎片）</p><img src="img/vldbg014.gif" width="600" alt="下面是图8-5的描述" title="下面是图8-5的描述" longdesc="img_text/vldbg014.html"><br><a href="img_text/vldbg014.html">“图8-5无法使用的可用空间（内部碎片）”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-AE168A32-CA8B-45A5-9D6C-08F1C2109794__GUID-F3C2FE7B-E947-46F3-8589-F9524A562EA3">
                        <p class="notep1">也可以看看：</p>
                        <p>有关并行创建表和索引的详细信息，请参见<a href="../tgsql/introduction-to-sql-tuning.html#TGSQL112" target="_blank"><span><cite>“Oracle数据库SQL调优指南”</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="VLDBG1420"></a><div class="props_rev_3"><a id="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" name="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400"></a><h4 id="VLDBG-GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" class="sect4">DDL声明规则</h4>
                  <div>
                     <p>在某些条件下，DDL操作可以并行执行。</p>
                     <p>仅当满足以下条件中的至少一个时，DDL操作才能并行执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p></p><code class="codeph">PARALLEL</code>子句（声明）在语法中指定。对于<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> ， <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> ， <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code>和<code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code> ，并行声明存储在数据字典中。
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">DDL</code> 。
                           </p>
                        </li>
                     </ul>
                     <p></p>
                     <div class="infoboxnotealso" id="GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0B2B02E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1426"></a><div class="props_rev_3"><a id="GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" name="GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD"></a><h4 id="VLDBG-GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" class="sect4">CREATE TABLE AS SELECT的规则</h4>
                  <div>
                     <p>根据并行化DDL语句的规则，并行化<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句的<code class="codeph">CREATE</code>操作。
                     </p>
                     <p>此外，语句的<code class="codeph">SELECT</code>部分中指定的语句级别<code class="codeph">PARALLEL</code>提示也可以并行化DDL操作。有关并行化DDL语句的规则的信息，请参阅DDL语句<a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">规则</a> 。
                     </p>
                     <p>当<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>的<code class="codeph">CREATE</code>操作并行化时，Oracle数据库还会尽可能并行化扫描操作。
                     </p>
                     <p>即使DDL部分未并行化，也可以根据并行化查询的规则来并行化<code class="codeph">SELECT</code>部分。
                     </p>
                     <p>自动并行度（Auto DOP）并行化DDL和语句的查询部分。</p>
                     <p>有关确定并行度（DOP）的规则的信息，请参阅<a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句的并行度规则</a> 。
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1431"></a><div class="props_rev_3"><a id="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" name="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC"></a><h3 id="VLDBG-GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC" class="sect3">关于并行DML操作</h3>
               <div>
                  <p>本主题中介绍了并行DML操作。</p>
                  <p>并行DML（ <code class="codeph">PARALLEL</code> <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code> ）使用并行执行机制来加速或扩展针对大型数据库表和索引的大型DML操作。
                  </p>
                  <div class="infoboxnote" id="GUID-1D5C8D6C-0A0E-4CDB-8B32-16EC3C856ACC__GUID-788E241A-A3DE-4037-8104-9E870FE72EE7">
                     <p class="notep1">注意：</p>
                     <p>虽然DML通常包含查询，但在本章中，术语DML仅指<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>操作。
                     </p>
                  </div>
                  <p>本节讨论以下并行DML主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" title="并行DML在决策支持系统（DSS）环境中非常有用，在该环境中，访问大型对象的性能和可伸缩性非常重要。并行DML补充了并行查询，为您提供DSS数据库的查询和更新功能。">何时使用并行DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" title="只有在会话或SQL语句中显式启用并行DML时，才能并行化DML语句。">启用并行DML模式</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="仅在某些条件下并行化更新，合并或删除操作。">UPDATE，MERGE和DELETE的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" title="为了并行执行DML操作，并行执行协调器获取并行执行服务器，并且每个并行执行服务器在其自己的并行处理事务下执行一部分工作。">并行DML的事务限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" title="如果使用回滚段而不是自动撤消管理，则使用并行DML时会有一些限制。">回滚段</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" title="回滚并行DML操作所需的时间大致等于执行正向操作所需的时间。">恢复并行DML</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" title="并行UPDATE使用对象中的现有可用空间，而直接路径INSERT获取数据的新扩展区。">并行DML的空间考虑因素</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-6626C70C-876C-47A4-8C01-9B66574062D8" title="有几个限制适用于并行DM。">并行DML的限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" title="本主题中介绍了完整性约束和并行DML语句的交互。">数据完整性限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" title="如果受影响的表包含可能因语句而被调用的已启用触发器，则不会并行执行DML操作。">触发限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-09FC59FF-9F63-453C-86D3-6D171022314A" title="本主题将讨论分布式事务限制。">分布式事务限制</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" title="本主题中显示了分布式事务处理的几个示例。">分布式事务并行化的示例</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" title="像UNION或UNION ALL这样的集合运算符由多个查询（分支）组合成一个SQL语句组成。">并行执行Union All</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1432"></a><div class="props_rev_3"><a id="GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" name="GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5"></a><h4 id="VLDBG-GUID-70849484-CCE9-4C2A-A2C8-9729700CAEC5" class="sect4">何时使用并行DML</h4>
                  <div>
                     <p>并行DML在决策支持系统（DSS）环境中非常有用，在该环境中，访问大型对象的性能和可伸缩性非常重要。并行DML补充了并行查询，为您提供DSS数据库的查询和更新功能。</p>
                     <p>设置并行性的开销使得并行DML操作对于短OLTP事务不可行。但是，并行DML操作可以加速OLTP数据库中运行的批处理作业。</p>
                     <p>使用并行DML的几种情况包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="types-parallelism.html#GUID-18B2AF09-C548-48DE-A794-86224111549F" title="在数据仓库系统中，必须使用生产系统中的新数据或修改数据定期刷新（更新）大型表。">刷新数据仓库系统中的表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" title="在DSS环境中，许多应用程序需要复杂的计算，涉及构造和操作许多大型中间摘要表。">创建中间摘要表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" title="许多DSS应用程序根据一组标准定期对客户进行评分。">使用评分表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" title="历史表描述了企业在最近的时间间隔内的业务事务。">更新历史表</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" title="在非工作时间在OLTP数据库中执行的批处理作业具有固定的时间，在此期间作业必须完成。确保及时完成工作的一个好方法是并行执行其操作。">运行批处理作业</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1433"></a><div class="props_rev_3"><a id="GUID-18B2AF09-C548-48DE-A794-86224111549F" name="GUID-18B2AF09-C548-48DE-A794-86224111549F"></a><h5 id="VLDBG-GUID-18B2AF09-C548-48DE-A794-86224111549F" class="sect5">刷新数据仓库系统中的表</h5>
                     <div>
                        <p>在数据仓库系统中，必须使用生产系统中的新数据或修改数据定期刷新（更新）大型表。</p>
                        <p>您可以使用<code class="codeph">MERGE</code>语句有效地执行此操作。
                        </p>
                     </div>
                  </div><a id="VLDBG1434"></a><div class="props_rev_3"><a id="GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" name="GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27"></a><h5 id="VLDBG-GUID-CD8CD670-F73A-4F83-8BB4-FF26866C0E27" class="sect5">创建中间摘要表</h5>
                     <div>
                        <p>在DSS环境中，许多应用程序需要复杂的计算，涉及构造和操作许多大型中间摘要表。</p>
                        <p>这些摘要表通常是临时的，通常不需要记录。并行DML可以加速对这些大型中间表的操作。一个好处是您可以将增量结果放在中间表中并执行并行更新。</p>
                        <p>此外，汇总表可能包含累积或比较信息，这些信息必须在申请会议之后持续存在;因此，临时表是不可行的。并行DML操作可以加快对这些大型汇总表的更改。</p>
                     </div>
                  </div><a id="VLDBG1435"></a><div class="props_rev_3"><a id="GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" name="GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34"></a><h5 id="VLDBG-GUID-E9C40F60-C7B5-47B8-8D71-ABA1062B3F34" class="sect5">使用评分表</h5>
                     <div>
                        <p>许多DSS应用程序根据一组标准定期对客户进行评分。</p>
                        <p>分数通常存储在大型DSS表中。然后将得分信息用于做出决定，例如，包括在邮件列表中。</p>
                        <p>此评分活动查询并更新表中的大量行。并行DML可以加速对这些大表的操作。</p>
                     </div>
                  </div><a id="VLDBG1436"></a><div class="props_rev_3"><a id="GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" name="GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58"></a><h5 id="VLDBG-GUID-5196494D-E925-402C-AC78-F2AFE3F6FD58" class="sect5">更新历史表</h5>
                     <div>
                        <p>历史表描述了企业在最近的时间间隔内的业务事务。</p>
                        <p>DBA会定期删除最旧的行集，并在表中插入一组新行。并行<code class="codeph">INSERT</code> <code class="codeph">SELECT</code>和并行<code class="codeph">DELETE</code>操作可以加速此翻转任务。
                        </p>
                        <p>删除分区也可用于删除旧行。但是，该表必须按日期和适当的时间间隔进行分区。</p>
                     </div>
                  </div><a id="VLDBG1437"></a><div class="props_rev_3"><a id="GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" name="GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3"></a><h5 id="VLDBG-GUID-53E3F377-C8E5-434C-9DAB-E19D125F3DE3" class="sect5">运行批处理作业</h5>
                     <div>
                        <p>在非工作时间在OLTP数据库中执行的批处理作业具有固定的时间，在此期间作业必须完成。确保及时完成工作的一个好方法是并行执行其操作。</p>
                        <p>随着工作量的增加，可以添加更多的计算机资源;并行操作的scaleup属性确保可以满足时间约束。</p>
                     </div>
                  </div>
               </div><a id="VLDBG1438"></a><div class="props_rev_3"><a id="GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" name="GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010"></a><h4 id="VLDBG-GUID-5EB01FA8-030B-45BB-9B16-2D13881F6010" class="sect4">启用并行DML模式</h4>
                  <div>
                     <p>只有在会话或SQL语句中显式启用并行DML时，才能并行化DML语句。</p>
                     <p>要在会话中启用此模式，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION ENABLE PARALLEL DML;</pre><p>要在特定SQL语句中启用并行DML模式，请包括<code class="codeph">ENABLE_PARALLEL_DML</code> SQL提示。例如：</p><pre class="oac_no_warn" dir="ltr">INSERT / * + ENABLE_PARALLEL_DML * / ...</pre><p>此模式是必需的，因为并行DML和串行DML具有不同的锁定，事务和磁盘空间要求，并且默认情况下会为会话禁用并行DML。</p>
                     <p>禁用并行DML时，即使使用<code class="codeph">PARALLEL</code>提示，也不会并行执行DML。
                     </p>
                     <p>在会话中启用并行DML时，此会话中的所有DML语句都被视为并行执行。在具有<code class="codeph">ENABLE_PARALLEL_DML</code>提示的SQL语句中启用并行DML时，仅考虑该特定语句进行并行执行。但是，即使启用了并行DML，如果没有并行提示或没有具有并行属性的表，或者如果违反了对并行操作的限制，则DML操作仍可以串行执行。
                     </p>
                     <p>会话的<code class="codeph">PARALLEL</code> <code class="codeph">DML</code>模式不会影响<code class="codeph">SELECT</code>语句，DDL语句和DML语句的查询部分的并行性。如果未设置此模式，则不会并行化DML操作，但仍可以并行化DML语句中的扫描或连接操作。
                     </p>
                     <p>为会话启用并行DML模式后，可以使用<code class="codeph">DISABLE_PARALLEL_DML</code> SQL提示禁用特定SQL语句的模式。
                     </p>
                     <p>有关更多信息，请参阅<a href="types-parallelism.html#GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" title="并行UPDATE使用对象中的现有可用空间，而直接路径INSERT获取数据的新扩展区。">并行DML的空间注意事项和并行DML的</a> <a href="types-parallelism.html#GUID-6626C70C-876C-47A4-8C01-9B66574062D8" title="有几个限制适用于并行DM。">限制</a> 。</p>
                  </div>
               </div><a id="VLDBG1439"></a><div class="props_rev_3"><a id="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" name="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F"></a><h4 id="VLDBG-GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" class="sect4">UPDATE，MERGE和DELETE的规则</h4>
                  <div>
                     <p>仅在某些条件下并行化更新，合并或删除操作。</p>
                     <p>仅当满足以下条件中的至少一个时，才会并行化<code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>正在更新，合并或删除的表具有由先前的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句设置的<code class="codeph">PARALLEL</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>在DML语句中指定语句级别或对象级别<code class="codeph">PARALLEL</code>提示。
                           </p>
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">DML</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>如果语句包含子查询或可更新视图，则它们也可以基于并行化查询的规则并行执行。并行化<code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>部分的决定与查询部分无关，反之亦然。语句级别<code class="codeph">PARALLEL</code>提示或Auto DOP并行化DML和查询部分。
                     </p>
                     <div class="infoboxnotealso" id="GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F__ORACLEDATABASESQLLANGUAGEREFERENCEF-F0B2B02E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p>对更新，合并或删除操作可能存在的限制<a href="parallel-exec-tips.html#GUID-FEE610A3-F12C-47F6-9571-ADBB08096B06" title="基于所使用的Oracle数据库的软件级别，并行度有一定的限制。">的并行度的</a>限制</p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1444"></a><div class="props_rev_3"><a id="GUID-EB793246-B39F-444B-A2F0-7D101F016557" name="GUID-EB793246-B39F-444B-A2F0-7D101F016557"></a><h4 id="VLDBG-GUID-EB793246-B39F-444B-A2F0-7D101F016557" class="sect4">INSERT SELECT的规则</h4>
                  <div>
                     <p>仅在某些条件下并行执行插入操作。</p>
                     <p>仅当满足以下条件中的至少一个时，才会并行执行<code class="codeph">INSERT</code>操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>插入到（引用对象）中的表具有由先前的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句设置的<code class="codeph">PARALLEL</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>在DML语句中的<code class="codeph">INSERT</code>之后指定语句级别或对象级别<code class="codeph">PARALLEL</code>提示。
                           </p>
                        </li>
                        <li>
                           <p>已启用自动并行度（自动DOP）。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code>语句强制<code class="codeph">PARALLEL</code> <code class="codeph">DML</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>并行化<code class="codeph">INSERT</code>操作的决定与<code class="codeph">SELECT</code>操作无关，反之亦然。可以基于并行化查询的规则来并行化<code class="codeph">SELECT</code>操作。语句级别<code class="codeph">PARALLEL</code>提示或Auto DOP并行化<code class="codeph">INSERT</code>和<code class="codeph">SELECT</code>操作。
                     </p>
                     <div class="infoboxnotealso" id="GUID-EB793246-B39F-444B-A2F0-7D101F016557__ORACLEDATABASESQLLANGUAGEREFERENCEF-F22CAB96">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>关于Auto DOP信息的自动<a href="degree-parallel.html#GUID-76AC9190-43AC-4529-89AD-1BDA95C6DFBD" title="自动并行度（Auto DOP）使Oracle数据库能够自动决定语句是否应该并行执行以及它应该使用什么DOP。">并行度</a></p>
                           </li>
                           <li>
                              <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" title="SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。">SQL语句</a>的并行度规则，用于确定并行度（DOP）的规则的信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div><a id="VLDBG1448"></a><div class="props_rev_3"><a id="GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" name="GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859"></a><h4 id="VLDBG-GUID-53B78D2C-FA4C-4CA1-AF28-91D5AE142859" class="sect4">并行DML的事务限制</h4>
                  <div>
                     <p>为了并行执行DML操作，并行执行协调器获取并行执行服务器，并且每个并行执行服务器在其自己的并行处理事务下执行一部分工作。</p>
                     <p></p>
                     <p>请注意以下条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个并行执行服务器创建不同的并行进程事务。</p>
                        </li>
                        <li>
                           <p>如果使用回滚段而不是自动撤消管理，则可能希望通过限制驻留在同一回滚段中的并行进程事务的数量来减少回滚段上的争用。有关更多信息，请参阅<a href="../sqlrf/ROLLBACK.html#SQLRF01610" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </li>
                     </ul>
                     <p>协调器也有自己的协调器事务，它可以有自己的回滚段。为了确保用户级事务原子性，协调器使用两阶段提交协议来提交并行进程事务所执行的更改。</p>
                     <p>为并行DML启用的会话可能会在会话中以特殊模式放置事务：如果事务中的任何DML语句并行修改表，则后续的串行或并行查询或DML语句不能再在该事务中访问同一个表。在交易期间无法看到并行修改的结果。</p>
                     <p>尝试访问在同一事务中并行修改的表的串行或并行语句将被拒绝，并显示错误消息。</p>
                     <p>如果在并行启用DML的会话中执行PL / SQL过程或块，则此规则适用于过程或块中的语句。</p>
                  </div>
               </div><a id="VLDBG1449"></a><div class="props_rev_3"><a id="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" name="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF"></a><h4 id="VLDBG-GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF" class="sect4">回滚段</h4>
                  <div>
                     <p>如果使用回滚段而不是自动撤消管理，则使用并行DML时会有一些限制。</p>
                     <div class="infoboxnotealso" id="GUID-C61F3DE8-A6EF-4C2C-871A-EE62AA68B8CF__GUID-867C5D01-292C-40EC-A677-B0B1CEF1EE4F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关并行DML和回滚段限制的信息，请<a href="../sqlrf/ROLLBACK.html#SQLRF01610" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="VLDBG1450"></a><div class="props_rev_3"><a id="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" name="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912"></a><h4 id="VLDBG-GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912" class="sect4">恢复并行DML</h4>
                  <div>
                     <p>回滚并行DML操作所需的时间大致等于执行正向操作所需的时间。</p>
                     <p>Oracle数据库支持事务和进程故障后以及实例和系统故障后的并行回滚。Oracle数据库可以并行处理事务恢复的前滚阶段和后滚阶段。</p>
                     <div class="infoboxnotealso" id="GUID-8115A2BD-F68E-42BA-A7E0-4562D8FFA912__GUID-A3F3F1D0-E67D-47AB-BC43-B379F773B8FE">
                        <p class="notep1">也可以看看：</p>
                        <p>有关并行回滚的详细信息，请参见<a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                     </div>
                  </div><a id="VLDBG1451"></a><div class="props_rev_3"><a id="GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA" name="GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA"></a><h5 id="VLDBG-GUID-C601D304-8F9E-4C8D-A2D9-A2C5EA95CFFA" class="sect5">用户发布回滚的事务恢复</h5>
                     <div>
                        <p>由于语句错误导致的事务失败中由用户发出的回滚由并行执行协调器和并行执行服务器并行执行。</p>
                        <p>回滚所需的时间与转发事务的时间大致相同。</p>
                     </div>
                  </div><a id="VLDBG1452"></a><div class="props_rev_3"><a id="GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87" name="GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87"></a><h5 id="VLDBG-GUID-29BD5A8B-A041-43F2-B4B9-D678E4AAFB87" class="sect5">流程恢复</h5>
                     <div>
                        <p>PMON进程执行从并行执行协调器或并行执行服务器的故障中恢复。</p>
                        <p>如果并行执行服务器或并行执行协调器失败，则PMON将从该进程回滚工作，并且事务中的所有其他进程将回滚其更改。</p>
                     </div>
                  </div><a id="VLDBG1453"></a><div class="props_rev_3"><a id="GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24" name="GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24"></a><h5 id="VLDBG-GUID-AE2F93BE-FC46-43F7-A29B-173FE219DD24" class="sect5">系统恢复</h5>
                     <div>
                        <p>从系统故障中恢复需要新的启动。</p>
                        <p>恢复由SMON进程和SMON生成的任何恢复服务器进程执行。可以使用并行回滚来恢复并行DML语句。如果初始化参数<code class="codeph">COMPATIBLE</code>设置为8.1.3或更高，则快速启动按需回滚可以按需一次一个块地恢复终止的事务。
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1454"></a><div class="props_rev_3"><a id="GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" name="GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B"></a><h4 id="VLDBG-GUID-F78A9A7A-4F6B-4384-A4EE-97D5D595157B" class="sect4">并行DML的空间考虑因素</h4>
                  <div>
                     <p>并行<code class="codeph">UPDATE</code>使用对象中的现有可用空间，而直接路径<code class="codeph">INSERT</code>获取数据的新扩展区。
                     </p>
                     <p>空间使用特性可能与串行执行并行不同，因为多个并发子事务修改了对象。</p>
                  </div>
               </div><a id="VLDBG1455"></a><div class="props_rev_3"><a id="GUID-6626C70C-876C-47A4-8C01-9B66574062D8" name="GUID-6626C70C-876C-47A4-8C01-9B66574062D8"></a><h4 id="VLDBG-GUID-6626C70C-876C-47A4-8C01-9B66574062D8" class="sect4">并行DML的限制</h4>
                  <div>
                     <p>有几个限制适用于并行DM。</p>
                     <p>以下限制适用于并行DML（包括直接路径<code class="codeph">INSERT</code> ）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">UPDATE</code> ， <code class="codeph">MERGE</code>和<code class="codeph">DELETE</code>操作的分<code class="codeph">MERGE</code>并行性要求<code class="codeph">COMPATIBLE</code>初始化参数设置为9.2或更高。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT</code> <code class="codeph">VALUES</code>语句永远不会并行执行。
                           </p>
                        </li>
                        <li>
                           <p>事务可以包含修改不同表的多个并行DML语句，但在并行DML语句修改表之后，后续的串行或并行语句（DML或查询）不能再在该事务中访问同一个表。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在串行直接路径<code class="codeph">INSERT</code>语句之后也存在此限制：在该事务期间，后续SQL语句（DML或查询）不能访问已修改的表。
                                 </p>
                              </li>
                              <li>
                                 <p>在并行DML或直接路径<code class="codeph">INSERT</code>语句之前允许访问同一表的查询，但不允许在之后。
                                 </p>
                              </li>
                              <li>
                                 <p>尝试访问已由并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>或<code class="codeph">MERGE</code>修改的表或在同一事务期间直接路径<code class="codeph">INSERT</code>任何串行或并行语句都将被拒绝，并显示错误消息。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>无法对具有触发器的表执行并行DML操作。</p>
                        </li>
                        <li>
                           <p>并行DML不支持复制功能。</p>
                        </li>
                        <li>
                           <p>并行DML不会出现在某些约束条件下：自引用完整性，删除级联和延迟完整性。此外，对于直接路径<code class="codeph">INSERT</code> ，不支持任何参照完整性。
                           </p>
                        </li>
                        <li>
                           <p>如果不访问对象列，则可以对具有对象列的表执行并行DML。</p>
                        </li>
                        <li>
                           <p>如果表是分区的，则可以在具有<code class="codeph">LOB</code>列的表上完成并行DML。但是，不支持分区内并行性。
                           </p>
                           <p>对于具有LOB列的非分区表，只要将LOB列声明为SecureFiles LOB，就支持并行<code class="codeph">INSERT</code>操作。不支持对此类表进行并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>操作。
                           </p>
                        </li>
                        <li>
                           <p>如果DML操作位于分布式事务中，或者DML或查询操作位于远程对象上，则不能并行执行。</p>
                        </li>
                        <li>
                           <p>不支持群集表。</p>
                        </li>
                        <li>
                           <p>临时表不支持并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">MERGE</code>操作。
                           </p>
                        </li>
                        <li>
                           <p>如果表未分区，则具有位图索引的表不支持并行DML。</p>
                        </li>
                     </ul>
                     <p>违反这些限制会导致语句在没有警告或错误消息的情况下串行执行（除了对访问事务中的同一个表的语句的限制，这可能导致错误消息）。</p>
                  </div><a id="VLDBG1456"></a><div class="props_rev_3"><a id="GUID-3ADF9B57-757A-47ED-B0DE-401977671C23" name="GUID-3ADF9B57-757A-47ED-B0DE-401977671C23"></a><h5 id="VLDBG-GUID-3ADF9B57-757A-47ED-B0DE-401977671C23" class="sect5">划分密钥限制</h5>
                     <div>
                        <p>如果更新不会导致行移动到新分区，则只能将分区表的分区键更新为新值。</p>
                        <p>如果在启用行移动子句的情况下定义表，则可以进行更新。</p>
                     </div>
                  </div><a id="VLDBG1457"></a><div class="props_rev_3"><a id="GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D" name="GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D"></a><h5 id="VLDBG-GUID-FB7A3DC7-7AE0-445A-9DB7-79FD3E24E53D" class="sect5">功能限制</h5>
                     <div>
                        <p>并行DML的功能限制与并行DDL和并行查询的功能限制相同。</p>
                        <p>有关更多信息，请参见<a href="types-parallelism.html#GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" title="SQL语句可以包含用PL / SQL，Java编写的用户定义函数，也可以包含C语言中的外部过程，这些函数可以作为SELECT列表，SET子句或WHERE子句的一部分出现。">关于函数的并行执行</a> 。
                        </p>
                     </div>
                  </div>
               </div><a id="VLDBG1458"></a><div class="props_rev_3"><a id="GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" name="GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3"></a><h4 id="VLDBG-GUID-CD387175-C782-4FE4-AAC7-D4FF94B30DA3" class="sect4">数据完整性限制</h4>
                  <div>
                     <p>本主题中介绍了完整性约束和并行DML语句的交互。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="types-parallelism.html#GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" title="本主题讨论NOT NULL和CHECK的完整性约束。">NOT NULL和CHECK</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-8B778C98-1A66-474C-88BB-778B260FE791" title="本主题讨论了UNIQUE和PRIMARY KEY的完整性约束。">独特和主要的关键</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" title="只要一个表上的DML操作可能导致另一个表上的递归DML操作，就会发生对引用完整性的限制。">外键（参考完整性）</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" title="本主题将讨论删除级联数据完整性限制。">删除级联</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" title="如果涉及引用的密钥（主键），则不会并行化具有自引用完整性约束的表上的DML。">自我指涉诚信</a></p>
                        </li>
                        <li>
                           <p><a href="types-parallelism.html#GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" title="本主题讨论了可延迟完整性约束。">可延迟的完整性约束</a></p>
                        </li>
                     </ul>
                  </div><a id="VLDBG1459"></a><div class="props_rev_3"><a id="GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" name="GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06"></a><h5 id="VLDBG-GUID-D4CFC1F2-44D3-4BE3-B5ED-6A309EB8BF06" class="sect5">NOT NULL和CHECK</h5>
                     <div>
                        <p>本主题讨论<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">CHECK</code>的完整性约束。
                        </p>
                        <p>允许<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">CHECK</code>完整性约束。它们不是并行DML的问题，因为它们分别在列和行级别强制执行。
                        </p>
                     </div>
                  </div><a id="VLDBG1460"></a><div class="props_rev_3"><a id="GUID-8B778C98-1A66-474C-88BB-778B260FE791" name="GUID-8B778C98-1A66-474C-88BB-778B260FE791"></a><h5 id="VLDBG-GUID-8B778C98-1A66-474C-88BB-778B260FE791" class="sect5">独特和主要的关键</h5>
                     <div>
                        <p>本主题讨论了<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>的完整性约束。
                        </p>
                        <p>允许使用<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>完整性约束。
                        </p>
                     </div>
                  </div><a id="VLDBG1462"></a><a id="VLDBG1461"></a><div class="props_rev_3"><a id="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" name="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F"></a><h5 id="VLDBG-GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F" class="sect5">外键（参考完整性）</h5>
                     <div>
                        <p>只要一个表上的DML操作可能导致另一个表上的递归DML操作，就会发生对引用完整性的限制。</p>
                        <p>当执行完整性检查时，有必要同时查看对正在修改的对象所做的所有更改。</p>
                        <p><a href="types-parallelism.html#GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F__G1016143" title="参照完整性限制">表8-1</a>列出了参照完整性约束中涉及的表可能执行的所有操作。
                        </p>
                        <div class="tblformal" id="GUID-9047D568-FB38-4931-940A-8BDAE4B98D2F__G1016143">
                           <p class="titleintable">表8-1参照完整性限制</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="参照完整性限制" width="100%" border="1" summary="Referential Integrity Restrictions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d53328e5015">DML声明</th>
                                    <th align="left" valign="bottom" width="25%" id="d53328e5018">在父母身上发布</th>
                                    <th align="left" valign="bottom" width="23%" id="d53328e5021">发给孩子</th>
                                    <th align="left" valign="bottom" width="28%" id="d53328e5024">自我指涉</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5029" headers="d53328e5015 ">
                                       <p><code class="codeph">插入</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5029 d53328e5018 ">
                                       <p>（不适用）</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5029 d53328e5021 ">
                                       <p>没有并行化</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5029 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5043" headers="d53328e5015 ">
                                       <p><code class="codeph">合并</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5043 d53328e5018 ">
                                       <p>（不适用）</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5043 d53328e5021 ">
                                       <p>没有并行化</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5043 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5057" headers="d53328e5015 ">
                                       <p><code class="codeph">UPDATE</code>无动作</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5057 d53328e5018 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5057 d53328e5021 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5057 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5072" headers="d53328e5015 ">
                                       <p><code class="codeph">DELETE</code>无动作</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5072 d53328e5018 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5072 d53328e5021 ">
                                       <p>支持的</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5072 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53328e5087" headers="d53328e5015 ">
                                       <p><code class="codeph">DELETE</code> Cascade</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d53328e5087 d53328e5018 ">
                                       <p>没有并行化</p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d53328e5087 d53328e5021 ">
                                       <p>（不适用）</p>
                                    </td>
                                    <td align="left" valign="top" width="28%" headers="d53328e5087 d53328e5024 ">
                                       <p>没有并行化</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="VLDBG1463"></a><div class="props_rev_3"><a id="GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" name="GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F"></a><h5 id="VLDBG-GUID-D114D953-ED47-4670-9A66-27A1F0A6A14F" class="sect5">删除级联</h5>
                     <div>
                        <p>本主题将讨论删除级联数据完整性限制。</p>
                        <p>删除具有删除级联的外键的表未并行化，因为并行执行服务器尝试从多个分区（父表和子表）中删除行。</p>
                     </div>
                  </div><a id="VLDBG1464"></a><div class="props_rev_3"><a id="GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" name="GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986"></a><h5 id="VLDBG-GUID-6472CF44-EFF1-401F-A3C2-53254C9F3986" class="sect5">自我指涉诚信</h5>
                     <div>
                        <p>如果涉及引用的密钥（主键），则不会并行化具有自引用完整性约束的表上的DML。</p>
                        <p>对于所有其他列上的DML，可以实现并行性。</p>
                     </div>
                  </div><a id="VLDBG1465"></a><div class="props_rev_3"><a id="GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" name="GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC"></a><h5 id="VLDBG-GUID-4D8A774E-D27F-43D6-84D2-45C32DB9A9DC" class="sect5">可延迟的完整性约束</h5>
                     <div>
                        <p>本主题讨论了可延迟完整性约束。</p>
                        <p>如果任何可延迟约束适用于正在操作的表，则不会并行执行DML操作。</p>
                     </div>
                  </div>
               </div><a id="VLDBG1466"></a><div class="props_rev_3"><a id="GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" name="GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831"></a><h4 id="VLDBG-GUID-DFF6F4B8-D8FB-40C3-A9D5-CBE7AC03B831" class="sect4">触发限制</h4>
                  <div>
                     <p>如果受影响的表包含可能因语句而被调用的已启用触发器，则不会并行执行DML操作。</p>
                     <p>这意味着正在复制的表上的DML语句不是并行化的。</p>
                     <p>必须禁用相关触发器才能在表上并行化DML。如果启用或禁用触发器，则相关的共享游标将失效。</p>
                  </div>
               </div><a id="VLDBG1467"></a><div class="props_rev_3"><a id="GUID-09FC59FF-9F63-453C-86D3-6D171022314A" name="GUID-09FC59FF-9F63-453C-86D3-6D171022314A"></a><h4 id="VLDBG-GUID-09FC59FF-9F63-453C-86D3-6D171022314A" class="sect4">分布式事务限制</h4>
                  <div>
                     <p>本主题将讨论分布式事务限制。</p>
                     <p>如果DML操作位于分布式事务中，或者DML或查询操作位于远程对象上，则不能并行执行。</p>
                  </div>
               </div><a id="VLDBG1468"></a><div class="props_rev_3"><a id="GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" name="GUID-F3751631-4858-43FF-ACBB-B42307A43F0D"></a><h4 id="VLDBG-GUID-F3751631-4858-43FF-ACBB-B42307A43F0D" class="sect4">分布式事务并行化的示例</h4>
                  <div>
                     <p>本主题中显示了分布式事务处理的几个示例。</p>
                     <div class="section">
                        <p>在第一个示例中，DML语句查询远程对象。DML操作在没有通知的情况下串行执行，因为它引用了远程对象。</p><pre class="oac_no_warn" dir="ltr">INSERT / * + APPEND PARALLEL（t3,2）* / INTO t3 SELECT * FROM t4 @ dblink;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在下一个示例中，DML操作应用于远程对象。<code class="codeph">DELETE</code>操作未并行化，因为它引用了远程对象。
                        </p><pre class="oac_no_warn" dir="ltr">DELETE / * + PARALLEL（t1,2）* / FROM t1 @dblink;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在最后一个示例中，DML操作位于分布式事务中。<code class="codeph">DELETE</code>操作不是并行执行的，因为它发生在分布式事务中（由<code class="codeph">SELECT</code>语句启动）。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM t1 @ dblink; DELETE / * + PARALLEL（t2,2）* / FROM t2;承诺;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14182"></a><a id="VLDBG14131"></a><div class="props_rev_3"><a id="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" name="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433"></a><h4 id="VLDBG-GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433" class="sect4">并行执行Union All</h4>
                  <div>
                     <p>像<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>这样的集合运算符由多个查询（分支）组合成一个SQL语句组成。
                     </p>
                     <p>传统上，集合运算符以顺序方式处理。各个分支可以串行或并行处理，但一次只能处理一个分支，一个接一个分支。虽然这种方法满足许多用例，但在某些情况下， <code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的多个分支的处理应同时发生。最典型的情况是几个或所有分支都是远程SQL语句。在这种情况下，期望在所有参与的远程系统上进行并发处理以加速整个处理时间而不增加任何参与系统的工作量。
                     </p>
                     <p><code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的并发执行的默认行为由<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数的设置控制。设置为<code class="codeph">12.1</code> ，默认情况下启用并发执行。任何语句中至少有一个语句是本地的并且被认为是并行处理的语句，整个<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句也会同时处理。系统为语句的每个本地分支计算DOP，并选择最高DOP来执行整个<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句。然后，系统在尽可能多的分支上同时工作，使用所选择的DOP并行化并行处理的分支，以及串行和远程语句上的并发工作。
                     </p>
                     <p>当<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数设置为小于<code class="codeph">12.1</code>的值时，必须使用<code class="codeph">PQ_CONCURRENT_UNION</code>提示显式启用<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的并发执行。
                     </p>
                     <p>但是，与一个接一个的分支的顺序处理不同，并发处理不保证各个分支的结果的有序返回。如果需要按顺序返回一个分支，则必须使用<code class="codeph">NO_PQ_CONCURRENT_UNION</code>提示禁用并发处理，或者必须扩充SQL语句以唯一标识语句的各个分支并对此指定的标识符进行排序。
                     </p>
                     <p>除非特别使用<code class="codeph">PQ_CONCURRENT_UNION</code>提示，否则不会同时处理仅包含串行或远程分支的<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句。此SQL语句的DOP最多是串行和远程输入的数量。
                     </p>
                     <p>是否可以使用SQL语句的执行计划来识别是否发生<code class="codeph">UNION</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句的并发处理。并行执行时，串行和远程分支的执行使用可识别为<code class="codeph">PX</code> <code class="codeph">SELECTOR</code>的行源进行管理。未同时处理的语句将查询协调器（ <code class="codeph">QC</code> ）显示为串行和远程分支的协调器。
                     </p>
                     <p>在<a href="types-parallelism.html#GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433__BEIEHGJD">例8-4中</a> ，SQL语句由本地和远程分支组成。SQL语句从本地数据库加载有关黄金和白金客户的信息，以及来自远程数据库的三个主要城市的客户信息。由于本地select语句并行发生，因此该处理自动并行执行。每个串行分支仅由一个并行执行服务器进程执行。因为每个并行执行服务器可以执行一个串行分支，所以它们是并发执行的。
                     </p>
                     <div class="example" id="GUID-1F4C90F9-3EF5-423A-B55B-2593FB3F1433__BEIEHGJD">
                        <p class="titleinexample">示例8-4 UNION ALL的说明计划</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXPLAIN PLAN FOR INSERT INTO all_customer SELECT * FROM GOLD_customer UNION ALL SELECT * FROM PLATINUM_customer UNION ALL SELECT * FROM SF_customer @ san_francisco UNION ALL SELECT * FROM LA_customer @ los_angeles UNION ALL SELECT * FROM LV_customer @ las_vegas; -------------------------------------------------- ----------------------------- | Id |操作|名称| TQ / Ins | IN-OUT | PQ Distrib | -------------------------------------------------- ----------------------------- | 0 |插入声明| | | | | | 1 | LOAD TABLE CONVENTIONAL | ALL_CUSTOMER | | | | | 2 | PX COORDINATOR | | | | | | 3 | PX SEND QC（RANDOM）| ：TQ10003 | | P-&gt; S | QC（兰德）| | 4 | UNION-ALL | | | PCWP | | | 5 | PX BLOCK ITERATOR | | | PCWC | | | 6 |表访问完全| GOLD_CUSTOMER | | PCWP | | | 7 | PX BLOCK ITERATOR | | | PCWC | | | 8 |表访问完全| PLATINUM_CUST | | PCWP | | | 9 | PX SELECTOR | | | PCWP | | | 10 | REMOTE | SF_CUSTOMER | | PCWP | | | 11 | PX SELECTOR | | | PCWP | | | 12 | REMOTE | LA_CUSTOMER | | PCWP | | | 13 | PX SELECTOR | | | PCWP | | | 14 | REMOTE | LV_CUSTOMER | | PCWP | | -------------------------------------------------- -----------------------------</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="VLDBG1472"></a><div class="props_rev_3"><a id="GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" name="GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439"></a><h3 id="VLDBG-GUID-E8E35EE2-C719-4122-AEA2-1E7D15147439" class="sect3">关于函数的并行执行</h3>
               <div>
                  <p>SQL语句可以包含用PL / SQL，Java编写的用户定义函数，也可以包含C语言中的外部过程，这些函数可以作为<code class="codeph">SELECT</code>列表， <code class="codeph">SET</code>子句或<code class="codeph">WHERE</code>子句的一部分出现。
                  </p>
                  <p>并行化SQL语句时，并行执行服务器进程将按行执行这些函数。函数使用的任何PL / SQL包变量或Java静态属性对于每个单独的并行执行过程都是私有的，并且在处理每一行时新初始化，而不是从原始会话复制。由于此过程，如果并行执行，并非所有函数都会生成正确的结果。</p>
                  <p>用户编写的表函数可以出现在语句的<code class="codeph">FROM</code>列表中。这些函数就像源表一样产生行输出。表函数在每个并行执行过程开始的语句期间初始化一次。所有变量对于并行执行过程都是完全私有的。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" title="用户函数可以在SQL查询语句中并行执行，也可以在DML或DDL语句中的子查询中并行执行。">并行查询中的函数</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" title="在某些条件下，用户函数可以在并行DML或DDL语句中执行。">并行DML和DDL语句中的函数</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1473"></a><div class="props_rev_3"><a id="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" name="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C"></a><h4 id="VLDBG-GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C" class="sect4">并行查询中的函数</h4>
                  <div>
                     <p>用户函数可以在SQL查询语句中并行执行，也可以在DML或DDL语句中的子查询中并行执行。</p>
                     <p>在<code class="codeph">SELECT</code>语句或DML或DDL语句中的子查询中，用户编写的函数可以在以下任何一种情况下并行执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果已使用<code class="codeph">PARALLEL_ENABLE</code>关键字声明它</p>
                        </li>
                        <li>
                           <p>如果它在包或类型中声明并且具有<code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code>子句，该子句指示所有<code class="codeph">WNDS</code> ， <code class="codeph">RNPS</code>和<code class="codeph">WNPS</code></p>
                        </li>
                        <li>
                           <p>如果使用<code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>声明它并且系统可以分析PL / SQL代码的主体并确定代码既不写入数据库也不读取或修改包变量</p>
                        </li>
                     </ul>
                     <p>查询或子查询的其他部分有时可以并行执行，即使给定的函数执行必须保持串行。</p>
                     <div class="infoboxnotealso" id="GUID-9C2DAB7D-D220-4AC8-A65E-C702BFF1FA4C__ORACLEDATABASEDEVELOPMENTGUIDEFORIN-A68A5A66">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code>子句的信息，请<code class="codeph">PRAGMA</code> <a href="../adfns/coding-subprograms-and-packages.html#ADFNS388" target="_blank"><span><cite>“Oracle数据库开发指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>语句的信息，请<a href="../sqlrf/CREATE-FUNCTION.html#SQLRF01208" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="VLDBG1474"></a><div class="props_rev_3"><a id="GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" name="GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D"></a><h4 id="VLDBG-GUID-DEF855C0-F7F7-47F9-BC1A-F01FBBF5225D" class="sect4">并行DML和DDL语句中的函数</h4>
                  <div>
                     <p>在某些条件下，用户函数可以在并行DML或DDL语句中执行。</p>
                     <p>在并行DML或DDL语句中，如在并行查询中，用户编写的函数可以在以下任何一种情况下并行执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果已使用<code class="codeph">PARALLEL_ENABLE</code>关键字声明它</p>
                        </li>
                        <li>
                           <p>如果它在包或类型中声明并且具有<code class="codeph">PRAGMA</code> <code class="codeph">RESTRICT_REFERENCES</code>子句，该子句指示所有<code class="codeph">RNDS</code> ， <code class="codeph">WNDS</code> ， <code class="codeph">RNPS</code>和<code class="codeph">WNPS</code></p>
                        </li>
                        <li>
                           <p>如果使用<code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>语句声明它，并且系统可以分析PL / SQL代码的主体并确定代码既不读取也不写入数据库或读取或修改包变量</p>
                        </li>
                     </ul>
                     <p>对于并行DML语句，任何无法并行执行的函数调用都会导致整个DML语句以串行方式执行。对于<code class="codeph">INSERT</code> <code class="codeph">SELECT</code>或<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>语句，查询部分中的函数调用将根据本节中描述的并行查询规则进行并行化。即使语句的其余部分必须串行执行，反之亦然，查询也可以并行化。
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1475"></a><div class="props_rev_3"><a id="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" name="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85"></a><h3 id="VLDBG-GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85" class="sect3">关于其他类型的并行性</h3>
               <div>
                  <p>Oracle数据库可以在多种类型的操作中使用并行性。</p>
                  <p>除了并行SQL执行之外，Oracle数据库还可以将并行性用于以下类型的操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>并行恢复</p>
                     </li>
                     <li>
                        <p>并行传播（复制）</p>
                     </li>
                     <li>
                        <p>并行加载（外部表和SQL * Loader实用程序）</p>
                     </li>
                  </ul>
                  <p>与并行SQL一样，并行恢复，传播和外部表加载由并行执行协调器和多个并行执行服务器执行。但是，使用SQL * Loader的并行加载使用不同的机制。</p>
                  <p>并行执行协调器和并行执行服务器的行为可能不同，具体取决于它们执行的操作类型（SQL，恢复或传播）。例如，如果池中的所有并行执行服务器都已被占用，并且已启动并行执行服务器的最大数量：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在并行SQL和外部表加载中，并行执行协调器切换到串行处理。</p>
                     </li>
                     <li>
                        <p>在并行传播中，并行执行协调器返回错误。</p>
                     </li>
                  </ul>
                  <p>对于给定的会话，并行执行协调器仅协调一种操作。并行执行协调器不能同时协调并行SQL和并行恢复或传播。</p>
                  <div class="infoboxnotealso" id="GUID-4CA27F66-296B-498C-BA41-B6C6583F1E85__GUID-0FA7207A-EBDA-4EBC-B548-9F60A746D8B0">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关并行加载和SQL * Loader的信息，请参见<a href="../sutil/oracle-sql-loader.html#SUTIL3311" target="_blank"><span><cite>Oracle数据库实用</cite></span></a>程序</p>
                        </li>
                        <li>
                           <p>有关并行介质恢复的信息<a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关并行实例恢复的信息，请<a href="../tgdba/performance-tuning-overview.html#TGDBA025" target="_blank"><span><cite>参见“Oracle数据库性能调整指南</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="VLDBG1477"></a><a id="VLDBG1476"></a><div class="props_rev_3"><a id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" name="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4"></a><h3 id="VLDBG-GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4" class="sect3">SQL语句的并行度规则</h3>
               <div>
                  <p>SQL语句的并行化决策有两个组成部分：并行化决策和并行度（DOP）。</p>
                  <p>对于查询，DDL操作和DML操作，这些组件的确定方式不同。</p>
                  <p>并行化的决定将在以下部分中讨论：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行化查询的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">DDL声明规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="仅在某些条件下并行化更新，合并或删除操作。">UPDATE，MERGE和DELETE的规则</a></p>
                     </li>
                     <li>
                        <p><a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT的规则</a></p>
                     </li>
                  </ul>
                  <p>各种类型的SQL语句的并行度可以通过语句或对象级别<code class="codeph">PARALLEL</code>提示， <code class="codeph">PARALLEL</code>子句， <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code>语句，自动并行度（Auto DOP）或表或索引<code class="codeph">PARALLEL</code>声明来确定。当使用多种方法时，Oracle数据库使用优先级规则来确定使用哪种方法来确定DOP。</p>
                  <p><a href="types-parallelism.html#GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__CACCAGCH" title="并行化优先级顺序">表8-2</a>显示了确定各种类型SQL语句的并行度（DOP）的优先级规则。在表中，较小的优先级数字表示该方法优先于较高的数字。例如，priority（1）优先于优先级（2），优先级（3），优先级（4）和优先级（5）。
                  </p>
                  <div class="tblformalwide" id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__CACCAGCH">
                     <p class="titleintable">表8-2并行化优先级顺序</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="并行化优先级顺序" width="100%" border="1" summary="Parallelization Priority Order" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d53328e6538">并行操作</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6541">声明级别PARALLEL提示</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6544">对象级别PARALLEL提示</th>
                              <th align="left" valign="bottom" width="11%" id="d53328e6547">并行条款</th>
                              <th align="left" valign="bottom" width="13%" id="d53328e6550">改变会话</th>
                              <th align="left" valign="bottom" width="14%" id="d53328e6553">自动DOP</th>
                              <th align="left" valign="bottom" width="14%" id="d53328e6556">平行宣言</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6561" headers="d53328e6538 ">
                                 <p>并行查询表/索引扫描。有关更多信息，请参阅<a href="types-parallelism.html#GUID-E4E9421D-59CF-47D2-B823-6F3C3FA4698C" title="SQL查询只能在某些条件下并行执行。">并行化查询的规则</a> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6561 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6561 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6561 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6561 d53328e6556 ">
                                 <p>优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6597" headers="d53328e6538 ">
                                 <p>并行<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>或<code class="codeph">MERGE</code> 。有关更多信息，请参阅<a href="types-parallelism.html#GUID-D8290A02-BE5F-436A-B814-D6FD71CEE81F" title="仅在某些条件下并行化更新，合并或删除操作。">UPDATE，MERGE和DELETE规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6597 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6597 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6597 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6597 d53328e6556 ">
                                 <p>目标表的优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6642" headers="d53328e6538 ">
                                 <p><code class="codeph">INSERT</code> <span class="bold"> </span>并行<code class="codeph">INSERT</code>操作......<code class="codeph">SELECT</code> 。有关更多信息，请参阅<a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6642 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6642 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DML</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6642 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6642 d53328e6556 ">
                                 <p>插入表的优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6688" headers="d53328e6538 ">
                                 <p><code class="codeph">SELECT</code> <span class="bold"> </span> <code class="codeph">INSERT</code>是串行时<code class="codeph">INSERT</code> <code class="codeph">SELECT</code>操作。有关更多信息，请参阅<a href="types-parallelism.html#GUID-EB793246-B39F-444B-A2F0-7D101F016557" title="仅在某些条件下并行执行插入操作。">INSERT SELECT规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6688 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6688 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6688 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6688 d53328e6556 ">
                                 <p>选择表的优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6737" headers="d53328e6538 ">
                                 <p><code class="codeph">CREATE</code> <span class="bold"> </span>并行<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code> （分区或非分区表）。有关更多信息，请参阅<a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6544 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6737 d53328e6547 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6737 d53328e6550 ">
                                 <p>优先级（2） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6737 d53328e6553 ">
                                 <p>优先级（3）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6737 d53328e6556 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6805" headers="d53328e6538 ">
                                 <p><code class="codeph">SELECT</code> <span class="bold"> </span> <code class="codeph">CREATE</code>是串行时<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <code class="codeph">AS</code> <code class="codeph">SELECT</code>操作。有关更多信息，请参阅<a href="types-parallelism.html#GUID-C457EE16-7B2E-4331-A1DA-23583656B2CD" title="根据并行化DDL语句的规则，并行化CREATE TABLE AS SELECT语句的CREATE操作。">CREATE TABLE AS SELECT的规则</a> 。</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6541 ">
                                 <p>优先级（1）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6544 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6805 d53328e6547 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6805 d53328e6550 ">
                                 <p>优先级（3） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">QUERY</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6805 d53328e6553 ">
                                 <p>优先级（4）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6805 d53328e6556 ">
                                 <p>优先级（5）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d53328e6876" headers="d53328e6538 ">
                                 <p>其他DDL操作。有关更多信息，请参阅<a href="types-parallelism.html#GUID-B9F9BFAD-5B66-4C41-BCE3-6E96A43F3400" title="在某些条件下，DDL操作可以并行执行。">DDL语句规则</a> 。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6541 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6544 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d53328e6876 d53328e6547 ">
                                 <p>优先级（3）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d53328e6876 d53328e6550 ">
                                 <p>优先级（1） <code class="codeph">FORCE</code> <code class="codeph">PARALLEL</code> <code class="codeph">DDL</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6876 d53328e6553 ">
                                 <p>优先级（2）</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d53328e6876 d53328e6556 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-D399FA96-424C-47C9-A3AC-28A12C0B2FD4__GUID-69C88072-93F5-454F-9AB7-5D560468BC36">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">PARALLEL</code>提示的信息，请<a href="../sqlrf/Comments.html#SQLRF50801" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">PARALLEL</code>子句的信息，请<a href="../sqlrf/parallel_clause.html#SQLRF20024" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> SQL语句的更多信息，请<a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04339.performance-and-debugging.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>性能和调试</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQLJ Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQLJ Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlj-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T08:20:03-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96458-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="translator-run-time-functionality.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appendix.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQLJ Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JSQLJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="translator-run-time-functionality.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appendix.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQLJ开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">性能和调试</li>
            </ol>
            <a id="GUID-374DA5FF-73F5-40FC-BFA6-02FAB44FC375" name="GUID-374DA5FF-73F5-40FC-BFA6-02FAB44FC375"></a><a id="JSQLJ740"></a>
            
            <h2 id="JSQLJ-GUID-374DA5FF-73F5-40FC-BFA6-02FAB44FC375" class="sect2"><span class="enumeration_chapter">11</span>性能和调试</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论增强SQLJ应用程序性能以及在运行时调试SQLJ源代码的功能，实用程序和技巧。讨论了以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="performance-and-debugging.html#GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C">性能增强功能</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-debugging.html#GUID-630E713D-C1AA-4ED8-8061-153B6880EB61">SQLJ调试功能</a></p>
                  </li>
                  <li>
                     <p><a href="performance-and-debugging.html#GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585">SQLJ支持Oracle性能监视</a></p>
                  </li>
               </ul>
            </div><a id="JSQLJ741"></a><div class="props_rev_3"><a id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C" name="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C"></a><h3 id="JSQLJ-GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C" class="sect3">性能增强功能</h3>
               <div>
                  <p>Oracle SQLJ实现包括通过提高数据访问效率来增强性能的功能。这些包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-BB73F408-2751-4050-A174-F9B2AD525AD7">行预取</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A">声明缓存</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-E764E87E-1320-4DBE-B59E-7B03150BF803">更新批处理</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50">列定义</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D">参数大小定义</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-39C2B05E-C724-4617-903D-AFEFC3726565">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../jjdbc/data-access-and-manipulation.html#JJDBC-GUID-C4FB8486-E19B-4EF3-BC67-053EF49E6FF4" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a></p>
                  </div>
                  <p>您的应用程序可能会受益于默认的Oracle特定代码生成。生成的代码将通过直接调用Oracle Java Database Connectivity（JDBC）驱动程序进行优化，从而消除了对SQLJ运行时的中间调用的开销，而SQLJ运行时又调用JDBC。</p>
                  <div class="infoboxnotealso" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-20E7B340-7A2E-43A6-BD2A-56544588B676">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                  </div>
                  <div class="infoboxnote" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-62CCE6F3-8B47-49F1-8C4E-56872FAA16D3">
                     <p class="notep1">注意：</p>
                     <p>甲骨文SQLJ实现<span class="italic">不</span>支持批量取，这是行集合的取出入值的阵列。但是，您可以使用Oracle行预取来获取批量提取的一些好处。
                     </p>
                  </div>
                  <p>除了前面的SQLJ性能增强之外，您还可以在SQLJ程序的SQL操作中使用优化程序提示，就像在任何Oracle SQL操作中一样。</p>
                  <p>Ora cle SQL实现使您可以使用“ <code class="codeph">/*+</code> ”或“ <code class="codeph">--+</code> ”注释表示法来调整SQL语句，以便将提示传递给Oracle SQL优化程序。SQLJ转换程序识别并支持这些优化程序提示，并在运行时将它们作为SQL语句的一部分传递。
                  </p>
                  <p>您还可以使用Oracle Database 12 <span class="italic">c</span>第2版（12.2）中SQL优化的可扩展性功能，为任何其他存储函数定义SQLJ存储函数的成本和选择性信息。在SQL执行期间，优化器调用存储函数的成本和选择性方法，评估执行的备用策略，并选择有效的执行计划。
                  </p>
                  <div class="infoboxnotealso" id="GUID-96E6408D-EAB0-488B-83ED-7CC40F4F7D2C__GUID-3D110D49-2610-47DD-A416-C83821564928">
                     <p class="notep1">也可以看看：</p>
                     <p>有关更多信息，请<a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="italic">参见Oracle数据库SQL语言参</span></a></p>
                  </div>
                  <p>请注意，在代码中使用Oracle性能扩展需要以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用Oracle JDBC驱动程序之一。</p>
                     </li>
                     <li>
                        <p>使用默认的Oracle特定代码生成，或适当地自定义配置文件。</p>
                        <p>对于ISO标准代码生成，默认自定义程序<code class="codeph">oracle.sqlj.runtime.util.建议使用OraCustomizer</code> 。
                        </p>
                     </li>
                     <li>
                        <p>在应用程序运行时使用Oracle SQLJ运行时。</p>
                     </li>
                  </ul>
                  <p>每当您使用Oracle自定义程序自定义配置文件时，您的应用程序都需要Oracle SQLJ运行时和Oracle JDBC驱动程序，即使您实际上没有在代码中使用Oracle扩展。</p>
               </div><a id="JSQLJ742"></a><div class="props_rev_3"><a id="GUID-BB73F408-2751-4050-A174-F9B2AD525AD7" name="GUID-BB73F408-2751-4050-A174-F9B2AD525AD7"></a><h4 id="JSQLJ-GUID-BB73F408-2751-4050-A174-F9B2AD525AD7" class="sect4">行预取</h4>
                  <div>
                     <p>标准JDBC一次接收一行查询结果，每行需要单独往返数据库。行预取使您可以更高效地接收结果，每组包含多行。</p>
                     <p>使用<code class="codeph">ExecutionContext</code>实例的<code class="codeph">setFetchSize()</code>方法设置每次执行<code class="codeph">SELECT</code>语句时要预取的行数（对于使用特定<code class="codeph">ExecutionContext</code>实例的SQLJ语句）。
                     </p>
                     <p><code class="codeph">ExecutionContext</code>实例的<code class="codeph">getFetchSize()</code>方法返回当前的预取大小，作为<code class="codeph">int</code>值。
                     </p>
                     <p>以下是通过获取默认连接上下文实例的默认执行上下文实例并调用<code class="codeph">setFetchSize()</code>方法将预取大小设置为20的示例：</p><pre class="oac_no_warn" dir="ltr">。DefaultContext.getDefaultContext（）getExecutionContext（）的setFetchSize（20）。</pre><p>也可以使用JDBC应用程序编程接口（API）直接在底层<code class="codeph">OracleConnection</code>对象上设置预取大小，但在SQLJ中不鼓励这样做。
                     </p>
                     <p>要为使用给定连接上下文实例的查询指定预取的行数，请使用基础JDBC连接，强制转换为Oracle <code class="codeph">Connection</code>实例。以下是将默认连接的预取值设置为20的示例：</p><pre class="oac_no_warn" dir="ltr">（（的OracleConnection）DefaultContext.getDefaultContext（）的getConnection（））setDefaultRowPrefetch（20）。</pre><pre class="oac_no_warn" dir="ltr"></pre><p>另请注意，SQLJ连接上下文中设置的预取大小会覆盖基础JDBC连接上设置的预取大小。</p>
                     <p><span>您使用的每个附加连接上下文实例必须根据需要单独设置。</span>需要在每个单独的连接上下文上设置预取值。例如，如果<code class="codeph">ctx</code>是声明的连接上下文类的实例，请按如下所示设置其预取值：</p><pre class="oac_no_warn" dir="ltr">（（连接）ctx.getConnection（））setDefaultRowPrefetch（20）。</pre><pre class="oac_no_warn" dir="ltr">ctx.getExecutionContext（）的setFetchSize（20）。</pre><p>没有最大行预取值。JDBC中的默认值为10，这是SQLJ继承的。此值在典型情况下有效，但如果您收到大量行，则可能需要增加该值。</p>
                  </div>
               </div><a id="JSQLJ744"></a><a id="JSQLJ745"></a><a id="JSQLJ746"></a><a id="JSQLJ747"></a><a id="JSQLJ748"></a><a id="JSQLJ749"></a><a id="JSQLJ750"></a><a id="JSQLJ743"></a><div class="props_rev_3"><a id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A" name="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A"></a><h4 id="JSQLJ-GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A" class="sect4">声明缓存</h4>
                  <div>
                     <p>SQLJ提供了一种语句缓存功能，通过保存重复使用的可执行语句（例如循环或重复调用的方法）来提高性能。在重新执行语句之前缓存语句时，不必重新分析代码（在服务器上或客户端上），不必重新创建语句对象，并且不必重新计算参数大小定义。如果没有此功能，则必须在客户端上重新声明重复的语句，也可能在服务器中重新声明，具体取决于在再次遇到语句时是否仍然可以在通用服务器端SQL缓存中使用该语句。</p>
                     <p>对于特定于Oracle的代码生成，SQLJ语句高速缓存依赖于Oracle JDBC驱动程序，使用JDBC显式高速缓存机制。这与JDBC隐式缓存机制不同，尽管存在相互依赖关系。使用特定于Oracle的代码，语句缓存通过连接方法进行控制。</p>
                     <div class="infoboxnotealso" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-3EB4E6B4-DA9C-4350-8295-54BFDC464A39">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../jjdbc/statement-and-resultset-caching.html#JJDBC-GUID-DE966F8D-3D12-4697-A7A4-A09E0DF58CA1" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a></p>
                     </div>
                     <p>对于ISO代码生成，SQLJ通过SQLJ运行时的功能有自己的语句缓存机制。使用ISO代码，语句缓存通过Oracle customizer <code class="codeph">stmtcache</code>选项进行控制。
                     </p>
                     <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-81A8E895-AEC2-4D36-BF1E-90C31CB19B31">
                        <p class="notep1">注意：</p>
                        <p>对于特定于Oracle的代码生成，显式缓存是唯一可以通过SQLJ API操作的语句缓存机制。对于本文档中的讨论，它将被称为SQLJ /显式语句缓存。</p>
                     </div>
                     <p>在Oracle Database <span class="italic">12c</span>第1版（12.1）中，如果连接上下文正在创建JDBC连接，则默认语句高速缓存大小将设置为5。如果使用已经可用的JDBC连接或数据源创建连接上下文，则语句高速缓存大小将设置为JDBC连接或数据源的大小。
                     </p>
                     <div class="section" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__I1005665">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-D305621B-3E5E-4F5B-846B-4C93F934729E">语句缓存的连接上下文方法（特定于Oracle的代码）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果使用特定于Oracle的代码生成（SQLJ转换器的默认情况下为<code class="codeph">-codegen=oracle</code>设置），请使用连接上下文方法进行语句缓存功能。请注意，任何大于0的语句高速缓存大小都会导致启用SQLJ /显式语句高速缓存。默认情况下，它的缓存大小为5，即五个语句。
                        </p>
                        <p><code class="codeph">sqlj.runtime.ref.添加了以下特定于Oracle的（非标准）静态方法<code class="codeph">sqlj.runtime.ref.DefaultContext</code>类，也包含在您声明的任何连接上下文类中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">static void setDefaultStmtCacheSize（int）</code></p>
                              <p>这将为<span class="italic">所有</span>连接上下文设置默认语句高速缓存大小。这将成为任何后续创建的<span class="italic">任何</span>连接上下文类实例的初始语句高速缓存大小，而不仅仅是您调用该方法的类。方法调用不会影响已存在的连接上下文实例。
                              </p>
                              <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-D02D50B6-5271-452A-8FA0-07E43C4E003E">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">setDefaultStmtCacheSize(int)</code>仅影响使用SQLJ连接上下文创建的连接的语句高速缓存大小。它不会影响使用JDBC连接创建的连接的语句高速缓存大小。
                                 </p>
                                 <p>请考虑以下两个代码段：</p>
                                 <p>例1：</p><pre class="oac_no_warn" dir="ltr">...MyContext.setDefaultStmtCacheSize（10）; OracleConnection conn = DriverManager.getConnection（url，user，passwd）; myctx = new MyContext（conn）;</pre><p>例2：</p><pre class="oac_no_warn" dir="ltr">...MyContext.setDefaultStmtCacheSize（10）; myctx = new MyContext（url，user，passwd，true）;</pre><p>在前面两个示例中，语句高速缓存大小仅在第二个示例中设置为10。在第一个示例中，与此连接对应的语句高速缓存大小不会受到影响，因为使用JDBC规范中的<code class="codeph">DriverManager</code>接口的<code class="codeph">getConnection</code>方法创建连接。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">static int getDefaultStmtCacheSize（）</code></p>
                              <p>这将检索连接上下文的当前默认语句高速缓存大小。</p>
                           </li>
                        </ul>
                        <p>并且以下特定于Oracle的实例方法也已添加到<code class="codeph">DefaultContext</code>类中，并包含在任何其他连接上下文类中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">void setStmtCacheSize（int）抛出java.sql。的SQLException</code></p>
                              <p>这将为特定连接上下文实例的基础连接设置语句高速缓存大小（覆盖缺省值）。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-F0F1BFCE-4D45-4727-8835-B970BDDC9CFB">
                           <p class="notep1">注意：</p>
                           <p>如果已禁用SQLJ /显式缓存，则将大小设置为0会使其禁用。如果已经启用，则将大小设置为0会使其保持启用状态，但会使其无效。</p>
                        </div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">int getStmtCacheSize（）</code></p>
                              <p>这将验证是否为连接上下文的基础连接启用了SQLJ /显式语句高速缓存。如果是，则返回当前语句高速缓存大小。它还可以返回以下任何一个整数常量：</p><pre class="oac_no_warn" dir="ltr">static int STMT_CACHE_NOT_ENABLED static int STMT_CACHE_EXCEPTION</pre><p><code class="codeph">getStmtCacheSize()</code>调用可能会导致SQL异常。但是，为了向后兼容，此方法不会直接抛出异常。发生异常时，该方法返回常量<code class="codeph">STMT_CACHE_EXCEPTION</code> 。在这种情况下，您可以调用<code class="codeph">getStmtCacheException()</code>方法来找出发生了什么异常。
                              </p>
                              <p>如果在禁用SQLJ /显式缓存时调用<code class="codeph">getStmtCacheSize()</code> ，则该方法返回常量<code class="codeph">STMT_CACHE_NOT_ENABLED</code> 。这与高速缓存大小0不同。从技术上讲，SQLJ /显式缓存可以启用（尽管无用），缓存大小为0。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">java.sql中。异常getStmtCacheException（）</code></p>
                              <p>查看是否存在语句缓存异常。使用此方法有两种方案：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果<code class="codeph">getStmtCacheSize()</code>调用返回<code class="codeph">STMT_CACHE_EXCEPTION</code> ，则调用它。</p>
                                 </li>
                                 <li>
                                    <p>每当您创建要使用语句缓存的连接上下文实例时，请调用它。这是因为无论何时创建连接上下文实例，都会对语句高速缓存大小进行自动操作。如果您关心连接上下文实例的语句缓存，请在创建实例后调用<code class="codeph">getStmtCacheException()</code> ，以验证没有问题。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__I1005700">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-626710D2-E6D5-40D8-9899-4212999D004D">启用和禁用语句缓存（特定于Oracle的代码）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用特定于Oracle的代码，重申前面所述的内容，任何非零语句高速缓存大小都会导致启用SQLJ /显式高速缓存。由于默认大小为5，因此默认情况下启用语句缓存。</p>
                        <p>您不能通过SQLJ API显式禁用SQLJ /显式语句缓存，尽管您可以通过将语句高速缓存大小设置为0来有效地禁用它（使其无法正常工作）。在这种情况下，连接上下文<code class="codeph">getStmtCacheSize()</code>方法可能返回0， <span class="italic">而不是</span> <code class="codeph">STMT_CACHE_NOT_ENABLED</code> 。</p>
                        <p>您<span class="italic">可以</span>通过JDBC连接API显式禁用SQLJ /显式语句缓存或JDBC隐式缓存。由于SQLJ /显式缓存和JDBC隐式缓存使用相同的缓存大小，因此有时可能有理由这样做。<code class="codeph">OracleConnection</code>类提供以下方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">void setExplicitCachingEnabled（boolean）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">boolean getExplicitCachingEnabled（）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">void setImplicitCachingEnabled（boolean）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">boolean getImplicitCachingEnabled（）</code></p>
                           </li>
                        </ul>
                        <p>如果从SQLJ连接上下文实例中检索<code class="codeph">OracleConnection</code>实例，则可以访问这些方法。
                        </p>
                        <div class="infoboxnotealso" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-79B5E5ED-8797-466E-8A48-CBB5F433BC71">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="advanced-language-features.html#GUID-340AFCEF-E421-46F9-B136-DF9CC3723310">SQLJ连接上下文和JDBC连接互操作性</a> ”</span></p>
                        </div>
                        <div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-ABEC7041-B798-41AD-B9FE-33EE3C84066E">
                           <p class="notep1">注意：</p>
                           <p>在SQLJ中，默认情况下禁用JDBC隐式缓存，除非通过<code class="codeph">setImplicitCachingEnabled()</code>方法显式启用它，否则将保持禁用状态。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-2CF05912-E06A-4997-ABAC-B0D535406903">SQLJ /显式缓存与JDBC隐式缓存之间的关键交互</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>关于Oracle特定代码中的语句缓存，本文档自然强调SQLJ /显式缓存而不是JDBC隐式缓存。如果您不在应用程序中使用JDBC代码，则SQLJ /显式缓存是唯一相关的语句缓存。但是，在某些情况下，您可能希望在应用程序中同时使用SQLJ和JDBC代码，在这些情况下，您可能还希望使用隐式缓存。</p>
                        <p>SQLJ /显式缓存和JDBC隐式缓存是相互独立启用的。此外，您无法通过SQLJ访问隐式缓存。但是，两者之间存在密钥交互，因为它们共享相同的缓存大小。例如，如果语句高速缓存大小为5，则最多可以为SQLJ /显式高速缓存和隐式高速缓存组合缓存五个语句。</p>
                        <p>与此相关的一个重点是，如果您选择通过将高速缓存大小设置为0来有效地禁用SQLJ /显式语句高速缓存，那么您还有效地禁用了隐式高速缓存。</p>
                        <p>另请注意，如果禁用SQLJ /显式缓存，则将缓存大小更改为大于0的值将启用它，但这不会影响是否启用了隐式缓存。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-9BE5E251-69D2-4230-9CF3-D32B25053D1B">JDBC支持语句缓存（ISO代码）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>通过SQLJ转换器<code class="codeph">-codegen=iso</code>设置指定的ISO标准代码生成，语句缓存是一种标准的SQLJ功能，不需要任何特定的JDBC驱动程序。但是，使用实现<code class="codeph">sqlj.runtime.profile.ref.的驱动程序<code class="codeph">sqlj.runtime.profile.ref.ClientDataSupport</code>接口支持更强大的缓存。Oracle Database 12 <span class="italic">c</span>第1版（12.1）JDBC驱动程序实现此接口，提供以下功能：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>每个数据库连接的单独缓存，而不是整个应用程序的单个静态缓存</p>
                           </li>
                           <li>
                              <p>能够在共享相同底层连接的连接上下文类的多个实例之间共享高速缓存语句</p>
                           </li>
                        </ul>
                        <p>当使用单个缓存时，就像没有实现<code class="codeph">ClientDataSupport</code>的通用JDBC驱动程序一样，在一个连接中执行的语句可以导致刷新来自另一个连接的缓存语句（如果语句缓存大小，则最大数量为超出了可以缓存的语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-5C735039-390C-4F4F-81BB-484B6328812F">用于语句缓存大小的Oracle Customizer选项（ISO代码）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用ISO标准代码生成时，默认情况下在应用程序中启用语句缓存，当您使用Oracle自定义程序时，缓存大小为5（与Oracle特定代码的默认大小相同），Oracle自定义程序通常作为Oracle SQLJ转换的一部分执行。</p>
                        <p>您可以根据需要更改语句高速缓存大小，或通过Oracle定制程序<code class="codeph">stmtcache</code>选项有效地禁用高速缓存大小为0的语句高速缓存。这被设置为<code class="codeph">-P-Cstmtcache=</code> <span class="italic"><code class="codeph">n</code></span> ，其中<span class="italic"><code class="codeph">n</code></span>是整数。
                        </p>
                        <div class="infoboxnotealso" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-B7DD5DBC-BB84-47E9-BF98-D634CD2BEC1B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="appendix.html#GUID-2EF347A8-53D3-404B-8702-A9C6E8ECFF8B">Oracle Customizer语句缓存大小选项（stmtcache）</a> ”</span></p>
                        </div>
                        <p>如果使用多个连接上下文类，因此具有多个配置文件，则可以通过为每个配置文件单独运行SQLJ（实际上是自定义程序）来单独设置其语句高速缓存大小。</p>
                        <p>在运行时，相应的SQLJ概要文件确定连接的语句高速缓存大小。这将是与为此连接实例化的第一个连接上下文类对应的配置文件。其语句高速缓存大小设置（如果有）是根据您在自定义配置文件时设置Oracle定制程序<code class="codeph">stmtcache</code>选项的方式确定的。当执行该连接上的第一个语句时，将设置连接的运行时语句高速缓存大小。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-1E818457-7BC9-4DF1-A294-41E60D066193">附加语句缓存行为</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>实例化SQLJ连接上下文对象时，如果基础JDBC连接上的语句高速缓存大小小于连接上下文类的缺省大小，则SQLJ运行时将尝试将JDBC语句高速缓存大小增加到连接上下文缺省值值。即使使用ISO代码生成也会发生此操作，从而在过程中启用显式语句缓存，尽管这在ISO代码案例中实际上没有相关性。</p>
                        <p>另一方面，如果实际的JDBC语句高速缓存大小较大，则SQLJ运行时将不会尝试执行高速缓存大小的更改。只要SQLJ运行时创建SQLJ连接上下文实例，它就会根据默认大小集检查实际的JDBC高速缓存大小。</p>
                        <p>值得注意的是，无论发布它们的上下文类如何，这些方法都具有相同的效果，因为它们修改或报告相同的底层静态字段。</p>
                        <p>作为示例，假设以下连接上下文类声明：</p><pre class="oac_no_warn" dir="ltr">#sql context CtxtA; #sql context CtxtB;</pre><p>在这种情况下，以下三个代码指令中的每一个都会产生这样的效果：无论何时随后创建新的SQLJ连接上下文实例，它都<span class="italic">不会</span>尝试启用SQLJ /显式语句缓存：</p><pre class="oac_no_warn" dir="ltr">sqlj.runtime.ref。DefaultContext.setDefaultStmtCacheSize（0）;</pre><pre class="oac_no_warn" dir="ltr">CtxtA.setDefaultStmtCacheSize（0）;</pre><pre class="oac_no_warn" dir="ltr">CtxtB.setDefaultStmtCacheSize（0）;</pre><div class="infoboxnote" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-4199F5FE-3D1B-4189-9C90-97B56673CA29">
                           <p class="notep1">注意：</p>
                           <p>如果在基础JDBC池连接上创建SQLJ连接上下文实例，则SQLJ将无法更改JDBC语句高速缓存大小。对于特定于Oracle的代码，您可以通过连接上下文<code class="codeph">getStmtCacheException()</code>方法检索生成的异常。在这种情况下，必须在底层物理连接上显式设置所需的JDBC语句高速缓存大小。对于数据源，缓存大小是通过特定于供应商的数据源属性设置的。
                           </p>
                        </div>
                        <p>SQLJ /显式缓存和JDBC隐式缓存功能具有不同的语义和行为。如前所述，SQLJ语句缓存仅适用于重复使用的单个语句，例如循环或通过重复调用同一方法。请考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">...#sql { <span class="italic">相同的SQL</span> operaton}; //发生＃1 ...
<span class="italic">Java代码</span> ......#sql { <span class="italic">相同的SQL</span> operaton}; //发生＃2 ...
<span class="italic">Java代码</span> ......#sql { <span class="italic">相同的SQL</span> operaton}; //发生＃3 ......
</pre><p>假设三个SQL操作是相同的，包括空格。</p>
                        <p>SQLJ缓存会将同一SQL操作的这三种情况视为三种不同的语句。它们将占用缓存中的三个独立插槽。但是，JDBC隐式缓存会将这些语句识别为完全相同的语句，仅对所有三个语句使用单个缓存槽。该语句将在第2次出现和第3次出现时重复使用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5DA139D6-A47B-466E-BCA5-3B04D710792A__GUID-9ABD8A04-8109-42E5-BE59-51FCD21FF2EA">语句缓存限制和注释</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用语句缓存，即使是1号，也可以提高几乎所有SQLJ应用程序的性能。但请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果每个语句只执行一次，则没有任何好处。</p>
                           </li>
                           <li>
                              <p>尽量避免使用多次执行的语句对一次执行的语句进行交错。仅执行一次的语句将不必要地占用语句高速缓存中的空间，这在达到语句高速缓存大小限制时会成为问题。作为替代方案，如果使用ISO代码生成，则可以对仅执行一次的语句使用单独的连接上下文类，并禁用该连接上下文类的语句缓存。</p>
                           </li>
                           <li>
                              <p>具有相同SQL操作的不同语句的处理方式与任何不同的语句相同。每个都分别处理和缓存。作为替代方法，将SQL操作放在方法中并重复调用该方法，而不是使用不同的语句。</p>
                           </li>
                           <li>
                              <p>在选择适当的语句高速缓存大小时要小心。如果它太小，则缓存可能会填满，导致语句在重新执行之前被刷新。如果它太大，则数据库资源或程序资源可能会耗尽。</p>
                           </li>
                        </ul>
                        <p>还要注意以下关于语句缓存的一般注意事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用特定于Oracle的代码生成时，如果连接上下文共享相同的基础JDBC连接实例，则使用单独的SQLJ连接上下文实例来具有单独的语句缓存行为将不起作用。这是因为在特定于Oracle的代码生成下，SQLJ使用JDBC语句缓存。</p>
                           </li>
                        </ul>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于Oracle应用程序，语句高速缓存大小加上应用程序中的最大开放JDBC语句数（直接和通过SQLJ）应小于会话可用的最大游标数。这是因为最大游标数定义了可以同时打开的最大语句数。</p>
                           </li>
                           <li>
                              <p>使用语句高速缓存通常不会更改操作本身的执行语义，尽管在某些情况下会这样做。例如，如果您的语句在其资源被释放时抛出异常，那么使用缓存意味着在关闭连接或从缓存中刷新语句之前不会抛出异常，这在缓存时发生超过了大小。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ752"></a><a id="JSQLJ753"></a><a id="JSQLJ754"></a><a id="JSQLJ755"></a><a id="JSQLJ756"></a><a id="JSQLJ757"></a><a id="JSQLJ758"></a><a id="JSQLJ759"></a><a id="JSQLJ760"></a><a id="JSQLJ761"></a><a id="JSQLJ762"></a><a id="JSQLJ751"></a><div class="props_rev_3"><a id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803" name="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803"></a><h4 id="JSQLJ-GUID-E764E87E-1320-4DBE-B59E-7B03150BF803" class="sect4">更新批处理</h4>
                  <div>
                     <p>更新批处理（在Sun Microsystems JDBC 2.0规范中称为批处理更新）允许将可批处理和兼容的<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">INSERT</code>语句收集到批处理中并立即发送到数据库执行，从而节省了到数据库。此功能包含在JDBC和SQLJ规范中，并受Oracle JDBC和SQLJ实现的支持。更新批处理通常用于在循环内重复执行的操作。
                     </p>
                     <p>在SQLJ中，更新批处理与执行上下文使用相关联。在每个执行上下文中启用或禁用此功能，与任何其他执行上下文无关，并且每个执行上下文实例都维护自己的批处理。</p>
                     <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-4A529E01-5F5A-4BE5-AB61-4871B12353EB">
                        <p class="notep1">注意：</p>
                        <p>请注意以下更新批处理：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您必须使用默认的Oracle特定代码生成，或者，对于ISO代码生成，使用Oracle定制程序自定义应用程序。</p>
                           </li>
                           <li>
                              <p>禁止自动提交模式是非常明智的。这使您可以控制在批处理执行期间发生错误时要提交的内容以及回滚的内容。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-F1F14248-C158-463E-BA4B-3741C20617B9">可混合和兼容的声明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>两个标准确定是否可以将语句添加到现有批语句中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>它可以打包吗？在任何情况下都不能批量处理某些类型的语句。</p>
                           </li>
                           <li>
                              <p>它是否与现有批次中的语句兼容？</p>
                           </li>
                        </ul>
                        <p>对于SQLJ，以下类型的语句是可处理的：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">UPDATE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">插入</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">删除</code></p>
                           </li>
                        </ul>
                        <p>但是，具有一个或多个流主机表达式的<code class="codeph">UPDATE</code>和<code class="codeph">INSERT</code>语句<span class="italic">不可</span>配置。
                        </p>
                        <p>在SQLJ中，只有同一语句的多个实例是兼容的。这可以在以下两种情况中发生：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>语句在循环中重复执行。</p>
                           </li>
                           <li>
                              <p>语句在方法中执行，并且该方法被重复调用。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-F319E347-1236-4AD9-9387-C0C5C1079F76">启用和禁用更新批处理</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>SQLJ分别为每个执行上下文实例执行更新批处理。每个人都可以独立于其他执行上下文实例启用更新批处理，并且每个实例都维护自己的批处理。</p>
                        <p>要为特定执行上下文实例启用或禁用更新批处理，请使用该执行上下文实例的<code class="codeph">setBatching()</code>方法。此方法采用布尔输入，如下所示：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; ...
</pre><p>要么：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（假）; ...
</pre><p>默认情况下禁用更新批处理。</p>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-2C21EBA5-95C9-4E44-BF8B-D41130CAF60B">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">setBatching()</code>方法不会影响现有的语句批处理。启用或禁用更新批处理都不会导致现有批处理被执行或取消。
                           </p>
                        </div>
                        <p>使用执行上下文实例的<code class="codeph">isBatching()</code>方法确定是否为该执行上下文启用了更新批处理：</p><pre class="oac_no_warn" dir="ltr">ExecutionContext ec = new ExecutionContext（）; ...boolean batchingOn = ec.isBatching（）;</pre><p>但是，这并不表示批次当前是否处于待处理状态。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1005910">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-5D1F6F28-8AAE-4E70-854E-6968FFF7D847">显式和隐式批量执行</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>您可以根据需要显式执行挂起的更新批处理，但在某些情况下也可能会隐式执行。</p>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-CAA4C8A0-2209-4256-A438-934AED734B56">
                           <p class="notep1">注意：</p>
                           <p>重要的是要知道在批处理执行过程中发生异常时会发生什么。</p>
                        </div>
                        <p>使用执行上下文实例的<code class="codeph">executeBatch()</code>方法显式执行更新批处理。此方法返回更新计数的<code class="codeph">int</code>数组。
                        </p>
                        <p>以下是显式执行批处理的示例：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; ...double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec] {UPDATE employees SET salary = :( sals [i]）WHERE employee_id = :( empnos [i]）}; } int [] updateCounts = ec.executeBatch（）; ...
</pre><div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-B7037974-B3D0-49F6-9B62-E13D3DB6219F">
                           <p class="notep1">注意：</p>
                           <p>如果在执行上下文实例没有挂起批处理时调用<code class="codeph">executeBatch()</code> ，则该方法返回<code class="codeph">null</code> 。
                           </p>
                        </div>
                        <p>当存在挂起的更新批处理时，它会在以下情况下隐式执行：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>遇到无法处理的可执行语句。在这种情况下，首先执行现有批处理，然后执行nonbatchable语句。</p>
                           </li>
                           <li>
                              <p>遇到可更改的更新语句，但与现有批处理中的语句不兼容，换句话说，它不是同一语句的实例。在这种情况下，执行批处理，然后从不兼容的语句开始创建新的批处理。</p>
                           </li>
                           <li>
                              <p>达到预定义的批量限制，即指定数量的语句。</p>
                           </li>
                        </ul>
                        <p>以下是一个例子。当遇到unbatchable语句时，首先创建并隐式执行一个批处理，然后在遇到可绑定但不兼容的语句时创建并隐式执行新批处理：</p><pre class="oac_no_warn" dir="ltr">ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; .../ *以下循环中的语句将被置于批处理* / double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec] {UPDATE employees SET salary = :( sals [i]）WHERE employee_id = :( empnos [i]）}; } / * SELECT是不可分配的，因此导致批处理执行* / double avg; #sql [ec] {SELECT avg（salary）INTO：avg FROM employees}; / *以下循环中的语句将放在新批处理中* / double [] comms = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec] {UPDATE employees SET commission_pct = :( comms [i]）WHERE employee_id = :( empnos [i]）}; / *以下更新与第二批不兼容，因此导致它被执行* / int smithdeptno = ...; #sql [ec] {UPDATE employees SET department_no =：deptno WHERE first_name ='Smith'};</pre><p>要获取隐式执行的批处理的更新计数数组，请调用执行上下文实例的<code class="codeph">getBatchUpdateCounts()</code>方法。这将返回在此执行上下文实例中成功执行的最后一批的更新计数。可以在<code class="codeph">SELECT</code>之后和最后一次<code class="codeph">UPDATE</code>之后插入以下代码语句：</p><pre class="oac_no_warn" dir="ltr">int [] updateCounts = ec.getBatchUpdateCounts（）;</pre><div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-9B6FEFB5-D57A-4761-9053-A6AC4B3DA370">
                           <p class="notep1">注意：</p>
                           <p>如果没有为执行上下文实例成功执行更新批处理，则<code class="codeph">getBatchUpdateCounts()</code>将返回<code class="codeph">null</code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006005">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-A6CA4450-1862-4346-B0FF-7E8DB241019A">取消批次</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要取消执行上下文中挂起的批处理，请使用执行上下文实例的<code class="codeph">cancel()</code>方法。例如，如果在批处理执行期间发生异常，您可以取消已执行但尚未提交的批处理。以下是一个例子：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; ...double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec] {UPDATE employees SET salary = :( sals [i]）WHERE employee_id = :( empnos [i]）};如果（！check（sals [i]，empnos [i]））//假设“check”是用户提供的函数{ec.cancel（）;抛出新的SQLException（“进程已取消。”）; try {int [] updateCounts = ec.executeBatch（）; } catch（SQLException exception）{ec.cancel（）; } ...
</pre><p>取消批处理时，下一个batchable语句将启动新批处理。</p>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-E269016C-CA32-414B-A9B7-C8AAC3EF5562">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>调用<code class="codeph">cancel()</code>也将取消当前正在执行的任何语句。
                                 </p>
                              </li>
                              <li>
                                 <p>取消批<span class="italic">不会</span>禁用更新配料。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006039">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-736D0F9D-35E9-4EA9-9899-EC8A56949D36">执行上下文更新计数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在Oracle数据库12 <span class="italic">c</span>解除1（12.1）SQLJ实现中，更新计数由所述返回的数组<code class="codeph">executeBatch()</code>或<code class="codeph">getBatchUpdateCounts()</code>的执行上下文实例<span class="italic">不</span>包含由所述批处理的语句更新的行的数目的计数的方法，但只是表明每个陈述是否成功的值。因此，其功能不同于未启用批处理时执行上下文实例的<code class="codeph">getUpdateCount()</code>方法返回的单个更新计数。由于语句是批处理的，批处理执行后， <code class="codeph">getUpdateCount()</code>返回的单个更新计数也会受到影响。
                        </p>
                        <p>在启用批处理的环境中，在遇到每个语句后，将修改执行上下文实例的<code class="codeph">getUpdateCount()</code>方法中可用的值。它将使用几个<code class="codeph">ExecutionContext</code>类中的一个静态<code class="codeph">int</code>常量值进行更新，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">NEW_BATCH_COUNT</code> ：表示为遇到的最后一个语句创建了一个新批处理。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ADD_BATCH_COUNT</code> ：表示遇到的最后一个语句已添加到现有批处理中。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXEC_BATCH_COUNT</code> ：表示在遇到最后一个语句后，显式或隐式执行了挂起的批处理。
                              </p>
                           </li>
                        </ul>
                        <p>如果要引用这些常量，请使用以下限定名称：</p><pre class="oac_no_warn" dir="ltr">执行上下文。NEW_BATCH_COUNT个ExecutionContext。ADD_BATCH_COUNT个ExecutionContext。EXEC_BATCH_COUNT</pre><p>在显式或隐式执行批处理之后， <code class="codeph">executeBatch()</code>或<code class="codeph">getBatchUpdateCounts()</code>返回的值数组仅指示语句是否成功执行。每个批处理语句都有一个数组元素。根据JDBC 2.0规范，数组元素的值<code class="codeph">-2</code>表示相应的语句已成功完成，但它影响的行数未知。
                        </p>
                        <p>执行批处理后检查所有数组值没有意义。正如目前实现的那样，这个数组唯一有用的测试是通过在成功执行后检查数组中的元素数来验证执行前批处理中的语句数（实际上，在执行批处理之后）不产生例外）。</p>
                        <p>请注意，只有在批处理时才会修改更新计数数组，因为只有批处理才会执行。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006064">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-799B803A-A09C-4F5B-9703-69A97AE24225">设置批量限制</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在添加下一个语句之前，您可以指定在批处理预定义数量的语句之后执行每个更新批处理。使用执行上下文实例的<code class="codeph">setBatchLimit()</code>方法，输入正的非零整数，如下所示：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; ec.setBatchLimit（10）; ...double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;20; i ++）{#sql [ec] {UPDATE emp1 SET sal = :( sals [i]）WHERE empno = :( empnos [i]）}; }</pre><p>此循环执行20次，其中语句被批处理，批处理在第11次循环期间执行，之后第11个语句将添加到批处理中。但是请注意，批处理不会在循环中第二次执行。当您的应用程序退出循环时，最后十个语句仍然在批处理中，并且在遇到另一个语句或您明确执行批处理之前不会执行。</p>
                        <p>您可以使用<code class="codeph">ExecutionContext</code>类的两个特殊静态<code class="codeph">int</code>常量作为<code class="codeph">setBatchLimit()</code>方法的输入：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">AUTO_BATCH</code> ：启用SQLJ运行时以确定批次限制。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNLIMITED_BATCH</code> （默认值）：指定没有批次限制。
                              </p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; ec.setBatchLimit（执行上下文。AUTO_BATCH）; ...
</pre><p>要么：</p><pre class="oac_no_warn" dir="ltr">ec.setBatchLimit（执行上下文。UNLIMITED_BATCH）; ...
</pre><p>要检查当前批处理限制，请使用执行上下文实例的<code class="codeph">getBatchLimit()</code>方法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-858CDEA9-304B-4472-9210-2ED966190C2D">批处理不兼容的语句</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果要批处理与现有批处理中的语句不兼容的语句，而不隐式执行现有批处理，则必须使用单独的执行上下文实例。以下是一个例子：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec1 = new ExecutionContext（）; ec1.setBatching（真）; ExecutionContext ec2 = new ExecutionContext（）; ec2.setBatching（真）; ...double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec1] {UPDATE emp1 SET sal = :( sals [i]）WHERE empno = :( empnos [i]）}; #sql [ec2] {UPDATE emp2 SET sal = :( sals [i]）WHERE empno = :( empnos [i]）}; } int [] updateCounts1 = ec1.executeBatch（）; int [] updateCounts2 = ec2.executeBatch（）; ...
</pre><div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-018A97CE-20B5-4156-A760-C6A268DA8F13">
                           <p class="notep1">注意：</p>
                           <p>此示例假定两个<code class="codeph">UPDATE</code>语句完全相互独立。不要在不同的执行上下文中批处理相互依赖的语句，因为您无法完全确定它们的执行顺序。
                           </p>
                        </div>
                        <p>另一种方法是使用单个执行上下文和单独的循环，以便在<code class="codeph">EMP2</code>更新之前批量处理并执行所有<code class="codeph">EMP1</code>更新：</p><pre class="oac_no_warn" dir="ltr">...ExecutionContext ec = new ExecutionContext（）; ec.setBatching（真）; ...double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec] {UPDATE emp1 SET sal = :( sals [i]）WHERE empno = :( empnos [i]）}; } for（int i = 0; i &lt;empnos.length; i ++）{#sql [ec] {UPDATE emp2 SET sal = :( sals [i]）WHERE empno = :( empnos [i]）}; ec.executeBatch（）; ...
</pre><p>此示例显式执行第一个批处理和第二个批处理。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-507081B0-2691-4FDC-BFDA-0382143BF567">使用隐式执行上下文进行更新批处理</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>到目前为止，所有更新批处理示例都已创建并指定了显式执行上下文实例。但是，这并不是必需的，因为每个连接上下文实例都有一个隐式执行上下文实例。例如，您可以访问默认连接的隐式执行上下文实例，如下所示：</p><pre class="oac_no_warn" dir="ltr">。DefaultContext.getDefaultContext（）getExecutionContext（）setBatching（真）。 ...double [] sals = ...; String [] empnos = ...; for（int i = 0; i &lt;empnos.length; i ++）{#sql {UPDATE employees SET salary = :( sals [i]）WHERE employee_id = :( empnos [i]）}; } //隐式执行批处理并提交#sql {COMMIT};</pre><p>或者，您可以显式执行批处理，如下所示：</p><pre class="oac_no_warn" dir="ltr">。DefaultContext.getDefaultContext（）getExecutionContext（）则ExecuteBatch（）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-23DC0E98-FFED-43CF-A525-E15722C90E8D">有关更新批处理的一般注意事项</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果使用更新批处理，特别是如果使用未分页执行上下文实例将语句与使用批处理执行上下文实例的语句混合，则请记住以下几点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果unbatched语句依赖于批处理语句，那么请确保在unbatched语句之前执行批处理。</p>
                           </li>
                           <li>
                              <p>JDBC <code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>操作（即自动提交或任何显式使用JDBC <code class="codeph">Connection</code>实例的<code class="codeph">commit()</code>或<code class="codeph">rollback()</code>方法<code class="codeph">rollback()</code>不会批量执行挂起语句。
                              </p>
                              <p>但是，请务必注意，使用SQLJ <code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>语句（如下所示） <span class="italic">将</span>批量执行挂起语句：</p><pre class="oac_no_warn" dir="ltr">#sql {COMMIT};</pre><p>要么：</p><pre class="oac_no_warn" dir="ltr">#sql {ROLLBACK};</pre><p>这是您应该始终使用<code class="codeph">#sql</code>语法提交或回滚更改的另一个原因，这会清除SQLJ资源和JDBC资源。
                              </p>
                           </li>
                           <li>
                              <p>当由于遇到不可访问或不兼容的语句而隐式执行批处理时，批处理在执行unbatchable或不兼容语句<span class="italic">之前</span>执行，但<span class="italic">在</span>评估该语句的输入参数并将其传递给语句之后。
                              </p>
                           </li>
                           <li>
                              <p>如果您不再打算使用特定的批处理启用的执行上下文实例，则显式执行或取消其挂起的批处理以释放资源。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__I1006173">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-9D77ED43-AAFE-43C3-9D3B-B1B1AFC35D70">批处理执行期间的错误条件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果语句在批处理执行过程中导致异常，请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic">不</span>执行导致异常的语句之后的批处理语句。
                              </p>
                           </li>
                           <li>
                              <p>在异常之前已经执行的批处理语句<span class="italic">不会</span>回滚。
                              </p>
                           </li>
                           <li>
                              <p>如果由于遇到另一个（不可访问或不兼容）语句而隐式执行发生异常的批处理， <span class="italic">则不</span>执行该语句。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-A83607A9-3148-4EE6-BD76-1EAFE11CA42D">
                           <p class="notep1">注意：</p>
                           <p>假设您在使用更新批处理时已禁用自动提交模式。这可以在批处理执行期间出现错误时提供提交/回滚控制。</p>
                        </div>
                        <p>在JDBC 2.0或更高版本下批处理执行期间发生异常时，它通常是标准<code class="codeph">java.sql.的实例<code class="codeph">java.sql.BatchUpdateException</code>类， <code class="codeph">java.sql.的子类<code class="codeph">java.sql.SQLException</code>类。<code class="codeph">BatchUpdateException</code>类具有<code class="codeph">getUpdateCounts()</code>方法，对于在发生异常之前成功执行的批处理语句，该方法返回的更新计数数组等于<code class="codeph">ExecutionContext</code>类的<code class="codeph">executeBatch()</code>或<code class="codeph">getBatchUpdateCounts()</code>方法返回的更新计数。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E764E87E-1320-4DBE-B59E-7B03150BF803__GUID-A7CE4C74-ABF1-4F86-8829-AC234982E270">递归调用和更新批处理</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>执行SQLJ存储过程（其中一个调用另一个）可能导致两个过程同时使用相同的执行上下文实例。使用执行上下文实例的<code class="codeph">setBatching()</code>方法设置的update-batching标志将以与其他执行上下文属性相同的方式起作用。无论哪个存储过程设置它，它都会影响任一存储过程中的下一个可执行语句。
                        </p>
                        <p>因此，每当发生递归调用时，都会在服务器中自动禁用更新批处理。执行挂起的批处理，并且在递归调用的过程中不会发生批处理。要避免此行为，请在启用批处理的存储过程中使用显式执行上下文实例。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ764"></a><a id="JSQLJ765"></a><a id="JSQLJ763"></a><div class="props_rev_3"><a id="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50" name="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50"></a><h4 id="JSQLJ-GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50" class="sect4">列定义</h4>
                  <div>
                     <p>Oracle SQLJ实现反映了Oracle JDBC对列类型和大小定义的支持。根据驱动程序实现（在不同的Oracle JDBC驱动程序中有所不同），注册列类型和大小可以为每个查询保存数据库的行程。特别是，Oracle JDBC Thin驱动程序和位置迭代器的使用也是如此。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50__GUID-DCC0030F-C486-40D5-BBD9-24CFDA877839">Oracle实现列定义</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果启用列定义，则Oracle SQLJ实现将采用以下步骤自动注册列类型和大小：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在自定义期间或在使用默认的Oracle特定代码生成的转换期间，SQLJ连接到指定的数据库模式以确定要检索的列的类型和大小。使用ISO标准SQLJ代码生成，列默认值成为SQLJ配置文件的一部分。这可以在源代码转换的定制步骤期间或在现有配置文件的单独定制期间完成。</p>
                           </li>
                           <li>
                              <p>当您的应用程序执行时，SQLJ运行时将使用列信息通过JDBC驱动程序注册列类型和大小，方法是调用Oracle JDBC语句类中提供的<code class="codeph">defineColumnType()</code>方法。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-68162E09-5D50-43BE-B39D-6CFCC90B5D50__GUID-8044C763-F4AC-4E23-A1D0-E1D7212B91F3">列定义的定制器和转换器选项</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要启用列定义，请按如下方式设置SQLJ选项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>启用<code class="codeph">optcols</code>标志。对于Oracle特定的代码生成，请使用SQLJ转换器<code class="codeph">-optcols</code>选项。对于ISO标准代码生成，请使用转换程序选项或Oracle自定义程序选项（SQLJ命令行上的<code class="codeph">-P-Coptcols</code> ）。
                              </p>
                           </li>
                           <li>
                              <p>设置数据库连接的用户，密码和URL。对于Oracle特定的代码生成，这是通过SQLJ转换器<code class="codeph">-user</code> ， <code class="codeph">-password</code>和<code class="codeph">-url</code>选项。对于ISO标准代码生成，可以通过转换程序选项，也可以单独使用自定义程序选项（SQLJ命令行上的<code class="codeph">-P-user</code> ， <code class="codeph">-P-password</code>和<code class="codeph">-P-url</code> ）。此外，如果未使用默认的<code class="codeph">OracleDriver</code>类，请设置JDBC驱动程序类（SQLJ命令行上的<code class="codeph">-P-driver</code> ）。
                              </p>
                           </li>
                        </ul>
                        <p>有关自定义程序选项的信息，请参阅<span class="q">“ <a href="appendix.html#GUID-0BBEA4C2-0474-40DE-9082-D55813F8BE02">自定义程序特定选项概述</a> ”</span>下的<span class="q">“</span> <code class="codeph">optcols</code>部分，以及<span class="q">“ <a href="appendix.html#GUID-4E316F9C-E16F-45D4-A5ED-B77B7BCF44A6">自定义程序线束选项概述</a> ”</span>下的<code class="codeph">user</code> ， <code class="codeph">password</code> ， <code class="codeph">url</code>和<code class="codeph">driver</code>部分。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ767"></a><a id="JSQLJ768"></a><a id="JSQLJ769"></a><a id="JSQLJ766"></a><div class="props_rev_3"><a id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D" name="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D"></a><h4 id="JSQLJ-GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D" class="sect4">参数大小定义</h4>
                  <div>
                     <p>Oracle JDBC和SQLJ实现使您可以通过定义用作以下任何一项的参数大小（Java主机变量的大小）来优化JDBC资源分配：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>存储过程或函数调用中的输入或输出参数</p>
                        </li>
                        <li>
                           <p>从存储的函数调用返回值</p>
                        </li>
                        <li>
                           <p>SET语句中的输入或输出参数</p>
                        </li>
                        <li>
                           <p>PL / SQL块中的输入或输出参数</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-6213773C-5889-48A8-A081-850606DDEEE2">Oracle实现参数大小定义</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle通过选项设置实现参数大小定义，并结合源代码注释中嵌入的提示。对于ISO标准SQLJ代码生成，可以使用Oracle定制程序选项。对于默认的Oracle特定代码生成，可以使用等效的SQLJ转换器选项。</p>
                        <p>使用选项和提示如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过SQLJ转换程序或Oracle定制程序参数定义标志启用参数大小定义。</p>
                           </li>
                           <li>
                              <p>通过SQLJ转换程序或Oracle customizer参数默认大小选项指定特定数据类型的默认大小。</p>
                           </li>
                           <li>
                              <p>通过在源代码注释中嵌入提示，按照规定的格式覆盖特定参数的数据类型默认大小。</p>
                           </li>
                        </ul>
                        <p>对于任何给定的主机变量，当启用参数大小定义时，如果存在资源，则根据源代码提示分配资源。如果没有源代码提示，则使用相应数据类型的默认大小（如果指定了一个）。如果没有源代码提示或适当的默认大小，则根据JDBC实现分配最大资源。</p>
                        <p>应用程序执行时，通过调用Oracle JDBC语句类中可用的<code class="codeph">defineParameterType()</code>和<code class="codeph">registerOutParameter()</code>方法来注册参数大小。
                        </p>
                        <div class="infoboxnote" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-33D99FBA-07BA-432F-802F-8547894645B8">
                           <p class="notep1">注意：</p>
                           <p>如果未启用参数定义标志，则将忽略参数大小缺省值和源代码提示，并根据JDBC实现分配最大或缺省资源。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-6B4EE248-90F4-4984-AB56-EC9EABE3BD2F">参数大小定义的定制器和转换器选项</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>对参数大小定义使用以下SQLJ选项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">optparams</code>标志启用参数大小定义。对于特定于Oracle的代码生成，请使用SQLJ转换器<code class="codeph">-optparams</code>选项。对于ISO标准代码生成， <code class="codeph">-P-Coptparams</code>在SQLJ命令行上使用转换程序选项或Oracle自定义程序选项<code class="codeph">-P-Coptparams</code> 。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">optparamdefaults</code>为特定数据类型设置默认大小。对于特定于Oracle的代码生成，请使用SQLJ转换程序<code class="codeph">-optparamdefaults=</code> <span class="italic"><code class="codeph">xxxx</code></span>选项。对于ISO标准代码生成，请在SQLJ命令行上使用转换程序选项或Oracle自定义程序选项<code class="codeph">-P-Coptparamdefaults=</code> <span class="italic"><code class="codeph">xxxx</code></span> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-1D3BD376-A9A2-436C-B77B-B7548CFCD96A">参数大小定义的源代码提示</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下列格式在SQLJ语句中嵌入参数大小定义的源代码提示（您可以根据需要在注释中添加空格）：</p><pre class="oac_no_warn" dir="ltr">/ *（ <span class="italic">大小</span> ）* /</pre><p>大小以字节为单位。如果禁用<code class="codeph">optparams</code>标志，则忽略提示。
                        </p>
                        <p>您可以覆盖默认参数大小，而无需指定新大小（将大小分配给JDBC实现），如下所示：</p><pre class="oac_no_warn" dir="ltr">/ *（）* /</pre><p>这是一个例子：</p><pre class="oac_no_warn" dir="ltr">byte [] hash;字符串名称= Tyrone; String street = 2020梅丽尔街; String city = Wichita;弦乐州=堪萨斯州; String zipcode = 77777; #sql hash = {/ *（5）* / VALUES（ADDR_HASH（：name / *（20）* /，：street / *（）* /，：city，：state，：INOUT zipcode / *（10）* /））};</pre><p>结果表达式的提示（例如示例中的结果表达式<code class="codeph">hash</code>必须是出现在SQLJ语句括号内的第一个项目，如图所示。输入和输出主变量的提示必须紧跟变量，如图所示。
                        </p>
                        <p>该示例设置参数大小如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">hash</code> ：5个字节</p>
                           </li>
                           <li>
                              <p><code class="codeph">name</code> ：20个字节</p>
                           </li>
                           <li>
                              <p><code class="codeph">street</code> ：覆盖默认值，但没有设置（将分配保留到JDBC）</p>
                           </li>
                           <li>
                              <p><code class="codeph">city</code> ：none（使用适当的数据类型默认，如果有的话）</p>
                           </li>
                           <li>
                              <p><code class="codeph">state</code> ：none（使用适当的数据类型default，如果有的话）</p>
                           </li>
                           <li>
                              <p><code class="codeph">zipcode</code> ：10个字节</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-51188B99-AF1F-4F26-8826-1F5CAB03122D__GUID-C63A6FF8-4F21-4D98-89C1-34E967D7CCBC">
                           <p class="notep1">注意：</p>
                           <p>如果更改任何参数大小以使其实际大小在运行时超过其注册大小，则将引发SQL异常。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ770"></a><div class="props_rev_3"><a id="GUID-630E713D-C1AA-4ED8-8061-153B6880EB61" name="GUID-630E713D-C1AA-4ED8-8061-153B6880EB61"></a><h3 id="JSQLJ-GUID-630E713D-C1AA-4ED8-8061-153B6880EB61" class="sect3">SQLJ调试功能</h3>
               <div>
                  <p>本节总结了Oracle SQLJ实现中的调试功能。它包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-35667B8F-391D-4B14-BE21-0C76BE642D14">用于调试的SQLJ -linemap标志</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4">AuditorInstaller专业定制器概述</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-4D44802F-CF56-4C60-BFA3-F783570806F4">Oracle10g JDeveloper中的开发和调试概述</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ771"></a><div class="props_rev_3"><a id="GUID-35667B8F-391D-4B14-BE21-0C76BE642D14" name="GUID-35667B8F-391D-4B14-BE21-0C76BE642D14"></a><h4 id="JSQLJ-GUID-35667B8F-391D-4B14-BE21-0C76BE642D14" class="sect4">用于调试的SQLJ -linemap标志</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">-linemap</code>标志指示SQLJ将SQLJ源代码文件中的行号映射到相应<code class="codeph">.class</code>文件中的位置。这将是在编译由SQLJ转换器生成的<code class="codeph">.java</code>文件期间创建的<code class="codeph">.class</code>文件。因此，当发生Java运行时错误时，Java虚拟机（JVM）报告的行号是SQLJ源代码中的行号，使调试更容易。
                        </p>
                        <p>如果您使用的是Sun Microsystems <code class="codeph">jdb</code>调试器，则使用<code class="codeph">-jdblinemap</code>选项而不是<code class="codeph">-linemap</code>选项。这些选项是等效的，除了<code class="codeph">-jdblinemap</code>执行一些特殊处理，因为<code class="codeph">jdb</code>不支持文件扩展名不是<code class="codeph">.java</code>扩展名的Java源文件。
                        </p>
                        <div class="infoboxnote" id="GUID-35667B8F-391D-4B14-BE21-0C76BE642D14__GUID-6DA504C7-6AD4-41AC-AE9E-F9BB1FCF5FFF">
                           <p class="notep1">注意：</p>
                           <p>如果要在服务器中进行转换，则在服务器端转换期间创建的类模式对象会自动引用映射到SQLJ源代码的行号。这相当于在客户端上进行翻译时启用<code class="codeph">-linemap</code>选项。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ773"></a><div class="props_rev_3"><a id="GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4" name="GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4"></a><h4 id="JSQLJ-GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4" class="sect4">AuditorInstaller专业定制器概述</h4>
                  <div>
                     <p>对于ISO代码生成，SQLJ提供了一个特殊的自定义程序<code class="codeph">AuditorInstaller</code> 。此定制程序将在SQLJ命令行中指定的概要文件中插入称为审计程序的调试语句集。这些配置文件必须已存在于以前的自定义中。调试语句将在SQLJ运行时（当有人运行您的应用程序时）执行，显示一系列方法调用和返回的值。
                     </p>
                     <p>使用自定义程序线束<code class="codeph">debug</code>选项（前缀为<code class="codeph">-P-</code>与任何常规自定义选项一样）来插入调试语句。
                     </p>
                     <div class="infoboxnotealso" id="GUID-C7C84438-BA07-44C9-B7E4-329F9B36E0C4__GUID-5FBFE829-924C-4830-AECE-B52F4891DE33">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="appendix.html#GUID-B820810A-DDDF-4E42-A3C9-AF04F4DC7075">用于调试的AuditorInstaller定制器</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="JSQLJ774"></a><div class="props_rev_3"><a id="GUID-4D44802F-CF56-4C60-BFA3-F783570806F4" name="GUID-4D44802F-CF56-4C60-BFA3-F783570806F4"></a><h4 id="JSQLJ-GUID-4D44802F-CF56-4C60-BFA3-F783570806F4" class="sect4">Oracle10 <span class="italic">g</span> JDeveloper中的开发和调试概述</h4>
                  <div>
                     <p>甲骨文SQLJ产品完全集成到ORACLE10 <span class="italic">摹</span> JDeveloper的可视化编程工具。
                     </p>
                     <p>JDeveloper还包括一个支持SQLJ的集成调试器。与标准Java语句一样，SQLJ语句可以在应用程序执行时进行内联调试。报告的行号根据SQLJ源代码中的行号（与生成的Java代码相反）。</p>
                  </div>
               </div>
            </div><a id="JSQLJ775"></a><div class="props_rev_3"><a id="GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585" name="GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585"></a><h3 id="JSQLJ-GUID-0CAF88FB-C905-43AF-AB6B-2FE983615585" class="sect3">SQLJ支持Oracle性能监视</h3>
               <div>
                  <p>FUTURE（10i / 10.1之后）：SQLJ DMS监控本地存储为层次结构; -sqlmonitor.dms = false设置（用于本地存储而不是发送到DMS）;使用SQLJ DMS API（访问本地存储的结果）。</p>
                  <p>FUTURE（10i / 10.1之后）：SQLJ -components = append; DMS的多次翻译运行。</p>
                  <p>未来：适当时将Oracle9iAS更新为Oracle10iAS。</p>
                  <p>以下部分讨论Oracle动态监视服务（DMS）的Oracle SQLJ实现支持：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-5C441E4C-075B-46E3-A518-A5D6E8745764">SQLJ DMS支持概述</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661">DMS的SQLJ命令行选项摘要</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-2AE24805-697C-4C28-9E27-1301DBD100C7">DMS的SQLJ运行时命令和属性文件设置</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-994A9604-3FD1-4A2E-9378-4606E1863B33">SQLJ DMS传感器和度量标准</a></p>
                     </li>
                     <li>
                        <p><a href="performance-and-debugging.html#GUID-AB176F74-4B1D-478E-A896-99FB750805F2">SQLJ DMS示例</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ776"></a><div class="props_rev_3"><a id="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764" name="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764"></a><h4 id="JSQLJ-GUID-5C441E4C-075B-46E3-A518-A5D6E8745764" class="sect4">SQLJ DMS支持概述</h4>
                  <div>
                     <p>DMS使用户能够测量SQLJ程序的性能统计信息。对SQL的SQLJ支持侧重于每个SQL语句的整体性能，例如其执行时间，但也可以提供方法级或类级性能信息，例如Oracle对Oracle的JDBC支持。您可以选择客户端透视图，例如每个<code class="codeph">#sql</code>语句的整体性能，服务器端透视图，例如每个SQL操作的服务器端跟踪，或两者。
                     </p>
                     <p>为了启用DMS设置，需要检测通过SQLJ选项在转换时指定的程序。具体而言，检测是将DMS调用插入系统或应用程序代码以测量其性能的过程。</p>
                     <p>在运行时，根据SQLJ DMS属性文件中的指示，可以在执行期间监视在转换期间检测的任何组件。在运行时，统计信息通过DMS API发送到DMS。这需要在您的环境中运行DMS系统。然后，您可以通过DMS工具访问统计信息。</p>
                     <p>统计信息旨在帮助您跟踪和理解SQL语句性能，并根据以下层次结构（从上到下）进行报告：</p>
                     <ol>
                        <li>
                           <p>应用程序：在此上下文中，应用程序被定义为由SQLJ命令行中指定的SQLJ和Java组件进行转换。但是，只能检测SQLJ组件。</p>
                        </li>
                        <li>
                           <p>模块：模块对应于Java包。</p>
                        </li>
                        <li>
                           <p>操作：操作映射到SQLJ程序中定义的Java类。</p>
                        </li>
                        <li>
                           <p>声明：语句是SQLJ程序中的SQL语句。</p>
                        </li>
                     </ol>
                     <p>测量以下DMS统计信息以进行客户端监视：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个<code class="codeph">#sql</code>语句的经过时间，包括解析和执行</p>
                        </li>
                        <li>
                           <p>获取下一次执行每个<code class="codeph">next()</code>调用的时间</p>
                        </li>
                        <li>
                           <p>Get-XXX时间，通过每次<code class="codeph">get</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>调用提取数据库列的时间</p>
                        </li>
                     </ul>
                     <p>这些统计信息要求DMS库在转换时和运行时都位于类路径中，因此DMS库不可用的服务器不支持。无法以客户端代码的方式监视服务器端SQLJ代码。</p>
                     <p>测量SQLJ客户端程序的服务器端SQL监视的以下统计信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>解析时间</p>
                        </li>
                        <li>
                           <p>执行时间处理时间</p>
                        </li>
                        <li>
                           <p>获取时间</p>
                        </li>
                     </ul>
                     <p>这些统计信息可通过SQL跟踪功能从Oracle Database 12 <span class="italic">c</span>第1版（12.1）跟踪文件中获得。这与DMS无关，但您可以通过SQLJ DMS属性文件<code class="codeph">sqlmonitor.servertracing</code>设置启用它。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764__GUID-877289C4-84BE-49AB-8D63-E824BF1D598A">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="performance-and-debugging.html#GUID-2AE24805-697C-4C28-9E27-1301DBD100C7">DMS的SQLJ运行时命令和属性文件设置</a> ”</span></p>
                     </div>
                     <p>对于客户端SQLJ程序，您可以使用DMS统计信息和服务器端跟踪。例如，从DMS中，您可以获得由查询组成的<code class="codeph">#sql</code>语句所需的总时间，然后从服务器端跟踪中可以了解在服务器中执行SQL查询实际花费了多少时间。
                     </p>
                     <div class="infoboxnote" id="GUID-5C441E4C-075B-46E3-A518-A5D6E8745764__GUID-2E4EA613-E409-4225-B644-E16F60A02F79">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>DMS支持目前需要特定于Oracle的代码生成，默认情况下已启用。</p>
                           </li>
                           <li>
                              <p>在Oracle Database 12 <span class="italic">c</span>第1版（12.1）中，已检测的代码需要Java Development Kit（JDK）6。
                              </p>
                           </li>
                           <li>
                              <p>仅检测SQLJ声明和语句。</p>
                           </li>
                           <li>
                              <p>DMS库位于文件<code class="codeph">dms.jar</code> ，位于Oracle Database 12 <span class="italic">c</span>第1版（12.1）的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/oc4j/lib</code>中</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="JSQLJ777"></a><div class="props_rev_3"><a id="GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661" name="GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661"></a><h4 id="JSQLJ-GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661" class="sect4">DMS的SQLJ命令行选项摘要</h4>
                  <div>
                     <p>未来（10i / 10.1之后）： - 组件=追加;多次翻译。</p>
                     <p>Oracle SQLJ实现提供以下转换器前端选项以支持DMS：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">-instrument</code> ：启用检测并为应用程序指定名称（要转换的组件的集合）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-components</code> ：指定要检测的组件（包和类）。
                           </p>
                        </li>
                     </ul>
                     <p>通常，您可以通过在<code class="codeph">-instrument</code>设置中指定所需的应用程序名称来启用检测，也可以选择指定包。或者将设置指定为<code class="codeph">true</code>以使用默认应用程序<code class="codeph">defaultApp</code> 。对于DMS检测，术语应用程序是指在SQLJ命令行中为转换指定的所有SQLJ和Java组件。
                     </p>
                     <p>如果启用了检测，则根据<code class="codeph">-instrument</code>设置创建SQLJ DMS属性文件，从当前目录开始，并根据SQLJ <code class="codeph">-d</code>选项的任何设置创建。对于设置为<code class="codeph">true</code> ，属性文件在当前目录中命名为<code class="codeph">sqlmonitor.properties</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-79B630D1-4ED7-4F6F-80C2-D03CCEE44661__GUID-B556D9B1-8919-421F-A5C4-58C0C5DBCE7C">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">-instrument</code>的设置相当于<code class="codeph">-instrument=true</code> 。<code class="codeph">-instrument=false</code> （默认值）的设置会禁用检测。
                        </p>
                     </div>
                     <p>举个简单的例子， <code class="codeph">-instrument=myapp</code>的设置将导致创建属性文件<code class="codeph">myapp.properties</code> 。现在考虑以下示例，对于<code class="codeph">stock</code>的应用程序名称和<code class="codeph">com.acme</code>的包名称：</p><pre class="oac_no_warn" dir="ltr">％sqlj -instrument = com.acme / stock -d / home Stock.sqlj Trading.sqlj</pre><p>由于<code class="codeph">-d</code>选项，将创建<code class="codeph">/home/com/acme/stock.properties</code>文件。
                     </p>
                     <p>通过<code class="codeph">-instrument</code>选项启用检测时，使用<code class="codeph">-components</code>选项指定要为DMS监视检测的已翻译组件的子集，通常是大部分或全部，以便在运行时可以灵活监视。指定以逗号分隔的包列表（用于检测每个包中的所有类）或特定类，或使用default <code class="codeph">all</code>设置来检测所有正在转换的组件。
                     </p>
                     <p>例如，要检查<code class="codeph">Stock</code>和<code class="codeph">Trading</code>类：</p><pre class="oac_no_warn" dir="ltr">％sqlj ... -components = com.acme。股票，com.acme。贸易</pre><p>在运行时，将根据SQLJ DMS属性文件中指定的内容监视已检测的组件。无论在属性文件中指定了什么，在运行期间都无法监视在转换期间未检测的任何组件。</p>
                  </div>
               </div><a id="JSQLJ778"></a><div class="props_rev_3"><a id="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7" name="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7"></a><h4 id="JSQLJ-GUID-2AE24805-697C-4C28-9E27-1301DBD100C7" class="sect4">DMS的SQLJ运行时命令和属性文件设置</h4>
                  <div>
                     <p>虽然SQLJ <code class="codeph">-instrument</code>选项指定SQLJ转换器是否监视文件以进行监视功能，但SQLJ DMS属性文件实际上是在运行时确定监视的内容以及方式。
                     </p>
                     <p>此属性文件由SQLJ在翻译期间创建，然后您可以根据需要进行修改。请注意，如果再次运行SQLJ，SQLJ会覆盖属性文件。您所做的任何更改都将丢失。</p>
                     <p>SQLJ DMS属性文件中的设置如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">sqlmonitor.components</code> ：这是一个以逗号分隔的已检测组件（包或类）的列表。这由翻译器自动设置，以反映SQLJ <code class="codeph">-components</code>选项的设置。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.monitorcomp</code> ：这是一个以逗号分隔的要监视的组件（包或类）列表，表示<code class="codeph">sqlmonitor.components</code>设置中组件的子集。<code class="codeph">sqlmonitor.monitorcomp</code>的设置最初在转换期间确定，以反映<code class="codeph">sqlmonitor.components</code>设置，但您可以根据需要进行调整。<code class="codeph">all</code>设置<code class="codeph">all</code>可以监视<code class="codeph">sqlmonitor.components</code>设置中列出的所有组件。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.dms</code> ：此布尔标志，默认值为<code class="codeph">true</code> ，指定是否将收集的统计信息传递给DMS。这需要运行Oracle Application Server <span class="italic">10g</span>实例，您可以在其中使用DMS工具。统计信息可以通过Web浏览器访问或写入文件。
                           </p>
                           <div class="infoboxnote" id="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7__GUID-0539F721-4034-4FBE-9A24-80C3C9EF7C21">
                              <p class="notep1">注意：</p>
                              <p>目前不支持<code class="codeph">sqlmonitor.dms=false</code>设置。
                              </p>
                           </div>
                           <p>FUTURE（10i / 10.1之后）：支持sqlmonitor.dms = false。（如果sqlmonitor.dms = false，是否还需要DMS库？）</p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.sysurl</code> ：对于服务器端跟踪，它指定数据库URL。</p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.sysuser</code> ：对于服务器端跟踪，它指定数据库用户。该用户必须具有<code class="codeph">sysdba</code>权限。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.syspassword</code> ：对于服务器端跟踪，它指定<code class="codeph">sysuser</code>的密码。
                           </p>
                           <div class="infoboxnote" id="GUID-2AE24805-697C-4C28-9E27-1301DBD100C7__GUID-38EC633F-2F20-4B73-BC0D-AEA922DA8F1D">
                              <p class="notep1">注意：</p>
                              <p>对于<code class="codeph">sysurl</code> ， <code class="codeph">sysuser</code>和<code class="codeph">syspassword</code> ，默认值根据提供给SQLJ的<code class="codeph">user</code> ， <code class="codeph">password</code>和<code class="codeph">url</code>值，通过SQLJ命令行或通过SQLJ属性文件。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.servertracing</code> ：使用此命令启用服务器端跟踪，以收集服务器中的性能统计信息，例如SQL操作。支持的设置为<code class="codeph">true</code>或<code class="codeph">false</code> （默认值）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sqlmonitor.dumpfile</code> ：如果向DMS提供统计信息，则可以使用此选项指定DMS工具将统计信息写入的文件。默认值为<span class="italic"><code class="codeph">application_name</code></span> <code class="codeph">.mtr</code> ，其中<span class="italic"><code class="codeph">application_name</code></span>根据<code class="codeph">-instrument</code>选项设置（默认情况下为<code class="codeph">defaultApp</code> ）。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSQLJ779"></a><div class="props_rev_3"><a id="GUID-994A9604-3FD1-4A2E-9378-4606E1863B33" name="GUID-994A9604-3FD1-4A2E-9378-4606E1863B33"></a><h4 id="JSQLJ-GUID-994A9604-3FD1-4A2E-9378-4606E1863B33" class="sect4">SQLJ DMS传感器和度量标准</h4>
                  <div>
                     <p>DMS使用传感器来计算执行检测的SQLJ程序期间的性能指标并将其传送到DMS。它们被组织为层次结构，每个传感器都具有路径名称。以下是典型的传感器格式：</p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">sensor_name</span> / SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">sensor_name</span> / SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">sensor_name</span> / SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / <span class="italic">sensor_name</span>
</pre><p>传感器是<code class="codeph">oracle.dms.instrument.一个实例<code class="codeph">oracle.dms.instrument.Sensor</code>类，具有计算和组织性能统计信息的方法。例如，有一些方法可以指示传感器导出其他指标并获取其中一个指标的值。
                     </p>
                     <p>请注意，在已检测的应用程序结束之前，必须调用<code class="codeph">oracle.sqlj.runtime.sqlmonitor.的<code class="codeph">close()</code>方法<code class="codeph">oracle.sqlj.runtime.sqlmonitor.SQLMonitor</code>类，如下面的示例（其中还使用<code class="codeph">Oracle</code>类<code class="codeph">close()</code>方法来关闭连接上下文）：</p><pre class="oac_no_warn" dir="ltr">试试{Oracle.close（）; oracle.sqlj.runtime.sqlmonitor。SQLMonitor.close（）; } catch（Throwable e）{...}</pre><p>请注意以下条款：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">application_name</code></span>是根据SQLJ <code class="codeph">-instrument</code>选项的应用程序名称，默认情况下是<code class="codeph">defaultApp</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果传感器与包关联，则项<span class="italic"><code class="codeph">module</code></span>是包名。如果包名称为空，则使用设置<code class="codeph">*TopLevel*</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果传感器与类关联，则<span class="italic"><code class="codeph">class</code></span>是类名。
                           </p>
                        </li>
                        <li>
                           <p>如果传感器与SQL语句关联，则<span class="italic"><code class="codeph">linenum</code></span>表示正在检测的SQLJ程序中的SQL语句的行号。如果多个SQL语句出现在同一行中，则它们的起始列位置用于区分它们。例如， <span class="italic"><code class="codeph">linenum</code></span>值8.13表示8是行号，13是列号。
                           </p>
                        </li>
                     </ul>
                     <p>以下传感器和相关指标通常特别重要：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>传感器名称： <code class="codeph">ContextType</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / ContextType</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">value</code> ：表示连接上下文类型的字符串</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>传感器名称： <code class="codeph">SQLString</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / SQLString</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">value</code> ：由SQL语句组成的字符串</p>
                                 <p>这是传递给JDBC的确切字符串，包括从原始<code class="codeph">#sql</code>语句进行的任何转换。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>传感器名称： <code class="codeph">Execute</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / Execute</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">time</code> ：此语句的JDBC <code class="codeph">execute()</code>方法的所有执行的总时间（以毫秒为单位<code class="codeph">execute()</code></p>
                                 <p>例如，如果语句执行五次，那么<code class="codeph">time</code>将是<code class="codeph">execute()</code>五次执行的<code class="codeph">execute()</code>方法所花费的总时间。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">completed</code> ：已<code class="codeph">completed</code>的执行次数（如5）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">minTime</code> ：任何单次执行的最短时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxTime</code> ：任何单次执行的最长时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">avg</code> ：平均执行时间，即<code class="codeph">time</code>除以<code class="codeph">completed</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">active</code> ：程序执行结束时执行语句的线程数，通常为0。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxActive</code> ：程序执行期间执行语句的最大线程数</p>
                              </li>
                           </ul>
                           <p>要测量JDBC语句的执行时间，时钟将在语句执行之前立即启动，并在获取结果集或语句完成执行时或捕获异常时停止。</p>
                        </li>
                        <li>
                           <p>传感器名称： <code class="codeph">ServerExecute</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / ServerExecute</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">value</code> ：此SQL语句的所有执行的服务器中的总执行时间（以毫秒为单位）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">count</code> ：已完成的执行次数</p>
                              </li>
                              <li>
                                 <p><code class="codeph">minValue</code> ：任何单次执行的最短时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxValue</code> ：任何单次执行的最长时间</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>传感器名称： <code class="codeph">ServerFetch</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / ServerFetch</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">value</code> ：此SQL语句的所有执行的服务器总提取时间（以毫秒为单位）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">count</code> ：已完成的执行次数</p>
                              </li>
                              <li>
                                 <p><code class="codeph">minValue</code> ：任何单次执行的最短时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxValue</code> ：任何单次执行的最长时间</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>传感器名称： <code class="codeph">ServerParse</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / ServerParse</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">value</code> ：对于此SQL语句的所有执行，在服务器中解析SQL语句所花费的总时间（以毫秒为单位）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">count</code> ：已完成的执行次数</p>
                              </li>
                              <li>
                                 <p><code class="codeph">minValue</code> ：任何单次执行的最短时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxValue</code> ：任何单次执行的最长时间</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>传感器名称： <code class="codeph">Next</code></p><pre class="oac_no_warn" dir="ltr">/ SQLJ / <span class="italic">application_name</span> / <span class="italic">module</span> / <span class="italic">class</span> / <span class="italic">linenum</span> / Next</pre><p>指标：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">time</code> ：此SQL语句的所有执行的结果集迭代器的<code class="codeph">next()</code>方法花费的总时间（以毫秒为单位<code class="codeph">next()</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">completed</code> ：已<code class="codeph">completed</code>的执行次数（如5）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">minTime</code> ：任何单次执行的最短时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxTime</code> ：任何单次执行的最长时间</p>
                              </li>
                              <li>
                                 <p><code class="codeph">avg</code> ：平均执行时间，即<code class="codeph">time</code>除以<code class="codeph">count</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">active</code> ：程序执行结束时执行语句的线程数，通常为0。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxActive</code> ：程序执行期间执行语句的最大线程数</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSQLJ781"></a><a id="JSQLJ782"></a><a id="JSQLJ783"></a><a id="JSQLJ784"></a><a id="JSQLJ780"></a><div class="props_rev_3"><a id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2" name="GUID-AB176F74-4B1D-478E-A896-99FB750805F2"></a><h4 id="JSQLJ-GUID-AB176F74-4B1D-478E-A896-99FB750805F2" class="sect4">SQLJ DMS示例</h4>
                  <div>
                     <div class="section">
                        <p>以下是用于检测SQLJ程序<code class="codeph">ExprDemo.sqlj</code>的示例命令行（单个环绕行）：</p><pre class="oac_no_warn" dir="ltr">％sqlj -dir =。 -instrument = abc / app -components = all -user = HR -url = jdbc：oracle：oci：@ExprDemo.sqlj密码： <span class="italic">密码</span>
</pre><div class="infoboxnote" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-88E82C9D-46C6-4E2B-A977-742F2D148C9F">
                           <p class="notep1">注意：</p>
                           <p>确保<code class="codeph">dms.jar</code>位于类路径中。
                           </p>
                        </div>
                        <p>此命令导致生成以下文件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">./a/b/c/ExprDemo.java</code> （由于<code class="codeph">-dir</code>选项设置，因为包<code class="codeph">abc</code>在<code class="codeph">ExprDemo.sqlj</code>声明）</p>
                           </li>
                           <li>
                              <p><code class="codeph">./a/b/c/app.properties</code> （由于<code class="codeph">-instrument</code>选项设置）</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-4433A73D-AF98-4C06-8259-5EF894333864">示例SQLJ DMS属性文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是<code class="codeph">app.properties</code>示例内容。这假定您在SQLJ创建文件后编辑了文件，因为这里的一些设置是非默认的。
                        </p><pre class="oac_no_warn" dir="ltr">sqlmonitor.components = all sqlmonitor.monitorcomp = all sqlmonitor.dms = true sqlmonitor.servertracing = true sqlmonitor.sysurl = jdbc：oracle：oci：@sqlmonitor.sysuser = HR sqlmonitor.syspassword = hr sqlmonitor.dumpfile = a / b / c /app.mtr</pre><div class="infoboxnote" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-5224214C-04D9-49FB-B7E1-1B1ABCCAC17D">
                           <p class="notep1">注意：</p>
                           <p>如果再次运行SQLJ转换器，则会覆盖<code class="codeph">app.properties</code> ，您将丢失所做的任何更改。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-F6F65F5E-A897-4EEF-BF8F-562B902F45D9">样本统计</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">sqlmonitor.dms=true</code>设置指定将监视统计信息传递给DMS。给定<code class="codeph">sqlmonitor.dumpfile</code>值，DMS工具在编译和运行程序时将统计信息写入<code class="codeph">./a/b/c/app.mtr</code>文件。
                        </p>
                        <p>要检查特定代码示例的统计信息，以下是<code class="codeph">ExprDemo.sqlj</code> ：</p><pre class="oac_no_warn" dir="ltr">#sql {DECLARE n NUMBER;的数字; BEGIN n：= 0; s：= 0;当n &lt;100 LOOP n：= n + 1; s：= s +：IN（indx ++）;结束循环; ：OUT总数：= s;结束; };</pre><p>以下是<code class="codeph">app.mtr</code>的一段统计信息，与前面的代码示例相关，并显示执行时间和服务器执行时间：</p><pre class="oac_no_warn" dir="ltr">SQLString.value：DECLARE n NUMBER;的数字; BEGIN n：= 0; s：= 0;当n &lt;100 LOOP n：= n + 1; s：= s +：1;结束循环; ：2：= s;结束;语句SQL字符串ServerExecute.maxValue：20.0 server_execute_time ServerExecute.minValue：20.0 server_execute_time ServerExecute.count：0 ops ServerExecute.value：20.0服务器执行时间ServerFetch.maxValue：0.0 server_fetch_time ServerFetch.minValue：0.0 server_fetch_time ServerFetch.count：0 ops ServerFetch.value ：0.0服务器获取时间ServerParse.maxValue：0.0 server_parse_time ServerParse.minValue：0.0 server_parse_time ServerParse.count：0 ops ServerParse.value：0.0服务器解析时间193.5 ContextType.value：class sqlj.runtime.ref。DefaultContext语句连接上下文Execute.maxActive：1个线程Execute.active：0个线程Execute.avg：37.0 msecs Execute.maxTime：37 msecs Execute.minTime：37 msecs Execute.completed：1 ops Execute.time:37 msecs</pre><p>这些统计信息表明JDBC客户端的总执行时间为37毫秒（在一次执行中），而服务器中的执行时间为20毫秒。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-8802F6C4-6A70-4BAF-BF5F-949C6C7E4662">迭代器的样本统计信息</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ExprDemo.sqlj</code>还定义并执行迭代器类型<code class="codeph">Iter</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">#sql public static iterator Iter（String ename）; ....I it iter; #sql iter = {select first_name from employees}; while（iter.next（））{System.out.println（iter.ename（））; }</pre><p>对于迭代器，DMS收集<code class="codeph">next()</code>操作的执行时间。以下是迭代器类型<code class="codeph">Iter</code> DMS结果示例：</p><pre class="oac_no_warn" dir="ltr">Iter Next.time：5毫秒</pre><p>这表明迭代<code class="codeph">Iter</code>实例时在<code class="codeph">next()</code>操作上花费的总时间是5毫秒。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB176F74-4B1D-478E-A896-99FB750805F2__GUID-672B51D7-7549-4FFF-BEEA-8E9E80A655CC">连接上下文的样本统计信息</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该<code class="codeph">#sql</code>陈述<code class="codeph">ExprDemo.sqlj</code>使用默认的连接上下文。对于整个程序中使用的<code class="codeph">DefaultContext</code>实例，DMS返回以下统计信息：</p><pre class="oac_no_warn" dir="ltr">class_sqlj.runtime.ref。DefaultContext StmtCacheSize.value：5语句高速缓存大小StmtsExecuted.count：7 ops StmtsCacheExecuted.count：7 ops</pre><p>这表明上下文的语句缓存大小为五个语句。总共执行了七个SQL语句。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00101.regexp.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在数据库应用程序中使用正则表达式</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="sql-data-types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="indexes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-data-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="indexes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的SQL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在数据库应用程序中使用正则表达式</li>
            </ol>
            <a id="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2" name="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2"></a><a id="ADFNS1004"></a><a id="ADFNS1003"></a>
            
            <h2 id="ADFNS-GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2" class="sect2"><span class="enumeration_chapter">10</span>在数据库应用程序中使用正则表达式</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='regexp'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>本章介绍正则表达式并说明如何在数据库应用程序中使用它们。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2__GUID-66C947DE-2E26-4F26-8048-D1659991D762">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="regexp.html#GUID-7F803232-421D-4499-9339-E383722D10E9">正则表达式概述</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B">Oracle SQL支持正则表达式</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47">Oracle SQL和POSIX正则表达式标准</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-C21037C2-0C75-4DFE-BB02-50B331145436">Oracle SQL正则表达式中的运算符</a></p>
                  </li>
                  <li>
                     <p><a href="regexp.html#GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC" title="创建表时，可以使用正则表达式强制执行格式。INSERT INTO SQL语句可用于测试正确和错误格式的工作方式。">在SQL语句中使用正则表达式：方案</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-1935FD80-A3CD-413F-BD2E-BBEFE64000B2__GUID-71D5960A-5119-4316-873B-41F843CA0E89">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="../nlspg/linguistic-sorting-and-matching.html#NLSPG0052" target="_blank"><span class="italic">“Oracle数据库全球化支持指南”</span></a> ，了解有关在多语言环境中使用SQL正则表达式函数的信息</p>
                     </li>
                     <li>
                        <p><span class="italic">Oracle正则表达式袖珍参考</span>由Jonathan Gennick，O'Reilly＆Associates撰写</p>
                     </li>
                     <li>
                        <p>由Jeffrey EF Friedl，O'Reilly＆Associates <span class="italic">掌握正则表达式</span></p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADFNS1013"></a><div class="props_rev_3"><a id="GUID-7F803232-421D-4499-9339-E383722D10E9" name="GUID-7F803232-421D-4499-9339-E383722D10E9"></a><h3 id="ADFNS-GUID-7F803232-421D-4499-9339-E383722D10E9" class="sect3">正则表达式概述</h3>
               <div>
                  <p>正则表达式使用<span class="bold">元字符</span> （属于或属于<span class="bold">运算符</span> ）和<span class="bold">字符文字</span> （在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00218" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>描述）指定搜索模式。
                  </p>
                  <p>搜索模式可能很复杂。例如，该正则表达式的与任一开始任何字符串匹配<code class="codeph">f</code>或<code class="codeph">ht</code> ，随后<code class="codeph">tp</code> ，任选接着<code class="codeph">s</code> ，其次是冒号（ <code class="codeph">:</code> ）：</p><pre class="oac_no_warn" dir="ltr">（F | HT）TPS？：</pre><p>前面示例中的元字符（也是运算符）是括号，管道符号（ <code class="codeph">|</code> ）和问号（ <code class="codeph">?</code> ）。字符文字被<code class="codeph">f</code> ， <code class="codeph">ht</code> ， <code class="codeph">tp</code> ， <code class="codeph">s</code> ，和冒号（ <code class="codeph">:</code> ）。
                  </p>
                  <p>括号将多个模式元素组合到一个元素中。管道符号（ <code class="codeph">|</code> ）表示在它两侧的元素<code class="codeph">f</code>和<code class="codeph">ht</code>之间进行选择。问号（ <code class="codeph">?</code> ）表示前面的元素<code class="codeph">s</code>是可选的。因此，前面的正则表达式匹配这些字符串：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">HTTP：</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">HTTPS：</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">FTP：</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">FTPS：</code></p>
                     </li>
                  </ul>
                  <p>正则表达式是Java和PERL编程语言的强大文本处理组件。例如，PERL脚本可以将目录中每个HTML文件的内容读入单个字符串变量，然后使用正则表达式搜索该字符串中的URL。这种强大的模式匹配功能是许多应用程序开发人员使用PERL的一个原因。</p>
               </div>
            </div><a id="ADFNS1007"></a><a id="ADFNS237"></a><a id="ADFNS9999"></a><div class="props_rev_3"><a id="GUID-F14733F3-B943-4BAD-8489-F9704986386B" name="GUID-F14733F3-B943-4BAD-8489-F9704986386B"></a><h3 id="ADFNS-GUID-F14733F3-B943-4BAD-8489-F9704986386B" class="sect3">Oracle SQL支持正则表达式</h3>
               <div>
                  <p>Oracle SQL对正则表达式的支持允许应用程序开发人员在数据库中实现复杂的模式匹配逻辑，这有以下几个原因：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>通过在数据库中集中模式匹配逻辑，可以避免中间层应用程序对SQL结果集进行密集的字符串处理。</p>
                        <p>例如，生命科学客户通常依靠PERL对存储在大量DNA和蛋白质数据库中的生物信息学数据进行模式分析。以前，找到蛋白质序列的匹配，如<code class="codeph">[AG]</code> 。 <code class="codeph">{4}GK[ST]</code>在中间层处理。SQL正则表达式函数使处理逻辑更接近数据，从而提供更有效的解决方案。
                        </p>
                     </li>
                     <li>
                        <p>通过使用服务器端正则表达式来强制执行约束，可以避免在多个客户端上复制验证逻辑。</p>
                     </li>
                  </ul>
                  <p>Oracle SQL支持具有<a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDIAFEI" title="此表总结了Oracle SQL模式匹配条件和函数。第一列给出了条件和函数的名称，它们是SQLRF中主题的链接。第二列简要介绍了它们。">表10-1中</a>汇总的模式匹配条件和函数的正则表达式。每个模式匹配器在给定字符串中搜索给定模式（使用正则表达式描述），并且每个模式匹配器都具有<a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="此表总结了受Perl影响的匹配运算符。">表10-2中</a>描述的模式匹配选项。这些函数有其他选项（例如，开始在字符串中搜索模式的字符位置）。
                  </p>
                  <div class="tblformal" id="GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDIAFEI">
                     <p class="titleintable">表10-1 Oracle SQL模式匹配条件和函数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle SQL模式匹配条件和函数" width="100%" border="1" summary="This table summarizes the  Oracle SQL pattern-matching condition and functions. The first column gives the names of the condition and functions, which are links to their topics in SQLRF. The second column briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d43459e514">名称</th>
                              <th align="left" valign="bottom" width="74%" id="d43459e517">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e522" headers="d43459e514 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00501" target="_blank"><code class="codeph">REGEXP_LIKE</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e522 d43459e517 ">
                                 <p><span class="bold">条件</span>是可以出现在<code class="codeph">WHERE</code>查询的条款，造成查询返回匹配给定模式的行。
                                 </p>
                                 <p><span class="bold">示例：</span>此<code class="codeph">WHERE</code>子句标识名为Steven或Stephen的员工：</p><pre class="oac_no_warn" dir="ltr">WHERE REGEXP_LIKE（（hr.employees.first_name，'^ Ste（v | ph）en $'）</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e546" headers="d43459e514 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20014" target="_blank"><code class="codeph">REGEXP_COUNT</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e546 d43459e517 ">
                                 <p>返回给定模式在给定字符串中出现的次数的<span class="bold">函数</span> 。
                                 </p>
                                 <p><span class="bold">示例：</span>此函数调用返回<code class="codeph">e</code> （但不是<code class="codeph">E</code> ）出现在字符串<code class="codeph">'Albert Einstein'</code> ，从字符位置7开始：</p><pre class="oac_no_warn" dir="ltr">REGEXP_COUNT（'Albert Einstein'，'e'，7，'c'）</pre><p>（返回值为1，因为<code class="codeph">c</code>选项指定区分大小写的匹配。）
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e578" headers="d43459e514 ">
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF06300" target="_blank"><code class="codeph">REGEXP_INSTR</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e578 d43459e517 ">
                                 <p>返回一个整数的<span class="bold">函数</span> ，该整数表示给定字符串中给定模式的起始位置。或者，整数可以指示紧接在模式结束之后的位置。
                                 </p>
                                 <p><span class="bold">示例：</span>此函数调用返回<code class="codeph">hr</code>列中第一个有效电子邮件地址的起始位置。 <code class="codeph">employees</code> 。 <code class="codeph">email</code> ：</p><pre class="oac_no_warn" dir="ltr">REGEXP_INSTR（hr.employees.email，'\ w + @ \ w +（\。\ w +）+'）</pre><p>如果返回的值大于零，则该列包含有效的电子邮件地址。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e607" headers="d43459e514 ">
                                 <p><a href="../sqlrf/REGEXP_REPLACE.html#SQLRF06302" target="_blank"><code class="codeph">REGEXP_REPLACE</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e607 d43459e517 ">
                                 <p>返回由替换字符串替换给定字符串中给定模式的出现所产生的字符串的<span class="bold">函数</span> 。
                                 </p>
                                 <p><span class="bold">示例：</span>此函数调用在<code class="codeph">hr</code>列中的每个字符后面放置一个空格。 <code class="codeph">countries</code> 。 <code class="codeph">country_name</code> ：</p><pre class="oac_no_warn" dir="ltr">REGEXP_REPLACE（hr.countries.country_name，'（。）'，'\ 1'）</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d43459e634" headers="d43459e514 ">
                                 <p><a href="../sqlrf/REGEXP_SUBSTR.html#SQLRF06303" target="_blank"><code class="codeph">REGEXP_SUBSTR</code></a></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d43459e634 d43459e517 ">
                                 <p>与<code class="codeph">REGEXP_INSTR</code>类似的<span class="bold">函数</span> ，除了不返回给定字符串中给定模式的起始位置，它返回匹配的子字符串本身。
                                 </p>
                                 <p><span class="bold">示例：</span>此函数调用返回<code class="codeph">'Oracle'</code>因为<code class="codeph">x</code>选项忽略模式中的空格：</p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR（'Oracle 2010'，'O racl e'，1,1，'x'）</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="此表总结了受Perl影响的匹配运算符。">表10-2</a>描述了<a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDIAFEI" title="此表总结了Oracle SQL模式匹配条件和函数。第一列给出了条件和函数的名称，它们是SQLRF中主题的链接。第二列简要介绍了它们。">表10-1中</a>每个模式匹配器可用的模式匹配选项。
                  </p>
                  <div class="tblformalwide" id="GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC">
                     <p class="titleintable">表10-2条件和函数的Oracle SQL模式匹配选项</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="条件和函数的Oracle SQL模式匹配选项" width="100%" border="1" summary="This table summarizes the Perl-influenced matching operators." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="17%" id="d43459e682">模式匹配选项</th>
                              <th align="left" valign="bottom" width="34%" id="d43459e685">描述</th>
                              <th align="left" valign="bottom" width="49%" id="d43459e688">例</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e693" headers="d43459e682 ">
                                 <p><code class="codeph">一世</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e693 d43459e685 ">
                                 <p>指定不区分大小写的匹配。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e693 d43459e688 ">
                                 <p>此函数调用返回3：</p><pre class="oac_no_warn" dir="ltr">REGEXP_COUNT（'阿尔伯特爱因斯坦'，'e'，' <span class="bold">我</span> '）</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e709" headers="d43459e682 ">
                                 <p><code class="codeph">C</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e709 d43459e685 ">
                                 <p>区分大小写的匹配。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e709 d43459e688 ">
                                 <p>这个函数调用返回2：</p><pre class="oac_no_warn" dir="ltr">REGEXP_COUNT（'Albert Einstein'，'e'，' <span class="bold">c</span> '）</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e725" headers="d43459e682 ">
                                 <p><code class="codeph">ñ</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e725 d43459e685 ">
                                 <p>允许Dot运算符（ <code class="codeph">.</code> ）匹配换行符，这不是默认值（ <a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="此表汇总了Oracle Database正则表达式中支持的POSIX元字符。">参见表10-3</a> ）。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e725 d43459e688 ">
                                 <p>在此函数调用中，字符串和搜索模式仅匹配，因为指定了<code class="codeph">n</code>选项：</p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR（'a'|| CHR（10）||'d'，'ad'，1,1，' <span class="bold">n</span> '）</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e752" headers="d43459e682 ">
                                 <p><code class="codeph">米</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e752 d43459e685 ">
                                 <p>指定<span class="bold">多行模式</span> ，其中字符串中的换行符终止一行。该字符串可以包含多行。
                                 </p>
                                 <p>多行模式影响POSIX运算符行首锚点（ <code class="codeph">^</code> ）和行结束锚点（ <code class="codeph">$</code> ）（如<a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="此表汇总了Oracle Database正则表达式中支持的POSIX元字符。">表10-3所示</a> ），但不影响受PERL影响的运算符<code class="codeph">\A</code> ， <code class="codeph">\Z</code>和<code class="codeph">\z</code> （描述于<a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ" title="描述Oracle正则表达式中受Perl影响的扩展。">表10-5</a> ）。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e752 d43459e688 ">
                                 <p>此函数调用返回<code class="codeph">ac</code> ：</p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR（'ab'|| CHR（10）||'ac'，'^ a。'，1,2，' <span class="bold">m</span> '）</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d43459e802" headers="d43459e682 ">
                                 <p><code class="codeph">X</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d43459e802 d43459e685 ">
                                 <p>忽略搜索模式中的空白字符。默认情况下，空白字符与自身匹配。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d43459e802 d43459e688 ">
                                 <p>此函数调用返回<code class="codeph">abcd</code> ：</p><pre class="oac_no_warn" dir="ltr">REGEXP_SUBSTR（'abcd'，'abc d'，1,1，' <span class="bold">x</span> '）</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-F14733F3-B943-4BAD-8489-F9704986386B__NOTE-134-C8CC6FBE">
                     <p class="notep1">也可以看看：</p>
                     <p>有关单行函数的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF51178" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                  </div>
               </div>
            </div><a id="ADFNS231"></a><div class="props_rev_3"><a id="GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47" name="GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47"></a><h3 id="ADFNS-GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47" class="sect3">Oracle SQL和POSIX正则表达式标准</h3>
               <div>
                  <p>正则表达式的Oracle SQL实现符合以下标准：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>IEEE便携式操作系统接口（POSIX）标准草案1003.2 / D11.2</p>
                        <p>Oracle SQL完全遵循POSIX标准中定义的正则表达式运算符的语法和匹配语义，以匹配ASCII（英语）数据。</p>
                     </li>
                     <li>
                        <p>Unicode联盟的Unicode正则表达式指南</p>
                     </li>
                  </ul>
                  <p>Oracle SQL通过以下方式扩展了POSIX标准以外的正则表达式支持：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>扩展多语言数据的匹配功能</p>
                     </li>
                     <li>
                        <p>支持一些常用的PERL正则表达式运算符，这些运算符不包含在POSIX标准中但不与它冲突（例如，字符类快捷方式和nongreedy修饰符（ <code class="codeph">?</code> ））
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7F217A82-4FA5-4CB7-9DF2-B4C879001E47__GUID-C1A46660-EC29-4284-AEE2-BC56F7FC6965">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B">Oracle SQL正则表达式中的POSIX运算符</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=regex_pubs_opengroup" target="_blank">POSIX正则表达式规范</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A">POSIX标准的Oracle SQL多语言扩展</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C">Oracle SQL PERL影响的POSIX标准扩展</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1014"></a><a id="ADFNS00401"></a><div class="props_rev_3"><a id="GUID-C21037C2-0C75-4DFE-BB02-50B331145436" name="GUID-C21037C2-0C75-4DFE-BB02-50B331145436"></a><h3 id="ADFNS-GUID-C21037C2-0C75-4DFE-BB02-50B331145436" class="sect3">Oracle SQL正则表达式中的运算符</h3>
               <div>
                  <p>Oracle SQL支持在正则表达式中使用的一组公共运算符（由元字符组成）。</p>
                  <div class="infoboxnote" id="GUID-C21037C2-0C75-4DFE-BB02-50B331145436__GUID-FACB33AC-6115-4D36-B2F0-6AE42A99B96A">
                     <p class="notep1">警告：</p>
                     <p>元字符的解释在支持正则表达式的工具之间有所不同。如果要将正则表达式从另一个环境移植到Oracle数据库，请确保Oracle SQL支持其语法并按预期解释它们。</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C21037C2-0C75-4DFE-BB02-50B331145436__GUID-A9E88CD4-8311-40DB-8F19-5E7B520A376A">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B">Oracle SQL正则表达式中的POSIX运算符</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A">POSIX标准的Oracle SQL多语言扩展</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C">Oracle SQL PERL影响的POSIX标准扩展</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS232"></a><a id="ADFNS1012"></a><div class="props_rev_3"><a id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B" name="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B"></a><h4 id="ADFNS-GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B" class="sect4">Oracle SQL正则表达式中的POSIX运算符</h4>
                  <div>
                     <p><a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="此表汇总了Oracle Database正则表达式中支持的POSIX元字符。">表10-3</a>总结了POSIX标准扩展正则表达式（ERE）语法中定义的POSIX运算符。Oracle SQL遵循POSIX标准中定义的这些运算符的精确语法和匹配语义，以匹配ASCII（英语）数据。在“描述”列中记录了Oracle SQL和POSIX标准之间的任何操作差异。
                     </p>
                     <div class="tblformalwide" id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI">
                        <p class="titleintable">表10-3 Oracle SQL正则表达式中的POSIX运算符</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle SQL正则表达式中的POSIX运算符" width="100%" border="1" summary="This table summarizes the POSIX metacharacters supported in Oracle Database regular expressions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d43459e1249">运算符语法</th>
                                 <th align="left" valign="bottom" width="16%" id="d43459e1252">名称</th>
                                 <th align="left" valign="bottom" width="41%" id="d43459e1255">描述</th>
                                 <th align="left" valign="bottom" width="28%" id="d43459e1258">例子</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1263" headers="d43459e1249 ">
                                    <p><code class="codeph">。</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1263 d43459e1252 ">
                                    <p>任何角色</p>
                                    <p>点</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1263 d43459e1255 ">
                                    <p>匹配数据库字符集中的任何字符，如果指定匹配选项<code class="codeph">n</code> ，则包括换行符（请参阅<a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="此表总结了受Perl影响的匹配运算符。">表10-2</a> ）。
                                    </p>
                                    <p>Linux，UNIX和Windows平台将换行符识别为换行符（ <code class="codeph">\x0a</code> ）。
                                    </p>
                                    <p>Macintosh平台将换行符识别为回车符（ <code class="codeph">\x0d</code> ）。
                                    </p>
                                    <p><span class="bold">注意：</span>在POSIX标准中，此运算符匹配除NULL和换行符之外的任何英语字符。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1263 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">ab</code></span>匹配字符串<code class="codeph">abb</code> ， <code class="codeph">acb</code>和<code class="codeph">adb</code> ，但与<code class="codeph">acc</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1317" headers="d43459e1249 ">
                                    <p><code class="codeph">+</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1317 d43459e1252 ">
                                    <p>一个或多个</p>
                                    <p>加上量词</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1317 d43459e1255 ">
                                    <p>匹配前一个子表达式的一个或多个匹配项（贪婪的<a id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDJFDHH" name="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDJFDHH" href="#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDJFDHH" a="" greedy="" operator="" matches="" as="" many="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" nongreedy,="" follow="" it="" with="" nongreedy="" modifier="" (?)="" (see="" table="" 10-5)=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1317 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">a+</code></span>与字符串<code class="codeph">a</code> ， <code class="codeph">aa</code>和<code class="codeph">aaa</code>匹配，但与<code class="codeph">ba</code>或<code class="codeph">ab</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1368" headers="d43459e1249 ">
                                    <p><code class="codeph">*</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1368 d43459e1252 ">
                                    <p>零或更多</p>
                                    <p>明星量词</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1368 d43459e1255 ">
                                    <p>匹配前一个子表达式的零次或多次出现（贪婪的<a id="fnsrc_d43459e1380" name="fnsrc_d43459e1380" href="#fnsrc_d43459e1380" a="" greedy="" operator="" matches="" as="" many="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" nongreedy,="" follow="" it="" with="" nongreedy="" modifier="" (?)="" (see="" table="" 10-5)=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1368 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">ab*c</code></span>与字符串<code class="codeph">ac</code> ， <code class="codeph">abc</code>和<code class="codeph">abbc</code>匹配，但与<code class="codeph">abb</code>或<code class="codeph">bbc</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1407" headers="d43459e1249 ">
                                    <p><code class="codeph">？</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1407 d43459e1252 ">
                                    <p>零或一</p>
                                    <p>问号量词</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1407 d43459e1255 ">
                                    <p>匹配前一个子表达式的零次或一次出现（贪婪的<a id="fnsrc_d43459e1419" name="fnsrc_d43459e1419" href="#fnsrc_d43459e1419" a="" greedy="" operator="" matches="" as="" many="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" nongreedy,="" follow="" it="" with="" nongreedy="" modifier="" (?)="" (see="" table="" 10-5)=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1407 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">ab?c</code></span>匹配字符串<code class="codeph">abc</code>和<code class="codeph">ac</code> ，但不匹配<code class="codeph">abbc</code>或<code class="codeph">adc</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1442" headers="d43459e1249 ">
                                    <p><code class="codeph">{</code> <span class="italic"><code class="codeph">m</code></span> <code class="codeph">}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1442 d43459e1252 ">
                                    <p>间隔</p>
                                    <p>精确计数</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1442 d43459e1255 ">
                                    <p>恰好匹配前面的子表达式的<span class="italic"><code class="codeph">m</code></span>次出现。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1442 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">a{3}</code></span>与字符串<code class="codeph">aaa</code>匹配，但与<code class="codeph">aa</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1477" headers="d43459e1249 ">
                                    <p><code class="codeph">{</code> <span class="italic"><code class="codeph">m</code></span> <code class="codeph">,}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1477 d43459e1252 ">
                                    <p>间隔</p>
                                    <p>最少计数</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1477 d43459e1255 ">
                                    <p>匹配前面的子表达式至少<span class="italic"><code class="codeph">m</code></span>次出现（贪婪的<a id="fnsrc_d43459e1498" name="fnsrc_d43459e1498" href="#fnsrc_d43459e1498" a="" greedy="" operator="" matches="" as="" many="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" nongreedy,="" follow="" it="" with="" nongreedy="" modifier="" (?)="" (see="" table="" 10-5)=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1477 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">a{3,}</code></span>匹配字符串<code class="codeph">aaa</code>和<code class="codeph">aaaa</code> ，但与<code class="codeph">aa</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1518" headers="d43459e1249 ">
                                    <p><code class="codeph">{</code> <span class="italic"><code class="codeph">m</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1518 d43459e1252 ">
                                    <p>间隔</p>
                                    <p>在伯爵之间</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1518 d43459e1255 ">
                                    <p>匹配前面的子表达式的至少<span class="italic"><code class="codeph">m</code></span>但不多于<span class="italic"><code class="codeph">n</code></span>次出现（贪婪的<a id="fnsrc_d43459e1548" name="fnsrc_d43459e1548" href="#fnsrc_d43459e1548" a="" greedy="" operator="" matches="" as="" many="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" nongreedy,="" follow="" it="" with="" nongreedy="" modifier="" (?)="" (see="" table="" 10-5)=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1518 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">a{3,5}</code></span>与字符串<code class="codeph">aaa</code> ， <code class="codeph">aaaa</code>和<code class="codeph">aaaaa</code>匹配，但与<code class="codeph">aa</code>或<code class="codeph">aaaaaa</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1575" headers="d43459e1249 ">
                                    <p><code class="codeph">[</code> <span class="italic"><code class="codeph">char</code></span> <code class="codeph">...]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1575 d43459e1252 ">
                                    <p>匹配字符列表</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1575 d43459e1255 ">
                                    <p>匹配括号内列表中的任何单个字符。在列表中，除这些之外的所有运算符都被视为文字：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>范围运算符： <code class="codeph">-</code></p>
                                       </li>
                                       <li>
                                          <p>POSIX字符类： <code class="codeph">[: :]</code></p>
                                       </li>
                                       <li>
                                          <p>POSIX校对元素： <code class="codeph">[. .]</code></p>
                                       </li>
                                       <li>
                                          <p>POSIX字符等价类： <code class="codeph">[= =]</code></p>
                                       </li>
                                    </ul>
                                    <p>短划线（ <code class="codeph">-</code> ）是在列表中第一个或最后一个出现时的文字，或者是范围表达式中的结束范围点，如<code class="codeph">[#--]</code> 。如果右括号（ <code class="codeph">]</code> ）首先出现在列表中，则将其视为文字。
                                    </p>
                                    <p><span class="bold">注意：</span>在POSIX标准中，范围包括当前语言环境的语言定义中范围的开始和结束之间的所有排序规则元素。因此，范围是语言而不是字节值范围;范围表达式的语义独立于字符集。在Oracle数据库中，语言范围由<code class="codeph">NLS_SORT</code>初始化参数确定。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1575 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">[abc]</code></span>匹配字符串<code class="codeph">all</code> ， <code class="codeph">bill</code>和<code class="codeph">cold</code>中的第一个字符，但不匹配<code class="codeph">doll</code>中的任何字符。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1649" headers="d43459e1249 ">
                                    <p><code class="codeph">[^</code> <span class="italic"><code class="codeph">char</code></span> <code class="codeph">...]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1649 d43459e1252 ">
                                    <p>不匹配的字符列表</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1649 d43459e1255 ">
                                    <p>匹配括号内<span class="italic">不在</span>列表中的任何单个字符。
                                    </p>
                                    <p>有关字符列表中的运算符和范围的信息，请参阅匹配字符列表运算符的说明。</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1649 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">[^abc]def</code></span>匹配字符串<code class="codeph">xdef</code> ，但不<code class="codeph">adef</code> ， <code class="codeph">bdef</code>或<code class="codeph">cdef</code> 。
                                    </p>
                                    <p>表达式<span class="bold"><code class="codeph">[^ai]x</code></span>与字符串<code class="codeph">jx</code>匹配，但与<code class="codeph">ax</code> ， <code class="codeph">fx</code>或<code class="codeph">ix</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1707" headers="d43459e1249 ">
                                    <p><code class="codeph">[</code> <span class="italic"><code class="codeph">alt1</code></span> <code class="codeph">|</code> <span class="italic"><code class="codeph">alt2</code></span> <code class="codeph">]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1707 d43459e1252 ">
                                    <p>要么</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1707 d43459e1255 ">
                                    <p>匹配任一替代方案。</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1707 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">a|b</code></span>匹配字符<code class="codeph">a</code>或<code class="codeph">b</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1742" headers="d43459e1249 ">
                                    <p><code class="codeph">(</code> <span class="italic"><code class="codeph">expr</code></span> <code class="codeph">)</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1742 d43459e1252 ">
                                    <p>子表达式</p>
                                    <p>分组</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1742 d43459e1255 ">
                                    <p>将括号内的表达式视为一个单元。表达式可以是包含运算符的字符串或复杂表达式。</p>
                                    <p>您可以在后引用中引用子表达式。</p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1742 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">(abc)?def</code></span>匹配字符串<code class="codeph">abcdef</code>和<code class="codeph">def</code> ，但不匹配<code class="codeph">abcdefg</code>或<code class="codeph">xdef</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1782" headers="d43459e1249 ">
                                    <p><code class="codeph">\</code> <span class="italic"><code class="codeph">n</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1782 d43459e1252 ">
                                    <p>返回参考</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1782 d43459e1255 ">
                                    <p>匹配前面的第<span class="italic">n</span> <sup>个子</sup>表达式，其中<span class="italic"><code class="codeph">n</code></span>是1到9之间的整数。后引用从左到右计算子表达式，从每个前面子表达式的左括号开始。如果在<code class="codeph">\</code> <span class="italic"><code class="codeph">n</code></span>之前少于<span class="italic">n</span>个子表达式，则表达式无效。
                                    </p>
                                    <p>后引用允许您搜索重复的字符串，而不知道它是什么。</p>
                                    <p>对于<code class="codeph">REGEXP_REPLACE</code>函数，Oracle SQL支持正则表达式模式和替换字符串中的反向引用。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1782 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">(abc|def)xy\1</code></span>匹配字符串<code class="codeph">abcxyabc</code>和<code class="codeph">defxydef</code> ，但不匹配<code class="codeph">abcxydef</code>或<code class="codeph">abcxy</code> 。
                                    </p>
                                    <p>表达式<span class="bold"><code class="codeph">^(.*)\1$</code></span>匹配由同一字符串的两个相邻实例组成的行。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1846" headers="d43459e1249 ">
                                    <p><code class="codeph">\</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1846 d43459e1252 ">
                                    <p>逃避角色</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1846 d43459e1255 ">
                                    <p>将后续字符视为文字。</p>
                                    <p>反斜杠（\）允许您搜索否则将被视为元字符的字符。使用连续的反斜杠（ <code class="codeph">\\</code> ）来匹配反斜杠文字本身。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1846 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">abc\+def</code></span>与字符串<code class="codeph">abc+def</code>匹配，但与<code class="codeph">abcdef</code>或<code class="codeph">abccdef</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1878" headers="d43459e1249 ">
                                    <p><code class="codeph">^</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1878 d43459e1252 ">
                                    <p>起点锚点</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1878 d43459e1255 ">
                                    <p><span class="bold">默认模式：</span>匹配字符串的开头。
                                    </p>
                                    <p><span class="bold">多线模式：</span> <a id="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDHAGGI" name="GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDHAGGI" href="#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDHAGGI" specify="" multiline="" mode="" with="" the="" pattern-matching="" option="" m,="" described="" in="" table="" 10-2=")" ="" onclick="footdisplay(2, "><sup>脚2</sup></a>匹配源字符串的任何行的开头。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1878 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">^def</code></span>匹配字符串<code class="codeph">defghi</code>中的子字符串<code class="codeph">def</code> ，但不匹配字符串<code class="codeph">abcdef</code>中的子字符串<code class="codeph">def</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1922" headers="d43459e1249 ">
                                    <p><code class="codeph">$</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1922 d43459e1252 ">
                                    <p>终点锚点</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1922 d43459e1255 ">
                                    <p><span class="bold">默认模式：</span>匹配字符串的结尾。
                                    </p>
                                    <p><span class="bold">多线模式：</span> <a id="fnsrc_d43459e1937" name="fnsrc_d43459e1937" href="#fnsrc_d43459e1937" specify="" multiline="" mode="" with="" the="" pattern-matching="" option="" m,="" described="" in="" table="" 10-2=")" ="" onclick="footdisplay(2, "><sup>Footref 2</sup></a>匹配源字符串的任何行的结尾。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1922 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">def$</code></span>匹配字符串<code class="codeph">abcdef</code>中的子字符串<code class="codeph">def</code> ，但不匹配字符串<code class="codeph">defghi</code>中的子字符串<code class="codeph">def</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1957" headers="d43459e1249 ">
                                    <p><code class="codeph">[:</code> <span class="italic"><code class="codeph">class</code></span> <code class="codeph">:]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1957 d43459e1252 ">
                                    <p>POSIX字符类</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1957 d43459e1255 ">
                                    <p>匹配指定POSIX字符类中的任何字符（例如大写字符，数字或标点字符）。</p>
                                    <p><span class="bold">注意：</span>在英语正则表达式中，范围表达式通常表示字符类。例如， <code class="codeph">[az]</code>表示任何小写字符。此约定在多语言环境中无用，其中给定字符类的第一个和最后一个字符在所有语言中可能不同。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1957 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">[:upper:]+</code></span> ，指定一个或多个连续的大写字符，匹配字符串<code class="codeph">abcDEFghi</code>中的子字符串<code class="codeph">DEF</code> ，但不匹配<code class="codeph">abcdefghi</code>中的任何子字符串。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e1996" headers="d43459e1249 ">
                                    <p><code class="codeph">[.</code> <span class="italic"><code class="codeph">element</code></span> <code class="codeph">.]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e1996 d43459e1252 ">
                                    <p>POSIX整理元素运算符</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e1996 d43459e1255 ">
                                    <p>指定在当前区域设置中定义的整理元素。<code class="codeph">NLS_SORT</code>初始化参数确定支持的排序规则元素。
                                    </p>
                                    <p>此语法允许您使用多字符整理元素，否则只允许使用单字符整理元素。例如，您可以确保在传统西班牙语等语言环境中定义时，整理元素<code class="codeph">ch</code>在依赖于字符排序的操作中被视为一个字符。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e1996 d43459e1258 ">
                                    <p>表达<span class="bold"><code class="codeph">[.ch.]</code></span> ，它指定了排序元素<code class="codeph">ch</code> ，匹配<code class="codeph">ch</code>在串<code class="codeph">chabc</code> ，但不匹配在任何串<code class="codeph">cdefg</code> 。
                                    </p>
                                    <p>表达式<span class="bold"><code class="codeph">[a-[.ch.]]</code></span>指定从<code class="codeph">a</code>到<code class="codeph">ch</code>的范围。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d43459e2051" headers="d43459e1249 ">
                                    <p><code class="codeph">[=</code> <span class="italic"><code class="codeph">char</code></span> <code class="codeph">=]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d43459e2051 d43459e1252 ">
                                    <p>POSIX字符等价类</p>
                                 </td>
                                 <td align="left" valign="top" width="41%" headers="d43459e2051 d43459e1255 ">
                                    <p>匹配当前语言环境中属于与指定字符相同的POSIX字符等价类的所有字符。</p>
                                    <p>此语法必须出现在字符列表中;也就是说，它必须嵌套在字符列表的括号内。</p>
                                    <p>字符等效项取决于如何为数据库区域设置定义规范规则。有关详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NLSPG305" target="_blank"><span class="italic">Oracle数据库全球化支持指南</span></a> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="28%" headers="d43459e2051 d43459e1258 ">
                                    <p>表达式<span class="bold"><code class="codeph">[[=n=]]</code></span>指定了西班牙语语言环境中等于<code class="codeph">n</code>字符，它匹配字符串<code class="codeph">El Niño</code>中的<code class="codeph">N</code>和<code class="codeph">ñ</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p><span class="bold">贪婪的</span>运算符匹配尽可能多的事件，同时允许匹配的其余部分成功。要使运算符不正确，请使用nongreedy修饰符（ <code class="codeph">?</code> ）进行操作（ <a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ" title="描述Oracle正则表达式中受Perl影响的扩展。">见表10-5</a> ）。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>使用模式匹配选项<code class="codeph">m</code>指定多行模式，如<a href="regexp.html#GUID-F14733F3-B943-4BAD-8489-F9704986386B__CHDHFCFC" title="此表总结了受Perl影响的匹配运算符。">表10-2中所述</a> 。
                        </p>
                     <p></p>
                  </div>
               </div><a id="ADFNS234"></a><a id="ADFNS233"></a><div class="props_rev_3"><a id="GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A" name="GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A"></a><h4 id="ADFNS-GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A" class="sect4">POSIX标准的Oracle SQL多语言扩展</h4>
                  <div>
                     <p>应用于多语言数据时，Oracle SQL POSIX运算符超出了POSIX标准中指定的匹配功能。</p>
                     <p><a href="regexp.html#GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A__g692318" title="该表在前面的文本中描述。">表10-4</a>显示了每个POSIX运算符，哪些POSIX标准定义了它的语法，以及Oracle SQL是否扩展了其处理多语言数据的语义。POSIX标准是基本正则表达式（BRE）和扩展正则表达式（ERE）。
                     </p>
                     <div class="tblformal" id="GUID-861B1B84-B6E0-4F6B-91D9-67982346F20A__g692318">
                        <p class="titleintable">表10-4 POSIX运算符和多语言运算符关系</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="POSIX运算符和多语言运算符关系" width="100%" border="1" summary="This table is described in the preceding text." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d43459e2218">操作者</th>
                                 <th align="left" valign="bottom" width="25%" id="d43459e2221">POSIX BRE语法</th>
                                 <th align="left" valign="bottom" width="25%" id="d43459e2224">POSIX ERE语法</th>
                                 <th align="left" valign="bottom" width="38%" id="d43459e2227">多语言增强</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2232" headers="d43459e2218 ">
                                    <p><code class="codeph">\</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2232 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2232 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2232 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2246" headers="d43459e2218 ">
                                    <p><code class="codeph">*</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2246 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2246 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2246 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2260" headers="d43459e2218 ">
                                    <p><code class="codeph">+</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2260 d43459e2221 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2260 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2260 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2274" headers="d43459e2218 ">
                                    <p><code class="codeph">？</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2274 d43459e2221 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2274 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2274 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2288" headers="d43459e2218 ">
                                    <p><code class="codeph">|</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2288 d43459e2221 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2288 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2288 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2302" headers="d43459e2218 ">
                                    <p><code class="codeph">^</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2302 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2302 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2302 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2316" headers="d43459e2218 ">
                                    <p><code class="codeph">$</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2316 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2316 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2316 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2330" headers="d43459e2218 ">
                                    <p><code class="codeph">。</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2330 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2330 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2330 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2344" headers="d43459e2218 ">
                                    <p><code class="codeph">[]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2344 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2344 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2344 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2358" headers="d43459e2218 ">
                                    <p><code class="codeph">（）</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2358 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2358 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2358 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2372" headers="d43459e2218 ">
                                    <p><code class="codeph">{M}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2372 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2372 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2372 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2387" headers="d43459e2218 ">
                                    <p><code class="codeph">{M，}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2387 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2387 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2387 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2401" headers="d43459e2218 ">
                                    <p><code class="codeph">{M，N}</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2401 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2401 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2401 d43459e2227 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2415" headers="d43459e2218 ">
                                    <p><code class="codeph">\ n</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2415 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2415 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2415 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2429" headers="d43459e2218 ">
                                    <p><code class="codeph">[..]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2429 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2429 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2429 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2443" headers="d43459e2218 ">
                                    <p><code class="codeph">[：]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2443 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2443 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2443 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d43459e2457" headers="d43459e2218 ">
                                    <p><code class="codeph">[==]</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2457 d43459e2221 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d43459e2457 d43459e2224 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d43459e2457 d43459e2227 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>多语言数据可能具有多字节字符。Oracle数据库允许您直接输入多字节字符（如果您有直接输入方法）或使用函数来组合它们。您不能使用格式<code class="codeph">\</code> <span class="italic"><code class="codeph">xxxx</code></span>的Unicode十六进制编码值。Oracle数据库根据用于编码字符的字节值来评估字符，而不是字符的图形表示。
                     </p>
                  </div>
               </div><a id="ADFNS236"></a><a id="ADFNS235"></a><div class="props_rev_3"><a id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C" name="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C"></a><h4 id="ADFNS-GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C" class="sect4">Oracle SQL PERL影响的POSIX标准扩展</h4>
                  <div>
                     <p>Oracle SQL支持一些常用的PERL正则表达式运算符，这些运算符不包含在POSIX标准中但不与之冲突。</p>
                     <p><a href="regexp.html#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ" title="描述Oracle正则表达式中受Perl影响的扩展。">表10-5</a>总结了Oracle SQL支持的受PERL影响的运算符。
                     </p>
                     <div class="infoboxnote" id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__GUID-03B70FAE-C0BD-4D29-8936-A9ADC28A9699">
                        <p class="notep1">警告：</p>
                        <p>PERL字符类匹配基于操作系统的语言环境模型，而Oracle SQL正则表达式基于数据库的特定于语言的数据。通常，您不能指望涉及区域设置数据的正则表达式在PERL和Oracle SQL中生成相同的结果。</p>
                     </div>
                     <div class="tblformalwide" id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDDGICJ">
                        <p class="titleintable">表10-5 Oracle SQL正则表达式中的PERL影响的运算符</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle SQL正则表达式中的PERL影响运算符" width="100%" border="1" summary="Describes the Perl-influenced extensions in Oracle regular expressions." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="11%" id="d43459e2611">运算符语法</th>
                                 <th align="left" valign="bottom" width="40%" id="d43459e2614">描述</th>
                                 <th align="left" valign="bottom" width="49%" id="d43459e2617">例子</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2622" headers="d43459e2611 ">
                                    <p><code class="codeph">\ d</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2622 d43459e2614 ">
                                    <p>匹配数字字符。</p>
                                    <p>相当于POSIX表达式<code class="codeph">[[:digit:]]</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2622 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">^\(\d{3}\) \d{3}-\d{4}$</code></span>匹配<code class="codeph">(650) 555-0100</code>但不匹配<code class="codeph">650-555-0100</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2648" headers="d43459e2611 ">
                                    <p><code class="codeph">\ d</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2648 d43459e2614 ">
                                    <p>匹配非数字字符。</p>
                                    <p>相当于POSIX表达式<code class="codeph">[^[:digit:]]</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2648 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\w\d\D</code></span>匹配<code class="codeph">b2b</code>和<code class="codeph">b2_</code>但与<code class="codeph">b22</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2677" headers="d43459e2611 ">
                                    <p><code class="codeph">\ W</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2677 d43459e2614 ">
                                    <p>匹配单词字符（即字母数字或下划线（ <code class="codeph">_</code> ）字符）。
                                    </p>
                                    <p>相当于POSIX表达式<code class="codeph">[[:alnum:]_]</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2677 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\w+@\w+(\.\w+)+</code></span>与字符串<code class="codeph">jdoe@company.co.uk</code>匹配，但与<code class="codeph">jdoe@company</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2706" headers="d43459e2611 ">
                                    <p><code class="codeph">\ W</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2706 d43459e2614 ">
                                    <p>匹配一个非单词字符。</p>
                                    <p>相当于POSIX表达式<code class="codeph">[^[:alnum:]_]</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2706 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\w+\W\s\w+</code></span>将字符串匹配<code class="codeph">to: bill</code>但与<code class="codeph">to bill</code>不匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2732" headers="d43459e2611 ">
                                    <p><code class="codeph">\ S</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2732 d43459e2614 ">
                                    <p>匹配空白字符。</p>
                                    <p>相当于POSIX表达式<code class="codeph">[[:space:]]</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2732 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\(\w\s\w\s\)</code></span>与字符串<code class="codeph">(ab )</code>匹配，但不匹配<code class="codeph">(ab)</code>或<code class="codeph">(a,b.)</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2761" headers="d43459e2611 ">
                                    <p><code class="codeph">\ S</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2761 d43459e2614 ">
                                    <p>匹配非空白字符。</p>
                                    <p>相当于POSIX表达式<code class="codeph">[^[:space:]]</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2761 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\(\w\S\w\S\)</code></span>匹配字符串<code class="codeph">(abde)</code>和<code class="codeph">(a,b.)</code>但不匹配<code class="codeph">(abde)</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2790" headers="d43459e2611 ">
                                    <p><code class="codeph">\一个</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2790 d43459e2614 ">
                                    <p>匹配字符串的开头，以单行或多行模式。</p>
                                    <p>不等于POSIX运算符<code class="codeph">^</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2790 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\AL</code></span>仅匹配字符串<code class="codeph">Line1\nLine2\n</code>的第一个<code class="codeph">L</code> （其中<code class="codeph">\n</code>是换行符），无论是单行还是多行模式。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2819" headers="d43459e2611 ">
                                    <p><code class="codeph">\ž</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2819 d43459e2614 ">
                                    <p>匹配字符串的结尾，以单行或多行模式。</p>
                                    <p>不等于POSIX运算符<code class="codeph">$</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2819 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\s\Z</code></span>在单行或多行模式下匹配字符串<code class="codeph">L ine \n</code>中的最后一个空格（其中<code class="codeph">\n</code>是换行符）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2845" headers="d43459e2611 ">
                                    <p><code class="codeph">\ž</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2845 d43459e2614 ">
                                    <p>匹配字符串的结尾，以单行或多行模式。</p>
                                    <p>不等于POSIX运算符<code class="codeph">$</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2845 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\s\z</code></span>在单行或多行模式下匹配字符串<code class="codeph">L ine \n</code>中的换行符（ <code class="codeph">\n</code> ）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2871" headers="d43459e2611 ">
                                    <p><code class="codeph">+？</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2871 d43459e2614 ">
                                    <p>匹配前一个子表达式的一个或多个匹配项（nongreedy <a id="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDIBFIH" name="GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDIBFIH" href="#GUID-086CC1C0-E804-4E8D-9F0F-1925F325EC0C__CHDIBFIH" a="" nongreedy="" operator="" matches="" as="" few="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" greedy,="" omit="" modifier="" (?)=")" ="" onclick="footdisplay(3, "><sup>Foot 3</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2871 d43459e2617 ">
                                    <p>表达<span class="bold"><code class="codeph">\w+?x\w</code></span>匹配字符串<code class="codeph">abxcxd</code>中的<span class="bold"><code class="codeph">ab</code></span> <code class="codeph">xc</code> （并且贪婪表达式<span class="bold"><code class="codeph">\w+x\w</code></span>匹配<span class="bold"><code class="codeph">abxc</code></span> <code class="codeph">xd</code> ）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2916" headers="d43459e2611 ">
                                    <p><code class="codeph">*？</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2916 d43459e2614 ">
                                    <p>匹配前一个子表达式的零次或多次出现（nongreedy <a id="fnsrc_d43459e2923" name="fnsrc_d43459e2923" href="#fnsrc_d43459e2923" a="" nongreedy="" operator="" matches="" as="" few="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" greedy,="" omit="" modifier="" (?)=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> ）。尽可能匹配空字符串。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2916 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">\w*?x\w</code></span>匹配字符串<code class="codeph">xaxbxc</code>中的<code class="codeph">xa</code> （并且贪婪表达式<span class="bold"><code class="codeph">\w*x\w</code></span>匹配<span class="bold"><code class="codeph">xaxb</code></span> <code class="codeph">xc</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2951" headers="d43459e2611 ">
                                    <p><code class="codeph">??</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2951 d43459e2614 ">
                                    <p>匹配前一个子表达式的零次或一次出现（nongreedy <a id="fnsrc_d43459e2958" name="fnsrc_d43459e2958" href="#fnsrc_d43459e2958" a="" nongreedy="" operator="" matches="" as="" few="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" greedy,="" omit="" modifier="" (?)=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> ）。尽可能匹配空字符串。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2951 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">a??aa</code></span>在字符串<code class="codeph">aaaa</code>匹配<code class="codeph">aa</code> （和贪婪的表达式<span class="bold"><code class="codeph">a?aa</code></span>匹配<span class="bold"><code class="codeph">a</code></span> <code class="codeph">aa</code> ）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e2985" headers="d43459e2611 ">
                                    <p><code class="codeph">{</code> <span class="italic"><code class="codeph">m</code></span> <code class="codeph">}?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e2985 d43459e2614 ">
                                    <p>恰好匹配前面的子表达式的<code class="codeph">m</code>次出现（nongreedy <a id="fnsrc_d43459e3000" name="fnsrc_d43459e3000" href="#fnsrc_d43459e3000" a="" nongreedy="" operator="" matches="" as="" few="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" greedy,="" omit="" modifier="" (?)=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e2985 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">(a|aa){2}?</code></span> 匹配字符串<code class="codeph">aaaa</code>中的<code class="codeph">aa</code> （贪婪表达式<span class="bold"><code class="codeph">(a|aa){2}</code></span>与<code class="codeph">aaaa</code>匹配。
                                    </p>
                                    <p>表达式<span class="bold"><code class="codeph">b{2}?</code></span> 并且贪婪的表达式<span class="bold"><code class="codeph">b{2}</code></span>匹配字符串<code class="codeph">bbbb</code>中的<code class="codeph">bb</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e3040" headers="d43459e2611 ">
                                    <p><code class="codeph">{</code> <span class="italic"><code class="codeph">m</code></span> <code class="codeph">,}?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e3040 d43459e2614 ">
                                    <p>匹配至少<code class="codeph">m</code>次出现的前一个子表达式（nongreedy <a id="fnsrc_d43459e3055" name="fnsrc_d43459e3055" href="#fnsrc_d43459e3055" a="" nongreedy="" operator="" matches="" as="" few="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" greedy,="" omit="" modifier="" (?)=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> ）。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e3040 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">a{2,}?</code></span> 匹配字符串<code class="codeph">aaaaa</code>中的<code class="codeph">aa</code> （和贪婪的表达式<span class="bold"><code class="codeph">a{2,}</code></span>匹配<code class="codeph">aaaaa</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d43459e3079" headers="d43459e2611 ">
                                    <p><code class="codeph">{</code> <span class="italic"><code class="codeph">m</code></span> <code class="codeph">,</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">}?</code></p>
                                 </td>
                                 <td align="left" valign="top" width="40%" headers="d43459e3079 d43459e2614 ">
                                    <p>匹配前面的子表达式的至少<code class="codeph">m</code>但不超过<code class="codeph">n</code>次出现（nongreedy <a id="fnsrc_d43459e3102" name="fnsrc_d43459e3102" href="#fnsrc_d43459e3102" a="" nongreedy="" operator="" matches="" as="" few="" occurrences="" possible="" while="" allowing="" the="" rest="" of="" match="" to="" succeed.="" make="" greedy,="" omit="" modifier="" (?)=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> ）。 <code class="codeph">{0,n}?</code> 尽可能匹配空字符串。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d43459e3079 d43459e2617 ">
                                    <p>表达式<span class="bold"><code class="codeph">a{2,4}?</code></span> 匹配字符串<code class="codeph">aaaaa</code>中的<code class="codeph">aa</code> （和贪婪的表达式<span class="bold"><code class="codeph">a{2,4}</code></span>匹配<code class="codeph">aaaa</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注3</sup></p><p>非<span class="bold">同意</span>运算符匹配尽可能少的事件，同时允许匹配的其余部分成功。要使操作员贪心，请省略nongreedy修饰符（ <code class="codeph">?</code> ）。
                        </p>
                     <p></p>
                  </div>
               </div>
            </div><a id="ADFNS00402"></a><div class="props_rev_3"><a id="GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC" name="GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC"></a><h3 id="ADFNS-GUID-55F212E8-52EC-4D6E-81A4-59677163B5CC" class="sect3">在SQL语句中使用正则表达式：方案</h3>
               <div>
                  <div class="section">
                     <p>场景：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="regexp.html#GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30">使用约束来实施电话号码格式</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825" title="创建表时，可以使用正则表达式强制执行格式。">示例：使用正则表达式实施电话号码格式</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5" title="INSERT INTO SQL语句可用于测试正确和错误格式的工作方式。">示例：以正确和不正确的格式插入电话号码</a></p>
                        </li>
                        <li>
                           <p><a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2">使用反向引用来重新定位字符</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS240"></a><a id="ADFNS239"></a><a id="ADFNS241"></a><a id="ADFNS238"></a><div class="props_rev_3"><a id="GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30" name="GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30"></a><h4 id="ADFNS-GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30" class="sect4">使用约束来实施电话号码格式</h4>
                  <div>
                     <div class="section">
                        <p>正则表达式对于强制执行约束非常有用 - 例如，确保以标准格式将电话号码输入数据库。</p>
                        <p><a href="regexp.html#GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30__CHDEIEIC" title="此表说明了前面示例中使用的语法元素。">表10-6</a>说明了<a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825" title="When you create a table, you can enforce formats with regular expressions.">示例中正</a>则表达式的元素：使用正则表达式<a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825" title="创建表时，可以使用正则表达式强制执行格式。">实现电话号码格式</a> 。
                        </p>
                        <div class="tblformal" id="GUID-FAF994F4-87A5-4BCE-ADDF-0AD6F3CFBC30__CHDEIEIC">
                           <p class="titleintable">表10-6正则表达式元素的说明</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="正则表达式元素的说明" width="100%" border="1" summary="This table explains the syntax elements used in the preceding example." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d43459e3387">正则表达式元素</th>
                                    <th align="left" valign="bottom" width="75%" id="d43459e3390">火柴 。 。 。</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3395" headers="d43459e3387 ">
                                       <p><code class="codeph">^</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3395 d43459e3390 ">
                                       <p>字符串的开头。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3403" headers="d43459e3387 ">
                                       <p><code class="codeph">\（</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3403 d43459e3390 ">
                                       <p>左括号。反斜杠（ <code class="codeph">\</code> ）是一个转义字符，表示它后面的左括号是文字而不是子表达式分隔符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3414" headers="d43459e3387 ">
                                       <p><code class="codeph">\ d {3}</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3414 d43459e3390 ">
                                       <p>正好是三位数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3422" headers="d43459e3387 ">
                                       <p><code class="codeph">\）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3422 d43459e3390 ">
                                       <p>右括号。反斜杠（ <code class="codeph">\</code> ）是一个转义字符，表示它后面的右括号是文字而不是子表达式分隔符。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3433" headers="d43459e3387 ">
                                       <p>空间特征</p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3433 d43459e3390 ">
                                       <p>空间角色。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3440" headers="d43459e3387 ">
                                       <p><code class="codeph">\ d {3}</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3440 d43459e3390 ">
                                       <p>正好是三位数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3448" headers="d43459e3387 ">
                                       <p><code class="codeph">-</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3448 d43459e3390 ">
                                       <p>连字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3456" headers="d43459e3387 ">
                                       <p><code class="codeph">\ d {4}</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3456 d43459e3390 ">
                                       <p>正好是四位数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3464" headers="d43459e3387 ">
                                       <p><code class="codeph">$</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3464 d43459e3390 ">
                                       <p>字符串的结尾。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F4872995-7A87-4254-B292-9FC55026C825" name="GUID-F4872995-7A87-4254-B292-9FC55026C825"></a><h4 id="ADFNS-GUID-F4872995-7A87-4254-B292-9FC55026C825" class="sect4">示例：使用正则表达式实施电话号码格式</h4>
                  <div>
                     <p>创建表时，可以使用正则表达式强制执行格式。</p>
                     <p><a href="regexp.html#GUID-F4872995-7A87-4254-B292-9FC55026C825__CHDHIHII">示例10-1</a>创建一个<code class="codeph">contacts</code>表，并将一个<code class="codeph">CHECK</code>约束添加到<code class="codeph">p_number</code>列以强制执行此格式模型：</p><pre class="oac_no_warn" dir="ltr">（XXX）XXX-XXXX</pre><div class="example" id="GUID-F4872995-7A87-4254-B292-9FC55026C825__CHDHIHII">
                        <p class="titleinexample">示例10-1使用正则表达式实施电话号码格式</p><pre class="oac_no_warn" dir="ltr">DROP TABLE联系人; CREATE TABLE联系人（l_name VARCHAR2（30），p_number VARCHAR2（30） <span class="bold">CONSTRAINT c_contacts_pnf</span> <span class="bold">CHECK（REGEXP_LIKE（p_number，'^ \（\ d {3} \）\ d {3}  -  \ d {4} $'））</span> ） ;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5" name="GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5"></a><h4 id="ADFNS-GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5" class="sect4">示例：以正确和不正确的格式插入电话号码</h4>
                  <div>
                     <p><code class="codeph">INSERT INTO</code> SQL语句可用于测试正确和错误格式的工作方式。
                     </p>
                     <p><a href="regexp.html#GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5__CHDBDIFJ">例10-2</a>显示了一些正确错误地将电话号码插入<code class="codeph">contacts</code>表的语句。
                     </p>
                     <div class="example" id="GUID-CBA16226-768C-4F3F-BFEE-15453C9188C5__CHDBDIFJ">
                        <p class="titleinexample">示例10-2以正确和不正确的格式插入电话号码</p>
                        <p>这些是正确的：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO contacts（p_number）VALUES（'（650）555-0100'）; INSERT INTO contacts（p_number）VALUES（'（215）555-0100'）;</pre><p>这些生成<code class="codeph">CHECK</code>约束错误：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO contacts（p_number）VALUES（'650 555-0100'）; INSERT INTO contacts（p_number）VALUES（'650 555 0100'）; INSERT INTO contacts（p_number）VALUES（'650-555-0100'）; INSERT INTO contacts（p_number）VALUES（'（650）555-0100'）; INSERT INTO contacts（p_number）VALUES（'（650）555-0100'）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS244"></a><a id="ADFNS243"></a><a id="ADFNS242"></a><div class="props_rev_3"><a id="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2" name="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2"></a><h4 id="ADFNS-GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2" class="sect4">使用反向引用来重新定位字符</h4>
                  <div>
                     <div class="section">
                        <p>后引用（在<a href="regexp.html#GUID-E926D98A-8999-4DC6-8140-B7F988C8F93B__CHDIEGEI" title="此表汇总了Oracle Database正则表达式中支持的POSIX元字符。">表10-3中</a>描述）将引用的子表达式存储在临时缓冲区中。因此，您可以使用反向引用来重新定位字符，如<a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">例10-3所示</a> 。有关<a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">示例10-3中正</a>则表达式元素的说明，请<a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDBIJBI" title="此表描述了前面示例中使用的正则表达式语法元素。">参见表10-7</a> 。
                        </p>
                        <p><a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDBIJBI" title="此表描述了前面示例中使用的正则表达式语法元素。">表10-7</a>说明了<span><a href="regexp.html#GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">例10-3中正</a></span>则表达式的元素。
                        </p>
                        <div class="tblformal" id="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDBIJBI">
                           <p class="titleintable">表10-7正则表达式元素的说明</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="正则表达式元素的说明" width="100%" border="1" summary="This table describes the regular expression syntax elements used in the preceding example." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d43459e3845">正则表达式元素</th>
                                    <th align="left" valign="bottom" width="75%" id="d43459e3848">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3853" headers="d43459e3845 ">
                                       <p><code class="codeph">^</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3853 d43459e3848 ">
                                       <p>匹配字符串的开头。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3861" headers="d43459e3845 ">
                                       <p><code class="codeph">$</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3861 d43459e3848 ">
                                       <p>匹配字符串的结尾。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3869" headers="d43459e3845 ">
                                       <p><code class="codeph">（\ S +）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3869 d43459e3848 ">
                                       <p>匹配一个或多个非空格字符。括号不会被转义，因此它们可用作分组表达式。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3877" headers="d43459e3845 ">
                                       <p><code class="codeph">\ S</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3877 d43459e3848 ">
                                       <p>匹配空白字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3885" headers="d43459e3845 ">
                                       <p><code class="codeph">\ 1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3885 d43459e3848 ">
                                       <p>替换第一个子表达式，即匹配模式中的第一组括号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3893" headers="d43459e3845 ">
                                       <p><code class="codeph">\ 2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3893 d43459e3848 ">
                                       <p>替换第二个子表达式，即匹配模式中的第二组括号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3901" headers="d43459e3845 ">
                                       <p><code class="codeph">\ 3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3901 d43459e3848 ">
                                       <p>替换第三个子表达式，即匹配模式中的第三组括号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d43459e3909" headers="d43459e3845 ">
                                       <p><code class="codeph">，</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d43459e3909 d43459e3848 ">
                                       <p>插入逗号字符。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2621DA75-FBBA-46C3-9FA4-22E896C6F0D2__CHDICBBC">
                        <p class="titleinexample">示例10-3使用后引用重新定位字符</p>
                        <p>创建表并使用不同格式的名称填充它：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE famous_people; CREATE TABLE famous_people（names VARCHAR2（20））; INSERT INTO famous_people（姓名）VALUES（'John Quincy Adams'）; INSERT INTO famous_people（名字）VALUES（'Harry S. Truman'）; INSERT INTO famous_people（名字）VALUES（'John Adams'）; INSERT INTO famous_people（姓名）VALUES（'John Quincy Adams'）; INSERT INTO famous_people（名字）VALUES（'John_Quincy_Adams'）;</pre><p>SQL * Plus格式化命令：</p><pre class="oac_no_warn" dir="ltr">COLUMN“regexp后的名字”格式A20</pre><p>对于格式为“first middle last”的表中的每个名称，使用back引用重新定位字符，使格式变为“last，first middle”：</p><pre class="oac_no_warn" dir="ltr">SELECT名称“名称”， <span class="bold">REGEXP_REPLACE（名称，'^（\ S +）\ s（\ S +）\ s（\ S +）$'，'\ 3，\ 1 \ 2'）</span> <span class="bold">AS“regexp后的名称”</span> FROM famous_people ORDER按“名字”;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">在regexp之后命名名称-------------------- -------------------- John Quincy Adams John Quincy Adams Harry S. Truman Truman，Harry S. John Adams John Adams John Quincy Adams Adams，John Quincy John_Quincy_Adams John_Quincy_Adams选择了5行。
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
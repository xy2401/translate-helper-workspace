<html id="05974.acfs-commands-windows.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This topic provides a summary of the Oracle ACFS file system commands for Windows."></meta>
      <meta name="description" content="This topic provides a summary of the Oracle ACFS file system commands for Windows."></meta>
      <title>适用于Windows环境的Oracle ACFS命令行工具</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="This topic provides a summary of the Oracle ACFS file system commands for Windows."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="acfs-commands-aix.html" title="Previous" type="text/html"></link>
      <link rel="next" href="acfs-commands-tagging.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="acfs-commands-aix.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="acfs-commands-tagging.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-acfs-advm.html" property="item" typeof="WebPage"><span property="name">Oracle自动存储管理群集文件系统</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manage-acfs-advm-commands.html" property="item" typeof="WebPage"><span property="name">使用命令行工具管理Oracle ACFS</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">适用于Windows环境的Oracle ACFS命令行工具</li>
            </ol>
            <a id="GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0" name="GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0"></a><a id="OSTMG94875"></a><a id="OSTMG94876"></a><a id="OSTMG93000"></a>
            
            <h2 id="OSTMG-GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0" class="sect2">适用于Windows环境的Oracle ACFS命令行工具</h2>
         </header>
         <div class="ind">
            <div>
               <p>本主题提供Windows的Oracle ACFS文件系统命令的摘要。</p>
               <p><a href="acfs-commands-windows.html#GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0__BABJBCFB" title="ACFS Windows命令摘要">表16-17</a>列出了Oracle ACFS Windows文件系统命令及其简要说明。这些命令已扩展为支持Oracle ACFS。所有其他Windows文件系统命令在不更改Oracle ACFS的情况下运行。</p>
               <div class="tblformalwide" id="GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0__BABJBCFB">
                  <p class="titleintable">表16-17 Windows的Oracle ACFS文件系统命令摘要</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="Windows的Oracle ACFS文件系统命令摘要" width="100%" border="1" summary="ACFS Windows Command Summary" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="37%" id="d143986e161">命令</th>
                           <th align="left" valign="bottom" width="63%" id="d143986e164">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e169" headers="d143986e161 ">
                              <p><a href="acfs-commands-windows.html#GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC">acfschkdsk</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e169 d143986e164 ">
                              <p>在Windows上检查并修复Oracle ACFS文件系统。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e177" headers="d143986e161 ">
                              <p><a href="acfs-commands-windows.html#GUID-503B091A-2650-431C-8D4F-3B9C08609D04">acfsdismount</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e177 d143986e164 ">
                              <p>在Windows上卸载Oracle ACFS。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e185" headers="d143986e161 ">
                              <p><a href="acfs-commands-windows.html#GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB">acfsformat</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e185 d143986e164 ">
                              <p>在Windows上创建Oracle ACFS文件系统。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e193" headers="d143986e161 ">
                              <p><a href="acfs-commands-windows.html#GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D">acfsmountvol</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e193 d143986e164 ">
                              <p>在Windows上安装Oracle ACFS文件系统。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e201" headers="d143986e161 ">
                              <p><a href="acfs-commands-windows.html#GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F">acfsutil分离</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e201 d143986e164 ">
                              <p>准备Oracle ACFS驱动程序以在Windows上卸载模块。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <p><a href="acfs-commands-windows.html#GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0__BABGECIC" title="非Oracle ACFS Windows命令摘要">表16-18</a>列出了非Oracle ACFS Windows文件系统命令及其简要说明。
               </p>
               <div class="tblformalwide" id="GUID-0AAA3F88-2466-459A-8723-3EEDEA571DF0__BABGECIC">
                  <p class="titleintable">表16-18 Windows的非Oracle ACFS文件系统命令摘要</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="Windows的非Oracle ACFS文件系统命令摘要" width="100%" border="1" summary="Summary of Non-Oracle ACFS Windows commands" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="37%" id="d143986e224">命令</th>
                           <th align="left" valign="bottom" width="63%" id="d143986e227">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e232" headers="d143986e224 ">
                              <p><a href="acfs-commands-windows.html#GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC">advmutil下马</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e232 d143986e227 ">
                              <p>卸载适用于Windows上非Oracle ACFS的文件系统的Oracle ADVM卷设备。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e240" headers="d143986e224 ">
                              <p><a href="acfs-commands-windows.html#GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351">advmutil list</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e240 d143986e227 ">
                              <p>列出适用于Windows上非Oracle ACFS的文件系统的Oracle ADVM卷设备。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d143986e248" headers="d143986e224 ">
                              <p><a href="acfs-commands-windows.html#GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D">advmutil坐骑</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d143986e248 d143986e227 ">
                              <p>为Windows上不是Oracle ACFS的文件系统安装Oracle ADVM卷设备。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="OSTMG94878"></a><a id="OSTMG94879"></a><a id="OSTMG94880"></a><a id="OSTMG94881"></a><a id="OSTMG94882"></a><a id="OSTMG94877"></a><div class="props_rev_3"><a id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC" name="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC"></a><h3 id="OSTMG-GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC" class="sect3">acfschkdsk</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__GUID-304EA978-A8CC-44A5-AE92-19AF0D8EB622">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>检查并修复Oracle ACFS文件系统。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__GUID-60281581-492A-40C0-95F2-1E08F98CE988">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">acfschkdsk / h acfschkdsk [/ a | / f] [/ v] [/ n | / y] <span class="italic">volume_device</span></pre><p><a href="acfs-commands-windows.html#GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__BABBEHDB" title="此表列出了ofschkdsk命令的选项，以及每个选项的说明">表16-19</a>包含<code class="codeph">acfschkdsk</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__BABBEHDB">
                     <p class="titleintable">表16-19 acfschkdsk命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="acfschkdsk命令的选项" width="100%" border="1" summary="This table lists the options for the ofschkdsk command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e434">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e437">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e442" headers="d143986e434 ">
                                 <p><code class="codeph">/一个</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e442 d143986e437 ">
                                 <p>指定自动修复文件系统。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e450" headers="d143986e434 ">
                                 <p><code class="codeph">/F</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e450 d143986e437 ">
                                 <p>强制文件系统进入可装入状态而不完成文件系统检查或修复。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e458" headers="d143986e434 ">
                                 <p><code class="codeph">/ v</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e458 d143986e437 ">
                                 <p>指定详细模式。操作发生时显示进度。以详细模式运行会影响性能。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e466" headers="d143986e434 ">
                                 <p><code class="codeph">/H</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e466 d143986e437 ">
                                 <p>显示使用帮助文本并退出。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e474" headers="d143986e434 ">
                                 <p><code class="codeph">/ N</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e474 d143986e437 ">
                                 <p>对任何提示回答否。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e482" headers="d143986e434 ">
                                 <p><code class="codeph">/ Y</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e482 d143986e437 ">
                                 <p>对任何提示回答是。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e490" headers="d143986e434 ">
                                 <p><span class="italic"><code class="codeph">volume_device</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e490 d143986e437 ">
                                 <p>指定Oracle ADVM卷设备。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">acfschkdsk</code>检查并修复现有的Oracle ACFS。此命令只能在已在群集范围内卸载的文件系统上运行。
                     </p>
                     <p>必须加载Oracle ACFS驱动程序才能使<code class="codeph">acfschkdsk</code>正常工作。如果未加载驱动程序，系统将提示管理员确保这是故意的。有关加载驱动程序的信息，请参阅<span class="q">“ <a href="acfs-advanced-topics.html#GUID-86621B17-67AC-4126-AC78-648F1320DDFF">Oracle ACFS驱动程序资源管理</a> ”</span> 。
                     </p>
                     <p>Oracle ACFS驱动程序通常确保<code class="codeph">acfschkdsk</code>是<code class="codeph">acfschkdsk</code>范围内文件系统的唯一用户。在极端情况下，如果文件系统automount导致系统失败，则可能需要在不加载驱动程序的情况下修复文件系统。在这种情况下，绕过通常由驱动程序进行独占访问的验证。
                     </p>
                     <p>默认情况下， <code class="codeph">acfschkdsk</code>仅检查并报告错误。必须指定<code class="codeph">/a</code>标志以指示<code class="codeph">acfschkdsk</code>修复文件系统中的错误。在修复操作期间不要中断<code class="codeph">acfschkdsk</code> 。
                     </p>
                     <p>在少数情况下， <code class="codeph">acfschkdsk</code>会在继续检查文件系统之前提示问题。例如，如果<code class="codeph">acfschkdsk</code>检测到文件系统上正在进行另一个<code class="codeph">acfschkdsk</code> ，或者<code class="codeph">acfschkdsk</code>检测到未加载Oracle ACFS驱动程序，或者文件系统似乎不是Oracle ACFS。在检查模式下， <code class="codeph">acfschkdsk</code>还会提示是否存在由于关闭不完整而未完全处理的事务日志。要以非交互模式运行，请包含<code class="codeph">/y</code>或<code class="codeph">/n</code>选项以对任何问题回答是或否。
                     </p>
                     <p><code class="codeph">acfschkdsk</code>在检查文件系统之前创建工作文件。如果空间可用，则会在<code class="codeph">temp</code>目录中创建这些工作文件。如果空间不足， <code class="codeph">acfschkdsk</code>尝试在当前工作目录中写入。<code class="codeph">acfschkdsk</code>创建的文件大致与正在检查的文件系统的大小<code class="codeph">acfschkdsk</code> 32K。最多分配三个文件。<code class="codeph">acfschkdsk</code>完成后，将删除这些文件。
                     </p>
                     <p>如果<code class="codeph">acfschkdsk</code>在文件系统中找到文件或目录，但无法确定其名称或预期位置（可能是由于其父目录中的损坏），则当<code class="codeph">acfschkdsk</code> ，它会将此对象放在<code class="codeph">\lost+found</code>目录中以修复模式运行。出于安全原因，只有Windows <code class="codeph">Administrator</code>才能读取<code class="codeph">\lost+found</code>文件。如果管理员稍后可以根据其内容确定文件的原始名称和位置，则可以将文件移动或复制到其预期位置。
                     </p>
                     <p><code class="codeph">\lost+found</code>目录中的文件名采用以下格式：</p><pre class="oac_no_warn" dir="ltr">家长。 <span class="italic">id</span> .file。 <span class="italic">id</span> 。 <span class="italic">自1970年以来的</span>父母时间。 <span class="italic">id</span> .dir。 <span class="italic">id</span> 。 <span class="italic">时间在仲因为-1970</span>
</pre><p><span class="italic"><code class="codeph">id</code></span>字段是文件系统中每个文件和目录的内部Oracle ACFS数字标识符。
                     </p>
                     <p>您可以使用<code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">id</code> <span class="italic"><code class="codeph">id</code></span> <span class="italic"><code class="codeph">mount_point</code></span>尝试确定与<code class="codeph">parent.</code>关联的目录<code class="codeph">parent.</code> <span class="italic"><code class="codeph">id</code></span> 。假定此目录是已删除对象的来源。有关<code class="codeph">acfsutil</code> <code class="codeph">info</code> ，请参阅<span class="q">“ <a href="acfs-commands-utilities.html#GUID-09C9BFDD-DA94-4082-B713-1C8B138E1191">acfsutil信息文件</a> ”</span> 。
                     </p>
                     <p>如果父目录未知，则父<span class="italic"><code class="codeph">id</code></span>字段设置为<code class="codeph">UNKNOWN</code> 。</p>
                     <div class="infoboxnote" id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__GUID-C8132E16-8CA3-45FA-8CEE-29AFDEA064CB">
                        <p class="notep1">注意：</p>
                        <p>无法从快照中查看<code class="codeph">\lost+found</code>目录的内容。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__GUID-EE2938FE-A63D-4C6F-BC77-D180C73D76DB">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例说明如何在Windows上检查Oracle ACFS文件系统。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC__GUID-E210525A-0027-46D0-96FF-91603E0DF93E">
                     <p class="titleinexample">示例16-16使用acfschkdsk命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; acfschkdsk asm-volume1-311</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94884"></a><a id="OSTMG94885"></a><a id="OSTMG94886"></a><a id="OSTMG94887"></a><a id="OSTMG94888"></a><a id="OSTMG94883"></a><div class="props_rev_3"><a id="GUID-503B091A-2650-431C-8D4F-3B9C08609D04" name="GUID-503B091A-2650-431C-8D4F-3B9C08609D04"></a><h3 id="OSTMG-GUID-503B091A-2650-431C-8D4F-3B9C08609D04" class="sect3">acfsdismount</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-503B091A-2650-431C-8D4F-3B9C08609D04__GUID-690709A4-91F1-46D4-BAAA-CFD51437B629">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>卸载Oracle ACFS文件系统并删除其挂载点（名称空间附件）。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-503B091A-2650-431C-8D4F-3B9C08609D04__GUID-3E92B375-56C9-454C-8B1A-0F6803B440ED">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">acfsdismount / h acfsdismount [/ v] { <span class="italic">drive_letter</span> | <span class="italic">mount_point</span> } acfsdismount [/ v] / all</pre><p><a href="acfs-commands-windows.html#GUID-503B091A-2650-431C-8D4F-3B9C08609D04__BABBFEHC" title="此表列出了ofsdismount命令的选项，以及每个选项的说明">表16-20</a>包含<code class="codeph">acfsdismount</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-503B091A-2650-431C-8D4F-3B9C08609D04__BABBFEHC">
                     <p class="titleintable">表16-20 acfsdismount命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="acfsdismount命令的选项" width="100%" border="1" summary="This table lists the options for the ofsdismount command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e869">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e872">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e877" headers="d143986e869 ">
                                 <p><code class="codeph">/ v</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e877 d143986e872 ">
                                 <p>指定详细模式。操作发生时显示进度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e885" headers="d143986e869 ">
                                 <p><code class="codeph">/H</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e885 d143986e872 ">
                                 <p>显示帮助文本和退出。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e893" headers="d143986e869 ">
                                 <p><code class="codeph">/所有</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e893 d143986e872 ">
                                 <p>指定卸载此节点上的所有Oracle ACFS文件系统。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e901" headers="d143986e869 ">
                                 <p><span class="italic"><code class="codeph">驱动器盘符</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e901 d143986e872 ">
                                 <p>指定后跟冒号的驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e910" headers="d143986e869 ">
                                 <p><span class="italic"><code class="codeph">装入点</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e910 d143986e872 ">
                                 <p>指定装入点的完整路径，包括驱动器号。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">acfsdismount</code>删除当前节点上指定文件系统的挂载点（名称空间附件），并卸载文件系统（如果已挂载）。当文件系统处于卸载状态时，数据将保留在设备上，并且可以使用<code class="codeph">acfsmountvol</code>命令重新安装文件系统。
                     </p>
                     <p>在某些情况下， <code class="codeph">acfsdismount</code>可能会失败，因为存在来自各种程序的打开文件引用，例如病毒扫描程序，Process Explorer或Oracle Enterprise Manager。
                     </p>
                     <p>使用<code class="codeph">acfsdismount</code>命令需要Windows管理员权限。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-503B091A-2650-431C-8D4F-3B9C08609D04__GUID-D0C5AF16-9988-4223-8807-98F270A47E61">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例显示如何卸载Oracle ACFS文件系统。第一个示例仅使用驱动器号卸载文件系统。第二个示例使用完整路径名卸载文件系统。第三个示例卸载所有已安装的文件系统。所有示例都启用了详细模式。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-503B091A-2650-431C-8D4F-3B9C08609D04__GUID-D50F2DD6-5895-459B-BBE7-D64BDBF87B76">
                     <p class="titleinexample">示例16-17使用acfsdismount命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; acfsdismount / v O：C：\&gt; acfsdismount / v O：\ mnt \ C：\ oracle&gt; acfsdismount / v / all acfsdismount：有效路径名：C：\ oracle \ acfsmounts \ acfs1 \ acfsdismount：打开句柄到卷C：\ oracle \ acfsmounts \ acfs1 acfsdismount：锁定卷C：\ oracle \ acfsmounts \ acfs1 acfsdismount：卸载卷C：\ oracle \ acfsmounts \ acfs1 acfsdismount：删除C：\ oracle \ acfsmounts \ acfs1 \上的卷装入点acfsdismount：关闭卷C：\ oracle \ acfsmounts \ acfs1的句柄并干净地退出</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94890"></a><a id="OSTMG94891"></a><a id="OSTMG94892"></a><a id="OSTMG94893"></a><a id="OSTMG94894"></a><a id="OSTMG94889"></a><div class="props_rev_3"><a id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB" name="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB"></a><h3 id="OSTMG-GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB" class="sect3">acfsformat</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__GUID-A5954D98-D7AD-48A0-B8F0-83AC87A342DC">目的</p>
                     <p>创建Oracle ACFS文件系统。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__GUID-DD4A0112-60B0-4F1D-BF66-D5DEC21BCBA9">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">acfsformat / h acfsformat [/ v] [/ i {512 | 4096}] [/ f] [/ n <span class="italic">名称</span> ] <span class="italic">volume_device</span> [/ c <span class="italic">release_version</span> ] [ <span class="italic">blocks</span> ]</pre><p><a href="acfs-commands-windows.html#GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__BABCFJEA" title="此表列出了ofsformat命令的选项以及每个选项的说明">表16-21</a>包含<code class="codeph">acfsformat</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__BABCFJEA">
                     <p class="titleintable">表16-21 acfsformat命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="acfsformat命令的选项" width="100%" border="1" summary="This table lists the options for the ofsformat command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e1138">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e1141">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1146" headers="d143986e1138 ">
                                 <p><code class="codeph">/ v</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1146 d143986e1141 ">
                                 <p>指定详细模式。操作发生时显示进度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1154" headers="d143986e1138 ">
                                 <p><code class="codeph">/ i {512 | 4096}</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1154 d143986e1141 ">
                                 <p>指定元数据块大小为512或4096字节的文件系统。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1162" headers="d143986e1138 ">
                                 <p><code class="codeph">/n</code> <span class="italic"><code class="codeph">name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1162 d143986e1141 ">
                                 <p>指定文件系统的名称。这也称为卷标。 <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code>返回名称（如果已指定）。这也可以从<code class="codeph">V$ASM_ACFSVOLUMES</code>视图中的<code class="codeph">VOL_LABEL</code>列显示。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1189" headers="d143986e1138 ">
                                 <p><code class="codeph">/F</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1189 d143986e1141 ">
                                 <p>指定强制选项。即使设备上存在现有Oracle ACFS，此操作也会创建文件系统，但前提是文件系统已卸除。此选项会覆盖原始文件系统上的结构。请谨慎使用此选项。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1197" headers="d143986e1138 ">
                                 <p><code class="codeph">/H</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1197 d143986e1141 ">
                                 <p>显示用法帮助文本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1205" headers="d143986e1138 ">
                                 <p><span class="italic"><code class="codeph">volume_device</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1205 d143986e1141 ">
                                 <p>指定要格式化的Oracle ADVM设备文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1214" headers="d143986e1138 ">
                                 <p><code class="codeph">/c</code> <span class="italic"><code class="codeph">release_version</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1214 d143986e1141 ">
                                 <p>创建Oracle ACFS文件系统，并将Oracle ACFS版本兼容性设置为<span class="italic">release_version</span>的值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1229" headers="d143986e1138 ">
                                 <p><span class="italic"><code class="codeph">块</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1229 d143986e1141 ">
                                 <p>指定文件系统应在命名设备上使用的块数。指定的数量可以是<code class="codeph">K</code> （千字节）， <code class="codeph">M</code> （兆字节）， <code class="codeph">G</code> （千兆字节）或<code class="codeph">T</code> （太字节）。如果未指定单位，则默认值为字节。如果未指定此选项，则会占用整个设备。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">acfsformat</code>创建要装入Oracle ACFS所需的磁盘结构。 <code class="codeph">acfsformat</code>在目标卷上执行快速格式化。<code class="codeph">acfsformat</code>成功运行后， <code class="codeph">V$ASM_VOLUME</code>视图中的<code class="codeph">USAGE</code>列显示<code class="codeph">ACFS</code> 。</p>
                     <p>使用<code class="codeph">/c <span class="codeinlineitalic">release_version</span></code>选项指定的值必须大于或等于磁盘组的<code class="codeph">COMPATIBLE.ADVM</code>值，并且必须小于或等于正在运行的Oracle Grid基础结构发行版。如果未指定<code class="codeph">/c <span class="codeinlineitalic">release_version</span></code> ，则使用<code class="codeph">COMPATIBLE.ADVM</code>的值。设置兼容性后，无法降级。<code class="codeph">/c <span class="codeinlineitalic">release_version</span></code>选项可用于无法或不希望更新磁盘组的<code class="codeph">COMPATIBLE.ADVM</code>和<code class="codeph">COMPATIBLE.ASM</code> ，但您希望使用需要增加兼容性的Oracle ACFS功能。更新Oracle ACFS兼容性后，将无法再使用较早的Oracle Grid基础结构版本安装文件系统。要更改现有文件系统的兼容性，请参阅“ <a href="acfs-commands-utilities.html#GUID-E0898E97-98E4-433D-8CB3-609FD90A2A58">acfsutil compat set</a> ”。有关Oracle ASM磁盘组兼容性属性的信息，请参阅<span class="q">“ <a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="您无法将磁盘组兼容性还原为以前的值。相反，您必须创建一个新磁盘组。该主题描述了由磁盘组兼容性属性设置的有效组合启用的Oracle ASM功能。如果提高了磁盘组兼容性，则可以启用创建太大而无法由以前版本的Oracle数据库管理的文件。">磁盘组兼容性</a> ”</span> 。
                     </p>
                     <p>对于512字节元数据块大小格式，最小文件系统大小为200 MB，对于4 KB元数据块大小格式，最小文件系统大小为512 MB。</p>
                     <p>必须加载Oracle ACFS驱动程序才能使用<code class="codeph">acfsformat</code> 。
                     </p>
                     <p>运行此命令需要Windows管理员权限。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__GUID-2FC04C17-F064-4E02-B9D7-288C4EA1BEDE">4 KB扇区/元数据</p>
                     <p>以下列表总结了基于<code class="codeph">COMPATIBLE.ADVM</code>磁盘组属性值的<code class="codeph">/i</code>选项和元数据块大小的使用。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果<code class="codeph">COMPATIBLE.ADVM</code>设置为<code class="codeph">12.2</code>或更高，则默认情况<code class="codeph">4096</code>数据块大小为<code class="codeph">4096</code>字节。
                           </p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">COMPATIBLE.ADVM</code>设置为小于<code class="codeph">12.2</code> ，则块大小设置为512字节。
                           </p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">COMPATIBLE.ADVM</code>设置为小于<code class="codeph">12.2</code>且逻辑扇区大小不是512字节，则命令失败。
                           </p>
                        </li>
                     </ul>
                     <p>对于普通用户IO请求，用户数据IO继续支持小至512字节的传输。当文件系统的Oracle ADVM卷的逻辑磁盘扇区大小为4 K时，用户Direct IO请求应在4 K文件偏移上对齐，并且是4 KB长度的倍数，以获得最佳性能。请注意，只有4 K元数据块大小格式支持具有4 K逻辑磁盘扇区的ADVM卷。</p>
                     <p>必须将<code class="codeph">COMPATIBLE.ADVM</code>值设置为<code class="codeph">12.2</code>或更高，以格式化逻辑磁盘大小为4096的Oracle ADVM卷，或使用<code class="codeph">/i 4096</code>选项格式化逻辑磁盘扇区大小为512字节的Oracle ADVM卷。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__GUID-67C6D591-01B8-43B0-B86F-8E441CC82F38">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此示例显示如何创建Oracle ACFS文件系统。在此示例中指定了详细选项。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB__GUID-6F5D5775-0C5B-4270-AA8B-F70047AE1D24">
                     <p class="titleinexample">示例16-18使用acfsformat命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; acfsformat / v asm-volume1-311</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94896"></a><a id="OSTMG94897"></a><a id="OSTMG94898"></a><a id="OSTMG94899"></a><a id="OSTMG94900"></a><a id="OSTMG94895"></a><div class="props_rev_3"><a id="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D" name="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D"></a><h3 id="OSTMG-GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D" class="sect3">acfsmountvol</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D__GUID-428ECE3B-5A2A-43CE-8398-E36392BA5333">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>安装Oracle ACFS文件系统。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D__GUID-05DD470D-3993-4305-A3C3-4D1164E8601A">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">acfsmountvol / h acfsmountvol acfsmountvol [/ v] / all acfsmountvol [/ v] { <span class="italic">drive_letter</span> | <span class="italic">dir</span> } <span class="italic">volume_device</span></pre><p><a href="acfs-commands-windows.html#GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D__BABBDHFE" title="此表列出了ofsmountvol命令的选项以及每个选项的说明">表16-22</a>包含<code class="codeph">acfsmountvol</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D__BABBDHFE">
                     <p class="titleintable">表16-22 acfsmountvol命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="acfsmountvol命令的选项" width="100%" border="1" summary="This table lists the options for the ofsmountvol command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e1571">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e1574">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1579" headers="d143986e1571 ">
                                 <p><code class="codeph">/ v</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1579 d143986e1574 ">
                                 <p>指定详细模式。操作发生时显示进度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1587" headers="d143986e1571 ">
                                 <p><code class="codeph">/H</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1587 d143986e1574 ">
                                 <p>显示帮助使用文本并退出。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1595" headers="d143986e1571 ">
                                 <p><code class="codeph">/所有</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1595 d143986e1574 ">
                                 <p>读取与创建ACFS挂载注册表<code class="codeph">acfsutil</code> <code class="codeph">registry</code>并安装此节点上在其列出的文件系统。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1609" headers="d143986e1571 ">
                                 <p><span class="italic"><code class="codeph">驱动器盘符</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1609 d143986e1574 ">
                                 <p>用于链接到Oracle ADVM卷设备的Windows驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1618" headers="d143986e1571 ">
                                 <p><span class="italic"><code class="codeph">DIR</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1618 d143986e1574 ">
                                 <p>指定装入点的完整目录，包括驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e1627" headers="d143986e1571 ">
                                 <p><span class="italic"><code class="codeph">volume_device</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e1627 d143986e1574 ">
                                 <p>指定已由<code class="codeph">acfsformat</code>格式化的Oracle ADVM卷设备文件。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">acfsmountvol</code>将Oracle ACFS附加到指定路径名或驱动器号的文件系统层次结构中。 <span class="italic"><code class="codeph">dir</code></span>必须是一个空目录。可以在任何空目录上创建Oracle ACFS装入点，它们可以是分层的（嵌套的）。
                     </p>
                     <p>之后<code class="codeph">acfsmountvol</code>成功运行，将<code class="codeph">MOUNTPATH</code>列<code class="codeph">V$ASM_VOLUME</code>视图显示在其上的文件系统现在安装的完整路径或驱动器号。如果未指定任何参数，那么该命令将列出此节点上所有已装入的Oracle ACFS文件系统。
                     </p>
                     <p>并不总是可以将安装失败的原因返回到<code class="codeph">acfsmountvol</code>命令。发生这种情况时，Oracle ACFS会将失败原因写入Windows系统事件记录器。
                     </p>
                     <p>Oracle ACFS文件系统只应安装在一个安装点上。应在所有集群成员上使用相同的安装点名称。</p>
                     <p>安装Oracle ACFS需要Windows管理员权限。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D__GUID-24D8EB8C-77CF-4D7E-93F9-C9FFB7321D24">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>第一个示例显示如何在标识为<code class="codeph">F:</code>驱动器的安装点上安装<code class="codeph">asm-volume1-311</code> 。第二个示例显示如何在由<code class="codeph">c:\oracle\acfsmounts\acfs1\</code>指定的挂载点上挂载<code class="codeph">asm-volume1-215</code> 。前两个示例启用详细模式。第三个示例列出节点上的所有已挂载文件系统。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D__GUID-F1DA2C6F-73AA-4E9A-B84F-4A40514D8819">
                     <p class="titleinexample">示例16-19使用acfsmountvol命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; acfsmountvol / v F：asm-volume1-215 C：\&gt; acfsmountvol / vc：\ oracle \ acfsmounts \ acfs1 asm-volume1-311 C：\ oracle&gt; acfsmountvol asm-volume1-311 C：\ oracle \ acfsmounts \ acfs1</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94902"></a><a id="OSTMG94903"></a><a id="OSTMG94904"></a><a id="OSTMG94905"></a><a id="OSTMG94901"></a><div class="props_rev_3"><a id="GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F" name="GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F"></a><h3 id="OSTMG-GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F" class="sect3">acfsutil分离</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F__GUID-DBB7A0D7-E590-41D9-915B-565A69A0E65C">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>准备Oracle ACFS驱动程序以进行模块卸载。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F__GUID-30C7CEA4-21F9-4F10-97FD-BD3F2D6517B4">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">acfsutil分离</pre><p><code class="codeph">acfsutil</code> <code class="codeph">detach</code>准备Oracle ACFS以卸载其驱动程序。Oracle ACFS在驱动程序加载时将自身注册为基本文件系统。为了使Windows服务控制管理器向驱动程序发送停止命令，除了删除与驱动程序关联的任何设备对象之外，Oracle ACFS还必须将自身注销为基本文件系统。
                     </p>
                     <p>成功完成<code class="codeph">acfsutil</code> <code class="codeph">detach</code>并卸载所有卷后，管理员可以将Windows服务控制管理器的stop命令运行到Oracle ACFS驱动程序。如果未使用<code class="codeph">acfsutil</code> <code class="codeph">detach</code>命令，则<code class="codeph">stop</code>命令不会调用Oracle ACFS驱动程序卸载例程。此命令只能由Windows <code class="codeph">Administrator</code>运行。它由Oracle ACFS关闭脚本自动调用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F__GUID-E8F9BAF8-0C4E-40A3-9CE6-98A565FB1FED">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例说明如何在Windows上分离所有Oracle ACFS文件系统和卸载驱动程序。第一个示例卸载所有Oracle ACFS文件系统卷设备。第二个示例分离卷设备。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E7AD2596-1CAD-49CE-8A0E-4A5D1C19912F__GUID-F302D9BA-9AE2-4B38-94F2-DB9098A42458">
                     <p class="titleinexample">示例16-20使用acfsutil detach命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; acfsdismount / all C：\&gt; acfsutil detach</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94907"></a><a id="OSTMG94908"></a><a id="OSTMG94909"></a><a id="OSTMG94910"></a><a id="OSTMG94911"></a><a id="OSTMG94906"></a><div class="props_rev_3"><a id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC" name="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC"></a><h3 id="OSTMG-GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC" class="sect3">advmutil下马</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__GUID-5D1E3D1D-3199-406C-87D5-32C4562E4623">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">advmutil</code> <code class="codeph">dismount</code>命令为不是Oracle ACFS的文件系统卸载Oracle ADVM卷设备。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__GUID-0C539DE4-4531-468D-BFFE-C6579E720989">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">advmutil下马[/ unregister] { <span class="italic">drive_letter</span> | <span class="italic">dir</span> } advmutil下马[/ unregister] [/ all | / dg = <span class="italic">disk_group</span> ]</pre><p><a href="acfs-commands-windows.html#GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__BABJCJHD" title="此表列出了advutil命令的选项以及每个选项的说明">表16-23</a>包含Windows <code class="codeph">advmutil</code> <code class="codeph">dismount</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__BABJCJHD">
                     <p class="titleintable">表16-23 advmutil dismount命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="advmutil dismount命令的选项" width="100%" border="1" summary="This table lists the options for the advutil command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e2082">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e2085">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2090" headers="d143986e2082 ">
                                 <p><span class="italic"><code class="codeph">驱动器盘符</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2090 d143986e2085 ">
                                 <p>指定要卸除的驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2099" headers="d143986e2082 ">
                                 <p><span class="italic"><code class="codeph">DIR</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2099 d143986e2085 ">
                                 <p>指定装入点的目录，包括驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2108" headers="d143986e2082 ">
                                 <p><code class="codeph">/a</code> ll</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2108 d143986e2085 ">
                                 <p>指定卸载此节点上的所有文件系统。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2117" headers="d143986e2082 ">
                                 <p><code class="codeph">/注销</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2117 d143986e2085 ">
                                 <p>（可选）从系统注册表中取消注册Oracle ADVM卷设备及其驱动器号。启动Oracle ASM实例和Oracle ACFS后，不会创建未注册的驱动器号和Oracle ADVM卷符号链接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2125" headers="d143986e2082 ">
                                 <p><code class="codeph">/dg=</code> <span class="italic"><code class="codeph">disk_group</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2125 d143986e2085 ">
                                 <p>包含已注册的Oracle ADVM卷设备的磁盘组的可选名称，用于创建驱动器号或可能装入或卸载文件系统。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__GUID-3EA7C78C-B107-4222-BD98-90EAEFC2761C">
                        <p class="notep1">注意：</p>
                        <p>要使用NTFS格式化Oracle ADVM卷设备，必须将其安装在驱动器盘符上。格式化后，带有NTFS的Oracle ADVM卷设备可以安装在驱动器盘符或目录中。</p>
                     </div>
                     <p>要成功运行此命令，必须运行本地Oracle ASM实例，并且必须已创建此命令所需的磁盘组并将其装入Oracle ASM实例并启用卷。</p>
                     <p>在完全卸载文件系统之前， <code class="codeph">advmutil</code> <code class="codeph">dismount</code>命令不会将控制权返回到操作系统提示符。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__GUID-B18D2588-E1FA-4ABB-B98D-625D4B79E3CF">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这些示例显示如何卸载不是Oracle ACFS的文件系统。</p>
                     <ol>
                        <li>
                           <p>第一个示例显示如何删除不允许访问文件系统的Oracle ADVM卷设备的驱动器号。</p>
                        </li>
                        <li>
                           <p>第二个示例显示如何删除Oracle ADVM卷设备的驱动器号，该驱动器号不允许访问文件系统并将其从注册表中删除。</p>
                        </li>
                        <li>
                           <p>第三个示例显示如何删除不允许访问所有文件系统的所有已注册Oracle ADVM卷设备的驱动器号。</p>
                        </li>
                        <li>
                           <p>第四个示例显示如何删除特定Oracle ASM磁盘组中所有已注册的Oracle ADVM卷设备的驱动器号，该磁盘组不允许访问所有相关文件系统。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E38FD7A4-8D20-4C06-9C51-E71F75A5DFDC__GUID-0B8C5729-1FEA-4230-963D-0AD54C7C3D5F">
                     <p class="titleinexample">示例16-21使用advmutil dismount命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; advmutil卸载H：C：\&gt; advmutil卸载H：/取消注册C：\&gt; advmutil dismount / all C：\&gt; advmutil dismount / dg = data</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94913"></a><a id="OSTMG94914"></a><a id="OSTMG94915"></a><a id="OSTMG94916"></a><a id="OSTMG94917"></a><a id="OSTMG94912"></a><div class="props_rev_3"><a id="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351" name="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351"></a><h3 id="OSTMG-GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351" class="sect3">advmutil list</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351__GUID-B4A0602F-097E-4773-AF83-7D8EB6324157">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">advmutil</code> <code class="codeph">list</code>命令列出了使用<code class="codeph">advmutil</code> <code class="codeph">mount</code> <code class="codeph">/register.</code>的Oracle ADVM卷设备<code class="codeph">/register.</code></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351__GUID-C3E9A58D-892E-4747-AFB7-F2A93946C646">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">advmutil list / registry</pre><p><a href="acfs-commands-windows.html#GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351__BABGJHEH" title="此表列出了advutil命令的选项以及每个选项的说明">表16-24</a>包含Windows <code class="codeph">advmutil</code> <code class="codeph">list</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351__BABGJHEH">
                     <p class="titleintable">表16-24 advmutil list命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="advmutil list命令的选项" width="100%" border="1" summary="This table lists the options for the advutil command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e2367">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e2370">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2375" headers="d143986e2367 ">
                                 <p><code class="codeph">list</code> <code class="codeph">/registry</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2375 d143986e2370 ">
                                 <p>列出Windows注册表中包含的驱动器号和相应的Oracle ADVM卷设备名称。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>要成功运行此命令，必须运行本地Oracle ASM实例，并且必须已创建此命令所需的磁盘组并将其装入Oracle ASM实例并启用卷。</p>
                     <p>有关列出Oracle ACFS的Oracle ADVM卷设备的<span class="q"><a href="acfs-commands-utilities.html#GUID-09C9BFDD-DA94-4082-B713-1C8B138E1191">信息</a></span> ，请参阅<span class="q">“ <a href="acfs-commands-utilities.html#GUID-09C9BFDD-DA94-4082-B713-1C8B138E1191">acfsutil信息文件</a> ”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351__GUID-3AE28959-4740-4FE9-AF83-A48DD720D048">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例显示如何列出系统注册表中的所有条目。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-A6E582E5-AF0F-46E7-AD08-3979D3C34351__GUID-80ACE18F-51D0-4B47-86E0-FF6054145FC8">
                     <p class="titleinexample">示例16-22使用advmutil list命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; advmutil list / registry Drive Letter Asm Volume =================================== H：asm -volume1-123 K：asm-volume2-245</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94919"></a><a id="OSTMG94920"></a><a id="OSTMG94921"></a><a id="OSTMG94922"></a><a id="OSTMG94923"></a><a id="OSTMG94918"></a><div class="props_rev_3"><a id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D" name="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D"></a><h3 id="OSTMG-GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D" class="sect3">advmutil坐骑</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__GUID-BF822346-1360-4CF3-A1AB-E2D2DDB6E738">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">advmutil</code> <code class="codeph">mount</code>命令为不是Oracle ACFS的文件系统安装Oracle ADVM卷设备。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__GUID-1CD7BF51-BF71-45F7-BC3B-2D22148EB971">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">advmutil mount [/ register] { <span class="italic">drive_letter</span> | <span class="italic">dir</span> } <span class="italic">volume_device</span> advmutil mount / all</pre><p><a href="acfs-commands-windows.html#GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__BABEIAFI" title="此表列出了advutil命令的选项以及每个选项的说明">表16-25</a>包含Windows <code class="codeph">advmutil</code> <code class="codeph">mount</code>命令可用的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__BABEIAFI">
                     <p class="titleintable">表16-25 advmutil mount命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="advmutil mount命令的选项" width="100%" border="1" summary="This table lists the options for the advutil command, along with a description for each option" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d143986e2602">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d143986e2605">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2610" headers="d143986e2602 ">
                                 <p><span class="italic"><code class="codeph">驱动器盘符</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2610 d143986e2605 ">
                                 <p>指定要装入的驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2619" headers="d143986e2602 ">
                                 <p><span class="italic"><code class="codeph">DIR</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2619 d143986e2605 ">
                                 <p>指定装入点的目录，包括驱动器号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2628" headers="d143986e2602 ">
                                 <p><span class="italic"><code class="codeph">volume_device</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2628 d143986e2605 ">
                                 <p>表示Oracle ADVM卷设备。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2637" headers="d143986e2602 ">
                                 <p><code class="codeph">/a</code> ll</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2637 d143986e2605 ">
                                 <p>指定在此节点上装入所有非Oracle ACFS文件系统。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d143986e2646" headers="d143986e2602 ">
                                 <p><code class="codeph">/寄存器</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d143986e2646 d143986e2605 ">
                                 <p>（可选）在Windows系统注册表中注册Oracle ADVM卷设备及其驱动器号。启动Oracle ASM实例和Oracle ACFS后，将创建所有已注册的驱动器号和Oracle ADVM卷符号链接。这允许通过Windows自动安装文件系统，这也适用于Oracle ACFS文件系统。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__GUID-FEC4CDAF-D65F-4FAB-A5A8-831C93557BA7">
                        <p class="notep1">注意：</p>
                        <p>要使用NTFS格式化Oracle ADVM卷设备，必须将其安装在驱动器盘符上。格式化后，带有NTFS的Oracle ADVM卷设备可以安装在驱动器盘符或目录中。</p>
                     </div>
                     <p>要成功运行此命令，必须运行本地Oracle ASM实例，并且必须已创建此命令所需的磁盘组并将其装入Oracle ASM实例并启用卷。</p>
                     <p>有关为Oracle ACFS注册Oracle ADVM卷设备的信息，请参阅<span class="q">“ <a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil registry</a> ”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__GUID-C5DA1F30-A91C-41FA-80D3-30AC19CEBF17">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这些示例显示如何挂载非Oracle ACFS的文件系统。</p>
                     <ol>
                        <li>
                           <p>第一个示例显示如何为Oracle ADVM卷设备创建驱动器号，以用作非Oracle ACFS访问，然后可以使用该访问来格式化卷以用于NTFS。</p>
                        </li>
                        <li>
                           <p>第二个示例显示如何为Oracle ADVM卷设备创建驱动器号，以用作非Oracle ACFS访问，然后可以使用该访问来格式化卷以用于NTFS并将其保存在Windows系统注册表中。</p>
                        </li>
                        <li>
                           <p>第三个示例显示如何为系统注册表中保存的所有Oracle ADVM卷设备创建驱动器号，该驱动器号也允许访问文件系统。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C3576F48-511C-4FD0-BB15-5095EAA8460D__GUID-8FC85A3B-2555-40BE-9DF1-A7CB1B708D09">
                     <p class="titleinexample">示例16-23使用advmutil mount命令</p><pre class="oac_no_warn" dir="ltr">C：\&gt; advmutil mount H：asm-volume1-123 C：\&gt; advmutil mount H：asm-volume1-123 / register C：\&gt; advmutil mount / all</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00578.omg-monitoring.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>监控Oracle Messaging Gateway</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="omg-message-conversion.html" title="Previous" type="text/html"></link>
      <link rel="next" href="non-persistent-queues.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="omg-message-conversion.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="non-persistent-queues.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">监控Oracle Messaging Gateway</li>
            </ol>
            <a id="GUID-CFB0E5B4-1600-4AA0-AC7C-C9C971199AD6" name="GUID-CFB0E5B4-1600-4AA0-AC7C-C9C971199AD6"></a><a id="ADQUE2100"></a>
            
            <h2 id="ADQUE-GUID-CFB0E5B4-1600-4AA0-AC7C-C9C971199AD6" class="sect2"><span class="enumeration_chapter">21</span>监控Oracle Messaging Gateway</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题讨论了监视Oracle Messaging Gateway（MGW）代理的方法，您可能遇到的异常情况，有关Messaging Gateway错误和异常的几个信息源以及建议的补救措施。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="omg-monitoring.html#GUID-DF719916-282F-4252-87AC-F10349AA7115">Oracle Messaging Gateway日志文件</a></p>
                  </li>
                  <li>
                     <p><a href="omg-monitoring.html#GUID-A1E4EA13-5FDE-4FFB-ADA7-F5D36DCFB4D2">监视Oracle Messaging Gateway代理状态</a></p>
                  </li>
                  <li>
                     <p><a href="omg-monitoring.html#GUID-8904E8A1-B983-413B-9C8D-CF54730F9F35">监控Oracle Messaging Gateway传播</a></p>
                  </li>
                  <li>
                     <p><a href="omg-monitoring.html#GUID-278D3D58-6696-4526-A47C-1850E696043D">Oracle Messaging Gateway代理错误消息</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3384"></a><div class="props_rev_3"><a id="GUID-DF719916-282F-4252-87AC-F10349AA7115" name="GUID-DF719916-282F-4252-87AC-F10349AA7115"></a><h3 id="ADQUE-GUID-DF719916-282F-4252-87AC-F10349AA7115" class="sect3"><span class="enumeration_section">21.1</span> Oracle Messaging Gateway日志文件</h3>
               <div>
                  <p>Messaging Gateway代理状态，历史记录和错误记录在Messaging Gateway日志文件中。每次启动Messaging Gateway代理时都会创建一个不同的日志文件。您应该监视日志文件，因为任何错误，启动时读取的配置信息或动态配置信息都会写入日志。</p>
                  <p>默认代理的日志文件名格式为：</p><pre class="oac_no_warn" dir="ltr">oramgw主机名，时间戳processid.log</pre><p>命名代理的日志文件名的格式为：</p><pre class="oac_no_warn" dir="ltr">oramgw-AGENTNAME主机名，时间戳processid.log</pre><p>默认情况下，Messaging Gateway日志文件位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/mgw/log</code> 。此位置可以由代理程序使用的Messaging Gateway初始化文件中的参数<code class="codeph">log_directory</code>覆盖，通常为<code class="codeph">mgw.ora</code> 。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="omg-monitoring.html#GUID-BBF6C978-EA38-4976-8672-7D24CE610B8F">Oracle Messaging Gateway日志文件示例</a></p>
                     </li>
                     <li>
                        <p><a href="omg-monitoring.html#GUID-7F825A17-4B58-4335-BEF0-91B7D49893EF">解释Oracle Messaging Gateway日志文件中的异常消息</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE3386"></a><a id="ADQUE3385"></a><div class="props_rev_3"><a id="GUID-BBF6C978-EA38-4976-8672-7D24CE610B8F" name="GUID-BBF6C978-EA38-4976-8672-7D24CE610B8F"></a><h4 id="ADQUE-GUID-BBF6C978-EA38-4976-8672-7D24CE610B8F" class="sect4"><span class="enumeration_section">21.1.1</span> Oracle Messaging Gateway日志文件示例</h4>
                  <div>
                     <div class="section">
                        <p>以下示例日志文件显示Messaging Gateway代理程序启动。示例日志文件显示已添加消息传递链接，已注册的外部队列，传播作业以及与该作业关联的计划。日志文件显示已激活传播作业。最后一行表示Messaging Gateway已启动并正在运行并准备传播消息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BBF6C978-EA38-4976-8672-7D24CE610B8F__GUID-CBB74609-34F7-4E33-8798-549E6DDFB9A3">
                        <p class="titleinexample">示例21-1示例消息传递网关日志文件</p><pre class="oac_no_warn" dir="ltr">&gt;&gt; 2007-01-16 15:04:49 MGW C-Bootstrap 0 LOG process-id = 11080 Bootstrap程序启动&gt;&gt; 2007-01-16 15:04:50 MGW C-Bootstrap 0 LOG process-id = 11080 JVM创建 -  heapsize = 64 &gt;&gt; 2007-01-16 15:04:53 MGW Engine 0 200主MGW代理版本：11.1.0.0 &gt;&gt; 2007-01-16 15:04:53 MGW AdminMgr 0 LOG main连接数据库使用connect string = jdbc：oracle：oci：@INST1 &gt;&gt; 2007-01-16 15:05:00 MGW Engine 0 200主MGW组件版本：11.1.0.3.0 &gt;&gt; 2007-01-16 15:05:01 MGW Engine 0 200主MGW代理名称：DEFAULT_AGENT，MGW作业实例id：273006EC6ED255F1E040578C6D021A8C，MGW数据库实例：1 &gt;&gt; 2007-01-16 15:05:09 MGW Engine 0 1主代理正在初始化。&gt;&gt; 2007-01-16 15:05:09 MGW Engine 0 23 main工作线程数设置为1。&gt;&gt; 2007-01-16 15:05:09 MGW Engine 0 22 main默认轮询间隔设置为5000ms。&gt;&gt; 2007-01-16 15:05:09 MGW MQD 0 LOG main创建MQSeries消息链接：链接：MQLINK链接类型：基本Java接口队列管理器：my.queue.manager通道：channel1主机：my.machine端口：1414 user：ccdt url：ssl cipherSuite：connections：1 inbound logQ：logq1 outbound logQ：logq2 &gt;&gt; 2007-01-16 15:05:09 MGW Engine 0 4主链接MQLINK已添加。&gt;&gt; 2007-01-16 15:05:09 MGW Engine 0 7主队列DESTQ @ MQLINK已注册;提供者队列：MGWUSER.MYQUEUE。 &gt;&gt; 2007-01-16 15:05:09 MGW Engine 0 9主要传播计划JOB_AQ2MQ（MGWUSER.MGW_BASIC_SRC  - &gt; DESTQ @ MQLINK）已添加。&gt;&gt; 2007-01-16 15:05:09 MGW AQN 0 LOG主要创建AQ消息链接：链接：oracleMgwAq链接类型：本机数据库：INST1用户：MGWAGENT连接类型：JDBC OCI连接：1入站logQ：SYS.MGW_RECV_LOG出站logQ：SYS.MGW_SEND_LOG &gt;&gt; 2007-01-16 15:05:10 MGW Engine 0 19主MGW传播作业JOB_AQ2MQ已激活。&gt;&gt; 2007-01-16 15:05:10已添加MGW引擎0 14主要MGW传播作业JOB_AQ2MQ（MGWUSER.MGW_BASIC_SRC  - &gt; DESTQ @ MQLINK）。&gt;&gt; 2007-01-16 15:05:11 MGW Engine 0 2主代理启动并运行。</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE3388"></a><a id="ADQUE3387"></a><div class="props_rev_3"><a id="GUID-7F825A17-4B58-4335-BEF0-91B7D49893EF" name="GUID-7F825A17-4B58-4335-BEF0-91B7D49893EF"></a><h4 id="ADQUE-GUID-7F825A17-4B58-4335-BEF0-91B7D49893EF" class="sect4"><span class="enumeration_section">21.1.2</span>解释Oracle Messaging Gateway日志文件中的异常消息</h4>
                  <div>
                     <div class="section">
                        <p>记录到Messaging Gateway日志文件的异常消息可能包含一个或多个链接的异常，由日志文件中的<code class="codeph">[Linked-exception]</code>标识。这些通常是确定问题原因的最有用方法。例如，链接的异常可以是<code class="codeph">java.sql.SQLException</code> ，可能包括Oracle错误消息，PL / SQL堆栈跟踪或两者。
                        </p>
                        <p>以下示例显示了为<code class="codeph">DBMS_MGWADM</code>的<code class="codeph">database</code>参数指定了无效值（ <code class="codeph">bad_service_name</code> ）时Messaging Gateway日志文件中的<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">CREATE_AGENT</code>或<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">ALTER_AGENT</code> 。这导致Messaging Gateway代理无法建立数据库连接。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7F825A17-4B58-4335-BEF0-91B7D49893EF__GUID-51E639BE-AFF8-40CE-AF27-B8AACF2704A4">
                        <p class="titleinexample">例21-2示例异常消息</p><pre class="oac_no_warn" dir="ltr">&gt;&gt; 2003-07-22 15:27:26 MGW AdminMgr 0 LOG main使用connect string = jdbc连接数据库：oracle：oci8：@BAD_SERVICE_NAME &gt;&gt; 2003-07-22 15:27:29 MGW Engine 0 EXCEPTION主要oracle .mgw.admin。MgwAdminException：[241]无法连接到数据库。SQL错误：12154，连接字符串：jdbc：oracle：oci8：@BAD_SERVICE_NAME [...这里有Java堆栈跟踪...] [Linked-exception] java.sql。SQLException：ORA-12154：TNS：无法解析指定的连接标识符[...这里的Java堆栈跟踪...] &gt;&gt; 2003-07-22 15:27:29 MGW Engine 0 25主代理正在关闭。</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE3389"></a><div class="props_rev_3"><a id="GUID-A1E4EA13-5FDE-4FFB-ADA7-F5D36DCFB4D2" name="GUID-A1E4EA13-5FDE-4FFB-ADA7-F5D36DCFB4D2"></a><h3 id="ADQUE-GUID-A1E4EA13-5FDE-4FFB-ADA7-F5D36DCFB4D2" class="sect3"><span class="enumeration_section">21.2</span>监控Oracle Messaging Gateway代理状态</h3>
               <div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="omg-monitoring.html#GUID-E8202663-DA17-40C7-BF70-A95EE963D799">MGW_GATEWAY查看</a></p>
                     </li>
                     <li>
                        <p><a href="omg-monitoring.html#GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474">Oracle Messaging Gateway不可恢复的错误消息</a></p>
                     </li>
                     <li>
                        <p><a href="omg-monitoring.html#GUID-0490C4F4-829C-4BAC-A733-04A4F299075C">其他Oracle Messaging Gateway错误条件</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE3390"></a><div class="props_rev_3"><a id="GUID-E8202663-DA17-40C7-BF70-A95EE963D799" name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799"></a><h4 id="ADQUE-GUID-E8202663-DA17-40C7-BF70-A95EE963D799" class="sect4"><span class="enumeration_section">21.2.1</span> MGW_GATEWAY视图</h4>
                  <div>
                     <p><code class="codeph">MGW_GATEWAY</code>视图监视Messaging Gateway代理的进度。可用于监视代理的字段包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">代理名称</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">AGENT_INSTANCE</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">AGENT_PING</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">AGENT_STATUS</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LAST_ERROR_MSG</code> 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">服务</code></p>
                        </li>
                     </ul>
                     <p><code class="codeph">AGENT_STATUS</code>字段显示代理的状态。此列具有以下可能值：</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-C534F465-45EC-49FC-B637-3186DE241B84"><!-- --></a> NOT_STARTED</dt>
                        <dd>
                           <p>表示代理既未运行也未计划运行。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-ECA50B8B-0452-467E-9FD0-765735981BE1"><!-- --></a> START_SCHEDULED</dt>
                        <dd>
                           <p>表示代理作业正在等待作业计划程序运行。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-ABF23341-600A-4CF6-A8A3-E8645C1773F8"><!-- --></a>开始</dt>
                        <dd>
                           <p>表示代理正在启动过程中。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-0B1E6442-C264-43E4-9364-73FE4CC81F47"><!-- --></a> INITIALIZING</dt>
                        <dd>
                           <p>表示代理已启动并正在读取配置数据。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-67E252ED-20DF-456A-8A61-11969826ACCA"><!-- --></a>跑步</dt>
                        <dd>
                           <p>表示代理已准备好传播任何可用消息或处理动态配置更改。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-A399F9F6-3F00-427E-AF7C-2C98A612FAB1"><!-- --></a> SHUTTING_DOWN</dt>
                        <dd>
                           <p>表示代理正在关闭。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-289A273F-A8FC-4582-81C1-C2878353D8A2"><!-- --></a> BROKEN</dt>
                        <dd>
                           <p>表示在尝试启动代理进程时，Messaging Gateway已检测到另一个代理已在运行。在正常使用情况下不应出现这种情况。</p>
                        </dd>
                     </dl>
                     <p>查询<code class="codeph">AGENT_PING</code>字段ping Messaging Gateway代理。它的价值是<code class="codeph">REACHABLE</code>或<code class="codeph">UNREACHABLE</code> 。随着状态的代理<code class="codeph">RUNNING</code>几乎是可以<code class="codeph">REACHABLE</code> 。</p>
                     <p>如果发生启动或运行Messaging Gateway代理时出错，则列<code class="codeph">LAST_ERROR_MSG</code> ， <code class="codeph">LAST_ERROR_DATE</code>和<code class="codeph">LAST_ERROR_TIME</code>提供有价值的信息。<code class="codeph">AGENT_INSTANCE</code>表示启动Messaging Gateway实例的Oracle数据库实例。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E8202663-DA17-40C7-BF70-A95EE963D799__GUID-3DDB0C25-5643-4EB1-87C6-7B0560EA07AF">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">MGW_GATEWAY</code>视图的更多信息，请<code class="codeph">MGW_GATEWAY</code> <a href="../arpls/DBMS_MGWADM.html#ARPLS364" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考中的</span></a> “DBMS_MGWADM”</p>
                     </div>
                  </div>
               </div><a id="ADQUE3392"></a><a id="ADQUE3393"></a><a id="ADQUE3394"></a><a id="ADQUE3395"></a><a id="ADQUE3396"></a><a id="ADQUE3397"></a><a id="ADQUE3398"></a><a id="ADQUE3399"></a><a id="ADQUE3400"></a><a id="ADQUE3401"></a><a id="ADQUE3402"></a><a id="ADQUE3403"></a><a id="ADQUE3404"></a><a id="ADQUE3405"></a><a id="ADQUE3406"></a><a id="ADQUE3407"></a><a id="ADQUE3408"></a><a id="ADQUE3391"></a><div class="props_rev_3"><a id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474" name="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474"></a><h4 id="ADQUE-GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474" class="sect4"><span class="enumeration_section">21.2.2</span> Oracle Messaging Gateway不可恢复的错误消息</h4>
                  <div>
                     <p><code class="codeph">MGW_GATEWAY</code>视图的<code class="codeph">AGENT_STATUS</code>字段中的状态为<code class="codeph">NOT_STARTED</code>表示Messaging Gateway代理未运行。如果<code class="codeph">AGENT_STATUS</code>为<code class="codeph">NOT_STARTED</code>且<code class="codeph">LAST_ERROR_MSG</code>字段不为NULL，则Messaging Gateway代理在启动或运行时遇到无法恢复的错误。检查是否已生成Messaging Gateway日志文件以及是否指示任何错误。如果日志文件不存在，则可能未启动Messaging Gateway代理进程。
                     </p>
                     <p>本节介绍可能出现在<code class="codeph">MGW_GATEWAY</code>视图的<code class="codeph">LAST_ERROR_MSG</code>字段中的某些错误消息的原因和解决方案。除非另有说明，否则当发生其中一个错误时，Messaging Gateway代理将不会尝试重新启动。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-EEEFB148-B285-4615-B4D6-B96E28231B38">ORA-01089：正在进行中断 - 不允许任何操作</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理已关闭，因为<code class="codeph">SHUTDOWN IMMEDIATE</code>命令用于关闭正在运行代理的正在运行的Oracle数据库实例。代理将在设置为运行它的下一个可用数据库实例上重新启动。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-0B422A74-B8F8-4637-BA9C-281F2072040D">ORA-06520：PL / SQL：加载外部库时出错</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理进程无法启动，因为未加载共享库。这可能是因为Java共享库不在库路径中。验证<code class="codeph">listener.ora</code>中的库路径是否已正确设置。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-C674DC58-9EFF-4D03-9701-589B94BA766D">ORA-28575：无法打开到外部过程代理的RPC连接</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理无法启动。它会尝试自动重新启动。</p>
                        <p>可能的原因包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>监听器未运行。如果已修改<code class="codeph">listener.ora</code> ，则必须先停止并重新启动<code class="codeph">listener.ora</code> ，然后才能使更改生效。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">tnsnames.ora</code> ， <code class="codeph">listener.ora</code>或两者中的值都不正确。
                              </p>
                              <p>特别是， <code class="codeph">tnsnames.ora</code>必须具有<code class="codeph">MGW_AGENT</code>的网络服务名称条目。 Windows上的Messaging Gateway不需要此条目。为<code class="codeph">tnsnames.ora</code>中的<code class="codeph">MGW_AGENT</code>网络服务名称的<code class="codeph">CONNECT_DATA</code>指定的SID值必须与<code class="codeph">listener.ora</code> <code class="codeph">SID_DESC</code>条目的<code class="codeph">SID_NAME</code>值匹配。如果为<a href="glossary.html#GUID-0318DCE6-62FD-4DF5-88E9-84139310F831"><span class="xrefglossterm">进程间通信</span></a> （IPC）连接设置了<code class="codeph">MGW_AGENT</code>网络服务名称，则<code class="codeph">tnsnames.ora</code>和<code class="codeph">listener.ora</code> <code class="codeph">ADDRESS</code>的<code class="codeph">KEY</code>值必须匹配。如果已使用<code class="codeph">sqlnet.ora</code>的<code class="codeph">names.default_domain</code>参数设置默认域，则必须将该域附加到<code class="codeph">tnsnames.ora</code>的<code class="codeph">MGW_AGENT</code>网络服务名称。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-BE75C21C-BF7E-4271-88D1-5EEDBB3BDB4A">ORA-28576：丢失与外部过程代理的RPC连接</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理进程提前结束。这可能是因为该过程被外部实体停止或因内部错误导致故障。代理将尝试自动重新启动。检查Messaging Gateway日志文件以确定是否有更多信息可用。如果问题仍然存在，请与Oracle支持服务联系以获取帮助。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-84E3D55E-C2D5-44F3-B4DE-51B80E61296D">ORA-32830：Messaging Gateway代理返回的结果代码-2</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理尝试读取其初始化文件（通常为<code class="codeph">mgw</code>时发生错误。 <code class="codeph">ora</code> 。验证文件是否可读。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-E7F5AE4B-21E0-40A2-A8B8-2B93F4E9E7C6">ORA-32830：Messaging Gateway代理返回的结果代码-3</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>创建Messaging Gateway日志文件时出错。验证是否可以写入日志目录。默认位置是<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/mgw/log</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-C6ECC1AD-FBF1-4388-8131-5898CD4B57E4">ORA-32830：Messaging Gateway代理返回的结果代码-8</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>启动Java虚拟机（JVM）时发生错误。验证：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您使用的是正确的Java版本</p>
                           </li>
                           <li>
                              <p>您的操作系统版本和补丁级别足以支持JDK版本</p>
                           </li>
                           <li>
                              <p>您正在为JVM堆大小使用合理的值</p>
                              <p>堆的大小由指定<code class="codeph">max_memory</code>的参数<code class="codeph">DBMS_MGWADM.ALTER_AGENT</code></p>
                           </li>
                           <li>
                              <p>在Windows平台上，验证<code class="codeph">MGW_PRE_PATH</code>设置的<code class="codeph">mgw.ora</code>包含正确JVM库（ <code class="codeph">jvm.dll</code> ）的路径。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-6CCAA4B9-7676-475F-A6E7-B41613AD1EC1">ORA-32830：Messaging Gateway代理返回的结果代码-12</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>写入Messaging Gateway日志文件时发生错误。检查可用磁盘空间或可能导致文件I / O问题的任何其他问题。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-D271962A-9DD5-4CFE-9211-06C3D258E6DA">ORA-32830：Messaging Gateway代理返回的结果代码-17</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>JVM已成功创建，但尝试调用MGW Java代理程序时发生错误。验证<code class="codeph">mgw.ora</code>设置的CLASSPATH是否正确。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-6D06BCCD-0644-4BEE-8FEA-26F39DBF81FB">ORA-32830：Messaging Gateway代理返回的结果代码-19</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理配置为使用特定的初始化文件，但该文件不存在。<code class="codeph">MGW_GATEWAY</code>视图的<code class="codeph">INITFILE</code>字段显示管理员指定的文件的完整路径名。创建该初始化文件，或使用<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">ALTER_AGENT</code>将<code class="codeph">INITFILE</code>设置为另一个文件或<code class="codeph">NULL</code>以使用默认初始化文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-0DAD166F-2DC5-45A8-BB45-57D17A06E221">ORA-32830：Messaging Gateway代理返回的结果代码-100</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理JVM在写入日志文件之前遇到运行时异常或错误。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-E3B3B57E-B54F-467F-8E6A-A15FE0AC05DB">ORA-32830：Messaging Gateway代理返回的结果代码-101</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>无法恢复的错误导致Messaging Gateway代理关闭。检查Messaging Gateway日志文件以获取更多信息。验证<code class="codeph">mgw.ora</code>中指定的值是否正确。错误的值可能导致Messaging Gateway代理因异常错误情况而终止。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-78543847-6AA1-408A-8858-E7F9A9CEC4B5">ORA-32830：Messaging Gateway代理返回的结果代码-102</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理关闭，因为文件<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/mgw/jlib/mgw.jar</code>的版本与Messaging Gateway PL / SQL软件包的版本不匹配。验证所有Messaging Gateway组件是否来自同一版本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-3A6AE6E5-6689-4BE9-91B1-C72DF821E6FC">ORA-32830：Messaging Gateway代理返回的结果代码-103</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理关闭，因为正在运行它的数据库实例正在关闭。代理应自动重新启动，如果设置为另一个实例，或者重新启动关闭的实例。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-92D1F97F-8465-4541-8474-14507B170EC2">ORA-32830：Messaging Gateway代理返回的结果代码-104</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>查看先前的错误。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-A64786E6-7AAA-45EB-947D-584D04943ACE">ORA-32830：Messaging Gateway代理返回的结果代码-105</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway代理检测到它不应运行时正在运行。这不应该发生。如果是这样， <code class="codeph">AGENT_STATUS</code>将<code class="codeph">BROKEN</code> ，代理将自动关闭。如果您遇到此错误：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>终止可能仍在运行的任何Messaging Gateway代理进程。该过程通常命名为<code class="codeph">extprocmgwextproc</code> 。
                              </p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">DBMS_MGWADM.CLEANUP_GATEWAY(DBMS_MGWADM.CLEAN_STARTUP_STATE)</code> 。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_MGWADM.STARTUP</code>启动Messaging Gateway代理。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-F826FCC3-073D-415A-B3B3-48953D8F6A83">ORA-32830：Messaging Gateway代理返回的结果代码-106</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>查看先前的错误。</p>
                        <div class="infoboxnotealso" id="GUID-2CAAA620-3D8B-40E4-994B-922B7A0ED474__GUID-B19D0940-5F0A-4AEE-9C2F-CBE110CDEC75">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_MGWADM.html#ARPLS364" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中的</span></a> “DBMS_MGWADM”</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3410"></a><a id="ADQUE3411"></a><a id="ADQUE3412"></a><a id="ADQUE3413"></a><a id="ADQUE3409"></a><div class="props_rev_3"><a id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C" name="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C"></a><h4 id="ADQUE-GUID-0490C4F4-829C-4BAC-A733-04A4F299075C" class="sect4"><span class="enumeration_section">21.2.3</span>其他Oracle Messaging Gateway错误条件</h4>
                  <div>
                     <p>本节讨论<code class="codeph">START_SCHEDULED</code>在<code class="codeph">MGW_GATEWAY</code>视图中<code class="codeph">AGENT_STATUS</code>保持<code class="codeph">START_SCHEDULED</code>可能原因。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C__GUID-AE169175-B381-4004-ACCB-9830F7D595C2">数据库服务未启动</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway使用Oracle Scheduler作业来启动Messaging Gateway代理。Oracle Scheduler允许您指定应在其下运行作业的数据库服务（服务关联）。Messaging Gateway允许管理员使用数据库服务配置Messaging Gateway代理，该数据库服务将用于配置与该代理关联的Scheduler作业类。</p>
                        <p>关闭数据库时，Oracle会停止对该数据库的所有服务。启动数据库时，可能需要手动重新启动服务。如果计划程序作业与服务关联，则在启动服务之前作业将不会运行。如果<code class="codeph">AGENT_STATUS</code>的消息网关代理仍然<code class="codeph">START_SCHEDULED</code>较长时间，可能表明数据库服务被禁用或与该服务相关联没有数据库实例正在运行。使用<code class="codeph">MGW_GATEWAY</code>视图，Oracle Scheduler视图和服务视图来确定代理的配置方式以及Scheduler作业和数据库服务的当前状态。
                        </p>
                        <div class="infoboxnote" id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C__GUID-62B24B10-3835-4DD1-9909-0A3A5A0C443E">
                           <p class="notep1">注意：</p>
                           <p>有关Messaging Gateway使用的Oracle Scheduler对象的信息，请参阅<a href="omg-working.html#GUID-55AD98C2-B431-4B2F-B2AE-0E686FCEBC22">Oracle Messaging Gateway Agent计划程序作业</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C__GUID-6CB2BE44-612E-427F-BE93-0C56BCF06424">太少的作业队列进程</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Messaging Gateway使用Oracle Scheduler启动Messaging Gateway外部进程。当<code class="codeph">AGENT_STATUS</code>为<code class="codeph">START_SCHEDULED</code> ，Messaging Gateway代理程序调度程序作业正在等待调度程序运行。在有可用的作业进程之前，Messaging Gateway作业将不会运行。Messaging Gateway在Messaging Gateway代理会话的生命周期内保留其Scheduler作业进程。如果已启动多个Messaging Gateway代理，则每个代理都使用自己的Scheduler作业并需要自己的作业进程。
                        </p>
                        <p>如果数据库初始化参数<code class="codeph">JOB_QUEUE_PROCESSES</code>值为零，则不会运行任何Oracle Scheduler作业。如果该值不为零，则它实际上将成为可以同时运行的最大Scheduler作业和作业队列作业数。
                        </p>
                        <p>如果消息网关状态保持<code class="codeph">START_SCHEDULED</code>的时间过长，则可能表明该数据库已开始为一个值<code class="codeph">JOB_QUEUE_PROCESSES</code>是零或过低，且所有工作的奴隶都很忙。验证该值是否为非零，并且已使用足够的作业队列进程启动数据库实例，以便每个Messaging Gateway代理都可以使用一个。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C__GUID-70DEA51C-6EAE-4A18-B756-1D1E42658C17">调度程序作业已损坏或已禁用</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果与Messaging Gateway代理关联的Oracle Scheduler作业由于某种原因而被禁用或损坏，则Messaging Gateway代理状态将保持<code class="codeph">START_SCHEDULED</code>状态。要确定是否是这种情况，请使用<code class="codeph">DBA_SCHEDULER_JOBS</code>视图查看代理程序的Scheduler作业的<code class="codeph">STATE</code>字段。通常，当Messaging Gateway代理的Scheduler作业等待<code class="codeph">RUNNING</code>时，Scheduler作业状态将为<code class="codeph">SCHEDULED</code> ，或者当Messaging Gateway代理<code class="codeph">RUNNING</code>时为<code class="codeph">RUNNING</code> 。如果Messaging Gateway代理状态为<code class="codeph">NOT_STARTED</code>则代理的Scheduler作业不应存在。</p>
                        <p>有关Messaging Gateway Scheduler作业的其他信息，请检查其他Scheduler视图，例如<code class="codeph">DBA_SCHEDULER_JOB_RUN_DETAILS</code> 。还要检查<code class="codeph">MGW_GATEWAY</code>视图和Messaging Gateway日志文件，以查找可能表明存在问题的任何错误消息。
                        </p>
                        <div class="infoboxnote" id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C__GUID-BFE07A02-9204-4804-8E4D-341DD3E88004">
                           <p class="notep1">注意：</p>
                           <p>有关Messaging Gateway使用的Oracle Scheduler对象的信息，请参阅<a href="omg-working.html#GUID-55AD98C2-B431-4B2F-B2AE-0E686FCEBC22">Oracle Messaging Gateway Agent计划程序作业</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0490C4F4-829C-4BAC-A733-04A4F299075C__GUID-7A1AE8FF-02F1-4AE8-BB5F-3294B778F1A4">Oracle Real Application Clusters（Oracle RAC）环境</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果在Oracle RAC环境中使用Messaging Gateway并且代理已使用数据库服务进行配置但没有运行启用了服务的数据库实例，则Messaging Gateway <code class="codeph">AGENT_STATUS</code>将保持<code class="codeph">START_SCHEDULED</code>直到在正在运行的数据库上启动服务为止实例。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADQUE3414"></a><div class="props_rev_3"><a id="GUID-8904E8A1-B983-413B-9C8D-CF54730F9F35" name="GUID-8904E8A1-B983-413B-9C8D-CF54730F9F35"></a><h3 id="ADQUE-GUID-8904E8A1-B983-413B-9C8D-CF54730F9F35" class="sect3"><span class="enumeration_section">21.3</span>监控Oracle Messaging Gateway传播</h3>
               <div>
                  <div class="section">
                     <p>可以使用<code class="codeph">MGW_JOBS</code>视图和Messaging Gateway日志文件监视消息传递网关<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a> 。该视图提供有关传播尝试期间可能发生的传播消息和错误的信息。日志文件可用于确定错误的原因。
                     </p>
                     <p>除了显示配置信息外， <code class="codeph">MGW_JOBS</code>视图还具有可用于监视<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a>传播的动态信息。适用领域包括<code class="codeph">STATUS</code> ， <code class="codeph">ENABLED</code> ， <code class="codeph">PROPAGATED_MSGS</code> ， <code class="codeph">EXCEPTIONQ_MSGS</code> ， <code class="codeph">FAILURES</code> ， <code class="codeph">LAST_ERROR_MSG</code> ， <code class="codeph">LAST_ERROR_DATE</code>和<code class="codeph">LAST_ERROR_TIME</code> 。</p>
                     <p><code class="codeph">STATUS</code>字段指示作业的当前状态。<code class="codeph">READY</code>表示作业已准备好进行传播（但仅当<code class="codeph">ENABLED</code>字段为<code class="codeph">TRUE</code> ）。<code class="codeph">RETRY</code>表示发生传播失败，但将重试传播。<code class="codeph">FAILED</code>表示由于无法恢复的错误或已达到最大连续传播失败次数，代理已停止传播该作业。<code class="codeph">DELETE_PENDING</code>表示由于<code class="codeph">DBMS_MGWADM</code>而<code class="codeph">DBMS_MGWADM</code> 。正在调用<code class="codeph">REMOVE_JOB</code> ，但与工作相关的某些清理任务仍然很突出。<code class="codeph">SUBSCRIBER_DELETE_PENDING</code>表示<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">REMOVE_SUBSCRIBER</code>已在旧式传播作业上调用，但与作业相关的某些清理任务仍然很突出。
                     </p>
                     <p><code class="codeph">ENABLED</code>字段指示当前是否<code class="codeph">ENABLED</code>了传播作业。<code class="codeph">TRUE</code>表示作业已启用，而<code class="codeph">FALSE</code>表示作业已禁用。除非启用该作业，否则不会进行传播。
                     </p>
                     <p><code class="codeph">MGW_JOBS</code>视图的<code class="codeph">PROPAGATED_MSGS</code>字段指示已成功传播了多少消息。启动Messaging Gateway代理时，此字段将重置为零。
                     </p>
                     <p>如果已使用<a href="glossary.html#GUID-38CB652B-C8D2-49F4-92FD-926EB001284F"><span class="xrefglossterm">异常队列</span></a>配置了Messaging Gateway传播作业，则Messaging Gateway代理将在Messaging Gateway代理第一次遇到由消息转换失败导致的传播故障时将消息移动到该异常队列。<code class="codeph">oracle.mgw.common.指示消息转换失败<code class="codeph">oracle.mgw.common.Messaging Gateway日志文件中的MessageException</code> 。<code class="codeph">EXCEPTIONQ_MSGS</code>字段指示已将多少消息移动到异常队列。启动Messaging Gateway代理时，此字段将重置为零。
                     </p>
                     <p>如果在传播作业的消息传播期间发生错误，则计数将在<code class="codeph">FAILURES</code>字段中递增。此字段指示自上次成功传播消息以来遇到的故障数。每次发生故障时， <code class="codeph">LAST_ERROR_MSG</code> ， <code class="codeph">LAST_ERROR_DATE</code>和<code class="codeph">LAST_ERROR_TIME</code>都会显示错误消息及其发生的时间。当故障数达到16时，Messaging Gateway会暂停此传播作业的传播尝试。要恢复传播尝试，您必须调用<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">RESET_JOB</code>用于传播作业。
                     </p>
                     <p>如果发生错误，请检查Messaging Gateway日志文件以获取更多信息。</p>
                     <div class="infoboxnotealso" id="GUID-8904E8A1-B983-413B-9C8D-CF54730F9F35__GUID-254A84D6-5B72-45BF-99F2-AA45F71BDEFB">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_MGWADM.html#ARPLS364" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中的</span></a> “DBMS_MGWADM”</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3416"></a><a id="ADQUE3417"></a><a id="ADQUE3418"></a><a id="ADQUE3419"></a><a id="ADQUE3420"></a><a id="ADQUE3421"></a><a id="ADQUE3422"></a><a id="ADQUE3423"></a><a id="ADQUE3424"></a><a id="ADQUE3426"></a><a id="ADQUE3427"></a><a id="ADQUE3428"></a><a id="ADQUE3430"></a><a id="ADQUE3431"></a><a id="ADQUE3432"></a><a id="ADQUE3433"></a><a id="ADQUE3434"></a><a id="ADQUE3435"></a><a id="ADQUE3415"></a><div class="props_rev_3"><a id="GUID-278D3D58-6696-4526-A47C-1850E696043D" name="GUID-278D3D58-6696-4526-A47C-1850E696043D"></a><h3 id="ADQUE-GUID-278D3D58-6696-4526-A47C-1850E696043D" class="sect3"><span class="enumeration_section">21.4</span> Oracle Messaging Gateway代理错误消息</h3>
               <div>
                  <p>本节列出了<code class="codeph">MGW_JOBS</code>视图的<code class="codeph">LAST_ERROR_MSG</code>列中显示并记录到Messaging Gateway代理日志文件中的一些最常出现的错误。还显示了一些需要特殊操作的错误。当您注意到发生了故障时，请查看日志文件中的链接异常以确定问题的根本原因。
                  </p>
                  <p>将两种主要类型的错误记录到Messaging Gateway代理日志文件中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">oracle.mgw.common。MessageException</code> 
                        </p>
                        <p>发生消息转换失败时会记录此错误类型。Messaging Gateway代理可能无法传播导致失败的消息，并且最终将停止传播作业。</p>
                     </li>
                     <li>
                        <p><code class="codeph">oracle.mgw.common。GatewayException</code> 
                        </p>
                        <p>发生消息转换以外的某些故障时，将记录此错误类型。根据原因，问题可能会自行解决或需要用户采取措施。</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-C6BD0F77-79DD-4E4C-B952-BCFFD41E6F62">[221]无法访问&lt; <span class="italic">messaging_system</span> &gt;队列：&lt; <span class="italic">queue</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>尝试访问Oracle数据库高级队列队列或非Oracle队列时发生错误。检查日志文件中的链接异常错误代码和消息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-47D08C14-89BD-4ADE-9B7D-58C80CA232D2">[241]无法连接到数据库。SQL错误：&lt; <span class="italic">error</span> &gt;，连接字符串：&lt; <span class="italic">connect_string</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这可能是由为<code class="codeph">DBMS_MGWADM</code>指定的错误MGW代理连接信息<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">CREATE_AGENT</code>或<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">ALTER_AGENT</code> 。 Messaging Gateway代理用户或密码不正确或数据库说明符（数据库参数）不正确。验证代理，JDBC OCI或JDBC Thin使用的连接类型的连接信息是否正确。
                     </p>
                     <p>如果<code class="codeph">database</code>参数为<code class="codeph">NULL</code> ，则检查Messaging Gateway日志文件以查找以下Oracle链接错误：</p><pre class="oac_no_warn" dir="ltr">ORA-01034：ORACLE不可用ORA-27101：共享内存域不存在</pre><p>这两个错误一起表明Messaging Gateway代理正在尝试使用本地IPC连接连接到数据库，但<code class="codeph">ORACLE_SID</code>值不正确。
                     </p>
                     <p>当database参数设置为<code class="codeph">NULL</code>时，将使用本地连接。如果需要本地连接，则必须在Messaging Gateway代理进程中设置正确的<code class="codeph">ORACLE_SID</code>值。这可以通过将以下行添加到MGW初始化文件来完成，通常是<code class="codeph">mgw</code> 。 <code class="codeph">ora</code> ：</p><pre class="oac_no_warn" dir="ltr">设置ORACLE_SID = <span class="italic">sid_value</span>
</pre><p>如果数据库参数不为<code class="codeph">NULL</code>则无需在MGW初始化文件中设置<code class="codeph">ORACLE_SID</code> 。</p>
                     <p>如果在MGW初始化文件中设置<code class="codeph">ORACLE_SID</code>不起作用，则必须将数据库参数设置为非<code class="codeph">NULL</code> 。</p>
                     <p>如果使用JDBC Thin连接，则database参数必须不为<code class="codeph">NULL</code> 。如果使用JDBC Thin连接且数据库参数是TNSNames别名，请确保<code class="codeph">oracle</code> 。 <code class="codeph">net</code> 。 <code class="codeph">tns_names</code> Java属性在MGW初始化文件中设置。可以通过将以下行添加到MGW初始化文件来设置该属性：</p><pre class="oac_no_warn" dir="ltr">setJavaProp oracle.net.tns_admin = &lt;包含tnsnames.ora的目录&gt;</pre><div class="infoboxnote" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-2F5A2404-EFE3-4AA7-8926-E4D593CDE9D6">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="omg-getting-started.html#GUID-00E3933A-C58D-4D4A-A7A2-7CDFF418163D__BABDFCFI">oracle.net.tns_admin</a> ”</span>了解更多信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-D9859083-72D2-4E9D-B5C2-00A0F793CD7D">[415]缺少来自作业&lt; <span class="italic">job_name</span> &gt;的源队列的消息</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>可能的原因包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>代理程序部分处理了由Messaging Gateway代理以外的其他人出列的持久性消息。</p>
                        </li>
                        <li>
                           <p>传播源队列已清除或重新创建。</p>
                        </li>
                        <li>
                           <p>消息已移至Oracle数据库高级队列异常队列。</p>
                        </li>
                     </ul>
                     <p>如果发生此错误，则在<code class="codeph">DBMS_MGWADM</code>包中调用过程<code class="codeph">CLEANUP_GATEWAY</code> ：</p><pre class="oac_no_warn" dir="ltr">DBMS_MGWADM.CLEANUP_GATEWAY（action =&gt; DBMS_MGWADM.RESET_SUB_MISSING_MESSAGE，sarg =&gt; &lt; <span class="italic">job_name</span> &gt;）;</pre><p>仅当传播作业遇到丢失的消息问题且代理正在运行时，调用才会生效。代理将丢失的消息视为<a href="glossary.html#GUID-A91ACE79-576B-49F6-BE03-D4A792B9B468"><span class="xrefglossterm">非持久</span></a>消息，并继续处理传播作业。
                     </p>
                     <div class="infoboxnotealso" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-7397B791-DA90-4635-8B0F-B7A11F4972C6">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Messaging Gateway异常队列的详细信息，请参阅<span class="q">“ <a href="omg-working.html#GUID-8FCCF044-35E5-4FFC-A14D-C0B91D6624C6">传播作业概述</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-8A7D59E6-E5D3-4D66-9DD9-36C884607DB0">[416]在接收作业&lt; <span class="italic">job_name</span> &gt;的日志队列时缺少日志记录</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>可能的原因包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>日志记录由Messaging Gateway代理以外的其他人从日志队列中出列。</p>
                        </li>
                        <li>
                           <p>清除或重新创建日志队列。</p>
                        </li>
                     </ul>
                     <p>如果发生此错误，则在<code class="codeph">DBMS_MGWADM</code>包中调用过程<code class="codeph">CLEANUP_GATEWAY</code> ：</p><pre class="oac_no_warn" dir="ltr">DBMS_MGWADM.CLEANUP_GATEWAY（action =&gt; DBMS_MGWADM.RESET_SUB_MISSING_LOG_REC，sarg =&gt; &lt;job_name&gt;）;</pre><p>仅当传播作业遇到丢失的日志记录问题且代理正在运行时，该调用才会生效。</p>
                     <div class="infoboxnote" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-62F31436-A57C-4381-9D70-093A9A5FB022">
                        <p class="notep1">注意：</p>
                        <p>如果丢失的消息已经传播到目标队列，则调用过程<code class="codeph">DBMS_MGWADM.CLEANUP_GATEWAY</code>可能会导致重复的消息。用户应检查源和目标队列中是否存在两个位置中存在的任何消息。如果存在此类消息，则应在调用此过程之前将其从源队列或目标队列中删除。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-84BFF75D-6C6C-4A9B-A607-22EBE2A5B609">[417]发送作业&lt; <span class="italic">job_name</span> &gt;的日志队列时缺少日志记录</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>查看先前的错误。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-0A6C8CD3-F864-4833-B4AA-B7D759CB3021">[421]警告：无法获得恢复作业&lt; <span class="italic">job_name</span> &gt;的连接</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此消息是一条警告消息，指示Messaging Gateway代理无法获得连接以恢复传播作业，因为其他传播作业正在全部使用它们。代理将继续尝试获取连接，直到成功为止。</p>
                     <p>如果对WebSphere MQ链接重复此消息多次，则增加与传播作业关联的Messaging Gateway链接使用的最大连接数。</p>
                     <div class="infoboxnotealso" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-EC0FD5E0-6251-4811-9D92-A257EF606736">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="omg-working.html#GUID-78F4D486-C0B2-4DE5-A366-110433ED3F8D">改变消息系统链接</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-08C8D81E-6151-45B8-9948-2A16431DEB94">[434]无法访问队列&lt; <span class="italic">queue</span> &gt;;提供者队列&lt; <span class="italic">queue</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此消息表明无法访问邮件系统本机队列。队列可能已由<code class="codeph">DBMS_MGWADM.REGISTER_FOREIGN_QUEUE</code>注册，或者它可能是Oracle数据库高级队列队列。链接的异常应该提供更多信息。
                     </p>
                     <p>可能的原因包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>外部队列注册不正确，或者Messaging Gateway链接配置不正确。</p>
                           <p>验证配置信息。如果可能，请使用相同的配置信息来运行非Oracle邮件系统的示例应用程序。</p>
                        </li>
                        <li>
                           <p>无法访问非Oracle邮件系统。</p>
                           <p>检查非Oracle邮件系统是否正在运行，并且可以使用Messaging Gateway链接中提供的信息进行访问。</p>
                        </li>
                        <li>
                           <p>Oracle数据库高级队列队列不存在。创建Messaging Gateway传播作业后，可能已删除队列。</p>
                           <p>检查Oracle Database Advanced Queuing队列是否仍然存在。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-0D8464D0-8B8C-4144-AA28-1F10D85F66E4">[436]低内存警告：总内存= &lt;&gt;，free_mem = &lt;&gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Messaging Gateway代理JVM的内存不足。将调用Java垃圾收集，但这可能表示JVM堆大小太小。使用<code class="codeph">max_memory</code>的参数<code class="codeph">DBMS_MGWADM.ALTER_AGENT</code>增加JVM堆大小。如果Messaging Gateway代理正在运行，则必须重新启动它才能使此更改生效。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-C2B4846D-EDCD-46D8-8C10-3F6E450D99AD">[703]无法检索转换&lt; <span class="italic">transformation_id</span> &gt;的信息</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Messaging Gateway代理无法获取有关<a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">转换</span></a>所需的所有信息。<code class="codeph">DBMS_MGWADM.CREATE_JOB</code>的转换参数必须指定已注册转换的名称，而不是转换函数的名称。
                     </p>
                     <p>可能的原因包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>转型不存在。验证是否已创建转换。您可以从以SYS用户身份执行的以下查询中看到此信息：</p><pre class="oac_no_warn" dir="ltr">SELECT TRANSFORMATION_ID，来自DBA_TRANSFORMATIONS的所有者;</pre></li>
                        <li>
                           <p>Messaging Gateway注册了错误的转换。验证注册的转换是否是预期的转换。</p>
                        </li>
                        <li>
                           <p>Messaging Gateway代理用户对用于<code class="codeph">from_type</code>的<a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型</span></a>或异常中指示的转换的<code class="codeph">to_type</code>没有<code class="codeph">EXECUTE</code>特权。
                           </p>
                           <p>它不足以授予<code class="codeph">EXECUTE</code>到<code class="codeph">MGW_AGENT_ROLE</code>然后授予<code class="codeph">MGW_AGENT_ROLE</code>给代理用户。您必须直接向代理用户或<code class="codeph">PUBLIC</code>授予对象类型的<code class="codeph">EXECUTE</code>特权。</p>
                           <p>以下示例显示了<code class="codeph">from_type</code>这种情况。它还显示了使用链接的异常来确定错误的确切原因。
                           </p>
                           <p><span class="bold">对象类型没有EXECUTE特权</span></p><pre class="oac_no_warn" dir="ltr">处理作业JOB_AQ2MQ_2 oracle.mgw.common期间发生错误。GatewayException：[703]无法检索转换mgwuser的信息。SAMPLEADT_TO_MGW_BASIC_MSG [...这里有Java堆栈跟踪...] [Linked-exception] java.sql。SQLException：“from_type”为null [...这里的Java堆栈跟踪...]</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-8EBC1272-91EC-44FD-B424-5AAC66EAADE0">[720]不支持AQ有效载荷类型&lt; <span class="italic">类型</span> &gt;; queue：&lt; <span class="italic">queue</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Messaging Gateway不直接支持Messaging Gateway传播作业使用的Oracle数据库高级队列队列的有效负载类型。对于非JMS传播，Messaging Gateway直接支持有效负载类型<code class="codeph">RAW</code> ， <code class="codeph">SYS.MGW_BASIC_MSG_T</code>和<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。</p>
                     <p>可能的行动包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>配置Messaging Gateway传播作业以使用将队列有效内容类型转换为支持的类型的转换。</p>
                        </li>
                        <li>
                           <p>删除Messaging Gateway传播作业并创建一个新作业，该作业使用具有受支持的有效内容类型的Oracle数据库高级队列队列。</p>
                           <p>对于<a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS）传播，必须删除Messaging Gateway传播作业，并创建一个新作业，其Oracle <a href="glossary.html#GUID-9885B911-8AC1-49F3-922E-1F8D64C4501D"><span class="xrefglossterm">Oracle消息服务</span></a> （Oracle JMS）支持其Oracle Database Advanced Queuing有效内容类型。JMS传播不支持转换。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-1705F06F-5FB7-4C31-9807-DA8AD0E2190F">[721]不支持转换类型&lt; <span class="italic">type</span> &gt;; queue：&lt; <span class="italic">queue_name</span> &gt;，transform：&lt; <span class="italic">transformation</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Messaging Gateway传播作业配置了一个转换，该转换使用的对象类型不是Messaging Gateway <a href="glossary.html#GUID-F4F4838D-1672-4364-A9E8-EF21D7473749"><span class="xrefglossterm">规范</span></a>类型之一。
                     </p>
                     <p>对于出站作业，转换<code class="codeph">from_type</code>必须是Oracle数据库高级队列有效内容类型，并且<code class="codeph">to_type</code>必须是Messaging Gateway规范类型。对于入站作业，转换<code class="codeph">from_type</code>必须是Messaging Gateway规范类型， <code class="codeph">to_type</code>必须是Oracle Database Advanced Queuing有效内容类型。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-2C23ACD3-24C7-4D3F-A85D-B9562733B0BB">[722]消息转换失败; queue：&lt; <span class="italic">queue_name</span> &gt;，transform：&lt; <span class="italic">transformation</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>尝试执行转换时发生错误。当转换函数引发PL / SQL异常或尝试使用转换时发生某些其他Oracle错误时，Oracle数据库高级队列通常会抛出ORA-25229。</p>
                     <p>可能的原因包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Messaging Gateway代理用户对转换功能没有<code class="codeph">EXECUTE</code>特权。以下示例说明了这一点。
                           </p>
                           <p>这是不够授予<code class="codeph">EXECUTE</code>到<code class="codeph">MGW_AGENT_ROLE</code>然后授予<code class="codeph">MGW_AGENT_ROLE</code>消息发送网关代理用户。您必须将转换功能的<code class="codeph">EXECUTE</code>特权直接授予Messaging Gateway代理用户或<code class="codeph">PUBLIC</code> 。</p>
                           <p><span class="bold">转换函数没有EXECUTE特权</span></p><pre class="oac_no_warn" dir="ltr">处理作业JOB_MQ2AQ_2 oracle.mgw.common期间发生错误。GatewayException：[722]消息转换失败队列：MGWUSER.DESTQ_SIMPLEADT，转换：MGWUSER.MGW_BASIC_MSG_TO_SIMPLEADT [...这里有Java堆栈跟踪...] [Linked-exception] oracle.mgw.common。MessageException：[722]消息转换失败; queue：MGWUSER.DESTQ_SIMPLEADT，transform：MGWUSER.MGW_BASIC_MSG_TO_SIMPLEADT [...这里的Java堆栈跟踪...] [Linked-exception] java.sql。SQLException：ORA-25229：消息转换时出错msgid：9749DB80C85B0BD4E03408002086745E ORA-00604：递归SQL级别1发生错误ORA-00904：列名无效[...此处为Java堆栈跟踪...]</pre></li>
                        <li>
                           <p>转换函数不存在，即使已注册的转换也存在。如果转换函数不存在，则必须重新创建。</p>
                        </li>
                        <li>
                           <p>Messaging Gateway代理用户对异常中指示的队列的有效内容对象类型没有<code class="codeph">EXECUTE</code>特权。
                           </p>
                           <p>这是不够授予<code class="codeph">EXECUTE</code>到<code class="codeph">MGW_AGENT_ROLE</code>然后授予<code class="codeph">MGW_AGENT_ROLE</code>消息发送网关代理用户。您必须将对象类型的<code class="codeph">EXECUTE</code>特权直接授予Messaging Gateway代理用户或<code class="codeph">PUBLIC</code> 。</p>
                        </li>
                        <li>
                           <p>转换函数引发了错误。验证转换函数是否可以处理它收到的所有消息。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-A661AE0D-1F0C-4FD9-B13A-6FDF2A042A8F">[724]不支持消息转换;到AQ有效负载类型：&lt; <span class="italic">type</span> &gt;，来自类型：&lt; <span class="italic">type</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>消息传递网关传播作业配置为入站传播，其中非Oracle消息传递系统链接生成的规范消息类型与Oracle数据库高级队列队列有效内容类型不兼容。例如，从TIB /楼台邮件系统传播到Oracle数据库高级队列队列与<code class="codeph">SYS.MGW_BASIC_MSG_T</code>有效载荷类型，或传播从WebSphere MQ到Oracle数据库高级队列队列与<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>有效载荷类型。
                     </p>
                     <p>可能的行动包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用将非Oracle消息传递链接生成的规范消息类型映射到Oracle数据库高级队列有效内容类型的转换配置Messaging Gateway传播作业。</p>
                        </li>
                        <li>
                           <p>删除Messaging Gateway传播作业并创建一个新作业，其Oracle数据库高级队列队列有效内容类型与非Oracle链接生成的规范消息类型匹配。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-FC15FE42-C413-46CD-95D9-6D020C2D6EDA">[725] RAW有效载荷不支持文本消息</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>消息传递网关传播作业配置为入站传播到具有<code class="codeph">RAW</code>有效负载类型的Oracle数据库高级队列目标。从源（非Oracle）队列收到文本消息，导致消息转换失败。
                     </p>
                     <p>如果需要支持文本数据，请删除Messaging Gateway传播作业，并为有效负载类型支持文本数据的Oracle数据库高级队列目标创建新作业。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-64656D8F-CC45-4108-8037-143E8D3C1A73">[726]消息大小&lt; <span class="italic">size</span> &gt;对于RAW有效载荷而言太大;最大尺寸为&lt; <span class="italic">尺寸</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>消息传递网关传播作业配置为入站传播到具有<code class="codeph">RAW</code>有效负载类型的Oracle数据库高级队列目标。从源（非Oracle）队列收到包含大<code class="codeph">RAW</code>值的消息时，发生消息转换失败。
                     </p>
                     <p>如果需要大数据支持，请删除Messaging Gateway传播作业，并为Oracle数据库高级队列目标创建新作业，该目标的有效内容类型支持大数据，通常采用具有<a href="glossary.html#GUID-A62D4CF7-C903-40B3-89DC-0D6E4233D7C9"><span class="xrefglossterm">BLOB</span></a>属性的对象类型的形式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-5E3814E1-EEC0-47AA-B405-E2B120D8939E">[728]消息包含太多大（BLOB）字段</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>源消息包含太多必须存储在<code class="codeph">BLOB</code>类型中的字段。<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>限制为三个<code class="codeph">BLOB</code>字段。减少消息中的大字段数量，可能是将它们分成较小的字段或将它们组合成较少的大字段。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-13B569D0-FF35-4E87-A51F-49580C4EBAC1">[729]消息包含太多大（CLOB）字段</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>源消息包含太多字段，这些字段包含必须存储在<code class="codeph">CLOB</code>的大文本值。 <code class="codeph">SYS.MGW_TIBRV_MSG_T</code>限制为三个<code class="codeph">CLOB</code>字段。减少消息中的大字段数量，可能是将它们分成较小的字段或将它们组合成较少的大字段。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-278D3D58-6696-4526-A47C-1850E696043D__GUID-28BD0533-6C2C-4F0F-833F-AB337C881629">[805]排队到队列时出现MQSeries消息错误：&lt; <span class="italic">queue</span> &gt;</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>尝试将消息放入WebSphere MQ队列时，WebSphere MQ返回错误。检查日志文件中的链接异常错误代码和消息。请参阅WebSphere MQ文档。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04039.oracle-maps.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications."></meta>
      <meta name="description" content="Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications."></meta>
      <title>Oracle Maps</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Map Visualization Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Oracle Maps is the name for a suite of technologies for developing high-performance interactive web-based mapping applications."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Map Visualization Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-map-visualization-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T11:37:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94797-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="map-visualization-servers.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-map-builder-tool.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Map Visualization Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JIMPV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="map-visualization-servers.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-map-builder-tool.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">地图可视化开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Maps</li>
            </ol>
            <a id="GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" name="GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E"></a><a id="JIMPV8000"></a>
            
            <h2 id="JIMPV-GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" class="sect2"><span class="enumeration_chapter">4</span> Oracle Maps</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。</p>
               <p><a id="d26950e23" class="indexterm-anchor"></a> Oracle Maps包含在地图可视化组件中。
               </p>
               <p>地图可视化组件允许拥有有效许可并符合地图图块提供商使用条款的用户显示来自这些许可服务的地图图块。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-maps.html#GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32">Oracle Maps JavaScript API</a><br>Oracle Maps JavaScript客户端是一个基于浏览器的地图可视化引擎，它在地图图块服务器之上工作，并使用HTML5技术。
                  </li>
                  <li class="ulchildlink"><a href="oracle-maps.html#GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC">开发Oracle Maps应用程序</a><br>本主题描述如何开发Oracle Maps应用程序。
                  </li>
                  <li class="ulchildlink"><a href="oracle-maps.html#GUID-E3A7A484-B021-459C-8AE9-E7ABBDC04C94">使用谷歌地图</a><br>应用程序可以将Google地图图块显示为内置地图图块图层，方法是在地图窗口中创建并添加<code class="codeph">MVGoogleTileLayer</code>实例。
                  </li>
                  <li class="ulchildlink"><a href="oracle-maps.html#GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B">将数据转换为球形墨卡托坐标系</a><br>流行的在线地图服务（如Google Maps）使用球形墨卡托投影作为其地图。
                  </li>
                  <li class="ulchildlink"><a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611">使用动态图块层</a><br><span class="bold">动态切片图层</span>是在客户端定义的切片图层。
                  </li>
               </ul>
            </div>
            <a id="JIMPV9821"></a><div class="props_rev_3"><a id="GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" name="GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32"></a><h3 id="JIMPV-GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" class="sect3"><span class="enumeration_section">4.1</span> Oracle Maps JavaScript API</h3>
               <div>
                  <p>Oracle Maps JavaScript客户端是一个基于浏览器的地图可视化引擎，它在地图图块服务器之上工作，并使用HTML5技术。</p>
                  <p>它实现了以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>从地图图块服务器中获取地图图块，并在Web浏览器中将其显示为地图图块图层。</p>
                     </li>
                     <li>
                        <p>控制用户交互，例如拖动地图导航，单击要素，绘制矩形和红线。</p>
                        <p>绘制矩形是指应用程序用户通过在矩形的一个角上单击并按住鼠标按钮，将鼠标拖动到对角的对角，然后释放鼠标按钮来创建矩形。</p>
                        <p><span class="bold">修订标注</span>是指应用程序用户通过单击鼠标按钮然后移动鼠标并单击多次来创建多边形或折线，每次单击都会将红线延伸一条直线。（红线图纸通常以红色显示，但您可以指定使用任何颜色的线条样式。）
                        </p>
                     </li>
                  </ul>
                  <p>要访问这些函数，请使用JavaScript API，它由几个JavaScript类组成。有关Oracle Maps JavaScript API中所有类的详细信息，请参阅Javadoc样式的参考文档，该文档包含在<code class="codeph">mvdemo.ear</code>文件中，可从以下位置获得： <code class="codeph">http://</code> <span class="italic"><code class="codeph">host:port</code></span> <code class="codeph">/mvdemo/api/oracle_maps_html5_api.jsp</code></p>
                  <p>API的教程和演示可作为具有根上下文路径<code class="codeph">/mvdemo</code>的独立打包应用程序提供。教程从基础开始（显示地图图块层，添加导航面板，显示交互式功能和信息窗口），然后转到更复杂的主题，例如注册事件侦听器，以编程方式创建和使用样式以及空间过滤。
                  </p>
                  <p>这些教程都基于MVDEMO示例数据集（可从Oracle技术网上的地图可视化组件页面获得），并假设名为<code class="codeph">mvdemo</code>的数据源。教程页面有三个面板。左边列出了示例代码或演示标题。单击一个，并在右上方的面板中显示执行该示例代码的结果。底部面板包含标题为JavaScript和HTML的选项卡，分别显示所选演示的JavaScript和HTML代码片段。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-D915B019-4F89-4648-BD93-53CD42D2690E">关于Oracle Maps JavaScript API</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。">Oracle Maps</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9960"></a><div class="props_rev_3"><a id="GUID-D915B019-4F89-4648-BD93-53CD42D2690E" name="GUID-D915B019-4F89-4648-BD93-53CD42D2690E"></a><h4 id="JIMPV-GUID-D915B019-4F89-4648-BD93-53CD42D2690E" class="sect4"><span class="enumeration_section">4.1.1</span>关于Oracle Maps JavaScript API</h4>
                  <div>
                     <p>Oracle Maps JavaScript API利用了现代浏览器和HTML5的功能。它的一些功能包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>内置支持各种第三方地图图块服务，例如maps.oracle.com，Nokia Maps，OpenStreet Maps和其他地图服务提供商</p>
                        </li>
                        <li>
                           <p>丰富的客户端渲染地理空间数据，即时应用渲染样式和效果，如渐变，动画和阴影</p>
                        </li>
                        <li>
                           <p>自动聚集大量点和客户端热图生成</p>
                        </li>
                        <li>
                           <p>基于属性值的客户端特征过滤以及空间谓词（查询窗口）</p>
                        </li>
                        <li>
                           <p>丰富的内置地图控件和工具，包括可自定义的导航栏和信息窗口，可配置的图层控件以及红线和距离测量工具</p>
                        </li>
                     </ul>
                     <p>现有的服务器端预定义样式和主题将与API一起使用。例如，以下代码段基于预定义主题<code class="codeph">mvdemo.customers</code>创建交互式矢量图层，该<code class="codeph">mvdemo.customers</code>具有关联的预定义样式：</p><pre class="oac_no_warn" dir="ltr">var baseURL =“http：//”+ document.location.host +“/ mapviewer”; var layer = new OM.layer。VectorLayer（“layer1”，{def：{type：OM.layer。VectorLayer。TYPE_PREDEFINED，dataSource：“mvdemo”，主题：“customers”，url：baseURL}}）;</pre><p>API具有以下顶级类和子包，所有这些都在命名空间<code class="codeph">OM</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">Map</code>类是API的主要类。</p>
                        </li>
                        <li>
                           <p><code class="codeph">Feature</code>类表示各个地理<code class="codeph">Feature</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">MapContext</code>类是封装一些基本上下文信息的顶级类，例如当前地图中心点和缩放级别。它通常被传递给事件监听器。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">control</code>包包含所有地图控件，例如导航栏和概览图。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">event</code>包包含所有地图和图层事件类。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">filter</code>包包含用于选择或子集化所显示的矢量图层要素的所有客户端过滤器（空间或关系）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">geometry</code>包包含各种几何类。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">layer</code>包包含各种图块和矢量图层类。切片图层类包括访问一些在线地图服务，如Oracle，Nokia和OpenStreetMap。矢量图层是交互式要素图层。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">infowindow</code>包中包含可自定义的信息窗口及其样式。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">style</code>包包含适用于客户端矢量数据的样式。它还包括视觉效果，如动画，渐变和阴影。
                           </p>
                        </li>
                        <li>
                           <p>该<code class="codeph">tool</code>包包含各种地图工具，例如用于距离测量，红线和几何图形。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">universe</code>包中包含内置或预定义的<span class="italic">地图Universe</span> 。地图Universe定义地图内容的边界框和缩放级别定义集。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">util</code>包包含各种实用程序类。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">visualfilter</code>包为各种视觉效果提供了界面，例如渐变和阴影。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">OM.Map</code>是Web浏览器中所有地图操作的主要入口类。此类和其他类提供用于在Web制图应用程序中添加特定于应用程序的逻辑，操作和交互性的接口。应用程序逻辑和操作可包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建一个地图客户端实例，并将其与网页中创建的地图容器DIV对象相关联。</p>
                        </li>
                        <li>
                           <p>配置地图参数，例如地图中心和地图缩放级别。</p>
                        </li>
                        <li>
                           <p>（可选）创建和操作地图图块图层。不需要地图图块层。应用程序只能使用自定义Universe的交互式矢量图层，以编程方式定义缩放级别和比例。</p>
                        </li>
                        <li>
                           <p>创建和操作矢量图层。</p>
                        </li>
                        <li>
                           <p>在地图上显示信息窗口。</p>
                        </li>
                        <li>
                           <p>创建固定的地图装饰，例如地图标题，版权注释和地图控件。</p>
                        </li>
                        <li>
                           <p>访问内置实用程序，例如导航面板，矩形或圆形工具，比例尺和总览图面板。</p>
                        </li>
                        <li>
                           <p>使用事件侦听器来自定义事件处理，从而映射交互。</p>
                        </li>
                     </ul>
                     <p>有关使用Oracle Maps API的其他说明和注意事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>先前版本的API中的“FOI服务器”现在是数据服务器，其将要素的向量几何和属性流式传输到客户端以进行本地呈现。因此，先前版本中的“FOI层”现在称为<span class="bold">矢量层</span> 。
                           </p>
                        </li>
                        <li>
                           <p>为了显示交互式矢量图层，不需要背景地图图块层。例如，应用程序可以显示状态的专题图（例如，按人口五分之一填充颜色），没有背景图块层。</p>
                        </li>
                        <li>
                           <p>API依赖于并包含<code class="codeph">JQuery</code>和<code class="codeph">JQueryUI</code> 。因此， <code class="codeph">oraclemapsv2.js</code>包括<code class="codeph">jquery-1.7.2.min.js</code>和<code class="codeph">jquery-ui-1.8.16.min.js</code> 。如果您的应用程序也使用JQuery和JQueryUI并且已经包含它们，那么使用<code class="codeph">&lt;script&gt;</code>标记中的文件<code class="codeph">oraclemapsv2_core.js</code>来加载Oracle Maps库。也就是说，使用以下内容：</p>
                           <p><code class="codeph">&lt;script src =“/ mapviewer / jslib / v2 / oraclemapsv2_core.js”&gt; &lt;/ script&gt;</code></p>
                           <p>代替：</p>
                           <p><code class="codeph">&lt;script src =“/ mapviewer / jslib / v2 / oraclemapsv2.js”&gt; &lt;/ script&gt;</code></p>
                        </li>
                     </ul>
                     <p>有关使用API开发应用程序的信息，请参阅<a href="oracle-maps.html#GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC" title="本主题描述如何开发Oracle Maps应用程序。">开发Oracle Maps应用程序</a>和Oracle提供的教程和演示。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-0D5BC30A-40AC-4347-89FA-E95D44918E32" title="Oracle Maps JavaScript客户端是一个基于浏览器的地图可视化引擎，它在地图图块服务器之上工作，并使用HTML5技术。">Oracle Maps JavaScript API</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9822"></a><div class="props_rev_3"><a id="GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC" name="GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC"></a><h3 id="JIMPV-GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC" class="sect3"><span class="enumeration_section">4.2</span>开发Oracle Maps应用程序</h3>
               <div>
                  <p>本主题描述如何开发Oracle Maps应用程序。</p>
                  <p>如果在Oracle数据库中管理基础底图和图层，则客户端应用程序中显示的每个地图图块层必须在USER_SDO_CACHED_MAPS元数据视图中具有相应的数据库元数据条目（在<a href="map-visualization-concepts.html#GUID-820FD52E-E02D-4371-B85B-88B76FAC50FF">xxx_SDO_CACHED_MAPS视图中</a>描述）。同样，如果交互层基于数据库内容，则它必须在USER_SDO_THEMES视图中具有元数据条目（在<a href="map-visualization-concepts.html#GUID-565BF7E3-C504-4CDC-88B0-E1ACC67300E5" title="描述基本映射，主题和样式的映射元数据存储在由MDSYS拥有的全局表SDO_MAPS_TABLE，SDO_THEMES_TABLE和SDO_STYLES_TABLE中。">Map Visualizer元数据视图中</a>描述，尤其是<a href="map-visualization-concepts.html#GUID-BB3EC523-0FE9-47DD-994F-D3B8726F2347">xxx_SDO_THEMES视图</a> ）。可以使用Map Builder工具（在<a href="oracle-map-builder-tool.html#GUID-17324FF4-9AA2-4182-93B7-B7999737FA67" title="本章简要介绍了地图可视化组件Map Builder工具，也称为Oracle Map Builder。它不提供有关工具界面的详细信息;为此，您应该使用Oracle Map Builder时可以使用的在线帮助。">Oracle Map Builder工具中</a>描述）定义这些切片和交互层以及它们的样式和样式规则。
                  </p>
                  <p>要使用API开发Oracle Maps应用程序，请执行以下基本步骤：</p>
                  <ol>
                     <li>
                        <p>导入<code class="codeph">oraclemapsv2.js</code>库。
                        </p>
                        <p>API在单个JavaScript库中提供，该库作为地图可视化组件EAR存档的一部分打包。</p>
                     </li>
                     <li>
                        <p>部署并启动地图可视化组件后，通过<code class="codeph">&lt;script&gt;</code>标记加载库，例如：</p><pre class="oac_no_warn" dir="ltr">&lt;script type =“text / javascript”url =“http：// localhost：8080 / mapviewer / jslib / v2 / oraclemapsv2.js”/&gt;</pre><div class="infoboxnote" id="GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC__GUID-70DFA383-4218-44F0-AFB1-AACA1D9D4B38">
                           <p class="notep1">注意：</p>
                           <p>如果你需要一个特定的jQuery版本而不是<code class="codeph">oraclemapsv2.js</code>打包的<code class="codeph">oraclemapsv2.js</code> （如前面的例子所示），那么你可以先添加你喜欢的jQuery，然后再添加一个库列表。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;script src =“ <span class="italic">your_preferred_jQuery_library_listed_here_first</span> .js”&gt; &lt;/ script&gt; &lt;script src =“v2 / jquery / jquery.hammer-full.min.js”&gt; &lt;/ script&gt; &lt;script src =“v2 / jquery / jquery.i18n .properties-min-1.0.9.js“&gt; &lt;/ script&gt; &lt;script src =”v2 / jquery / jquery.mousewheel.min.js“&gt; &lt;/ script&gt; &lt;script src =”v2 / rtree / rtree-min .js“&gt; &lt;/ script&gt; &lt;script src =”v2 / fortknox-libs / fortknox-canvas.js“&gt; &lt;/ script&gt; &lt;script src =”v2 / oraclemapsv2_core.js“&gt; &lt;/ script&gt;</pre></div>
                     </li>
                     <li>
                        <p>在HTML页面中创建一个<code class="codeph">&lt;DIV&gt;</code>标记，该标记将包含交互式地图。
                        </p>
                     </li>
                     <li>
                        <p>创建将处理所有地图显示功能的客户端地图实例。</p>
                        <p>该类名为<code class="codeph">OM.Map</code> ，是API的主要入口点。</p>
                     </li>
                     <li>
                        <p>设置地图Universe（除非您还执行可选的下一步）。</p>
                        <p>地图Universe基本上定义了每个缩放级别的整体地图范围，缩放级别数以及可选的分辨率（以每个像素为单位的地图单位）。请注意，为了显示交互式矢量图层或主题，不需要预定义图块层。例如，按地区划分的销售互动专题地图不需要具有背景地图或平铺图层。</p>
                     </li>
                     <li>
                        <p>（可选）添加用作背景地图的切片图层。</p>
                        <p>切片图层可以来自数据库，例如<code class="codeph">mvdemo.demo_map</code> ，也可以来自支持的服务，例如诺基亚地图。添加切片图层也隐式定义了地图Universe，因此在这种情况下不需要执行上一步（设置地图Universe）。
                        </p>
                     </li>
                     <li>
                        <p>添加一个或多个交互式矢量图层。</p>
                        <p><code class="codeph">OM.VectorLayer</code>使用HTML5（Canvas或SVG）技术渲染浏览器中的所有数据。因此，除非另有说明，否则所有矢量图层内容都会加载一次，并且在地图缩放或平移操作中没有后续数据库查询或数据提取。
                        </p>
                     </li>
                     <li>
                        <p>添加一个或多个地图控件，工具和其他特定于应用程序的UI控件，以便用户可以设置显示的图层，样式和视觉效果。</p>
                     </li>
                  </ol>
                  <p>如果您需要阻止主题在默认情况下进行流式传输，则必须通过添加身份验证来保护它们，即通过在地图可视化组件<code class="codeph">web.xml</code>文件中添加安全性约束并通过配置<code class="codeph">mds.xml</code>文件来授权访问各种主题。有关信息，请参阅<a href="introduction-to-map-visualization-component.html#GUID-DA9FF5B5-17C1-472C-B6EF-B968869BA21F">为HTML5 API配置和保护Map数据服务器</a> 。</p>
                  <p>有关使用API的详细说明和相关信息，请参阅Oracle提供的教程和演示。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-1030CA92-20CB-4800-A59A-62A8CF065629">使用API创建客户端应用程序</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。">Oracle Maps</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV10133"></a><div class="props_rev_3"><a id="GUID-1030CA92-20CB-4800-A59A-62A8CF065629" name="GUID-1030CA92-20CB-4800-A59A-62A8CF065629"></a><h4 id="JIMPV-GUID-1030CA92-20CB-4800-A59A-62A8CF065629" class="sect4"><span class="enumeration_section">4.2.1</span>使用API创建客户端应用程序</h4>
                  <div>
                     <p>Oracle Maps应用程序在Web浏览器中运行，只需要支持HTML5（Canvas）支持和JavaScript。不需要额外的插件。</p>
                     <p>Oracle Maps应用程序的源代码通常打包在HTML页面中，该页面包含以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一个<code class="codeph">&lt;script&gt;</code>元素，用于将Oracle Maps客户端库加载到浏览器的JavaScript引擎中。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;script src =“/ mapviewer / jslib / v2 / oraclemapsv2.js”&gt; &lt;/ script&gt;</pre></li>
                        <li>
                           <p>包含地图的HTML <code class="codeph">&lt;div&gt;</code>元素。例如：</p><pre class="oac_no_warn" dir="ltr">&lt;div id =“map”style =“width：600px; height：500px”&gt; &lt;/ div&gt;</pre></li>
                        <li>
                           <p>用于创建地图客户端实例并设置初始地图内容（平铺和矢量图层），初始中心和缩放以及地图控件的JavaScript代码。此代码应打包在一个函数中，该函数在加载或准备好HTML页面时执行。该函数在HTML页面的<code class="codeph">&lt;body&gt;</code>元素的<code class="codeph">onload</code>属性中指定。例如：</p><pre class="oac_no_warn" dir="ltr">function on_load_mapview（）{var baseURL =“http：//”+ document.location.host +“/ mapviewer”; //创建一个OM.Map实例来显示地图var mapview = new OM.Map（document.getElementById（“map”），{mapviewerURL：baseURL}）; //添加地图图块层作为背景。var tileLayer = new OM.layer。TileLayer（“baseMap”，{dataSource：“mvdemo”，tileLayer：“demo_map”，tileServerURL：baseURL +“/ mcserver”}）; mapview.addLayer（tileLayer）; //设置初始地图中心和缩放级别var mapCenterLon = -122.45; var mapCenterLat = 37.7706; var mapZoom = 4; var mpoint = new OM.geometry。点（mapCenterLon，mapCenterLat，8307）; mapview.setMapCenter（M点）; mapview.setMapZoomLevel（mapZoom）; //添加基于主题的FOI图层以在地图上显示客户customersLayer = new OM.layer。VectorLayer（“客户”，{def：{type：OM.layer。VectorLayer。TYPE_PREDEFINED，dataSource：“mvdemo”，主题：“customers”，url：baseURL，loadOnDemand：false}}）; mapview.addLayer（customersLayer）; //在地图右侧添加导航面板var navigationPanelBar = new OM.control。NavigationPanelBar（）; navigationPanelBar.setStyle（{backgroundColor：“＃FFFFFF”，buttonColor：“＃008000”，大小：12}）; mapview.addMapDecoration（navigationPanelBar）; //添加比例尺var mapScaleBar = new OM.control。比例尺（）; mapview.addMapDecoration（mapScaleBar）; //显示地图。//初始化和显示只进行一次。mapview.init（）; }</pre></li>
                        <li>
                           <p>其他HTML元素和JavaScript代码，用于实现其他特定于应用程序的用户界面和控制逻辑。例如，HTML <code class="codeph">&lt;input&gt;</code>元素和JavaScript函数<code class="codeph">setLayerVisible</code>一起实现了层可见性控制。<code class="codeph">setLayerVisible</code>函数编码如下：</p><pre class="oac_no_warn" dir="ltr">function setLayerVisible（checkBox）{//如果选中复选框则显示customers vector layer，否则//隐藏它。if（checkBox.checked）customersLayer.setVisible（true）; else customersLayer.setVisible（false）; }</pre><p>该函数在定义复选框的<code class="codeph">&lt;input&gt;</code>元素的<code class="codeph">onclick</code>属性中指定。在以下示例中，只要用户单击Show Customers复选框，就会执行该函数：</p><pre class="oac_no_warn" dir="ltr">&lt;INPUT TYPE =“复选框”onclick =“setLayerVisible（this）”选中/&gt;显示客户</pre></li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-B0C3C99C-3D0C-4FB7-BCF5-F924A42B56CC" title="本主题描述如何开发Oracle Maps应用程序。">开发Oracle Maps应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9942"></a><div class="props_rev_3"><a id="GUID-E3A7A484-B021-459C-8AE9-E7ABBDC04C94" name="GUID-E3A7A484-B021-459C-8AE9-E7ABBDC04C94"></a><h3 id="JIMPV-GUID-E3A7A484-B021-459C-8AE9-E7ABBDC04C94" class="sect3"><span class="enumeration_section">4.3</span>使用谷歌地图</h3>
               <div>
                  <p>应用程序可以将Google地图图块显示为内置地图图块图层，方法是在地图窗口中创建并添加<code class="codeph">MVGoogleTileLayer</code>实例。
                  </p>
                  <p>在内部，Oracle Maps客户端使用官方Google Maps API显示由Google Maps服务器直接提供的地图。</p>
                  <p>要使用Google地图图块，您对图块的使用必须符合Google指定的服务条款（请参阅<a href="https://developers.google.com/readme/terms" target="_blank"><code class="codeph">https://developers.google.com/readme/terms</code></a> ）。</p>
                  <p>如果您需要在Google地图图块层上叠加自己的空间数据，请参阅<a href="oracle-maps.html#GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B" title="流行的在线地图服务（如Google Maps）使用球形墨卡托投影作为其地图。">将数据转换为球形墨卡托坐标系</a> 。）
                  </p>
                  <p>以下部分描述了使用内置地图图块层的两个选项。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-CEBF1805-101D-4B7C-A051-641A71BFBCBC">在客户端定义Google Maps图块层</a><br></li>
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-104759F3-E7AA-41B2-A1E4-6BD76FA66399">在服务器端定义内置地图图块层</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。">Oracle Maps</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9943"></a><div class="props_rev_3"><a id="GUID-CEBF1805-101D-4B7C-A051-641A71BFBCBC" name="GUID-CEBF1805-101D-4B7C-A051-641A71BFBCBC"></a><h4 id="JIMPV-GUID-CEBF1805-101D-4B7C-A051-641A71BFBCBC" class="sect4"><span class="enumeration_section">4.3.1</span>在客户端定义Google Maps图块层</h4>
                  <div>
                     <p>要在客户端定义内置地图图块层，您需要创建<code class="codeph">MVGoogleTileLayer</code>对象，并将其添加到MVMapView对象。（截至Oracle融合中间件版本<code class="codeph">MVGoogleTileLayer</code> ， <code class="codeph">MVGoogleTileLayer</code>使用Google Maps版本3 API。）
                     </p>
                     <p>例如，要使用Google磁贴，请将Google磁贴图层添加到地图中：</p><pre class="oac_no_warn" dir="ltr">mapview = new MVMapView（document.getElementById（“map”），baseURL）; tileLayer =新的MVGoogleTileLayer（）; mapview.addMapTileLayer（tileLayer）;</pre><p>在应用程序中，您可以调用<code class="codeph">MVGoogleTileLayer.setMapType</code>方法将地图类型设置为地图提供程序支持的类型之一，例如道路，卫星或混合。
                     </p>
                     <p>有关使用示例和更多信息，请参阅<code class="codeph">MVGoogleTileLayer</code>的JavaScript API文档以及<span class="italic">内置Google Maps Tile Layer</span>的教程演示。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-E3A7A484-B021-459C-8AE9-E7ABBDC04C94" title="应用程序可以将Google地图图块显示为内置地图图块图层，方法是在地图窗口中创建并添加MVGoogleTileLayer实例。">使用Google地图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="JIMPV9944"></a><div class="props_rev_3"><a id="GUID-104759F3-E7AA-41B2-A1E4-6BD76FA66399" name="GUID-104759F3-E7AA-41B2-A1E4-6BD76FA66399"></a><h4 id="JIMPV-GUID-104759F3-E7AA-41B2-A1E4-6BD76FA66399" class="sect4"><span class="enumeration_section">4.3.2</span>在服务器端定义内置地图图块层</h4>
                  <div>
                     <p>您可以在元数据中的服务器端定义内置地图切片图层（也称为外部切片图层），并将其用作客户端上的常规地图可视化组件切片图层。要在服务器端定义内置地图图块层，请按照下列步骤操作：</p>
                     <ol>
                        <li>
                           <p>登录到地图可视化组件管理页面（在“ <a href="introduction-to-map-visualization-component.html#GUID-2191CCA7-AC00-4E8C-9011-D27CE3E50CDC">登录到地图可视化组件管理”页面中进行了说明</a> ）。
                           </p>
                        </li>
                        <li>
                           <p>选择Admin选项卡，然后单击<span class="bold">Create tile layer</span> 。
                           </p>
                        </li>
                        <li>
                           <p>对于<span class="bold">Tile Layer Type</span> ，选择Oracle Maps，Google Maps，HERE Maps，OpenStreet Maps，Tomtom Maps或LocationBox Maps，然后单击<span class="bold">Next</span> 。
                           </p>
                        </li>
                        <li>
                           <p>为此外部切片图层（例如GOOGLE_MAP）提供名称，然后选择要存储切片图层定义的数据源。</p>
                        </li>
                        <li>
                           <p>设置从地图提供程序获取的许可证密钥和其他相关属性（详细信息可用于特定外部切片图层），然后单击“ <span class="bold">下一步”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>查看外部切片图层的XML描述。您可以单击“ <span class="bold">上一步”</span>转到<span class="bold">上一页</span>进行更改。
                           </p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">提交”</span>以创建切片图层。
                           </p>
                        </li>
                     </ol>
                     <p>在服务器端创建内置地图图块层后，您可以像使用MapViewer提供的任何其他图块层一样使用它。您无需添加任何<code class="codeph">&lt;script&gt;</code>标记来加载外部JavaScript库。
                     </p>
                     <p>以下代码片段显示了服务器端定义的Google地图图块层：</p><pre class="oac_no_warn" dir="ltr">var tileLayer = new OM.layer。TileLayer（“google1”，{dataSource：“mvdemo”，tileLayer：“GOOGLE_MAP”}）; map.addLayer（tileLayer）;</pre><div class="infoboxnote" id="GUID-104759F3-E7AA-41B2-A1E4-6BD76FA66399__GUID-E6D2FA26-99F4-4B37-A3BF-9FFE1CB5E2D2">
                        <p class="notep1">注意：</p>
                        <p>每个内置切片图层都有自己的特定属性。您可能需要向服务提供商咨询要求。</p>
                        <p>如果要使用Google地图，您可能需要提供以下属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">key</code> ：您从Google地图获取的密钥。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">client</code> ：客户端ID，您可以从Google地图获取的可选属性。提供客户端ID时仍需要密钥属性。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">lib_url</code> ：Google Maps API网址，例如： <code class="codeph">http://maps.google.com/maps/api/js?sensor=false</code> ： <code class="codeph">lib_url</code> 。如果未提供，将使用默认值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">version</code> ：当前API版本为3。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">mapTyelList</code> ，可以提供地图类型列表：MVGoogleTileLayer。TYPE_ROAD; MVGoogleTileLayer。TYPE_SHADED; MVGoogleTileLayer。TYPE_SATELLITE; MVGoogleTileLayer。TYPE_HYBRID。</p>
                           </li>
                           <li>
                              <p><code class="codeph">mapTypeVisible</code> ，布尔值<code class="codeph">true</code>或<code class="codeph">false</code>值，指示是否显示地图类型按钮以选择地图类型。
                              </p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-E3A7A484-B021-459C-8AE9-E7ABBDC04C94" title="应用程序可以将Google地图图块显示为内置地图图块图层，方法是在地图窗口中创建并添加MVGoogleTileLayer实例。">使用Google地图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JIMPV9945"></a><div class="props_rev_3"><a id="GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B" name="GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B"></a><h3 id="JIMPV-GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B" class="sect3"><span class="enumeration_section">4.4</span>将数据转换为球形墨卡托坐标系</h3>
               <div>
                  <p>流行的在线地图服务（如Google Maps）使用球形墨卡托投影作为其地图。</p>
                  <p>如果您使用的是早于11.1.0.7的Oracle数据库版本，并且需要在这样的图块层（例如Google地图图块层）之上叠加自己的空间数据，则必须设置数据库以正确处理坐标如果两个坐标系不相同，则该瓦片层的坐标系与您自己的数据坐标系之间的系统转换。</p>
                  <div class="infoboxnote" id="GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B__GUID-5D55AE6D-7924-4B42-A358-DF9F5209DD37">
                     <p class="notep1">注意：</p>
                     <p>要执行本节中的操作，您的数据库必须是版本10.2.0.1或更高版本。</p>
                  </div>
                  <p>谷歌地图使用球形墨卡托坐标系统（EPSG：3785），它也广泛用于商业API提供商，如雅虎！地图。在版本11.1.0.7之前，Oracle Spatial and Graph未提供此坐标系（SRID 3785）。为了使地图可视化组件，地图可视化组件和Oracle Spatial and Graph能够将您自己的数据转换为此坐标系，您必须首先将此坐标系定义添加到Oracle数据库中（如果尚未定义）。</p>
                  <p>要检查是否已定义此坐标系，可以输入以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT srid FROM mdsys.cs_srs WHERE srid = 3785;</pre><p>如果前面的语句返回一行，则无需执行本节中的操作。如果前面的语句未返回行，则必须执行本节中的操作，以便能够在切片图层顶部叠加您自己的空间数据。</p>
                  <p>跟着这些步骤：</p>
                  <ol>
                     <li>
                        <p>以特权用户身份连接到数据库，例如具有DBA角色的用户。</p>
                     </li>
                     <li>
                        <p>运行<code class="codeph">csdefinition.sql</code>脚本，如下所示。（将<span class="italic"><code class="codeph">$MAPVIEWER_HOME</code></span>替换<span class="italic"><code class="codeph">$MAPVIEWER_HOME</code></span>的WebLogic Server实例的根目录，并在一行中输入命令。）
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Linux： <span class="italic"><code class="codeph">$MAPVIEWER_HOME</code></span> <code class="codeph">/j2ee/home/applications/mapviewer/web/WEB-INF/admin/csdefinition.sql</code></p>
                           </li>
                           <li>
                              <p>Windows： <span class="italic"><code class="codeph">$MAPVIEWER_HOME</code></span> <code class="codeph">\j2ee\home\applications\mapviewer\web\WEB-INF\admin\csdefinition.sql</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>如有必要，创建转换规则以使Oracle Spatial and Graph在将数据从指定坐标系转换为Spherical Mercator系统时跳过数据转换。要了解是否需要创建此类转换规则，请参阅<a href="oracle-maps.html#GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A">创建转换规则以跳过基准转换</a> 。
                        </p>
                     </li>
                     <li>
                        <p>要么预先转换空间数据以获得更好的性能，要么让地图可视化组件在运行时（“动态”）转换数据。请注意，如果数据库版本早于10.2.0.4，则预转换是唯一的选择。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要将所有数据预转换为球形墨卡托坐标系，请对所有数据使用SDO_CS.TRANSFORM_LAYER过程，并使用转换后的数据进行映射。（请参阅<a href="../spatl/SDO_CS-reference.html#SPATL1076" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide中</span></a>的SDO_CS.TRANSFORM_LAYER参考部分。）
                              </p>
                           </li>
                           <li>
                              <p>要让地图可视化组件在运行时转换数据，请在使用数据进行映射之前不要转换数据。</p>
                           </li>
                        </ul>
                     </li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A">创建转换规则以跳过基准转换</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。">Oracle Maps</a></p>
                     </div>
                  </div>
               </div>
               <a id="JIMPV9947"></a><a id="JIMPV9946"></a><div class="props_rev_3"><a id="GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A" name="GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A"></a><h4 id="JIMPV-GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A" class="sect4"><span class="enumeration_section">4.4.1</span>创建转换规则以跳过基准转换</h4>
                  <div>
                     <p>空间数据通常位于基于椭球数据的坐标系中，例如WGS84或BNG。在这种情况下，Oracle Spatial and Graph默认情况下在将数据转换为Spherical Mercator系统时应用基准转换。这会在您的数据与Google地图其他地图服务图块之间引入少量不匹配或错误。如果要解决此问题，可以创建转换规则，告知Oracle Spatial and Graph在将数据从指定坐标系转换为Spherical Mercator系统时跳过数据转换。</p>
                     <p><a href="oracle-maps.html#GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A__BACCFFFA">示例4-1</a>显示了包含在<code class="codeph">csdefinition.sql</code>脚本中并创建此类转换规则的SQL语句。但是，如果<a href="oracle-maps.html#GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A__BACCFFFA">示例4-1中</a>显示的规则未涵盖空间数据的坐标系，则可以在这些规则未涵盖数据坐标系的情况下创建自己的规则。（有关创建坐标系转换规则的更多信息，请参阅<a href="../spatl/coordinate-systems-concepts.html#SPATL054" target="_blank"><span class="italic">Oracle Spatial and Graph Developer's Guide</span></a> 。）
                     </p>
                     <div class="example" id="GUID-46480CF4-3E2C-483C-ADD3-410D34E56C8A__BACCFFFA">
                        <p class="titleinexample">示例4-1 csdefinition.sql脚本中定义的转换规则</p><pre class="oac_no_warn" dir="ltr">- 创建tfm_plans，即转换规则。- 注意：这将导致错误的转换，因为它忽略了椭圆体和球体之间的基准面 - 基准面。但是，数据会在Google地图上更好地匹配。- 对于wgs84（8307），调用sdo_cs.create_pref_concatenated_op（83073785，'CONCATENATED OPERATION 8307 3785'，TFM_PLAN（SDO_TFM_CHAIN（8307,1000000000,4055,19847,3785）），NULL）; - 对于4326，EPSG等效于8307，调用sdo_cs.create_pref_concatenated_op（43263785，'CONCATENATED_OPERATION_4326_3785'，TFM_PLAN（SDO_TFM_CHAIN（4326,1000000000,4055,19847,3785）），NULL）; - 对于OS BNG，Oracle SRID 81989调用sdo_cs.create_pref_concatenated_op（819893785，'CONCATENATED OPERATION 81989 3785'，TFM_PLAN（SDO_TFM_CHAIN（81989，-19916,2000021,1000000000,4055,19847,3785）），NULL）; - 对于27700，EPSG等效于81989，调用sdo_cs.create_pref_concatenated_op（277003785，'CONCATENATED_OPERATION_27700_3785'，TFM_PLAN（SDO_TFM_CHAIN（27700，-19916,4277,1000000000,4055,19847,3785）），NULL）;承诺;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-DB268520-D5AC-4E32-A674-6FB17A21B72B" title="流行的在线地图服务（如Google Maps）使用球形墨卡托投影作为其地图。">将数据转换为球形墨卡托坐标系</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" name="GUID-F1647A8F-CA15-42D2-8037-09B0EA332611"></a><h3 id="JIMPV-GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" class="sect3"><span class="enumeration_section">4.5</span>使用动态图块层</h3>
               <div>
                  <p><span class="bold">动态切片图层</span>是在客户端定义的切片图层。
                  </p>
                  <p>动态切片图层与常规切片图层的区别在于以下方式：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>它由客户端应用程序定义，因此不需要在USER_SDO_CACHED_MAPS元数据中预定义。</p>
                     </li>
                     <li>
                        <p>服务器不缓存地图图块。</p>
                     </li>
                     <li>
                        <p>当提供地图图块图像URL生成功能时，它可以使用第三方地图服务。</p>
                     </li>
                  </ul>
                  <p>因此，动态图块层可以由客户端应用程序动态地定义，并且地图图像可以来自地图可视化组件服务器或来自第三方地图服务。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-9D06150F-FECD-4982-BDF5-C514F309A1AB">为动态磁贴层创建Universe和配置实例</a><br></li>
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-B8F07CD7-3B9B-4C8A-9CF1-2E247498ADC1">使用基本地图创建动态平铺图层</a><br></li>
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-D66B53D6-9F3D-45CA-92F5-4F5E40C0B9C7">使用预定义主题创建动态切片层</a><br></li>
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-B515D9FC-C99B-4660-B4C2-FFF5570E7054">直接使用空间表创建动态切片层</a><br></li>
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-66199642-3D36-47F4-BB45-02943A10EF42">使用第三方地图服务创建动态图块层</a><br></li>
                     <li class="ulchildlink"><a href="oracle-maps.html#GUID-31918E3F-96F8-41E6-B835-5796714DC54F">动态图块层用例</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-9B4DB4C9-5E4B-4776-92F6-84084F65784E" title="Oracle Maps是用于开发基于Web的高性能交互式映射应用程序的一套技术的名称。">Oracle Maps</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-9D06150F-FECD-4982-BDF5-C514F309A1AB" name="GUID-9D06150F-FECD-4982-BDF5-C514F309A1AB"></a><h4 id="JIMPV-GUID-9D06150F-FECD-4982-BDF5-C514F309A1AB" class="sect4"><span class="enumeration_section">4.5.1</span>为动态切片层创建Universe和配置实例</h4>
                  <div>
                     <p>在创建动态切片图层实例之前，必须为动态切片图层创建Universe和切片图层配置。</p>
                     <p>例如，假设已正确定义名为baseURL的变量（例如http://myapp.mycorp.com/mapviewer）并且指定的数据源存在。您必须创建切片图层配置实例和Universe实例。您可以使用Oracle Maps JavaScript API内置Universe或创建自己的Universe。为简单起见，此处使用内置Universe。</p>
                     <p>切片图层配置实例仅需要定义图像切片的尺寸，并且通常使用切片图像的宽度和高度的256个像素。以下代码段创建了此实例：</p><pre class="pre codeblock"><code>var myuniv = new OM.universe。LatLonUniverse（）; //内置Universe var myconfig = new OM.layer。TileLayerConfig（//图块层配置实例{tileImageWidth：256，tileImageHeight：256}）;</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" title="动态切片图层是在客户端定义的切片图层。">使用动态平铺层</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-B8F07CD7-3B9B-4C8A-9CF1-2E247498ADC1" name="GUID-B8F07CD7-3B9B-4C8A-9CF1-2E247498ADC1"></a><h4 id="JIMPV-GUID-B8F07CD7-3B9B-4C8A-9CF1-2E247498ADC1" class="sect4"><span class="enumeration_section">4.5.2</span>使用基本映射创建动态切片层</h4>
                  <div>
                     <p>使用基本地图创建动态切片图层是最简单的方法，因为地图内容已由服务器端地图可视化组件基本地图定义。跟着这些步骤。</p>
                     <ol>
                        <li>
                           <p>创建<code class="codeph">ServerMapRequest</code>实例并设置其属性。例如：</p><pre class="pre codeblock"><code>var req = new OM.server。ServerMapRequest（基本URL）; req.setProperties（{dataSource：“MVDEMO”，basemap：'demo_map'，//此basemap属性定义透明的地图内容：true，antialiase：“false”}）;</code></pre></li>
                        <li>
                           <p>创建一个包含此动态切片图层属性的对象。例如：</p><pre class="pre codeblock"><code>var dtl_props = {universe：myuniv，tileLayerConfig：myconfig，tileServerURL：baseURL +“/ omserver”，//地图图像来自此omserver的enableUTFGrid：true，// UTFGrid已启用enableUTFGridInfoWindow：true，//用于显示的信息窗口UTFGrid启用utfGridResolution：4 //一个网格单元代表16（4乘4）图像像素};</code></pre><p>在此示例中，变量<code class="codeph">tileServerURL</code>的字符串值指向地图可视化组件服务器。它可以与部署Web应用程序的服务器相同，也可以是其他地图可视化组件服务器实例。例如，它可以采用以下任一形式：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>来自相同的Oracle Maps服务器实例：例如：</p><pre class="pre codeblock"><code>var baseURL = document.location.protocol +“//”+ document.location.host +“/ mapviewer”;</code></pre></li>
                              <li>
                                 <p>来自另一个Oracle Maps服务器实例。例如：</p><pre class="pre codeblock"><code>var baseURL =“http://myapp.mycorp.com/mapviewer”;</code></pre></li>
                           </ul>
                        </li>
                        <li>
                           <p>创建动态切片图层。例如：</p><pre class="pre codeblock"><code>var dynamic_tilelayer_1 =新的OM.layer。DynamicTileLayer（“dtl1”，dtl_props，req）;</code></pre><p>动态切片图层从地图可视化组件的地图服务器（omserver）请求地图图像，该地图服务器呈现新的地图图像并且不会将图像缓存在磁盘上。</p>
                        </li>
                     </ol>
                     <p>从前面的例子中，注意给出了三个语句来创建动态切片层：（1）创建一个map请求实例（ <code class="codeph">ServerMapRequest</code> ）; （2）创建一个包含动态切片层相关属性的对象; （3）实例化动态切片图层。
                     </p>
                     <p>动态切片图层从地图可视化组件的地图服务器（ <code class="codeph">omserver</code> ）请求地图图像，该地图服务器呈现新的地图图像并且不会将图像缓存在磁盘上。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" title="动态切片图层是在客户端定义的切片图层。">使用动态平铺层</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-D66B53D6-9F3D-45CA-92F5-4F5E40C0B9C7" name="GUID-D66B53D6-9F3D-45CA-92F5-4F5E40C0B9C7"></a><h4 id="JIMPV-GUID-D66B53D6-9F3D-45CA-92F5-4F5E40C0B9C7" class="sect4"><span class="enumeration_section">4.5.3</span>使用预定义主题创建动态切片层</h4>
                  <div>
                     <p>另一种创建动态切片图层的方法是使用预定义的主题。跟着这些步骤。</p>
                     <ol>
                        <li>
                           <p>创建<code class="codeph">ServerMapRequest</code>实例并设置其属性。例如：</p><pre class="pre codeblock"><code>var req = new OM.server。ServerMapRequest（基本URL）; req.setProperties（{dataSource：“MVDEMO”，transparent：true，antialiase：“false”，}）; //下面的三个主题已经在元数据中定义。var t1 = new OM.server。ServerPredefinedTheme（ “THEME_DEMO_STATES”）; var t2 = new OM.server。ServerPredefinedTheme（ “THEME_DEMO_HIGHWAYS”）; var t3 = new OM.server。ServerPredefinedTheme（ “THEME_DEMO_CITIES”）; req.addThemes（[t1，t2，t3]）;</code></pre></li>
                        <li>
                           <p>创建一个包含此动态切片图层属性的对象。例如：</p><pre class="pre codeblock"><code>var dtl_props = {universe：myuniv，tileLayerConfig：myconfig，tileServerURL：baseURL +“/ omserver”，enableUTFGrid：true，enableUTFGridInfoWindow：true，utfGridResolution：4};</code></pre></li>
                        <li>
                           <p>创建动态切片图层。例如：</p><pre class="pre codeblock"><code>var dynamic_tilelayer_2 =新的OM.layer。DynamicTileLayer（“dtl2”，dtl_props，req）;</code></pre><p>动态切片图层从地图可视化组件的地图服务器（omserver）请求地图图像，该地图服务器呈现新的地图图像并且不会将图像缓存在磁盘上。</p>
                        </li>
                     </ol>
                     <p>在此方法中， <code class="codeph">ServerMapRequest</code>实例不是指定服务器基本映射，而是添加一些地图可视化组件服务器预定义主题。从实际角度来看，这允许客户端应用程序使用视图USER_SDO_THEMES中的服务器端定义的主题创建切片层。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" title="动态切片图层是在客户端定义的切片图层。">使用动态平铺层</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-B515D9FC-C99B-4660-B4C2-FFF5570E7054" name="GUID-B515D9FC-C99B-4660-B4C2-FFF5570E7054"></a><h4 id="JIMPV-GUID-B515D9FC-C99B-4660-B4C2-FFF5570E7054" class="sect4"><span class="enumeration_section">4.5.4</span>直接使用空间表创建动态切片层</h4>
                  <div>
                     <p>您可以通过创建<code class="codeph">ServerJBCTheme</code>实例并将它们添加到<code class="codeph">ServerMapRequest</code>实例中，直接将空间表用于动态切片图层。跟着这些步骤。
                     </p>
                     <ol>
                        <li>
                           <p>创造一种风格。例如：</p><pre class="pre codeblock"><code>var myc1 = new OM.style。颜色（{styleName：“mycolor1”，笔画：“＃333333”，strokeOpacity：1.0，填充：“＃F2EFE9”，fillOpacity：1.0}）;</code></pre></li>
                        <li>
                           <p>创建JDBC主题并设置其属性。空间表用于SQL查询语句中。该语句作为字符串类型变量，在<code class="codeph">OM.server.设置为属性<code class="codeph">OM.server.ServerJDBCTheme</code>实例。例如：</p><pre class="pre codeblock"><code>var jdbcTStates = new OM.server。ServerJDBCTheme（ 'theme_jdbc_states'）; jdbcTStates.setDataSourceName（ 'mvdemo'）; jdbcTStates.setSRID（ '8307'）; jdbcTStates.setGeometryColumnName（ '的geom'）; var sql ='select totpop，poppsqmi，state，state_abrv，geom from states'; //查询jdbcTStates.setQuery（sql）; //设置SQL字符串jdbcTStates.addInfoColumn（{column：'state_abrv'，name：'State'}）; jdbcTStates.addInfoColumn（{column：'totpop'，name：'Population'}）; jdbcTStates.addInfoColumn（{column：'poppsqmi'，name：'Pop。密度'}）; jdbcTStates.setRenderingStyleName（ 'mycolor1'）;</code></pre></li>
                        <li>
                           <p>创建<code class="codeph">ServerMapRequest</code>实例并设置其属性。例如：</p><pre class="pre codeblock"><code>var req = new OM.server。ServerMapRequest（基本URL）; req.setProperties（{dataSource：“MVDEMO”，transparent：true，antialiase：“false”，}）; req.addTheme（jdbcTStates）; req.addStyle（myc1）;</code></pre></li>
                        <li>
                           <p>创建一个包含此动态切片图层属性的对象。例如：</p><pre class="pre codeblock"><code>var dtl_props = {universe：myuniv，tileLayerConfig：myconfig，tileServerURL：baseURL +“/ omserver”，enableUTFGrid：true，enableUTFGridInfoWindow：true，utfGridResolution：4};</code></pre></li>
                        <li>
                           <p>创建动态切片图层。例如：</p><pre class="pre codeblock"><code>var dynamic_tilelayer_3 =新的OM.layer。DynamicTileLayer（“dtl3”，dtl_props，req）;</code></pre></li>
                     </ol>
                     <p>在此示例中，首先创建动态定义的样式和<code class="codeph">ServerJDBCTheme</code>对象。<code class="codeph">ServerJDBCTheme</code>可以使用SQL语句直接使用空间表。然后，这些表由<code class="codeph">ServerMapRequest</code>对象的<code class="codeph">addTheme</code>和<code class="codeph">addStyle</code>方法使用。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" title="动态切片图层是在客户端定义的切片图层。">使用动态平铺层</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-66199642-3D36-47F4-BB45-02943A10EF42" name="GUID-66199642-3D36-47F4-BB45-02943A10EF42"></a><h4 id="JIMPV-GUID-66199642-3D36-47F4-BB45-02943A10EF42" class="sect4"><span class="enumeration_section">4.5.5</span>使用第三方地图服务创建动态图块层</h4>
                  <div>
                     <p>另一种创建动态切片图层的方法是使用第三方地图服务。第三方的地图服务URL由客户提供的URL生成功能提供。跟着这些步骤。</p>
                     <ol>
                        <li>
                           <p>使用第三方地图服务提供商的规范，创建URL构造函数，用于通过动态切片图层构建地图图像请求。例如：</p><pre class="pre codeblock"><code>var urlb = function（w，h，minX，minY，maxX，maxY，options）{var str =“http://my.mycorp.com:8080/geoserver/ows？”; var optParams =“”; str = str +“request = getmap”+“＆bbox =”+ minX +“，”+ minY +“，”+ maxX +“，”+ maxY +“＆width =”+ w +“＆height =”+ h;如果（！OM.isNull（options））{for（选项中的var键）{optParams = optParams +“＆”+ key +“=”+ options [key];返回str + optParams; }</code></pre></li>
                        <li>
                           <p>创建一个包含此动态切片图层属性的对象。例如：</p><pre class="pre codeblock"><code>var dtl_props = {universe：myuniv，tileLayerConfig：myconfig，urlBuilder：urlb，urlBuilderOptions：{“layers”：“topp：states，sf：sfdem，sf：roads，sf：streams”，“CRS”：“CRS：84” ，“服务”：“WMS”，“版本”：“1.3.0”，“格式”：“image / png”}};</code></pre></li>
                        <li>
                           <p>创建动态切片图层。例如：</p><pre class="pre codeblock"><code>var dynamic_tilelayer_4 =新的OM.layer。DynamicTileLayer（“dl4”，dtl_props）;</code></pre></li>
                     </ol>
                     <p>在此示例中，动态切片图层实例（ <code class="codeph">dynamic_tilelayer_4</code> ）包含<code class="codeph">urlBuilder</code>属性以提供URL生成功能（ <code class="codeph">iurlb</code> ）。动态切片层将使用URL生成功能从指定的地图服务提供者获取图像切片。此示例使用第三方地图提供程序（ <code class="codeph">GeoServer</code>实例）来提供地图图像。
                     </p>
                     <p>可以在<code class="codeph">urlBuilderOptions</code>属性中提供其他地图服务提供程序所需的参数。此示例指定<code class="codeph">GeoServer</code>实例所需的几个附加参数（ <code class="codeph">layers</code> ， <code class="codeph">CRS</code> ， <code class="codeph">service</code> ， <code class="codeph">version</code>和<code class="codeph">format</code> ）。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" title="动态切片图层是在客户端定义的切片图层。">使用动态平铺层</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-31918E3F-96F8-41E6-B835-5796714DC54F" name="GUID-31918E3F-96F8-41E6-B835-5796714DC54F"></a><h4 id="JIMPV-GUID-31918E3F-96F8-41E6-B835-5796714DC54F" class="sect4"><span class="enumeration_section">4.5.6</span>动态图块层用例</h4>
                  <div>
                     <p>本主题描述了动态切片图层用例。</p>
                     <p>代码示例来自动态切片图层应用程序。该应用程序使用地图可视化组件服务器来提供地图图像切片。它直接通过<code class="codeph">OM.server.使用空间表<code class="codeph">OM.server.ServerJDBCTheme</code>实例。
                     </p>
                     <ol>
                        <li>
                           <p>使用<code class="codeph">getWhereClauseFromUI()</code>函数从应用程序的用户界面获取SQL查询的“where”子句，假设该函数已在该应用程序中正确定义并返回预期结果。例如：</p><pre class="pre codeblock"><code>var wherec = getWhereClauseFromUI（）;</code></pre></li>
                        <li>
                           <p>创建JDBC主题并设置其属性。例如：</p><pre class="pre codeblock"><code>var objJDBCTheme = new OM.server。ServerJDBCTheme（）; objJDBCTheme.setDataSourceName（ '风暴'）; objJDBCTheme.setSRID（ '3857'）; objJDBCTheme.setXColumnName（ 'long_loc'）; objJDBCTheme.setYColumnName（ 'lat_loc'）; objJDBCTheme.addInfoColumn（{column：'YEAR'，name：'Year'}）; objJDBCTheme.addInfoColumn（{column：'MONTH'，name：'Month'}）; objJDBCTheme.addInfoColumn（{column：'DAY'，name：'Day'}）; objJDBCTheme.addInfoColumn（{column：'STATE'，name：'State'}）; objJDBCTheme.addInfoColumn（{column：'LOSS'，name：'Loss'}）; objJDBCTheme.addInfoColumn（{column：'CROPLOSS'，name：'Crop_loss'}）; objJDBCTheme.addInfoColumn（{column：'FATALITIES'，name：'Fatalities'}）; objJDBCTheme.addInfoColumn（{column：'INJURIES'，name：'Injuries'}）; objJDBCTheme.setName（ 'theme_tornado'）; objJDBCTheme.setQuery（“SELECT s.geom.sdo_point.x long_loc，s.geom.sdo_point.y lat_loc，年，月，日，州，死亡，受伤，损失，来自tornado_3857的庄稼”+（wherec ===“ “？“”：wherec））; objJDBCTheme.setRenderingStyleName（ 'V.TORNADO'）;</code></pre></li>
                        <li>
                           <p>创建<code class="codeph">ServerMapRequest</code>实例并设置其属性。例如：</p><pre class="pre codeblock"><code>var req = new OM.server。ServerMapRequest（基本URL）; req.setProperties（{dataSource：'storm'，transparent：true，// map image设置为透明antialiase：“false”}）; req.addTheme（objJDBCTheme）;</code></pre></li>
                        <li>
                           <p>创建一个包含此动态切片图层属性的对象。例如：</p><pre class="pre codeblock"><code>var dtl_props = {universe：myuniv，tileLayerConfig：myconfig，tileServerURL：baseURL +“/ omserver”，enableUTFGrid：true，enableUTFGridInfoWindow：true，utfGridResolution：4};</code></pre></li>
                        <li>
                           <p>创建动态切片图层。例如：</p><pre class="pre codeblock"><code>var tornado_damage =新的OM.layer。DynamicTileLayer（“tornado_damage”，dtl_props，req）;</code></pre></li>
                     </ol>
                     <p>前面步骤中的代码示例说明了以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>地图应用程序从地图可视化组件服务器获取地图图像。因此，它可以使用地图可视化组件服务器中的所有可用功能。</p>
                        </li>
                        <li>
                           <p>地图图像被设置为透明的（即，对于属性的值<code class="codeph">transparent</code>是<code class="codeph">true</code> ）。当多个动态切片图层堆叠显示时，此设置可使所有非重叠特征可见。例如，当您在<code class="codeph">tornado_damage</code>动态切片图层上叠加<code class="codeph">hail_damage</code>动态切片图层时，当这些事件（如其名称所示）发生在非重叠位置时，您可能会在地图上看到这两个图层。此设置对包含线性和点要素的多个图层更有用。请注意，由于API允许您打开/关闭图层的可见性，因此您始终可以使感兴趣的图层突出显示并在应用程序中可见。
                           </p>
                        </li>
                        <li>
                           <p>动态切片图层还支持地图可视化组件服务器的<code class="codeph">UTFGrid</code>支持（具体而言，属性<code class="codeph">enableUTFGrid</code>的值设置为<code class="codeph">true</code> ， <code class="codeph">utfGridResolution</code>属性的分辨率值设置为4）。此设置指示地图可视化组件的API请求其他<code class="codeph">UTFGrid</code>文件作为其地图图块图像的伴随。它是一个JSON文件，它包含一个UTF编码的二维网格表，它与平铺图像匹配。它还包含每个网格单元的一些文本属性。
                           </p>
                           <p>当在图像像素处触发鼠标事件（例如，鼠标点击）时，可以定位其对应的网格单元，获得其UTF代码，并且随后可以检索与该网格单元的UTF代码相关联的文本属性。并显示在弹出信息窗口中。</p>
                           <p>该JSON文件中包含的文本属性是使用<code class="codeph">addInfoColumn()</code>方法指定的。这些文本属性将显示在信息窗口中，用于在地图上单击的像素。
                           </p>
                           <p>请注意，如果动态切片图层使用服务器端预定义几何主题，则必须在主题的<code class="codeph">&lt;hidden_info&gt;</code>元素中指定信息窗口的文本属性。这也适用于基于基础地图的动态切片图层，其中预定义主题可在地图可视化组件的基本地图定义中找到</p>
                           <p>分辨率值（例如， <code class="codeph">"utfGridResolution":4</code> ）表示网格单元的宽度和高度与其伴随地图图块图像像素进行比较。在此示例中， <code class="codeph">UTFGrid</code>数据集中的一个网格单元表示16个像素（4x4 = 16）。
                           </p>
                        </li>
                        <li>
                           <p>此动态切片层直接通过<code class="codeph">ServerJDBCTheme</code>使用空间表来定义其地图内容。在其嵌入式SQL语句中，客户端Web应用程序可以灵活地构造整个语句，包括要使用的表，要选择的列以及用于优化查询的“where”子句。在代码片段中，它假定客户端函数<code class="codeph">getWhereClauseFromUI()</code>仅构造JDBC主题定义中的“where”子句。
                           </p>
                        </li>
                     </ul>
                     <p>Oracle Maps JavaScript API支持的动态切片图层允许切片图层使用地图可视化组件服务器元数据，并且可以灵活地定义动态切片图层的方式以及客户端应用程序在何处获取其地图图像。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-maps.html#GUID-F1647A8F-CA15-42D2-8037-09B0EA332611" title="动态切片图层是在客户端定义的切片图层。">使用动态平铺层</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03637.PRKC-01000.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>PRKC-01000至PRKC-01218</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Error Messages"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Error Messages"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-error-messages.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T07:32:34-07:00"></meta>
      <meta name="dcterms.title" content="Database Error Messages"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95938-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="PRKA-02001.html" title="Previous" type="text/html"></link>
      <link rel="next" href="PRKE-01008.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ERRMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PRKA-02001.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="PRKE-01008.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库错误消息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PRKC-01000至PRKC-01218</li>
            </ol>
            <a id="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546" name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546"></a>
            
            <h2 id="ERRMG-GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546" class="sect2"><span class="enumeration_chapter">128</span> PRKC-01000至PRKC-01218</h2>
         </header>
         <div class="ind">
            <div>
               <dl>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-AD50111D-F23B-4402-8073-39865AEFE2F1"><!-- --></a> PRKC-01000：群集中未检测到活动节点</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法检索群集的活动节点列表。如果依赖于操作系统的集群件在集群中的一个或多个节点中无法正常运行，或者系统上未安装集群件，则可能会发生这种情况。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通过从ORACLE_HOME / bin运行“lsnodes”二进制文件来检查集群的状态，并查看它是否正确打印了节点列表。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E5DC13F1-5F9D-4B5B-B695-C81EC5608CBE"><!-- --></a> PRKC-01001：在缓冲区中提交命令时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这是一个内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-9CBEAF7A-5FBA-4451-A395-59F8561C8CA1"><!-- --></a> PRKC-01002：并非所有提交的命令都成功完成。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>某些提交的命令无法在指定的节点上完成，因为相关节点失败或节点之间的通信中断。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查所有指定的节点是否已启动并正在运行，或检查给定节点上的故障详细信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-88E14AA7-EC13-4F15-8556-359A3C961354"><!-- --></a> PRKC-01004：将文件复制到节点时出现问题</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从本地节点向群集中的一个或多个节点执行文件复制操作，并且这些复制文件操作中的一个或多个操作失败。可能的原因：1）对集群中节点的一个或多个文件复制操作失败。2）目标目录在一个或多个节点上没有用户的写权限。源文件不存在。3）UNIX平台上的一个或多个节点的'rcp'命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> 1）检查源文件是否存在。2）检查群集中的所有节点是否已启动。3）检查目标目录是否具有用户的写入权限。4）在基于UNIX的平台上，检查用户是否可以对所有节点执行'rcp'。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-73532258-4A34-4B1B-AEC3-EC00CA3D97B6"><!-- --></a> PRKC-01005：从节点中删除文件时出现问题</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从本地节点向群集中的一个或多个节点执行文件删除操作，并且这些文件删除操作中的一个或多个操作失败。可能的原因：1）一个或多个节点在操作期间失败。2）目标目录在一个或多个节点上没有用户的写许可权。3）源文件不存在。4）UNIX平台上的一个或多个节点的'rcp'命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以获取详细信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E4677D72-6DC2-4C5E-8645-B0B5731A857A"><!-- --></a> PRKC-01006：将文件移动到节点时出现问题</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从本地节点向群集中的一个或多个节点执行文件移动操作，其中一个或多个移动文件操作失败。可能的原因：1）一个或多个节点在操作期间失败。2）目标目录在一个或多个节点上没有用户的写许可权。3）源文件不存在。4）UNIX平台上的一个或多个节点的'rcp'命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以获取详细信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-3B64FFE4-2F1B-4360-B212-B95B509D26ED"><!-- --></a> PRKC-01007：在节点上创建目录时出现问题</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试目录创建从本地节点到群集中的一个或多个节点的操作，并且这些目录创建操作中的一个或多个失败。可能的原因：1）一个或多个节点在操作期间失败。2）目标目录在一个或多个节点上没有用户的写许可权。3）UNIX平台上的一个或多个节点的'rcp'命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以获取详细信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-B701252F-D431-4E3C-AC92-86314C65084C"><!-- --></a> PRKC-01009：无法在所有节点上启动服务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>服务无法在群集的一个或多个节点上启动。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查群集中的所有节点是否都已启动并查看集群件警报日志。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-208D74B7-A21A-46E5-880A-EDFF54E35FDC"><!-- --></a> PRKC-01010：无法在所有节点上停止服务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>服务无法在群集的一个或多个节点上停止。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查群集中的所有节点是否已启动且服务是否仍在故障节点上。查看集群件警报日志。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-2257CF69-6783-478C-A9A2-3AD7446BB7DC"><!-- --></a> PRKC-01011：无法从所有节点删除服务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法在群集的一个或多个节点上删除该服务。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查群集中的所有节点是否已启动且服务是否仍已注册。查看集群件警报日志。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-2C600C84-E1C3-4673-850A-320F4261B585"><!-- --></a> PRKC-01012：无法在所有节点上创建服务</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法在群集的一个或多个节点上创建服务。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查群集中的所有节点是否都已启动。查看集群件警报日志。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-8B142D28-0B7B-440E-94A4-DED81480EFF6"><!-- --></a> PRKC-01016：无法检索环境变量“{0}”的值，{1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>未定义必需的环境变量。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>定义环境变量。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-1D49D9C9-39C8-42FA-9DA6-34180043D683"><!-- --></a> PRKC-01017：重启GSD时出现问题</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法在本地节点上启动GSD（全局服务守护程序）。如果依赖于操作系统的集群件无法正常运行或已存在正在运行的GSD，则可能会发生这种情况。</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通过从ORACLE_HOME / bin运行“lsnodes”来检查集群件的状态。它应列出群集中的节点。尝试'gsdctl stop'然后再次'gsdctl start'。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E554F14D-CB5A-4F01-A58C-B9C34AEB88D3"><!-- --></a> PRKC-01018：获取协调节点时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>如果操作系统相关的集群件无法正常运行，则可能会发生这种情况。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在每个节点上使用“gsdctl stop”来停止GSD。在群集中的每个节点上使用“gsdctl start”。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-19DD656A-1A5F-4C80-B2D2-F8DAA22C3CF0"><!-- --></a> PRKC-01019：在节点{0}上创建GSD守护程序句柄时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>全局服务守护程序未在节点上运行。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用'gsdctl stat'检查守护程序的状态。使用'gsdctl start'启动它。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-D17800D4-6221-490E-BD32-D12EFF5D3F94"><!-- --></a> PRKC-01020：在远程节点{0}上执行操作时发生异常</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>当远程节点{0}上的全局服务守护程序未启动时，尝试在远程节点上执行操作。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用“gsdctl start”在远程节点上启动全局服务守护程序。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-12D7AF2C-CE4B-4BD9-95B4-77AF377605EE"><!-- --></a> PRKC-01021：集群件中存在问题</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法联系与操作系统相关的集群件。这可能是因为依赖于操作系统的集群件无法正常运行。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查依赖于操作系统的集群件的状态。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-19A9EF8E-5927-409E-B12E-CB033438AB27"><!-- --></a> PRKC-01022：无法获取{1}中节点{0}的节点名称</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法联系与操作系统相关的集群件。这可能是因为依赖于操作系统的集群件无法正常运行。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用'lsnodes -n'检查依赖于操作系统的集群件的状态。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-1FBBB5D3-3607-47F0-ABF0-BCC2B2C74E96"><!-- --></a> PRKC-01023：无效的IP地址格式：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>提供的IP地址既不是IPv4也不是IPv6有效地址。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保IP地址是有效的IPv4或IPv6地址。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-62B190F3-FC3C-4A24-B650-C32958A1A2C6"><!-- --></a> PRKC-01025：无法在文件路径{0}下创建文件，因为文件路径不可执行或不可写</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>指定文件路径的目录没有执行或写入权限。因此无法创建临时文件来测试文件路径是否在节点之间共享。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使指定文件路径的目录可执行且可写。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-57B10CB8-9ACA-4E7C-8FC2-24DA33AD4688"><!-- --></a> PRKC-01042：客户端请求的远程Shell {0}不安全，因此不再受支持。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试配置远程命令执行以使用指示的shell被拒绝，因为该shell不安全且不再受支持。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用SSH重试远程shell执行的配置。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-98266CB0-2B66-442D-931E-E552BE86B93A"><!-- --></a> PRKC-01043：客户端请求的Remote Copy命令{0}不安全，因此不再受支持。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试配置远程复制命令执行以使用指示的命令被拒绝，因为该命令不安全且不再受支持。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用SCP重试远程复制执行的配置。</p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-4A9C5FEE-835B-4274-B737-91907DCB7C54"><!-- --></a> PRKC-01044：使用shell {1}和{2}的节点{0}的远程命令执行设置检查失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试验证远程命令执行到指定节点的配置失败，因为未正确设置无密码安全Shell（SSH）和远程Shell（RSH）。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保正确配置了SSH或RSH，并且未提示输入密码或密钥，或打印额外的消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-3E427B44-D531-407C-842A-1C6B9037A7AC"><!-- --></a> PRKC-01141：版本{0}中不支持Oracle Restart。从版本{1}开始支持它</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这是一个内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-AFAC18D1-A81D-4483-8E8D-DA4E3C861C83"><!-- --></a> PRKC-01144：找不到文件“{0}”。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在文件系统中找不到该文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保文件存在于文件系统中。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-B947AED5-8363-46A0-AC7B-83C25BF49B50"><!-- --></a> PRKC-01148：无法获取本地计算机的主机名</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检索TCP / IP主机名时发生错误</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>更正随附的错误消息指示的问题。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-3728D3F9-453D-494F-BB83-2052EB4F3AF8"><!-- --></a> PRKC-01149：无法获得OCR位置</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检索OCR位置时发生错误，可能是由于OCR位置文件丢失或不正确，OCR配置不完整，或SRVM共享库丢失或不正确。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>验证是否已正确安装和配置Clusterware。验证ocr.loc文件是否在您的平台的适当位置存在且可读。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-18A199A5-6628-40DF-A9AC-4697EEEF4447"><!-- --></a> PRKC-01150：无法获取以下节点上使用的驱动器号：“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试在一个或多个节点上检索已使用的驱动器号时发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的消息并修复错误。消息通常涉及不可访问的节点，或者未在节点上运行的远程执行服务，或者在尝试在远程节点上使用远程执行服务时发出某些权限。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-AEB3EFAE-45CE-4A4B-9D41-83C683A2A3C9"><!-- --></a> PRKC-01151：给定路径“{0}”不存在</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>可能尚未创建指定的路径或指定了错误的路径。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>通过指定正确的现有路径，确保给定路径存在。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-56B28A0C-A4C6-407D-A18D-CD363B7ECD96"><!-- --></a> PRKC-01152：指定的路径“{0}”不是目录</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>指定的路径可能是文件，而不是目录，或者可能指定了错误的路径。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保指定作为有效目录路径的路径。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-FFEF71CD-113B-485B-B00C-4F0F8F762036"><!-- --></a> PRKC-01153：远程节点“{0}”上没有可用的目录来复制二进制RemoteExecService.exe</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>远程节点上的注册表项HKEY_LOCAL_MACHINE / System / CurrentControlSet / Services / OracleRemExecService的值定义的路径不可用，或者c：/ temp /目录在指定的远程节点上不可用或不可访问。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保远程节点上的所需路径可用。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-6605309A-AD4B-47C0-A08B-C2C24C9859CB"><!-- --></a> PRKC-01155：提供的节点列表只有一个条目，或者有多个条目与单个节点名条目重复</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>为共享路径检查提供的节点列表只是一个节点，或者列表包含同一个节点重复的条目。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>请为要在其上调用检查的群集提供正确的节点列表，确保至少有两个不同的条目。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-00D2C217-1488-40AA-938B-3E729E13A441"><!-- --></a> PRKC-01156：无法验证原始设备“{0}” - 详细信息：{1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>原始设备不是可以被操作系统打开和识别为“原始/字符”设备类型的现有设备。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保提供的值标识可以作为“原始/字符”设备类型打开的有效原始设备。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-5B1C1BD3-0FE2-4AD7-933F-D5714F66E23A"><!-- --></a> PRKC-01157：无法验证原始设备“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>原始设备不是可以被操作系统打开和识别为“原始/字符”设备类型的现有设备。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保提供的值标识可以作为“原始/字符”设备类型打开的有效原始设备。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-6A836A23-E28C-435E-A353-0DDB31672481"><!-- --></a> PRKC-01158：无法验证原始设备“{0}” - 详细信息：{1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>设备不是可以被操作系统打开和识别为“原始/字符”或“块”设备类型的现有设备。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保提供的值标识可以作为“原始/字符”或“块”设备类型打开的有效设备。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-1330662A-7BD3-47B5-9609-D270251C9FE6"><!-- --></a> PRKC-01159：无法验证设备“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>设备不是可以被操作系统打开和识别为“原始/字符”或“块”设备类型的现有设备。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保提供的值标识可以作为“原始/字符”或“块”设备类型打开的有效设备。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-27B58F22-F084-4667-A298-FB1CC35FD8FD"><!-- --></a> PRKC-01160：无法在以下节点上检索环境变量“{0}”的值：“{1}”，[{2}]</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>由于节点无法访问或节点上未运行远程执行服远程节点。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>查看随附的消息并做出相应的回应。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-4FB23E36-86D8-4BEF-8093-B020B0AD0CAC"><!-- --></a> PRKC-01161：无法在以下节点上检索Windows域：“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试在一个或多个节点上检索Windows域时发生错误。可能的原因包括：“ - 节点无法访问。- 节点上未运行远程执行服务。- 权限问题阻止在节点上使用远程执行服务。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>查看随附的消息并做出相应的回应。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-656EE2C5-D4B1-49A9-A786-C458A1279151"><!-- --></a> PRKC-01162：“{0}”不是文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>指示的对象应该是一个文件，但事实并非如此。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保指示的对象是文件而不是目录。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-67182B0C-8C73-4B7C-9920-2B8C40CD5216"><!-- --></a> PRKC-01163：{0}确定存储类型的有效性时发生异常。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>获取给定路径的存储类型时发生错误。可能已经传递了空参数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保本机api传递非null参数。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-FF4F64BA-0ECC-4FBB-9806-8A1F56C02F9A"><!-- --></a> PRKC-01164：无效的命令或参数</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这是一个内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-25C00F72-74B7-4138-8B1B-74C4870B5866"><!-- --></a> PRKC-01165：无法在节点“{0}”上设置Windows服务OracleRemoteExecService</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>在指定节点上设置OracleRemoteExecService时发生错误。“</p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>查看随附的消息并做出相应的回应。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-8A11EFBC-A68A-489C-B083-8408E0F3638C"><!-- --></a> PRKC-01166：存储部分共享。详情：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>提供的节点子集与本地节点共享给定的文件系统路径。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>将NFS文件系统挂载到不共享文件系统路径的节点上。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-8D4E332F-E7F5-432C-B46A-032962F810C1"><!-- --></a> PRKC-01167：无法将指定路径“{0}”解析为以下节点上的物理路径：“{1}”，[{2}]</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试解析一个或多个节点上的路径时发生错误，因为节点无法访问，远程执行服务未在节点上运行，或者尝试在远程节点上使用远程执行服务时出现某些权限。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">行动：</span>查看随附的消息并做出相应的回应。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-61B33AF1-9BE3-42A0-8AD6-7F4A3EE31265"><!-- --></a> PRKC-01168：提供的IP地址“{0}”无效或指定了未知的主机名</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>提供的字符串具有无效的IP地址格式或无法解析为已知主机名。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保IP地址具有有效的IPv4或IPv6地址格式，或者它已解析为已知主机名。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-3006ACD3-B219-4C0E-AE3D-810918F0BB0F"><!-- --></a> PRKC-01169：提供的IPv6地址“{0}”无效</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>提供的字符串没有正确的IPv6地址格式。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保IP地址具有有效的IPv6地址格式。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E9374AFC-0C0C-4DD7-8A2E-5CBC1CB54A31"><!-- --></a> PRKC-01170：IPv6前缀长度“{0}”超出允许的0到128范围</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>指定的IPv6前缀长度超出了允许的范围。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保IPv6前缀长度为0到128之间的整数。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-A27E52FE-0D6B-4481-8523-4B31E2802493"><!-- --></a> PRKC-01171：内部错误：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>发生内部错误。包含的值是内部标识符。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span> Oracle内部错误。联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-16481BB9-C424-41D5-83C3-25CFECF82B02"><!-- --></a> PRKC-01172：提供的IPv6前缀长度“{0}”不是整数</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>提供的IPv6前缀长度字符串不是整数。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保IPv6前缀长度为0到128之间的整数。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-9BF3ECF1-98CB-4462-9408-826CB433F352"><!-- --></a> PRKC-01173：VIP名称“{0}”未解析为与网络掩码或前缀长度{2}匹配的{1}地址</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span> VIP名称未解析为由网络掩码或前缀长度指定的IP地址类型。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保VIP名称解析为由网络掩码或前缀长度间接指定的IP地址类型。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-5A0FE4D3-4505-40F7-B64C-CAF1DD35636A"><!-- --></a> PRKC-01174：无法验证是否可以访问以下IP地址：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试访问指定的IP地址时发生网络错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>使用操作系统命令（如“ping”或“traceroute”）确定IP地址的可访问性。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-B0B612E4-5AC0-4B0E-945A-09DDD26FB1A4"><!-- --></a> PRKC-01175：无法将目录“{0}”复制到一个或多个节点</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试将文件系统目录从本地节点复制到群集中的一个或多个节点失败。可能的原因：1）复制操作期间一个或多个节点发生故障。2）用户对一个或多个节点上的给定目标目录没有写许可权。3）用户没有对要复制的文件或目录的读访问权。4）在UNIX或Linux平台上，'scp'命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以获取详细信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-AC9F7449-CDE2-4170-B021-2B78C4E09188"><!-- --></a> PRKC-01176：无法在节点“{1}”上列出目录“{0}”的内容</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试列出指定目录的内容失败。可能的原因： - 指定的目录不存在。- 操作期间一个或多个节点发生故障。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>查看随附的错误消息以获取详细信息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-C4FE4E6D-F1A7-48A8-9379-ADFBFB3702D6"><!-- --></a> PRKC-01177：指定版本“{0}”的格式无效。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试将目标版本与软件版本进行比较失败，因为指定的版本无效。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>指定版本号，该版本号是由句点分隔的一到五个十进制数字序列。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-7A537D1B-03E7-4BEB-8605-EAF24D854DC2"><!-- --></a> PRKC-01178：由于以下错误，无法执行命令“{0}”：\ n {1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>由于指示的错误，尝试执行命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查此消息中显示的错误文本并采取相应措施。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-5DD9F8A1-1CFC-4F53-BDAC-71A75152A06A"><!-- --></a> PRKC-01179：参数{0}值无效。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>这是一个内部错误。指定参数的值无效，null或空字符串。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-B686E8B8-5C96-42C4-AFF1-347CCDB734CF"><!-- --></a> PRKC-01180：无法验证路径是否在某些节点上共享</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从指定路径写入或列出内容失败，因为一个或多个节点未共享文件系统路径。可能的原因是： - 指定的目录不存在。- 用户对一个或多个节点上的给定文件系统路径没有写入权限。- 操作期间一个或多个节点发生故障。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保在所有节点上装入文件系统。查看随附的错误消息以获取详细信息，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-582C0F0D-46F0-4B27-A6EB-F9E21E92AE83"><!-- --></a> PRKC-01181：所有节点上的用户等效性检查失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试连接节点以使用RSH或SSH执行shell命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保以下内容： - 可以访问所有节点。- 在目标节点上正确配置了SSH或RSH。- 目标节点上的SSH守护程序处于活动状态。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-599E1993-637A-4025-BFFB-75811F595C41"><!-- --></a> PRKC-01182：无法验证节点是否可在网络上访问并正在运行</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试访问节点时发生网络错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保所有节点在网络上正常运行且可访问。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-0E98AB74-162F-4435-88D4-A195FA49589D"><!-- --></a> PRKC-01183：警告：无法删除在某些节点的共享路径下创建的每节点临时文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试从共享路径中删除临时文件失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查受影响节点的附带错误消息，并按指示删除关联的文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E606FAC6-3C93-4C09-B732-467338B889EE"><!-- --></a> PRKC-01184：文件“{0}”是不可读的文件</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>用户没有读取权限来打开文件。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>修改文件权限以使文件可读或从具有所需权限的操作系统用户标识执行命令。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-B5FEE866-8A3C-4BAF-9E44-A98FCCEC42E5"><!-- --></a> PRKC-01185：无法写入文件“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试写入给定文件失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>修改文件权限以使文件变为可写或从具有所需权限的操作系统用户标识执行命令。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-1C6E7B27-FA5D-4B09-8007-D4026BF8565D"><!-- --></a> PRKC-01186：无法传输目录“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>执行transfer directory命令时发生错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查随附的错误消息并按指示继续。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-38C9CD3C-D5E4-43BE-961E-98E4594093C9"><!-- --></a> PRKC-01187：不支持正则表达式“{0}”。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>发生内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-14278430-AFEC-4FD9-B617-561E83360C7E"><!-- --></a> PRKC-01188：目录“{0}”不是绝对路径名。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法创建指示的目录，因为它不是绝对路径。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保指定的目录是绝对路径。它应该是通用命名约定（UNC）路径或以驱动器号规范开头。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-54FC346D-8048-4D53-8AF5-E23575F34AA5"><!-- --></a> PRKC-01189：节点“{1}”上已存在目录“{0}”。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>无法在指定的节点上创建指示的目录，因为它已存在。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保指示的节点上不存在指示的目录路径。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-788E3577-013A-478D-8B6B-252F768A305B"><!-- --></a> PRKC-01190：无法更改节点上目录的权限：{0}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试更改一个或多个远程群集节点上的一个或多个目录的权限未正确完成。可能的原因：1）一个或多个节点在操作期间失败。2）对一个或多个节点的'chmod'命令失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决引发的问题并重试该命令。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-6FADC4DC-EEF7-4FD4-95C4-931B0D34F76F"><!-- --></a> PRKC-01191：使用shell {1}检查节点{0}的远程命令执行设置失败。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试验证远程命令执行到指定节点的配置失败，因为未正确设置无密码安全Shell（SSH）。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保正确配置了SSH，并且未提示输入密码或密钥，或打印额外的消息。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-CF257DE9-37E7-4042-BD3E-7B6B57CAC3DF"><!-- --></a> PRKC-01192：在网络{0}上找不到本地IP地址</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试选择IP地址失败，因为指示的网络上没有本地配置的IP地址。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>确保正确配置了在安装中选择的网络。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-F52A9C68-EAE5-44B2-97EC-41B04AC0F98F"><!-- --></a> PRKC-01193：检查节点“{0}”上的Oracle Restart配置时遇到故障</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>检索Oracle Restart配置时发生错误，可能是由于以下原因之一： -  Oracle Local Registry配置文件丢失或不正确。- 配置不完整。- 错误地安装了Grid Infrastructure。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>验证是否已正确安装和配置Oracle Grid Infrastructure。验证olr.loc文件是否存在于您的平台的适当位置并且可读。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-1135360A-E952-446F-9184-AEF2BEC8165D"><!-- --></a> PRKC-01194：尝试非法发布更新版本比较：版本{0}到版本{1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试比较指示的复合版本的版本更新版本被拒绝，因为主要版本不同。这是一个内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-FBCE8952-4091-419B-88F2-4CF3D0424FED"><!-- --></a> PRKC-01195：尝试非法发布更新修订版本比较：版本{0}到版本{1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试比较指示的复合版本的版本更新修订版本被拒绝，因为主要版本不同。这是一个内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E4FAEEE7-F610-468E-A652-918050271CA1"><!-- --></a> PRKC-01196：尝试非法发布更新修订版本比较：版本{0}到版本{1}</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试比较指示的复合版本的发行版更新修订版本被拒绝，因为版本更新版本不同。这是一个内部错误。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>联系Oracle支持服务。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-9E6FEB6B-7D34-4470-920D-98065A0A54AA"><!-- --></a> PRKC-01197：无法检索群集节点，因为用户缺少已配置的Oracle基本目录的读取，写入或执行权限。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试执行'olsnodes'二进制文件失败，因为用户没有Oracle基本目录的读，写和执行权限。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在Oracle基目录上为用户设置读取，写入和执行权限，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-BA3534F9-96EB-491B-AF9A-9FC5D0C05124"><!-- --></a> PRKC-01198：检查路径{0}是否在节点{1}上的ACFS上时出错</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试确定指定的路径是否在ACFS上失败。这可能是因为：1。Clusterware堆栈在指定节点上关闭。2。ASM下跌3。与路径关联的磁盘组不在线。4。路径未安装。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>执行与上述原因相对应的检查：1。确保Clusterware堆栈在指定节点上运行。2。确保ASM正在运行。3。确保与路径关联的磁盘组处于联机状态。4。确保文件系统已安装在节点上。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-455006F3-F01A-4E9B-BD10-25F86A7FF354"><!-- --></a> PRKC-01199：无法检查节点“{1}”上是否存在文件“{0}”</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指定的文件是否存在失败。在操作期间，一个或多个节点可能已失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。确保指示的节点上存在指示的文件。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-4061252E-0E5D-4A19-AC2A-B3A4D340CE62"><!-- --></a> PRKC-01200：无法检查节点“{1}”上的目录“{0}”是否为空</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指定的目录是否为空失败。在操作期间，一个或多个节点可能已失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。确保指示的节点上指示的目录为空。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-349227BD-3D71-4822-A699-BCB804D3C5CD"><!-- --></a> PRKC-01201：无法检查节点“{1}”上的目录“{0}”是否可写</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指定的目录是否可写失败。在操作期间，一个或多个节点可能已失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。确保指示的节点上指示的目录为空。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-A20D3CD3-3A0F-4581-AF15-CB635E9EBE21"><!-- --></a> PRKC-01210：无法检索节点“{1}”上路径“{0}”的详细信息</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试在指示的节点上检索指示路径的所有权和权限失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。确保指示的节点上存在指示的路径。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-A9C803DD-A076-42ED-A50C-61027DD6B2A7"><!-- --></a> PRKC-01211：无法在节点“{1}”上检索用户“{0}”的详细信息</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指示的节点上是否存在指示的用户失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-09D52F99-6983-466B-8A85-A4B3DD31B5FB"><!-- --></a> PRKC-01212：无法在节点“{1}”上检索具有UID“{0}”的用户的详细信息</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指示节点上是否存在指示的用户ID失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-C7B9B126-88DD-4B03-9785-7406E7947D2C"><!-- --></a> PRKC-01213：无法检索节点“{1}”上组“{0}”的详细信息</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指示的节点上是否存在指示的组失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-A07DA404-D4D4-45F2-84A0-4708E0A73437"><!-- --></a> PRKC-01214：无法在节点“{1}”上检索GID为“{0}”的组名称</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查指示的节点上是否存在指示的组ID失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-65E48BBE-FDC4-4ED9-8BF7-CC7F6346DCC6"><!-- --></a> PRKC-01215：无法检索分配的内存，因为本地节点不是容器</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检索本地节点的已分配内存失败，因为仅在Linux容器上支持该操作。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>在Linux容器中重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-E10AAAEF-8EB4-4A86-B4BB-0A0EA31C6800"><!-- --></a> PRKC-01216：无法检索为本地Linux Container分配的内存</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检索本地节点的已分配内存失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-535D5C94-2A15-42D9-956F-FE39F95CDF99"><!-- --></a> PRKC-01217：无法检查本地节点是否为Linux Container</dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>尝试检查本地节点是否为Linux容器失败。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>检查附带的错误消息以获取详细信息，解决报告的问题，然后重试该操作。

                     </p>
                     
                  </dd>
                  <dt class="dlterm"><a name="GUID-CA04A8F0-AA44-4215-A8D1-5865566FB546__GUID-4AB6070C-8B34-4C4B-981A-9E5FF5828884"><!-- --></a> PRKC-01218：版本“{0}”是潜在的未来版本，因为它大于当前版本“{1}”。
                  </dt>
                  <dd>
                     
                     <p>
                        <span class="keyword">原因：</span>请求的操作失败，因为指示的版本大于当前主页支持的版本。

                     </p>
                     
                  </dd>
                  <dd class="ddexpand">
                     
                     <p>
                        <span class="keyword">操作：</span>从支持指定版本的主页运行操作。

                     </p>
                     
                  </dd>
               </dl>
            </div>
         </div>
      </article>
   </body>
</html><html id="04192.loadjava-tool.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>loadjava工具</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96468-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ojvmtc-tool.html" title="Previous" type="text/html"></link>
      <link rel="next" href="dropjava-tool.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JJDEV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ojvmtc-tool.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="dropjava-tool.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="schema-objects-and-Oracle-JVM-utilities.html" property="item" typeof="WebPage"><span property="name">架构对象和Oracle JVM实用程序</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">loadjava工具</li>
            </ol>
            <a id="GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C" name="GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C"></a><a id="JJDEV10060"></a>
            
            <h2 id="JJDEV-GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C" class="sect2"><span class="enumeration_section">13.6</span> loadjava工具</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='loadjava-tool'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <div class="section">
                  <p><code class="codeph">loadjava</code>工具从文件创建模式对象并将它们加载到模式中。可以从Java源，类和数据文件创建模式对象。<code class="codeph">loadjava</code>工具还可以从SQLJ文件创建模式对象。
                  </p>
                  <p>您必须具有以下SQL数据库权限才能加载类：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">CREATE PROCEDURE</code>和<code class="codeph">CREATE TABLE</code>权限以加载到您的架构中。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CREATE ANY PROCEDURE</code>并<code class="codeph">CREATE ANY TABLE</code>权限以加载到另一个模式。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">oracle.aurora.security。JServerPermission.loadLibraryInClass.</code> <span class="italic"><code class="codeph">classname</code></span> 。
                        </p>
                     </li>
                  </ul>
                  <p>您可以从命令行或使用<code class="codeph">DBMS_JAVA</code>类中包含的<code class="codeph">loadjava</code>方法运行<code class="codeph">loadjava</code>工具。要从Java应用程序中运行该工具，请执行以下操作：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.loadjava（'... options ...“）;</pre><p>这些选项与可以使用<code class="codeph">loadjava</code>工具在命令行中指定的选项相同。用空格分隔每个选项。不要用逗号分隔选项。唯一的例外是<code class="codeph">-resolver</code>选项，它包含空格。对于<code class="codeph">-resolver</code> ，请在第一个输入参数中指定所有其他选项，在第二个参数中指定<code class="codeph">-resolver</code>选项，如下所示：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.loadjava（'.. options ...'，'resolver_options'）;</pre><p>不要指定<code class="codeph">-thin</code> ， <code class="codeph">-oci</code> ， <code class="codeph">-user</code>和<code class="codeph">-password</code>选项，因为它们与<code class="codeph">loadjava</code>命令行工具的数据库连接相关。输出被定向到<code class="codeph">stderr</code> 。设置<code class="codeph">serveroutput</code> ，并根据需要调用<code class="codeph">dbms_java.set_output</code> 。
                  </p>
                  <div class="infoboxnote" id="GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C__GUID-5EAE7131-E649-46B5-A8C7-BDA70396621B">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">loadjava</code>工具位于<code class="codeph">$ORACLE_HOME</code>下的<code class="codeph">bin</code>目录中。</p>
                  </div>
                  <p>就在<code class="codeph">loadjava</code>工具退出之前，它会检查处理是否成功。所有故障总结在以下标题之前：</p><pre class="oac_no_warn" dir="ltr">以下操作失败</pre><p>某些条件（例如丢失与数据库的连接）会导致<code class="codeph">loadjava</code>工具过早终止。使用以下语法显示这些错误：</p><pre class="oac_no_warn" dir="ltr">退出： <span class="italic">error_reason</span>
</pre><p>本节包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="loadjava-tool.html#GUID-B7B7DDC7-FFFE-40A8-ACDF-CA066A504063">loadjava工具语法</a></p>
                     </li>
                     <li>
                        <p><a href="loadjava-tool.html#GUID-B80B4492-55BB-4B75-919C-6E5962380710">loadjava工具参数摘要</a></p>
                     </li>
                     <li>
                        <p><a href="loadjava-tool.html#GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59">loadjava工具参数详细信息</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV13417"></a><div class="props_rev_3"><a id="GUID-B7B7DDC7-FFFE-40A8-ACDF-CA066A504063" name="GUID-B7B7DDC7-FFFE-40A8-ACDF-CA066A504063"></a><h3 id="JJDEV-GUID-B7B7DDC7-FFFE-40A8-ACDF-CA066A504063" class="sect3"><span class="enumeration_section">13.6.1</span> loadjava工具语法</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">loadjava</code>工具命令的语法如下：</p>
                     <div class="infoboxnote" id="GUID-B7B7DDC7-FFFE-40A8-ACDF-CA066A504063__GUID-894AB4C0-E4E4-410E-BCC2-A1DFB4EA4A9A">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">(* -)</code>选项是用于解析类引用的<code class="codeph">-genmissing</code>和<code class="codeph">-genmissingjar</code>选项的首选选项。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-genmissing</code>和<code class="codeph">-genmissingjar</code>选项不能在选项文件或选项表中使用。这些选项适用于要加载的所有类，不能仅用于特定类。
                              </p>
                           </li>
                        </ul>
                     </div><pre class="oac_no_warn" dir="ltr">loadjava {-user | -u} <span class="italic">user</span> [@ <span class="italic">database</span> ] [options] <span class="italic">file</span> .java | <span class="italic">文件</span> .class | <span class="italic">文件</span> .jar | <span class="italic">文件</span> .zip | <span class="italic">文件</span> .sqlj | <span class="italic">资源文件</span> |网址...[-casesensitivepub] [-cleargrants] [-debug] [-d | -definer] [-dirprefix <span class="italic">prefix</span> ] [-e | <span class="italic">-encoding encoding_scheme</span> ] [-fileout <span class="italic">file</span> ] [-f | -force] [-genmissing] [-genmissingjar <span class="italic">jar_file</span> ] [-g | -grant <span class="italic">user</span> [， <span class="italic">user</span> ] ...][-help] [-jarasresource] [-noaction] [-nosynonym] [-nousage] [-noverify] [-o | -oci | oci8] [-optionfile <span class="italic">file</span> ] [-optiontable <span class="italic">table_name</span> ] [-publish <span class="italic">package</span> ] [-pubmain <span class="italic">number</span> ] [-recursivejars] [-r | -resolve] [-R | -resolver“resolver_spec”] [-resolveonly] [-S | -schema <span class="italic">schema</span> ] [-stdout] [-stoponerror] [-s | -synonym] [-tableschema <span class="italic">schema</span> ] [-t | -瘦]</pre><pre class="oac_no_warn" dir="ltr">[-unresolvedok] [-v | -verbose] [-jarsasdbobjects] [-prependjarnames] [-nativecompile]</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13419"></a><a id="JJDEV13418"></a><div class="props_rev_3"><a id="GUID-B80B4492-55BB-4B75-919C-6E5962380710" name="GUID-B80B4492-55BB-4B75-919C-6E5962380710"></a><h3 id="JJDEV-GUID-B80B4492-55BB-4B75-919C-6E5962380710" class="sect3"><span class="enumeration_section">13.6.2</span> loadjava工具参数摘要</h3>
               <div>
                  <div class="section">
                     <p><a href="loadjava-tool.html#GUID-B80B4492-55BB-4B75-919C-6E5962380710__CACECBAH" title="表">表13-2</a>总结了<code class="codeph">loadjava</code>工具命令参数。如果多次运行<code class="codeph">loadjava</code>工具指定相同的文件和不同的选项，则在最近的调用中指定的选项保持不变。但是，有两个例外，如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果<code class="codeph">loadjava</code>工具因为与摘要表条目匹配而未加载文件，则命令行上的大多数选项都不会对架构对象产生影响。例外是<code class="codeph">-grant</code>和<code class="codeph">-resolve</code> ，它们始终生效。必须使用<code class="codeph">-force</code>选项指示<code class="codeph">loadjava</code>工具跳过摘要表查找。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-grant</code>选项是累积的。每次调用给定模式中给定类的<code class="codeph">loadjava</code>工具时指定的每个用户都具有<code class="codeph">EXECUTE</code>特权。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-B80B4492-55BB-4B75-919C-6E5962380710__CACECBAH">
                     <p class="titleintable">表13-2 loadjava参数摘要</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="loadjava参数摘要" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d49442e550">争论</th>
                              <th align="left" valign="bottom" width="72%" id="d49442e553">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e558" headers="d49442e550 ">
                                 <p><span class="italic"><code class="codeph">文件名</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e558 d49442e553 ">
                                 <p>您可以指定<code class="codeph">.java</code> ， <code class="codeph">.class</code> ， <code class="codeph">.sqlj</code> ， <code class="codeph">.ser</code> ， <code class="codeph">.jar</code> ， <code class="codeph">.zip</code>和资源文件名参数的任意数量和组合。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e586" headers="d49442e550 ">
                                 <p><code class="codeph">-proxy host：port</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e586 d49442e553 ">
                                 <p>如果您没有物理访问服务器主机或<code class="codeph">loadjava</code>客户端来加载类，资源和Java源，那么您可以使用带有<code class="codeph">loadjava</code>工具的HTTP URL来指定JAR，类文件或资源并加载该类来自远程服务器。 <code class="codeph">host</code>是主机名或地址， <code class="codeph">port</code>是代理服务器使用的端口。URL实现必须使<code class="codeph">loadjava</code>工具可以确定要加载的文件类型，即JAR，类，资源或Java源。例如：</p><pre class="oac_no_warn" dir="ltr">loadjava -u HR -r -v -proxy proxy_server：1020 http://my.server.com/this/is/the/path/my.jar密码： <span class="italic">密码</span>
</pre><p>在服务器内部使用URL支持时，您应具有访问远程源的适当Java权限。URL支持还包括<code class="codeph">ftp:</code>和<code class="codeph">file:</code> URL。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e622" headers="d49442e550 ">
                                 <p><code class="codeph">-casesensitivepub</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e622 d49442e553 ">
                                 <p>发布将创建区分大小写的名称。除非名称已全部为大写，否则通常需要引用PL / SQL中的名称。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e630" headers="d49442e550 ">
                                 <p><code class="codeph">-cleargrants</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e630 d49442e553 ">
                                 <p><code class="codeph">-grant</code>选项使<code class="codeph">loadjava</code>工具为类，源和资源授予<code class="codeph">EXECUTE</code>特权。但是，它不会导致它撤消任何权限。如果<code class="codeph">-cleargrants</code>指定，那么<code class="codeph">loadjava</code>工具将撤销其授予执行权限由指定的用户和角色之前执行权限的任何现有的补助<code class="codeph">-grant</code>操作。例如，如果意图是仅授予<code class="codeph">HR</code>执行权限，那么正确的选项是：</p><pre class="oac_no_warn" dir="ltr">-grant HR -cleargrants</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e662" headers="d49442e550 ">
                                 <p><code class="codeph">-debug</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e662 d49442e553 ">
                                 <p>打开SQL日志记录。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e670" headers="d49442e550 ">
                                 <p><code class="codeph">-definer</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e670 d49442e553 ">
                                 <p>默认情况下，类模式对象以其调用者的权限运行。此选项在类上赋予definer特权。此选项在概念上类似于UNIX <code class="codeph">setuid</code>工具。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e681" headers="d49442e550 ">
                                 <p><code class="codeph">-dirprefix</code> <span class="italic"><code class="codeph">prefix</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e681 d49442e553 ">
                                 <p>对于以<span class="italic"><code class="codeph">prefix</code></span>开头的任何文件或JAR条目，将在确定模式对象的名称之前从名称中删除此<span class="italic"><code class="codeph">prefix</code></span> 。对于类和源，架构对象的名称由其内容确定。因此，此选项仅对资源有效。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e700" headers="d49442e550 ">
                                 <p><code class="codeph">-encoding</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e700 d49442e553 ">
                                 <p>标识编译器的源文件编码，覆盖<code class="codeph">JAVA$OPTIONS</code>表中的匹配值（如果有）。值与<code class="codeph">javac -encoding</code>选项的值相同。如果未在命令行或<code class="codeph">JAVA$OPTIONS</code>表中指定编码，则假定编码为返回的值：</p><pre class="oac_no_warn" dir="ltr">System.getProperty（ “file.encoding的”）;</pre><p>此选项仅在加载源文件时相关。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e721" headers="d49442e550 ">
                                 <p><code class="codeph">-fileout</code> <span class="italic"><code class="codeph">file</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e721 d49442e553 ">
                                 <p>显示指定文件的所有消息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e732" headers="d49442e550 ">
                                 <p><code class="codeph">-力</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e732 d49442e553 ">
                                 <p>强制加载文件，即使它们与摘要表条目匹配。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e740" headers="d49442e550 ">
                                 <p><code class="codeph">-genmissing</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e740 d49442e553 ">
                                 <p>确定要求<code class="codeph">loadjava</code>工具处理的类引用的类和方法。调用在数据库或文件参数中找不到的任何类<a id="d49442e750" class="indexterm-anchor"></a> <span>缺课</span> 。此选项为包含所有引用方法的缺失类生成虚拟定义。然后，它将生成的类加载到数据库中。此处理在类解析之前发生。
                                 </p>
                                 <p>因为从源检测引用比检测类文件中的引用更困难，并且因为源通常不用于分发库，所以<code class="codeph">loadjava</code>工具不会尝试对源文件执行此处理。
                                 </p>
                                 <p>加载缺失类的模式将是<code class="codeph">-user</code>选项指定的模式，即使在某些其他模式中创建引用类时也是如此。将标记创建的类，以便工具可以识别它们。特别是，这是必需的，以便验证者可以识别生成的类。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e767" headers="d49442e550 ">
                                 <p><code class="codeph">-genmissingjar</code> <span class="italic"><code class="codeph">jar_file</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e767 d49442e553 ">
                                 <p>此选项执行与<code class="codeph">-genmissing</code>相同的操作。此外，它还会创建一个JAR文件<span class="italic"><code class="codeph">jar_file</code></span> ，该文件包含任何生成的类的定义。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e785" headers="d49442e550 ">
                                 <p><code class="codeph">-grant</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e785 d49442e553 ">
                                 <p>将已加载类的<code class="codeph">EXECUTE</code>特权授予列出的用户。可以指定任何数量和组合的用户名，用逗号分隔，但不能用空格分隔。
                                 </p>
                                 <p>授予另一个模式中的对象的<code class="codeph">EXECUTE</code>特权要求<code class="codeph">WITH GRANT</code>选项授予原始的<code class="codeph">CREATE PROCEDURE</code>特权。
                                 </p>
                                 <p><span class="bold">注意：</span></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">-grant</code>是累积选项。用户将添加到具有<code class="codeph">EXECUTE</code>特权的列表中。要删除权限，请使用<code class="codeph">-cleargrants</code>选项。
                                       </p>
                                    </li>
                                    <li>
                                       <p>架构名称应以大写形式使用。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e825" headers="d49442e550 ">
                                 <p><code class="codeph">-救命</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e825 d49442e553 ">
                                 <p>显示有关如何使用<code class="codeph">loadjava</code>工具及其选项的用法消息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e836" headers="d49442e550 ">
                                 <p><code class="codeph">-jarasresource</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e836 d49442e553 ">
                                 <p>而不是解压缩JAR文件并在其中加载每个类，而是将整个JAR文件作为资源加载到模式中。<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, &quot;If you load a JAR file in this manner, then you cannot use it for resolution or execution.&quot;)"><sup>脚1</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e850" headers="d49442e550 ">
                                 <p><code class="codeph">-noaction</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e850 d49442e553 ">
                                 <p>不对文件采取任何操作。操作包括创建架构对象，授予执行权限等。典型用法是在选项文件中禁止在JAR中创建特定类。在命令行上使用时，除非在选项文件中被覆盖，否则将导致<code class="codeph">loadjava</code>工具忽略所有文件。除了仍将检查JAR文件以确定它们是否包含<code class="codeph">META-INF/loadjava-options</code>条目。如果是，则处理选项文件。选项文件中的<code class="codeph">-action</code>选项将覆盖命令行中指定的<code class="codeph">-noaction</code>选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e870" headers="d49442e550 ">
                                 <p><code class="codeph">-norecursivejars</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e870 d49442e553 ">
                                 <p>将其他JAR文件中包含的JAR文件视为资源。这是默认行为。此选项用于覆盖<code class="codeph">-recursivejars</code>选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e881" headers="d49442e550 ">
                                 <p><code class="codeph">-nosynonym</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e881 d49442e553 ">
                                 <p>不要为类创建公共同义词。这是默认行为。这会覆盖<code class="codeph">-synonym</code>选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e892" headers="d49442e550 ">
                                 <p><code class="codeph">-nousage</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e892 d49442e553 ">
                                 <p>如果未指定任何选项或指定了<code class="codeph">-help</code>选项，则禁止给出使用消息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e903" headers="d49442e550 ">
                                 <p><code class="codeph">-noverify</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e903 d49442e553 ">
                                 <p>导致在没有字节码验证的情况下加载类。 <code class="codeph">oracle.aurora.security.JServerPermission(Verifier) must be granted</code>使用此选项。为了有效，此选项必须与<code class="codeph">-resolve</code>一起使用。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e917" headers="d49442e550 ">
                                 <p><code class="codeph">-oci | -oci8</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e917 d49442e553 ">
                                 <p>指示<code class="codeph">loadjava</code>工具使用JDBC Oracle调用接口（OCI）驱动程序与数据库通信。 <code class="codeph">-oci</code>和<code class="codeph">-thin</code>是互斥的。如果两者都未指定，则默认使用<code class="codeph">-oci</code> 。选择<code class="codeph">-oci</code>意味着<code class="codeph">-user</code>值的语法。您无需提供URL。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e944" headers="d49442e550 ">
                                 <p><code class="codeph">-optionfile</code> <span class="italic"><code class="codeph">file</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e944 d49442e553 ">
                                 <p>可以使用<code class="codeph">loadjava</code>选项提供文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e959" headers="d49442e550 ">
                                 <p><code class="codeph">-optiontable</code> <span class="italic"><code class="codeph">tablename</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e959 d49442e553 ">
                                 <p>此选项与<code class="codeph">-optionfile</code>类似，不同之处在于模式和选项的源是SQL表而不是文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e973" headers="d49442e550 ">
                                 <p><code class="codeph">-publish</code> <span class="italic"><code class="codeph">package</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e973 d49442e553 ">
                                 <p>该<span class="italic"><code class="codeph">package</code></span>由<code class="codeph">loadjava</code>工具创建或替换。符合条件的方法的包装将在此包中定义。通过使用选项文件，可以指示<code class="codeph">loadjava</code>工具的单个调用来创建多个包。每个包都将进行与方法相同的名称转换。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e994" headers="d49442e550 ">
                                 <p><code class="codeph">-pubmain</code> <span class="italic"><code class="codeph">number</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e994 d49442e553 ">
                                 <p>应用于具有单个参数的方法的特殊情况，该参数的类型为<code class="codeph">java.lang.String[]</code> 。将创建SQL过程或函数的多个变体，每个变体都采用不同数量的<code class="codeph">VARCHAR</code>类型的参数。特别是，创建变体时，所有参数都包括<span class="italic"><code class="codeph">number</code></span> 。默认值为<code class="codeph">3</code> 。此选项适用于<code class="codeph">main</code> ，以及任何只有一个<code class="codeph">java.lang.类型参数的方法<code class="codeph">java.lang.String[]</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1025" headers="d49442e550 ">
                                 <p><code class="codeph">-recursivejars</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1025 d49442e553 ">
                                 <p>通常，如果<code class="codeph">loadjava</code>工具遇到扩展名为<code class="codeph">.jar</code>的JAR中的条目，则会将该条目作为资源加载。如果指定了此选项，则<code class="codeph">loadjava</code>工具将处理包含的JAR文件，就好像它们是顶级JAR文件一样。也就是说，它将读取其条目和加载类，源和资源。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1042" headers="d49442e550 ">
                                 <p><code class="codeph">-解决</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1042 d49442e553 ">
                                 <p>必要时编译，并在加载命令行上的所有类之后解析类中的外部引用。如果未指定<code class="codeph">-resolve</code>选项，则<code class="codeph">loadjava</code>工具将加载文件，但不会编译或解析它们。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1056" headers="d49442e550 ">
                                 <p><code class="codeph">-resolver</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1056 d49442e553 ">
                                 <p>指定显式解析程序规范，该规范绑定到新加载的类。如果未指定<code class="codeph">-resolver</code> ，则使用默认的解析程序规范，其中包括当前用户的模式和<code class="codeph">PUBLIC</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1070" headers="d49442e550 ">
                                 <p><code class="codeph">-resolveonly</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1070 d49442e553 ">
                                 <p>使<code class="codeph">loadjava</code>工具跳过初始创建步骤。它仍将执行授权，解析，创建同义词等。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1081" headers="d49442e550 ">
                                 <p><code class="codeph">-schema</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1081 d49442e553 ">
                                 <p>指定创建架构对象的架构。如果未指定，则使用<code class="codeph">-user</code>模式。要在不属于您自己的架构中创建架构对象，您必须具有以下权限：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">CREATE TABLE</code>或<code class="codeph">CREATE ANY TABLE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CREATE INDEX</code>或<code class="codeph">CREATE ANY INDEX</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">选择任何表格</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">更新任何表格</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">插入任何表</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">删除任何表格</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">创建程序或创建任何程序</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">更改任何程序</code></p>
                                    </li>
                                 </ul>
                                 <p>最后，您必须具有<code class="codeph">JServerPermission loadLibraryInClass</code> 。
                                 </p>
                                 <p><span class="bold">注意：</span>上述权限允许被授权者在除SYS模式之外的任何模式中创建和操作表。出于安全原因，Oracle建议您仅谨慎使用这些设置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1140" headers="d49442e550 ">
                                 <p><code class="codeph">-stdout</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1140 d49442e553 ">
                                 <p>导致输出定向到<code class="codeph">stdout</code> ，而不是<code class="codeph">stderr</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1154" headers="d49442e550 ">
                                 <p><code class="codeph">-stoponerror</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1154 d49442e553 ">
                                 <p>通常，如果<code class="codeph">loadjava</code>工具处理文件时发生错误，它将发出消息并继续处理其他类。发生错误时，此选项会停止。此外，它还报告适用于Java对象的所有错误，并包含在正在加载类的模式的<code class="codeph">USER_ERROR</code>表中。除此之外不报告<code class="codeph">ORA-29524</code>错误。这些是无法解析类时生成的错误，因为无法解析引用的类。因此，这些错误是导致被引用类无法解决的任何问题的次要影响。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1171" headers="d49442e550 ">
                                 <p><code class="codeph">-代名词</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1171 d49442e553 ">
                                 <p>为加载的类创建<code class="codeph">PUBLIC</code>同义词，使它们可以在加载它们的模式之外访问。要指定此选项，您必须具有<code class="codeph">CREATE PUBLIC SYNONYM</code>权限。如果为源文件指定了<code class="codeph">-synonym</code> ，那么从源文件编译的类将被视为已使用<code class="codeph">-synonym</code>加载。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1192" headers="d49442e550 ">
                                 <p><code class="codeph">-tableschema</code> <span class="italic"><code class="codeph">schema</code></span></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1192 d49442e553 ">
                                 <p>在指定的模式中创建<code class="codeph">loadjava</code>工具内部表，而不是在Java文件目标模式中创建。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1206" headers="d49442e550 ">
                                 <p><code class="codeph">-瘦</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1206 d49442e553 ">
                                 <p>指示<code class="codeph">loadjava</code>工具使用JDBC Thin驱动程序与数据库通信。选择<code class="codeph">-thin</code>意味着<code class="codeph">-user</code>值的语法。您需要通过<code class="codeph">-user</code>选项指定适当的URL。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1226" headers="d49442e550 ">
                                 <p><code class="codeph">-unresolvedok</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1226 d49442e553 ">
                                 <p>与<code class="codeph">-resolve</code>结合使用时，将忽略未解决的错误。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1237" headers="d49442e550 ">
                                 <p><code class="codeph">-用户</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1237 d49442e553 ">
                                 <p>指定用户名，密码和数据库连接字符串。这些文件将加载到此数据库实例中。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1245" headers="d49442e550 ">
                                 <p><code class="codeph">-verbose</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1245 d49442e553 ">
                                 <p>指示<code class="codeph">loadjava</code>工具在运行时显示详细的状态消息。使用<code class="codeph">-verbose</code>选项了解<code class="codeph">loadjava</code>工具何时未加载文件，因为它与摘要表条目匹配。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1262" headers="d49442e550 ">
                                 <p><code class="codeph">-jarsasdbobjects</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1262 d49442e553 ">
                                 <p>指示当前<code class="codeph">loadjava</code>工具命令处理的JAR将作为数据库驻留JAR存储在数据库中。<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, &quot;If you load a JAR file in this manner, then you can use it for resolution or execution.&quot;)"><sup>脚2</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d49442e1279" headers="d49442e550 ">
                                 <p><code class="codeph">-prependjarnames</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d49442e1279 d49442e553 ">
                                 <p>与<code class="codeph">-jarsasdbobjects</code>选项一起使用。此选项允许来自不同JAR的具有相同名称的类在同一模式中共存。它通过在类名称前加上JAR名称的版本来生成数据库对象的唯一名称。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>如果以这种方式加载JAR文件，则<span class="italic">无法</span>将其用于解析或执行。
                     </p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>如果以这种方式加载JAR文件，则<span class="italic">可以</span>将其用于解析或执行。
                     </p>
                  <p></p>
               </div>
            </div><a id="JJDEV13421"></a><a id="JJDEV13422"></a><a id="JJDEV13423"></a><a id="JJDEV13424"></a><a id="JJDEV13425"></a><a id="JJDEV13426"></a><a id="JJDEV13427"></a><a id="JJDEV13428"></a><a id="JJDEV13429"></a><a id="JJDEV13430"></a><a id="JJDEV13431"></a><a id="JJDEV13420"></a><div class="props_rev_3"><a id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59" name="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59"></a><h3 id="JJDEV-GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59" class="sect3"><span class="enumeration_section">13.6.3</span> loadjava工具参数详细信息</h3>
               <div>
                  <div class="section">
                     <p>本节描述了一些<code class="codeph">loadjava</code>工具参数的详细信息，这些参数的行为比<span class="italic">loadjava Argument Summary</span>表中包含的摘要描述更复杂。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-6D79FE88-F890-4643-855E-929DB0B80C81">文件名</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您可以根据需要以任何顺序指定<code class="codeph">.class</code> ， <code class="codeph">.java</code> ， <code class="codeph">.sqlj</code> ， <code class="codeph">.jar</code> ， <code class="codeph">.zip</code>和资源文件。如果指定JAR或ZIP文件，则<code class="codeph">loadjava</code>工具将处理JAR或ZIP中的文件。没有JAR或ZIP架构对象。如果JAR或ZIP包含另一个JAR或ZIP，则<code class="codeph">loadjava</code>工具不会处理它们。
                     </p>
                     <p>加载文件的最佳方法是将它们放入JAR或ZIP中，然后加载存档。加载存档可避免资源架构对象命名并发症。如果您有一个与Java Development Kit（JDK）一起使用的JAR或ZIP，那么您可以确保使用<code class="codeph">loadjava</code>工具加载它也可以工作，而无需了解有关资源架构对象命名的任何信息。
                     </p>
                     <p>模式对象名称与文件名不同， <code class="codeph">loadjava</code>工具以不同方式命名不同类型的模式对象。由于类文件是自识别的，因此开发人员看不到由<code class="codeph">loadjava</code>工具完成的类文件名到模式对象名的映射。源文件名映射对开发人员也是不可见的。<code class="codeph">loadjava</code>工具为模式对象提供文件中定义的第一个类的完全限定名称。JAR和ZIP文件还包含其文件的名称。
                     </p>
                     <p>但是，资源文件不是自我识别的。<code class="codeph">loadjava</code>工具从您作为参数提供的文字名称生成Java资源模式对象名称。由于类使用资源模式对象，并且正确的资源规范并不总是直观的，因此在命令行上正确指定资源文件名非常重要。
                     </p>
                     <p>正确加载单个资源文件的最佳方法是从包树顶部运行<code class="codeph">loadjava</code>工具，并指定相对于该目录的资源文件名。
                     </p>
                     <div class="infoboxnote" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-D985CAE7-1A2E-47DB-AD2D-434F119B6C5E">
                        <p class="notep1">注意：</p>
                        <p>包树的顶部是您将在<code class="codeph">CLASSPATH</code>命名的目录。</p>
                     </div>
                     <p>如果您不想遵循此规则，请观察后面的资源文件命名的详细信息。加载资源文件时， <code class="codeph">loadjava</code>工具会从资源文件名生成资源架构对象名，如命令行中字面指定的那样。例如，如果您键入：</p><pre class="oac_no_warn" dir="ltr">％cd / home / HR / javastuff％loadjava options alpha / beta / x.properties％loadjava options /home/HR/javastuff/alpha/beta/x.properties</pre><p>虽然您已使用相对路径名和绝对路径名指定了相同的文件，但<code class="codeph">loadjava</code>工具会创建两个架构对象， <code class="codeph">alpha/beta/x.properties</code>和<code class="codeph">ROOT/home/HR/javastuff/alpha/beta/x.properties</code> 。资源架构对象的名称是根据输入的文件名生成的。
                     </p>
                     <p>类可以相对或绝对地引用资源文件。要确保<code class="codeph">loadjava</code>工具和类加载器对模式对象使用相同的名称，请在命令行中输入名称，该类将传递给<code class="codeph">getResource()</code>或<code class="codeph">getResourceAsString()</code> 。
                     </p>
                     <p>您可以在JAR中加载资源文件，而不是记住类是使用相对或绝对资源名称以及更改目录以便在命令行中输入正确的名称，如下所示：</p><pre class="oac_no_warn" dir="ltr">％cd / home / HR / javastuff％jar -cf alpharesources.jar alpha / * .properties％loadjava options alpharesources.jar</pre><p>要进一步简化该过程，请将类和资源文件放在JAR中，这使得以下调用等效：</p><pre class="oac_no_warn" dir="ltr">％loadjava options alpha.jar％loadjava options /home/HR/javastuff/alpha.jar</pre><p>前面的<code class="codeph">loadjava</code>工具命令暗示您可以使用任何路径名来加载JAR文件的内容。即使您运行冗余命令， <code class="codeph">loadjava</code>工具也会从摘要表中意识到它不需要加载文件两次。这意味着重新加载JAR文件并不像看起来那么耗时，即使在<code class="codeph">loadjava</code>工具的不同调用之间几乎没有文件发生变化也是<code class="codeph">loadjava</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-FC65D046-17AC-4D7F-98D4-80462F97294A">定义者</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">{-definer | -d}</pre><p>此选项与存储过程中的定义者权限相同，并且在概念上类似于UNIX <code class="codeph">setuid</code>工具。但是，您可以将<code class="codeph">-definer</code>选项应用于各个类，而<code class="codeph">setuid</code>则适用于完整的程序。而且，不同的定义者可能具有不同的特权。由于应用程序可以包含许多类，因此必须小心应用<code class="codeph">-definer</code>以获得所需的结果。也就是说，类以他们需要的权限运行，但不会更多。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-56A46E7F-B80C-40A3-B67B-57AF96027F24">noverify</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">[-noverify]</pre><p>此选项导致加载类而不进行字节码验证。 <code class="codeph">oracle.aurora.security.必须授予JServerPermission(Verifier)</code>才能运行此选项。此外，此选项必须与<code class="codeph">-resolve</code>一起使用。
                     </p>
                     <p>验证程序确保无法加载错误形成的Java二进制文件以在服务器上运行。如果您知道要加载的JAR或类是有效的，那么使用此选项将加快与<code class="codeph">loadjava</code>工具关联的进程。在验证过程中，将针对解释性能进行一些特定于Oracle数据库的优化。因此，使用此选项可能会对应用程序的解释性能产生不利影响。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-8EA079D1-2A90-44EA-9004-3236FCF17416">optionfile</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">[-optionfile &lt;file&gt;]</pre><p>使用此选项可以指定具有可以使用<code class="codeph">loadjava</code>工具指定的不同选项的文件。在处理任何其他<code class="codeph">loadjava</code>工具选项之前， <code class="codeph">loadjava</code>工具会读取和处理此文件。该文件可以包含一行或多行，每行包含一个模式和一系列选项。每行必须以换行符（ <code class="codeph">\n</code> ）结束。
                     </p>
                     <p>对于<code class="codeph">loadjava</code>工具处理的每个文件或JAR条目，将根据模式检查要创建的模式对象的长名称。模式可以以通配符（ <code class="codeph">*</code> ）结尾以指示任意字符序列，或者它们必须与名称完全匹配。
                     </p>
                     <p>在行的其余部分提供了要应用于匹配Java模式对象的选项。选项附加到命令行选项，它们不会替换它们。如果多个行与名称匹配，则匹配的行按照模式的长度排序，最短的行首先排序，并附加每行的选项。通常， <code class="codeph">loadjava</code>工具选项不是累积的。相反，后面的选项会覆盖之前的选项这意味着在具有较长图案的线上指定的选项将覆盖具有较短图案的线。
                     </p>
                     <p>该文件由<code class="codeph">java.io.解析。StreamTokenizer</code> 。
                     </p>
                     <p>您可以在此文件中使用Java注释。行注释以<code class="codeph">#</code>开头。空行被忽略。引号字符是双引号（ <code class="codeph">"</code> ）。也就是说，包含空格的选项应该用双引号括起来。某些选项（如<code class="codeph">-user</code>和<code class="codeph">-verbose</code> ）会影响<code class="codeph">loadjava</code>工具的整体处理，而不会影响为各个Java模式对象执行的操作。如果这些选项出现在选项文件中，则会被忽略。
                     </p>
                     <p>为了帮助打包应用程序， <code class="codeph">loadjava</code>工具在它处理的每个JAR中查找<code class="codeph">META-INF/loadjava-options</code>条目。如果找到这样的条目，则将其视为应用于JAR文件中所有其他条目的选项文件。但是， <code class="codeph">loadjava</code>工具按照它们在JAR中出现的顺序对条目进行一些处理。</p>
                     <p>如果<code class="codeph">loadjava</code>工具在处理<code class="codeph">META-INF/loadjava-options</code>之前已经部分处理了实体，那么它会尝试修补架构对象以符合适用的选项。例如， <code class="codeph">loadjava</code>工具改变了在使用定义者权限创建时使用调用者权限创建的类。<code class="codeph">-noaction</code>的修复是删除创建的模式对象。这会产生正确的效果，除非在<code class="codeph">loadjava</code>工具启动之前存在架构对象，否则它将被删除。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-58858E63-19D3-4DE0-963F-35BC7686E28C">optiontable</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">[-optiontable table_name]</pre><p>此选项使您可以持久地指定类的属性。没有提供加载表的机制。表名必须包含三个字符列：PATTERN，OPTION和VALUE。 PATTERN的值的解释方式与选项文件中的模式相同。其他两列与相应的命令行选项相同并采用操作数。假设您使用以下命令创建表FOO：</p><pre class="oac_no_warn" dir="ltr">create table foo（pattern varchar2（2000），option_name varchar2（2000），value varchar2（2000））;</pre><p>然后，您可以通过以下方式使用<code class="codeph">optiontable</code>选项：</p><pre class="oac_no_warn" dir="ltr">loadjava -optiontable foo myjar.jar</pre><p>对于不带操作数的选项，VALUE列应为NULL。处理行的方式与处理选项文件的行相同。要确定给定模式对象的选项，将检查行，并且对于任何匹配，该选项将附加到选项列表中。如果两行具有相同的模式和相互矛盾的选项，例如-synonym和-nosynonym，那么它将是未指定的，这将占上风。如果两行具有相同的模式和选项列，则未指定哪个值将占优势。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-E28E2497-6625-4BD2-9DA7-C43E77F655FB">发布</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">[-publish &lt;package&gt;] [-pubmain &lt;number&gt;]</pre><p>发布选项使<code class="codeph">loadjava</code>工具为处理类中包含的方法创建PL / SQL包装器。通常，用户希望仅为JAR中的几个类发布包装器。在选项文件中指定时，这些选项最有用。
                     </p>
                     <p>要符合发布条件，该方法必须满足以下条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>它必须是<code class="codeph">public</code>类的成员。
                           </p>
                        </li>
                        <li>
                           <p>它必须声明为<code class="codeph">public</code>和<code class="codeph">static</code> 。
                           </p>
                        </li>
                        <li>
                           <p>方法签名应满足以下规则，以便可以映射：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>参数和返回值的Java算术类型映射到<code class="codeph">NUMBER</code> 。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">char</code>作为参数，返回类型映射到<code class="codeph">VARCHAR</code> 。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">java.lang中。String</code>作为参数，返回类型映射到<code class="codeph">VARCHAR</code> 。</p>
                              </li>
                              <li>
                                 <p>如果方法的唯一参数类型为<code class="codeph">java.lang.String</code> ，特殊规则适用，如<code class="codeph">-pubmain</code>选项说明中所列。
                                 </p>
                              </li>
                              <li>
                                 <p>如果返回类型为<code class="codeph">void</code> ，则创建一个过程。
                                 </p>
                              </li>
                              <li>
                                 <p>如果返回类型是arithmetic， <code class="codeph">char</code>或<code class="codeph">java.lang.String</code>类型，然后创建一个函数。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>采用前面规则未涵盖的参数或返回类型的方法不符合条件。没有为<code class="codeph">OUT</code>和<code class="codeph">IN OUT</code> SQL参数， <code class="codeph">OBJECT</code>类型和许多其他SQL功能做出规定。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-C403F75B-2E6D-40EA-8E46-D353BCC43EEF">解决</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">{-resolve | -r}</pre><p>使用<code class="codeph">-resolve</code>强制<code class="codeph">loadjava</code>工具编译并解析先前已加载的类。没有必要指定<code class="codeph">-force</code> ，因为解析是在加载之后执行的，并且与加载无关。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-A50F3737-CD97-456C-BCE5-14E533648FFE">分解器</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">{-resolver | -R} <span class="italic">resolver_specification</span>
</pre><p>此选项将显式解析程序规范与<code class="codeph">loadjava</code>工具创建或替换的类模式对象相关联。
                     </p>
                     <p>解析器规范由一个或多个项组成，每个项由名称规范和以下列语法表示的模式规范组成：</p><pre class="oac_no_warn" dir="ltr">“（（name_spec schema_spec）[（name_spec schema_spec）] ...）”</pre><p>名称规范类似于<code class="codeph">import</code>语句中的名称。它可以是完全限定的Java类名称或包名称，其最终元素是通配符星号（ <code class="codeph">*</code> ）或只是星号（ <code class="codeph">*</code> ）。但是，名称规范的元素必须用斜杠（ <code class="codeph">/</code> ）分隔，而不是句点（ <code class="codeph">.</code> ）。例如，名称规范<code class="codeph">a/b/*</code>匹配名称以<code class="codeph">ab</code>开头的所有类。特殊名称<code class="codeph">*</code>匹配所有类名。
                     </p>
                     <p>架构规范可以是架构名称或通配符字符划线（ <code class="codeph">-</code> ）。通配符不标识架构，但指示解析操作不将类标记为无效，因为无法解析对匹配名称的引用。当您必须测试引用您不能或不想加载的类的类时，请使用短划线（ <code class="codeph">-</code> ）。例如，类引用但不调用的GUI类，因为在服务器中运行时没有GUI。</p>
                     <p>在查找名称与名称规范匹配的模式对象时，解析操作将在合作伙伴模式规范指定的模式中查找。</p>
                     <p>解析操作按照解析器规范列出它们的顺序搜索模式。例如，</p><pre class="oac_no_warn" dir="ltr">-resolver'（（* HR）（* PUBLIC））'</pre><p>这意味着首先在<code class="codeph">HR</code>中搜索任何引用，然后在<code class="codeph">PUBLIC</code> 。如果未解析引用，则将引用类标记为无效并显示错误消息。
                     </p>
                     <p>请考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">-resolver“（（* HR）（* PUBLIC）（my / gui / *  - ））”</pre><p>这意味着首先在<code class="codeph">HR</code>中搜索任何引用，然后在<code class="codeph">PUBLIC</code> 。如果引用是<code class="codeph">my.gui</code>包中的类而未找到，则将引用类标记为有效并且不显示错误。如果引用不是<code class="codeph">my.gui</code>的类并且未找到，则将引用类标记为无效并生成错误消息。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-F78268B7-F570-4DE0-BD5A-DD43DC4AEFA5">用户</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">{-user | -u} <span class="italic">用户</span> / <span class="italic">密码</span> [@ <span class="italic">database_url</span> ]</pre><p>默认情况下， <code class="codeph">loadjava</code>工具加载到<code class="codeph">-user</code>选项指定的登录模式中。您可以使用<code class="codeph">-schema</code>选项指定要加载的其他模式。这不需要您登录到该架构，但要求您具有足够的权限来更改架构。
                     </p>
                     <p><code class="codeph">@</code> <span class="italic"><code class="codeph">database_url</code></span>的允许形式取决于您是指定<code class="codeph">-oci</code>还是<code class="codeph">-thin</code> ，如下所述：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">-oci:@</code> <span class="italic"><code class="codeph">database_url</code></span>是可选的。如果未指定，则<code class="codeph">loadjava</code>工具将使用用户的默认数据库。如果指定， <span class="italic"><code class="codeph">database_url</code></span>可以是TNS名称或Oracle Net Services名称 - 值列表。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">-thin:@</code> <span class="italic"><code class="codeph">database_url</code></span>是必需的。格式为<span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">lport</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">SID</code></span> 。</p>
                           <p>哪里：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">host</code></span>是运行数据库的计算机的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">lport</code></span>是已配置为侦听Oracle Net Services连接的侦听器端口。在默认安装中，它是<code class="codeph">5521</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">SID</code></span>是数据库实例标识符。在默认安装中，它是<code class="codeph">ORCL</code> 。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>以下是<code class="codeph">loadjava</code>工具命令的示例：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用默认OCI驱动程序连接到默认数据库，将JAR中的文件加载到<code class="codeph">TEST</code>模式中，然后解决它们：</p><pre class="oac_no_warn" dir="ltr">loadjava -u joe -resolve -schema TEST ServerObjects.jar密码： <span class="italic">password</span>
</pre></li>
                        <li>
                           <p>连接JDBC Thin驱动程序，加载类和资源文件，并解析每个类：</p><pre class="oac_no_warn" dir="ltr">loadjava -thin -u HR @ dbhost：5521：orcl \ -resolve alpha.class beta.props密码： <span class="italic">密码</span>
</pre></li>
                        <li>
                           <p>将Betty和Bob添加到可以运行<code class="codeph">alpha.class</code>的用户：</p><pre class="oac_no_warn" dir="ltr">loadjava -thin -schema test -u HR @ localhost：5521：orcl \ -grant BETTY，BOB alpha.class密码：password</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-9B26E38B-F040-473D-B965-1053456E1520">jarsasdbobjects</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此选项指示当前<code class="codeph">loadjava</code>工具处理的JAR将与它们包含的类一起存储在数据库中，并且将在数据库中保留类与JAR之间关联的知识。换句话说，此参数指示由当前<code class="codeph">loadjava</code>工具处理的JAR将作为数据库驻留JAR存储在数据库中。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEB08FAD-BE91-45D6-8338-031A70D97C59__GUID-CD2B0F59-E38D-40FC-A9E0-DE2ADCD42974">prependjarnames</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此选项与<code class="codeph">-jarsasdbobjects</code>选项一起使用。此选项允许来自不同JAR的具有相同名称的类在同一模式中共存。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="preparing-Java-class-methods.html#GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7">控制当前用户概述</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="03710.database-gateway-sqlserver-features.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SQL Server网关功能和限制</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-sql-server-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T16:34:56-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18235-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="database-gateway-sqlserver-introduction.html" title="Previous" type="text/html"></link>
      <link rel="next" href="database-gateway-sqlserver-case-studies.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for SQL Server User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GMSWN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-gateway-sqlserver-introduction.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="database-gateway-sqlserver-case-studies.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL Server网关功能和限制</li>
            </ol>
            <a id="GUID-7715EE2E-35B9-4B04-90F3-28A85476E638" name="GUID-7715EE2E-35B9-4B04-90F3-28A85476E638"></a><a id="GMSWN200"></a>
            
            <h2 id="GMSWN-GUID-7715EE2E-35B9-4B04-90F3-28A85476E638" class="sect2"><span class="enumeration_chapter">2</span> SQL Server网关功能和限制</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装和配置网关后，您可以使用网关访问SQL Server数据，将SQL Server命令从应用程序传递到SQL Server数据库，执行分布式查询和复制数据。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A" title="远程插入行源功能允许远程插入，要求本地Oracle数据通过Oracle数据库和Oracle数据库网关工作。此功能要求Oracle数据库和Oracle Database Gateway为12.2或更高版本。">远程插入Rowsource</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-E55550F8-3B89-46FA-9730-B0396DCA6956">使用传递功能</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-D394102E-9035-48DD-A9C8-8DD7834D86BF">执行存储过程和函数</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-969B7793-3140-487D-87A9-1336A4E20258">CHAR语义学</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-7D22F29E-9416-415D-90C3-1F5787879FAD">多字节字符集比率抑制</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-96FDFC55-2416-42C6-8851-86FD5C820FC5">IPv6支持</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-BA9B52F3-D059-489D-A768-27578D7565AE">远程用户定义的功能支持</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-1A1F4369-423E-4602-A61C-D0C393A5DBDA">SQL Server的数据库兼容性问题</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-DC125F0F-0957-4A58-805A-9848DC66F627">已知的限制</a></p>
                  </li>
                  <li>
                     <p><a href="database-gateway-sqlserver-features.html#GUID-D6FB014B-53E0-41A4-B163-0FBB469151DB">已知问题</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A" name="GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A"></a><h3 id="GMSWN-GUID-513FBA3C-3458-4129-93E4-38DB2DF97F7A" class="sect3">远程插入Rowsource</h3>
               <div>
                  <p>远程插入行源功能允许远程插入，要求本地Oracle数据通过Oracle数据库和Oracle数据库网关工作。此功能要求Oracle数据库和Oracle Database Gateway为12.2或更高版本。</p>
                  <p>通过Oracle数据库设计，必须在数据库链接站点执行某些分布式语句。但在某些情况下，执行这些查询所需的数据必须从原始Oracle数据库中获取。在同构连接下，远程Oracle数据库将回调源Oracle数据库以获取此类数据。但是在异构连接中，这是不可行的，因为这意味着外部数据存储必须查询只能由发出查询的Oracle实例提供的回调函数或数据。通常，这些类型的语句不能通过Oracle数据库网关支持。</p>
                  <p>以下类别的SQL语句会导致回调：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>任何带有子选择的DML，它指的是Oracle数据库中的一个表。</p>
                     </li>
                     <li>
                        <p>任何<code class="codeph">DELETE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或“ <code class="codeph">SELECT...FOR UPDATE..."</code>包含需要在原始Oracle数据库中执行的SQL函数或语句的SQL语句。
                        </p>
                        <p>这些SQL函数包括<code class="codeph">USER</code> ， <code class="codeph">USERENV</code>和<code class="codeph">SYSDATE</code> ;并涉及从原始Oracle数据库中选择数据。
                        </p>
                     </li>
                     <li>
                        <p>任何涉及Oracle数据库中的表以及远程表中的<code class="codeph">LONG</code>或<code class="codeph">LOB</code>列的SQL语句。
                        </p>
                     </li>
                  </ul>
                  <p>可以通过远程插入行源功能工作的远程<code class="codeph">INSERT</code>语句的示例如下：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO <span class="italic">gateway_table</span> @gateway_link select * from <span class="italic">local_table</span> ;</pre></div>
            </div><a id="GMSWN704"></a><div class="props_rev_3"><a id="GUID-E55550F8-3B89-46FA-9730-B0396DCA6956" name="GUID-E55550F8-3B89-46FA-9730-B0396DCA6956"></a><h3 id="GMSWN-GUID-E55550F8-3B89-46FA-9730-B0396DCA6956" class="sect3">使用传递功能</h3>
               <div>
                  <div class="section">
                     <p>网关可以使用<code class="codeph">DBMS_HS_PASSTHROUGH</code>包将SQL Server命令或语句从应用程序传递到SQL Server数据库。
                     </p>
                     <p>使用PL / SQL块中的<code class="codeph">DBMS_HS_PASSTHROUGH</code>包指定要传递给SQL Server数据库的语句，如下所示：</p><pre class="oac_no_warn" dir="ltr">DECLARE num_rows INTEGER; BEGIN num_rows：= DBMS_HS_PASSTHROUGH.EXECUTE_IMMEDIATE@MSQL（' <span class="italic">command</span> '）;结束; /</pre><p>其中<span class="italic">command</span>不能是以下之一：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">BEGIN</code> <code class="codeph">TRANSACTION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">承诺</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ROLLBACK</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">保存</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">关掉</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">发布</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SAVEPOINT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CONNECT</code></p>
                        </li>
                        <li>
                           <p>SQL Server工具命令</p>
                        </li>
                     </ul>
                     <p><code class="codeph">DBMS_HS_PASSTHROUGH</code>包支持传递绑定值和执行SELECT语句。
                     </p>
                     <div class="infoboxnote" id="GUID-E55550F8-3B89-46FA-9730-B0396DCA6956__GUID-F5B9556E-5470-4A9D-80C5-0678524AF65A">
                        <p class="notep1">注意：</p>
                        <p>TRUNCATE不能用于传递语句。</p>
                     </div>
                     <p></p>
                     <div class="infoboxnotealso" id="GUID-E55550F8-3B89-46FA-9730-B0396DCA6956__GUID-3789DB51-18EC-4B0A-B4C2-4CEE24F8E59C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_HS_PASSTHROUGH.html#ARPLS017" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/gmswn&amp;id=HETER003" target="_blank">第3章，Oracle数据库网关的功能，</a> <span class="italic">Oracle数据库异构连接用户指南</span> ，以获取有关<code class="codeph">DBMS_HS_PASSTHROUGH</code>包的更多信息。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="GMSWN705"></a><div class="props_rev_3"><a id="GUID-D394102E-9035-48DD-A9C8-8DD7834D86BF" name="GUID-D394102E-9035-48DD-A9C8-8DD7834D86BF"></a><h3 id="GMSWN-GUID-D394102E-9035-48DD-A9C8-8DD7834D86BF" class="sect3">执行存储过程和函数</h3>
               <div>
                  <div class="section">
                     <p>使用过程功能，网关可以执行SQL Server数据库中定义的存储过程。没有必要重新链接网关或定义到网关的过程，但过程的访问权限必须允许用户访问网关登录为。</p>
                     <p>标准PL / SQL语句用于执行存储过程。</p>
                     <p>网关支持三种互斥模式的存储过程：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>普通模式：只能访问<code class="codeph">IN</code> / <code class="codeph">OUT</code>参数</p>
                        </li>
                        <li>
                           <p>返回值模式：具有所有存储过程的返回值</p>
                        </li>
                        <li>
                           <p>结果集模式：输出值可用作最后结果集</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="GMSWN835"></a><div class="props_rev_3"><a id="GUID-969B7793-3140-487D-87A9-1336A4E20258" name="GUID-969B7793-3140-487D-87A9-1336A4E20258"></a><h3 id="GMSWN-GUID-969B7793-3140-487D-87A9-1336A4E20258" class="sect3">CHAR语义学</h3>
               <div>
                  <p>此功能允许网关可选地在<code class="codeph">CHAR</code>语义模式下运行。此功能不是始终将SQL Server <code class="codeph">CHAR</code>列描述为<code class="codeph">CHAR(n BYTE)</code> ，而是将它们描述为<code class="codeph">CHAR(n CHAR)</code>和<code class="codeph">VARCHAR(n CHAR)</code> 。该概念类似于Oracle数据库<code class="codeph">CHAR</code> Semantics。您需要指定<code class="codeph">HS_NLS_LENGTH_SEMANTICS=CHAR</code>网关参数以激活此选项。有关更多详细信息，请参阅<a href="database-gateway-sqlserver-initialization-parameters.html#GUID-5ECAD5A1-02FF-40F3-AD39-AB2DFB9C9FCB">初始化参数</a> 。
                  </p>
               </div>
            </div><a id="GMSWN836"></a><div class="props_rev_3"><a id="GUID-7D22F29E-9416-415D-90C3-1F5787879FAD" name="GUID-7D22F29E-9416-415D-90C3-1F5787879FAD"></a><h3 id="GMSWN-GUID-7D22F29E-9416-415D-90C3-1F5787879FAD" class="sect3">多字节字符集比率抑制</h3>
               <div>
                  <p>此功能可选地抑制从SQL Server数据库到涉及多字节字符集的Oracle数据库的比率扩展。默认情况下，Oracle网关采用最差的比率来防止数据被截断或缓冲区大小不足。但是，如果您具有SQL Server数据库的特定知识并且不希望进行扩展，则可以指定<code class="codeph">HS_KEEP_REMOTE_COLUMN_SIZE</code>参数以禁止扩展。有关更多详细信息，请参阅<a href="database-gateway-sqlserver-initialization-parameters.html#GUID-5ECAD5A1-02FF-40F3-AD39-AB2DFB9C9FCB">初始化参数</a> 。
                  </p>
               </div>
            </div><a id="GMSWN837"></a><div class="props_rev_3"><a id="GUID-96FDFC55-2416-42C6-8851-86FD5C820FC5" name="GUID-96FDFC55-2416-42C6-8851-86FD5C820FC5"></a><h3 id="GMSWN-GUID-96FDFC55-2416-42C6-8851-86FD5C820FC5" class="sect3">IPv6支持</h3>
               <div>
                  <p>除了Oracle数据库和网关之间的完全IPv6支持外，此网关和SQL Server数据库之间也支持IPv6。有关更多详细信息，请参阅<a href="database-gateway-sqlserver-initialization-parameters.html#GUID-5ECAD5A1-02FF-40F3-AD39-AB2DFB9C9FCB">初始化参数中</a>的<code class="codeph">HS_FDS_CONNECT_INFO</code>参数。
                  </p>
               </div>
            </div><a id="GMSWN880"></a><div class="props_rev_3"><a id="GUID-CF96FE3D-C124-4F36-8198-047285443019" name="GUID-CF96FE3D-C124-4F36-8198-047285443019"></a><h3 id="GMSWN-GUID-CF96FE3D-C124-4F36-8198-047285443019" class="sect3">网关会话IDLE超时</h3>
               <div>
                  <p>您可以选择使用网关参数<code class="codeph">HS_IDLE_TIMEOUT</code>自动终止长空闲网关会话。具体来说，当网关会话空闲超过指定的时间限制时，网关会话将终止，并回滚任何挂起的更新。有关更多详细信息，请参阅<a href="database-gateway-sqlserver-initialization-parameters.html#GUID-5ECAD5A1-02FF-40F3-AD39-AB2DFB9C9FCB">初始化参数中</a>的<code class="codeph">HS_IDLE_TIMEOUT</code>参数。
                  </p>
               </div>
            </div><a id="GMSWN706"></a><div class="props_rev_3"><a id="GUID-BA9B52F3-D059-489D-A768-27578D7565AE" name="GUID-BA9B52F3-D059-489D-A768-27578D7565AE"></a><h3 id="GMSWN-GUID-BA9B52F3-D059-489D-A768-27578D7565AE" class="sect3">远程用户定义的功能支持</h3>
               <div>
                  <p>远程非Oracle数据库中的用户定义函数可用于SQL语句。</p>
                  <div class="infoboxnotealso" id="GUID-BA9B52F3-D059-489D-A768-27578D7565AE__GUID-B8727611-B712-400D-8C6E-6C04F644F011">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/gmswn&amp;id=HETER4108" target="_blank"><span class="italic">Oracle数据库异构连接用户指南</span></a> ，了解有关在非Oracle数据库上执行用户定义函数的更多信息。
                     </p>
                  </div>
               </div><a id="GMSWN707"></a><div class="props_rev_3"><a id="GUID-79C600CE-197A-4F50-A57F-C4F7268BFF52" name="GUID-79C600CE-197A-4F50-A57F-C4F7268BFF52"></a><h4 id="GMSWN-GUID-79C600CE-197A-4F50-A57F-C4F7268BFF52" class="sect4">返回值和存储过程</h4>
                  <div>
                     <div class="section">
                        <p>默认情况下，所有存储过程和函数都不会向用户返回返回值。要启用返回值，请将<code class="codeph">HS_FDS_PROC_IS_FUNC</code>参数值设置为<code class="codeph">TRUE</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-79C600CE-197A-4F50-A57F-C4F7268BFF52__GUID-5F7997D9-1EE3-4565-8C11-E04FEC0C148A">
                           <p class="notep1">也可以看看：</p>
                           <p> <a href="database-gateway-sqlserver-initialization-parameters.html#GUID-5ECAD5A1-02FF-40F3-AD39-AB2DFB9C9FCB">初始化</a>有关编辑初始化参数文件和<code class="codeph">HS_FDS_PROC_IS_FUNC</code>参数的<code class="codeph">HS_FDS_PROC_IS_FUNC</code>参数。
                           </p>
                        </div>
                        <div class="infoboxnote" id="GUID-79C600CE-197A-4F50-A57F-C4F7268BFF52__GUID-FC186C09-950C-4FBA-BF7B-F08067210445">
                           <p class="notep1">注意：</p>
                           <p>如果将<code class="codeph">HS_FDS_PROC_IS_FUNC</code>网关初始化参数设置为<code class="codeph">TRUE</code> ，则必须更改所有现有存储过程的过程execute语句的语法。
                           </p>
                        </div>
                        <p>在以下示例中，将员工姓名<code class="codeph">JOHN SMYTHE</code>传递给SQL Server存储过程<code class="codeph">REVISE_SALARY</code> 。存储过程从SQL Server数据库中检索工资值，以计算<code class="codeph">JOHN SMYTHE</code>的新年薪。 <code class="codeph">RESULT</code>返回的修订工资用于更新Oracle数据库表中的<code class="codeph">EMP</code> ：</p><pre class="oac_no_warn" dir="ltr">DECLARE INPUT VARCHAR2（15）;结果编号（8,2）; BEGIN INPUT：='JOHN SMYTHE';结果：= REVISE_SALARY @ MSQL（INPUT）; UPDATE EMP SET SAL =结果ENAME =：INPUT;结束; /</pre><p>过程功能自动将非Oracle数据类型转换为PL / SQL数据类型和从PL / SQL数据类型转换。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="GMSWN708"></a><div class="props_rev_3"><a id="GUID-FDCA4E1B-2B72-4B4B-9C4F-7A4D4304C20C" name="GUID-FDCA4E1B-2B72-4B4B-9C4F-7A4D4304C20C"></a><h4 id="GMSWN-GUID-FDCA4E1B-2B72-4B4B-9C4F-7A4D4304C20C" class="sect4">结果集和存储过程</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Database Gateway for SQL Server为返回结果集的存储过程提供支持。</p>
                        <p>默认情况下，所有存储过程和函数都不会将结果集返回给用户。要启用结果集，请将<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>参数值设置为<code class="codeph">TRUE</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-FDCA4E1B-2B72-4B4B-9C4F-7A4D4304C20C__GUID-87D87482-694C-4EC3-936A-B1F6BAC25A46">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="database-gateway-sqlserver-initialization-parameters.html#GUID-5ECAD5A1-02FF-40F3-AD39-AB2DFB9C9FCB">初始化</a>有关编辑初始化参数文件和<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>参数的<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>参数。有关Oracle对非Oracle数据库中的结果集的支持的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/gmswn&amp;id=HETER4061" target="_blank"><span class="italic">Oracle数据库异构连接用户指南”</span></a> 。
                           </p>
                        </div>
                        <div class="infoboxnote" id="GUID-FDCA4E1B-2B72-4B4B-9C4F-7A4D4304C20C__GUID-172EC095-C267-4D49-AC15-8068D91555AC">
                           <p class="notep1">注意：</p>
                           <p>如果将<code class="codeph">HS_FDS_RESULTSET_SUPPORT</code>网关初始化参数设置为<code class="codeph">TRUE</code> ，则必须更改所有现有存储过程的过程execute语句的语法，否则将发生错误。
                           </p>
                        </div>
                        <p>通过Oracle Database Gateway for SQL Server访问带有结果集的存储过程时，您将处于异构服务的顺序模式。</p>
                        <p>SQL Server的Oracle数据库网关在过程描述期间将以下信息返回到异构服务：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>远程存储过程的所有输入参数</p>
                           </li>
                           <li>
                              <p>没有输出参数</p>
                           </li>
                           <li>
                              <p>类型引用游标的一个out参数（对应于存储过程返回的第一个结果集）</p>
                           </li>
                        </ul>
                        <p>客户端程序必须使用虚拟包函数<code class="codeph">DBMS_HS_RESULT_SET.GET_NEXT_RESULT_SET</code>来获取后续结果集的引用游标。返回的最后一个结果集是过程中的out参数。
                        </p>
                        <p>访问结果集的限制如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>必须按照将它们放置在线路上的顺序检索远程存储过程返回的结果集</p>
                           </li>
                           <li>
                              <p>在执行存储过程时，先前执行的存储过程返回的所有结果集将被关闭（无论数据是否已被完全检索）</p>
                           </li>
                        </ul>
                        <p>在以下示例中，执行SQL Server存储过程以从SQL Server获取<code class="codeph">emp</code>和<code class="codeph">dept</code>表的内容：</p><pre class="oac_no_warn" dir="ltr">创建过程REFCURPROC（@ arg1 varchar（255），@ arg2 varchar（255）输出）作为select @ arg2 = @ arg1 select * from EMP select * from DEPT go</pre><p>此存储过程将输入参数arg1分配给输出参数arg2，在ref cursor rc1中打开查询<code class="codeph">SELECT * FROM EMP</code> ，并在ref cursor rc2中打开查询<code class="codeph">SELECT * FROM DEPT</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="GMSWN709"></a><div class="props_rev_3"><a id="GUID-3CA73599-EC8A-4D73-8D50-4BFE6E34E980" name="GUID-3CA73599-EC8A-4D73-8D50-4BFE6E34E980"></a><h5 id="GMSWN-GUID-3CA73599-EC8A-4D73-8D50-4BFE6E34E980" class="sect5">OCI程序从顺序模式的结果集中获取</h5>
                     <div>
                        <div class="section">
                           <p>以下示例显示了在顺序模式下从结果集中提取OCI程序：</p><pre class="oac_no_warn" dir="ltr">OCIEnv * ENVH; OCISvcCtx * SVCH; OCIStmt * STMH; OCIError * ERRH; OCIBind * BNDH [3]; OraText arg1 [20]; OraText arg2 [255]; OCIResult * rset; OCIStmt * rstmt; ub2 rcode [3]; ub2 rlens [3]; sb2 inds [3]; OraText * stmt =（OraText *）“begin refcurproc @ MSQL（：1，：2，：3）; end;”; OraText * n_rs_stm =（OraText *）“begin：ret：= DBMS_HS_RESULT_SET.GET_NEXT_RESULT_SET@MSQL; end;”; / *准备过程调用语句* / / *处理初始化代码跳过* / OCIStmtPrepare（STMH，ERRH，stmt，strlen（stmt），OCI_NTV_SYNTAX，OCI_DEFAULT）; / *绑定过程参数* / inds [0] = 0; strcpy（（char *）arg1，“Hello World”）; rlens [0] = strlen（arg1）; OCIBindByPos（STMH，＆BNDH [0]，ERRH，1，（dvoid *）arg1,20，SQLT_CHR，（dvoid *）＆（inds [0]），＆（rlens [0]），＆（rcode [0]） ，0，（ub4 *）0，OCI_DEFAULT）; inds [1] = -1; OCIBindByPos（STMH，＆BNDH [1]，ERRH，1，（dvoid *）arg2,20，SQLT_CHR，（dvoid *）＆（inds [1]），＆（rlens [1]），＆（rcode [1]） ，0，（ub4 *）0，OCI_DEFAULT）; inds [2] = 0; rlens [2] = 0; OCIDescriptorAlloc（ENVH，（dvoid **）＆rset，OCI_DTYPE_RSET，0，（dvoid **）0）; OCIBindByPos（STMH，＆BNDH [2]，ERRH，2，（dvoid *）rset，0，SQLT_RSET，（dvoid *）＆（inds [2]），＆（rlens [2]），＆（rcode [2]） ，0，（ub4 *）0，OCI_DEFAULT）; / *执行过程* / OCIStmtExecute（SVCH，STMH，ERRH，1,0，（CONST OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT）; / *将结果集转换为语句句柄* / OCIResultSetToStmt（rset，ERRH）; rstmt =（OCIStmt *）rset; / *在此之后，用户可以从rstmt * / / * get get_next_result_set调用来获取next_result set * / / *准备获取下一个结果集过程调用* / OCIStmtPrepare（STMH，ERRH，n_rs_stm，strlen（n_rs_stm），OCI_NTV_SYNTAX ，OCI_DEFAULT）; / *绑定返回值* / OCIBindByPos（STMH，＆BNDH [1]，ERRH，1，（dvoid *）rset，0，SQLT_RSET，（dvoid *）＆（inds [1]），＆（rlens [1]）， ＆（rcode [1]），0，（ub4 *）0，OCI_DEFAULT）; / *执行语句获取下一个结果集* / OCIStmtExecute（SVCH，STMH，ERRH，1,0，（CONST OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT）; / *将下一个结果集转换为语句句柄* / OCIResultSetToStmt（rset，ERRH）; rstmt =（OCIStmt *）rset; / *现在rstmt将指向远程存储过程返回的第二个结果集* / / *重复执行get_next_result_set以获取输出参数* /</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="GMSWN710"></a><div class="props_rev_3"><a id="GUID-C9B017A5-6ECB-4595-9937-E919E78F25B1" name="GUID-C9B017A5-6ECB-4595-9937-E919E78F25B1"></a><h5 id="GMSWN-GUID-C9B017A5-6ECB-4595-9937-E919E78F25B1" class="sect5">从顺序模式的结果集中获取PL / SQL程序</h5>
                     <div>
                        <div class="section">
                           <p>假设表<code class="codeph">loc_emp</code>是一个与SQL Server <code class="codeph">emp</code>表完全相同的本地表。同样的假设适用于<code class="codeph">loc_dept</code> 。表<code class="codeph">outargs</code>具有与SQL Server存储过程的<code class="codeph">out</code>参数对应的列。
                           </p><pre class="oac_no_warn" dir="ltr">create table outargs（outarg varchar2（255），retval number）;</pre><pre class="oac_no_warn" dir="ltr">创建或替换包rcpackage是类型RCTYPE是ref游标;结束rcpackage; /</pre><pre class="oac_no_warn" dir="ltr">声明rc1 rcpackage.rctype; rec1 loc_emp％rowtype; rc2 rcpackage.rctype; rec2 loc_dept％rowtype; rc3 rcpackage.rctype; rec3 outargs％rowtype; out_arg varchar2（255）; begin  - 执行过程out_arg：= null; refcurproc @ MSQL（'Hello World'，out_arg，rc1）; - 从远程emp表中获取20行，并将它们插入到loc_emp中，以便在1 ... 20循环中将rc1提取到rec1;插入loc_emp（rec1.empno，rec1.ename，rec1.job，rec1.mgr，rec1.hiredate，rec1.sal，rec1.comm，rec1.deptno）;结束循环; - 关闭参考光标关闭rc1; - 获取存储过程返回的下一个结果集rc2：= dbms_hs_result_set.get_next_result_set@MSQL; - 从远程dept表中获取5行，并将它们插入到loc_dept中，用于i中的1 ... 5循环获取rc2到rec2;插入loc_dept值（rec2.deptno，rec2.dname，rec2.loc）;结束循环; - 关闭引用光标关闭rc2; - 从远程存储过程获取输出参数 - 由于我们处于顺序模式，它们将以结果集的形式返回rc3：= dbms_hs_result_set.get_next_result_set@MSQL; - 获取它们并将它们插入到outargs表中，将rc3读入rec3;插入outargs（rec3.outarg，rec3.retval）; - 关闭参考光标关闭rc3;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="GMSWN711"></a><div class="props_rev_3"><a id="GUID-1A1F4369-423E-4602-A61C-D0C393A5DBDA" name="GUID-1A1F4369-423E-4602-A61C-D0C393A5DBDA"></a><h3 id="GMSWN-GUID-1A1F4369-423E-4602-A61C-D0C393A5DBDA" class="sect3">SQL Server的数据库兼容性问题</h3>
               <div>
                  <p>SQL Server和Oracle数据库在某些方面的功能不同，导致兼容性问题。兼容性问题在以下链接中描述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-B1CFF847-A43D-4717-AE2F-44B859004B67">隐式交易（链式模式）</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-AFDB949D-EDBC-4867-A9FE-66F98263B94D">列定义</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-84D3DED8-58E0-4B99-9DBC-2DDB04AD1A0C">命名规则</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-BABDFD79-86BE-49D4-8646-8373CA0B7823">数据类型</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-59442525-61D4-4512-8F7B-6735BDC4FFAA">查询</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-58871E1E-2EBC-4745-8AD1-72C3DB5389DF">锁定</a></p>
                     </li>
                  </ul>
               </div><a id="GMSWN712"></a><div class="props_rev_3"><a id="GUID-B1CFF847-A43D-4717-AE2F-44B859004B67" name="GUID-B1CFF847-A43D-4717-AE2F-44B859004B67"></a><h4 id="GMSWN-GUID-B1CFF847-A43D-4717-AE2F-44B859004B67" class="sect4">隐式交易（链式模式）</h4>
                  <div>
                     <p><a id="d2170e952" class="indexterm-anchor"></a><a id="d2170e954" class="indexterm-anchor"></a>网关支持ANSI标准隐式事务。必须为此模式编写SQL Server存储过程。运行隐式事务允许网关将Oracle两阶段提交保护扩展到更新Oracle和SQL Server数据库的事务。
                     </p>
                  </div>
               </div><a id="GMSWN713"></a><div class="props_rev_3"><a id="GUID-AFDB949D-EDBC-4867-A9FE-66F98263B94D" name="GUID-AFDB949D-EDBC-4867-A9FE-66F98263B94D"></a><h4 id="GMSWN-GUID-AFDB949D-EDBC-4867-A9FE-66F98263B94D" class="sect4">列定义</h4>
                  <div>
                     <p><a id="d2170e990" class="indexterm-anchor"></a>默认情况下，SQL Server表列不能包含空值，除非在列定义中指定了<code class="codeph">NULL</code> 。除非您设置SQL Server选项以覆盖此默认值，否则SQL Server会假定所有列都不能包含空值。
                     </p>
                     <p>对于Oracle表，除非在列定义中指定<code class="codeph">NOT NULL</code>否则列中允许使用空值。
                     </p>
                  </div>
               </div><a id="GMSWN714"></a><div class="props_rev_3"><a id="GUID-84D3DED8-58E0-4B99-9DBC-2DDB04AD1A0C" name="GUID-84D3DED8-58E0-4B99-9DBC-2DDB04AD1A0C"></a><h4 id="GMSWN-GUID-84D3DED8-58E0-4B99-9DBC-2DDB04AD1A0C" class="sect4">命名规则</h4>
                  <div>
                     <p>命名规则问题包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-FA650ED6-82F9-4B75-AEF3-13064CFFCEBD">命名对象的规则</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-CCAB7265-35ED-42FD-84B8-D1BA0C30B1C4">区分大小写</a></p>
                        </li>
                     </ul>
                  </div><a id="GMSWN715"></a><div class="props_rev_3"><a id="GUID-FA650ED6-82F9-4B75-AEF3-13064CFFCEBD" name="GUID-FA650ED6-82F9-4B75-AEF3-13064CFFCEBD"></a><h5 id="GMSWN-GUID-FA650ED6-82F9-4B75-AEF3-13064CFFCEBD" class="sect5">命名对象的规则</h5>
                     <div>
                        <p>Oracle和SQL Server使用不同的数据库对象命名规则。例如，每个对象名称允许的最大字符数可以不同。此外，使用单引号和双引号，区分大小写以及使用字母数字字符都可以不同。</p>
                        <div class="infoboxnotealso" id="GUID-FA650ED6-82F9-4B75-AEF3-13064CFFCEBD__GUID-8505615D-DC86-45CC-912B-A9EF8A49A0C6">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle数据库参考</span></a>和SQL Server文档。
                           </p>
                        </div>
                     </div>
                  </div><a id="GMSWN716"></a><div class="props_rev_3"><a id="GUID-CCAB7265-35ED-42FD-84B8-D1BA0C30B1C4" name="GUID-CCAB7265-35ED-42FD-84B8-D1BA0C30B1C4"></a><h5 id="GMSWN-GUID-CCAB7265-35ED-42FD-84B8-D1BA0C30B1C4" class="sect5">区分大小写</h5>
                     <div>
                        <p>除非您使用双引号字符包围标识符，否则Oracle数据库默认为大写。例如，要引用名为<code class="codeph">emp</code>的SQL Server表，请输入带双引号字符的名称，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM“emp”@MSQL;</pre><p>但是，要从Oracle应用程序引用Scott拥有的名为<code class="codeph">emp</code>的SQL Server表，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM“Scott”。“emp”@MSQL;</pre><p>如果名为<code class="codeph">emp</code>的SQL Server表由<code class="codeph">SCOTT</code>拥有（表所有者名称为大写字母），则可以输入不带双引号字符的所有者名称，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM SCOTT。“emp”@MSQL;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM scott。“emp”@MSQL;</pre><p>Oracle建议您使用双引号字符包围所有SQL Server对象名称，并使用SQL Server数据字典中显示的对象名称的确切字母大小写。参照中列出的支持的Oracle数据字典的表或视图时，则不需要此约定<a href="database-gateway-sqlserver-data-dictionary.html#GUID-3F877790-E47E-4191-A3AC-25E0B7C56F6F">数据字典</a> 。
                        </p>
                        <p>如果无法根据这些约定更改现有应用程序，请在Oracle中创建视图以将SQL Server名称与正确的字母大小写相关联。例如，要仅使用大写名称从现有Oracle应用程序引用SQL Server表<code class="codeph">emp</code> ，请定义以下视图：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE VIEW EMP（EMPNO，ENAME，SAL，HIREDATE）AS SELECT“empno”，“ename”，“sal”，“hiredate”FROM“emp”@MSQL;</pre><p>使用此视图，应用程序可以发出如下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT EMPNO，ENAME FROM EMP;</pre><p>使用视图是一种解决方案，它复制源自SQL Server数据字典的数据字典信息。只要在SQL Server数据库中更改了相应表的数据定义，就必须准备好更新Oracle视图定义。</p>
                     </div>
                  </div>
               </div><a id="GMSWN717"></a><div class="props_rev_3"><a id="GUID-BABDFD79-86BE-49D4-8646-8373CA0B7823" name="GUID-BABDFD79-86BE-49D4-8646-8373CA0B7823"></a><h4 id="GMSWN-GUID-BABDFD79-86BE-49D4-8646-8373CA0B7823" class="sect4">数据类型</h4>
                  <div>
                     <p>数据类型问题包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-141413D3-F780-451B-9A9C-30630BBE8E8B">二进制文字表示法</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-C2716325-B085-4E04-8764-6D7A14E11E46">使用LONG Columns绑定变量</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-0C663CAA-671C-42C8-9DEA-7CB770D4314F">数据类型转换</a></p>
                        </li>
                     </ul>
                  </div><a id="GMSWN718"></a><div class="props_rev_3"><a id="GUID-141413D3-F780-451B-9A9C-30630BBE8E8B" name="GUID-141413D3-F780-451B-9A9C-30630BBE8E8B"></a><h5 id="GMSWN-GUID-141413D3-F780-451B-9A9C-30630BBE8E8B" class="sect5">二进制文字表示法</h5>
                     <div>
                        <p>Oracle SQL使用由单引号括起的十六进制数字来表示要比较或插入到定义为数据类型<code class="codeph">RAW</code>列中的文字值。</p>
                        <p><a id="d2170e1254" class="indexterm-anchor"></a>此表示法不会转换为与SQL Server <code class="codeph">VARBINARY</code>和<code class="codeph">BINARY</code>数据类型兼容的语法（ <code class="codeph">0x</code>后跟十六进制数字，由单引号括起）。
                        </p>
                        <p>例如，不支持以下语句：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO BINARY_TAB @ MSQL VALUES（'0xff'）</pre><p>其中<code class="codeph">BINARY_TAB</code>包含数据类型为<code class="codeph">VARBINARY</code>或<code class="codeph">BINARY</code>的列。插入或更新<code class="codeph">VARBINARY</code>和<code class="codeph">BINARY</code>数据类型时使用绑定变量。
                        </p>
                     </div>
                  </div><a id="GMSWN719"></a><div class="props_rev_3"><a id="GUID-C2716325-B085-4E04-8764-6D7A14E11E46" name="GUID-C2716325-B085-4E04-8764-6D7A14E11E46"></a><h5 id="GMSWN-GUID-C2716325-B085-4E04-8764-6D7A14E11E46" class="sect5">使用LONG Columns绑定变量</h5>
                     <div>
                        <p>网关不支持使用绑定变量来更新数据类型为<code class="codeph">LONG</code>列。</p>
                     </div>
                  </div><a id="GMSWN720"></a><div class="props_rev_3"><a id="GUID-0C663CAA-671C-42C8-9DEA-7CB770D4314F" name="GUID-0C663CAA-671C-42C8-9DEA-7CB770D4314F"></a><h5 id="GMSWN-GUID-0C663CAA-671C-42C8-9DEA-7CB770D4314F" class="sect5">数据类型转换</h5>
                     <div>
                        <p>SQL Server不支持隐式日期转换。此类转换必须明确。</p>
                        <p>例如，网关为以下<code class="codeph">SELECT</code>语句发出错误：</p><pre class="oac_no_warn" dir="ltr">从TEST @ MSQL WHATE DATE_COL =“1-JAN-2004”中选择DATE_COL;</pre><p>要避免隐式转换出现问题，请添加显式转换，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT TATE_COL FROM TEST @ MSQL WHERE DATE_COL = TO_DATE（“1-JAN-2004”）</pre><div class="infoboxnotealso" id="GUID-0C663CAA-671C-42C8-9DEA-7CB770D4314F__GUID-2BD9C836-E8B8-4519-8DF5-D6AFD1580C0E">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="database-gateway-sqlserver-data-type-conversion.html#GUID-33CEB476-48D0-4441-B4D1-5CA07A077BC4">数据类型转换</a>有关数据类型限制的更多信息。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="GMSWN721"></a><div class="props_rev_3"><a id="GUID-59442525-61D4-4512-8F7B-6735BDC4FFAA" name="GUID-59442525-61D4-4512-8F7B-6735BDC4FFAA"></a><h4 id="GMSWN-GUID-59442525-61D4-4512-8F7B-6735BDC4FFAA" class="sect4">查询</h4>
                  <div>
                     <p>查询问题包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-4AD07233-9E64-4939-9B1B-255CACC5A094">行选择</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-8B388C74-AFB7-4516-A96D-C2B824B99399">空字符串</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-9E0DD3E2-B861-4753-A424-5194A9369556">空绑定变量</a></p>
                        </li>
                     </ul>
                  </div><a id="GMSWN722"></a><div class="props_rev_3"><a id="GUID-4AD07233-9E64-4939-9B1B-255CACC5A094" name="GUID-4AD07233-9E64-4939-9B1B-255CACC5A094"></a><h5 id="GMSWN-GUID-4AD07233-9E64-4939-9B1B-255CACC5A094" class="sect5">行选择</h5>
                     <div>
                        <p>SQL Server在返回任何行之前评估所有选定行的查询条件。如果一个或多个行的评估过程中存在错误，则即使其余行满足条件，也不会返回任何行。</p>
                        <p>Oracle逐行评估查询条件，并在评估成功时返回一行。返回行直到一行未通过评估。</p>
                     </div>
                  </div><a id="GMSWN723"></a><div class="props_rev_3"><a id="GUID-8B388C74-AFB7-4516-A96D-C2B824B99399" name="GUID-8B388C74-AFB7-4516-A96D-C2B824B99399"></a><h5 id="GMSWN-GUID-8B388C74-AFB7-4516-A96D-C2B824B99399" class="sect5">空字符串</h5>
                     <div>
                        <p>Oracle将SQL语句中的空字符串作为空值处理。SQL Server将空字符串作为空字符串处理。</p>
                        <p>比较空字符串时，网关将文字空字符串传递给SQL Server数据库，而不进行任何转换。如果您希望空字符串表示空值，则SQL Server不会以这种方式处理该语句;它使用空字符串。</p>
                        <p>您可以通过在SQL语句中使用<code class="codeph">NULL</code>或<code class="codeph">IS NULL</code>而不是空字符串语法来避免此问题，如下例所示：</p><pre class="oac_no_warn" dir="ltr">SELECT * from“emp”@MSQL where“ename”IS NULL;</pre><p>要选择空字符串：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于<code class="codeph">VARCHAR</code>列，网关将空字符串作为<code class="codeph">NULL</code>值返回到Oracle数据库。
                              </p>
                           </li>
                           <li>
                              <p>对于<code class="codeph">CHAR</code>列，网关返回列的完整大小，每个字符为空格（''）。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="GMSWN724"></a><div class="props_rev_3"><a id="GUID-9E0DD3E2-B861-4753-A424-5194A9369556" name="GUID-9E0DD3E2-B861-4753-A424-5194A9369556"></a><h5 id="GMSWN-GUID-9E0DD3E2-B861-4753-A424-5194A9369556" class="sect5">空绑定变量</h5>
                     <div>
                        <p>对于<code class="codeph">VARCHAR</code>绑定变量，网关将空绑定变量作为<code class="codeph">NULL</code>值传递给SQL Server数据库。
                        </p>
                     </div>
                  </div>
               </div><a id="GMSWN725"></a><div class="props_rev_3"><a id="GUID-58871E1E-2EBC-4745-8AD1-72C3DB5389DF" name="GUID-58871E1E-2EBC-4745-8AD1-72C3DB5389DF"></a><h4 id="GMSWN-GUID-58871E1E-2EBC-4745-8AD1-72C3DB5389DF" class="sect4">锁定</h4>
                  <div>
                     <p>SQL Server数据库的锁定模型与Oracle模型有很大不同。网关依赖于基础SQL Server行为，因此以下可能的方案可能会影响通过网关访问SQL Server的Oracle应用程序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读访问可能会阻止写访问</p>
                        </li>
                        <li>
                           <p>写访问可能会阻止读访问</p>
                        </li>
                        <li>
                           <p>语句级读取一致性无法保证</p>
                           <div class="infoboxnotealso" id="GUID-58871E1E-2EBC-4745-8AD1-72C3DB5389DF__GUID-50B73490-A95B-4CDA-B69B-F739B5898D5F">
                              <p class="notep1">也可以看看：</p>
                              <p>有关SQL Server锁定模型的信息的SQL Server文档。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="GMSWN726"></a><div class="props_rev_3"><a id="GUID-DC125F0F-0957-4A58-805A-9848DC66F627" name="GUID-DC125F0F-0957-4A58-805A-9848DC66F627"></a><h3 id="GMSWN-GUID-DC125F0F-0957-4A58-805A-9848DC66F627" class="sect3">已知的限制</h3>
               <div>
                  <p>如果遇到本节或<span class="q">“ <a href="database-gateway-sqlserver-features.html#GUID-D6FB014B-53E0-41A4-B163-0FBB469151DB">已知问题</a> ”中</span>未列出的不兼容问题，请与Oracle支持服务联系。以下部分描述了已知的限制，并包括在可能的情况下处理它们的建议：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-CB03B78E-6CC0-4BB2-9EBC-C88CBB808923">多个公开声明</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-A01E8CE3-386A-4C28-944C-3FBA558DB115">交易诚信</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-8DDCE4CF-D969-470B-A0EF-C28EEF4887A5">交易能力</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-B0A518E4-C1F6-457A-817B-51A9C6E8E1CD">PL / SQL游标循环中的COMMIT或ROLLBACK关闭打开游标</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-1EA2AC1A-35D8-449C-8C75-5514496CF7FF">存储过程</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-29BDC7B2-A9DC-4413-A7C5-6B4F747C7B8D">传递功能</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-0F8C99B5-99AF-4D92-AF45-38E7DC3FE250">DDL声明</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-96885C5A-9710-4EB5-8E58-5B3823F692D3">SQL语法</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-E6C63A61-FBFC-4B6A-9B0C-B819B4E7CCD3">功能</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-3AA39252-2AA8-43C1-A846-3E56026ECB13">带有小写表名的SQL * Plus COPY命令</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-263C4864-9E01-4994-A55C-7CFACDF874F8">数据库链接</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-DC125F0F-0957-4A58-805A-9848DC66F627__GUID-AC0ED9B8-DEEA-47BB-A01A-3F281E79991A">
                     <p class="notep1">注意：</p>
                     <p>如果您对这些限制有任何疑问或疑虑，请联系Oracle支持服务。</p>
                  </div>
               </div><a id="GMSWN727"></a><div class="props_rev_3"><a id="GUID-CB03B78E-6CC0-4BB2-9EBC-C88CBB808923" name="GUID-CB03B78E-6CC0-4BB2-9EBC-C88CBB808923"></a><h4 id="GMSWN-GUID-CB03B78E-6CC0-4BB2-9EBC-C88CBB808923" class="sect4">多个公开声明</h4>
                  <div>
                     <p>访问SQL Server的限制是每个连接允许一个打开的语句或游标。如果需要在同一事务中打开第二个语句或游标来访问SQL Server，则需要新连接。</p>
                     <p>由于此限制，同一事务中的多个打开语句或游标可以相互锁定，因为它们使用与SQL Server的不同连接。</p>
                     <p>要避免此限制，请发出提交或修改逻辑，或两者兼而有之。</p>
                  </div>
               </div><a id="GMSWN728"></a><div class="props_rev_3"><a id="GUID-A01E8CE3-386A-4C28-944C-3FBA558DB115" name="GUID-A01E8CE3-386A-4C28-944C-3FBA558DB115"></a><h4 id="GMSWN-GUID-A01E8CE3-386A-4C28-944C-3FBA558DB115" class="sect4">交易诚信</h4>
                  <div>
                     <p>在以下情况下，网关无法保证事务完整性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当网关处理的语句导致目标数据库中的隐式提交时</p>
                        </li>
                        <li>
                           <p>目标数据库配置为在自动提交模式下工作时</p>
                           <div class="infoboxnote" id="GUID-A01E8CE3-386A-4C28-944C-3FBA558DB115__GUID-59173894-9F7A-466B-9E79-C874717A768E">
                              <p class="notep1">注意：</p>
                              <p>Oracle强烈建议如下：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果您知道执行特定语句会导致目标数据库中的隐式提交，请确保在其自己的事务中执行此语句。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                     <p>在与SQL Server数据库建立连接时，网关将“自动提交模式”设置为“关”。</p>
                  </div>
               </div><a id="GMSWN729"></a><div class="props_rev_3"><a id="GUID-8DDCE4CF-D969-470B-A0EF-C28EEF4887A5" name="GUID-8DDCE4CF-D969-470B-A0EF-C28EEF4887A5"></a><h4 id="GMSWN-GUID-8DDCE4CF-D969-470B-A0EF-C28EEF4887A5" class="sect4">交易能力</h4>
                  <div>
                     <p><a id="d2170e1835" class="indexterm-anchor"></a>网关不支持保存点。如果涉及网关的分布式更新事务正在进行，并且用户尝试创建保存点，则会发生以下错误：</p><pre class="oac_no_warn" dir="ltr"><a id="d2170e1839" class="indexterm-anchor"></a> ORA-02070：数据库<span class="italic">dblink</span>在此上下文中不支持savepoint <a id="d2170e1845" class="indexterm-anchor"></a>
</pre><p><a id="d2170e1851" class="indexterm-anchor"></a>默认情况下，网关配置为<code class="codeph">COMMIT_CONFIRM</code> 。</p>
                  </div>
               </div><a id="GMSWN730"></a><div class="props_rev_3"><a id="GUID-B0A518E4-C1F6-457A-817B-51A9C6E8E1CD" name="GUID-B0A518E4-C1F6-457A-817B-51A9C6E8E1CD"></a><h4 id="GMSWN-GUID-B0A518E4-C1F6-457A-817B-51A9C6E8E1CD" class="sect4">PL / SQL游标循环中的COMMIT或ROLLBACK关闭打开游标</h4>
                  <div>
                     <p>在PL / SQL游标循环中发出的任何<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>关闭所有打开的游标，这可能导致以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-1002：取消顺序</pre><p>要防止此错误，请在游标循环外移动<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>语句。
                     </p>
                  </div>
               </div><a id="GMSWN731"></a><div class="props_rev_3"><a id="GUID-1EA2AC1A-35D8-449C-8C75-5514496CF7FF" name="GUID-1EA2AC1A-35D8-449C-8C75-5514496CF7FF"></a><h4 id="GMSWN-GUID-1EA2AC1A-35D8-449C-8C75-5514496CF7FF" class="sect4">存储过程</h4>
                  <div>
                     <p>Oracle事务管理器或Oracle <code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>命令无法控制通过嵌入提交或回滚的存储过程发出的更改</p>
                     <p>通过Oracle Database Gateway for SQL Server访问带有结果集的存储过程时，必须使用异构服务的顺序模式。</p>
                     <p>通过Oracle Database Gateway for SQL Server访问具有多个结果集的存储过程时，必须先读取所有结果集，然后再继续。</p>
                     <p>必须将存储过程的输出参数初始化为空字符串。</p>
                  </div>
               </div><a id="GMSWN732"></a><div class="props_rev_3"><a id="GUID-29BDC7B2-A9DC-4413-A7C5-6B4F747C7B8D" name="GUID-29BDC7B2-A9DC-4413-A7C5-6B4F747C7B8D"></a><h4 id="GMSWN-GUID-29BDC7B2-A9DC-4413-A7C5-6B4F747C7B8D" class="sect4">传递功能</h4>
                  <div>
                     <p><a id="d2170e1999" class="indexterm-anchor"></a>如果通过网关传递的SQL语句导致SQL Server数据库中的隐式提交，则Oracle事务管理器不知道提交，并且Oracle <code class="codeph">ROLLBACK</code>命令不能用于回滚事务。
                     </p>
                  </div>
               </div><a id="GMSWN838"></a><a id="GMSWN733"></a><div class="props_rev_3"><a id="GUID-0F8C99B5-99AF-4D92-AF45-38E7DC3FE250" name="GUID-0F8C99B5-99AF-4D92-AF45-38E7DC3FE250"></a><h4 id="GMSWN-GUID-0F8C99B5-99AF-4D92-AF45-38E7DC3FE250" class="sect4">DDL声明</h4>
                  <div>
                     <div class="section">
                        <p>SQL Server要求在自己的事务中执行一些DDL语句，并且在给定的事务中只能执行一个DDL语句。</p>
                        <p>如果在SQL Server存储过程中使用这些DDL语句，并使用过程功能通过网关执行存储过程，或者，如果使用传递功能通过网关执行DDL语句，则可能会导致错误情况。这是因为网关的过程特性和传递特性不能保证DDL语句在它们自己的单独事务中执行。</p>
                        <p><a id="d2170e2042" class="indexterm-anchor"></a>如果您尝试使用网关传递功能传递它们，或者如果您执行包含它们的SQL Server存储过程，则以下SQL Server DDL语句可能会导致错误情况：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER DATABASE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">创建数据库</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">创建指数</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">创建程序</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">创建表</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">创建视图</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DISK INIT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DROP &lt;</code> <span class="italic"><code class="codeph">object</code></span> <code class="codeph">&gt;</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">转移交易</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">GRANT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">加载数据库</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">负荷交易</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">RECONFIGURE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">撤消</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">选择INTO</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">TRUNCATE TABLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">更新统计</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0F8C99B5-99AF-4D92-AF45-38E7DC3FE250__GUID-565F2F3B-4062-4BC3-B94B-F6206A6E5E8C">
                           <p class="notep1">也可以看看：</p>
                           <p>有关DDL语句的详细信息，请参阅SQL Server文档。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="GMSWN734"></a><div class="props_rev_3"><a id="GUID-96885C5A-9710-4EB5-8E58-5B3823F692D3" name="GUID-96885C5A-9710-4EB5-8E58-5B3823F692D3"></a><h4 id="GMSWN-GUID-96885C5A-9710-4EB5-8E58-5B3823F692D3" class="sect4">SQL语法</h4>
                  <div>
                     <p>本节列出了对以下SQL语法的限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-F6BB2D1C-43C5-45D6-9DF7-7EDFB5D4110F">条款的当前条款</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-9507E1B9-F5C7-46E8-B6F7-ADFAEF97169D">通过条款连接</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-27AC7EAF-EA59-415F-A017-C75A42B21731">子查询中的函数</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-F6EBB574-0983-4A5A-9C5F-576E8C4C70BA">子查询中的参数</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-DC68B356-6407-4435-9181-E17B28ED4914">UPDATE语句中的数据字典表和视图</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-587A5ECF-58F2-4DCE-9DDD-093F9BE61745">ROWID</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-35FE17FE-DF60-417A-ABEC-F424CCE9EE42">至今</a></p>
                        </li>
                        <li>
                           <p><a href="database-gateway-sqlserver-features.html#GUID-32B73FD6-D082-4A81-9164-53D7307CFC39">解释计划声明</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-96885C5A-9710-4EB5-8E58-5B3823F692D3__GUID-52660DEA-2A76-4844-AF39-57325343AC75">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="database-gateway-sqlserver-supported-sql-syntax-functions.html#GUID-D66F13BA-ADEC-4596-BED5-2F68539E93EB">支持的SQL语法和函数</a> ，以获取有关SQL语法限制的更多信息。
                        </p>
                     </div>
                  </div><a id="GMSWN735"></a><div class="props_rev_3"><a id="GUID-F6BB2D1C-43C5-45D6-9DF7-7EDFB5D4110F" name="GUID-F6BB2D1C-43C5-45D6-9DF7-7EDFB5D4110F"></a><h5 id="GMSWN-GUID-F6BB2D1C-43C5-45D6-9DF7-7EDFB5D4110F" class="sect5">条款的当前条款</h5>
                     <div>
                        <p>网关不支持带有<code class="codeph">WHERE CURRENT OF</code>子句的<code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句，因为它们依赖于Oracle <a id="d2170e2249" class="indexterm-anchor"></a> <code class="codeph">ROWID</code>实现。要通过网关更新或删除特定行，必须使用条件样式<code class="codeph">WHERE</code>子句。
                        </p>
                     </div>
                  </div><a id="GMSWN736"></a><div class="props_rev_3"><a id="GUID-9507E1B9-F5C7-46E8-B6F7-ADFAEF97169D" name="GUID-9507E1B9-F5C7-46E8-B6F7-ADFAEF97169D"></a><h5 id="GMSWN-GUID-9507E1B9-F5C7-46E8-B6F7-ADFAEF97169D" class="sect5">通过条款连接</h5>
                     <div>
                        <p>网关不支持<code class="codeph">SELECT</code>语句中的<code class="codeph">CONNECT BY</code>子句。
                        </p>
                     </div>
                  </div><a id="GMSWN737"></a><div class="props_rev_3"><a id="GUID-27AC7EAF-EA59-415F-A017-C75A42B21731" name="GUID-27AC7EAF-EA59-415F-A017-C75A42B21731"></a><h5 id="GMSWN-GUID-27AC7EAF-EA59-415F-A017-C75A42B21731" class="sect5">子查询中的函数</h5>
                     <div>
                        <p>当<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code> SQL语句中的子查询的一部分时，不支持绑定变量和表达式作为字符串函数或数学函数中的操作数。
                        </p>
                     </div>
                  </div><a id="GMSWN738"></a><div class="props_rev_3"><a id="GUID-F6EBB574-0983-4A5A-9C5F-576E8C4C70BA" name="GUID-F6EBB574-0983-4A5A-9C5F-576E8C4C70BA"></a><h5 id="GMSWN-GUID-F6EBB574-0983-4A5A-9C5F-576E8C4C70BA" class="sect5">子查询中的参数</h5>
                     <div>
                        <p>由于SQL Server的限制，您不能在子查询中使用参数。</p>
                     </div>
                  </div><a id="GMSWN739"></a><div class="props_rev_3"><a id="GUID-DC68B356-6407-4435-9181-E17B28ED4914" name="GUID-DC68B356-6407-4435-9181-E17B28ED4914"></a><h5 id="GMSWN-GUID-DC68B356-6407-4435-9181-E17B28ED4914" class="sect5">UPDATE语句中的数据字典表和视图</h5>
                     <div>
                        <p>不支持<code class="codeph">UPDATE</code>语句的<code class="codeph">SET</code>子句中的数据字典表和视图。
                        </p>
                     </div>
                  </div><a id="GMSWN740"></a><div class="props_rev_3"><a id="GUID-587A5ECF-58F2-4DCE-9DDD-093F9BE61745" name="GUID-587A5ECF-58F2-4DCE-9DDD-093F9BE61745"></a><h5 id="GMSWN-GUID-587A5ECF-58F2-4DCE-9DDD-093F9BE61745" class="sect5">ROWID</h5>
                     <div>
                        <p>不支持Oracle <code class="codeph">ROWID</code>实现。
                        </p>
                     </div>
                  </div><a id="GMSWN741"></a><div class="props_rev_3"><a id="GUID-35FE17FE-DF60-417A-ABEC-F424CCE9EE42" name="GUID-35FE17FE-DF60-417A-ABEC-F424CCE9EE42"></a><h5 id="GMSWN-GUID-35FE17FE-DF60-417A-ABEC-F424CCE9EE42" class="sect5">至今</h5>
                     <div>
                        <p><code class="codeph">TO_DATE</code>是保留字，不能用作数据库标识符名称。
                        </p>
                     </div>
                  </div><a id="GMSWN742"></a><div class="props_rev_3"><a id="GUID-32B73FD6-D082-4A81-9164-53D7307CFC39" name="GUID-32B73FD6-D082-4A81-9164-53D7307CFC39"></a><h5 id="GMSWN-GUID-32B73FD6-D082-4A81-9164-53D7307CFC39" class="sect5">解释计划声明</h5>
                     <div>
                        <p>不支持<code class="codeph">EXPLAIN PLAN</code>语句。
                        </p>
                     </div>
                  </div>
               </div><a id="GMSWN744"></a><div class="props_rev_3"><a id="GUID-E6C63A61-FBFC-4B6A-9B0C-B819B4E7CCD3" name="GUID-E6C63A61-FBFC-4B6A-9B0C-B819B4E7CCD3"></a><h4 id="GMSWN-GUID-E6C63A61-FBFC-4B6A-9B0C-B819B4E7CCD3" class="sect4">功能</h4>
                  <div>
                     <p>以下限制适用于使用功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不支持的函数不能在引用<code class="codeph">LONG</code>列的语句中使用。
                           </p>
                        </li>
                        <li>
                           <p>当负数用作<code class="codeph">SUBSTR</code>函数中的第二个参数时，将返回不正确的结果。这是由于Oracle <code class="codeph">SUBSTR</code>功能与SQL Server中的等效功能不兼容。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="GMSWN745"></a><div class="props_rev_3"><a id="GUID-3AA39252-2AA8-43C1-A846-3E56026ECB13" name="GUID-3AA39252-2AA8-43C1-A846-3E56026ECB13"></a><h4 id="GMSWN-GUID-3AA39252-2AA8-43C1-A846-3E56026ECB13" class="sect4">带有小写表名的SQL * Plus COPY命令</h4>
                  <div>
                     <p>您需要用小引号包装小写表名。</p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">复制自tkhouser / tkhouser @ inst1使用select * from“tkhodept”@ holink2插入loc_tkhodept;</pre></div>
               </div><a id="GMSWN746"></a><div class="props_rev_3"><a id="GUID-263C4864-9E01-4994-A55C-7CFACDF874F8" name="GUID-263C4864-9E01-4994-A55C-7CFACDF874F8"></a><h4 id="GMSWN-GUID-263C4864-9E01-4994-A55C-7CFACDF874F8" class="sect4">数据库链接</h4>
                  <div>
                     <p>网关不是多线程的，不支持共享数据库链接。每个网关会话都会生成一个单独的网关进程，并且无法共享连接。</p>
                  </div>
               </div>
            </div><a id="GMSWN747"></a><div class="props_rev_3"><a id="GUID-D6FB014B-53E0-41A4-B163-0FBB469151DB" name="GUID-D6FB014B-53E0-41A4-B163-0FBB469151DB"></a><h3 id="GMSWN-GUID-D6FB014B-53E0-41A4-B163-0FBB469151DB" class="sect3">已知问题</h3>
               <div>
                  <p>本节介绍已知问题，并包括在可能的情况下进行纠正的建议。如果您对问题有任何疑问或疑虑，请联系Oracle支持服务。可在线获取当前的问题列表。有关访问列表的信息，请与当地的Oracle办事处联系。</p>
                  <p>本节描述了以下已知问题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-1FB8BB9A-E0E8-4920-8D3C-E11B07001958">加密格式登录</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-4F243177-A053-4A00-9C6B-A9C65756871D">日期算术</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-522784C7-87F8-43B7-9C9C-B624BAEBB269">SQL Server IMAGE_ TEXT和NTEXT数据类型</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-C95B5741-B40A-4D49-A45E-188F018FFCCD">字符串函数</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-20474B79-62AD-4322-8FDB-74C47ECBA682">架构名称和PL / SQL</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-4527FCE1-B460-4156-8416-4167CD8AE014">数据字典视图和PL / SQL</a></p>
                     </li>
                     <li>
                        <p><a href="database-gateway-sqlserver-features.html#GUID-8FA7D620-EB99-44A8-A64E-0A458716C003">存储过程</a></p>
                     </li>
                  </ul>
               </div><a id="GMSWN748"></a><div class="props_rev_3"><a id="GUID-1FB8BB9A-E0E8-4920-8D3C-E11B07001958" name="GUID-1FB8BB9A-E0E8-4920-8D3C-E11B07001958"></a><h4 id="GMSWN-GUID-1FB8BB9A-E0E8-4920-8D3C-E11B07001958" class="sect4">加密格式登录</h4>
                  <div>
                     <p>Oracle9 <span class="italic">i</span>数据库（9.2版及更早版本）支持Oracle初始化参数<code class="codeph">DBLINK_ENCRYPT_LOGIN</code> 。当此参数设置为<code class="codeph">TRUE</code> ，不会通过网络发送登录用户ID的密码。
                     </p>
                     <p>如果在Oracle9 <span class="italic">i</span>数据库使用的初始化参数文件中将此参数设置为<code class="codeph">TRUE</code> ，则必须将设置更改为<code class="codeph">FALSE</code> （默认设置），以允许Oracle9 <span class="italic">i</span>与网关通信。
                     </p>
                     <p>在当前版本中， <code class="codeph">DBLINK_ENCRYPT_LOGIN</code>初始化参数已过时，因此您无需进行检查。
                     </p>
                  </div>
               </div><a id="GMSWN749"></a><div class="props_rev_3"><a id="GUID-4F243177-A053-4A00-9C6B-A9C65756871D" name="GUID-4F243177-A053-4A00-9C6B-A9C65756871D"></a><h4 id="GMSWN-GUID-4F243177-A053-4A00-9C6B-A9C65756871D" class="sect4">日期算术</h4>
                  <div>
                     <p>以下SQL表达式无法与网关正常运行：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">日期</span> + <span class="italic">数字</span> <span class="italic">编号</span> + <span class="italic">日期</span>日期- <span class="italic">数</span> DATE1 - <span class="italic">DATE2</span>
</pre><p>具有前面表达式的语句将发送到SQL Server数据库，而不进行任何转换。由于SQL Server不支持这些日期算术函数，因此语句会返回错误。</p>
                  </div>
               </div><a id="GMSWN750"></a><div class="props_rev_3"><a id="GUID-522784C7-87F8-43B7-9C9C-B624BAEBB269" name="GUID-522784C7-87F8-43B7-9C9C-B624BAEBB269"></a><h4 id="GMSWN-GUID-522784C7-87F8-43B7-9C9C-B624BAEBB269" class="sect4">SQL Server IMAGE，TEXT和NTEXT数据类型</h4>
                  <div>
                     <p>使用<code class="codeph">IMAGE</code> ， <code class="codeph">TEXT</code>和<code class="codeph">NTEXT</code>数据类型时，以下限制适用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不支持的SQL函数不能在访问定义为SQL Server数据类型<code class="codeph">IMAGE</code> ， <code class="codeph">TEXT</code>或<code class="codeph">NTEXT</code>的列的SQL语句中使用。</p>
                        </li>
                        <li>
                           <p>当数据长度超过80个字符时，不能使用SQL * Plus从定义为SQL Server数据类型<code class="codeph">IMAGE</code> ， <code class="codeph">TEXT</code>或<code class="codeph">NTEXT</code>的列中选择数据。Oracle建议使用Pro * C或Oracle Call Interface访问SQL Server数据库中的此类数据。
                           </p>
                        </li>
                        <li>
                           <p>无法通过传递查询读取<code class="codeph">IMAGE</code> ， <code class="codeph">TEXT</code>和<code class="codeph">NTEXT</code>数据。
                           </p>
                        </li>
                        <li>
                           <p>如果SQL语句正在访问包含<code class="codeph">IMAGE</code> ， <code class="codeph">TEXT</code>或<code class="codeph">NTEXT</code>列的表，则该语句将作为两个单独的语句发送到SQL Server。一个语句用于访问<code class="codeph">IMAGE</code> ， <code class="codeph">TEXT</code>或<code class="codeph">NTEXT</code>列，另一个语句用于原始语句中的其他列。
                           </p>
                        </li>
                     </ul>
                     <p>网关不支持<code class="codeph">DBMS_SQL</code>包的PL / SQL函数<code class="codeph">COLUMN_VALUE_LONG</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-522784C7-87F8-43B7-9C9C-B624BAEBB269__GUID-A7B96452-7AFA-4044-BC86-2B22DAA60804">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="database-gateway-sqlserver-supported-sql-syntax-functions.html#GUID-D66F13BA-ADEC-4596-BED5-2F68539E93EB">支持的SQL语法和函数</a> ，以获取有关SQL语法限制的更多信息。
                        </p>
                     </div>
                  </div>
               </div><a id="GMSWN751"></a><div class="props_rev_3"><a id="GUID-C95B5741-B40A-4D49-A45E-188F018FFCCD" name="GUID-C95B5741-B40A-4D49-A45E-188F018FFCCD"></a><h4 id="GMSWN-GUID-C95B5741-B40A-4D49-A45E-188F018FFCCD" class="sect4">字符串函数</h4>
                  <div>
                     <p>如果使用“ <code class="codeph">||</code> ”或连接数字文字<a id="d2170e2987" class="indexterm-anchor"></a> <code class="codeph">CONCAT</code>运算符在使用网关查询SQL Server数据库时，结果是算术加法。例如，以下语句的结果为18：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT 9 || 9 FROM DUAL @ MSQL;</pre><p>使用Oracle查询Oracle数据库时，结果为99。</p>
                  </div>
               </div><a id="GMSWN752"></a><div class="props_rev_3"><a id="GUID-20474B79-62AD-4322-8FDB-74C47ECBA682" name="GUID-20474B79-62AD-4322-8FDB-74C47ECBA682"></a><h4 id="GMSWN-GUID-20474B79-62AD-4322-8FDB-74C47ECBA682" class="sect4">架构名称和PL / SQL</h4>
                  <div>
                     <p>如果不在PL / SQL块的SQL语句中为SQL Server数据库对象添加其模式名称，则会出现以下错误消息：</p><pre class="oac_no_warn" dir="ltr">必须声明ORA-6550 PLS-201标识符<span class="italic">table_name</span> 。
</pre><p>更改SQL语句以包括对象的模式名称。</p>
                  </div>
               </div><a id="GMSWN753"></a><div class="props_rev_3"><a id="GUID-4527FCE1-B460-4156-8416-4167CD8AE014" name="GUID-4527FCE1-B460-4156-8416-4167CD8AE014"></a><h4 id="GMSWN-GUID-4527FCE1-B460-4156-8416-4167CD8AE014" class="sect4">数据字典视图和PL / SQL</h4>
                  <div>
                     <p>您不能在PL / SQL块内的SQL语句中引用数据字典视图。</p>
                  </div>
               </div><a id="GMSWN754"></a><div class="props_rev_3"><a id="GUID-8FA7D620-EB99-44A8-A64E-0A458716C003" name="GUID-8FA7D620-EB99-44A8-A64E-0A458716C003"></a><h4 id="GMSWN-GUID-8FA7D620-EB99-44A8-A64E-0A458716C003" class="sect4">存储过程</h4>
                  <div>
                     <p>返回结果集的存储过程的返回值不正确。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="12895.resolving-performance-degradation-over-time.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>解决随时间推移的性能下降问题</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-2-day-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:50:24-08:00"></meta>
      <meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96346-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="resolving-transient-performance-problems.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-automatic-workload-repository-warehouse.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TDPPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="resolving-transient-performance-problems.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-automatic-workload-repository-warehouse.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库2天+性能调整指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-reactive-database-tuning.html" property="item" typeof="WebPage"><span property="name">反应性数据库调整</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">解决随时间推移的性能下降问题</li>
            </ol>
            <a id="GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8" name="GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8"></a><a id="TDPPT089"></a>
            
            <h2 id="TDPPT-GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8" class="sect2"><span class="enumeration_chapter">9</span>随着时间的推移解决性能下降问题</h2>
         </header>
         <div class="ind">
            <div>
               <p>当您的数据库在过去（例如6个月前）以最佳状态执行时，数据库的性能下降会发生，但会逐渐降级到用户可能会注意到的程度。该<a id="d17088e80" class="indexterm-anchor"></a><a id="d17088e86" class="indexterm-anchor"></a><a id="d17088e90" class="indexterm-anchor"></a><a id="d17088e94" class="indexterm-anchor"></a>自动工作负载存储库（AWR）比较期间报告使您可以比较两个时间段之间的数据库性能。
               </p>
               <p>虽然AWR报告显示两个快照（或两个时间点）之间的AWR数据，但AWR比较周期报告显示两个周期（或两个AWR报告，总共四个快照）之间的差异。使用AWR比较期间报告可帮助您识别两个时间段之间不同的详细性能属性和配置设置。为AWR比较期间报告选择的两个时间段可以具有不同的持续时间。该报告通过每个时间段在数据库上花费的时间量来统计统计数据，并显示按周期之间的最大差异排序的统计数据。</p>
               <p>例如，历史上在晚上10点到午夜之间在维护窗口中完成的批处理工作负载当前显示性能不佳并且在凌晨2点完成。您可以在性能当天的晚上10点到午夜生成AWR比较期间报告表现不佳，从上午10点到凌晨2点表现不错。这些报告的比较应确定这两个时间段内不同的配置设置，工作负载配置文件和统计信息。根据确定的差异，您可以诊断性能下降的原因。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="resolving-performance-degradation-over-time.html#GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0">管理基准</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-performance-degradation-over-time.html#GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486">运行AWR比较期间报告</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313">使用AWR比较期间报告</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8__GUID-5F4F94BC-A6AA-4906-B67A-626F758BE1A6">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="oracle-database-performance-method.html#GUID-811C438C-149B-4BFE-A40A-1FAF2BF67C95">使用自动工作负载存储库收集数据库统计信息</a> ”</span></p>
                     </li>
                  </ul>
               </div>
            </div><a id="TDPPT230"></a><div class="props_rev_3"><a id="GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0" name="GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0"></a><h3 id="TDPPT-GUID-37F8C7A8-241D-4F9D-A120-24DED3A7BFA0" class="sect3"><span class="enumeration_section">9.1</span>管理基线</h3>
               <div>
                  <p>基线<a id="d17088e211" class="indexterm-anchor"></a><a id="d17088e215" class="indexterm-anchor"></a>是诊断性能问题的有效方法。AWR <a id="d17088e220" class="indexterm-anchor"></a>通过使您能够指定和保留一对或一系列快照作为基线，支持捕获基线数据。基线中包含的快照将从自动AWR清除过程中排除，并将无限期保留。
                  </p>
                  <p>移动窗口基线对应于AWR保留期内存在的所有AWR数据。Oracle数据库自动维护系统定义的移动窗口基线。窗口的默认大小是当前AWR保留期，默认为8天。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8">创建基线</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E">删除基线</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C">计算基线的阈值统计</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270">设置基准的度量标准阈值</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT231"></a><div class="props_rev_3"><a id="GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8" name="GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8"></a><h4 id="TDPPT-GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8" class="sect4"><span class="enumeration_section">9.1.1</span>创建基线</h4>
                  <div>
                     <p><a id="d17088e331" class="indexterm-anchor"></a>在创建基线之前，请仔细考虑您选择的基准时间段，因为它应表示数据库在最佳级别运行。将来，您可以将这些基准与在性能不佳期间捕获的其他基准或快照进行比较，以分析性能随时间的降低。
                     </p>
                     <p>您可以创建以下类型的基线：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C">创建重复基线</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT232"></a><div class="props_rev_3"><a id="GUID-DD973799-98E7-446C-AACA-7A185666D81E" name="GUID-DD973799-98E7-446C-AACA-7A185666D81E"></a><h5 id="TDPPT-GUID-DD973799-98E7-446C-AACA-7A185666D81E" class="sect5"><span class="enumeration_section">9.1.1.1</span>创建单个基准</h5>
                     <div>
                        <div class="section">
                           <p>在单个固定时间间隔捕获单个基线。例如，可以在2012年2月5日下午5:00到晚上8:00捕获单个基线</p>
                           <p>您可以选择将来的开始和结束时间来创建捕获未来数据库活动的基准。如果开始时间和结束时间都在将来，则还会创建与基线同名的基线模板。一个<a id="d17088e434" class="indexterm-anchor"></a>基准模板是一种规范，它使Oracle数据库能够自动生成未来时间段的基准。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-F8E86AB7-09EB-4DE0-9A41-F60D43C8C6B8">要创建单个基线：</p>
                           <ol>
                              <li>
                                 <p>访问数据库主页。</p>
                                 <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">AWR Administration</span> 。
                                 </p>
                                 <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将出现“性能”页面。</p>
                              </li>
                              <li>
                                 <p>在“管理快照和基准”下，单击“基准”旁边的数字。</p>
                                 <p>将显示“AWR基准”页面，其中显示了现有基准的列表。</p>
                                 <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-C4CEFDE0-AE9A-4088-8978-0880D9AC418B"><img src="img/awr_baselines.gif" alt="awr_baselines.gif的描述如下" title="awr_baselines.gif的描述如下" longdesc="img_text/awr_baselines.html"><br><a href="img_text/awr_baselines.html">说明awr_baselines.gif的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>
                                 </p>
                                 <p>将显示“创建基准：基线间隔类型”页面。</p>
                              </li>
                              <li>
                                 <p>选择<span class="bold">单一</span> 。
                                 </p>
                                 <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-0FB4482F-C156-4FB8-8B07-555A1270ABD4"><img src="img/baseline_interval_single.gif" alt="baseline_interval_single.gif的描述如下" title="baseline_interval_single.gif的描述如下" longdesc="img_text/baseline_interval_single.html"><br><a href="img_text/baseline_interval_single.html">插图描述baseline_interval_single.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>单击<span class="bold">继续</span> 。
                                 </p>
                                 <p>将出现“创建基准：单基线”页面。</p>
                                 <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-823BEF04-26A0-4548-A7E8-10E79FD8C4C7"><img src="img/create_baseline_single.gif" alt="下面是create_baseline_single.gif的描述" title="下面是create_baseline_single.gif的描述" longdesc="img_text/create_baseline_single.html"><br><a href="img_text/create_baseline_single.html">插图描述create_baseline_single.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>在“ <span class="bold">基准名称”</span>字段中，输入<span class="bold">基准的名称</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“基准时间间隔”下，选择是使用基准的快照范围还是时间范围。执行以下操作之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>要使用范围，请选择“ <span class="bold">快照范围”</span> 。完成以下步骤：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>在“选择时间段”下，通过选择“ <span class="bold">期间开始时间”</span>和“活动会话”图表下方与所需开始时间对应的快照图标，选择基准的开始时间。
                                             </p>
                                          </li>
                                          <li>
                                             <p>通过选择“ <span class="bold">期末结束时间”</span>和“活动会话”图表下方与所需结束时间对应的快照图标，选择基准的结束时间。
                                             </p>
                                          </li>
                                          <li>
                                             <p>（可选）要查看未在“活动会话”图表下方显示的较旧快照，请展开“ <span class="bold">更改图表时间段”</span> 。在“ <span class="bold">图表开始日期”</span>字段中输入所需的开始日期，在“ <span class="bold">结束日期”</span>字段中输入所需的结束日期，然后单击<span class="bold">“执行”</span> 。</p>
                                          </li>
                                       </ul>
                                       <p>在此示例中，选择了2012年2月7日上午10:50到11:20的快照范围。</p>
                                       <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-2AE1C3F9-3C70-4B28-8C79-C1A422A17757"><img src="img/baseline_snapshot_range.gif" alt="baseline_snapshot_range.gif的描述如下" title="baseline_snapshot_range.gif的描述如下" longdesc="img_text/baseline_snapshot_range.html"><br><a href="img_text/baseline_snapshot_range.html">插图描述baseline_snapshot_range.gif</a></div>
                                       <!-- class="figure" -->
                                    </li>
                                    <li>
                                       <p>要使用时间范围，请选择<span class="bold">时间范围</span> 。完成以下步骤：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>在“ <span class="bold">开始时间”</span>字段中，选择基准的开始时间。
                                             </p>
                                          </li>
                                          <li>
                                             <p>在“ <span class="bold">结束时间”</span>字段中，选择基准的结束时间。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>在以下示例中，选择2012年2月7日下午12:20至下午12:35的时间范围。</p>
                                       <div class="figure" id="GUID-DD973799-98E7-446C-AACA-7A185666D81E__GUID-94337892-A02B-4C83-9047-C51ED8EA8CE6"><img src="img/create_baseline_time_range.gif" alt="下面是create_baseline_time_range.gif的描述" title="下面是create_baseline_time_range.gif的描述" longdesc="img_text/create_baseline_time_range.html"><br><a href="img_text/create_baseline_time_range.html">说明create_baseline_time_range.gif的说明</a></div>
                                       <!-- class="figure" -->
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>单击<span class="bold">完成</span> 。
                                 </p>
                                 <p>AWR Baselines页面重新出现，显示新创建的基线。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPPT233"></a><div class="props_rev_3"><a id="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C" name="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C"></a><h5 id="TDPPT-GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C" class="sect5"><span class="enumeration_section">9.1.1.2</span>创建重复基线</h5>
                     <div>
                        <div class="section">
                           <p>重复基线是在特定时间段内的时间间隔内重复的基线。例如，重复基线可以在2012年2月7日至2013年2月7日的每个星期一下午1:00至3:00重复。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C__GUID-584FD55E-172D-41CC-9341-D45CD72DBF45">要创建重复基线：</p>
                           <ol>
                              <li>
                                 <p>访问“AWR基线”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>
                                 </p>
                                 <p>将显示“创建基准：基线间隔类型”页面。</p>
                              </li>
                              <li>
                                 <p>选择“ <span class="bold">重复”</span> ，然后单击“ <span class="bold">继续”</span> 。
                                 </p>
                                 <p>将出现“创建基准：重复基准模板”页面。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">基准名称前缀”</span>字段中，输入<span class="bold">基准的名称前缀</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“基准时间段”下，指定希望基准开始收集AWR数据的时间和基准收集的持续时间。</p>
                              </li>
                              <li>
                                 <p>在“频率”下，执行以下操作之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果您希望每天重复基线，请选择<span class="bold">每日</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果你想基线重复每周选择<span class="bold">每周</span> ，然后选择要在其基线重复星期几。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>在基线创建间隔下，完成以下步骤：</p>
                                 <ol type="a">
                                    <li>
                                       <p>在“ <span class="bold">开始时间”</span>字段中，选择数据收集开始时的日期和时间。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">结束时间”</span>字段中，选择数据收集结束时的日期和时间。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在“清除策略”下，输入保留捕获的基准的天数。</p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">完成</span> 。
                                 </p>
                                 <p>将创建与基线名称前缀同名的基准模板。一个<a id="d17088e752" class="indexterm-anchor"></a>基准模板是一种规范，它使Oracle数据库能够自动生成未来时间段的基准。
                                 </p>
                                 <p>此示例创建一个基线，该基线每周一次从2009年2月6日上午8:00到10:00再到2010年2月6日重复。每个捕获的基线在30天后到期。</p>
                                 <div class="figure" id="GUID-CC5848D2-0C5F-42A5-91FF-049D21515B2C__GUID-769EFDDA-2C77-494F-9CAC-A74FD8280436"><img src="img/create_baseline_repeating.gif" alt="下面是create_baseline_repeating.gif的描述" title="下面是create_baseline_repeating.gif的描述" longdesc="img_text/create_baseline_repeating.html"><br><a href="img_text/create_baseline_repeating.html">插图描述create_baseline_repeating.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TDPPT234"></a><div class="props_rev_3"><a id="GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E" name="GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E"></a><h4 id="TDPPT-GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E" class="sect4"><span class="enumeration_section">9.1.2</span>删除基线</h4>
                  <div>
                     <div class="section">
                        <p><a id="d17088e846" class="indexterm-anchor"></a>要节省存储空间，您可能需要定期删除存储在数据库中的未使用的基准。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-11A9CFFC-CBD1-47FF-904D-03B003C21A2E__GUID-3B611C9D-470B-4AFB-A568-1BCF9C65B340">删除基线：</p>
                        <ol>
                           <li>
                              <p>访问“AWR基线”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>选择基准，然后单击“ <span class="bold">删除”</span> 。
                              </p>
                              <p>将出现“确认”页面。</p>
                           </li>
                           <li>
                              <p>选择是否清除与基线关联的基础数据。</p>
                              <p>基础数据包括基线中保留的各个快照以及为基准计算的任何统计信息。执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要删除基础数据，请选择“ <span class="bold">清除与基准关联的基础数据”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要保留基础数据，请选择<span class="bold">“不清除与基准关联的基础数据”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击<span class="bold">是</span> 。
                              </p>
                              <p>AWR Baselines页面重新出现。将显示一条消息，通知您已成功删除基线。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT235"></a><div class="props_rev_3"><a id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C" name="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C"></a><h4 id="TDPPT-GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C" class="sect4"><span class="enumeration_section">9.1.3</span>计算基线的阈值统计信息</h4>
                  <div>
                     <div class="section">
                        <p><a id="d17088e980" class="indexterm-anchor"></a>通过计算基线的阈值统计信息，您可以在“性能”页面的图表中以图形方式显示计算的统计数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C__GUID-5B8B2F29-529E-496A-B55B-9BCB7F84C25F">要计算基线的阈值统计信息：</p>
                        <ol>
                           <li>
                              <p>访问“AWR基线”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-DD973799-98E7-446C-AACA-7A185666D81E">创建单个基线</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>选择要为其计算统计信息的基准。</p>
                              <p>选择尚未具有计算统计数据的基线。这些基线在Statistics Computed列中由No标识。</p>
                           </li>
                           <li>
                              <p>从“操作”列表中，选择“ <span class="bold">计划统计计算”</span> ，然后单击<span class="bold">“执行”</span> 。</p>
                              <p>将出现“计算阈值统计信息”页面。</p>
                              <p>此示例计算基线<code class="codeph">BASELINE_TUE_1120</code>统计信息。
                              </p>
                              <div class="figure" id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C__GUID-8B2F1E31-856D-4CF9-B098-CE502AE795DE"><img src="img/compute_threshold_stats.gif" alt="compute_threshold_stats.gif的描述如下" title="compute_threshold_stats.gif的描述如下" longdesc="img_text/compute_threshold_stats.html"><br><a href="img_text/compute_threshold_stats.html">说明compute_threshold_stats.gif的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“ <span class="bold">名称”</span>字段中，输入任务的名称。
                              </p>
                              <p>或者，您可以选择使用系统生成的名称。</p>
                           </li>
                           <li>
                              <p>在“ <span class="bold">描述”</span>字段中，输入任务的描述。
                              </p>
                              <p>或者，您可以选择使用系统生成的描述。</p>
                           </li>
                           <li>
                              <p>在“开始”下，执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">立即</span>以在提交任务后<span class="bold">立即</span>运行任务。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">稍后”</span>以使用“日期和时间”字段在以后指定的时间运行任务。
                                    </p>
                                 </li>
                              </ul>
                              <p>此计算是资源密集型的，因此您可能希望将其安排在非高峰时段运行。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">提交”</span>
                              </p>
                              <p>将显示“AWR基准”页面。将显示一条消息，通知您已为所选基准安排了统计计算。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-63B691E7-9A7D-443D-98C3-4C287B3CBE5C__GUID-6586D6A8-2066-4732-95C1-D297110E019B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-81073595-A0B0-474C-937B-376B58D7C414">自定义数据库性能页面</a> ”，</span>以获取有关在“性能”页面上显示计算统计信息的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT332"></a><div class="props_rev_3"><a id="GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270" name="GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270"></a><h4 id="TDPPT-GUID-2831079F-326B-4F10-8B4F-D90DC0FDE270" class="sect4"><span class="enumeration_section">9.1.4</span>设置基线的度量阈值</h4>
                  <div>
                     <p>如<span class="q">“ <a href="monitoring-performance-alerts.html#GUID-E4359985-FDE3-4083-AC4F-09E711B0E4B9">为性能警报设置度量标准阈值</a> ”中所述</span> ，a <a id="d17088e1160" class="indexterm-anchor"></a> metric是累积统计量的变化率。警报会在超过特定指标阈值时通知您。当超过度量阈值时，系统处于不合需要的状态。您可以编辑基准指标的阈值设置。
                     </p>
                     <p>您可以创建以下类型的基线：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-FC994193-0397-44D2-87DB-32D222E9EFD9">设置默认移动基线的度量标准阈值</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F">设置所选基准的度量标准阈值</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT333"></a><div class="props_rev_3"><a id="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9" name="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9"></a><h5 id="TDPPT-GUID-FC994193-0397-44D2-87DB-32D222E9EFD9" class="sect5"><span class="enumeration_section">9.1.4.1</span>设置默认移动基线的度量阈值</h5>
                     <div>
                        <div class="section">
                           <p>本节介绍了为默认移动基线设置度量标准阈值的最简单方法。您可以根据常见的数据库工作负载配置文件（如OLTP，数据仓库和OLTP以及夜间批处理作业）选择一组基本度量标准阈值设置。选择工作负载配置文件后，您可以根据需要扩展或更改阈值。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9__GUID-CC436CB8-6F6A-47D6-828A-6F07182526AC">要为默认移动基线设置度量标准阈值：</p>
                           <ol>
                              <li>
                                 <p>访问数据库主页。</p>
                                 <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">自适应阈值”</span> 。
                                 </p>
                                 <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。</p>
                                 <p>将显示“基准度量标准阈值”页面的“阈值配置”选项卡。</p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">快速配置</span> 。
                                 </p>
                                 <p>将显示“快速配置：基准度量标准阈值”页面。</p>
                              </li>
                              <li>
                                 <p>在<span class="bold">Workload Profile中</span> ，根据您使用数据库的方式选择以下选项之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="bold">主要是OLTP（一天24小时纯处理）</span></p>
                                    </li>
                                    <li>
                                       <p><span class="bold">主要是数据仓库（查询和负载密集型）</span></p>
                                    </li>
                                    <li>
                                       <p><span class="bold">交替（白天OLTP和夜间批处理）</span></p>
                                    </li>
                                 </ul>
                                 <p>在此示例中，选择了<span class="bold">主要OLTP</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">继续</span> 。
                                 </p>
                                 <p>将显示“快速配置：查看OLTP阈值设置”页面。</p>
                                 <div class="figure" id="GUID-FC994193-0397-44D2-87DB-32D222E9EFD9__GUID-21CE67EB-B766-4FF5-847F-90A7260D44A8"><img src="img/threshold_quick.gif" alt="threshold_quick.gif的描述如下" title="threshold_quick.gif的描述如下" longdesc="img_text/threshold_quick.html"><br><a href="img_text/threshold_quick.html">说明threshold_quick.gif的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>查看度量标准阈值设置，然后单击“ <span class="bold">完成”</span> 。
                                 </p>
                                 <p>您将返回“基准度量标准阈值”页面，并选中“阈值配置”选项卡。将显示度量标准阈值设置。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPPT334"></a><div class="props_rev_3"><a id="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F" name="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F"></a><h5 id="TDPPT-GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F" class="sect5"><span class="enumeration_section">9.1.4.2</span>设置所选基准的度量标准阈值</h5>
                     <div>
                        <div class="section">
                           <p>本节介绍如何选择基准并编辑其阈值。您可以配置阈值类型，例如，它是基于显着性级别，最大值百分比还是固定值。您还可以配置阈值级别，以确定数据库何时生成严重警报和警告。</p>
                           <p>您可以编辑默认移动基线的阈值或您在AWR基线页面中创建的基线。从AWR Baselines页面调度统计计算后，您可以在Edit Thresholds页面中选择基线，并且统计数据已在静态基线上完成计算。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F__GUID-0ED294DD-0043-4BE8-BE05-FFF02EC8535F">要为选定的移动基线设置度量标准阈值：</p>
                           <ol>
                              <li>
                                 <p>访问“基准度量标准阈值”页面，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-FC994193-0397-44D2-87DB-32D222E9EFD9">设置默认移动基准的度量标准阈值</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“视图”列表中，选择“ <span class="bold">基本度量标准”</span> 。
                                 </p>
                                 <p>将显示“基准度量标准阈值”页面。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="bold">类别/名称”</span>列中，单击要设置或更改其阈值的度量标准的链接。
                                 </p>
                                 <p>例如，单击<span class="bold">“事务数”（每秒）</span> 。
                                 </p>
                                 <p>将显示“编辑阈值：事务数（每秒）”。</p>
                                 <div class="figure" id="GUID-21C62E49-F7FC-4C8D-AD00-5AC38477449F__GUID-C3AF6895-568A-4143-BF3E-5EC88A1CBEE1"><img src="img/edit_thresholds.gif" alt="edit_thresholds.gif的描述如下" title="edit_thresholds.gif的描述如下" longdesc="img_text/edit_thresholds.html"><br><a href="img_text/edit_thresholds.html">插图描述edit_thresholds.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>此页面上的图表提供了24小时内度量标准活动的简单而详细的视图。在顶部简单图表中，单击一天以查看针对24小时周期绘制的指标值。</p>
                              </li>
                              <li>
                                 <p>在<span class="bold">AWR Baseline</span>下的Name列表中，选择默认的<span class="bold">SYSTEM_MOVING_WINDOW</span>或AWR Baselines页面中创建的基线的名称。
                                 </p>
                                 <p>从AWR基线页面调度统计计算并且统计信息已在静态基线上完成计算后，AWR基线列表中将显示基线。</p>
                                 <p>在此示例中，选择了<code class="codeph">BASELINE_TUE_1120</code> 。
                                 </p>
                                 <p>页面刷新以显示您选择的基线的图表。</p>
                              </li>
                              <li>
                                 <p>在“阈值设置”部分中，完成以下步骤以更改设置：</p>
                                 <ol type="a">
                                    <li>
                                       <p>在“ <span class="bold">阈值类型”</span>列表中，选择一种类型。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">关键”</span>列表中，选择一个级别。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">警告”</span>列表中，选择一个值。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“ <span class="bold">出现次数”</span>列表中，选择一个值。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">应用阈值”</span> 。
                                 </p>
                                 <p>“基准度量标准阈值”页面重新出现。该页面显示已更改的度量标准阈值设置。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TDPPT091"></a><div class="props_rev_3"><a id="GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486" name="GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486"></a><h3 id="TDPPT-GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486" class="sect3"><span class="enumeration_section">9.2</span>运行AWR比较周期报告</h3>
               <div>
                  <p>本节介绍如何使用企业管理器云控制（云控制）运行AWR比较期间报告。</p>
                  <p>您可以使用AWR比较期间报告来比较两个时间段之间的数据库性能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3">比较基线与另一个基线或一对快照</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684">比较当前系统性能与基准期</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB">比较两对快照</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT137"></a><div class="props_rev_3"><a id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3" name="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3"></a><h4 id="TDPPT-GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3" class="sect4"><span class="enumeration_section">9.2.1</span>比较基线与另一个基线或一对快照</h4>
                  <div>
                     <div class="section">
                        <p>当性能下降时，您可以运行AWR比较周期报告，将作为新基线或一对快照捕获的性能下降的性能与现有基准进行比较。您必须具有表示系统以最佳级别运行的基线。如果现有基线不可用，则使用两对任意快照比较两个时间段之间的数据库性能，如<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB">比较两对快照</a> ”中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-837EBBD0-8E92-4289-A279-434364DCC283">要将基线与另一个基线进行比较：</p>
                        <ol>
                           <li>
                              <p>访问数据库主页。</p>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">AWR Administration</span> 。
                              </p>
                              <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将显示“自动工作负载存储库”页面。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-5ABF653D-AB8E-49E2-B8AD-223B5D9AB928"><img src="img/awr1.gif" alt="awr1.gif的描述如下" title="awr1.gif的描述如下" longdesc="img_text/awr1.html"><br><a href="img_text/awr1.html">说明awr1.gif的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“管理快照和基准”下，单击“基准”旁边的链接。</p>
                              <p>将显示“AWR基准”页面。</p>
                           </li>
                           <li>
                              <p>完成以下步骤：</p>
                              <ol type="a">
                                 <li>
                                    <p>选择要用于报告的基准。</p>
                                    <p>必须至少有一个现有基线可用。</p>
                                 </li>
                                 <li>
                                    <p>从Actions列表中，选择<span class="bold">Compare Periods</span> ，然后单击<span class="bold">Go</span> 。</p>
                                 </li>
                              </ol>
                              <p>将显示“比较期间：第二期开始”页面。在第一个时间段下，将显示所选基线。</p>
                              <p>在此示例中，选择了名为<code class="codeph">BASELINE_TUE_1120</code>的基线。
                              </p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-4F56AFD6-C640-4309-A601-55228150329F"><img src="img/baseline_first_period.gif" alt="下面是baseline_first_period.gif的描述" title="下面是baseline_first_period.gif的描述" longdesc="img_text/baseline_first_period.html"><br><a href="img_text/baseline_first_period.html">插图描述baseline_first_period.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>将在第一个时间段中选择的基线与另一个基线或一对快照进行比较。执行以下操作之一：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要与其他基准进行比较，请选择“ <span class="bold">选择基准”</span>和要在第二个时间段内使用的基准，然后单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                    <p>将显示“比较期间：审阅”页面。转到第<a href="resolving-performance-degradation-over-time.html#GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__CACEFBFG">7</a>步。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要与一对快照进行比较，请选择“ <span class="bold">选择开始快照”</span>和要在第二个时间段内使用的开始快照，然后单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                    <p>该示例选择在2012年2月7日下午1:00拍摄的快照18</p>
                                    <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-0CE0C607-DB0E-427B-AE65-1EBC8F0F4CBE"><img src="img/awr_snapshot2_begin2.gif" alt="下面是awr_snapshot2_begin2.gif的描述" title="下面是awr_snapshot2_begin2.gif的描述" longdesc="img_text/awr_snapshot2_begin2.html"><br><a href="img_text/awr_snapshot2_begin2.html">说明描述awr_snapshot2_begin2.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>比较期间：第二期结束出现。继续下一步。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>选择要包含在报告中的快照周期的结束快照，然后单击“ <span class="bold">下一步”</span> 。
                              </p>
                              <p>在该示例中，选择了在2009年2月7日下午12:50拍摄的快照1500。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-B1F609C0-E9AB-4B8D-9DC9-CAE181186457"><img src="img/awr_snapshot2_end2.gif" alt="下面是awr_snapshot2_end2.gif的描述" title="下面是awr_snapshot2_end2.gif的描述" longdesc="img_text/awr_snapshot2_end2.html"><br><a href="img_text/awr_snapshot2_end2.html">说明描述awr_snapshot2_end2.gif</a></div>
                              <!-- class="figure" -->
                              <p>将显示“比较期间：审阅”页面。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-FF877072-DC64-42E3-A175-CDD1BE2523F9"><img src="img/awr2_review.gif" alt="下面是awr2_review.gif的描述" title="下面是awr2_review.gif的描述" longdesc="img_text/awr2_review.html"><br><a href="img_text/awr2_review.html">说明awr2_review.gif的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__CACEFBFG">
                              <p>查看要包含在报告中的期间，然后单击“ <span class="bold">完成”</span> 。
                              </p>
                              <p>将显示“比较期间：结果”页面。</p>
                              <p>所选期间的数据显示在“ <span>常规”</span>子页面下。您可以通过从“查看数据”列表中选择一个选项来查看每秒或每个事务的数据。
                              </p>
                              <div class="infoboxnote" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-9BB435F1-314E-4DF3-9F74-45A7758892EA">
                                 <p class="notep1">注意：</p>
                                 <p>如果时间段具有不同的长度，则在计算差异之前将数据在数据库时间上归一化，以便可以比较不同长度的时段。</p>
                              </div>
                              <p>在此示例中，几乎每个度量标准都显示在第一个时间段内消耗了更多资源。条形图表示两个时期中值的比例。没有条表示等价值。此示例的报告显示每秒显着更多的数据库块更改，并在第一个时间段中解析时间而不是在第二个时间段中。</p>
                              <div class="figure" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-DFF0AA14-E62D-4A71-9FB2-02359FAF001C"><img src="img/awr2_results_general.gif" alt="下面是awr2_results_general.gif的描述" title="下面是awr2_results_general.gif的描述" longdesc="img_text/awr2_results_general.html"><br><a href="img_text/awr2_results_general.html">说明描述awr2_results_general.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>单击<span class="bold">“报告”</span>以查看报告。
                              </p>
                              <p>生成报告时，将显示“处理：查看报告”页面。完成后，将显示报告。</p>
                           </li>
                           <li>
                              <p>（可选）执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要更改期间，请单击“ <span class="bold">更改期间”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将报告另存为HTML文件<a id="d17088e1871" class="indexterm-anchor"></a> ，单击“ <span class="bold">保存到文件”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CAC272D1-0E54-42C6-8831-B23C3702D0C3__GUID-97B32061-3B4F-4D72-8161-8CF773CFD6A8">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-A4600C0D-286F-4B0C-9397-ACEA363E1EF8">创建基线</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313">使用AWR比较期间报告</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPPT525"></a><div class="props_rev_3"><a id="GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684" name="GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684"></a><h4 id="TDPPT-GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684" class="sect4"><span class="enumeration_section">9.2.2</span>将当前系统性能与基准周期进行比较</h4>
                  <div>
                     <div class="section">
                        <p><a id="d17088e1978" class="indexterm-anchor"></a>您可能已经注意到生产系统上的性能变化，并且想知道原因，或者您可能已经实现了对生产系统的更改，并希望了解更改的效果，例如增加的并发等待。
                        </p>
                        <p>比较周期ADDM在两个时间段内比较数据库服务器的性能，并返回描述性能更改和更改根源的报告。Advisor可以分析由Cloud Control监控的任何Oracle RDBMS版本10.2.0.4或更高版本。以下过程说明如何从比较期间ADDM启动报告。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从Performance菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">Period Period ADDM</span> 。</span></li>
                        <li class="stepexpand"><span>从“运行比较期间ADDM”页面，指定所需的比较和基期：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">比较期</span> - 通常表示不正常运行的时间段。但是，您也可以使用顾问程序来了解与早期时间段相比，现在性能有何提高。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">基期</span> - 表示数据库正常运行的已知（基线或参考）期间。您应该选择性能可接受的基准期，并且工作负载尽可能相似或相同。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">“运行”</span>以显示“数据库比较期间报告”</span></li>
                        <li class="stepexpand"><span>检查报告的各个部分，以了解两个时期之间的性能变化以及更改的原因：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">概观</span></p>
                                    <p>报告的这一部分显示了SQL通用性，它是基于两个时段共有的SQL语句的平均资源消耗的基本和比较时段之间的可比性。</p>
                                    <p>通用性值100％表示两个时间段中的工作负载“签名”相同。值为0％表示两个时间段没有特定工作负载维度的共同项。</p>
                                    <p>公共性基于输入类型（即SQL正在执行）以及执行SQL语句的负载。因此，仅在一个时间段内运行但不消耗大量时间的SQL语句不会影响通用性。因此，即使某些SQL语句仅在两个句点之一中运行，两个工作负载也可以具有100％的通用性，前提是这些SQL语句不会消耗大量资源。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">组态</span></p>
                                    <p>显示的信息显示按实例，主机和数据库分类的各种参数的基本周期和比较周期值。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">发现</span></p>
                                    <p>调查结果可以显示性能改进，并确定系统更改导致的主要性能差异。对于消极结果，如果您了解并消除原因，可以消除负面结果。</p>
                                    <p>基准期和比较期显示的值表示与数据库时间有关的性能。</p>
                                    <p>变更影响值表示从一个时间段到另一个时间段的性能变化规模的度量。它适用于按每个时间段消耗的总数据库时间来衡量的问题或项目。绝对值按降序排序。</p>
                                    <p>如果值为正，则发生改善，如果值为负，则发生回归。例如，-200％的变化影响意味着期间2是期间1的三倍。</p>
                                    <p>您可以运行性能调整工具（如ADDM和SQL Tuning Advisor）来修复比较期间的问题，以提高一般系统性能。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">资源</span></p>
                                    <p>此处显示的信息提供了两个时间段的数据库时间划分的摘要，并显示了CPU，内存，I / O和互连的资源使用情况（仅限Oracle RAC）。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>根据您的观察，决定如何继续解决效果回归，然后实施您的行动计划。</span></li>
                     </ol>
                  </div>
               </div><a id="TDPPT138"></a><div class="props_rev_3"><a id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB" name="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB"></a><h4 id="TDPPT-GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB" class="sect4"><span class="enumeration_section">9.2.3</span>比较两对快照</h4>
                  <div>
                     <div class="section">
                        <p>如果现有基线不可用，则可以使用两对任意快照来比较数据库性能。在数据库执行最佳时使用一对，在数据库执行不良时使用另一对。必须至少有四个快照可用。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__GUID-533820B8-FC40-4051-935C-3C8C946B5DA4">要使用两对快照比较性能：</p>
                        <ol>
                           <li>
                              <p>访问数据库主页。</p>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">Compare Periods Reports</span> 。
                              </p>
                              <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将显示“运行比较期间报告”页面。</p>
                           </li>
                           <li id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDEAAF">
                              <p>在第一个时间段中，选择“ <span class="bold">按快照”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“开始快照”中，单击放大镜图标。</p>
                              <p>将显示“搜索和选择：快照”页面。</p>
                           </li>
                           <li>
                              <p>选择要包含在报告中的第一个快照周期的起始点，然后单击“ <span class="bold">选择”</span> 。
                              </p>
                              <p>您将返回“运行比较期间报告”页面。</p>
                           </li>
                           <li>
                              <p>在“结束快照”中，单击放大镜图标。</p>
                              <p>将显示“搜索和选择：快照”页面。</p>
                           </li>
                           <li id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACIEHGH">
                              <p>选择要包含在报告中的第一个快照周期的结束点，然后单击“ <span class="bold">选择”</span> 。
                              </p>
                              <p>您将返回“运行比较期间报告”页面。</p>
                           </li>
                           <li>
                              <p>在第二阶段，重复步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDEAAF">3</a>到步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACIEHGH">7</a> 。
                              </p>
                           </li>
                           <li id="GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDIBBC">
                              <p>单击“ <span class="bold">生成报告”</span> 。
                              </p>
                              <p>“报告结果”部分显示在“运行比较期间报告”页面上。该部分包含工作负载存储库比较期间报告。</p>
                           </li>
                           <li>
                              <p>（可选）执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要更改期间，请重复步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDEAAF">3</a>到步骤<a href="resolving-performance-degradation-over-time.html#GUID-380B0F08-C1AD-4031-BD0F-6044D188D6FB__CACDIBBC">9</a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将报告另存为HTML文件<a id="d17088e2237" class="indexterm-anchor"></a> ，单击“ <span class="bold">保存到文件”</span> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPPT428"></a><a id="TDPPT092"></a><div class="props_rev_3"><a id="GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313" name="GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313"></a><h3 id="TDPPT-GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313" class="sect3"><span class="enumeration_section">9.3</span>使用AWR比较期间报告</h3>
               <div>
                  <p>在AWR比较期间报告之后<a id="d17088e2332" class="indexterm-anchor"></a>在您要比较的时间段内生成，您可以使用它来分析性能下降。要了解如何创建报告，请参阅<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486">运行AWR比较期间报告</a> ”</span> 。
                  </p>
                  <p><a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313__BABIEEAI">图9-1</a>显示了AWR比较期间报告的一部分。
                  </p>
                  <div class="figure" id="GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313__BABIEEAI">
                     <p class="titleinfigure">图9-1 AWR比较周期报告</p><img src="img/awr_report.gif" alt="下面是图9-1的描述" title="下面是图9-1的描述" longdesc="img_text/awr_report.html"><br><a href="img_text/awr_report.html">“图9-1 AWR比较周期报告”的描述</a></div>
                  <!-- class="figure" -->
                  <p>AWR比较期间报告分为以下几个部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD">AWR比较期间报告摘要</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-F51C37C7-077B-4534-B057-C39FBF71EC03">AWR比较期间报告的详细信息</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-performance-degradation-over-time.html#GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0">AWR比较期间报告中的补充信息</a></p>
                     </li>
                  </ul>
               </div><a id="TDPPT093"></a><div class="props_rev_3"><a id="GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD" name="GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD"></a><h4 id="TDPPT-GUID-904381EB-84A6-49C6-855A-E9B3DEF120AD" class="sect4"><span class="enumeration_section">9.3.1</span> AWR比较期报告摘要</h4>
                  <div>
                     <p>报告摘要<a id="d17088e2452" class="indexterm-anchor"></a>位于AWR比较期间报告的开头，并汇总了有关报告中使用的快照集和负载的信息。报告摘要包含以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562">快照集</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD">主机配置比较</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730">缓存大小</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704">加载配置文件</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-performance-degradation-over-time.html#GUID-7B828612-4394-4D4B-9185-288FCBF025A8">最佳定时活动</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT094"></a><div class="props_rev_3"><a id="GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562" name="GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562"></a><h5 id="TDPPT-GUID-E3EF2DC2-DFC1-439F-BF86-02894D1CA562" class="sect5"><span class="enumeration_section">9.3.1.1</span>快照集</h5>
                     <div>
                        <p>“快照集”部分显示有关用于此报告的快照集的信息，例如实例，主机和快照信息。</p>
                        <p>在<a href="resolving-performance-degradation-over-time.html#GUID-E3F60CFB-F707-42BD-B2CE-09974F6AF313__BABIEEAI">图9-1</a>所示的示例中，第一个快照周期对应于2月7日从10:50到11:20的性能稳定的时间。第二个快照周期对应于从12:50到13:00在同一天发生性能下降的时间。
                        </p>
                     </div>
                  </div><a id="TDPPT095"></a><div class="props_rev_3"><a id="GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD" name="GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD"></a><h5 id="TDPPT-GUID-CA404B4A-27A6-4611-B4DC-E347D80629FD" class="sect5"><span class="enumeration_section">9.3.1.2</span>主机配置比较</h5>
                     <div>
                        <p>“主机配置比较”部分比较两个快照集中使用的主机配置。例如，该报告会比较物理内存和CPU数量。配置差异量化为％Diff列中的百分比。</p>
                     </div>
                  </div><a id="TDPPT314"></a><div class="props_rev_3"><a id="GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730" name="GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730"></a><h5 id="TDPPT-GUID-13DA0DF7-322C-46A5-A5A0-A39AAF46D730" class="sect5"><span class="enumeration_section">9.3.1.3</span>缓存大小</h5>
                     <div>
                        <p>“缓存大小”部分比较两个快照集中使用的数据库配置。例如，报告会比较SGA和日志缓冲区大小。配置差异量化为％Diff列中的百分比。</p>
                     </div>
                  </div><a id="TDPPT096"></a><div class="props_rev_3"><a id="GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704" name="GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704"></a><h5 id="TDPPT-GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704" class="sect5"><span class="enumeration_section">9.3.1.4</span>负载配置文件</h5>
                     <div>
                        <p>“加载配置文件”部分比较两个快照集中使用的加载。负载差异量化为％Diff列中的百分比。</p>
                        <div class="figure" id="GUID-4CF5AA67-BDD0-4E32-A89D-79353D605704__GUID-A2C21E7D-5DAD-416A-A52C-942F14D3B8CB"><img src="img/awr_load_profile.gif" alt="下面是awr_load_profile.gif的描述" title="下面是awr_load_profile.gif的描述" longdesc="img_text/awr_load_profile.html"><br><a href="img_text/awr_load_profile.html">说明awr_load_profile.gif的描述</a></div>
                        <!-- class="figure" -->
                        <p>在此示例中，第一个时段内每秒的DB时间高出100％。每秒CPU时间高出100％。</p>
                     </div>
                  </div><a id="TDPPT097"></a><div class="props_rev_3"><a id="GUID-7B828612-4394-4D4B-9185-288FCBF025A8" name="GUID-7B828612-4394-4D4B-9185-288FCBF025A8"></a><h5 id="TDPPT-GUID-7B828612-4394-4D4B-9185-288FCBF025A8" class="sect5"><span class="enumeration_section">9.3.1.5</span>最佳定时事件</h5>
                     <div>
                        <p>Top Timed Events部分是报告中最有用的部分之一。此部分显示在每个快照集中消耗了最高DB总时间百分比的五个定时事件或操作。</p>
                        <div class="figure" id="GUID-7B828612-4394-4D4B-9185-288FCBF025A8__GUID-8DFE6EE2-31B2-4F47-84A6-CDE3AF624D57"><img src="img/awr_top5_timed_events.gif" alt="下面是awr_top5_timed_events.gif的描述" title="下面是awr_top5_timed_events.gif的描述" longdesc="img_text/awr_top5_timed_events.html"><br><a href="img_text/awr_top5_timed_events.html">描述说明awr_top5_timed_events.gif</a></div>
                        <!-- class="figure" -->
                        <p>在此示例中，CPU时间和数据库文件顺序读取的等待次数在第一个时段中显着高于在第二个时段中。</p>
                     </div>
                  </div>
               </div><a id="TDPPT315"></a><div class="props_rev_3"><a id="GUID-F51C37C7-077B-4534-B057-C39FBF71EC03" name="GUID-F51C37C7-077B-4534-B057-C39FBF71EC03"></a><h4 id="TDPPT-GUID-F51C37C7-077B-4534-B057-C39FBF71EC03" class="sect4"><span class="enumeration_section">9.3.2</span> AWR比较期报告的详细信息</h4>
                  <div>
                     <p>报告详情<a id="d17088e2992" class="indexterm-anchor"></a>部分遵循AWR比较期间报告的摘要，并提供有关报告中使用的快照集和负载的统计信息。例如，该部分包括时间模型统计信息，等待事件，SQL执行时间和实例活动的统计信息。
                     </p>
                  </div>
               </div><a id="TDPPT319"></a><div class="props_rev_3"><a id="GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0" name="GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0"></a><h4 id="TDPPT-GUID-9E201F34-C7A4-4866-B73E-D17C9F64D7B0" class="sect4"><span class="enumeration_section">9.3.3</span> AWR比较期报告中的补充信息</h4>
                  <div>
                     <p>补充信息<a id="d17088e3082" class="indexterm-anchor"></a>位于AWR比较周期报告的末尾，并提供有关初始化参数和SQL语句的其他信息。init.ora参数部分<a id="d17088e3089" class="indexterm-anchor"></a>列出第一个快照集的所有初始化参数值。SQL Text的完整列表部分按SQL ID列出每个语句，并显示SQL语句的文本。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="02857.op-rhp-restapi-rhp-workingcopies-post.html" dir="ltr"></html><html lang="zh-Hans" dir="ltr">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <title>Oracle数据库的REST API  - 创建工作副本</title>
		<link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
		<meta name="dcterms.dateCopyrighted" content="2018, 2019"></meta>
		<meta name="dcterms.category" content="database"></meta>
		<meta name="dcterms.identifier" content="E96452-02"></meta>
		<meta name="dcterms.isVersionOf" content="DBRST"></meta>
		<meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
		
        <link rel="stylesheet" href="/sp_common/rest-template/ohc-rest-template/css/rest.css"></link>
        <script>
            document.write('<style type="text/css">');
            document.write('body > .noscript, body > .noscript ~ * { opacity: 0; }');
            document.write('</style>');
        </script>
        <script src="/sp_common/rest-template/requirejs/require.js" data-main="/sp_common/rest-template/ohc-rest-template/js/rest-config"></script>
        <script>
            if(window.require === undefined) {
                document.write('<script data-main="sp_common/rest-template/ohc-rest-template/js/rest-config" src="sp_common/rest-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/rest-template/ohc-rest-template/css/rest.css" rel="stylesheet">');
            }
        </script>
		
		<script type="application/json" id="ssot-metadata" space="preserve">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>

        <meta name="description" content="Provide consumers the ability to perform operations with different Oracle Database features through a web REST API that can be easily adopted."></meta>
        <meta property="og:site_name" content="Oracle Help Center"></meta>
        <meta property="og:title" content="REST APIs for Oracle Database"></meta>
        <meta property="og:description" content="Provide consumers the ability to perform operations with different Oracle Database features through a web REST API that can be easily adopted."></meta>
        <meta name="generator" content="Oracle REST API Publisher 1.7.0"></meta>
		<meta name="date" content="2019-04-11 10:34:12 UTC"></meta>
        <link rel="shortcut icon" href="/sp_common/rest-template/ohc-common/img/favicon.ico"></link>
        <meta name="application-name" content="REST APIs for Oracle Database"></meta>
        <link type="application/swagger+json" title="Swagger 2.0" href="swagger.json" rel="alternate"></link>
        <link rel="prev" href="op-rhp-restapi-rhp-workingcopies-workingcopyid-databases-post.html" title="Previous" type="text/html"></link>
        <link rel="next" href="op-rhp-restapi-rhp-workingcopies-get.html" title="Next" type="text/html"></link>
    
    <meta name="dcterms.created" content="2019-04-11T10:36:09+00:00"></meta>
    <meta name="dcterms.title" content="REST APIs for Oracle Database"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
    <body dir="ltr">
        <div class="noscript alert alert-danger text-center" role="alert">
            <a class="pull-left" href="op-rhp-restapi-rhp-workingcopies-workingcopyid-databases-post.html"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a class="pull-right" href="op-rhp-restapi-rhp-workingcopies-get.html">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
        <article>

            
            <header id="top">

                <ol class="breadcrumb">
                    <li><a href="index.html">适用于Oracle数据库的REST API</a></li>
                    <li>任务</li>
                    
                    <li>舰队修补和供应</li>
                    
                    <li class="active">
                        
                        <a href="api-fleet-patching-and-provisioning-rhp-provisioning-software-homes.html">RHP  - 供应软件之家</a>
                        
                    </li>
                    
                </ol>
                
                <p class="draftsubtitle"></p>
                
                
                <div>
                	<div class="dropdown btn-group pull-right" style="clear:right">
                		<button id="dLabel" class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">跳到<span class="caret"></span></button>
      					<ul class="dropdown-menu" aria-labelledby="dLabel">
          					<li><a href="#request" data-toggle="ignore">请求</a></li>
          					<li><a href="#response" data-toggle="ignore">响应</a></li>
          					
      					</ul>
    				</div>
     				<h2>创建工作副本</h2>
     			</div>
                
                <div>
                    <div class="label label-post text-uppercase">岗位</div>
                    <p><strong>/ RHP-RESTAPI / RHP / workingcopies</strong></p>
                </div>
            </header>
            <section>

                <div class="description">使用现有黄金图像创建新的工作副本</div>

                <h3 id="request">请求</h3>
                

                
                
                <div class="h5">支持的媒体类型</div>
                <ul class="media-types">
                
                    <li>应用程序/ JSON</li>
                
                </ul>
                
                

                


                


                
                <div class="h5">标题参数</div>
                <div class="schema-container">
                    <ul class="schema-properties">
                        
                        <li><a href="#request-header-param-Authorization" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="request-header-param-Authorization">授权：字符串</a>
                        <div class="collapse" id="request-header-param-Authorization">
                            










































<div>Base64编码用户名和发出请求的用户的密码。有关更多信息，请参阅<a href="Authentication-RHP.html">Fleet Patching和Provisioning的身份验证</a> 。</div>




















                        </div>
                        </li>
                        
                    </ul>
                    
                </div>
                


                


                
                <div class="entity">
                <div class="h5 hidden-print">身体 （ <span class="schema-path"></span> ）</div>

                

                
                
                

                <div class="schema-container">
                
                <div id="request-bodyparam-definitions-AddWorkingCopyBody" class="swagger-schema">
    <div class="panel-heading">根架构：AddWorkingCopyBody</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-agpath-properties-agpath" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-agpath-properties-agpath">agpath（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-agpath-properties-agpath">
                
                
























<div>持久Oracle主路径的读/写路径。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-asmClientData-properties-asmClientData" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-asmClientData-properties-asmClientData">asmClientData（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-asmClientData-properties-asmClientData">
                
                
























<div>包含ASM客户端数据的文件。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-aupath-properties-aupath" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-aupath-properties-aupath">aupath（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-aupath-properties-aupath">
                
                
























<div>持久Oracle主路径的只读黄金映像路径。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-auth-properties-auth" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-auth-properties-auth">auth（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-auth-properties-auth">
                
                
























<div>使用身份验证插件访问远程节点。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-properties-authArgs" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-properties-authArgs">authArgs（可选）：对象</a> <a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs" class="btn btn-default btn-sm btn-xsm" role="button">authArgs</a>
            
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-properties-authArgs">
                
                












<div>允许的其他属性： <a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-additionalProperties" class="btn btn-default btn-sm" role="button">additionalProperties</a></div>









<div class="description">所选身份验证插件的其他属性。</div>


                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-cardinality-properties-cardinality" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-cardinality-properties-cardinality">基数（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-cardinality-properties-cardinality">
                
                
























<div>新服务器池的基数。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-cdb-properties-cdb" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-cdb-properties-cdb">cdb（可选）：布尔值</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-cdb-properties-cdb">
                
                


















<div>默认值： <code>false</code></div>







<div>将数据库创建为容器数据库。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-client-properties-client" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-client-properties-client">client（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-client-properties-client">
                
                
























<div>客户端群集名称</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-clusterManifest-properties-clusterManifest" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-clusterManifest-properties-clusterManifest">clusterManifest（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-clusterManifest-properties-clusterManifest">
                
                
























<div>集群清单文件的位置。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-clusterNodes-properties-clusterNodes" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-clusterNodes-properties-clusterNodes">clusterNodes（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-clusterNodes-properties-clusterNodes">
                
                
























<div>以逗号分隔的节点信息列表，将在其中配置Oracle Clusterware。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-datafileDestination-properties-datafileDestination" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-datafileDestination-properties-datafileDestination">datafileDestination（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-datafileDestination-properties-datafileDestination">
                
                
























<div>数据文件目标位置或ASM磁盘组名称。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-dbname-properties-dbname" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-dbname-properties-dbname">dbname（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-dbname-properties-dbname">
                
                
























<div>要配置的数据库（DB_UNIQUE_NAME）的名称。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-dbtemplate-properties-dbtemplate" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-dbtemplate-properties-dbtemplate">dbtemplate（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-dbtemplate-properties-dbtemplate">
                
                
























<div>模板文件的绝对文件路径或Rapid Home Provisioning Server上映像主目录的相对路径。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-dbtype-properties-dbtype" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-dbtype-properties-dbtype">dbtype（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-dbtype-properties-dbtype">
                
                




















<div>允许值： <code>[ "RAC", "RACONENODE", "SINGLE" ]</code></div>





<div>数据库类型：Oracle RAC One Node或Oracle RAC或单实例。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-eval-properties-eval" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-eval-properties-eval">eval（可选）：布尔值</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-eval-properties-eval">
                
                


















<div>默认值： <code>false</code></div>







<div>无需执行命令即可进行评估。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-gnsClientData-properties-gnsClientData" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-gnsClientData-properties-gnsClientData">gnsClientData（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-gnsClientData-properties-gnsClientData">
                
                
























<div>包含GNS客户端数据的文件。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-ignorePrereq-properties-ignorePrereq" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-ignorePrereq-properties-ignorePrereq">ignorePrereq（可选）：布尔值</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-ignorePrereq-properties-ignorePrereq">
                
                


















<div>默认值： <code>false</code></div>







<div>忽略CVU先决条件检查。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-isfixup-properties-isfixup" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-isfixup-properties-isfixup">isfixup（可选）：boolean</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-isfixup-properties-isfixup">
                
                


















<div>默认值： <code>false</code></div>







<div>执行修复脚本。仅对Grid Infrastructure配置有效。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-newpool-properties-newpool" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-newpool-properties-newpool">newpool（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-newpool-properties-newpool">
                
                
























<div>要创建的池的服务器池名称。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-node-properties-node" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-node-properties-node">node（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-node-properties-node">
                
                
























<div>以逗号分隔的节点列表，将在其上创建数据库</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-numberOfPDBs-properties-numberOfPDBs" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-numberOfPDBs-properties-numberOfPDBs">numberOfPDBs（可选）：整数（int32）</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-numberOfPDBs-properties-numberOfPDBs">
                
                
























<div>要创建的PDB数。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-oracleBase-properties-oracleBase" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-oracleBase-properties-oracleBase">oracleBase（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-oracleBase-properties-oracleBase">
                
                
























<div>用于供应Oracle数据库主目录或Oracle Grid Infrastructure主目录的ORACLE_BASE路径。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-path-properties-path" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-path-properties-path">path（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-path-properties-path">
                
                
























<div>要导入的软件主目录的绝对路径位置（对于数据库映像，这将是ORACLE_HOME）。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-pdbName-properties-pdbName" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-pdbName-properties-pdbName">pdbName（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-pdbName-properties-pdbName">
                
                
























<div>如果需要创建一个或多个PDB，则为pdbName前缀。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-root-properties-root" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-root-properties-root">root（可选）：布尔值</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-root-properties-root">
                
                


















<div>默认值： <code>false</code></div>







<div>使用root凭据访问远程节点。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-schedule-properties-schedule" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-schedule-properties-schedule">schedule（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-schedule-properties-schedule">
                
                
























<div>执行操作的首选时间，采用ISO-8601格式。例如：2016-12-21T19：13：17 + 05。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-serverpool-properties-serverpool" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-serverpool-properties-serverpool">serverpool（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-serverpool-properties-serverpool">
                
                
























<div>以逗号分隔的现有服务器池名称列表。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-setupSSH-properties-setupSSH" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-setupSSH-properties-setupSSH">setupSSH（可选）：布尔值</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-setupSSH-properties-setupSSH">
                
                


















<div>默认值： <code>false</code></div>







<div>在配置用户的远程节点上设置无密码SSH用户等效性。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-storagetype-properties-storagetype" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-storagetype-properties-storagetype">storagetype（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-storagetype-properties-storagetype">
                
                




















<div>允许值： <code>[ "NFS", "LOCAL", "RHP_MANAGED" ]</code></div>





<div>家庭的存储类型。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-sudoPath-properties-sudoPath" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-sudoPath-properties-sudoPath">sudoPath（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-sudoPath-properties-sudoPath">
                
                
























<div>sudo二进制文件的位置。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-sudoUser-properties-sudoUser" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-sudoUser-properties-sudoUser">sudoUser（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-sudoUser-properties-sudoUser">
                
                
























<div>以sudo用户名执行超级用户操作。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-superUserPasswd-properties-superUserPasswd" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-superUserPasswd-properties-superUserPasswd">superUserPasswd（可选）：字符串</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-superUserPasswd-properties-superUserPasswd">
                
                
























<div>超级用户帐户的密码。</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-targetnode-properties-targetnode" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-targetnode-properties-targetnode">targetnode（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-targetnode-properties-targetnode">
                
                
























<div>需要执行操作的节点</div>




                
            </div>
            </li>
            
            <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-user-properties-user" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-user-properties-user">user（可选）：string</a>
            <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-user-properties-user">
                
                
























<div>正在为其配置软件主目录的用户的名称。</div>




                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“client”：{“type”：“string”，“description”：“客户端群集名称”}，“targetnode”：{“type”：“string” ，“description”：“需要执行操作的节点”}，“setupSSH”：{“type”：“boolean”，“default”：false，“description”：“在远程设置无密码SSH用户等效供应用户的节点。“ }，“node”：{“type”：“string”，“description”：“将在其上创建数据库的节点的逗号分隔列表”}，“root”：{“type”：“boolean”，“default” “：false，”description“：”使用root凭据访问远程节点。“ }，“sudoUser”：{“type”：“string”，“description”：“以sudo用户名执行超级用户操作”。 }，“sudoPath”：{“type”：“string”，“description”：“sudo二进制文件的位置”。 }，“superUserPasswd”：{“type”：“string”，“description”：“超级用户帐户的密码”。 }，“authArgs”：{“type”：“object”，“description”：“所选身份验证插件的附加属性。”，“additionalProperties”：{“type”：“string”}}，“auth”：{ “type”：“string”，“description”：“使用身份验证插件访问远程节点。” }，“eval”：{“type”：“boolean”，“default”：false，“description”：“在不执行命令的情况下进行评估。” }，“schedule”：{“type”：“string”，“description”：“执行操作的首选时间，采用ISO-8601格式。例如：2016-12-21T19：13：17 + 05。“}，”user“：{”type“：”string“，”description“：”正在为其配置软件主页的用户的名称。“ }，“clusterNodes”：{“type”：“string”，“description”：“将在其上配置Oracle Clusterware的节点信息的逗号分隔列表。”}，“isfixup”：{“type”：“boolean” ，“default”：false，“description”：“执行修复脚本。仅对Grid Infrastructure配置有效。“}，”asmClientData“：{”type“：”string“，”description“：”包含ASM客户端数据的文件。“}，”gnsClientData“：{”type“：”string “，”description“：”包含GNS客户端数据的文件。“}，”clusterManifest“：{”type“：”string“，”description“：”Cluster Manifest File的位置。“}，”oracleBase“：{ “type”：“string”，“description”：“ORACLE_BASE路径，用于配置Oracle数据库主目录或Oracle Grid Infrastructure主目录。”}，“agpath”：{“type”：“string”，“description”：“读/写持久Oracle主路径的路径。“}，”aupath“：{”type“：”string“，”description“：”持久Oracle主路径的只读黄金映像路径。“}，”ignorePrereq“：{ “type”：“boolean”，“default”：false，“description”：“忽略CVU先决条件检查。”}，“path”：{“type”：“string”，“description”：“绝对”要导入的软件主目录的路径位置（对于数据库映像，这将是ORACLE_HOME）。“}，”dbtemplate“：{”type“：”string“，”description“：”A模板文件的bsolute文件路径或Rapid Home Provisioning Server上映像主目录的相对路径。“}，”dbname“：{”type“：”string“，”description“：”数据库名称（DB_UNIQUE_NAME）“已配置。“}，”基数“：{”type“：”string“，”description“：”新服务器池的基数。“}，”storagetype“：{”type“：”string“，”description“：”家庭的存储类型。“，”enum“：[”NFS“，”LOCAL“，”RHP_MANAGED“]}，”datafileDestination“：{”type“：”string“，”description“：”数据文件目标位置或者ASM磁盘组名称。“}，”serverpool“：{”type“：”string“，”description“：”以逗号分隔的现有服务器池名称列表。“}，”numberOfPDBs“：{”type“：”整数“，”格式“：”int32“，”description“：”要创建的PDB数。“}，”newpool“：{”type“：”string“，”description“：”池的服务器池名称“创建。“}，”pdbName“：{”type“：”string“，”description“：”如果需要创建一个或多个PDB，则为pdbName前缀。“}，”cdb“：{”type“：” boolean“，”default“：false，”descrip “：”将数据库创建为容器数据库。“}，”dbtype“：{”type“：”string“，”enum“：[”RAC“，”RACONENODE“，”SINGLE“]，”description“：”数据库类型：Oracle RAC One Node或Oracle RAC或单实例。“}}}</code></pre>
    

    

    

    

    

    

    


</div>

                
                <div id="request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs" class="swagger-schema">
    <div class="panel-heading">嵌套架构：authArgs</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
       <div class="h5">允许其他属性</div>

       <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
       <ul class="schema-properties">
           
           <li><a href="#request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-additionalProperties-additional-0" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-additionalProperties-additional-0">串</a>
           
           <div class="collapse schema-summary" id="request-bodyparam-definitions-AddWorkingCopyBody-properties-authArgs-additionalProperties-additional-0">
               
               



























               
           </div>
           </li>
           
       </ul>
       <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“description”：“所选身份验证插件的附加属性。”，“additionalProperties”：{“type”：“string”}}</code></pre>
    
    

    

    

    

    
    <div>所选身份验证插件的其他属性。</div>
    

    

    

    

    

    

    

    

    

    


</div>

                
                </div>

                
                </div>

                

                

                
                
                <div class="h5">安全</div>
                <div class="schema-container">
                    <ul class="schema-properties">
                        
                        <li><a href="#security-param-basicAuthentication" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="security-param-basicAuthentication">basicAuthentication：basic</a>
                        <div class="collapse" id="security-param-basicAuthentication">
                            


<div>类型： <code>basic</code></div>





                        </div>
                        </li>
                        
                    </ul>
                </div>
                
                
                
                <a href="#top" style="float:right">回到顶部</a>

                <h3 id="response">响应</h3>

                
                
                <div class="h5">支持的媒体类型</div>
                <ul class="media-types">
                    
                    <li>应用程序/ JSON</li>
                    
                </ul>
                
                



                
                <div class="response">
                <h4 class="response-code range-200">202回应</h4>
                <div class="response-body">
                <div>公认。一个JSON对象，包含接受操作的作业资源详细信息，以获取进度的状态和输出。</div>

                
                <div class="h5">头</div>
                <div class="schema-container">
                    <ul class="schema-properties">
                        
                        <li><a href="#202-response-header-Location" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="202-response-header-Location">位置：字符串</a>
                        <div class="collapse" id="202-response-header-Location">
                            










































<div>将执行操作的作业的URL</div>




















                        </div>
                        </li>
                        
                    </ul>
                    
                </div>
                


                
                    <div class="entity">
                    <div class="h5 hidden-print">身体 （ <span class="schema-path"></span> ）</div>


                    <div class="schema-container">
                    
                    <div id="202-definitions-jobResource" class="swagger-schema">
    <div class="panel-heading">Root Schema：jobResource</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#202-definitions-jobResource-properties-jobId-properties-jobId" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobResource-properties-jobId-properties-jobId">jobId（可选）：字符串</a>
            <div class="collapse schema-summary" id="202-definitions-jobResource-properties-jobId-properties-jobId">
                
                



























                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobResource-properties-links-properties-links" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobResource-properties-links-properties-links">links（可选）：数组</a> <a href="#202-definitions-jobResource-properties-links" class="btn btn-default btn-sm btn-xsm" role="button">链接</a>
            
            <div class="collapse schema-summary" id="202-definitions-jobResource-properties-links-properties-links">
                
                





















                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobResource-properties-operation-properties-operation" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobResource-properties-operation-properties-operation">operation（可选）：string</a>
            <div class="collapse schema-summary" id="202-definitions-jobResource-properties-operation-properties-operation">
                
                



























                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobOutputResource-properties-output" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobOutputResource-properties-output">输出（可选）：对象</a> <a href="#202-definitions-jobOutputResource" class="btn btn-default btn-sm btn-xsm" role="button">jobOutputResource</a>
            
            <div class="collapse schema-summary" id="202-definitions-jobOutputResource-properties-output">
                
                





















                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobResource-properties-status-properties-status" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobResource-properties-status-properties-status">status（可选）：string</a>
            <div class="collapse schema-summary" id="202-definitions-jobResource-properties-status-properties-status">
                
                



























                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“jobId”：{“type”：“string”}，“status”：{“type”：“string”}，“operation”：{“type” ：“string”}，“output”：{“$ ref”：“＃/ definitions / jobOutputResource”}，“links”：{“type”：“array”，“items”：{“$ ref”：“＃ / definitions / singleResourceLinks“}}}}</code></pre>
    

    

    

    

    

    

    


</div>

                    
                    <div id="202-definitions-jobResource-properties-links" class="swagger-schema">
    <div class="panel-heading">嵌套架构：链接</div>
    
      
      <div class="schema-type">类型： <code>array</code></div>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#202-definitions-singleResourceLinks-items-0" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-singleResourceLinks-items-0">数组：对象</a> <a href="#202-definitions-singleResourceLinks" class="btn btn-default btn-sm btn-xsm" role="button">singleResourceLinks</a>
            
            <div class="collapse schema-summary" id="202-definitions-singleResourceLinks-items-0">
                
                





















                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“array”，“items”：{“$ ref”：“＃/ definitions / singleResourceLinks”}}</code></pre>
    

    

    

    

    

    


</div>

                    
                    <div id="202-definitions-jobOutputResource" class="swagger-schema">
    <div class="panel-heading">嵌套架构：jobOutputResource</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#202-definitions-jobOutputResource-properties-hasMore-properties-hasMore" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobOutputResource-properties-hasMore-properties-hasMore">hasMore（可选）：布尔值</a>
            <div class="collapse schema-summary" id="202-definitions-jobOutputResource-properties-hasMore-properties-hasMore">
                
                


















<div>默认值： <code>false</code></div>










                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobOutputResource-properties-limit-properties-limit" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobOutputResource-properties-limit-properties-limit">limit（可选）：整数</a>
            <div class="collapse schema-summary" id="202-definitions-jobOutputResource-properties-limit-properties-limit">
                
                



























                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobOutputResource-properties-links-properties-links" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobOutputResource-properties-links-properties-links">links（可选）：数组</a> <a href="#202-definitions-jobOutputResource-properties-links" class="btn btn-default btn-sm btn-xsm" role="button">链接</a>
            
            <div class="collapse schema-summary" id="202-definitions-jobOutputResource-properties-links-properties-links">
                
                





















                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobOutputResource-properties-offset-properties-offset" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobOutputResource-properties-offset-properties-offset">offset（可选）：整数</a>
            <div class="collapse schema-summary" id="202-definitions-jobOutputResource-properties-offset-properties-offset">
                
                



























                
            </div>
            </li>
            
            <li><a href="#202-definitions-jobOutputResource-properties-output-properties-output" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-jobOutputResource-properties-output-properties-output">输出（可选）：字符串</a>
            <div class="collapse schema-summary" id="202-definitions-jobOutputResource-properties-output-properties-output">
                
                



























                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“output”：{“type”：“string”}，“limit”：{“type”：“integer”}，“offset”：{“type” ：“integer”}，“hasMore”：{“type”：“boolean”，“default”：false}，“links”：{“type”：“array”，“items”：{“$ ref”：“ ＃/ definitions / collectionResourceLinks“}}}}</code></pre>
    

    

    

    

    

    

    


</div>

                    
                    <div id="202-definitions-singleResourceLinks" class="swagger-schema">
    <div class="panel-heading">嵌套模式：singleResourceLinks</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#202-definitions-singleResourceLinks-properties-href-properties-href" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-singleResourceLinks-properties-href-properties-href">href（可选）：字符串</a>
            <div class="collapse schema-summary" id="202-definitions-singleResourceLinks-properties-href-properties-href">
                
                
























<div>引用的超链接元素以绝对格式提供。</div>




                
            </div>
            </li>
            
            <li><a href="#202-definitions-singleResourceLinks-properties-rel-properties-rel" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-singleResourceLinks-properties-rel-properties-rel">rel（可选）：字符串</a>
            <div class="collapse schema-summary" id="202-definitions-singleResourceLinks-properties-rel-properties-rel">
                
                




















<div>允许值： <code>[ "self", "collection", "up", "describedBy" ]</code></div>





<div>指定链接与描述的资源的关系类型。</div>




                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“rel”：{“type”：“string”，“description”：“指定链接与描述的资源的关系类型。”，“enum” ：[“self”，“collection”，“up”，“describedBy”]}，“href”：{“type”：“string”，“description”：“以绝对格式提供的引用超链接元素。” }}}</code></pre>
    

    

    

    

    

    

    


</div>

                    
                    <div id="202-definitions-jobOutputResource-properties-links" class="swagger-schema">
    <div class="panel-heading">嵌套架构：链接</div>
    
      
      <div class="schema-type">类型： <code>array</code></div>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#202-definitions-collectionResourceLinks-items-0" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-collectionResourceLinks-items-0">数组：object</a> <a href="#202-definitions-collectionResourceLinks" class="btn btn-default btn-sm btn-xsm" role="button">collectionResourceLinks</a>
            
            <div class="collapse schema-summary" id="202-definitions-collectionResourceLinks-items-0">
                
                





















                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“array”，“items”：{“$ ref”：“＃/ definitions / collectionResourceLinks”}}</code></pre>
    

    

    

    

    

    


</div>

                    
                    <div id="202-definitions-collectionResourceLinks" class="swagger-schema">
    <div class="panel-heading">嵌套模式：collectionResourceLinks</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#202-definitions-collectionResourceLinks-properties-href-properties-href" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-collectionResourceLinks-properties-href-properties-href">href（可选）：字符串</a>
            <div class="collapse schema-summary" id="202-definitions-collectionResourceLinks-properties-href-properties-href">
                
                
























<div>引用的超链接元素以绝对格式提供，具有正确的URL参数。</div>




                
            </div>
            </li>
            
            <li><a href="#202-definitions-collectionResourceLinks-properties-rel-properties-rel" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="202-definitions-collectionResourceLinks-properties-rel-properties-rel">rel（可选）：字符串</a>
            <div class="collapse schema-summary" id="202-definitions-collectionResourceLinks-properties-rel-properties-rel">
                
                




















<div>允许值： <code>[ "next", "prev", "first", "last" ]</code></div>





<div>指定链接与描述的资源的关系类型。</div>




                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“rel”：{“type”：“string”，“description”：“指定链接与描述的资源的关系类型。”，“enum” ：[“next”，“prev”，“first”，“last”]}，“href”：{“type”：“string”，“description”：“引用的超链接元素以绝对格式提供，具有正确的网址参数。“ }}}</code></pre>
    

    

    

    

    

    

    


</div>

                    
                    </div>

                    
                    </div>
                
                </div>
                </div>
                
                <div class="response">
                <h4 class="response-code range-400">400回应</h4>
                <div class="response-body">
                <div>错误的请求。一个JSON对象，包含解析参数值或名称时发现的问题的错误详细信息。</div>

                


                
                    <div class="entity">
                    <div class="h5 hidden-print">身体 （ <span class="schema-path"></span> ）</div>


                    <div class="schema-container">
                    
                    <div id="400-definitions-errorResource" class="swagger-schema">
    <div class="panel-heading">Root Schema：errorResource</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#400-definitions-errorResource-properties-errorCode-properties-errorCode" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-errorCode-properties-errorCode">errorCode（可选）：字符串</a>
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-errorCode-properties-errorCode">
                
                
























<div>特定于应用程序的错误代码，与tittle中显示的错误消息有关。</div>




                
            </div>
            </li>
            
            <li><a href="#400-definitions-errorResource-properties-errorDetails-properties-errorDetails" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-errorDetails-properties-errorDetails">errorDetails（可选）：array</a> <a href="#400-definitions-errorResource-properties-errorDetails" class="btn btn-default btn-sm btn-xsm" role="button">errorDetails</a>
            
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-errorDetails-properties-errorDetails">
                
                




















<div class="description">如果报告了多个错误，则可以在此阵列中以分层结构组织它们。</div>


                
            </div>
            </li>
            
            <li><a href="#400-definitions-errorResource-properties-errorPath-properties-errorPath" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-errorPath-properties-errorPath">errorPath（可选）：string</a>
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-errorPath-properties-errorPath">
                
                
























<div>用于指示错误发生位置的XPath或JSON路径。</div>




                
            </div>
            </li>
            
            <li><a href="#400-definitions-errorResource-properties-instance-properties-instance" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-instance-properties-instance">instance（可选）：string</a>
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-instance-properties-instance">
                
                
























<div>链接的URI，提供有关错误的更多详细信息。</div>




                
            </div>
            </li>
            
            <li><a href="#400-definitions-errorResource-properties-status-properties-status" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-status-properties-status">status（可选）：整数</a>
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-status-properties-status">
                
                
























<div>HTTP状态代码。</div>




                
            </div>
            </li>
            
            <li><a href="#400-definitions-errorResource-properties-title-properties-title" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-title-properties-title">title（可选）：string</a>
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-title-properties-title">
                
                
























<div>摘要错误消息。</div>




                
            </div>
            </li>
            
            <li><a href="#400-definitions-errorResource-properties-type-properties-type" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-properties-type-properties-type">type（可选）：string</a>
            <div class="collapse schema-summary" id="400-definitions-errorResource-properties-type-properties-type">
                
                
























<div>链接到HTTP错误代码页。</div>




                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“status”：{“type”：“integer”，“description”：“HTTP状态代码”。 }，“type”：{“type”：“string”，“description”：“链接到HTTP错误代码页”。 }，“title”：{“type”：“string”，“description”：“摘要错误消息”。 }，“instance”：{“type”：“string”，“description”：“链接的URI，提供有关错误的更多详细信息。” }，“errorDetails”：{“type”：“array”，“description”：“如果报告了多个错误，则可以在此数组中以层次结构进行组织。”，“items”：[{“$ ref”： “＃/ definitions / errorResource”}]}，“errorPath”：{“type”：“string”，“description”：“XPath或JSON路径，指示错误发生的位置。” }，“errorCode”：{“type”：“string”，“description”：“特定于应用程序的错误代码，与tittle显示的错误消息有关。” }}}</code></pre>
    

    

    

    

    

    

    


</div>

                    
                    <div id="400-definitions-errorResource-properties-errorDetails" class="swagger-schema">
    <div class="panel-heading">嵌套架构：errorDetails</div>
    
      
      <div class="schema-type">类型： <code>array</code></div>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <div>如果报告了多个错误，则可以在此阵列中以分层结构组织它们。</div>
    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#400-definitions-errorResource-items-0" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="400-definitions-errorResource-items-0">数组：对象</a> <a href="#400-definitions-errorResource" class="btn btn-default btn-sm btn-xsm" role="button">errorResource</a>
            
            <div class="collapse schema-summary" id="400-definitions-errorResource-items-0">
                
                





















                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“array”，“description”：“如果报告了多个错误，则可以在此数组中以层次结构组织。”，“items”：[{“$ ref”：“＃/ definitions / errorResource “}]}</code></pre>
    

    

    

    

    

    


</div>

                    
                    </div>

                    
                    </div>
                
                </div>
                </div>
                
                <div class="response">
                <h4 class="response-code range">默认响应</h4>
                <div class="response-body">
                <div>意外的错误。一个JSON对象，包含执行操作时问题的错误详细信息。</div>

                


                
                    <div class="entity">
                    <div class="h5 hidden-print">身体 （ <span class="schema-path"></span> ）</div>


                    <div class="schema-container">
                    
                    <div id="default-definitions-errorResource" class="swagger-schema">
    <div class="panel-heading">Root Schema：errorResource</div>
    
      <div class="schema-type">输入： <code>object</code></div>
      
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#default-definitions-errorResource-properties-errorCode-properties-errorCode" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-errorCode-properties-errorCode">errorCode（可选）：字符串</a>
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-errorCode-properties-errorCode">
                
                
























<div>特定于应用程序的错误代码，与tittle中显示的错误消息有关。</div>




                
            </div>
            </li>
            
            <li><a href="#default-definitions-errorResource-properties-errorDetails-properties-errorDetails" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-errorDetails-properties-errorDetails">errorDetails（可选）：array</a> <a href="#default-definitions-errorResource-properties-errorDetails" class="btn btn-default btn-sm btn-xsm" role="button">errorDetails</a>
            
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-errorDetails-properties-errorDetails">
                
                




















<div class="description">如果报告了多个错误，则可以在此阵列中以分层结构组织它们。</div>


                
            </div>
            </li>
            
            <li><a href="#default-definitions-errorResource-properties-errorPath-properties-errorPath" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-errorPath-properties-errorPath">errorPath（可选）：string</a>
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-errorPath-properties-errorPath">
                
                
























<div>用于指示错误发生位置的XPath或JSON路径。</div>




                
            </div>
            </li>
            
            <li><a href="#default-definitions-errorResource-properties-instance-properties-instance" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-instance-properties-instance">instance（可选）：string</a>
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-instance-properties-instance">
                
                
























<div>链接的URI，提供有关错误的更多详细信息。</div>




                
            </div>
            </li>
            
            <li><a href="#default-definitions-errorResource-properties-status-properties-status" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-status-properties-status">status（可选）：整数</a>
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-status-properties-status">
                
                
























<div>HTTP状态代码。</div>




                
            </div>
            </li>
            
            <li><a href="#default-definitions-errorResource-properties-title-properties-title" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-title-properties-title">title（可选）：string</a>
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-title-properties-title">
                
                
























<div>摘要错误消息。</div>




                
            </div>
            </li>
            
            <li><a href="#default-definitions-errorResource-properties-type-properties-type" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-properties-type-properties-type">type（可选）：string</a>
            <div class="collapse schema-summary" id="default-definitions-errorResource-properties-type-properties-type">
                
                
























<div>链接到HTTP错误代码页。</div>




                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“object”，“properties”：{“status”：{“type”：“integer”，“description”：“HTTP状态代码”。 }，“type”：{“type”：“string”，“description”：“链接到HTTP错误代码页”。 }，“title”：{“type”：“string”，“description”：“摘要错误消息”。 }，“instance”：{“type”：“string”，“description”：“链接的URI，提供有关错误的更多详细信息。” }，“errorDetails”：{“type”：“array”，“description”：“如果报告了多个错误，则可以在此数组中以层次结构进行组织。”，“items”：[{“$ ref”： “＃/ definitions / errorResource”}]}，“errorPath”：{“type”：“string”，“description”：“XPath或JSON路径，指示错误发生的位置。” }，“errorCode”：{“type”：“string”，“description”：“特定于应用程序的错误代码，与tittle显示的错误消息有关。” }}}</code></pre>
    

    

    

    

    

    

    


</div>

                    
                    <div id="default-definitions-errorResource-properties-errorDetails" class="swagger-schema">
    <div class="panel-heading">嵌套架构：errorDetails</div>
    
      
      <div class="schema-type">类型： <code>array</code></div>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <div>如果报告了多个错误，则可以在此阵列中以分层结构组织它们。</div>
    

    

    

    

    
        <a href="#" class="toggle-schema pull-right btn btn-default btn-sm btn-xsm" role="button" data-toggle="schema-view">显示来源</a>
        <ul class="schema-properties">
            
            <li><a href="#default-definitions-errorResource-items-0" role="button" data-toggle="prop-collapse" aria-expanded="false" aria-controls="default-definitions-errorResource-items-0">数组：对象</a> <a href="#default-definitions-errorResource" class="btn btn-default btn-sm btn-xsm" role="button">errorResource</a>
            
            <div class="collapse schema-summary" id="default-definitions-errorResource-items-0">
                
                





















                
            </div>
            </li>
            
        </ul>
        <pre class="schema-source" style="display:none"><code class="json">{“type”：“array”，“description”：“如果报告了多个错误，则可以在此数组中以层次结构组织。”，“items”：[{“$ ref”：“＃/ definitions / errorResource “}]}</code></pre>
    

    

    

    

    

    


</div>

                    
                    </div>

                    
                    </div>
                
                </div>
                </div>
                

				<a href="#top" style="float:right">回到顶部</a>
				
                

            </section>

            
        </article>
    </body>
</html><html id="06156.analyzing-captured-and-replayed-workloads.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports."></meta>
      <meta name="description" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports."></meta>
      <title>分析捕获和重放的工作负载</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Testing Guide "></meta>
      <meta property="og:description" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Testing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96279-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="replaying-a-database-workload.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-workload-intelligence.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="RATUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="replaying-a-database-workload.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-workload-intelligence.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">测试指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name">数据库重播</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分析捕获和重放的工作负载</li>
            </ol>
            <a id="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" name="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E"></a><a id="RATUG159"></a>
            
            <h2 id="RATUG-GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" class="sect2"><span class="enumeration_chapter">13</span>分析捕获和重放的工作负载</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章介绍如何使用各种数据库重放报告分析捕获和重放的工作负载。</span> 本章包含以下部分：</div>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" title="工作负载捕获报告包含捕获的工作负载统计信息，有关捕获的顶级会话活动的信息以及捕获过程中使用的任何工作负载过滤器。">使用Workload Capture报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" title="工作负载重播报告包含可用于衡量捕获系统和重放系统之间性能差异的信息。">使用工作负载重播报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" title="重播比较期间报告可用于多种目的。">使用重播比较期间报告</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" title="使用SQL Performance Analyzer报告将工作负载重放中的SQL调优集与工作负载捕获中的另一个SQL调优集或两个工作负载重放中的两个SQL调优集进行比较。">使用SQL Performance Analyzer报告</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E__GUID-C3C4F84C-5A8B-44EC-A5A5-6ED94EFB0F74">
                  <p class="notep1">注意：</p>
                  <p>重播分析完成后，您可以在工作负载捕获时将数据库还原到其原始状态，并在工作负载目录对象备份到另一个物理位置后重复工作负载重放以测试对系统的其他更改。</p>
               </div>
            </div><a id="RATUG287"></a><div class="props_rev_3"><a id="GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" name="GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1"></a><h3 id="RATUG-GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" class="sect3"><span class="enumeration_section">13.1</span>使用Workload Capture报告</h3>
               <div>
                  <p>工作负载捕获报告包含捕获的工作负载统计信息，有关捕获的顶级会话活动的信息以及捕获过程中使用的任何工作负载过滤器。</p>
                  <p>以下部分描述了如何生成和使用工作负载捕获报告：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载捕获报告。">使用Enterprise Manager访问Workload Capture报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" title="您可以使用DBMS_WORKLOAD_CAPTURE包生成工作负载捕获报告。">使用API生成工作负载捕获报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。">查看Workload Capture报告</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG271"></a><a id="RATUG160"></a><div class="props_rev_3"><a id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" name="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149"></a><h4 id="RATUG-GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" class="sect4"><span class="enumeration_section">13.1.1</span>使用Enterprise Manager访问Workload Capture报告</h4>
                  <div>
                     <p>本节介绍如何使用Oracle Enterprise Manager生成工作负载捕获报告。</p>
                     <div class="section">
                        <p>生成工作负载捕获报告的主要工具是Oracle Enterprise Manager。如果由于某种原因Oracle Enterprise Manager不可用，您可以使用API生成工作负载捕获报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" title="您可以使用DBMS_WORKLOAD_CAPTURE包生成工作负载捕获报告。">使用API生成工作负载捕获报告</a> ”中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149__GUID-B2EE3C89-34B9-4D2D-9FC6-849ED0BAA214">要使用Enterprise Manager访问工作负载捕获报告：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从Enterprise Manager Cloud Control控制台的Enterprise菜单中，选择<span class="bold">Quality Management</span> ，然后选择<span class="bold">Database Replay</span> 。</span><div>
                              <p>如果出现“数据库登录”页面，请以具有管理员权限的用户身份登录。</p>
                              <p>将显示“数据库重播”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>从“数据库重放”页面的“捕获的工作负载”选项卡中获取状态不是“已完成”的捕获，从“捕获”表中单击所需捕获的名称。</span><div>
                              <p>将显示“数据库重播”页面的“摘要”选项卡。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">报告”</span>选项卡以访问“工作负载捕获”报告和“Workload Capture ASH Analytics”报告的控件。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Workload Capture报告包含详细输出，显示已捕获但未捕获的数据组件的类型。</p>
                                 </li>
                                 <li>
                                    <p>Capture ASH Analytics报告显示哪些会话消耗的数据库时间最多。此报告提供堆叠图表，以帮助您可视化多个维度的活动会话活动，例如事件，活动类，模块/操作，会话，实例ID和PL / SQL功能。</p>
                                    <p>报告的“其他活动”列表选项表示尚未捕获活动。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>访问报告后，可以单击“ <span class="bold">保存”进行保存</span> 。</span><div>
                              <div class="infoboxnotealso" id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149__GUID-F0976359-5047-4795-8CD7-691428930AB2">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。">查看Workload Capture报告</a> ”</span>以获取有关如何解释工作负载捕获报告的信息</p>
                                    </li>
                                    <li>
                                       <p><a href="../tgdba/analyzing-sampled-data.html#TGDBA277" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a> ，了解有关ASH（活动会话历史记录）的信息</p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG4263"></a><a id="RATUG161"></a><div class="props_rev_3"><a id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" name="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92"></a><h4 id="RATUG-GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" class="sect4"><span class="enumeration_section">13.1.2</span>使用API生成工作负载捕获报告</h4>
                  <div>
                     <div><span>您可以使用<code class="codeph">DBMS_WORKLOAD_CAPTURE</code>包生成工作负载捕获报告。</span> 您还可以使用Oracle Enterprise Manager生成工作负载捕获报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载捕获报告。">使用Enterprise Manager访问Workload Capture报告</a> ”中所述</span> 。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92__GUID-F420E842-EB9E-4343-8CC5-5AD64646AA2E">要生成有关最新工作负载捕获的报告：</p>
                        <ol>
                           <li>
                              <p>使用<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <a id="d27884e497" class="indexterm-anchor"></a> <code class="codeph">GET_CAPTURE_INFO</code>程序。
                              </p>
                              <p><code class="codeph">GET_CAPTURE_INFO</code>过程检索有关工作负载捕获的所有信息，并返回工作负载捕获的<code class="codeph">cap_id</code> 。此函数使用<code class="codeph">dir</code> required参数，该参数指定工作负载捕获目录对象的名称。
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">DBMS_WORKLOAD_CAPTURE.REPORT</code>函数。
                              </p>
                              <p>该<code class="codeph">REPORT</code>功能生成使用报告<code class="codeph">cap_id</code> ，是由返回<code class="codeph">GET_CAPTURE_INFO</code>程序。此函数使用以下参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">capture_id</code>必需参数与包含将为其生成报告的工作负载捕获的目录相关。该目录应该是包含工作负载捕获的主机系统中的有效目录。这个参数的值应该匹配<code class="codeph">cap_id</code>由返回<code class="codeph">GET_CAPTURE_INFO</code>程序。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">format</code> required参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_TEXT</code>和<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_HTML</code> 。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在此示例中， <code class="codeph">GET_CAPTURE_INFO</code>过程检索有关<code class="codeph">jul14</code>目录中的工作负载捕获的所有信息，并返回工作负载捕获的<code class="codeph">cap_id</code> 。该<code class="codeph">REPORT</code>功能然后生成使用文本报告<code class="codeph">cap_id</code> ，是由返回<code class="codeph">GET_CAPTURE_INFO</code>程序。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE cap_id NUMBER; cap_rpt CLOB; BEGIN cap_id：= DBMS_WORKLOAD_CAPTURE.GET_CAPTURE_INFO（dir =&gt;'jul14'）; cap_rpt：= DBMS_WORKLOAD_CAPTURE.REPORT（capture_id =&gt; cap_id，format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_TEXT）;结束; /</pre><div class="infoboxnotealso" id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92__GUID-9C562F36-CAFF-49EC-9279-6C523BFF0FB3">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。">查看Workload Capture报告</a> ”</span>以获取有关如何解释工作负载捕获报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_CAPTURE</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> <a href="../arpls/DBMS_WORKLOAD_CAPTURE.html#ARPLS207" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG162"></a><div class="props_rev_3"><a id="GUID-47F7FA60-746E-449C-8DDD-439FDED31125" name="GUID-47F7FA60-746E-449C-8DDD-439FDED31125"></a><h4 id="RATUG-GUID-47F7FA60-746E-449C-8DDD-439FDED31125" class="sect4"><span class="enumeration_section">13.1.3</span>查看工作负载捕获报告</h4>
                  <div>
                     <div><span>工作负载捕获报告包含可用于评估工作负载捕获有效性的各种类型的信息。</span> 使用此报告中提供的信息，您可以确定捕获的工作负载是否：</div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>表示要重播的实际工作负载</p>
                        </li>
                        <li>
                           <p>不包含您要排除的任何工作负载</p>
                        </li>
                        <li>
                           <p>可以重播</p>
                        </li>
                     </ul>
                     <p>工作负载捕获报告中包含的信息分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关工作负载捕获的详细信息（例如工作负载捕获的名称，已定义的过滤器，日期，时间和捕获的SCN）</p>
                        </li>
                        <li>
                           <p>有关工作负载捕获的总体统计信息（例如捕获的总数据库时间，捕获的登录数和事务数）以及相对于总系统活动的相应百分比</p>
                        </li>
                        <li>
                           <p>捕获的工作负载的配置文件</p>
                        </li>
                        <li>
                           <p>由于版本限制而导致的未捕获工作负载的配置文件</p>
                        </li>
                        <li>
                           <p>使用已定义过滤器排除的未捕获工作负载的配置文件</p>
                        </li>
                        <li>
                           <p>由后台进程或预定作业组成的未捕获工作负载的配置文件</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG288"></a><div class="props_rev_3"><a id="GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" name="GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD"></a><h3 id="RATUG-GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" class="sect3"><span class="enumeration_section">13.2</span>使用工作负载重播报告</h3>
               <div>
                  <p>工作负载重播报告包含可用于衡量捕获系统和重放系统之间性能差异的信息。</p>
                  <p>以下部分描述了如何生成和查看工作负载重播报告：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载重播报告。">使用Enterprise Manager访问工作负载重播报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" title="您可以使用DBMS_WORKLOAD_REPLAY包生成工作负载重播报告。">使用API生成工作负载重播报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" title="工作负载重播报告中包含的信息包括性能和重放差异。">查看工作负载重播报告</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG272"></a><a id="RATUG163"></a><div class="props_rev_3"><a id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" name="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143"></a><h4 id="RATUG-GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" class="sect4"><span class="enumeration_section">13.2.1</span>使用Enterprise Manager访问工作负载重播报告</h4>
                  <div>
                     <p>本节介绍如何使用Oracle Enterprise Manager生成工作负载重播报告。</p>
                     <div class="section">
                        <p>生成工作负载重放报告的主要工具是Oracle Enterprise Manager。如果由于某种原因Oracle Enterprise Manager不可用，您可以使用API生成工作负载重播报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" title="您可以使用DBMS_WORKLOAD_REPLAY包生成工作负载重播报告。">使用API生成工作负载重播报告</a> ”中所述</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-C3812502-F5DB-4AB5-841E-E7F37A5E9D2C">使用Enterprise Manager访问工作负载重播报告：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>从Enterprise Manager Cloud Control控制台的Enterprise菜单中，选择<span class="bold">Quality Management</span> ，然后选择<span class="bold">Database Replay</span> 。</span><div>
                              <p>如果出现“数据库登录”页面，请以具有管理员权限的用户身份登录。</p>
                              <p>将显示“数据库重播”页面。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">重播任务”</span>选项卡，然后选择要访问其报告的重播。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">报告”</span>选项卡可访问各个报告。</span><div>
                              <p>您可以查看几种类型的报告以完成工作负载重放：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>数据库重播</p>
                                    <p>使用此报告以表格格式查看完整的重播统计信息，包括重播差异和工作负载配置文件。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-AC4085B9-0061-41AF-97DF-DDE2E7AD7148"><img src="img/dbr_replay_replay_rep.gif" width="226" alt="下面是dbr_replay_replay_rep.gif的描述" title="下面是dbr_replay_replay_rep.gif的描述" longdesc="img_text/dbr_replay_replay_rep.html"><br><a href="img_text/dbr_replay_replay_rep.html">说明dbr_replay_replay_rep.gif的描述</a></div>
                                    <!-- class="figure" -->
                                 </li>
                                 <li>
                                    <p>比较期间ADDM</p>
                                    <p>使用此报告可以执行一次工作负载重放与其捕获或同一捕获的另一次重放的高级别比较。只能使用此报告比较包含至少5分钟数据库时间的工作负载重放。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-77F8B559-FCA7-4865-A217-B65074A035AA"><img src="img/dbr_replay_addm_rep.gif" width="511" alt="下面是dbr_replay_addm_rep.gif的描述" title="下面是dbr_replay_addm_rep.gif的描述" longdesc="img_text/dbr_replay_addm_rep.html"><br><a href="img_text/dbr_replay_addm_rep.html">插图描述dbr_replay_addm_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>检查报告的以下部分，以了解两个时期之间的性能变化以及更改的原因：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>概观</p>
                                          <p>报告的这一部分显示了SQL通用性，它是基于两个时段共有的SQL语句的平均资源消耗的基本和比较时段之间的可比性。</p>
                                          <p>通用性值100％表示两个时间段中的工作负载“签名”相同。预计此用例的通用性为100％，因为重放的工作负载是相同的（假设您没有使用重放过滤器）。值为0％表示两个时间段没有特定工作负载维度的共同项。</p>
                                          <p>公共性基于输入类型（即SQL正在执行）以及执行SQL语句的负载。因此，仅在一个时间段内运行但不消耗大量时间的SQL语句不会影响通用性。因此，即使某些SQL语句仅在两个句点之一中运行，两个工作负载也可以具有100％的通用性，前提是这些SQL语句不会消耗大量资源。</p>
                                       </li>
                                       <li>
                                          <p>组态</p>
                                          <p>显示的信息显示按实例，主机和数据库分类的各种参数的基本周期和比较周期值。</p>
                                       </li>
                                       <li>
                                          <p>发现</p>
                                          <p>调查结果可以显示性能改进，并确定系统更改导致的主要性能差异。对于消极结果，如果您了解并消除原因，可以消除负面结果。</p>
                                          <p>基准期和比较期显示的值表示与数据库时间有关的性能。</p>
                                          <p>变更影响值表示从一个时间段到另一个时间段的性能变化规模的度量。它适用于按每个时间段消耗的总数据库时间来衡量的问题或项目。绝对值按降序排序。</p>
                                          <p>如果值为正，则发生改善，如果值为负，则发生回归。例如，-200％的变化影响意味着期间2是期间1的三倍。</p>
                                          <p>您可以运行性能调整工具（如ADDM和SQL Tuning Advisor）来修复比较期间的问题，以提高一般系统性能。</p>
                                       </li>
                                       <li>
                                          <p>资源</p>
                                          <p>显示的信息提供了两个时间段的数据库时间划分的摘要，并显示了CPU，内存，I / O和互连的资源使用情况（仅限Oracle RAC）。</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>SQL性能分析器</p>
                                    <p>使用此报告将工作负载捕获中的SQL调优集与工作负载重放中的另一个SQL调优集或两个工作负载重放中的两个SQL调优集进行比较。将SQL调优集与数据库重放进行比较提供了比SQL性能分析器测试执行更多的信息，因为它考虑并显示了每个SQL语句的所有执行计划，而SQL性能分析器测试执行每个SQL语句只为每个SQL语句生成一个执行计划。</p>
                                 </li>
                                 <li>
                                    <p>重播比较期间</p>
                                    <p>使用此报告将一个工作负载重放的AWR数据与其捕获或同一捕获的另一个重放进行比较。在运行此报告之前，必须先前已导出捕获或重放工作负载的AWR数据。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-6584967C-486C-4E9D-B11F-AD2376A8C07B"><img src="img/dbr_replay_compare_per_rep.gif" width="505" alt="下面是dbr_replay_compare_per_rep.gif的描述" title="下面是dbr_replay_compare_per_rep.gif的描述" longdesc="img_text/dbr_replay_compare_per_rep.html"><br><a href="img_text/dbr_replay_compare_per_rep.html">说明描述dbr_replay_compare_per_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>有关使用此报告的信息，请参阅<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。">查看重播比较期间报告</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>重播ASH Analytics</p>
                                    <p>“重播ASH分析”报告包含针对您在下拉菜单中选择的类别重播的指定工作负载持续时间的活动会话历史记录（ASH）信息。在运行此报告之前，必须先从捕获或重放的工作负载中导出AWR数据。</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-C62B12B6-F29B-41E1-B292-C283AE76AAD6"><img src="img/dbr_replay_ash_anal_rep.gif" width="475" alt="下面是dbr_replay_ash_anal_rep.gif的描述" title="下面是dbr_replay_ash_anal_rep.gif的描述" longdesc="img_text/dbr_replay_ash_anal_rep.html"><br><a href="img_text/dbr_replay_ash_anal_rep.html">插图描述dbr_replay_ash_anal_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>该图表显示了等待类的工作负载活动细分值，并提供了对系统产生负面影响的顶级活动会话的详细统计信息。</p>
                                    <p>您可以选择使用“加载映射”来获取系统活动的图形视图。当您不想查看活动在所选时间段内如何随时间变化时，加载地图对于查看单维或多维布局中的活动非常有用。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-A29DB88A-8EE2-4828-9529-383ABFC6A72E">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT093" target="_blank"><span><cite>“Oracle数据库2天+性能调整指南”</cite></span></a> ，了解有关如何解释重播比较期间报告的信息</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG4264"></a><a id="RATUG164"></a><div class="props_rev_3"><a id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" name="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA"></a><h4 id="RATUG-GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" class="sect4"><span class="enumeration_section">13.2.2</span>使用API生成工作负载重播报告</h4>
                  <div>
                     <div><span>您可以使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包生成工作负载重播报告。</span> 您还可以使用Oracle Enterprise Manager生成工作负载重播报告，如<span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" title="本节介绍如何使用Oracle Enterprise Manager生成工作负载重播报告。">使用Enterprise Manager访问工作负载重播报告</a> ”中所述</span> 。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA__GUID-5067CDE0-3F2B-40D3-98C4-677481750485">使用API生成有关工作负载捕获的最新工作负载重放的报告：</p>
                        <ol>
                           <li>
                              <p>通过调用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>从重放目录对象中检索有关工作负载捕获的信息和工作负载重放尝试的历史记录。 <a id="d27884e1162" class="indexterm-anchor"></a> <code class="codeph">GET_REPLAY_INFO</code>函数，如<span class="q">“ <a href="replaying-a-database-workload.html#GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" title="您可以从重放目录对象中检索有关工作负载捕获的所有信息，以及从目录中检索工作负载重放尝试的历史记录。">检索有关工作负载重播的信息</a> ”中所述</span> 。
                              </p>
                              <p><code class="codeph">GET_REPLAY_INFO</code>函数返回单个捕获目录的<code class="codeph">cap_id</code> （对于统一捕获目录，返回的<code class="codeph">cap_id</code>为0）。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">cap_id</code>这是由返回<code class="codeph">GET_REPLAY_INFO</code>功能，运行一个查询返回合适<code class="codeph">rep_id</code>工作负载的最新重播。
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">DBMS_WORKLOAD_REPLAY.REPORT</code>函数。
                              </p>
                              <p><code class="codeph">REPORT</code>函数使用<code class="codeph">SELECT</code>语句返回的<code class="codeph">rep_id</code>生成报告。
                              </p>
                              <p><code class="codeph">REPORT</code>函数使用以下参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">replay_id</code> required参数指定包含将为其生成报告的工作负载重放的目录。该目录应该是包含工作负载重放的主机系统中的有效目录。此参数的值应与上一个查询返回的<code class="codeph">rep_id</code>匹配。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">format</code>参数required参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_TEXT</code> ， <code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_HTML</code>和<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <code class="codeph">TYPE_XML</code> 。</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在此示例中， <code class="codeph">GET_REPLAY_INFO</code>函数从<code class="codeph">jul14</code>重放目录对象中检索有关工作负载捕获的所有信息以及所有工作负载重放尝试的历史记录。该函数返回捕获目录的<code class="codeph">cap_id</code> ，该目录可与<code class="codeph">DBA_WORKLOAD_REPLAYS</code>视图中的<code class="codeph">CAPTURE_ID</code>列关联，以访问检索到的信息。<code class="codeph">SELECT</code>语句为最新的工作负载重放返回相应的<code class="codeph">rep_id</code> 。然后， <code class="codeph">REPORT</code>函数使用<code class="codeph">SELECT</code>语句返回的<code class="codeph">rep_id</code>生成HTML报告。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE cap_id NUMBER; rep_id NUMBER; rep_rpt CLOB; BEGIN cap_id：= DBMS_WORKLOAD_REPLAY.GET_REPLAY_INFO（replay_dir =&gt;'jul14'）; / *获取该捕获的最新重放* / SELECT max（id）INTO rep_id FROM dba_workload_replays WHERE capture_id = cap_id; rep_rpt：= DBMS_WORKLOAD_REPLAY.REPORT（replay_id =&gt; rep_id，format =&gt; DBMS_WORKLOAD_REPLAY.TYPE_HTML）;结束; /</pre><div class="infoboxnotealso" id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA__GUID-11ACC2E6-503D-4A2F-81A6-B22FE12D3893">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" title="工作负载重播报告中包含的信息包括性能和重放差异。">查看工作负载重播报告</a> ”，</span>以获取有关如何解释工作负载重播报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_REPLAY</code> <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG165"></a><div class="props_rev_3"><a id="GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" name="GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46"></a><h4 id="RATUG-GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" class="sect4"><span class="enumeration_section">13.2.3</span>查看工作负载重播报告</h4>
                  <div>
                     <div>在测试系统上重放工作负载之后，与捕获的内容相比，重放的内容可能会有所不同。有许多因素可能导致重放分歧，可以使用工作负载重放报告进行分析。<span>工作负载重播报告中包含的信息包括性能和重放差异。</span></div>
                     <p>当在重放系统中引入影响数据库整体性能的新算法时，可能会出现性能差异。例如，如果在较新版本的Oracle数据库上重播工作负载，则新算法可能会导致特定请求运行得更快，并且分歧将显示为更快的执行。在这种情况下，这是一个理想的分歧。</p>
                     <p>当DML或SQL查询的结果与最初在工作负载中捕获的结果不匹配时，会发生数据偏差。例如，SQL语句在重放期间返回的行数可能少于捕获期间返回的行数。</p>
                     <p>重播数据库调用时发生错误分歧：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>遇到未捕获的新错误</p>
                        </li>
                        <li>
                           <p>不会遇到捕获的错误</p>
                        </li>
                        <li>
                           <p>遇到与捕获的错误不同的错误</p>
                        </li>
                     </ul>
                     <p>工作负载重播报告中包含的信息分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关工作负载重放和工作负载捕获的详细信息，例如作业名称，状态，数据库信息，每个进程的持续时间和时间，以及目录对象和路径</p>
                        </li>
                        <li>
                           <p>为工作负载重播选择的重播选项以及已启动的重播客户端数</p>
                        </li>
                        <li>
                           <p>有关工作负载重放和工作负载捕获的总体统计信息（例如捕获和重放的总数据库时间，捕获和重放的登录和事务数）以及与系统总活动相对应的百分比</p>
                        </li>
                        <li>
                           <p>重播工作量的配置文件</p>
                        </li>
                        <li>
                           <p>重播分歧</p>
                        </li>
                        <li>
                           <p>错误分歧</p>
                        </li>
                        <li>
                           <p>DML和SQL查询数据发散</p>
                        </li>
                     </ul>
                     <p>从Oracle Database Release 19c开始，工作负载重放报告提供诊断慢速工作负载重放所需的信息。工作负载重播报告中包含的信息包含以下附加部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972">重播会话</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B">同步</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF">跟踪提交</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-4C618972-7153-4797-BDBC-15B63E9E6922">会话失败</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972" name="GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972"></a><h5 id="RATUG-GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972" class="sect5"><span class="enumeration_section">13.2.3.1</span>重播会话</h5>
                     <div>
                        <p>“重播会话”部分包括有关正在进行和已完成的重播会话的统计信息，例如热门事件，最慢的重播会话和最快的重播会话。仅在重播正在进行时，才会显示与正在进行的重播会话相关的统计信息。使用本节中的信息可以了解正在进行和已完成的重播会话的顶级事件，比捕获速度慢的重放会话，以及捕获和重放之间会话已用时间的比较。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B" name="GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B"></a><h5 id="RATUG-GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B" class="sect5"><span class="enumeration_section">13.2.3.2</span>同步</h5>
                     <div>
                        <p>在工作负载重放期间，将保留捕获的SQL语句的执行顺序。在重放期间延迟或阻止SQL语句的执行时，结果是工作负载重放速度变慢。</p>
                        <p>“同步”部分包含有关阻止执行其中一个同步SQL语句的会话的信息。仅当阻止SQL语句的执行时才会显示此信息。使用本节中的信息可以了解工作负载重放被阻止或比工作负载捕获慢的原因。本节还包括顶级事件和顶级SQL语句，其中包含与运行同步SQL语句的会话相关的顶级事件。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF" name="GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF"></a><h5 id="RATUG-GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF" class="sect5"><span class="enumeration_section">13.2.3.3</span>跟踪提交</h5>
                     <div>
                        <p>数据库重放跟踪工作负载捕获期间执行的提交以及执行之间消耗的时间。它可以检测缓慢的提交并识别捕获的工作负载的部分，从而减慢工作负载的重放速度。</p>
                        <p>Tracked Commits部分包含有关捕获的提交数量和执行提交的时间的信息。使用此信息可以查找工作负载重放是否比工作负载捕获慢。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-4C618972-7153-4797-BDBC-15B63E9E6922" name="GUID-4C618972-7153-4797-BDBC-15B63E9E6922"></a><h5 id="RATUG-GUID-4C618972-7153-4797-BDBC-15B63E9E6922" class="sect5"><span class="enumeration_section">13.2.3.4</span>会话失败</h5>
                     <div>
                        <p>当用户会话的工作负载重放失败时，将跳过会话中剩余呼叫的重播。“会话失败”部分包括有关会话失败期间执行的SQL语句，失败会话的文件ID和呼叫计数器以及未执行的调用总数的信息。</p>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG289"></a><div class="props_rev_3"><a id="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" name="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D"></a><h3 id="RATUG-GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" class="sect3"><span class="enumeration_section">13.3</span>使用重放比较期间报告</h3>
               <div>
                  <div><span>重播比较期间报告可用于多种目的。</span> 例如，您可以使用重播比较期间报告来比较以下性能：</div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>工作负载重放到其工作负载捕获</p>
                     </li>
                     <li>
                        <p>工作负载重放到同一工作负载捕获的另一次重放</p>
                     </li>
                     <li>
                        <p>多个工作负载捕获到整合重播</p>
                     </li>
                  </ul>
                  <p>以下部分描述了如何生成和查看重播比较期间报告：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" title="本节介绍如何使用DBMS_WORKLOAD_REPLAY包生成重播比较期间报告。">使用API生成重放比较期间报告</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。">查看重播比较期间报告</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D__GUID-E634A0A9-E5A6-4AF7-83C3-B8C14B2FA952">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138" title="通过数据库重放，您可以捕获生产系统上的工作负载并在测试系统上重放它。这在评估或采用新数据库技术时非常有用，因为这些更改可以在测试系统上进行测试，而不会影响生产系统。">使用Consolidated Database Replay</a>获取有关Consolidated Database Replay的信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG292"></a><div class="props_rev_3"><a id="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" name="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300"></a><h4 id="RATUG-GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" class="sect4"><span class="enumeration_section">13.3.1</span>使用API生成重放比较期间报告</h4>
                  <div>
                     <div><span>本节介绍如何使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包生成重播比较期间报告。</span> 此报告仅比较包含至少5分钟数据库时间的工作负载重放。
                     </div>
                     <div class="section">
                        <p>要生成重播比较期间报告，请使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <a id="d27884e1991" class="indexterm-anchor"></a> <code class="codeph">COMPARE_PERIOD_REPORT</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_WORKLOAD_REPLAY.COMPARE_PERIOD_REPORT（replay_id1 =&gt; 12，replay_id2 =&gt; 17，format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_HTML，result =&gt;：report_bind）;结束; /</pre><p>在此示例中， <code class="codeph">COMPARE_PERIOD_REPORT</code>过程以HTML格式生成重播比较期间报告，该报告将重播ID为12的工作负载重放与ID为17的另一重放进行比较。
                        </p>
                        <p>此示例中的<code class="codeph">COMPARE_PERIOD_REPORT</code>过程使用以下参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">replay_id1</code>参数指定更改后将为其生成报告的工作负载重放的数字标识符。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">replay_id2</code>参数指定在生成报告的更改之前的工作负载重放的数字标识符。如果未指定，将与工作负载捕获执行比较。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">format</code>参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_HTML</code> HTML和<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_XML</code> for XML。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p>result参数指定报告的输出。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300__GUID-9EB5B6BC-79A1-4D54-8A43-D203AE440D36">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。">查看重播比较期间报告</a> ”</span> ，了解有关如何解释重播比较期间报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_REPLAY</code> <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG304"></a><div class="props_rev_3"><a id="GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" name="GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7"></a><h4 id="RATUG-GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" class="sect4"><span class="enumeration_section">13.3.2</span>查看重播比较期间报告</h4>
                  <div>
                     <p>通过查看重播比较期间报告，您可以确定是否发生任何重播差异以及是否存在任何重大的性能变化。</p>
                     <p>根据正在进行的比较类型，生成以下三种类型的重播比较期间报告之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>捕捉与重播</p>
                           <p>此报告类型将工作负载重放的性能与其工作负载捕获进行比较。</p>
                        </li>
                        <li>
                           <p>重播与重播</p>
                           <p>此报告类型比较同一工作负载捕获的两个工作负载重放的性能。</p>
                        </li>
                        <li>
                           <p>合并重播</p>
                           <p>此报告类型将多个工作负载捕获的性能与整合的重放进行比较。此报告类型仅提供ASH数据比较部分。有关此报告类型的详细信息，请参阅<span class="q">“ <a href="using-consolidated-database-replay.html#GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" title="使用重播比较期间报告执行统一数据库重放的报告和分析。看到" ="">统一数据库重播的报告和分析</a> ”</span> 。
                           </p>
                        </li>
                     </ul>
                     <p>所有重播比较期间报告类型都包含有关正在比较的两个运行之间最重要更改的信息。使用此信息确定要采取的适当操作。例如，如果发现新的并发问题，请查看自动数据库诊断监视器（ADDM）报告以诊断问题。如果发现新的SQL性能问题，请运行SQL Tuning Advisor来解决问题。</p>
                     <p>重播比较期间报告中的信息分为以下几个部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" title="此部分包含有关在报告中比较的两个运行的元数据。">一般信息</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-49084501-0794-40B8-AC1B-DA5290D6797C" title="本节包含第二次运行相对于第一次运行的分歧分析。如果分析显示出显着差异，请查看完整的分歧报告。">重看发散</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-41FDA25A-559C-4A32-822F-E2FADD192701" title="此部分包含两次运行的高级性能统计信息比较（例如数据库时间的更改）。">主要业绩统计</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" title="本节比较从一次运行到下一次运行的各个SQL语句的性能变化。">热门SQL /电话</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" title="本节比较两次运行的CPU和I / O使用情况。对所有实例求和CPU数，并对实例的CPU使用率求平均值。">硬件使用比较</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-539DA111-5C84-42DA-A642-878193C66280" title="本节包含两种运行中ADDM分析的比较，这两种运行按影响的绝对差异排序。">ADDM比较</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" title="本节比较两次运行中的ASH数据。">ASH数据比较</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG4160"></a><div class="props_rev_3"><a id="GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" name="GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319"></a><h5 id="RATUG-GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" class="sect5"><span class="enumeration_section">13.3.2.1</span>一般信息</h5>
                     <div><span>此部分包含有关在报告中比较的两个运行的元数据。</span> 此处还显示了两次运行之间的任何<code class="codeph">init.ora</code>参数更改。查看本节以验证是否执行了正在测试的系统更改。
                     </div>
                  </div><a id="RATUG4161"></a><div class="props_rev_3"><a id="GUID-49084501-0794-40B8-AC1B-DA5290D6797C" name="GUID-49084501-0794-40B8-AC1B-DA5290D6797C"></a><h5 id="RATUG-GUID-49084501-0794-40B8-AC1B-DA5290D6797C" class="sect5"><span class="enumeration_section">13.3.2.2</span>重播发散</h5>
                     <p>本节包含第二次运行相对于第一次运行的分歧分析。如果分析显示出显着差异，请查看完整的分歧报告。</p>
                  </div><a id="RATUG4162"></a><div class="props_rev_3"><a id="GUID-41FDA25A-559C-4A32-822F-E2FADD192701" name="GUID-41FDA25A-559C-4A32-822F-E2FADD192701"></a><h5 id="RATUG-GUID-41FDA25A-559C-4A32-822F-E2FADD192701" class="sect5"><span class="enumeration_section">13.3.2.3</span>主要性能统计</h5>
                     <div><span>此部分包含两次运行的高级性能统计信息比较（例如数据库时间的更改）。</span> 如果比较显示数据库时间的变化不显着，那么两次运行之间的性能通常是相似的。如果数据库时间发生重大变化，请查看统计信息以确定导致最大更改的组件（CPU或用户I / O）。
                     </div>
                  </div><a id="RATUG4163"></a><div class="props_rev_3"><a id="GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" name="GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A"></a><h5 id="RATUG-GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" class="sect5"><span class="enumeration_section">13.3.2.4</span>顶级SQL /调用</h5>
                     <div><span>本节比较从一次运行到下一次运行的各个SQL语句的性能变化。</span> SQL语句按数据库时间的总变化排序。大多数数据库时间回归的热门SQL语句是SQL调优的最佳候选者。
                     </div>
                  </div><a id="RATUG4164"></a><div class="props_rev_3"><a id="GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" name="GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E"></a><h5 id="RATUG-GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" class="sect5"><span class="enumeration_section">13.3.2.5</span>硬件使用比较</h5>
                     <div>
                        <p>本节比较两次运行的CPU和I / O使用情况。对所有实例求和CPU数，并对实例的CPU使用率求平均值。</p>
                        <p>显示数据和临时文件的I / O统计信息。单块读取时间的高值（远高于10毫秒）表明系统受I / O限制。如果是这种情况，则查看总读取和写入时间，以确定延迟是由过多的I / O请求还是由于I / O吞吐量较差引起的。</p>
                     </div>
                  </div><a id="RATUG4165"></a><div class="props_rev_3"><a id="GUID-539DA111-5C84-42DA-A642-878193C66280" name="GUID-539DA111-5C84-42DA-A642-878193C66280"></a><h5 id="RATUG-GUID-539DA111-5C84-42DA-A642-878193C66280" class="sect5"><span class="enumeration_section">13.3.2.6</span> ADDM比较</h5>
                     <div>
                        <div><span>本节包含两种运行中ADDM分析的比较，这两种运行按影响的绝对差异排序。</span> 比较两次运行的ADDM结果，以确定仅在一次运行中存在的可能问题。如果要测试的系统更改旨在提高数据库性能，请验证ADDM结果中是否反映了预期的改进。
                        </div>
                        <div class="infoboxnotealso" id="GUID-539DA111-5C84-42DA-A642-878193C66280__GUID-EC707E51-7CA5-47A8-AD43-AD44C1076774">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关ADDM分析的信息，请参见<a href="../tgdba/automatic-performance-diagnostics.html#TGDBA94240" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RATUG4166"></a><div class="props_rev_3"><a id="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" name="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8"></a><h5 id="RATUG-GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" class="sect5"><span class="enumeration_section">13.3.2.7</span> ASH数据比较</h5>
                     <div>
                        <div><span>本节比较两次运行中的ASH数据。</span> 比较期间的开始时间和结束时间显示在表格中。这些时间可能与正在比较的两次运行的捕获和重放时间不匹配。相反，这些时间代表采集ASH样本的时间。
                        </div>
                        <p>ASH数据比较部分包含以下小节：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" title="本节总结了基于数据库时间和等待时间分布的两次运行期间的活动。">比较摘要</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" title="此部分按总数据库时间，CPU时间和等待时间显示两次运行的顶级SQL语句。">热门SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-3FB2475D-FA69-42A0-A105-E485911511A6" title="此部分显示两次运行的顶部长期运行的SQL语句。每个长时间运行的SQL语句都包含有关查询的详细信息，例如最大，最小和平均响应时间。">长时间运行的SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" title="本节提取两次运行中常见的SQL语句，并按平均响应时间和总数据库时间的差异显示最常见的SQL语句。">常见的SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-7A13086F-7311-47CB-9641-97FBB578409F" title="此部分包含有关两次运行的总体等待时间的顶级对象的详细信息。">顶级对象</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8__GUID-B10938D8-E39F-4953-A528-683F33AF9926">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关ASH的信息，请参见<a href="../tgdba/analyzing-sampled-data.html#TGDBA277" target="_blank"><span><cite>“Oracle数据库性能调整指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="RATUG4196"></a><a id="RATUG4197"></a><a id="RATUG4167"></a><div class="props_rev_3"><a id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" name="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159"></a><h6 id="RATUG-GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" class="sect6"><span class="enumeration_section">13.3.2.7.1</span>比较摘要</h6>
                        <div>
                           <div><span>本节总结了基于数据库时间和等待时间分布的两次运行期间的活动。</span> 例如：</div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>DB Time Distribution表示如何在CPU使用，等待时间和I / O请求之间分配总数据库时间。</p>
                                 <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABBAAAH">图13-1</a>显示了示例报告的DB Time Distribution子部分。
                                 </p>
                                 <div class="figure" id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABBAAAH">
                                    <p class="titleinfigure">图13-1数据库时间分布</p><img src="img/dbr_rep_db_time_dist.gif" width="243" alt="下面是图13-1的描述" title="下面是图13-1的描述" longdesc="img_text/dbr_rep_db_time_dist.html"><br><a href="img_text/dbr_rep_db_time_dist.html">“图13-1 DB时间分布”的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>等待时间分布表示总等待时间如何在等待事件中分配。两个运行都列出了最高等待事件类，事件名称和事件计数。</p>
                                 <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABFBEBH">图13-2</a>显示了示例报告的等待时间分布子部分。
                                 </p>
                                 <div class="figure" id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABFBEBH">
                                    <p class="titleinfigure">图13-2等待时间分布</p><img src="img/dbr_rep_wait_time_dist.gif" width="339" alt="下面是图13-2的描述" title="下面是图13-2的描述" longdesc="img_text/dbr_rep_wait_time_dist.html"><br><a href="img_text/dbr_rep_wait_time_dist.html">“图13-2等待时间分布”的描述</a></div>
                                 <!-- class="figure" -->
                              </li>
                           </ul>
                        </div>
                     </div><a id="RATUG4168"></a><div class="props_rev_3"><a id="GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" name="GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0"></a><h6 id="RATUG-GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" class="sect6"><span class="enumeration_section">13.3.2.7.2</span> Top SQL</h6>
                        <p>此部分按总数据库时间，CPU时间和等待时间显示两次运行的顶级SQL语句。</p>
                     </div><a id="RATUG4169"></a><div class="props_rev_3"><a id="GUID-3FB2475D-FA69-42A0-A105-E485911511A6" name="GUID-3FB2475D-FA69-42A0-A105-E485911511A6"></a><h6 id="RATUG-GUID-3FB2475D-FA69-42A0-A105-E485911511A6" class="sect6"><span class="enumeration_section">13.3.2.7.3</span>长时间运行的SQL</h6>
                        <p>此部分显示两次运行的顶部长期运行的SQL语句。每个长时间运行的SQL语句都包含有关查询的详细信息，例如最大，最小和平均响应时间。</p>
                     </div><a id="RATUG4170"></a><div class="props_rev_3"><a id="GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" name="GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A"></a><h6 id="RATUG-GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" class="sect6"><span class="enumeration_section">13.3.2.7.4</span>通用SQL</h6>
                        <p>本节提取两次运行中常见的SQL语句，并按平均响应时间和总数据库时间的差异显示最常见的SQL语句。</p>
                     </div><a id="RATUG4198"></a><a id="RATUG4171"></a><div class="props_rev_3"><a id="GUID-7A13086F-7311-47CB-9641-97FBB578409F" name="GUID-7A13086F-7311-47CB-9641-97FBB578409F"></a><h6 id="RATUG-GUID-7A13086F-7311-47CB-9641-97FBB578409F" class="sect6"><span class="enumeration_section">13.3.2.7.5</span>顶部对象</h6>
                        <div>
                           <p>此部分包含有关两次运行的总体等待时间的顶级对象的详细信息。</p>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-7A13086F-7311-47CB-9641-97FBB578409F__BABHCHFD">图13-3</a>显示了示例报告的Top Objects部分。
                           </p>
                           <div class="figure" id="GUID-7A13086F-7311-47CB-9641-97FBB578409F__BABHCHFD">
                              <p class="titleinfigure">图13-3顶部对象</p><img src="img/dbr_rep_top_objects.gif" width="243" alt="下面是图13-3的描述" title="下面是图13-3的描述" longdesc="img_text/dbr_rep_top_objects.html"><br><a href="img_text/dbr_rep_top_objects.html">“图13-3顶部对象”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG4172"></a><div class="props_rev_3"><a id="GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" name="GUID-91CE0855-A551-4585-B4FC-7CCDEB813882"></a><h3 id="RATUG-GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" class="sect3"><span class="enumeration_section">13.4</span>使用SQL Performance Analyzer报告</h3>
               <div>
                  <p>使用SQL Performance Analyzer报告将工作负载重放中的SQL调优集与工作负载捕获中的另一个SQL调优集或两个工作负载重放中的两个SQL调优集进行比较。</p>
                  <p>将SQL调优集与数据库重放进行比较提供了比SQL性能分析器测试执行更多的信息，因为它考虑并显示了每个SQL语句的所有执行计划，而SQL性能分析器测试执行仅为每个SQL语句为每个SQL语句生成一个执行计划。</p>
               </div><a id="RATUG314"></a><div class="props_rev_3"><a id="GUID-F711BF47-3898-4A8A-A210-FD87866659F4" name="GUID-F711BF47-3898-4A8A-A210-FD87866659F4"></a><h4 id="RATUG-GUID-F711BF47-3898-4A8A-A210-FD87866659F4" class="sect4"><span class="enumeration_section">13.4.1</span>使用API生成SQL Performance Analyzer报告</h4>
                  <div>
                     <p>本节介绍如何使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包生成SQL Performance Analyzer报告。
                     </p>
                     <div class="section">
                        <p>要生成SQL Performance Analyzer报告，请使用<code class="codeph">DBMS_WORKLOAD_REPLAY</code> 。 <a id="d27884e3447" class="indexterm-anchor"></a> <code class="codeph">COMPARE_SQLSET_REPORT</code>程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_WORKLOAD_REPLAY.COMPARE_SQLSET_REPORT（replay_id1 =&gt; 12，replay_id2 =&gt; 17，format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_HTML，result =&gt;：report_bind）;结束; /</pre><p>在此示例中， <code class="codeph">COMPARE_SQLSET_REPORT</code>过程以HTML格式生成SQL性能分析器报告，该报告将工作负载重放期间捕获的SQL调整集与重放ID 12与在工作负载重放期间捕获的ID调整为12的SQL调整集进行比较。
                        </p>
                        <p>此示例中的<code class="codeph">COMPARE_SQLSET_REPORT</code>过程使用以下参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">replay_id1</code>参数指定更改后将为其生成报告的工作负载重放的数字标识符。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">replay_id2</code>参数指定更改后的工作负载重放的数字标识符，将为其生成报告。如果未指定，将与工作负载捕获执行比较。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">format</code>参数指定报告格式。有效值包括<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_HTML</code>为HTML， <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_XML</code> for XML，以及<code class="codeph">DBMS_WORKLOAD_CAPTURE</code> 。 <code class="codeph">TYPE_TEXT</code>用于文本。此参数是必需的。
                              </p>
                           </li>
                           <li>
                              <p>result参数指定报告的输出。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F711BF47-3898-4A8A-A210-FD87866659F4__GUID-4ADDF98C-E2DA-498B-BD65-F63EC477AA02">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="comparing-sql-trials.html#GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" title="SQL Performance Analyzer报告分为以下几个部分：">查看命令行中的SQL性能分析器报告</a> ”，</span>以获取有关如何解释SQL Performance Analyzer报告的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_WORKLOAD_REPLAY</code>包的信息，请<code class="codeph">DBMS_WORKLOAD_REPLAY</code> <a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="09687.sharding-data-routing.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Sharding supports direct, key-based, routing to a shard, routing by proxy, and routing to mid-tiers."></meta>
      <meta name="description" content="Oracle Sharding supports direct, key-based, routing to a shard, routing by proxy, and routing to mid-tiers."></meta>
      <title>在Sharded数据库环境中请求路由</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Using Oracle Sharding"></meta>
      <meta property="og:description" content="Oracle Sharding supports direct, key-based, routing to a shard, routing by proxy, and routing to mid-tiers."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Using Oracle Sharding"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="using-oracle-sharding.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-14T12:19:13-08:00"></meta>
      <meta name="dcterms.title" content="Using Oracle Sharding"></meta>
      <meta name="dcterms.dateCopyrighted" content="2018, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E87088-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="sharding-application-development.html" title="Previous" type="text/html"></link>
      <link rel="next" href="sharding-high-availability.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="SHARD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sharding-application-development.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="sharding-high-availability.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">使用Oracle Sharding</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Sharded数据库环境中请求路由</li>
            </ol>
            <a id="GUID-7001A9CC-B681-4DFA-B461-6FD653D9D62D" name="GUID-7001A9CC-B681-4DFA-B461-6FD653D9D62D"></a>
            
            <h2 id="SHARD-GUID-7001A9CC-B681-4DFA-B461-6FD653D9D62D" class="sect2"><span class="enumeration_chapter">6</span>在Sharded数据库环境中请求路由</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Sharding支持直接，基于密钥，路由到分片，按代理路由和路由到中间层。</p>
               <p>以下主题描述了分片数据库环境中的路由。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8">直接路由到分片</a><br>Oracle客户端和连接池能够识别连接字符串中指定的分片密钥，以实现高性能数据相关路由。连接层中的分片路由缓存用于将数据库请求直接路由到数据所在的分片。
                  </li>
                  <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4">Sharded数据库中具有代理路由的查询和DML</a><br>Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括<code>SELECT</code>和<code>DML</code> ），而无需指定应执行查询的分片。
                  </li>
                  <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-F5D3C0B6-83F9-457A-97A9-429AC9EE4550">在中间层连接池和碎片之间创建亲和力</a><br>称为中间层路由的Oracle通用连接池（UCP）功能允许智能路由器（例如，F5 BigIP）路由到与分片密钥关联的中间层。它将分片数据库拓扑发布到路由器层，以便基于特定分片密钥的请求被路由到适当的应用程序中间层，从而在给定的分片子集上建立连接。
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8" name="GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8"></a><h3 id="SHARD-GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8" class="sect3"><span class="enumeration_section">6.1</span>直接路由到分片</h3>
               <div>
                  <p>Oracle客户端和连接池能够识别连接字符串中指定的分片密钥，以实现高性能数据相关路由。连接层中的分片路由缓存用于将数据库请求直接路由到数据所在的分片。</p>
                  <p>以下主题描述了到分片的直接，基于密钥的路由：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-2C0F1289-4B10-4282-A652-4C661D0A6FB4">关于直接路由到分片</a><br>在直接，基于密钥的路由到路径中，建立与单个相关分片的连接，该分片包含使用分片密钥与所需事务相关的数据。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E">分片API</a><br>Oracle连接池和驱动程序支持Oracle Sharding。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-7001A9CC-B681-4DFA-B461-6FD653D9D62D" title="Oracle Sharding支持直接，基于密钥，路由到分片，按代理路由和路由到中间层。">在Sharded数据库环境中请求路由</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-2C0F1289-4B10-4282-A652-4C661D0A6FB4" name="GUID-2C0F1289-4B10-4282-A652-4C661D0A6FB4"></a><h4 id="SHARD-GUID-2C0F1289-4B10-4282-A652-4C661D0A6FB4" class="sect4"><span class="enumeration_section">6.1.1</span>关于直接路由到分片</h4>
                  <div>
                     <p>在直接，基于密钥的路由到路径中，建立与单个相关分片的连接，该分片包含使用分片密钥与所需事务相关的数据。</p>
                     <p>在连接检出期间，分片密钥用于在用户会话级别路由数据库连接请求。复合分片方法需要分片键和超分片键。直接的，基于密钥的路由需要将分片密钥（或超级分片密钥）作为连接的一部分传递。基于该信息，建立与相关分片的连接，该分片包含与给定分片密钥或超分片密钥相关的数据。</p>
                     <p>使用分片建立会话后，将在给定分片的范围内支持和执行所有SQL查询和DML。此路由很快，并且用于执行分片内事务的所有OLTP工作负载。建议对需要最高性能和可用性的所有OLTP工作负载采用直接路由。</p>
                     <p>为了支持Oracle Sharding，对Oracle连接池和驱动程序进行了重要增强。JDBC，通用连接池（UCP），OCI会话池（OCI）和Oracle Data Provider for .NET（ODP.NET）提供API以在连接创建期间传递分片键。Apache Tomcat，IBM Websphere，Oracle WebLogic Server和JBOSS可以利用JDBC / UCP支持并使用分片。PHP，Python，Perl和Node.js可以利用OCI支持。</p>
                     <p>分片拓扑缓存是分片键范围到分片的映射。Oracle集成连接池在其内存中维护此分片拓扑缓存。在第一次连接到给定分片时（在池初始化期间或池连接到较新的分片时），从分片中收集分片键范围映射以动态构建分片拓扑缓存。</p>
                     <p>缓存分片拓扑会创建分片的快速路径，并加快创建与分片的连接的过程。当使用分片键建立连接请求时，连接池将查找存在此特定分片键的相应分片（来自其拓扑缓存）。如果池中有匹配的连接，则池通过应用其内部连接选择算法返回与该分片的连接。</p>
                     <p>任何缓存拓扑图中给定分片键的数据库连接请求直接进入分片（即绕过分片导向器）。连接池还订阅来自SDB的RLB通知，并根据运行时负载平衡建议分配最佳连接。建立连接后，客户端直接在分片上执行事务。在执行了给定分片键的所有事务之后，应用程序必须返回到池的连接并获取另一个键的连接。</p>
                     <p>如果池中没有匹配的连接，则通过将带有分片键的连接请求转发给分片导向器来创建新连接。</p>
                     <p>初始化池并基于所有分片构建分片拓扑缓存后，分片导向器中断对直接路由没有影响。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2C0F1289-4B10-4282-A652-4C661D0A6FB4__GUID-973B0EBF-CCF4-4352-B8C2-CCC171BCDC36">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="sharding-data-routing.html#GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8" title="Oracle客户端和连接池能够识别连接字符串中指定的分片密钥，以实现高性能数据相关路由。连接层中的分片路由缓存用于将数据库请求直接路由到数据所在的分片。">直接路由到分片</a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8" title="Oracle客户端和连接池能够识别连接字符串中指定的分片密钥，以实现高性能数据相关路由。连接层中的分片路由缓存用于将数据库请求直接路由到数据所在的分片。">直接路由到分片</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E" name="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E"></a><h4 id="SHARD-GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E" class="sect4"><span class="enumeration_section">6.1.2分片</span> API</h4>
                  <div>
                     <p>Oracle连接池和驱动程序支持Oracle Sharding。</p>
                     <p>JDBC，UCP，OCI和Oracle Data Provider for .NET（ODP.NET）将分片密钥识别为连接检查的一部分。Apache Tomcat，Websphere和WebLogic利用UCP支持分片，PHP，Python，Perl和Node.js利用OCI支持。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E__GUID-F897CC91-29E8-4C95-9151-5922E6F4EC6D">为Oracle UCP分片API</p>
                        <p>通过使用增强的分片API调用<code class="codeph">createShardingKeyBuilder</code>和<code class="codeph">createConnectionBuilder</code>指定分片键，分片感知应用程序获得与给定分片的连接。
                        </p>
                        <p>在高级别，在使用Sharded Database进行应用程序时必须遵循以下步骤：</p>
                        <ol>
                           <li>
                              <p>更新URL以反映分片导向器和全局服务。</p>
                           </li>
                           <li>
                              <p>在池级别和分片级别设置池参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">setInitialPoolSize</code>启动UCP时要创建的初始连接数</p>
                                 </li>
                                 <li>
                                    <p>池在运行时使用<code class="codeph">setMinPoolSize</code>维护的最小连接数</p>
                                 </li>
                                 <li>
                                    <p>UCP属性，用于设置使用<code class="codeph">setMaxPoolSize</code>在连接池上允许的最大连接数</p>
                                 </li>
                                 <li>
                                    <p>使用<code class="codeph">setMaxConnectionsPerShard</code>设置每个分片的最大连接数</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>使用<code class="codeph">createShardingKeyBuilder</code>构建分片键对象。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">createConnectionBuilder</code>建立连接。
                              </p>
                           </li>
                           <li>
                              <p>在给定分片的范围内执行事务。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E__GUID-0C81050C-FC81-4CE1-8EAE-59AC42C587C1">
                        <p class="titleinexample">示例6-1使用UCP Sharding API建立连接</p>
                        <p>以下是一个代码片段，说明了如何构建分片键以及如何使用UCP Sharding API调用建立连接。</p><pre class="pre codeblock"><code>...PoolDataSource pds = PoolDataSourceFactory.getPoolDataSource（）; //设置连接池属性pds.setURL（DB_URL）; pds.setUser（ “HR”）; pds.setPassword（ “****”）; pds.setInitialPoolSize（10）; pds.setMinPoolSize（20）; pds.setMaxPoolSize（30）; //构建分片键对象OracleShardingKey shardingKey = pds.createShardingKeyBuilder（）.subkey（“mary.smith@example.com”，OracleType。VARCHAR2）.build（）; //为分片获取UCP连接连接conn = pds.createConnectionBuilder（）。shardingKey（shardingKey）.build（）; ...</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E__GUID-33BFD16B-5472-41D4-A38B-12A7ECEB7E9F">
                        <p class="titleinexample">示例6-2使用UCP连接池的示例分片感知应用程序代码</p>
                        <p>在此示例中，池设置在池级别和分片级别定义。</p><pre class="pre codeblock"><code>import java.sql。连接; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import oracle.jdbc。OracleShardingKey; import oracle.jdbc。OracleType; import oracle.jdbc.pool。OracleDataSource; import oracle.ucp.jdbc。PoolDataSource; import oracle.ucp.jdbc。PoolDataSourceFactory; public class MaxConnPerShard {public static void main（String [] args）抛出SQLException { <span class="bold">String url =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（HOST = <span class="variable" translate="no">shard-dir1</span> ）（PORT = 3216）（PROTOCOL = tcp） ））（CONNECT_DATA =（SERVICE_NAME = shsvc.shpool.oradbcloud）（REGION =东侧）））“; String user =“testuser1”，pwd =“testuser1”;</span> <span class="bold">int maxPerShard = 100，initPoolSize = 20;</span> PoolDataSource pds = PoolDataSourceFactory.getPoolDataSource（）; pds.setConnectionFactoryClassName（OracleDataSource.class.getName（））; pds.setURL（URL）; pds.setUser（用户）; pds.setPassword（PWD）; pds.setConnectionPoolName（ “测试池中”）; <span class="bold">pds.setInitialPoolSize（initPoolSize）;</span> <span class="bold">//为每个碎片设置最大连接数pds.setMaxConnectionsPerShard（maxPerShard）;</span> System.out.println（“每个分片的最大连接数为：”+ pds.getMaxConnectionsPerShard（））; <span class="bold">//在shardingKeyVal = 123中构建分片关键对象; OracleShardingKey sdkey = pds.createShardingKeyBuilder（）.subkey（shardingKeyVal，OracleType。NUMBER）.build（）;</span> //尝试使用分片键建立maxPerShard连接Connection [] conns = new Connection [maxPerShard]; for（int i = 0; i &lt;maxPerShard; i ++）{ <span class="bold">conns [i] = pds.createConnectionBuilder（）。shardingKey（sdkey）.build（）;</span>语句stmt = conns [i] .createStatement（）; ResultSet rs = stmt.executeQuery（“select sys_context（'userenv'，'instance_name'），sys_context（'userenv'，'chunk_id'）from dual”）; while（rs.next（））{System.out.println（（i + 1）+“ -  inst：”+ rs.getString（1）+“，chunk：”+ rs.getString（2））; } rs.close（）; stmt.close（）; System.out.println（“尝试构建”+（maxPerShard + 1）+“连接......”）;尝试{Connection conn = pds.createConnectionBuilder（）.shardingKey（sdkey）.build（）;语句stmt = conn.createStatement（）; ResultSet rs = stmt.executeQuery（“select sys_context（'userenv'，'instance_name'），sys_context（'userenv'，'chunk_id'）from dual”）; while（rs.next（））{System.out.println（（maxPerShard + 1）+“ -  inst：”+ rs.getString（1）+“，chunk：”+ rs.getString（2））; } rs.close（）; stmt.close（）;的System.out.println（“问题！无法构建连接，因为每个分片的max-connections超出“）; conn.close（）;} catch（SQLException e）{System.out.println（”每个分片遇到的最大连接数，无法再建立连接，预期的异常：“+ e.getMessage（））;} for（int i = 0; i &lt;conns.length; i ++）{conns [i] .close（）;}}}</code></pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E__GUID-594E12DA-8248-43D3-877B-FA8F27A99032">ODP.NET Sharding API</p>
                        <p>支持分片的应用程序通过使用ODP.NET API指定分片键和超分片键来获取与给定分片的连接，例如<code class="codeph">OracleConnection</code>类上的<code class="codeph">SetShardingKey(OracleShardingKey shardingKey, OracleShardingKey superShardingKey)</code>实例方法。
                        </p>
                        <p>在较高的层次上，.NET应用程序使用Sharded Database需要执行以下步骤：</p>
                        <ol>
                           <li>
                              <p>使用ODP.NET，非托管驱动程序。</p>
                              <p>无论是否有ODP.NET连接池，都支持分片。每个池都可以保持与分片数据库的不同分片的连接。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">OracleShardingKey</code>类设置分片键和超级分片键的另一个实例。
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">OracleConnection.调用<code class="codeph">OracleConnection.之前的SetShardingKey()</code>方法<code class="codeph">OracleConnection.Open()</code>以便ODP.NET可以使用指定的分片键和超级分片键返回连接。
                              </p>
                              <p>当<code class="codeph">OracleConnection</code>处于Closed状态时，必须设置这些键，否则抛出异常。
                              </p>
                           </li>
                        </ol>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E__GUID-5DD88D24-08B8-4EAC-A094-076301374AE5">
                        <p class="titleinexample">示例6-3使用ODP.NET的示例分片感知应用程序代码</p><pre class="pre codeblock"><code>使用系统;使用Oracle。数据访问。客户; class Sharding {static void Main（）{OracleConnection con = new OracleConnection（“user id = hr; password = hr; Data Source = orcl;”）; //设置分片键OracleShardingKey shardingKey = new OracleShardingKey（OracleDbType。Int32,123）; //为复合键shardingKey设置第二个分片键值。SetShardingKey（OracleDbType。Varchar2，“gold”）; //创建和设置超级分片键OracleShardingKey superShardingKey = new OracleShardingKey（）; superShardingKey。SetShardingKey（OracleDbType。Int32,1000）; //在连接con上设置超级分片键和分片键。SetShardingKey（shardingKey，superShardingKey）; CON。打开（）; //执行SQL查询}}</code></pre></div>
                     <!-- class="example" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A49CEDDD-49F7-49EF-B83B-74048A63021E__GUID-57C6BE35-A449-4212-96F9-3333A3B61125">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Oracle Sharding的JDBC支持的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=JJDBC-GUID-1D7795CA-79DC-452B-9FCC-0EF430F87461" target="_blank"><span><cite>“Oracle数据库JDBC开发人员指南”</cite></span></a></p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=JJUCP-GUID-12685D3A-F083-433A-90DF-C5533009B841" target="_blank"><span><cite>Oracle通用连接池开发人员指南</cite></span></a> ，了解有关Oracle Sharding的UCP支持的信息</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=ODPNT8599" target="_blank"><span><cite>适用于.NET的Oracle数据提供程序开发人员指南（适用于Microsoft Windows），</cite></span></a>以获取有关Oracle Sharding的ODP.NET支持的信息</p>
                        <p><a href="../lnoci/oci-interface-for-using-shards.html#LNOCI-GUID-C64136C2-CF65-4507-8811-9A03946CC817" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> ，了解有关使用分片的OCI接口的信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-64CAD794-FAAA-406B-9E20-0C35E96D3FA8" title="Oracle客户端和连接池能够识别连接字符串中指定的分片密钥，以实现高性能数据相关路由。连接层中的分片路由缓存用于将数据库请求直接路由到数据所在的分片。">直接路由到分片</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" name="GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4"></a><h3 id="SHARD-GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" class="sect3"><span class="enumeration_section">6.2分</span>片数据库中具有代理路由的查询和DML</h3>
               <div>
                  <p>Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括<code>SELECT</code>和<code>DML</code> ），而无需指定应执行查询的分片。
                  </p>
                  <p>以下主题详细描述了代理路由：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-7227ADD2-B9B3-4CB4-B0A8-C385415EECF1">关于Sharded数据库中的代理路由</a><br>代理路由是一种辅助使用模式，旨在方便开发人员。它需要与协调器建立连接。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-9C13DCC4-0018-4049-94D8-70F518008504">Oracle Sharding多分片查询协调器</a><br>多分片查询协调器数据库包含分片拓扑的元数据，并为分片数据库提供查询处理支持。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-E58EA3C1-8EB6-4F51-88BD-FC887035A624">使用代理路由查询和DML</a><br>代理路由可以跨分片聚合数据和报告。它还允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定语句应执行的分片键（在连接期间）。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-1BC28361-73D8-460E-A5E4-C11FCD721ECC">单分片查询的代理路由</a><br>单分片查询是一种查询，它只需要扫描来自一个分片的数据，而不需要从任何其他分片中查找数据。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-E3CF0022-FA38-4DD0-A5D5-7A409EA45F76">多分片查询的代理路由</a><br>多分片查询必须扫描来自多个分片的数据，并且每个分片上的处理独立于任何其他分片。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B">代理路由中支持的查询形状</a><br>Oracle Sharding支持单个和多个分片查询形状，但有一些限制。
                     </li>
                     <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-51377035-217B-4624-88CD-A5D5DE125606">代理路由的执行计划</a><br>在多分片查询中，每个分片都会生成一个独立的执行计划，该计划可能与查询中其他分片上的计划不同。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-7001A9CC-B681-4DFA-B461-6FD653D9D62D" title="Oracle Sharding支持直接，基于密钥，路由到分片，按代理路由和路由到中间层。">在Sharded数据库环境中请求路由</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-7227ADD2-B9B3-4CB4-B0A8-C385415EECF1" name="GUID-7227ADD2-B9B3-4CB4-B0A8-C385415EECF1"></a><h4 id="SHARD-GUID-7227ADD2-B9B3-4CB4-B0A8-C385415EECF1" class="sect4"><span class="enumeration_section">6.2.1</span>关于Sharded数据库中的代理路由</h4>
                  <div>
                     <p>代理路由是一种辅助使用模式，旨在方便开发人员。它需要与协调器建立连接。</p>
                     <p>分片目录数据库承担协调器数据库的角色。协调器使用分片拓扑的元数据，并为分片数据库提供查询处理支持。SQL编译器自动识别相关分片，并协调所有参与分片的查询执行。与协调器建立会话后，将执行SQL查询和DML，无需修改。</p>
                     <p>代理路由适用于以下场景：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当应用程序在连接期间无法传递分片键时</p>
                        </li>
                        <li>
                           <p>当应用程序需要从驻留在多个分片上的分片表中访问数据时</p>
                        </li>
                        <li>
                           <p>通常用于报告的SQL查询，例如销售数据的聚合</p>
                        </li>
                     </ul>
                     <p>使用协调器进行路由允许应用程序提交SQL语句，而不会在连接期间传递分片键值。协调器的SQL编译器分析查询并将其重写为由参与的分片发送和执行的查询片段。重写查询，以便大多数查询处理在参与的分片上完成，然后由协调器聚合。本质上，分片充当协调器执行的查询的计算节点。因为计算被推送到数据，所以减少了分片和协调器之间的数据移动。这种安排还能够通过尽可能地将协调器上的处理卸载到分片上来有效地使用资源。</p>
                     <p>建议应用程序将其工作负载分开以进行直接路由和代理路由。必须为这些工作负载创建单独的连接池。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-9C13DCC4-0018-4049-94D8-70F518008504" name="GUID-9C13DCC4-0018-4049-94D8-70F518008504"></a><h4 id="SHARD-GUID-9C13DCC4-0018-4049-94D8-70F518008504" class="sect4"><span class="enumeration_section">6.2.2</span> Oracle Sharding多分片查询协调器</h4>
                  <div>
                     <p>多分片查询协调器数据库包含分片拓扑的元数据，并为分片数据库提供查询处理支持。</p>
                     <p> </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9C13DCC4-0018-4049-94D8-70F518008504__GUID-09E91297-065F-45C1-827E-1CC49B0A6660">连接到多分片协调器</p>
                        <p>要执行多分片查询，请使用分片目录数据库上的GDS $ CATALOG服务连接到多分片协调器：</p><pre class="pre codeblock"><code>sqlplus app_schema / app_schema @shardcatvm：1521 / GDS \ $ CATALOG.oradbcloud</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C13DCC4-0018-4049-94D8-70F518008504__GUID-82F6FFDB-0121-4827-9A14-68D40BBD5A8E">多分片协调器高可用性</p>
                        <p>多分片协调器的可用性会影响基于代理路由的工作负载，因此强烈建议在启用快速启动故障切换的最高可用性保护模式（零数据丢失故障切换）中使用Data Guard保护协调器。协调器可以选择启用Oracle RAC以获得额外的可用性和可伸缩性。</p>
                        <p>为了提高多分片查询工作负载的可伸缩性和可用性，只读模式下的Oracle Active Data Guard备用分片目录数据库可以充当多分片查询协调器。对于目录数据库的每个活动副本，特殊协调器服务GDS $ COORDINATOR。 <span class="variable" translate="no">cloud_name</span> （其中<span class="variable" translate="no">cloud_name</span>是为GDSCTL命令中的<code class="codeph">configname</code>参数指定的值， <code class="codeph">create shardcatalog</code> ，默认情况下为oradbcloud）正在所有分片导向器上运行并注册。客户端可以在任何副本上连接到此服务并执行多分片查询，允许分片导向器在运行时负载平衡方面分发多分片查询工作负载，并减少主分片目录中的负载，这是主要的分片目录Oracle Sharding框架的组件。此外，如果设置了数据库的区域，并且客户端在连接字符串中指定了区域，则分片导向器会根据区域关联性路由连接。
                        </p>
                        <p>多分片查询协调器的可用性对使用直接路由的工作负载没有任何影响。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C13DCC4-0018-4049-94D8-70F518008504__GUID-A3330ED0-5051-4ED4-8033-B5ADDF4CC94A">多分片查询协调器数据库大小调整</p>
                        <p>分片目录和多分片查询协调器承载以下关键信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>分片数据库拓扑的元数据</p>
                           </li>
                           <li>
                              <p>分片应用程序的模式</p>
                           </li>
                           <li>
                              <p>复制表的主副本</p>
                           </li>
                        </ul>
                        <p>元数据和模式的大小是名义上的;但是，在调整多分片查询协调器的大小时，应计划重复表的数量及其占用的空间。</p>
                        <p>除了上述内容之外，还应调整多分片查询协调器的大小以处理代理路由，基于SQL查询和正在处理的数据量，代理路由可以是CPU，I / O和内存密集型。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-8CB6442A-9326-4242-892A-4383E05C1C48">代理路由的弹性</a><br>强烈建议协调器使用Data Guard进行保护，具有快速启动故障切换功能，并且可选择启用Oracle RAC以实现可用性和可伸缩性</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-8CB6442A-9326-4242-892A-4383E05C1C48" name="GUID-8CB6442A-9326-4242-892A-4383E05C1C48"></a><h5 id="SHARD-GUID-8CB6442A-9326-4242-892A-4383E05C1C48" class="sect5"><span class="enumeration_section">6.2.2.1</span>代理路由的弹性</h5>
                     <div>
                        <p>强烈建议协调器使用Data Guard进行保护，具有快速启动故障切换功能，并且可选择启用Oracle RAC以实现可用性和可伸缩性</p>
                        <p>协调器失败会影响通过协调器路由的多分片和单分片查询。以下是查询时的故障情况以及代理路由的预期行为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果参与的分片已关闭，则协调器将查询发送到具有相同数据的另一个分片。</p>
                           </li>
                           <li>
                              <p>如果在参与的分片上执行查询期间发生故障，则用户将收到错误。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-9C13DCC4-0018-4049-94D8-70F518008504" title="多分片查询协调器数据库包含分片拓扑的元数据，并为分片数据库提供查询处理支持。">Oracle Sharding多分片查询协调器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E58EA3C1-8EB6-4F51-88BD-FC887035A624" name="GUID-E58EA3C1-8EB6-4F51-88BD-FC887035A624"></a><h4 id="SHARD-GUID-E58EA3C1-8EB6-4F51-88BD-FC887035A624" class="sect4"><span class="enumeration_section">6.2.3</span>使用代理路由查询和DML</h4>
                  <div>
                     <p>代理路由可以跨分片聚合数据和报告。它还允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定语句应执行的分片键（在连接期间）。</p>
                     <p>在没有分片密钥用例的聚合和SQL执行中，与直接的，基于密钥的路由相比，用户接受的性能水平降低。</p>
                     <p>在分片数据库（SDB）中，有两种类型的表：分片表和重复表。</p>
                     <p>分片表在分片键上是等分的。</p><pre class="pre codeblock"><code>S = S1 <span class="bold">U</span> S2 <span class="bold">U</span> ... <span class="bold">U</span> Sn</code></pre><p>所有分片上的重复表都相同。</p><pre class="pre codeblock"><code>R = R1 = ...... = Rn</code></pre><p>SDB中的代理路由提供了一种透明机制，用于执行从分片和重复表访问数据的典型SQL查询，而无需应用程序指定相关分片SQL编译器自动识别相关分片并协调所有参与分片的查询执行。数据库链接用于协调器和分片之间的通信。</p>
                     <p>在高级别，协调器将每个传入的查询Q重写为由两个查询CQ和SQ组成的分布形式，其中SQ（分片查询）是在每个参与的分片上执行的Q的部分，并且CQ（协调器查询）是在协调器分片上执行的部分。</p><pre class="pre codeblock"><code>Q =&gt; CQ（Shard_Iterator（SQ））</code></pre><p>以下是为了进行帧间分片执行而将Q1重写为Q1'的聚合查询示例：</p><pre class="pre codeblock"><code>Q1：SELECT COUNT（*）FROM customers Q1'：SELECT SUM（sc）FROM（Shard_Iterator（SELECT COUNT（*）sc FROM s1（i）））</code></pre><p>这个过程有两个关键要素：（1）识别相关分片（2）将查询重写为分布形式，以及分片迭代。</p>
                     <p>在协调器数据库上编译查询期间，查询编译器分析分片键上的谓词，并提取可用于标识参与分片的谓词，即将为查询中引用的分片表贡献行的分片。其余的碎片称为修剪碎片。</p>
                     <p>在仅识别出一个参与分片的情况下，将完整查询路由到该分片以进行完全执行。这称为单分片查询。如果有多个参与分片，则查询称为多分片查询并重写。重写过程考虑了查询计算的表达式以及查询形状。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1BC28361-73D8-460E-A5E4-C11FCD721ECC" name="GUID-1BC28361-73D8-460E-A5E4-C11FCD721ECC"></a><h4 id="SHARD-GUID-1BC28361-73D8-460E-A5E4-C11FCD721ECC" class="sect4"><span class="enumeration_section">6.2.4</span>单分片查询的代理路由</h4>
                  <div>
                     <p>单分片查询是一种查询，它只需要扫描来自一个分片的数据，而不需要从任何其他分片中查找数据。</p>
                     <p>单分片查询类似于连接到特定分片并在该分片上发出查询的客户端。在这种情况下，整个查询将在单个参与的分片上执行，协调器只将已处理的行传递回客户端。协调器上的计划类似于远程映射游标。</p>
                     <p>例如，以下查询完全映射到单个分片，因为客户123的数据仅位于该分片上。</p><pre class="pre codeblock"><code>SELECT count（*）FROM customers c，orders o WHERE c.custno = o.custno and c.custno = 123;</code></pre><p>该查询在shard键上包含一个条件，该条件映射到一个且只有一个在查询编译时（文字）或查询开始时间（bind）已知的分片。查询在合格分片上完全执行。</p>
                     <p>支持单个分片查询：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>平等和列表，例如<code class="codeph">Area = 'West'</code></p>
                        </li>
                        <li>
                           <p>包含文字和绑定的文字，绑定或表达的条件，例如</p><pre class="pre codeblock"><code>Area =：bind Area = CASE：bind &lt;10 THEN'West'ELSE'East'END</code></pre></li>
                        <li>
                           <p><code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">FOR UPDATE</code>和<code class="codeph">MERGE</code> 。 <code class="codeph">UPSERT</code>不受支持。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E3CF0022-FA38-4DD0-A5D5-7A409EA45F76" name="GUID-E3CF0022-FA38-4DD0-A5D5-7A409EA45F76"></a><h4 id="SHARD-GUID-E3CF0022-FA38-4DD0-A5D5-7A409EA45F76" class="sect4"><span class="enumeration_section">6.2.5</span>多分片查询的代理路由</h4>
                  <div>
                     <p>多分片查询必须扫描来自多个分片的数据，并且每个分片上的处理独立于任何其他分片。</p>
                     <p>多分片查询映射到多个分片，协调器可能需要在将结果发送到客户端之前进行一些处理。例如，以下查询获取每个客户下达的订单数量。</p><pre class="pre codeblock"><code>SELECT count（*），c.custno FROM customers c，orders o WHERE c.custno = o.custno GROUP BY c.custno;</code></pre><p>协调器将查询转换为以下内容。</p><pre class="pre codeblock"><code>SELECT sum（count_col），custno FROM（SELECT count（*）count_col，c.custno FROM customers c，orders o WHERE c.custno = o.custno GROUP BY c.custno）GROUP BY custno;</code></pre><p>内联查询块作为远程映射查询块映射到每个分片。协调器在所有分片的结果集之上执行进一步聚合和<code class="codeph">GROUP BY</code> 。每个分片上的执行单元是内联查询块。
                     </p>
                     <p>仅对<code class="codeph">SELECT</code>语句支持多分片查询。查询可以访问单个分片（在相等过滤器的情况下），也可以访问所有分片（如果在分片键上没有过滤谓词）。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sharding-data-routing.html#GUID-902C8750-EF4E-4551-AF75-AC4B95FC7D03">在多分片查询中指定一致性级别</a><br>在跨分片执行多分片查询时，可以使用初始化参数MULTISHARD_QUERY_DATA_CONSISTENCY设置不同的一致性级别。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-902C8750-EF4E-4551-AF75-AC4B95FC7D03" name="GUID-902C8750-EF4E-4551-AF75-AC4B95FC7D03"></a><h5 id="SHARD-GUID-902C8750-EF4E-4551-AF75-AC4B95FC7D03" class="sect5"><span class="enumeration_section">6.2.5.1</span>在多分片查询中指定一致性级别</h5>
                     <div>
                        <p>在跨分片执行多分片查询时，可以使用初始化参数MULTISHARD_QUERY_DATA_CONSISTENCY设置不同的一致性级别。</p>
                        <p>您可以为多分片查询指定不同的一致性级别。例如，您可能需要一些查询来避免跨分片的SCN同步成本，并且这些分片可以是全局分布的。另一个用例是当你使用备用数据库进行复制时，多分片查询可以接受稍微陈旧的数据，因为结果可以从主数据库及其备用数据库获取。</p>
                        <p>默认模式为strong，它在所有分片上执行SCN同步。其他模式跳过SCN同步。delayed_standby_allowed级别允许从备用数据库中获取数据，具体取决于负载平衡和其他因素，并且可能包含过时数据。</p>
                        <p>可以在系统级别或会话级别设置此参数。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-902C8750-EF4E-4551-AF75-AC4B95FC7D03__GUID-411DF42A-BBD9-438B-ADF2-459FFB35F647">
                           <p class="notep1">也可以看看：</p>
                           <p>有关MULTISHARD_QUERY_DATA_CONSISTENCY用法的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=REFRN-GUID-313D79DE-1A42-482C-BF41-6F821C8F3307" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 。
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-E3CF0022-FA38-4DD0-A5D5-7A409EA45F76" title="多分片查询必须扫描来自多个分片的数据，并且每个分片上的处理独立于任何其他分片。">多碎片查询的代理路由</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B" name="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B"></a><h4 id="SHARD-GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B" class="sect4"><span class="enumeration_section">6.2.6</span>代理路由中支持的查询形状</h4>
                  <div>
                     <p>Oracle Sharding支持单个和多个分片查询形状，但有一些限制。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-ACE4058D-5510-4CD5-887B-8BFA731BB5D2">限制</p>
                        <p>以下是在Oracle Sharding中使用查询结构的限制：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>下面的交易部分中的示例给出了对DML的限制。</p>
                           </li>
                           <li>
                              <p>不支持<code class="codeph">CONNECT BY</code>查询。
                              </p>
                           </li>
                           <li>
                              <p>仅在<code class="codeph">SELECT</code>子句中的多分片查询中允许用户定义的PL / SQL。如果在<code class="codeph">WHERE</code>子句中指定了它，则抛出错误。
                              </p>
                              <p>不支持XLATE，XML查询和对象类型列。</p>
                           </li>
                           <li>
                              <p>不支持协调器上的分片表上的IAS。</p>
                           </li>
                           <li>
                              <p>不支持<code class="codeph">MODEL</code>子句。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-91DF1B49-1CE2-4C41-B697-A139003AF5B0">查询仅涉及重复的表</p>
                        <p>对于仅涉及重复表的查询，查询形状没有限制。查询在协调器上执行。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-22F4E52A-FDE3-4096-93F6-E11CC42190C8">查询仅涉及分片表</p>
                        <p>对于单个表查询，查询可以在限定分片的分片键上具有相等性过滤器。对于连接查询，应使用分片键上的相等性来连接所有表。以下是涉及分片表的查询的一些示例。</p>
                        <p>内连接，其中equi-join仅用于分片键。</p><pre class="pre codeblock"><code>SELECT ... FROM s1 INNER JOIN s2 ON s1.sk = s2.sk WHERE any_filter（s1）AND any_filter（s2）</code></pre><p>左外连接仅在分片键上。</p><pre class="pre codeblock"><code>SELECT ... FROM s1 LEFT OUTER JOIN s2 ON s1.sk = s2.sk</code></pre><p>右外连接，与左外连接相同。</p><pre class="pre codeblock"><code>SELECT ... FROM s1 RIGHT OUTER JOIN s2 ON s1.sk = s2.sk</code></pre><p>仅在分片键上进行全外连接，但仅当Native有效且需要等连接时才有效。</p><pre class="pre codeblock"><code>SELECT ... FROM s1 FULL OUTER JOIN s2 ON s1.sk = s2.sk WHERE any_filter（s1）AND any_filter（s2）</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-D71A9767-639F-422D-90D5-71CF5E691507">查询涉及分片和重复表</p>
                        <p>基于分片键上的谓词，涉及分片和重复表的查询可以是单分片或多分片查询。唯一的区别是查询将包含在每个分片上重复的非分片表。</p>
                        <p>分片表和重复表之间的连接可以使用任何比较运算符（= &lt;&gt; &lt;=&gt; =）甚至任意连接表达式在任何列上。以下是连接模式的示例。</p>
                        <p>内部联接</p><pre class="pre codeblock"><code>SELECT ... FROM s1 INNER JOIN r1 ON any_join_condition（s1，r1）WHERE any_filter（s1）AND any_filter（r1）</code></pre><p>左/右外连接</p>
                        <p>分片表是<code class="codeph">LEFT OUTER JOIN</code>的第一个表：</p><pre class="pre codeblock"><code>SELECT ... FROM <span class="bold">s1</span> LEFT OUTER JOIN r1 ON any_join_condition（s1，r1）WHERE any_filter（s1）AND any_filter（r1）SELECT ... FROM r1 LEFT OUTER JOIN <span class="bold">s1</span> ON any_join_condition（s1，s2）AND any_filter（r1）AND <span class="bold">filter_one_shard（s1）</span></code></pre><p>分片表是<code class="codeph">RIGHT OUTER JOIN</code>第二个表：</p><pre class="pre codeblock"><code>SELECT ... FROM r1 RIGHT OUTER JOIN <span class="bold">s1</span> ON any_join_condition（s1，r1）WHERE any_filter（s1）AND any_filter（r1）SELECT ... FROM <span class="bold">s1</span> RIGHT OUTER JOIN r1 ON any_join_condition（s1，s2 <span class="bold">）</span> AND filter_one_shard（ <span class="bold">s1）</span> AND any_filter（r1）</code></pre><p>全外连接</p><pre class="pre codeblock"><code>SELECT ... FROM s1 FULL OUTER JOIN r1 ON s1.sk = s2.sk WHERE any_filter（s1）AND any_filter（s2）</code></pre><p>半连接（ <code class="codeph">EXISTS</code> ）</p><pre class="pre codeblock"><code>SELECT ... FROM s1 EXISTS（SELECT 1 FROM r1 WHERE r1.anykey = s1.anykey）SELECT ... FROM r1 EXISTS（SELECT 1 FROM s1 WHERE r1.anykey = s1.anykey和filter_one_shard（s1））</code></pre><p>反加入（ <code class="codeph">NOT EXISTS</code> ）</p><pre class="pre codeblock"><code>SELECT ... FROM s1 NOT EXISTS（SELECT 1 FROM r1 WHERE r1.anykey = s1.anykey）</code></pre><p>左/右外连接</p>
                        <p>复制表是<code class="codeph">LEFT OUTER JOIN</code>的第一个表，或者分片表是第一个，它根据分片键上的过滤谓词映射到单个分片：</p><pre class="pre codeblock"><code>SELECT ... FROM r1 LEFT OUTER JOIN s1 ON any_join_condition（s1，s2）AND any_filter（r1）AND any_filter（s1）</code></pre><p>其中重复的表是<code class="codeph">RIGHT OUTER JOIN</code>的第二个表，或者分片表是第二个，它根据分片键上的过滤谓词映射到单个分片：</p><pre class="pre codeblock"><code>SELECT ... FROM s1 RIGHT OUTER JOIN r1 ON any_join_condition（s1，s2）AND any_filter（s1）AND any_filter（r1）</code></pre><p>完全外部加入</p>
                        <p>需要访问多个分片的分片表：</p><pre class="pre codeblock"><code>SELECT ... FROM s1 FULL OUTER JOIN r1 ON s1.non_sk = s2.non_sk WHERE any_filter（s1）AND any_filter（s2）</code></pre><p>半连接（ <code class="codeph">EXISTS</code> ）</p>
                        <p>分片表位于子查询中，需要访问多个分片：</p><pre class="pre codeblock"><code>SELECT ... FROM r1 EXISTS（SELECT 1 FROM s1 WHERE r1.anykey = s1.anykey）</code></pre><p>反加入（ <code class="codeph">NOT EXISTS</code> ）</p>
                        <p>分片表在子查询中：</p><pre class="pre codeblock"><code>SELECT ... FROM r1 NOT EXISTS（SELECT 1 FROM s1 WHERE r1.anykey = s1.anykey</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-885861C9-D473-4B22-9D74-6AC1951C0D50">聚合函数</p>
                        <p>代理路由支持以下聚合：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">计数</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">和</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MIN</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MAX</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">AVG</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-1974D8DE-2376-47DA-85DF-92E7EFA3ED0F">多分片查询和全局CR</p>
                        <p>多分片查询必须通过在所有分片的最高公共SCN上发出查询来维护全局读取一致性（CR）。有关如何设置一致性级别的信息，请参阅<a href="sharding-data-routing.html#GUID-902C8750-EF4E-4551-AF75-AC4B95FC7D03" title="在跨分片执行多分片查询时，可以使用初始化参数MULTISHARD_QUERY_DATA_CONSISTENCY设置不同的一致性级别。">在多个分片查询中指定一致性级别</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-153720B4-2DF6-452C-9F69-0AE9B37FABFC">交易</p>
                        <p><span class="underline">仅</span>支持<span class="underline">仅影响</span>一个分片的DML语句。例如，</p><pre class="pre codeblock"><code>更新S1 set col = ...其中<span class="bold">sk = &lt;constant&gt;</span> ;</code></pre><p>不支持影响多个分片的DML语句。例如，</p><pre class="pre codeblock"><code>更新S1 set col = ...;</code></pre><p>在事务中，可以在不同的分片上执行多个单个分片DML。例如，</p><pre class="pre codeblock"><code>插入S1值（...）;更新S1设置col = ...其中<span class="bold">sk = <span class="variable" translate="no">constant</span></span> ;删除S1，其中<span class="bold">sk = <span class="variable" translate="no">constant</span></span> ;承诺;</code></pre><p>对于多分片DML，协调器使用数据库链接，启动分布式事务并执行两阶段提交以保证分布式事务的一致性。对于不确定事务，数据库管理员必须手动恢复它。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-66A389F7-D1F0-46F7-8A4C-7116E83F4489">在多分片查询中传递提示</p>
                        <p>协调器上原始查询中指定的任何提示都会传播到分片。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5D2C35-6CB2-45CC-B936-CABA2C329E1B__GUID-EBD29518-E44D-42CB-9DC4-FC9A95B1DC98">跟踪和排除慢速运行的多分片查询</p>
                        <p>在协调<code class="codeph">shard_sql</code>上设置跟踪事件<code class="codeph">shard_sql</code>以跟踪查询重写和分片修剪。观察到的一个常见性能问题是，由于分片的某些限制，GROUP BY未被推送到分片。检查是否所有可能的操作都被推送到分片，协调器只需要很少的工作来合并分片的结果。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-51377035-217B-4624-88CD-A5D5DE125606" name="GUID-51377035-217B-4624-88CD-A5D5DE125606"></a><h4 id="SHARD-GUID-51377035-217B-4624-88CD-A5D5DE125606" class="sect4"><span class="enumeration_section">6.2.7</span>代理路由的执行计划</h4>
                  <div>
                     <p>在多分片查询中，每个分片都会生成一个独立的执行计划，该计划可能与查询中其他分片上的计划不同。</p>
                     <p>您无需连接到单个分片即可查看SQL分段的解释计划。<code class="codeph">dbms_xplan.display_cursor()</code>提供的接口在协调器上显示在分片上执行的SQL段的计划， <code class="codeph">[V/X]$SHARD_SQL</code>将<code class="codeph">[V/X]$SHARD_SQL</code>片查询的分片SQL片段唯一地映射到目标分片数据库。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-51377035-217B-4624-88CD-A5D5DE125606__GUID-94DB70CE-D8C0-4DD8-960F-836AA88EFC86">dbms_xplan.display_cursor（）的SQL段接口</p>
                        <p>两个接口显示在分片上执行的SQL段的计划。接口将分片ID作为参数，以显示指定分片中的计划。<code class="codeph">ALL_SHARDS</code>格式显示所有分片的计划。
                        </p>
                        <p>要从分片打印所有计划，请使用格式ALL_SHARDS，如下所示。</p><pre class="pre codeblock"><code>select * from table（dbms_xplan.display_cursor（sql_id =&gt;：sqlid，cursor_child_no =&gt;：childno，format =&gt;'BASIC + <span class="bold">ALL_SHARDS</span> '，shard_ids =&gt; shard_ids））</code></pre><p>要从分片打印选择性计划，请在<code class="codeph">display_cursor()</code>函数中传递分片ID。对于来自多个分片的计划，在<code class="codeph">shard_ids</code>参数中传递包含感兴趣的分<code class="codeph">shard_ids</code> ID的数字数组，如此处所示。
                        </p><pre class="pre codeblock"><code>select * from table（dbms_xplan.display_cursor（sql_id =&gt;：sqlid，cursor_child_no =&gt;：childno，format =&gt;'BASIC'， <span class="bold">shard_ids =&gt; ids</span> ））</code></pre><p>要从一个分片返回计划，请将分片ID直接传递给<code class="codeph">shard_id</code>参数，如此处所示。
                        </p><pre class="pre codeblock"><code>select * from table（dbms_xplan.display_cursor（sql_id =&gt;：sqlid，cursor_child_no =&gt;：childno，format =&gt;'BASIC'， <span class="bold">shard_id =&gt; 1</span> ））</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-51377035-217B-4624-88CD-A5D5DE125606__GUID-C827DA36-3151-42EC-9606-2AD0D0963C7D">[V / X] $ SHARD_SQL</p>
                        <p><code class="codeph">[V/X]$SHARD_SQL</code>将<code class="codeph">[V/X]$SHARD_SQL</code>片查询的分片SQL片段唯一映射到目标分片数据库。此视图仅与分片协调器数据库相关，以存储为给定多分片查询的每个分片SQL片段访问的分片列表。每次执行多分片查询都可以在不同的分片集上执行分片SQL片段，因此每次执行都会更新分片ID。此视图维护每个REMOTE节点的分片SQL片段的SQL ID以及执行分片SQL片段的SHARD ID。
                        </p><pre class="pre codeblock"><code>名字空？输入----------------------------------------- -------- ---------------------------- SQL_ID VARCHAR2（13）CHILD_NUMBER NUMBER NODE_ID NUMBER SHARD_SQL_ID VARCHAR2（13）SHARD_ID NUMBER SHARD_CHILD_NUMBER NUMBER</code></pre><ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">SQL_ID</span> - 协调器上<span class="bold">多分片</span>查询的SQL ID</p>
                           </li>
                           <li>
                              <p><span class="bold">CHILD_NUMBER</span> - 协调器上<span class="bold">多分片</span>查询的游标子编号</p>
                           </li>
                           <li>
                              <p><span class="bold">NODE_ID</span> - 多分片查询的分片SQL片段的REMOTE节点的ID</p>
                           </li>
                           <li>
                              <p><span class="bold">SHARD_SQL_ID</span> - 给定远程NODE ID的分片SQL片段的SQL ID</p>
                           </li>
                           <li>
                              <p><span class="bold">SHARD_ID</span> - 执行分片SQL片段的分片的ID</p>
                           </li>
                           <li>
                              <p><span class="bold">SHARD _CHILD_NUMBER</span> - 分片上碎片SQL片段的游标子编号（默认为0）</p>
                           </li>
                        </ul>
                        <p>以下是分片数据库和执行计划上的多分片查询的示例。</p><pre class="pre codeblock"><code>SQL&gt;从存在的部门a中选择count（*）（从部门b中选择不同的department_id，其中b.department_id = 60）; ------------------------------------------------ | Id |操作|名称| ------------------------------------------------ | 0 |选择声明| | | 1 | SORT AGGREGATE | | | 2 |过滤器| | | 3 |查看| VW_SHARD_377C5901 | | 4 | SHARD ITERATOR | | | 5 | <span class="bold">REMOTE</span> | | | 6 |查看| VW_SHARD_EEC581E4 | | 7 | SHARD ITERATOR | | | 8 | <span class="bold">REMOTE</span> | | ------------------------------------------------</code></pre><p>在<code class="codeph">V$SHARD_SQL</code>视图上查询<code class="codeph">V$SHARD_SQL</code> 。
                        </p><pre class="pre codeblock"><code>SQL&gt;从v $ shard_sql中选择*，其中SQL_ID ='1m024z033271u'; SQL_ID NODE_ID SHARD_SQL_ID SHARD_ID ------------- ------- -------------- -------- 1m024z033271u 5 5z386yz9suujt 1 1m024z033271u 5 5z386yz9suujt 11 1m024z033271u 5 5z386yz9suujt 21 1m024z033271u 8 8f50ctj1a2tbs 11</code></pre></div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-51377035-217B-4624-88CD-A5D5DE125606__GUID-570F1CD0-8191-4F5C-BCBD-1CBED91EA578">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=ARPLS-GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=REFRN-GUID-35400A54-B329-4C50-96AB-830152437737" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-EFC30D99-D4A8-40F6-A0DC-D15FE7BDC7F4" title="Sharding支持对未指定分片键的查询进行路由。这允许任何数据库应用程序灵活地在表格被分片或复制的系统中执行SQL语句（包括SELECT和DML），而无需指定应执行查询的分片。">在分片数据库中具有代理路由的查询和DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-F5D3C0B6-83F9-457A-97A9-429AC9EE4550" name="GUID-F5D3C0B6-83F9-457A-97A9-429AC9EE4550"></a><h3 id="SHARD-GUID-F5D3C0B6-83F9-457A-97A9-429AC9EE4550" class="sect3"><span class="enumeration_section">6.3</span>在中间层连接池和碎片之间创建亲和力</h3>
               <div>
                  <p>称为中间层路由的Oracle通用连接池（UCP）功能允许智能路由器（例如，F5 BigIP）路由到与分片密钥关联的中间层。它将分片数据库拓扑发布到路由器层，以便基于特定分片密钥的请求被路由到适当的应用程序中间层，从而在给定的分片子集上建立连接。</p>
                  <p>在典型的Oracle Sharding环境中，中间层连接池将数据库请求路由到特定分片。这可能导致每个中间层连接池与每个分片建立连接的情况。这可能会创建与数据库的连接太多。可以通过在中间层和分片之间创建亲和性来解决该问题。在这种情况下，为每个数据中心或云专用中间层（Web服务器，应用程序服务器）以及将客户端请求直接路由到包含客户端数据的分片（对应于客户端分片）的中间层是理想的钥匙）居住。用于这种设置的常用术语是泳道，其中每个泳道是专用堆栈，从Web服务器到应用服务器一直到数据库。</p>
                  <p>Oracle通用连接池（UCP）通过提供中间层路由API解决了这个问题，该API可用于将客户端请求路由到相关的中间层。<code class="codeph">OracleShardRoutingCache</code>类公开了UCP中间层API。此类的实例表示UCP内部分片路由缓存，可以通过提供连接属性（如用户，密码和URL）来创建。路由缓存连接到分片目录以检索分片映射拓扑的密钥并将其存储在其缓存中。
                  </p>
                  <p>路由缓存由UCP中间层API <code class="codeph">getShardInfoForKey(shardKey,superShardKey)</code> ，它接受分片键作为输入，并返回映射到输入分片键的一组<code class="codeph">ShardInfo</code>实例。<code class="codeph">ShardInfo</code>实例封装了一个唯一的分片名称和分片的优先级。使用中间层API的应用程序可以将返回的唯一分片名称值映射到具有与特定分片的连接的中间层。通过订阅相应的ONS事件，在分块或将其移动到其他分片时，路由缓存会自动更新。
                  </p>
                  <p>以下代码示例说明了Oracle UCP中间层路由API的用法。</p>
                  <div class="example" id="GUID-F5D3C0B6-83F9-457A-97A9-429AC9EE4550__GUID-5D4DAF99-8CF1-4D44-B188-DC10264559E1">
                     <p class="titleinexample">示例6-4使用UCP API的中间层路由</p><pre class="pre codeblock"><code>import java.sql。的SQLException; import java.util。性能; import java.util。随机; import java.util。组; import oracle.jdbc。OracleShardingKey; import oracle.jdbc。OracleType; import oracle.ucp。UniversalConnectionPoolException; import oracle.ucp.routing。ShardInfo; import oracle.ucp.routing.oracle。OracleShardRoutingCache; / ** *代码示例说明了UCP的中间层路由功能的使用。* API接受分片键作为输入，并返回映射到分片键的ShardInfo *实例集。ShardInfo实例封装*唯一的分片名称和优先级。然后，可以将唯一的分片名称*映射到连接到特定分片的中间层服务器。* * / public class MidtierShardingExample {private static String user =“testuser1”; private static String password =“testuser1”; // catalog DB URL private static String url =“jdbc：oracle：thin：@ // hostName：1521 / catalogServiceName”; private static String region =“regionName”; public static void main（String args []）throws Exception {testMidTierRouting（）; static void testMidTierRouting（）抛出UniversalConnectionPoolException，SQLException {Properties dbConnectProperties = new Properties（）; dbConnectProperties.setProperty（OracleShardRoutingCache。USER，user）; dbConnectProperties.setProperty（OracleShardRoutingCache。密码，密码）; //中间层路由API接受目录数据库URL dbConnectProperties.setProperty（OracleShardRoutingCache。URL，网址）; //获取ONS配置字符串dbConnectProperties.setProperty（OracleShardRoutingCache）需要区域名称。地区，地区）; OracleShardRoutingCache routingCache = new OracleShardRoutingCache（dbConnectProperties）; final int COUNT = 10;随机随机= new Random（）; for（int i = 0; i &lt;COUNT; i ++）{int key = random.nextInt（）; OracleShardingKey shardKey = routingCache.getShardingKeyBuilder（）.subkey（key，OracleType。NUMBER）.build（）; OracleShardingKey superShardKey = null;设置&lt;ShardInfo&gt; shardInfoSet = routingCache.getShardInfoForKey（shardKey，superShardKey）; for（ShardInfo shardInfo：shardInfoSet）{System.out.println（“Sharding Key =”+ key +“Shard Name =”+ shardInfo.getName（）+“Priority =”+ shardInfo.getPriority（））; }}}}</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=JJUCP-GUID-6B3483EE-6E38-4B76-AAAC-0192E5827C3A" target="_blank">使用UCP的中间层路由</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-data-routing.html#GUID-7001A9CC-B681-4DFA-B461-6FD653D9D62D" title="Oracle Sharding支持直接，基于密钥，路由到分片，按代理路由和路由到中间层。">在Sharded数据库环境中请求路由</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04868.database-concepts.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>数据库概念</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="cobol-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:40:40-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96466-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="precompiler-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="datatypes-and-host-variables.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*COBOL Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="precompiler-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="datatypes-and-host-variables.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-and-concepts.html" property="item" typeof="WebPage"><span property="name">介绍和概念</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据库概念</li>
            </ol>
            <a id="GUID-0F4F51CC-ED32-427A-9631-7BCDDC7D2DB2" name="GUID-0F4F51CC-ED32-427A-9631-7BCDDC7D2DB2"></a><a id="LNPCB003"></a>
            
            <h2 id="LNPCB-GUID-0F4F51CC-ED32-427A-9631-7BCDDC7D2DB2" class="sect2"><span class="enumeration_chapter">3</span>数据库概念</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍CONNECT语句及其选项，Oracle Net Services和相关的网络连接语句。提供了交易处理。您将学习保护数据库一致性的基本技术，包括如何控制对Oracle数据的更改是永久更改还是撤消。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="database-concepts.html#GUID-5B6A77A1-D7B0-4BC1-B194-E7EB51A54304">连接到Oracle</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-E3F2A833-D42D-475F-8DE5-F1EFD91E2A2C">默认数据库和连接</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-E1177148-D3CD-4BD8-9410-960476A6617C">关键术语</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-6A1C673E-993A-453B-9390-DEF91EEE3D65">事务如何保护数据库</a> 
                     </p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-B7317C1E-9549-4ACD-884C-35F3628CA825">开始和结束交易</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-F6D78EC6-B50D-45E7-B409-0D3994CF5339">使用COMMIT语句</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-C323E4D2-9CEE-46B6-8C08-50B71EA5505D">使用ROLLBACK语句</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-59EEDD58-7CD0-4842-9545-6B2C52D6488B">使用SAVEPOINT语句</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-4B174FCB-ADD2-46EC-B0D0-6C64BE0DC1D4">使用RELEASE选项</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-7CCD2A18-D062-4F41-AABF-D58A763E6627">使用SET TRANSACTION语句</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-78E84CE3-AFAA-4279-B3BE-48800AD6ADAC">覆盖默认锁定</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-687E5EBE-714C-49B1-928E-4EB8310B85A8">在提交中获取</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-123F9392-C594-46DB-A2BB-92A92953C08A">处理分布式事务</a></p>
                  </li>
                  <li>
                     <p><a href="database-concepts.html#GUID-5BE08E32-E12A-48B0-AEBE-DAF750831D12">交易处理指南</a></p>
                  </li>
               </ul>
            </div><a id="LNPCB203"></a><div class="props_rev_3"><a id="GUID-5B6A77A1-D7B0-4BC1-B194-E7EB51A54304" name="GUID-5B6A77A1-D7B0-4BC1-B194-E7EB51A54304"></a><h3 id="LNPCB-GUID-5B6A77A1-D7B0-4BC1-B194-E7EB51A54304" class="sect3"><span class="enumeration_section">3.1</span>连接到Oracle</h3>
               <div>
                  <p>在查询或操作数据之前，您的Pro * COBOL程序必须登录Oracle。要登录，请使用CONNECT语句，如<a id="d10894e119" class="indexterm-anchor"></a><a id="d10894e121" class="indexterm-anchor"></a><a id="d10894e125" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWD END-EXEC。</pre><p>其中USERNAME和PASSWD是PIC X（ <span class="italic">n</span> ）或PIC X（ <span class="italic">n</span> ）VARYING主变量。或者，您可以使用以下语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT：USR-PWD END-EXEC。</pre><p>其中主机变量USR-PWD包含用斜杠（/）分隔的用户名和密码，后跟可选的tnsnames.ora别名（@TNSALIAS）。</p>
                  <p>CONNECT语句的语法具有可选的ALTER AUTHORIZATION子句。CONNECT的完整语法如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT {：用户IDENTIFIED BY：oldpswd | ：usr_psw} [[AT {dbname | ：host_variable}] USING：connect_string] [{ALTER AUTHORIZATION：newpswd | IN {SYSDBA | SYSOPER} MODE}] END-EXEC。</pre><p>CONNECT语句必须是程序执行的第一个SQL语句。也就是说，其他可执行的SQL语句可以位于CONNECT语句之前，但不能在逻辑上。如果预编译器选项AUTO_CONNECT = YES，则不需要CONNECT语句。）<a id="d10894e149" class="indexterm-anchor"></a><a id="d10894e153" class="indexterm-anchor"></a></p>
                  <p>要单独提供用户名和密码，请将两个主机变量定义为字符串或VARCHAR变量。如果提供包含用户名和密码的用户标识，则只需要一个主变量。<a id="d10894e159" class="indexterm-anchor"></a><a id="d10894e163" class="indexterm-anchor"></a><a id="d10894e167" class="indexterm-anchor"></a></p>
                  <p>确保在执行CONNECT之前设置用户名和密码变量，否则它将失败。您的程序可以提示输入值，也可以对它们进行硬编码，如下所示：<a id="d10894e173" class="indexterm-anchor"></a><a id="d10894e177" class="indexterm-anchor"></a><a id="d10894e181" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">工作储存部分。 ...01 USERNAME PIC X（10）。01 PASSWD PIC X（10）。......程序部门。登录。执行SQL WHENEVER SQLERROR GOTO LOGON-ERROR END-EXEC。将“SCOTT”移至USERNAME。将“TIGER”转移到PASSWD。 EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWD END-EXEC。</pre><p>但是，您不能将用户名和密码硬编码到CONNECT语句中或使用带引号的文字。例如，以下语句<span class="italic">无效</span> ：</p><pre class="oac_no_warn" dir="ltr">由TIGER END-EXEC识别的EXEC SQL CONNECT SCOTT。 EXEC SQL CONNECT“SCOTT”由“TIGER”END-EXEC识别。</pre><div class="infoboxnotealso" id="GUID-5B6A77A1-D7B0-4BC1-B194-E7EB51A54304__GUID-77CFF8AA-BF7B-499F-9777-FA1EA490138B">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“</span>有关ALTER AUTHORIZATION子句的更多信息，请参阅<span class="q">” <a href="database-concepts.html#GUID-E37C4FF2-C93D-41E3-A4C0-7B07AA29BEF3">在运行时更改密码</a> “</span> 。
                           </p>
                        </li>
                        <li>
                           <p>有关SYSDBA和SYSOPER的更多信息，请参见<span class="q">“ <a href="database-concepts.html#GUID-C9E12FED-5BDF-4647-A5DE-EDC4D42CEAA1">SYSDBA或SYSOPER权限</a> ”</span> 。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCB204"></a><div class="props_rev_3"><a id="GUID-E3F2A833-D42D-475F-8DE5-F1EFD91E2A2C" name="GUID-E3F2A833-D42D-475F-8DE5-F1EFD91E2A2C"></a><h3 id="LNPCB-GUID-E3F2A833-D42D-475F-8DE5-F1EFD91E2A2C" class="sect3"><span class="enumeration_section">3.2</span>默认数据库和连接</h3>
               <div>
                  <p>在Pro * COBOL程序中，可以同时维护多个数据库连接。</p>
               </div><a id="LNPCB206"></a><a id="LNPCB205"></a><div class="props_rev_3"><a id="GUID-EE843C17-8881-494C-85CE-8EE4D0833065" name="GUID-EE843C17-8881-494C-85CE-8EE4D0833065"></a><h4 id="LNPCB-GUID-EE843C17-8881-494C-85CE-8EE4D0833065" class="sect4"><span class="enumeration_section">3.2.1</span>并发登录</h4>
                  <div>
                     <p><a id="d10894e259" class="indexterm-anchor"></a> Pro * COBOL通过Oracle Net Services支持分布式处理。您的应用程序可以同时访问本地和远程数据库的任意组合，或者建立到同一数据库的多个连接。在<a href="database-concepts.html#GUID-EE843C17-8881-494C-85CE-8EE4D0833065__BHCBICDF">图3-1中</a> ，应用程序与一个本地和三个远程Oracle数据库进行通信。ORA2，ORA3和ORA4是CONNECT语句中使用的逻辑名称。<a id="d10894e266" class="indexterm-anchor"></a><a id="d10894e270" class="indexterm-anchor"></a><a id="d10894e274" class="indexterm-anchor"></a><a id="d10894e278" class="indexterm-anchor"></a></p>
                     <div class="figure" id="GUID-EE843C17-8881-494C-85CE-8EE4D0833065__BHCBICDF">
                        <p class="titleinfigure">图3-1通过Oracle连接</p><img src="img/pco81045.gif" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/pco81045.html"><br><a href="img_text/pco81045.html">“图3-1通过Oracle连接”的描述</a></div>
                     <!-- class="figure" -->
                     <p>通过消除不同机器和操作系统之间网络的边界，Oracle Net Services为Oracle工具提供了分布式处理环境。本节介绍Pro * COBOL如何通过Oracle Net Services支持分布式处理。您将了解您的应用程序的用途<a id="d10894e287" class="indexterm-anchor"></a><a id="d10894e291" class="indexterm-anchor"></a></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>直接或间接访问其他数据库</p>
                        </li>
                        <li>
                           <p>同时访问本地和远程数据库的任意组合</p>
                        </li>
                        <li>
                           <p>建立到同一数据库的多个连接</p>
                        </li>
                     </ul>
                     <p>通常，您只需要一个连接，由<code class="codeph">EXEC SQL CONNECT :USR-PWD END-EXEC</code> 。连接的数据库由USR-PWD包含的内容决定。如果它包含默认数据库的用户名和密码，它将连接到定义为会话默认值的数据库。如果它包含<span class="italic">用户名</span> / <span class="italic">密码</span> @REMDB，它将通过Oracle Net Services连接到Oracle Net Services配置定义的REMDB数据库。（另一种方法是使用USING子句指定Oracle Net Services连接字符串。）这是默认连接。
                     </p>
                     <p>要进一步并发连接到相同或不同的数据库，可以使用AT子句，即<code class="codeph">EXEC SQL AT DB1 CONNECT :USR-PWD END-EXEC</code> 。AT子句后面的名称唯一标识“非默认”连接，并且对该连接执行AT子句后具有相同名称的任何SQL语句。如果在SQL语句中省略了AT子句，则会针对默认连接执行该语句。<a id="d10894e319" class="indexterm-anchor"></a><a id="d10894e321" class="indexterm-anchor"></a></p>
                     <p>所有数据库名称必须唯一，但两个或多个数据库名称可以指定相同的连接。也就是说，您可以与任何节点上的任何数据库建立多个连接。<a id="d10894e327" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCB207"></a><div class="props_rev_3"><a id="GUID-1C06C193-EAB3-4859-9A3E-607F27D4117E" name="GUID-1C06C193-EAB3-4859-9A3E-607F27D4117E"></a><h4 id="LNPCB-GUID-1C06C193-EAB3-4859-9A3E-607F27D4117E" class="sect4"><span class="enumeration_section">3.2.2</span>使用用户名/密码</h4>
                  <div>
                     <p>通常，您建立与Oracle的连接，如下所示：<a id="d10894e355" class="indexterm-anchor"></a><a id="d10894e357" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWORD END-EXEC。</pre><p>或者您可以使用：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT：USR-PWD END-EXEC。 <span class="bold"> </span>
</pre><p>其中<span class="italic">USR-PWD</span>包含任何有效的Oracle连接字符串。
                     </p>
                     <p>这些是CONNECT语句的简化子集。有关所有详细信息，请阅读本章的下一节<a id="d10894e377" class="indexterm-anchor"></a> 。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="database-concepts.html#GUID-056EC81F-F05C-4C33-9393-856EF3FADA89">自动登录</a></li>
                           <li><a href="embedded-SQL-statements-and-precompiler-directives.html#GUID-8E024106-6BB5-434C-99A6-1A55839D8316">CONNECT（可执行的嵌入式SQL扩展）</a></li>
                        </ul>
                     </div>
                  </div><a id="LNPCB208"></a><div class="props_rev_3"><a id="GUID-1B4D63D7-11EB-449A-ADAE-1D76141787E9" name="GUID-1B4D63D7-11EB-449A-ADAE-1D76141787E9"></a><h5 id="LNPCB-GUID-1B4D63D7-11EB-449A-ADAE-1D76141787E9" class="sect5"><span class="enumeration_section">3.2.2.1</span>命名数据库连接</h5>
                     <div>
                        <p>在以下示例中，您将连接到指定的数据库。通常，您仅为多个并发连接使用命名数据库连接。以下示例显示了单个连接的语法：<a id="d10894e415" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">*  - 声明必要的主变量WORKING-STORAGE SECTION。 ...EXEC SQL BEGIN DECLARE SECTION END-EXEC。 01 USERNAME PIC X（10）。01 PASSWORD PIC X（10）。01 DB-STRING PIC X（20）。...EXEC SQL END DECLARE SECTION END-EXEC。 ...程序部门。将“scott”移至USERNAME。移动“老虎”通往PASSSWORD。将“nyremote”移到DB-STRING。 ...*  - 为数据库连接分配唯一的名称。EXEC SQL DECLARE DBNAME DATABASE <span class="bold"> </span> END-EXEC。 *  - 连接到非默认数据库EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWORD at DBNAME使用：DB-STRING END-EXEC。</pre><p>此示例中的标识符用于以下目的：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>主机变量<span class="italic">USERNAME</span>和<span class="italic">PASSWORD</span>标识有效用户。
                              </p>
                           </li>
                           <li>
                              <p>主机变量<span class="italic">DB-STRING</span>包含用于登录远程节点上的非默认数据库的Oracle Net Services语法。
                              </p>
                           </li>
                           <li>
                              <p>未声明的标识符<span class="italic">DBNAME</span>命名非默认连接;它是Oracle使用的标识符， <span class="italic">而不是</span>主机或程序变量。
                              </p>
                           </li>
                        </ul>
                        <p>USING子句指定与<span class="italic">DBNAME</span>关联的网络，计算机和数据库。之后，使用AT子句（带有<span class="italic">DBNAME</span> ）的SQL语句在<span class="italic">DB-STRING</span>指定的数据库中执行。 <a id="d10894e462" class="indexterm-anchor"></a><a id="d10894e466" class="indexterm-anchor"></a><a id="d10894e470" class="indexterm-anchor"></a><a id="d10894e474" class="indexterm-anchor"></a> 
                        </p>
                        <p>或者，您可以在AT子句中使用字符主机变量，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">*  - 声明必要的主变量WORKING-STORAGE SECTION。 ...EXEC SQL BEGIN DECLARE SECTION END-EXEC。 01 USERNAME PIC X（10）。01 PASSWORD PIC X（10）。01 DB-NAME PIC X（10）。01 DB-STRING PIC X（20）。...EXEC SQL END DECLARE SECTION END-EXEC。 ...程序部门。将“scott”移至USERNAME。移动“老虎”通往PASSSWORD。将“oracle1”移动到DB-NAME。将“nyremote”移到DB-STRING。 ...*  - 连接到非默认数据库EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWORD AT：DB-NAME USING：DB-STRING END-EXEC。</pre><p>如果<span class="italic">DB-NAME</span>是主机变量，则不需要DECLARE DATABASE语句。只有当<span class="italic">DBNAME</span>是未声明的标识符时，才能在执行CONNECT之前执行DECLARE <span class="italic">DBNAME</span> DATABASE语句...AT <span class="italic">DBNAME</span>声明。
                        </p>
                        <p><span class="bold">SQL操作。</span>如果授予该权限，则可以在非默认连接上执行任何SQL数据操作语句。例如，您可以执行以下语句序列：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT DBNAME SELECT ...EXEC SQL在DBNAME INSERT ...EXEC SQL在DBNAME UPDATE ...
</pre><p>在下一个示例中， <span class="italic">DB-NAME</span>是主机变量：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT：DB-NAME DELETE ...
</pre><p><span class="bold">光标控制。</span>诸如OPEN，FETCH和CLOSE之类的游标控制语句是例外 - 它们从不使用AT子句。如果要将游标与显式标识的数据库关联，请使用DECLARE CURSOR语句中的AT子句，如下所示： <a id="d10894e515" class="indexterm-anchor"></a><a id="d10894e519" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT：DB-NAME DECLARE emp_cursor CURSOR FOR ...EXEC SQL OPEN emp_cursor ...EXEC SQL FETCH emp_cursor ...EXEC SQL CLOSE emp_cursor END-EXEC。</pre><p>如果<span class="italic">DB-NAME</span>是主变量，则其声明必须在引用声明游标的所有SQL语句的范围内。例如，如果在一个子程序中打开光标，然后从另一个子程序中取出，则必须全局声明<span class="italic">DB-NAME</span>或将其传递给每个子程序。
                        </p>
                        <p>从光标打开，关闭或提取时，不使用AT子句。如果在游标声明中没有使用AT子句，则SQL语句在DECLARE CURSOR语句的AT子句中指定的数据库中执行，或者在缺省数据库中执行。</p>
                        <p>AT <span class="italic">：host-variable</span>子句使您可以更改与游标关联的连接。但是，您无法在光标打开时更改关联。请考虑以下示例： <a id="d10894e541" class="indexterm-anchor"></a><a id="d10894e545" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT：DB-NAME DECLARE emp_cursor CURSOR FOR ...将“oracle1”移动到DB-NAME。 EXEC SQL OPEN emp_cursor END-EXEC。 EXEC SQL FETCH emp_cursor INTO ...将“oracle2”移动到DB-NAME。 *  - 非法，光标仍然打开EXEC SQL OPEN emp_cursor END-EXEC。 EXEC SQL FETCH emp_cursor INTO ...
</pre><p>这是非法的，因为当您尝试执行第二个OPEN语句时， <span class="italic">emp_cursor</span>仍处于打开状态。不为不同的连接维护单独的游标;只有一个<span class="italic">emp_cursor</span> ，必须先关闭才能重新打开另一个连接。要调试最后一个示例，只需在重新打开之前关闭游标，如下所示：</p><pre class="oac_no_warn" dir="ltr">*  - 首先关闭游标EXEC SQL CLOSE emp_cursor END-EXEC。将“oracle2”移动到DB-NAME。 EXEC SQL OPEN EMP-CUROR END-EXEC。 EXEC SQL FETCH emp_cursor INTO ...
</pre><p><span class="bold">动态SQL</span> 。动态SQL语句类似于游标控制语句，因为有些语句从不使用AT子句。对于动态SQL方法1，如果要在非默认连接上执行语句，则必须使用AT子句。一个例子如下： <a id="d10894e566" class="indexterm-anchor"></a><a id="d10894e570" class="indexterm-anchor"></a><a id="d10894e574" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT：DB-NAME EXECUTE IMMEDIATE：SQL-STMT END-EXEC。</pre><p>对于方法2,3和4，如果要在非默认连接中执行语句，则仅在DECLARE STATEMENT语句中使用AT子句。所有其他动态SQL语句（如PREPARE，DESCRIBE，OPEN，FETCH和CLOSE）从不使用AT子句。下一个示例显示方法2： <a id="d10894e584" class="indexterm-anchor"></a><a id="d10894e588" class="indexterm-anchor"></a> 
                        </p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT：DB-NAME DECLARE SQL-STMT STATEMENT END-EXEC。 EXEC SQL PREPARE SQL-STMT FROM：SQL-STRING END-EXEC。 EXEC SQL EXECUTE SQL-STMT END-EXEC。</pre><p>以下示例显示方法3：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL AT：DB-NAME DECLARE SQL-STMT STATEMENT END-EXEC。 EXEC SQL PREPARE SQL-STMT FROM：SQL-STRING END-EXEC。 SQL-STMT END-EXEC的EXEC SQL DECLARE emp_cursor CURSOR。 EXEC SQL OPEN emp_cursor ...EXEC SQL FETCH emp_cursor INTO ...EXEC SQL CLOSE emp_cursor END-EXEC。</pre><p>除非同时打开两个或多个连接，否则在连接到远程数据库时不需要使用AT子句（在这种情况下，需要使用AT子句来标识活动连接）。要建立与远程数据库的默认连接，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWORD USING：DB-STRING END-EXEC。</pre></div>
                  </div>
               </div><a id="LNPCB209"></a><div class="props_rev_3"><a id="GUID-056EC81F-F05C-4C33-9393-856EF3FADA89" name="GUID-056EC81F-F05C-4C33-9393-856EF3FADA89"></a><h4 id="LNPCB-GUID-056EC81F-F05C-4C33-9393-856EF3FADA89" class="sect4"><span class="enumeration_section">3.2.3</span>自动登录</h4>
                  <div>
                     <p>您可以使用userid自动登录Oracle：<a id="d10894e628" class="indexterm-anchor"></a><a id="d10894e632" class="indexterm-anchor"></a><a id="d10894e634" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">&lt;前缀&gt; &lt;用户名&gt;</pre><p>其中<span class="italic">prefix</span>是Oracle初始化参数OS_AUTHENT_PREFIX的值（默认值为OPS $）， <span class="italic">username</span>是您的操作系统用户或任务名称。例如，如果前缀为OPS $，您的用户名为TBARNES，而OPS $ TBARNES是有效的Oracle用户ID，则您以用户OPS $ TBARNES身份登录Oracle。</p>
                     <p>要利用自动登录功能，只需将斜杠（/）字符传递给Pro * COBOL，如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION END-EXEC。 01 ORACLEID PIC X. ...EXEC SQL END DECLARE SECTION END-EXEC。 ...移动'/'到ORACLEID。 EXEC SQL CONNECT：ORACLEID END-EXEC。</pre><p>这会自动将您作为用户OPS $ <span class="italic">用户名连接</span> 。例如，如果您的操作系统用户名是RHILL，并且OPS $ RHILL是有效的Oracle用户名，则使用斜杠（/）连接会自动以Oracle OPS $ RHILL用户身份登录Oracle。</p>
                     <p>您还可以将字符串传递给Pro * COBOL。但是，该字符串不能包含尾随空格。例如，以下CONNECT语句将失败：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION END-EXEC。 01 ORACLEID PIC X（5）。...EXEC SQL END DECLARE SECTION END-EXEC。 ...移动'/'到ORACLEID。 EXEC SQL CONNECT：ORACLEID END-EXEC。</pre></div><a id="LNPCB210"></a><div class="props_rev_3"><a id="GUID-CF77C4A1-BF68-40AF-AF53-4AF713B64A7D" name="GUID-CF77C4A1-BF68-40AF-AF53-4AF713B64A7D"></a><h5 id="LNPCB-GUID-CF77C4A1-BF68-40AF-AF53-4AF713B64A7D" class="sect5"><span class="enumeration_section">3.2.3.1</span> AUTO_CONNECT预编译器选项</h5>
                     <div>
                        <p>Pro * COBOL允许您的程序在不使用CONNECT语句的情况下登录到默认数据库。只需在命令行中指定预编译器选项AUTO_CONNECT即可。<a id="d10894e685" class="indexterm-anchor"></a><a id="d10894e689" class="indexterm-anchor"></a><a id="d10894e693" class="indexterm-anchor"></a></p>
                        <p>假设OS_AUTHENT_PREFIX的默认值是OPS $，您的用户名是TBARNES，OPS $ TBARNES是有效的Oracle用户ID。当AUTO_CONNECT = YES时，只要Pro * COBOL遇到可执行的SQL语句，您的程序就会使用用户ID OPS $ TBARNES自动登录到Oracle。</p>
                        <p>当AUTO_CONNECT = NO（缺省值）时，必须使用CONNECT语句登录Oracle。</p>
                     </div>
                  </div>
               </div><a id="LNPCB211"></a><div class="props_rev_3"><a id="GUID-E37C4FF2-C93D-41E3-A4C0-7B07AA29BEF3" name="GUID-E37C4FF2-C93D-41E3-A4C0-7B07AA29BEF3"></a><h4 id="LNPCB-GUID-E37C4FF2-C93D-41E3-A4C0-7B07AA29BEF3" class="sect4"><span class="enumeration_section">3.2.4</span>在运行时更改密码</h4>
                  <div>
                     <p>Pro * COBOL为客户端应用程序提供了一种通过可选的ALTER AUTHORIZATION子句在运行时更改用户密码的便捷方法。</p>
                     <p>ALTER AUTHORIZATION子句的语法如下所示：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT ..更改授权： <span class="italic">NEWPSWD</span> END-EXEC。</pre><p>使用此子句表示您要将帐户密码更改为NEWPSWD指示的值。更改后，尝试连接为<code class="codeph">USER</code> / <code class="codeph">NEWPSWD</code> 。这可以得到以下结果：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该应用程序将连接没有问题。</p>
                        </li>
                        <li>
                           <p>应用程序将无法连接。这可能是由于以下任何一种情况：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>密码验证由于某种原因失败。在这种情况下，密码保持不变。</p>
                              </li>
                              <li>
                                 <p>账号被锁了。不允许更改密码。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCB212"></a><div class="props_rev_3"><a id="GUID-4BE68F3D-D3AF-46F8-BC70-B6541B809A96" name="GUID-4BE68F3D-D3AF-46F8-BC70-B6541B809A96"></a><h4 id="LNPCB-GUID-4BE68F3D-D3AF-46F8-BC70-B6541B809A96" class="sect4"><span class="enumeration_section">3.2.5</span>无需更改授权连接</h4>
                  <div>
                     <p>本节描述CONNECT语句的不同变体的可能结果。</p>
                  </div><a id="LNPCB213"></a><div class="props_rev_3"><a id="GUID-61346520-A069-4C41-8BA2-F3140A2C26AC" name="GUID-61346520-A069-4C41-8BA2-F3140A2C26AC"></a><h5 id="LNPCB-GUID-61346520-A069-4C41-8BA2-F3140A2C26AC" class="sect5"><span class="enumeration_section">3.2.5.1</span>标准CONNECT</h5>
                     <div>
                        <p>如果应用程序发出以下声明：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT .../ *没有ALTER AUTHORIZATION子句* /</pre><p>它执行正常的连接尝试。可能的结果包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该应用程序将连接没有问题。</p>
                           </li>
                           <li>
                              <p>应用程序将连接，但会收到密码警告。警告表示密码已过期，但处于允许登录的宽限期内。此时，建议用户在帐户锁定之前更改密码。</p>
                           </li>
                           <li>
                              <p>应用程序将无法连接。可能的原因包括：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>密码不正确。</p>
                                 </li>
                                 <li>
                                    <p>该帐户已过期，可能处于锁定状态。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNPCB214"></a><div class="props_rev_3"><a id="GUID-C9E12FED-5BDF-4647-A5DE-EDC4D42CEAA1" name="GUID-C9E12FED-5BDF-4647-A5DE-EDC4D42CEAA1"></a><h5 id="LNPCB-GUID-C9E12FED-5BDF-4647-A5DE-EDC4D42CEAA1" class="sect5"><span class="enumeration_section">3.2.5.2</span> SYSDBA或SYSOPER权限</h5>
                     <div>
                        <p>在Oracle 8.1版之前，您不必使用此子句来获得SYSOPER或SYSDBA系统特权，但现在必须这样做。</p>
                        <p>如果要使用SYSDBA或SYSOPER系统特权登录，请在所有其他子句后将以下可选字符串附加到CONNECT语句：</p><pre class="oac_no_warn" dir="ltr">IN {SYSDBA | SYSOPER}模式</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT ...在SYSDBA模式END-EXEC。</pre><p>以下是适用于此选项的限制：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用AUTO_CONNECT = YES预编译器选项设置时，不支持此选项。</p>
                           </li>
                           <li>
                              <p>在CONNECT语句中使用ALTER AUTHORIZATION关键字时，不允许使用该选项。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCB215"></a><div class="props_rev_3"><a id="GUID-82015694-70C4-49A9-BEBB-1FC6F64D4C51" name="GUID-82015694-70C4-49A9-BEBB-1FC6F64D4C51"></a><h4 id="LNPCB-GUID-82015694-70C4-49A9-BEBB-1FC6F64D4C51" class="sect4"><span class="enumeration_section">3.2.6</span>使用链接</h4>
                  <div>
                     <p>Oracle分布式数据库选项支持数据库链接。例如，分布式查询允许单个SELECT语句访问一个或多个非默认数据库上的数据。<a id="d10894e907" class="indexterm-anchor"></a><a id="d10894e909" class="indexterm-anchor"></a></p>
                     <p>分布式查询工具依赖于数据库链接，该链接为CONNECT语句而不是连接本身分配名称。在运行时，嵌入式SELECT语句由指定的数据库服务器执行，该服务器隐式连接到非默认数据库以获取所需的数据。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../netag/identifying-and-accessing-database.html#NETAG-GUID-2BDF9E52-4147-4F46-84E2-A5AE1018A373" target="_blank">连接到数据库服务</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB216"></a><div class="props_rev_3"><a id="GUID-E1177148-D3CD-4BD8-9410-960476A6617C" name="GUID-E1177148-D3CD-4BD8-9410-960476A6617C"></a><h3 id="LNPCB-GUID-E1177148-D3CD-4BD8-9410-960476A6617C" class="sect3"><span class="enumeration_section">3.3</span>关键术语</h3>
               <div>
                  <p>在深入研究交易主题之前，您应该了解本节中定义的术语。</p>
                  <p>数据库管理的作业或任务称为<span class="italic"><span class="bold">会话</span></span> 。运行应用程序或Oracle Forms等工具并连接到数据库时，将启动<span class="italic"><span class="bold">用户会话</span></span> 。Oracle使用户会话能够同时工作并共享计算机资源。为此，Oracle必须控制<span class="italic"><span class="bold">并发</span></span> ，许多用户访问相同的数据。如果没有足够的并发控制，可能会丢失<span class="italic"><span class="bold">数据完整性</span></span> 。也就是说，数据或结构的更改可能以错误的顺序进行。<a id="d10894e963" class="indexterm-anchor"></a><a id="d10894e965" class="indexterm-anchor"></a><a id="d10894e968" class="indexterm-anchor"></a><a id="d10894e970" class="indexterm-anchor"></a></p>
                  <p>Oracle使用<span class="italic"><span class="bold">锁</span></span>来控制对数据的并发访问。锁可以为您提供数据库资源的临时所有权，例如表或数据行。因此，在您完成数据之前，其他用户无法更改数据。您永远不需要显式锁定资源，因为默认锁定机制可以保护表数据和结构。但是，您可以在表或行上请求<span class="italic"><span class="bold">数据锁定</span></span> ，以便覆盖默认锁定。您可以选择多种锁定<span class="italic"><span class="bold">模式</span></span> ，例如<span class="italic"><span class="bold">行共享</span></span>和<span class="italic"><span class="bold">独占</span></span> 。<a id="d10894e995" class="indexterm-anchor"></a><a id="d10894e997" class="indexterm-anchor"></a><a id="d10894e999" class="indexterm-anchor"></a></p>
                  <p>当两个或多个用户尝试访问同一数据库对象时，可能会发生<span class="italic"><span class="bold">死锁</span></span> 。例如，如果每个用户尝试更新当前由另一个锁定的行，则更新同一个表的两个用户可能会等待。因为每个用户都在等待另一个用户持有的资源，所以在服务器中断死锁之前都不会继续。服务器向完成最少工作量的参与事务发出错误信号，并且“等待资源时检测到死锁”错误代码返回到SQLCA中的SQLCODE。<a id="d10894e1009" class="indexterm-anchor"></a></p>
                  <p>当一个用户查询表并同时由另一个用户更新时，数据库会为查询生成表的数据的<span class="italic"><span class="bold">读一致</span></span>视图。也就是说，一旦查询开始（并继续），查询读取的数据就不会改变。随着更新活动的继续，数据库会获取表数据的<span class="italic"><span class="bold">快照</span></span>并记录<span class="italic"><span class="bold">回滚段中的</span></span>更改。数据库使用回滚段中的信息来构建读取一致的查询结果，并在必要时撤消更改。<a id="d10894e1025" class="indexterm-anchor"></a><a id="d10894e1027" class="indexterm-anchor"></a><a id="d10894e1029" class="indexterm-anchor"></a></p>
               </div>
            </div><a id="LNPCB217"></a><div class="props_rev_3"><a id="GUID-6A1C673E-993A-453B-9390-DEF91EEE3D65" name="GUID-6A1C673E-993A-453B-9390-DEF91EEE3D65"></a><h3 id="LNPCB-GUID-6A1C673E-993A-453B-9390-DEF91EEE3D65" class="sect3"><span class="enumeration_section">3.4</span>事务如何保护数据库</h3>
               <div>
                  <p>数据库是面向事务的;它使用事务来确保数据完整性。事务是您为完成某项任务而定义的一系列一个或多个逻辑相关的SQL语句。数据库将一系列SQL语句视为一个单元，以便语句带来的所有更改同时<span class="italic">提交</span> （永久）或<span class="italic">回滚</span> （撤消）。如果您的应用程序在事务中间失败，则数据库将自动恢复到其以前的（事务前）状态。 <a id="d10894e1061" class="indexterm-anchor"></a><a id="d10894e1063" class="indexterm-anchor"></a><a id="d10894e1067" class="indexterm-anchor"></a> 
                  </p>
                  <p>接下来的部分将向您展示如何定义和控制事务。具体来说，它显示了如何<a id="d10894e1072" class="indexterm-anchor"></a> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>开始和结束交易</p>
                     </li>
                     <li>
                        <p>使用COMMIT语句使事务永久化</p>
                     </li>
                     <li>
                        <p>将SAVEPOINT语句与ROLLBACK TO语句一起使用以撤消部分事务</p>
                     </li>
                     <li>
                        <p>使用ROLLBACK语句撤消整个事务</p>
                     </li>
                     <li>
                        <p>指定RELEASE选项以释放资源并注销数据库</p>
                     </li>
                     <li>
                        <p>使用SET TRANSACTION语句设置只读事务</p>
                     </li>
                     <li>
                        <p>使用FOR UPDATE子句或LOCK TABLE语句覆盖默认锁定</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-6A1C673E-993A-453B-9390-DEF91EEE3D65__GUID-0A3729FB-B70B-4196-9660-31542BB8E084">
                     <p class="notep1">也可以看看：</p>有关SQL语句的详细信息，请<a href="../sqlrf/index.html" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a> 。
                  </div>
               </div>
            </div><a id="LNPCB218"></a><div class="props_rev_3"><a id="GUID-B7317C1E-9549-4ACD-884C-35F3628CA825" name="GUID-B7317C1E-9549-4ACD-884C-35F3628CA825"></a><h3 id="LNPCB-GUID-B7317C1E-9549-4ACD-884C-35F3628CA825" class="sect3"><span class="enumeration_section">3.5</span>开始和结束交易</h3>
               <div>
                  <p>您在程序中使用第一个可执行SQL语句（除CONNECT之外）开始事务。当一个事务结束时，下一个可执行SQL语句会自动开始另一个事务。因此，每个可执行语句都是事务的一部分。因为它们无法回滚且无需提交，所以声明性SQL语句不被视为事务的一部分。 <a id="d10894e1129" class="indexterm-anchor"></a><a id="d10894e1133" class="indexterm-anchor"></a><a id="d10894e1137" class="indexterm-anchor"></a> 
                  </p>
                  <p>您可以通过以下方式之一结束交易：<a id="d10894e1144" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用或不使用RELEASE选项对COMMIT或ROLLBACK语句进行编码。这<span class="italic">明确</span>地对数据库进行永久或撤消更改。
                        </p>
                     </li>
                     <li>
                        <p>编写在执行之前<span class="italic">和</span>之后发出自动提交的数据定义语句（例如，ALTER，CREATE或GRANT）。这<span class="italic">隐式</span>地对数据库进行了永久性更改。<a id="d10894e1164" class="indexterm-anchor"></a><a id="d10894e1168" class="indexterm-anchor"></a></p>
                     </li>
                  </ul>
                  <p>当系统出现故障或用户会话因软件问题，硬件问题或强制中断而意外停止时，事务也会结束。<a id="d10894e1174" class="indexterm-anchor"></a></p>
                  <p>如果程序在事务中失败，Oracle会检测到错误并回滚事务。如果操作系统出现故障，Oracle会将数据库还原到以前的（事务前）状态。<a id="d10894e1180" class="indexterm-anchor"></a></p>
               </div>
            </div><a id="LNPCB219"></a><div class="props_rev_3"><a id="GUID-F6D78EC6-B50D-45E7-B409-0D3994CF5339" name="GUID-F6D78EC6-B50D-45E7-B409-0D3994CF5339"></a><h3 id="LNPCB-GUID-F6D78EC6-B50D-45E7-B409-0D3994CF5339" class="sect3"><span class="enumeration_section">3.6</span>使用COMMIT语句</h3>
               <div>
                  <p>COMMIT语句用于永久更改数据库。在提交更改之前，其他用户无法访问更改的数据;他们在交易开始之前就看到了它。COMMIT语句对主机变量的值或程序中的控制流没有影响。具体来说，COMMIT语句：<a id="d10894e1209" class="indexterm-anchor"></a><a id="d10894e1211" class="indexterm-anchor"></a><a id="d10894e1215" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在当前事务期间对数据库进行永久性所有更改。</p>
                     </li>
                     <li>
                        <p>使这些更改对其他用户可见。</p>
                     </li>
                     <li>
                        <p>删除所有保存点（请参阅下一节）。</p>
                     </li>
                     <li>
                        <p>释放所有行和表锁，但不解析锁。</p>
                     </li>
                     <li>
                        <p>关闭使用FOR UPDATE子句声明的游标，或使用CURRENT OF子句在代码中的其他位置引用的游标。如果MODE = ANSI |使用ANSI14或CLOSE_ON_COMMIT = YES，然后关闭所有显式游标。</p>
                     </li>
                     <li>
                        <p>结束交易。</p>
                     </li>
                  </ul>
                  <p>当MODE = {ANSI13 | ORACLE}，CURRENT OF子句中未引用的显式游标在提交期间保持打开状态。这可以提高性能。有关示例，请参阅<span class="q">“ <a href="database-concepts.html#GUID-687E5EBE-714C-49B1-928E-4EB8310B85A8">提交提交内容</a> ”</span> 。
                  </p>
                  <p>因为它们是正常处理的一部分，COMMIT语句应该通过程序的主路径内联放置。在程序终止之前，它必须显式提交挂起的更改。否则，Oracle会回滚它们。在以下示例中，您提交事务并断开连接：<a id="d10894e1247" class="indexterm-anchor"></a><a id="d10894e1251" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT WORK RELEASE END-EXEC。</pre><p>可选关键字WORK提供ANSI兼容性。RELEASE选项释放程序保存的所有资源（锁和游标）并注销数据库。<a id="d10894e1259" class="indexterm-anchor"></a><a id="d10894e1263" class="indexterm-anchor"></a><a id="d10894e1267" class="indexterm-anchor"></a></p>
                  <p>您不需要使用COMMIT语句跟随数据定义语句，因为数据定义语句在执行之前<span class="italic">和</span>之后发出自动提交。因此，无论它们是成功还是失败，都会提交先前的交易。
                  </p>
               </div><a id="LNPCB220"></a><div class="props_rev_3"><a id="GUID-BD470EC3-4070-4B09-ABD8-6BA096D11D06" name="GUID-BD470EC3-4070-4B09-ABD8-6BA096D11D06"></a><h4 id="LNPCB-GUID-BD470EC3-4070-4B09-ABD8-6BA096D11D06" class="sect4"><span class="enumeration_section">3.6.1</span> DECLARE CURSOR语句中的WITH HOLD子句</h4>
                  <div>
                     <p>在COMMIT之后单词CURSOR之后保持打开的任何已使用WITH HOLD子句声明的游标。以下示例显示如何使用此子句：</p><pre class="oac_no_warn" dir="ltr">执行SQL DECLARE C1游标保持从EMP到7600和7700 END-EXEC之间的EMPNO中选择ENAME。</pre><p>不能为UPDATE声明游标。 DB2中使用WITH HOLD子句来覆盖默认值，即在提交时关闭所有游标。Pro * COBOL提供此子句是为了便于将应用程序从DB2迁移到Oracle。当MODE = ANSI时，Oracle使用DB2默认值，但必须在Declare Section中声明所有主机变量。要避免使用Declare Section，请使用<span class="italic">下面</span>描述的预编译器选项<span class="italic">CLOSE_ON_COMMIT</span> 。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL-statements-and-precompiler-directives.html#GUID-2D17E92E-5215-4BF2-9196-A5B1170C5C81">DECLARE CURSOR（嵌入式SQL指令）</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCB221"></a><div class="props_rev_3"><a id="GUID-C7180D4D-9A0D-4E58-B16D-1E2EC4749A2A" name="GUID-C7180D4D-9A0D-4E58-B16D-1E2EC4749A2A"></a><h4 id="LNPCB-GUID-C7180D4D-9A0D-4E58-B16D-1E2EC4749A2A" class="sect4"><span class="enumeration_section">3.6.2</span> CLOSE_ON_COMMIT预编译器选项</h4>
                  <div>
                     <p>预编译器选项CLOSE_ON_COMMIT <span class="italic"> </span>可用于覆盖MODE = ANSI的默认行为（如果在命令行上指定MODE = ANSI，则在提交时未使用WITH HOLD子句声明的任何游标都将关闭）：</p><pre class="oac_no_warn" dir="ltr">CLOSE_ON_COMMIT = {是|没有}</pre><p>默认值为NO。必须仅在命令行或配置文件中输入此选项。</p>
                     <div class="infoboxnote" id="GUID-C7180D4D-9A0D-4E58-B16D-1E2EC4749A2A__GUID-1FAA8AAC-AF1F-4C59-AC48-6D9B9D759165">
                        <p class="notep1">注意：</p>
                        <p>仔细使用此选项;如果由于需要为每个OPEN语句重新解析而多次打开和关闭游标，则应用程序可能会变慢。请参见<span class="q">“ <a href="precompiler-options.html#GUID-839B1E64-B28C-41BF-9355-783B003C0D81">CLOSE_ON_COMMIT</a> ”</span> 。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB222"></a><div class="props_rev_3"><a id="GUID-C323E4D2-9CEE-46B6-8C08-50B71EA5505D" name="GUID-C323E4D2-9CEE-46B6-8C08-50B71EA5505D"></a><h3 id="LNPCB-GUID-C323E4D2-9CEE-46B6-8C08-50B71EA5505D" class="sect3"><span class="enumeration_section">3.7</span>使用ROLLBACK语句</h3>
               <div>
                  <p>您可以使用ROLLBACK语句撤消对数据库所做的挂起更改。例如，如果您犯了错误，例如从表中删除了错误的行，则可以使用ROLLBACK来恢复原始数据。ROLLBACK语句对主机变量的值或程序中的控制流没有影响。具体来说，就是ROLLBACK语句<a id="d10894e1379" class="indexterm-anchor"></a><a id="d10894e1381" class="indexterm-anchor"></a><a id="d10894e1385" class="indexterm-anchor"></a><a id="d10894e1387" class="indexterm-anchor"></a><a id="d10894e1391" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>撤消当前事务期间对数据库所做的所有更改</p>
                     </li>
                     <li>
                        <p>删除所有保存点</p>
                     </li>
                     <li>
                        <p>结束交易</p>
                     </li>
                     <li>
                        <p>释放所有行和表锁，但不解析锁</p>
                     </li>
                     <li>
                        <p>关闭使用FOR UPDATE子句声明的游标，或使用CURRENT OF子句在代码中的其他位置引用的游标。如果MODE = {ANSI | ANSI14}，然后关闭<span class="italic">所有</span>显式游标。
                        </p>
                     </li>
                  </ul>
                  <p>当MODE = {ANSI13 | ORACLE}，CURRENT OF子句中未引用的显式游标在回滚期间保持打开状态。</p>
                  <p>因为它们是异常处理的一部分，所以ROLLBACK语句应该放在错误处理例程中，离开程序的主路径。在以下示例中，您回滚事务并断开连接：<a id="d10894e1418" class="indexterm-anchor"></a><a id="d10894e1422" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL ROLLBACK工作发布END-EXEC。</pre><p>可选关键字WORK提供ANSI兼容性。RELEASE选项释放程序保存的所有资源并注销数据库。<a id="d10894e1430" class="indexterm-anchor"></a><a id="d10894e1434" class="indexterm-anchor"></a></p>
                  <p>如果WHENEVER SQLERROR GOTO语句分支到包含ROLLBACK语句的错误处理例程，则如果回滚失败并且出现错误，则程序可能会进入无限循环。您可以通过在ROLLBACK语句之前编写WHENEVER SQLERROR CONTINUE来避免这种情况。</p>
                  <p>例如，请考虑以下事项：<a id="d10894e1442" class="indexterm-anchor"></a><a id="d10894e1446" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">执行SQL WHENEVER SQLERROR GOTO SQL-ERROR END-EXEC。 ...显示'员工编号？”。接受EMP-NUMBER。显示'员工姓名？”。接受EMP-NAME。 EXEC SQL INSERT INTO EMP（EMPNO，ENAME）值（：EMP-NUMBER，：EMP-NAME）END-EXEC。 ...SQL-ERROR。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。显示'处理错误'。显示'错误代码：'，SQLCODE。显示'消息：'，SQLERRMC。 EXEC SQL ROLLBACK工作发布END-EXEC。停止运行。</pre><p>如果程序异常终止，Oracle会回滚事务。<a id="d10894e1454" class="indexterm-anchor"></a><a id="d10894e1458" class="indexterm-anchor"></a></p>
               </div><a id="LNPCB223"></a><div class="props_rev_3"><a id="GUID-47069C13-2E08-48D0-A139-939BB719055F" name="GUID-47069C13-2E08-48D0-A139-939BB719055F"></a><h4 id="LNPCB-GUID-47069C13-2E08-48D0-A139-939BB719055F" class="sect4"><span class="enumeration_section">3.7.1</span>语句级回滚</h4>
                  <div>
                     <p>在执行任何SQL语句之前，Oracle会标记一个隐式保存点（不适用于您）。然后，如果语句失败，Oracle会自动回滚它并将适用的错误代码返回到SQLCA中的SQLCODE。例如，如果INSERT语句通过尝试在唯一索引中插入重复值而导致错误，则回滚该语句。<a id="d10894e1486" class="indexterm-anchor"></a><a id="d10894e1488" class="indexterm-anchor"></a></p>
                     <p>只有失败的SQL语句启动的工作才会丢失;保留当前事务中该语句之前完成的工作。因此，如果数据定义语句失败，则不会撤消其前面的自动提交。</p>
                     <div class="infoboxnote" id="GUID-47069C13-2E08-48D0-A139-939BB719055F__GUID-D11340DC-C168-49C3-B1B6-8681D78F0000">
                        <p class="notep1">注意：</p>
                        <p>在执行SQL语句之前，Oracle必须对其进行解析，即检查它以确保它遵循语法规则并引用有效的数据库对象。执行SQL语句时检测到的错误会导致回滚，但在解析语句时检测到的错误则不会。</p>
                     </div>
                     <p>Oracle还可以回滚单个SQL语句以打破死锁。Oracle向其中一个参与事务发出错误信号并回滚该事务中的当前语句。<a id="d10894e1499" class="indexterm-anchor"></a><a id="d10894e1503" class="indexterm-anchor"></a><a id="d10894e1507" class="indexterm-anchor"></a></p>
                  </div>
               </div>
            </div><a id="LNPCB224"></a><div class="props_rev_3"><a id="GUID-59EEDD58-7CD0-4842-9545-6B2C52D6488B" name="GUID-59EEDD58-7CD0-4842-9545-6B2C52D6488B"></a><h3 id="LNPCB-GUID-59EEDD58-7CD0-4842-9545-6B2C52D6488B" class="sect3"><span class="enumeration_section">3.8</span>使用SAVEPOINT语句</h3>
               <div>
                  <p>SAVEPOINT嵌入式SQL语句标记并命名处理事务的当前点。每个标记点称为<span class="italic">保存点</span> 。例如，以下语句标记名为<span class="italic">start_delete</span>的保存点：<a id="d10894e1547" class="indexterm-anchor"></a><a id="d10894e1549" class="indexterm-anchor"></a><a id="d10894e1551" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL SAVEPOINT start_delete END-EXEC。</pre><p>保存点允许您划分长事务，使您可以更好地控制复杂的过程。例如，如果事务执行多个功能，则可以在每个功能之前标记保存点。然后，如果函数失败，您可以轻松地将数据恢复到以前的状态，恢复，然后重新执行该函数。<a id="d10894e1559" class="indexterm-anchor"></a></p>
                  <p>要撤消部分事务，可以将保存点与ROLLBACK语句及其TO SAVEPOINT子句一起使用。TO SAVEPOINT子句允许您回滚到当前事务中的中间语句。有了它，您不必撤消所有更改。具体来说，ROLLBACK TO SAVEPOINT语句：<a id="d10894e1565" class="indexterm-anchor"></a><a id="d10894e1569" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>取消自指定的保存点被标记以来对数据库所做的更改</p>
                     </li>
                     <li>
                        <p>删除指定保存点后标记的所有保存点</p>
                     </li>
                     <li>
                        <p>释放自标记指定保存点以来获取的所有行和表锁</p>
                     </li>
                  </ul>
                  <p>在以下示例中，您访问表MAIL_LIST以插入新列表，更新旧列表以及删除（一些）非活动列表。删除后，检查SQLCA中的SQLERRD（3）以获取已删除的行数。如果数字意外大，则回滚到保存点<span class="italic">start_delete</span> ，仅撤消删除。<a id="d10894e1586" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">*  - 对于每个新客户DISPLAY'新客户编号？”。接受CUST-NUMBER。如果CUST-NUMBER = 0转到REV-STATUS END-IF。显示'新客户名称？”。接受CUST-NAME。 EXEC SQL INSERT IN MAIL-LIST（CUSTNO，CNAME，STAT）VALUES（：CUST-NUMBER，：CUST-NAME，'ACTIVE'）。END-EXEC。 ...*  - 对于每个修订状态REV-STATUS。显示'修改状态的客户编号？”。接受CUST-NUMBER。如果CUST-NUMBER = 0则转到SAVE-POINT END-IF。显示'新状态？”。接受新状态。 EXEC SQL UPDATE MAIL-LIST SET STAT =：NEW-STATUS CERENO =：CUST-NUMBER END-EXEC。 ...*  - 标记保存点SAVE-POINT。 EXEC SQL SAVEPOINT START-DELETE END-EXEC。来自MAIL-LIST的EXEC SQL DELETE STAT ='INACTIVE'END-EXEC。如果SQLERRD（3）&lt;25 *  - 检查删除的行数DISPLAY'删除的行数是'，SQLERRD（3）ELSE DISPLAY'撤消删除'，SQLERRD（3），'rows'EXEC SQL WHENEVER SQLERROR GOTO SQL -ERROR END-EXEC EXEC SQL ROLLBACK到SAVEPOINT START-DELETE END-EXEC END-IF。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。 EXEC SQL COMMIT WORK RELEASE END-EXEC。停止运行。 *  - 退出计划。...SQL-ERROR。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。 EXEC SQL ROLLBACK工作发布END-EXEC。显示'处理错误'。*  - 退出程序并显示错误。停止运行。</pre><p>请注意，您无法在ROLLBACK TO SAVEPOINT语句中指定RELEASE选项。<a id="d10894e1594" class="indexterm-anchor"></a><a id="d10894e1598" class="indexterm-anchor"></a><a id="d10894e1602" class="indexterm-anchor"></a><a id="d10894e1606" class="indexterm-anchor"></a></p>
                  <p>回滚到保存点会删除在该保存点之后标记的所有保存点。但是，您回滚的保存点不会被删除。例如，如果标记五个保存点，则回滚到第三个保存点，仅删除第四个和第五个保存点。COMMIT或ROLLBACK语句将擦除所有保存点。<a id="d10894e1612" class="indexterm-anchor"></a></p>
               </div>
            </div><a id="LNPCB225"></a><div class="props_rev_3"><a id="GUID-4B174FCB-ADD2-46EC-B0D0-6C64BE0DC1D4" name="GUID-4B174FCB-ADD2-46EC-B0D0-6C64BE0DC1D4"></a><h3 id="LNPCB-GUID-4B174FCB-ADD2-46EC-B0D0-6C64BE0DC1D4" class="sect3"><span class="enumeration_section">3.9</span>使用RELEASE选项</h3>
               <div>
                  <p>如果程序异常终止，Oracle会自动回滚更改。当您的程序没有使用RELEASE嵌入式SQL语句显式提交或回滚工作并断开连接时，会发生异常终止。</p>
                  <p>当程序运行其程序，关闭打开的游标，显式提交或回滚工作，断开连接并将控制权返回给用户时，将发生正常终止。如果它执行的最后一个SQL语句是，您的程序将正常退出<a id="d10894e1643" class="indexterm-anchor"></a><a id="d10894e1645" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT WORK RELEASE END-EXEC。</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ROLLBACK工作发布END-EXEC。</pre><p>令牌WORK是可选的。否则，用户会话获取的锁和游标将在程序终止后保留，直到Oracle识别出用户会话不再处于活动状态。这可能导致多用户环境中的其他用户等待锁定资源所需的时间。 <a id="d10894e1656" class="indexterm-anchor"></a> 
                  </p>
               </div>
            </div><a id="LNPCB226"></a><div class="props_rev_3"><a id="GUID-7CCD2A18-D062-4F41-AABF-D58A763E6627" name="GUID-7CCD2A18-D062-4F41-AABF-D58A763E6627"></a><h3 id="LNPCB-GUID-7CCD2A18-D062-4F41-AABF-D58A763E6627" class="sect3"><span class="enumeration_section">3.10</span>使用SET TRANSACTION语句</h3>
               <div>
                  <p>您可以使用SET TRANSACTION语句开始只读或读/写事务，或将当前事务分配给指定的回滚段。COMMIT，ROLLBACK或数据定义语句结束只读事务。</p>
                  <p>因为它们允许“可重复读取”，所以只读事务对于针对一个或多个表运行多个查询以及其他用户更新相同表时非常有用。在只读事务期间，所有查询都引用数据库的相同快照，从而提供多表，多查询，读取一致的视图。其他用户可以像往常一样继续查询或更新数据。SET TRANSACTION语句的示例如下： <a id="d10894e1687" class="indexterm-anchor"></a><a id="d10894e1691" class="indexterm-anchor"></a><a id="d10894e1695" class="indexterm-anchor"></a><a id="d10894e1697" class="indexterm-anchor"></a>  
                  </p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET TRANSACTION READ ONLY END-EXEC。</pre><p>SET TRANSACTION语句必须是只读事务中的第一个SQL语句，并且只能在事务中出现一次。READ ONLY参数是必需的。它的使用不会影响其他交易。只读事务中只允许SELECT（不带FOR UPDATE），LOCK TABLE，SET ROLE，ALTER SESSION，ALTER SYSTEM，COMMIT和ROLLBACK语句。 <a id="d10894e1706" class="indexterm-anchor"></a><a id="d10894e1710" class="indexterm-anchor"></a><a id="d10894e1714" class="indexterm-anchor"></a><a id="d10894e1718" class="indexterm-anchor"></a><a id="d10894e1722" class="indexterm-anchor"></a> 
                  </p>
                  <p>在以下示例中，商店经理通过使用只读事务生成摘要报告来检查当天，过去一周和过去一个月的销售活动。在事务期间，该报告不受更新数据库的其他用户的影响。 <a id="d10894e1729" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET TRANSACTION READ ONLY END-EXEC。 EXEC SQL SELECT SUM（SALEAMT）INTO：SALEDATE = SYSDATE END-EXEC的销售额。 EXEC SQL SELECT SUM（SALEAMT）INTO：每次销售SALEDATE&gt; SYSDATE  -  7 END-EXEC。执行SQL SELECT SUM（SALEAMT）INTO：SALEDATE&gt; SYSDATE  -  30 END-EXEC的销售额。 EXEC SQL COMMIT WORK END-EXEC。 *  - 简单地结束交易，因为没有变化*  - 制作永久*格式和打印报告</pre></div>
            </div><a id="LNPCB227"></a><div class="props_rev_3"><a id="GUID-78E84CE3-AFAA-4279-B3BE-48800AD6ADAC" name="GUID-78E84CE3-AFAA-4279-B3BE-48800AD6ADAC"></a><h3 id="LNPCB-GUID-78E84CE3-AFAA-4279-B3BE-48800AD6ADAC" class="sect3"><span class="enumeration_section">3.11</span>覆盖默认锁定</h3>
               <div>
                  <p>默认情况下，Oracle会隐式（自动）为您锁定许多数据结构。但是，您可以在行或表上请求特定数据锁定，以便覆盖默认锁定。显式锁定允许您在事务期间共享或拒绝对表的访问，或确保多表和多查询读一致性。<a id="d10894e1760" class="indexterm-anchor"></a><a id="d10894e1764" class="indexterm-anchor"></a><a id="d10894e1768" class="indexterm-anchor"></a></p>
                  <p>使用SELECT FOR UPDATE OF语句，您可以显式锁定表的特定行，以确保在执行更新或删除之前它们不会更改。但是，Oracle会在更新或删除时自动获取行级锁。因此，仅当您要在更新或删除<span class="italic">之前</span>锁定行时， <span class="italic">才</span>使用FOR UPDATE OF子句。<a id="d10894e1775" class="indexterm-anchor"></a></p>
                  <p>您可以使用LOCK TABLE语句显式锁定整个表。</p>
               </div><a id="LNPCB228"></a><div class="props_rev_3"><a id="GUID-348B3204-A6B1-4E1B-AB40-C4796F808F21" name="GUID-348B3204-A6B1-4E1B-AB40-C4796F808F21"></a><h4 id="LNPCB-GUID-348B3204-A6B1-4E1B-AB40-C4796F808F21" class="sect4"><span class="enumeration_section">3.11.1</span>使用FOR更新条款</h4>
                  <div>
                     <p>当你DECLARE一个游标时，你可以同时指定FOR UPDATE子句，它具有获取游标定义的所有行的独占锁定的效果。例如，当您希望将更新基于表中的现有行并希望确保它们不会被其他任何人同时更改时，这很有用。</p>
                     <p>请注意，如果您使用CURRENT OF子句引用游标，则预编译器将自动将FOR UPDATE子句添加到游标定义，并且单词OF是可选的。 <a id="d10894e1807" class="indexterm-anchor"></a><a id="d10894e1811" class="indexterm-anchor"></a> 例如，而不是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR for SELECT ENAME，JOB，SAL from EMP WHERE DEPTNO = 20 FOR SALDATE SAL END-EXEC。</pre><p>你可以删除该条款的OF部分，只需编写代码：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR for SELECT ENAME，JOB，SAL from EMP WHERE DEPTNO = 20 FOR UPDATE END-EXEC。</pre><div class="infoboxnotealso" id="GUID-348B3204-A6B1-4E1B-AB40-C4796F808F21__GUID-5DFA3243-112E-4E79-A575-E210BC80640E">
                        <p class="notep1">也可以看看：</p><span class="q">“ <a href="embedded-SQL.html#GUID-E0B72EA2-521D-4604-BD41-0B2B1BC59381">使用CURRENT OF子句</a> ”</span>作为示例。
                     </div>
                  </div><a id="LNPCB229"></a><div class="props_rev_3"><a id="GUID-6F5B308D-5700-4FE5-B7B3-92A7F1EDB1B2" name="GUID-6F5B308D-5700-4FE5-B7B3-92A7F1EDB1B2"></a><h5 id="LNPCB-GUID-6F5B308D-5700-4FE5-B7B3-92A7F1EDB1B2" class="sect5"><span class="enumeration_section">3.11.1.1</span>限制</h5>
                     <div>
                        <p>您不能对多个表使用FOR UPDATE，但必须使用FOR UPDATE OF来标识表中要锁定的列。FOR UPDATE语句获取的行锁由COMMIT清除，这解释了为什么光标关闭。如果在提交后尝试从FOR UPDATE游标获取，Oracle会生成一个Fetch out of Sequence错误。<a id="d10894e1850" class="indexterm-anchor"></a><a id="d10894e1854" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB230"></a><div class="props_rev_3"><a id="GUID-687E5EBE-714C-49B1-928E-4EB8310B85A8" name="GUID-687E5EBE-714C-49B1-928E-4EB8310B85A8"></a><h3 id="LNPCB-GUID-687E5EBE-714C-49B1-928E-4EB8310B85A8" class="sect3"><span class="enumeration_section">3.12</span>在提交者中获取</h3>
               <div>
                  <p>如果要混合提交和提取，请不要使用CURRENT OF子句。而是，选择每行的ROWID，然后使用该值在更新或删除期间标识当前行。请考虑以下示例：<a id="d10894e1883" class="indexterm-anchor"></a><a id="d10894e1887" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR FOR SELECT ENAME，SAL，ROWID from EMP WHERE JOB ='CLERK'END-EXEC。 ...EXEC SQL OPEN emp_cursor END-EXEC。 EXEC SQL WHENEVER未找到GOTO ......PERFORM EXEC SQL FETCH emp_cursor INTO：EMP_NAME，：SALARY，：ROW-ID END-EXEC ...EXEC SQL UPDATE EMP SET SAL =：NEW-SALARY WHERE ROWID =：ROW-ID END-EXEC EXEC SQL COMMIT END-EXEC END-PERFORM。</pre><p>但请注意，获取的行<span class="italic">未</span>锁定。因此，如果另一个用户在您读取之后但在更新或删除之前修改了行，则可能会收到不一致的结果。
                  </p>
               </div><a id="LNPCB231"></a><div class="props_rev_3"><a id="GUID-D7F99FE8-D739-4E12-B17C-A7A7F21032F0" name="GUID-D7F99FE8-D739-4E12-B17C-A7A7F21032F0"></a><h4 id="LNPCB-GUID-D7F99FE8-D739-4E12-B17C-A7A7F21032F0" class="sect4"><span class="enumeration_section">3.12.1</span>使用LOCK TABLE语句</h4>
                  <div>
                     <p>使用LOCK TABLE语句以指定的锁定模式锁定一个或多个表。例如，以下语句以<span class="italic">行共享</span>模式锁定EMP表。行共享锁允许并发访问表。它们阻止其他用户锁定整个表以供独占使用。<a id="d10894e1925" class="indexterm-anchor"></a><a id="d10894e1929" class="indexterm-anchor"></a><a id="d10894e1933" class="indexterm-anchor"></a><a id="d10894e1935" class="indexterm-anchor"></a><a id="d10894e1939" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL LOCK表EMP在行分享模式NOWAIT END-EXEC。</pre><p>锁定模式确定可以在表格上放置哪些其他锁定。例如，许多用户可以同时获取表上的行共享锁，但一次只能有一个用户获得<span class="italic">独占</span>锁。当一个用户对表具有独占锁时，其他用户不能插入，更新或删除该表中的行。
                     </p>
                     <p>可选的关键字NOWAIT告诉Oracle如果某个表已被其他用户锁定，则不要等待该表。控制立即返回到您的程序，以便它可以在再次尝试获取锁之前执行其他工作。（您可以在SQLCA中检查SQLCODE以查看表锁是否失败。）如果省略NOWAIT，Oracle会等到表可用为止;等待没有设定限制。<a id="d10894e1952" class="indexterm-anchor"></a><a id="d10894e1956" class="indexterm-anchor"></a><a id="d10894e1960" class="indexterm-anchor"></a></p>
                     <p>表锁永远不会阻止其他用户查询表，并且查询永远不会获取表锁。因此，查询永远不会阻止另一个查询或更新，并且更新永远不会阻止查询。仅当两个不同的事务尝试更新同一行时，一个事务才会等待另一个事务完成。当事务发出COMMIT或ROLLBACK时，将释放表锁。<a id="d10894e1964" class="indexterm-anchor"></a></p>
                     <div class="infoboxnotealso" id="GUID-D7F99FE8-D739-4E12-B17C-A7A7F21032F0__GUID-22418AB6-5109-4545-B365-5EE970E7E725">
                        <p class="notep1">也可以看看：</p>有关锁定模式的更多信息，请<a href="../adfns/sql-processing-for-application-developers.html#ADFNS-GUID-57365E45-5F85-471B-81D9-F52EA16F1E85" target="_blank">使用Oracle Lock Management Services</a> 。
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB232"></a><div class="props_rev_3"><a id="GUID-123F9392-C594-46DB-A2BB-92A92953C08A" name="GUID-123F9392-C594-46DB-A2BB-92A92953C08A"></a><h3 id="LNPCB-GUID-123F9392-C594-46DB-A2BB-92A92953C08A" class="sect3"><span class="enumeration_section">3.13</span>处理分布式事务</h3>
               <div>
                  <p><span class="italic">分布式数据库</span>是包括不同节点处的多个物理数据库的单个逻辑数据库。<span class="italic">分布式语句</span>是使用数据库链接访问远程节点的任何SQL语句。<span class="italic">分布式事务</span>包括至少一个分布式语句，其更新分布式数据库的多个节点处的数据。如果更新仅影响一个节点，则事务是非分布式的。
                  </p>
                  <p>发出提交时，对受分布式事务影响的每个数据库的更改将永久保留。如果您发出回滚，则撤消所有更改。但是，如果网络或计算机在提交或回滚期间出现故障，则分布式事务的状态可能未知或<span class="italic">存在疑问</span> 。在这种情况下，如果您具有FORCE TRANSACTION系统特权，则可以使用FORCE子句在本地数据库中手动提交或回滚事务。必须通过包含事务ID的带引号的文字来标识事务，该事务ID可以在数据字典视图DBA_2PC_PENDING中找到。一些例子如下：<a id="d10894e2011" class="indexterm-anchor"></a><a id="d10894e2013" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT FORCE '22 .31.83'END-EXEC。 ...EXEC SQL ROLLBACK FORCE '25 .33.86'END-EXEC。</pre><p>FORCE仅提交或回滚指定的事务，不会影响您当前的事务。请注意，您无法手动将不确定事务回滚到保存点。</p>
                  <p>COMMIT语句中的COMMENT子句允许您指定要与分布式事务关联的注释。如果事务有疑问，则服务器将COMMENT指定的文本与事务ID一起存储在数据字典视图DBA_2PC_PENDING中。文本必须是长度不超过50个字符的带引号的文字。一个例子如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT COMMENT'怀疑trans;通知订单输入'END-EXEC。</pre><div class="infoboxnotealso" id="GUID-123F9392-C594-46DB-A2BB-92A92953C08A__GUID-F56F1844-B750-4D2F-9764-82354401F4DA">
                     <p class="notep1">也可以看看：</p><a href="../cncpt/transactions.html#CNCPT1125" target="_blank"><span class="italic">Oracle数据库概念。</span></a>有关分布式事务的更多信息。
                  </div>
               </div>
            </div><a id="LNPCB233"></a><div class="props_rev_3"><a id="GUID-5BE08E32-E12A-48B0-AEBE-DAF750831D12" name="GUID-5BE08E32-E12A-48B0-AEBE-DAF750831D12"></a><h3 id="LNPCB-GUID-5BE08E32-E12A-48B0-AEBE-DAF750831D12" class="sect3"><span class="enumeration_section">3.14</span>交易处理指南</h3>
               <div>
                  <p>以下指南将帮助您避免一些常见问题。</p>
               </div><a id="LNPCB234"></a><div class="props_rev_3"><a id="GUID-10A6DE52-588F-4637-8824-B2D1FF9C13B1" name="GUID-10A6DE52-588F-4637-8824-B2D1FF9C13B1"></a><h4 id="LNPCB-GUID-10A6DE52-588F-4637-8824-B2D1FF9C13B1" class="sect4"><span class="enumeration_section">3.14.1</span>设计应用程序</h4>
                  <div>
                     <p>在设计应用程序时，在一个事务中将逻辑相关的操作组合在一起。精心设计的交易包括完成特定任务所需的所有步骤 - 不多也不少。</p>
                     <p>您引用的表中的数据必须保持一致状态。因此，事务中的SQL语句应以一致的方式更改数据。例如，两个银行账户之间的资金转移应包括一个账户的借方和另一个账户的贷方。两个更新应该成功还是一起失败。不相关的更新（例如新存款到一个帐户）不应包含在交易中。<a id="d10894e2081" class="indexterm-anchor"></a><a id="d10894e2085" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCB235"></a><div class="props_rev_3"><a id="GUID-A064F2FA-D4DE-47AD-B309-DA03AD245E1E" name="GUID-A064F2FA-D4DE-47AD-B309-DA03AD245E1E"></a><h4 id="LNPCB-GUID-A064F2FA-D4DE-47AD-B309-DA03AD245E1E" class="sect4"><span class="enumeration_section">3.14.2</span>获取锁</h4>
                  <div>
                     <p>如果您的应用程序包含SQL锁定语句，请确保请求锁定的用户具有获取锁定所需的权限。您的DBA可以锁定任何表。其他用户可以锁定他们拥有的表或他们有权使用的表，例如ALTER，SELECT，INSERT，UPDATE或DELETE。<a id="d10894e2113" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCB236"></a><div class="props_rev_3"><a id="GUID-6AAA3E37-EF1C-47CA-872D-752CB8EF371B" name="GUID-6AAA3E37-EF1C-47CA-872D-752CB8EF371B"></a><h4 id="LNPCB-GUID-6AAA3E37-EF1C-47CA-872D-752CB8EF371B" class="sect4"><span class="enumeration_section">3.14.3</span>使用PL / SQL</h4>
                  <div>
                     <p>如果PL / SQL块是事务的一部分，则块内的提交和回滚操作会影响整个事务。在以下示例中，回滚操作将撤消更新<span class="italic">和</span>插入所做的更改：<a id="d10894e2145" class="indexterm-anchor"></a><a id="d10894e2149" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO EMP ...EXEC SQL EXECUTE BEGIN UPDATE emp ......DUP_VAL_ON_INDEX然后ROLLBACK的例外情况;结束; END-EXEC。 ...</pre></div>
               </div><a id="LNPCB237"></a><div class="props_rev_3"><a id="GUID-10D56616-11FD-449A-8344-D4B20E8843E4" name="GUID-10D56616-11FD-449A-8344-D4B20E8843E4"></a><h4 id="LNPCB-GUID-10D56616-11FD-449A-8344-D4B20E8843E4" class="sect4"><span class="enumeration_section">3.14.4</span> X / Open应用程序</h4>
                  <div>
                     <p>有关在X / Open应用程序中使用XA接口的说明，请参阅<a href="../adfns/xa.html#ADFNS-GUID-19B8285C-F8CA-4857-89E3-477C6BD1483C" target="_blank">X / Open分布式事务处理（DTP）</a> 。
                     </p><pre class="oac_no_warn" dir="ltr"></pre></div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01372.managing-and-configuring-tfa.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This section helps you manage Oracle Trace File Analyzer daemon, diagnostic collections, and the collection repository."></meta>
      <meta name="description" content="This section helps you manage Oracle Trace File Analyzer daemon, diagnostic collections, and the collection repository."></meta>
      <title>管理和配置Oracle跟踪文件分析器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="This section helps you manage Oracle Trace File Analyzer daemon, diagnostic collections, and the collection repository."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="performing-custom-collections.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-db-and-gi-diagnostic-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performing-custom-collections.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-db-and-gi-diagnostic-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnose-troubleshoot-issues-errors.html" property="item" typeof="WebPage"><span property="name">收集诊断数据和分类，诊断和解决问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理和配置Oracle跟踪文件分析器</li>
            </ol>
            <a id="GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" name="GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB"></a>
            
            <h2 id="ATNMS-GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" class="sect2"><span class="enumeration_chapter">19</span>管理和配置Oracle跟踪文件分析器</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D">查询Oracle跟踪文件分析器状态和配置</a><br>使用<code class="codeph">print</code>命令查询状态或配置。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419">管理Oracle跟踪文件分析器守护程序</a><br>Oracle跟踪文件分析器在UNIX系统上从<code class="codeph">init</code>运行，在Linux上运行<code class="codeph">init/upstart/systemd</code> ，或者Microsoft Windows使用Windows服务，以便在节点启动时自动启动Oracle跟踪文件分析器。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26">管理存储库</a><br>Oracle Trace File Analyzer将所有诊断集合存储在存储库中。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-FDAB1329-EE67-4374-8F42-776AA3A66439">管理集合</a><br>管理Oracle Trace File Analyzer和诊断集合中配置的目录。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6">配置主机</a><br>您必须具有对<code class="codeph">tfactl</code> <code class="codeph">root</code>或<code class="codeph">sudo</code>访问<code class="codeph">tfactl</code>才能将主机添加到Oracle Trace File Analyzer配置中。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78">配置端口</a><br>群集中的Oracle跟踪文件分析器守护程序通过端口5000到5005安全地进行通信。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208">配置SSL和SSL证书</a><br>查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E">配置电子邮件通知详细信息</a><br>配置Oracle跟踪文件分析器，以在自动收集完成后向已注册的电子邮件地址发送电子邮件。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="diagnose-troubleshoot-issues-errors.html#GUID-DA02663E-305E-4DD2-9758-DCA883B54198" title="使用Autonomous Health Framework提供的工具来解决错误。">收集诊断数据和分类，诊断和解决问题</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D" name="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D"></a><h3 id="ATNMS-GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D" class="sect3"><span class="enumeration_section">19.1</span>查询Oracle Trace File Analyzer状态和配置</h3>
               <div>
                  <p>使用<code class="codeph">print</code>命令查询状态或配置。
                  </p>
                  <div class="tblformal" id="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D__GUID-241EBAD6-53DC-4A96-BF60-49D02D3A68F3">
                     <p class="titleintable">表19-1配置清单和说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="配置清单和描述" border="1" summary="This table lists and describes and configuration parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d52627e133">配置清单</th>
                              <th align="left" valign="bottom" width="20%" id="d52627e135">默认值</th>
                              <th align="left" valign="bottom" width="20%" id="d52627e137">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e141" headers="d52627e133 ">
                                 <p>自动诊断收集</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e141 d52627e135 ">
                                 <p>上</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e141 d52627e137 ">
                                 <p>如果发生重大问题，则触发集合。</p>
                                 <p>可能的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>上</p>
                                    </li>
                                    <li>
                                       <p>关闭</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e160" headers="d52627e133 ">
                                 <p>在诊断收集期间修剪文件</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e160 d52627e135 ">
                                 <p>上</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e160 d52627e137 ">
                                 <p>仅将日志文件修剪为集合时间范围内的条目。</p>
                                 <p>可能的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>上</p>
                                    </li>
                                    <li>
                                       <p>关闭</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e179" headers="d52627e133 ">
                                 <p>存储库最大大小（MB）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e179 d52627e135 ">
                                 <p>文件系统中10GB或50％可用空间的较小。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e179 d52627e137 ">
                                 <p>存储库的最大大小。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e189" headers="d52627e133 ">
                                 <p>跟踪级别</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e189 d52627e135 ">
                                 <p>1</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e189 d52627e137 ">
                                 <p>提高冗长程度。</p>
                                 <p>可能的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>1</p>
                                    </li>
                                    <li>
                                       <p>2</p>
                                    </li>
                                    <li>
                                       <p>3</p>
                                    </li>
                                    <li>
                                       <p>4</p>
                                    </li>
                                 </ul>
                                 <p>值为1会产生最少的跟踪量。值为4会产生最多的迹线。</p>
                                 <p>Oracle建议仅在Oracle Support的请求下更改跟踪级别值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e218" headers="d52627e133 ">
                                 <p>自动清洗</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e218 d52627e135 ">
                                 <p>上</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e218 d52627e137 ">
                                 <p>在以下时间清除集合：</p>
                                 <p>存储库中的可用空间低于1GB。</p>
                                 <p>要么</p>
                                 <p>在关闭存储库之前。</p>
                                 <p>清除将集合从最大尺寸移到最小尺寸。清除继续，直到存储库有足够的空间打开。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e236" headers="d52627e133 ">
                                 <p>清除收集的最小年龄（小时）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e236 d52627e135 ">
                                 <p>12</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e236 d52627e137 ">
                                 <p>保留集合的最少小时数，之后它有资格进行清除。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e246" headers="d52627e133 ">
                                 <p>最小空间可自由启用警报日志扫描（MB）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e246 d52627e135 ">
                                 <p>500</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e246 d52627e137 ">
                                 <p>如果<code class="codeph">tfa_home</code>可用空间低于此值，则暂停日志扫描。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="example" id="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D__GUID-C9100B4C-089A-493D-9374-88BF7796D3BF">
                     <p class="titleinexample">例19-1打印配置</p><pre class="pre codeblock"><code>$ tfactl print config .--------------------------------------------- ---------------------------。| node1 | + ------------------------------------------------- ---------- + ------------ + |配置参数|价值| + ------------------------------------------------- ---------- + ------------ + | TFA版本| 12.2.1.0.0 | | Java版本| 1.8 | |公共IP网络|是的| |自动诊断收集|是的| |警报日志扫描|是的| |磁盘使用率监视器|是的| | Managelogs Auto Purge |假| |在diagcollection期间修剪文件|是的| |库存跟踪级别| 1 | |集合跟踪级别| 1 | |扫描跟踪级别| 1 | |其他跟踪级别| 1 | |存储库当前大小（MB）| 447 | |存储库最大大小（MB）| 10240 | |最大TFA日志大小（MB）| 50 | |最大TFA日志数| 10 | |核心文件的最大大小（MB）| 20 | |核心文件的最大集合大小（MB）| 200 | |启用警报日志扫描的最小可用空间（MB）| 500 | |连续磁盘使用快照（分钟）|之间的时间间隔60 | |连续管理日志之间的时间间隔自动清除（分钟）| 60 | |超过时间段的日志将被自动清除（天[d] |小时[h]）| 30d | |自动吹扫|是的| |清除收集年龄（小时）| 12 | | TFA IPS池大小| 5 | “------------------------------------------------- ---------- ------------ +”</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="running-administration-commands.html#GUID-D590CA18-27A9-4FE7-A921-A10587DD5C20" title="使用tfactl print命令打印Berkeley数据库中的信息。">tfactl打印</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419" name="GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419"></a><h3 id="ATNMS-GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419" class="sect3"><span class="enumeration_section">19.2</span>管理Oracle跟踪文件分析器守护程序</h3>
               <div>
                  <p>Oracle跟踪文件分析器在UNIX系统上从<code class="codeph">init</code>运行，在Linux上运行<code class="codeph">init/upstart/systemd</code> ，或者Microsoft Windows使用Windows服务，以便在节点启动时自动启动Oracle跟踪文件分析器。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419__GUID-9D882FD9-AF8E-48FB-989B-6866CEAC3DE6">要管理Oracle跟踪文件分析器守护程序：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><code class="codeph">init</code>控制文件<code>/etc/init.d/init.tfa</code>取决于平台。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要手动启动或停止Oracle Trace File Analyzer：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">tfactl start</code> ：启动Oracle Trace File Analyzer守护程序</p>
                              </li>
                              <li>
                                 <p><code class="codeph">tfactl stop</code> ：停止Oracle Trace File Analyzer守护程序</p>
                              </li>
                           </ul>
                           <p>如果Oracle跟踪文件分析器守护程序失败，则操作系统会自动重新启动守护程序。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>要启用或禁用Oracle Trace File Analyzer守护程序的自动重新启动：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">tfactl disable</code> ：禁用Oracle Trace File Analyzer守护程序的自动重新启动。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">tfactl enable</code> ：启用Oracle Trace File Analyzer守护程序的自动重启。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" name="GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26"></a><h3 id="ATNMS-GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" class="sect3"><span class="enumeration_section">19.3</span>管理存储库</h3>
               <div>
                  <p>Oracle Trace File Analyzer将所有诊断集合存储在存储库中。</p>
                  <p>存储库大小是Oracle跟踪文件分析器能够在磁盘上用于存储集合的最大空间。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F">自动清除存储库</a><br></li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4">手动清除存储库</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F" name="GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F"></a><h4 id="ATNMS-GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F" class="sect4"><span class="enumeration_section">19.3.1</span>自动清除存储库</h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p>Oracle跟踪文件分析器关闭存储库，如果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TFA_HOME</code>中的<code class="codeph">TFA_HOME</code>空间小于100 MB，也会停止索引</p>
                           </li>
                           <li>
                              <p><code class="codeph">ORACLE_BASE</code>中的<code class="codeph">ORACLE_BASE</code>空间小于100 MB，也会停止索引</p>
                           </li>
                           <li>
                              <p>存储库中的可用空间小于1 GB</p>
                           </li>
                           <li>
                              <p>存储库的当前大小大于存储库最大大小（ <code class="codeph">reposizeMB</code> ）</p>
                           </li>
                        </ul>
                        <p>当可用空间低于1 GB或关闭存储库之前，Oracle跟踪文件分析器守护程序会监视并自动清除存储库。清除将集合从最大的大小移除到最小，直到存储库有足够的空间来打开。</p>
                        <p>Oracle Trace File Analyzer仅自动清除早于<code class="codeph">minagetopurge</code>的集合。默认情况下， <code class="codeph">minagetopurge</code>为12小时。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F__GUID-3F1B27C3-0DE9-478B-9C53-DE5FCDE2F68B">自动清除存储库</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要更改清除的最低年龄：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>set minagetopurge = <span class="variable" translate="no">number of hours</span></code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set minagetopurge = 48</code></pre></div>
                              <p>默认情况下启用自动清除存储库。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要禁用或启用自动清除：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>设置autopurge = ON | OFF</code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set autopurge = ON</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要更改存储库的位置：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>set repositorydir = <span class="variable" translate="no">dir</span></code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set repositorydir = / opt / mypath</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要更改存储库的大小：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>设置reposizeMB</code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set reposizeMB = 20480</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-administration-commands.html#GUID-59B56691-8FD5-4130-A838-8E1AE2E8BB9C" title="使用tfactl set命令启用或禁用或修改各种Oracle跟踪文件分析器功能。">tfactl设置</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" title="Oracle Trace File Analyzer将所有诊断集合存储在存储库中。">管理存储库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4" name="GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4"></a><h4 id="ATNMS-GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4" class="sect4"><span class="enumeration_section">19.3.2</span>手动清除存储库</h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4__GUID-E711E78E-036C-4B3C-99CD-622223A52502">要手动清除存储库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要查看Oracle Trace File Analyzer存储库的状态，请执行以下操作：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印存储库</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要查看有关集合的统计信息</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印集合</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要手动清除早于特定时间的集合：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl purge -older <span class="variable" translate="no">number</span> [h | d] [-force]</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-diagnostic-collection-commands.html#GUID-47188A6D-FC60-4E05-A62C-A60F741ABBA0" title="使用tfactl purge命令从Oracle Trace File Analyzer存储库中删除早于特定时间的诊断集合。">tfactl清除</a></li>
                           <li><a href="running-administration-commands.html#GUID-D590CA18-27A9-4FE7-A921-A10587DD5C20" title="使用tfactl print命令打印Berkeley数据库中的信息。">tfactl打印</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" title="Oracle Trace File Analyzer将所有诊断集合存储在存储库中。">管理存储库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" name="GUID-FDAB1329-EE67-4374-8F42-776AA3A66439"></a><h3 id="ATNMS-GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" class="sect3"><span class="enumeration_section">19.4</span>管理集合</h3>
               <div>
                  <p>管理Oracle Trace File Analyzer和诊断集合中配置的目录。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E">包括目录</a><br>将目录添加到Oracle Trace File Analyzer配置以包含诊断集合中的目录。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78">管理集合的大小</a><br>使用Oracle跟踪文件分析器配置选项<code class="codeph">trimfiles</code> ， <code class="codeph">maxcorefilesize</code> ， <code class="codeph">maxcorecollectionsize</code>和<code class="codeph">diagcollect</code> <code class="codeph">-nocores</code>来减小集合的大小。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E" name="GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E"></a><h4 id="ATNMS-GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E" class="sect4"><span class="enumeration_section">19.4.1</span>包括目录</h4>
                  <div>
                     <p>将目录添加到Oracle Trace File Analyzer配置以包含诊断集合中的目录。</p>
                     <div class="section">
                        <p>然后，Oracle Trace File Analyzer存储有关以下内容的诊断集合元数据：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>目录</p>
                           </li>
                           <li>
                              <p>子目录</p>
                           </li>
                           <li>
                              <p>目录和所有子目录中的文件</p>
                           </li>
                        </ul>
                        <p>所有Oracle Trace File Analyzer用户都可以添加他们具有读访问权限的目录。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E__GUID-545EFC7A-6A87-4D4A-B66E-AED55E0D5478">要管理目录：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>查看Oracle Trace File Analyzer中配置的当前目录</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印目录[-node all |当地的| <span class="variable" translate="no">n1,n2,...</span> ] [-comp <span class="variable" translate="no">component_name1,component_name2,..</span> ] [ - 政策排除| noexclusions] [-permission public |私人的 ]</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要添加目录：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl目录添加<span class="variable" translate="no">dir</span> [-public] [-exclusions | -noexclusions | -collectall] [-node all | <span class="variable" translate="no">n1,n2,...</span> ]</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要删除目录：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl目录删除<span class="variable" translate="no">dir</span> [-node all | <span class="variable" translate="no">n1,n2,...</span> ]</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-diagnostic-collection-commands.html#GUID-87FDED7C-80C8-4111-AB1C-4BEEFFDBA326" title="使用tfactl directory命令向目录列表添加目录或从目录列表中删除目录以分析其跟踪或日志文件。">tfactl目录</a></li>
                           <li><a href="running-administration-commands.html#GUID-D590CA18-27A9-4FE7-A921-A10587DD5C20" title="使用tfactl print命令打印Berkeley数据库中的信息。">tfactl打印</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" title="管理Oracle Trace File Analyzer和诊断集合中配置的目录。">管理集合</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78" name="GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78"></a><h4 id="ATNMS-GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78" class="sect4"><span class="enumeration_section">19.4.2</span>管理集合的大小</h4>
                  <div>
                     <p>使用Oracle跟踪文件分析器配置选项<code class="codeph">trimfiles</code> ， <code class="codeph">maxcorefilesize</code> ， <code class="codeph">maxcorecollectionsize</code>和<code class="codeph">diagcollect</code> <code class="codeph">-nocores</code>来减小集合的大小。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78__GUID-739374C5-4502-42C0-8BE2-007A8BF18167">要管理集合的大小：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要在诊断收集期间修剪文件：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl set trimfiles = ON | OFF</code></pre></div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>设置为ON（默认）时，Oracle跟踪文件分析器会修剪文件以包含事件发生时的数据</p>
                                 </li>
                                 <li>
                                    <p>设置为OFF时，将完整地收集在事件发生时写入的任何文件</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要将核心文件的最大大小设置为<span class="variable" translate="no">n</span> MB（默认为20 MB）：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl set maxcorefilesize = <span class="variable" translate="no">n</span></code></pre></div>
                              <p>Oracle Trace File Analyzer会跳过大于<code class="codeph">maxcorefilesize</code>核心文件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要将核心文件的最大集合大小设置为<span class="variable" translate="no">n</span> MB（默认为200 MB）：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl set maxcorecollectionsize = <span class="variable" translate="no">n</span></code></pre></div>
                              <p>达到<code class="codeph">maxcorecollectionsize</code>后，Oracle Trace File Analyzer会跳过收集核心文件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要防止使用诊断集合收集核心文件：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl diagcollect -nocores</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-diagnostic-collection-commands.html#GUID-4A06751C-9081-4158-88CB-EFBC77A797A0" title="使用tfactl diagcollect命令执行按需诊断收集。">tfactl diagcollect</a></li>
                           <li><a href="running-administration-commands.html#GUID-59B56691-8FD5-4130-A838-8E1AE2E8BB9C" title="使用tfactl set命令启用或禁用或修改各种Oracle跟踪文件分析器功能。">tfactl设置</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" title="管理Oracle Trace File Analyzer和诊断集合中配置的目录。">管理集合</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6" name="GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6"></a><h3 id="ATNMS-GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6" class="sect3"><span class="enumeration_section">19.5</span>配置主机</h3>
               <div>
                  <p>您必须具有对<code class="codeph">tfactl</code> <code class="codeph">root</code>或<code class="codeph">sudo</code>访问<code class="codeph">tfactl</code>才能将主机添加到Oracle Trace File Analyzer配置中。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6__GUID-CB292546-ABE3-4FF2-BCE5-9A1990456BD8">要添加，删除和替换SSL证书：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要在Oracle跟踪文件分析器配置中查看当前主机的列表：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl打印主机</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>首次将主机添加到Oracle Trace File Analyzer配置：</span><ol type="a">
                           <li class="substepexpand"><span>如有必要，请在新主机上安装并启动Oracle Trace File Analyzer。</span></li>
                           <li class="substepexpand"><span>从现有主机，通过运行以下命令同步所有主机的身份验证证书：</span><div>
                                 <div class="p"><pre class="pre codeblock"><code>tfactl同步码</code></pre></div>
                                 <p>如果需要，Oracle Trace File Analyzer将显示它知道的当前节点列表，并提示您更新此节点列表。</p>
                              </div>
                           </li>
                           <li class="substepexpand"><span>选择<span class="uicontrol bold">Y</span> ，然后输入新主机的名称。</span><div>
                                 <p>Oracle跟踪文件分析器与新主机上的Oracle跟踪文件分析器联系，以同步证书并将彼此添加到各自的主机列表中。</p>
                              </div>
                           </li>
                        </ol>
                     </li>
                     <li class="stepexpand"><span>要删除主机：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl host删除<span class="variable" translate="no">host</span></code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>添加主机和已同步的证书：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl主机添加<span class="variable" translate="no">host</span></code></pre></div>
                           <p>Oracle Trace File Analyzer在安装期间生成自签名SSL证书。用以下之一替换这些证书：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>个人自签名证书</p>
                              </li>
                              <li>
                                 <p>CA签名证书</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78" name="GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78"></a><h3 id="ATNMS-GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78" class="sect3"><span class="enumeration_section">19.6</span>配置端口</h3>
               <div>
                  <p>群集中的Oracle跟踪文件分析器守护程序通过端口5000到5005安全地进行通信。</p>
                  <div class="section">
                     <p>如果系统上没有端口范围，请将其替换为系统上可用的端口。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78__GUID-A2670DDE-3CA3-451B-AE0D-52DF7180D2D6">要更改端口：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要设置主端口，请使用<code class="codeph">tfactl set port</code>命令：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set port = <span class="variable" translate="no">port_1</span></code></pre></div>
                           <div class="p">或者，指定要使用的以逗号分隔的顺序编号端口列表。您最多可以指定五个端口。<pre class="pre codeblock"><code>tfactl set port = <span class="variable" translate="no">port_1</span> ， <span class="variable" translate="no">port_2</span> ， <span class="variable" translate="no">port_3</span> ， <span class="variable" translate="no">port_4</span> ， <span class="variable" translate="no">port_5</span></code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>在所有节点上重启Oracle Trace File Analyzer：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl停止</code></pre><pre class="pre codeblock"><code>tfactl开始</code></pre></div>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" name="GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208"></a><h3 id="ATNMS-GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" class="sect3"><span class="enumeration_section">19.7</span>配置SSL和SSL证书</h3>
               <div>
                  <p>查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C">配置SSL / TLS协议</a><br>集群中的Oracle跟踪文件分析器守护程序使用SSL / TLS协议进行安全通信。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-E7961A2C-523E-4875-B093-F5432D479276">配置自签名证书</a><br>使用<code class="codeph">Java keytool</code>将自签名SSL证书替换为个人自签名证书。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B">配置CA签名证书</a><br>使用<code class="codeph">Java keytool</code>和<code class="codeph">openssl</code>将自签名SSL证书替换为证书颁发机构（CA）签名证书。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB">配置SSL密码套件</a><br>密码套件是TLS / SSL协议用于创建密钥和加密数据的一组加密算法。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C" name="GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C"></a><h4 id="ATNMS-GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C" class="sect4"><span class="enumeration_section">19.7.1</span>配置SSL / TLS协议</h4>
                  <div>
                     <p>集群中的Oracle跟踪文件分析器守护程序使用SSL / TLS协议进行安全通信。</p>
                     <div class="section">
                        <p>Oracle Trace File Analyzer可用的SSL协议包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TLSv1.2工作</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">TLCv1.1</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">使用TLSv1</code></p>
                           </li>
                        </ul>
                        <p>Oracle Trace File Analyzer始终限制使用较旧的协议<code class="codeph">SSLv3</code>和<code class="codeph">SSLv2Hello</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C__GUID-C8321715-EF1E-4E62-A437-CB5253FAA4D2">查看和限制协议：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要查看可用和受限制的协议：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印协议</code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl打印协议.---------------------------------------。| node1 | + --------------------------------------- + |协议| + --------------------------------------- + |可用：[TLSv1，TLSv1.2，TLSv1.1] | |受限制：[SSLv3，SSLv2Hello] | '---------------------------------------'</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>限制使用某些协议：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl restrictprotocol [-force] <span class="variable" translate="no">protocol</span></code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl restrictprotocol TLSv1</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E7961A2C-523E-4875-B093-F5432D479276" name="GUID-E7961A2C-523E-4875-B093-F5432D479276"></a><h4 id="ATNMS-GUID-E7961A2C-523E-4875-B093-F5432D479276" class="sect4"><span class="enumeration_section">19.7.2</span>配置自签名证书</h4>
                  <div>
                     <p>使用<code class="codeph">Java keytool</code>将自签名SSL证书替换为个人自签名证书。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E7961A2C-523E-4875-B093-F5432D479276__GUID-C75E6546-F132-4AA9-AA09-87BC4FAF3BDD">要配置Oracle跟踪文件分析器以使用自签名证书：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建包含服务器自签名证书的私钥和密钥库文件：</span><div><pre class="pre codeblock"><code>$ keytool -genkey -alias server_full -keyalg RSA -keysize 2048 -validity 18263 -keystore myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>创建包含客户端的私钥和自签名证书的私钥和密钥库文件：</span><div><pre class="pre codeblock"><code>$ keytool -genkey -alias client_full -keyalg RSA -keysize 2048 -validity 18263 -keystore myclient.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>从服务器密钥库导出服务器公钥证书：</span><div><pre class="pre codeblock"><code>$ keytool -export -alias server_full -file myserver_pub.crt -keystore myserver.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>从服务器密钥库导出客户端公钥证书：</span><div><pre class="pre codeblock"><code>$ keytool -export -alias client_full -file myclient_pub.crt -keystore myclient.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将服务器公钥证书导入客户端密钥库：</span><div><pre class="pre codeblock"><code>$ keytool -import -alias server_pub -file myserver_pub.crt -keystore myclient.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将客户端公钥证书导入服务器密钥库：</span><div><pre class="pre codeblock"><code>$ keytool -import -alias client_pub -file myclient_pub.crt -keystore myserver.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库上的权限限制为<code class="codeph">root</code> <code class="codeph">read-only</code> 。</span><div><pre class="pre codeblock"><code>$ chmod 400 myclient.jks myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库（ <code class="codeph">jks</code>文件）复制到每个节点。</span></li>
                        <li class="stepexpand"><span>配置Oracle跟踪文件分析器以使用新证书：</span><div><pre class="pre codeblock"><code>$ tfactl设置sslconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重新启动Oracle Trace File Analyzer进程以开始使用新证书：</span><div><pre class="pre codeblock"><code>$ tfactl停止$ tfactl start</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B" name="GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B"></a><h4 id="ATNMS-GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B" class="sect4"><span class="enumeration_section">19.7.3</span>配置CA签名证书</h4>
                  <div>
                     <p>使用<code class="codeph">Java keytool</code>和<code class="codeph">openssl</code>将自签名SSL证书替换为证书颁发机构（CA）签名证书。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B__GUID-5CE8549B-7B87-4633-96CD-4824042385D8">要配置Oracle跟踪文件分析器以使用CA签名证书：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为服务器请求创建私钥：</span><div><pre class="pre codeblock"><code>$ openssl genrsa -aes256 -out myserver.key 2048</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>为客户端请求创建私钥：</span><div><pre class="pre codeblock"><code>$ openssl genrsa -aes256 -out myclient.key 2048</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>为服务器创建证书签名请求（CSR）：</span><div><pre class="pre codeblock"><code>$ openssl req -key myserver.key -new -sha256 -out myserver.csr</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>为客户端创建证书签名请求（CSR）：</span><div><pre class="pre codeblock"><code>$ openssl req -key myclient.key -new -sha256 -out myclient.csr</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将客户端和服务器的结果CSR发送给相关的签名机构。</span><div>
                              <p>签名机构发回签名证书：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code>myserver.cert</code></p>
                                 </li>
                                 <li>
                                    <p><code>myclient.cert</code></p>
                                 </li>
                                 <li>
                                    <p>CA根证书</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将证书转换为服务器和客户端的JKS格式：</span><div><pre class="pre codeblock"><code>$ openssl pkcs12 -export -out serverCert.pkcs12 -in myserver.cert -inkey myserver.key</code></pre><pre class="pre codeblock"><code>$ keytool -v -importkeystore -srckeystore serverCert.pkcs12 -srcstoretype PKCS12 -destkeystore myserver.jks -deststoretype JKS</code></pre><pre class="pre codeblock"><code>$ openssl pkcs12 -export -out clientCert.pkcs12 -in myclient.cert -inkey myclient.key</code></pre><pre class="pre codeblock"><code>$ keytool -v -importkeystore -srckeystore clientCert.pkcs12 -srcstoretype PKCS12 -destkeystore myclient.jks -deststoretype JKS</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将服务器公钥导入到客户端<code class="codeph">jks</code>文件中：</span><div><pre class="pre codeblock"><code>$ keytool -import -v -alias server-ca -file myserver.cert -keystore myclient.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将客户端公钥导入服务器<code class="codeph">jks</code>文件：</span><div><pre class="pre codeblock"><code>$ keytool -import -v -alias client-ca -file myclient.cert -keystore myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将CA根证书从签名机构导入Oracle Trace File Analyzer服务器证书：</span><div><pre class="pre codeblock"><code>$ keytool -importcert -trustcacerts -alias inter -file caroot.cert -keystore myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库的权限限制为<code class="codeph">root</code> <code class="codeph">read-only</code> ：</span><div><pre class="pre codeblock"><code>$ chmod 400 myclient.jks myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库（ <code>jks</code>文件）复制到每个节点。</span></li>
                        <li class="stepexpand"><span>配置Oracle跟踪文件分析器以使用新证书：</span><div><pre class="pre codeblock"><code>$ tfactl设置sslconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重新启动Oracle跟踪文件分析器进程以开始使用新证书。</span><div><pre class="pre codeblock"><code>$ tfactl停止$ tfactl start</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB" name="GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB"></a><h4 id="ATNMS-GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB" class="sect4"><span class="enumeration_section">19.7.4</span>配置SSL密码套件</h4>
                  <div>
                     <p>密码套件是TLS / SSL协议用于创建密钥和加密数据的一组加密算法。</p>
                     <div class="section">
                        <p>Oracle Trace File Analyzer支持JRE 1.8使用的任何密码套件。</p>
                        <p>使用的默认密码套件是<code class="codeph">TLS_RSA_WITH_AES_128_CBC_SHA256</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>您可以使用以下命令更改密码套件：</span><div><pre class="pre codeblock"><code>tfactl set ciphersuite = <span class="variable" translate="no">cipher_suite</span></code></pre><div class="p">例如：<pre class="pre codeblock"><code>tfactl set ciphersuite = TLS_RSA_WITH_AES_128_GCM_SHA256</code></pre></div>
                           </div>
                           <div>有关JRE密码套件的列表，请参阅：<p><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider" target="_blank">https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider</a></p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E" name="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E"></a><h3 id="ATNMS-GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E" class="sect3"><span class="enumeration_section">19.8</span>配置电子邮件通知详细信息</h3>
               <div>
                  <p>配置Oracle跟踪文件分析器，以在自动收集完成后向已注册的电子邮件地址发送电子邮件。</p>
                  <div class="p">要发送电子邮件，请配置运行Oracle跟踪分析器的系统。您必须使用用户电子邮件地址配置通知才能使其正常工作。</div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-2A7C1E65-1EB0-4146-A7B0-ACA6D1278965">要配置电子邮件通知详细信</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要设置用于特定<code class="codeph">ORACLE_HOME</code>的通知电子邮件，请在命令中包含操作系统所有者：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set notificationAddress = <span class="variable" translate="no">os_user</span> ： <span class="variable" translate="no">email</span></code></pre></div>
                           <div class="p">例如：<pre class="pre codeblock"><code>tfactl set notificationAddress = oracle：some.body@example.com</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>设置要用于任何<code class="codeph">ORACLE_HOME</code>的通知电子邮件：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set notificationAddress = <span class="variable" translate="no">email</span></code></pre></div>
                           <div class="p">例如：<pre class="pre codeblock"><code>tfactl set notificationAddress = another.body@example.com</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">tfactl set smtp</code>配置SMTP服务器。</span><div>
                           <p>出现提示时设置SMTP参数。</p>
                           <div class="tblformal" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-D73FE584-435C-408D-8722-5CEA1DFEC9E7">
                              <p class="titleintable">表19-2 tfactl diagnosetfa命令参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="tfactl diagnosetfa命令参数" border="1" summary="This table lists and describes tfactl diagnosetfa command parameters." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d52627e1603">参数</th>
                                       <th align="left" valign="bottom" width="20%" id="d52627e1605">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1609" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.host</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1609 d52627e1605 ">
                                          <p>指定SMTP服务器主机名。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1617" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.port</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1617 d52627e1605 ">
                                          <p>指定SMTP服务器端口。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1625" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.user</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1625 d52627e1605 ">
                                          <p>指定SMTP用户。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1633" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.password</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1633 d52627e1605 ">
                                          <p>指定SMTP用户的密码。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1641" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.auth</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1641 d52627e1605 ">
                                          <p>将Authentication标志设置为true或false。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1649" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.ssl</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1649 d52627e1605 ">
                                          <p>将SSL标志设置为true或false。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1657" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.from</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1657 d52627e1605 ">
                                          <p>指定来自邮件ID。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1665" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.to</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1665 d52627e1605 ">
                                          <p>指定以逗号分隔的收件人邮件ID列表。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1673" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.cc</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1673 d52627e1605 ">
                                          <p>指定以逗号分隔的CC邮件ID列表。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1681" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.bcc</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1681 d52627e1605 ">
                                          <p>指定以逗号分隔的BCC邮件ID列表。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1689" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.debug</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1689 d52627e1605 ">
                                          <p>将Debug标志设置为true或false。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-414A3CC3-C124-4061-B3D0-CD985726F126">
                              <p class="notep1">注意：</p>
                              <p>您可以使用<code class="codeph">tfactl print smtp</code>查看当前的SMTP配置详细信息。
                              </p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>通过使用<code class="codeph">tfactl sendmail <span class="variable" translate="no">email_address</span></code>发送测试电子邮件来验证SMTP配置。</span><div>
                           <p>当Oracle跟踪文件分析器检测到发生重大错误时，它将发送电子邮件通知，如下所示：</p>
                           <div class="p">
                              <div class="figure" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-FC6B519C-AE2B-4184-9CE2-FCC5A1E8BDA4">
                                 <p class="titleinfigure">图19-1电子邮件通知</p><img src="img/ora600-notification.jpg" alt="下面是图19-1的描述" title="下面是图19-1的描述" longdesc="img_text/ora600-notification.html"><br><a href="img_text/ora600-notification.html">“图19-1电子邮件通知”的说明</a></div>
                              <!-- class="figure" -->
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>收到通知电子邮件后，请执行以下操作：</span><ol type="a">
                           <li><span>要查找根本原因，请检查引用的集合详细信息。</span></li>
                           <li><span>如果您可以解决问题，请解决问题的根本原因。</span></li>
                           <li><span>如果您不知道问题的根本原因，请使用Oracle Support记录SR，并上载集合详细信息。</span></li>
                        </ol>
                     </li>
                  </ol>
                  <div class="example" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-94FE86F3-E888-43DA-9480-026BABDFF888">
                     <p class="titleinexample">例19-2 tfactl设置smtp</p><pre class="pre codeblock"><code>＃/01 /app/11.2.0.4/grid/bin/tfactl set smtp .---------------------------。| SMTP服务器配置| + --------------- + ----------- + |参数|价值| + --------------- + ----------- + | smtp.auth |假| | smtp.from | tfa | | smtp.user | -  | | smtp.cc | -  | | smtp.port | 25 | | smtp.bcc | -  | | smtp.password | ******* | | smtp.host | localhost | | smtp.to | -  | | smtp.debug |是的| | smtp.ssl |是的| '--------------- + -----------'输入要更新的SMTP属性：smtp.host输入smtp.host：myhost的值。 domain.com SMTP属性smtp.host已更新myhost.domain.com您要继续吗？[Y] | N：N＃</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
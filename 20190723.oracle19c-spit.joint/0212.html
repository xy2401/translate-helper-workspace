<html id="05014.the-Object-type.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>对象类型转换器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="about-Collections.html" title="Previous" type="text/html"></link>
      <link rel="next" href="user-exits.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-Collections.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="user-exits.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">应用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">对象类型转换器</li>
            </ol>
            <a id="GUID-502C3781-C88E-46B8-9EB2-9A93E0B4E7AE" name="GUID-502C3781-C88E-46B8-9EB2-9A93E0B4E7AE"></a><a id="LNPCC019"></a>
            
            <h2 id="LNPCC-GUID-502C3781-C88E-46B8-9EB2-9A93E0B4E7AE" class="sect2"><span class="enumeration_chapter">19</span>对象类型转换器</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论OTT（对象类型转换器） <a id="d101336e22" class="indexterm-anchor"></a> ，它将数据库对象类型，LOB类型和集合类型映射到C结构，以便在Pro * C / C ++应用程序中使用。
               </p>
               <p>本章包括以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="the-Object-type.html#GUID-D51AFFD7-9B76-4CAA-A7B9-1A997BABE42F">OTT概述</a></p>
                  </li>
                  <li>
                     <p><a href="the-Object-type.html#GUID-AA1C144E-3E94-47E5-A391-16318A9E262D">什么是对象类型转换器</a></p>
                  </li>
                  <li>
                     <p><a href="the-Object-type.html#GUID-8A7E3E30-3339-498F-91D0-F4E60C5544C3">使用OCI应用程序进行OTT</a></p>
                  </li>
                  <li>
                     <p><a href="the-Object-type.html#GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942">关于在Pro * C / C ++应用程序中使用OTT</a></p>
                  </li>
                  <li>
                     <p><a href="the-Object-type.html#GUID-8E754758-8639-47E4-A8C5-2251C41A3BB0">OTT参考</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC4435"></a><div class="props_rev_3"><a id="GUID-D51AFFD7-9B76-4CAA-A7B9-1A997BABE42F" name="GUID-D51AFFD7-9B76-4CAA-A7B9-1A997BABE42F"></a><h3 id="LNPCC-GUID-D51AFFD7-9B76-4CAA-A7B9-1A997BABE42F" class="sect3"><span class="enumeration_section">19.1</span> OTT概述</h3>
               <div>
                  <p>OTT（对象类型转换器）有助于开发在Oracle服务器中使用用户定义类型的应用程序。</p>
                  <p>通过使用SQL CREATE TYPE语句，您可以创建对象类型。这些类型的定义存储在数据库中，可用于创建数据库表。填充这些表后，OCI，Pro * C / C ++或Java程序员可以访问存储在表中的对象。</p>
                  <p>访问对象数据的应用程序必须能够以宿主语言格式表示数据。这是通过将对象类型表示为C结构来实现的。程序员可以手动编写结构声明来表示数据库对象类型，但如果涉及许多类型，这可能非常耗时且容易出错。OTT通过自动生成适当的结构声明来简化此步骤。对于Pro * C / C ++，应用程序只需要包含OTT生成的头文件。在OCI中，应用程序还需要调用OTT生成的初始化函数。</p>
                  <p>除了创建表示存储数据类型的结构之外，OTT还生成并行指示符结构，指示对象类型或其字段是否为NULL。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="about-LOBs.html#GUID-DEBB0C35-161B-4725-BE0D-A209B64B98A2">的LOB</a></li>
                        <li><a href="about-Objects.html#GUID-0C106FBC-C023-4B86-817A-1867A69388F7">对象</a></li>
                        <li><a href="about-Collections.html#GUID-BCAD71D2-D01D-40C8-8BAD-08902363ECDA">集合</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC4436"></a><div class="props_rev_3"><a id="GUID-AA1C144E-3E94-47E5-A391-16318A9E262D" name="GUID-AA1C144E-3E94-47E5-A391-16318A9E262D"></a><h3 id="LNPCC-GUID-AA1C144E-3E94-47E5-A391-16318A9E262D" class="sect3"><span class="enumeration_section">19.2</span>什么是对象类型转换器</h3>
               <div>
                  <p>对象类型转换器（OTT）将对象类型和命名集合类型的数据库定义转换为C结构声明，这些声明可以包含在OCI或Pro * C / C ++应用程序中。</p>
                  <p>OCI程序员和Pro * C / C ++程序员都必须显式调用OTT才能将数据库类型转换为C表示。OCI程序员还必须初始化一个名为<span class="italic">Type Version Table</span>的数据结构，其中包含有关程序所需的用户定义类型的信息。执行此初始化的代码由OTT生成。在Pro * C / C ++中，类型版本信息记录在<code class="codeph">OUTTYPE</code>文件中，该文件作为参数传递给Pro * C / C ++。
                  </p>
                  <p>在大多数操作系统上，在命令行上调用OTT。它将<code class="codeph">INTYPE</code>文件作为输入，它生成一个<code class="codeph">OUTTYPE</code>文件和一个或多个C头文件以及一个可选的实现文件（对于OCI程序员）。以下是调用OTT的命令示例：</p><pre class="oac_no_warn" dir="ltr">ott userid = scott / tiger intype = demoin.typ outtype = demoout.typ code = c hfile = demo.h</pre><p></p>
                  <p>此命令使OTT使用用户名<span class="italic">scott</span>和密码<span class="italic">tiger</span>连接到数据库，并根据<code class="codeph">INTYPE</code>文件<span class="italic"><code class="codeph">demoin.typ</code></span>中的说明将数据库类型转换为C结构。生成的结构将输出到头文件<span class="italic">demo.h中</span> ，用于<code class="codeph">CODE</code>参数指定的主机语言（C）。<code class="codeph">OUTTYPE</code>文件<span class="italic"><code class="codeph">demoout.typ</code></span>接收有关翻译的信息。
                  </p>
                  <p>本章后面的部分将详细介绍这些参数中的每一个。</p>
                  <p>示例<code class="codeph">demoin.typ</code>文件：</p><pre class="oac_no_warn" dir="ltr">CASE = LOWER TYPE员工</pre><p>示例<code class="codeph">demoout.typ</code>文件：</p><pre class="oac_no_warn" dir="ltr">CASE = LOWER TYPE SCOTT.EMPLOYEE AS员工VERSION =“$ 8.0”HFILE = demo.h</pre><p>在此示例中， <code class="codeph">demoin.typ</code>文件包含要转换的类型，前面是TYPE（例如，TYPE employee）。<code class="codeph">OUTTYPE</code>文件的结构类似于<code class="codeph">INTYPE</code>文件，添加了OTT获取的信息。</p>
                  <p>OTT完成转换后，头文件包含<code class="codeph">INTYPE</code>文件中指定的每种类型的C结构表示，以及与每种类型对应的NULL指示符结构。例如，如果<code class="codeph">INTYPE</code>文件中列出的员工类型定义为</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE employee AS OBJECT（名称VARCHAR2（30），empno NUMBER，deptno NUMBER，hiredate DATE，salary NUMBER）;</pre><p>OTT（ <code class="codeph">demo.h</code> ）生成的头文件包括以下声明，以及其他项目：</p><pre class="oac_no_warn" dir="ltr">struct employee {OCIString * name; OCINumber empno; OCINumber deptno; OCIDate雇用; OCINumber薪水; }; typedef struct emp_type emp_type; struct employee_ind {OCIInd _atomic; OCIInd名称; OCIInd empno; OCIInd deptno; OCIInd雇用; OCIInd工资; }; typedef struct employee_ind employee_ind;</pre><p>结构声明中出现的数据类型（例如， <span class="bold">OCIString</span>和<span class="bold">OCIInd</span> ）是Oracle 8中新增的特殊数据类型。
                  </p>
                  <p>以下部分描述了使用OTT的这些方面：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="the-Object-type.html#GUID-FF35352F-4611-4341-813E-0E955DA528F5">关于在数据库中创建类型</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-B49AE2D1-4035-458D-A960-079AE4AC49E2">关于调用OTT</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-030B4AA0-E54B-438C-B0A1-C3BE7ADF1530">OTT命令行</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-58C0A751-AB3E-4AAB-8BAF-9F5C70FF6338">INTYPE文件</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-38E440CA-2AD1-457C-B189-83E8EA965FF9">OTT数据类型映射</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-1E36744C-52EA-49D1-B05D-0E73C36436A4">NULL指示符结构</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-A9A00891-FD32-4B0A-813A-4064DF43557B">OTT支持类型继承</a></p>
                     </li>
                  </ul>
                  <p>本章的其余部分讨论OTT与OCI和Pro * C / C ++的使用，后面是描述命令行语法，参数， <code class="codeph">INTYPE</code>文件结构，嵌套<code class="codeph">#include</code>文件生成，模式名称用法，默认名称映射的参考部分和限制。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="the-Object-type.html#GUID-38E440CA-2AD1-457C-B189-83E8EA965FF9">OTT数据类型映射</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC4437"></a><div class="props_rev_3"><a id="GUID-FF35352F-4611-4341-813E-0E955DA528F5" name="GUID-FF35352F-4611-4341-813E-0E955DA528F5"></a><h4 id="LNPCC-GUID-FF35352F-4611-4341-813E-0E955DA528F5" class="sect4"><span class="enumeration_section">19.2.1</span>关于在数据库中创建类型</h4>
                  <div>
                     <p>使用OTT的第一步是创建对象类型或命名集合类型并将它们存储在数据库中。这是通过使用SQL CREATE TYPE语句完成的。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="about-Objects.html#GUID-0C106FBC-C023-4B86-817A-1867A69388F7">对象</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4438"></a><div class="props_rev_3"><a id="GUID-B49AE2D1-4035-458D-A960-079AE4AC49E2" name="GUID-B49AE2D1-4035-458D-A960-079AE4AC49E2"></a><h4 id="LNPCC-GUID-B49AE2D1-4035-458D-A960-079AE4AC49E2" class="sect4"><span class="enumeration_section">19.2.2</span>关于调用OTT</h4>
                  <div>
                     <p>下一步是调用OTT。</p>
                     <p>您可以在命令行或称为配置文件的文件中指定OTT参数。某些参数也可以在<code class="codeph">INTYPE</code>文件中指定。
                     </p>
                     <p>如果在多个位置指定参数，则其在命令行上的值将优先于其在<code class="codeph">INTYPE</code>文件中的值，该值优先于其在用户定义的配置文件中的值，该文件优先于其在默认配置文件。
                     </p>
                     <p>对于全局选项 - 即命令行上的选项或任何TYPE语句之前<code class="codeph">INTYPE</code>文件开头的选项 - 命令行上的值将覆盖<code class="codeph">INTYPE</code>文件中的值。（可以在<code class="codeph">INTYPE</code>文件中全局指定的选项是<code class="codeph">CASE</code> ， <code class="codeph">CODE</code> ， <code class="codeph">INITFILE</code> ， <code class="codeph">OUTDIR</code>和<code class="codeph">INITFUNC</code> ，但不是<code class="codeph">HFILE</code> 。）TYPE规范中<code class="codeph">INTYPE</code>文件中的任何内容仅适用于特定类型，并覆盖命令行上可能适用于该类型的任何内容。因此，如果输入<code class="codeph">TYPE person HFILE=ph</code> ，它仅适用于<code class="codeph">person</code>并覆盖命令行上的<code class="codeph">HFILE</code> 。该语句不被视为命令行参数。
                     </p>
                  </div><a id="LNPCC4439"></a><div class="props_rev_3"><a id="GUID-20260BFB-6BCF-4340-A462-A881B1FB7B12" name="GUID-20260BFB-6BCF-4340-A462-A881B1FB7B12"></a><h5 id="LNPCC-GUID-20260BFB-6BCF-4340-A462-A881B1FB7B12" class="sect5"><span class="enumeration_section">19.2.2.1</span>命令行</h5>
                     <div>
                        <div class="section">
                           <p>在命令行上设置的参数（也称为选项）会覆盖其他任何设置。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="about-Objects.html#GUID-0C106FBC-C023-4B86-817A-1867A69388F7">对象</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="LNPCC4440"></a><div class="props_rev_3"><a id="GUID-CF25B6AE-12F6-4D2D-B2FC-F00D19CF61E0" name="GUID-CF25B6AE-12F6-4D2D-B2FC-F00D19CF61E0"></a><h5 id="LNPCC-GUID-CF25B6AE-12F6-4D2D-B2FC-F00D19CF61E0" class="sect5"><span class="enumeration_section">19.2.2.2</span>配置文件</h5>
                     <div>
                        <div class="section">
                           <p>配置文件是包含OTT参数的文本文件。文件中的每个非空行包含一个参数及其关联的值。如果在一行上放置多个参数，则仅使用第一个参数。配置文件的任何非空行都不会出现空格。</p>
                           <p>可以在命令行上命名配置文件。此外，始终读取默认配置文件。此默认配置文件必须始终存在，但可以为空。默认配置文件的名称是<code class="codeph">ottcfg.cfg</code> ，文件的位置是特定于系统的。有关详细信息，请参阅特定于平台的文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4441"></a><div class="props_rev_3"><a id="GUID-DA80A959-3A3D-4487-B92E-638EDD21BEBC" name="GUID-DA80A959-3A3D-4487-B92E-638EDD21BEBC"></a><h5 id="LNPCC-GUID-DA80A959-3A3D-4487-B92E-638EDD21BEBC" class="sect5"><span class="enumeration_section">19.2.2.3</span> INTYPE文件</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">INTYPE</code>文件提供了要翻译的OTT类型列表。
                           </p>
                           <p>参数<code class="codeph">CASE</code> ， <code class="codeph">HFILE</code> ， <code class="codeph">INITFUNC</code>和<code class="codeph">INITFILE</code>可以出现在<code class="codeph">INTYPE</code>文件中。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="the-Object-type.html#GUID-58C0A751-AB3E-4AAB-8BAF-9F5C70FF6338">INTYPE文件</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="LNPCC4442"></a><div class="props_rev_3"><a id="GUID-030B4AA0-E54B-438C-B0A1-C3BE7ADF1530" name="GUID-030B4AA0-E54B-438C-B0A1-C3BE7ADF1530"></a><h4 id="LNPCC-GUID-030B4AA0-E54B-438C-B0A1-C3BE7ADF1530" class="sect4"><span class="enumeration_section">19.2.3</span> OTT命令行</h4>
                  <div>
                     <p>在大多数平台上，在命令行上调用OTT。您可以指定输入和输出文件以及数据库连接信息等。请参阅特定于平台的文档，了解如何在平台上调用OTT。</p>
                     <p>以下是命令行中OTT调用的示例（示例1）：</p><pre class="oac_no_warn" dir="ltr">ott userid = scott / tiger intype = demoin.typ outtype = demoout.typ code = c hfile = demo.h</pre><div class="infoboxnote" id="GUID-030B4AA0-E54B-438C-B0A1-C3BE7ADF1530__GUID-18ACB56E-8EAB-49C3-97EE-AFEC587CC8A2">
                        <p class="notep1">注意：</p>
                        <p>等号（=）周围不允许有空格。</p>
                     </div>
                     <p>以下部分描述了此示例中使用的命令行的元素。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="the-Object-type.html#GUID-8E754758-8639-47E4-A8C5-2251C41A3BB0">OTT参考</a></li>
                        </ul>
                     </div>
                  </div>
                  <a id="LNPCC4443"></a><div class="props_rev_3"><a id="GUID-0C941794-AB99-45A3-87DF-E4DCFD45F782" name="GUID-0C941794-AB99-45A3-87DF-E4DCFD45F782"></a><h5 id="LNPCC-GUID-0C941794-AB99-45A3-87DF-E4DCFD45F782" class="sect5"><span class="enumeration_section">19.2.3.1</span> OTT</h5>
                     <div>
                        <div class="section">
                           <p>导致OTT被调用。它必须是命令行中的第一项。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4444"></a><div class="props_rev_3"><a id="GUID-FC89B923-810B-46A8-86E8-2E5962363B2F" name="GUID-FC89B923-810B-46A8-86E8-2E5962363B2F"></a><h5 id="LNPCC-GUID-FC89B923-810B-46A8-86E8-2E5962363B2F" class="sect5"><span class="enumeration_section">19.2.3.2</span>用户ID</h5>
                     <div>
                        <div class="section">
                           <p>指定OTT将使用的数据库连接信息。在示例一中，OTT将尝试使用用户名<span class="italic">scott</span>和密码<span class="italic">tiger连接</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4445"></a><div class="props_rev_3"><a id="GUID-EB3E26F1-1A80-46BB-B2A5-7422BD21A413" name="GUID-EB3E26F1-1A80-46BB-B2A5-7422BD21A413"></a><h5 id="LNPCC-GUID-EB3E26F1-1A80-46BB-B2A5-7422BD21A413" class="sect5"><span class="enumeration_section">19.2.3.3</span> INTYPE</h5>
                     <div>
                        <div class="section">
                           <p>指定将使用的<code class="codeph">INTYPE</code>文件的名称。在示例1中， <code class="codeph">INTYPE</code>文件的名称指定为<span class="italic"><code class="codeph">demoin.typ</code></span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4446"></a><div class="props_rev_3"><a id="GUID-AD4F9B94-CCFD-4A1A-960D-E6A6FC41BCA8" name="GUID-AD4F9B94-CCFD-4A1A-960D-E6A6FC41BCA8"></a><h5 id="LNPCC-GUID-AD4F9B94-CCFD-4A1A-960D-E6A6FC41BCA8" class="sect5"><span class="enumeration_section">19.2.3.4</span> OUTTYPE</h5>
                     <div>
                        <div class="section">
                           <p>指定<code class="codeph">OUTTYPE</code>文件的名称。当OTT生成C头文件时，它还会将有关已翻译类型的信息写入<code class="codeph">OUTTYPE</code>文件。此文件包含每个要转换的类型的条目，包括其版本字符串以及写入其C表示的头文件。
                           </p>
                           <p>在示例一中，OUTTYPE文件的名称被指定为<span class="italic"><code class="codeph">demoout.typ</code></span> 。
                           </p>
                           <div class="infoboxnote" id="GUID-AD4F9B94-CCFD-4A1A-960D-E6A6FC41BCA8__GUID-F4123970-5857-4488-A840-1019949744C4">
                              <p class="notep1">注意：</p>
                              <p>如果<code class="codeph">OUTTYPE</code>指定的文件已存在，则OTT运行时将覆盖该文件，但有一个例外：如果OTT生成的文件内容与文件的先前内容相同，则OTT实际上不会写入文件。这样可以保留文件的修改时间，以便UNIX <span class="italic">make</span>和其他平台上的类似工具不会执行不必要的重新编译。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4447"></a><div class="props_rev_3"><a id="GUID-AEBCB4B8-121D-4B57-A82C-B4A4416EBA77" name="GUID-AEBCB4B8-121D-4B57-A82C-B4A4416EBA77"></a><h5 id="LNPCC-GUID-AEBCB4B8-121D-4B57-A82C-B4A4416EBA77" class="sect5"><span class="enumeration_section">19.2.3.5</span>代码</h5>
                     <div>
                        <div class="section">
                           <p>指定转换的目标语言。可以使用以下选项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>C（相当于ANSI_C）</p>
                              </li>
                              <li>
                                 <p>ANSI_C（ANSI C）</p>
                              </li>
                              <li>
                                 <p>KR_C（适用于Kernighan＆Ritchie C）</p>
                              </li>
                           </ul>
                           <p>目前没有默认值，因此该参数是必需的。</p>
                           <p>两种C方言中的结构声明都是相同的。定义<code class="codeph">INITFILE</code>文件中定义的初始化函数的样式取决于是否使用KR_C。如果未使用<code class="codeph">INITFILE</code>选项，则所有三个选项都是等效的。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4448"></a><div class="props_rev_3"><a id="GUID-95725365-3E75-4FD9-AA06-9C2493F5AE32" name="GUID-95725365-3E75-4FD9-AA06-9C2493F5AE32"></a><h5 id="LNPCC-GUID-95725365-3E75-4FD9-AA06-9C2493F5AE32" class="sect5"><span class="enumeration_section">19.2.3.6</span> HFILE</h5>
                     <div>
                        <div class="section">
                           <p>指定应将生成的结构写入的C头文件的名称。在示例1中，生成的结构将存储在名为<code class="codeph">demo.h</code>的文件中。
                           </p>
                           <div class="infoboxnote" id="GUID-95725365-3E75-4FD9-AA06-9C2493F5AE32__GUID-10FAE0BF-E45A-4F60-8EC4-B0BF742151B8">
                              <p class="notep1">注意：</p>
                              <p>如果<code class="codeph">HFILE</code>指定的文件已存在，则OTT运行时将覆盖该文件，但有一个例外：如果OTT生成的文件内容与文件的先前内容相同，则OTT实际上不会写入该文件。这样可以保留文件的修改时间，以便UNIX <span class="italic">make</span>和其他平台上的类似工具不会执行不必要的重新编译。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4449"></a><div class="props_rev_3"><a id="GUID-BAFA5489-925B-4E74-BFDC-D664BFE87602" name="GUID-BAFA5489-925B-4E74-BFDC-D664BFE87602"></a><h5 id="LNPCC-GUID-BAFA5489-925B-4E74-BFDC-D664BFE87602" class="sect5"><span class="enumeration_section">19.2.3.7</span> INITFILE</h5>
                     <div>
                        <div class="section">
                           <p>指定要在其中写入类型初始化函数的C源文件的使用。</p>
                           <p>初始化功能仅在OCI程序中需要。在Pro * C / C ++程序中，Pro * C / C ++运行时库初始化用户的类型。</p>
                           <div class="infoboxnote" id="GUID-BAFA5489-925B-4E74-BFDC-D664BFE87602__GUID-ED488FC5-398A-468B-8DC6-557529461D47">
                              <p class="notep1">注意：</p>
                              <p>如果<code class="codeph">INITFILE</code>指定的文件已存在，则OTT运行时将覆盖该文件，但有一个例外：如果OTT生成的文件内容与文件的先前内容相同，则OTT实际上不会写入文件。这样可以保留文件的修改时间，以便UNIX <span class="italic">make</span>和其他平台上的类似工具不会执行不必要的重新编译。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4450"></a><div class="props_rev_3"><a id="GUID-E85CFF2F-403E-47A2-9310-2F5082E29CF9" name="GUID-E85CFF2F-403E-47A2-9310-2F5082E29CF9"></a><h5 id="LNPCC-GUID-E85CFF2F-403E-47A2-9310-2F5082E29CF9" class="sect5"><span class="enumeration_section">19.2.3.8</span> INITFUNC</h5>
                     <div>
                        <div class="section">
                           <p>指定要在<code class="codeph">INITFILE</code>定义的初始化函数的名称。</p>
                           <p>如果未使用此参数并生成初始化函数，则初始化函数的名称将与<code class="codeph">INITFILE</code>的基本名称相同。</p>
                           <p>只有在OCI程序中才需要此功能。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNPCC4451"></a><div class="props_rev_3"><a id="GUID-58C0A751-AB3E-4AAB-8BAF-9F5C70FF6338" name="GUID-58C0A751-AB3E-4AAB-8BAF-9F5C70FF6338"></a><h4 id="LNPCC-GUID-58C0A751-AB3E-4AAB-8BAF-9F5C70FF6338" class="sect4"><span class="enumeration_section">19.2.4</span> INTYPE文件</h4>
                  <div>
                     <p>运行OTT时， <code class="codeph">INTYPE</code>文件告诉OTT应转换哪些数据库类型。它还可以控制生成的结构的命名。您可以创建<code class="codeph">INTYPE</code>文件，或使用先前调用OTT的<code class="codeph">OUTTYPE</code>文件。如果未使用<code class="codeph">INTYPE</code>参数，则转换OTT连接的架构中的所有类型。
                     </p>
                     <p>以下是用户创建的<code class="codeph">INTYPE</code>文件的简单示例：</p><pre class="oac_no_warn" dir="ltr">CASE = LOWER TYPE员工TRANSLATE SALARY $ AS薪水DEPTNO AS部门类型地址类型项目类型“人员”TYPE PURCHASE_ORDER as p_o</pre><p>第一行带有<code class="codeph">CASE</code>关键字，表示生成的C标识符应为小写。但是，此<code class="codeph">CASE</code>选项仅适用于<code class="codeph">INTYPE</code>文件中未明确提及的那些标识符。因此， <span class="italic">员工</span> <code class="codeph"> </code>和<span class="italic">ADDRESS</span>将始终分别导致C结构<code class="codeph">employee</code>和<code class="codeph">ADDRESS</code> 。这些结构的成员将以小写字母命名。
                     </p>
                     <p>以TYPE关键字开头的行指定应转换数据库中的哪些类型。在这种情况下， <span class="italic">EMPLOYEE，ADDRESS，ITEM，PERSON</span>和<span class="italic">PURCHASE_ORDER</span>类型。
                     </p>
                     <p>翻译......AS关键字指定在将类型转换为C结构时应更改对象属性的名称。在这种情况下， <code class="codeph">employee</code>类型的SALARY $属性将转换为<code class="codeph">salary</code> 。
                     </p>
                     <p>最后一行中的AS关键字指定在将对象类型转换为结构时应更改该对象类型的名称。在这种情况下， <span class="italic">purchase_order</span>数据库类型将转换为名为<span class="italic">p_o</span>的结构。
                     </p>
                     <p>如果不使用AS来转换类型或属性名称，则类型或属性的数据库名称将用作C标识符名称，但将遵守<code class="codeph">CASE</code>选项，以及无法映射到合法的任何字符C标识符字符将替换为下划线。翻译类型或属性名称的原因包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>名称包含字母，数字和下划线以外的字符</p>
                        </li>
                        <li>
                           <p>名称与C关键字冲突</p>
                        </li>
                        <li>
                           <p>类型名称与同一范围内的另一个标识符冲突。例如，如果程序使用来自不同模式的两个具有相同名称的类型，则会发生这种情况。</p>
                        </li>
                        <li>
                           <p>程序员喜欢不同的名字</p>
                        </li>
                     </ul>
                     <p>OTT可能需要转换<code class="codeph">INTYPE</code>文件中未列出的其他类型。这是因为OTT在执行转换之前分析<code class="codeph">INTYPE</code>文件中的类型依赖关系类型，并根据需要转换其他类型。例如，如果是<span class="italic">ADDRESS</span> <code class="codeph"> </code>类型未在<code class="codeph">INTYPE</code>文件中列出，但<span class="italic">Person</span>类型具有<span class="italic">ADDRESS</span>类型的属性，OTT仍将转换<span class="italic">ADDRESS，</span>因为它需要定义<span class="italic">Person</span>类型。
                     </p>
                     <div class="infoboxnote" id="GUID-58C0A751-AB3E-4AAB-8BAF-9F5C70FF6338__GUID-458036D6-00D4-4715-9322-9EE3C0DB0831">
                        <p class="notep1">注意：</p>
                        <p>从版本1（9.0.1）开始，用户可以指定TRANSITIVE = FALSE以<span class="italic">不</span>生成<code class="codeph">INTYPE</code>文件中未指定的类型。默认情况下，TRANSITIVE设置为TRUE。
                        </p>
                     </div>
                     <p>正常的不区分大小写的SQL标识符可以在<code class="codeph">INTYPE</code>文件中以大写和小写的任意组合拼写，并且不引用。
                     </p>
                     <p>使用引号（例如TYPE“ <span class="italic">Person</span> ”）来引用以区分大小写的方式创建的SQL标识符，例如，CREATE TYPE“ <span class="italic">Person</span> ”。如果SQL标识符在声明时引用，则它区分大小写。
                     </p>
                     <p>引号也可用于表示也是OTT保留字的SQL标识符，例如TYPE“CASE”。在这种情况下，如果SQL标识符是以不区分大小写的方式创建的，则引用的名称必须为大写，例如，CREATE TYPE Case。如果OTT保留字用于引用SQL标识符的名称但未引用，则OTT将在<code class="codeph">INTYPE</code>文件中报告语法错误。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="the-Object-type.html#GUID-2910B3D2-50E0-4E3F-93B4-A20ED287CCE9">案件</a></li>
                           <li><a href="the-Object-type.html#GUID-D114064D-E05F-42DD-9DB9-EAEEE5A9619B">INTYPE文件的结构</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4452"></a><div class="props_rev_3"><a id="GUID-38E440CA-2AD1-457C-B189-83E8EA965FF9" name="GUID-38E440CA-2AD1-457C-B189-83E8EA965FF9"></a><h4 id="LNPCC-GUID-38E440CA-2AD1-457C-B189-83E8EA965FF9" class="sect4"><span class="enumeration_section">19.2.5</span> OTT数据类型映射</h4>
                  <div>
                     <p>当OTT从数据库类型生成C结构时，该结构包含一个对应于对象类型的每个属性的元素。属性的数据类型映射到Oracle对象数据类型中使用的类型。Oracle中的数据类型包括一组预定义的原始类型，并提供用户定义类型的创建，如对象类型和集合。</p>
                     <p>预定义类型集包括大多数程序员熟悉的标准类型，包括数字和字符类型。它还包括Oracle8引入的数据类型（例如，BLOB或CLOB）。</p>
                     <p>Oracle还包括一组预定义类型，用于表示C结构中的对象类型属性。作为示例，请考虑以下对象类型定义及其对应的OTT生成的结构声明：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE employee AS OBJECT（名称VARCHAR2（30），empno NUMBER，deptno NUMBER，雇用日期，工资$ NUMBER）;</pre><p>假设<code class="codeph">CASE=LOWER</code>且没有类型或属性名称的显式映射，OTT输出为：</p><pre class="oac_no_warn" dir="ltr">struct employee {OCIString * name; OCINumber empno; OCINumber部门; OCIDate雇用; OCINumber salary_; }; typedef struct emp_type emp_type; struct employee_ind {OCIInd _atomic; OCIInd名称; OCIInd empno; OCIInd部门; OCIInd雇用; OCIInd salary_; } typedef struct employee_ind employee_ind;</pre><p>指示符struct <code class="codeph">(struct employee_ind)</code>在<span class="q">“ <a href="the-Object-type.html#GUID-1E36744C-52EA-49D1-B05D-0E73C36436A4">NULL Indicator Structs</a> ”中进行了</span>解释。
                     </p>
                     <p>结构声明中的数据类型<code class="codeph">OCIString</code> ， <code class="codeph">OCINumber</code> ， <code class="codeph">OCIDate</code> ， <code class="codeph">OCIInd</code>是Oracle8中引入的对象类型的C映射。它们用于映射对象类型属性的数据类型。例如， <code class="codeph">empno</code>属性的<code class="codeph">NUMBER</code>数据类型映射到新的<code class="codeph">OCINumber</code>数据类型。这些新数据类型也可以用作绑定和定义变量的类型。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../lnoci/oci-programming-basics.html#LNOCI-GUID-3CA268B4-AFC8-467C-B127-0E15E90A14DB" target="_blank"><span class="italic">OCI数据结构</span></a></li>
                        </ul>
                     </div>
                  </div><a id="LNPCC4454"></a><a id="LNPCC4455"></a><a id="LNPCC4453"></a><div class="props_rev_3"><a id="GUID-40348350-2921-4CA0-8609-A66CCE4F952A" name="GUID-40348350-2921-4CA0-8609-A66CCE4F952A"></a><h5 id="LNPCC-GUID-40348350-2921-4CA0-8609-A66CCE4F952A" class="sect5"><span class="enumeration_section">19.2.5.1将</span>对象数据类型映射到C</h5>
                     <div>
                        <div class="section">
                           <p>本节描述了对象属性类型到OTT生成的C类型的映射。 <a href="the-Object-type.html#GUID-40348350-2921-4CA0-8609-A66CCE4F952A__CHDFGJDA" title="对象类型属性的对象数据类型映射">表19-1</a>列出了可用作OTT生成的对象数据类型属性的类型的映射。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-40348350-2921-4CA0-8609-A66CCE4F952A__CHDFGJDA">
                           <p class="titleintable">表19-1对象类型属性的对象数据类型映射</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="对象类型属性的对象数据类型映射" width="100%" border="1" summary="Object Datatype Mappings for Object Type Attributes" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="54%" id="d101336e1194">对象属性类型</th>
                                    <th align="left" valign="bottom" width="46%" id="d101336e1197">C映射</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1202" headers="d101336e1194 ">
                                       <p>VARCHAR2（N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1202 d101336e1197 ">
                                       <p>OCIString *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1209" headers="d101336e1194 ">
                                       <p>VARCHAR（N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1209 d101336e1197 ">
                                       <p>OCIString *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1216" headers="d101336e1194 ">
                                       <p>CHAR（N），CHARACTER（N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1216 d101336e1197 ">
                                       <p>OCIString *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1223" headers="d101336e1194 ">
                                       <p>NUMBER，NUMBER（N），NUMBER（N，N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1223 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1230" headers="d101336e1194 ">
                                       <p>NUMERIC，NUMERIC（N），NUMERIC（N，N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1230 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1237" headers="d101336e1194 ">
                                       <p>真实</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1237 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1244" headers="d101336e1194 ">
                                       <p>INT，INTEGER，SMALLINT</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1244 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1251" headers="d101336e1194 ">
                                       <p>FLOAT，FLOAT（N），双精度</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1251 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1258" headers="d101336e1194 ">
                                       <p>DEC，DEC（N），DEC（N，N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1258 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1265" headers="d101336e1194 ">
                                       <p>DECIMAL，DECIMAL（N），DECIMAL（N，N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1265 d101336e1197 ">
                                       <p>OCINumber</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1272" headers="d101336e1194 ">
                                       <p>日期</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1272 d101336e1197 ">
                                       <p>OCIDate *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1280" headers="d101336e1194 ">
                                       <p>BLOB</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1280 d101336e1197 ">
                                       <p>OCIBlobLocator *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1287" headers="d101336e1194 ">
                                       <p>CLOB</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1287 d101336e1197 ">
                                       <p>OCIClobLocator *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1294" headers="d101336e1194 ">
                                       <p>BFILE</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1294 d101336e1197 ">
                                       <p>OCIBFileLocator *</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1301" headers="d101336e1194 ">
                                       <p>嵌套对象类型</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1301 d101336e1197 ">
                                       <p>嵌套对象类型的C名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1308" headers="d101336e1194 ">
                                       <p>REF</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1308 d101336e1197 ">
                                       <p>使用typedef声明;相当于OCIRef *。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="54%" id="d101336e1315" headers="d101336e1194 ">
                                       <p>RAW（N）</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d101336e1315 d101336e1197 ">
                                       <p>OCIRaw *</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p><a href="the-Object-type.html#GUID-40348350-2921-4CA0-8609-A66CCE4F952A__G454458" title="集合类型的对象数据类型映射">表19-2</a>显示了命名集合类型到OTT生成的对象数据类型的映射：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-40348350-2921-4CA0-8609-A66CCE4F952A__G454458">
                           <p class="titleintable">表19-2集合类型的对象数据类型映射</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="集合类型的对象数据类型映射" width="100%" border="1" summary="Object Datatype Mappings for Collection Types" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d101336e1338">命名集合类型</th>
                                    <th align="left" valign="bottom" width="68%" id="d101336e1341">C映射</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d101336e1346" headers="d101336e1338 ">
                                       <p>VARRAY</p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d101336e1346 d101336e1341 ">
                                       <p>使用typedef声明;相当于OCIArray *。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d101336e1353" headers="d101336e1338 ">
                                       <p>嵌套表</p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d101336e1353 d101336e1341 ">
                                       <p>使用typedef声明;相当于OCITable *。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-40348350-2921-4CA0-8609-A66CCE4F952A__GUID-D7D19BC1-470F-48B4-AAD6-D50291D03F52">
                              <p class="notep1">注意：</p>
                              <p>对于REF，VARRAY和NESTED TABLE类型，OTT生成typedef。然后，在typedef中声明的类型将用作struct声明中数据成员的类型。</p>
                           </div>
                           <p>如果对象类型包括REF或集合类型的属性，则首先生成REF或集合类型的typedef。然后生成对应于对象类型的struct声明。该struct包含一个元素，其类型是指向REF或集合类型的指针。</p>
                           <p>如果对象类型包含其类型为另一种对象类型的属性，则OTT首先生成嵌套类型（如果TRANSITIVE = TRUE。）然后，它将对象类型属性映射到嵌套对象类型的嵌套结构。</p>
                           <p>OTT映射非对象数据库属性类型的C数据类型是结构，除OCIDate外，它们是不透明的。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="the-Object-type.html#GUID-D478DA42-5F8B-422A-B6EB-34AB6546EA2A">OTT类型映射示例</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="LNPCC4456"></a><div class="props_rev_3"><a id="GUID-D478DA42-5F8B-422A-B6EB-34AB6546EA2A" name="GUID-D478DA42-5F8B-422A-B6EB-34AB6546EA2A"></a><h5 id="LNPCC-GUID-D478DA42-5F8B-422A-B6EB-34AB6546EA2A" class="sect5"><span class="enumeration_section">19.2.5.2</span> OTT类型映射示例</h5>
                     <div>
                        <div class="section">
                           <p>以下示例演示OTT创建的各种类型映射。</p>
                           <p>给定以下数据库类型：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE my_varray AS VARRAY（5）的整数; CREATE TYPE object_type AS OBJECT（object_name VARCHAR2（20））; CREATE TYPE my_table AS TABLE OF object_type; CREATE TYPE many_types AS OBJECT（the_varchar VARCHAR2（30），the_char CHAR（3），the_blob BLOB，the_clob CLOB，the_object object_type，another_ref REF other_type，the_ref REF many_types，the_varray my_varray，the_table my_table，the_date DATE，the_num NUMBER，the_raw RAW（ 255））;</pre><p>和一个包含以下内容的<code class="codeph">INTYPE</code>文件：</p><pre class="oac_no_warn" dir="ltr">CASE = LOWER TYPE many_types</pre><p>OTT将生成以下C结构：</p>
                           <div class="infoboxnote" id="GUID-D478DA42-5F8B-422A-B6EB-34AB6546EA2A__GUID-BAC39CEC-5273-45CA-B3AD-23BDF48ABE41">
                              <p class="notep1">注意：</p>
                              <p>这里提供的评论有助于解释结构。这些注释不是实际OTT输出的一部分。</p>
                           </div><pre class="oac_no_warn" dir="ltr">#ifndef MYFILENAME_ORACLE #define MYFILENAME_ORACLE #ifndef OCI_ORACLE #include &lt;oci.h&gt; #endif typedef OCIRef many_types_ref; typedef OCIRef object_type_ref; typedef OCIArray my_varray; / * many_types的一部分* / typedef OCITable my_table; / * many_types的一部分* / typedef OCIRef other_type_ref; struct object_type / * many_types的一部分* / {OCIString * object_name; }; typedef struct object_type object_type; struct object_type_ind / *指示符结构，用于* / {/ * object_types * / OCIInd _atomic; OCIInd object_name; }; typedef struct object_type_ind object_type_ind; struct many_types {OCIString * the_varchar; OCIString * the_char; OCIBlobLocator * the_blob; OCIClobLocator * the_clob; struct object_type the_object; other_type_ref * another_ref; many_types_ref * the_ref; my_varray * the_varray; my_table * the_table; OCIDate the_date; OCINumber the_num; OCIRaw * the_raw; }; typedef struct many_types many_types; struct many_types_ind / *指示符结构，用于* / {/ * many_types * / OCIInd _atomic; OCIInd the_varchar; OCIInd the_char; OCIInd the_blob; OCIInd the_clob; struct object_type_ind the_object; / *嵌套* / OCIInd another_ref; OCIInd the_ref; OCIInd the_varray; OCIInd the_table; OCIInd the_date; OCIInd the_num; OCIInd the_raw; }; typedef struct many_types_ind many_types_ind; ＃万一</pre><p>请注意，即使在<code class="codeph">INTYPE</code>文件中仅列出了一个要翻译的项目，也会翻译两个对象类型和两个命名的集合类型。这是因为OTT参数<span class="q">“ <a href="the-Object-type.html#GUID-07AB8BBD-35A4-4BCA-B522-10BB7F9049E7">TRANSITIVE</a> ”</span>的默认值为TRUE。如该部分所述，当TRANSITIVE = TRUE时，OTT自动翻译用作被翻译类型属性的任何类型，以完成所列类型的翻译。
                           </p>
                           <p>对于仅由对象类型属性中的指针或REF访问的类型，情况并非如此。例如，尽管<span class="italic">many_types</span> <code class="codeph">type contains the attribute</code> <span class="italic">another_ref</span> <code class="codeph"> </code> <span class="italic">REF other_type</span> <code class="codeph">, a declaration of struct other_type</code>未生成<code class="codeph">, a declaration of struct other_type</code> 。
                           </p>
                           <p>此示例还说明了如何使用typedef声明VARRAY，NESTED TABLE和REF类型。</p>
                           <p>typedef出现在开头附近：</p><pre class="oac_no_warn" dir="ltr">typedef OCIRef many_types_ref; typedef OCIRef object_type_ref; typedef OCIArray my_varray; typedef OCITable my_table; typedef OCIRef other_type_ref;</pre><p></p>
                           <p>在struct <code class="codeph">many_types</code> ，声明了VARRAY，NESTED TABLE和REF属性：</p><pre class="oac_no_warn" dir="ltr">struct many_types {...other_type_ref * another_ref; many_types_ref * the_ref; my_varray * the_varray; my_table * the_table; ...}</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNPCC4457"></a><div class="props_rev_3"><a id="GUID-1E36744C-52EA-49D1-B05D-0E73C36436A4" name="GUID-1E36744C-52EA-49D1-B05D-0E73C36436A4"></a><h4 id="LNPCC-GUID-1E36744C-52EA-49D1-B05D-0E73C36436A4" class="sect4"><span class="enumeration_section">19.2.6</span> NULL指示符结构</h4>
                  <div>
                     <p>每当OTT生成一个C结构来表示数据库对象类型时，它也会生成相应的NULL指示符结构。当在C结构中选择对象类型时，可以将NULL指示符信息选择为并行结构。</p>
                     <p>例如，在上一节的示例中生成了以下NULL指示符结构：</p><pre class="oac_no_warn" dir="ltr">struct many_types_ind {OCIInd _atomic; OCIInd the_varchar; OCIInd the_char; OCIInd the_blob; OCIInd the_clob; struct object_type_ind the_object; OCIInd another_ref; OCIInd the_ref; OCIInd the_varray; OCIInd the_table; OCIInd the_date; OCIInd the_num; OCIInd the_raw; }; typedef struct many_types_ind many_types_ind;</pre><p>NULL结构的布局很重要。struct（ <code class="codeph">_atomic</code> ）中的第一个元素是<span class="italic">原子NULL指示符</span> 。此值指示整个对象类型的NULL状态。原子NULL指示符之后是对应于OTT生成的结构中表示对象类型的每个元素的指示符元素。
                     </p>
                     <p>请注意，当对象类型包含另一个对象类型作为其定义的一部分时（在前面的示例中，它是<span class="italic">object_type</span> <code class="codeph"> </code>属性），该属性的指示符条目是与嵌套对象类型对应的NULL指示符struct（ <code class="codeph">object_type_ind</code> ）。
                     </p>
                     <p>VARRAY和NESTED TABLE包含其元素的NULL信息。NULL指示符结构的所有其他元素的数据类型是<code class="codeph">OCIInd</code> 。</p>
                     <p>有关原子NULLness的更多信息，请参阅<a href="../lnoci/data-types.html#LNOCI-GUID-027FB2E2-593C-43F1-9184-DFEF7A984A27" target="_blank">数据类型</a>中对象类型的讨论。
                     </p>
                  </div>
               </div><a id="LNPCC4458"></a><div class="props_rev_3"><a id="GUID-A9A00891-FD32-4B0A-813A-4064DF43557B" name="GUID-A9A00891-FD32-4B0A-813A-4064DF43557B"></a><h4 id="LNPCC-GUID-A9A00891-FD32-4B0A-813A-4064DF43557B" class="sect4"><span class="enumeration_section">19.2.7</span>类型继承的OTT支持</h4>
                  <div>
                     <p>为了支持对象的类型继承，OTT通过在声明新属性之前使用特殊名称“_super”声明封装结构中的继承属性来生成表示对象子类型的C结构。因此，对于从超类型继承的对象子类型，结构中的第一个元素名为'_super'，后跟与子类型的每个属性对应的元素。名为'_super'的元素的类型是超类型的名称。</p>
                     <p>例如，给定类型<code class="codeph">Person_t</code> ，子类型为<code class="codeph">Student_t</code> ，子类型为<code class="codeph">Employee_t,</code>其创建方式如下：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE Person_t AS OBJECT（ssn NUMBER，name VARCHAR2（30），address VARCHAR2（100））NOT FINAL; CREATE TYPE Student_t UNDER Person_t（deptid NUMBER，major VARCHAR2（30））NOT FINAL; CREATE TYPE Employee_t UNDER Person_t（empid NUMBER，mgr VARCHAR2（30））;</pre><p>并且，给定一个<code class="codeph">INTYPE</code>文件，其中包括：</p><pre class="oac_no_warn" dir="ltr">案例=同一类型员工_T型学生_TTYPE PERSON_T</pre><p>OTT为<code class="codeph">Person_t</code> ， <code class="codeph">Student_t</code>和<code class="codeph">Employee_t</code>及其空指示符结构生成以下C结构：</p><pre class="oac_no_warn" dir="ltr">#ifndef MYFILENAME_ORACLE #define MYFILENAME_ORACLE #ifndef OCI_ORACLE #include &lt;oci.h&gt; #endif typedef OCIRef EMPLOYEE_T_ref; typedef OCIRef STUDENT_T_ref; typedef OCIRef PERSON_T_ref; struct PERSON_T {OCINumber SSN; OCIString * NAME; OCIString * ADDRESS; }; typedef struct PERSON_T PERSON_T; struct PERSON_T_ind {OCIInd _atomic; OCIInd SSN; OCIInd NAME; OCIInd ADDRESS; }; typedef struct PERSON_T_ind PERSON_T_ind; struct EMPLOYEE_T {PERSON_T _super; OCINumber EMPID; OCIString * MGR; }; typedef struct EMPLOYEE_T EMPLOYEE_T; struct EMPLOYEE_T_ind {PERSON_T _super; OCIInd EMPID; OCIInd MGR; }; typedef struct EMPLOYEE_T_ind EMPLOYEE_T_ind; struct STUDENT_T {PERSON_T _super; OCINumber DEPTID; OCIString * MAJOR; }; typedef struct STUDENT_T STUDENT_T; struct STUDENT_T_ind {PERSON_T _super; OCIInd DEPTID; OCIInd MAJOR; }; typedef struct STUDENT_T_ind STUDENT_T_ind; ＃万一</pre><p>较早的C映射约定允许从子类型的实例简单地向上转换为C中的超类型实例以正常工作。例如：</p><pre class="oac_no_warn" dir="ltr">STUDENT_T * stu_ptr = some_ptr; / *一些STUDENT_T实例* / PERSON_T * pers_ptr =（PERSON_T *）stu_ptr; / *上传* /</pre><p>null指示符结构类似地生成。请注意，对于超类型<code class="codeph">Person_t</code> null指示符结构，第一个元素是'_atomic'，而对于子类型<code class="codeph">Employee_t</code>和<code class="codeph">Student_t</code> null指示符结构，第一个元素是'_super'（没有为子类型生成原子元素）。
                     </p>
                  </div><a id="LNPCC4459"></a><div class="props_rev_3"><a id="GUID-C4A17F01-6EF7-4333-958C-3C1B36BDFBD2" name="GUID-C4A17F01-6EF7-4333-958C-3C1B36BDFBD2"></a><h5 id="LNPCC-GUID-C4A17F01-6EF7-4333-958C-3C1B36BDFBD2" class="sect5"><span class="enumeration_section">19.2.7.1可</span>替换对象属性</h5>
                     <div>
                        <p>对于NOT FINAL类型的属性（因此可能是可替换的），嵌入的属性表示为指针。</p>
                        <p>考虑创建的类型<code class="codeph">Book_t</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE Book_t AS OBJECT（标题VARCHAR2（30），作者Person_t / * substitutable * /）;</pre><p>OTT生成的相应C结构包含指向<code class="codeph">Person_t</code>的指针：</p><pre class="oac_no_warn" dir="ltr">struct Book_t {OCIString * title; Person_t *作者; / *指向Person_t struct * /}的指针</pre><p>与早期类型对应的空指示符结构是：</p><pre class="oac_no_warn" dir="ltr">struct Book_t_ind {OCIInd _atomic; OCIInd头衔; OCIInd作者; }</pre><p>请注意，可以从<code class="codeph">author</code>对象本身获取与<code class="codeph">author</code>属性对应的null指示符结构。
                        </p>
                        <p>如果将类型定义为FINAL，则它不能具有任何子类型。因此，FINAL类型的属性不可替代。在这种情况下，映射与以前一样：属性struct是内联的。现在，如果类型被更改并定义为NOT FINAL，则映射必须更改。通过再次运行OTT生成新映射。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="about-Objects.html#GUID-C8E8F151-455E-45FD-AA11-68DD84D6B411">对象获取</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="LNPCC4460"></a><div class="props_rev_3"><a id="GUID-5227CAB0-3505-453B-9075-B0ED867C3B49" name="GUID-5227CAB0-3505-453B-9075-B0ED867C3B49"></a><h4 id="LNPCC-GUID-5227CAB0-3505-453B-9075-B0ED867C3B49" class="sect4"><span class="enumeration_section">19.2.8</span>的OUTTYPE文件</h4>
                  <div>
                     <p><code class="codeph">OUTTYPE</code>文件在OTT命令行上命名。当OTT生成C头文件时，它还会将转换结果写入<code class="codeph">OUTTYPE</code>文件。此文件包含每个要转换的类型的条目，包括其版本字符串以及写入其C表示的头文件。
                     </p>
                     <p>所述<code class="codeph">OUTTYPE</code>从一个OTT运行文件可以被用作<code class="codeph">INTYPE</code>用于后续调用OTT文件。
                     </p>
                     <p>例如，给定本章前面使用的简单<code class="codeph">INTYPE</code>文件</p><pre class="oac_no_warn" dir="ltr">CASE = LOWER TYPE员工TRANSLATE SALARY $ AS薪水DEPTNO AS部门类型地址类型项目类型人员类型PURCHASE_ORDER作为p_o</pre><p>用户已选择为OTT生成的C标识符指定大小写，并提供了应翻译的类型列表。在其中两种类型中，指定了命名约定。</p>
                     <p>以下示例显示运行OTT后<code class="codeph">OUTTYPE</code>文件的外观：</p><pre class="oac_no_warn" dir="ltr">CASE = LOWER TYPE EMPLOYEE AS员工VERSION =“$ 8.0”HFILE = demo.h TRANSLATE SALARY $ AS薪水DEPTNO AS部门类型地址作为地址VERSION =“$ 8.0”HFILE = demo.h类型项目为VERSION =“$ 8.0”HFILE = demo.h TYPE“Person”AS Person VERSION =“$ 8.0”HFILE = demo.h TYPE PURCHASE_ORDER as p_o VERSION =“$ 8.0”HFILE = demo.h</pre><p>检查<code class="codeph">OUTTYPE</code>文件的内容时，您可能会发现列出的类型未包含在<code class="codeph">INTYPE</code>规范中。例如，如果<code class="codeph">INTYPE</code>文件仅指定要翻译的<span class="italic">人员</span>类型：</p><pre class="oac_no_warn" dir="ltr">案例=较低级别的人</pre><p>并且person类型的定义包括<span class="italic">address</span>类型的属性，然后<code class="codeph">OUTTYPE</code>文件将包含<code class="codeph">PERSON</code>和<code class="codeph">ADDRESS</code>条目。如果没有首先翻译<span class="italic">地址，</span>则无法完全翻译<code class="codeph">person</code>类型。
                     </p>
                     <p>当参数TRANSITIVE设置为TRUE（默认值）时，OTT会在执行转换之前分析<code class="codeph">INTYPE</code>文件中的类型依赖关系，并根据需要转换其他类型。
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC4462"></a><a id="LNPCC4461"></a><div class="props_rev_3"><a id="GUID-8A7E3E30-3339-498F-91D0-F4E60C5544C3" name="GUID-8A7E3E30-3339-498F-91D0-F4E60C5544C3"></a><h3 id="LNPCC-GUID-8A7E3E30-3339-498F-91D0-F4E60C5544C3" class="sect3"><span class="enumeration_section">19.3</span>使用OCI应用程序进行OTT</h3>
               <div>
                  <div class="section">
                     <p>由OTT生成的C头和实现文件可以由访问数据库服务器中的对象的OCI应用程序使用。使用<code class="codeph">#include</code>语句将头文件合并到OCI代码中。
                     </p>
                     <p>一旦包含头文件，OCI应用程序就可以访问和操作主机语言格式的对象数据。</p>
                     <p><a href="the-Object-type.html#GUID-8A7E3E30-3339-498F-91D0-F4E60C5544C3__I440389">图19-1</a>显示了使用OTT和OCI所涉及的步骤。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>SQL用于在数据库中创建类型定义。</span></li>
                     <li><span>OTT生成一个头文件，其中包含对象类型和命名集合类型的C表示。它还生成一个实现文件，以<code class="codeph">INITFILE</code>选项命名。</span></li>
                     <li><span>该应用程序是写的。OCI应用程序中用户编写的代码声明并调用<code class="codeph">INITFUNC</code>函数。</span></li>
                     <li><span>头文件包含在OCI源代码文件中。</span></li>
                     <li><span>OCI应用程序（包括OTT生成的实现文件）被编译并与OCI库链接。</span></li>
                     <li><span>OCI可执行文件是针对Oracle Server运行的。</span></li>
                  </ol>
                  <div class="section">
                     <div class="figure" id="GUID-8A7E3E30-3339-498F-91D0-F4E60C5544C3__I440389">
                        <p class="titleinfigure">图19-1使用OTT和OCI</p><img src="img/lnpcc072.gif" width="499" alt="下面是图19-1的描述" title="下面是图19-1的描述" longdesc="img_text/lnpcc072.html"><br><a href="img_text/lnpcc072.html">“图19-1使用OTT和OCI”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPCC4463"></a><div class="props_rev_3"><a id="GUID-AFBAC4B3-B6F2-40C6-829A-02ECD71C9782" name="GUID-AFBAC4B3-B6F2-40C6-829A-02ECD71C9782"></a><h4 id="LNPCC-GUID-AFBAC4B3-B6F2-40C6-829A-02ECD71C9782" class="sect4"><span class="enumeration_section">19.3.1</span>关于使用OCI访问和操作对象</h4>
                  <div>
                     <p>在应用程序中，OCI程序可以使用声明为OTT生成的头文件中出现的类型的程序变量来执行绑定和定义操作。</p>
                     <p>例如，应用程序可能使用SQL SELECT语句将REF提取到对象，然后使用适当的OCI函数固定该对象。固定对象后，可以使用其他OCI功能访问和操作其属性数据。</p>
                     <p>OCI包括一组数据类型映射和操作函数，专门用于处理对象类型和命名集合类型的属性。</p>
                     <p>一些可用的功能如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCIStringSize()</code>获取<code class="codeph">OCIString</code>字符串的大小。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCINumberAdd()</code>将两个<code class="codeph">OCINumber</code>编号一起添加。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCILobIsEqual()</code>比较两个LOB定位器是否相等。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIRawPtr()</code>获取指向<code class="codeph">OCIRaw</code>原始数据类型的指针。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCICollAppend()</code>将一个元素追加到集合类型（ <code class="codeph">OCIArray</code>或<code class="codeph">OCITable</code> ）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCITableFirst()</code>返回嵌套表（ <code class="codeph">OCITable</code> ）的第一个现有元素的索引。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCIRefIsNull()</code>测试REF（ <code class="codeph">OCIRef)</code>是否为NULL</p>
                        </li>
                     </ul>
                     <p><a href="../lnoci/index.html" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a>的以下章节将详细介绍这些函数：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>第2章，涵盖OCI概念，包括绑定和定义</p>
                        </li>
                        <li>
                           <p>第6章，介绍对象访问和导航</p>
                        </li>
                        <li>
                           <p>第7章，其中介绍了数据类型映射和操作</p>
                        </li>
                        <li>
                           <p>第12章，列出了数据类型映射和操作函数</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC4464"></a><div class="props_rev_3"><a id="GUID-EF2F2C50-A944-438A-904A-907DBF9D8C22" name="GUID-EF2F2C50-A944-438A-904A-907DBF9D8C22"></a><h4 id="LNPCC-GUID-EF2F2C50-A944-438A-904A-907DBF9D8C22" class="sect4"><span class="enumeration_section">19.3.2</span>关于调用初始化函数</h4>
                  <div>
                     <p>如果请求，OTT会生成C初始化函数。初始化函数告诉环境，对于程序中使用的每个对象类型，使用哪种类型的类型。您可以在使用<code class="codeph">INITFUNC</code>选项调用OTT时指定初始化函数的名称，或者可以允许OTT根据包含该函数的实现文件（ <code class="codeph">INITFILE</code> ）的名称选择默认名称。
                     </p>
                     <p>初始化函数有两个参数，一个是环境句柄指针和一个错误句柄指针。通常只有一个初始化函数，但这不是必需的。如果程序有几个需要不同类型的单独编译的部分，您可能需要为每个部分单独执行OTT，每个部分需要一个包含初始化函数的初始化文件。</p>
                     <p>通过显式OCI对象调用创建环境句柄后，例如，通过调用<span class="bold"> </span> <code class="codeph">OCIEnvInit()</code> ，您还必须为每个环境句柄显式调用初始化函数。这使每个句柄都可以访问整个程序中使用的所有数据类型。
                     </p>
                     <p>如果使用嵌入式SQL语句（例如EXEC SQL CONTEXT USE和EXEC SQL CONNECT）隐式创建环境句柄，则会隐式初始化句柄，并且无需调用初始化函数。这与Pro * C / C ++应用程序或Pro * C / C ++与OCI应用程序组合时相关。</p>
                     <p>以下示例显示了初始化函数。</p>
                     <p>给定一个<code class="codeph">INTYPE</code>文件，ex2c.typ，包含</p><pre class="oac_no_warn" dir="ltr">TYPE SCOTT.PERSON TYPE SCOTT.ADDRESS</pre><p>和命令行</p><pre class="oac_no_warn" dir="ltr">ott userid = scott / tiger intype = ex2c outtype = ex2co hfile = ex2ch.h initfile = ex2cv.c</pre><p>OTT为ex2cv.c文件生成以下内容：</p><pre class="oac_no_warn" dir="ltr">#ifndef OCI_ORACLE #include &lt;oci.h&gt; #endif sword ex2cv（OCIEnv * env，OCIError * err）{sword status = OCITypeVTInit（env，err）; if（status == OCI_SUCCESS）status = OCITypeVTInsert（env，err，“SCOTT”，5，“PERSON”，6，“$ 8.0”，4）; if（status == OCI_SUCCESS）status = OCITypeVTInsert（env，err，“SCOTT”，5，“ADDRESS”，7，“$ 8.0”，4）;返回状态; }</pre><p>函数<span class="italic">ex2cv</span>创建类型版本表并插入类型SCOTT.PERSON和SCOTT.ADDRESS。</p>
                     <p>如果程序显式创建环境句柄，则必须生成，编译和链接所有初始化函数，因为必须为每个显式创建的句柄调用它们。如果程序未显式创建任何环境句柄，则不需要初始化函数。</p>
                     <p>使用OTT生成的头文件的程序还必须使用同时生成的初始化函数。更确切地说，如果由OTT生成的头文件包含在生成链接到程序P的代码的编译中，并且在程序P中的某处显式创建了环境句柄，则由相同的OTT调用生成的实现文件也必须是编译并链接到程序P.正确执行此操作是您的责任。</p>
                  </div>
               </div><a id="LNPCC4465"></a><div class="props_rev_3"><a id="GUID-C7686FA7-0258-403E-95CF-2D080F422D01" name="GUID-C7686FA7-0258-403E-95CF-2D080F422D01"></a><h4 id="LNPCC-GUID-C7686FA7-0258-403E-95CF-2D080F422D01" class="sect4"><span class="enumeration_section">19.3.3</span>初始化函数的任务</h4>
                  <div>
                     <p>C初始化函数提供有关OTT处理的类型的版本信息。它向类型版本表添加了每个OTT处理的对象数据类型的名称和版本标识符。</p>
                     <p>Open Type Manager（OTM）使用类型版本表来确定特定程序使用的类型的版本。OTT在不同时间生成的不同初始化函数可以向类型版本表添加一些相同的类型。当多次添加类型时，OTM确保每次都注册相同版本的类型。</p>
                     <p>OCI程序员有责任为初始化函数声明函数原型，并调用该函数。</p>
                     <div class="infoboxnote" id="GUID-C7686FA7-0258-403E-95CF-2D080F422D01__GUID-A1203C4B-892C-4960-B7BD-CD9FDA71077E">
                        <p class="notep1">注意：</p>
                        <p>在当前版本的Oracle中，每种类型只有一个版本。只有与Oracle的未来版本兼容，才需要初始化类型版本表。</p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC4467"></a><a id="LNPCC4466"></a><div class="props_rev_3"><a id="GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942" name="GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942"></a><h3 id="LNPCC-GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942" class="sect3"><span class="enumeration_section">19.4</span>关于在Pro * C / C ++应用程序中使用OTT</h3>
               <div>
                  <div class="section">
                     <p>在构建Pro * C / C ++应用程序时，类型转换过程可以比构建基于OCI的应用程序更简单。这是因为预编译器生成的代码将自动初始化类型版本表。</p>
                     <p>Pro * C / C ++应用程序可以使用OTT生成的AC头文件来访问数据库服务器中的对象。头文件通过<code class="codeph">#include</code>语句合并到代码中。一旦包含头文件，Pro * C / C ++应用程序就可以访问和操作主机语言格式的对象数据。
                     </p>
                     <p><a href="the-Object-type.html#GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942__I440384">图19-2</a>显示了使用OTT和Pro * C / C ++所涉及的步骤。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>SQL用于在数据库中创建类型定义。</p>
                        </li>
                        <li>
                           <p>OTT生成一个头文件，其中包含对象类型，REF类型和命名集合类型的C表示。它还会生成一个<code class="codeph">OUTTYPE</code>文件，该文件作为<code class="codeph">INTYPE</code>参数传递给Pro * C / C ++。
                           </p>
                        </li>
                        <li>
                           <p>头文件包含在Pro * C / C ++源代码文件中。</p>
                        </li>
                        <li>
                           <p>Pro * C / C ++应用程序已编译并与Pro * C / C ++运行时库SQLLIB链接。</p>
                        </li>
                        <li>
                           <p>Pro * C / C ++可执行文件是针对Oracle Server运行的。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="figure" id="GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942__I440384">
                        <p class="titleinfigure">图19-2构建面向对象的Pro * C / C ++应用程序</p><img src="img/lnpcc068.gif" width="499" alt="下面是图19-2的描述" title="下面是图19-2的描述" longdesc="img_text/lnpcc068.html"><br><a href="img_text/lnpcc068.html">“图19-2构建面向对象的Pro * C / C ++应用程序”的描述</a></div>
                     <!-- class="figure" -->
                     <p>如前面的步骤2中所述，OTT生成的<code class="codeph">OUTTYPE</code>文件为Pro * C / C ++程序员提供了特殊用途。调用Pro * C / C ++时，将<code class="codeph">OUTTYPE</code>文件传递给新的<code class="codeph">INTYPE</code>命令行参数。预编译器使用此文件的内容来确定哪些数据库类型对应于哪些OTT生成的结构。OCI程序员必须通过使用特殊的绑定，定义和类型信息访问功能来明确地建立这种关联。
                     </p>
                     <p>此外，预编译器生成代码以使用OTT <code class="codeph">OUTTYPE</code> （Pro * C / C ++ <code class="codeph">INTYPE</code> ）文件中指定的类型初始化类型版本表。
                     </p>
                     <div class="infoboxnote" id="GUID-FFFE16F3-943D-4848-9E63-B590EA2A8942__GUID-07C9E2E4-5399-448A-8C90-2AD05E48C398">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议OTT中的<code class="codeph">OUTTYPE</code>文件始终作为Pro * C / C ++的<code class="codeph">INTYPE</code>文件。您可以为Pro * C / C ++编写<code class="codeph">INTYPE</code>文件，但由于可能会引入错误，因此不建议这样做。
                        </p>
                     </div>
                     <p>操纵从服务器检索的对象的属性的一种方法是调用OCI数据类型映射和操作函数。在执行此操作之前，应用程序必须首先调用<code class="codeph">SQLEnvGet()</code>以获取OCI环境句柄以传递给OCI函数，并且<code class="codeph">SQLSvcCtxGet()</code>以获取OCI服务上下文以传递给OCI函数。还有Pro * C工具可用于操作对象属性。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="about-Objects.html#GUID-0C106FBC-C023-4B86-817A-1867A69388F7">对象</a></li>
                        <li><a href="the-Object-type.html#GUID-AFBAC4B3-B6F2-40C6-829A-02ECD71C9782">关于使用OCI访问和操作对象</a></li>
                        <li><a href="../lnoci/data-types.html#LNOCI030" target="_blank">https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnpcc&amp;id=LNOCI030</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCC4468"></a><div class="props_rev_3"><a id="GUID-8E754758-8639-47E4-A8C5-2251C41A3BB0" name="GUID-8E754758-8639-47E4-A8C5-2251C41A3BB0"></a><h3 id="LNPCC-GUID-8E754758-8639-47E4-A8C5-2251C41A3BB0" class="sect3"><span class="enumeration_section">19.5</span> OTT参考</h3>
               <div>
                  <p>OTT的行为由可以出现在OTT命令行或CONFIG文件中的参数控制。某些参数也可能出现在<code class="codeph">INTYPE</code>文件中。本节提供有关以下主题的详细信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="the-Object-type.html#GUID-4E52BADE-8D12-4DE6-A8C2-332EE1E09002">OTT命令行语法</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-FEE40170-97EE-4B3D-96DF-1FCF4246ABE4">OTT参数</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-104B9584-F2A9-405A-9E29-7C945219CF46">OTT参数可以出现的地方</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-D114064D-E05F-42DD-9DB9-EAEEE5A9619B">INTYPE文件的结构</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-585A7EBC-989C-4A19-8884-9CFCB303D04A">嵌套#include文件生成</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-E21D4C5F-FB6D-4573-9703-3D2B5863382E">SCHEMA_NAMES用法</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-825D5648-2443-490D-90F0-C5748F915A29">默认名称映射</a></p>
                     </li>
                     <li>
                        <p><a href="the-Object-type.html#GUID-C1EB0F45-A82F-4555-9662-B5A1F821E212">限制</a></p>
                     </li>
                  </ul>
                  <p>本章使用以下约定来描述OTT语法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>斜体字符串由用户提供。</p>
                     </li>
                     <li>
                        <p>如图所示输入大写字符串，但大小写不重要。</p>
                     </li>
                     <li>
                        <p>方括号[...]包含可选项。</p>
                     </li>
                     <li>
                        <p>紧跟在项目之后的省略号（...）（或括在括号中的项目）意味着该项目可以重复任意次。</p>
                     </li>
                     <li>
                        <p>如图所示输入除前面描述的标点符号之外的标点符号。这些包括'。'，'@'等。</p>
                     </li>
                  </ul>
               </div><a id="LNPCC4469"></a><div class="props_rev_3"><a id="GUID-4E52BADE-8D12-4DE6-A8C2-332EE1E09002" name="GUID-4E52BADE-8D12-4DE6-A8C2-332EE1E09002"></a><h4 id="LNPCC-GUID-4E52BADE-8D12-4DE6-A8C2-332EE1E09002" class="sect4"><span class="enumeration_section">19.5.1</span> OTT命令行语法</h4>
                  <div>
                     <div class="section">
                        <p>在显式调用OTT以将数据库类型转换为C结构时，将使用OTT命令行界面。在开发使用对象的OCI应用程序或Pro * C / C ++应用程序时，始终需要这样做。</p>
                        <p>OTT命令行语句由关键字<code class="codeph">OTT</code> ，后跟OTT参数列表。
                        </p>
                        <p>可以出现在OTT命令行语句中的参数如下：</p><pre class="oac_no_warn" dir="ltr">[USERID = <span class="italic">用户名</span> / <span class="italic">密码</span> [@ <span class="italic">DB_NAME]]</span> [法菜单= <span class="italic">in_filename]</span> OUTTYPE = <span class="italic">out_filename</span> CODE = {C | ANSI_C | KR_C} [HFILE = <span class="italic">文件名</span> ] [ERRTYPE = <span class="italic">文件名</span> ] [CONFIG = <span class="italic">文件名</span> ] [INITFILE = <span class="italic">文件名</span> ] [INITFUNC = <span class="italic">filename</span> ] [CASE = {SAME | LOWER | UPPER | OPPOSITE}] [SCHEMA_NAMES = {ALWAYS | IF_NEEDED | FROM_INTYPE}] [TRANSITIVE = TRUE | FALSE]</pre><div class="infoboxnote" id="GUID-4E52BADE-8D12-4DE6-A8C2-332EE1E09002__GUID-A592FFFC-B2B9-45E1-A2A4-C13FD57D90BC">
                           <p class="notep1">注意：</p>
                           <p>通常，OTT命令后面的参数顺序无关紧要，只需要<code class="codeph">OUTTYPE</code>和<code class="codeph">CODE</code>参数。
                           </p>
                        </div>
                        <p>几乎总是使用<code class="codeph">HFILE</code>参数。如果省略， <code class="codeph">HFILE</code>必须为<code class="codeph">INTYPE</code>文件中的每种类型单独指定<code class="codeph">INTYPE</code> 。如果OTT确定必须翻译<code class="codeph">INTYPE</code>文件中未列出的类型，则将报告错误。因此，仅当<code class="codeph">INTYPE</code>文件先前作为OTT <code class="codeph">OUTTYPE</code>文件生成时，才能安全地省略<code class="codeph">HFILE</code>参数。
                        </p>
                        <p>如果省略<code class="codeph">INTYPE</code>文件，则将翻译整个模式。有关详细信息，请参阅以下部分中的参数说明。
                        </p>
                        <p>以下是OTT命令行语句的示例（将其作为一行输入）：</p><pre class="oac_no_warn" dir="ltr">OTT userid = scott / tiger intype = in.typ outtype = out.typ code = c hfile = demo.h errtype = demo.tls case = lower</pre><p>以下各节介绍了每个OTT命令行参数。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4470"></a><div class="props_rev_3"><a id="GUID-FEE40170-97EE-4B3D-96DF-1FCF4246ABE4" name="GUID-FEE40170-97EE-4B3D-96DF-1FCF4246ABE4"></a><h4 id="LNPCC-GUID-FEE40170-97EE-4B3D-96DF-1FCF4246ABE4" class="sect4"><span class="enumeration_section">19.5.2</span> OTT参数</h4>
                  <div>
                     <p>使用以下格式在OTT命令行上输入参数：</p>
                     <p><span class="italic">参数</span> = <span class="italic">值</span></p>
                     <p>其中<span class="italic">parameter</span>是文字参数字符串， <span class="italic">value</span>是有效参数设置。文字参数字符串不区分大小写。
                     </p>
                     <p>使用空格或制表符分隔命令行参数。</p>
                     <p>参数也可以出现在配置文件中，但在这种情况下，行内不允许有空格，并且每个参数必须出现在单独的行中。此外，参数<code class="codeph">CASE</code> ， <code class="codeph">HFILE</code> ， <code class="codeph">INITFUNC</code>和<code class="codeph">INITFILE</code>可以出现在<code class="codeph">INTYPE</code>文件中。
                     </p>
                  </div><a id="LNPCC4471"></a><div class="props_rev_3"><a id="GUID-75725874-9343-4420-A00C-C5D8A380186B" name="GUID-75725874-9343-4420-A00C-C5D8A380186B"></a><h5 id="LNPCC-GUID-75725874-9343-4420-A00C-C5D8A380186B" class="sect5"><span class="enumeration_section">19.5.2.1</span> USERID</h5>
                     <div>
                        <div class="section">
                           <p>USERID参数指定Oracle用户名，密码和可选数据库名称（Oracle Net数据库规范字符串）。如果省略数据库名称，则假定使用缺省数据库。该参数的语法是：</p><pre class="oac_no_warn" dir="ltr">USERID = <span class="italic">用户名</span> / <span class="italic">密码</span> [ <span class="italic">@db_name</span> ]</pre><p></p>
                           <p>如果这是第一个参数，则可以省略“USERID =”，如下所示：</p><pre class="oac_no_warn" dir="ltr">OTT <span class="italic">用户名</span> / <span class="italic">密码......</span></pre><p></p>
                           <p>USERID参数是可选的。如果省略它，OTT会自动尝试以用户CLUSTER $ <span class="italic">username</span>连接到默认数据库，其中<span class="italic">username</span>是用户的操作系统用户名。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4472"></a><div class="props_rev_3"><a id="GUID-2EEAF760-9921-4308-9417-32E1AAB618F8" name="GUID-2EEAF760-9921-4308-9417-32E1AAB618F8"></a><h5 id="LNPCC-GUID-2EEAF760-9921-4308-9417-32E1AAB618F8" class="sect5"><span class="enumeration_section">19.5.2.2</span> INTYPE</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">INTYPE</code>参数指定从中读取对象类型规范列表的文件的名称。OTT翻译列表中的每种类型。此参数的语法是</p><pre class="oac_no_warn" dir="ltr">INTYPE = <span class="italic">文件名</span></pre><p></p>
                           <p>如果USERID和<code class="codeph">INTYPE</code>是前两个参数，则可以省略“ <code class="codeph">INTYPE=</code> ”，并且省略“USERID =”。如果未指定<code class="codeph">INTYPE</code> ，则将翻译用户架构中的所有类型。
                           </p><pre class="oac_no_warn" dir="ltr">OTT <span class="italic">用户名</span> / <span class="italic">密码文件名...</span></pre><p></p>
                           <p><code class="codeph">INTYPE</code>文件可以被认为是类型声明的makefile。它列出了需要C struct声明的类型。
                           </p>
                           <p>如果命令行或<code class="codeph">INTYPE</code>文件中的文件名不包含扩展名，则将添加特定于平台的扩展名，例如“TYP”或“typ”。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="the-Object-type.html#GUID-D114064D-E05F-42DD-9DB9-EAEEE5A9619B">INTYPE文件的结构</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="LNPCC4473"></a><div class="props_rev_3"><a id="GUID-EB8AEECA-6163-434D-82E2-A700294F3DD6" name="GUID-EB8AEECA-6163-434D-82E2-A700294F3DD6"></a><h5 id="LNPCC-GUID-EB8AEECA-6163-434D-82E2-A700294F3DD6" class="sect5"><span class="enumeration_section">19.5.2.3</span> OUTTYPE</h5>
                     <div>
                        <div class="section">
                           <p>OTT将为其处理的所有对象数据类型写入类型信息的文件的名称。这包括在<code class="codeph">INTYPE</code>文件中显式命名的所有类型，并且可能包括已转换的其他类型（如果TRANSITIVE = TRUE），因为它们用于需要转换的其他类型的声明中。在将来调用OTT时，此文件可用作<code class="codeph">INTYPE</code>文件。</p><pre class="oac_no_warn" dir="ltr">OUTTYPE = <span class="italic">文件名</span></pre><p></p>
                           <p>如果<code class="codeph">INTYPE</code>和<code class="codeph">OUTTYPE</code>参数引用同一文件，则新的<code class="codeph">INTYPE</code>信息将替换<code class="codeph">INTYPE</code>文件中的旧信息。这为在更改类型，生成类型声明，编辑源代码，预编译，编译和调试的循环中重复使用相同的<code class="codeph">INTYPE</code>文件提供了一种便捷的方法。
                           </p>
                           <p>必须指定<code class="codeph">OUTTYPE</code> 。
                           </p>
                           <p>如果命令行或<code class="codeph">INTYPE</code>文件中的文件名不包含扩展名，则将添加特定于平台的扩展名，例如“TYP”或“typ”。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4474"></a><div class="props_rev_3"><a id="GUID-2578968D-3BEC-45D7-A67A-7C874F4C880D" name="GUID-2578968D-3BEC-45D7-A67A-7C874F4C880D"></a><h5 id="LNPCC-GUID-2578968D-3BEC-45D7-A67A-7C874F4C880D" class="sect5"><span class="enumeration_section">19.5.2.4</span>代码</h5>
                     <div>
                        <div class="section"><pre class="oac_no_warn" dir="ltr">CODE = C | KR_C | ANSI_C</pre><p></p>
                           <p>这是OTT输出所需的主机语言，可以指定为<code class="codeph">CODE=C</code> ， <code class="codeph">CODE=KR_C</code>或<code class="codeph">CODE=ANSI_C</code> 。 “ <code class="codeph">CODE=C</code> ”相当于“ <code class="codeph">CODE=ANSI_C</code> ”。
                           </p>
                           <p>此参数没有默认值;必须提供。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4475"></a><div class="props_rev_3"><a id="GUID-F1D10F95-0D9B-4E13-8B7C-08062F52BA7E" name="GUID-F1D10F95-0D9B-4E13-8B7C-08062F52BA7E"></a><h5 id="LNPCC-GUID-F1D10F95-0D9B-4E13-8B7C-08062F52BA7E" class="sect5"><span class="enumeration_section">19.5.2.5</span> INITFILE</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">INITFILE</code>参数指定要写入OTT生成的初始化文件的文件的名称。如果省略此参数，OTT不会生成初始化函数。
                           </p>
                           <p>对于Pro * C / C ++程序， <code class="codeph">INITFILE</code>不是必需的，因为SQLLIB运行时库执行必要的初始化。OCI程序用户必须编译和链接<code class="codeph">INITFILE</code>文件，并且必须在创建环境句柄时调用初始化函数。
                           </p>
                           <p>如果一个的文件名<code class="codeph">INITFILE</code>在命令行上或在<code class="codeph">INTYPE</code>文件不包括扩展名，一个平台特定的扩展名，如“C”或“.c”的将被添加。
                           </p><pre class="oac_no_warn" dir="ltr">INITFILE = <span class="italic">文件名</span></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4476"></a><div class="props_rev_3"><a id="GUID-ABEA2169-03BB-47AE-AC80-9F17D5964C53" name="GUID-ABEA2169-03BB-47AE-AC80-9F17D5964C53"></a><h5 id="LNPCC-GUID-ABEA2169-03BB-47AE-AC80-9F17D5964C53" class="sect5"><span class="enumeration_section">19.5.2.6</span> INITFUNC</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">INITFUNC</code>参数仅用于OCI程序。它指定OTT生成的初始化函数的名称。如果省略此参数，则初始化函数的名称<code class="codeph">INITFILE</code>的名称<code class="codeph">INITFILE</code> 。</p><pre class="oac_no_warn" dir="ltr">INITFUNC = <span class="italic">文件名</span></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4477"></a><div class="props_rev_3"><a id="GUID-5AFEC55F-6040-4BBC-80A0-1E48CD78C5E2" name="GUID-5AFEC55F-6040-4BBC-80A0-1E48CD78C5E2"></a><h5 id="LNPCC-GUID-5AFEC55F-6040-4BBC-80A0-1E48CD78C5E2" class="sect5"><span class="enumeration_section">19.5.2.7</span> HFILE</h5>
                     <div>
                        <div class="section">
                           <p>OTT为<code class="codeph">INTYPE</code>文件中提到但未在其中指定包含文件的类型声明生成的include（.h）文件的名称。除非在<code class="codeph">INTYPE</code>文件中单独指定每种类型的包含文件，否则此参数是必需的。如果必须生成<code class="codeph">INTYPE</code>文件中未提及的类型，因为其他类型需要它（如果TRANSITIVE = TRUE），并且这些其他类型在两个或多个不同的文件中声明，则也需要此参数。
                           </p>
                           <p>如果一个的文件名<code class="codeph">HFILE</code>在命令行上或在<code class="codeph">INTYPE</code>文件不包括扩展名，一个平台特定的扩展名，如“H”或“·H”将被添加。
                           </p><pre class="oac_no_warn" dir="ltr">HFILE = <span class="italic">文件名</span></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4478"></a><div class="props_rev_3"><a id="GUID-C78C0E91-B984-4F93-9396-B84EEE350438" name="GUID-C78C0E91-B984-4F93-9396-B84EEE350438"></a><h5 id="LNPCC-GUID-C78C0E91-B984-4F93-9396-B84EEE350438" class="sect5"><span class="enumeration_section">19.5.2.8</span>配置</h5>
                     <div>
                        <div class="section">
                           <p>CONFIG参数指定OTT配置文件的名称，该文件列出了常用的参数规范。还从平台相关位置的系统配置文件中读取参数规范。所有剩余的参数规范必须出现在命令行或<code class="codeph">INTYPE</code>文件中。
                           </p><pre class="oac_no_warn" dir="ltr">CONFIG = <span class="italic">文件名</span> </pre><p></p>
                           <p><span class="bold">注意</span> ：CONFIG文件中不允许使用CONFIG参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4479"></a><div class="props_rev_3"><a id="GUID-A81E2A5A-F5A5-47FB-A866-C89E1AE39D12" name="GUID-A81E2A5A-F5A5-47FB-A866-C89E1AE39D12"></a><h5 id="LNPCC-GUID-A81E2A5A-F5A5-47FB-A866-C89E1AE39D12" class="sect5"><span class="enumeration_section">19.5.2.9</span> ERRTYPE</h5>
                     <div>
                        <div class="section">
                           <p>如果提供此参数， <code class="codeph">INTYPE</code>将<code class="codeph">INTYPE</code>文件的列表以及所有信息和错误消息写入ERRTYPE文件。无论是否指定了ERRTYPE，都会将信息和错误消息发送到标准输出。
                           </p>
                           <p>从本质上讲，ERRTYPE文件是复印件<code class="codeph">INTYPE</code>添加了错误信息的文件。在大多数情况下，错误消息将包含指向导致错误的文本的指针。
                           </p>
                           <p>如果命令行或<code class="codeph">INTYPE</code>文件中的<code class="codeph">INTYPE</code>文件名不包含扩展名，则将添加特定于平台的扩展名，例如“TLS”或“tls”。
                           </p><pre class="oac_no_warn" dir="ltr">ERRTYPE = <span class="italic">文件名</span></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4480"></a><div class="props_rev_3"><a id="GUID-2910B3D2-50E0-4E3F-93B4-A20ED287CCE9" name="GUID-2910B3D2-50E0-4E3F-93B4-A20ED287CCE9"></a><h5 id="LNPCC-GUID-2910B3D2-50E0-4E3F-93B4-A20ED287CCE9" class="sect5"><span class="enumeration_section">19.5.2.10</span>案例</h5>
                     <div>
                        <div class="section">
                           <p>此参数影响OTT生成的某些C标识符的大小写。 <code class="codeph">CASE</code>的可能值是<code class="codeph">SAME</code> ， <code class="codeph">LOWER</code> ， <code class="codeph">UPPER</code>和<code class="codeph">OPPOSITE</code> 。如果<code class="codeph">CASE = SAME</code> ，则在将数据库类型和属性名称转换为C标识符时，不会更改字母大小写。如果<code class="codeph">CASE=LOWER</code> ，则所有大写字母都将转换为小写。如果<code class="codeph">CASE=UPPER</code> ，则所有小写字母都将转换为大写。如果<code class="codeph">CASE=OPPOSITE</code> ，则所有大写字母都将转换为小写字母，反之亦然。
                           </p><pre class="oac_no_warn" dir="ltr">CASE = [SAME | LOWER | UPPER | OPPOSITE]</pre><p></p>
                           <p>此参数仅影响<code class="codeph">INTYPE</code>文件中未提及的那些标识符（未明确列出的属性或类型）。在生成合法标识符之后进行大小写转换。
                           </p>
                           <div class="infoboxnote" id="GUID-2910B3D2-50E0-4E3F-93B4-A20ED287CCE9__GUID-4B6A137A-AB5C-4CF7-BBAE-44EB7751CA25">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">INTYPE</code>特别提到的类型的C结构标识符的情况与<code class="codeph">INTYPE</code>文件中的情况相同。例如，如果<code class="codeph">INTYPE</code>文件包含以下行</p>
                           </div><pre class="oac_no_warn" dir="ltr">TYPE工人</pre><p>然后OTT将生成</p><pre class="oac_no_warn" dir="ltr">struct Worker {...};</pre><p>另一方面，如果<code class="codeph">INTYPE</code>文件被写为</p><pre class="oac_no_warn" dir="ltr">类型wOrKeR</pre><p>OTT会产生</p><pre class="oac_no_warn" dir="ltr">struct wOrKeR {...};</pre><p>遵循<code class="codeph">INTYPE</code>文件的情况。
                           </p>
                           <p>如果<code class="codeph">CASE=SAME</code> ， <code class="codeph">INTYPE</code>文件中未提及的不区分大小写的SQL标识符将以大写形式显示，如果<code class="codeph">CASE=OPPOSITE</code> ， <code class="codeph">INTYPE</code>显示。如果SQL标识符在声明时未引用，则该标识符不区分大小写。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC4481"></a><div class="props_rev_3"><a id="GUID-4569FAD8-2629-46DD-BC96-86D32AF0F27C" name="GUID-4569FAD8-2629-46DD-BC96-86D32AF0F27C"></a><h5 id="LNPCC-GUID-4569FAD8-2629-46DD-BC96-86D32AF0F27C" class="sect5"><span class="enumeration_section">19.5.2.11</span> SCHEMA_NAMES</h5>
                     <div>
                        <div class="section">
                           <p>此参数提供控制，以使用<code class="codeph">OUTTYPE</code>文件中的模式名称从默认模式限定类型的数据库名称。OTT生成的<code class="codeph">OUTTYPE</code>文件包含有关OTT处理的类型的信息，包括类型名称。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="the-Object-type.html#GUID-E21D4C5F-FB6D-4573-9703-3D2B5863382E">SCHEMA_NAMES用法</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="LNPCC4482"></a><div class="props_rev_3"><a id="GUID-07AB8BBD-35A4-4BCA-B522-10BB7F9049E7" name="GUID-07AB8BBD-35A4-4BCA-B522-10BB7F9049E7"></a><h5 id="LNPCC-GUID-07AB8BBD-35A4-4BCA-B522-10BB7F9049E7" class="sect5"><span class="enumeration_section">19.5.2.12传统</span></h5>
                     <div>
                        <div class="section">
                           <p>取值为TRUE（默认值）或FALSE。指示是否要转换<code class="codeph">INTYPE</code>文件中未明确列出的类型依赖项。如果指定传递性= FALSE时，则在<span class="italic">未</span>提及类型<code class="codeph">INTYPE</code>文件不生成。即使它们被用作其他生成类型的属性类型，也是如此。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNPCC4483"></a><div class="props_rev_3"><a id="GUID-104B9584-F2A9-405A-9E29-7C945219CF46" name="GUID-104B9584-F2A9-405A-9E29-7C945219CF46"></a><h4 id="LNPCC-GUID-104B9584-F2A9-405A-9E29-7C945219CF46" class="sect4"><span class="enumeration_section">19.5.3</span>可以出现OTT参数的地方</h4>
                  <div>
                     <p>在命令行，命令行上指定的CONFIG文件或两者中提供OTT参数。<code class="codeph">INTYPE</code>文件中也允许使用某些参数。
                     </p>
                     <p>OTT的调用如下：</p>
                     <p>OTT <span class="italic">用户名/密码</span>参数</p>
                     <p>如果命令行中的一个参数是</p>
                     <p>CONFIG = <span class="italic">文件名</span></p>
                     <p>从名为<span class="italic">filename</span>的配置文件中读取其他参数。
                     </p>
                     <p>此外，还从平台相关位置的默认配置文件中读取参数。此文件必须存在，但可以为空。配置中的每一行可能包含一个参数，行上没有空格。</p>
                     <p>如果在没有任何参数的情况下执行OTT，则会显示在线参数引用。</p>
                     <p>要转换的OTT的类型在<code class="codeph">INTYPE</code>参数指定的文件中命名。参数<code class="codeph">CASE</code> ， <code class="codeph">INITFILE</code> ， <code class="codeph">INITFUNC</code>和<code class="codeph">HFILE</code>也可能出现在<code class="codeph">INTYPE</code>文件中。OTT生成的<code class="codeph">OUTTYPE</code>文件包括<code class="codeph">CASE</code>参数，如果生成了初始化文件，则包括<code class="codeph">INITFILE</code>和<code class="codeph">INITFUNC</code>参数。<code class="codeph">OUTTYPE</code>文件为每种类型单独指定<code class="codeph">HFILE</code> 。
                     </p>
                     <p>OTT命令的情况与平台有关。</p>
                  </div>
               </div><a id="LNPCC4484"></a><div class="props_rev_3"><a id="GUID-D114064D-E05F-42DD-9DB9-EAEEE5A9619B" name="GUID-D114064D-E05F-42DD-9DB9-EAEEE5A9619B"></a><h4 id="LNPCC-GUID-D114064D-E05F-42DD-9DB9-EAEEE5A9619B" class="sect4"><span class="enumeration_section">19.5.4</span> INTYPE文件的结构</h4>
                  <div>
                     <p><code class="codeph">INTYPE</code>和<code class="codeph">OUTTYPE</code>文件<a id="d101336e3308" class="indexterm-anchor"></a><a id="d101336e3310" class="indexterm-anchor"></a><a id="d101336e3312" class="indexterm-anchor"></a>列出OTT翻译的类型，并提供确定如何将类型或属性名称转换为合法C标识符所需的所有信息。这些文件包含一个或多个类型规范。这些文件还可能包含以下选项的规范：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">案件</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">HFILE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">INITFILE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">INITFUNC</code></p>
                        </li>
                     </ul>
                     <p>如果存在<code class="codeph">CASE</code> ， <code class="codeph">INITFILE</code>或<code class="codeph">INITFUNC</code>选项，则它们必须位于任何类型规范之前。如果这些选项同时出现在命令行和<code class="codeph">INTYPE</code>文件中，则使用命令行上的值。
                     </p>
                     <p>有关简单的用户定义的<code class="codeph">INTYPE</code>文件以及OTT从中生成的完整<code class="codeph">OUTTYPE</code>文件的<code class="codeph">OUTTYPE</code> ，请参阅<span class="q">“ <a href="the-Object-type.html#GUID-A9A00891-FD32-4B0A-813A-4064DF43557B">类型继承的OTT支持</a> ”</span> 。
                     </p>
                  </div><a id="LNPCC4485"></a><div class="props_rev_3"><a id="GUID-9C2727A2-8E43-4CB3-B2A2-BE676C7083AC" name="GUID-9C2727A2-8E43-4CB3-B2A2-BE676C7083AC"></a><h5 id="LNPCC-GUID-9C2727A2-8E43-4CB3-B2A2-BE676C7083AC" class="sect5"><span class="enumeration_section">19.5.4.1</span> INTYPE文件类型规范</h5>
                     <div>
                        <p><code class="codeph">INTYPE</code>中的类型规范命名要转换的对象数据类型。以下是用户创建的<code class="codeph">INTYPE</code>文件的示例：</p><pre class="oac_no_warn" dir="ltr">TYPE员工TRANSLATE SALARY $ AS薪水DEPTNO AS部门类型地址类型PURCHASE_ORDER作为p_o</pre><p>类型规范的结构如下：</p><pre class="oac_no_warn" dir="ltr">TYPE type_name [AS type_identifier] [VERSION [=] version_string] [HFILE [=] hfile_name] [TRANSLATE {member_name [AS identifier]} ...]
</pre><p><span class="italic">type_name</span>的语法是：</p><pre class="oac_no_warn" dir="ltr">[模式名。] TYPE_NAME</pre><p>其中， <span class="italic">schema_name</span>是拥有给定对象数据类型的模式的名称， <span class="italic">type_name</span>是该类型的名称。默认架构是运行OTT的用户的架构。默认数据库是本地数据库。
                        </p>
                        <p>类型规范的组件是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic">type name</span>是对象数据类型的名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">type identifier</span>是用于表示类型的C标识符。如果省略，将使用默认名称映射算法。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">version string</span>是上次调用OTT生成代码时使用的类型的版本字符串。版本字符串由OTT生成并写入<code class="codeph">OUTTYPE</code>文件，稍后可在稍后执行OTT时用作<code class="codeph">INTYPE</code>文件。版本字符串不会影响OTT的操作，但最终将用于选择应在正在运行的程序中使用哪个版本的对象数据类型。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">hfile name</span>是头文件的名称，其中出现或将出现相应结构或类的声明。如果省略<span class="italic">hfile名称</span> ，则在生成声明时将使用命令行<code class="codeph">HFILE</code>参数指定的文件。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">成员名称</span>是要转换为以下<span class="italic">标识符</span>的属性（数据成员）的名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">identifier</span>是用于表示用户程序中的属性的C标识符。您可以通过这种方式为任意数量的属性指定标识符。默认名称映射算法将用于未提及的属性。
                              </p>
                           </li>
                        </ul>
                        <p>可能需要转换对象数据类型，原因有两个：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>它出现在<code class="codeph">INTYPE</code>文件中。
                              </p>
                           </li>
                           <li>
                              <p>需要声明另一个必须翻译的类型，并且TRANSITIVE = TRUE。</p>
                           </li>
                        </ul>
                        <p>如果在一个文件中声明的类型需要未明确提及的类型，则所需类型的转换将写入与需要它的显式声明类型相同的文件。</p>
                        <p>如果在两个或多个不同文件中声明的类型需要未明确提及的类型，则将所需类型的转换写入全局<code class="codeph">HFILE</code>文件。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="the-Object-type.html#GUID-825D5648-2443-490D-90F0-C5748F915A29">默认名称映射</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="LNPCC4486"></a><div class="props_rev_3"><a id="GUID-585A7EBC-989C-4A19-8884-9CFCB303D04A" name="GUID-585A7EBC-989C-4A19-8884-9CFCB303D04A"></a><h4 id="LNPCC-GUID-585A7EBC-989C-4A19-8884-9CFCB303D04A" class="sect4"><span class="enumeration_section">19.5.5</span>嵌套#include文件生成</h4>
                  <div>
                     <p>OTT <code class="codeph">#includes</code>生成的每个<code class="codeph">HFILE</code>都<code class="codeph">HFILE</code>其他必要的文件和<code class="codeph">#defines</code> <code class="codeph"> </code>从文件名构造的符号，可用于确定是否已包含<code class="codeph">HFILE</code> 。例如，考虑具有以下类型的数据库：</p><pre class="oac_no_warn" dir="ltr">create type px1 AS OBJECT（col1 number，col2 integer）;创建类型px2 AS OBJECT（col1 px1）;创建类型px3 AS OBJECT（col1 px1）;</pre><p><code class="codeph">INTYPE</code>文件包含的位置：</p><pre class="oac_no_warn" dir="ltr">CASE =低级类型pxl hfile tott95a.h类型px3 hfile tott95b.h</pre><p>如果我们调用OTT</p><pre class="oac_no_warn" dir="ltr">ott scott / tiger tott95i.typ outtype = tott95o.typ code = c</pre><p>然后它将生成以下两个头文件。</p>
                     <p>文件tott95b.h是：</p><pre class="oac_no_warn" dir="ltr">#ifndef TOTT95B_ORACLE #define TOTT95B_ORACLE #ifndef OCI_ORACLE #include &lt;oci.h&gt; #endif #ifndef TOTT95A_ORACLE #include“tott95a.h”#endif typedef OCIRef px3_ref; struct px3 {struct px1 col1; }; typedef struct px3 px3; struct px3_ind {OCIInd _atomic; struct px1_ind col1}; typedef struct px3_ind px3_ind; ＃万一</pre><p>文件tott95a.h是：</p><pre class="oac_no_warn" dir="ltr">#ifndef TOTT95A_ORACLE #define TOTT95A_ORACLE #ifndef OCI_ORACLE #include &lt;oci.h&gt; #endif typedef OCIRef px1_ref; struct px1 {OCINumber col1; OCINumber col2; } typedef struct px1 px1; struct px1_ind {OCIInd _atomic; OCIInd col1; OCIInd col2; } typedef struct px1_ind px1_ind; ＃万一</pre><p>在此文件中，首先定义符号TOTT95B_ORACLE，以便程序员可以有条件地包含<code class="codeph">tott95b.h</code>而不必担心是否<span class="italic"> </span> <code class="codeph">tott95b.h</code>依赖于使用以下构造的include文件：</p><pre class="oac_no_warn" dir="ltr">#ifndef TOTT95B_ORACLE #include“tott95b.h”#endif</pre><p>使用这种技术，您可以在某个文件中包含“tott95b.h”，比如说“foo.h”，而不必知道“foo.h”中包含的其他文件是否也包含“tott95b.h”。</p>
                     <p>在定义符号TOTT95B_ORACLE之后，文件<code class="codeph">oci.h</code>是<code class="codeph">#includ</code> ed。OTT生成的每个<code class="codeph">HFILE</code>包含<code class="codeph">oci.h</code> ，它包含Pro * C / C ++或OCI程序员认为有用的类型和函数声明。这是OTT在<code class="codeph">#include</code>使用尖括号的唯一情况。
                     </p>
                     <p>接下来，包含文件<code class="codeph">tott95a.h</code> ，因为它包含<code class="codeph">tott95b.h</code>所需的“struct px1”声明。当<code class="codeph">INTYPE</code>文件请求将类型声明写入多个文件时，OTT将确定每个<code class="codeph">HFILE</code>必须包含哪些其他文件，并将生成必要的<code class="codeph">#includes</code> 。
                     </p>
                     <p>请注意，OTT在此<code class="codeph">#include</code>使用引号。当编译包含<code class="codeph">tott95b.h</code>的程序时，搜索<code class="codeph">tott95a.h</code>从找到源程序的<code class="codeph">tott95a.h</code>开始，然后将遵循实现定义的搜索规则。如果无法以这种方式找到<code class="codeph">tott95a.h</code> ，则应在<code class="codeph">INTYPE</code>文件中使用完整的文件名（例如，以/开头的UNIX绝对路径名）来指定<code class="codeph">tott95a.h</code>的位置。
                     </p>
                  </div>
               </div><a id="LNPCC4488"></a><a id="LNPCC4487"></a><div class="props_rev_3"><a id="GUID-E21D4C5F-FB6D-4573-9703-3D2B5863382E" name="GUID-E21D4C5F-FB6D-4573-9703-3D2B5863382E"></a><h4 id="LNPCC-GUID-E21D4C5F-FB6D-4573-9703-3D2B5863382E" class="sect4"><span class="enumeration_section">19.5.6</span> SCHEMA_NAMES用法</h4>
                  <div>
                     <p>此参数会影响OTT所连接的默认架构中的类型名称是否使用<code class="codeph">OUTTYPE</code>文件中的架构名称进行<code class="codeph">OUTTYPE</code> 。
                     </p>
                     <p>来自其他模式的类型的名称，默认模式始终使用<code class="codeph">OUTTYPE</code>文件中的模式名称进行<code class="codeph">OUTTYPE</code> 。
                     </p>
                     <p>模式名称或其缺席确定在程序执行期间在哪个模式中找到类型。</p>
                     <p>有三种设置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SCHEMA_NAMES = ALWAYS（默认）</p>
                           <p><code class="codeph">OUTTYPE</code>文件中的所有类型名称都使用模式名称限定。
                           </p>
                        </li>
                        <li>
                           <p>SCHEMA_NAMES = IF_NEEDED</p>
                           <p><code class="codeph">OUTTYPE</code>文件中属于默认架构的类型名称不使用架构名称限定。与往常一样，属于其他模式的类型名称使用模式名称限定。
                           </p>
                        </li>
                        <li>
                           <p>SCHEMA_NAMES = FROM_INTYPE</p>
                           <p>在提到A型<code class="codeph">INTYPE</code>文件在合格与架构名称<code class="codeph">OUTTYPE</code>文件，当且仅当，它与在模式名修饰<code class="codeph">INTYPE</code>文件。默认模式中的类型在<code class="codeph">INTYPE</code>文件中未提及但由于类型依赖性而必须生成的类型仅在OTT遇到的依赖于它的第一个类型使用模式名称编写时才使用模式名称编写。但是，不在OTT所连接的默认架构中的类型始终使用显式架构名称编写。
                           </p>
                        </li>
                     </ul>
                     <p>OTT生成的<code class="codeph">OUTTYPE</code>文件是Pro * C / C ++ <code class="codeph">INTYPE</code>文件。此文件将数据库类型名称与C结构名称匹配。在运行时使用此信息以确保在结构中选择了正确的数据库类型。如果在<code class="codeph">OUTTYPE</code>文件（Pro * C / C ++ <code class="codeph">INTYPE</code>文件）中显示带有模式名称的类型，则在程序执行期间将在命名模式中找到该类型。如果类型显示没有模式名称，则类型将在程序连接的默认模式中找到，这可能与使用的默认模式OTT不同。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E21D4C5F-FB6D-4573-9703-3D2B5863382E__GUID-9F5E42F1-1CD5-445C-BCB7-19E44C761B1C">一个例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果<code class="codeph">SCHEMA_NAMES</code>设置为<code class="codeph">FROM_INTYPE</code> ，则<code class="codeph">INTYPE</code>文件显示为：</p><pre class="oac_no_warn" dir="ltr">TYPE Person TYPE乔。部门类型山姆。公司</pre><p>那么使用OTT生成的结构的Pro * C / C ++应用程序将使用<span class="italic">sam类型<span class="italic">。公司，乔。部门和人。没有模式的名称的人</span>指的是在该申请被连接架构中的人类型。
                        </p>
                        <p>如果OTT和应用程序都连接到schema joe，则应用程序将使用相同的类型（joe。OTT使用的人。如果OTT连接到架构<span class="italic">joe</span>但应用程序连接到架构mary，则应用程序将使用类型mary。人。仅当在schema joe和schema mary中执行了相同的“CREATE TYPE Person”语句时，此行为才适用。
                        </p>
                        <p>另一方面，应用程序将使用类型joe。无论应用程序连接到哪个架构，都要部署。如果这是您想要的行为，请确保在<code class="codeph">INTYPE</code>文件中包含带有类型名称的模式名称。
                        </p>
                        <p>在某些情况下，OTT会转换用户未明确命名的类型。例如，请考虑以下SQL声明：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE地址AS OBJECT（街道VARCHAR2（40），城市VARCHAR（30），州CHAR（2），zip_code CHAR（10））; CREATE TYPE Person AS OBJECT（名称CHAR（20），年龄NUMBER，地址ADDRESS）;</pre><p>现在假设OTT连接到schema joe，指定了<code class="codeph">SCHEMA_NAMES=FROM_INTYPE</code> ，并且用户的<code class="codeph">INTYPE</code>文件包含</p><pre class="oac_no_warn" dir="ltr">TYPE Person或TYPE joe。人</pre><p>但是不要提及乔的类型。Address，用作类型为<span class="italic">joe的嵌套对象类型<span class="italic">。人</span>如果“TYPE乔。人“出现在<code class="codeph">INTYPE</code>文件中”，TYPE乔。人“和”TYPE乔。地址“将出现在<code class="codeph">OUTTYPE</code>文件中。如果<code class="codeph">INTYPE</code>文件中出现“Type Person”，则“TYPE Person”和“TYPE Address”将出现在<code class="codeph">OUTTYPE</code>文件中。
                        </p>
                        <p>如果是<span class="italic">乔。Addres</span>的类型嵌入了由OTT翻译的几种类型，但是在<code class="codeph">INTYPE</code>文件中没有明确提到，是否使用模式名称的决定是在OTT第一次遇到嵌入的<span class="italic">joe时做出的<span class="italic">。地址</span>类型。如果由于某种原因，用户想要键入<span class="italic">joe。要具有模式名称但不希望类型为<span class="italic">Person的</span> 地址</span> ，必须显式请求</p><pre class="oac_no_warn" dir="ltr">TYPE乔。地址</pre><p>在<code class="codeph">INTYPE</code>文件中。</p>
                        <p>在通常情况下，在单个模式中声明每个类型，最安全的是使用<code class="codeph">INTYPE</code>文件中的模式名称限定所有类型名称。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4489"></a><div class="props_rev_3"><a id="GUID-825D5648-2443-490D-90F0-C5748F915A29" name="GUID-825D5648-2443-490D-90F0-C5748F915A29"></a><h4 id="LNPCC-GUID-825D5648-2443-490D-90F0-C5748F915A29" class="sect4"><span class="enumeration_section">19.5.7</span>默认名称映射</h4>
                  <div>
                     <p>当OTT为对象类型或属性创建C标识符名称时，它会将名称从数据库字符集转换为合法的C标识符。首先，名称从数据库字符集转换为OTT使用的字符集。接下来，如果在<code class="codeph">INTYPE</code>文件中提供了结果名称的翻译，则使用该翻译。否则，OTT将字符逐字符转换为编译器字符集，并应用<code class="codeph">CASE</code>选项。以下更详细地描述了这一点。
                     </p>
                     <p>当OTT读取数据库实体的名称时，该名称将自动从数据库字符集转换为OTT使用的字符集。为了使OTT成功读取数据库实体的名称，必须在OTT字符集中找到名称的所有字符，尽管字符在两个字符集中可能具有不同的编码。</p>
                     <p>保证OTT使用的字符集包含所有必需字符的最简单方法是使其与数据库字符集相同。但请注意，OTT字符集必须是编译器字符集的超集。也就是说，如果编译器字符集是7位ASCII，则OTT字符集必须包含7位ASCII作为子集，如果编译器字符集是7位EBCDIC，则OTT字符集必须包含7位EBCDIC作为一个子集。用户通过设置NLS_LANG环境变量或某些其他特定于平台的机制来指定OTT使用的字符集。</p>
                     <p>一旦OTT读取了数据库实体的名称，它就会将名称从OTT使用的字符集转换为编译器的字符集。如果名称的翻译出现在<code class="codeph">INTYPE</code>文件中，则OTT使用该翻译。
                     </p>
                     <p>否则，OTT会尝试将名称翻译如下：</p>
                     <ol>
                        <li>
                           <p>首先，如果OTT字符集是多字节字符集，则名称中具有单字节等效字符的所有多字节字符都将转换为那些单字节等效字符。</p>
                        </li>
                        <li>
                           <p>接下来，将名称从OTT字符集转换为编译器字符集。编译器字符集是单字节字符集，例如US7ASCII。</p>
                        </li>
                        <li>
                           <p>最后，根据有效的<code class="codeph">CASE</code>选项设置字母<code class="codeph">CASE</code> ，并且任何在C标识符中不合法或在编译器字符集中没有翻译的字符都将被下划线替换。如果至少有一个字符被下划线替换，OTT会发出警告消息。如果名称中的所有字符都被下划线替换，OTT会给出错误消息。
                           </p>
                        </li>
                     </ol>
                     <p>逐个字符的名称转换不会改变编译器字符集中出现的下划线，数字或单字节字母，因此不会更改合法的C标识符。</p>
                     <p>例如，名称翻译可以将重音单字节字符（例如带有变音符号的“o”或带有重音符号的“a”翻译为“o”或“a”），并且可以将多字节字母翻译成其单字节等效字符。如果名称包含缺少单字节等效字符的多字节字符，则名称转换通常会失败。在这种情况下，用户必须在<code class="codeph">INTYPE</code>文件中指定名称翻译。
                     </p>
                     <p>OTT不会检测由两个或多个数据库标识符映射到同一C名称引起的命名冲突，也不会检测数据库标识符映射到C关键字的命名问题。</p>
                  </div>
               </div><a id="LNPCC4490"></a><div class="props_rev_3"><a id="GUID-C1EB0F45-A82F-4555-9662-B5A1F821E212" name="GUID-C1EB0F45-A82F-4555-9662-B5A1F821E212"></a><h4 id="LNPCC-GUID-C1EB0F45-A82F-4555-9662-B5A1F821E212" class="sect4"><span class="enumeration_section">19.5.8</span>限制</h4>
                  <div>
                     <p>以下限制会影响OTT的使用。</p>
                  </div><a id="LNPCC4491"></a><div class="props_rev_3"><a id="GUID-4274113F-7216-4B8F-97C5-9031B273F9B9" name="GUID-4274113F-7216-4B8F-97C5-9031B273F9B9"></a><h5 id="LNPCC-GUID-4274113F-7216-4B8F-97C5-9031B273F9B9" class="sect5"><span class="enumeration_section">19.5.8.1</span>文件名比较</h5>
                     <div>
                        <p>目前，OTT通过比较用户在命令行或<code class="codeph">INTYPE</code>文件中提供的文件名来确定两个文件是否相同。但是当OTT需要知道两个文件名是否引用同一文件时，可能会出现一个潜在的问题。例如，如果OTT生成的文件foo.h需要写入foo1.h的类型声明，以及写入/private/smith/foo1.h的另一个类型声明，如果两个文件相同，OTT应生成一个<code class="codeph">#include</code> ，如果文件不同，则有两个<code class="codeph">#includes</code> 。但实际上，它得出的结论是两个文件不同，并生成两个<code class="codeph">#includes</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">#ifndef FOO1_ORACLE #include“foo1.h”#endif #ifndef FOO1_ORACLE #include“/private/smith/foo1.h”#endif</pre><p>如果foo1.h和/private/smith/foo1.h是不同的文件，则只包含第一个文件。如果foo1.h和/private/smith/foo1.h是同一个文件，则会写入冗余的<code class="codeph">#include</code> 。
                        </p>
                        <p>因此，如果在命令行或<code class="codeph">INTYPE</code>文件中多次提到文件，则每次提及该文件时应使用完全相同的文件名。
                        </p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04987.about-Objects.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>对象</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="about-LOBs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="about-Collections.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-LOBs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="about-Collections.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">应用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">对象</li>
            </ol>
            <a id="GUID-0C106FBC-C023-4B86-817A-1867A69388F7" name="GUID-0C106FBC-C023-4B86-817A-1867A69388F7"></a><a id="LNPCC017"></a>
            
            <h2 id="LNPCC-GUID-0C106FBC-C023-4B86-817A-1867A69388F7" class="sect2"><span class="enumeration_chapter">17个</span>对象</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了Pro * C / C ++中对用户定义对象的支持。本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="about-Objects.html#GUID-2B476A53-DFA4-4FAB-BC30-2B45605C171E">对象简介</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-0EAA49C2-4F64-477C-A907-3EEC74F37CBE">关于在Pro * C / C ++中使用对象类型</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-0C7ABD70-48A6-4769-B742-1D098CD372CC">对象缓存</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-53163CC4-E17A-43E8-843B-02CBFDEBF449">关联接口</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7">导航界面</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-C0317114-582E-4D77-AC2E-C18E8DE6D23E">转换对象属性和C类型</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-23A4843B-0673-4698-9358-9A714507D4DD">对象选项设置/获取</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-DFA7F6BD-766A-440C-A5EC-EF97466F4EFB">对象的新预编译器选项</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-34AFC95A-2A0F-4925-86F6-865E204CCBB4">Pro * C / C ++中的对象示例</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-47435013-11A1-4977-AE0E-8A51F66D29C3">类型继承的示例代码</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-D043EC3F-5DE7-4D09-B858-E9617327D6CD">导航访问的示例代码</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-991F2F64-910B-46AD-AF38-BCAB90EACA88">关于使用C结构</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-FFF48576-9D39-48D2-A199-D5E5E6B447E5">关于使用REF</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-35C1DD18-7C3F-437E-A9DF-B9B2CE76DF2A">关于使用OCIDate_ OCIString_ OCINumber_和OCIRaw</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75">总结Pro * C / C ++中的新数据库类型</a></p>
                  </li>
                  <li>
                     <p><a href="about-Objects.html#GUID-4D7E09CE-34ED-4516-A129-83A7BCD82443">在动态SQL中使用Oracle数据类型的限制</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC4315"></a><div class="props_rev_3"><a id="GUID-2B476A53-DFA4-4FAB-BC30-2B45605C171E" name="GUID-2B476A53-DFA4-4FAB-BC30-2B45605C171E"></a><h3 id="LNPCC-GUID-2B476A53-DFA4-4FAB-BC30-2B45605C171E" class="sect3"><span class="enumeration_section">17.1</span>对象简介</h3>
               <div>
                  <p>除了Oracle8以来支持的Oracle关系数据类型，Pro * C / C ++还支持用户定义的数据类型，它们是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对象类型</p>
                     </li>
                     <li>
                        <p>对象类型的REF</p>
                     </li>
                     <li>
                        <p>集合对象类型</p>
                     </li>
                     <li>
                        <p>输入继承</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="about-Collections.html#GUID-BCAD71D2-D01D-40C8-8BAD-08902363ECDA">集合</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC4316"></a><div class="props_rev_3"><a id="GUID-E0D5C44C-53DE-4E71-808F-A22B9A8E2F65" name="GUID-E0D5C44C-53DE-4E71-808F-A22B9A8E2F65"></a><h4 id="LNPCC-GUID-E0D5C44C-53DE-4E71-808F-A22B9A8E2F65" class="sect4"><span class="enumeration_section">17.1.1</span>对象类型</h4>
                  <div>
                     <p>对象类型是用户定义的数据类型，它具有<span class="italic">属性</span> ，形成由CREATE TYPE SQL语句定义的数据类型的变量，以及作为对象类型的允许行为集的<span class="italic">方法</span> ，函数和过程。我们在本指南中仅考虑具有属性的对象类型。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">- 定义对象类型......CREATE TYPE employee_type AS OBJECT（名称VARCHAR2（20），id NUMBER，MEMBER FUNCTION get_id（name VARCHAR2）RETURN NUMBER）; /  -   - 创建一个对象表...employee_type的CREATE TABLE员工; - 使用构造函数实例化对象...INSERT INTO员工VALUES（employee_type（'JONES'，10042））;</pre><p>LONG，LONG RAW，NCLOB，NCHAR和NCHAR变<span class="italic">不允许</span>作为对象的属性数据类型。
                     </p>
                  </div>
               </div><a id="LNPCC4317"></a><div class="props_rev_3"><a id="GUID-21C5A427-EC60-422F-B565-7FAD05648A38" name="GUID-21C5A427-EC60-422F-B565-7FAD05648A38"></a><h4 id="LNPCC-GUID-21C5A427-EC60-422F-B565-7FAD05648A38" class="sect4"><span class="enumeration_section">17.1.2</span>对象类型的REF</h4>
                  <div>
                     <p>REF（“reference”的缩写）是对存储在数据库表中的对象的引用，而不是对象本身。REF类型可以出现在关系列中，也可以作为对象类型的数据类型。例如，表<span class="italic">employee_tab</span>可以有一个列为对象类型<span class="italic">employee_t</span>本身的REF：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE employee_t AS OBJECT（empname CHAR（20），empno INTEGER，manager REF employee_t）; / CREATE TABLE employee_tab OF employee_t;</pre></div>
               </div><a id="LNPCC4318"></a><div class="props_rev_3"><a id="GUID-395C0A99-5BD6-432B-80A7-0FD8CAC174B3" name="GUID-395C0A99-5BD6-432B-80A7-0FD8CAC174B3"></a><h4 id="LNPCC-GUID-395C0A99-5BD6-432B-80A7-0FD8CAC174B3" class="sect4"><span class="enumeration_section">17.1.3</span>类型继承</h4>
                  <div>
                     <p><a id="d93390e275" class="indexterm-anchor"></a> Oracle支持对象的类型继承。这样可以在类似对象类型之间共享属性和方法，以及扩展对象类型的特征。
                     </p>
                     <p>Pro * C / C ++支持使用以下SQL运算符的对象类型的类型继承：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>IS <a id="d93390e284" class="indexterm-anchor"></a> OF <span class="italic">型</span></p>
                        </li>
                        <li>
                           <p>TRE AT</p>
                        </li>
                     </ul>
                     <p>IS OF <span class="italic">类型</span>运算符用于测试对象实例的特定<span class="italic">类型</span>信息。
                     </p>
                     <p>以下代码示例返回对所有<code class="codeph">p</code>对象的引用，其中<code class="codeph">p</code>的类型为<code class="codeph">Employee_t</code>和<code class="codeph">Student_t</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">选择<a id="d93390e323" class="indexterm-anchor"></a> REF（p）FROM person_tab p WHERE VALUE（p）IS OF（Employee_t，Student_t）;</pre><p>以下代码示例返回其中<code class="codeph">p</code>仅为<code class="codeph">Student_t</code>类型的所有行。
                     </p><pre class="oac_no_warn" dir="ltr">选择<a id="d93390e340" class="indexterm-anchor"></a> VALUE（p）FROM person_tab p WHERE VALUE（p）IS OF（仅限Student_t）;</pre><p>TREAT运算符用于修改表达式的声明类型。</p>
                     <p>以下代码示例返回<code class="codeph">p</code>为<code class="codeph">Student_t</code>类型的所有行。对于不属于<code class="codeph">Student_t</code>类型的<code class="codeph">p</code>所有实例，返回null。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT TR EAT（VALUE（p）AS Student_t）FROM person_tab p;</pre><p>以下代码示例返回对<code class="codeph">Student_t</code>类型的所有<code class="codeph">p</code>对象的<code class="codeph">Student_t</code>以及子类型<code class="codeph">Student_t</code>任何对象的<code class="codeph">PartTimeStudent_t</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">选择治疗（REP <a id="d93390e386" class="indexterm-anchor"></a> （p）AS REF Student_t）FROM person_tab p WHERE VALUE（p）IS OF（Student_t）;</pre></div>
               </div>
            </div><a id="LNPCC4319"></a><div class="props_rev_3"><a id="GUID-0EAA49C2-4F64-477C-A907-3EEC74F37CBE" name="GUID-0EAA49C2-4F64-477C-A907-3EEC74F37CBE"></a><h3 id="LNPCC-GUID-0EAA49C2-4F64-477C-A907-3EEC74F37CBE" class="sect3"><span class="enumeration_section">17.2</span>关于在Pro * C / C ++中使用对象类型</h3>
               <div>
                  <p>在Pro * C / C ++应用程序中声明由OTT（对象类型转换器）生成的C结构指针作为主机和指示符变量。对于对象类型，指示符变量的使用是可选的，但Oracle建议使用它。</p>
                  <p>将Pro * C / C ++程序中的对象类型表示为使用OTT从数据库对象生成的C结构。你必须</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在Pro * C / C ++程序中包含OTT生成的头文件，其中包含结构定义和关联的NULL指示符结构，以及REF到对象类型的C类型。</p>
                     </li>
                     <li>
                        <p>输入OTT生成的typefile作为INTYPE Pro * C / C ++命令行选项。此类型文件对OTT生成的C结构与数据库中的关联对象类型之间的对应关系进行编码，以及模式和类型版本信息。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="the-Object-type.html#GUID-502C3781-C88E-46B8-9EB2-9A93E0B4E7AE">对象类型转换器</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC4320"></a><div class="props_rev_3"><a id="GUID-8FD4904E-6E8B-4CE0-8720-154D6E849C8D" name="GUID-8FD4904E-6E8B-4CE0-8720-154D6E849C8D"></a><h4 id="LNPCC-GUID-8FD4904E-6E8B-4CE0-8720-154D6E849C8D" class="sect4"><span class="enumeration_section">17.2.1</span> NULL指示符</h4>
                  <div>
                     <p>表示对象类型的NULL状态的C结构由对象类型转换器生成。必须在声明对象类型的指示符变量时使用这些生成的结构类型。</p>
                     <p>其他Oracle类型不需要对NULL指示符进行特殊处理。</p>
                     <p>由于对象类型具有内部结构，因此对象类型的NULL指示符也具有内部结构。非集合对象类型的NULL指示符结构为整个对象类型提供原子（单个）NULL状态，以及每个属性的NULL状态。OTT生成C结构以表示对象类型的NULL指示符结构。NULL指示符结构的名称是<span class="italic">Object_typename</span> _ind，其中<span class="italic">Object_typename</span>是数据库中用户定义类型的C结构的名称。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-18395E0D-263A-49BF-9DAB-DA0C8775B9FC">数据类型和主机变量</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="LNPCC4321"></a><div class="props_rev_3"><a id="GUID-0C7ABD70-48A6-4769-B742-1D098CD372CC" name="GUID-0C7ABD70-48A6-4769-B742-1D098CD372CC"></a><h3 id="LNPCC-GUID-0C7ABD70-48A6-4769-B742-1D098CD372CC" class="sect3"><span class="enumeration_section">17.3</span>对象缓存</h3>
               <div>
                  <p>对象缓存是客户端上的一个内存区域，它是为程序在与数据库对象连接时使用而分配的。有两个用于处理对象的接口。关联接口操纵对象的“瞬态”副本，导航接口操纵“持久”对象。</p>
               </div><a id="LNPCC4322"></a><div class="props_rev_3"><a id="GUID-38DF26FF-742D-4D0E-A06F-5CC0E54FB2C7" name="GUID-38DF26FF-742D-4D0E-A06F-5CC0E54FB2C7"></a><h4 id="LNPCC-GUID-38DF26FF-742D-4D0E-A06F-5CC0E54FB2C7" class="sect4"><span class="enumeration_section">17.3.1</span>持久性与对象的瞬态副本</h4>
                  <div>
                     <p>使用Pro * C / C ++中的EXEC SQL ALLOCATE语句在缓存中分配的对象是Oracle数据库中持久对象的<span class="italic">临时副本</span> 。因此，您可以在获取这些副本后在缓存中更新这些副本，但为了使这些更改在数据库中保持不变，您必须使用显式SQL命令。这种“瞬态复制”或“基于值”的对象缓存模型是关系模型的扩展，其中关系表的标量列可以被提取到主变量中，在适当的位置更新，并且更新传递给服务器。
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC4323"></a><div class="props_rev_3"><a id="GUID-53163CC4-E17A-43E8-843B-02CBFDEBF449" name="GUID-53163CC4-E17A-43E8-843B-02CBFDEBF449"></a><h3 id="LNPCC-GUID-53163CC4-E17A-43E8-843B-02CBFDEBF449" class="sect3"><span class="enumeration_section">17.4</span>关联接口</h3>
               <div>
                  <p>关联接口操纵对象的瞬态副本。使用EXEC SQL ALLOCATE语句在对象缓存中分配内存。</p>
                  <p>为每个SQLLIB运行时上下文创建一个对象缓存。</p>
                  <p>对象由EXEC SQL SELECT或EXEC SQL FETCH语句检索。这些语句设置主机变量属性的值。如果提供了NULL指示符，则也会设置它。</p>
                  <p>使用EXEC SQL INSERT，EXEC SQL UPDATE和EXEC SQL DELETE语句插入，更新或删除对象。必须在执行语句之前设置对象主机变量的属性。</p>
                  <p>事务语句EXEC SQL COMMIT和EXEC SQL ROLLBACK用于在服务器上永久写入更改或取消更改。</p>
                  <p>您可以使用EXEC SQL FREE语句在对象的高速缓存中显式释放内存。当连接终止时，Oracle会隐式释放其分配的内存。</p>
               </div><a id="LNPCC4324"></a><div class="props_rev_3"><a id="GUID-76AA9759-E5E1-46F0-81F3-A34D17975D98" name="GUID-76AA9759-E5E1-46F0-81F3-A34D17975D98"></a><h4 id="LNPCC-GUID-76AA9759-E5E1-46F0-81F3-A34D17975D98" class="sect4"><span class="enumeration_section">17.4.1</span>何时使用关联接口</h4>
                  <div>
                     <p>在这些情况下使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>访问表的显式连接并不昂贵的大型对象集合。</p>
                        </li>
                        <li>
                           <p>访问不可引用的对象;他们没有对象身份。例如，关系列中的对象类型。</p>
                        </li>
                        <li>
                           <p>将UPDATE或INSERT等操作应用于一组对象时。例如，为部门中的所有员工添加1000美元的奖金。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC4325"></a><div class="props_rev_3"><a id="GUID-8B78E759-CFA9-45BB-8854-51F5D192CBE8" name="GUID-8B78E759-CFA9-45BB-8854-51F5D192CBE8"></a><h4 id="LNPCC-GUID-8B78E759-CFA9-45BB-8854-51F5D192CBE8" class="sect4"><span class="enumeration_section">17.4.2</span>分配</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用此语句在对象缓存中分配空间。语法是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] ALLOCATE： <span class="italic">host_ptr</span> [[INDICATOR]： <span class="italic">ind_ptr</span> ];</pre><p>输入的变量是：</p>
                        <p>数据库（IN）</p>
                        <p>包含数据库连接名称的以零结尾的字符串，如前面通过语句建立的：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CONNECT： <span class="italic">user</span> [AT [：] <span class="italic">database</span> ];</pre><p>如果省略AT子句AT，或者<span class="italic">数据库</span>是空字符串，则假定使用默认数据库连接。
                        </p>
                        <p>host_ptr（IN）</p>
                        <p>指向OTT为对象类型，集合对象类型或REF生成的主机结构的指针，或指向新C数据类型之一的指针：OCIDate，OCINumber，OCIRaw或OCIString。</p>
                        <p>ind_ptr（IN）</p>
                        <p>指示符变量<span class="italic">ind_ptr</span>是可选的，关键字INDICATOR也是可选的。只有指向结构类型指示符的指针才能在ALLOCATE和FREE语句中使用。
                        </p>
                        <p><span class="italic">host_ptr</span>和<span class="italic">ind_ptr</span>可以是主机阵列。
                        </p>
                        <p>分配的持续时间是会话。即使未通过FREE语句明确释放，也会在会话（连接）终止时释放所有实例。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-1B381F58-96EA-420F-8BF8-0047E734268E">ALLOCATE（可执行的嵌入式SQL扩展）</a></li>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-D193A6EF-5B8D-491F-8BA1-215AA26B753B">免费（可执行的嵌入式SQL扩展）</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4326"></a><div class="props_rev_3"><a id="GUID-CB343FC4-35EF-44E5-B50D-65CA9051CCD0" name="GUID-CB343FC4-35EF-44E5-B50D-65CA9051CCD0"></a><h4 id="LNPCC-GUID-CB343FC4-35EF-44E5-B50D-65CA9051CCD0" class="sect4"><span class="enumeration_section">17.4.3</span>免费</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [OBJECT] FREE： <span class="italic">host_ptr</span> [[INDICATOR]： <span class="italic">ind_ptr</span> ];</pre><p>使用FREE语句为放置在对象缓存中的对象取消分配空间。使用的变量与ALLOCATE语句中的变量相同。</p>
                        <div class="infoboxnote" id="GUID-CB343FC4-35EF-44E5-B50D-65CA9051CCD0__GUID-281B0EB0-DAC0-41CA-B4BF-055D5A93E324">
                           <p class="notep1">注意：</p>
                           <p>主机和指示符变量的指针<span class="italic">未</span>设置为null。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4327"></a><div class="props_rev_3"><a id="GUID-529A59B8-D675-4782-BC5F-A9943599D2D2" name="GUID-529A59B8-D675-4782-BC5F-A9943599D2D2"></a><h4 id="LNPCC-GUID-529A59B8-D675-4782-BC5F-A9943599D2D2" class="sect4"><span class="enumeration_section">17.4.4</span> CACHE FREE ALL</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">数据库</span> ] [OBJECT] CACHE FREE ALL;</pre><p>使用前面的语句释放指定数据库连接的所有对象高速缓存内存。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-EEDED3A8-63EA-4A25-920F-1B1882CE26AF">CACHE FREE ALL（可执行嵌入式SQL扩展）</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4329"></a><a id="LNPCC4328"></a><div class="props_rev_3"><a id="GUID-7BB3E466-ACE7-4143-BAAC-CAFDD3F9DEB4" name="GUID-7BB3E466-ACE7-4143-BAAC-CAFDD3F9DEB4"></a><h4 id="LNPCC-GUID-7BB3E466-ACE7-4143-BAAC-CAFDD3F9DEB4" class="sect4"><span class="enumeration_section">17.4.5</span>使用关联接口访问对象</h4>
                  <div>
                     <p>使用SQL访问对象时，Pro * C / C ++应用程序操纵持久对象的临时副本。这是关系访问接口的直接扩展，它使用SELECT，UPDATE和DELETE语句。</p>
                     <p>在<a href="about-Objects.html#GUID-7BB3E466-ACE7-4143-BAAC-CAFDD3F9DEB4__I449766">图17-1中</a> ，使用ALLOCATE语句为缓存中的内存副本分配内存。分配的对象不包含数据，但它具有OTT生成的结构的形式。</p><pre class="oac_no_warn" dir="ltr">person * per_p; ...EXEC SQL ALLOCATE：per_p;</pre><p>您可以执行SELECT语句来填充缓存。或者，使用FETCH语句或C赋值来使用数据填充缓存。</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT ...INTO：per_p FROM person_tab WHERE ...
</pre><p>使用INSERT，UPDATE或DELETE语句更改服务器对象，如图所示。您可以通过INSERT语句将数据插入表中：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO person_tab VALUES（：per_p）;</pre><p>最后，使用FREE语句与对象副本相关联的空闲内存：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FREE：per_p;</pre><div class="figure" id="GUID-7BB3E466-ACE7-4143-BAAC-CAFDD3F9DEB4__I449766">
                        <p class="titleinfigure">图17-1使用SQL访问对象</p><img src="img/lnpcc069.gif" width="603" alt="下面是图17-1的描述" title="下面是图17-1的描述" longdesc="img_text/lnpcc069.html"><br><a href="img_text/lnpcc069.html">“图17-1使用SQL访问对象”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="LNPCC4330"></a><div class="props_rev_3"><a id="GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7" name="GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7"></a><h3 id="LNPCC-GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7" class="sect3"><span class="enumeration_section">17.5</span>导航界面</h3>
               <div>
                  <p>使用导航界面访问与关联界面相同的模式。导航接口通过将REF解引用到对象并遍历（“导航”）从一个对象到另一个对象来访问持久和瞬态对象。一些定义如下。</p>
                  <p><span class="italic">固定</span>对象是用于表示取消引用对象的术语，允许程序访问它。
                  </p>
                  <p><span class="italic">取消固定</span>意味着向缓存指示不再需要该对象。
                  </p>
                  <p>可以将<span class="italic">解除引用</span>定义为使用REF在客户端中创建对象版本的服务器。虽然缓存维护缓存中的对象与相应的服务器对象之间的关联，但它不提供自动一致性。您有责任确保缓存中对象内容的正确性和一致性。
                  </p>
                  <p><span class="italic">释放</span>对象副本向缓存指示当前未使用该对象。要释放内存，请在不再需要时释放对象，使其符合隐式释放的条件。
                  </p>
                  <p><span class="italic">释放</span>对象副本会将其从缓存中删除并释放其内存区域。
                  </p>
                  <p><span class="italic">标记</span>对象会告知缓存已在缓存中更新了对象副本，并且在刷新对象副本时必须更新相应的服务器对象。
                  </p>
                  <p>取消<span class="italic">标记</span>对象将删除对象已更新的指示。
                  </p>
                  <p><span class="italic">刷新</span>对象会将对缓存中已标记副本所做的本地更改写入服务器中的相应对象。此时，缓存中的对象副本也未标记。
                  </p>
                  <p><span class="italic">刷新</span>缓存中的对象副本会将其替换为服务器中相应对象的最新值。
                  </p>
                  <p>导航和关联接口可以一起使用。</p>
                  <p>使用EXEC SQL OBJECT语句（导航界面）更新，删除和刷新缓存副本（将缓存中的更改写入服务器）。</p>
                  <div class="infoboxnotealso" id="GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7__GUID-11B4E0D2-9251-4A2B-8999-50B664E81955">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="about-Objects.html#GUID-D043EC3F-5DE7-4D09-B858-E9617327D6CD">导航访问的示例代码</a> ”，</span>用于说明一起使用导航和关联接口</p>
                  </div>
               </div><a id="LNPCC4331"></a><div class="props_rev_3"><a id="GUID-092F9382-DAC2-4AEF-B88C-415800B5253F" name="GUID-092F9382-DAC2-4AEF-B88C-415800B5253F"></a><h4 id="LNPCC-GUID-092F9382-DAC2-4AEF-B88C-415800B5253F" class="sect4"><span class="enumeration_section">17.5.1</span>何时使用导航界面</h4>
                  <div>
                     <p>使用导航界面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>访问单个或一小组对象，其中表之间的显式连接很昂贵。使用解除引用在对象之间导航时，执行隐式连接，这比两个整个表中的显式连接便宜。</p>
                        </li>
                        <li>
                           <p>对许多不同的对象进行许多小的更改。将所有对象提取到客户端，进行更改，将其标记为已更新，并将所有更改刷新回服务器更方便。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC4332"></a><div class="props_rev_3"><a id="GUID-A324D9BB-0981-4329-A3D2-AFF4BF03F6FF" name="GUID-A324D9BB-0981-4329-A3D2-AFF4BF03F6FF"></a><h4 id="LNPCC-GUID-A324D9BB-0981-4329-A3D2-AFF4BF03F6FF" class="sect4"><span class="enumeration_section">17.5.2</span>导航声明中使用的规则</h4>
                  <div>
                     <p>嵌入式SQL OBJECT语句稍后将通过以下假设进行描述：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果不存在AT子句，则假定为默认（未命名）连接。</p>
                        </li>
                        <li>
                           <p>除非特别说明，否则主机变量可以是数组。</p>
                        </li>
                        <li>
                           <p>使用FOR子句显式指定数组维度。如果不存在，则使用相关主变量的最小维度。</p>
                        </li>
                        <li>
                           <p>执行语句后，如果SQLCA作为状态变量提供，则处理的元素数将在sqlca.sqlerrd [2]中返回。</p>
                        </li>
                        <li>
                           <p>参数具有指定IN或OUT（或两者）以表示输入或输出。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-0ABBFB3E-F2BA-4906-8DEF-53EA78D758B5">嵌入式SQL语句和指令</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4333"></a><div class="props_rev_3"><a id="GUID-2568C123-275E-48C7-9C35-805DADD4AD7E" name="GUID-2568C123-275E-48C7-9C35-805DADD4AD7E"></a><h4 id="LNPCC-GUID-2568C123-275E-48C7-9C35-805DADD4AD7E" class="sect4"><span class="enumeration_section">17.5.3</span>对象创建</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [FOR [：] <span class="italic">count</span> ] OBJECT CREATE： <span class="italic">obj</span> [INDICATOR]： <span class="italic">obj_ind</span> [TABLE <span class="italic">tab</span> ] [RETURNING REF INTO： <span class="italic">ref</span> ];</pre><p>选项卡是：</p>
                        <p>{：hv | [架构。]表}</p>
                        <p>使用此语句在对象缓存中创建可引用对象。对象的类型对应于主变量<span class="italic">obj</span> 。当提供可选类型主变量（ <code class="codeph">:obj_ind,:ref,:ref_ind</code> ）时，它们必须全部对应于相同的类型。
                        </p>
                        <p>可引用对象可以是持久性的（提供TABLE子句），也可以是瞬态的（不存在TABLE子句）。永久对象被隐式固定并标记为已更新。瞬态对象被隐式固定。</p>
                        <p>主变量是：</p>
                        <p>obj（OUT）</p>
                        <p>对象实例主机变量<span class="italic">obj</span>必须是指向OTT生成的结构的指针。此变量用于确定在对象缓存中创建的可引用对象。成功执行后， <span class="italic">obj</span>将指向新创建的对象。
                        </p>
                        <p>obj_ind（OUT）</p>
                        <p>该变量指向OTT生成的指标结构。其类型必须与对象实例主机变量的类型匹配。成功执行后， <span class="italic">obj_ind</span>将成为可引用对象的并行指示器结构的指针。
                        </p>
                        <p>标签（IN）</p>
                        <p>使用table子句创建持久对象。表名可以指定为主机变量， <span class="italic">hv</span>或未声明的SQL标识符。它可以使用模式名称进行限定。不要在包含表名的主变量中使用尾随空格。
                        </p>
                        <p>hv（IN）</p>
                        <p>指定表的主机变量。如果使用主机变量， <span class="italic">则它不能</span>是数组。它不能是空白填充。它区分大小写。创建持久对象数组时，它们都与同一个表相关联。
                        </p>
                        <p>表（IN）</p>
                        <p>未声明的SQL标识符，区分大小写。</p>
                        <p>ref（OUT）</p>
                        <p>引用主机变量必须是指向OTT生成的引用类型的指针。<span class="italic">ref</span>的类型必须与对象实例主机变量的类型匹配。执行后， <span class="italic">ref</span>包含指向新创建对象的ref的指针。
                        </p>
                        <p>属性最初设置为null。目前不支持为对象视图创建新对象。</p>
                        <p>目前<span class="italic">不</span>支持为对象视图创建新对象。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4334"></a><div class="props_rev_3"><a id="GUID-75659B97-BDB0-4A15-AC1A-7A8B2BBA70C8" name="GUID-75659B97-BDB0-4A15-AC1A-7A8B2BBA70C8"></a><h4 id="LNPCC-GUID-75659B97-BDB0-4A15-AC1A-7A8B2BBA70C8" class="sect4"><span class="enumeration_section">17.5.4</span>对象DEREF</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [FOR [：] <span class="italic">count</span> ] OBJECT DEREF：ref INTO： <span class="italic">obj</span> [[INDICATOR]： <span class="italic">obj_ind</span> ] [FOR UPDATE [NOWAIT]];</pre><p>给定对象引用<span class="italic">ref</span> ，OBJECT DEREF语句将对象缓存中对应的对象或对象数组固定。在变量<span class="italic">obj</span>和<span class="italic">obj_ind</span>中返回指向这些对象的指针。
                        </p>
                        <p>主变量是：</p>
                        <p>ref（IN）</p>
                        <p>这是对象引用变量，它必须是指向OTT生成的引用类型的指针。取消引用此变量（或变量数组），返回指向缓存中相应对象的指针。</p>
                        <p>obj（OUT）</p>
                        <p>对象实例主机变量<span class="italic">obj</span>必须是指向OTT生成结构的指针。其类型必须与对象引用主机变量的类型匹配。成功执行后， <span class="italic">obj</span>包含指向对象缓存中固定对象的指针。
                        </p>
                        <p>obj_ind（OUT）</p>
                        <p>对象实例指示符变量<span class="italic">obj_ind</span>必须是指向OTT生成的指示符结构的指针。其类型必须与对象引用指示符变量的类型匹配。成功执行后， <span class="italic">obj_ind</span>包含指向可引用对象的并行指示器结构的指针。
                        </p>
                        <p>更新</p>
                        <p>如果存在此子句，则为服务器中的相应对象获取独占锁。</p>
                        <p>NOWAIT</p>
                        <p>如果存在此可选关键字，则如果另一个用户已锁定该对象，则会立即返回错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4335"></a><div class="props_rev_3"><a id="GUID-081CF130-1855-4A0E-B543-C284B27973EA" name="GUID-081CF130-1855-4A0E-B543-C284B27973EA"></a><h4 id="LNPCC-GUID-081CF130-1855-4A0E-B543-C284B27973EA" class="sect4"><span class="enumeration_section">17.5.5</span>对象释放</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [FOR [：] <span class="italic">count</span> ] OBJECT RELEASE： <span class="italic">obj</span> ;</pre><p>此语句取消对象缓存中的对象。当某个对象未固定且未更新时，它有资格进行隐式释放。</p>
                        <p>如果对象已被解除引用n次，则必须将其释放n次才有资格从对象缓存中隐式释放。Oracle建议发布不再需要的所有对象。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4336"></a><div class="props_rev_3"><a id="GUID-02C13127-CE3C-4040-B26F-969382AF491B" name="GUID-02C13127-CE3C-4040-B26F-969382AF491B"></a><h4 id="LNPCC-GUID-02C13127-CE3C-4040-B26F-969382AF491B" class="sect4"><span class="enumeration_section">17.5.6</span>对象删除</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [FOR [：] <span class="italic">count</span> ] OBJECT DELETE： <span class="italic">obj</span> ;</pre><p>对于持久对象，此语句将对象或对象数组标记为在对象缓存中删除。刷新对象或刷新缓存时，将在服务器中删除该对象。不释放对象高速缓存中保留的内存。</p>
                        <p>对于瞬态对象，该对象标记为已删除。不释放对象的内存。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4337"></a><div class="props_rev_3"><a id="GUID-13D8D19D-D2B1-4856-92C5-2F09B2D53FBF" name="GUID-13D8D19D-D2B1-4856-92C5-2F09B2D53FBF"></a><h4 id="LNPCC-GUID-13D8D19D-D2B1-4856-92C5-2F09B2D53FBF" class="sect4"><span class="enumeration_section">17.5.7</span>对象更新</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [FOR [：] <span class="italic">count</span> ] OBJECT UPDATE： <span class="italic">obj</span> ;</pre><p>对于持久对象，此语句将它们标记为在对象缓存中更新。刷新对象或刷新缓存时，更改将写入服务器。</p>
                        <p>对于瞬态对象，此语句是无操作。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4338"></a><div class="props_rev_3"><a id="GUID-06633D93-9C9C-424B-A416-2686B4BAE9B1" name="GUID-06633D93-9C9C-424B-A416-2686B4BAE9B1"></a><h4 id="LNPCC-GUID-06633D93-9C9C-424B-A416-2686B4BAE9B1" class="sect4"><span class="enumeration_section">17.5.8物体</span>冲洗</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] [FOR [：] <span class="italic">count</span> ] OBJECT FLUSH： <span class="italic">obj</span> ;</pre><p>此语句将已标记为已更新，已删除或已创建的持久对象刷新到服务器。</p>
                        <div class="infoboxnote" id="GUID-06633D93-9C9C-424B-A416-2686B4BAE9B1__GUID-71854CB8-48B4-4D12-97BB-CB8E135B0CD7">
                           <p class="notep1">注意：</p>
                           <p>刷新对象时隐式获取独占锁。语句成功完成后，对象将取消标记。如果对象版本是LATEST（请参阅下一节），则将隐式刷新对象。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4340"></a><a id="LNPCC4341"></a><a id="LNPCC4339"></a><div class="props_rev_3"><a id="GUID-3E124735-91D3-495D-9080-2BB9B776B279" name="GUID-3E124735-91D3-495D-9080-2BB9B776B279"></a><h4 id="LNPCC-GUID-3E124735-91D3-495D-9080-2BB9B776B279" class="sect4"><span class="enumeration_section">17.5.9</span>对象的导航访问</h4>
                  <div>
                     <p>有关导航界面的说明，请参<a href="about-Objects.html#GUID-3E124735-91D3-495D-9080-2BB9B776B279__I449836">见图17-2</a> 。
                     </p>
                     <p>使用ALLOCATE语句在对象高速缓存中分配内存，以将REF副本分配给<span class="italic">person</span>对象。分配的REF不包含数据。
                     </p><pre class="oac_no_warn" dir="ltr">person * per_p; person_ref * per_ref_p; ...EXEC SQL ALLOCATE：per_p;</pre><p>使用SELECT语句填充已分配的内存以检索<span class="italic">person</span>对象的REF（具体格式取决于应用程序）：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT ...INTO：per_ref_p;</pre><p>然后使用DEREF语句将对象固定在缓存中，以便可以在对象中进行更改。DEREF语句获取指针<span class="italic">per_ref_p</span>并在客户端缓存中创建<span class="italic">person</span>对象的实例。返回指向<span class="italic">person</span>对象的指针<span class="italic">per_p</span> 。
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT DEREF：per_ref_p INTO：per_p;</pre><div class="figure" id="GUID-3E124735-91D3-495D-9080-2BB9B776B279__I449836">
                        <p class="titleinfigure">图17-2导航访问</p><img src="img/lnpcc070.gif" width="504" alt="下面是图17-2的描述" title="下面是图17-2的描述" longdesc="img_text/lnpcc070.html"><br><a href="img_text/lnpcc070.html">“图17-2导航访问”的描述</a></div>
                     <!-- class="figure" -->
                     <p>使用C赋值语句或使用OBJECT SET语句进行数据转换，对缓存中的对象进行更改。</p>
                     <p>然后，您必须将对象标记为已更新。请参<a href="about-Objects.html#GUID-3E124735-91D3-495D-9080-2BB9B776B279__I449886">见图17-3</a> 。要将缓存中的对象标记为已更新，并且有资格刷新到服务器：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT UPDATE：per_p;</pre><p>您可以通过FLUSH语句将更改发送到服务器：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT FLUSH：per_p;</pre><p>您释放对象：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT RELEASE：per_p;</pre><div class="figure" id="GUID-3E124735-91D3-495D-9080-2BB9B776B279__I449886">
                        <p class="titleinfigure">图17-3导航访问（续）</p><img src="img/lnpcc071.gif" width="533" alt="下面是图17-3的描述" title="下面是图17-3的描述" longdesc="img_text/lnpcc071.html"><br><a href="img_text/lnpcc071.html">“图17-3导航访问（续）”的描述</a></div>
                     <!-- class="figure" -->
                     <p>下一节中的语句用于进行对象属性和C类型之间的转换。</p>
                  </div>
               </div>
            </div><a id="LNPCC4342"></a><div class="props_rev_3"><a id="GUID-C0317114-582E-4D77-AC2E-C18E8DE6D23E" name="GUID-C0317114-582E-4D77-AC2E-C18E8DE6D23E"></a><h3 id="LNPCC-GUID-C0317114-582E-4D77-AC2E-C18E8DE6D23E" class="sect3"><span class="enumeration_section">17.6</span>转换对象属性和C类型</h3>
               <div>
                  <p>本节介绍与属性和类型转换相关的问题。</p>
               </div><a id="LNPCC4343"></a><div class="props_rev_3"><a id="GUID-A2170426-231B-4671-AC7D-5520043A3BD0" name="GUID-A2170426-231B-4671-AC7D-5520043A3BD0"></a><h4 id="LNPCC-GUID-A2170426-231B-4671-AC7D-5520043A3BD0" class="sect4"><span class="enumeration_section">17.6.1</span>对象集</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] OBJECT SET [{'*'| { <span class="italic">attr</span> [， <span class="italic">attr</span> ]}} OF]： <span class="italic">obj</span> [[INDICATOR]： <span class="italic">obj_ind</span> ] TO {： <span class="italic">hv</span> [[INDICATOR]： <span class="italic">hv_ind</span> ] [，： <span class="italic">hv</span> [INDICATOR]： <span class="italic">hv_ind</span> ]]};</pre><p>将此语句与关联和导航接口创建的对象一起使用。此语句更新对象的属性。对于持久对象，更新和刷新对象时，更改将写入服务器。刷新缓存会将对更新对象所做的所有更改写入服务器。</p>
                        <p>OF <span class="bold"> </span>子句是可选的。如果不存在，则设置<span class="italic">obj的</span>所有属性。写作相同的结果：</p><pre class="oac_no_warn" dir="ltr">...对象集* ...
</pre><p>主变量列表可以包括分解以提供属性值的结构。但是， <span class="italic">obj中</span>的属性数必须与爆炸变量列表中的元素数相匹配。
                        </p>
                        <p>主机变量和属性是：</p>
                        <p>ATTR</p>
                        <p>属性不是主机变量，而是指定将更新对象的哪些属性的简单标识符。列表中的第一个属性与列表中的第一个表达式配对，依此类推。该属性必须是OCIString，OCINumber，OCIDate或OCIRef之一。</p>
                        <p>obj（IN / OUT）</p>
                        <p><span class="italic">obj</span>指定要更新的对象。绑定变量<span class="italic">obj</span>不能是数组。它必须是指向OTT生成结构的指针。
                        </p>
                        <p>obj_ind（IN / OUT）</p>
                        <p>将更新的并行指标结构。它必须是指向OTT生成的指标结构的指针。</p>
                        <p>hv（IN）</p>
                        <p>这是用作OBJECT SET语句的输入的绑定变量。 <span class="italic">hv</span>必须是int，float，OCIRef *，一维char数组或这些类型的结构。
                        </p>
                        <p>hv_ind（IN）</p>
                        <p>这是用作OBJECT SET语句的输入的关联指示符。 <span class="italic">hv_ind</span>必须是2字节整数标量或2字节整数标量的结构。
                        </p>
                        <p>使用指标变量：</p>
                        <p>如果存在主机变量指示符，则还必须存在对象指示符。</p>
                        <p>如果hv_ind设置为-1，则obj_ind中的关联字段设置为-1。</p>
                        <p>允许以下隐式转换：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>[OCIString | STRING | VARCHAR | CHARZ]到OCIString</p>
                           </li>
                           <li>
                              <p>OCIRef to OCIRef</p>
                           </li>
                           <li>
                              <p>[OCINumber | int |漂浮|双倍]到OCINumber</p>
                           </li>
                           <li>
                              <p>[OCIDate | STRING | VARCHAR | CHARZ]到OCIDate</p>
                              <div class="infoboxnote" id="GUID-A2170426-231B-4671-AC7D-5520043A3BD0__GUID-315402E7-90FC-4E07-B4BB-03155D68A1B4">
                                 <p class="notep1">注意：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>不允许嵌套结构。</p>
                                    </li>
                                    <li>
                                       <p>此语句不能用于将可引用对象设置为原子NULL。改为设置NULL指示符的相应字段。</p>
                                    </li>
                                    <li>
                                       <p>不支持OCIDateTime或OCIInterval数据类型与OCIString之间的转换。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4344"></a><div class="props_rev_3"><a id="GUID-C8E8F151-455E-45FD-AA11-68DD84D6B411" name="GUID-C8E8F151-455E-45FD-AA11-68DD84D6B411"></a><h4 id="LNPCC-GUID-C8E8F151-455E-45FD-AA11-68DD84D6B411" class="sect4"><span class="enumeration_section">17.6.2</span>对象获取</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] OBJECT GET [{'*'| { <span class="italic">attr</span> [， <span class="italic">attr</span> ]}} FROM]： <span class="italic">obj</span> [[INDICATOR]： <span class="italic">obj_ind</span> ] INTO {： <span class="italic">hv</span> [[INDICATOR]： <span class="italic">hv_ind</span> ] [，： <span class="italic">hv</span> [[INDICATOR]： <span class="italic">hv_ind</span> ]]};</pre><p>此语句将对象的属性转换为本机C类型。</p>
                        <p>FROM子句是可选的。如果不存在，则转换<span class="italic">obj的</span>所有属性。写作相同的结果：</p><pre class="oac_no_warn" dir="ltr">...OBJECT GET * FROM ...
</pre><p>主变量列表可以包括被分解以接收属性值的结构。但是， <span class="italic">obj中</span>的属性数必须与展开的主机变量列表中的元素数相匹配。
                        </p>
                        <p>主机变量和属性：</p>
                        <p>ATTR</p>
                        <p>属性不是主机变量，而是指定将检索对象的哪些属性的简单标识符。列表中的第一个属性与列表中的第一个主变量配对，依此类推。该属性必须表示基本类型。它必须是OCIString，OCINumber，OCIRef或OCIDate。</p>
                        <p>obj（IN）</p>
                        <p>这指定了用作属性检索源的对象。绑定变量<span class="italic">obj</span>不能是数组。
                        </p>
                        <p>hv（OUT）</p>
                        <p>这是用于保存OBJECT GET语句输出的绑定变量。它可以是int，float，double，一维char数组或包含这些类型的结构。该语句返回此主机变量中的转换属性值。</p>
                        <p>hv_ind（OUT）</p>
                        <p>这是属性值的关联指示符变量。它是一个2字节的整数标量或2字节整数标量的结构。</p>
                        <p>使用指标变量：</p>
                        <p>如果未指定对象指示符，则假定该属性有效。如果对象是原子级NULL或者请求的属性为NULL且未提供对象指示符变量，则将对象属性转换为C类型<span class="italic">是一个程序错误</span> 。<span class="italic">在这种情况下可能无法引发Oracle错误。</span></p>
                        <p>如果对象变量是原子级NULL或请求的属性为NULL，并且提供了主机变量指示符（ <span class="italic">hv_ind</span> ），则将其设置为-1。
                        </p>
                        <p>如果对象是原子级NULL或请求的属性为NULL，并且未提供主机变量指示符，则会引发错误。</p>
                        <p>允许以下隐式转换：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>OCIString到[STRING | VARCHAR | CHARZ | OCIString]</p>
                           </li>
                           <li>
                              <p>OCINumber到[int |漂浮|双| OCINumber]</p>
                           </li>
                           <li>
                              <p>OCIRef to OCIRef</p>
                           </li>
                           <li>
                              <p>OCI日期为[STRING | VARCHAR | CHARZ | OCIDate]</p>
                              <div class="infoboxnote" id="GUID-C8E8F151-455E-45FD-AA11-68DD84D6B411__GUID-A400A61B-9414-477C-9ACC-1BC5EE8357BD">
                                 <p class="notep1">注意：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>不允许嵌套结构</p>
                                    </li>
                                    <li>
                                       <p>不支持OCIDateTime或OCIInterval数据类型与OCIString之间的转换</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC4345"></a><div class="props_rev_3"><a id="GUID-23A4843B-0673-4698-9358-9A714507D4DD" name="GUID-23A4843B-0673-4698-9358-9A714507D4DD"></a><h3 id="LNPCC-GUID-23A4843B-0673-4698-9358-9A714507D4DD" class="sect3"><span class="enumeration_section">17.7</span>对象选项设置/获取</h3>
               <div>
                  <p>运行时上下文具有在创建和分配运行时上下文时设置为缺省值的选项。然后，您可以使用此嵌入式SQL指令设置这些选项：</p>
               </div><a id="LNPCC4347"></a><a id="LNPCC4346"></a><div class="props_rev_3"><a id="GUID-A603BDFE-FBB4-481C-9369-BAC53ABE4C59" name="GUID-A603BDFE-FBB4-481C-9369-BAC53ABE4C59"></a><h4 id="LNPCC-GUID-A603BDFE-FBB4-481C-9369-BAC53ABE4C59" class="sect4"><span class="enumeration_section">17.7.1</span>上下文对象选项集</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL语境对象选项集{ <span class="italic">option</span> [， <span class="italic">option</span> ]} TO {： <span class="italic">hv</span> [，： <span class="italic">hv</span> ]};</pre><p>变量在哪里：</p>
                        <p>：hv（IN）......</p>
                        <p>输入绑定变量<span class="italic">hv ...</span>的类型为STRING，VARCHAR或CHARZ。</p>
                        <p>选项 ...</p>
                        <p>简单标识符，指定要更新的运行时上下文的哪个选项。第一个选项与第一个输入绑定变量配对，依此类推。以下是此时支持的值：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-A603BDFE-FBB4-481C-9369-BAC53ABE4C59__G470077">
                        <p class="titleintable">表17-1上下文对象选项值的有效选择</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="上下文对象选项值的有效选择" width="100%" border="1" summary="Valid Choices for CONTEXT OBJECT OPTION Values" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d93390e1880">期权价值</th>
                                 <th align="left" valign="bottom" width="69%" id="d93390e1883">指定</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d93390e1888" headers="d93390e1880 ">
                                    <p>日期格式</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d93390e1888 d93390e1883 ">
                                    <p>Date属性和集合元素的格式。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d93390e1895" headers="d93390e1880 ">
                                    <p>DATELANG</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d93390e1895 d93390e1883 ">
                                    <p>所有日期和日期时间类型的全球化支持语言。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>一个例子是：</p><pre class="oac_no_warn" dir="ltr">char * new_format =“DD-MM-YYYY”; char * new_lang =“法语”; char * new_date =“14-07-1789”; / *许可证类型的一个属性是dateofbirth * / license * aLicense; .../ *上下文的声明和分配......* / EXEC SQL语境对象选项设置DATEFORMAT，DATELANG TO：new_format，：new_lang; / *获得的导航对象* / ...EXEC SQL OBJECT SET dateofbirth OF：aLicense TO：new_date; ...
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../sqlrf/index.html" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-7DABE6B3-BAA8-4A66-AF65-AD1216F7E897">上下文对象选项集（可执行嵌入式SQL Ext）</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCC4348"></a><div class="props_rev_3"><a id="GUID-AAC33859-0CB5-4944-B816-9F0D3A6608AC" name="GUID-AAC33859-0CB5-4944-B816-9F0D3A6608AC"></a><h4 id="LNPCC-GUID-AAC33859-0CB5-4944-B816-9F0D3A6608AC" class="sect4"><span class="enumeration_section">17.7.2</span>上下文对象选项获取</h4>
                  <div>
                     <div class="section">
                        <p>受影响的上下文被理解为当时使用的上下文。要确定这些选项的值，请使用以下指令：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境对象选项获取{ <span class="italic">option</span> [， <span class="italic">option</span> ]} INTO {： <span class="italic">hv</span> [，： <span class="italic">hv</span> ]};</pre><p><a href="about-Objects.html#GUID-A603BDFE-FBB4-481C-9369-BAC53ABE4C59__G470077" title="上下文对象选项值的有效选择">表17-1中</a>的<span class="italic">选项</span>值。
                        </p>
                        <p>绑定变量<span class="italic">hv</span> ...用作输出，类型为STRING，VARCHAR或CHARZ。受影响的上下文被理解为当时使用的上下文。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../sqlrf/index.html" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-CEEE04CB-1726-4DFD-B097-0489DC93C188">上下文对象选项GET（可执行的嵌入式SQL扩展）</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC4349"></a><div class="props_rev_3"><a id="GUID-DFA7F6BD-766A-440C-A5EC-EF97466F4EFB" name="GUID-DFA7F6BD-766A-440C-A5EC-EF97466F4EFB"></a><h3 id="LNPCC-GUID-DFA7F6BD-766A-440C-A5EC-EF97466F4EFB" class="sect3"><span class="enumeration_section">17.8</span>对象的新预编译器选项</h3>
               <div>
                  <p>要支持对象，请使用以下预编译器选项：</p>
               </div><a id="LNPCC4350"></a><div class="props_rev_3"><a id="GUID-BE4EEED6-BA68-4BD9-9537-511C5890A91F" name="GUID-BE4EEED6-BA68-4BD9-9537-511C5890A91F"></a><h4 id="LNPCC-GUID-BE4EEED6-BA68-4BD9-9537-511C5890A91F" class="sect4"><span class="enumeration_section">17.8.1</span>版本</h4>
                  <div>
                     <div class="section">
                        <p>此选项确定EXEC SQL OBJECT DEREF语句返回的对象版本。这为您提供了缓存对象和服务器对象之间不同级别的一致性。</p>
                        <p>使用EXEC ORACLE OPTION语句将其设置为内联。允许的值是：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-BE4EEED6-BA68-4BD9-9537-511C5890A91F__GUID-8EA7B6E0-86C1-4753-B379-371DFA189A57"><!-- --></a>最近（默认）</dt>
                           <dd>
                              <p>如果已在当前事务中将对象选择到对象缓存中，则返回该对象。如果尚未选择该对象，则从服务器检索该对象。对于以可序列化模式运行的事务，此选项与VERSION = LATEST具有相同的行为，而不会产生尽可能多的网络往返。该值可以安全地用于大多数Pro * C / C ++应用程序。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-BE4EEED6-BA68-4BD9-9537-511C5890A91F__GUID-72749A9E-F1FE-46AE-91F9-021E9DCB4BB4"><!-- --></a>最新</dt>
                           <dd>
                              <p>如果对象不驻留在对象缓存中，则从数据库中检索它。如果它确实驻留在对象缓存中，则会从服务器刷新。谨慎使用此值，因为它将导致最大数量的网络往返。仅在必须使对象缓存与服务器端缓冲区保持一致时才使用它。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-BE4EEED6-BA68-4BD9-9537-511C5890A91F__GUID-44050852-95C1-4CAC-AE3B-01E4BB883F32"><!-- --></a>任何</dt>
                           <dd>
                              <p>如果对象已驻留在对象缓存中，则返回该对象。如果对象不驻留在对象缓存中，请从服务器检索它。该值将导致最少的网络往返次数。用于访问只读对象的应用程序或用户可以独占访问对象的应用程序。</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4351"></a><div class="props_rev_3"><a id="GUID-E9122145-AFB2-47A8-B6F7-33E279840610" name="GUID-E9122145-AFB2-47A8-B6F7-33E279840610"></a><h4 id="LNPCC-GUID-E9122145-AFB2-47A8-B6F7-33E279840610" class="sect4"><span class="enumeration_section">17.8.2</span>持续时间</h4>
                  <div>
                     <div class="section">
                        <p>使用此预编译器选项设置后续EXEC SQL OBJECT CREATE和EXEC SQL OBJECT DEREF语句使用的引脚持续时间。缓存中的对象在持续时间结束时隐式取消固定。</p>
                        <p>仅用于导航界面。</p>
                        <p>您可以在EXEC ORACLE OPTION语句中设置此选项。允许的值是：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-E9122145-AFB2-47A8-B6F7-33E279840610__GUID-310D64C4-1C65-44D0-B888-93E013CCA154"><!-- --></a>交易（默认）</dt>
                           <dd>
                              <p>事务完成后，对象将被隐式取消固定。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-E9122145-AFB2-47A8-B6F7-33E279840610__GUID-E5F49AF7-5D85-4BB1-9D5E-8364B151F061"><!-- --></a>会话</dt>
                           <dd>
                              <p>终止连接时隐式取消固定对象。</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4352"></a><div class="props_rev_3"><a id="GUID-80A0FDFE-ECE3-45BE-B956-BCF0959D03C6" name="GUID-80A0FDFE-ECE3-45BE-B956-BCF0959D03C6"></a><h4 id="LNPCC-GUID-80A0FDFE-ECE3-45BE-B956-BCF0959D03C6" class="sect4"><span class="enumeration_section">17.8.3</span>对象</h4>
                  <div>
                     <div class="section">
                        <p>此预编译器选项提供了使用对象缓存的功能。</p>
                        <p>OBJECTS默认值，对于DBMS = NATIVE | V8，是的。对象缓存的默认大小与OCI默认缓存大小（8 MB）相同。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="precompiler-options.html#GUID-5977237E-3C95-4BA1-BD35-5480482C1364">物体</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4353"></a><div class="props_rev_3"><a id="GUID-63254024-61DB-4A8B-B832-7E044CF2E1FF" name="GUID-63254024-61DB-4A8B-B832-7E044CF2E1FF"></a><h4 id="LNPCC-GUID-63254024-61DB-4A8B-B832-7E044CF2E1FF" class="sect4"><span class="enumeration_section">17.8.4</span> INTYPE</h4>
                  <div>
                     <div class="section">
                        <p>如果程序使用任何对象类型，集合对象类型或REF，则必须在此命令行选项中指定INTYPE文件。</p>
                        <p>指定INTYPE <span class="bold"> </span>选项使用语法：</p><pre class="oac_no_warn" dir="ltr">INTYPE = <span class="italic">filename1</span> INTYPE = <span class="italic">filename2</span> ...
</pre><p>其中<span class="italic">filename1</span>等等是OTT生成的类型<span class="italic">文件</span>的名称。这些文件是Pro * C / C ++的只读输入。其中的信息虽然是纯文本形式，但可能会被编码，并且可能不一定是您（用户）可以解释的。
                        </p>
                        <p>您可以提供多个INTYPE文件作为单个Pro * C / C ++预编译单元的输入。</p>
                        <p>此选项不能在EXEC ORACLE语句中内联使用。</p>
                        <p>OTT为在数据库中创建的对象类型生成C结构声明，并将类型名称和版本信息写入名为<span class="italic">typefile</span>的文件<span class="italic">。</span></p>
                        <p>对象类型可能不一定与C结构类型或表示它的C ++类类型具有相同的名称。出现这种情况的原因如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>服务器中指定的对象类型的名称包括C或C ++标识符中不合法的字符</p>
                           </li>
                           <li>
                              <p>用户要求OTT为结构或类使用不同的名称</p>
                           </li>
                           <li>
                              <p>用户要求OTT更改名称的大小写</p>
                           </li>
                        </ul>
                        <p>在这种情况下，不可能从结构或类声明中推断出它匹配的对象类型。Pro * C / C ++所需的此信息由OTT在类型文件中生成。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4354"></a><div class="props_rev_3"><a id="GUID-8FDF4410-C21A-4221-8649-3103E6B93017" name="GUID-8FDF4410-C21A-4221-8649-3103E6B93017"></a><h4 id="LNPCC-GUID-8FDF4410-C21A-4221-8649-3103E6B93017" class="sect4"><span class="enumeration_section">17.8.5</span> ERRTYPE</h4>
                  <div>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">ERRTYPE = <span class="italic">文件名</span>
</pre><p>将错误写入指定的文件以及屏幕。如果省略，则错误仅指向屏幕。只允许一个ERRTYPE。与其他单值命令行选项一样，如果在命令行中为ERRTYPE输入多个值，则最后一个值将取代之前的值。</p>
                        <p>此选项不能在EXEC ORACLE语句中内联使用。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4355"></a><div class="props_rev_3"><a id="GUID-C9CB010C-FA5B-46BE-8F7C-BF7EB3E6D632" name="GUID-C9CB010C-FA5B-46BE-8F7C-BF7EB3E6D632"></a><h4 id="LNPCC-GUID-C9CB010C-FA5B-46BE-8F7C-BF7EB3E6D632" class="sect4"><span class="enumeration_section">17.8.6</span> SQLCHECK支持对象</h4>
                  <div>
                     <div class="section">
                        <p>根据Oracle类型的C绑定，对象类型及其属性在C程序中表示。如果预编译器命令行选项SQLCHECK设置为SEMANTICS或FULL，则Pro * C / C ++在预编译期间验证主机变量类型是否符合数据库模式中类型的强制C绑定。此外，始终执行运行时检查以验证在程序执行期间是否正确映射了Oracle类型。</p>
                        <p>以通常方式检查关系数据类型。</p>
                        <p>如果两种类型相同，或者两者之间允许转换，则关系SQL数据类型与主机变量类型兼容。另一方面，对象类型只有在相同类型时才兼容。他们一定</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有相同的名字</p>
                           </li>
                           <li>
                              <p>处于相同的模式中（如果明确指定了模式）</p>
                           </li>
                        </ul>
                        <p>当您指定选项SQLCHECK = SEMANTICS或FULL时，在预编译期间，Pro * C / C ++使用指定的用户标识和密码登录到数据库，并验证生成结构声明的对象类型是否与在中使用的对象类型相同嵌入式SQL语句。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4356"></a><div class="props_rev_3"><a id="GUID-17CEB7F6-F667-4F48-B787-BD9C7A9F58D8" name="GUID-17CEB7F6-F667-4F48-B787-BD9C7A9F58D8"></a><h4 id="LNPCC-GUID-17CEB7F6-F667-4F48-B787-BD9C7A9F58D8" class="sect4"><span class="enumeration_section">17.8.7</span>运行时类型检查</h4>
                  <div>
                     <p>Pro * C / C ++为输入INTYPE文件中的类型收集Object，集合Object和REF主变量的类型名称，版本和可能的模式信息，并将此信息存储在它生成的代码中。这样可以在运行时访问Object和REF绑定变量的类型信息。类型不匹配会返回适当的错误。</p>
                  </div>
               </div>
            </div><a id="LNPCC4357"></a><div class="props_rev_3"><a id="GUID-34AFC95A-2A0F-4925-86F6-865E204CCBB4" name="GUID-34AFC95A-2A0F-4925-86F6-865E204CCBB4"></a><h3 id="LNPCC-GUID-34AFC95A-2A0F-4925-86F6-865E204CCBB4" class="sect3"><span class="enumeration_section">17.9</span> Pro * C / C ++中的对象示例</h3>
               <div>
                  <p>让我们来看一个简单的对象示例。您创建一个类型<span class="italic">人员</span>和一个表<span class="italic">person_tab，</span>其列也是一个对象类型， <span class="italic">地址</span> ：</p><pre class="oac_no_warn" dir="ltr">create type person as object（lastname varchar2（20），firstname char（20），age int，addr address）/ create table person_tab of person;</pre><p>在表格中插入数据，然后继续。</p>
               </div><a id="LNPCC4358"></a><div class="props_rev_3"><a id="GUID-5E026BB2-1239-4F0D-A81D-6415F0E78CE2" name="GUID-5E026BB2-1239-4F0D-A81D-6415F0E78CE2"></a><h4 id="LNPCC-GUID-5E026BB2-1239-4F0D-A81D-6415F0E78CE2" class="sect4"><span class="enumeration_section">17.9.1</span>关联访问</h4>
                  <div>
                     <p>考虑如何使用Pro * C / C ++将<span class="italic">姓氏</span>值从“Smith”更改为“Smythe”。
                     </p>
                     <p>运行OTT以生成映射到<span class="italic">人的</span> C结构。在Pro * C / C ++程序中，您必须包含OTT生成的头文件。</p>
                     <p>在您的应用程序中，将指针<span class="italic">person_p</span>声明到客户端缓存中的持久内存。然后分配内存并使用返回的指针：</p><pre class="oac_no_warn" dir="ltr">char * new_name =“Smythe”; person * person_p; ...EXEC SQL ALLOCATE：person_p;</pre><p>现在为内存对象的副本分配内存。分配的对象尚未包含数据。</p>
                     <p>通过C赋值语句或使用SELECT或FETCH来检索现有对象，从而在缓存中填充数据：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT VALUE（p）INTO：person_p FROM person_tab p WHERE lastname ='Smith';</pre><p>通过使用INSERT，UPDATE和DELETE语句将对缓存中的副本所做的更改传输到服务器数据库：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT SET姓氏：person_p TO：new_name; EXEC SQL INSERT INTO person_tab VALUES（：person_p）;</pre><p>以这种方式释放高速缓存：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FREE：person_p;</pre></div>
               </div><a id="LNPCC4359"></a><div class="props_rev_3"><a id="GUID-4CD81205-0436-409C-A1FC-46442159BFCD" name="GUID-4CD81205-0436-409C-A1FC-46442159BFCD"></a><h4 id="LNPCC-GUID-4CD81205-0436-409C-A1FC-46442159BFCD" class="sect4"><span class="enumeration_section">17.9.2</span>导航访问</h4>
                  <div>
                     <p>在对象缓存中分配内存，以便将REF副本分配给对象<span class="italic">人员</span> 。ALLOCATE语句返回指向REF的指针：</p><pre class="oac_no_warn" dir="ltr">person * person_p; person_ref * per_ref_p; ...EXEC SQL ALLOCATE：per_ref_p;</pre><p>分配的REF不包含任何数据。要使用数据填充它，请检索对象的REF：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT ...INTO：per_ref_p;</pre><p>然后取消引用REF以将对象的实例放在客户端缓存中。dereference命令使用<span class="italic">per_ref_p</span>并在缓存中创建相应对象的实例：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT DEREF：per_ref_p INTO：person_p;</pre><p>使用C分配或使用OBJECT GET语句更改缓存中的数据：</p><pre class="oac_no_warn" dir="ltr">/ * lname是一个C变量，用于保存结果* / EXEC SQL OBJECT GET lastname FROM：person_p INTO：lname; ...EXEC SQL OBJECT SET姓氏：person_p TO：new_name; / *使用OBJECT UPDATE命令将已更改的对象标记为已更改* /; EXEC SQL OBJECT UPDATE：person_p; EXEC SQL FREE：per_ref_p;</pre><p>要在数据库中永久更改，请使用FLUSH：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT FLUSH：person_p;</pre><p>已对服务器进行了更改;现在可以释放该对象。释放的对象不一定立即从对象缓存中释放。它们被放置在最近最少使用的堆栈上。当缓存已满时，对象将被换出内存。</p>
                     <p>只释放对象;对象的REF保留在缓存中。要释放REF，请使用RELEASE语句。对于REF。要释放<code class="codeph">person_p</code>指向的对象：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT RELEASE：person_p;</pre><p>或者，如果已正确设置引脚持续时间，则发出事务提交并释放缓存中的所有对象。</p>
                  </div>
               </div>
            </div><a id="LNPCC4360"></a><div class="props_rev_3"><a id="GUID-47435013-11A1-4977-AE0E-8A51F66D29C3" name="GUID-47435013-11A1-4977-AE0E-8A51F66D29C3"></a><h3 id="LNPCC-GUID-47435013-11A1-4977-AE0E-8A51F66D29C3" class="sect3"><span class="enumeration_section">17.10</span>类型继承的示例代码</h3>
               <div>
                  <div class="section">
                     <p><a id="d93390e2502" class="indexterm-anchor"></a>以下代码示例创建四种对象类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PERSON_T</p>
                        </li>
                        <li>
                           <p><code class="codeph">Employee_t</code>作为<code class="codeph">Person_t</code>的子类型</p>
                        </li>
                        <li>
                           <p><code class="codeph">Student_t</code>作为<code class="codeph">Person_t</code>的子类型</p>
                        </li>
                        <li>
                           <p><code class="codeph">PartTimeStudent_t</code>作为的一个亚型<code class="codeph">Student_t</code> 
                           </p>
                        </li>
                     </ul>
                     <p>和一张桌子：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">person_tab</code>用于保存<code class="codeph">Person_t</code>及其子类型对象</p>
                        </li>
                     </ul>
                     <p></p>
                     <p>创建对象类型和表，然后在表中插入值的SQL文件<code class="codeph">inhdemo1.sql</code>是：</p>
                     <p></p><pre class="oac_no_warn" dir="ltr">连接斯科特/老虎; rem **始终将对象放在反向依赖顺序删除表person_tab中; drop类型PartTimeStudent_t; drop type Student_t; drop type Employee_t; drop类型Person_t; rem **创建TYPES，TYPED TABLES和TABLES我们需要rem **创建一个Person_t ADT CREATE TYPE Person_t AS OBJECT（ssn NUMBER，name VARCHAR2（30），address VARCHAR2（100））NOT FINAL; / rem **创建一个Person_t子类型Employee_t CREATE TYPE Employee_t UNDER Person_t（empid NUMBER，mgr VARCHAR2（30））; / rem **创建一个Person_t子类型Student_t CREATE TYPE Student_t UNDER Person_t（deptid NUMBER，major VARCHAR2（30））NOT FINAL; / rem **创建一个Student_t子类型PartTimeStudent_t CREATE TYPE PartTimeStudent_t UNDER Student_t（numhours NUMBER）; / rem **为person_t对象创建一个类型表CREATE table person_tab of person_t; rem **将2个Employee_t对象插入person_t类型表插入person_tab值（Employee_t（123456，'Alison Laurence'，'100 Geary Street，San Francisco，CA 94013'，1001，'CEO'））;插入person_tab值（Employee_t（234567，'William Bates'，'123 Main Street，Anytown，WA 97818'，1002，'CFO'））; rem **将2个Student_t对象插入person_t类型表插入person_tab值（Student_t（20001，'Van Gates'，'1825 Aikido Way，Los Angeles，CA，45300'，20，'English'））;插入person_tab值（Student_t（20002，'Bill Wallace'，'12 Shugyo Blvd，Los Angeles，CA，95100'，30，'Computer Science'））; rem **将1个PartTimeStudent_t对象插入person_t类型表插入person_tab值（PartTimeStudent_t（20003，'Jean Claude'，'874 Richmond Street，New York，NY 45100'，40，'Music'，20））;承诺;</pre><p></p>
                     <p>以下是我们的示例<code class="codeph">inhdemo1.typ</code>的intype文件<code class="codeph">inhdemo1.typ</code> ：</p>
                     <p></p><pre class="oac_no_warn" dir="ltr">case =相同类型person_t类型employee_t类型student_t类型parttimestudent_t</pre><p></p>
                     <p>以下是预编译器文件<code class="codeph">inhdemo1.pc</code> ：</p>
                     <p></p><pre class="oac_no_warn" dir="ltr">/ ******************* **************************** * *这是一个简单的Pro * C / C ++程序，旨在说明如何*访问类型继承对象。* *构建可执行文件：* * 1。在SQL * Plus中执行SQL脚本inhdemo1.sql来创建：*  -  4个对象类型person_t，employee_t作为person_t的子类型，* student_t作为person_t的子类型，parttimestudent_t作为* student_t的子类型。*  -  1个用于保存“person_t”的类型表person_tab及其子类型对象* * 2。运行OTT :(以下命令应出现在一行上）* ott intype = inhdemo1.typ hfile = inhdemo1.h outtype = out.typ * code = c userid = scott / tiger * * 3。使用Pro * C / C ++预编译：* proc inhdemo1 intype = out.typ * 4。编译/链接（此步骤是特定于平台的）* *************************************** ************************************* //包含文件* / #include &lt;stdio.h &gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;sqlda.h&gt; #include &lt;sqlca.h&gt; / * SQL通讯区* / #include &lt;sql2oci.h&gt; / * OCI8的SQLLIB互操作性例程* / #include“inhdemo1.h”/ * OTT生成的标头，带有C typedef，用于* / / *数据库类型“person”和“address”* / / *宏* / #define ARRAY_SIZE 10 #define NAME_LENGTH 31 #define ADDR_LENGTH 101 / *全局变量* / char * uid =“scott / tiger”; int i; int count; VARCHAR dynstmt [100]; main（）{printf（“\ n *** STARTING OBJECT TYPE INHERITANCE DEMO *** \ n”）;执行SQL WHENEVER SQLERROR DO sql_error（“ORACLE error  -  \ n”）; EXEC SQL连接：uid; printf（“已成功连接。\ n”）; exec sql select count（*）into：count from person_tab; printf（“\ n表person_tab中有％d个条目。\ n”，count）; do_fetch_all（）; / *获取person_t对象* / do_fetch_employee（）; / *获取employee_t对象* / do_fetch_student（）; / *仅获取student_t对象* / do_fetch_parttimestudent（）; / *获取parttimestuden_t对象* / do_fetch_student_employee（）; / *获取student_t和employee_t对象* / printf（“\ n仅使用动态sql获取student_t对象：\ n”）; strcpy（（char *）dynstmt.arr，“person_tab p中的SELECT值（p），其中value（p）是（only student_t）”）; do_dynamic_fetch（）; / *使用动态sql * / printf（“\ n获取student_t及其子类型对象与动态sql：\ n”）获取student_t对象; strcpy（（char *）dynstmt.arr，“SELECT treat（value（p）as student_t）from person_tab p，其中value（p）是（student_t）”）; do_dynamic_fetch（）; / *使用动态sql * / printf获取student_t对象（“\ n ***对象类型继承演示结束*** \ n”）;出口（EXIT_SUCCESS）; } void printPerson（person）person_t * person; {int writtenSSN = -1; text writtenName [NAME_LENGTH]; text writtenAddr [ADDR_LENGTH]; EXEC SQL OBJECT获取SSN，NAME，ADDRESS FROM：person INTO：writtenSSN，：writtenName，：writtenAddr; printf（“\ nSSN =％10d \ nNAME =％s \ nAddr =％s \ n”，写入SSN，writeName，writtenAddr）; } void printEmployee（employee）employee_t * employee; {int writtenID = -1; text writtenMgr [NAME_LENGTH]; printPerson（雇员）; EXEC SQL OBJECT获取EMPID，MGR FROM：employee INTO：writtenID，：writtenMgr; printf（“EMPID =％10d \ nMGR =％s \ n”，writeID，writtenMgr）; } void printStudent（student）student_t * student; {int writtendeptid = -1; text writtenMajor [NAME_LENGTH]; printPerson（学生）; EXEC SQL OBJECT获得DEPTID，主要来自：学生INTO：writdeptid，：writtenMajor; printf（“DEPTID =％10d \ nMAJOR =％s \ n”，writedeptid，writtenMajor）; } void printPartTimeStudent（parttimes）parttimestudent_t * parttimes; {int written_numhours = -1; printStudent（parttimes）; EXEC SQL OBJECT GET NUMHOURS FROM：parttimes INTO：written_numhours; printf（“NUMHOURS =％10d \ n”，writ_numhours）; } / *声明错误处理函数。* / sql_error（msg）char * msg; {char err_msg [128]; size_t buf_len，msg_len; EXEC SQL WHENEVER SQLERROR CONTINUE; printf（“\ n％s \ n”，msg）; buf_len = sizeof（err_msg）; sqlglm（err_msg，＆buf_len，＆msg_len）; printf（“％。* s \ n”，msg_len，err_msg）; EXEC SQL ROLLBACK RELEASE;出口（EXIT_FAILURE）; / ************************************************ ***************************** *以下函数显示如何选择person_t对象*********** ************************************************** *************** / do_fetch_all（）{person_t * personArray [ARRAY_SIZE]; person_t_ind * personArray_ind [ARRAY_SIZE]; printf（“\ nFetching person_t objects：\ n”）; exec sql为person_tab p中的select value（p）声明c1游标; exec sql allocate：personArray：personArray_ind; exec sql open c1;每次都没有找到exec sql goto：done; while（sqlca.sqlcode == 0）{exec sql fetch c1 into：personArray：personArray_ind; if（sqlca.sqlcode == 1403）goto done; for（i = 0; i &lt;ARRAY_SIZE; i ++）printPerson（personArray [i]）; } done：for（i = 0; i &lt;sqlca.sqlerrd [2]％ARRAY_SIZE; i ++）printPerson（personArray [i]）; printf（“获取的person_t对象的总数：％d。\ n”，sqlca.sqlerrd [2]）; exec sql close c1; exec sql free：personArray：personArray_ind; / ************************************************ ***************************** *以下函数显示如何选择person_t子类型employee_t *对象******** ************************************************** ****************** / do_fetch_employee（）{employee_t * empArray [ARRAY_SIZE]; employee_t_ind * empArray_ind [ARRAY_SIZE]; printf（“\ nFetching employee_t objects：\ n”）; exec sql allocate：empArray：empArray_ind; exec sql声明c2游标，用于从person_tab p中选择值（p），其中value（p）是（employee_t）; exec sql open c2; exec sql什么时候找不到goto：done_emp; while（sqlca.sqlcode == 0）{exec sql fetch c2 into：empArray：empArray_ind; for（i = 0; i &lt;ARRAY_SIZE; i ++）printEmployee（empArray [i]）; } done_emp：for（i = 0; i &lt;sqlca.sqlerrd [2]％ARRAY_SIZE; i ++）printEmployee（empArray [i]）; printf（“获取的employee_t对象的总数：％d。\ n”，sqlca.sqlerrd [2]）; exec sql close c2; exec sql free：empArray：empArray_ind; / ************************************************ ***************************** *以下函数显示如何选择person_t子类型student_t *对象******** ************************************************** ****************** / do_fetch_student（）{student_t * studentArray [ARRAY_SIZE]; student_t_ind * studentArray_ind [ARRAY_SIZE]; printf（“\ nFetching student_t objects：\ n”）; exec sql声明c3游标用于从person_tab p中选择值（p），其中value（p）是（student_t）; exec sql allocate：studentArray：studentArray_ind; exec sql open c3;每次都没有找到exec sql goto：done_student; for（;;）{exec sql fetch c3 into：studentArray：studentArray_ind; for（i = 0; i &lt;ARRAY_SIZE; i ++）printStudent（studentArray [i]）; } done_student：for（i = 0; i &lt;sqlca.sqlerrd [2]％ARRAY_SIZE; i ++）printStudent（studentArray [i]）; printf（“获取的student_t对象的总数：％d。\ n”，sqlca.sqlerrd [2]）; exec sql close c3; exec sql免费：studentArray：studentArray_ind; / ************************************************ ***************************** *以下函数显示如何选择student_t子类型* parttimestudent对象******** ************************************************** ****************** / do_fetch_parttimestudent（）{parttimestudent_t * parttimestudentArrayArray [ARRAY_SIZE]; parttimestudent_t_ind * parttimestudentArrayArray_ind [ARRAY_SIZE]; printf（“\ nFetching parttimestudent_t objects：\ n”）; exec sql声明c4游标用于从person_tab p中选择值（p），其中value（p）是（parttimestudent_t）; exec sql allocate：parttimestudentArrayArray：parttimestudentArrayArray_ind; exec sql open c4;每次都没有找到exec sql goto：done_parttimestudent; while（sqlca.sqlcode == 0）{exec sql fetch c4 into：parttimestudentArrayArray：parttimestudentArrayArray_ind; for（i = 0; i &lt;ARRAY_SIZE; i ++）printPartTimeStudent（parttimestudentArrayArray [i]）; } done_parttimestudent：for（i = 0; i &lt;sqlca.sqlerrd [2]％ARRAY_SIZE; i ++）printPartTimeStudent（parttimestudentArrayArray [i]）; printf（“获取的parttimestudent_t对象的总数：％d。\ n”，sqlca.sqlerrd [2]）; exec sql close c4; exec sql free：parttimestudentArrayArray：parttimestudentArrayArray_ind; / ************************************************ ***************************** *以下函数显示如何选择person_t子类型student_t *和employee_t对象****** ************************************************** ******************** / do_fetch_student_employee（）{person_t * personArray [ARRAY_SIZE]; person_t_ind * personArray_ind [ARRAY_SIZE]; printf（“\ n仅获取student_t和employee_t对象：\ n”）; exec sql声明c5游标，用于从person_tab p中选择值（p），其中value（p）是（only student_t，employee_t）; exec sql allocate：personArray：personArray_ind; exec sql open c5;每次都没有找到exec sql goto：done_student_employee; while（sqlca.sqlcode == 0）{exec sql fetch c5 into：personArray：personArray_ind; for（i = 0; i &lt;ARRAY_SIZE; i ++）printPerson（personArray [i]）; } done_student_employee：for（i = 0; i &lt;sqlca.sqlerrd [2]％ARRAY_SIZE; i ++）printPerson（personArray [i]）; printf（“获取的stuent_t和employee_t对象的总数：％d。\ n”，sqlca.sqlerrd [2]）; exec sql close c5; exec sql free：personArray：personArray_ind; / ************************************************ ***************************** *以下函数显示如何使用动态sql选择person_t子类型student_t *对象。************************************************** ************************** / do_dynamic_fetch（）{student_t * student; student_t_ind * student_ind; exec sql allocate：student：student_ind; dynstmt.len =（unsigned short）strlen（（char *）dynstmt.arr）; EXEC SQL PREPARE S FROM：dynstmt;用于S的EXEC SQL DECLARE C CURSOR; EXEC SQL OPEN C; exec sql什么都没找到做破坏; for（;;）{EXEC SQL FETCH C INTO：student：student_ind; printStudent（学生）; } printf（“\ nQuery返回％d row％s。\ n”，sqlca.sqlerrd [2]，（sqlca.sqlerrd [2] == 1）？“”：“s”）; EXEC SQL CLOSE C; exec sql免费：student：student_ind; }</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC4361"></a><div class="props_rev_3"><a id="GUID-D043EC3F-5DE7-4D09-B858-E9617327D6CD" name="GUID-D043EC3F-5DE7-4D09-B858-E9617327D6CD"></a><h3 id="LNPCC-GUID-D043EC3F-5DE7-4D09-B858-E9617327D6CD" class="sect3"><span class="enumeration_section">17.11</span>导航访问的示例代码</h3>
               <div>
                  <div class="section">
                     <p>示例对象代码创建三种对象类型; <span class="italic">budoka</span>是一位武术专家：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>顾客</p>
                        </li>
                        <li>
                           <p>Budoka</p>
                        </li>
                        <li>
                           <p>地点</p>
                        </li>
                     </ul>
                     <p>和两个表：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">person_tab</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">customer_tab</code></p>
                        </li>
                     </ul>
                     <p>创建类型和表，然后在表中插入值的SQL文件<code class="codeph">navdemo1.sql</code>是：</p><pre class="oac_no_warn" dir="ltr">connect scott / tiger drop table customer_tab;跌落式客户; drop table person_tab; drop type budoka;掉落位置;创建类型位置作为对象（num number，street varchar2（60），city varchar2（30），state char（2），zip char（10））; / create type budoka as object（lastname varchar2（20），firstname varchar（20），birthdate date，age int，addr location）; / create table person_tab of budoka;创建类型客户作为对象（account_number varchar（20），aperson ref budoka）; / create table customer_tab of customer;插入person_tab值（budoka（'Seagal'，'Steven'，'14-FEB-1963'，34，location（1825，'Aikido Way'，'Los Angeles'，'CA'，45300）））;插入person_tab值（budoka（'Norris'，'Chuck'，'25 -DEC-1952'，45，location（291，'Grant Avenue'，'Hollywood'，'CA'，21003）））;插入person_tab值（budoka（'Wallace'，'Bill'，'29-FEB-1944'，53，location（874，'Richmond Street'，'New York'，'NY'，45100）））;插入person_tab值（budoka（'Van Damme'，'Jean Claude'，'12 -DEC-1964'，32，location（12，'Shugyo Blvd'，'Los Angeles'，'CA'，95100）））;插入customer_tab，从person_tab p中选择'AB123'，ref（p），其中p.lastname ='Seagal';插入customer_tab，从person_tab p中选择'DD492'，ref（p），其中p.lastname ='Norris';插入customer_tab，从person_tab p中选择'SM493'，ref（p），其中p.lastname ='Wallace';插入customer_tab，从person_tab p中选择'AC493'，ref（p），其中p.lastname ='Van Damme';承诺工作;</pre><p>以下是我们的示例<code class="codeph">navdemo1.typ</code>的intype文件<code class="codeph">navdemo1.typ</code> ：</p><pre class="oac_no_warn" dir="ltr">case =较低类型的位置类型budoka类型的客户</pre><p>OTT生成的头文件<code class="codeph">navdemo1.h</code>包含在带有<code class="codeph">#include</code>预处理器指令的预编译器代码中。
                     </p>
                     <p>阅读整个预编译器代码中的注释。该程序添加了一个新的budoka对象（成龙），然后打印出<span class="italic">customer_tab</span>表中的所有<span class="italic">客户</span> 。
                     </p>
                     <p>以下是预编译器文件<code class="codeph">navdemo1.pc</code> ：</p><pre class="oac_no_warn" dir="ltr">/ ******************* ************************ * *这是一个简单的Pro * C / C ++程序，旨在说明对象缓存中对象的*导航访问。* *构建可执行文件：* * 1。在SQL * Plus * 2中执行SQL脚本navdemo1.sql。运行OTT :(以下命令应出现在一行上）* ott intype = navdemo1.typ hfile = navdemo1.h outtype = navdemo1_o.typ * code = c user = scott / tiger * 3。使用Pro * C / C ++进行预编译：* proc navdemo1 intype = navdemo1_o.typ * 4。编译/链接（此步骤是特定于平台的）* *************************************** ********************************** / #include“navdemo1.h”#include &lt;stdio.h&gt;＃ include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;sqlca.h&gt; void whoops（errcode，errtext，errtextlen）int errcode; char * errtext; int errtextlen; {printf（“错误！sqlcode =％d：text =％。* s“，errcode，errtextlen，errtext）; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK WORK RELEASE; exit（EXIT_FAILURE）;} void main（）{char * uid =”scott / tiger“; / *以下类型由OTT生成并在navdemo1.h * / customer * cust_p中定义; / *指向客户对象的指针* / customer_ind * cust_ind; / *指向客户* / customer_ref * cust_ref的指标结构的指针; / *指向客户对象引用的指针* / budoka * budo_p; / *指向budoka对象的指针* / budoka_ref * budo_ref; / *指向budoka对象引用的指针* / budoka_ind * budo_ind; / *指向budoka指标结构的指针* / / *这些是用于插入/检索对象数据的数据声明* / VARCHAR acct [21]; struct {char lname [21]，fname [21]; int age;} pers; struct {int num; char street [61] ，city [31]，state [3]，zip [11];} addr; EXEC SQL WHENEVER SQLERROR DO whoops（sqlca.sqlcode，sqlca.sqlerrm.sqlerrmc，sqlca.sqlerrm.sqlerrml）; EXEC SQL CONNECT：uid; EXEC SQL ALLOCATE：budo_ref; / *使用关联的指标*变量创建一个新的budoka对象，同时将REF返回到该budoka。* / EXEC SQL OBJECT CREATE：budo_p：budo_ind TABLE PERSON_TAB RETURNING REF INTO：budo_ref; / *使用关联的指示符创建一个新的客户对象* / EXEC SQL OBJECT CREATE：cust_p：cust_ind TABLE CUSTOMER_TAB; / *将所有budoka指标设置为NOT NULL。我们*将设置budoka的所有属性。* / budo_ind  - &gt; _ atomic = budo_ind-&gt; lastname = budo_ind-&gt; firstname = budo_ind-&gt; age = OCI_IND_NOTNULL; / *我们还将设置budoka的所有地址属性* / budo_ind-&gt; addr._atomic = budo_ind-&gt; addr.num = budo_ind-&gt; addr.street = budo_ind-&gt; addr.city = budo_ind-&gt; addr.state = budo_ind - &gt; addr.zip = OCI_IND_NOTNULL; / *同样设置所有客户属性* / cust_ind  - &gt; _ atomic = cust_ind-&gt; account_number = cust_ind-&gt; aperson = OCI_IND_NOTNULL; / *将默认的CHAR语义设置为类型5（STRING）* / EXEC ORACLE OPTION（char_map = string）; strcpy（（char *）pers.lname，（char *）“Chan”）; strcpy（（char *）pers.fname，（char *）“Jackie”）; pers.age = 38; / *将本机C类型转换为OTS类型* / EXEC SQL OBJECT SET lastname，firstname，age OF：budo_p TO：pers; addr.num = 1893; strcpy（（char *）addr.street，（char *）“Rumble Street”）; strcpy（（char *）addr.city，（char *）“Bronx”）; strcpy（（char *）addr.state，（char *）“NY”）; strcpy（（char *）addr.zip，（char *）“92510”）; / *将本机C类型转换为OTS类型* / EXEC SQL OBJECT SET：budo_p-&gt; addr TO：addr; acct.len = strlen（strcpy（（char *）acct.arr，（char *）“FS926”））; / *将本机C类型转换为OTS类型 - 还要注意REF类型* / EXEC SQL OBJECT SET account_number，aperson OF：cust_p TO：acct，：budo_ref; / *标记为更新了新客户和budoka * / EXEC SQL OBJECT UPDATE：cust_p; EXEC SQL OBJECT UPDATE：budo_p; / *现在将更改刷新到服务器，有效*将数据插入相应的表中。* / EXEC SQL OBJECT FLUSH：budo_p; EXEC SQL OBJECT FLUSH：cust_p; / *来自CUSTOMER_TAB * / EXEC SQL DECLARE的REF的关联访问权限ref_cur CURSOR FOR SELECT REF（c）FROM customer_tab c; EXEC SQL OPEN ref_cur;的printf（ “\ n”）; / *将REF分配给客户，以便在以下* / EXEC SQL ALLOCATE中使用：cust_ref; EXEC SQL WHENEVER NOT FOUND DO break; while（1）{EXEC SQL FETCH ref_cur INTO：cust_ref; / *固定客户REF，返回指向客户对象的指针* / EXEC SQL OBJECT DEREF：cust_ref INTO：cust_p：cust_ind; / *将OTS类型转换为本机C类型* / EXEC SQL OBJECT GET account_number FROM：cust_p INTO：acct; printf（“客户帐户是％。* s \ n”，acct.len，（char *）acct.arr）; / *固定budoka REF，返回指向budoka对象的指针* / EXEC SQL OBJECT DEREF：cust_p-&gt; aperson INTO：budo_p：budo_ind; / *将OTS类型转换为本机C类型* / EXEC SQL OBJECT GET lastname，firstname，age FROM：budo_p INTO：pers; printf（“姓氏：％s \ n第一名：％s \ nAge：％d \ n”，pers.lname，pers.fname，pers.age）; / *对地址属性也一样* / EXEC SQL OBJECT GET：budo_p-&gt; addr INTO：addr;的printf（ “地址：\ n”）; printf（“街道：％d％s \ n城市：％s \ n状态：％s \ n Zip：％s \ n \ n”，addr.num，addr.street，addr.city，addr.state，addr 。压缩）; / *取消固定客户对象和budoka对象* / EXEC SQL OBJECT RELEASE：cust_p; EXEC SQL OBJECT RELEASE：budo_p; } EXEC SQL CLOSE ref_cur;执行SQL WHENEVER NOT FOUND DO whoops（sqlca.sqlcode，sqlca.sqlerrm.sqlerrmc，sqlca.sqlerrm.sqlerrml）; / *关联地选择新创建的客户对象* / EXEC SQL SELECT VALUE（c）INTO：cust_p FROM customer_tab c WHERE c.account_number ='FS926'; / *标记为删除了新的客户对象* / EXEC SQL OBJECT DELETE：cust_p; / *刷新更改，有效删除客户对象* / EXEC SQL OBJECT FLUSH：cust_p; / *以相关方式为新创建的budoka对象选择REF * / EXEC SQL SELECT REF（p）INTO：budo_ref FROM person_tab p WHERE p.lastname ='Chan'; / *固定budoka REF，返回指向budoka对象的指针* / EXEC SQL OBJECT DEREF：budo_ref INTO：budo_p; / *在对象缓存中将新的budoka对象标记为已删除* / EXEC SQL OBJECT DELETE：budo_p; / *刷新更改，有效删除budoka对象* / EXEC SQL OBJECT FLUSH：budo_p; / *最后，释放所有对象缓存并注销* / EXEC SQL OBJECT CACHE FREE ALL; EXEC SQL COMMIT WORK RELEASE;出口（EXIT_SUCCESS）; }</pre><p>执行程序时，结果是：</p><pre class="oac_no_warn" dir="ltr">客户账户是AB123姓氏：Seagal名字：Steven出生日期：02-14-1963年龄：34地址：街道：1825 Aikido Way城市：洛杉矶州：CA邮编：45300客户账号是DD492姓：Norris名：查克出生日期：12-25-1952年龄：45地址：街道：291 Grant Avenue城市：好莱坞州：CA邮编：21003客户帐号是SM493姓：Wallace名字：比尔出生日期：02-29-1944年龄：53地址：街道：874 Richmond Street城市：纽约州：NY邮编：45100客户帐户是AC493姓氏：Van Damme名字：Jean Claude出生日期：12-12-1965年龄：32地址：街道：12 Shugyo Blvd城市：Los安吉利斯州：CA邮编：95100客户账户是FS926姓氏：Chan名字：Jackie出生日期：10-10-1959年龄：38地址：街道：1893 Rumble Street城市：布朗克斯州：NY邮编：92510</pre><div class="infoboxnotealso" id="GUID-D043EC3F-5DE7-4D09-B858-E9617327D6CD__GUID-6AF8007F-0CB2-4730-9737-A84AB4169536">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="the-Object-type.html#GUID-030B4AA0-E54B-438C-B0A1-C3BE7ADF1530">OTT命令行</a> ”，</span>用于描述intype文件的格式</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC4362"></a><div class="props_rev_3"><a id="GUID-991F2F64-910B-46AD-AF38-BCAB90EACA88" name="GUID-991F2F64-910B-46AD-AF38-BCAB90EACA88"></a><h3 id="LNPCC-GUID-991F2F64-910B-46AD-AF38-BCAB90EACA88" class="sect3"><span class="enumeration_section">17.12</span>关于使用C结构</h3>
               <div>
                  <p>在Oracle8之前，Pro * C / C ++允许您在SQL SELECT语句中将C结构指定为单个主机变量。在这种情况下，结构的每个成员都对应于关系表中的单个数据库列;也就是说，每个成员代表查询返回的选择列表中的单个项目。</p>
                  <p>在Oracle8 <span class="italic">i</span>及更高版本中，数据库中的对象类型是单个实体，可以选择为单个项目。这引入了Oracle7表示法的模糊性：是一组标量变量或一个对象的结构？
                  </p>
                  <p>Pro * C / C ++使用以下规则来解决歧义：</p>
                  <p>仅当C语言的C语句是使用OTT生成的C语句时，它才被视为表示对象类型，因此其类型描述出现在Pro * C / C ++的INTYPE选项中指定的类型文件中。假设所有其他主机结构都使用Oracle7语法，即使数据库中存在同名的数据类型也是如此。</p>
                  <p>因此，如果使用与现有结构主机变量类型具有相同名称的新对象类型，请注意Pro * C / C ++使用INTYPE文件中的对象类型定义。这可能导致编译错误。要更正此问题，您可以重命名现有的主机变量类型，或使用OTT为对象类型选择新名称。</p>
                  <p>前面的规则可<span class="italic">传递</span>地扩展到用户定义的数据类型，这些数据类型别名为OTT生成的数据类型。为了说明，让<span class="italic">emptype</span>成为OTT在头文件<code class="codeph">dbtypes.h</code>生成的结构，并且在Pro * C / C ++程序中有以下语句：</p><pre class="oac_no_warn" dir="ltr">#include &lt;dbtypes.h&gt; typedef emptype myemp; myemp *员工;</pre><p>对于在数据库中定义的某种对象类型，变量<span class="italic">employee</span>的typename <span class="italic">myemp</span>别名为OTT生成的typename <span class="italic">emptype</span> 。因此，Pro * C / C ++认为变量<span class="italic">employee</span>表示对象类型。
                  </p>
                  <p>前面的规则并不意味着具有或混淆了OTT生成类型的C结构不能用于非对象类型数据的提取。唯一的含义是Pro * C / C ++不会自动扩展这样的结构 - 用户可以自由地使用“longhand语法”并使用结构的各个字段来选择或更新单个数据库列。</p>
               </div>
            </div><a id="LNPCC4363"></a><div class="props_rev_3"><a id="GUID-FFF48576-9D39-48D2-A199-D5E5E6B447E5" name="GUID-FFF48576-9D39-48D2-A199-D5E5E6B447E5"></a><h3 id="LNPCC-GUID-FFF48576-9D39-48D2-A199-D5E5E6B447E5" class="sect3"><span class="enumeration_section">17.13</span>关于使用REF</h3>
               <div>
                  <p>REF类型表示对对象的引用，而不是对象本身。REF类型可能出现在关系列中，也可能出现在对象类型的属性中。</p>
               </div><a id="LNPCC4364"></a><div class="sect3"><a id="GUID-0C3D9579-3BA1-49C6-8863-C37CB90B6D01" name="GUID-0C3D9579-3BA1-49C6-8863-C37CB90B6D01"></a><h4 id="LNPCC-GUID-0C3D9579-3BA1-49C6-8863-C37CB90B6D01" class="sect4"><span class="enumeration_section">17.13.1</span>为REF生成C结构</h4>
                  <div>
                     <p>在类型转换期间由OTT生成对象类型的REF的C表示。例如，对数据库中用户定义的PERSON类型的引用可以用C表示为类型“Person_ref”。确切的类型名称由类型转换期间生效的OTT选项确定。必须在Pro * C / C ++的INTYPE选项和Pro * C / C ++程序中的OTT生成的头文件#include中指定OTT生成的类型文件。此方案确保在预编译期间可以通过Pro * C / C ++执行对REF的正确类型检查。</p>
                     <p>REF类型不需要OTT生成特殊指标结构;使用标量签名的2字节指示符代替。</p>
                  </div>
               </div><a id="LNPCC4365"></a><div class="sect3"><a id="GUID-9B54C69F-9879-4453-AFA4-BCF7AEAA66E0" name="GUID-9B54C69F-9879-4453-AFA4-BCF7AEAA66E0"></a><h4 id="LNPCC-GUID-9B54C69F-9879-4453-AFA4-BCF7AEAA66E0" class="sect4"><span class="enumeration_section">17.13.2</span>声明REF</h4>
                  <div>
                     <p>必须将表示Pro * C / C ++中的REF的主变量声明为指向相应OTT生成类型的指针。</p>
                     <p>与对象类型不同，REF的指示符变量被声明为带符号的2字节标量类型<code class="codeph">OCIInd</code> 。与往常一样，指标变量是可选的，但对于声明的每个主变量使用一个是一个很好的编程习惯。
                     </p>
                  </div>
               </div><a id="LNPCC4366"></a><div class="sect3"><a id="GUID-EB0A6C41-6D1D-4E32-9855-B6C0544323F9" name="GUID-EB0A6C41-6D1D-4E32-9855-B6C0544323F9"></a><h4 id="LNPCC-GUID-EB0A6C41-6D1D-4E32-9855-B6C0544323F9" class="sect4"><span class="enumeration_section">17.13.3</span>在嵌入式SQL中使用REF</h4>
                  <div>
                     <p>REF驻留在对象缓存中。但是，REF的指标是标量，无法在缓存中分配。它们通常驻留在用户堆栈中。</p>
                     <p>在嵌入式SQL中使用REF的主机结构之前，请使用EXEC SQL ALLOCATE命令在对象缓存中为其分配空间。使用后，免费使用EXEC SQL FREE或EXEC SQL CACHE FREE ALL命令。</p>
                     <p>标量指示符变量的内存未在对象缓存中分配，因此不允许在REF类型的ALLOCATE和FREE命令中显示指示符。声明为<code class="codeph">OCIInd</code>标量指标驻留在程序堆栈中。在运行时，ALLOCATE语句会在对象高速缓存中为指定的主机变量分配空间。对于导航界面，请使用EXEC SQL GET和EXEC SQL SET，而不是C赋值。
                     </p>
                     <p>Pro * C / C ++支持关联SQL语句和嵌入式PL / SQL块中的REF主变量。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="about-Objects.html#GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7">导航界面</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="LNPCC4367"></a><div class="props_rev_3"><a id="GUID-35C1DD18-7C3F-437E-A9DF-B9B2CE76DF2A" name="GUID-35C1DD18-7C3F-437E-A9DF-B9B2CE76DF2A"></a><h3 id="LNPCC-GUID-35C1DD18-7C3F-437E-A9DF-B9B2CE76DF2A" class="sect3"><span class="enumeration_section">17.14</span>关于使用OCIDate，OCIString，OCINumber和OCIRaw</h3>
               <div>
                  <p>这些OCI类型分别是日期的新C表示，变长的零终止字符串，Oracle编号和变长二进制数据。在某些情况下，这些类型提供的功能比这些数量的早期C表示更多。例如，OCIDate类型提供客户端例程来执行DATE算法，在早期版本中需要在服务器上使用SQL语句。</p>
               </div><a id="LNPCC4368"></a><div class="props_rev_3"><a id="GUID-88345D8C-14D5-44E7-B16E-A95C235A84EC" name="GUID-88345D8C-14D5-44E7-B16E-A95C235A84EC"></a><h4 id="LNPCC-GUID-88345D8C-14D5-44E7-B16E-A95C235A84EC" class="sect4"><span class="enumeration_section">17.14.1</span>声明OCIDate，OCIString，OCINumber，OCIRaw</h4>
                  <div>
                     <p>OCI *类型在OTT生成的结构中显示为对象类型属性，并且您将它们用作Pro * C / C ++程序中对象类型的一部分。除了在对象类型中使用它们之外，Oracle建议初学者级别的C和Pro * C / C ++用户避免声明这些类型的单个主机变量。有经验的Pro * C / C ++用户可能希望声明这些类型的C主机变量，以利用这些类型提供的高级功能。必须将主变量声明为指向这些类型的指针，例如， <code class="codeph">OCIString *s</code> 。相关（可选）指标是标量符号的2字节数量，例如， <code class="codeph">OCIInd s_ind</code> 。
                     </p>
                  </div>
               </div><a id="LNPCC4369"></a><div class="props_rev_3"><a id="GUID-33C9478A-E174-437A-8B78-2536DC9E63BE" name="GUID-33C9478A-E174-437A-8B78-2536DC9E63BE"></a><h4 id="LNPCC-GUID-33C9478A-E174-437A-8B78-2536DC9E63BE" class="sect4"><span class="enumeration_section">17.14.2</span>在嵌入式SQL中使用OCI类型</h4>
                  <div>
                     <p>可以使用EXEC SQL ALLOCATE在对象缓存中分配这些类型的主机变量的空间。标量指示符变量不允许出现在这些类型的ALLOCATE和FREE命令中。您可以在堆栈上静态分配这些指标，也可以在堆上动态分配。可以使用语句EXEC SQL FREE，EXEC SQL CACHE FREE ALL或在会话结束时自动解除空间分配。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="about-Objects.html#GUID-1DB5F60D-55C9-4565-93D9-B155A86BB0C7">导航界面</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4370"></a><div class="props_rev_3"><a id="GUID-F00719A9-17D4-409C-A072-360B7459B9EA" name="GUID-F00719A9-17D4-409C-A072-360B7459B9EA"></a><h4 id="LNPCC-GUID-F00719A9-17D4-409C-A072-360B7459B9EA" class="sect4"><span class="enumeration_section">17.14.3</span>操作OCI类型</h4>
                  <div>
                     <p>除了<code class="codeph">OCIDate</code> ，它是具有各种日期组件的单独字段的结构类型：年，月，日，小时等，其他OCI类型被封装，并且对外部用户来说是不透明的。与目前在Pro * C / C ++中处理现有C类型（如VARCHAR）的方式相比，您包含OCI头文件<code class="codeph">oci.h</code>并使用其函数执行DATE算法，并将这些类型转换为本机C类型和从本机C类型转换如<span class="italic">int</span> ， <span class="italic">char</span>等。
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC4372"></a><a id="LNPCC4373"></a><a id="LNPCC4371"></a><div class="props_rev_3"><a id="GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75" name="GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75"></a><h3 id="LNPCC-GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75" class="sect3"><span class="enumeration_section">17.15</span>总结Pro * C / C ++中的新数据库类型</h3>
               <div>
                  <div class="section">
                     <p><a href="about-Objects.html#GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75__BAJDEAAI" title="在Pro * C / C ++中使用新的数据库类型">表17-2</a>列出了对象支持的新数据库类型：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75__BAJDEAAI">
                     <p class="titleintable">表17-2在Pro * C / C ++中使用新数据库类型</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="在Pro * C / C ++中使用新的数据库类型" width="100%" border="1" summary="Using New Database Types in Pro*C/C++" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="18%" id="d93390e3179">操作数据库类型</th>
                              <th align="left" valign="bottom" width="15%" id="d93390e3183">宣布</th>
                              <th align="left" valign="bottom" width="21%" id="d93390e3187">分配</th>
                              <th align="left" valign="bottom" width="24%" id="d93390e3191">自由</th>
                              <th align="left" valign="bottom" width="23%" id="d93390e3195">操纵</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d93390e3201" headers="d93390e3179 ">
                                 <p>对象类型</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d93390e3201 d93390e3183 ">
                                 <p><span class="bold">主机</span> ：指向OTT生成的C结构的指针</p>
                                 <p><span class="bold">指标</span> ：指向OTT生成的指标结构的指针</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d93390e3201 d93390e3187 ">
                                 <p>关联接口：</p>
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>导航界面：</p>
                                 <p>EXEC SQL OBJECT CREATE ...</p>
                                 <p>EXEC SQL OBJECT DEREF</p>
                                 <p>为对象缓存中的主机var和指示器分配内存</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d93390e3201 d93390e3191 ">
                                 <p>通过EXEC SQL FREE或EXEC SQL CACHE FREE ALL释放，或在会话结束时自动释放。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d93390e3201 d93390e3195 ">
                                 <p>取消引用C指针以获取每个属性。操纵方法取决于属性的类型（见后面）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d93390e3233" headers="d93390e3179 ">
                                 <p>COLLECTION对象类型</p>
                                 <p>（嵌套表和不同的阵列）</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d93390e3233 d93390e3183 ">
                                 <p><span class="bold">主机</span> ：指向OTT生成的C结构的指针</p>
                                 <p><span class="bold">指标</span> ：OCIInd</p>
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d93390e3233 d93390e3187 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>为对象缓存中的主机var分配内存。</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d93390e3233 d93390e3191 ">
                                 <p>通过EXEC SQL FREE或EXEC SQL CACHE FREE ALL释放，或在会话结束时自动释放。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d93390e3233 d93390e3195 ">
                                 <p>使用OCIColl *函数（在oci.h中定义）来获取/设置元素。另见<a href="about-Collections.html#GUID-BCAD71D2-D01D-40C8-8BAD-08902363ECDA">集合</a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d93390e3264" headers="d93390e3179 ">
                                 <p>REF</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d93390e3264 d93390e3183 ">
                                 <p><span class="bold">主机：</span>指向OTT生成的C结构的指针</p>
                                 <p><span class="bold">指标：</span> OCIInd</p>
                                 <p></p>
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d93390e3264 d93390e3187 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>为对象缓存中的主机var分配内存。</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d93390e3264 d93390e3191 ">
                                 <p>通过EXEC SQL FREE或EXEC SQL CACHE FREE ALL释放，或在会话结束时自动释放。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d93390e3264 d93390e3195 ">
                                 <p>使用EXEC SQL OBJECT DEREF</p>
                                 <p>使用EXEC SQL OBJECT SET / GET进行导航界面。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d93390e3292" headers="d93390e3179 ">
                                 <p>高球</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d93390e3292 d93390e3183 ">
                                 <p><span class="bold">主办：</span> 
                                 </p>
                                 <p>OCIBlobLocator *，OCIClobLocator *或OCIBfileLocator *。</p>
                                 <p><span class="bold">指标：</span> OCIInd</p>
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d93390e3292 d93390e3187 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>使用for为用户堆中的主机var分配内存</p>
                                 <p>malloc（）函数。</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d93390e3292 d93390e3191 ">
                                 <p>由EXEC SQL FREE释放，或在所有Pro * C / C ++连接关闭时自动释放。EXEC SQL CACHE FREE ALL仅释放对象的LOB属性。</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d93390e3292 d93390e3195 ">
                                 <p>或者在dbms_lob包中使用嵌入式PL / SQL存储过程，或者</p>
                                 <p>使用oci.h中定义的OCILob *函数。</p>
                                 <p>另见<span class="q">“ <a href="about-LOBs.html#GUID-DEBB0C35-161B-4725-BE0D-A209B64B98A2">LOB</a> ”</span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d93390e3330" headers="d93390e3179 ">
                                 <p><span class="bold">注意：</span> 
                                 </p>
                                 <p>可以在Pro * C / C ++中批量获取/插入SQL操作中声明和使用这些类型的主机数组。</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d93390e3330 d93390e3183 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d93390e3330 d93390e3187 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d93390e3330 d93390e3191 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d93390e3330 d93390e3195 ">
                                 <p>-</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p> <a href="about-Objects.html#GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75__BAJDBAEC" title="在Pro * C / C ++中使用新的C数据类型">表17-3</a>显示了如何在Pro * C / C ++中使用新的C数据类型：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75__BAJDBAEC">
                     <p class="titleintable">表17-3在Pro * C / C ++中使用新的C数据类型</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="在Pro * C / C ++中使用新的C数据类型" width="100%" border="1" summary="Using New C Datatypes in Pro*C/C++" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d93390e3370">OperationsC类型</th>
                              <th align="left" valign="bottom" width="20%" id="d93390e3375">宣布</th>
                              <th align="left" valign="bottom" width="20%" id="d93390e3378">分配</th>
                              <th align="left" valign="bottom" width="20%" id="d93390e3381">自由</th>
                              <th align="left" valign="bottom" width="20%" id="d93390e3384">操纵</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d93390e3389" headers="d93390e3370 ">
                                 <p>OCIDate</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3389 d93390e3375 ">
                                 <p><span class="bold">主持人：</span> OCIDate *</p>
                                 <p><span class="bold">指标：</span> OCIInd</p>
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3389 d93390e3378 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>为对象缓存中的主机var分配内存</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3389 d93390e3381 ">
                                 <p>通过EXEC SQL FREE或EXEC SQL CACHE FREE ALL释放，或在会话结束时自动释放。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3389 d93390e3384 ">
                                 <p>（1）使用oci.h中定义的OCIDate *函数。</p>
                                 <p>（2）使用EXEC SQL OBJECT GET / SET，或</p>
                                 <p>（3）使用oci.h中定义的OCINumber *函数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d93390e3418" headers="d93390e3370 ">
                                 <p>OCINumber</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3418 d93390e3375 ">
                                 <p><span class="bold">主持人：</span> OCINumber *</p>
                                 <p><span class="bold">指标：</span> OCIInd</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3418 d93390e3378 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>为对象缓存中的主机var分配内存</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3418 d93390e3381 ">
                                 <p>通过EXEC SQL FREE或EXEC SQL CACHE FREE ALL释放，或在会话结束时自动释放。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3418 d93390e3384 ">
                                 <p>（1）使用EXEC SQL OBJECT GET / SET，或</p>
                                 <p>（2）使用oci.h中定义的OCINumber *函数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d93390e3444" headers="d93390e3370 ">
                                 <p>OCIRaw</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3444 d93390e3375 ">
                                 <p><span class="bold">主持人：</span> OCIRaw *</p>
                                 <p><span class="bold">指标：</span> OCIInd</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3444 d93390e3378 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>为对象缓存中的主机var分配内存</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3444 d93390e3381 ">
                                 <p>通过EXEC SQL FREE或EXEC SQL CACHE FREE ALL释放，或在会话结束时自动释放。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3444 d93390e3384 ">
                                 <p>使用oci.h中定义的OCIRaw *函数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d93390e3468" headers="d93390e3370 ">
                                 <p>OCIString</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3468 d93390e3375 ">
                                 <p><span class="bold">主持人：</span> OCIString *</p>
                                 <p><span class="bold">指标：</span> OCIInd</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3468 d93390e3378 ">
                                 <p>EXEC SQL ALLOCATE</p>
                                 <p>为对象缓存中的主机var分配内存</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3468 d93390e3381 ">
                                 <p>EXEC SQL FREE，或EXEC SQL CACHE FREE ALL，或在会话结束时自动执行。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3468 d93390e3384 ">
                                 <p>（1）使用EXEC SQL OBJECT GET / SET，或</p>
                                 <p>（2）使用oci.h中定义的OCIString *函数。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d93390e3494" headers="d93390e3370 ">
                                 <p><span class="bold">注意：</span></p>
                                 <p>这些类型的主机阵列不能用于Pro * C / C ++中的批量获取/插入SQL操作。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3494 d93390e3375 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3494 d93390e3378 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3494 d93390e3381 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d93390e3494 d93390e3384 ">
                                 <p>-</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>Oracle8的新数据类型是Ref，BLOB，NCLOB，CLOB和BFILE。这些类型可用于对象或关系列。在任何一种情况下，它们都根据C绑定映射到主机变量。</p>
                     <div class="infoboxnotealso" id="GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75__GUID-0D85FB55-978F-42E1-B74B-671C7BC1D381">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="about-Objects.html#GUID-D46CF7DA-22AD-4EC7-ABAE-6376E344CE75">总结Pro * C / C ++中的新数据库类型</a> ”</span>以获取C绑定的描述</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC4374"></a><div class="props_rev_3"><a id="GUID-4D7E09CE-34ED-4516-A129-83A7BCD82443" name="GUID-4D7E09CE-34ED-4516-A129-83A7BCD82443"></a><h3 id="LNPCC-GUID-4D7E09CE-34ED-4516-A129-83A7BCD82443" class="sect3"><span class="enumeration_section">17.16</span>在动态SQL中使用Oracle数据类型的限制</h3>
               <div>
                  <p>Pro * C / C ++目前支持这些不同类型的动态SQL方法：方法1,2,3和4（ANSI和Oracle）。</p>
                  <p>动态方法1,2和3将处理前面提到的所有Pro * C / C ++扩展，包括新对象类型，REF，嵌套表，变化数组，NCHAR，NCHAR变量和LOB类型。</p>
                  <p>较旧的Dynamic SQL方法4通常仅限于8.0版之前的Pro * C / C ++支持的Oracle类型。它确实允许NCHAR，NCHAR Varying和LOB数据类型的主机变量。动态方法4不适用于对象类型，嵌套表，变量数组和REF类型。</p>
                  <p>相反，对所有新应用程序使用ANSI动态SQL方法4，因为它支持Oracle8 <span class="italic">i中</span>引入的所有数据类型。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="Oracle-dynamic-SQL.html#GUID-3B9E253A-F03D-431D-A77E-84C02C43F494">Oracle动态SQL</a></li>
                        <li><a href="ANSI-dynamic-SQL.html#GUID-BF450DA3-B05F-403E-B5DF-C967A20524BF">ANSI动态SQL</a></li>
                        <li><a href="Oracle-dynamic-SQL-method-4.html#GUID-B516B7C8-1859-4A54-B15D-DF0C3D3C474D">Oracle动态SQL：方法4</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="00257.managing-archived-redo-log-files.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You manage the archived redo log files by completing tasks such as choosing between NOARCHIVELOG or ARCHIVELOG mode and specifying archive destinations."></meta>
      <meta name="description" content="You manage the archived redo log files by completing tasks such as choosing between NOARCHIVELOG or ARCHIVELOG mode and specifying archive destinations."></meta>
      <title>管理存档的重做日志文件</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="You manage the archived redo log files by completing tasks such as choosing between NOARCHIVELOG or ARCHIVELOG mode and specifying archive destinations."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-the-redo-log.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-tablespaces.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-the-redo-log.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-tablespaces.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-structure-and-storage.html" property="item" typeof="WebPage"><span property="name">Oracle数据库结构和存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理存档的重做日志文件</li>
            </ol>
            <a id="GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" name="GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3"></a><a id="ADMIN008"></a>
            
            <h2 id="ADMIN-GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" class="sect2"><span class="enumeration_chapter">12</span>管理存档的重做日志文件</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以通过完成<code class="codeph">NOARCHIVELOG</code>或<code class="codeph">ARCHIVELOG</code>模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-9BD00F2E-DC98-4871-8D26-FDB40623909C">归档重做日志是什么？</a><br>Oracle数据库允许您将已填充的重做日志文件组保存到一个或多个脱机目标，统称为<span class="bold">归档重做日志</span> 。
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1">在NOARCHIVELOG和ARCHIVELOG模式之间选择</a><br>您必须在<code class="codeph">NOARCHIVELOG</code>或<code class="codeph">ARCHIVELOG</code>模式下运行数据库。
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C">控制存档</a><br>您可以为数据库设置存档模式并调整存档过程的数量。
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8">指定存档目标</a><br>在归档重做日志之前，必须确定要归档的目标，并熟悉各种目标状态。
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB">关于日志传输模式</a><br>将归档日志传输到目的地的两种模式是<span class="bold">正常归档传输</span>和<span class="bold">备用传输</span>模式。正常传输涉及将文件传输到本地磁盘。备用传输涉及通过网络将文件传输到本地或远程备用数据库。
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA">管理存档目标失败</a><br>有时归档目标可能会失败，导致在自动归档模式下运行时出现问题。Oracle数据库提供的过程可帮助您最大限度地减少与目标故障相关的问
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-CDFE66B4-7448-4FC8-A676-58B20FF5CC25">控制Archivelog进程生成的跟踪输出</a><br>后台进程始终在适当时写入跟踪文件。对于archivelog进程，您可以控制生成到跟踪文件的输出。
                  </li>
                  <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-62E48748-F8A8-4740-90B1-5B3708A63386">查看有关存档重做日志的信息</a><br>您可以使用动态性能视图或<code class="codeph">ARCHIVE</code> <code class="codeph">LOG</code> <code class="codeph">LIST</code>命令显示有关归档重做日志的信息。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3__GUID-75537103-BDE9-4B7D-A412-013680BB2C60">
                  <p class="notep1">也可以看看：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-oracle-managed-files.html#GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" title="Oracle数据库可以管理组成数据库的文件。">使用Oracle Managed Files</a>获取有关创建由Oracle数据库服务器创建和管理的归档重做日志的信息</p>
                     </li>
                     <li>
                        <p><a href="../racad/configuring-recovery-manager-and-archiving.html#RACAD325" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”</span></a> ，了解有关在Oracle Real Application Clusters环境中归档的信息</p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-database-structure-and-storage.html#GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" title="您可以创建和管理数据库结构和存储组件。">Oracle数据库结构和存储</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN11329"></a><div class="props_rev_3"><a id="GUID-9BD00F2E-DC98-4871-8D26-FDB40623909C" name="GUID-9BD00F2E-DC98-4871-8D26-FDB40623909C"></a><h3 id="ADMIN-GUID-9BD00F2E-DC98-4871-8D26-FDB40623909C" class="sect3"><span class="enumeration_section">12.1</span>什么是归档重做日志？
               </h3>
               <div>
                  <p>Oracle数据库允许您将已填充的重做日志文件组保存到一个或多个脱机目标，统称为<span class="bold">归档重做日志</span> 。
                  </p>
                  <p>将重做日志文件转换为归档重做日志文件的过程称为<span class="bold">归档</span> 。只有在数据库以<span class="bold"><code class="codeph">ARCHIVELOG</code></span> <span class="bold">模式</span>运行时，才能执行此过程。您可以选择自动或手动存档。
                  </p>
                  <p>归档重做日志文件是重做日志组的一个已填充成员的副本。它包括重做条目和重做日志组的相同成员的唯一日志序列号。例如，如果要复用重做日志，并且组1包含相同的成员文件<code class="codeph">a_log1</code>和<code class="codeph">b_log1</code> ，则归档进程（ARC <span class="italic">n</span> ）将归档其中一个成员文件。如果<code class="codeph">a_log1</code>损坏，则ARC <span class="italic">n</span>仍然可以归档相同的<code class="codeph">b_log1</code> 。归档重做日志包含自您启用归档后创建的每个组的副本。
                  </p>
                  <p>当数据库在<code class="codeph">ARCHIVELOG</code>模式下运行时，日志写入器进程（LGWR）无法重用，因此会覆盖重做日志组，直到它被归档为止。后台进程ARC <span class="italic">n</span>在启用自动存档时自动执行存档操作。数据库根据需要启动多个归档进程，以确保填充的重做日志的归档不会落后。
                  </p>
                  <p>您可以使用存档的重做日志文件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>恢复数据库</p>
                     </li>
                     <li>
                        <p>更新备用数据库</p>
                     </li>
                     <li>
                        <p>使用LogMiner实用程序获取有关数据库历史记录的信息</p>
                        <div class="infoboxnotealso" id="GUID-9BD00F2E-DC98-4871-8D26-FDB40623909C__GUID-D4879D41-5849-4121-8B76-8ABC85ADE92F">
                           <p class="notep1">也可以看看：</p>
                           <p>以下来源记录了归档重做日志文件的用法：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../bradv/index.html" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a></p>
                              </li>
                              <li>
                                 <p><a href="../sbydb/index.html" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a>讨论了设置和维护备用数据库</p>
                              </li>
                              <li>
                                 <p><a href="../sutil/oracle-logminer-utility.html#SUTIL019" target="_blank"><span class="italic">Oracle数据库实用程序</span></a>包含有关使用LogMiner PL / SQL程序包的说明</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11330"></a><div class="props_rev_3"><a id="GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1" name="GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1"></a><h3 id="ADMIN-GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1" class="sect3"><span class="enumeration_section">12.2</span>在NOARCHIVELOG和ARCHIVELOG模式之间选择</h3>
               <div>
                  <p>您必须在<code class="codeph">NOARCHIVELOG</code>或<code class="codeph">ARCHIVELOG</code>模式下运行数据库。
                  </p>
                  <p>是否启用已填充的重做日志文件归档的选择取决于在数据库上运行的应用程序的可用性和可靠性要求。如果在磁盘发生故障时无法丢失数据库中的任何数据，请使用<code class="codeph">ARCHIVELOG</code>模式。填充的重做日志文件的归档可能需要您执行额外的管理操作。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-21A9A3AC-1D90-4848-B3BB-3A9E797547F8">在NOARCHIVELOG模式下运行数据库</a><br>在<code class="codeph">NOARCHIVELOG</code>模式下运行数据库时，将禁用重做日志的归档。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A">在ARCHIVELOG模式下运行数据库</a><br>在<code class="codeph">ARCHIVELOG</code>模式下运行数据库时，将启用重做日志的归档。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11331"></a><div class="props_rev_3"><a id="GUID-21A9A3AC-1D90-4848-B3BB-3A9E797547F8" name="GUID-21A9A3AC-1D90-4848-B3BB-3A9E797547F8"></a><h4 id="ADMIN-GUID-21A9A3AC-1D90-4848-B3BB-3A9E797547F8" class="sect4"><span class="enumeration_section">12.2.1</span>在NOARCHIVELOG模式下运行数据库</h4>
                  <div>
                     <p>在<code class="codeph">NOARCHIVELOG</code>模式下运行数据库时，将禁用重做日志的归档。
                     </p>
                     <p>数据库控制文件指示不需要存档已填充的组。因此，当填充组在日志切换后变为非活动状态时，该组可供LGWR重用。</p>
                     <p><code class="codeph">NOARCHIVELOG</code>模式可以保护数据库免受实例故障的影响，但不能防止介质故障。只有对数据库所做的最新更改（存储在联机重做日志组中）才可用于实例恢复。如果在数据库处于<code class="codeph">NOARCHIVELOG</code>模式时发生介质故障，则只能将数据库还原到最新的完整数据库备份点。您无法恢复该备份之后的事务。
                     </p>
                     <p>在<code class="codeph">NOARCHIVELOG</code>模式下，您无法执行联机表空间备份，也无法在数据库处于<code class="codeph">ARCHIVELOG</code>模式时使用先前采用的联机表空间备份。要还原在<code class="codeph">NOARCHIVELOG</code>模式下运行的数据库，只能在数据库关闭时使用整个数据库备份。因此，如果您决定在<code class="codeph">NOARCHIVELOG</code>模式下操作数据库，请定期，频繁地进行整个数据库备份。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1" title="您必须在NOARCHIVELOG或ARCHIVELOG模式下运行数据库。">在NOARCHIVELOG和ARCHIVELOG模式之间进行选择</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13042"></a><a id="ADMIN11332"></a><div class="props_rev_3"><a id="GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A" name="GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A"></a><h4 id="ADMIN-GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A" class="sect4"><span class="enumeration_section">12.2.2</span>在ARCHIVELOG模式下运行数据库</h4>
                  <div>
                     <p>在<code class="codeph">ARCHIVELOG</code>模式下运行数据库时，将启用重做日志的归档。
                     </p>
                     <p>数据库控制文件指示LGWR无法重复使用一组已填充的重做日志文件，直到该组被归档为止。在重做日志切换发生后，填充组可立即进行存档。</p>
                     <p>填充组的归档具有以下优点：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库备份以及联机和归档重做日志文件可确保您可以在操作系统或磁盘发生故障时恢复所有已提交的事务。</p>
                        </li>
                        <li>
                           <p>如果保留存档日志，则可以在数据库打开和正常系统使用时使用备份。</p>
                        </li>
                        <li>
                           <p>通过将原始归档重做日志文件连续应用到备用数据库，可以使备用数据库与其原始数据库保持同步。</p>
                        </li>
                     </ul>
                     <p>您可以配置实例以自动存档已填充的重做日志文件，也可以手动存档。为了方便和高效，自动存档通常是最好的。 <a href="managing-archived-redo-log-files.html#GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A__i1006201">图12-1</a>说明了归档程序进程（本图中的ARC0）如何将填充的重做日志文件写入数据库归档重做日志。
                     </p>
                     <p>如果分布式数据库中的所有数据库都以<code class="codeph">ARCHIVELOG</code>模式运行，则可以执行协调的分布式数据库恢复。但是，如果分布式数据库中的任何数据库处于<code class="codeph">NOARCHIVELOG</code>模式，则恢复全局分布式数据库（使所有数据库保持一致）受限于在<code class="codeph">NOARCHIVELOG</code>模式下运行的任何数据库的上次完全备份。
                     </p>
                     <div class="figure" id="GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A__i1006201">
                        <p class="titleinfigure">图12-1 ARCHIVELOG模式下的重做日志文件使用</p><img src="img/admin056.gif" width="422" alt="下面是图12-1的描述" title="下面是图12-1的描述" longdesc="img_text/admin056.html"><br><a href="img_text/admin056.html">“图12-1在ARCHIVELOG模式下使用重做日志文件”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infobox-tip" id="GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A__GUID-EFBED8B0-1B95-42C2-B9EB-9CDE90505FC3">
                        <p class="notep1">小费：</p>
                        <p>将归档的重做日志文件和相应的数据库备份从本地磁盘移动到永久脱机存储介质（如磁带）是一种很好的做法。归档日志的主要值是数据库恢复，因此您需要确保在主数据库受到灾难时这些日志是安全的。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1" title="您必须在NOARCHIVELOG或ARCHIVELOG模式下运行数据库。">在NOARCHIVELOG和ARCHIVELOG模式之间进行选择</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11333"></a><div class="props_rev_3"><a id="GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C" name="GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C"></a><h3 id="ADMIN-GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C" class="sect3"><span class="enumeration_section">12.3</span>控制存档</h3>
               <div>
                  <p>您可以为数据库设置存档模式并调整存档过程的数量。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-0FC1DF01-4AB0-4888-B61F-19D234DAB6CB">设置初始数据库存档模式</a><br>您可以在<code class="codeph">CREATE DATABASE</code>语句中将初始归档模式设置为数据库创建的一部分。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-C12EA833-4717-430A-8919-5AEA747087B9">更改数据库归档模式</a><br>要更改数据库的归档模式，请使用带有<code class="codeph">ARCHIVELOG</code>或<code class="codeph">NOARCHIVELOG</code>子句的<code class="codeph">ALTER DATABASE</code>语句。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-6796C2F0-C35B-42E0-85C2-C19A94855E96">执行手动存档</a><br>为了方便和高效，自动存档通常是最好的。但是，您可以仅将数据库配置为手动存档。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-8E0F3F8E-0727-46F4-8E8E-FFEC2EE0D375">调整Archiver进程数</a><br><code class="codeph">LOG_ARCHIVE_MAX_PROCESSES</code>初始化参数指定数据库最初启动的ARC <span class="italic">n</span>进程数。默认值为四个进程。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C__GUID-6BCEAE57-F33B-4B47-8464-CFF36EB9E2BA">
                     <p class="notep1">也可以看看：</p>
                     <p>有关控制归档模式的其他信息，请参见Oracle操作系统特定文档</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11334"></a><div class="props_rev_3"><a id="GUID-0FC1DF01-4AB0-4888-B61F-19D234DAB6CB" name="GUID-0FC1DF01-4AB0-4888-B61F-19D234DAB6CB"></a><h4 id="ADMIN-GUID-0FC1DF01-4AB0-4888-B61F-19D234DAB6CB" class="sect4"><span class="enumeration_section">12.3.1</span>设置初始数据库归档模式</h4>
                  <div>
                     <p>您可以在<code class="codeph">CREATE DATABASE</code>语句中将初始归档模式设置为数据库创建的一部分。
                     </p>
                     <div class="section">
                        <p>通常，您可以在创建数据库时使用默认的<code class="codeph">NOARCHIVELOG</code>模式，因为不需要存档该进程生成的重做信息。创建数据库后，决定是否更改初始存档模式。
                        </p>
                        <p>如果指定<code class="codeph">ARCHIVELOG</code>模式，则必须设置初始化参数，以指定归档重做日志文件的目标（请参阅<span class="q">“ <a href="managing-archived-redo-log-files.html#GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26" title="您可以选择将重做日志存档到单个目标或多个目标。">设置归档目标的初始化参数</a> ”</span> ）。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C" title="您可以为数据库设置存档模式并调整存档过程的数量。">控制存档</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11335"></a><div class="props_rev_3"><a id="GUID-C12EA833-4717-430A-8919-5AEA747087B9" name="GUID-C12EA833-4717-430A-8919-5AEA747087B9"></a><h4 id="ADMIN-GUID-C12EA833-4717-430A-8919-5AEA747087B9" class="sect4"><span class="enumeration_section">12.3.2</span>更改数据库归档模式</h4>
                  <div>
                     <p>要更改数据库的归档模式，请使用带有<code class="codeph">ARCHIVELOG</code>或<code class="codeph">NOARCHIVELOG</code>子句的<code class="codeph">ALTER DATABASE</code>语句。
                     </p>
                     <div class="section">
                        <p>要更改存档模式，必须使用管理员权限（ <code class="codeph">AS SYSDBA</code> ）连接到数据库。
                        </p>
                        <p>以下步骤将数据库归档模式从<code class="codeph">NOARCHIVELOG</code>切换到<code class="codeph">ARCHIVELOG</code> ：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>关闭数据库实例。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭</pre><p>必须先关闭打开的数据库，然后关闭所有关联的实例，然后才能切换数据库归档模式。如果任何数据文件需要介质恢复，则无法将模式从<code class="codeph">ARCHIVELOG</code>更改为<code class="codeph">NOARCHIVELOG</code> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>备份数据库。</span><div>
                              <p>在对数据库进行任何重大更改之前，请始终备份数据库以防止出现任何问题。这将是<code class="codeph">NOARCHIVELOG</code>模式下数据库的最终备份，如果在更改<code class="codeph">ARCHIVELOG</code>模式期间出现问题，则可以使用它。有关进行<a href="../bradv/rman-backup-concepts.html#BRADV002" target="_blank"><span class="italic">数据库备份的信息，</span></a>请参见“ <a href="../bradv/rman-backup-concepts.html#BRADV002" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>编辑初始化参数文件以包含指定归档重做日志文件的目标的初始化参数（请参阅<span class="q">“ <a href="managing-archived-redo-log-files.html#GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26" title="您可以选择将重做日志存档到单个目标或多个目标。">设置归档目标的初始化参数</a> ”</span> ）。</span></li>
                        <li class="stepexpand"><span>启动一个新实例并挂载，但不要打开数据库。</span><div><pre class="oac_no_warn" dir="ltr">启动安装</pre><p>要启用或禁用存档，必须装入数据库但不能打开。</p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-C12EA833-4717-430A-8919-5AEA747087B9__I1007390"><span>更改数据库归档模式。然后打开数据库以进行正常操作。</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ARCHIVELOG; ALTER DATABASE OPEN;</pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭数据库。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭</pre></div>
                        </li>
                        <li class="stepexpand"><span>备份数据库。</span><div>
                              <p>更改数据库归档模式会更新控制文件。更改数据库归档模式后，必须备份所有数据库文件和控制文件。之前的任何备份都不再可用，因为它是在<code class="codeph">NOARCHIVELOG</code>模式下进行的。
                              </p>
                              <div class="infoboxnotealso" id="GUID-C12EA833-4717-430A-8919-5AEA747087B9__GUID-5195DD40-D4F1-4BC2-98AB-397AEB1BB19F">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关在使用Real Application Clusters时切换归档模式的详细信息，请参阅<a href="../racad/configuring-recovery-manager-and-archiving.html#RACAD327" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”</span></a></p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C" title="您可以为数据库设置存档模式并调整存档过程的数量。">控制存档</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11336"></a><div class="props_rev_3"><a id="GUID-6796C2F0-C35B-42E0-85C2-C19A94855E96" name="GUID-6796C2F0-C35B-42E0-85C2-C19A94855E96"></a><h4 id="ADMIN-GUID-6796C2F0-C35B-42E0-85C2-C19A94855E96" class="sect4"><span class="enumeration_section">12.3.3</span>执行手动存档</h4>
                  <div>
                     <p>为了方便和高效，自动存档通常是最好的。但是，您可以仅将数据库配置为手动存档。</p>
                     <div class="section">
                        <p>在手动<code class="codeph">ARCHIVELOG</code>模式下操作数据库时，必须归档已填充的重做日志文件的非活动组，否则可以暂时中止数据库操作。
                        </p>
                        <p>要在手动存档模式下操作数据库：</p>
                        <ol>
                           <li>
                              <p>按照<span class="q">“ <a href="managing-archived-redo-log-files.html#GUID-C12EA833-4717-430A-8919-5AEA747087B9" title="要更改数据库的归档模式，请使用带有ARCHIVELOG或NOARCHIVELOG子句的ALTER DATABASE语句。">更改数据库存档模式</a> ”中</span>所述的过程，但使用以下语句替换<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ARCHIVELOG MANUAL;</pre></li>
                           <li>
                              <p>以具有管理员权限的用户身份连接到数据库。</p>
                           </li>
                           <li>
                              <p>确保数据库已安装或打开。</p>
                           </li>
                           <li>
                              <p></p>
                              <p>使用带有<code class="codeph">ARCHIVE LOG</code>子句的<code class="codeph">ALTER SYSTEM</code>语句手动存档已填充的重做日志文件。例如，以下语句将归档所有未归档的重做日志文件：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM ARCHIVE LOG ALL;</pre></li>
                        </ol>
                        <p>使用手动存档模式时，无法在存档目标中指定任何备用数据库。</p>
                        <p>即使启用了自动存档，您也可以使用手动存档执行此操作，例如将非活动的已填充重做日志成员组重新归档到另一个位置。在这种情况下，实例可以在完成手动归档之前重用重做日志组，从而覆盖文件。如果发生这种情况，数据库会将错误消息写入警报日志。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-archived-redo-log-files.html#GUID-36F3335E-A28B-47BA-82C2-E17B4C8A453A" title="在ARCHIVELOG模式下运行数据库时，将启用重做日志的归档。">在ARCHIVELOG模式下运行数据库</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C" title="您可以为数据库设置存档模式并调整存档过程的数量。">控制存档</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMIN11337"></a><div class="props_rev_3"><a id="GUID-8E0F3F8E-0727-46F4-8E8E-FFEC2EE0D375" name="GUID-8E0F3F8E-0727-46F4-8E8E-FFEC2EE0D375"></a><h4 id="ADMIN-GUID-8E0F3F8E-0727-46F4-8E8E-FFEC2EE0D375" class="sect4"><span class="enumeration_section">12.3.4</span>调整Archiver进程数</h4>
                  <div>
                     <p><code class="codeph">LOG_ARCHIVE_MAX_PROCESSES</code>初始化参数指定数据库最初启动的ARC <span class="italic">n</span>进程数。默认值为四个进程。
                     </p>
                     <div class="section">
                        <p>为了避免启动其他ARC <span class="italic">n</span>进程的任何运行时开销：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>设置<code class="codeph">LOG_ARCHIVE_MAX_PROCESSES</code>初始化参数以指定在实例启动时最多启动30个ARC <span class="italic">n</span>进程。
                              </p>
                           </li>
                        </ul>
                        <p><code class="codeph">LOG_ARCHIVE_MAX_PROCESSES</code>参数是动态的，因此您可以使用<code class="codeph">ALTER SYSTEM</code>语句更改它。
                        </p>
                        <p>以下语句将数据库配置为在启动时启动六个ARC <span class="italic">n</span>进程：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_MAX_PROCESSES = 6;</pre><p>该语句还对当前运行的实例产生直接影响。它将当前运行的ARC <span class="italic">n</span>进程数增加或减少到6。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C" title="您可以为数据库设置存档模式并调整存档过程的数量。">控制存档</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11338"></a><div class="props_rev_3"><a id="GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8" name="GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8"></a><h3 id="ADMIN-GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8" class="sect3"><span class="enumeration_section">12.4</span>指定存档目的地</h3>
               <div>
                  <p>在归档重做日志之前，必须确定要归档的目标，并熟悉各种目标状态。</p>
                  <p><span class="q">“ <a href="managing-archived-redo-log-files.html#GUID-62E48748-F8A8-4740-90B1-5B3708A63386" title="您可以使用动态性能视图或ARCHIVE LOG LIST命令显示有关归档重做日志的信息。">查看有关存档重做日志的信息</a> ”中</span>列出的动态性能（V $）视图提供了所有必需的存档信息。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26">设置存档目标的初始化参数</a><br>您可以选择将重做日志存档到单个目标或多个目标。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-EA2AC2BF-E369-4074-A406-AF223A582ED6">使用日志归档目标组扩展备用目标</a><br>您可以使用日志归档目标组来扩展备用归档目标的数量。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-D0B92621-7356-48FF-B7EA-4E15BBE1BED9">了解存档目标状态</a><br>有几个变量决定了归档目标的状态。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-64C78392-5AD5-4972-A832-8BF3865D1945">指定备用目标</a><br>要仅在另一个目标发生故障时指定某个位置是归档目标，您可以将其作为备用目标。本地和远程目的地都可以是替代目的地。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN00801"></a><div class="props_rev_3"><a id="GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26" name="GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26"></a><h4 id="ADMIN-GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26" class="sect4"><span class="enumeration_section">12.4.1</span>设置归档目标的初始化参数</h4>
                  <div>
                     <p>您可以选择将重做日志存档到单个目标或多个目标。</p>
                     <div class="section">
                        <p>目标可以是本地文件系统或Oracle自动存储管理（Oracle ASM）磁盘组或远程（在备用数据库上）。归档到多个目标时，会将每个填充的重做日志文件的副本写入每个目标。这些冗余副本有助于确保在其中一个目标发生故障时，归档日志始终可用。</p>
                        <p>要归档到仅一个目的地：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">LOG_ARCHIVE_DEST</code>初始化参数指定该目标。
                              </p>
                           </li>
                        </ul>
                        <p>要归档到多个目的地：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>选择使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数存档到两个或多个位置，或使用<code class="codeph">LOG_ARCHIVE_DEST</code>和<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code>初始化参数仅存档到主目标和辅助目标。
                              </p>
                           </li>
                        </ul>
                        <p>对于本地目标，除了本地文件系统或Oracle ASM磁盘组之外，还可以归档到快速恢复区。数据库使用快速恢复区来存储和自动管理与备份和恢复相关的各种文件的磁盘空间。有关快速恢复区的详细信息，请参见“ <a href="../bradv/configuring-rman-client-basic.html#BRADV8183" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                        </p>
                        <p>通常，您在数据库规划期间确定存档日志目标，并在数据库安装期间设置存档目标的初始化参数。但是，您可以使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>命令在数据库运行后动态添加或更改归档目标。您所做的任何目标更改将在下一个日志切换（自动或手动）时生效。
                        </p>
                        <p>下表总结了归档目标替代方案，这些方案将在后续章节中进一步介绍。</p>
                        <div class="tblformalwide" id="GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26__GUID-5EBE9A39-B2EE-449F-991B-47F851D688C4">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="This table lists two methods for specifying archive log destinations. The method is identified in column 1, relevant initialization parameters are listed in column 2, the host environment is specified in column 3, and an example is given in column 4." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="11%" id="d136417e1298">方法</th>
                                    <th align="left" valign="bottom" width="37%" id="d136417e1301">初始化参数</th>
                                    <th align="left" valign="bottom" width="16%" id="d136417e1304">主办</th>
                                    <th align="left" valign="bottom" width="37%" id="d136417e1307">例</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d136417e1312" headers="d136417e1298 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d136417e1312 d136417e1301 ">
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span><span class="italic"></span></p>
                                       <p>哪里：</p>
                                       <p><span class="italic">n</span>是1至31的整数。归档目标1到10可用于本地或远程位置。存档目的地11至31仅适用于远程位置。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d136417e1312 d136417e1304 ">
                                       <p>本地或远程</p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d136417e1312 d136417e1307 ">
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_1 ='LOCATION = / disk1 / arc'</code></p>
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_2 ='LOCATION = / disk2 / arc'</code></p>
                                       <p><code class="codeph">LOG_ARCHIVE_DEST_3 ='SERVICE = standby1'</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="11%" id="d136417e1343" headers="d136417e1298 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d136417e1343 d136417e1301 ">
                                       <p><code class="codeph">LOG_ARCHIVE_DEST</code>和</p>
                                       <p><code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d136417e1343 d136417e1304 ">
                                       <p>仅限本地</p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d136417e1343 d136417e1307 ">
                                       <p><code class="codeph">LOG_ARCHIVE_DEST ='/ disk1 / arc'</code></p>
                                       <p><code class="codeph">LOG_ARCHIVE_DUPLEX_DEST ='/ disk2 / arc'</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-C883DC9C-0771-4146-9204-9F09B5682C9B">方法1：使用LOG_ARCHIVE_DEST_n参数</a><br>您可以使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数为归档日志指定不同的目标。
                        </li>
                        <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1">方法2：使用LOG_ARCHIVE_DEST和LOG_ARCHIVE_DUPLEX_DEST</a><br>要指定最多两个位置，请使用<code class="codeph">LOG_ARCHIVE_DEST</code>参数指定主存档目标，使用<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code>指定可选的辅助存档目标。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8" title="在归档重做日志之前，必须确定要归档的目标，并熟悉各种目标状态。">指定存档目标</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11339"></a><div class="props_rev_3"><a id="GUID-C883DC9C-0771-4146-9204-9F09B5682C9B" name="GUID-C883DC9C-0771-4146-9204-9F09B5682C9B"></a><h5 id="ADMIN-GUID-C883DC9C-0771-4146-9204-9F09B5682C9B" class="sect5"><span class="enumeration_section">12.4.1.1</span>方法1：使用LOG_ARCHIVE_DEST_ <span class="italic">n</span>参数</h5>
                     <div>
                        <p>您可以使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数为归档日志指定不同的目标。
                        </p>
                        <div class="section">
                           <p>设置<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数（其中<span class="italic">n</span>是1到31之间的整数）以指定从1到31。每个数字后缀参数唯一地标识单个目的地。
                           </p>
                           <p>您可以使用下表中说明的关键字指定<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>的位置：</p>
                           <div class="tblformalwide" id="GUID-C883DC9C-0771-4146-9204-9F09B5682C9B__GUID-9C44838E-6493-4F17-A19C-807315BCA81F">
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Keywords of the LOG_ARCHIVE_DEST_n initialization parameter are listed in column 1, what the keyword indicates is shown in column 2, and an example is provided in column 3." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="17%" id="d136417e1470">关键词</th>
                                       <th align="left" valign="bottom" width="28%" id="d136417e1473">指示</th>
                                       <th align="left" valign="bottom" width="55%" id="d136417e1476">例</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d136417e1481" headers="d136417e1470 ">
                                          <p><code class="codeph">地点</code></p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d136417e1481 d136417e1473 ">
                                          <p>本地文件系统位置或Oracle ASM磁盘组</p>
                                       </td>
                                       <td align="left" valign="top" width="55%" headers="d136417e1481 d136417e1476 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">= 'LOCATION=/disk1/arc'</code> 
                                          </p>
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">= 'LOCATION=+DGROUP1/orcl/arc_1'</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d136417e1507" headers="d136417e1470 ">
                                          <p><code class="codeph">地点</code></p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d136417e1507 d136417e1473 ">
                                          <p>快速恢复区</p>
                                       </td>
                                       <td align="left" valign="top" width="55%" headers="d136417e1507 d136417e1476 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">= 'LOCATION=USE_DB_RECOVERY_FILE_DEST'</code> 
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d136417e1525" headers="d136417e1470 ">
                                          <p><code class="codeph">服务</code></p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d136417e1525 d136417e1473 ">
                                          <p>通过Oracle Net服务名远程存档。</p>
                                       </td>
                                       <td align="left" valign="top" width="55%" headers="d136417e1525 d136417e1476 ">
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">= 'SERVICE=standby1'</code> 
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>如果使用<code class="codeph">LOCATION</code>关键字，请指定以下之一：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>操作系统的本地文件系统中的有效路径名</p>
                              </li>
                              <li>
                                 <p>Oracle ASM磁盘组</p>
                              </li>
                              <li>
                                 <p>关键字<code class="codeph">USE_DB_RECOVERY_FILE_DEST</code>表示快速恢复区</p>
                              </li>
                           </ul>
                           <p>如果指定<code class="codeph">SERVICE</code> ，请提供Oracle Net可以解析为备用数据库的连接描述符的网络服务名称。连接描述符包含连接到远程数据库所需的信息。
                           </p>
                           <p>执行以下步骤，使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数设置归档重做日志文件的目标：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>设置<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数以指定从1个归档位置到31个归档位置。例如，输入：</span><div><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1 ='LOCATION = / disk1 / archive'LOG_ARCHIVE_DEST_2 ='LOCATION = / disk2 / archive'LOG_ARCHIVE_DEST_3 ='LOCATION = + RECOVERY / orcl / arc_3'</pre><p>如果要归档到备用数据库，则使用<code class="codeph">SERVICE</code>关键字指定有效的网络服务名称。例如，输入：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_4 ='SERVICE = standby1'</pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-C883DC9C-0771-4146-9204-9F09B5682C9B__i1008112"><span>（可选）设置<code class="codeph">LOG_ARCHIVE_FORMAT</code>初始化参数，使用<code class="codeph">%t</code>包含作为文件名一部分的线程号， <code class="codeph">%s</code>包括日志序列号， <code class="codeph">%r</code>包括resetlogs ID（以ub4表示的时间戳值）。使用大写字母（ <code class="codeph">%T</code> ， <code class="codeph">%S</code>和<code class="codeph">%R</code> ）以零填充左侧的文件名。</span><div>
                                 <div class="infoboxnote" id="GUID-C883DC9C-0771-4146-9204-9F09B5682C9B__GUID-2C21D6DA-4905-46FC-86B8-BBCD7A0C5AD7">
                                    <p class="notep1">注意：</p>
                                    <p>包含<code class="codeph">LOG_ARCHIVE_FORMAT</code>参数时，数据库需要指定resetlogs ID（ <code class="codeph">%r</code> ）。此参数的默认值取决于操作系统。
                                    </p>
                                    <p>使用<code class="codeph">RESETLOGS</code>选项打开数据库时，数据库的化身会发生变化。指定<code class="codeph">%r</code>会导致数据库捕获归档重做日志文件名中的resetlogs ID。有关此恢复方法的详细信息，请参阅“ <a href="../bradv/rman-data-repair-concepts.html#BRADV1171" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                                    </p>
                                 </div>
                                 <p>以下示例显示了<code class="codeph">LOG_ARCHIVE_FORMAT</code>的设置：</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_FORMAT = arch_％t_％s_％r.arc</pre><p>此设置将为线程1生成如下的存档日志;日志序列号100,101和102; resetlogs ID 509210197。相同的resetlogs ID表示这些文件都来自同一个数据库化身：</p><pre class="oac_no_warn" dir="ltr">/disk1/archive/arch_1_100_509210197.arc,/disk1/archive/arch_1_101_509210197.arc,/disk1/archive/arch_1_102_509210197.arc /disk2/archive/arch_1_100_509210197.arc,/disk2/archive/arch_1_101_509210197.arc,/ disk2 / archive / arch_1_102_509210197 .arc /disk3/archive/arch_1_100_509210197.arc,/disk3/archive/arch_1_101_509210197.arc,/disk3/archive/arch_1_102_509210197.arc</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>在某些情况下，将忽略<code class="codeph">LOG_ARCHIVE_FORMAT</code>初始化参数。有关此参数的详细信息，请参阅<a href="../refrn/LOG_ARCHIVE_FORMAT.html#REFRN10089" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26" title="您可以选择将重做日志存档到单个目标或多个目标。">设置归档目标的初始化参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11340"></a><div class="props_rev_3"><a id="GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1" name="GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1"></a><h5 id="ADMIN-GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1" class="sect5"><span class="enumeration_section">12.4.1.2</span>方法2：使用LOG_ARCHIVE_DEST和LOG_ARCHIVE_DUPLEX_DEST</h5>
                     <div>
                        <p>要指定最多两个位置，请使用<code class="codeph">LOG_ARCHIVE_DEST</code>参数指定主存档目标，使用<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code>指定可选的辅助存档目标。
                        </p>
                        <div class="section">
                           <p>所有地点都必须是当地的。只要数据库归档重做日志，它就会将其归档到由任一参数集指定的每个目标。</p>
                           <p>使用方法2执行以下步骤：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>指定<code class="codeph">LOG_ARCHIVE_DEST</code>和<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code>参数的目标（您还可以使用<code class="codeph">ALTER SYSTEM</code>语句动态指定<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code> ）。例如，输入：</span><div><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST ='/ disk1 / archive'LOG_ARCHIVE_DUPLEX_DEST ='/ disk2 / archive'</pre></div>
                           </li>
                           <li class="stepexpand"><span>按方法1的步骤<a href="managing-archived-redo-log-files.html#GUID-C883DC9C-0771-4146-9204-9F09B5682C9B__i1008112">2中</a>所述设置<code class="codeph">LOG_ARCHIVE_FORMAT</code>初始化参数。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1__GUID-F86415FB-886B-40F2-B7A6-88BFD1AA4B3F">
                              <p class="notep1">注意：</p>
                              <p>如果配置快速恢复区（通过设置<code class="codeph">DB_RECOVERY_FILE_DEST</code>和<code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code>参数）并且未指定任何本地存档目标，则数据库会自动选择快速恢复区作为本地存档目标，并将<code class="codeph">LOG_ARCHIVE_DEST_1</code>设置为<code class="codeph">USE_DB_RECOVERY_FILE_DEST</code> 。</p>
                           </div>
                           <div class="infoboxnotewarn" id="GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1__GUID-8E4B98CD-E996-4759-9A5B-E16B0A296655">
                              <p class="notep1">警告：</p>
                              <p>您必须确保存档日志目标始终有足够的磁盘空间。如果数据库在尝试归档日志文件时遇到磁盘已满错误，则会发生致命错误并且数据库停止响应。您可以检查警报日志以获取磁盘已满信息。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A13B0CC7-0383-478A-8EEE-17C0ECFF8EE1__GUID-CDEF9887-29AB-4B52-AF99-E4B6175A0EEA">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关用于控制重做日志归档的初始化参数的其他信息，请<a href="../refrn/index.html" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="../sbydb/oracle-data-guard-redo-transport-services.html#SBYDB00400" target="_blank"><span class="italic">Oracle数据卫士概念和管理</span></a>的有关使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span> <span class="italic"> </span>用于指定备用目标的初始化参数。可以使用此初始化参数指定的其他关键字未在本书中讨论。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=NETAG186" target="_blank"><span class="italic">“Oracle数据库网络服务管理员指南”，</span></a>用于讨论网络服务名称和连接描述符。
                                 </p>
                              </li>
                              <li>
                                 <p>有关快速恢复区的信息，请参见<a href="../bradv/configuring-rman-client-basic.html#BRADV8183" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-9D577C54-A0BF-43E9-BB56-24A9BFCF4F26" title="您可以选择将重做日志存档到单个目标或多个目标。">设置归档目标的初始化参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EA2AC2BF-E369-4074-A406-AF223A582ED6" name="GUID-EA2AC2BF-E369-4074-A406-AF223A582ED6"></a><h4 id="ADMIN-GUID-EA2AC2BF-E369-4074-A406-AF223A582ED6" class="sect4"><span class="enumeration_section">12.4.2</span>使用日志归档目标组扩展备用目标</h4>
                  <div>
                     <p>您可以使用日志归档目标组来扩展备用归档目标的数量。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-17979201-6775-4F5D-B8AB-DB1DE3FAD80E">关于日志存档目标组</a><br>日志归档目标组指定多个归档目标，并且可以对组中的目标进行优先级排序。您可以指定多个组以扩展数据库的可能存档目标数。
                        </li>
                        <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021">指定日志归档目标组</a><br>使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数的<code class="codeph">GROUP</code>属性指定日志归档目标组。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8" title="在归档重做日志之前，必须确定要归档的目标，并熟悉各种目标状态。">指定存档目标</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-17979201-6775-4F5D-B8AB-DB1DE3FAD80E" name="GUID-17979201-6775-4F5D-B8AB-DB1DE3FAD80E"></a><h5 id="ADMIN-GUID-17979201-6775-4F5D-B8AB-DB1DE3FAD80E" class="sect5"><span class="enumeration_section">12.4.2.1</span>关于日志归档目标组</h5>
                     <div>
                        <p>日志归档目标组指定多个归档目标，并且可以对组中的目标进行优先级排序。您可以指定多个组以扩展数据库的可能存档目标数。</p>
                        <p>要指定日志归档目标组，请使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数的<code class="codeph">GROUP</code>属性。组中最多可包含30个日志归档目标。每个组中的一个成员处于活动状态，其他成员可在活动目标发生故障时使用。如果活动目标变为非活动状态，则只要组中有一个或多个可用目标，Oracle数据库就会切换到可用目标。您可以通过使用<code class="codeph">PRIORITY</code>属性确定目的地的<code class="codeph">PRIORITY</code>级来指定首先使用的目的地。
                        </p>
                        <p>日志归档目标组由组编号引用，该组编号在创建组时指定。最多可以有八个组。要指定归档组中重做数据的位置，所有日志归档目标都必须指定<code class="codeph">SERVICE</code>属性。
                        </p>
                        <p>要确定组中目标的优先级，请将目标的<code class="codeph">PRIORITY</code>属性设置为1到8之间的整数。数字越小表示优先级越高。优先级确定在装入数据库或活动目标失败时组中的哪个目标处于活动状态。例如， <code class="codeph">PRIORITY</code>值为<code class="codeph">2</code>的优先级高于<code class="codeph">PRIORITY</code>值<code class="codeph">7</code> 。因此，如果组中<code class="codeph">PRIORITY</code>值为<code class="codeph">1</code>的当前活动目标变为非活动状态，则在<code class="codeph">PRIORITY</code>值为<code class="codeph">7</code>的目标之前使用<code class="codeph">PRIORITY</code>值为<code class="codeph">2</code>的目标。如果未为目标设置<code class="codeph">PRIORITY</code>属性，则默认值为<code class="codeph">1</code> 。
                        </p>
                        <p>当先前失败的目的地变得可用时，也考虑优先级。如果活动目标失败，并且Oracle数据库切换到优先级较低的目标，则Oracle数据库会在再次可用时切换回具有更高优先级的目标。例如，如果优先级为1的活动目标变为非活动状态，并且Oracle数据库切换到优先级为2的目标，则Oracle数据库在再次可用时切换回优先级为1的目标，即使优先级2目标未失败。</p>
                        <p>但是，分配给同一组的多个目标可以具有相同的优先级。例如，可以有三个目标优先级为1。在这样的组中，活动目的地的故障导致切换到具有相同优先级的另一个成员。在这种情况下，当它再次可用时，没有切换回原始目的地，因为两个目的地具有相同的优先级。如果第二个目标在第一个目标再次可用后失败，则数据库将切换到具有相同优先级的组中的第一个目标或另一个目标。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-17979201-6775-4F5D-B8AB-DB1DE3FAD80E__GUID-5E9E2502-2804-431D-A737-B0739819C3E4">
                           <p class="notep1">也可以看看：</p><a href="../sbydb/creating-oracle-data-guard-far-sync-instance.html#SBYDB-GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-EA2AC2BF-E369-4074-A406-AF223A582ED6" title="您可以使用日志归档目标组来扩展备用归档目标的数量。">使用日志归档目标组扩展备用目标</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021" name="GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021"></a><h5 id="ADMIN-GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021" class="sect5"><span class="enumeration_section">12.4.2.2</span>指定日志归档目标组</h5>
                     <div>
                        <p>使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数的<code class="codeph">GROUP</code>属性指定日志归档目标组。
                        </p>
                        <div class="section">
                           <p>您最多可以创建八个日志归档目标组，每个组最多可以指定30个目标。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="p">要指定日志归档目标组，数据库必须以<code class="codeph">ARCHIVELOG</code>模式运行。
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>设置<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数，并包括<code class="codeph">GROUP</code>属性以指定日志归档目标组。
                                 </p>
                                 <p>（可选）包括<code class="codeph">PRIORITY</code>属性，以指定在启动系统或目标失败时组中的哪个日志归档目标处于活动状态。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021__GUID-A200D0DC-0AFE-4988-A6F9-B89BB55B201A">
                           <p class="titleinexample">示例12-1指定两个日志归档目标组</p>
                           <p>此示例指定两个日志归档目标组（1和2）。每个组都指定了三个日志归档目标。</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_1 ='SERVICE = SITEa VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1'LOG_ARCHIVE_DEST_2 ='SERVICE = SITEb VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1'LOG_ARCHIVE_DEST_3 ='SERVICE = SITEc VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 'LOG_ARCHIVE_DEST_4 ='SERVICE = SITE1 VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 2'LOG_ARCHIVE_DEST_5 ='SERVICE = SITE2 VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 2'LOG_ARCHIVE_DEST_6 ='SERVICE = SITE3 VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 2'</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021__GUID-A826467A-D262-410D-9B4B-6F1DB900B530">
                           <p class="titleinexample">示例12-2指定日志归档目标组中的优先级</p>
                           <p>此示例为单个日志归档目标组中的目标指定不同的优先级。具体地，目的地1和2都处于优先级1，目的地3处于优先级2，目的地4处于优先级3。</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_1 ='SERVICE = SITE1 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_2 ='SERVICE = SITE2 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_3 ='SERVICE = SITE3 ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 2'LOG_ARCHIVE_DEST_4 ='SERVICE = SITE4 ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 3'</code></pre><p>在此示例中，站点1,2和3可以是仅转发重做的Oracle Data Guard远程同步实例，而站点4是实际的远程备用数据库。或者，站点1,2,3和4都可以是备用数据库，这些备用数据库被配置为当它们是活动目的地时将重做级联到其他站点。</p>
                           <p>遵循以下优先级规则：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>默认活动目标可以是目标1或目标2，因为两者都处于优先级1。</p>
                              </li>
                              <li>
                                 <p>如果目标1处于活动状态但随后变为不可用，则Oracle数据库将切换到目标2。同样，如果目标2处于活动状态但随后变为不可用，则Oracle数据库将切换到目标1。当目标1或2可用时，使用其中一个。</p>
                              </li>
                              <li>
                                 <p>如果目的地1和目的地2都变得不可用，则使用目的地3。</p>
                              </li>
                              <li>
                                 <p>如果，当目标3处于活动状态时，目标1或目标2变为可用，Oracle数据库将切换到可用的优先级1目标。</p>
                              </li>
                              <li>
                                 <p>如果目的地1,2和3都变得不可用，则使用目的地4。</p>
                              </li>
                              <li>
                                 <p>如果，当目标4处于活动状态，目标1,2或3变为可用时，Oracle数据库首先切换到可用的优先级1目标，然后切换到可用的优先级2目标。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-840A49BE-9410-4D28-B4E8-6FBF6C1E9021__GUID-70AE9C3C-E03B-4ECC-A020-70377147D32D">
                           <p class="notep1">也可以看看：</p><a href="../sbydb/creating-oracle-data-guard-far-sync-instance.html#SBYDB-GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-EA2AC2BF-E369-4074-A406-AF223A582ED6" title="您可以使用日志归档目标组来扩展备用归档目标的数量。">使用日志归档目标组扩展备用目标</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11341"></a><div class="props_rev_3"><a id="GUID-D0B92621-7356-48FF-B7EA-4E15BBE1BED9" name="GUID-D0B92621-7356-48FF-B7EA-4E15BBE1BED9"></a><h4 id="ADMIN-GUID-D0B92621-7356-48FF-B7EA-4E15BBE1BED9" class="sect4"><span class="enumeration_section">12.4.3</span>了解存档目标状态</h4>
                  <div>
                     <p>有几个变量决定了归档目标的状态。</p>
                     <p>每个归档目标都具有以下可变特征，用于确定其状态：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">有效/无效</span> ：指示磁盘位置或服务名称信息是否已指定且有效</p>
                        </li>
                        <li>
                           <p><span class="bold">启用/禁用</span> ：指示位置的可用性状态以及数据库是否可以使用目标</p>
                        </li>
                        <li>
                           <p><span class="bold">活动/非活动</span> ：指示访问目标时是否存在问题</p>
                        </li>
                     </ul>
                     <p>这些特征的几种组合是可能的。要获取有关实例的每个目标的当前状态和其他信息，请查询<code class="codeph">V$ARCHIVE_DEST</code>视图。
                     </p>
                     <p><a id="d136417e2161" class="indexterm-anchor"></a><a id="d136417e2165" class="indexterm-anchor"></a>该<a id="d136417e2170" class="indexterm-anchor"></a><a id="d136417e2174" class="indexterm-anchor"></a> <code class="codeph">LOG_ARCHIVE_DEST_STATE_</code> <span class="italic"><code class="codeph">n</code></span> （其中<span class="italic">n</span>是1到31之间的整数）初始化参数允许您控制指定目标的可用性状态（ <span class="italic">n</span> ）。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ENABLE</code>表示数据库可以使用目标。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DEFER</code>表示该位置暂时被禁用。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTERNATE</code>表示目的地是替代。备用目的地的可用性状态是<code class="codeph">DEFER</code> 。如果其父目标失败，则备用项的可用性状态将变为<code class="codeph">ENABLE</code> 。 <code class="codeph">ALTERNATE</code>不能为目的地指定<code class="codeph">LOG_ARCHIVE_DEST_11</code>到<code class="codeph">LOG_ARCHIVE_DEST_31</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8" title="在归档重做日志之前，必须确定要归档的目标，并熟悉各种目标状态。">指定存档目标</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13277"></a><div class="props_rev_3"><a id="GUID-64C78392-5AD5-4972-A832-8BF3865D1945" name="GUID-64C78392-5AD5-4972-A832-8BF3865D1945"></a><h4 id="ADMIN-GUID-64C78392-5AD5-4972-A832-8BF3865D1945" class="sect4"><span class="enumeration_section">12.4.4</span>指定备用目的地</h4>
                  <div>
                     <p>要仅在另一个目标发生故障时指定某个位置是归档目标，您可以将其作为备用目标。本地和远程目的地都可以是替代目的地。</p>
                     <div class="section">
                        <p>以下示例使<code class="codeph">LOG_ARCHIVE_DEST_4</code>一个备用<code class="codeph">LOG_ARCHIVE_DEST_3</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_DEST_4 ='LOCATION = / disk4 / arch'; ALTER SYSTEM SET LOG_ARCHIVE_DEST_3 ='LOCATION = / disk3 / arch MAX_FAILURE = 1 ALTERNATE = LOG_ARCHIVE_DEST_4'; ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_4 = ALTERNATE; SQL&gt; SELECT dest_name，status，destination FROM v $ archive_dest; DEST_NAME STATUS DESTINATION ----------------------- --------- --------------- ------------------------------- LOG_ARCHIVE_DEST_1 VALID / disk1 / arch LOG_ARCHIVE_DEST_2 VALID / disk2 / arch LOG_ARCHIVE_DEST_3 VALID / disk3 / arch LOG_ARCHIVE_DEST_4 ALTERNATE / disk4 / arch</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8" title="在归档重做日志之前，必须确定要归档的目标，并熟悉各种目标状态。">指定存档目标</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11342"></a><div class="props_rev_3"><a id="GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB" name="GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB"></a><h3 id="ADMIN-GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB" class="sect3"><span class="enumeration_section">12.5</span>关于日志传输模式</h3>
               <p>将归档日志传输到目的地的两种模式是<span class="bold">正常归档传输</span>和<span class="bold">备用传输</span>模式。正常传输涉及将文件传输到本地磁盘。备用传输涉及通过网络将文件传输到本地或远程备用数据库。
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-6754FD0F-19C2-4B82-8CAE-6011589AA410">正常传输模式</a><br>在正常传输模式下，归档目标是数据库服务器的另一个磁盘驱动器。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-77723E1D-B909-466B-9D7F-2ADC24DD3078">待机传输模式</a><br>在备用传输模式下，归档目标是本地或远程备用数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11343"></a><div class="props_rev_3"><a id="GUID-6754FD0F-19C2-4B82-8CAE-6011589AA410" name="GUID-6754FD0F-19C2-4B82-8CAE-6011589AA410"></a><h4 id="ADMIN-GUID-6754FD0F-19C2-4B82-8CAE-6011589AA410" class="sect4"><span class="enumeration_section">12.5.1</span>正常传输模式</h4>
                  <div>
                     <p>在正常传输模式下，归档目标是数据库服务器的另一个磁盘驱动器。</p>
                     <p>在此配置中，归档不会与实例所需的其他文件竞争，并且可以更快地完成。使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>或<code class="codeph">LOG_ARCHIVE_DEST</code>参数指定目标。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB" title="将归档日志传输到目的地的两种模式是正常归档传输和备用传输模式。正常传输涉及将文件传输到本地磁盘。备用传输涉及通过网络将文件传输到本地或远程备用数据库。">关于日志传输模式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11344"></a><div class="props_rev_3"><a id="GUID-77723E1D-B909-466B-9D7F-2ADC24DD3078" name="GUID-77723E1D-B909-466B-9D7F-2ADC24DD3078"></a><h4 id="ADMIN-GUID-77723E1D-B909-466B-9D7F-2ADC24DD3078" class="sect4"><span class="enumeration_section">12.5.2</span>待机传输模式</h4>
                  <div>
                     <p>在备用传输模式下，归档目标是本地或远程备用数据库。</p>
                     <div class="infoboxnote" id="GUID-77723E1D-B909-466B-9D7F-2ADC24DD3078__GUID-A9106CB4-D286-43BA-8ACB-162B396BA694">
                        <p class="notep1">注意：</p>
                        <p>您可以在本地磁盘上维护备用数据库，但Oracle强烈建议您通过在远程站点维护备用数据库来最大限度地提高灾难保护。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-77723E1D-B909-466B-9D7F-2ADC24DD3078__GUID-EBD0BB89-2FB0-446D-B054-735DDA80DD34">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sbydb/oracle-data-guard-redo-transport-services.html#SBYDB00400" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                           </li>
                           <li>
                              <p>有关使用服务名称连接到远程数据库的信息，请<a href="../netag/identifying-and-accessing-database.html#NETAG002" target="_blank"><span class="italic">参见“Oracle数据库网络服务管理员指南”</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB" title="将归档日志传输到目的地的两种模式是正常归档传输和备用传输模式。正常传输涉及将文件传输到本地磁盘。备用传输涉及通过网络将文件传输到本地或远程备用数据库。">关于日志传输模式</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11345"></a><div class="props_rev_3"><a id="GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA" name="GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA"></a><h3 id="ADMIN-GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA" class="sect3"><span class="enumeration_section">12.6</span>管理存档目标失败</h3>
               <p>有时归档目标可能会失败，导致在自动归档模式下运行时出现问题。Oracle数据库提供的过程可帮助您最大限度地减少与目标故障相关的问</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-10247EA4-150D-4879-84DC-8A3BF8E9287E">指定成功目标的最小数量</a><br>可选的初始化参数<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST=</code> <span class="italic"><code class="codeph">n</code></span>确定数据库在重用联机日志文件之前必须将重做日志组成功归档到的最小目标数。默认值为1。如果使用双工，则<span class="italic">n的</span>有效值为1到2;如果要进行多路复用，则有效值为1到31。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-9A5FB47D-B6D8-45D7-99D7-41A6A55B00BB">重新归档到失败的目的地</a><br>使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数的<code class="codeph">REOPEN</code>属性指定ARC <span class="italic">n</span>是否以及何时尝试在发生错误后重新归档到失败的目标。<code class="codeph">REOPEN</code>适用于所有错误，而不仅仅是<code class="codeph">OPEN</code>错误。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11346"></a><div class="props_rev_3"><a id="GUID-10247EA4-150D-4879-84DC-8A3BF8E9287E" name="GUID-10247EA4-150D-4879-84DC-8A3BF8E9287E"></a><h4 id="ADMIN-GUID-10247EA4-150D-4879-84DC-8A3BF8E9287E" class="sect4"><span class="enumeration_section">12.6.1</span>指定成功目的地的最小数量</h4>
                  <p>可选的初始化参数<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST=</code> <span class="italic"><code class="codeph">n</code></span>确定数据库在重用联机日志文件之前必须将重做日志组成功归档到的最小目标数。默认值为1。如果使用双工，则<span class="italic">n的</span>有效值为1到2;如果要进行多路复用，则有效值为1到31。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-55501252-0151-43A6-8936-3825702ADC76">指定强制和可选目的地</a><br><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数允许您指定目标是<code class="codeph">OPTIONAL</code> （默认）还是<code class="codeph">MANDATORY</code> 。</li>
                        <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-E83D19E9-DE41-4CDA-8286-8482158083BD">指定成功目标的数量：方案</a><br>您可以通过示例方案最轻松地查看<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>和<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST</code>初始化参数之间的关系。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA" title="有时归档目标可能会失败，导致在自动归档模式下运行时出现问题。Oracle数据库提供的过程可帮助您最大限度地减少与目标故障相关的问">管理存档目标失败</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11347"></a><div class="props_rev_3"><a id="GUID-55501252-0151-43A6-8936-3825702ADC76" name="GUID-55501252-0151-43A6-8936-3825702ADC76"></a><h5 id="ADMIN-GUID-55501252-0151-43A6-8936-3825702ADC76" class="sect5"><span class="enumeration_section">12.6.1.1</span>指定强制和可选目的地</h5>
                     <div>
                        <p><code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数允许您指定目标是<code class="codeph">OPTIONAL</code> （默认）还是<code class="codeph">MANDATORY</code> 。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数中将目标设置为<code class="codeph">OPTIONAL</code> （默认值）或<code class="codeph">MANDATORY</code> 。
                                 </p>
                              </li>
                           </ul>
                           <p><code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST=</code> <span class="italic"><code class="codeph">n</code></span>参数使用所有<code class="codeph">MANDATORY</code>目的地加上一些非备用<code class="codeph">OPTIONAL</code>目的地来确定LGWR是否可以覆盖在线日志。以下规则适用：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>省略目标的<code class="codeph">MANDATORY</code>属性与指定<code class="codeph">OPTIONAL</code>相同。</p>
                              </li>
                              <li>
                                 <p>您必须至少有一个本地目的地，您可以声明<code class="codeph">OPTIONAL</code>或<code class="codeph">MANDATORY</code> 。</p>
                              </li>
                              <li>
                                 <p>只能为目标<code class="codeph">LOG_ARCHIVE_DEST_1</code>到<code class="codeph">LOG_ARCHIVE_DEST_10</code>指定<code class="codeph">MANDATORY</code>属性。
                                 </p>
                              </li>
                              <li>
                                 <p>为<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST=</code> <span class="italic"><code class="codeph">n</code></span>指定值时，Oracle数据库将至少将一个本地目标视为<code class="codeph">MANDATORY</code> ，因为<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST</code>的最小值为1。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST</code>值不能大于目标数量，也不能大于<code class="codeph">MANDATORY</code>目标数量加上<code class="codeph">OPTIONAL</code>本地目标数量。
                                 </p>
                              </li>
                              <li>
                                 <p>如果您<code class="codeph">DEFER</code>一个<code class="codeph">MANDATORY</code>目的地，并且数据库覆盖在线日志而不将存档日志传输到备用站点，则必须手动将日志传输到备用数据库。
                                 </p>
                              </li>
                           </ul>
                           <p>如果要双面存档日志，则可以使用<code class="codeph">LOG_ARCHIVE_DEST</code>和<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code>参数确定哪些目标是必需的或可选的。以下规则适用：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">LOG_ARCHIVE_DEST</code>声明的任何目标都是必需的。
                                 </p>
                              </li>
                              <li>
                                 <p>通过声明的任何目的地<code class="codeph">LOG_ARCHIVE_DUPLEX_DEST</code>是可选的，如果<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST = 1</code>和强制性的，如果<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST = 2</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-10247EA4-150D-4879-84DC-8A3BF8E9287E" title="可选的初始化参数LOG_ARCHIVE_MIN_SUCCEED_DEST = n确定数据库在重用联机日志文件之前必须将重做日志组成功归档到的最小目标数。默认值为1。如果使用双工，则n的有效值为1到2;如果要进行多路复用，则有效值为1到31。">指定成功目标的最小数量</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11348"></a><div class="props_rev_3"><a id="GUID-E83D19E9-DE41-4CDA-8286-8482158083BD" name="GUID-E83D19E9-DE41-4CDA-8286-8482158083BD"></a><h5 id="ADMIN-GUID-E83D19E9-DE41-4CDA-8286-8482158083BD" class="sect5"><span class="enumeration_section">12.6.1.2</span>指定成功目的地的数量：场景</h5>
                     <div>
                        <p>您可以通过示例方案最轻松地查看<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>和<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST</code>初始化参数之间的关系。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-6F513BC8-4573-4C60-8071-129D15EC0D16">存档到可选本地目的地的方案</a><br>在此方案中，您将归档到三个本地目标，每个目标都声明为<code class="codeph">OPTIONAL</code> 。</li>
                           <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-4AE7E629-E4DE-4943-B861-45D2329294D9">归档到强制目标和可选目的地的方案</a><br>在此方案中，您将归档到<code class="codeph">MANDATORY</code>和<code class="codeph">OPTIONAL</code>本地目标。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-10247EA4-150D-4879-84DC-8A3BF8E9287E" title="可选的初始化参数LOG_ARCHIVE_MIN_SUCCEED_DEST = n确定数据库在重用联机日志文件之前必须将重做日志组成功归档到的最小目标数。默认值为1。如果使用双工，则n的有效值为1到2;如果要进行多路复用，则有效值为1到31。">指定成功目标的最小数量</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13044"></a><a id="ADMIN11349"></a><div class="props_rev_3"><a id="GUID-6F513BC8-4573-4C60-8071-129D15EC0D16" name="GUID-6F513BC8-4573-4C60-8071-129D15EC0D16"></a><h6 id="ADMIN-GUID-6F513BC8-4573-4C60-8071-129D15EC0D16" class="sect6"><span class="enumeration_section">12.6.1.2.1</span>存档到可选本地目的地的方案</h6>
                        <div>
                           <p>在此方案中，您将归档到三个本地目标，每个目标都声明为<code class="codeph">OPTIONAL</code> 。</p>
                           <p><a href="managing-archived-redo-log-files.html#GUID-6F513BC8-4573-4C60-8071-129D15EC0D16__G1009147" title="此表描述了归档到可选本地目标的方案。第1列列出了LOG_ARCHIVE_MIN_SUCCEED_DEST初始化参数的值。第2列列出了相应设置的含义。">表12-1</a>说明了<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST=</code> <span class="italic"><code class="codeph">n</code></span>的可能值<span class="italic"> </span>在这种情况下。
                           </p>
                           <div class="tblformal" id="GUID-6F513BC8-4573-4C60-8071-129D15EC0D16__G1009147">
                              <p class="titleintable">表12-1方案1的LOG_ARCHIVE_MIN_SUCCEED_DEST值</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="方案1的LOG_ARCHIVE_MIN_SUCCEED_DEST值" width="100%" border="1" summary="This table describes a scenario for archiving to optional local destinations. Column 1 lists a value for the LOG_ARCHIVE_MIN_SUCCEED_DEST initialization parameter. Column 2 lists the meaning of the corresponding setting." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="19%" id="d136417e2982">值</th>
                                       <th align="left" valign="bottom" width="81%" id="d136417e2985">含义</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e2990" headers="d136417e2982 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e2990 d136417e2985 ">
                                          <p>仅当至少一个<code class="codeph">OPTIONAL</code>目标成功时，数据库才能重用日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3000" headers="d136417e2982 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3000 d136417e2985 ">
                                          <p>仅当至少两个<code class="codeph">OPTIONAL</code>目标成功时，数据库才能重用日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3010" headers="d136417e2982 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3010 d136417e2985 ">
                                          <p>仅当所有<code class="codeph">OPTIONAL</code>目标成功时，数据库才能重用日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3020" headers="d136417e2982 ">
                                          <p>4或更高</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3020 d136417e2985 ">
                                          <p><code class="codeph">ERROR</code> ：该值大于目标数。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>此方案显示即使您未使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数将任何目标明确设置为<code class="codeph">MANDATORY</code> ，当<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST</code>设置为1,2或3时，数据库也必须成功存档到这些位置中的一个或多个。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-E83D19E9-DE41-4CDA-8286-8482158083BD" title="您可以通过示例方案最轻松地查看LOG_ARCHIVE_DEST_n和LOG_ARCHIVE_MIN_SUCCEED_DEST初始化参数之间的关系。">指定成功目标的数量：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13045"></a><a id="ADMIN11350"></a><div class="props_rev_3"><a id="GUID-4AE7E629-E4DE-4943-B861-45D2329294D9" name="GUID-4AE7E629-E4DE-4943-B861-45D2329294D9"></a><h6 id="ADMIN-GUID-4AE7E629-E4DE-4943-B861-45D2329294D9" class="sect6"><span class="enumeration_section">12.6.1.2.2</span>存档到强制和可选目的地的场景</h6>
                        <div>
                           <p>在此方案中，您将归档到<code class="codeph">MANDATORY</code>和<code class="codeph">OPTIONAL</code>本地目标。
                           </p>
                           <p>考虑一个案例，其中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您指定两个<code class="codeph">MANDATORY</code>目的地。
                                 </p>
                              </li>
                              <li>
                                 <p>您指定两个<code class="codeph">OPTIONAL</code>目的地。
                                 </p>
                              </li>
                              <li>
                                 <p>没有目标是备用数据库。</p>
                              </li>
                           </ul>
                           <p><a href="managing-archived-redo-log-files.html#GUID-4AE7E629-E4DE-4943-B861-45D2329294D9__CEGDJEGD" title="此表描述了归档到强制目标和可选目标的方案。第1列列出了LOG_ARCHIVE_MIN_SUCCEED_DEST初始化参数的值。第2列列出了相应设置的含义。">表12-2</a>显示了<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST=</code> <span class="italic"><code class="codeph">n</code></span>的可能值。
                           </p>
                           <div class="tblformal" id="GUID-4AE7E629-E4DE-4943-B861-45D2329294D9__CEGDJEGD">
                              <p class="titleintable">表12-2方案2的LOG_ARCHIVE_MIN_SUCCEED_DEST值</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="方案2的LOG_ARCHIVE_MIN_SUCCEED_DEST值" width="100%" border="1" summary="This table describes a scenario for archiving to both mandatory and optional destinations. Column 1 lists a value for the LOG_ARCHIVE_MIN_SUCCEED_DEST initialization parameter. Column 2 lists the meaning of the corresponding setting." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="19%" id="d136417e3132">值</th>
                                       <th align="left" valign="bottom" width="81%" id="d136417e3135">含义</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3140" headers="d136417e3132 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3140 d136417e3135 ">
                                          <p>数据库忽略该值并使用<code class="codeph">MANDATORY</code>目标的数量（在此示例中为2）。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3150" headers="d136417e3132 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3150 d136417e3135 ">
                                          <p>即使没有<code class="codeph">OPTIONAL</code>目标成功，数据库也可以重用日志文件。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3160" headers="d136417e3132 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3160 d136417e3135 ">
                                          <p>仅当至少一个<code class="codeph">OPTIONAL</code>目标成功时，数据库才能重用日志。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3170" headers="d136417e3132 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3170 d136417e3135 ">
                                          <p>仅当两个<code class="codeph">OPTIONAL</code>目标都成功时，数据库才能重用日志。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="19%" id="d136417e3180" headers="d136417e3132 ">
                                          <p>5或更高</p>
                                       </td>
                                       <td align="left" valign="top" width="81%" headers="d136417e3180 d136417e3135 ">
                                          <p><code class="codeph">ERROR</code> ：该值大于目标数。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>此案例显示数据库必须归档到您指定为<code class="codeph">MANDATORY</code>的目标，无论您是否将<code class="codeph">LOG_ARCHIVE_MIN_SUCCEED_DEST</code>设置为归档到较少数量的目标。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-E83D19E9-DE41-4CDA-8286-8482158083BD" title="您可以通过示例方案最轻松地查看LOG_ARCHIVE_DEST_n和LOG_ARCHIVE_MIN_SUCCEED_DEST初始化参数之间的关系。">指定成功目标的数量：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADMIN11351"></a><div class="props_rev_3"><a id="GUID-9A5FB47D-B6D8-45D7-99D7-41A6A55B00BB" name="GUID-9A5FB47D-B6D8-45D7-99D7-41A6A55B00BB"></a><h4 id="ADMIN-GUID-9A5FB47D-B6D8-45D7-99D7-41A6A55B00BB" class="sect4"><span class="enumeration_section">12.6.2</span>重新归档到失败的目的地</h4>
                  <div>
                     <p>使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数的<code class="codeph">REOPEN</code>属性指定ARC <span class="italic">n</span>是否以及何时尝试在发生错误后重新归档到失败的目标。<code class="codeph">REOPEN</code>适用于所有错误，而不仅仅是<code class="codeph">OPEN</code>错误。
                     </p>
                     <div class="section">
                        <p><code class="codeph">REOPEN=</code> <span class="italic"><code class="codeph">n</code></span>设置ARC <span class="italic">n</span>尝试重新打开失败目标之前的最小秒数。<span class="italic">n</span>的默认值为300秒。值0与关闭<code class="codeph">REOPEN</code>属性相同; ARC <span class="italic">n</span>在发生故障后不会尝试存档。如果未指定<code class="codeph">REOPEN</code>关键字，则ARC <span class="italic">n</span>将永远不会在发生错误后重新打开目标。
                        </p>
                        <p>您无法使用<code class="codeph">REOPEN</code>指定ARC <span class="italic">n</span>在重新连接和传输存档日志时应尝试的次数。<code class="codeph">REOPEN</code>尝试成功或失败。
                        </p>
                        <p>为<code class="codeph">OPTIONAL</code>目标指定<code class="codeph">REOPEN</code> ，如果出现错误，数据库可以覆盖在线日志。如果为<code class="codeph">MANDATORY</code>目标指定<code class="codeph">REOPEN</code> ，则数据库在无法成功存档时会停止生产数据库。在这种情况下，请考虑以下选项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>手动归档到失败的目标。</p>
                           </li>
                           <li>
                              <p>通过延迟目标，将目标指定为可选或更改服务来更改目标。</p>
                           </li>
                           <li>
                              <p>放下目的地。</p>
                           </li>
                        </ul>
                        <p>使用<code class="codeph">REOPEN</code>关键字时，请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>ARC <span class="italic">n</span>仅在<span class="italic">从</span>日志文件的开头开始存档操作时才重新打开目标，从不<span class="italic">在</span>当前操作<span class="italic">期间</span> 。ARC <span class="italic">n</span>始终从头开始重试日志副本。
                              </p>
                           </li>
                           <li>
                              <p>如果指定了<code class="codeph">REOPEN</code> ，则指定的时间为默认值，ARC <span class="italic">n将</span>检查记录的错误加上<code class="codeph">REOPEN</code>间隔的时间是否小于当前时间。如果是，ARC <span class="italic">n将</span>重试日志副本。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">REOPEN</code>子句成功影响<code class="codeph">ACTIVE=TRUE</code>目标状态。<code class="codeph">VALID</code>和<code class="codeph">ENABLED</code>状态不会更改。
                              </p>
                              <p>这里有点不对劲。目标可以处于非活动状态，有效状态或禁用状态。没有ACTIVE状态。所以我想也许应该说，“REOPEN子句将目标状态设置为VALID”......？DL</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA" title="有时归档目标可能会失败，导致在自动归档模式下运行时出现问题。Oracle数据库提供的过程可帮助您最大限度地减少与目标故障相关的问">管理存档目标失败</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11352"></a><div class="props_rev_3"><a id="GUID-CDFE66B4-7448-4FC8-A676-58B20FF5CC25" name="GUID-CDFE66B4-7448-4FC8-A676-58B20FF5CC25"></a><h3 id="ADMIN-GUID-CDFE66B4-7448-4FC8-A676-58B20FF5CC25" class="sect3"><span class="enumeration_section">12.7</span>控制Archivelog进程生成的跟踪输出</h3>
               <div>
                  <p>后台进程始终在适当时写入跟踪文件。对于archivelog进程，您可以控制生成到跟踪文件的输出。</p>
                  <div class="section">
                     <p>要控制为archivelog进程生成跟踪文件的输出：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设置<code class="codeph">LOG_ARCHIVE_TRACE</code>初始化参数以指定<span class="bold">跟踪级别</span> ，例如<code class="codeph">LOG_ARCHIVE_TRACE</code>等。
                           </p>
                        </li>
                     </ul>
                     <p>您可以通过指定等于要跟踪的各个级别之和的值来组合跟踪级别。例如，设置<code class="codeph">LOG_ARCHIVE_TRACE=12</code>将生成跟踪级别8和4输出。您可以为主数据库和任何备用数据库设置不同的值。
                     </p>
                     <p><code class="codeph">LOG_ARCHIVE_TRACE</code>参数的默认值为0。在此级别，archivelog进程会为错误情况生成适当的警报和跟踪条目。
                     </p>
                     <p>您可以使用<code class="codeph">ALTER SYSTEM</code>语句动态更改此参数的值。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_TRACE = 12;</pre><p>以这种方式启动的更改将在下一个归档操作开始时生效。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-CDFE66B4-7448-4FC8-A676-58B20FF5CC25__GUID-C1B03B83-4C84-4C4A-9CDF-CAC48598894A">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="monitoring-the-database.html#GUID-29ECD5A0-118F-40FC-B54A-8B0D92E91314" title="跟踪文件和警报日志包含有关错误的信息。">使用跟踪文件和警报日志监控错误</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">LOG_ARCHIVE_TRACE</code>初始化参数的详细信息，请参阅<a href="../refrn/LOG_ARCHIVE_TRACE.html#REFRN10093" target="_blank"><span class="italic">Oracle数据库参考</span></a> ，包括此参数的有效值的说明</p>
                        </li>
                        <li>
                           <p>有关将此参数与备用数据库一起使用的信息，请参阅<a href="../sbydb/setting-LOG_ARCHIVE_TRACE-initialization-parameter.html#SBYDB01880" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11353"></a><div class="props_rev_3"><a id="GUID-62E48748-F8A8-4740-90B1-5B3708A63386" name="GUID-62E48748-F8A8-4740-90B1-5B3708A63386"></a><h3 id="ADMIN-GUID-62E48748-F8A8-4740-90B1-5B3708A63386" class="sect3"><span class="enumeration_section">12.8</span>查看有关存档重做日志的信息</h3>
               <p>您可以使用动态性能视图或<code class="codeph">ARCHIVE</code> <code class="codeph">LOG</code> <code class="codeph">LIST</code>命令显示有关归档重做日志的信息。
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-8DFA5382-48FC-4A7D-9443-DB6D3A2F5FE2">存档的重做日志文件视图</a><br>您可以查询一组动态性能视图，以获取有关归档重做日志文件的信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-archived-redo-log-files.html#GUID-EE93A998-5FB5-4BB1-A90E-D48A92897D37">使用ARCHIVE LOG LIST命令</a><br>SQL * Plus命令<code class="codeph">ARCHIVE LOG LIST</code>显示已连接实例的归档信息。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11354"></a><div class="props_rev_3"><a id="GUID-8DFA5382-48FC-4A7D-9443-DB6D3A2F5FE2" name="GUID-8DFA5382-48FC-4A7D-9443-DB6D3A2F5FE2"></a><h4 id="ADMIN-GUID-8DFA5382-48FC-4A7D-9443-DB6D3A2F5FE2" class="sect4"><span class="enumeration_section">12.8.1</span>存档的重做日志文件视图</h4>
                  <div>
                     <p>您可以查询一组动态性能视图，以获取有关归档重做日志文件的信息。</p>
                     <div class="section">
                        <p>多个动态性能视图包含有关归档重做日志文件的有用信息，如下表所示。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8DFA5382-48FC-4A7D-9443-DB6D3A2F5FE2__GUID-029E4B51-6488-4D25-A9F7-445C2015F301">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Column 1 lists the views containing useful information abut archived redo logs. Column 2 contains descriptions of these views." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d136417e3657">动态性能视图</th>
                                 <th align="left" valign="bottom" width="65%" id="d136417e3660">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3665" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-DATABASE.html#REFRN30047" target="_blank">V $ DATABASE</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3665 d136417e3660 ">
                                    <p>显示数据库是否处于<code class="codeph">ARCHIVELOG</code>或<code class="codeph">NOARCHIVELOG</code>模式，以及是否已指定<code class="codeph">MANUAL</code> （存档模式）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3684" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-ARCHIVED_LOG.html#REFRN30011" target="_blank">V $ ARCHIVED_LOG</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3684 d136417e3660 ">
                                    <p>显示控制文件中的历史存档日志信息。如果使用恢复目录，则<code class="codeph">RC_ARCHIVED_LOG</code>视图包含类似的信息。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3697" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-ARCHIVE_DEST.html#REFRN30007" target="_blank">V $ ARCHIVE_DEST</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3697 d136417e3660 ">
                                    <p>描述当前实例，所有归档目标以及这些目标的当前值，模式和状态。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3707" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-ARCHIVE_PROCESSES.html#REFRN30010" target="_blank">V $ ARCHIVE_PROCESSES</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3707 d136417e3660 ">
                                    <p>显示有关实例的各种归档进程状态的信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3717" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-BACKUP_REDOLOG.html#REFRN30024" target="_blank">V $ BACKUP_REDOLOG</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3717 d136417e3660 ">
                                    <p>包含有关归档日志的任何备份的信息。如果使用恢复目录， <code class="codeph">RC_BACKUP_REDOLOG</code>包含类似的信息。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3730" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-LOG.html#REFRN30127" target="_blank">V $ LOG</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3730 d136417e3660 ">
                                    <p>显示数据库的所有重做日志组，并指示需要存档的日志组。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d136417e3740" headers="d136417e3657 ">
                                    <p><code class="codeph"><a href="../refrn/V-LOG_HISTORY.html#REFRN30128" target="_blank">V $ LOG_HISTORY</a></code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d136417e3740 d136417e3660 ">
                                    <p>包含日志历史信息，例如已归档的日志和每个归档日志的SCN范围。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>例如，以下查询显示哪个重做日志组需要存档：</p><pre class="oac_no_warn" dir="ltr">SELECT GROUP＃，ARCHIVED来自SYS.V $ LOG; GROUP＃ARC -------- --- 1是2 NO</pre><p><a id="d136417e3755" class="indexterm-anchor"></a><a id="d136417e3759" class="indexterm-anchor"></a><a id="d136417e3763" class="indexterm-anchor"></a><a id="d136417e3765" class="indexterm-anchor"></a>要查看当前的归档模式，请查询<code class="codeph">V$DATABASE</code>视图：</p><pre class="oac_no_warn" dir="ltr">SELECT LOG_MODE FROM SYS.V $ DATABASE; LOG_MODE ------------ NOARCHIVELOG</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-62E48748-F8A8-4740-90B1-5B3708A63386" title="您可以使用动态性能视图或ARCHIVE LOG LIST命令显示有关归档重做日志的信息。">查看有关存档重做日志的信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11355"></a><div class="props_rev_3"><a id="GUID-EE93A998-5FB5-4BB1-A90E-D48A92897D37" name="GUID-EE93A998-5FB5-4BB1-A90E-D48A92897D37"></a><h4 id="ADMIN-GUID-EE93A998-5FB5-4BB1-A90E-D48A92897D37" class="sect4"><span class="enumeration_section">12.8.2</span>使用ARCHIVE LOG LIST命令</h4>
                  <div>
                     <p>SQL * Plus命令<code class="codeph">ARCHIVE LOG LIST</code>显示已连接实例的归档信息。
                     </p>
                     <div class="section">
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ARCHIVE LOG LIST数据库日志模式存档模式自动存档已启用存档目标D：\ oracle \ oradata \ IDDB2 \ archive最旧的在线日志序列11160下一个存档日志序列11163当前日志序列11163</pre><p>此显示将显示有关当前实例的归档重做日志设置的所有必要信息：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该数据库当前以<code class="codeph">ARCHIVELOG</code>模式运行。
                              </p>
                           </li>
                           <li>
                              <p>自动存档已启用。</p>
                           </li>
                           <li>
                              <p>归档的重做日志目标是D：\ oracle \ oradata \ IDDB2 \ archive。</p>
                           </li>
                           <li>
                              <p>最旧的填充重做日志组的序列号为11160。</p>
                           </li>
                           <li>
                              <p>要归档的下一个已填充的重做日志组的序列号为11163。</p>
                           </li>
                           <li>
                              <p>当前的重做日志文件的序列号为11163。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EE93A998-5FB5-4BB1-A90E-D48A92897D37__GUID-5074806E-6A15-4CBF-8F3E-8E24171CC19E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ARCHIVE LOG LIST</code>命令的更多信息<a href="../sqpug/ARCHIVE-LOG.html#SQPUG028" target="_blank"><span class="italic">，请参见SQL * Plus用户指南和参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-archived-redo-log-files.html#GUID-62E48748-F8A8-4740-90B1-5B3708A63386" title="您可以使用动态性能视图或ARCHIVE LOG LIST命令显示有关归档重做日志的信息。">查看有关存档重做日志的信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13054.tuning-shared-pool-and-large-pool.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>调整共享池和大池</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00"></meta>
      <meta name="dcterms.title" content="Database Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96347-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="tuning-database-buffer-cache.html" title="Previous" type="text/html"></link>
      <link rel="next" href="tuning-result-cache.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="tuning-database-buffer-cache.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="tuning-result-cache.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库性能调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-tuning-database-memory.html" property="item" typeof="WebPage"><span property="name">调整数据库内存</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">调整共享池和大池</li>
            </ol>
            <a id="GUID-2EB3A7A0-881D-42AA-A299-DD118FF2BB92" name="GUID-2EB3A7A0-881D-42AA-A299-DD118FF2BB92"></a><a id="TGDBA558"></a>
            
            <h2 id="TGDBA-GUID-2EB3A7A0-881D-42AA-A299-DD118FF2BB92" class="sect2"><span class="enumeration_chapter">14</span>调整共享池和大池</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何调整共享池和大型池。如果使用自动内存管理来管理系统上的数据库内存，或使用自动共享内存管理来配置共享全局区域（SGA），则无需手动调整共享池和大型池，如本章所述。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="tuning-shared-pool-and-large-pool.html#GUID-861E86EA-60DB-431A-BE3A-7AEFA2E27F94">关于共享池</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-shared-pool-and-large-pool.html#GUID-901C4010-2B6A-4E50-A02E-77830BB7E70D">使用共享池</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-shared-pool-and-large-pool.html#GUID-5823285C-A728-4006-8813-41BB92928F73">配置共享池</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-shared-pool-and-large-pool.html#GUID-096F2CDD-B3EE-4124-BBE3-F60400600972">配置大池</a></p>
                  </li>
               </ul>
            </div><a id="TGDBA559"></a><div class="props_rev_3"><a id="GUID-861E86EA-60DB-431A-BE3A-7AEFA2E27F94" name="GUID-861E86EA-60DB-431A-BE3A-7AEFA2E27F94"></a><h3 id="TGDBA-GUID-861E86EA-60DB-431A-BE3A-7AEFA2E27F94" class="sect3"><span class="enumeration_section">14.1</span>关于共享池</h3>
               <div>
                  <p>Oracle数据库使用共享池来缓存许多不同类型的数据。缓存数据包括PL / SQL块和SQL语句的文本和可执行形式，字典缓存数据，结果缓存数据和其他数据。</p>
                  <p>本节介绍共享池，包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-1C8D7788-CBDA-4951-9F79-9C0550EE935E">使用共享池的好处</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-E33B69A7-C052-4DBB-AD31-424ECC871C6B">共享池概念</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA560"></a><div class="props_rev_3"><a id="GUID-1C8D7788-CBDA-4951-9F79-9C0550EE935E" name="GUID-1C8D7788-CBDA-4951-9F79-9C0550EE935E"></a><h4 id="TGDBA-GUID-1C8D7788-CBDA-4951-9F79-9C0550EE935E" class="sect4"><span class="enumeration_section">14.1.1</span>使用共享池的好处</h4>
                  <div>
                     <p>正确使用和调整共享池可以至少以四种方式减少资源消耗：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果SQL语句位于共享池中，则会避免解析开销，从而导致系统上的CPU资源减少以及最终用户的已用时间。</p>
                        </li>
                        <li>
                           <p>锁定资源使用量显着降低，从而提高了可扩展性。</p>
                        </li>
                        <li>
                           <p>减少了共享池内存需求，因为所有应用程序都使用相同的SQL语句池和字典资源。</p>
                        </li>
                        <li>
                           <p>I / O减少了，因为共享池中的字典元素不需要磁盘访问。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGDBA561"></a><div class="props_rev_3"><a id="GUID-E33B69A7-C052-4DBB-AD31-424ECC871C6B" name="GUID-E33B69A7-C052-4DBB-AD31-424ECC871C6B"></a><h4 id="TGDBA-GUID-E33B69A7-C052-4DBB-AD31-424ECC871C6B" class="sect4"><span class="enumeration_section">14.1.2</span>共享池概念</h4>
                  <div>
                     <p>共享池的主要组件包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>库缓存</p>
                           <p>库高速缓存存储最近引用的SQL和PL / SQL代码的可执行（解析或编译）形式。</p>
                        </li>
                        <li>
                           <p>数据字典缓存</p>
                           <p>数据字典高速缓存存储从数据字典引用的数据。</p>
                        </li>
                        <li>
                           <p>服务器结果缓存（取决于配置）</p>
                           <p>服务器结果缓存是一个可选缓存，用于在共享池中存储查询和PL / SQL函数结果。有关服务器结果缓存的信息，请参阅<span class="q">“ <a href="tuning-result-cache.html#GUID-9C00174C-9046-4EB1-BC1C-5E7FA03FB9AA">关于结果缓存</a> ”</span> 。
                           </p>
                        </li>
                     </ul>
                     <p>共享池中的许多高速缓存（包括库高速缓存和字典高速缓存）会根据需要自动增大或减小大小。当共享池空间不足时，旧条目会老化以容纳新条目。</p>
                     <p>库缓存或数据字典缓存上的缓存未命中比缓冲缓存上的未命中更昂贵。因此，应调整共享池的大小以确保缓存经常使用的数据。</p>
                     <p>多个功能需要共享池中的大量内存分配，例如共享服务器，并行查询或Recovery Manager。Oracle建议使用单独的内存区域 - 大型池 - 来隔离这些功能使用的系统全局区域（SGA）内存。</p>
                     <p>共享池中的内存分配是以块的形式执行的。此分块可以将大对象（超过5 KB）加载到缓存中，而无需单个连续区域。通过这种方式，数据库减少了由于碎片而耗尽连续内存的可能性。</p>
                     <p>Java，PL / SQL或SQL游标有时可能会从共享池中进行大于5 KB的分配。为了使这些分配更有效地发生，Oracle Database隔离了少量的共享池。如果共享池空间不足，则使用称为保留池的隔离内存。</p>
                     <p>以下部分提供有关共享池主要组件的更多详细信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-CB999004-AA94-47FB-A7A1-662239450959">库缓存概念</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-ECD8D7C1-02C2-45B1-8D75-1F42F85FB673">数据字典缓存概念</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-BE6DFC00-A436-4908-A711-9127FABB6809">SQL共享标准</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA562"></a><div class="props_rev_3"><a id="GUID-CB999004-AA94-47FB-A7A1-662239450959" name="GUID-CB999004-AA94-47FB-A7A1-662239450959"></a><h5 id="TGDBA-GUID-CB999004-AA94-47FB-A7A1-662239450959" class="sect5"><span class="enumeration_section">14.1.2.1</span>库高速缓存概念</h5>
                     <div>
                        <p>库高速缓存存储SQL游标，PL / SQL程序和Java类的可执行形式，它们统称为应用程序代码。本节重点介绍与应用程序代码相关的调优。</p>
                        <p>执行应用程序代码时，如果先前已执行并且可以共享现有代码，则Oracle数据库会尝试重用现有代码。如果SQL语句的解析表示存在于库高速缓存中并且可以共享，则数据库将重用现有代码。这称为软解析或库缓存命中。如果Oracle数据库无法使用现有代码，则数据库必须构建应用程序代码的新可执行版本。这称为硬解析或库缓存未命中。有关何时可以共享SQL和PL / SQL语句的信息，请参阅<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-BE6DFC00-A436-4908-A711-9127FABB6809">SQL共享标准</a> ”</span> 。
                        </p>
                        <p>为了执行硬解析，Oracle数据库使用的资源多于软解析期间的资源。用于软解析的资源包括CPU和库高速缓存锁存器获取。硬解析所需的资源包括额外的CPU，库缓存锁存器获取和共享池锁存器获取。在处理SQL语句时，解析步骤或执行步骤可能会发生硬解析。</p>
                        <p>当应用程序对SQL语句进行解析调用时，如果库缓存中不存在语句的解析表示，则Oracle数据库会解析该语句并将解析后的表单存储在共享池中。要减少解析调用上的库缓存未命中，请确保尽可能将所有可共享SQL语句存储在共享池中。</p>
                        <p>当应用程序对SQL语句执行调用时，如果SQL语句的可执行部分从库高速缓存中老化（或取消分配）以为另一个语句腾出空间，则Oracle数据库会隐式重新声明该语句以创建新的共享SQL区域，并执行该语句。这也导致难以解析。要减少执行调用中的库高速缓存未命中，请为库高速缓存分配更多内存。</p>
                        <p>有关硬解析和软解析的详细信息，请参阅<span class="q">“ <a href="designing-and-developing-for-performance.html#GUID-B95920ED-53C2-42A7-A53D-9083974A7A1D">SQL执行效率</a> ”</span> 。
                        </p>
                     </div>
                  </div><a id="TGDBA563"></a><div class="props_rev_3"><a id="GUID-ECD8D7C1-02C2-45B1-8D75-1F42F85FB673" name="GUID-ECD8D7C1-02C2-45B1-8D75-1F42F85FB673"></a><h5 id="TGDBA-GUID-ECD8D7C1-02C2-45B1-8D75-1F42F85FB673" class="sect5"><span class="enumeration_section">14.1.2.2</span>数据字典高速缓存概念</h5>
                     <div>
                        <p>存储在数据字典缓存中的信息包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用户名</p>
                           </li>
                           <li>
                              <p>细分信息</p>
                           </li>
                           <li>
                              <p>档案数据</p>
                           </li>
                           <li>
                              <p>表空间信息</p>
                           </li>
                           <li>
                              <p>序号</p>
                           </li>
                        </ul>
                        <p>数据字典高速缓存还存储关于模式对象的描述性信息或元数据。Oracle数据库在解析SQL游标或PL / SQL程序编译期间使用此元数据。</p>
                     </div>
                  </div><a id="TGDBA564"></a><div class="props_rev_3"><a id="GUID-BE6DFC00-A436-4908-A711-9127FABB6809" name="GUID-BE6DFC00-A436-4908-A711-9127FABB6809"></a><h5 id="TGDBA-GUID-BE6DFC00-A436-4908-A711-9127FABB6809" class="sect5"><span class="enumeration_section">14.1.2.3</span> SQL共享标准</h5>
                     <div>
                        <p>Oracle数据库自动确定发出的SQL语句或PL / SQL块是否与共享池中当前的另一个语句相同。</p>
                        <p>要将SQL语句的文本与共享池中的现有SQL语句进行比较，Oracle数据库将执行以下步骤：</p>
                        <ol>
                           <li>
                              <p>SQL语句的文本经过哈希处理。</p>
                              <p>如果没有匹配的哈希值，则共享池中当前不存在SQL语句，并执行硬分析。</p>
                           </li>
                           <li>
                              <p>如果共享池中的现有SQL语句存在匹配的哈希值，则会将匹配语句的文本与哈希语句的文本进行比较，以验证它们是否相同。</p>
                              <p>SQL语句或PL / SQL块的文本必须相同，字符为字符，包括空格，大小写和注释。例如，以下语句不能使用相同的共享SQL区域：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM员工; SELECT * FROM Employees; SELECT * FROM员工;</pre><p>此外，仅在文字中不同的SQL语句不能使用相同的共享SQL区域。例如，以下语句不会解析为相同的SQL区域：</p><pre class="oac_no_warn" dir="ltr">SELECT count（1）FROM employees WHERE manager_id = 121; SELECT count（1）FROM employees WHERE manager_id = 247;</pre><p>此规则的唯一例外是当<code class="codeph">CURSOR_SHARING</code>参数设置为<code class="codeph">FORCE</code> ，在这种情况下类似的语句可以共享SQL区域。有关游标共享所涉及的成本和收益的信息，请参阅<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-40A8C949-9B20-4217-A730-FE8A910B358F">共享游标</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>将已发布语句中引用的对象与共享池中所有现有语句的引用对象进行比较，以确保它们完全相同。</p>
                              <p>对SQL语句或PL / SQL块中的模式对象的引用必须解析为同一模式中的同一对象。例如，如果两个用户分别发出以下SQL语句但它们各自都有自己的<code class="codeph">employees</code>表，则该语句不会被视为相同，因为该语句为每个用户引用了不同的表：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM员工;</pre></li>
                           <li>
                              <p>SQL语句中的绑定变量必须在名称，数据类型和长度方面匹配。</p>
                              <p>例如，以下语句不能使用相同的共享SQL区域，因为绑定变量名称不同：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees WHERE department_id =：department_id; SELECT * FROM employees WHERE department_id =：dept_id;</pre><p>许多Oracle产品（例如Oracle Forms和预编译器）在将语句传递到数据库之前转换SQL。字符统一更改为大写，压缩空格，并重命名绑定变量，以便生成一组一致的SQL语句。</p>
                           </li>
                           <li>
                              <p>会话的环境必须相同。</p>
                              <p>例如，必须使用相同的优化目标优化SQL语句。</p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-BE6DFC00-A436-4908-A711-9127FABB6809__GUID-F540CE9A-05E8-4B4D-8FCC-E39FF54709A9">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">CURSOR_SHARING</code>初始化参数的信息，请<a href="../refrn/CURSOR_SHARING.html#REFRN-GUID-455358F8-D657-49A2-B32B-13A1DC53E7D2" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA565"></a><div class="props_rev_3"><a id="GUID-901C4010-2B6A-4E50-A02E-77830BB7E70D" name="GUID-901C4010-2B6A-4E50-A02E-77830BB7E70D"></a><h3 id="TGDBA-GUID-901C4010-2B6A-4E50-A02E-77830BB7E70D" class="sect3"><span class="enumeration_section">14.2</span>使用共享池</h3>
               <div>
                  <p>共享池的一个重要目的是缓存SQL和PL / SQL语句的可执行版本。这使得可以执行相同SQL或PL / SQL代码的多次执行，而无需硬解析所需的资源，从而显着减少CPU，内存和锁存器使用。</p>
                  <p>共享池还能够支持数据仓库应用程序中的非共享SQL，这些应用程序执行低并发，高资源的SQL语句。在这种情况下，建议使用带有文字值的非共享SQL。使用文字值而不是绑定变量使优化器能够进行良好的列选择性估计，从而提供最佳的数据访问计划。</p>
                  <p>在高货币在线事务处理（OLTP）系统中，有效使用共享池可显着降低与解析相关的应用程序可伸缩性问题的可能性。有几种方法可以确保在OLTP系统中有效使用共享池和相关资源：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-5E75A07B-6A65-47E9-BD77-78C9BC93B2FB">使用共享游标</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-CA892C0A-60BB-4E45-AC8D-D80092BEA13A">使用单用户登录和限定表引用</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-E3F2ADA0-18DB-47C2-B1CD-4DEE8E9DEF85">使用PL / SQL</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-9FEE657D-0CB1-451B-8CD3-4FC15E95C9E2">避免执行DDL操作</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-2951BB9C-FCCE-47C8-B48A-FCCBB63AC141">缓存序列号</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-25C7A1B1-CA7F-4812-97E2-95EA558AC778">控制光标访问</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-A2FF092A-18CE-46E0-903C-039105272CDC">保持持久连接</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-901C4010-2B6A-4E50-A02E-77830BB7E70D__GUID-A32CBF4C-5373-45BF-A251-289782B138EC">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../vldbg/parameters-parallel-exec.html#VLDBG-GUID-8189FBCD-0A9D-4B4D-ACE9-864B2778EE07" target="_blank"><span class="italic">“Oracle数据库VLDB和分区指南”，</span></a>以获取有关并行查询执行对共享池的影响的信息</p>
                  </div>
               </div><a id="TGDBA566"></a><div class="props_rev_3"><a id="GUID-5E75A07B-6A65-47E9-BD77-78C9BC93B2FB" name="GUID-5E75A07B-6A65-47E9-BD77-78C9BC93B2FB"></a><h4 id="TGDBA-GUID-5E75A07B-6A65-47E9-BD77-78C9BC93B2FB" class="sect4"><span class="enumeration_section">14.2.1</span>使用共享游标</h4>
                  <div>
                     <p>对运行相同应用程序的多个用户重用共享SQL可避免硬解析。软解析可显着减少资源的使用，例如共享池和库高速缓存锁存器。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5E75A07B-6A65-47E9-BD77-78C9BC93B2FB__GUID-2790BADD-F641-44BE-9A6E-BF7EDBB12CBD">要使用共享游标：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>尽可能在SQL语句中使用绑定变量而不是文字。</p>
                              <p>例如，以下两个SQL语句不能使用相同的共享区域，因为它们与字符的字符不匹配：</p><pre class="oac_no_warn" dir="ltr">SELECT employee_id FROM employees WHERE department_id = 10; SELECT employee_id FROM employees WHERE department_id = 20;</pre><p>用绑定变量替换文字只会导致一个可以执行两次的SQL语句：</p><pre class="oac_no_warn" dir="ltr">SELECT employee_id FROM employees WHERE department_id =：dept_id;</pre><p>对于不能重写代码以使用绑定变量的现有应用程序，请使用<a id="d41928e724" class="indexterm-anchor"></a> <code class="codeph">CURSOR_SHARING</code>初始化参数，以避免一些硬分析开销，如<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-40A8C949-9B20-4217-A730-FE8A910B358F">共享游标</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>避免导致大量用户发布动态非共享SQL语句的应用程序设计。</p>
                              <p>通常，使用预设查询可以满足大多数用户所需的大多数数据。使用需要此类功能的动态SQL。</p>
                           </li>
                           <li>
                              <p>确保应用程序的用户不会更改其各个会话的优化方法和目标。</p>
                           </li>
                           <li>
                              <p>为应用程序开发人员建立以下策略：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>标准化绑定变量的命名约定和SQL语句和PL / SQL块的间距约定。</p>
                                 </li>
                                 <li>
                                    <p>尽可能考虑使用存储过程。</p>
                                    <p>发出相同存储过程的多个用户自动使用相同的共享PL / SQL区域。因为存储过程以解析的形式存储，所以它们的使用减少了运行时解析。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>对于相同但未共享的SQL语句，请查询<code class="codeph">V$SQL_SHARED_CURSOR</code>视图以确定不共享游标的原因。
                              </p>
                              <p>这包括优化器设置和绑定变量不匹配。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-5E75A07B-6A65-47E9-BD77-78C9BC93B2FB__GUID-41BB419C-DEC9-4921-89C5-2C0BCCC2AB25">
                           <p class="notep1">也可以看看：</p>
                           <p>有关游标共享的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=TGSQL-GUID-971F4652-3950-4662-82DE-713DDEED317C" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA567"></a><div class="props_rev_3"><a id="GUID-CA892C0A-60BB-4E45-AC8D-D80092BEA13A" name="GUID-CA892C0A-60BB-4E45-AC8D-D80092BEA13A"></a><h4 id="TGDBA-GUID-CA892C0A-60BB-4E45-AC8D-D80092BEA13A" class="sect4"><span class="enumeration_section">14.2.2</span>使用单用户登录和限定表引用</h4>
                  <div>
                     <p>在用户使用自己的用户登录登录数据库的大型OLTP系统中，显式限定段所有者而不是使用公共同义词会显着减少字典高速缓存中的条目数。</p>
                     <p>限定表名的替代方法是通过单个用户登录连接到数据库，而不是单个用户登录。用户级验证可以在中间层本地进行。</p>
                  </div>
               </div><a id="TGDBA568"></a><div class="props_rev_3"><a id="GUID-E3F2ADA0-18DB-47C2-B1CD-4DEE8E9DEF85" name="GUID-E3F2ADA0-18DB-47C2-B1CD-4DEE8E9DEF85"></a><h4 id="TGDBA-GUID-E3F2ADA0-18DB-47C2-B1CD-4DEE8E9DEF85" class="sect4"><span class="enumeration_section">14.2.3</span>使用PL / SQL</h4>
                  <div>
                     <p>使用存储的PL / SQL包可以克服具有数千个用户的系统的许多可伸缩性问题，每个用户都具有单独的用户登录和公共同义词。这是因为包作为所有者而不是调用者执行，这大大减少了字典缓存负载。</p>
                     <div class="infoboxnote" id="GUID-E3F2ADA0-18DB-47C2-B1CD-4DEE8E9DEF85__GUID-91D40304-7A45-476C-8895-3DBEE5D8C1D7">
                        <p class="notep1">注意：</p>
                        <p>Oracle鼓励使用definer权限包来克服可伸缩性问题。减少字典缓存加载的好处不如调用者的权限包那么好。</p>
                     </div>
                  </div>
               </div><a id="TGDBA569"></a><div class="props_rev_3"><a id="GUID-9FEE657D-0CB1-451B-8CD3-4FC15E95C9E2" name="GUID-9FEE657D-0CB1-451B-8CD3-4FC15E95C9E2"></a><h4 id="TGDBA-GUID-9FEE657D-0CB1-451B-8CD3-4FC15E95C9E2" class="sect4"><span class="enumeration_section">14.2.4</span>避免执行DDL操作</h4>
                  <div>
                     <p>避免在高峰时段对高使用率段执行DDL操作。对这些段执行DDL操作通常会导致依赖SQL失效并在以后的执行中重新解析。</p>
                  </div>
               </div><a id="TGDBA570"></a><div class="props_rev_3"><a id="GUID-2951BB9C-FCCE-47C8-B48A-FCCBB63AC141" name="GUID-2951BB9C-FCCE-47C8-B48A-FCCBB63AC141"></a><h4 id="TGDBA-GUID-2951BB9C-FCCE-47C8-B48A-FCCBB63AC141" class="sect4"><span class="enumeration_section">14.2.5</span>缓存序列号</h4>
                  <div>
                     <p>为频繁更新的序列号分配足够的缓存空间可显着降低字典缓存锁定的频率，从而提高可伸缩性。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2951BB9C-FCCE-47C8-B48A-FCCBB63AC141__GUID-E2D8AC78-5183-49E8-90E2-1B23726C316B">要配置每个序列的缓存条目数：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code>或<code class="codeph">ALTER</code> <code class="codeph">SEQUENCE</code>语句中使用<code class="codeph">CACHE</code>关键字。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA571"></a><div class="props_rev_3"><a id="GUID-25C7A1B1-CA7F-4812-97E2-95EA558AC778" name="GUID-25C7A1B1-CA7F-4812-97E2-95EA558AC778"></a><h4 id="TGDBA-GUID-25C7A1B1-CA7F-4812-97E2-95EA558AC778" class="sect4"><span class="enumeration_section">14.2.6</span>控制光标访问</h4>
                  <div>
                     <p><a id="d41928e1053" class="indexterm-anchor"></a><a id="d41928e1057" class="indexterm-anchor"></a><a id="d41928e1061" class="indexterm-anchor"></a>根据您的应用程序工具，您可以通过控制游标访问来控制应用程序执行解析调用的频率。
                     </p>
                     <p>应用程序关闭游标或重新使用现有游标以获取新SQL语句的频率会影响会话使用的内存量，通常会影响该会话执行的解析量。关闭游标或重用游标（用于不同的SQL语句）的应用程序不需要像保持游标打开的应用程序那样多的会话内存。相反，相同的应用程序可能需要使用更多的CPU和数据库资源来执行更多的解析调用</p>
                     <p>与未经常执行的SQL语句关联的游标可以关闭或重用于其他语句，因为重新执行（和重新分析）该语句的可能性很低。当包含将重新执行的SQL语句的游标关闭或重用于另一个语句时，需要额外的解析调用。如果光标保持打开状态，它可能已经被重用而没有发出解析调用的开销。</p>
                     <p>控制游标访问的方式取决于您的应用程序开发工具。本节介绍用于Oracle数据库工具的方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-F3588C24-9678-4B7D-AF51-AF8D8277089A">使用OCI控制光标访问</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-CCB48FA6-C4FE-4853-9CE6-0826433ED341">使用Oracle预编译器控制游标访问</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-46E76F9C-71A7-4229-BCCE-A617E74CB2F6">使用SQLJ控制游标访问</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-E83799DC-CA41-4E44-B463-1D4E4A470591">使用JDBC控制游标访问</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-F79E99F4-B75A-4066-8CA8-BA37BDC1A119">使用Oracle Forms控制游标访问</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-25C7A1B1-CA7F-4812-97E2-95EA558AC778__GUID-0B7DC4A1-39C5-4EFC-A9B1-D5AE0D719272">
                        <p class="notep1">也可以看看：</p>
                        <p>有关每个工具的信息的工具特定文档</p>
                     </div>
                  </div><a id="TGDBA572"></a><div class="props_rev_3"><a id="GUID-F3588C24-9678-4B7D-AF51-AF8D8277089A" name="GUID-F3588C24-9678-4B7D-AF51-AF8D8277089A"></a><h5 id="TGDBA-GUID-F3588C24-9678-4B7D-AF51-AF8D8277089A" class="sect5"><span class="enumeration_section">14.2.6.1</span>使用OCI控制光标访问</h5>
                     <div>
                        <p>使用Oracle调用接口（OCI）时，请不要关闭并重新打开将要重新执行的游标。相反，保持游标打开，并在执行之前更改绑定变量中的文字值。</p>
                        <p>当将来重新执行现有SQL语句时，避免重用新SQL语句的语句句柄。</p>
                     </div>
                  </div><a id="TGDBA573"></a><div class="props_rev_3"><a id="GUID-CCB48FA6-C4FE-4853-9CE6-0826433ED341" name="GUID-CCB48FA6-C4FE-4853-9CE6-0826433ED341"></a><h5 id="TGDBA-GUID-CCB48FA6-C4FE-4853-9CE6-0826433ED341" class="sect5"><span class="enumeration_section">14.2.6.2</span>使用Oracle预编译<span class="enumeration_section">器</span>控制游标访问</h5>
                     <div>
                        <p>使用时<a id="d41928e1205" class="indexterm-anchor"></a> Oracle预编译器，您可以通过设置预编译器子句来控制何时关闭游标。在Oracle模式下，子句如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">HOLD_CURSOR =是</code> <a id="d41928e1216" class="indexterm-anchor"></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">RELEASE_CURSOR = NO</code> <a id="d41928e1223" class="indexterm-anchor"></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">MAXOPENCURSORS =</code> <span class="italic"><code class="codeph">desired_value</code></span> <a id="d41928e1233" class="indexterm-anchor"></a> 
                              </p>
                           </li>
                        </ul>
                        <p>可以在预编译器命令行或预编译器程序中指定预编译器子句。Oracle建议您不要使用ANSI模式，其中切换<code class="codeph">HOLD_CURSOR</code>和<code class="codeph">RELEASE_CURSOR</code>的值。
                        </p>
                        <div class="infoboxnotealso" id="GUID-CCB48FA6-C4FE-4853-9CE6-0826433ED341__GUID-4697CE18-FDDD-4ABE-97C8-28C477A6FE35">
                           <p class="notep1">也可以看看：</p>
                           <p>有关这些子句的信息，请参阅语言的预编译器手册</p>
                        </div>
                     </div>
                  </div><a id="TGDBA574"></a><div class="props_rev_3"><a id="GUID-46E76F9C-71A7-4229-BCCE-A617E74CB2F6" name="GUID-46E76F9C-71A7-4229-BCCE-A617E74CB2F6"></a><h5 id="TGDBA-GUID-46E76F9C-71A7-4229-BCCE-A617E74CB2F6" class="sect5"><span class="enumeration_section">14.2.6.3</span>使用SQLJ控制光标访问</h5>
                     <div>
                        <p>准备SQL语句，然后使用绑定变量的新值重新执行该语句。光标在会话期间保持打开状态。</p>
                        <div class="infoboxnote" id="GUID-46E76F9C-71A7-4229-BCCE-A617E74CB2F6__GUID-D3E6AC5B-352E-4468-A014-5416C1C630A3">
                           <p class="notep1">注意：</p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，不支持服务器端SQLJ代码，也就是说，不能在存储过程，函数和触发器中使用SQLJ代码。
                        </div>
                     </div>
                  </div><a id="TGDBA575"></a><div class="props_rev_3"><a id="GUID-E83799DC-CA41-4E44-B463-1D4E4A470591" name="GUID-E83799DC-CA41-4E44-B463-1D4E4A470591"></a><h5 id="TGDBA-GUID-E83799DC-CA41-4E44-B463-1D4E4A470591" class="sect5"><span class="enumeration_section">14.2.6.4</span>使用JDBC控制游标访问</h5>
                     <div>
                        <p>如果将重新执行游标，则避免关闭游标，因为新的文本值可以绑定到游标以便重新执行。或者，JDBC使用<code class="codeph">setStmtCacheSize()</code>方法在JDBC客户端中提供SQL语句高速缓存。使用此方法，JDBC将创建一个JDBC语句本地的SQL语句高速缓存。
                        </p>
                        <div class="infoboxnotealso" id="GUID-E83799DC-CA41-4E44-B463-1D4E4A470591__GUID-829B7453-EAAC-43BE-8901-C9F4738D6E32">
                           <p class="notep1">也可以看看：</p>
                           <p>有关使用JDBC SQL语句高速缓存的信息，请参见<a href="../jjdbc/statement-and-resultset-caching.html#JJDBC-GUID-F3F4BB63-356A-4F65-81B1-5C84FC35A16D" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                        </div>
                     </div>
                  </div><a id="TGDBA576"></a><div class="props_rev_3"><a id="GUID-F79E99F4-B75A-4066-8CA8-BA37BDC1A119" name="GUID-F79E99F4-B75A-4066-8CA8-BA37BDC1A119"></a><h5 id="TGDBA-GUID-F79E99F4-B75A-4066-8CA8-BA37BDC1A119" class="sect5"><span class="enumeration_section">14.2.6.5</span>使用Oracle Forms控制游标访问</h5>
                     <div>
                        <p>同<a id="d41928e1416" class="indexterm-anchor"></a><a id="d41928e1420" class="indexterm-anchor"></a>在Oracle Forms中，可以在运行时控制游标访问的某些方面，触发级别或表单级别。
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA577"></a><div class="props_rev_3"><a id="GUID-A2FF092A-18CE-46E0-903C-039105272CDC" name="GUID-A2FF092A-18CE-46E0-903C-039105272CDC"></a><h4 id="TGDBA-GUID-A2FF092A-18CE-46E0-903C-039105272CDC" class="sect4"><span class="enumeration_section">14.2.7</span>维护持久连接</h4>
                  <div>
                     <p>具有中间层的大型OLTP应用程序应保持连接，而不是为每个数据库请求连接和断开连接。维护持久连接可节省CPU资源和数据库资源，例如锁存器。</p>
                  </div>
               </div>
            </div><a id="TGDBA578"></a><div class="props_rev_3"><a id="GUID-5823285C-A728-4006-8813-41BB92928F73" name="GUID-5823285C-A728-4006-8813-41BB92928F73"></a><h3 id="TGDBA-GUID-5823285C-A728-4006-8813-41BB92928F73" class="sect3"><span class="enumeration_section">14.3</span>配置共享池</h3>
               <div>
                  <p>本节介绍如何配置共享池，并包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-278E124D-F24B-4D55-A556-4DC098320654">调整共享池的大小</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-B1867602-00BF-43CD-9FAB-3C9829358CDD">释放游标</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-C13EE398-F162-4A23-8393-393D71133004">缓存会话游标</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-40A8C949-9B20-4217-A730-FE8A910B358F">共享游标</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-E0D415CA-C4A7-4588-ADF2-4E302CE25849">保持大型物体防止老化</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-7FD646B3-FCE3-4D3C-B988-C8D138FFD514">配置保留池</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA579"></a><div class="props_rev_3"><a id="GUID-278E124D-F24B-4D55-A556-4DC098320654" name="GUID-278E124D-F24B-4D55-A556-4DC098320654"></a><h4 id="TGDBA-GUID-278E124D-F24B-4D55-A556-4DC098320654" class="sect4"><span class="enumeration_section">14.3.1</span>调整共享池的大小</h4>
                  <div>
                     <p>配置新数据库实例时，很难知道共享池缓存的正确大小。通常，DBA首先估计缓存大小，然后在实例上运行代表性工作负载，并检查相关统计信息以查看缓存是否配置不足或配置过多。</p>
                     <p>对于大多数OLTP应用程序，共享池大小是应用程序性能的重要因素。对于发布数量非常有限的离散SQL语句的应用程序（如决策支持系统（DSS）），共享池大小不太重要。</p>
                     <p>如果共享池太小，则使用额外资源来管理有限的可用空间量。这会消耗CPU和锁存资源，并导致争用。理想情况下，共享池应该足够大，以便缓存经常访问的对象。共享池中有大量可用内存是浪费内存。在数据库运行后检查统计信息时，请确保工作负载中不存在任何这些错误。</p>
                     <p>本节介绍如何调整共享池的大小，并包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-B3D48D5B-D19D-4E0F-84F0-1276FA113581">使用库缓存统计信息</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-835D3E6D-1FF9-44ED-B22A-44C4101A4A9C">使用共享池咨询统计信息</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB">使用字典缓存统计</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-220BC80E-FD16-4259-A7C1-E1967C510CAE">增加分配给共享池的内存</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-813F1711-5A90-45BE-B113-C0CEF6DD3048">减少分配给共享池的内存</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA580"></a><div class="props_rev_3"><a id="GUID-B3D48D5B-D19D-4E0F-84F0-1276FA113581" name="GUID-B3D48D5B-D19D-4E0F-84F0-1276FA113581"></a><h5 id="TGDBA-GUID-B3D48D5B-D19D-4E0F-84F0-1276FA113581" class="sect5"><span class="enumeration_section">14.3.1.1</span>使用库缓存统计信息</h5>
                     <div>
                        <p>调整共享池的大小时，目标是缓存在库高速缓存中多次执行的SQL语句，而不会过度分配内存。要完成此目标，请检查以下库高速缓存统计信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">重装</code></p>
                              <p><code class="codeph">V$LIBRARYCACHE</code>视图中的<code class="codeph">RELOADS</code>列显示了从缓存中老化的先前缓存的SQL语句的重新加载（或重新分析）的数量。如果应用程序有效地重用SQL并在具有最佳共享池大小的系统上运行，则此统计信息应具有接近零的值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">废票</code></p>
                              <p><code class="codeph">V$LIBRARYCACHE</code>视图中的<code class="codeph">INVALIDATIONS</code>列显示库高速缓存数据无效并且必须重新分析的次数。此统计信息的值应接近零，尤其是在峰值负载期间的OLTP系统上。这意味着可以共享的SQL语句由某些操作（例如DDL）无效。
                              </p>
                           </li>
                           <li>
                              <p>库缓存命中率</p>
                              <p>库高速缓存命中率是库高速缓存运行状况的广泛指示。应该将此值与其他统计信息一起考虑，例如硬解析速率以及是否存在任何共享池或库高速缓存锁存器争用。</p>
                           </li>
                           <li>
                              <p>共享池中的可用内存量</p>
                              <p>要查看共享池中的可用内存量，请查询<code class="codeph">V$SGASTAT</code>性能视图。理想情况下，可用内存应尽可能低，而不会导致系统上的任何重新分析。
                              </p>
                           </li>
                        </ul>
                        <p>以下部分描述了如何查看和检查这些库高速缓存统计信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36">使用V $ LIBRARYCACHE视图</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-CB036110-C43F-4265-8084-C721FEA037E0">计算库高速缓存命中率</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-8CA2015B-91BB-4730-B3C0-4BA90DD3C6FB">查看共享池中的可用内存量</a></p>
                           </li>
                        </ul>
                     </div><a id="TGDBA582"></a><a id="TGDBA581"></a><div class="props_rev_3"><a id="GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36" name="GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36"></a><h6 id="TGDBA-GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36" class="sect6"><span class="enumeration_section">14.3.1.1.1</span>使用V $ LIBRARYCACHE视图</h6>
                        <div>
                           <div class="section">
                              <p>使用<code class="codeph">V$LIBRARYCACHE</code>视图监视反映库缓存活动的统计信息。这些统计信息反映了最新数据库实例启动后的所有库缓存活动。
                              </p>
                              <p>此视图中的每一行都包含库缓存中保留的一种项目的统计信息。每行描述的项目由<code class="codeph">NAMESPACE</code>的值标识<a id="d41928e1809" class="indexterm-anchor"></a><a id="d41928e1813" class="indexterm-anchor"></a>柱。具有以下<code class="codeph">NAMESPACE</code>值的行反映了SQL语句和PL / SQL块的库高速缓存活动：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">SQL</code> <code class="codeph">AREA</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">表/程序</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">身体</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">触发</code></p>
                                 </li>
                              </ul>
                              <p>具有其他<code class="codeph">NAMESPACE</code>值的行反映了Oracle数据库用于依赖项维护的对象定义的库高速缓存活动。
                              </p>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36__BABGHDDI">示例14-1</a>显示了此视图的查询，以单独检查每个命名空间。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36__BABGHDDI">
                              <p class="titleinexample">示例14-1查询V $ LIBRARYCACHE视图</p><pre class="oac_no_warn" dir="ltr">SELECT命名空间，引脚，pinhits，重载，失效FROM V $ LIBRARYCACHE ORDER BY namespace;</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">NAMESPACE PINS PINHITS RELOADS INVALIDATIONS --------------- ---------- ---------- ---------- ------------- BODY 8870 8819 0 0 CLUSTER 393 380 0 0 INDEX 29 0 0 0 OBJECT 0 0 0 0 PIPE 55265 55263 0 0 SQL AREA 21536413 21520516 11204 2表/过程10775684 10774401 0 0 TRIGGER 1852 1844 0 0</pre><p>在此示例中，输出显示：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于<code class="codeph">SQL AREA</code>命名空间，有21,536,413次执行。
                                    </p>
                                 </li>
                                 <li>
                                    <p>这些执行中有11,204个导致库高速缓存未命中，要求数据库隐式重新分析语句或块，或者重新加载对象定义，因为它已从库高速缓存中老化。</p>
                                 </li>
                                 <li>
                                    <p>SQL语句失效两次，再次导致库缓存未命中。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36__GUID-6DB7DAED-1410-4C35-8380-CB2E0009C273">
                                 <p class="notep1">注意：</p>
                                 <p>此查询从实例启动返回数据。使用间隔收集的统计信息可以更好地识别问题。有关在一定时间间隔内收集信息的信息，请参阅<a href="automatic-performance-diagnostics.html#GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" title="从Oracle Database 12c开始，默认情况下在多租户容器数据库（CDB）的根容器中启用ADDM。从Oracle Database 19c开始，您还可以在可插拔数据库（PDB）中使用ADDM。默认情况下，ADDM在可插拔数据库（PDB）中不起作用，因为默认情况下在PDB中禁用自动AWR快照。要在PDB中使用ADDM，必须通过将AWR_PDB_AUTOFLUSH_ENABLED初始化参数设置为TRUE且AWR快照间隔大于0来在PDB中启用自动AWR快照。">自动性能诊断</a> 。
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36__GUID-E7D8C47B-1921-4AA9-9B27-F8BBD453E6F5">
                                 <p class="notep1">也可以看看：</p>
                                 <p> 有关<code class="codeph">V$LIBRARYCACHE</code>视图的信息，请<a href="../refrn/V-LIBRARYCACHE.html#REFRN-GUID-3BE0F434-A392-42C9-BD77-FD2A7B72D6DB" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </div>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="TGDBA583"></a><div class="props_rev_3"><a id="GUID-CB036110-C43F-4265-8084-C721FEA037E0" name="GUID-CB036110-C43F-4265-8084-C721FEA037E0"></a><h6 id="TGDBA-GUID-CB036110-C43F-4265-8084-C721FEA037E0" class="sect6"><span class="enumeration_section">14.3.1.1.2</span>计算库高速缓存命中率</h6>
                        <div>
                           <div class="section">
                              <p>要计算库高速缓存命中率，请使用以下公式：</p><pre class="oac_no_warn" dir="ltr">库高速缓存命中率=总和（pinhits）/ sum（引脚）</pre><p>将库高速缓存命中率公式应用于<a href="tuning-shared-pool-and-large-pool.html#GUID-0A2DD50D-D1D3-4B70-BCE7-74CB51DD6B36__BABGHDDI">示例14-1会</a>导致以下库高速缓存命中率：</p><pre class="oac_no_warn" dir="ltr">SUM（PINHITS）/ SUM（PINS）---------------------- .999466248</pre><p>在此示例中，命中百分比约为99.94％，这意味着只有.06％的执行导致重新分析。</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="TGDBA585"></a><a id="TGDBA584"></a><div class="props_rev_3"><a id="GUID-8CA2015B-91BB-4730-B3C0-4BA90DD3C6FB" name="GUID-8CA2015B-91BB-4730-B3C0-4BA90DD3C6FB"></a><h6 id="TGDBA-GUID-8CA2015B-91BB-4730-B3C0-4BA90DD3C6FB" class="sect6"><span class="enumeration_section">14.3.1.1.3</span>查看共享池中的<span class="enumeration_section">可用</span>内存量</h6>
                        <div>
                           <div class="section">
                              <p>在<code class="codeph">V$SGASTAT</code>视图中报告共享池中的可用内存量。
                              </p>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-8CA2015B-91BB-4730-B3C0-4BA90DD3C6FB__BABCHDBJ">例14-2</a>显示了该视图的查询。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-8CA2015B-91BB-4730-B3C0-4BA90DD3C6FB__BABCHDBJ">
                              <p class="titleinexample">例14-2查询V $ SGASTAT视图</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM V $ SGASTAT WHERE name ='free memory'AND pool ='shared pool';</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">POOL NAME BYTES ----------- -------------------------- ----------共享池可用内存4928280</pre><p>如果共享池中始终提供可用内存，则增加其大小几乎不会带来任何好处。然而，仅仅因为共享池已满，并不一定意味着存在问题。它可能表示配置良好的系统。</p>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div><a id="TGDBA586"></a><div class="props_rev_3"><a id="GUID-835D3E6D-1FF9-44ED-B22A-44C4101A4A9C" name="GUID-835D3E6D-1FF9-44ED-B22A-44C4101A4A9C"></a><h5 id="TGDBA-GUID-835D3E6D-1FF9-44ED-B22A-44C4101A4A9C" class="sect5"><span class="enumeration_section">14.3.1.2</span>使用共享池咨询统计信息</h5>
                     <div>
                        <p>可用于库高速缓存的内存量可能会极大地影响Oracle数据库的解析速率。为了帮助您正确调整库高速缓存的大小，Oracle数据库提供了以下共享池顾问视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">V $ SHARED_POOL_ADVICE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">V $ LIBRARY_CACHE_MEMORY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">V $ JAVA_POOL_ADVICE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">V $ JAVA_LIBRARY_CACHE_MEMORY</code></p>
                           </li>
                        </ul>
                        <p>这些共享池顾问视图提供有关库高速缓存内存的信息，使您能够预测更改共享池大小如何影响共享池中对象的老化。这些视图中的共享池顾问统计信息跟踪库高速缓存对共享池内存的使用，并预测库高速缓存在不同大小的共享池中的行为方式。使用这些视图可以确定：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>库缓存使用了多少内存</p>
                           </li>
                           <li>
                              <p>当前固定了多少内存</p>
                           </li>
                           <li>
                              <p>共享池的最近最少使用（LRU）列表中有多少内存</p>
                           </li>
                           <li>
                              <p>通过更改共享池的大小可能会丢失或获得多少时间</p>
                           </li>
                        </ul>
                        <p>启用共享池通报时，这些视图显示共享池通报统计信息。禁用通报时重置统计信息。</p>
                        <p>以下部分更详细地描述了这些视图：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-55833338-4B36-4742-8BBA-336DC130C481">关于V $ SHARED_POOL_ADVICE视图</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-C7190867-D593-4C78-9B3B-500CFC756076">关于V $ LIBRARY_CACHE_MEMORY视图</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-shared-pool-and-large-pool.html#GUID-A1A06734-2F03-42A7-951C-BEC88691BFC9">关于V $ JAVA_POOL_ADVICE和V $ JAVA_LIBRARY_CACHE_MEMORY视图</a></p>
                           </li>
                        </ul>
                     </div><a id="TGDBA587"></a><div class="props_rev_3"><a id="GUID-55833338-4B36-4742-8BBA-336DC130C481" name="GUID-55833338-4B36-4742-8BBA-336DC130C481"></a><h6 id="TGDBA-GUID-55833338-4B36-4742-8BBA-336DC130C481" class="sect6"><span class="enumeration_section">14.3.1.2.1</span>关于V $ SHARED_POOL_ADVICE视图</h6>
                        <div>
                           <p>该<a id="d41928e2185" class="indexterm-anchor"></a> <code class="codeph">V$SHARED_POOL_ADVICE</code>视图显示有关不同池大小的共享池中估计的分析时间的信息。大小范围从当前共享池大小的10％或固定库高速缓存内存量（以较高者为准）到当前共享池大小的200％，等间隔。间隔的值取决于共享池的当前大小。
                           </p>
                           <div class="infoboxnotealso" id="GUID-55833338-4B36-4742-8BBA-336DC130C481__GUID-9CF63C0B-2590-4494-9820-92664E824A9B">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">V$SHARED_POOL_ADVICE</code>视图的更多信息，请<span class="italic"><a href="../refrn/V-SHARED_POOL_ADVICE.html#REFRN-GUID-A88630F5-B271-48B5-B863-32A58F22E2C1" target="_blank">参见Oracle数据库参考</a></span></p>
                           </div>
                        </div>
                     </div><a id="TGDBA588"></a><div class="props_rev_3"><a id="GUID-C7190867-D593-4C78-9B3B-500CFC756076" name="GUID-C7190867-D593-4C78-9B3B-500CFC756076"></a><h6 id="TGDBA-GUID-C7190867-D593-4C78-9B3B-500CFC756076" class="sect6"><span class="enumeration_section">14.3.1.2.2</span>关于V $ LIBRARY_CACHE_MEMORY视图</h6>
                        <div>
                           <p>该<a id="d41928e2251" class="indexterm-anchor"></a> <code class="codeph">V$LIBRARY_CACHE_MEMORY</code>视图显示有关分配给不同命名空间中的库高速缓存内存对象的内存的信息。内存对象是内存的内存分组，用于高效管理。库高速缓存对象可以包括一个或多个存储器对象。
                           </p>
                           <div class="infoboxnotealso" id="GUID-C7190867-D593-4C78-9B3B-500CFC756076__GUID-9CF63C0B-2590-4494-9820-92664E824A9B">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">V$LIBRARY_CACHE_MEMORY</code>视图的更多信息，请<span class="italic"><a href="../refrn/V-LIBRARY_CACHE_MEMORY.html#REFRN-GUID-BCA78008-713C-46F2-9E15-A068A2199841" target="_blank">参见Oracle数据库参考</a></span></p>
                           </div>
                        </div>
                     </div><a id="TGDBA589"></a><div class="props_rev_3"><a id="GUID-A1A06734-2F03-42A7-951C-BEC88691BFC9" name="GUID-A1A06734-2F03-42A7-951C-BEC88691BFC9"></a><h6 id="TGDBA-GUID-A1A06734-2F03-42A7-951C-BEC88691BFC9" class="sect6"><span class="enumeration_section">14.3.1.2.3</span>关于V $ JAVA_POOL_ADVICE和V $ JAVA_LIBRARY_CACHE_MEMORY视图</h6>
                        <div>
                           <p>该<a id="d41928e2318" class="indexterm-anchor"></a><a id="d41928e2320" class="indexterm-anchor"></a> <code class="codeph">V$JAVA_POOL_ADVICE</code>和<code class="codeph">V$JAVA_LIBRARY_CACHE_MEMORY</code>视图包含Java池<code class="codeph">V$JAVA_LIBRARY_CACHE_MEMORY</code>统计信息，这些统计信息跟踪有关用于Java的库高速缓存内存的信息，并预测更改Java池大小如何影响分析率。
                           </p>
                           <p><code class="codeph">V$JAVA_POOL_ADVICE</code>视图显示有关不同池大小的Java池中估计的分析时间的信息。大小范围从当前Java池大小的10％或固定Java库高速缓存内存量 - 以当前Java池大小的高到200％为单位，等间隔。间隔的值取决于Java池的当前大小。
                           </p>
                           <div class="infoboxnotealso" id="GUID-A1A06734-2F03-42A7-951C-BEC88691BFC9__GUID-9CF63C0B-2590-4494-9820-92664E824A9B">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<span class="q">“ <a href="../refrn/V-JAVA_POOL_ADVICE.html#REFRN-GUID-5F080CE2-96F7-41FB-8731-82C892E6EB18" target="_blank">V $ JAVA_POOL_ADVICE</a> ”</span>和<span class="q">“ <a href="../refrn/V-JAVA_LIBRARY_CACHE_MEMORY.html#REFRN-GUID-349DD31C-A425-4015-9827-D49F64273B00" target="_blank">V $ JAVA_LIBRARY_CACHE_MEMORY</a> ”</span>视图的更多信息，请<span class="italic">参见Oracle数据库参考</span></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="TGDBA591"></a><a id="TGDBA592"></a><a id="TGDBA590"></a><div class="props_rev_3"><a id="GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB" name="GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB"></a><h5 id="TGDBA-GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB" class="sect5"><span class="enumeration_section">14.3.1.3</span>使用字典缓存统计信息</h5>
                     <div>
                        <div class="section">
                           <p>通常，如果共享池的大小足以满足库高速缓存的要求，则它对于字典高速缓存数据来说也足够大。</p>
                           <p>在某些情况下，可能会错过数据字典缓存。数据库实例启动时，数据字典缓存不包含任何数据。因此，发出的任何SQL语句都可能导致缓存未命中。随着更多数据被读入缓存，缓存未命中的可能性降低。最终，数据库达到稳定状态，其中最常用的字典数据在缓存中。此时，很少发生缓存未命中。</p>
                           <p>中的每一行<a id="d41928e2407" class="indexterm-anchor"></a> <code class="codeph">V$ROWCACHE</code>视图包含单一类型的数据字典项的统计信息。这些统计信息反映了自最近实例启动以来的所有数据字典活动。
                           </p>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB__BABJDEAC" title="此表描述了V $ ROWCACHE视图中反映数据字典高速缓存的用法和有效性的列。">表14-1</a>列出了<code class="codeph">V$ROWCACHE</code>视图中反映数据字典高速缓存的用法和有效性的列。
                           </p>
                           <div class="tblformal" id="GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB__BABJDEAC">
                              <p class="titleintable">表14-1 V $ ROWCACHE视图中的数据字典列</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="V $ ROWCACHE视图中的数据字典列" width="100%" border="1" summary="This table describes the columns in the V$ROWCACHE view that reflect the use and effectiveness of the data dictionary cache." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="32%" id="d41928e2433">柱</th>
                                       <th align="left" valign="bottom" width="68%" id="d41928e2436">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="32%" id="d41928e2441" headers="d41928e2433 ">
                                          <p><code class="codeph">参数</code></p>
                                       </td>
                                       <td align="left" valign="top" width="68%" headers="d41928e2441 d41928e2436 ">
                                          <p>标识特定数据字典项。对于每一行，此列中的值是以<code class="codeph">dc_</code>为前缀的<code class="codeph">dc_</code> 。例如，在包含文件描述统计信息的行中，此列包含值<code class="codeph">dc_files</code> 。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="32%" id="d41928e2455" headers="d41928e2433 ">
                                          <p><code class="codeph">GETS</code></p>
                                       </td>
                                       <td align="left" valign="top" width="68%" headers="d41928e2455 d41928e2436 ">
                                          <p>显示有关相应项目的信息请求总数。例如，在包含文件描述统计信息的行中，此列包含文件描述数据的请求总数。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="32%" id="d41928e2463" headers="d41928e2433 ">
                                          <p><code class="codeph">GETMISSES</code></p>
                                       </td>
                                       <td align="left" valign="top" width="68%" headers="d41928e2463 d41928e2436 ">
                                          <p>显示缓存不满足的数据请求数，并且需要I / O.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="32%" id="d41928e2471" headers="d41928e2433 ">
                                          <p><code class="codeph">MODIFICATIONS</code></p>
                                       </td>
                                       <td align="left" valign="top" width="68%" headers="d41928e2471 d41928e2436 ">
                                          <p>显示更新字典高速缓存中的数据的次数。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB__BABDJEAC">示例14-3</a>显示了此视图的查询，以监视应用程序运行期间的统计信息。派生列<code class="codeph">PCT_SUCC_GETS</code>可以被视为项目特定命中率。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-BA84D70F-4325-4229-AEC9-06DF7059F1FB__BABDJEAC">
                           <p class="titleinexample">示例14-3查询V $ ROWCACHE视图</p><pre class="oac_no_warn" dir="ltr">列参数格式a21列pct_succ_gets格式999.9列更新格式999,999,999 SELECT参数，sum（gets），sum（getmisses），100 * sum（gets  -  getmisses）/ sum（gets）pct_succ_gets，sum（修改）更新FROM V $ ROWCACHE WHERE gets&gt; 0 GROUP BY参数;</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">PARAMETER SUM（GETS）SUM（GETMISSES）PCT_SUCC_GETS UPDATES --------------------- ---------- -------- ------ ------------- ------------ dc_database_links 81 1 98.8 0 dc_free_extents 44876 20301 54.8 40,453 dc_global_oids 42 9 78.6 0 dc_histogram_defs 9419 651 93.1 0 dc_object_ids 29854 239 99.2 52 dc_objects 33600 590 98.2 53 dc_profiles 19001 1 100.0 0 dc_rollback_segments 47244 16 100.0 19 dc_segments 100467 19042 81.0 40,272 dc_sequence_grants 119 16 86.6 0 dc_sequences 26973 16 99.9 26,811 dc_synonyms 6617 168 97.5 0 dc_tablespace_quotas 120 7 94.2 51 dc_tablespaces 581248 10 100.0 0 dc_used_extents 51418 20249 60.6 42,811 dc_user_grants 76082 18 100.0 0 dc_usernames 216860 12 100.0 0 dc_users 376895 22 100.0 0</pre><p>在此示例中，输出显示以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于已使用的扩展区，可用扩展区和段，存在大量未命中和更新。这意味着数据库实例具有大量的动态空间扩展。</p>
                              </li>
                              <li>
                                 <p>将成功获取的百分比与实际获取数量进行比较表明共享池足够大，足以存储字典缓存数据。</p>
                              </li>
                           </ul>
                           <p>您还可以使用以下查询计算整个字典缓存命中率;但是，总结所有缓存上的数据将失去更精细的数据粒度：</p><pre class="oac_no_warn" dir="ltr">SELECT（SUM（gets  -  getmisses  -  fixed））/ SUM（gets）“row cache”FROM V $ ROWCACHE;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA593"></a><div class="props_rev_3"><a id="GUID-220BC80E-FD16-4259-A7C1-E1967C510CAE" name="GUID-220BC80E-FD16-4259-A7C1-E1967C510CAE"></a><h5 id="TGDBA-GUID-220BC80E-FD16-4259-A7C1-E1967C510CAE" class="sect5"><span class="enumeration_section">14.3.1.4</span>增加分配给共享池的内存</h5>
                     <div>
                        <div class="section">
                           <p>增加共享池的内存量会增加库高速缓存，字典高速缓存和结果高速缓存可用的内存量。在此之前，请查看共享池统计信息并检查：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果是<code class="codeph">V$LIBRARYCACHE</code>的值。 <code class="codeph">RELOADS</code>列接近于零</p>
                              </li>
                              <li>
                                 <p>如果总比例为<code class="codeph">V$ROWCACHE</code> 。 <code class="codeph">GETMISSES</code>列总计为<code class="codeph">V$ROWCACHE</code> 。对于经常访问的字典缓存， <code class="codeph">GETS</code>小于10％或15％，具体取决于应用程序</p>
                              </li>
                           </ul>
                           <p>如果满足这两个条件，则共享池的大小足够大，增加其内存可能无法提高性能。另一方面，如果未满足其中任何一个条件，并且应用程序正在有效地使用共享池，如<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-901C4010-2B6A-4E50-A02E-77830BB7E70D">使用共享池</a> ”中所述</span> ，则考虑增加共享池的内存。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-220BC80E-FD16-4259-A7C1-E1967C510CAE__GUID-4F148652-F9C5-43D1-A20B-E122D89E8048">要增加共享池的大小：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>增加价值<a id="d41928e2598" class="indexterm-anchor"></a> <code class="codeph">SHARED_POOL_SIZE</code>初始化参数，直到满足条件。
                                 </p>
                                 <p>此参数的最大值取决于您的操作系统。此措施可减少执行时SQL语句和PL / SQL块的隐式重新分析。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>IC  - 需要链接到“使用Init参数管理服务器结果缓存内存”</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA594"></a><div class="props_rev_3"><a id="GUID-813F1711-5A90-45BE-B113-C0CEF6DD3048" name="GUID-813F1711-5A90-45BE-B113-C0CEF6DD3048"></a><h5 id="TGDBA-GUID-813F1711-5A90-45BE-B113-C0CEF6DD3048" class="sect5"><span class="enumeration_section">14.3.1.5</span>减少分配给共享池的内存</h5>
                     <div>
                        <div class="section">
                           <p>如果是<code class="codeph">V$LIBRARYCACHE</code>的值。 <code class="codeph">RELOADS</code>列接近于零，并且共享池中有少量可用内存，然后共享池的大小足以存储最常访问的数据。如果共享池中总是有大量可用内存，并且您希望在其他位置分配此内存，请考虑减少共享池大小。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-813F1711-5A90-45BE-B113-C0CEF6DD3048__GUID-C6A87447-6CFC-413C-8872-8F219737D3E9">减小共享池的大小</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>降低价值<a id="d41928e2673" class="indexterm-anchor"></a> <code class="codeph">SHARED_POOL_SIZE</code>初始化参数，同时确保维持良好的性能。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA595"></a><div class="props_rev_3"><a id="GUID-B1867602-00BF-43CD-9FAB-3C9829358CDD" name="GUID-B1867602-00BF-43CD-9FAB-3C9829358CDD"></a><h4 id="TGDBA-GUID-B1867602-00BF-43CD-9FAB-3C9829358CDD" class="sect4"><span class="enumeration_section">14.3.2</span>释放游标</h4>
                  <div>
                     <p>如果没有库缓存未命中，则考虑设置该值的值<a id="d41928e2729" class="indexterm-anchor"></a> <code class="codeph">CURSOR_SPACE_FOR_TIME</code>初始化参数为<code class="codeph">TRUE</code>以加速执行调用。此参数指定是否可以从库高速缓存中取消分配游标，以便为新的SQL语句腾出空间。
                     </p>
                     <p>如果<code class="codeph">CURSOR_SPACE_FOR_TIME</code>参数设置为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">FALSE</code> （默认值），无论是否打开与其SQL语句关联的应用程序游标，都可以从库高速缓存中释放游标。
                           </p>
                           <p>在这种情况下，Oracle数据库必须验证包含SQL语句的游标是否在库高速缓存中。</p>
                        </li>
                        <li>
                           <p><code class="codeph">TRUE</code> ，只有当与其语句关联的所有应用程序游标都关闭时，才能释放游标。
                           </p>
                           <p>在这种情况下，Oracle数据库不需要验证游标是否在库高速缓存中，因为在与其关联的应用程序游标打开时无法释放游标。</p>
                        </li>
                     </ul>
                     <p>将参数值设置为<code class="codeph">TRUE</code>可以节省Oracle数据库一小部分时间，并且可以略微提高执行调用的性能。此值还可以防止游标的重新分配，直到关闭相关的应用程序游标。
                     </p>
                     <p>如果出现以下情况，请勿将<code class="codeph">CURSOR_SPACE_FOR_TIME</code>参数的值设置为<code class="codeph">TRUE</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在执行调用中找到库缓存未命中</p>
                           <p>库高速缓存未命中表示共享池不足以容纳所有同时打开的游标的共享SQL区域。如果共享池没有足够的空间用于新的SQL语句，并且此参数的值设置为<code class="codeph">TRUE</code> ，则无法解析该语句，Oracle Database将返回错误，指示没有足够的共享内存。
                           </p>
                        </li>
                        <li>
                           <p>私有SQL区域的每个用户可用的内存量很少</p>
                           <p>此值还可以防止释放与打开游标关联的私有SQL区域。如果所有并发打开游标的私有SQL区域填充可用内存，以便没有新SQL语句的空间，则无法解析该语句，Oracle Database将返回错误，指示内存不足。</p>
                        </li>
                     </ul>
                     <p>如果共享池没有足够的空间用于新的SQL语句，并且此参数的值设置为<code class="codeph">FALSE</code> ，则Oracle数据库将释放现有游标。虽然释放游标可能会导致后续库高速缓存未命中（如果重新执行游标），但这比暂停应用程序的错误更可取，因为无法解析SQL语句。
                     </p>
                  </div>
               </div><a id="TGDBA596"></a><div class="props_rev_3"><a id="GUID-C13EE398-F162-4A23-8393-393D71133004" name="GUID-C13EE398-F162-4A23-8393-393D71133004"></a><h4 id="TGDBA-GUID-C13EE398-F162-4A23-8393-393D71133004" class="sect4"><span class="enumeration_section">14.3.3</span>缓存会话游标</h4>
                  <div>
                     <p>会话游标缓存包含SQL和PL / SQL的封闭会话游标，包括递归SQL。此缓存对使用Oracle Forms的应用程序很有用，因为从一种形式切换到另一种形式会关闭与第一种形式关联的所有会话游标。如果应用程序在同一组SQL语句上重复发出解析调用，则重新打开会话游标会降低性能。通过重用游标，数据库可以缩短解析时间，从而缩短整体执行时间。</p>
                     <p>本节介绍会话游标缓存，包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-3789E54B-CF19-4575-AD75-DB706DCBB9CD">关于会话游标缓存</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-5D16C1CC-CFD3-4DD1-B1D1-60F3BD4AA374">启用会话游标缓存</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D">调整会话游标缓存的大小</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA597"></a><div class="props_rev_3"><a id="GUID-3789E54B-CF19-4575-AD75-DB706DCBB9CD" name="GUID-3789E54B-CF19-4575-AD75-DB706DCBB9CD"></a><h5 id="TGDBA-GUID-3789E54B-CF19-4575-AD75-DB706DCBB9CD" class="sect5"><span class="enumeration_section">14.3.3.1</span>关于会话游标缓存</h5>
                     <div>
                        <p>会话游标表示共享子游标的实例化，该共享子游标存储在共享池中，用于特定会话。每个会话游标都存储对它已实例化的子游标的引用。</p>
                        <p>Oracle数据库检查库高速缓存以确定是否已对给定语句发出了三个以上的解析请求。如果游标已关闭三次，则Oracle数据库假定应缓存与该语句关联的会话游标，并将游标移动到会话游标缓存中。</p>
                        <p>通过同一会话解析SQL语句的后续请求将搜索指向共享游标的指针的数组。如果找到指针，则数据库取消引用指针以确定共享游标是否存在。为了重用缓存中的游标，缓存管理器检查游标的缓存状态是否与当前会话和系统环境匹配。</p>
                        <div class="infoboxnote" id="GUID-3789E54B-CF19-4575-AD75-DB706DCBB9CD__GUID-D6D6137B-E45D-40F8-8157-2D5DB2126281">
                           <p class="notep1">注意：</p>
                           <p>重新使用缓存的游标仍然会注册为解析，即使它不是一个硬解析。</p>
                        </div>
                        <p>LRU算法删除会话游标缓存中的条目，以便在需要时为新条目腾出空间。缓存还使用内部基于时间的算法来老化已经空闲了一段时间的游标。</p>
                     </div>
                  </div><a id="TGDBA598"></a><div class="props_rev_3"><a id="GUID-5D16C1CC-CFD3-4DD1-B1D1-60F3BD4AA374" name="GUID-5D16C1CC-CFD3-4DD1-B1D1-60F3BD4AA374"></a><h5 id="TGDBA-GUID-5D16C1CC-CFD3-4DD1-B1D1-60F3BD4AA374" class="sect5"><span class="enumeration_section">14.3.3.2</span>启用会话游标缓存</h5>
                     <div>
                        <div class="section">
                           <p>以下初始化参数与会话游标缓存有关：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">SESSION_CACHED_CURSORS</code></p>
                                 <p>此参数设置每个会话的最大缓存关闭游标数。默认值为50。使用此参数可以从缓存中重用在同一会话中重复执行的语句的游标。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">OPEN_CURSORS</code></p>
                                 <p>此参数指定会话可以同时打开的最大游标数。例如，如果其值设置为1000，则每个会话一次最多可打开1000个游标。</p>
                              </li>
                           </ul>
                           <p>这些参数是独立的。例如，您可以将<code class="codeph">SESSION_CACHED_CURSORS</code>参数的值设置为高于<code class="codeph">OPEN_CURSORS</code>参数的值，因为会话游标未在打开状态下缓存。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-5D16C1CC-CFD3-4DD1-B1D1-60F3BD4AA374__GUID-A8D3FA1B-F9A3-48AB-A916-DF7E366D5933">要启用会话游标缓存：</p>
                           <ol>
                              <li>
                                 <p>确定要保留在缓存中的最大会话游标数。</p>
                              </li>
                              <li>
                                 <p>执行以下操作之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>要启用静态缓存，请将<code class="codeph">SESSION_CACHED_CURSORS</code>参数的值设置为上一步中确定的数字。
                                       </p>
                                    </li>
                                    <li>
                                       <p>要启用动态高速缓存，请执行以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET SESSION_CACHED_CURSORS = <span class="italic">value</span> ;</pre></li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA600"></a><a id="TGDBA599"></a><div class="props_rev_3"><a id="GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D" name="GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D"></a><h5 id="TGDBA-GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D" class="sect5"><span class="enumeration_section">14.3.3.3</span>调整会话游标缓存的大小</h5>
                     <div>
                        <div class="section">
                           <p>使用<code class="codeph">V$SESSTAT</code>视图确定会话游标高速缓存是否适合数据库实例。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D__GUID-A75D9802-9BED-40E7-ADCC-F4581081FF85">要调整会话游标缓存的大小：</p>
                           <ol>
                              <li>
                                 <p>查询<code class="codeph">V$SESSTAT</code>视图以确定特定会话中当前缓存的游标数量。
                                 </p>
                              </li>
                              <li>
                                 <p>查询<code class="codeph">V$SESSTAT</code>视图以查找在会话游标缓存中找到游标的解析调用的百分比。
                                 </p>
                              </li>
                              <li>
                                 <p>如果满足以下条件，请考虑增加<code class="codeph">SESSION_CACHED_CURSORS</code>参数的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>会话游标缓存计数接近最大值</p>
                                    </li>
                                    <li>
                                       <p>会话游标缓存命中的百分比相对于总分析而言较低</p>
                                    </li>
                                    <li>
                                       <p>应用程序重复执行相同查询的解析调用</p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D__CIHJEBIH">例14-4</a>显示了该视图的两个查询。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-419F056F-2EE0-431E-BEAD-D13A77B2AA7D__CIHJEBIH">
                           <p class="titleinexample">示例14-4查询V $ SESSTAT视图</p>
                           <p>以下查询查找当前在特定会话中缓存的游标数：</p><pre class="oac_no_warn" dir="ltr">SELECT a.value curr_cached，p.value max_cached，s.username，s.sid，s.serial＃FROM v $ sesstat a，v $ statname b，v $ session s，v $ parameter2 p WHERE a.statistic＃= b .statistic＃和s.sid = a.sid和a.sid =＆sid AND p.name ='session_cached_cursors'AND b.name ='session cursor cache count';</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">CURR_CACHED MAX_CACHED USERNAME SID SERIAL＃----------- ---------- -------- ----- ---------- 49 50 APP 35 263</pre><p>此输出显示当前为会话35缓存的游标数接近最大值。</p>
                           <p>以下查询查找在会话游标缓存中找到游标的解析调用的百分比：</p><pre class="oac_no_warn" dir="ltr">SELECT cach.value cache_hits，prs.value all_parses，round（（cach.value / prs.value）* 100,2）as“cache in cache”FROM v $ sesstat cach，v $ sesstat prs，v $ statname nm1， v $ statname nm2 WHERE cach.statistic＃= nm1.statistic＃AND nm1.name ='session cursor cache hits'AND prs.statistic＃= nm2.statistic＃AND nm2.name ='parse count（total）'AND cach。 sid =＆sid和prs.sid = cach.sid;</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">在缓存中找到CACHE_HITS ALL_PARSES％---------- ---------- ---------------- 34 700 4.57</pre><p>此输出显示会话35的会话游标缓存中的命中数与解析总数相比较低。</p>
                           <p>在此示例中，将<code class="codeph">SESSION_CACHED_CURSORS</code>参数的值设置为100可能有助于提高性能。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="TGDBA601"></a><div class="props_rev_3"><a id="GUID-40A8C949-9B20-4217-A730-FE8A910B358F" name="GUID-40A8C949-9B20-4217-A730-FE8A910B358F"></a><h4 id="TGDBA-GUID-40A8C949-9B20-4217-A730-FE8A910B358F" class="sect4"><span class="enumeration_section">14.3.4</span>共享游标</h4>
                  <div>
                     <p>在SQL解析的上下文中，相同的语句是一个SQL语句，其文本与另一个语句相同，即字符的字符，包括空格，大小写和注释。除了一些文字的值之外，类似的陈述是相同的。</p>
                     <p>解析阶段将语句文本与共享池中的语句进行比较，以确定是否可以共享语句。如果<code class="codeph">CURSOR_SHARING</code>初始化参数的值设置为<code class="codeph">EXACT</code> （默认值），并且共享池中的语句不相同，则数据库不共享SQL区域。相反，每个SQL语句都有自己的父光标和基于语句中文字的自己的执行计划。
                     </p>
                     <p>本节介绍如何共享游标，并包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-B5897767-3DE1-45A8-9909-375D84FC550A">关于光标共享</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-8FAB86AA-36ED-45C9-AD83-72143F09344B">强制光标共享</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA602"></a><div class="props_rev_3"><a id="GUID-B5897767-3DE1-45A8-9909-375D84FC550A" name="GUID-B5897767-3DE1-45A8-9909-375D84FC550A"></a><h5 id="TGDBA-GUID-B5897767-3DE1-45A8-9909-375D84FC550A" class="sect5"><span class="enumeration_section">14.3.4.1</span>关于光标共享</h5>
                     <div>
                        <p>当SQL语句使用文字而不是绑定变量时，将<code class="codeph">CURSOR_SHARING</code>初始化参数的值设置为<code class="codeph">FORCE</code>可使数据库使用系统生成的绑定变量替换文字。使用此技术，数据库可以减少共享SQL区域中父游标的数量。
                        </p>
                        <p>当<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">FORCE</code> ，数据库在分析阶段执行以下步骤：</p>
                        <ol>
                           <li>
                              <p>在共享池中搜索相同的语句。</p>
                              <p>如果找到相同的语句，则数据库跳过下一步并继续执行步骤3。否则，数据库继续下一步。</p>
                           </li>
                           <li>
                              <p>在共享池中搜索类似的语句。</p>
                              <p>如果<span class="italic">没有</span>找到类似的声明，则数据库执行硬分析。<span class="italic">如果</span>发现了类似的声明，则数据库进行到下一个步骤。
                              </p>
                           </li>
                           <li id="GUID-B5897767-3DE1-45A8-9909-375D84FC550A__BABEBAEI">
                              <p>继续执行解析阶段的其余步骤，以确保现有语句的执行计划适用于新语句。</p>
                              <p>如果计划不适用，则数据库执行硬解析。如果该计划适用，则数据库继续下一步。</p>
                           </li>
                           <li>
                              <p>共享语句的SQL区域。</p>
                           </li>
                        </ol>
                        <p>有关数据库执行的各种检查的详细信息，请参阅<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-BE6DFC00-A436-4908-A711-9127FABB6809">SQL共享标准</a> ”</span> 。
                        </p>
                     </div>
                  </div><a id="TGDBA603"></a><div class="props_rev_3"><a id="GUID-8FAB86AA-36ED-45C9-AD83-72143F09344B" name="GUID-8FAB86AA-36ED-45C9-AD83-72143F09344B"></a><h5 id="TGDBA-GUID-8FAB86AA-36ED-45C9-AD83-72143F09344B" class="sect5"><span class="enumeration_section">14.3.4.2</span>强制光标共享</h5>
                     <div>
                        <p>最佳实践是编写可共享的SQL，并使用默认值<code class="codeph">EXACT</code>作为<code class="codeph">CURSOR_SHARING</code>初始化参数。默认情况下，Oracle数据库使用自适应游标共享来启用包含绑定变量的单个SQL语句以使用多个执行计划。但是，对于具有许多使用文字而不是绑定变量的类似语句的应用程序，将<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">FORCE</code>可以改善游标共享，从而减少内存使用，更快地解析和减少锁存器争用。当共享池中的语句仅在文字的值上不同时，以及由于大量的库高速缓存未命中而导致响应时间较差时，请考虑此方法。在这种情况下，将<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">FORCE</code>最大化游标共享，并利用自适应游标共享来根据不同的文字值范围生成多个执行计划。
                        </p>
                        <p>如果使用<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">EXACT</code>生成存储的轮廓，则数据库不使用使用文字生成的存储轮廓。为了避免这个问题，产生与轮廓<code class="codeph">CURSOR_SHARING</code>设置为<code class="codeph">FORCE</code>和使用<code class="codeph">CREATE_STORED_OUTLINES</code>参数。
                        </p>
                        <p>将<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">FORCE</code>具有以下缺点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据库必须在软解析期间执行额外的工作，以在共享池中查找类似的语句。</p>
                           </li>
                           <li>
                              <p>在<code class="codeph">SELECT</code>语句中包含文字的任何选定表达式的最大长度（由<code class="codeph">DESCRIBE</code>返回）都会增加。但是，返回的数据的实际长度不会改变。
                              </p>
                           </li>
                           <li>
                              <p>不支持星形转换。</p>
                           </li>
                        </ul>
                        <p>当<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">FORCE</code> ，数据库对每个不同的SQL语句使用一个父游标和一个子游标。每次执行同一语句时都使用相同的计划。例如，请考虑以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM hr.employees WHERE employee_id = 101;</pre><p>如果<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">FORCE</code> ，则数据库会优化此语句，就好像它包含绑定变量并使用bind peeking来估计基数。
                        </p>
                        <div class="infoboxnote" id="GUID-8FAB86AA-36ED-45C9-AD83-72143F09344B__GUID-008FDA99-14F1-488F-AECD-C864B545422E">
                           <p class="notep1">注意：</p>
                           <p>从Oracle Database <span class="italic">11g</span>第2版开始，将<code class="codeph">CURSOR_SHARING</code>参数的值设置为<code class="codeph">SIMILAR</code>已过时。请考虑使用自适应游标共享。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-8FAB86AA-36ED-45C9-AD83-72143F09344B__GUID-8CB97A89-FB9C-46E2-BDDA-99543CAEDB8F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CURSOR_SHARING</code>初始化参数的信息，请<a href="../refrn/CURSOR_SHARING.html#REFRN10025" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关自适应游标共享的信息，请<a href="../tgsql/improving-rwp-cursor-sharing.html#TGSQL848" target="_blank"><span class="italic">参见“Oracle数据库SQL调整指南</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="TGDBA604"></a><div class="props_rev_3"><a id="GUID-E0D415CA-C4A7-4588-ADF2-4E302CE25849" name="GUID-E0D415CA-C4A7-4588-ADF2-4E302CE25849"></a><h4 id="TGDBA-GUID-E0D415CA-C4A7-4588-ADF2-4E302CE25849" class="sect4"><span class="enumeration_section">14.3.5</span>保持大物体防止老化</h4>
                  <div>
                     <div class="section">
                        <p>将条目加载到共享池后，无法移动它。有时，随着条目的加载和老化，可用内存可能会碎片化。根据与数据库缓冲区类似的LRU算法，共享SQL和PL / SQL区域在共享池中老化。要提高性能并避免重新分析，请防止大型SQL或PL / SQL区域从共享池中老化。</p>
                        <p>该<a id="d41928e3523" class="indexterm-anchor"></a> <code class="codeph">DBMS_SHARED_POOL</code>包使您可以将对象保留在共享内存中，这样它们就不会使用正常的LRU机制老化。通过使用<code class="codeph">DBMS_SHARED_POOL</code>包在内存碎片发生之前加载SQL和PL / SQL区域，可以将对象保留在内存中。这可确保内存可用，并防止在老化后访问SQL和PL / SQL区域时发生的用户响应时间突然减慢。
                        </p>
                        <p>考虑使用<code class="codeph">DBMS_SHARED_POOL</code>包：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>加载大型PL / SQL对象时，例如<code class="codeph">STANDARD</code>和<code class="codeph">DIUTIL</code>包。
                              </p>
                              <p>加载大型PL / SQL对象时，如果较小的对象必须从共享池中老化以便为较大的对象腾出空间，则可能会影响用户响应时间。在某些情况下，可能没有足够的内存来加载大对象。</p>
                           </li>
                           <li>
                              <p>将已编译的触发器保留在共享池中的常用表上。</p>
                           </li>
                           <li>
                              <p>支持序列。</p>
                              <p>当序列从共享池中老化时，序列号将丢失。<code class="codeph">DBMS_SHARED_POOL</code>包将序列保存在共享池中，从而防止丢失序列号。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E0D415CA-C4A7-4588-ADF2-4E302CE25849__GUID-022E6DC4-51FA-4EAC-AC92-94C356A15BEB">要在共享内存中保留SQL或PL / SQL区域：</p>
                        <ol>
                           <li>
                              <p>确定要保留在内存中的包或游标。</p>
                           </li>
                           <li>
                              <p>启动数据库。</p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">DBMS_SHARED_POOL</code> 。 <code class="codeph">KEEP</code>包装以固定物体。
                              </p>
                              <p>此过程可确保在加载固定对象之前系统不会耗尽共享内存。在数据库实例的生命周期的早期固定对象可以防止因将大部分内存保留在共享池中间而导致的内存碎片。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-E0D415CA-C4A7-4588-ADF2-4E302CE25849__GUID-D2A4117E-0200-41EB-87C5-F65CBC6AEC1C">
                           <p class="notep1">也可以看看：</p>
                           <p>有关使用<code class="codeph">DBMS_SHARED_POOL</code>过程的信息，请<code class="codeph">DBMS_SHARED_POOL</code> <a href="../arpls/DBMS_SHARED_POOL.html#ARPLS-GUID-AF8E502A-F2C6-4015-9742-DC19AEA92E1C" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA605"></a><div class="props_rev_3"><a id="GUID-7FD646B3-FCE3-4D3C-B988-C8D138FFD514" name="GUID-7FD646B3-FCE3-4D3C-B988-C8D138FFD514"></a><h4 id="TGDBA-GUID-7FD646B3-FCE3-4D3C-B988-C8D138FFD514" class="sect4"><span class="enumeration_section">14.3.6</span>配置保留池</h4>
                  <div>
                     <p>尽管Oracle数据库将非常大的内存请求分解为较小的块，但在某些系统上可能需要找到连续的内存块（例如超过5 KB，默认的最小保留池分配为4,400字节）。</p>
                     <p>如果共享池中没有足够的可用空间，则Oracle数据库必须搜索并释放足够的内存以满足此请求。该操作可以将锁存资源保持相当长的时间段，从而对存储器分配的其他并发尝试造成轻微中断。</p>
                     <p>为避免这种情况，Oracle数据库内部默认在共享池中保留一个小内存区域，如果共享池没有足够的空间，数据库可以使用该区域。这个保留池使大块的分配更有效。数据库可以将此内存用于PL / SQL和触发器编译等操作，或者在加载Java对象时用于临时空间。从保留池分配的内存被释放后，它将返回到保留池。</p>
                     <p>对于大型分配，Oracle数据库尝试按以下顺序在共享池中分配空间：</p>
                     <ol>
                        <li>
                           <p>从共享池的未预留部分。</p>
                        </li>
                        <li>
                           <p>从保留的游泳池。</p>
                           <p>如果共享池的未预留部分中没有足够的空间，则Oracle数据库会检查保留池是否有足够的空间。</p>
                        </li>
                        <li>
                           <p>从记忆里。</p>
                           <p>如果共享池的未保留和保留部分中没有足够的空间，则Oracle数据库会尝试释放足够的内存以进行分配。然后，数据库将重试共享池的未保留和保留部分。</p>
                        </li>
                     </ol>
                     <p>本节介绍如何配置保留池，并包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-F09B2C77-CBEA-4845-8878-FF42169BE128">调整预留池的大小</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-F7D9790A-DF64-4FCD-B0B3-3E44AFA4500D">增加分配给预留池的内存</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-shared-pool-and-large-pool.html#GUID-0713CB0A-A804-4612-B0E4-EE9796BC0B82">减少分配给预留池的内存</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA606"></a><div class="props_rev_3"><a id="GUID-F09B2C77-CBEA-4845-8878-FF42169BE128" name="GUID-F09B2C77-CBEA-4845-8878-FF42169BE128"></a><h5 id="TGDBA-GUID-F09B2C77-CBEA-4845-8878-FF42169BE128" class="sect5"><span class="enumeration_section">14.3.6.1</span>调整保留池的大小</h5>
                     <div>
                        <div class="section">
                           <p>通常，没有必要更改Oracle数据库为保留池保留的默认空间量。但是，在某些情况下，您可能需要在共享池中留出空间，以获得异常大的内存分配。</p>
                           <p>您可以通过设置<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>初始化参数的值来设置保留池大小。为默认值<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>参数是5％ <code class="codeph">SHARED_POOL_SIZE</code>参数。
                           </p>
                           <p>如果将值设置<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>参数比的一半以上<code class="codeph">SHARED_POOL_SIZE</code>参数，那么因为数据库不允许您保留太多的内存为保留池中Oracle数据库返回一个错误。可用的操作系统内存量也可能会限制共享池的大小。在一般情况下，的值设置<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>参数到不高于10％ <code class="codeph">SHARED_POOL_SIZE</code>参数。在大多数系统上，如果共享池得到充分调整，则此值就足够了。如果增加此值，则数据库会从共享池中获取额外的内存，并减少可用于较小分配的未保留共享池内存量。
                           </p>
                           <p>调整这些参数时，请使用来自的统计信息<a id="d41928e3763" class="indexterm-anchor"></a> <code class="codeph">V$SHARED_POOL_RESERVED</code>视图。在具有足够可用内存以增加SGA大小的系统上， <code class="codeph">REQUEST_MISSES</code>统计信息的值应等于零。如果系统受操作系统内存约束，那么目标是使<code class="codeph">REQUEST_FAILURES</code>统计量等于零，或者至少阻止其值增加。如果无法实现这些目标值，则增加<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>参数的值。此外，将<code class="codeph">SHARED_POOL_SIZE</code>参数的值增加相同的量，因为保留列表是从共享池中获取的。
                           </p>
                           <p><code class="codeph">V$SHARED_POOL_RESERVED</code>固定视图还可以指示<code class="codeph">SHARED_POOL_SIZE</code>参数的值何时太小。如果<code class="codeph">REQUEST_FAILURES</code>统计量大于零且增加，则可能出现这种情况。如果启用了保留列表，则减小<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>参数的值。如果未启用保留列表，则增加<code class="codeph">SHARED_POOL_SIZE</code>参数的值，如<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-220BC80E-FD16-4259-A7C1-E1967C510CAE">增加分配给共享池的内存</a> ”中所述</span> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA607"></a><div class="props_rev_3"><a id="GUID-F7D9790A-DF64-4FCD-B0B3-3E44AFA4500D" name="GUID-F7D9790A-DF64-4FCD-B0B3-3E44AFA4500D"></a><h5 id="TGDBA-GUID-F7D9790A-DF64-4FCD-B0B3-3E44AFA4500D" class="sect5"><span class="enumeration_section">14.3.6.2</span>增加分配给保留池的内存</h5>
                     <div>
                        <div class="section">
                           <p>如果<code class="codeph">REQUEST_FAILURES</code>统计信息的值高于零并且增加，则保留池太小。在这种情况下，请增加保留池可用的内存量。
                           </p>
                           <div class="infoboxnote" id="GUID-F7D9790A-DF64-4FCD-B0B3-3E44AFA4500D__GUID-8F7E3F07-58AB-4E7D-BED8-1570C82BE575">
                              <p class="notep1">注意：</p>
                              <p>增加保留列表中可用的内存量不会影响不从保留列表中分配内存的用户。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F7D9790A-DF64-4FCD-B0B3-3E44AFA4500D__GUID-522389B6-11A9-4BDA-BB11-72414E4B26F3">要增加保留池的大小：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>相应地增加<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>和<code class="codeph">SHARED_POOL_SIZE</code>初始化参数的值。
                                 </p>
                                 <p>您为这些参数选择的值取决于系统的SGA大小约束，如<span class="q">“ <a href="tuning-shared-pool-and-large-pool.html#GUID-F09B2C77-CBEA-4845-8878-FF42169BE128">调整保留池大小</a> ”中所述</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA608"></a><div class="props_rev_3"><a id="GUID-0713CB0A-A804-4612-B0E4-EE9796BC0B82" name="GUID-0713CB0A-A804-4612-B0E4-EE9796BC0B82"></a><h5 id="TGDBA-GUID-0713CB0A-A804-4612-B0E4-EE9796BC0B82" class="sect5"><span class="enumeration_section">14.3.6.3</span>减少分配给保留池的内存</h5>
                     <div>
                        <div class="section">
                           <p>如果：保留池太大了：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">REQUEST_MISSES</code>统计为零或不增加</p>
                              </li>
                              <li>
                                 <p><code class="codeph">FREE_SPACE</code>统计信息大于或等于<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>最小值的50％</p>
                              </li>
                           </ul>
                           <p>如果这些条件中的任何一个为真，则减少可用于保留池的内存量。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0713CB0A-A804-4612-B0E4-EE9796BC0B82__GUID-96A5A81F-D937-4921-914C-F85CCB56EB31">要减小保留池的大小：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>减小<code class="codeph">SHARED_POOL_RESERVED_SIZE</code>初始化参数的值。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA609"></a><div class="props_rev_3"><a id="GUID-096F2CDD-B3EE-4124-BBE3-F60400600972" name="GUID-096F2CDD-B3EE-4124-BBE3-F60400600972"></a><h3 id="TGDBA-GUID-096F2CDD-B3EE-4124-BBE3-F60400600972" class="sect3"><span class="enumeration_section">14.4</span>配置大池</h3>
               <div>
                  <p>与共享池不同，大型池没有LRU列表。Oracle数据库不会尝试将对象置于大池之外。如果数据库实例使用以下任何Oracle数据库功能，请考虑配置大型池：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>共享服务器</p>
                        <p>在共享服务器体系结构中，每个客户端进程的会话内存都包含在共享池中。</p>
                     </li>
                     <li>
                        <p>并行查询</p>
                        <p>并行查询使用共享池内存来缓存并行执行消息缓冲区。</p>
                     </li>
                     <li>
                        <p>恢复管理器</p>
                        <p>Recovery Manager（RMAN）使用共享池在备份和还原操作期间缓存I / O缓冲区。对于I / O服务器进程，备份和还原操作，Oracle数据库分配大小为几百KB的缓冲区。</p>
                     </li>
                  </ul>
                  <p>本节介绍如何为共享服务器体系结构配置大型池，并包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-43589254-52A2-495F-B01A-04D0885A9E0D">为共享服务器体系结构配置大型池</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-98BE477D-35FE-435B-B05C-0A99C5F516B5">配置大型池以进行并行查询</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-C155964B-7F66-49C4-9F88-916F0217303D">确定大型游泳池的大小</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-2354F7EE-7E3B-4399-B4D9-646BDB00E162">限制用户会话的内存使用</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-shared-pool-and-large-pool.html#GUID-8ABD6078-F667-46A9-8289-89B5D4FF18B6">使用三层连接减少内存使用</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-096F2CDD-B3EE-4124-BBE3-F60400600972__GUID-02CAC01D-38EE-4BBE-BEA4-F1FF86F632F3">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关大型池的信息，请<a href="../cncpt/memory-architecture.html#CNCPT-GUID-1ECB5213-AC4E-4BB4-9113-91C761676B34" target="_blank"><span class="italic">参见Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关使用Recovery Manager调整大型池大小的信息，请参见“ <a href="../bradv/tuning-rman-performance.html#BRADV89857" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGDBA610"></a><div class="props_rev_3"><a id="GUID-43589254-52A2-495F-B01A-04D0885A9E0D" name="GUID-43589254-52A2-495F-B01A-04D0885A9E0D"></a><h4 id="TGDBA-GUID-43589254-52A2-495F-B01A-04D0885A9E0D" class="sect4"><span class="enumeration_section">14.4.1</span>配置共享服务器体系结构的大型池</h4>
                  <div>
                     <p>当Oracle数据库为共享服务器会话分配共享池内存时，库高速缓存和数据字典高速缓存可用的共享池内存量会减少。如果从其他池分配共享服务器会话内存，则可以保留共享池以缓存共享SQL。</p>
                     <p>Oracle建议使用大型池来分配<a id="d41928e4125" class="indexterm-anchor"></a><a id="d41928e4129" class="indexterm-anchor"></a>用户全局区域（UGA）用于共享服务器体系结构。使用大型池而不是共享池可以减少共享池的碎片，并消除缩小共享SQL缓存所带来的性能开销。
                     </p>
                     <p>默认情况下，未配置大型池。如果未配置大型池，则Oracle数据库将共享池用于共享服务器用户会话内存。如果配置了大型池，则在使用共享服务器体系结构时，Oracle数据库仍会为共享池中的每个已配置会话分配固定数量的内存（大约10K）。在任何一种情况下，请考虑相应地增加共享池的大小。</p>
                     <div class="infoboxnote" id="GUID-43589254-52A2-495F-B01A-04D0885A9E0D__GUID-66FDEB1C-B2DC-4158-A87C-AE54EAB39192">
                        <p class="notep1">注意：</p>
                        <p>即使共享内存的使用随着共享服务器的增加而增加，但内存使用总量也会减少。这是因为进程较少;因此，Oracle数据库使用较少<a id="d41928e4139" class="indexterm-anchor"></a>与专用服务器环境相比，具有共享服务器的PGA内存。
                        </p>
                     </div>
                     <div class="infobox-tip" id="GUID-43589254-52A2-495F-B01A-04D0885A9E0D__GUID-53A14D55-B25C-4CC7-9E18-CBD1D4ACB03B">
                        <p class="notep1">小费：</p>
                        <p>要指定数据库允许的最大并发共享服务器会话数，请使用<code class="codeph">CIRCUITS</code>初始化参数。
                        </p>
                     </div>
                     <div class="infobox-tip" id="GUID-43589254-52A2-495F-B01A-04D0885A9E0D__GUID-374BC232-1252-4622-9647-7D52AD4E832F">
                        <p class="notep1">小费：</p>
                        <p>为了使用共享服务器进行排序操作以获得最佳性能，请将<code class="codeph">SORT_AREA_SIZE</code>和<code class="codeph">SORT_AREA_RETAINED_SIZE</code>初始化参数的值设置为相同的值。这样可以将排序结果保存在大型池中，而不是将其写入磁盘。
                        </p>
                     </div>
                  </div>
               </div><a id="TGDBA95399"></a><div class="props_rev_3"><a id="GUID-98BE477D-35FE-435B-B05C-0A99C5F516B5" name="GUID-98BE477D-35FE-435B-B05C-0A99C5F516B5"></a><h4 id="TGDBA-GUID-98BE477D-35FE-435B-B05C-0A99C5F516B5" class="sect4"><span class="enumeration_section">14.4.2</span>配置并行查询的大型池</h4>
                  <div>
                     <p>当未启用自动内存管理或自动共享内存管理时，并行查询使用共享池内存来缓存并行执行消息缓冲区。在共享池中缓存并行执行消息缓冲区会增加其工作负载并可能导致碎片。</p>
                     <p>为避免可能对性能产生负面影响，Oracle建议您在使用并行查询时不要手动管理SGA内存。相反，您应启用自动内存管理或自动共享内存管理，以确保将使用大型池来缓存并行执行内存缓冲区。</p>
                     <div class="infoboxnotealso" id="GUID-98BE477D-35FE-435B-B05C-0A99C5F516B5__GUID-6AD0AE9B-80E5-4E58-8318-40E512E5B20C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="database-memory-allocation.html#GUID-4433AFDE-47AB-41D5-9DE0-E26CBDD4576D">自动内存管理</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="database-memory-allocation.html#GUID-F082EAF9-1B65-4F82-BA33-4137768DB5BC">自动共享内存管理</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../vldbg/parameters-parallel-exec.html#VLDBG-GUID-7ED3242C-D2FF-4279-AF8A-C7CFB7ED5F2A" target="_blank"><span class="italic">Oracle数据库VLDB和分区指南</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA612"></a><a id="TGDBA613"></a><a id="TGDBA611"></a><div class="props_rev_3"><a id="GUID-C155964B-7F66-49C4-9F88-916F0217303D" name="GUID-C155964B-7F66-49C4-9F88-916F0217303D"></a><h4 id="TGDBA-GUID-C155964B-7F66-49C4-9F88-916F0217303D" class="sect4"><span class="enumeration_section">14.4.3</span>确定大型池的大小</h4>
                  <div>
                     <div class="section">
                        <p>在大型池中存储与共享服务器相关的UGA时，Oracle数据库使用的UGA的确切数量取决于应用程序。每个应用程序都需要不同的内存量来存储会话信息，大型池的配置应该反映内存需求。</p>
                        <p>Oracle数据库收集会话使用的内存统计信息并将其存储在<a id="d41928e4289" class="indexterm-anchor"></a> <code class="codeph">V$SESSTAT</code>视图。<a href="tuning-shared-pool-and-large-pool.html#GUID-C155964B-7F66-49C4-9F88-916F0217303D__BABJDAAJ" title="此表描述了在V $ SESSTAT视图中收集的统计信息，以了解所使用的总内存。">表14-2</a>列出了此视图中反映会话UGA内存的统计信息。
                        </p>
                        <div class="tblformal" id="GUID-C155964B-7F66-49C4-9F88-916F0217303D__BABJDAAJ">
                           <p class="titleintable">表14-2 V $ SESSTAT视图中的内存统计信息</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="V $ SESSTAT视图中的内存统计信息" width="100%" border="1" summary="This table describes the statistics collected in the V$SESSTAT view for total memory used." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d41928e4309">统计</th>
                                    <th align="left" valign="bottom" width="71%" id="d41928e4312">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d41928e4317" headers="d41928e4309 ">
                                       <p><a id="d41928e4319" class="indexterm-anchor"></a><a id="d41928e4321" class="indexterm-anchor"></a><code class="codeph">session UGA memory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d41928e4317 d41928e4312 ">
                                       <p>显示分配给会话的内存量（以字节为单位）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d41928e4331" headers="d41928e4309 ">
                                       <p><a id="d41928e4333" class="indexterm-anchor"></a><a id="d41928e4337" class="indexterm-anchor"></a><code class="codeph">session UGA memory max</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d41928e4331 d41928e4312 ">
                                       <p>显示分配给会话的最大内存量（以字节为单位）。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>有两种方法可以使用此视图来确定大型池的正确大小。一种方法是根据同时活动的会话数配置大型池的大小。为此，请观察典型用户的UGA内存使用情况，并将此数量乘以估计的用户会话数。例如，如果共享服务器需要200K到300K来存储典型用户会话的会话信息，并且您预期同时有100个活动用户会话，则将大型池配置为30 MB。</p>
                        <p>另一种方法是计算所有用户会话使用的总内存和最大内存。<a href="tuning-shared-pool-and-large-pool.html#GUID-C155964B-7F66-49C4-9F88-916F0217303D__BABDFFIB">例14-5</a>显示了<code class="codeph">V$SESSTAT</code>和<code class="codeph">V$STATNAME</code>视图的两个查询来执行此操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C155964B-7F66-49C4-9F88-916F0217303D__BABDFFIB">
                        <p class="titleinexample">示例14-5查询V $ SESSTAT和V $ STATNAME视图</p>
                        <p>在应用程序运行时，发出以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT SUM（value）|| 'bytes'“所有会话的总内存”FROM V $ SESSTAT，V $ STATNAME WHERE name ='session uga memory'AND V $ SESSTAT.STATISTIC＃= V $ STATNAME.STATISTIC＃;</pre><pre class="oac_no_warn" dir="ltr">SELECT SUM（value）|| 'bytes'“所有会话的总max mem”FROM V $ SESSTAT，V $ STATNAME WHERE name ='session uga memory max'AND V $ SESSTAT.STATISTIC＃= V $ STATNAME.STATISTIC＃;</pre><p>这些查询还从<code class="codeph">V$STATNAME</code>视图中进行选择，以获取<code class="codeph">session memory</code>和<code class="codeph">max session memory</code>内部标识符。
                        </p>
                        <p>这些查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">所有会议的总记忆----------------------------- 157125 BYTES</pre><pre class="oac_no_warn" dir="ltr">所有会议的总MAX MEM ------------------------------ 417381 BYTES</pre><p>第一个查询的结果显示当前分配给所有会话的内存为157,125个字节。此值是具有位置的总内存，该位置取决于会话连接到数据库的方式。如果会话连接到专用服务器进程，则此内存是用户进程的内存的一部分。如果会话连接到共享服务器进程，则此内存是共享池的一部分。</p>
                        <p>第二个查询的结果显示所有会话的最大内存大小总和为417,381字节。第二个结果大于第一个结果，因为一些会话已经释放了内存，因为分配了它们的最大数量。</p>
                        <p>使用任一查询的结果来确定共享池的正确大小。除非您希望所有会话同时达到其最大分配，否则第一个值可能比第二个值更好。</p>
                        <div class="p"><span class="bold">要调整大型池的大小：</span><ol>
                              <li>
                                 <p>通过检查<code class="codeph">V$SGASTAT</code>视图中的<code class="codeph">POOL</code>列，验证对象内存所在的池（共享池或大型池）。
                                 </p>
                              </li>
                              <li>
                                 <p>设置一个值<a id="d41928e4405" class="indexterm-anchor"></a> <code class="codeph">LARGE_POOL_SIZE</code>初始化参数。
                                 </p>
                                 <p>此参数的最小值为300K。</p>
                              </li>
                           </ol>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="TGDBA614"></a><div class="props_rev_3"><a id="GUID-2354F7EE-7E3B-4399-B4D9-646BDB00E162" name="GUID-2354F7EE-7E3B-4399-B4D9-646BDB00E162"></a><h4 id="TGDBA-GUID-2354F7EE-7E3B-4399-B4D9-646BDB00E162" class="sect4"><span class="enumeration_section">14.4.4</span>限制用户会话的内存使用</h4>
                  <div>
                     <div class="section">
                        <p>要限制每个客户端会话使用的内存与SGA，请使用<code class="codeph">PRIVATE_SGA</code>设置资源限制。</p>
                        <p><code class="codeph">PRIVATE_SGA</code>定义会话从SGA使用的内存字节数。但是，此参数很少使用，因为大多数DBA不会逐个用户地限制SGA消耗。
                        </p>
                        <div class="infoboxnotealso" id="GUID-2354F7EE-7E3B-4399-B4D9-646BDB00E162__GUID-5ABBE044-FB25-4ADF-9607-61E8D6370A54">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="italic"> </span>有关设置<code class="codeph">PRIVATE_SGA</code>资源限制的信息，请<a href="../sqlrf/ALTER-RESOURCE-COST.html#SQLRF00814" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA615"></a><div class="props_rev_3"><a id="GUID-8ABD6078-F667-46A9-8289-89B5D4FF18B6" name="GUID-8ABD6078-F667-46A9-8289-89B5D4FF18B6"></a><h4 id="TGDBA-GUID-8ABD6078-F667-46A9-8289-89B5D4FF18B6" class="sect4"><span class="enumeration_section">14.4.5</span>使用三层连接减少内存使用</h4>
                  <div>
                     <p>如果存在大量连接用户，则考虑通过实现三层连接来减少内存使用量。使用事务处理（TP）监视器仅对纯事务模型是可行的，因为在调用之间不能保持锁定和未提交的DML操作。</p>
                     <p>使用共享服务器环境：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>与TP监视器相比，应用程序设计的限制性要小得多。</p>
                        </li>
                        <li>
                           <p>通过允许用户共享服务器池，显着减少操作系统进程数和上下文切换。</p>
                        </li>
                        <li>
                           <p>尽管在共享服务器模式下使用了更多SGA，但实质上减少了整体内存使用量。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05889.basic-elements.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>基本要素</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Expression Syntax Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Expression Syntax Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="olap-expression-syntax-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:52:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96406-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="preface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="olap-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP Expression Syntax Reference"></meta>
    <meta name="dcterms.isVersionOf" content="OLAXS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="olap-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">表达式语法参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">基本要素</li>
            </ol>
            <a id="GUID-770C935E-30C5-47A7-A00F-C28CC024BE99" name="GUID-770C935E-30C5-47A7-A00F-C28CC024BE99"></a><a id="OLAXS107"></a><a id="olaxs_basic_elements"></a>
            
            <h2 id="OLAXS-GUID-770C935E-30C5-47A7-A00F-C28CC024BE99" class="sect2"><span class="enumeration_chapter">1</span>基本要素</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍OLAP表达式语法的基本构建块。它包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="basic-elements.html#GUID-187896E3-0F31-4590-9EBA-EA958B64A3A2">维对象名称</a></p>
                  </li>
                  <li>
                     <p><a href="basic-elements.html#GUID-86FD3EDD-2BCC-44A3-94E0-36D9C1A228A9">维度数据类型</a></p>
                  </li>
                  <li>
                     <p><a href="basic-elements.html#GUID-379143B3-71D8-46B2-B686-713800A01F73">运营商</a></p>
                  </li>
                  <li>
                     <p><a href="basic-elements.html#GUID-F903EC44-B8D2-4E0A-8223-5DA1E3EF0698">条件</a></p>
                  </li>
                  <li>
                     <p><a href="basic-elements.html#GUID-FD5B915E-DD35-41D9-9AB3-24FC13CDB87F">文字表达</a></p>
                  </li>
                  <li>
                     <p><a href="basic-elements.html#GUID-A328DA78-DC1B-4DD0-B0F3-B5134C9F79EA">案例表达</a></p>
                  </li>
                  <li>
                     <p><a href="basic-elements.html#GUID-AD33ECCF-6996-41AD-993E-0C0541F3209B">合格数据参考（QDR）</a></p>
                  </li>
               </ul>
            </div><a id="OLAXS108"></a><a id="olaxs_dimensional_object_names"></a><div class="sect2"><a id="GUID-187896E3-0F31-4590-9EBA-EA958B64A3A2" name="GUID-187896E3-0F31-4590-9EBA-EA958B64A3A2"></a><h3 id="OLAXS-GUID-187896E3-0F31-4590-9EBA-EA958B64A3A2" class="sect3"><span class="enumeration_section">1.1</span>维对象名称</h3>
               <div>
                  <p><a id="d2886e72" class="indexterm-anchor"></a>该<a id="d2886e77" class="indexterm-anchor"></a><a id="d2886e79" class="indexterm-anchor"></a><a id="d2886e81" class="indexterm-anchor"></a>维对象的命名约定遵循标准的Oracle命名规则。所有名称都不区分大小写。
                  </p>
               </div><a id="OLAXS110"></a><a id="OLAXS109"></a><div class="sect3"><a id="GUID-27933930-8A1C-4665-917D-B2CE87391E78" name="GUID-27933930-8A1C-4665-917D-B2CE87391E78"></a><h4 id="OLAXS-GUID-27933930-8A1C-4665-917D-B2CE87391E78" class="sect4"><span class="enumeration_section">1.1.1</span>语法</h4>
                  <div><pre class="oac_no_warn" dir="ltr">所有者。{cube |尺寸| table}。{measure |专栏|属性}</pre><div class="tblformal" id="GUID-27933930-8A1C-4665-917D-B2CE87391E78__GUID-DA15F35F-86EF-467A-A63F-1DB319FC4B7E">
                        <p class="titleintable">表1-1维对象的命名约定</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="维度对象的命名约定" width="100%" border="1" summary="Naming rules applied to quoted and unquoted identifiers" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d2886e118">惯例</th>
                                 <th align="left" valign="bottom" width="37%" id="d2886e121">引用ID</th>
                                 <th align="left" valign="bottom" width="38%" id="d2886e124">不带引号的ID</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d2886e129" headers="d2886e118 ">
                                    <p><span class="bold">初始性格</span></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d2886e129 d2886e121 ">
                                    <p>任何角色。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d2886e129 d2886e124 ">
                                    <p>数据库字符集中的字母字符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d2886e140" headers="d2886e118 ">
                                    <p><span class="bold">其他角色</span></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d2886e140 d2886e121 ">
                                    <p>允许使用所有字符，标点符号和空格。</p>
                                    <p>不允许使用双引号和空值（\ 0）。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d2886e140 d2886e124 ">
                                    <p>允许使用数据库字符集和下划线（_）中的字母数字字符。</p>
                                    <p>允许使用美元符号（$）和井号（＃），但不建议使用。</p>
                                    <p>不允许使用双引号和空值（\ 0）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d2886e157" headers="d2886e118 ">
                                    <p><span class="bold">保留字</span></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d2886e157 d2886e121 ">
                                    <p>允许但不推荐。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d2886e157 d2886e124 ">
                                    <p>不允许。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="OLAXS111"></a><div class="sect3"><a id="GUID-9B6C2C88-0BC3-42B1-B6B4-36A82E44BBC9" name="GUID-9B6C2C88-0BC3-42B1-B6B4-36A82E44BBC9"></a><h4 id="OLAXS-GUID-9B6C2C88-0BC3-42B1-B6B4-36A82E44BBC9" class="sect4"><span class="enumeration_section">1.1.2</span>例子</h4>
                  <div>
                     <p><code class="codeph">GLOBAL.UNITS_CUBE.SALES</code>标识单位多维数据<code class="codeph">GLOBAL.UNITS_CUBE.SALES</code>的<code class="codeph">SALES</code>度量。
                     </p>
                     <p><code class="codeph">TIME.DIM_KEY</code>和<code class="codeph">TIME.LEVEL_NAME</code>标识时间视图中的列。
                     </p>
                     <p><code class="codeph">TIME.CALENDAR</code>标识时间维度中的<code class="codeph">CALENDAR</code>层次结构。
                     </p>
                     <p><code class="codeph">TIME.CALENDAR.CALENDAR_YEAR</code>标识时间维度中<code class="codeph">CALENDAR</code>层次结构的<code class="codeph">CALENDAR_YEAR</code>级别。
                     </p>
                     <p><code class="codeph">GLOBAL.UNITS_FACT.MONTH_ID</code>标识<code class="codeph">UNITS_FACT</code>表中的外键列。
                     </p>
                     <p><code class="codeph">TIME_DIM.CALENDAR_YEAR_DSC</code>标识<code class="codeph">TIME_DIM</code>表中的列。
                     </p>
                  </div>
               </div>
            </div><a id="OLAXS112"></a><a id="OLAXS113"></a><a id="olaxs_dimensional_data_types"></a><div class="sect2"><a id="GUID-86FD3EDD-2BCC-44A3-94E0-36D9C1A228A9" name="GUID-86FD3EDD-2BCC-44A3-94E0-36D9C1A228A9"></a><h3 id="OLAXS-GUID-86FD3EDD-2BCC-44A3-94E0-36D9C1A228A9" class="sect3"><span class="enumeration_section">1.2</span>维度数据类型</h3>
               <div>
                  <p><a href="basic-elements.html#GUID-86FD3EDD-2BCC-44A3-94E0-36D9C1A228A9__CEGFHFIG" title="OLAP数据类型的说明">表1-2</a>描述了<a id="d2886e260" class="indexterm-anchor"></a>可用于多维数据集和度量的数据类型。
                  </p>
                  <div class="tblformal" id="GUID-86FD3EDD-2BCC-44A3-94E0-36D9C1A228A9__CEGFHFIG">
                     <p class="titleintable">表1-2维度数据类型</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="维度数据类型" width="100%" border="1" summary="Description of OLAP data types" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d2886e273">数据类型</th>
                              <th align="left" valign="bottom" width="59%" id="d2886e276">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e281" headers="d2886e273 ">
                                 <p><code class="codeph">BINARY_DOUBLE</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e281 d2886e276 ">
                                 <p>一个64位浮点数。<code class="codeph">BINARY_DOUBLE</code>值需要9个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e292" headers="d2886e273 ">
                                 <p><code class="codeph">BINARY_FLOAT</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e292 d2886e276 ">
                                 <p>一个32位浮点数。<code class="codeph">BINARY_FLOAT</code>值需要5个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e303" headers="d2886e273 ">
                                 <p><code class="codeph">CHAR (</code> <span class="italic"><code class="codeph">size</code></span> <code class="codeph">[BYTE|CHAR])</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e303 d2886e276 ">
                                 <p>一个固定长度的字符串，其长度<span class="italic">大小为</span>字符或字节。大小可以从1到2000。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e319" headers="d2886e273 ">
                                 <p><code class="codeph">日期</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e319 d2886e276 ">
                                 <p>有效日期为公元前4712年1月1日至9999年12月31日。它包含日期时间字段<code class="codeph">YEAR</code> ， <code class="codeph">MONTH</code> ， <code class="codeph">DAY</code> ， <code class="codeph">HOUR</code> ， <code class="codeph">MINUTE</code>和<code class="codeph">SECOND</code> 。它没有小数秒或时区。默认格式由<code class="codeph">NLS_DATE_FORMAT</code>参数显式确定，并由<code class="codeph">NLS_TERRITORY</code>参数隐式确定。<code class="codeph">DATE</code>值需要7个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e355" headers="d2886e273 ">
                                 <p><code class="codeph">DECIMAL (</code> <span class="italic"><code class="codeph">p,s</code></span> <code class="codeph">)</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e355 d2886e276 ">
                                 <p>具有精度<span class="italic">p</span>和小数位数<span class="italic">s的</span>十进制数字表示为<code class="codeph">NUMBER</code>数据类型。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e377" headers="d2886e273 ">
                                 <p><code class="codeph">FLOAT [(</code> <span class="italic"><code class="codeph">p</code></span> <code class="codeph">)]</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e377 d2886e276 ">
                                 <p><code class="codeph">NUMBER</code>的子类型，精度为<span class="italic">p</span> 。<code class="codeph">FLOAT</code>在内部表示为<code class="codeph">NUMBER</code> 。精度范围为1到126个二进制数字。<code class="codeph">FLOAT</code>值需要1到22个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e405" headers="d2886e273 ">
                                 <p><code class="codeph">整数</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e405 d2886e276 ">
                                 <p>整数表示为<code class="codeph">NUMBER</code>数据类型，其比例为0。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e416" headers="d2886e273 ">
                                 <p><code class="codeph">INTERVAL DAY[(</code> <span class="italic"><code class="codeph">day_precision</code></span> <code class="codeph">)] TO SECOND[(</code> <span class="italic"><code class="codeph">second_precision</code></span> <code class="codeph">)]</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e416 d2886e276 ">
                                 <p>一段时间，以天，小时，分钟和秒为单位。日精度是<code class="codeph">DAY</code> datetime字段中的最大位数。默认值为2。第二个精度是<code class="codeph">SECOND</code>字段小数部分的位数。默认值为6。日和精度都可以具有0到9的值。<code class="codeph">INTERVAL DAY TO SECOND</code>值需要11个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e443" headers="d2886e273 ">
                                 <p><code class="codeph">INTERVAL YEAR[(</code> <span class="italic"><code class="codeph">precision</code></span> <code class="codeph">)] TO MONTH</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e443 d2886e276 ">
                                 <p>几年和几个月的一段时间。精度是<code class="codeph">YEAR</code>日期时间字段中的位数，其值可以是0到9。默认精度为2位数。<code class="codeph">INTERVAL YEAR TO MONTH</code>值需要5个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e462" headers="d2886e273 ">
                                 <p><code class="codeph">NCHAR[(</code> <span class="italic"><code class="codeph">size</code></span> <code class="codeph">)]</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e462 d2886e276 ">
                                 <p>一个固定长度的字符串，长度为字符<span class="italic">大小</span> 。大小可以从1个字符到2000个字节。最大字符数取决于国家字符集，每个字符最多可能需要四个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e478" headers="d2886e273 ">
                                 <p><code class="codeph">NUMBER [(</code> <span class="italic"><code class="codeph">p</code></span> <code class="codeph">[,</code> <span class="italic"><code class="codeph">s</code></span> <code class="codeph">])]</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e478 d2886e276 ">
                                 <p>甲十进制数精度为<span class="italic">p</span>和尺度<span class="italic">s。</span>精度范围从1到38。比例范围可以从-84到127。<code class="codeph">NUMBER</code>值需要1到22个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e506" headers="d2886e273 ">
                                 <p><code class="codeph">NVARCHAR2(</code> <span class="italic"><code class="codeph">size</code></span> <code class="codeph">)</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e506 d2886e276 ">
                                 <p>可变长度Unicode字符串的<span class="italic">大小</span>的字符的最大长度。大小可以从1个字符到32,767个字节。最大字符数取决于国家字符集，每个字符最多可能需要四个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e522" headers="d2886e273 ">
                                 <p><code class="codeph">TIMESTAMP[(</code> <span class="italic"><code class="codeph">precision</code></span> <code class="codeph">)]</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e522 d2886e276 ">
                                 <p>包含日期时间字段<code class="codeph">YEAR</code> ， <code class="codeph">MONTH</code> ， <code class="codeph">DAY</code> ， <code class="codeph">HOUR</code> ， <code class="codeph">MINUTE</code>和<code class="codeph">SECOND</code>的有效日期。它没有时区。精度是<code class="codeph">SECOND</code>字段的小数部分中的位数，其值可以是0到9。默认精度为6位数。默认格式由<code class="codeph">NLS_DATE_FORMAT</code>参数显式确定，并由<code class="codeph">NLS_TERRITORY</code>参数隐式确定。<code class="codeph">TIMESTAMP</code>值需要7到11个字节，具体取决于精度。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e566" headers="d2886e273 ">
                                 <p><code class="codeph">TIMESTAMP [(</code> <span class="italic"><code class="codeph">precision</code></span> <code class="codeph">)] WITH LOCAL TIME ZONE</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e566 d2886e276 ">
                                 <p>与<code class="codeph">TIMESTAMP WITH TIME ZONE</code>具有相同描述的有效日期，但有以下例外：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>数据与数据库时区一起存储在数据库中。</p>
                                    </li>
                                    <li>
                                       <p>检索时，数据将转换为会话时区。</p>
                                    </li>
                                    <li>
                                       <p>具有<code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code>值的<code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code>需要7到11个字节，具体取决于精度。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e595" headers="d2886e273 ">
                                 <p><code class="codeph">TIMESTAMP[(</code> <span class="italic"><code class="codeph">precision</code></span> <code class="codeph">)] WITH TIME ZONE</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e595 d2886e276 ">
                                 <p>包含日期时间字段<code class="codeph">YEAR</code> ， <code class="codeph">MONTH</code> ， <code class="codeph">DAY</code> ， <code class="codeph">HOUR</code> ， <code class="codeph">MINUTE</code> ， <code class="codeph">SECOND</code> ， <code class="codeph">TIMEZONE_HOUR</code>和<code class="codeph">TIMEZONE_MINUTE</code>的有效日期。精度是<code class="codeph">SECOND</code>字段的小数部分中的位数，其值可以是0到9。默认精度为6位数。默认格式由<code class="codeph">NLS_DATE_FORMAT</code>参数显式确定，并由<code class="codeph">NLS_TERRITORY</code>参数隐式确定。<code class="codeph">TIMESTAMP WITH TIMEZONE</code>值的<code class="codeph">TIMESTAMP WITH TIMEZONE</code>需要13个字节。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d2886e646" headers="d2886e273 ">
                                 <p><code class="codeph">VARCHAR2(</code> <span class="italic"><code class="codeph">size</code></span> <code class="codeph">[BYTE|CHAR])</code></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d2886e646 d2886e276 ">
                                 <p>可变长字符串的<span class="italic">大小</span>字符或字节的最大长度。大小范围为1到32,767字节。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="OLAXS114"></a><a id="olaxs_operators"></a><div class="sect2"><a id="GUID-379143B3-71D8-46B2-B686-713800A01F73" name="GUID-379143B3-71D8-46B2-B686-713800A01F73"></a><h3 id="OLAXS-GUID-379143B3-71D8-46B2-B686-713800A01F73" class="sect3"><span class="enumeration_section">1.3</span>运营商</h3>
               <div>
                  <p>操作员操纵数据项并返回结果。运算符操作称为操作数或参数的各个数据项。它们由特殊字符或关键字表示。从语法上讲，运算符出现在操作数之前，操作数之后或两个操作数之间。</p>
                  <p>OLAP表达式语法具有以下类型的运算符：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="basic-elements.html#GUID-7028FEE6-B216-4D78-9DD5-4A6010F571FA">一元算术运算符</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-55E43AA6-6317-4C09-BFE9-16B71A7E2482">二进制算术运算符</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-F1EBFBA4-55DB-4D33-89D5-8DEBB8B1E9CB">连接运算符</a></p>
                     </li>
                  </ul>
                  <p>对于条件运算符，请转到<span class="q">“ <a href="basic-elements.html#GUID-F903EC44-B8D2-4E0A-8223-5DA1E3EF0698">条件</a> ”</span> 。
                  </p>
               </div><a id="OLAXS116"></a><a id="OLAXS115"></a><div class="sect3"><a id="GUID-7028FEE6-B216-4D78-9DD5-4A6010F571FA" name="GUID-7028FEE6-B216-4D78-9DD5-4A6010F571FA"></a><h4 id="OLAXS-GUID-7028FEE6-B216-4D78-9DD5-4A6010F571FA" class="sect4"><span class="enumeration_section">1.3.1</span>一元算术运算符</h4>
                  <div>
                     <p>一个<a id="d2886e729" class="indexterm-anchor"></a>一元运算符仅在一个操作数上运行。
                     </p>
                     <div class="tblformal" id="GUID-7028FEE6-B216-4D78-9DD5-4A6010F571FA__GUID-80432C1E-7590-4126-BF18-6D0C1CC88AA5">
                        <p class="titleintable">表1-3一元运算符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="一元运算符" width="100%" border="1" summary="Positive and negative operators" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d2886e742">操作者</th>
                                 <th align="left" valign="bottom" width="69%" id="d2886e745">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e750" headers="d2886e742 ">
                                    <p>+</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e750 d2886e745 ">
                                    <p>正值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e757" headers="d2886e742 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e757 d2886e745 ">
                                    <p>负值</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="OLAXS117"></a><div class="sect4"><a id="GUID-3A8F409B-FC72-4E3D-B891-C7CD409A3BB9" name="GUID-3A8F409B-FC72-4E3D-B891-C7CD409A3BB9"></a><h5 id="OLAXS-GUID-3A8F409B-FC72-4E3D-B891-C7CD409A3BB9" class="sect5"><span class="enumeration_section">1.3.1.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">运算符操作数</pre></div>
                  </div><a id="OLAXS118"></a><div class="sect4"><a id="GUID-E5A4ABB0-55F5-4EB2-B836-7C811DB833F7" name="GUID-E5A4ABB0-55F5-4EB2-B836-7C811DB833F7"></a><h5 id="OLAXS-GUID-E5A4ABB0-55F5-4EB2-B836-7C811DB833F7" class="sect5"><span class="enumeration_section">1.3.1.2</span>示例</h5>
                     <div>
                        <p><code class="codeph">-5</code>是负数。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS120"></a><a id="OLAXS119"></a><div class="sect3"><a id="GUID-55E43AA6-6317-4C09-BFE9-16B71A7E2482" name="GUID-55E43AA6-6317-4C09-BFE9-16B71A7E2482"></a><h4 id="OLAXS-GUID-55E43AA6-6317-4C09-BFE9-16B71A7E2482" class="sect4"><span class="enumeration_section">1.3.2</span>二元算子运算符</h4>
                  <div>
                     <p>一个<a id="d2886e832" class="indexterm-anchor"></a>二元运算符在两个操作数上运行。
                     </p>
                     <div class="tblformal" id="GUID-55E43AA6-6317-4C09-BFE9-16B71A7E2482__GUID-CF0F5986-73B4-4BE7-9651-FA925181EBBB">
                        <p class="titleintable">表1-4二元运算符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="二元运算符" width="100%" border="1" summary="Binary arithmetic operators" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d2886e845">操作者</th>
                                 <th align="left" valign="bottom" width="50%" id="d2886e848">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d2886e853" headers="d2886e845 ">
                                    <p>+</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d2886e853 d2886e848 ">
                                    <p>加</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d2886e860" headers="d2886e845 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d2886e860 d2886e848 ">
                                    <p>减去</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d2886e867" headers="d2886e845 ">
                                    <p>*</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d2886e867 d2886e848 ">
                                    <p>乘</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d2886e874" headers="d2886e845 ">
                                    <p>/</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d2886e874 d2886e848 ">
                                    <p>划分</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="OLAXS121"></a><div class="sect4"><a id="GUID-0B5A50D9-3830-4F46-804B-94131FB187C0" name="GUID-0B5A50D9-3830-4F46-804B-94131FB187C0"></a><h5 id="OLAXS-GUID-0B5A50D9-3830-4F46-804B-94131FB187C0" class="sect5"><span class="enumeration_section">1.3.2.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">操作数运算符操作数</pre></div>
                  </div><a id="OLAXS123"></a><a id="OLAXS122"></a><div class="sect4"><a id="GUID-413916A5-6F42-4656-950A-B576759ACBD3" name="GUID-413916A5-6F42-4656-950A-B576759ACBD3"></a><h5 id="OLAXS-GUID-413916A5-6F42-4656-950A-B576759ACBD3" class="sect5"><span class="enumeration_section">1.3.2.2</span>例子</h5>
                     <div>
                        <p>以下是两个使用数字文字作为操作数的简单示例。</p>
                        <p><code class="codeph">7 * 2</code>是<code class="codeph">14</code> 。
                        </p>
                        <p><code class="codeph">(8/2) + 1</code>是<code class="codeph">5</code> 。
                        </p>
                        <p>此示例将Sales度量值乘以数字文字，以创建名为Sales Budget的计算度量。</p>
                        <p><code class="codeph">UNITS_CUBE.SALES * 1.06</code></p>
                        <div class="tblformal" id="GUID-413916A5-6F42-4656-950A-B576759ACBD3__GUID-571B1B84-08F6-4A0E-A931-CF4F603BD615">
                           <p class="titleintable">表1-5乘法运算符示例</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="乘法运算符示例" width="100%" border="1" summary="Output from the Multiplication Operator" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d2886e956">产品</th>
                                    <th align="left" valign="bottom" width="25%" id="d2886e959">水平</th>
                                    <th align="left" valign="bottom" width="25%" id="d2886e962">销售</th>
                                    <th align="left" valign="bottom" width="25%" id="d2886e965">销售预算</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e970" headers="d2886e956 ">
                                       <p>硬件</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e970 d2886e959 ">
                                       <p>类</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e970 d2886e962 ">
                                       <p>124191336</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e970 d2886e965 ">
                                       <p>131642816</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e983" headers="d2886e956 ">
                                       <p>台式电脑</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e983 d2886e959 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e983 d2886e962 ">
                                       <p>74556528</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e983 d2886e965 ">
                                       <p>79029919</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e996" headers="d2886e956 ">
                                       <p>显示器</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e996 d2886e959 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e996 d2886e962 ">
                                       <p>3972142</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e996 d2886e965 ">
                                       <p>4210470</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e1009" headers="d2886e956 ">
                                       <p>记忆</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1009 d2886e959 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1009 d2886e962 ">
                                       <p>5619219</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1009 d2886e965 ">
                                       <p>5956372</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e1022" headers="d2886e956 ">
                                       <p>调制解调器/传真</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1022 d2886e959 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1022 d2886e962 ">
                                       <p>5575726</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1022 d2886e965 ">
                                       <p>5910269</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e1035" headers="d2886e956 ">
                                       <p>CD / DVD</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1035 d2886e959 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1035 d2886e962 ">
                                       <p>16129497</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1035 d2886e965 ">
                                       <p>17097267</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d2886e1048" headers="d2886e956 ">
                                       <p>便携式电脑</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1048 d2886e959 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1048 d2886e962 ">
                                       <p>18338225</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d2886e1048 d2886e965 ">
                                       <p>19438518</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>下一个示例通过从Sales中减去Cost来创建名为Profit的计算度量。</p>
                        <p><code class="codeph">UNITS_CUBE.SALES  -  UNITS_CUBE.COST</code></p>
                        <div class="tblformal" id="GUID-413916A5-6F42-4656-950A-B576759ACBD3__GUID-C9FCAB41-FB1F-4F3B-8694-2450E6E16C2F">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Subtraction example output" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d2886e1076">产品</th>
                                    <th align="left" valign="bottom" width="20%" id="d2886e1079">水平</th>
                                    <th align="left" valign="bottom" width="20%" id="d2886e1082">销售</th>
                                    <th align="left" valign="bottom" width="20%" id="d2886e1085">成本</th>
                                    <th align="left" valign="bottom" width="20%" id="d2886e1088">利润</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1093" headers="d2886e1076 ">
                                       <p>硬件</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1093 d2886e1079 ">
                                       <p>类</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1093 d2886e1082 ">
                                       <p>124191336</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1093 d2886e1085 ">
                                       <p>116058248</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1093 d2886e1088 ">
                                       <p>8133088</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1109" headers="d2886e1076 ">
                                       <p>台式电脑</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1109 d2886e1079 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1109 d2886e1082 ">
                                       <p>74556528</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1109 d2886e1085 ">
                                       <p>71937312</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1109 d2886e1088 ">
                                       <p>2619215</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1125" headers="d2886e1076 ">
                                       <p>显示器</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1125 d2886e1079 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1125 d2886e1082 ">
                                       <p>3972142</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1125 d2886e1085 ">
                                       <p>3546195</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1125 d2886e1088 ">
                                       <p>425947</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1141" headers="d2886e1076 ">
                                       <p>记忆</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1141 d2886e1079 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1141 d2886e1082 ">
                                       <p>5619219</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1141 d2886e1085 ">
                                       <p>4962527</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1141 d2886e1088 ">
                                       <p>656692</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1157" headers="d2886e1076 ">
                                       <p>调制解调器/传真</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1157 d2886e1079 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1157 d2886e1082 ">
                                       <p>5575726</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1157 d2886e1085 ">
                                       <p>5162879</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1157 d2886e1088 ">
                                       <p>412847</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1173" headers="d2886e1076 ">
                                       <p>CD / DVD</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1173 d2886e1079 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1173 d2886e1082 ">
                                       <p>16129497</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1173 d2886e1085 ">
                                       <p>12510832</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1173 d2886e1088 ">
                                       <p>3618664</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d2886e1189" headers="d2886e1076 ">
                                       <p>便携式电脑</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1189 d2886e1079 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1189 d2886e1082 ">
                                       <p>18338225</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1189 d2886e1085 ">
                                       <p>17938502</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d2886e1189 d2886e1088 ">
                                       <p>399723</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="OLAXS124"></a><div class="sect3"><a id="GUID-F1EBFBA4-55DB-4D33-89D5-8DEBB8B1E9CB" name="GUID-F1EBFBA4-55DB-4D33-89D5-8DEBB8B1E9CB"></a><h4 id="OLAXS-GUID-F1EBFBA4-55DB-4D33-89D5-8DEBB8B1E9CB" class="sect4"><span class="enumeration_section">1.3.3</span>连接运算符</h4>
                  <div>
                     <p>该<a id="d2886e1227" class="indexterm-anchor"></a>连接运算符（ <code class="codeph">||</code> ）组合了文本表达式。
                     </p>
                  </div><a id="OLAXS125"></a><div class="sect4"><a id="GUID-94AD5F19-5C41-4FE0-A0BD-1030DFC04C8D" name="GUID-94AD5F19-5C41-4FE0-A0BD-1030DFC04C8D"></a><h5 id="OLAXS-GUID-94AD5F19-5C41-4FE0-A0BD-1030DFC04C8D" class="sect5"><span class="enumeration_section">1.3.3.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">操作数||操作数</pre></div>
                  </div><a id="OLAXS126"></a><div class="sect4"><a id="GUID-E81EC37A-147A-4267-9EB7-EEB8D5D55644" name="GUID-E81EC37A-147A-4267-9EB7-EEB8D5D55644"></a><h5 id="OLAXS-GUID-E81EC37A-147A-4267-9EB7-EEB8D5D55644" class="sect5"><span class="enumeration_section">1.3.3.2</span>示例</h5>
                     <div>
                        <p><code class="codeph">'The date today is: ' || sysdate</code>生成一个文本字符串，例如<code class="codeph">The date today is: 23-AUG-06</code> 。
                        </p>
                        <p>下一个示例连接Product维度的级别名称和维度键以创建标识符。</p>
                        <p><code class="codeph">PRODUCT.LEVEL_NAME || ''|| PRODUCT.DIM_KEY</code></p>
                        <div class="tblformal" id="GUID-E81EC37A-147A-4267-9EB7-EEB8D5D55644__GUID-ECE37E00-9652-456F-B170-B4D57CDF684B">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Concatenation example output" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d2886e1296">水平</th>
                                    <th align="left" valign="bottom" width="33%" id="d2886e1299">昏暗的钥匙</th>
                                    <th align="left" valign="bottom" width="33%" id="d2886e1302">识别码</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1307" headers="d2886e1296 ">
                                       <p>类</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1307 d2886e1299 ">
                                       <p>HRD</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1307 d2886e1302 ">
                                       <p>CLASS HRD</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1317" headers="d2886e1296 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1317 d2886e1299 ">
                                       <p>DTPC</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1317 d2886e1302 ">
                                       <p>家庭DTPC</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1327" headers="d2886e1296 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1327 d2886e1299 ">
                                       <p>MON</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1327 d2886e1302 ">
                                       <p>家庭星期一</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1337" headers="d2886e1296 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1337 d2886e1299 ">
                                       <p>MEM</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1337 d2886e1302 ">
                                       <p>家庭成员</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1347" headers="d2886e1296 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1347 d2886e1299 ">
                                       <p>MOD</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1347 d2886e1302 ">
                                       <p>家庭MOD</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1357" headers="d2886e1296 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1357 d2886e1299 ">
                                       <p>DISK</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1357 d2886e1302 ">
                                       <p>家庭磁盘</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d2886e1367" headers="d2886e1296 ">
                                       <p>家庭</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1367 d2886e1299 ">
                                       <p>LTPC</p>
                                    </td>
                                    <td align="left" valign="top" width="33%" headers="d2886e1367 d2886e1302 ">
                                       <p>家庭LTPC</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div>
            </div><a id="OLAXS127"></a><a id="OLAXS128"></a><a id="olaxs_conditions"></a><div class="sect2"><a id="GUID-F903EC44-B8D2-4E0A-8223-5DA1E3EF0698" name="GUID-F903EC44-B8D2-4E0A-8223-5DA1E3EF0698"></a><h3 id="OLAXS-GUID-F903EC44-B8D2-4E0A-8223-5DA1E3EF0698" class="sect3"><span class="enumeration_section">1.4</span>条件</h3>
               <div>
                  <p>一个<a id="d2886e1400" class="indexterm-anchor"></a> condition指定一个或多个表达式和逻辑（布尔）运算符的组合。OLAP表达式语法具有以下类型的条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="basic-elements.html#GUID-A9167B35-5AA9-49B5-905B-D2DCA3C99CF0">简单的比较条件</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-CD30ED7A-0337-4631-8970-4E99EF4F94E5">集团比较条件</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-5F7F8DE1-F787-4680-9B01-C1A00ED615D2">范围条件</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-8582A2C6-EDB8-4AF8-B031-D90F7BD7939E">多个条件</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-CFEB098F-7201-40CC-B59B-93B65F31C705">否定条件</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-A46AAF38-7A5E-4AC6-AA1D-F9F175916BEC">特殊情况</a></p>
                     </li>
                     <li>
                        <p><a href="basic-elements.html#GUID-95E5944F-55F2-45FA-89A6-6DE1164143FD">模式匹配条件</a></p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-F903EC44-B8D2-4E0A-8223-5DA1E3EF0698__GUID-18AADECB-76D7-43DB-AE66-3AEDA86222A9">回报价值</p>
                  </div>
                  <!-- class="section" -->
                  <p><code class="codeph">NUMBER</code> （ <code class="codeph">0=FALSE, 1=TRUE</code> ）</p>
               </div><a id="OLAXS130"></a><a id="OLAXS129"></a><div class="sect3"><a id="GUID-A9167B35-5AA9-49B5-905B-D2DCA3C99CF0" name="GUID-A9167B35-5AA9-49B5-905B-D2DCA3C99CF0"></a><h4 id="OLAXS-GUID-A9167B35-5AA9-49B5-905B-D2DCA3C99CF0" class="sect4"><span class="enumeration_section">1.4.1</span>简单比较条件</h4>
                  <div>
                     <p>比较条件将一种表达与另一种表达进</p>
                     <p>您可以使用这些比较运算符：</p>
                     <div class="tblformal" id="GUID-A9167B35-5AA9-49B5-905B-D2DCA3C99CF0__GUID-83B3132C-0564-4535-AEDF-D8993DC95E86">
                        <p class="titleintable">表1-6简单比较运算符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="简单比较运算符" width="100%" border="1" summary="Description of operators for simple comparisons" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d2886e1481">操作者</th>
                                 <th align="left" valign="bottom" width="69%" id="d2886e1484">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1489" headers="d2886e1481 ">
                                    <p><code class="codeph">&gt;</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1489 d2886e1484 ">
                                    <p>比...更棒</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1497" headers="d2886e1481 ">
                                    <p><code class="codeph">&gt; =</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1497 d2886e1484 ">
                                    <p>大于或等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1505" headers="d2886e1481 ">
                                    <p><code class="codeph">&lt;</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1505 d2886e1484 ">
                                    <p>少于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1513" headers="d2886e1481 ">
                                    <p><code class="codeph">&lt;=</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1513 d2886e1484 ">
                                    <p>小于或等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1521" headers="d2886e1481 ">
                                    <p><code class="codeph">=</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1521 d2886e1484 ">
                                    <p>等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1529" headers="d2886e1481 ">
                                    <p><code class="codeph">！= = &lt;&gt;</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1529 d2886e1484 ">
                                    <p>不等于</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="OLAXS131"></a><div class="sect4"><a id="GUID-8D516435-37CD-4752-8229-8D93662A2957" name="GUID-8D516435-37CD-4752-8229-8D93662A2957"></a><h5 id="OLAXS-GUID-8D516435-37CD-4752-8229-8D93662A2957" class="sect5"><span class="enumeration_section">1.4.1.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">expr {&gt; | &gt; = | &lt;| &lt;= | = | ！= | = | &lt;&gt;} expr</pre></div>
                  </div><a id="OLAXS132"></a><div class="sect4"><a id="GUID-1F0D980A-268B-49DE-9791-1D0852926924" name="GUID-1F0D980A-268B-49DE-9791-1D0852926924"></a><h5 id="OLAXS-GUID-1F0D980A-268B-49DE-9791-1D0852926924" class="sect5"><span class="enumeration_section">1.4.1.2</span>参数</h5>
                     <div>
                        <p><code class="codeph">expr</code>可以是任何表达式。
                        </p>
                     </div>
                  </div><a id="OLAXS133"></a><div class="sect4"><a id="GUID-52E1DEF3-E4BA-4FE7-9D93-4483A7588B48" name="GUID-52E1DEF3-E4BA-4FE7-9D93-4483A7588B48"></a><h5 id="OLAXS-GUID-52E1DEF3-E4BA-4FE7-9D93-4483A7588B48" class="sect5"><span class="enumeration_section">1.4.1.3</span>例子</h5>
                     <div>
                        <p><code class="codeph">5 &gt; 3</code>是真的， <code class="codeph">4 != 5</code>为真， <code class="codeph">6 &gt;= 9</code>为假。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS135"></a><a id="OLAXS134"></a><div class="sect3"><a id="GUID-CD30ED7A-0337-4631-8970-4E99EF4F94E5" name="GUID-CD30ED7A-0337-4631-8970-4E99EF4F94E5"></a><h4 id="OLAXS-GUID-CD30ED7A-0337-4631-8970-4E99EF4F94E5" class="sect4"><span class="enumeration_section">1.4.2</span>组比较条件</h4>
                  <div>
                     <p>组比较条件指定与列表或子查询中的任何或所有成员的比较。</p>
                     <p>您可以使用这些比较运算符：</p>
                     <div class="tblformal" id="GUID-CD30ED7A-0337-4631-8970-4E99EF4F94E5__GUID-4AA6D5C1-791F-4B05-9E68-2C1250AB4E89">
                        <p class="titleintable">表1-7组比较运算符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="组比较运算符" width="100%" border="1" summary="Descriptions of operators for group comparisons" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d2886e1652">操作者</th>
                                 <th align="left" valign="bottom" width="69%" id="d2886e1655">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1660" headers="d2886e1652 ">
                                    <p><code class="codeph">&gt;</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1660 d2886e1655 ">
                                    <p>比...更棒</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1668" headers="d2886e1652 ">
                                    <p><code class="codeph">&gt; =</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1668 d2886e1655 ">
                                    <p>大于或等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1676" headers="d2886e1652 ">
                                    <p><code class="codeph">&lt;</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1676 d2886e1655 ">
                                    <p>少于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1684" headers="d2886e1652 ">
                                    <p><code class="codeph">&lt;=</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1684 d2886e1655 ">
                                    <p>小于或等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1692" headers="d2886e1652 ">
                                    <p><code class="codeph">=</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1692 d2886e1655 ">
                                    <p>等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1700" headers="d2886e1652 ">
                                    <p><code class="codeph">！= = &lt;&gt;</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1700 d2886e1655 ">
                                    <p>不等于</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1708" headers="d2886e1652 ">
                                    <p><code class="codeph">任何一个</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1708 d2886e1655 ">
                                    <p>如果列表中的一个或多个值匹配，则返回true;如果没有值匹配，则返回false。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e1716" headers="d2886e1652 ">
                                    <p><code class="codeph">所有</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e1716 d2886e1655 ">
                                    <p>如果列表中的所有值都匹配，则返回true;如果一个或多个值不匹配，则返回false。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="OLAXS136"></a><div class="sect4"><a id="GUID-4A55F891-EDAE-4BCB-8A69-22EE245F4ABE" name="GUID-4A55F891-EDAE-4BCB-8A69-22EE245F4ABE"></a><h5 id="OLAXS-GUID-4A55F891-EDAE-4BCB-8A69-22EE245F4ABE" class="sect5"><span class="enumeration_section">1.4.2.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">expr {= | ！= | = | &lt;&gt; | &gt; | &lt;| &gt; = | &lt;=} { <span class="bold">ANY</span> | <span class="bold">一些</span> | <span class="bold">ALL</span> }（{expression_list | subquery}）</pre></div>
                  </div><a id="OLAXS137"></a><div class="sect4"><a id="GUID-32826D0E-F3C4-4300-AD53-A9D4480E2471" name="GUID-32826D0E-F3C4-4300-AD53-A9D4480E2471"></a><h5 id="OLAXS-GUID-32826D0E-F3C4-4300-AD53-A9D4480E2471" class="sect5"><span class="enumeration_section">1.4.2.2</span>例子</h5>
                     <div>
                        <p><code class="codeph">5 &lt;= ALL (5, 10, 15)</code>为真， <code class="codeph">5 &lt;&gt; ANY (5, 10, 15)</code>为真。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS509"></a><div class="sect3"><a id="GUID-202B9A48-15A4-4CE4-86B9-DA68E2E57A28" name="GUID-202B9A48-15A4-4CE4-86B9-DA68E2E57A28"></a><h4 id="OLAXS-GUID-202B9A48-15A4-4CE4-86B9-DA68E2E57A28" class="sect4"><span class="enumeration_section">1.4.3</span>分层关系条件</h4>
                  <div>
                     <p>层次关系条件指定层次结构成员与其自身或层次结构的另一个成员的关系的比较。</p>
                  </div><a id="OLAXS510"></a><div class="sect4"><a id="GUID-7BFF714D-3630-4C36-9122-1D79642B9ACD" name="GUID-7BFF714D-3630-4C36-9122-1D79642B9ACD"></a><h5 id="OLAXS-GUID-7BFF714D-3630-4C36-9122-1D79642B9ACD" class="sect5"><span class="enumeration_section">1.4.3.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">expr1 <span class="bold">IS</span> [ <span class="bold">NOT</span> ] { <span class="bold">PARENT</span> | <span class="bold">儿童</span> | <span class="bold">ANCESTOR</span> | <span class="bold">ROOT_ANCESTOR</span> | <span class="bold">DESCENDANT</span> | <span class="bold">LEAF_DESCENDANT</span> | <span class="bold">RELATIVE}</span> <span class="bold">[OR SELF]</span> <span class="bold">WITHIN</span>层次expr2的<span class="bold">作者</span></pre></div>
                  </div><a id="OLAXS511"></a><div class="sect4"><a id="GUID-CFE0226E-95A5-4D60-8FCA-29BE4BF1D1F6" name="GUID-CFE0226E-95A5-4D60-8FCA-29BE4BF1D1F6"></a><h5 id="OLAXS-GUID-CFE0226E-95A5-4D60-8FCA-29BE4BF1D1F6" class="sect5"><span class="enumeration_section">1.4.3.2</span>参数</h5>
                     <div>
                        <p><code class="codeph">expr1</code>是解析为维度成员的任何表达式，包括文字或列。
                        </p>
                        <p><code class="codeph">PARENT</code>将<span class="italic">expr1</span>与<span class="italic">expr2</span>的父<code class="codeph">PARENT</code>进行比较。
                        </p>
                        <p><code class="codeph">CHILD</code>将<span class="italic">expr1</span>与<span class="italic">expr2</span>的子项进行比较。
                        </p>
                        <p><code class="codeph">ANCESTOR</code>将<span class="italic">expr1</span>与<span class="italic">expr2</span>的祖先进行比较。
                        </p>
                        <p><code class="codeph">ROOT_ANCESTOR</code>比较<span class="italic">表达式1</span>为<span class="italic">表达式2</span>的最高级祖先。
                        </p>
                        <p><code class="codeph">DESCENDANT</code>将<span class="italic">expr1</span>与<span class="italic">expr2</span>的后代进行比较。
                        </p>
                        <p><code class="codeph">LEAF_DESCENDANT</code>将<span class="italic">expr1</span>与没有<span class="italic">expr2</span>子<code class="codeph">LEAF_DESCENDANT</code>的后代进行比较。
                        </p>
                        <p><code class="codeph">RELATIVE</code>将<span class="italic">expr1</span>与具有与<span class="italic">expr2</span>共同的父项的维度成员进行比较。
                        </p>
                        <p><code class="codeph">OR SELF</code>将<span class="italic">expr1</span>与<span class="italic">expr2</span>相同的维度成员进行比较。
                        </p>
                        <p><code class="codeph">expr2</code>是解析为维度成员的任何表达式，包括文字或列。
                        </p>
                        <p><span class="italic">层次结构</span>是在确定<span class="italic">expr1</span>和<span class="italic">expr2</span>之间的关系时要考虑的层次<span class="italic">结构</span> ，以<span class="italic">dimension_name</span>的形式表示<code class="codeph">.</code> <span class="italic">hierarchy_name</span> ，如<code class="codeph">PRODUCT.PRIMARY</code>或<span class="italic">所有者</span> <code class="codeph">.</code> <span class="italic">dimension_name</span> <span class="bold">。</span> <span class="italic">hierarchy_name</span> ，如<code class="codeph">GLOBAL.PRODUCT.PRIMARY</code> 。</p>
                     </div>
                  </div><a id="OLAXS512"></a><div class="sect4"><a id="GUID-33437E4F-DB46-4CEB-97D2-E386B84796E0" name="GUID-33437E4F-DB46-4CEB-97D2-E386B84796E0"></a><h5 id="OLAXS-GUID-33437E4F-DB46-4CEB-97D2-E386B84796E0" class="sect5"><span class="enumeration_section">1.4.3.3</span>例子</h5>
                     <div><pre class="oac_no_warn" dir="ltr">TIME.DIM_KEY是'2008财政年度'的孩子或自己的时间.FISCAL'2008财年'是ROOT_ANCESTOR或自己的时间.DIM_KEY在时间.FISCAL'记忆'不是产品的支持者.DIM_KEY在GLOBAL.PRODUCT.PRIMARY</pre></div>
                  </div>
               </div><a id="OLAXS138"></a><div class="sect3"><a id="GUID-5F7F8DE1-F787-4680-9B01-C1A00ED615D2" name="GUID-5F7F8DE1-F787-4680-9B01-C1A00ED615D2"></a><h4 id="OLAXS-GUID-5F7F8DE1-F787-4680-9B01-C1A00ED615D2" class="sect4"><span class="enumeration_section">1.4.4</span>范围条件</h4>
                  <div>
                     <p>该<a id="d2886e2052" class="indexterm-anchor"></a> <code class="codeph">BETWEEN</code>运算符测试值是否在特定值范围内。如果被测试的值大于或等于低值且小于或等于高值，则返回true。
                     </p>
                  </div><a id="OLAXS139"></a><div class="sect4"><a id="GUID-6AD8C365-123C-4D51-8655-C717045B223F" name="GUID-6AD8C365-123C-4D51-8655-C717045B223F"></a><h5 id="OLAXS-GUID-6AD8C365-123C-4D51-8655-C717045B223F" class="sect5"><span class="enumeration_section">1.4.4.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">expr [ <span class="bold">NOT</span> ] <span class="bold">BETWEEN</span> expr <span class="bold">和</span> expr</pre></div>
                  </div><a id="OLAXS140"></a><div class="sect4"><a id="GUID-20871867-C8D2-484A-8949-197BEDF27D57" name="GUID-20871867-C8D2-484A-8949-197BEDF27D57"></a><h5 id="OLAXS-GUID-20871867-C8D2-484A-8949-197BEDF27D57" class="sect5"><span class="enumeration_section">1.4.4.2</span>示例</h5>
                     <div>
                        <p><code class="codeph">7 NOT BETWEEN 10 AND 15</code>是正确的。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS142"></a><a id="OLAXS141"></a><div class="sect3"><a id="GUID-8582A2C6-EDB8-4AF8-B031-D90F7BD7939E" name="GUID-8582A2C6-EDB8-4AF8-B031-D90F7BD7939E"></a><h4 id="OLAXS-GUID-8582A2C6-EDB8-4AF8-B031-D90F7BD7939E" class="sect4"><span class="enumeration_section">1.4.5</span>多重条件</h4>
                  <div>
                     <p>连词比较单个表达式与两个条件。</p>
                     <div class="tblformal" id="GUID-8582A2C6-EDB8-4AF8-B031-D90F7BD7939E__GUID-A575D7AA-0CB4-4402-AA68-27033CE219E5">
                        <p class="titleintable">表1-8连词</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="连词" width="100%" border="1" summary="Descriptions of conjunctions for multiple conditions" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d2886e2146">操作者</th>
                                 <th align="left" valign="bottom" width="69%" id="d2886e2149">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e2154" headers="d2886e2146 ">
                                    <p><code class="codeph">和</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e2154 d2886e2149 ">
                                    <p>如果两个组件条件都为真，则返回true。如果其中一个为false，则返回false。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d2886e2162" headers="d2886e2146 ">
                                    <p><code class="codeph">要么</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d2886e2162 d2886e2149 ">
                                    <p>如果任一组件条件为true，则返回true。如果两者都为false，则返回false。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="OLAXS143"></a><div class="sect4"><a id="GUID-D136CDDC-C505-4AEF-A61C-E91967FA95AA" name="GUID-D136CDDC-C505-4AEF-A61C-E91967FA95AA"></a><h5 id="OLAXS-GUID-D136CDDC-C505-4AEF-A61C-E91967FA95AA" class="sect5"><span class="enumeration_section">1.4.5.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">expr运算符condition1 {AND |或} condition2</pre></div>
                  </div><a id="OLAXS144"></a><div class="sect4"><a id="GUID-0D8E5C84-D6BC-4EF6-A3A2-EA9CFEC81203" name="GUID-0D8E5C84-D6BC-4EF6-A3A2-EA9CFEC81203"></a><h5 id="OLAXS-GUID-0D8E5C84-D6BC-4EF6-A3A2-EA9CFEC81203" class="sect5"><span class="enumeration_section">1.4.5.2</span>示例</h5>
                     <div>
                        <p><code class="codeph">5 &lt; 7 AND 5 &gt; 3</code>为真; <code class="codeph">5 &lt; 3 OR 10 &lt; 15</code>是真的。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS145"></a><div class="sect3"><a id="GUID-CFEB098F-7201-40CC-B59B-93B65F31C705" name="GUID-CFEB098F-7201-40CC-B59B-93B65F31C705"></a><h4 id="OLAXS-GUID-CFEB098F-7201-40CC-B59B-93B65F31C705" class="sect4"><span class="enumeration_section">1.4.6</span>否定条件</h4>
                  <div>
                     <p>该<a id="d2886e2241" class="indexterm-anchor"></a> <code class="codeph">NOT</code>运算符反转条件的含义。如果条件为false，则返回true。如果条件为真，则返回false。
                     </p>
                  </div><a id="OLAXS146"></a><div class="sect4"><a id="GUID-D98B6853-0CF6-407E-8BA6-B731C352CFD3" name="GUID-D98B6853-0CF6-407E-8BA6-B731C352CFD3"></a><h5 id="OLAXS-GUID-D98B6853-0CF6-407E-8BA6-B731C352CFD3" class="sect5"><span class="enumeration_section">1.4.6.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr"><span class="bold">不</span> { <span class="bold">BETWEEN</span> | <span class="bold">IN</span> | <span class="bold">喜欢</span> | <span class="bold">NULL</span> }</pre></div>
                  </div><a id="OLAXS147"></a><div class="sect4"><a id="GUID-A2562FBA-15B2-4A35-A42F-34F566A76986" name="GUID-A2562FBA-15B2-4A35-A42F-34F566A76986"></a><h5 id="OLAXS-GUID-A2562FBA-15B2-4A35-A42F-34F566A76986" class="sect5"><span class="enumeration_section">1.4.6.2</span>示例</h5>
                     <div>
                        <p><code class="codeph">5 IS NOT NULL</code>是真的; <code class="codeph">5 NOT IN (5, 10, 15)</code>是假的。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS149"></a><a id="OLAXS148"></a><div class="sect3"><a id="GUID-A46AAF38-7A5E-4AC6-AA1D-F9F175916BEC" name="GUID-A46AAF38-7A5E-4AC6-AA1D-F9F175916BEC"></a><h4 id="OLAXS-GUID-A46AAF38-7A5E-4AC6-AA1D-F9F175916BEC" class="sect4"><span class="enumeration_section">1.4.7</span>特殊条件</h4>
                  <div>
                     <p>该<a id="d2886e2332" class="indexterm-anchor"></a> <code class="codeph">IS</code>运算符测试特殊条件，例如空值，无穷大和非数字值。
                     </p>
                     <div class="tblformal" id="GUID-A46AAF38-7A5E-4AC6-AA1D-F9F175916BEC__GUID-1D668858-0BB3-4C31-AB46-520517C04BAD">
                        <p class="titleintable">表1-9特殊条件运算符</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="特殊条件运营商" width="100%" border="1" summary="Descriptions of operators for special conditions" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d2886e2347">操作者</th>
                                 <th align="left" valign="bottom" width="73%" id="d2886e2350">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d2886e2355" headers="d2886e2347 ">
                                    <p><code class="codeph">是无限的</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d2886e2355 d2886e2350 ">
                                    <p>如果表达式为无穷大，则返回true，否则返回false。仅适用于映射。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d2886e2363" headers="d2886e2347 ">
                                    <p><code class="codeph">是南</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d2886e2363 d2886e2350 ">
                                    <p>如果表达式不是数字，则返回true，否则返回false。仅适用于映射。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d2886e2371" headers="d2886e2347 ">
                                    <p><code class="codeph">一片空白</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d2886e2371 d2886e2350 ">
                                    <p>如果表达式为null，则返回true，否则返回false。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div><a id="OLAXS150"></a><div class="sect4"><a id="GUID-F6C62BD9-558D-4631-96F6-B267BA84731A" name="GUID-F6C62BD9-558D-4631-96F6-B267BA84731A"></a><h5 id="OLAXS-GUID-F6C62BD9-558D-4631-96F6-B267BA84731A" class="sect5"><span class="enumeration_section">1.4.7.1</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">expr <span class="bold">IS</span> [ <span class="bold">NOT</span> ] <span class="bold">NULL</span></pre></div>
                  </div><a id="OLAXS151"></a><div class="sect4"><a id="GUID-D62EEC66-DAA0-4BA2-ACA1-BC03EF1D8FF0" name="GUID-D62EEC66-DAA0-4BA2-ACA1-BC03EF1D8FF0"></a><h5 id="OLAXS-GUID-D62EEC66-DAA0-4BA2-ACA1-BC03EF1D8FF0" class="sect5"><span class="enumeration_section">1.4.7.2</span>示例</h5>
                     <div>
                        <p><code class="codeph">13 IS NOT NULL</code>是真的。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAXS152"></a><div class="sect3"><a id="GUID-95E5944F-55F2-45FA-89A6-6DE1164143FD" name="GUID-95E5944F-55F2-45FA-89A6-6DE1164143FD"></a><h4 id="OLAXS-GUID-95E5944F-55F2-45FA-89A6-6DE1164143FD" class="sect4"><span class="enumeration_section">1.4.8</span>模式匹配条件</h4>
                  <div>
                     <p>模式匹配条件比较字符数据。</p>
                  </div><a id="OLAXS154"></a><a id="OLAXS153"></a><div class="sect4"><a id="GUID-5A6E06F3-E488-47EC-BBFA-63C4FCF8BC6D" name="GUID-5A6E06F3-E488-47EC-BBFA-63C4FCF8BC6D"></a><h5 id="OLAXS-GUID-5A6E06F3-E488-47EC-BBFA-63C4FCF8BC6D" class="sect5"><span class="enumeration_section">1.4.8.1</span> LIKE运算符</h5>
                     <div>
                        <p>该<a id="d2886e2477" class="indexterm-anchor"></a> <code class="codeph">LIKE</code>运算符指定涉及模式匹配的测试。等于运算符（ <code class="codeph">=</code> ）将一个字符值与另一个字符值完全匹配，而<code class="codeph">LIKE</code>运算符可以匹配由特殊模式匹配（“通配符”）字符定义的模式。
                        </p>
                        <p>您可以从这些<code class="codeph">LIKE</code>运算符中进行选择：</p>
                        <div class="tblformal" id="GUID-5A6E06F3-E488-47EC-BBFA-63C4FCF8BC6D__GUID-1E2161A2-6B33-41F0-BE8B-E45CFFEBEDD0">
                           <p class="titleintable">表1-10 LIKE模式匹配运算符</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="像模式匹配运算符" width="100%" border="1" summary="Descriptions of LIKE operators" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d2886e2503">操作者</th>
                                    <th align="left" valign="bottom" width="69%" id="d2886e2506">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d2886e2511" headers="d2886e2503 ">
                                       <p><code class="codeph">喜欢</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d2886e2511 d2886e2506 ">
                                       <p>使用输入字符集中的字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d2886e2519" headers="d2886e2503 ">
                                       <p><code class="codeph">LIKEC</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d2886e2519 d2886e2506 ">
                                       <p>使用Unicode完整字符。它将Unicode补充字符视为两个字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d2886e2527" headers="d2886e2503 ">
                                       <p><code class="codeph">LIKE2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d2886e2527 d2886e2506 ">
                                       <p>使用UCS2代码点。它将Unicode补充字符视为一个字符。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d2886e2535" headers="d2886e2503 ">
                                       <p><code class="codeph">样4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d2886e2535 d2886e2506 ">
                                       <p>使用UCS4代码点。它将复合字符视为一个字符。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="OLAXS155"></a><div class="sect4"><a id="GUID-973624A9-B228-4BD2-8EA5-41DF201ACB4E" name="GUID-973624A9-B228-4BD2-8EA5-41DF201ACB4E"></a><h5 id="OLAXS-GUID-973624A9-B228-4BD2-8EA5-41DF201ACB4E" class="sect5"><span class="enumeration_section">1.4.8.2</span>语法</h5>
                     <div><pre class="oac_no_warn" dir="ltr">char1 [ <span class="bold">NOT</span> ]（ <span class="bold">LIKE</span> | <span class="bold">LIKEC</span> | <span class="bold">LIKE2</span> | <span class="bold">LIKE4</span> ）char2 [ <span class="bold">ESCAPE</span> esc_char]</pre></div>
                  </div><a id="OLAXS156"></a><div class="sect4"><a id="GUID-41AF2B0E-BEFA-4394-B067-8D971CA76017" name="GUID-41AF2B0E-BEFA-4394-B067-8D971CA76017"></a><h5 id="OLAXS-GUID-41AF2B0E-BEFA-4394-B067-8D971CA76017" class="sect5"><span class="enumeration_section">1.4.8.3</span>参数</h5>
                     <div>
                        <p><code class="codeph">char1</code>是搜索值的文本表达式。
                        </p>
                        <p><code class="codeph">char2</code>是模式的文本表达式。该模式可以包含以下通配符：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>下划线（_）恰好匹配值中的一个字符（而不是多字节字符集中的一个字节）。</p>
                           </li>
                           <li>
                              <p>百分号（％）可以匹配值中的零个或多个字符（而不是多字节字符集中的字节）。'％'无法匹配null。</p>
                           </li>
                        </ul>
                        <p><code class="codeph">esc_char</code>是一个文本表达式，通常是文字表达式，长度为一个字符。此转义字符将模式中的下划线或百分号标识为文字字符而不是通配符。您还可以通过重复搜索转义字符本身。例如，如果@是转义字符，那么您可以使用@％搜索％和@@来搜索@。
                        </p>
                     </div>
                  </div><a id="OLAXS157"></a><div class="sect4"><a id="GUID-C5BE6951-C1E7-4058-BCDE-6ED6B56D7212" name="GUID-C5BE6951-C1E7-4058-BCDE-6ED6B56D7212"></a><h5 id="OLAXS-GUID-C5BE6951-C1E7-4058-BCDE-6ED6B56D7212" class="sect5"><span class="enumeration_section">1.4.8.4</span>例子</h5>
                     <div>
                        <p><code class="codeph">'Ducks' LIKE 'Duck_'</code>和<code class="codeph">'Ducky' LIKE 'Duck_'</code>是真的。
                        </p>
                        <p><code class="codeph">'Duckling' LIKE 'Duck_'</code>是假的。
                        </p>
                        <p><code class="codeph">'Duckling' LIKE 'Duck%'</code>是真的。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="OLAXS158"></a><div class="sect2"><a id="GUID-FD5B915E-DD35-41D9-9AB3-24FC13CDB87F" name="GUID-FD5B915E-DD35-41D9-9AB3-24FC13CDB87F"></a><h3 id="OLAXS-GUID-FD5B915E-DD35-41D9-9AB3-24FC13CDB87F" class="sect3"><span class="enumeration_section">1.5</span>文字表达</h3>
               <div>
                  <p>OLAP表达式语法有三种类型<a id="d2886e2680" class="indexterm-anchor"></a>文字表达式：字符串，数字和null。必须使用转换函数（如<code class="codeph">TO_DATE</code>创建其他数据类型。</p>
                  <p><a id="d2886e2687" class="indexterm-anchor"></a>条款<a id="d2886e2692" class="indexterm-anchor"></a> <span class="bold">文字文字</span> ， <a id="d2886e2697" class="indexterm-anchor"></a> <span class="bold">字符文字</span> ，和<a id="d2886e2702" class="indexterm-anchor"></a> <span class="bold">字符串</span>可互换使用。它们始终用单引号括起来，以区别于对象名称。
                  </p>
               </div><a id="OLAXS159"></a><div class="sect3"><a id="GUID-68A89107-D71D-4C06-B429-46B159577FC8" name="GUID-68A89107-D71D-4C06-B429-46B159577FC8"></a><h4 id="OLAXS-GUID-68A89107-D71D-4C06-B429-46B159577FC8" class="sect4"><span class="enumeration_section">1.5.1</span>例子</h4>
                  <div><pre class="oac_no_warn" dir="ltr">'一个文字文本字符串''带有''引号'的文字字符串'''一个文字字符串，它跨入第二行'2 2.4 +1 -1 NULL</pre></div>
               </div>
            </div><a id="OLAXS160"></a><div class="sect2"><a id="GUID-A328DA78-DC1B-4DD0-B0F3-B5134C9F79EA" name="GUID-A328DA78-DC1B-4DD0-B0F3-B5134C9F79EA"></a><h3 id="OLAXS-GUID-A328DA78-DC1B-4DD0-B0F3-B5134C9F79EA" class="sect3"><span class="enumeration_section">1.6</span>案例表达</h3>
               <div>
                  <p><a id="d2886e2751" class="indexterm-anchor"></a> <code class="codeph">CASE</code>表达式让你使用<a id="d2886e2756" class="indexterm-anchor"></a> <code class="codeph">IF</code> ......<code class="codeph">THEN</code> ......表达式中的<code class="codeph">ELSE</code>逻辑。
                  </p>
                  <p>在一个简单的case表达式中， <code class="codeph">CASE</code>搜索第一个<a id="d2886e2772" class="indexterm-anchor"></a> <code class="codeph">WHEN</code> ......对于<code class="codeph">expr</code>等于<code class="codeph">comparison_expr,</code> <code class="codeph">THEN</code>对<code class="codeph">comparison_expr,</code>则返回<code class="codeph">return_expr</code> 。如果没有的<code class="codeph">WHEN</code> ...<code class="codeph">THEN</code>对满足这个条件，并且存在<code class="codeph">ELSE</code>子句，然后<code class="codeph">CASE</code>返回<code class="codeph">else_expr</code> 。否则， <code class="codeph">CASE</code>返回<code class="codeph">NULL</code> 。</p>
                  <p>在搜索的<code class="codeph">CASE</code>表达式中， <code class="codeph">CASE</code>从左向右搜索，直到找到<code class="codeph">condition</code>为true的情况，然后返回<code class="codeph">return_expr</code> 。如果未发现任何<code class="codeph">condition</code>为真，并且存在<code class="codeph">ELSE</code>子句，则<code class="codeph">CASE</code>返回<code class="codeph">else_expr</code> 。否则， <code class="codeph">CASE</code>返回<code class="codeph">NULL</code> 。</p>
               </div><a id="OLAXS161"></a><div class="sect3"><a id="GUID-4DDD4CA6-C7C1-464A-B31D-B21BD22284EA" name="GUID-4DDD4CA6-C7C1-464A-B31D-B21BD22284EA"></a><h4 id="OLAXS-GUID-4DDD4CA6-C7C1-464A-B31D-B21BD22284EA" class="sect4"><span class="enumeration_section">1.6.1</span>返回值</h4>
                  <div>
                     <p>与<code class="codeph">else_expression</code>参数相同</p>
                  </div>
               </div><a id="OLAXS162"></a><div class="sect3"><a id="GUID-B0FA3D5B-1541-4B6E-8875-9FD89FDFF252" name="GUID-B0FA3D5B-1541-4B6E-8875-9FD89FDFF252"></a><h4 id="OLAXS-GUID-B0FA3D5B-1541-4B6E-8875-9FD89FDFF252" class="sect4"><span class="enumeration_section">1.6.2</span>语法</h4>
                  <div><pre class="oac_no_warn" dir="ltr"><span class="bold">CASE</span> {simple_case_expression | searching_case_expression} [ <span class="bold">ELSE</span> else_expression] <span class="bold">END</span> simple_case_expression :: = expr <span class="bold">WHEN</span> comparison_expr <span class="bold">THEN</span> return_expr [ <span class="bold">WHEN</span> comparison_expr <span class="bold">THEN</span> return_expr] ...searching_case_expression :: = <span class="bold">WHEN</span>条件<span class="bold">那么</span> return_expr [ <span class="bold">WHEN</span>条件<span class="bold">那么</span> return_expr] ......</pre></div>
               </div><a id="OLAXS163"></a><div class="sect3"><a id="GUID-B17CC24C-29AE-49E8-8CDF-E6A24BFA096F" name="GUID-B17CC24C-29AE-49E8-8CDF-E6A24BFA096F"></a><h4 id="OLAXS-GUID-B17CC24C-29AE-49E8-8CDF-E6A24BFA096F" class="sect4"><span class="enumeration_section">1.6.3</span>参数</h4>
                  <div>
                     <p><code class="codeph">expr</code>是正在测试的基表达式。
                     </p>
                     <p><code class="codeph">comparison_expr</code>是测试<code class="codeph">expr</code> 。它必须与<code class="codeph">expr</code>具有相同的基本数据类型（数字或文本）。
                     </p>
                     <p><code class="codeph">condition</code>是一个条件表达式。
                     </p>
                     <p><code class="codeph">return_expr</code>是找到匹配项或条件为true时返回的值。
                     </p>
                  </div>
               </div><a id="OLAXS164"></a><div class="sect3"><a id="GUID-1D9766AB-61B6-4471-80A3-623F558607DF" name="GUID-1D9766AB-61B6-4471-80A3-623F558607DF"></a><h4 id="OLAXS-GUID-1D9766AB-61B6-4471-80A3-623F558607DF" class="sect4"><span class="enumeration_section">1.6.4</span>示例</h4>
                  <div>
                     <p>此语句返回<code class="codeph">Single Item</code>或<code class="codeph">Value Pack</code>具体取决于<code class="codeph">PRODUCT</code>维度的<code class="codeph">PACKAGE</code>属性是null还是具有值：</p><pre class="oac_no_warn" dir="ltr">CASE PRODUCT.PACKAGE WHEN NULL，然后'Single Item'ELSE'Value Pack'END</pre><div class="tblformal" id="GUID-1D9766AB-61B6-4471-80A3-623F558607DF__GUID-5DDE214F-F8E1-44C8-9981-18A3E4C0C368">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="CASE example 1 output" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="46%" id="d2886e3013">产品</th>
                                 <th align="left" valign="bottom" width="27%" id="d2886e3016">包</th>
                                 <th align="left" valign="bottom" width="27%" id="d2886e3019">类别</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3024" headers="d2886e3013 ">
                                    <p>1.44MB外置3.5“软盘</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3024 d2886e3016 ">
                                    <p>行政人员</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3024 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3034" headers="d2886e3013 ">
                                    <p>1GB USB驱动器</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3034 d2886e3016 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3034 d2886e3019 ">
                                    <p>单品</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3044" headers="d2886e3013 ">
                                    <p>512MB USB驱动器</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3044 d2886e3016 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3044 d2886e3019 ">
                                    <p>单品</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3054" headers="d2886e3013 ">
                                    <p>56Kbps V.90 Type II调制解调器</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3054 d2886e3016 ">
                                    <p>行政人员</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3054 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3064" headers="d2886e3013 ">
                                    <p>56Kbps V.92 Type II传真/调制解调器</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3064 d2886e3016 ">
                                    <p>笔记本电脑价值包</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3064 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3074" headers="d2886e3013 ">
                                    <p>豪华鼠标</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3074 d2886e3016 ">
                                    <p>行政人员</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3074 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3084" headers="d2886e3013 ">
                                    <p>特使大使</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3084 d2886e3016 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3084 d2886e3019 ">
                                    <p>单品</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3094" headers="d2886e3013 ">
                                    <p>特使执行官</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3094 d2886e3016 ">
                                    <p>行政人员</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3094 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3104" headers="d2886e3013 ">
                                    <p>特使外接键盘</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3104 d2886e3016 ">
                                    <p>行政人员</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3104 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3114" headers="d2886e3013 ">
                                    <p>特使标准笔记本电脑</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3114 d2886e3016 ">
                                    <p>价值包</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3114 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3124" headers="d2886e3013 ">
                                    <p>外部 -  DVD-RW  -  8X</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3124 d2886e3016 ">
                                    <p>行政人员</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3124 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3135" headers="d2886e3013 ">
                                    <p>外置101键键盘</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3135 d2886e3016 ">
                                    <p>多媒体</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3135 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3145" headers="d2886e3013 ">
                                    <p>外部48X CD-ROM</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3145 d2886e3016 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3145 d2886e3019 ">
                                    <p>单品</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="46%" id="d2886e3155" headers="d2886e3013 ">
                                    <p>内部 -  DVD-RW  -  6X</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3155 d2886e3016 ">
                                    <p>多媒体</p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d2886e3155 d2886e3019 ">
                                    <p>价值包</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果价格和成本之间的差异小于10％，则下一个声明会将单价提高20％，截断为最接近的美元。否则，它返回当前单价。</p><pre class="oac_no_warn" dir="ltr">例如PRICE_CUBE.UNIT_PRICE &lt;PRICE_CUBE.UNIT_COST * 1.1那么TRUNC（PRICE_CUBE.UNIT_COST * 1.2）ELSE PRICE_CUBE.UNIT_PRICE END</pre><div class="tblformal" id="GUID-1D9766AB-61B6-4471-80A3-623F558607DF__GUID-8E3ADE7A-4C1A-4159-9BD5-99FEFEC4AAFD">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="CASE example 2 output" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="48%" id="d2886e3177">产品</th>
                                 <th align="left" valign="bottom" width="26%" id="d2886e3180">成本</th>
                                 <th align="left" valign="bottom" width="26%" id="d2886e3183">价钱</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3188" headers="d2886e3177 ">
                                    <p>1GB USB驱动器</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3188 d2886e3180 ">
                                    <p>483.55</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3188 d2886e3183 ">
                                    <p>546.83</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3198" headers="d2886e3177 ">
                                    <p>512MB USB驱动器</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3198 d2886e3180 ">
                                    <p>234.69</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3198 d2886e3183 ">
                                    <p>275.91</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3208" headers="d2886e3177 ">
                                    <p>56Kbps V.90 Type II调制解调器</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3208 d2886e3180 ">
                                    <p>135.72</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3208 d2886e3183 ">
                                    <p>158.58</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3218" headers="d2886e3177 ">
                                    <p>56Kbps V.92 Type II传真/调制解调器</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3218 d2886e3180 ">
                                    <p>95.01</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3218 d2886e3183 ">
                                    <p>111.08</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3228" headers="d2886e3177 ">
                                    <p>特使大使</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3228 d2886e3180 ">
                                    <p>2686.01</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3228 d2886e3183 ">
                                    <p>2850.88</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3238" headers="d2886e3177 ">
                                    <p>特使执行官</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3238 d2886e3180 ">
                                    <p>2799.80</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3238 d2886e3183 ">
                                    <p>2943.96</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3248" headers="d2886e3177 ">
                                    <p>特使标准</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3248 d2886e3180 ">
                                    <p>1933.82</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3248 d2886e3183 ">
                                    <p>1921.62</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3258" headers="d2886e3177 ">
                                    <p>外部 -  DVD-RW  -  8X</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3258 d2886e3180 ">
                                    <p>263.83</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3258 d2886e3183 ">
                                    <p>300.34</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3268" headers="d2886e3177 ">
                                    <p>外部48X CD-ROM</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3268 d2886e3180 ">
                                    <p>223.11</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3268 d2886e3183 ">
                                    <p>254.15</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3278" headers="d2886e3177 ">
                                    <p>内部 -  DVD-RW  -  6X</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3278 d2886e3180 ">
                                    <p>134.46</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3278 d2886e3183 ">
                                    <p>160.18</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3288" headers="d2886e3177 ">
                                    <p>内部48X CD-ROM</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3288 d2886e3180 ">
                                    <p>108.32</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3288 d2886e3183 ">
                                    <p>127.54</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3299" headers="d2886e3177 ">
                                    <p>内置48X CD-ROM USB</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3299 d2886e3180 ">
                                    <p>46.00</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3299 d2886e3183 ">
                                    <p>68.54</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3309" headers="d2886e3177 ">
                                    <p>显示器 -  17“超级VGA</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3309 d2886e3180 ">
                                    <p>228.53</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3309 d2886e3183 ">
                                    <p>269.70</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3319" headers="d2886e3177 ">
                                    <p>显示器 -  19“超级VGA</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3319 d2886e3180 ">
                                    <p>445.04</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3319 d2886e3183 ">
                                    <p>504.84</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3329" headers="d2886e3177 ">
                                    <p>Sentinel Financial</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3329 d2886e3180 ">
                                    <p>1685.72</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3329 d2886e3183 ">
                                    <p>1764.14</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3339" headers="d2886e3177 ">
                                    <p>Sentinel多媒体</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3339 d2886e3180 ">
                                    <p>1849.17</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3339 d2886e3183 ">
                                    <p>1932.54</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="48%" id="d2886e3349" headers="d2886e3177 ">
                                    <p>哨兵标准</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3349 d2886e3180 ">
                                    <p>1572.98</p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d2886e3349 d2886e3183 ">
                                    <p>1610.53</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>下一个示例通过将销售额与上一年相乘1.06来创建销售预算计算度量，增加6％。所有维度的详细级别都不包括在计算中。预算仅使用2006年或之后的数据进行预测。</p><pre class="oac_no_warn" dir="ltr">例如，TIME.END_DATE&gt; = TO_DATE（'01 -JAN-2006'）和TIME.LEVEL_NAME IN（'CALENDAR_YEAR'，'CALENDAR_QUARTER'）和PRODUCT.LEVEL_NAME！='ITEM'和CUSTOMER.LEVEL_NAME IN（'TOTAL'，'REGION'，'WAREHOUSE'）TUNC（LAG（UNITS_CUBE.SALES，1）超过HIERARCHY（TIME.CALENDAR由ANCESTOR在LEVEL TIME.CALENDAR.CALENDAR_YEAR位置来自BEGINNING）* 1.06）ELSE NULL END</pre><div class="tblformal" id="GUID-1D9766AB-61B6-4471-80A3-623F558607DF__GUID-E4D5FF38-D125-4F13-898C-ED98F1A43170">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="CASE example 3 output" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d2886e3371">产品</th>
                                 <th align="left" valign="bottom" width="33%" id="d2886e3374">时间</th>
                                 <th align="left" valign="bottom" width="33%" id="d2886e3377">销售</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3382" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3382 d2886e3374 ">
                                    <p>Q1.05</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3382 d2886e3377 ">
                                    <p>28172590</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3392" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3392 d2886e3374 ">
                                    <p>Q2.05</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3392 d2886e3377 ">
                                    <p>34520379</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3402" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3402 d2886e3374 ">
                                    <p>Q3.05</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3402 d2886e3377 ">
                                    <p>29466573</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3412" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3412 d2886e3374 ">
                                    <p>Q4.05</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3412 d2886e3377 ">
                                    <p>32031795</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3422" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3422 d2886e3374 ">
                                    <p>Q1.06</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3422 d2886e3377 ">
                                    <p>32711891</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3432" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3432 d2886e3374 ">
                                    <p>Q2.06</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3432 d2886e3377 ">
                                    <p>33637473</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3442" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3442 d2886e3374 ">
                                    <p>Q3.06</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3442 d2886e3377 ">
                                    <p>29227635</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3452" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3452 d2886e3374 ">
                                    <p>Q4.06</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3452 d2886e3377 ">
                                    <p>31319881</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3462" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3462 d2886e3374 ">
                                    <p>Q1.07</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3462 d2886e3377 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3472" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3472 d2886e3374 ">
                                    <p>Q2.07</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3472 d2886e3377 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3482" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3482 d2886e3374 ">
                                    <p>Q3.07</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3482 d2886e3377 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d2886e3493" headers="d2886e3371 ">
                                    <p>硬件</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3493 d2886e3374 ">
                                    <p>Q4.07</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d2886e3493 d2886e3377 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="OLAXS165"></a><a id="olaxs_qdrs"></a><div class="sect2"><a id="GUID-AD33ECCF-6996-41AD-993E-0C0541F3209B" name="GUID-AD33ECCF-6996-41AD-993E-0C0541F3209B"></a><h3 id="OLAXS-GUID-AD33ECCF-6996-41AD-993E-0C0541F3209B" class="sect3"><span class="enumeration_section">1.7</span>合格数据参考（QDR）</h3>
               <div>
                  <p><a id="d2886e3524" class="indexterm-anchor"></a>在查询期间，限定数据引用（QDR）将维度对象限制为一个或多个维度中的单个成员。
                  </p>
               </div><a id="OLAXS166"></a><div class="sect3"><a id="GUID-831373AB-FA84-4ED5-98E2-B59ABEC1A021" name="GUID-831373AB-FA84-4ED5-98E2-B59ABEC1A021"></a><h4 id="OLAXS-GUID-831373AB-FA84-4ED5-98E2-B59ABEC1A021" class="sect4"><span class="enumeration_section">1.7.1</span>语法</h4>
                  <div><pre class="oac_no_warn" dir="ltr">表达式<span class="bold">[</span> qualifier [，qualifier] ...<span class="bold">]</span>
</pre><p><span class="italic"><span class="bold">qualifier</span></span> :: =</p><pre class="oac_no_warn" dir="ltr">dimension_id = member_expression</pre><p><span class="bold">注意</span> ：以粗体显示的外部方括号是语法的一部分。在这种情况下，它们不表示可选参数。
                     </p>
                  </div>
               </div><a id="OLAXS167"></a><div class="sect3"><a id="GUID-418E19D4-0390-45B7-879D-AFB1DDCF25BA" name="GUID-418E19D4-0390-45B7-879D-AFB1DDCF25BA"></a><h4 id="OLAXS-GUID-418E19D4-0390-45B7-879D-AFB1DDCF25BA" class="sect4"><span class="enumeration_section">1.7.2</span>参数</h4>
                  <div>
                     <p><code class="codeph">expression</code>是一个维度表达式，通常是度量的名称。
                     </p>
                     <p><code class="codeph">dimension_id</code>是<code class="codeph">expression</code>的立方体维度。
                     </p>
                     <p><code class="codeph">member_expression</code>解析为<code class="codeph">dimension_id</code>的单个成员。
                     </p>
                  </div>
               </div><a id="OLAXS168"></a><div class="sect3"><a id="GUID-702B38A2-938A-4E5F-95C5-86B8123290EA" name="GUID-702B38A2-938A-4E5F-95C5-86B8123290EA"></a><h4 id="OLAXS-GUID-702B38A2-938A-4E5F-95C5-86B8123290EA" class="sect4"><span class="enumeration_section">1.7.3</span>例子</h4>
                  <div>
                     <p><code class="codeph">global.sales[global.time = 'CY2007']</code>返回2007年的销售值。
                     </p>
                     <p><code class="codeph">sales[customer = 'US', time = 'CY2007']</code>仅在2007日历年返回美国的销售值。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01018.DBMS_FILE_GROUP.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_FILE_GROUP package, one of a set of Oracle Streams packages, provides administrative interfaces for managing file groups, file group versions, and files. A file group repository is a collection of all of the file groups in a database and can contain multiple versions of a particular file group. You can use this package to create and manage file group repositories."></meta>
      <meta name="description" content="The DBMS_FILE_GROUP package, one of a set of Oracle Streams packages, provides administrative interfaces for managing file groups, file group versions, and files. A file group repository is a collection of all of the file groups in a database and can contain multiple versions of a particular file group. You can use this package to create and manage file group repositories."></meta>
      <title>DBMS_FILE_GROUP</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_FILE_GROUP package, one of a set of Oracle Streams packages, provides administrative interfaces for managing file groups, file group versions, and files. A file group repository is a collection of all of the file groups in a database and can contain multiple versions of a particular file group. You can use this package to create and manage file group repositories."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_FGA.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_FILE_TRANSFER.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_FGA.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_FILE_TRANSFER.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_FILE_GROUP</li>
            </ol>
            <a id="GUID-F3DCFA0D-F8ED-4152-A291-112D31C22692" name="GUID-F3DCFA0D-F8ED-4152-A291-112D31C22692"></a><a id="ARPLS828"></a><a id="ARPLS828"></a>
            
            <h2 id="ARPLS-GUID-F3DCFA0D-F8ED-4152-A291-112D31C22692" class="sect2"><span class="enumeration_chapter">67</span> DBMS_FILE_GROUP</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_FILE_GROUP</code>包是一组Oracle Streams包中的一个，它提供管理文件组，文件组版本和文件的管理界面。文件组存储库是数据库中所有文件组的集合，可以包含特定文件组的多个版本。您可以使用此包来创建和管理文件组存储库。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_FILE_GROUP.html#GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321" title="在使用DBMS_FILE_GROUP包之前理解术语很有帮助。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_FILE_GROUP.html#GUID-F90802F7-1CD3-45FA-BFDA-F9A922899A31" title="有两种方法可以在DBMS_FILE_GROUP包上定义控件。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_FILE_GROUP.html#GUID-3242A9C9-ABC0-4942-BEFF-08BAF92F39FB" title="该表列出了DBMS_FILE_GROUP子程序并简要描述了它们。">DBMS_FILE_GROUP子程序的摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS66359"></a><a id="ARPLS66360"></a><a id="ARPLS66361"></a><a id="ARPLS66362"></a><a id="ARPLS66360"></a><a id="ARPLS66361"></a><a id="ARPLS66362"></a><a id="ARPLS66359"></a><div class="props_rev_3"><a id="GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321" name="GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321"></a><h3 id="ARPLS-GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321" class="sect3"><span class="enumeration_section">67.1</span> DBMS_FILE_GROUP概述</h3>
               <div>
                  <p>在使用DBMS_FILE_GROUP包之前理解术语很有帮助。</p>
                  <div class="section">
                     <p>以下术语适用于<code class="codeph">DBMS_FILE_GROUP</code>包：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321__GUID-59C2D313-19F0-4775-BA84-9BEA9F2640D1">文件</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">文件</span>是对存储在硬盘上的文件的引用。文件由文件名，目录对象和文件类型组成。目录对象引用文件存储在硬盘上的目录。例如，文件可能包含以下组件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>文件名是<code class="codeph">expdat.dmp</code> 。
                           </p>
                        </li>
                        <li>
                           <p>包含该文件的目录对象是<code class="codeph">db_files</code> 。
                           </p>
                        </li>
                        <li>
                           <p>文件类型为<code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code> 。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321__GUID-41F9DB25-F3E4-4298-9155-9868E72753E6">版</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">版本</span>是相关文件的集合。例如，版本可能包含一组数据文件和由数据泵可传输表空间导出生成的数据泵导出转储文件。版本中只允许一个Data Pump导出转储文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83DDC537-7499-4CBE-8B3E-3AA69205F321__GUID-004FAAD0-8525-4430-BAE5-3E5B1E15A11A">文件组</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><span class="bold">文件组</span>是版本的集合。文件组可以在逻辑上对一组版本进行分组。例如，名为<code class="codeph">financial_quarters</code>的文件组可以通过逻辑分组与表空间集相关的文件版本来跟踪季度财务数据。包含数据的表空间可以在每个季度末导出，并以<code class="codeph">Q1FY04</code> ， <code class="codeph">Q2FY04</code>等名称进行版本控制。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73177"></a><a id="ARPLS73177"></a><div class="props_rev_3"><a id="GUID-F90802F7-1CD3-45FA-BFDA-F9A922899A31" name="GUID-F90802F7-1CD3-45FA-BFDA-F9A922899A31"></a><h3 id="ARPLS-GUID-F90802F7-1CD3-45FA-BFDA-F9A922899A31" class="sect3"><span class="enumeration_section">67.2</span> DBMS_FILE_GROUP安全模型</h3>
               <div>
                  <p>有两种方法可以在DBMS_FILE_GROUP包上定义控件。</p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将此程序包上的<code class="codeph">EXECUTE</code>授予选定的用户或角色。
                           </p>
                        </li>
                        <li>
                           <p>向选定的用户或角色授予<code class="codeph">EXECUTE_CATALOG_ROLE</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>如果程序包中的子程序是从存储过程中运行的，则必须直接为程序包授予运行子程序的用户<code class="codeph">EXECUTE</code>特权。它不能通过角色授予。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66363"></a><a id="ARPLS66364"></a><a id="ARPLS66364"></a><a id="ARPLS66363"></a><div class="props_rev_3"><a id="GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" name="GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9"></a><h3 id="ARPLS-GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" class="sect3"><span class="enumeration_section">67.3</span> DBMS_FILE_GROUP常量</h3>
               <div>
                  <p><code class="codeph">DBMS_FILE_GROUP</code>包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如， <code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code> 。</p>
                  <div class="section">
                     <p>下表列出了参数和枚举常量。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9__CEGIDDIF">
                     <p class="titleintable">表67-1具有枚举常量的DBMS_FILE_GROUP参数</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="具有枚举常量的DBMS_FILE_GROUP参数" width="100%" border="1" summary="This table lists the DBMS_FILE_GROUP subprogram parameters with enumerated constants in alphabetical order and briefly describes the enumerated constants." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="18%" id="d426473e511">参数</th>
                              <th align="left" valign="bottom" width="31%" id="d426473e514">选项</th>
                              <th align="left" valign="bottom" width="18%" id="d426473e517">类型</th>
                              <th align="left" valign="bottom" width="32%" id="d426473e520">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d426473e525" headers="d426473e511 ">
                                 <p><code class="codeph">文件类型</code></p>
                                 <p><code class="codeph">new_file_type</code></p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d426473e525 d426473e514 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">EXPORT_DUMP_FILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DATAPUMP_LOG_FILE</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d426473e525 d426473e517 ">
                                 <p><code class="codeph">VARCHAR2（30）</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d426473e525 d426473e520 ">
                                 <p><code class="codeph">DATAFILE</code>是数据库的数据文件。该常量可以指定为<code class="codeph">'DATAFILE'</code> 。
                                 </p>
                                 <p><code class="codeph">EXPORT_DUMP_FILE</code>是数据泵导出转储文件。该常量可以指定为<code class="codeph">'DUMPSET'</code> 。
                                 </p>
                                 <p><code class="codeph">DATAPUMP_LOG_FILE</code>是数据泵导出日志文件。该常量可以指定为<code class="codeph">'DATAPUMPLOG'</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d426473e573" headers="d426473e511 ">
                                 <p><code class="codeph">max_versions</code></p>
                                 <p><code class="codeph">retention_days</code></p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d426473e573 d426473e514 ">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">无穷</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d426473e573 d426473e517 ">
                                 <p><code class="codeph">数</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d426473e573 d426473e520 ">
                                 <p><code class="codeph">INFINITE</code>指定无限制。<code class="codeph">max_versions</code>或<code class="codeph">retention_days</code>可以在不达到限制的情况下增加。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d426473e602" headers="d426473e511 ">
                                 <p><code class="codeph">特权</code></p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d426473e602 d426473e514 ">
                                 <p><code class="codeph">GRANT_SYSTEM_PRIVILEGE</code>过程中指定的系统特权：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">READ_ANY_FILE_GROUP</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">MANAGE_ANY_FILE_GROUP</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">MANAGE_FILE_GROUP</code></p>
                                    </li>
                                 </ul>
                                 <p><code class="codeph">GRANT_OBJECT_PRIVILEGE</code>过程中指定的对象权限：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">READ_ON_FILE_GROUP</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">MANAGE_ON_FILE_GROUP</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d426473e602 d426473e517 ">
                                 <p><code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d426473e602 d426473e520 ">
                                 <p><code class="codeph">READ_ANY_FILE_GROUP</code>授予查看数据字典中任何模式中任何文件组的信息的权限。
                                 </p>
                                 <p><code class="codeph">MANAGE_ANY_FILE_GROUP</code>授予在任何模式中创建，管理和删除任何文件组的权限。
                                 </p>
                                 <p><code class="codeph">MANAGE_FILE_GROUP</code>授予在用户架构中创建，管理和删除文件组的权限。
                                 </p>
                                 <p><code class="codeph">READ_ON_FILE_GROUP</code>授予查看数据字典中特定文件组信息的权限。
                                 </p>
                                 <p><code class="codeph">MANAGE_ON_FILE_GROUP</code>授予管理除用户架构之外的架构中的特定文件组的权限。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS835"></a><a id="ARPLS66365"></a><a id="ARPLS66365"></a><a id="ARPLS835"></a><div class="props_rev_3"><a id="GUID-3242A9C9-ABC0-4942-BEFF-08BAF92F39FB" name="GUID-3242A9C9-ABC0-4942-BEFF-08BAF92F39FB"></a><h3 id="ARPLS-GUID-3242A9C9-ABC0-4942-BEFF-08BAF92F39FB" class="sect3"><span class="enumeration_section">67.4</span> DBMS_FILE_GROUP子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_FILE_GROUP</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-3242A9C9-ABC0-4942-BEFF-08BAF92F39FB__GUID-1282E1DB-FE4D-4EF0-9CEA-7AA8981F4127">
                     <p class="titleintable">表67-2 DBMS_FILE_GROUP包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_FILE_GROUP包子程序" width="100%" border="1" summary="This table lists the DBMS_FILE_GROUP subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="42%" id="d426473e765">子程序</th>
                              <th align="left" valign="bottom" width="58%" id="d426473e768">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e773" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92" title="此过程将文件添加到文件组的版本。">ADD_FILE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e773 d426473e768 ">
                                 <p>将文件添加到文件组的版本</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e785" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B" title="此过程会更改文件组版本中的文件。">ALTER_FILE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e785 d426473e768 ">
                                 <p>更改文件组版本中的文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e797" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-C7BF3B80-5370-49F5-A058-CD598F387766" title="此过程会更改文件组。">ALTER_FILE_GROUP过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e797 d426473e768 ">
                                 <p>更改文件组</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e809" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-3FFCB56A-4EA0-4473-A591-04519358E339" title="此过程会更改文件组的版本。">ALTER_VERSION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e809 d426473e768 ">
                                 <p>更改文件组的版本</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e821" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5" title="此过程创建一个文件组。">CREATE_FILE_GROUP过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e821 d426473e768 ">
                                 <p>创建文件组</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e833" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48" title="此过程创建文件组的版本。">CREATE_VERSION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e833 d426473e768 ">
                                 <p>创建文件组的版本</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e845" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7" title="此过程将删除文件组。">DROP_FILE_GROUP过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e845 d426473e768 ">
                                 <p>删除文件组</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e857" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-4691D2CE-EF61-45D3-908B-2367A3488B08" title="此过程将删除文件组的版本。">DROP_VERSION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e857 d426473e768 ">
                                 <p>删除文件组的版本</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e869" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701" title="此过程将文件组的对象权限授予用户。">GRANT_OBJECT_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e869 d426473e768 ">
                                 <p>将文件组的对象权限授予用户</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e881" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE" title="此过程为用户授予文件组操作的系统权限。">GRANT_SYSTEM_PRIVILEGE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e881 d426473e768 ">
                                 <p>为用户授予文件组操作的系统权限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e893" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B" title="此过程使用文件组的保留策略清除文件组。">PURGE_FILE_GROUP程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e893 d426473e768 ">
                                 <p>使用文件组的保留策略清除文件组</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e906" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6" title="此过程从文件组的版本中删除文件。">REMOVE_FILE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e906 d426473e768 ">
                                 <p>从文件组的版本中删除文件</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e918" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448" title="此过程撤消用户对文件组的对象权限。">REVOKE_OBJECT_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e918 d426473e768 ">
                                 <p>撤消用户对文件组的对象权限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d426473e930" headers="d426473e765 ">
                                 <p><a href="DBMS_FILE_GROUP.html#GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165" title="此过程撤消用户对文件组操作的系统特权。">REVOKE_SYSTEM_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d426473e930 d426473e768 ">
                                 <p>撤消用户对文件组操作的系统特权</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-3242A9C9-ABC0-4942-BEFF-08BAF92F39FB__GUID-ECF8C03A-062B-476E-9B7A-49956FE1AD6C">
                        <p class="notep1">注意：</p>
                        <p>除非另有说明，否则所有子程序均提交。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS836"></a><a id="ARPLS66366"></a><a id="ARPLS66366"></a><a id="ARPLS836"></a><div class="props_rev_3"><a id="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92" name="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92"></a><h4 id="ARPLS-GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92" class="sect4"><span class="enumeration_section">67.4.1</span> ADD_FILE过程</h4>
                  <div>
                     <p>此过程将文件添加到文件组的版本。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92__GUID-011B3B14-212F-4CB9-84E9-914696D6F453">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.ADD_FILE（file_group_name IN VARCHAR2，file_name IN VARCHAR2，file_type IN VARCHAR2 DEFAULT NULL，file_directory IN VARCHAR2 DEFAULT NULL，version_name IN VARCHAR2 DEFAULT NULL，注释IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92__GUID-41738758-A03D-4925-AA6D-D76D7CB7A41A">参数</p>
                        <div class="tblformal" id="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92__GUID-73B8263C-154E-4B0B-B339-373CC55A18E7">
                           <p class="titleintable">表67-3 ADD_FILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_FILE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.ADD_FILE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d426473e1059">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d426473e1062">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e1067" headers="d426473e1059 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e1067 d426473e1062 ">
                                       <p>包含版本的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e1088" headers="d426473e1059 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e1088 d426473e1062 ">
                                       <p>要添加到版本的文件的名称。版本中的每个文件名都必须是唯一的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e1096" headers="d426473e1059 ">
                                       <p><code class="codeph">文件类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e1096 d426473e1062 ">
                                       <p>文件类型。以下是保留的文件类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>如果文件是数据文件，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">'DATAFILE'</pre></li>
                                          <li>
                                             <p>如果文件是数据泵导出转储文件，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">'DUMPSET'</pre><p>导入数据泵导出转储文件时，将填充数据泵元数据。</p>
                                          </li>
                                          <li>
                                             <p>如果该文件是数据泵导出日志文件，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">'DATAPUMPLOG'</pre></li>
                                       </ul>
                                       <p>如果文件类型不是保留文件类型之一，则输入文件类型的文本描述，或指定<code class="codeph">NULL</code>以省略文件类型描述。
                                       </p>
                                       <p>有关保留文件类型的更多信息，请参见<span class="q">“ <a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e1143" headers="d426473e1059 ">
                                       <p><code class="codeph">file_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e1143 d426473e1062 ">
                                       <p>与包含该文件的目录对应的目录对象的名称。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用该版本的缺省目录对象。
                                       </p>
                                       <p>如果版本存在<code class="codeph">NULL</code>且没有缺省目录对象，则该过程将使用文件组的缺省目录对象。
                                       </p>
                                       <p>如果版本或文件组存在<code class="codeph">NULL</code>且没有缺省目录对象，则该过程会引发错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e1166" headers="d426473e1059 ">
                                       <p><code class="codeph">VERSION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e1166 d426473e1062 ">
                                       <p>添加文件的版本的名称。</p>
                                       <p>如果将正整数指定为<code class="codeph">VARCHAR2</code>值，则将整数解释为版本号。例如，如果指定<code class="codeph">'1'</code> ，则将文件添加到文件组的版本1中。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用具有文件组的最新创建时间的版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e1187" headers="d426473e1059 ">
                                       <p><code class="codeph">评论</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e1187 d426473e1062 ">
                                       <p>关于正在添加的文件的评论</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92__GUID-D75220B6-46D7-4673-8290-CE7D11046E54">使用说明</p>
                        <p>要使用两种运行此过程<code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code>或<code class="codeph">'DUMPSET'</code>为指定<code class="codeph">file_type</code>参数，用户必须满足以下要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>具有导入Data Pump导出转储文件的适当权限</p>
                           </li>
                           <li>
                              <p>对包含Data Pump导出转储文件的目录对象具有<code class="codeph">READ</code>特权</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9BD99B43-3175-46AD-81E2-ACBEBBB2BA92__GUID-611892D3-B58D-4937-8DE6-43F7F3F20383">
                           <p class="notep1">也可以看看：</p>
                           <p>有关数据泵权限的更多信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle数据库实用程序</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS837"></a><a id="ARPLS66367"></a><a id="ARPLS66367"></a><a id="ARPLS837"></a><div class="props_rev_3"><a id="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B" name="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B"></a><h4 id="ARPLS-GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B" class="sect4"><span class="enumeration_section">67.4.2</span> ALTER_FILE过程</h4>
                  <div>
                     <p>此过程会更改文件组版本中的文件。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B__GUID-3EB45DD2-9691-4578-9978-BECFD70171D6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.ALTER_FILE（file_group_name IN VARCHAR2，file_name IN VARCHAR2，version_name IN VARCHAR2 DEFAULT NULL，new_file_name IN VARCHAR2 DEFAULT NULL，new_file_directory IN VARCHAR2 DEFAULT NULL，new_file_type IN VARCHAR2 DEFAULT NULL，remove_file_type IN VARCHAR2 DEFAULT'N'，new_comments IN VARCHAR2 DEFAULT NULL， remove_comments IN VARCHAR2 DEFAULT'N'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B__GUID-D1C93484-FD36-4E03-8DA4-C86018243791">参数</p>
                        <div class="tblformal" id="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B__GUID-2EDDBC35-51D2-43E8-A731-4940F9D402E6">
                           <p class="titleintable">表67-4 ALTER_FILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_FILE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.ALTER_FILE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d426473e1341">参数</th>
                                    <th align="left" valign="bottom" width="72%" id="d426473e1344">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1349" headers="d426473e1341 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1349 d426473e1344 ">
                                       <p>包含版本的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1370" headers="d426473e1341 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1370 d426473e1344 ">
                                       <p>版本中要更改的文件的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1378" headers="d426473e1341 ">
                                       <p><code class="codeph">VERSION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1378 d426473e1344 ">
                                       <p>包含要更改的文件的版本的名称。</p>
                                       <p>如果将正整数指定为<code class="codeph">VARCHAR2</code>值，则将整数解释为版本号。例如，如果指定了<code class="codeph">'1'</code> ，则更改文件组的版本1中的文件。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用具有文件组的最新创建时间的版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1399" headers="d426473e1341 ">
                                       <p><code class="codeph">new_file_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1399 d426473e1344 ">
                                       <p>如果正在更改文件名，则为文件的新名称。版本中的每个文件名都必须是唯一的。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改文件名。
                                       </p>
                                       <p><span class="bold">注意：</span>如果指定了非<code class="codeph">NULL</code>新文件名，则此过程将更改数据字典中文件名的元数据，但不会更改硬盘上的文件名。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1419" headers="d426473e1341 ">
                                       <p><code class="codeph">new_file_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1419 d426473e1344 ">
                                       <p>如果正在更改目录对象，则与包含该文件的目录对应的目录对象的新名称。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改目录对象名称。
                                       </p>
                                       <p><span class="bold">注意：</span>如果指定了非<code class="codeph">NULL</code>新文件目录，则此过程将更改数据字典中文件目录的元数据，但不会更改硬盘上的文件目录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1439" headers="d426473e1341 ">
                                       <p><code class="codeph">new_file_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1439 d426473e1344 ">
                                       <p>文件类型。以下是保留的文件类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>如果文件是数据文件，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">'DATAFILE'</pre></li>
                                          <li>
                                             <p>如果文件是数据泵导出转储文件，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">'DUMPSET'</pre></li>
                                          <li>
                                             <p>如果该文件是数据泵导出日志文件，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">'DATAPUMPLOG'</pre></li>
                                       </ul>
                                       <p>如果文件类型不是保留文件类型之一，则输入文件类型的文本描述。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改文件类型。
                                       </p>
                                       <p><span class="bold">另请参阅：</span> <span class="q">“ <a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a> ”</span>以获取有关保留文件类型的更多信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1488" headers="d426473e1341 ">
                                       <p><code class="codeph">remove_file_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1488 d426473e1344 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将删除文件类型。如果<code class="codeph">Y</code>和<code class="codeph">new_file_type</code>参数为非<code class="codeph">NULL</code> ，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会删除文件类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1513" headers="d426473e1341 ">
                                       <p><code class="codeph">new_comments</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1513 d426473e1344 ">
                                       <p>有关正在更改的文件的新注释。如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的注释替换现有注释。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改现有注释。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d426473e1529" headers="d426473e1341 ">
                                       <p><code class="codeph">remove_comments</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d426473e1529 d426473e1344 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将删除该文件的注释。如果<code class="codeph">Y</code>和<code class="codeph">new_comments</code>参数为非<code class="codeph">NULL</code> ，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会更改现有注释。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B__GUID-EF66A815-5169-4A49-A5EA-0323B2A1F2C0">使用说明</p>
                        <p>如果文件类型更改为<code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code>或<code class="codeph">'DUMPSET'</code> ，则会填充文件的数据泵元数据。如果文件类型已从<code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code>或<code class="codeph">'DUMPSET'</code>更改， <code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code>清除该文件的数据泵元数据。
                        </p>
                        <p>要使用为<code class="codeph">new_file_type</code>参数指定的<code class="codeph">DBMS_FILE_GROUP.EXPORT_DUMP_FILE</code>或<code class="codeph">'DUMPSET'</code>运行此过程，用户必须满足以下要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>具有导入Data Pump导出转储文件的适当权限</p>
                           </li>
                           <li>
                              <p>对包含Data Pump导出转储文件的目录对象具有<code class="codeph">READ</code>特权</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9170510B-9EC1-484E-8241-356F3E8EDE5B__GUID-91376CEA-9274-4874-978C-086E734EE3A2">
                           <p class="notep1">也可以看看：</p>
                           <p>有关数据泵权限的更多信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle数据库实用程序</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS838"></a><a id="ARPLS66368"></a><a id="ARPLS66368"></a><a id="ARPLS838"></a><div class="props_rev_3"><a id="GUID-C7BF3B80-5370-49F5-A058-CD598F387766" name="GUID-C7BF3B80-5370-49F5-A058-CD598F387766"></a><h4 id="ARPLS-GUID-C7BF3B80-5370-49F5-A058-CD598F387766" class="sect4"><span class="enumeration_section">67.4.3</span> ALTER_FILE_GROUP过程</h4>
                  <div>
                     <p>此过程会更改文件组。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C7BF3B80-5370-49F5-A058-CD598F387766__GUID-B45FAC21-23F2-4151-A04A-858EA71F2E39">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.ALTER_FILE_GROUP（file_group_name IN VARCHAR2，keep_files IN VARCHAR2 DEFAULT NULL，min_versions IN NUMBER DEFAULT NULL，max_versions IN NUMBER DEFAULT NULL，retention_days IN NUMBER DEFAULT NULL，new_default_directory IN VARCHAR2 DEFAULT NULL，remove_default_directory IN VARCHAR2 DEFAULT'N'，new_comments IN VARCHAR2 DEFAULT NULL，remove_comments IN VARCHAR2 DEFAULT'N'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C7BF3B80-5370-49F5-A058-CD598F387766__GUID-2510B87D-B618-44C3-9C82-B46031DD80BD">参数</p>
                        <div class="tblformal" id="GUID-C7BF3B80-5370-49F5-A058-CD598F387766__GUID-72ACFB1E-9FC6-47F3-AB8A-F35AE74BE1D6">
                           <p class="titleintable">表67-5 ALTER_FILE_GROUP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_FILE_GROUP过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.ALTER_FILE_GROUP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d426473e1713">参数</th>
                                    <th align="left" valign="bottom" width="64%" id="d426473e1716">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1721" headers="d426473e1713 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1721 d426473e1716 ">
                                       <p>要更改的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1742" headers="d426473e1713 ">
                                       <p><code class="codeph">keep_files</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1742 d426473e1716 ">
                                       <p>如果为<code class="codeph">Y</code> ，则在删除或清除文件组或文件组的版本时，文件组中的文件将保留在硬盘上。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则在删除或清除文件组或文件组的版本时，将从硬盘中删除文件组中的文件。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则不更改此参数。
                                       </p>
                                       <p><span class="bold">注意：</span>如果由于<code class="codeph">DROP</code> <code class="codeph">USER</code> <code class="codeph">CASCADE</code>语句而删除了文件组，则此参数的设置将确定是否从硬盘中删除文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1776" headers="d426473e1713 ">
                                       <p><code class="codeph">min_versions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1776 d426473e1716 ">
                                       <p>要保留的最小版本数。指定的值必须大于或等于<code class="codeph">1</code> 。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改文件组的<code class="codeph">min_versions</code>设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1795" headers="d426473e1713 ">
                                       <p><code class="codeph">max_versions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1795 d426473e1716 ">
                                       <p>要保留的最大版本数。指定的值必须大于或等于为<code class="codeph">min_versions</code>指定的值。当版本数超过指定的<code class="codeph">max_versions</code> ，将清除最旧的版本。
                                       </p>
                                       <p>指定<code class="codeph">DBMS_FILE_GROUP.INFINITE</code> ，不限制版本数。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改文件组的<code class="codeph">max_versions</code>设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1822" headers="d426473e1713 ">
                                       <p><code class="codeph">retention_days</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1822 d426473e1716 ">
                                       <p>保留版本的最大天数。指定的值必须大于或等于<code class="codeph">0</code> （零）。当版本的年龄超过指定的<code class="codeph">retention_days</code>且版本多于<code class="codeph">min_versions</code>指定的版本时，将清除该版本。通过从当前时间减去创建时间来计算版本的年龄。
                                       </p>
                                       <p>十进制值可以指定一天的一小部分。例如， <code class="codeph">1.25</code>指定一天六小时。
                                       </p>
                                       <p>指定<code class="codeph">DBMS_FILE_GROUP.INFINITE</code> ，不限制版本可以存在的天数。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改文件组的<code class="codeph">retention_days</code>设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1857" headers="d426473e1713 ">
                                       <p><code class="codeph">new_default_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1857 d426473e1716 ">
                                       <p>如果在添加文件时未指定目录，则在将文件添加到文件组时使用的默认目录对象，并且没有为该版本指定默认目录对象。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改默认目录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1870" headers="d426473e1713 ">
                                       <p><code class="codeph">remove_default_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1870 d426473e1716 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将删除文件组的默认目录。如果<code class="codeph">Y</code>和<code class="codeph">new_default_directory</code>参数设置为非<code class="codeph">NULL</code>值，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会删除文件组的默认目录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1895" headers="d426473e1713 ">
                                       <p><code class="codeph">new_comments</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1895 d426473e1716 ">
                                       <p>关于文件组的评论。如果为非<code class="codeph">NULL</code> ，则新注释将替换文件组的现有注释。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改现有注释。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e1911" headers="d426473e1713 ">
                                       <p><code class="codeph">remove_comments</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e1911 d426473e1716 ">
                                       <p>如果为<code class="codeph">Y</code> ，则删除文件组的注释。如果<code class="codeph">Y</code>和<code class="codeph">new_comments</code>参数设置为非<code class="codeph">NULL</code>值，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会更改文件组的注释。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C7BF3B80-5370-49F5-A058-CD598F387766__GUID-6BB5B2F3-406B-41CC-A717-F668E367E7AD">使用说明</p>
                        <p>如果<code class="codeph">min_versions</code>设置为<code class="codeph">1</code> ，则在添加新版本时可以清除文件组的唯一版本。如果在清除现有版本时未完成新版本的添加，则可能存在一段时间没有可用的文件组版本。因此，如果文件组的版本必须始终可用，请将<code class="codeph">min_versions</code>设置为至少<code class="codeph">2</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS839"></a><a id="ARPLS66369"></a><a id="ARPLS66369"></a><a id="ARPLS839"></a><div class="props_rev_3"><a id="GUID-3FFCB56A-4EA0-4473-A591-04519358E339" name="GUID-3FFCB56A-4EA0-4473-A591-04519358E339"></a><h4 id="ARPLS-GUID-3FFCB56A-4EA0-4473-A591-04519358E339" class="sect4"><span class="enumeration_section">67.4.4</span> ALTER_VERSION过程</h4>
                  <div>
                     <p>此过程会更改文件组的版本。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3FFCB56A-4EA0-4473-A591-04519358E339__GUID-1E7F2427-FFF3-4DBD-9F12-E09C3844C4EE">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.ALTER_VERSION（file_group_name IN VARCHAR2，version_name IN VARCHAR2 DEFAULT NULL，new_version_name IN VARCHAR2 DEFAULT NULL，remove_version_name IN VARCHAR2 DEFAULT'N'，new_default_directory IN VARCHAR2 DEFAULT NULL，remove_default_directory IN VARCHAR2 DEFAULT'N'，new_comments IN VARCHAR2 DEFAULT NULL，remove_comments IN VARCHAR2 DEFAULT'N'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3FFCB56A-4EA0-4473-A591-04519358E339__GUID-D7FE398B-2E40-4379-906C-79BAB9A8A58B">参数</p>
                        <div class="tblformal" id="GUID-3FFCB56A-4EA0-4473-A591-04519358E339__GUID-6AA4B262-840F-4159-B751-E739E72488E8">
                           <p class="titleintable">表67-6 ALTER_VERSION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_VERSION过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.ALTER_VERSION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d426473e2066">参数</th>
                                    <th align="left" valign="bottom" width="64%" id="d426473e2069">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2074" headers="d426473e2066 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2074 d426473e2069 ">
                                       <p>包含版本的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2095" headers="d426473e2066 ">
                                       <p><code class="codeph">VERSION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2095 d426473e2069 ">
                                       <p>要更改的版本的名称。</p>
                                       <p>如果将正整数指定为<code class="codeph">VARCHAR2</code>值，则将整数解释为版本号。例如，如果指定了<code class="codeph">'1'</code> ，则更改文件组的版本1。
                                       </p>
                                       <p>如果指定了<code class="codeph">'*'</code> ，则该过程会更改所有版本，并且<code class="codeph">new_version_name</code>参数必须为<code class="codeph">NULL</code> 。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用具有文件组的最新创建时间的版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2127" headers="d426473e2066 ">
                                       <p><code class="codeph">new_version_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2127 d426473e2069 ">
                                       <p>版本的新名称。不要指定架构。</p>
                                       <p>指定的版本名称不能是正整数或星号（ <code class="codeph">'*'</code> ）。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改版本名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2145" headers="d426473e2066 ">
                                       <p><code class="codeph">remove_version_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2145 d426473e2069 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将删除版本名称。如果删除了版本名称，则必须使用版本号来管理版本。如果<code class="codeph">Y</code>和<code class="codeph">new_version_name</code>参数设置为非<code class="codeph">NULL</code>值，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会删除版本名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2170" headers="d426473e2066 ">
                                       <p><code class="codeph">new_default_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2170 d426473e2069 ">
                                       <p>如果在添加文件时未指定目录，则将文件添加到版本时使用的默认目录对象。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改默认目录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2183" headers="d426473e2066 ">
                                       <p><code class="codeph">remove_default_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2183 d426473e2069 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将删除默认目录。如果<code class="codeph">Y</code>和<code class="codeph">new_default_directory</code>参数设置为非<code class="codeph">NULL</code>值，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会删除默认目录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2208" headers="d426473e2066 ">
                                       <p><code class="codeph">new_comments</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2208 d426473e2069 ">
                                       <p>关于版本的评论。如果为非<code class="codeph">NULL</code> ，则新注释将替换该版本的现有注释。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不会更改注释。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d426473e2224" headers="d426473e2066 ">
                                       <p><code class="codeph">remove_comments</code></p>
                                    </td>
                                    <td align="left" valign="top" width="64%" headers="d426473e2224 d426473e2069 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将删除该版本的注释。如果<code class="codeph">Y</code>和<code class="codeph">new_comments</code>参数设置为非<code class="codeph">NULL</code>值，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程不会删除该版本的注释。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS840"></a><a id="ARPLS66370"></a><a id="ARPLS66370"></a><a id="ARPLS840"></a><div class="props_rev_3"><a id="GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5" name="GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5"></a><h4 id="ARPLS-GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5" class="sect4"><span class="enumeration_section">67.4.5</span> CREATE_FILE_GROUP过程</h4>
                  <div>
                     <p>此过程创建一个文件组。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5__GUID-69DA86F4-040B-4630-9ECC-A0083CD1F287">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.CREATE_FILE_GROUP（file_group_name IN VARCHAR2，keep_files IN VARCHAR2 DEFAULT'Y'，min_versions IN NUMBER DEFAULT 2，max_versions IN NUMBER DEFAULT DBMS_FILE_GROUP.INFINITE，retention_days IN NUMBER DEFAULT DBMS_FILE_GROUP.INFINITE，default_directory IN VARCHAR2 DEFAULT NULL，comments IN VARCHAR2 DEFAULT NULL） ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5__GUID-890B9DD9-50B5-44B0-894A-84AA89C76122">参数</p>
                        <div class="tblformal" id="GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5__GUID-FAE021D1-2106-4345-B489-17B4C46CFDCE">
                           <p class="titleintable">表67-7 CREATE_FILE_GROUP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_FILE_GROUP过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.CREATE_FILE_GROUP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d426473e2363">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d426473e2366">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2371" headers="d426473e2363 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2371 d426473e2366 ">
                                       <p>文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2392" headers="d426473e2363 ">
                                       <p><code class="codeph">keep_files</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2392 d426473e2366 ">
                                       <p>如果为<code class="codeph">Y</code> ，则在删除或清除文件组或文件组的版本时，文件组中的文件将保留在硬盘上。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则在删除或清除文件组或文件组的版本时，将从硬盘中删除文件组中的文件。
                                       </p>
                                       <p><span class="bold">注意：</span>如果由于<code class="codeph">DROP</code> <code class="codeph">USER</code> <code class="codeph">CASCADE</code>语句而删除了文件组，则此参数的设置将确定是否从硬盘中删除文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2421" headers="d426473e2363 ">
                                       <p><code class="codeph">min_versions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2421 d426473e2366 ">
                                       <p>要保留的最小版本数。指定的值必须大于或等于<code class="codeph">1</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2432" headers="d426473e2363 ">
                                       <p><code class="codeph">max_versions</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2432 d426473e2366 ">
                                       <p>要保留的最大版本数。指定的值必须大于或等于为<code class="codeph">min_versions</code>指定的值。当版本数超过指定的<code class="codeph">max_versions</code> ，将清除最旧的版本。
                                       </p>
                                       <p>指定<code class="codeph">DBMS_FILE_GROUP.INFINITE</code> ，不限制版本数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2451" headers="d426473e2363 ">
                                       <p><code class="codeph">retention_days</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2451 d426473e2366 ">
                                       <p>保留版本的最大天数。指定的值必须大于或等于<code class="codeph">0</code> （零）。当版本的年龄超过指定的<code class="codeph">retention_days</code>且版本多于<code class="codeph">min_versions</code>指定的版本时，将清除该版本。通过从当前时间减去创建时间来计算版本的年龄。
                                       </p>
                                       <p>十进制值可以指定一天的一小部分。例如， <code class="codeph">1.25</code>指定一天六小时。
                                       </p>
                                       <p>指定<code class="codeph">DBMS_FILE_GROUP.INFINITE</code> ，不限制版本可以存在的天数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2478" headers="d426473e2363 ">
                                       <p><code class="codeph">default_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2478 d426473e2366 ">
                                       <p>如果在添加文件时未指定目录，则在将文件添加到文件组时使用的默认目录对象，并且没有为该版本指定默认目录对象。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2486" headers="d426473e2363 ">
                                       <p><code class="codeph">评论</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2486 d426473e2366 ">
                                       <p>有关正在创建的文件组的注释。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE0CB05C-8CF0-4598-A1AF-39E5B7F844A5__GUID-7B963A86-E030-49DA-8FAE-ABE2D2425DF4">使用说明</p>
                        <p>如果<code class="codeph">min_versions</code>设置为<code class="codeph">1</code> ，则在添加新版本时可以清除文件组的唯一版本。如果在清除现有版本时未完成新版本的添加，则可能存在一段时间没有可用的文件组版本。因此，如果文件组的版本必须始终可用，请将<code class="codeph">min_versions</code>设置为至少<code class="codeph">2</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS841"></a><a id="ARPLS66371"></a><a id="ARPLS66371"></a><a id="ARPLS841"></a><div class="props_rev_3"><a id="GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48" name="GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48"></a><h4 id="ARPLS-GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48" class="sect4"><span class="enumeration_section">67.4.6</span> CREATE_VERSION过程</h4>
                  <div>
                     <p>此过程创建文件组的版本。</p>
                     <div class="section">
                        <p>此过程自动运行<code class="codeph">PURGE_FILE_GROUP</code>过程。因此，可以根据文件组的保留策略清除版本。
                        </p>
                        <p>此过程已超载。该过程的一个版本包含<code class="codeph">OUT</code>参数<code class="codeph">version_out</code> ，而另一个版本不包含。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48__GUID-2E2A971C-E5E9-4C24-B24F-6212B3F3F220">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.CREATE_VERSION（file_group_name IN VARCHAR2，version_name IN VARCHAR2 DEFAULT NULL，default_directory IN VARCHAR2 DEFAULT NULL，注释IN VARCHAR2 DEFAULT NULL）; DBMS_FILE_GROUP.CREATE_VERSION（file_group_name IN VARCHAR2，version_name IN VARCHAR2 DEFAULT NULL，default_directory IN VARCHAR2 DEFAULT NULL，注释IN VARCHAR2 DEFAULT NULL，version_out OUT VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48__GUID-173A9C89-D776-43EE-9120-4FFEAC2361AA">参数</p>
                        <div class="tblformal" id="GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48__GUID-4A7A2D44-F895-4A4B-9585-8D178D62A0E9">
                           <p class="titleintable">表67-8 CREATE_VERSION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_VERSION过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.CREATE_VERSION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d426473e2638">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d426473e2641">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2646" headers="d426473e2638 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2646 d426473e2641 ">
                                       <p>添加新版本的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2667" headers="d426473e2638 ">
                                       <p><code class="codeph">VERSION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2667 d426473e2641 ">
                                       <p>正在创建的版本的名称。不要指定架构。</p>
                                       <p>指定的版本名称不能是正整数，因为在创建版本时会自动生成版本号。指定的版本名称不能是星号（ <code class="codeph">'*'</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2680" headers="d426473e2638 ">
                                       <p><code class="codeph">default_directory</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2680 d426473e2641 ">
                                       <p>如果在添加文件时未指定目录，则将文件添加到版本时使用的默认目录对象。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2688" headers="d426473e2638 ">
                                       <p><code class="codeph">评论</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2688 d426473e2641 ">
                                       <p>有关正在创建的版本的评论</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d426473e2696" headers="d426473e2638 ">
                                       <p><code class="codeph">version_out</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d426473e2696 d426473e2641 ">
                                       <p>如果<code class="codeph">version_name</code>参数设置为非<code class="codeph">NULL</code>值，则此参数包含指定的版本名称。
                                       </p>
                                       <p>如果<code class="codeph">version_name</code>参数设置为<code class="codeph">NULL</code> ，则此参数包含生成的版本号。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-0A4BF475-7692-49BD-A4A0-DBF9DA819E48__GUID-95788F72-6DFD-4E21-9463-BF10A5AA7BA7">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="DBMS_FILE_GROUP.html#GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B" title="此过程使用文件组的保留策略清除文件组。">PURGE_FILE_GROUP程序</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS842"></a><a id="ARPLS66372"></a><a id="ARPLS66372"></a><a id="ARPLS842"></a><div class="props_rev_3"><a id="GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7" name="GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7"></a><h4 id="ARPLS-GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7" class="sect4"><span class="enumeration_section">67.4.7</span> DROP_FILE_GROUP过程</h4>
                  <div>
                     <p>此过程将删除文件组。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7__GUID-CACDA3E0-7098-43F8-A985-FBE536F77D18">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.DROP_FILE_GROUP（file_group_name IN VARCHAR2，keep_files IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7__GUID-83AE5A6E-0E08-4ACC-8719-DCB34A8F2897">参数</p>
                        <div class="tblformal" id="GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7__GUID-6967BDE9-6590-40C9-846C-B37AF1AD34CF">
                           <p class="titleintable">表67-9 DROP_FILE_GROUP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_FILE_GROUP过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.DROP_FILE_GROUP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d426473e2840">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d426473e2843">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e2848" headers="d426473e2840 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e2848 d426473e2843 ">
                                       <p>要删除的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e2869" headers="d426473e2840 ">
                                       <p><code class="codeph">keep_files</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e2869 d426473e2843 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将文件保留在硬盘上的文件组中。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程从硬盘中删除文件组中的文件。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用文件组的默认保留文件属性。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-39FE9F6D-2565-42F1-AB87-B8F4C57ED1A7__GUID-54B97750-1D4F-4275-B15D-30E2FD2F8B0E">使用说明</p>
                        <p>如果此过程删除硬盘上的文件，则运行该过程的用户必须对包含这些文件的目录对象具有<code class="codeph">WRITE</code>特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS843"></a><a id="ARPLS66373"></a><a id="ARPLS66373"></a><a id="ARPLS843"></a><div class="props_rev_3"><a id="GUID-4691D2CE-EF61-45D3-908B-2367A3488B08" name="GUID-4691D2CE-EF61-45D3-908B-2367A3488B08"></a><h4 id="ARPLS-GUID-4691D2CE-EF61-45D3-908B-2367A3488B08" class="sect4"><span class="enumeration_section">67.4.8</span> DROP_VERSION过程</h4>
                  <div>
                     <p>此过程将删除文件组的版本。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4691D2CE-EF61-45D3-908B-2367A3488B08__GUID-42487622-1466-46DA-ABC4-77F4C3A41C52">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.DROP_VERSION（file_group_name IN VARCHAR2，version_name IN VARCHAR2 DEFAULT NULL，keep_files IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4691D2CE-EF61-45D3-908B-2367A3488B08__GUID-2962ACF1-E285-4085-9B99-14CA077D6102">参数</p>
                        <div class="tblformal" id="GUID-4691D2CE-EF61-45D3-908B-2367A3488B08__GUID-D1866F11-B577-49AB-8E54-3C6D2B9E6E96">
                           <p class="titleintable">表67-10 DROP_VERSION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_VERSION过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.DROP_VERSION subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d426473e3012">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d426473e3015">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3020" headers="d426473e3012 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3020 d426473e3015 ">
                                       <p>包含版本的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3041" headers="d426473e3012 ">
                                       <p><code class="codeph">VERSION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3041 d426473e3015 ">
                                       <p>要删除的版本的名称。</p>
                                       <p>如果将正整数指定为<code class="codeph">VARCHAR2</code>值，则将整数解释为版本号。例如，如果指定了<code class="codeph">'1'</code> ，则删除文件组的版本1。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用具有最早创建时间的版本的文件组。
                                       </p>
                                       <p>如果是<code class="codeph">'*'</code> ，则该过程将删除所有版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3067" headers="d426473e3012 ">
                                       <p><code class="codeph">keep_files</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3067 d426473e3015 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将保留硬盘版本中的文件。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程将从硬盘中删除该版本中的文件。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用文件组的默认保留文件属性。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4691D2CE-EF61-45D3-908B-2367A3488B08__GUID-E75B3732-19F0-4D89-8B7C-9F8915E15045">使用说明</p>
                        <p>如果此过程删除硬盘上的文件，则运行该过程的用户必须对包含这些文件的目录对象具有<code class="codeph">WRITE</code>特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS844"></a><a id="ARPLS66374"></a><a id="ARPLS66374"></a><a id="ARPLS844"></a><div class="props_rev_3"><a id="GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701" name="GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701"></a><h4 id="ARPLS-GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701" class="sect4"><span class="enumeration_section">67.4.9</span> GRANT_OBJECT_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程将文件组的对象权限授予用户。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701__GUID-1D1EA1E5-4621-4497-BF17-26CF9EC6CF0A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.GRANT_OBJECT_PRIVILEGE（object_name IN VARCHAR2，特权IN BINARY_INTEGER，被授权者IN VARCHAR2，grant_option IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701__GUID-94412221-C692-414C-9C12-914864ED3381">参数</p>
                        <div class="tblformal" id="GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701__GUID-430F2788-C7A1-4634-AE4F-09CF1558D466">
                           <p class="titleintable">表67-11 GRANT_OBJECT_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GRANT_OBJECT_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.GRANT_OBJECT_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d426473e3209">参数</th>
                                    <th align="left" valign="bottom" width="78%" id="d426473e3212">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3217" headers="d426473e3209 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3217 d426473e3212 ">
                                       <p>授予权限的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3238" headers="d426473e3209 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3238 d426473e3212 ">
                                       <p>指定权限的常量。有效权限请参见<span class="q">“ <a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3260" headers="d426473e3209 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3260 d426473e3212 ">
                                       <p>授予权限的用户或角色的名称。指定的用户不能是该对象的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3268" headers="d426473e3209 ">
                                       <p><code class="codeph">grant_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3268 d426473e3212 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则授予指定权限的指定用户可以将此权限授予其他用户。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则授予指定权限的指定用户无法将此权限授予其他用户。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F27B8E54-651D-4585-9F27-31DD8ABE5701__GUID-9B2D4EA5-11F1-4C68-AE76-CDD391C2D3D5">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>是授予权限的对象的所有者</p>
                           </li>
                           <li>
                              <p>与授予选项授予的权限具有相同的权限</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS845"></a><a id="ARPLS66375"></a><a id="ARPLS66375"></a><a id="ARPLS845"></a><div class="props_rev_3"><a id="GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE" name="GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE"></a><h4 id="ARPLS-GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE" class="sect4"><span class="enumeration_section">67.4.10</span> GRANT_SYSTEM_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程为用户授予文件组操作的系统权限。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE__GUID-74466A1E-35E5-436F-A293-E7AF6E4CC5C2">
                           <p class="notep1">注意：</p>
                           <p>当您对<code class="codeph">"ANY"</code>对象授予权限（例如， <code class="codeph">ALTER_ANY_RULE</code> ），并且初始化参数<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>设置为<code class="codeph">FALSE</code> ，您将授予用户对除<code class="codeph">SYS</code>模式之外的所有模式中该类型对象的访问权限。默认情况下，初始化参数<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>设置为<code class="codeph">FALSE</code> 。</p>
                           <p>如果要授予对<code class="codeph">SYS</code>模式中对象的访问权限，则可以在对象上显式授予对象权限。或者，您可以将<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>初始化参数设置为<code class="codeph">TRUE</code> 。然后，在<code class="codeph">"ANY"</code>对象上授予的权限允许访问任何模式，包括<code class="codeph">SYS</code> 。请谨慎设置<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>初始化参数。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE__GUID-01000274-1E57-448E-8295-F505F1B20903">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.GRANT_SYSTEM_PRIVILEGE（特权IN BINARY_INTEGER，被授予者IN VARCHAR2，grant_option IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE__GUID-CC5B51FB-F26A-48F2-95A5-F31B60A62951">参数</p>
                        <div class="tblformal" id="GUID-AAE11BAD-6F8F-4D82-BFAD-2A7C15E5D0AE__GUID-EF18F9C4-34CA-4D99-82D9-387609CE6264">
                           <p class="titleintable">表67-12 GRANT_SYSTEM_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GRANT_SYSTEM_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.GRANT_SYSTEM_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d426473e3456">参数</th>
                                    <th align="left" valign="bottom" width="78%" id="d426473e3459">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3464" headers="d426473e3456 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3464 d426473e3459 ">
                                       <p>指定权限的常量。有效权限请参见<span class="q">“ <a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3486" headers="d426473e3456 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3486 d426473e3459 ">
                                       <p>授予权限的用户或角色的名称。无法指定运行该过程的用户。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e3494" headers="d426473e3456 ">
                                       <p><code class="codeph">grant_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e3494 d426473e3459 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则授予指定权限的指定用户可以将此权限授予其他用户。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则授予指定权限的指定用户无法将此权限授予其他用户。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS846"></a><a id="ARPLS66376"></a><a id="ARPLS66376"></a><a id="ARPLS846"></a><div class="props_rev_3"><a id="GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B" name="GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B"></a><h4 id="ARPLS-GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B" class="sect4"><span class="enumeration_section">67.4.11</span> PURGE_FILE_GROUP过程</h4>
                  <div>
                     <p>此过程使用文件组的保留策略清除文件组。</p>
                     <div class="section">
                        <p>文件组的保留策略由其对<code class="codeph">max_versions</code> ， <code class="codeph">min_versions</code>和<code class="codeph">retention_days</code>参数的设置确定。清除文件组时，将删除以下版本的文件组：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当版本按创建时间降序排序时，所有版本都大于文件组的<code class="codeph">max_versions</code>设置。因此，旧版本在较新版本之前被清除。
                              </p>
                           </li>
                           <li>
                              <p>除了清除版本之外，所有早于文件组<code class="codeph">retention_days</code>设置的版本都会导致版本数量低于文件组的<code class="codeph">min_versions</code>设置。
                              </p>
                           </li>
                        </ul>
                        <p>名为<code class="codeph">SYS.FGR$AUTOPURGE_JOB</code>的作业会根据作业的计划自动清除数据库中的所有文件组。您可以使用<code class="codeph">DBMS_SCHEDULER</code>程序包调整此作业的计划。或者，您可以创建一个定期运行<code class="codeph">PURGE_FILE_GROUP</code>过程的作业。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B__GUID-24DC2C29-9581-484F-9F26-CBEEC0E9D959">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.PURGE_FILE_GROUP（file_group_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B__GUID-4A60A107-3C77-46B3-9EE0-D661491AC530">参数</p>
                        <div class="tblformal" id="GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B__GUID-B9BDEC53-8346-447F-95E3-50829EC122AC">
                           <p class="titleintable">表67-13 PURGE_FILE_GROUP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE_FILE_GROUP过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.PURGE_FILE_GROUP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d426473e3663">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d426473e3666">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3671" headers="d426473e3663 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3671 d426473e3666 ">
                                       <p>文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>如果<code class="codeph">NULL</code>并且此过程由<code class="codeph">SYS</code>用户运行，则该过程将清除所有文件组。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-26E4CFE9-ADA0-46FE-AFE5-9239025D3D5B__GUID-BB37D876-4E16-4EA5-8419-17DA7A3F06A3">使用说明</p>
                        <p>如果此过程删除硬盘上的文件，则运行该过程的用户必须对包含这些文件的目录对象具有<code class="codeph">WRITE</code>特权。清除版本时删除文件，并且版本文件组的<code class="codeph">keep_files</code>参数设置为<code class="codeph">N</code>
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS847"></a><a id="ARPLS66377"></a><a id="ARPLS66377"></a><a id="ARPLS847"></a><div class="props_rev_3"><a id="GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6" name="GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6"></a><h4 id="ARPLS-GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6" class="sect4"><span class="enumeration_section">67.4.12</span> REMOVE_FILE过程</h4>
                  <div>
                     <p>此过程从文件组的版本中删除文件。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6__GUID-4E7024D4-BED2-41E2-8DE8-CBE195F54150">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.REMOVE_FILE（file_group_name IN VARCHAR2，file_name IN VARCHAR2，version_name IN VARCHAR2 DEFAULT NULL，keep_file IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6__GUID-94C7C6EC-A94D-4BCF-936A-2B1883A3B29D">参数</p>
                        <div class="tblformal" id="GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6__GUID-63F51ADF-7011-4EF5-A2F1-D6858282476B">
                           <p class="titleintable">表67-14 REMOVE_FILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_FILE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.REMOVE_FILE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d426473e3827">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d426473e3830">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3835" headers="d426473e3827 ">
                                       <p><code class="codeph">file_group_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3835 d426473e3830 ">
                                       <p>包含版本的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3856" headers="d426473e3827 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3856 d426473e3830 ">
                                       <p>要从版本中删除的文件的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3864" headers="d426473e3827 ">
                                       <p><code class="codeph">VERSION_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3864 d426473e3830 ">
                                       <p>从中删除文件的版本的名称。</p>
                                       <p>如果将正整数指定为<code class="codeph">VARCHAR2</code>值，则将整数解释为版本号。例如，如果指定了<code class="codeph">'1'</code> ，则从文件组的版本1中删除该文件。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用具有文件组的最新创建时间的版本。
                                       </p>
                                       <p>如果为<code class="codeph">'*'</code> ，则该过程将从所有版本中删除该文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d426473e3890" headers="d426473e3827 ">
                                       <p><code class="codeph">keep_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d426473e3890 d426473e3830 ">
                                       <p>如果为<code class="codeph">Y</code> ，则该过程将文件保留在硬盘上。
                                       </p>
                                       <p>如果为<code class="codeph">N</code> ，则该过程将从硬盘中删除该文件。
                                       </p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程使用文件组的默认保留文件属性。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C1FA524-B282-4CFC-973D-A8A97EB37AF6__GUID-23735280-9C1C-4BD4-915B-8B3CBEB767B9">使用说明</p>
                        <p>如果此过程删除硬盘上的文件，则运行该过程的用户必须对包含这些文件的目录对象具有<code class="codeph">WRITE</code>特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS848"></a><a id="ARPLS66378"></a><a id="ARPLS66378"></a><a id="ARPLS848"></a><div class="props_rev_3"><a id="GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448" name="GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448"></a><h4 id="ARPLS-GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448" class="sect4"><span class="enumeration_section">67.4.13</span> REVOKE_OBJECT_PRIVILEGE程序</h4>
                  <div>
                     <p>此过程撤消用户对文件组的对象权限。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448__GUID-1FE46D23-E60A-4D0F-B083-D805FB1A357F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.REVOKE_OBJECT_PRIVILEGE（object_name IN VARCHAR2，特权IN BINARY_INTEGER，revokee IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448__GUID-7AB01E8F-BAEF-4A0F-9D7C-29DB4C4FE53E">参数</p>
                        <div class="tblformal" id="GUID-6C385F2E-EF54-4D2D-8D7A-97236D412448__GUID-9904B8E4-7C7E-47AF-8D55-F4EB381887FD">
                           <p class="titleintable">表67-15 REVOKE_OBJECT_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REVOKE_OBJECT_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.REVOKE_OBJECT_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d426473e4032">参数</th>
                                    <th align="left" valign="bottom" width="81%" id="d426473e4035">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d426473e4040" headers="d426473e4032 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d426473e4040 d426473e4035 ">
                                       <p>撤消权限的文件组的名称，指定为<span class="italic"><code class="codeph">[schema_name.]file_group_name</code></span> 。例如，如果架构为<code class="codeph">hq_dba</code>且文件组名称为<code class="codeph">sales_tbs</code> ，则指定<code class="codeph">hq_dba.sales_tbs</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d426473e4061" headers="d426473e4032 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d426473e4061 d426473e4035 ">
                                       <p>指定权限的常量。有效权限请参见<span class="q">“ <a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d426473e4083" headers="d426473e4032 ">
                                       <p><code class="codeph">revokee</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d426473e4083 d426473e4035 ">
                                       <p>撤消权限的用户或角色的名称。无法指定拥有该对象的用户。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS849"></a><a id="ARPLS66379"></a><a id="ARPLS66379"></a><a id="ARPLS849"></a><div class="props_rev_3"><a id="GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165" name="GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165"></a><h4 id="ARPLS-GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165" class="sect4"><span class="enumeration_section">67.4.14</span> REVOKE_SYSTEM_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程撤消用户对文件组操作的系统特权。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165__GUID-20FD795C-0DE7-4603-A6BA-777472010F59">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FILE_GROUP.REVOKE_SYSTEM_PRIVILEGE（特权IN BINARY_INTEGER，撤销IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165__GUID-463D1449-7CB2-4085-AAF9-988B50D21C6A">参数</p>
                        <div class="tblformal" id="GUID-3AB56B6B-389B-41D2-8652-C42A7FBAD165__GUID-18DDBA6E-4FAA-4EA4-B919-570DEC898753">
                           <p class="titleintable">表67-16 REVOKE_SYSTEM_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REVOKE_SYSTEM_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_FILE_GROUP.REVOKE_SYSTEM_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d426473e4205">参数</th>
                                    <th align="left" valign="bottom" width="78%" id="d426473e4208">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e4213" headers="d426473e4205 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e4213 d426473e4208 ">
                                       <p>指定权限的常量。有效权限请参见<span class="q">“ <a href="DBMS_FILE_GROUP.html#GUID-26A431C3-4E75-4E5D-A30C-4B5E811C84A9" title="DBMS_FILE_GROUP包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀。例如，DBMS_FILE_GROUP.EXPORT_DUMP_FILE。">常量</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d426473e4235" headers="d426473e4205 ">
                                       <p><code class="codeph">revokee</code></p>
                                    </td>
                                    <td align="left" valign="top" width="78%" headers="d426473e4235 d426473e4208 ">
                                       <p>撤消权限的用户或角色的名称。无法指定运行该过程的用户。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
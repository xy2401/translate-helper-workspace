<html id="03697.sdo-geor-ra-ref.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The SDO_GEOR_RA package contains subprograms (functions and procedures) for raster algebra and analytic operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."></meta>
      <meta name="description" content="The SDO_GEOR_RA package contains subprograms (functions and procedures) for raster algebra and analytic operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."></meta>
      <title>SDO_GEOR_RA包参考</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="The SDO_GEOR_RA package contains subprograms (functions and procedures) for raster algebra and analytic operations related to GeoRaster. This chapter presents reference information, with one or more examples, for each subprogram."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SDO_GEOR_IP-reference-ref.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SDO_GEOR_UTL-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SDO_GEOR_IP-reference-ref.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SDO_GEOR_UTL-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SDO_GEOR_RA包参考</li>
            </ol>
            <a id="GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" name="GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333"></a><a id="GEORS1226"></a>
            
            <h2 id="GEORS-GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" class="sect2"><span class="enumeration_chapter">12</span> SDO_GEOR_RA包参考</h2>
         </header>
         <div class="ind">
            <div>
               <p>SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。</p>
               <p>要使用本章中的子程序，您应该了解<a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="本章介绍了栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询，基于单元格的更新或编辑，数学运算，分类，动态统计分析，逻辑运算及其制图建模中的应用。">Raster代数和分析中</a>描述的主要概念和技术。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02">SDO_GEOR_RA.diff</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-67FDA0FA-D055-4821-964F-600660861A72">SDO_GEOR_RA.findCells</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-B64A8557-B92D-4588-812D-2F767338EA68">SDO_GEOR_RA.isOverlap</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4">SDO_GEOR_RA.over</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-BB7A762E-E615-43AD-9D74-5E917D29F333">SDO_GEOR_RA.rasterMathOp</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E">SDO_GEOR_RA.rasterUpdate</a><br></li>
                  <li class="ulchildlink"><a href="sdo-geor-ra-ref.html#GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39">SDO_GEOR_RA.stack</a><br></li>
               </ul>
            </div>
            <a id="GEORS1227"></a><div class="props_rev_3"><a id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9" name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9"></a><h3 id="GEORS-GUID-D9DA6608-7D97-4428-B1B2-002C371846E9" class="sect3"><span class="enumeration_section">12.1</span> SDO_GEOR_RA.classify</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-8A94616F-603E-4958-ADE5-645D30579E0C">格式</p>
                     <p><span class="bold">在单个GeoRaster对象上操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inGeoRaster IN SDO_GEORASTER，expression IN VARCHAR2，rangeArray IN SDO_NUMBER_ARRAY，storageArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'false'，nodataValue IN NUMBER默认为0）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0，polygonClip IN VARCHAR2 DEFAULT'FALSE'）;</pre><p><span class="bold">在GeoRaster对象数组上的操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（georArray IN SDO_GEORASTER_ARRAY，表达式IN VARCHAR2，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_NUMBER_ARRAY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_NUMBER_ARRAY，表达IN VARCHAR2，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，无数据IN VARCHAR2 DEFAULT 'FALSE'，nodataValue IN NUMBER默认为0）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，表达IN VARCHAR2，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，无数据IN VARCHAR2 DEFAULT 'FALSE'，nodataValue IN NUMBER默认为0，polygonClip IN VARCHAR2 DEFAULT'FALSE'）;</pre><p><span class="bold">在光标指定的GeoRaster对象上的操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inGeoRasters IN SYS_REFCURSOR，expression IN VARCHAR2，rangeArray IN SDO_NUMBER_ARRAY，storageArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_NUMBER_ARRAY，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_GEOMETRY，expressionArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inGeoRasters IN SYS_REFCURSOR，cropArea IN SDO_NUMBER_ARRAY，表达IN VARCHAR2，rangeArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，无数据IN VARCHAR2 DEFAULT 'FALSE'，nodataValue IN NUMBER默认为0）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.classify（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_GEOMETRY，expressionArray IN SDO_NUMBER_ARRAY，valueArray IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0，polygonClip IN VARCHAR2 DEFAULT'FALSE'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-509E9132-2ED2-44F8-828F-E2D87D428CB8">描述</p>
                     <p>在输入的GeoRaster对象上应用指定的分类操作后生成新的GeoRaster对象。</p>
                     <p>三个输入GeoRaster对象或对象规范选项（SDO_GEORASTER，SDO_GEORASTER_ARRAY，SYS_REEFCURSOR）中的每一个都有几种格式。在每组格式中，您可以指定无裁剪区域或裁剪区域SDO_NUMBER_ARRAY或SDO_GEOMETRY。对于SDO_GEOMETRY裁剪区域，您可以指定多边形裁剪选项，输出可以是GeoRaster对象或BLOB。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-64227156-C23E-49A1-B85C-B631E6256899">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-693D8A39-F1B4-4E79-B0A2-33A12576A464"><!-- --></a> GeoRaster中的<a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-693D8A39-F1B4-4E79-B0A2-33A12576A464"><!-- --></a></dt>
                        <dd>
                           <p>输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-6A2DF0F1-682D-40CD-8F3C-A727B54A2639"><!-- --></a> georArray</dt>
                        <dd>
                           <p>一组GeoRaster对象。数据类型为SDO_GEOR_ARRAY，定义为<code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-0C04F9CF-A191-4F19-A298-F28E9D377F09"><!-- --></a> inGeoRasters</dt>
                        <dd>
                           <p>输入GeoRaster对象的光标（SYS_REFCURSOR类型）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-631EA601-BE62-42BD-9233-038B08E86D7A"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果数据类型为SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）将用作矩形裁剪区域，以生成输出GeoRaster对象。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则仅处理裁剪区域几何体内的单元格，并且裁剪区域几何体外的所有单元格都设置为零（0）。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">FALSE</code> ，则处理最小边界矩形内的所有单元格。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-AF7A14C3-3625-4AB3-992D-C9A19F1FBC43"><!-- --></a>表达式</dt>
                        <dd>
                           <p>用于对单元格值进行分类的算术表达式。有关指定此参数的详细信息，请参阅“使用说明”。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-3084B735-53CF-47E7-BA66-59A2ECF28B1C"><!-- --></a> rangeArray</dt>
                        <dd>
                           <p>一个数字数组，用于定义分类单元格值的范围。该数组必须至少包含一个元素。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-FF212AD5-AFED-49E9-8AB0-498CE6B7328F"><!-- --></a> valueArray</dt>
                        <dd>
                           <p>一个数字数组，用于定义每个范围的目标单元格值。元素的数量必须比<code class="codeph">rangeArray</code>的元素大1（也就是说，它的长度必须是<code class="codeph">rangeArray</code> +1）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-E1DC61E2-EE21-4BED-A926-792BDC5FD9F2"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-0BABB8C8-CB69-479E-8B65-F9FB9BFD7B0E"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-893567BB-04FF-465B-B98E-1F990A8E6B6B"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-7468E556-0087-44F0-8C1C-56C2E1CB4560"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-53512AF6-CE93-4F42-922A-492F0A1B333A"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-44D0AC19-1985-43E5-9FEB-85ECCB201F65"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>指定表达式求值中涉及的任何单元格值是否具有NODATA值，表达式将被计算为NODATA值;因此，输出GeoRaster对象中的相应单元格将设置为为<code class="codeph">nodataValue</code>参数指定的值。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规数据。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-58624E6C-2C3D-4A69-B567-6FFC3D4AE4B9"><!-- --></a> nodataValue</dt>
                        <dd>
                           <p>如果<code class="codeph">nodata</code>参数值为字符串<code class="codeph">TRUE</code>则用于设置NODATA单元格的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-551EC4DE-4196-4A91-B73C-8B7FA042A55E"><!-- --></a> polygonClip</dt>
                        <dd>
                           <p>如果<code class="codeph">cropArea</code>为null，则忽略。否则，字符串<code class="codeph">TRUE</code>会导致<code class="codeph">cropArea</code>几何体用于处理数据;字符串<code class="codeph">FALSE</code>或空值使<code class="codeph">cropArea</code>几何的最小边界矩形（MBR）用于处理数据。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-9DEE29EA-EA28-4CCD-8830-A1963B598F10"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-2D613864-48B6-4A8D-A58D-C98CAB4EE7B1">使用说明</p>
                     <p>此过程基于输入的GeoRaster对象或<code class="codeph">expression</code>参数（即算术表达式字符串）在GeoRaster对象或单个BLOB中生成新栅格。对于输出GeoRaster对象中的每个单元格，将根据输入GeoRaster对象中的相应单元格值计算<code class="codeph">expression</code> ，并使用以下算法计算输出GeoRaster对象的单元格值：</p><pre class="oac_no_warn" dir="ltr">if（ <span class="italic">表达式的</span>值&lt;rangeArray [0]）cellValue = valueArray [0] else if（ <span class="italic">expression</span> of <span class="italic">expression</span> &gt; = rangeArray [n-1]）cellValue = valueArray [n] else else rangeArray [m-1] &lt;= value of <span class="italic">表达式</span> &lt;rangeArray [m] cellValue = valueArray [m]</pre><p>在<code class="codeph">expression</code>计算中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">rangeArray</code>长度是<span class="italic">n</span></p>
                        </li>
                        <li>
                           <p><code class="codeph">valueArray</code>长度是<span class="italic">n</span> + 1</p>
                        </li>
                        <li>
                           <p>0 &lt; <span class="italic">m</span> &lt; <span class="italic">n</span> -1</p>
                        </li>
                     </ul>
                     <p>有关更多信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494" title="栅格代数通常用于栅格数据分析和GIS建模。在GeoRaster中，GeoRaster栅格代数语言支持栅格代数。">Raster代数语言</a> 。
                     </p>
                     <p>每个输入GeoRaster对象或对象规范选项（SDO_GEORASTER，SDO_GEORASTER_ARRAY，SYS_REFCURSOR）有多种格式。在每组格式中，您可以指定无裁剪区域或裁剪区域SDO_NUMBER_ARRAY或SDO_GEOMETRY。对于SDO_GEOMETRY裁剪区域，您可以指定多边形裁剪选项，输出可以是GeoRaster对象或BLOB。</p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D9DA6608-7D97-4428-B1B2-002C371846E9__GUID-0603FBF4-FCCB-4FF1-8988-649764569C39">例子</p>
                     <p>以下示例基于第一层的单元格值对单元格值进行分类。输出是GeoRaster对象。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; rangeArray SDO_NUMBER_ARRAY; valueArray SDO_NUMBER_ARRAY; BEGIN rangeArray：= sdo_number_array（70,80,90,100,110,120,130,140,150,160,170,180）; valueArray：= sdo_number_array（70,80,90,100,110,120,130,140,150,160,170,180,190）;从Georaster_table中选择georaster到geor，其中georid = 1;插入georaster_table值（5，sdo_geor.init（'rdt_1'，5））将georaster返回到geor1; sdo_geor_ra.classify（geor， '{0}'，rangeArray，valueArray，NULL，geor1）;更新georaster_table set georaster = geor1 where georid = 5;承诺;结束; /</pre><p>以下示例基于第一层的单元格值对单元格值进行分类。输出是BLOB。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; out_lob BLOB; outArea sdo_geometry; outWindow sdo_number_array; rangeArray SDO_NUMBER_ARRAY; valueArray SDO_NUMBER_ARRAY; BEGIN rangeArray：= sdo_number_array（70,80,90,100,110,120,130,140,150,160,170,180）; valueArray：= sdo_number_array（70,80,90,100,110,120,130,140,150,160,170,180,190）;从Georaster_table中选择georaster到geor，其中georid = 1; dbms_lob.create_temporary（out_lob，TRUE）; sdo_geor_ra.classify（geor，'{0}'，rangeArray，valueArray，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02" name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02"></a><h3 id="GEORS-GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02" class="sect3"><span class="enumeration_section">12.2</span> SDO_GEOR_RA.diff</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-8A94616F-603E-4958-ADE5-645D30579E0C">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.diff（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.diff（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，ploygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.diff（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.diff（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值0，polygonClip IN VARCHAR2默认'错误'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-509E9132-2ED2-44F8-828F-E2D87D428CB8">描述</p>
                     <p>通过执行diff操作生成新的GeoRaster对象（在使用说明中进行了解释）。新栅格可以是GeoRaster对象，也可以是单个BLOB。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-64227156-C23E-49A1-B85C-B631E6256899">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-6F30C1EF-49FD-46D3-9093-59C908209475"><!-- --></a> geor</dt>
                        <dd>
                           <p>首先输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-693D8A39-F1B4-4E79-B0A2-33A12576A464"><!-- --></a> geor1</dt>
                        <dd>
                           <p>第二个输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-895DC400-88B9-4505-8860-C33165462298"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果数据类型为SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）将用作矩形裁剪区域，以生成输出GeoRaster对象。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则仅处理裁剪区域几何体内的单元格，并且裁剪区域几何体外的所有单元格都设置为零（0）。有关SDO_SRID要求，另请参阅<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>的使用说明。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-E1DC61E2-EE21-4BED-A926-792BDC5FD9F2"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-3C62A7E8-8E85-4565-853F-3654DA2F6626"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-C1B927D0-399A-45C2-AA15-2F315CA8A8B2"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-CA5F811A-A5A7-4EE2-B786-1F3B5F0DF0A8"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-927C95AD-5818-41CD-9A8E-FD8801EEE079"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-44D0AC19-1985-43E5-9FEB-85ECCB201F65"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>指定对于输入GeoRaster对象中的任何NODATA单元格，输出GeoRaster对象中的相应单元格将设置为为<code class="codeph">nodataValue</code>参数指定的值。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规数据。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-58624E6C-2C3D-4A69-B567-6FFC3D4AE4B9"><!-- --></a> nodataValue</dt>
                        <dd>
                           <p>如果<code class="codeph">nodata</code>参数值为字符串<code class="codeph">TRUE</code>则用于设置NODATA单元格的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-8ABF3615-8546-4AB5-935F-A179CD96ACCA"><!-- --></a> polygonClip</dt>
                        <dd>
                           <p>如果<code class="codeph">cropArea</code>为null，则忽略。否则，字符串<code class="codeph">TRUE</code>会导致<code class="codeph">cropArea</code>值用于裁剪镶嵌数据;字符串<code class="codeph">FALSE</code>或空值会导致<code class="codeph">cropArea</code>的MBR用于裁剪输出图像。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-9DEE29EA-EA28-4CCD-8830-A1963B598F10"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-2D613864-48B6-4A8D-A58D-C98CAB4EE7B1">使用说明</p>
                     <p>此过程通过获取两个输入GeoRaster对象并应用over操作来生成新的GeoRaster对象：具体而言，对于每个图层中的每个单元格值，如果两个输入对象中的值不同，则输出第一个输入上的值，但是如果两个输入对象中的值相同，则输出为零。</p>
                     <p>两个输入的GeoRaster对象必须具有相同的尺寸大小和相同的带数;否则，会生成ORA-13397错误。</p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                     <p>有关更多信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-022F5214-9D1E-44B4-8487-967C93CC2954" title="栅格代数的一个主要用途是将逻辑模型应用于来自不同来源的栅格图层;也就是说，您可以在一个或多个GeoRaster对象的一个或多个图层上应用逻辑运算，以生成新的GeoRaster对象。">逻辑操作</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B879FE32-88C6-4C85-95B8-47B7EDEE8C02__GUID-0603FBF4-FCCB-4FF1-8988-649764569C39">例子</p>
                     <p>以下示例对两个输入GeoRaster对象执行diff操作。输出是GeoRaster对象。</p><pre class="oac_no_warn" dir="ltr">宣告geor SDO_GEORASTER; geor1 SDO_GEORASTER; geor2 SDO_GEORASTER; geom sdo_geometry;开始从georaster_table中选择georaster到geor，其中georid = 100;从Georaster_table中选择georaster到geor1，其中georid = 101;从georaster_table中选择georaster到geor2，其中georid = 102进行更新;的geom：= NULL; sdo_geor_ra.diff（geor，geor1，GEOM，NULL，geor2）;更新georaster_table set georaster = geor2 where georid = 102;结束; /</pre><p>以下示例对两个输入GeoRaster对象执行diff操作。输出是GeoRaster对象。输出是BLOB。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; out_lob BLOB; outArea sdo_geometry; outWindow sdo_number_array; geom sdo_geometry; BEGIN从Georaster_table中选择georaster到geor，其中georid = 100;从Georaster_table中选择georaster到geor1，其中georid = 101; dbms_lob.create_temporary（out_lob，TRUE）;的geom：= NULL; sdo_geor_ra.diff（geor，geor1，geom，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1294"></a><div class="props_rev_3"><a id="GUID-67FDA0FA-D055-4821-964F-600660861A72" name="GUID-67FDA0FA-D055-4821-964F-600660861A72"></a><h3 id="GEORS-GUID-67FDA0FA-D055-4821-964F-600660861A72" class="sect3"><span class="enumeration_section">12.3</span> SDO_GEOR_RA.findCells</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-31DC5B9D-BC3D-4AAF-BADE-B65574B41E0A">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.findCells（inGeoRaster IN SDO_GEORASTER，condition IN VARCHAR2，storageParam IN VARCHAR2 outGeoRaster OUT SDO_GEORASTER，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.findCells（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，condition IN VARCHAR2，storageParam IN VARCHAR2 outGeoRaster OUT SDO_GEORASTER，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.findCells（inGeoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，condition IN VARCHAR2，storageParam IN VARCHAR2 outGeoRaster OUT SDO_GEORASTER，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL ）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.findCells（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，condition IN VARCHAR2，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE';</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.findCells（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，condition IN VARCHAR2，storageParam IN VAR BLAR，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nOData IN VARCHAR2 DEFAULT'FALSE'，polygonClip IN VARCHAR2默认'错误'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-9C078D34-B58D-47A1-8C20-0FA102EF70ED">描述</p>
                     <p>根据输入的GeoRaster对象在GeoRaster对象或单个BLOB中生成新栅格，但屏蔽所有不满足<code class="codeph">condition</code>参数规范的单元格。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-9E7A5E45-1E25-424C-AEF7-09A6FF67CCC6">参数</p>
                     <dl class="1.00* 3.00*">
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-778D82D4-875C-42EC-97B3-E7B6A09DEDC8"><!-- --></a> GeoRaster中的<a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-778D82D4-875C-42EC-97B3-E7B6A09DEDC8"><!-- --></a></dt>
                        <dd>
                           <p>输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-D17EA62B-47CD-4E68-B7C2-15EF1A1A8817"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果数据类型为SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）将用作矩形裁剪区域，以生成输出GeoRaster对象;另请参阅<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>的用法说明，了解SDO_SRID要求。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则仅处理裁剪区域几何体内的单元格，并且裁剪区域几何体外的所有单元格都设置为零（0）。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">FALSE</code> ，则处理最小边界矩形内的所有单元格。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-CFAD9C6B-5FE5-4D8C-AE0D-67A41FBE7AAC"><!-- --></a>条件</dt>
                        <dd>
                           <p>用于过滤单元格的表达式字符串。（有关更多信息，请参阅使用说明。）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-DE82A0CD-F11E-4B9B-8312-801255EAD576"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-E1AF2B45-3B78-479C-BCA6-E47458ABFCFB"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-EB8E3F79-15F6-40E8-9ECC-8638EAB62413"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-B8FC4077-673D-4E6B-BE73-7ECD74EFA8E4"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-FCA1C99A-CAC0-4ACE-878D-FE569EC299BD"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-24E253C7-7805-4A16-8FE8-96A390EAC9C5"><!-- --></a> bgValues</dt>
                        <dd>
                           <p>背景值表示输入GeoRaster对象的空栅格块中的单元格值。SDO_NUMBER_ARRAY对象中的元素数必须是一个（用于所有波段的相同填充值）或波段维度大小（每个波段的填充值分别不同）。例如， <code class="codeph">SDO_NUMBER_ARRAY(1,5,10)</code>用1填充第一个波段，用5填充第二个波段，用10填充第三个波段。默认的<code class="codeph">bgValues</code>为零（0）。
                           </p>
                           <p>填充值必须是由填充稀疏数据的目标单元格深度背景值指定的有效单元格值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-5AE7F4ED-F7DE-4B86-9954-ED85379156F3"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>表示保留GeoRaster对象中任何NODATA单元格的原始值，并在<code class="codeph">condition</code>参数评估中考虑NODATA值。如果<code class="codeph">condition</code>参数评估中涉及的任何单元格值具有NODATA值，则<code class="codeph">condition</code>参数将计算为FALSE（请参阅有关<code class="codeph">condition</code>参数的使用说明）。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规数据。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-8D37582D-B07F-43B0-AD5E-8F42A1BE929B"><!-- --></a> polygonClip</dt>
                        <dd>
                           <p>如果<code class="codeph">cropArea</code>为null，则忽略。否则，字符串<code class="codeph">TRUE</code>会导致<code class="codeph">cropArea</code>几何体用于处理数据;字符串<code class="codeph">FALSE</code>或空值使<code class="codeph">cropArea</code>几何的最小边界矩形（MBR）用于处理数据。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-238E953C-E244-4260-A1AD-DA665626E2A4"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-B4CBBA4B-8386-4022-B0EE-F702295C61BE">使用说明</p>
                     <p>此过程基于输入的GeoRaster对象和<code class="codeph">condition</code>参数（ <code class="codeph">booleanExpr</code> ，布尔表达式字符串）在GeoRaster对象或单个BLOB中生成新栅格。对于输出GeoRaster对象中的每个单元格，将根据输入GeoRaster对象中的相应单元格值评估条件。如果单元格的<code class="codeph">condition</code>为真，则原始单元格值保留在输出GeoRaster对象中;否则， <code class="codeph">bgValues</code>输出GeoRaster对象中的单元格填充<code class="codeph">bgValues</code></p>
                     <p>有关更多信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494" title="栅格代数通常用于栅格数据分析和GIS建模。在GeoRaster中，GeoRaster栅格代数语言支持栅格代数。">Raster代数语言</a> 。
                     </p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-67FDA0FA-D055-4821-964F-600660861A72__GUID-A0040DB4-921C-416B-92F8-E91EBB0CD306">例子</p>
                     <p>如果第二层的单元格值小于或等于200，则以下示例将单元格值更改为默认背景值0。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; BEGIN从georaster_table中选择georaster到geor，其中georid = 1;插入georaster_table值（5，sdo_geor.init（'rdt_1'，5））将georaster返回到geor1; sdo_geor_ra.findcells（geor，'{1}&gt; 200'，null，geor1）;更新georaster_table set georaster = geor1 where georid = 5;承诺;结束; /</pre><p>如果第二层的单元格值小于或等于200，则以下示例将单元格值更改为默认背景值0。输出在BLOB中..</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; out_lob BLOB; outArea sdo_geometry; outWindow sdo_number_array; BEGIN从georaster_table中选择georaster到geor，其中georid = 1; dbms_lob.create_temporary（out_lob，TRUE）; sdo_geor_ra.findcells（geor，'{1}&gt; 200'，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre><p>以下示例使用几何对象（ <code class="codeph">geom</code> ）作为输入<code class="codeph">cropArea</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor0 SDO_GEORASTER; geor1 SDO_GEORASTER; geom SDO_GEOMETRY; BEGIN geom：= sdo_geometry（2003,82394，NULL，sdo_elem_info_array（1,1003,1），sdo_ordinate_array（21783.775,1008687.9,18783.775,966687.905,63783.775,966687.905,81783.775,990687.905,21783.775,1008687.9））;从Georaster_table中选择georaster到geor，其中georid = 100;从georaster_table中选择georaster到geor1，其中georid = 101进行更新; sdo_geor_ra.findcells（geor，geom，'（{1} = 42）'，'blocking = true，blocksize =（256,256,3）'，geor1，null，'false'）;更新georaster_table set georaster = geor1 where georid = 101;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1295"></a><div class="props_rev_3"><a id="GUID-B64A8557-B92D-4588-812D-2F767338EA68" name="GUID-B64A8557-B92D-4588-812D-2F767338EA68"></a><h3 id="GEORS-GUID-B64A8557-B92D-4588-812D-2F767338EA68" class="sect3"><span class="enumeration_section">12.4</span> SDO_GEOR_RA.isOverlap</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-FCCE5698-5BD5-41CE-9470-40D30C21C7F7">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR.isOverlap（georaster1 IN SDO_GEORASTER，georaster2 IN SDO_GEORASTER，容差IN NUMBER DEFAULT 0.5）RETURN VARCHAR2;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.isOverlap（georArray IN SDO_GEORASTER_ARRAY，容差IN NUMBER DEFAULT 0.5）RETURN VARCHAR2;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.isOverlap（geor_cur IN SYS_REFCURSOR，容差IN NUMBER DEFAULT 0.5）RETURN VARCHAR2;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-FBE12B7A-764A-4967-BD8F-E974A520B9D4">描述</p>
                     <p>如果两个或多个GeoRaster对象重叠，则返回字符串<code class="codeph">TRUE</code>如果两个或多个GeoRaster对象不重叠，则返回<code class="codeph">FALSE</code> 。（有关用于确定两个GeoRaster对象的逻辑，请参阅用法说明，无论地理参考与否，重叠。）
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-600784FA-B857-4A2E-9A6F-06EC4CB1790B">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-741AC0AD-EDFD-44A9-911F-96CB15461061"><!-- --></a> georaster1</dt>
                        <dd>
                           <p>GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-1DF4D5B0-6546-4960-88EC-DB3A09B25683"><!-- --></a> georaster2</dt>
                        <dd>
                           <p>GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-D63A6B19-4496-4156-866C-3F3FBA2EBF4A"><!-- --></a> georArray</dt>
                        <dd>
                           <p>一组GeoRaster对象。数据类型为SDO_GEOR_ARRAY，定义为<code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-12B41B56-8A47-4CF8-929C-8E1D651E26EC"><!-- --></a> geor_cur</dt>
                        <dd>
                           <p>输入GeoRaster对象的光标（SYS_REFCURSOR类型）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-A6CE2104-AC15-4F24-A42C-AC6359EBC1F7"><!-- --></a>容差</dt>
                        <dd>
                           <p>容差值用于确定单元格空间中的两个单元格是否在模型空间中重叠。该值应介于0和1之间，单位为单元格。例如，0.5（默认值）表示半个单元，即，如果它们之间的距离在0.5个单元或更小的单元中，则两个单元重叠。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-05D6CE81-F5C8-4986-8BFD-A7DCB8DD97DD">使用说明</p>
                     <p>要进行重叠比较的GeoRaster对象必须全部是地理配准的，或者都是非地理配准的。</p>
                     <p>应用以下逻辑来确定两个GeoRaster对象是否重叠：</p>
                     <ol>
                        <li>
                           <p>如果两个GeoRaster对象的行或列维度大小不同，则返回<code class="codeph">'FALSE'</code> 。否则，继续下一步。
                           </p>
                        </li>
                        <li>
                           <p>检查两个GeoRaster对象是否都是地理配准的。</p>
                           <ol type="a">
                              <li>
                                 <p>如果一个是地理参考而另一个不是，则返回<code class="codeph">'FALSE'</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果两者都是非地理配准的，并且两个GeoRaster对象的<code class="codeph">ultCoordinate</code>相同，则返回<code class="codeph">'TRUE'</code> ;否则，返回<code class="codeph">'FALSE'</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果两者都是地理配准，请转到下一步。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>检查<code class="codeph">p</code> ， <code class="codeph">q</code> ， <code class="codeph">r</code>和<code class="codeph">s</code>多项式的<code class="codeph">pType</code> ， <code class="codeph">nVars</code> ， <code class="codeph">order</code>和<code class="codeph">nCoefficients</code>值（在<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理</a> <code class="codeph">nCoefficients</code> <a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">模型中</a>进行了解释）。如果有任何不同，则返回'FALSE';否则，请转到下一步。
                           </p>
                        </li>
                        <li>
                           <p>计算从单元格空间到模型空间的左上角，右上角，左下角和右下角四个点。如果两个GeoRaster对象的对应点的距离在容差值内（从单元格空间转换为模型空间），则返回<code class="codeph">'TRUE'</code> ;否则，返回<code class="codeph">'FALSE</code> '。
                           </p>
                        </li>
                     </ol>
                     <p>GeoRaster的栅格代数函数要求来自不同GeoRaster对象的栅格图层具有相同的大小并且彼此完全重叠。在对两个或多个GeoRaster对象应用栅格代数运算或执行其他操作之前，可以使用SDO_GEOR_RA.isOverlap函数确定GeoRaster对象是否具有相同的大小并覆盖相同的地面区域。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B64A8557-B92D-4588-812D-2F767338EA68__GUID-45FD9880-E3DA-45F3-BEC6-C546EEB21CF2">例子</p>
                     <p>以下示例检查两个GeoRaster对象是否重叠。（它们使用两种不同格式的功能。）</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; BEGIN SELECT georaster INTO geor FROM georaster_table WHERE georid = 1; SELECT georaster INTO geor1 FROM georaster_table WHERE georid = 30; DBMS_OUTPUT.PUT_LINE（sdo_geor_ra.isOverlap（geor，geor1,0.5））;结束; / DECLARE mycursor sys_refcursor; BEGIN OPEN mycursor FOR SELECT georaster FROM georaster_table WHERE georid = 1或georid = 30; DBMS_OUTPUT.PUT_LINE（sdo_geor_ra.isOverlap（mycursor，0.5））;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4" name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4"></a><h3 id="GEORS-GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4" class="sect3"><span class="enumeration_section">12.5</span> SDO_GEOR_RA.over</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-8A94616F-603E-4958-ADE5-645D30579E0C">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.over（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.over（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，ploygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.over（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.over（geor IN SDO_GEORASTER，geor1 IN SDO_GEORASTER，cropParea IN SDO_GEOMETRY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值0，polygonClip IN VARCHAR2默认'错误'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-509E9132-2ED2-44F8-828F-E2D87D428CB8">描述</p>
                     <p>通过执行过度操作（在使用说明中解释），在GeoRaster对象或单个BLOB中生成新栅格。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-64227156-C23E-49A1-B85C-B631E6256899">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-6F30C1EF-49FD-46D3-9093-59C908209475"><!-- --></a> geor</dt>
                        <dd>
                           <p>首先输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-693D8A39-F1B4-4E79-B0A2-33A12576A464"><!-- --></a> geor1</dt>
                        <dd>
                           <p>第二个输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-895DC400-88B9-4505-8860-C33165462298"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果数据类型为SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）将用作矩形裁剪区域，以生成输出GeoRaster对象。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则仅处理裁剪区域几何体内的单元格，并且裁剪区域几何体外的所有单元格都设置为零（0）。有关SDO_SRID要求，另请参阅<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>的使用说明。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-E1DC61E2-EE21-4BED-A926-792BDC5FD9F2"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-53512AF6-CE93-4F42-922A-492F0A1B333A"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-FB474CEB-9782-4C4D-B321-9399BE19628A"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-68BCC2C9-3CF7-44D6-A0CF-BFB7F26272DC"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-41210757-B3E7-4DFF-BF70-71DB3BE0A5C6"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-44D0AC19-1985-43E5-9FEB-85ECCB201F65"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>指定对于输入GeoRaster对象中的任何NODATA单元格，输出GeoRaster对象中的相应单元格将设置为为<code class="codeph">nodataValue</code>参数指定的值。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规数据。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-58624E6C-2C3D-4A69-B567-6FFC3D4AE4B9"><!-- --></a> nodataValue</dt>
                        <dd>
                           <p>如果<code class="codeph">nodata</code>参数值为字符串<code class="codeph">TRUE</code>则用于设置NODATA单元格的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-8ABF3615-8546-4AB5-935F-A179CD96ACCA"><!-- --></a> polygonClip</dt>
                        <dd>
                           <p>如果<code class="codeph">cropArea</code>为null，则忽略。否则，字符串<code class="codeph">TRUE</code>会导致<code class="codeph">cropArea</code>值用于裁剪镶嵌数据;字符串<code class="codeph">FALSE</code>或空值会导致<code class="codeph">cropArea</code>的MBR用于裁剪输出图像。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-9DEE29EA-EA28-4CCD-8830-A1963B598F10"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-2D613864-48B6-4A8D-A58D-C98CAB4EE7B1">使用说明</p>
                     <p>此过程通过获取两个输入GeoRaster对象并应用over操作，在GeoRaster对象或单个BLOB中生成新栅格：具体而言，输出栅格中每个层中的每个单元格将包含来自相应单元格的值。如果该值不为零，则首先输入GeoRaster对象;否则，它将包含第二个GeoRaster对象中相应单元格的值。</p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                     <p>有关更多信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-022F5214-9D1E-44B4-8487-967C93CC2954" title="栅格代数的一个主要用途是将逻辑模型应用于来自不同来源的栅格图层;也就是说，您可以在一个或多个GeoRaster对象的一个或多个图层上应用逻辑运算，以生成新的GeoRaster对象。">逻辑操作</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D6105A06-3CC0-42C9-AC57-81333017C3A4__GUID-0603FBF4-FCCB-4FF1-8988-649764569C39">例子</p>
                     <p>以下示例对两个输入GeoRaster对象执行over操作。输出位于GeoRaster对象中。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor MDSYS.SDO_GEORASTER; geor1 MDSYS.SDO_GEORASTER; geor2 MDSYS.SDO_GEORASTER; geom mdsys.sdo_geometry; BEGIN从Georaster_table中选择georaster到geor，其中georid = 100;从Georaster_table中选择georaster到geor1，其中georid = 101;从georaster_table中选择georaster到geor2，其中georid = 102进行更新;的geom：= NULL; mdsys.sdo_geor_ra.over（geor，geor1，GEOM，NULL，geor2）;更新georaster_table set georaster = geor2 where georid = 102;结束; /</pre><p>以下示例对两个输入GeoRaster对象执行over操作。输出在BLOB中。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; out_lob BLOB; outArea sdo_geometry; outWindow sdo_number_array; geom sdo_geometry; BEGIN从Georaster_table中选择georaster到geor，其中georid = 100;从Georaster_table中选择georaster到geor1，其中georid = 101; dbms_lob.create_temporary（out_lob，TRUE）;的geom：= NULL; sdo_geor_ra.over（geor，geor1，geom，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1296"></a><div class="props_rev_3"><a id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333" name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333"></a><h3 id="GEORS-GUID-BB7A762E-E615-43AD-9D74-5E917D29F333" class="sect3"><span class="enumeration_section">12.6</span> SDO_GEOR_RA.rasterMathOp</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-30508542-8122-44F6-B55C-6C989F5894E2">格式</p>
                     <p><span class="bold">在单个GeoRaster对象上操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SDO_GEORASTER，操作IN SDO_STRING2_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，operationParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，operation in SDO_STRING2_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，operationParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，operationParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nOData IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值为0，polygonClip IN VARCHAR2默认'错误'）;</pre><p><span class="bold">在GeoRaster对象数组上的操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georArray IN SDO_GEORASTER_ARRAY，操作IN SDO_STRING2_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_NUMBER_ARRAY，operationParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，operation在SDO_STRING2_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，操作IN SDO_STRING2_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，operationParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值0，polygonClip IN VARCHAR2默认'错误'）;</pre><p><span class="bold">在光标指定的GeoRaster对象上的操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inGeoRasters IN SYS_REFCURSOR，操作IN SDO_STRING2_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_NUMBER_ARRAY，operationParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_GEOMETRY，operation in SDO_STRING2_ARRAY，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_GEOMETRY，operation in SDO_STRING2_ARRAY，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（inSoRaster IN SYS_REFCURSOR，cropArea IN SDO_GEOMETRY，operationParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值0，polygonClip IN VARCHAR2默认'错误'）;</pre><p><span class="bold">在每层的所有相应单元上操作</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georaster0 IN SDO_GEORASTER，georaster1 IN SDO_GEORASTER，常量IN NUMBER，运算符IN PLS_INTEGER，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georaster0 IN SDO_GEORASTER，georaster1 IN SDO_GEORASTER，cropArea IN SDO_NUMBER_ARRAY，常量IN NUMBER，运算符IN PLS_INTEGER，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georaster0 IN SDO_GEORASTER，georaster1 IN SDO_GEORASTER，cropArea IN SDO_GHEOMETRY，运算符IN PLS_INTEGER，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georaster0 IN SDO_GEORASTER，georaster1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，运算符IN PLS_INTEGER，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata in VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterMathOp（georaster0 IN SDO_GEORASTER，georaster1 IN SDO_GEORASTER，cropArea IN SDO_GEOMETRY，运算符IN PLS_INTEGER，storageParam IN VARCHAR2，rasterBlob IN OUT BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata in VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认为0，polygonClip IN VARCHAR2 DEFAULT'FALSE'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-9023DCCB-60BF-4568-8C6D-202E8744361B">描述</p>
                     <p>对一个或多个GeoRaster对象执行栅格数学运算。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-D4A338B1-E8AC-47C8-B9F7-5A8E090F71FD">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-22D94268-5AA0-40DA-953C-94524EE40E62"><!-- --></a> GeoRaster中的<a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-22D94268-5AA0-40DA-953C-94524EE40E62"><!-- --></a></dt>
                        <dd>
                           <p>输入GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-2CEBAA2E-4C50-4ADB-897C-2AE3E2818BFF"><!-- --></a> georArray</dt>
                        <dd>
                           <p>一组GeoRaster对象。数据类型为SDO_GEOR_ARRAY，定义为<code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-8F19EE44-0BEA-4832-ACD7-A0142901641B"><!-- --></a> inGeoRasters</dt>
                        <dd>
                           <p>输入GeoRaster对象的光标（SYS_REFCURSOR类型）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-BCB8F2A8-7DDA-4A8B-9581-EB9E03064BB8"><!-- --></a> georaster0</dt>
                        <dd>
                           <p>左操作数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-BBB4027A-EB3C-4095-872C-346E2E361E32"><!-- --></a> georaster1</dt>
                        <dd>
                           <p>正确的操作数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-01152FBA-1934-4B79-A972-C3FD1C97E076"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果数据类型为SDO_GEOMETRY，则几何对象的最小边界矩形（MBR）将用作矩形裁剪区域，以生成输出GeoRaster对象。如果参数<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则仅处理裁剪区域几何体内的单元格，并且裁剪区域几何体外的所有单元格都设置为零（0）。有关SDO_SRID要求，另请参阅<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>的使用说明。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-312E4152-1D2E-40F2-90E1-ADCAB5F4A3FF"><!-- --></a>操作</dt>
                        <dd>
                           <p>一组<code class="codeph">arithmeticExpr</code>表达式字符串，用于计算输出GeoRaster对象中的栅格单元格值。数组的每个元素对应于输出GeoRaster对象中的一个层。数据类型是SDO_STRING2_ARRAY，其定义为<code class="codeph">VARRAY(2147483647) OF VARCHAR2(4096)</code> 2149683647 <code class="codeph">VARRAY(2147483647) OF VARCHAR2(4096)</code> 。
                           </p>
                           <p><code class="codeph">arithmeticExpr</code>表达式的语法在<a href="raster-algebra-and-analytics.html#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494" title="栅格代数通常用于栅格数据分析和GIS建模。在GeoRaster中，GeoRaster栅格代数语言支持栅格代数。">栅格代数语言中</a>进行了解释。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-DD05E2F6-B769-4EA4-9BFB-D6EF3F67E7F5"><!-- --></a>常数</dt>
                        <dd>
                           <p>某些运算符的常量值（请参阅<code class="codeph">operator</code>参数），例如<code class="codeph">addConst</code>和<code class="codeph">divConstant</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-1E2C9197-5248-43AB-8328-671AA0E5A3F5"><!-- --></a>运算符</dt>
                        <dd>
                           <p>以下数学运算符之一，在SDO_GEOR_RA包中定义：</p><pre class="oac_no_warn" dir="ltr">OPERATOR_ABSOLUTE OPERATOR_ADD OPERATOR_ADDCONST OPERATOR_DIVIDE OPERATOR_DIVIDECONST OPERATOR_EXP OPERATOR_INVERT OPERATOR_LOG OPERATOR_MULTIPLY OPERATOR_MULTIPLYCONST OPERATOR_SUBTRACT OPERATOR_SUBTRACTCONST</pre><p>有关这些运算符的定义，请参阅使用说明。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-98BEDC58-6815-4F2E-9369-FD4E4B213543"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-03C5E0B3-905C-4FED-8269-418E260EFEFC"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-8D8BFEAD-DAE0-4792-BD99-29F3908D7CAE"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-62E286A7-5A79-4BD0-B1A2-B02844F464E7"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-00E69D34-43F9-476F-953B-D2FA878462E3"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                        <dt class="dlterm">bb值= <a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-E8C55E16-FF3B-4384-A265-0FD326F966E2"><!-- --></a></dt>
                        <dd>
                           <p>背景值表示输入GeoRaster对象的空栅格块中的单元格值。SDO_NUMBER_ARRAY对象中的元素数必须是一个（用于所有波段的相同填充值）或波段维度大小（每个波段的填充值分别不同）。例如， <code class="codeph">SDO_NUMBER_ARRAY(1,5,10)</code>用1填充第一个波段，用5填充第二个波段，用10填充第三个波段。默认的<code class="codeph">bgValues</code>为零（0）。
                           </p>
                           <p>填充值必须是由填充稀疏数据的目标单元格深度背景值指定的有效单元格值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-FCB707BF-0A53-4280-82C1-63A0881CB25D"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>指定如果数学运算的操作数中有任何NODATA单元，则运算结果被评估为NODATA值;因此，输出GeoRaster对象中的相应单元格将设置为为<code class="codeph">nodataValue</code>参数指定的值。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规数据。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-457439AA-DF55-4E2D-B089-4E6D237499FC"><!-- --></a> nodataValue</dt>
                        <dd>
                           <p>如果<code class="codeph">nodata</code>参数值为字符串<code class="codeph">TRUE</code>则用于设置NODATA单元格的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-938F87D5-F39C-4C07-8E27-5DCBCC6714B3"><!-- --></a> polygonClip</dt>
                        <dd>
                           <p>如果<code class="codeph">cropArea</code>为null，则忽略。否则，字符串<code class="codeph">TRUE</code>会导致<code class="codeph">cropArea</code>值用于裁剪镶嵌数据;字符串<code class="codeph">FALSE</code>或空值会导致<code class="codeph">cropArea</code>的MBR用于裁剪输出图像。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-A80C5DCD-24DB-474D-8956-D5004788F3FF"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-B79D292F-8F92-42BF-96FA-92BE42F9462A">使用说明</p>
                     <p>此过程有20种格式，可以视为4组，每组5种格式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在单个GeoRaster对象上操作</p>
                        </li>
                        <li>
                           <p>对GeoRaster对象数组的操作</p>
                        </li>
                        <li>
                           <p>对游标指定的GeoRaster对象的操作（SYS_REFCURSOR类型）</p>
                        </li>
                        <li>
                           <p>对每层的所有相应单元或一个或两个GeoRaster对象进行操作</p>
                        </li>
                     </ul>
                     <p>在每个组中，选项包括指定类型为SDO_NUMBER_ARRAY或SDO_GEOMETRY的裁剪区域，以及指定SDO_GEOMETRY裁剪区域，是否使用裁剪区域的几何对象或该对象的MBR。输出栅格可以位于GeoRaster对象中，也可以位于单个BLOB中。</p>
                     <p>前三组格式用于根据<code class="codeph">operation</code>参数从一个或多个输入GeoRaster对象的层生成新栅格。例如，以下示例生成一个具有三个图层的新GeoRaster对象，每个图层的值是输入GeoRaster对象减去10的单元格值：</p><pre class="oac_no_warn" dir="ltr">sdo_geor_ra.rasterMathOp（geor，SDO_STRING2_ARRAY（ '{0,0} -10'， '{0,1} -10'， '{0,2} -10'），NULL，geor1）;</pre><p>第四组格式对输入GeoRaster对象的每一层的所有对应单元格应用数学运算，并生成与第一个输入GeoRaster对象（ <code class="codeph">geoRaster0</code> ）具有相同维度大小的新GeoRaster对象。两个输入GeoRaster对象必须具有相同的行/列/带尺寸。
                     </p>
                     <p>对于第四组格式，当输出栅格是GeoRaster对象时，在生成的GeoRaster对象中删除所有金字塔，但第一个输入GeoRaster对象的掩码保留在生成的GeoRaster对象中;当输出栅格位于BLOB中时，将从输出中删除所有金字塔和掩码。</p>
                     <p>对于<code class="codeph">operator</code>参数，运算符具有以下定义：</p><pre class="oac_no_warn" dir="ltr">OPERATOR_ABSOLUTE：if（src [x] [y] [b] &lt;0）{dst [x] [y] [b] = -src [x] [y] [b]; } else {dst [x] [y] [b] = src [x] [y] [b]; } OPERATOR_ADD dst [x] [y] [b] = src1 [x] [y] [b] + src2 [x] [y] [b] OPERATOR_ADDCONST dst [x] [y] [b] = src [x] [y] [b] +常量 - 常量是第三个参数OPERATOR_DIVIDE dst [x] [y] [b] = src1 [x] [y] [b] / src2 [x] [y] [b] OPERATOR_DIVIDECONST dst [x] [y] [b] = src [x] [y] [b] / constant --constant是第三个参数OPERATOR_EXP dst [x] [y] [b] = exp（src [x] [y] [b]）OPERATOR_INVERT：反转单元格值：dst [x] [y] [b] =  -  src [x] [y] [b] OPERATOR_LOG：dst [x] [y] [b] = log（src [ x] [y] [b]）OPERATOR_MULTIPLY dst [x] [y] [b] = src1 [x] [y] [b] * src2 [x] [y] [b] OPERATOR_MULTIPLYCONST dst [x] [y] [b] = src [x] [y] [b] *常量--constant是第三个参数OPERATOR_SUBTRACT dst [x] [y] [b] = src1 [x] [y] [b] -src2 [x] [y] [b] OPERATOR_SUBTRACTCONST dst [x] [y] [b] = src [x] [y] [b] -constant --constant是第三个参数</pre><p>有关栅格代数语言的更多信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494" title="栅格代数通常用于栅格数据分析和GIS建模。在GeoRaster中，GeoRaster栅格代数语言支持栅格代数。">栅格代数语言</a> 。
                     </p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BB7A762E-E615-43AD-9D74-5E917D29F333__GUID-44D77D69-AC75-4D83-8798-FD01E3AE061E">例子</p>
                     <p>以下示例将常量10添加到输入GeoRaster对象的所有单元格值。输出是GeoRaster对象。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; BEGIN从georaster_table中选择georaster到geor，其中georid = 1;插入georaster_table值（5，sdo_geor.init（'rdt_1'，5））将georaster返回到geor1; sdo_geor_ra.rasterMathOp（geor，空，10，sdo_geor_ra。OPERATOR_ADDCONST，空，geor1）;更新georaster_table set georaster = geor1 where georid = 5;承诺;结束; /</pre><p>以下示例将常量10添加到输入GeoRaster对象的所有单元格值。输出是BLOB。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; out_lob BLOB; outArea sdo_geometry; outWindow sdo_number_array; BEGIN从georaster_table中选择georaster到geor，其中georid = 1; dbms_lob.create_temporary（out_lob，TRUE）; sdo_geor_ra.rasterMathOp（geor，空，10，sdo_geor_ra。OPERATOR_ADDCONST，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre><p>以下示例从输入的GeoRaster对象的三个层生成一个新的三层GeoRaster对象，新GeoRaster对象中的每个单元格值都是相应“旧”单元格的值除以2。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; geo_array SDO_GEORASTER_ARRAY; BEGIN从georaster_table中选择georaster到geor，其中georid = 2;插入georaster_table值（20，sdo_geor.init（'rdt_1'，20））将georaster返回到geor1; geo_array：= SDO_GEORASTER_ARRAY（geor）; sdo_geor_ra.rasterMathOp（geo_array，SDO_STRING2_ARRAY（ '{0,0} / 2'， '{0,1} / 2'， '{0,2} / 2'），NULL，geor1）;更新georaster_table set georaster = geor1 where georid = 20;承诺;结束; /</pre><p>以下示例使用几何对象作为裁剪区域执行栅格数学运算。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; geom SDO_GEOMETRY; geo_array SDO_GEORASTER_ARRAY; BEGIN geom：= sdo_geometry（2003,82394，NULL，sdo_elem_info_array（1,1003,1），sdo_ordinate_array（21783.775,1008687.9,18783.775,966687.905,63783.775,966687.905,81783.775,990687.905,21783.775,1008687.9））;从Georaster_table中选择georaster到geor，其中georid = 100;从georaster_table中选择georaster到geor1，其中georid = 101进行更新; geo_array：= SDO_GEORASTER_ARRAY（geor）; mdsys.sdo_geor_ra.rasterMathOp（geo_array，GEOM，SDO_STRING2_ARRAY（ '{0,0} / 2'， '{0,1} / 2'， '{0,2} / 2'），NULL，geor1）;更新georaster_table set georaster = geor1 where georid = 101;承诺;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1297"></a><div class="props_rev_3"><a id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E" name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E"></a><h3 id="GEORS-GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E" class="sect3"><span class="enumeration_section">12.7</span> SDO_GEOR_RA.rasterUpdate</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-42E96E63-F330-48BC-86F1-BD4B4A4A4202">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterUpdate（geoRaster IN OUT SDO_GEORASTER，numramidLevel IN NUMBER，条件IN SDO_STRING2_ARRAY，vals IN SDO_STRING2_ARRAYSET，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterUpdate（geoRaster IN OUT SDO_GEORASTER，numramidLevel IN NUMBER，targetArea IN SDO_NUMBER_ARRAY，条件IN SDO_STRING2_ARRAY，vals IN SDO_STRING2_ARRAYSET，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.rasterUpdate（geoRaster IN OUT SDO_GEORASTER，numramidLevel IN NUMBER，targetArea IN SDO_GEOMETRY，条件IN SDO_STRING2_ARRAY，vals IN SDO_STRING2_ARRAYSET，bgValues IN SDO_NUMBER_ARRAY DEFAULT NULL，nodata IN VARCHAR2 DEFAULT'FALSE'，polygonClip IN VARCHAR2 DEFAULT'FALSE'，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-A8D802CF-33EB-467C-8532-56A99BA4FCF2">描述</p>
                     <p>使用根据<code class="codeph">vals</code>规范计算的值更新<code class="codeph">conditions</code>规范为true的所有单元格。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-02771BB5-4844-4571-89C9-2A5956D4E56F">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-B5F738B1-EBFC-49C4-81A5-1C9EE5DED040"><!-- --></a> geoRaster</dt>
                        <dd>
                           <p>用于输入和输出的GeoRaster对象（根据指定条件进行更新）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-3E8963CC-B637-48AF-8E88-02716F2EF13B"><!-- --></a> pyramidLevel</dt>
                        <dd>
                           <p>要更新的金字塔等级。如果此参数为null，则更新所有金字塔等级。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-1F78CBC2-2F37-40EF-A7D9-015156918B32"><!-- --></a> targetArea</dt>
                        <dd>
                           <p>目标区域定义。如果数据类型为SDO_GEOMETRY，则如果参数<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则仅更新目标区域几何中的单元格，并且目标区域几何外部的所有单元格都保留原始值;但是如果参数<code class="codeph">polygonClip</code>为<code class="codeph">FALSE</code> ，则更新目标区域几何体的MBR中的所有单元格。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-77803075-AC56-40BE-95DF-C1CC508C7252"><!-- --></a>条件</dt>
                        <dd>
                           <p>用于选择单元格的<code class="codeph">booleanExpr</code>表达式字符串数组。（有关详细信息，请参阅使用说明。）数据类型是SDO_STRING2_ARRAY，其定义为<code class="codeph">VARRAY(2147483647) OF VARCHAR2(4096)</code> 2149683647 <code class="codeph">VARRAY(2147483647) OF VARCHAR2(4096)</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-47495912-8B7D-49D7-A29F-B86352A6B328"><!-- --></a></dt>
                        <dd>
                           <p>一个或多个<code class="codeph">arithmeticExpr</code>表达式数组，外部数组对应于每个条件，内部数组对应于每个层。数据类型为SDO_STRING2_ARRAYSET，定义为<code class="codeph">VARRAY(2147483647) OF SDO_STRING2_ARRAY</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-F71BC178-A4A4-4CE3-A5DB-B4B88EF494F0"><!-- --></a> bgValues</dt>
                        <dd>
                           <p>背景值表示输入GeoRaster对象的空栅格块中的单元格值。SDO_NUMBER_ARRAY对象中的元素数必须是一个（用于所有波段的相同填充值）或波段维度大小（每个波段的填充值分别不同）。例如， <code class="codeph">SDO_NUMBER_ARRAY(1,5,10)</code>用1填充第一个波段，用5填充第二个波段，用10填充第三个波段。默认的<code class="codeph">bgValues</code>为零（0）。
                           </p>
                           <p>填充值必须是由填充稀疏数据的目标单元格深度背景值指定的有效单元格值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-683EC230-CAC7-4ECF-ADA1-3BA8E97C0AA0"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>表示不更新GeoRaster对象中任何NODATA单元的原始值，并在<code class="codeph">conditions</code>参数评估中考虑NODATA值。如果<code class="codeph">conditions</code>参数评估中涉及的任何单元格值具有NODATA值，则<code class="codeph">conditions</code>参数将评估为FALSE（请参阅有关<code class="codeph">conditions</code>参数的使用说明）。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规单元格，从而有资格进行更新。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-B14C7C20-2A45-4C43-A11C-ABF7A222295B"><!-- --></a> polygonClip</dt>
                        <dd>
                           <p>如果<code class="codeph">targetArea</code>为null，则忽略。否则，字符串<code class="codeph">TRUE</code>会导致<code class="codeph">targetArea</code>几何值用于更新栅格单元格值;字符串<code class="codeph">FALSE</code>或空值会导致<code class="codeph">targetArea</code>几何的MBR用于更新栅格单元格值。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-88C3B8EB-1A76-49F5-986B-30E1E563C3BC"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-D17E332D-8717-4B2F-B3A6-6939A840FBC7">使用说明</p>
                     <p>由于此过程会覆盖输入GeoRaster对象中的数据，因此应复制原始GeoRaster对象并对复制的对象使用此过程。对此过程的结果感到满意后，如果愿意，可以丢弃原始GeoRaster对象。</p>
                     <p>此过程基于<code class="codeph">conditions</code>参数中指定的<code class="codeph">booleanExpr</code>字符串从指定的GeoRaster对象中选择单元格，并通过计算<span class="bold">vals</span>参数中指定的<code class="codeph">arithmeticExpr</code>表达式字符串来更新相应的单元格值。例如，如果：</p><pre class="oac_no_warn" dir="ltr">condition = SDO_STRING2_ARRAY（'{0} = 48'，'{0} = 108'）vals = SDO_STRING2_ARRAYSET（SDO_STRING2_ARRAY（'123'，'54'，'89'），SDO_STRING2_ARRAY（'98'，'56'，' 123' ））</pre><p>然后：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于第一层值等于48的所有单元，它们的第一，第二和第三层值分别设置为123,54,89。</p>
                        </li>
                        <li>
                           <p>对于第一层值等于108的所有单元，它们的第一，第二和第三层值分别设置为98,56,123。</p>
                        </li>
                     </ul>
                     <p>有关更多信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-A6F087DC-1E7E-4426-B778-8554A25B3494" title="栅格代数通常用于栅格数据分析和GIS建模。在GeoRaster中，GeoRaster栅格代数语言支持栅格代数。">Raster代数语言</a> 。
                     </p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E__GUID-3E4FE69E-014A-4CBF-91F9-B948E77A522D">例子</p>
                     <p>以下示例使用从<code class="codeph">vals</code>规范计算的值更新<code class="codeph">conditions</code>规范为true的所有单元格。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; BEGIN从georaster_table中选择georaster到geor，其中georid = 1; sdo_geor_ra.rasterUpdate（geor，0，SDO_STRING2_ARRAY（ '（ABS（{0}  -  {1}）= 48）（{2}  -  {1} =  -  101）'，'2 * {0}  -  {1} / 3 = 108 '），SDO_STRING2_ARRAYSET（SDO_STRING2_ARRAY（' 123' ， '54'， '89'），SDO_STRING2_ARRAY（'98' ， '56'， '123'）））;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39" name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39"></a><h3 id="GEORS-GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39" class="sect3"><span class="enumeration_section">12.8</span> SDO_GEOR_RA.stack</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-8A94616F-603E-4958-ADE5-645D30579E0C">格式</p><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.stack（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_NUMBER_ARRAY，layerList IN SDO_NUMBER_ARRAY，method IN VARCHARs，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.stack（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，layerList IN SDO_NUMBER_ARRAY，method IN VARCHARs，storageParam IN VARCHAR2，outGeoRaster IN OUT SDO_GEORASTER，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER DEFAULT 0，polygonClip IN VARCHAR2 DEFAULT'FALSE' ，parallelParam IN VARCHAR2 DEFAULT NULL）;</pre><p><span class="bold">要么</span></p><pre class="oac_no_warn" dir="ltr">DO_GEOR_RA.stack（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，layerList IN SDO_NUMBER_ARRAY，method IN VARCHAR2，storageParam IN VARCHAR2，rasterBlob IN OUT NOCOPY BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值0 ,;</pre><pre class="oac_no_warn" dir="ltr">SDO_GEOR_RA.stack（georArray IN SDO_GEORASTER_ARRAY，cropArea IN SDO_GEOMETRY，layerList IN SDO_NUMBER_ARRAY，method IN VARCHAR2，storageParam IN VARCHAR2，rasterBlob IN OUT NOCOPY BLOB，outArea OUT SDO_GEOMETRY，outWindow OUT SDO_NUMBER_ARRAY，nodata IN VARCHAR2 DEFAULT'FALSE'，nodataValue IN NUMBER默认值0，polygonClip IN VARCHAR2 DEFAULT'FALSE'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-509E9132-2ED2-44F8-828F-E2D87D428CB8">描述</p>
                     <p>在GeoRaster对象或单个BLOB中生成单层栅格，其单元格值是输入GeoRaster阵列的图层列表的本地统计值。输入图层由<code class="codeph">layerList</code>参数指定，statistics方法由<code class="codeph">method</code>参数指定。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-64227156-C23E-49A1-B85C-B631E6256899">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-6A2DF0F1-682D-40CD-8F3C-A727B54A2639"><!-- --></a> georArray</dt>
                        <dd>
                           <p>一组GeoRaster对象。数据类型为SDO_GEOR_ARRAY，定义为<code class="codeph">VARRAY(10485760) OF SDO_GEORASTER</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-0C04F9CF-A191-4F19-A298-F28E9D377F09"><!-- --></a> cropArea</dt>
                        <dd>
                           <p>作物面积定义。如果SDO_GEOMETRY对象具有非空SRID，则必须对源GeoRaster对象进行地理配准;否则，源GeoRaster对象可以进行地理配准或非地理配准。如果<code class="codeph">polygonClip</code>是<code class="codeph">FALSE</code>的的MBR <code class="codeph">cropArea</code>用于裁剪数据。如果<code class="codeph">polygonClip</code>为<code class="codeph">TRUE</code> ，则的几何<code class="codeph">cropArea</code>用于裁剪数据。
                           </p>
                           <p>如果数据类型为SDO_NUMBER_ARRAY，则该参数标识矩形窗口的左上角（行，列）和右下角（行，列）坐标，并假定为栅格空间。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-AF7A14C3-3625-4AB3-992D-C9A19F1FBC43"><!-- --></a> layerList</dt>
                        <dd>
                           <p>一个数字数组，用于指定输入GeoRaster对象的哪些波段用于计算输出的统计值。例如，如果<code class="codeph">georArray</code>指定分别具有2,3,4个波段的三个GeoRaster对象<code class="codeph">geor1</code> ， <code class="codeph">geor2</code> ， <code class="codeph">geor3</code> ，则使用层列表{0,3,7}来指定三个波段，如下所示：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>第一个GeoRaster对象<code class="codeph">geor1</code>的第一个波段</p>
                              </li>
                              <li>
                                 <p>第二个GeoRaster对象的第二个波段<code class="codeph">geor2</code></p>
                              </li>
                              <li>
                                 <p>第三个GeoRaster对象<code class="codeph">geor3</code>的第三个波段</p>
                              </li>
                           </ul>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-3084B735-53CF-47E7-BA66-59A2ECF28B1C"><!-- --></a>方法</dt>
                        <dd>
                           <p>一个字符串，用于指定应返回的本地统计信息值。它应该是以下值之一： <code class="codeph">max</code> ， <code class="codeph">min</code> ， <code class="codeph">median</code> ， <code class="codeph">mean</code> ， <code class="codeph">std</code> ， <code class="codeph">sum</code> ， <code class="codeph">minority</code> ， <code class="codeph">majority</code> ， <code class="codeph">diversity</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-E1DC61E2-EE21-4BED-A926-792BDC5FD9F2"><!-- --></a> storageParam</dt>
                        <dd>
                           <p>指定存储参数的字符串，如<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中所述</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-53512AF6-CE93-4F42-922A-492F0A1B333A"><!-- --></a> outGeoRaster</dt>
                        <dd>
                           <p>输出GeoRaster对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-48888AF7-77DC-46A8-AC79-A5BD826C7F25"><!-- --></a> rasterBlob</dt>
                        <dd>
                           <p>BLOB保存处理结果的输出。它必须存在或在操作之前已初始化。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-E1F5957E-4805-4988-9F4D-B17AD964C048"><!-- --></a> outArea</dt>
                        <dd>
                           <p>一个SDO_GEOMETRY对象，包含结果对象的模型坐标系中的MBR（最小边界矩形）。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-0426C3EF-47CA-4188-A4F5-E8EB2EF6127A"><!-- --></a> outWindow</dt>
                        <dd>
                           <p>SDO_NUMBER_ARRAY对象，用于标识单元格空间中输出窗口的左上角和右下角的坐标。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-44D0AC19-1985-43E5-9FEB-85ECCB201F65"><!-- --></a> nodata</dt>
                        <dd>
                           <p>字符串<code class="codeph">TRUE</code>指定如果指定的<code class="codeph">layerList</code>参数中有任何NODATA单元格，则输出GeoRaster对象中的相应单元格将设置为为<code class="codeph">nodataValue</code>参数指定的值。字符串<code class="codeph">FALSE</code> （默认值）会将具有NODATA值的单元格视为常规数据。NODATA值和值范围中讨论<a href="georaster-overview-and-concepts.html#GUID-3F2FCF41-FDE6-434F-A318-93E0667C927D" title="NODATA值用于其值未知或无意义的单元格。">NODATA值和值范围</a> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-58624E6C-2C3D-4A69-B567-6FFC3D4AE4B9"><!-- --></a> nodataValue</dt>
                        <dd>
                           <p>如果<code class="codeph">nodata</code>参数值为字符串<code class="codeph">TRUE</code>则用于设置NODATA单元格的值。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-9DEE29EA-EA28-4CCD-8830-A1963B598F10"><!-- --></a> parallelParam</dt>
                        <dd>
                           <p>指定操作的并行度。如果指定，则必须采用<code class="codeph">parallel=</code> <span class="italic">n</span>的形式，其中<span class="italic">n</span>大于1。数据库优化器使用此参数指定的并行度。如果未指定，则默认情况下不进行并行处理。（有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-8EC0357C-9089-448E-9ED0-1B33F36E8F3C" title="GeoRaster有两种类型的并行处理。">GeoRaster中的并行处理</a> 。）
                           </p>
                           <p>指定<code class="codeph">parallelParam</code>意味着您无法回滚此过程的结果，如使用说明中所述。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-2D613864-48B6-4A8D-A58D-C98CAB4EE7B1">使用说明</p>
                     <p>所有输入的GeoRaster对象必须具有相同的尺寸大小;否则，会生成ORA-13397错误。</p>
                     <p>如果指定<code class="codeph">parallelParam</code> ，则过程的某些执行单元作为自治事务运行，这意味着在过程运行时会提交某些更改，因此您无法回滚这些更改。如果未指定此参数，则可以回滚所有更改。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-90E78211-B677-4D22-8CF8-2E7BB7740F39__GUID-0603FBF4-FCCB-4FF1-8988-649764569C39">例子</p>
                     <p>以下示例对两个输入GeoRaster对象执行堆栈操作。输出是GeoRaster对象。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor1 SDO_GEORASTER; geor2 SDO_GEORASTER; geom mdsys.sdo_geometry; BEGIN geom：= sdo_geometry（2003,82394，NULL，sdo_elem_info_array（1,1003,1），sdo_ordinate_array（20283.775,1011087.9,18783.775,1008687.9,21783.775,1008687.9,22683.775 + 0.001,1009587.9 + 0.001,20283.775,1011087.9））;从Georaster_table中选择georaster到geor，其中georid = 100;从georaster_table中选择georaster到geor2，其中georid = 102;从georaster_table中选择georaster到geor1，其中georid = 101进行更新; sdo_geor_ra.stack（SDO_GEORASTER_ARRAY（geor，geor2）的geom，SDO_NUMBER_ARRAY（3,5）， '最大'，NULL，geor1， '假'，0， 'TRUE'）;更新georaster_table set georaster = geor1 where georid = 101;结束; /</pre><p>以下示例对两个输入GeoRaster对象执行堆栈操作。输出是BLOB。</p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geor2 SDO_GEORASTER; geom sdo_geometry; out_lob BLOB; outArea sdo_geometry; outWindow sdo_number_array; BEGIN geom：= null;从Georaster_table中选择georaster到geor，其中georid = 100;从georaster_table中选择georaster到geor2，其中georid = 102; dbms_lob.create_temporary（out_lob，TRUE）; sdo_geor_ra.stack（SDO_GEORASTER_ARRAY（geor，geor2），geom，SDO_NUMBER_ARRAY（3,5），'max'，null，out_lob，outArea，outWindow）;如果outWindow不为null则为dbms_output.put_line（'输出窗口：（'|| outWindow（1）||'，'|| outWindow（2）||'，'|| outWindow（3）||'，'| | outWindow（4）||'）'）;万一; dbms_lob.freeTemporary（out_lob）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="05995.asmcmd-instance-commands.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This topic provides a summary of the ASMCMD instance management commands."></meta>
      <meta name="description" content="This topic provides a summary of the ASMCMD instance management commands."></meta>
      <title>ASMCMD实例管理命令</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="This topic provides a summary of the ASMCMD instance management commands."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="about-asmcmd.html" title="Previous" type="text/html"></link>
      <link rel="next" href="asmcmd-cluster-commands.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-asmcmd.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="asmcmd-cluster-commands.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-instance-diskgroup.html" property="item" typeof="WebPage"><span property="name">Oracle ASM实例和磁盘组</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manage-asm-asmcmd.html" property="item" typeof="WebPage"><span property="name">使用ASMCMD管理Oracle ASM</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ASMCMD实例管理命令</li>
            </ol>
            <a id="GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF" name="GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF"></a><a id="OSTMG94372"></a><a id="OSTMG01642"></a>
            
            <h2 id="OSTMG-GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF" class="sect2">ASMCMD实例管理命令</h2>
         </header>
         <div class="ind">
            <div>
               <p>本主题提供ASMCMD实例管理命令的摘要。</p>
               <p>本节中的某些命令会影响网格即插即用（GPnP）配置文件，该配置文件是群集配置中的资源。在Oracle Restart配置中，配置文件实际位于资源属性中，而不是网格即插即用（GPnP）配置文件中。但是，两种配置的命令功能相同。</p>
               <div class="infoboxnote" id="GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF__AFTERACHANGEHASBEENMADETOTHELOCATIO-CC6A2A32">
                  <p class="notep1">注意：</p>
                  <p>在对密码文件的位置进行更改后，应执行以下SQL语句以刷新密码文件元数据缓存。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM FLUSH PASSWORDFILE_METADATA_CACHE</pre><p>可以通过运行<code class="codeph">orapwd</code>或ASMCMD <code class="codeph">pwcopy</code> ， <code class="codeph">pwcreate</code> ， <code class="codeph">pwdelete</code> ， <code class="codeph">pwmove</code>或<code class="codeph">pwset</code>命令来更改密码文件的位置。
                  </p>
               </div>
               <div class="infoboxnotealso" id="GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF__GUID-D2FBC937-0A3E-435D-B694-BE147FB6E7ED">
                  <p class="notep1">也可以看看：</p>
                  <p>有关安装和配置Oracle Grid Infrastructure的信息，请<a href="../install-and-upgrade.html" target="_blank"><span><cite>参见</cite></span></a>适用于您的操作系统的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></p>
               </div>
               <p><a href="asmcmd-instance-commands.html#GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF__CIHIJGJF" title="ASMCMD实例管理命令的摘要">表10-4</a>列出了Oracle ASM实例管理命令以及简要说明。
               </p>
               <div class="tblformalwide" id="GUID-A2DBFB13-4AB7-4777-BC42-CC163EA1C9DF__CIHIJGJF">
                  <p class="titleintable">表10-4 ASMCMD实例管理命令摘要</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="ASMCMD实例管理命令摘要" width="100%" border="1" summary="Summary of the ASMCMD instance management commands" frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="32%" id="d69575e200">命令</th>
                           <th align="left" valign="bottom" width="68%" id="d69575e203">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e208" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-33ECC9A3-2BF7-4986-A281-D265953DB834">DSGET</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e208 d69575e203 ">
                              <p>检索Oracle ASM实例及其客户端使用的发现diskstring值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e216" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4">dsset</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e216 d69575e203 ">
                              <p>设置Oracle ASM实例及其客户端使用的磁盘发现diskstring值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e224" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25">LSCT</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e224 d69575e203 ">
                              <p>列出有关当前Oracle ASM客户端的信息。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e232" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF">LSOP</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e232 d69575e203 ">
                              <p>列出磁盘组或Oracle ASM实例上的当前操作。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e240" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-195A17A3-2D37-42BF-B0FD-D6389471244E">lspwusr</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e240 d69575e203 ">
                              <p>列出Oracle ASM密码文件中的用户。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e248" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B">orapwusr</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e248 d69575e203 ">
                              <p>添加，删除或更改Oracle ASM密码用户。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e256" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39">pwcopy</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e256 d69575e203 ">
                              <p>将密码文件复制到指定位置。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e264" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-657284FD-EC25-46FB-A47B-730BF4BD9960">pwcreate</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e264 d69575e203 ">
                              <p>在指定位置创建密码文件。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e272" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD">pwdelete</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e272 d69575e203 ">
                              <p>删除指定位置的密码文件。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e280" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6">pwget</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e280 d69575e203 ">
                              <p>返回密码文件的位置。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e288" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8">pwmove</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e288 d69575e203 ">
                              <p>移动密码文件的位置。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e297" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-788AD581-4C76-4B88-B93C-D0BB4206D355">pwset</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e297 d69575e203 ">
                              <p>设置密码文件的位置。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e305" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E">showclustermode</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e305 d69575e203 ">
                              <p>显示Oracle ASM群集的当前模式。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e313" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-0773B234-1D02-4D27-9082-B526D13CCA73">showclusterstate</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e313 d69575e203 ">
                              <p>显示集群的当前状态。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e321" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F">showpatches</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e321 d69575e203 ">
                              <p>列出应用于Oracle Grid Infrastructure主目录的修补程序。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e329" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5">的showversion</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e329 d69575e203 ">
                              <p>显示Oracle ASM群集发行版和软件修补程序级别。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e337" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12">关掉</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e337 d69575e203 ">
                              <p>关闭一个实例。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e345" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC">spbackup</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e345 d69575e203 ">
                              <p>备份Oracle ASM SPFILE。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e353" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8">spcopy</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e353 d69575e203 ">
                              <p>复制Oracle ASM SPFILE。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e361" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-517B4BFC-83B6-4371-8286-C23410C5C559">spget</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e361 d69575e203 ">
                              <p>检索Oracle ASM SPFILE的位置。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e369" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-05F55D3C-F582-481E-8C23-A58E16260DAD">spmove</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e369 d69575e203 ">
                              <p>移动Oracle ASM SPFILE。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e377" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7">spset</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e377 d69575e203 ">
                              <p>设置Oracle ASM SPFILE的位置。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="32%" id="d69575e386" headers="d69575e200 ">
                              <p><a href="asmcmd-instance-commands.html#GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84">启动</a></p>
                           </td>
                           <td align="left" valign="top" width="68%" headers="d69575e386 d69575e203 ">
                              <p>启动一个实例。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="OSTMG94374"></a><a id="OSTMG94375"></a><a id="OSTMG94376"></a><a id="OSTMG94377"></a><a id="OSTMG94378"></a><a id="OSTMG94373"></a><div class="props_rev_3"><a id="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834" name="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834"></a><h3 id="OSTMG-GUID-33ECC9A3-2BF7-4986-A281-D265953DB834" class="sect3">DSGET</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834__GUID-66E851E7-9BBE-403D-9664-C2F63C69CCF7">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>检索Oracle ASM实例及其客户端使用的发现diskstring值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834__GUID-2CF67349-71E0-4224-89FC-CE7CF12926BB">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">dsget [ -  normal | - 参数| --profile [-f]]</pre><p><a href="asmcmd-instance-commands.html#GUID-33ECC9A3-2BF7-4986-A281-D265953DB834__CIHHHJJB" title="此表列出了dsget命令的选项以及说明">表10-5</a>中描述了<code class="codeph">dsget</code>命令的语法选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834__CIHHHJJB">
                     <p class="titleintable">表10-5 dsget命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="dsget命令的选项" width="100%" border="1" summary="This table lists the options for the dsget command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e577">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e580">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e585" headers="d69575e577 ">
                                 <p><code class="codeph">- 正常</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e585 d69575e580 ">
                                 <p>从Grid即插即用（GPnP）配置文件中检索发现字符串，以及在Oracle ASM实例中设置的配置文件。它为配置文件和参数设置返回一行。这是默认设置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e593" headers="d69575e577 ">
                                 <p><code class="codeph">- 参数</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e593 d69575e580 ">
                                 <p>检索Oracle ASM实例的<code class="codeph">ASM_DISKSTRING</code>参数设置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e604" headers="d69575e577 ">
                                 <p><code class="codeph">--profile</code> [ <code class="codeph">-f</code> ]</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e604 d69575e580 ">
                                 <p>从GPnP配置文件中检索发现字符串。如果使用<code class="codeph">--profile</code>指定<code class="codeph">-f</code> ，则<code class="codeph">dsget</code>将从本地GPnP配置文件中检索发现字符串。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834__GUID-2FDF7E81-3872-46FA-9434-34F03DA54F68">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例使用<code class="codeph">dsget</code>从GPnP配置文件和<code class="codeph">ASM_DISKSTRING</code>参数中检索当前发现diskstring值。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-33ECC9A3-2BF7-4986-A281-D265953DB834__GUID-A4182051-1A3C-423A-A199-30C9BD84BC4E">
                     <p class="titleinexample">示例10-6使用ASMCMD dsget命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; dsget配置文件：/ devices1 / disk *参数：/ devices2 / disk *</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94380"></a><a id="OSTMG94381"></a><a id="OSTMG94382"></a><a id="OSTMG94383"></a><a id="OSTMG94384"></a><a id="OSTMG94379"></a><div class="props_rev_3"><a id="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4" name="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4"></a><h3 id="OSTMG-GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4" class="sect3">dsset</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4__GUID-E1248BE3-96A3-4CE5-A46A-0FBB0F9DB724">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>设置Oracle ASM实例及其客户端使用的发现diskstring值。</p>
                     <p>指定的diskstring必须对现有已装入的磁盘组有效。更新后的值立即生效。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4__GUID-A2BA5278-EE23-4C30-A850-4E78C3D790CA">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">dsset [ -  normal | - 参数| --profile [-f]] <span class="italic">diskstring</span></pre><p><a href="asmcmd-instance-commands.html#GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4__CIHCCJDD" title="此表列出了dsset命令的选项以及说明">表10-6</a>中描述了<code class="codeph">dsset</code>命令的语法选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4__CIHCCJDD">
                     <p class="titleintable">表10-6 dsset命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="dsset命令的选项" width="100%" border="1" summary="This table lists the options for the dsset command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e830">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e833">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e838" headers="d69575e830 ">
                                 <p><code class="codeph">- 正常</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e838 d69575e833 ">
                                 <p>在Grid即插即用（GPnP）配置文件和Oracle ASM实例中设置发现字符串。在Oracle ASM实例成功验证指定的发现字符串已发现所有必需的磁盘组和表决文件之后，将进行更新。如果实例未使用服务器参数文件（SPFILE），则此命令将失败。</p>
                                 <p>这是默认设置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e848" headers="d69575e830 ">
                                 <p><code class="codeph">- 参数</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e848 d69575e833 ">
                                 <p>指定在验证发现磁盘串发现所有当前装入的磁盘组和表决文件后，磁盘串在内存中更新。disktring不会持久记录在SPFILE或GPnP配置文件中。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e856" headers="d69575e830 ">
                                 <p><code class="codeph">--profile</code> [ <code class="codeph">-f</code> ]</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e856 d69575e833 ">
                                 <p>指定在未经Oracle ASM实例验证的情况下推送到GPnP配置文件的发现磁盘字符串，确保实例可以发现所有必需的磁盘组。保证更新传播到属于群集的所有节点。</p>
                                 <p>如果使用<code class="codeph">--profile</code>指定<code class="codeph">-f</code> ，则指定的diskstring将被推送到本地GPnP配置文件，而不与集群中的其他节点进行任何同步。此命令选项仅更新本地配置文件。此选项仅应用于恢复。如果Oracle Clusterware堆栈正在运行，该命令将失败。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e876" headers="d69575e830 ">
                                 <p><span class="italic"><code class="codeph">diskstring</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e876 d69575e833 ">
                                 <p>指定发现diskstring的值。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>有关磁盘发现和发现磁盘字符串的信息，请参阅<a href="asm-disk-discovery.html#GUID-75533657-85B0-4614-B489-C25DC150CA1D" title="磁盘发现是用于查找Oracle ASM可以访问的磁盘的操作系统名称的机制。">Oracle ASM磁盘发现</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4__GUID-067A3F62-A9B3-4B72-B201-B94F55D07A09">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>下面的示例使用<code class="codeph">dsset</code>设置在GPnP轮廓发现diskstring的当前值。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2843EAD5-1FD5-4AB9-AA0F-5421E99245A4__GUID-DB6A1DFA-7E34-41F8-9A76-33AA6BA647FD">
                     <p class="titleinexample">示例10-7使用ASMCMD dsset命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; dsset / devices1 / disk *，/ devices2 / disk *</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94386"></a><a id="OSTMG94387"></a><a id="OSTMG94388"></a><a id="OSTMG94389"></a><a id="OSTMG94390"></a><a id="OSTMG94385"></a><div class="props_rev_3"><a id="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25" name="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25"></a><h3 id="OSTMG-GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25" class="sect3">LSCT</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25__GUID-919D88B4-C9BF-49C8-AEB4-5CAC57955825">目的</p>
                     <p>从<code class="codeph">V$ASM_CLIENT</code>视图列出有关当前Oracle ASM客户端的信息。客户端（如Oracle数据库或Oracle ASM动态卷管理器（Oracle ADVM））使用由ASMCMD当前连接的Oracle ASM实例管理的磁盘组。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25__GUID-A6F885F3-A246-478A-B197-C36498FCFC7C">语法和说明</p><pre class="oac_no_warn" dir="ltr">lsct [--suppressheader] [-g] <span class="italic">disk_group</span></pre><p>下表列出了<code class="codeph">lsct</code>命令的选项。
                     </p>
                     <div class="tblformal" id="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25__CIHHECGB">
                        <p class="titleintable">表10-7 lsct命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="lsct命令的选项" width="100%" border="1" summary="This table lists the flags for the lsct command, along with a description for each" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d69575e1089">选项</th>
                                 <th align="left" valign="bottom" width="75%" id="d69575e1092">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d69575e1097" headers="d69575e1089 ">
                                    <p><code class="codeph">-G</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d69575e1097 d69575e1092 ">
                                    <p>从<code class="codeph">GV$ASM_CLIENT</code>视图中选择。<code class="codeph">GV$ASM_CLIENT.INST_ID</code>包含在输出中。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d69575e1111" headers="d69575e1089 ">
                                    <p><code class="codeph">--suppressheader</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d69575e1111 d69575e1092 ">
                                    <p>禁止列标题。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d69575e1119" headers="d69575e1089 ">
                                    <p><span class="italic"><code class="codeph">DISK_GROUP</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d69575e1119 d69575e1092 ">
                                    <p>指定磁盘组。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>仅列出指定磁盘组的客户端信息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25__GUID-75D18EA4-887E-4D89-908C-3478094AC961">例</p>
                     <p>以下示例显示有关正在访问<code class="codeph">data</code>磁盘组的客户端的信息。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-ED8E02B1-8BF5-44CF-9CB7-7653008F5B25__GUID-C0165CC1-6278-4065-BD6A-120A6326237A">
                     <p class="titleinexample">示例10-8使用ASMCMD lsct命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; lsct数据DB_Name状态Software_Version Compatible_version Instance_Name Disk_Group + ASM CONNECTED 19.0.0.0.0 19.0.0.0.0 + ASM DATA asmvol CONNECTED 19.0.0.0.0 19.0.0.0.0 + ASM DATA orcl CONNECTED 19.0.0.0。 0 19.0.0.0.0 orcl DATA</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94392"></a><a id="OSTMG94393"></a><a id="OSTMG94394"></a><a id="OSTMG94395"></a><a id="OSTMG94391"></a><div class="props_rev_3"><a id="GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF" name="GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF"></a><h3 id="OSTMG-GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF" class="sect3">LSOP</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF__GUID-46A7376F-EED2-4739-9CA7-1542A6351FFA">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>列出Oracle ASM实例中磁盘组的当前操作。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF__GUID-81F16E43-C19D-40C8-BF55-890A718CE243">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">LSOP</pre><p><code class="codeph">lsop</code>显示<code class="codeph">V$ASM_OPERATION</code>视图中的信息。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF__GUID-EBB44435-6AA9-4DDF-8116-9EDAA4687458">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">lsop</code>命令的示例。这些示例列出了当前Oracle ASM实例的磁盘组上的操作。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-2D0BE995-BF3A-4A11-9C06-6F0E22FC77DF__GUID-6B87A612-8187-4EB9-8202-52820A791DA9">
                     <p class="titleinexample">示例10-9使用ASMCMD lsop命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; lsop Group_Name Dsk_Num状态电源数据REBAL等待2 ASMCMD [+]&gt; lsop Group_Name Dsk_Num状态电源FRA REBAL REAP 3</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94397"></a><a id="OSTMG94398"></a><a id="OSTMG94399"></a><a id="OSTMG94400"></a><a id="OSTMG94401"></a><a id="OSTMG94396"></a><div class="props_rev_3"><a id="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E" name="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E"></a><h3 id="OSTMG-GUID-195A17A3-2D37-42BF-B0FD-D6389471244E" class="sect3">lspwusr</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E__GUID-5C77BEDF-AC59-432D-9D2D-3BA547094B08">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>列出本地Oracle ASM密码文件中的用户。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E__GUID-F29485A5-3418-455F-B4B9-D99546152755">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">lspwusr [--suppressheader]</pre><p> <a href="asmcmd-instance-commands.html#GUID-195A17A3-2D37-42BF-B0FD-D6389471244E__CIHIFAGJ" title="lspwusr ASMCMD选项">表10-8</a>列出了<code class="codeph">lspwusr</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E__CIHIFAGJ">
                     <p class="titleintable">表10-8 lspwusr命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="lspwusr命令的选项" width="100%" border="1" summary="lspwusr ASMCMD options" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e1511">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e1514">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1519" headers="d69575e1511 ">
                                 <p><code class="codeph">--suppressheader</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1519 d69575e1514 ">
                                 <p>从输出中抑制列标题。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E__GUID-A77B62C1-2E4A-4C27-84C4-DE8C1FDF162B">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">lspwusr</code>示例的示例。该示例列出了本地Oracle ASM密码文件中的当前用户。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-195A17A3-2D37-42BF-B0FD-D6389471244E__GUID-5FA07875-53AB-4F18-AE9C-E519C2D9C583">
                     <p class="titleinexample">示例10-10使用ASMCMD lspwusr命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; lspwusr用户名sysdba sysoper sysasm SYS TRUE TRUE，ASMSNMP TRUE FALSE FALSE</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94403"></a><a id="OSTMG94404"></a><a id="OSTMG94405"></a><a id="OSTMG94406"></a><a id="OSTMG94407"></a><a id="OSTMG94402"></a><div class="props_rev_3"><a id="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B" name="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B"></a><h3 id="OSTMG-GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B" class="sect3">orapwusr</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B__GUID-595B51C4-2A97-4564-BC98-ECAC45428222">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>添加，删除或修改Oracle ASM密码文件用户。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B__GUID-39606361-493A-46D7-8978-07DFFAD9BC7B">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">orapwusr {--add | - 修改| - 删除| grant {sysasm | sysdba | sysoper} | --revoke {sysasm | sysdba | sysoper}} <span class="italic">用户</span></pre><p> <a href="asmcmd-instance-commands.html#GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B__CIHJFECG" title="orapwusr ASMCMD选项">表10-9</a>列出了<code class="codeph">orapwusr</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B__CIHJFECG">
                     <p class="titleintable">表10-9 orapwusr命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="orapwusr命令的选项" width="100%" border="1" summary="orapwusr ASMCMD options" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e1726">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e1729">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1734" headers="d69575e1726 ">
                                 <p><code class="codeph">- 加</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1734 d69575e1729 ">
                                 <p>将用户添加到密码文件。还提示输入密码。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1742" headers="d69575e1726 ">
                                 <p><code class="codeph">- 修改</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1742 d69575e1729 ">
                                 <p>更改指定用户的密码。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1750" headers="d69575e1726 ">
                                 <p><code class="codeph">- 删除</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1750 d69575e1729 ">
                                 <p>从密码文件中删除用户。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1758" headers="d69575e1726 ">
                                 <p><code class="codeph">--grant</code> <span class="italic"><code class="codeph">role</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1758 d69575e1729 ">
                                 <p>设置用户的角色。选项是<code class="codeph">sysasm</code> ， <code class="codeph">sysdba</code>和<code class="codeph">sysoper</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1779" headers="d69575e1726 ">
                                 <p><code class="codeph">--revoke</code> <span class="italic"><code class="codeph">role</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1779 d69575e1729 ">
                                 <p>删除用户的角色。选项是<code class="codeph">sysasm</code> ， <code class="codeph">sysdba</code>和<code class="codeph">sysoper</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e1800" headers="d69575e1726 ">
                                 <p><span class="italic"><code class="codeph">用户</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e1800 d69575e1729 ">
                                 <p>要添加，删除或修改的用户的名称。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">orapwusr</code>尝试更新群集中所有节点上的密码。此命令需要运行SYSASM权限。以SYSDBA身份登录的用户无法使用此命令更改其密码。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B__GUID-858EF287-EF28-47DD-942E-5B88E1D86D1A">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">orapwusr</code>命令的示例。此示例将<code class="codeph">hruser</code>添加到Oracle ASM密码文件中。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9BB2383C-2020-4F7D-A60F-0DB87D90FB9B__GUID-19913818-85AB-4704-98DB-B1B6508AD2FD">
                     <p class="titleinexample">示例10-11使用ASMCMD orapwusr命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; orapwusr  - 加入hruser</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95355"></a><a id="OSTMG95356"></a><a id="OSTMG95357"></a><a id="OSTMG95358"></a><a id="OSTMG95359"></a><a id="OSTMG95354"></a><div class="props_rev_3"><a id="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39" name="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39"></a><h3 id="OSTMG-GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39" class="sect3">pwcopy</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39__GUID-02FC455A-2CCE-4CE7-8480-FEBCFEE8B9E4">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将Oracle ASM或数据库实例密码文件复制到指定位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39__GUID-F21E7017-4CC9-4EEB-BEE3-1A1F3B8B90EA">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">pwcopy [--asm | --dbuniquename <span class="italic">string</span> ] <span class="italic">source</span> <span class="italic">destination</span> [-f]</pre><p><a href="asmcmd-instance-commands.html#GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39__BJEDHDAG" title="此表列出了pwcopy命令的选项以及说明">表10-10</a>列出了<code class="codeph">pwcopy</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39__BJEDHDAG">
                     <p class="titleintable">表10-10 pwcopy命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="pwcopy命令的选项" width="100%" border="1" summary="This table lists the options for the pwcopy command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e2022">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e2025">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2030" headers="d69575e2022 ">
                                 <p><code class="codeph">--asm</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2030 d69575e2025 ">
                                 <p><code class="codeph">--asm</code>选项将密码文件与ASMCMD登录的Oracle ASM实例相关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2041" headers="d69575e2022 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2041 d69575e2025 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span>选项标识与密码文件关联的数据库唯一名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2060" headers="d69575e2022 ">
                                 <p><span class="italic"><code class="codeph">资源</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2060 d69575e2025 ">
                                 <p><span class="italic"><code class="codeph">source</code></span>值标识现有密码文件所在的位置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2073" headers="d69575e2022 ">
                                 <p><span class="italic"><code class="codeph">目的地</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2073 d69575e2025 ">
                                 <p>该<span class="italic"><code class="codeph">destination</code></span>值标识要复制的密码文件的位置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2086" headers="d69575e2022 ">
                                 <p><code class="codeph">-F</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2086 d69575e2025 "><code class="codeph">—f</code>选项可以在不进行任何检查的情况下复制密码文件。
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">pwcopy</code>将密码文件从一个磁盘组复制到另一个磁盘组，从操作系统复制到磁盘组，或从磁盘组复制到操作系统。如果指定了<code class="codeph">—f</code>选项，则可以将密码文件复制到同一磁盘组。
                     </p>
                     <p>需要<code class="codeph">–-asm</code>或 - <code class="codeph">-dbuniquename</code>来标识CRSD资源。当<code class="codeph">pwcopy</code>命令中包含<code class="codeph">–-asm</code>或 - <code class="codeph">-dbuniquename</code> ，目标文件将设置为当前密码文件。
                     </p>
                     <p>对于要复制密码的磁盘组， <code class="codeph">compatible.asm</code>磁盘组属性必须设置为<code class="codeph">12.1</code>或更高。
                     </p>
                     <p>需要<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能管理Oracle ASM和数据库密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39__GUID-DD805D12-03B9-49FF-9DDC-F6BB8E74A43F">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例将一个磁盘组中的Oracle ASM密码文件复制到另一个磁盘组。由于<code class="codeph">pwcopy</code>命令包含<code class="codeph">--asm</code>选项，因此目标文件（ <code class="codeph">+fra/orapwasm_new</code> ）将设置为当前密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-70D58CAB-BFA4-4055-8768-7C12D61D9A39__GUID-00D4D673-F34F-4943-AD4E-92FAB7D8FE76">
                     <p class="titleinexample">示例10-12使用ASMCMD pwcopy命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; pwcopy --asm + DATA / orapwasm + FRA / orapwasm_new复制+ DATA / orapwasm  - &gt; + FRA / orapwasm_new</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95361"></a><a id="OSTMG95362"></a><a id="OSTMG95363"></a><a id="OSTMG95364"></a><a id="OSTMG95365"></a><a id="OSTMG95360"></a><div class="props_rev_3"><a id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960" name="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960"></a><h3 id="OSTMG-GUID-657284FD-EC25-46FB-A47B-730BF4BD9960" class="sect3">pwcreate</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__GUID-6AFBD629-5628-47A4-8B71-8A80F79D2835">目的</p>
                     <div class="infoboxnote" id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__DONOTUSEPWCREATETOCREATEANEWORACLEA-AF2C845C">
                        <p class="notep1">注意：</p>
                        <p>在群集中配置Oracle ASM时，请勿使用<code class="codeph">pwcreate</code>创建新的Oracle ASM密码文件。如果群集配置中无法访问Oracle ASM密码文件，则必须使用可用备份还原密码文件，而不是创建新文件。有关在群集中重新创建共享Oracle ASM密码文件的文章（如文档1929673.1），请参阅<a href="https://support.oracle.com" target="_blank">My Oracle Support</a> （ <a href="https://support.oracle.com" target="_blank"><code class="codeph">https://support.oracle.com</code></a> ）上的文章。</p>
                     </div>
                     <p>在指定位置创建Oracle ASM或Oracle数据库实例密码文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__GUID-2A75C083-1C47-445E-8431-686CCE21837C">语法和说明</p><pre class="oac_no_warn" dir="ltr">pwcreate {--asm | --dbuniquename <span class="italic">string</span> } [-f] [--format <span class="italic">format</span> ] <span class="italic">file_path</span> [ <span class="italic">sys_password</span> ]</pre><p><a href="asmcmd-instance-commands.html#GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__BJEFJGIJ" title="此表列出了pwcreate命令的选项以及说明">表10-11</a>列出了<code class="codeph">pwcreate</code>命令的选项。
                     </p>
                     <div class="tblformal" id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__BJEFJGIJ">
                        <p class="titleintable">表10-11 pwcreate命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="pwcreate命令的选项" width="100%" border="1" summary="This table lists the options for the pwcreate command, along with a description" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d69575e2365">选项</th>
                                 <th align="left" valign="bottom" width="69%" id="d69575e2368">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e2373" headers="d69575e2365 ">
                                    <p><code class="codeph">--asm</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e2373 d69575e2368 ">
                                    <p>将密码文件与ASMCMD登录的Oracle ASM实例相关联。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e2381" headers="d69575e2365 ">
                                    <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e2381 d69575e2368 ">
                                    <p>指定与密码文件关联的Oracle数据库唯一名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e2393" headers="d69575e2365 ">
                                    <p><code class="codeph">-F</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e2393 d69575e2368 ">
                                    <p>强制删除现有密码文件并创建新密码文件。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e2401" headers="d69575e2365 ">
                                    <p><code class="codeph">--format</code> <span class="italic"><code class="codeph">format</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e2401 d69575e2368 ">
                                    <p>指定创建密码的格式。值为<code class="codeph">12</code>和<code class="codeph">12.2</code> 。如果未指定，则<code class="codeph">12.2</code>是默认值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e2422" headers="d69575e2365 ">
                                    <p><span class="italic"><code class="codeph">文件路径</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e2422 d69575e2368 ">
                                    <p>指定创建密码文件的位置。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e2431" headers="d69575e2365 ">
                                    <p><span class="italic"><code class="codeph">sys_password</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e2431 d69575e2368 ">
                                    <p>指定初始<code class="codeph">SYS</code>密码。如果省略此选项，则会提示您输入密码。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">pwcreate</code>在<span class="italic"><code class="codeph">file_path</code></span>指定的磁盘组中创建密码文件。初始<code class="codeph">SYS</code>密码由<span class="italic"><code class="codeph">sys_password</code></span>指定。
                     </p>
                     <p>要么是<code class="codeph">–-asm</code> ， <code class="codeph">-dbuniquename</code>是<code class="codeph">-dbuniquename</code> 。对于要设置密码的磁盘组， <code class="codeph">compatible.asm</code>磁盘组属性必须设置为<code class="codeph">12.1</code>或更高。
                     </p>
                     <p>需要<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能管理Oracle ASM和数据库密码文件。
                     </p>
                     <p>有关其他信息，请参阅<a href="authenticate-access-asm-instance.html#GUID-DB3721CE-B1F4-4FB4-B290-B6D33BEAA5F2" title="您可以备份Oracle ASM密码文件，如果Oracle ASM密码文件丢失或磁盘组无法访问，则可以还原备份密码文件。">管理磁盘组中的共享密码文件</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__GUID-8D3E0F3B-5C31-4219-ADAE-CDCD26BD207A">例</p>
                     <p>以下示例在Oracle ASM磁盘组中创建Oracle数据库密码文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-657284FD-EC25-46FB-A47B-730BF4BD9960__GUID-3DC8EEBD-7453-4361-9323-A546E9461DA5">
                     <p class="titleinexample">示例10-13使用ASMCMD pwcreate命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; pwcreate --dbuniquename orcl'+ data / ORCL / orapwdb'输入SYS的密码：</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95367"></a><a id="OSTMG95368"></a><a id="OSTMG95369"></a><a id="OSTMG95370"></a><a id="OSTMG95371"></a><a id="OSTMG95366"></a><div class="props_rev_3"><a id="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD" name="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD"></a><h3 id="OSTMG-GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD" class="sect3">pwdelete</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD__GUID-ABC05545-690F-4DF4-AA08-7F041425D7C3">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>删除Oracle ASM或数据库实例密码文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD__GUID-7EC58C87-0829-4583-BF41-3C34C1534CF1">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">pwdelete {--asm | --dbuniquename <span class="italic">string</span> | <span class="italic">file_path</span> }</pre><p><a href="asmcmd-instance-commands.html#GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD__BJEIBIFB" title="此表列出了pwcreate命令的选项以及说明">表10-12</a>列出了<code class="codeph">pwdelete</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD__BJEIBIFB">
                     <p class="titleintable">表10-12 pwdelete命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="pwdelete命令的选项" width="100%" border="1" summary="This table lists the options for the pwcreate command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e2687">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e2690">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2695" headers="d69575e2687 ">
                                 <p><code class="codeph">--asm</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2695 d69575e2690 ">
                                 <p><code class="codeph">--asm</code>选项将密码文件与ASMCMD登录的Oracle ASM实例相关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2706" headers="d69575e2687 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2706 d69575e2690 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span>选项标识与密码文件关联的数据库唯一名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2725" headers="d69575e2687 ">
                                 <p><span class="italic"><code class="codeph">文件路径</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2725 d69575e2690 ">
                                 <p><span class="italic"><code class="codeph">file_path</code></span>值标识密码文件所在的位置。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">pwdelete</code>删除指定的密码文件。需要<code class="codeph">–-asm</code>或 - <code class="codeph">-dbuniquename</code>来标识CRSD资源并从CRSD资源中删除密码位置。
                     </p>
                     <p>需要<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能管理Oracle ASM和数据库密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD__GUID-90EE9653-AC70-4C7E-9ECA-934997583201">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例从磁盘组中删除指定的密码文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-08C8A50C-DFD9-4CAF-B6F3-18380AC9DCBD__GUID-913A21FB-6EA3-4255-B5B1-63C476CA27AB">
                     <p class="titleinexample">示例10-14使用ASMCMD pwdelete命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; pwdelete + FRA / orapwasm_bak</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95373"></a><a id="OSTMG95374"></a><a id="OSTMG95375"></a><a id="OSTMG95376"></a><a id="OSTMG95377"></a><a id="OSTMG95372"></a><div class="props_rev_3"><a id="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6" name="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6"></a><h3 id="OSTMG-GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6" class="sect3">pwget</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6__GUID-5BF0AE06-47CB-4151-8CA8-F44D0C7C728F">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>返回Oracle ASM或数据库实例的密码文件的位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6__GUID-58B76589-3995-4596-AB4B-C1AC0F287645">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">pwget {--asm | --dbuniquename <span class="italic">string</span> }</pre><p><a href="asmcmd-instance-commands.html#GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6__BJEGIGBI" title="此表列出了pwget命令的选项以及说明">表10-13</a>列出了<code class="codeph">pwget</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6__BJEGIGBI">
                     <p class="titleintable">表10-13 pwget命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="pwget命令的选项" width="100%" border="1" summary="This table lists the options for the pwget command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e2953">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e2956">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2961" headers="d69575e2953 ">
                                 <p><code class="codeph">--asm</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2961 d69575e2956 ">
                                 <p><code class="codeph">--asm</code>选项将密码文件与ASMCMD登录的Oracle ASM实例相关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e2972" headers="d69575e2953 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e2972 d69575e2956 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span>选项标识与密码文件关联的数据库唯一名称。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">pwget</code>返回由<code class="codeph">–-asm</code>标识的Oracle ASM实例或由<code class="codeph">-dbuniquename</code>标识的数据库实例的密码文件的位置。
                     </p>
                     <p>需要<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能管理Oracle ASM和数据库密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6__GUID-8E66917C-F792-47A7-8FE2-AE14727FFF49">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例返回Oracle ASM密码文件的位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-A0A00173-DA44-43B2-92D4-72FF89ACB2A6__GUID-DB6F8F03-6E05-4ABB-8871-84EC6E2C48E1">
                     <p class="titleinexample">示例10-15使用ASMCMD pwget命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; pwget --asm + DATA / orapwasm</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95379"></a><a id="OSTMG95380"></a><a id="OSTMG95381"></a><a id="OSTMG95382"></a><a id="OSTMG95383"></a><a id="OSTMG95378"></a><div class="props_rev_3"><a id="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8" name="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8"></a><h3 id="OSTMG-GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8" class="sect3">pwmove</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8__GUID-AE0D7FB8-F3B2-4F05-9869-26980FD0546C">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将Oracle ASM或数据库实例密码文件移动到指定位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8__GUID-C83440C2-F694-4F68-A949-99CB77357544">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">pwmove {--asm | --dbuniquename <span class="italic">string</span> } <span class="italic">source</span> <span class="italic">destination</span> [-f]</pre><p><a href="asmcmd-instance-commands.html#GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8__BJEFFFJC" title="此表列出了pwmove命令的选项以及说明">表10-14</a>列出了<code class="codeph">pwmove</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8__BJEFFFJC">
                     <p class="titleintable">表10-14 pwmove命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="pwmove命令的选项" width="100%" border="1" summary="This table lists the options for the pwmove command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e3213">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e3216">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3221" headers="d69575e3213 ">
                                 <p><code class="codeph">--asm</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3221 d69575e3216 ">
                                 <p><code class="codeph">--asm</code>选项将密码文件与ASMCMD登录的Oracle ASM实例相关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3232" headers="d69575e3213 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3232 d69575e3216 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span>选项标识与密码文件关联的数据库唯一名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3251" headers="d69575e3213 ">
                                 <p><span class="italic"><code class="codeph">资源</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3251 d69575e3216 ">
                                 <p><span class="italic"><code class="codeph">source</code></span>值标识现有密码文件所在的位置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3264" headers="d69575e3213 ">
                                 <p><span class="italic"><code class="codeph">目的地</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3264 d69575e3216 ">
                                 <p>该<span class="italic"><code class="codeph">destination</code></span>值标识要移动的密码文件的位置。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3277" headers="d69575e3213 ">
                                 <p><code class="codeph">-F</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3277 d69575e3216 ">
                                 <p><code class="codeph">—f</code>选项清除任何关联资源的密码文件，并注册新文件。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">pwmove</code>将密码文件从一个磁盘组移动到另一个磁盘组，从操作系统移动到磁盘组，或从磁盘组移动到操作系统。如果指定了<code class="codeph">—f</code>选项，则可以将密码文件移动到同一磁盘组中的文件。
                     </p>
                     <p>需要<code class="codeph">–-asm</code>或 - <code class="codeph">-dbuniquename</code>来标识CRSD资源。
                     </p>
                     <p>对于要移动密码的磁盘组， <code class="codeph">compatible.asm</code>磁盘组属性必须设置为<code class="codeph">12.1</code>或更高。
                     </p>
                     <p>需要<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能管理Oracle ASM和数据库密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8__GUID-77E9D4A5-C043-4462-BCE5-461AB44B5680">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例将密码文件从一个磁盘组移动到另一个磁盘组。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6DFC9F42-A949-412F-B9F3-D947C1A620B8__GUID-481EFE2F-ACFD-42F8-9E81-AF327F0BEA73">
                     <p class="titleinexample">示例10-16使用ASMCMD pwmove命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; pwmove --asm + FRA / orapwasm_bak + DATA / orapwasm moving + FRA / orapwasm_bak  - &gt; + DATA / orapwasm</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95391"></a><a id="OSTMG95392"></a><a id="OSTMG95393"></a><a id="OSTMG95394"></a><a id="OSTMG95395"></a><a id="OSTMG95390"></a><div class="props_rev_3"><a id="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355" name="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355"></a><h3 id="OSTMG-GUID-788AD581-4C76-4B88-B93C-D0BB4206D355" class="sect3">pwset</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355__GUID-43BBB259-7A29-4106-8223-B3A6B9C8CB7A">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>设置Oracle ASM或数据库实例的密码文件的位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355__GUID-F1015F30-3491-497D-ADD4-9CFB0EB9E1AA">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">pwset {--asm | --dbuniquename <span class="italic">string</span> } <span class="italic">file_path</span></pre><p><a href="asmcmd-instance-commands.html#GUID-788AD581-4C76-4B88-B93C-D0BB4206D355__BJEDJBEJ" title="此表列出了pwset命令的选项以及说明">表10-15</a>列出了<code class="codeph">pwset</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355__BJEDJBEJ">
                     <p class="titleintable">表10-15 pwset命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="pwset命令的选项" width="100%" border="1" summary="This table lists the options for the pwset command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e3518">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e3521">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3526" headers="d69575e3518 ">
                                 <p><code class="codeph">--asm</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3526 d69575e3521 ">
                                 <p><code class="codeph">--asm</code>选项将密码文件与ASMCMD登录的Oracle ASM实例相关联。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3537" headers="d69575e3518 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3537 d69575e3521 ">
                                 <p><code class="codeph">--dbuniquename</code> <span class="italic"><code class="codeph">string</code></span>选项标识与密码文件关联的数据库唯一名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e3556" headers="d69575e3518 ">
                                 <p><span class="italic"><code class="codeph">文件路径</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e3556 d69575e3521 ">
                                 <p><span class="italic"><code class="codeph">file_path</code></span>值标识密码文件所在的位置。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">pwset</code>将Oracle ASM或数据库实例的密码文件的位置设置为<span class="italic"><code class="codeph">file_path</code></span>指定的值。<code class="codeph">-dbuniquename</code>或<code class="codeph">–-asm</code>是识别CRSD资源所必需的。
                     </p>
                     <p>需要<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能管理Oracle ASM和数据库密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355__GUID-1135B0BA-F098-4264-93CF-9B34A172825E">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例设置磁盘组中Oracle ASM密码文件的位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-788AD581-4C76-4B88-B93C-D0BB4206D355__GUID-C0695CDA-0076-415A-A496-5C58672BD639">
                     <p class="titleinexample">示例10-17使用ASMCMD pwset命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; pwset --asm + DATA / orapwasm</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95397"></a><a id="OSTMG95398"></a><a id="OSTMG95399"></a><a id="OSTMG95400"></a><a id="OSTMG95396"></a><div class="props_rev_3"><a id="GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E" name="GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E"></a><h3 id="OSTMG-GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E" class="sect3">showclustermode</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E__GUID-8F34883C-5979-4092-8D8B-B84137624193">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>显示Oracle ASM群集的当前模式。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E__GUID-6F6C2AA7-4BE1-4966-9F60-D63327B2CC5C">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">showclustermode</pre><p><code class="codeph">showclustermode</code>显示Oracle ASM集群当前<code class="codeph">showclustermode</code>的模式。可能的返回值是<span class="bold">ASM群集：启用Flex模式</span>或<span class="bold">ASM群集：禁用Flex模式</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E__GUID-D2E66A23-F62F-4B34-8EEB-8C5B05E13A10">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下示例显示了<code class="codeph">showclustermode</code>命令的<code class="codeph">showclustermode</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1C08000E-4CA4-4758-8595-EDFE24E5005E__GUID-299C6F38-6C61-4273-ACE7-005899F11C6D">
                     <p class="titleinexample">示例10-18使用ASMCMD showclustermode命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; showclustermode ASM集群：禁用Flex模式</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95407"></a><a id="OSTMG95408"></a><a id="OSTMG95410"></a><a id="OSTMG95411"></a><a id="OSTMG95406"></a><div class="props_rev_3"><a id="GUID-0773B234-1D02-4D27-9082-B526D13CCA73" name="GUID-0773B234-1D02-4D27-9082-B526D13CCA73"></a><h3 id="OSTMG-GUID-0773B234-1D02-4D27-9082-B526D13CCA73" class="sect3">showclusterstate</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-0773B234-1D02-4D27-9082-B526D13CCA73__GUID-1CD86BF4-2732-4DD5-AC73-91787B1490C2">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>显示集群的当前状态。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0773B234-1D02-4D27-9082-B526D13CCA73__GUID-A4CF5C9A-B590-41E8-9EC7-43E247EE7255">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">showclusterstate</pre><p><code class="codeph">showclusterstate</code>显示Oracle ASM集群当前<code class="codeph">showclusterstate</code>的状态。返回的可能值为<span class="bold">normal</span> ， <span class="bold">in-upgrade</span>或<span class="bold">in-rollingpatch</span>模式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0773B234-1D02-4D27-9082-B526D13CCA73__GUID-ACA74E3A-59FA-4914-891C-D4BF7F802398">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>此示例显示了<code class="codeph">showclusterstate</code>命令的<code class="codeph">showclusterstate</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-0773B234-1D02-4D27-9082-B526D13CCA73__GUID-DA45505F-5F24-4B2E-8AAE-766005EDA2C9">
                     <p class="titleinexample">示例10-19使用ASMCMD showclusterstate命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; showclusterstate</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95402"></a><a id="OSTMG95403"></a><a id="OSTMG95404"></a><a id="OSTMG95405"></a><a id="OSTMG95401"></a><div class="props_rev_3"><a id="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F" name="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F"></a><h3 id="OSTMG-GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F" class="sect3">showpatches</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F__GUID-8B73580D-F3F4-42B0-B32C-10F9B21BFE0D">目的</p>
                     <p>列出在Oracle Grid Infrastructure主目录上应用的修补程序。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F__GUID-0732847C-F56C-4061-BA11-4513F29196AA">语法和说明</p><pre class="oac_no_warn" dir="ltr">showpatches [-l]</pre><p>下表列出了<code class="codeph">showpatches</code>命令的选项。
                     </p>
                     <div class="tblformal" id="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F__OPTIONSFORTHESHOWPATHCHESCOMMAND-285D0659">
                        <p class="titleintable">表10-16 showpathches命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="showpathches命令的选项" width="100%" border="1" summary="This table lists the options for the showpatches command, along with a description" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d69575e4156">选项</th>
                                 <th align="left" valign="bottom" width="69%" id="d69575e4159">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e4164" headers="d69575e4156 ">
                                    <p><code class="codeph">-l</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e4164 d69575e4159 ">
                                    <p>显示有关补丁的所有详细信息。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><code class="codeph">showpatches</code>列出已应用于Oracle Grid Infrastructure主目录的修补程序。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F__GUID-E4F38DF3-2E2F-4CD0-B126-E5E70B1EDD9E">例</p>
                     <p>此示例显示了<code class="codeph">showpatches</code>命令的<code class="codeph">showpatches</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EB288E0B-253F-4F55-BCC3-80FC59F0C24F__GUID-2FA92A61-45DD-49BB-A6FD-8074AEC06F0D">
                     <p class="titleinexample">示例10-20使用ASMCMD showpatches命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; showpatches -l Oracle ASM版本补丁级别为[0]，并且未在本地节点上应用任何补丁。发布补丁字符串为[18.1.0.0.0]。
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95413"></a><a id="OSTMG95414"></a><a id="OSTMG95415"></a><a id="OSTMG95416"></a><a id="OSTMG95417"></a><a id="OSTMG95412"></a><div class="props_rev_3"><a id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5" name="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5"></a><h3 id="OSTMG-GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5" class="sect3">的showversion</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5__GUID-3264EA12-D776-466D-9A4F-02DA78F6F28F">目的</p>
                     <p>显示Oracle ASM集群发行版和软件的修补程序级别。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5__GUID-E2DB15CD-5503-493D-8DCF-95AC5DF2AD2D">语法和说明</p><pre class="oac_no_warn" dir="ltr">showversion [[[--releasepatch] [--softwarepatch]] | [ - 活性]]</pre><p>下表列出了<code class="codeph">showversion</code>命令的选项。
                     </p>
                     <div class="tblformal" id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5__BJECEBDI">
                        <p class="titleintable">表10-17 showversion命令的选项</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="showversion命令的选项" width="100%" border="1" summary="This table lists the options for the showversion command, along with a description" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d69575e4365">选项</th>
                                 <th align="left" valign="bottom" width="69%" id="d69575e4368">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e4373" headers="d69575e4365 ">
                                    <p><code class="codeph">--releasepatch</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e4373 d69575e4368 ">
                                    <p>显示集群级别修补程序版本。</p>
                                    <p>请改用<code class="codeph">asmcmd</code> <code class="codeph">showversion</code> <code class="codeph">--active</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e4392" headers="d69575e4365 ">
                                    <p><code class="codeph">--softwarepatch</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e4392 d69575e4368 ">
                                    <p>显示本地节点上的补丁级别。</p>
                                    <p>请改用<code class="codeph">asmcmd</code> <code class="codeph">showpatches</code> <code class="codeph">-l</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d69575e4411" headers="d69575e4365 ">
                                    <p><code class="codeph">- 活性</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d69575e4411 d69575e4368 ">
                                    <p>显示活动版本和活动补丁级别</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><code class="codeph">showversion</code>显示Oracle ASM集群版本和软件补丁级别。根据是否正在修补Oracle ASM或Oracle Grid Infrastructure主目录，发行版和软件修补程序选项可能会有所不同。
                     </p>
                     <div class="infoboxnote" id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5__GUID-34869262-D43F-4F5F-A314-876A905F83D8">
                        <p class="notep1">注意：</p>
                        <p>在<code class="codeph">releasepatch</code> Oracle Grid Infrastructure或Oracle ASM主目录时， <code class="codeph">releasepatch</code>和<code class="codeph">softwarepatch</code>选项可能会有所不同。在正常模式下，选项应该相同。如果未连接Oracle ASM实例，则不会显示发布修补程序信息。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5__GUID-89C21559-8F21-4DD6-93A4-4B257C75ECE8">例</p>
                     <p>此示例显示了<code class="codeph">showversion</code>命令的<code class="codeph">showversion</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F1840CF7-EA88-41B6-992C-4058FF6FE4D5__GUID-977D35B0-55F1-4F72-BD1E-72551F8D14F6">
                     <p class="titleinexample">示例10-21使用ASMCMD showversion命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; showversion  - 群集上的活动Oracle ASM活动版本为[19.0.0.0.0]。群集升级状态为[NORMAL]。群集活动补丁级别为[0]。
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94409"></a><a id="OSTMG94410"></a><a id="OSTMG94411"></a><a id="OSTMG94412"></a><a id="OSTMG94413"></a><a id="OSTMG94408"></a><div class="props_rev_3"><a id="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12" name="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12"></a><h3 id="OSTMG-GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12" class="sect3">关掉</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12__GUID-C182641B-D71B-49A5-ADC3-B10F8B6724BF">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>关闭一个实例。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12__GUID-4A53A559-604A-4431-A127-BA30BB5D4591">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">shutdown [--target <span class="italic">target_instance</span> ] [ -  normal | --abort | --immediate]</pre><p> <a href="asmcmd-instance-commands.html#GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12__CIHFHEFH" title="此表列出了shutdown命令的选项以及说明">表10-18</a>列出了<code class="codeph">shutdown</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12__CIHFHEFH">
                     <p class="titleintable">表10-18 shutdown命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="shutdown命令的选项" width="100%" border="1" summary="This table lists the options for the shutdown command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e4632">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e4635">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e4640" headers="d69575e4632 ">
                                 <p><code class="codeph">--target <span class="codeinlineitalic">target_instance</span></code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e4640 d69575e4635 ">
                                 <p>指定目标实例。<code class="codeph"><span class="codeinlineitalic">target_instance</span></code>的值可以是Oracle ASM（ <code class="codeph">ASM</code> ），IOServer（ <code class="codeph">IOS</code> ）或Oracle ASM代理（ <code class="codeph">APX</code> ）实例。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e4663" headers="d69575e4632 ">
                                 <p><code class="codeph">- 正常</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e4663 d69575e4635 ">
                                 <p>关机正常。这是默认操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e4671" headers="d69575e4632 ">
                                 <p><code class="codeph">--abort</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e4671 d69575e4635 ">
                                 <p>关闭中止所有现有操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e4679" headers="d69575e4632 ">
                                 <p><code class="codeph">- 即时</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e4679 d69575e4635 ">
                                 <p>立即关闭。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>默认目标实例由<code class="codeph">ORACLE_SID</code>环境变量确定。默认操作是正常关闭。
                     </p>
                     <p>Oracle强烈建议您在尝试使用abort（-- <code class="codeph">--abort</code> ）关闭Oracle ASM实例之前关闭使用Oracle ASM实例的所有数据库实例并卸载挂载在Oracle ASM Dynamic Volume Manager（Oracle ADVM）卷上的所有文件系统选项。
                     </p>
                     <p>有关关闭Oracle ASM实例的更多信息，请参阅<span class="q">“ <a href="admin-asm-instance.html#GUID-9C2208C8-B436-4A18-A5D7-0CE854751529" title="您可以通过在SQL * Plus中运行SHUTDOWN命令来启动Oracle ASM关闭过程。">关于关闭Oracle ASM实例</a> ”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12__GUID-8D90938D-8186-47B6-A501-1FFFE8016753">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">shutdown</code>命令的示例。第一个示例使用正常操作执行Oracle ASM实例的关闭。第二个示例通过立即操作执行关闭。第三个示例执行关闭以中止所有现有操作。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6DDDBD35-D173-4577-AA4B-CAF0CB92DE12__GUID-82F22895-B6D0-4212-A180-4F40C7F3CB65">
                     <p class="titleinexample">示例10-22使用ASMCMD shutdown命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; shutdown --target ASM  -  normal ASMCMD [+]&gt; shutdown --target ASM --immediate ASMCMD [+]&gt; shutdown --target ASM --abort</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94415"></a><a id="OSTMG94416"></a><a id="OSTMG94417"></a><a id="OSTMG94418"></a><a id="OSTMG94419"></a><a id="OSTMG94414"></a><div class="props_rev_3"><a id="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC" name="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC"></a><h3 id="OSTMG-GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC" class="sect3">spbackup</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC__GUID-B0889A58-C49A-4E0F-A914-50CE64FDB643">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将Oracle ASM SPFILE备份到备份文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC__GUID-E51167F1-2D93-40CD-B079-6E3113A26228">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">spbackup <span class="italic">源</span> <span class="italic">目标</span></pre><p> <a href="asmcmd-instance-commands.html#GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC__CIHDDIJE" title="此表列出了spbackup命令的选项以及说明">表10-19</a>列出了<code class="codeph">spbackup</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC__CIHDDIJE">
                     <p class="titleintable">表10-19 spbackup命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="spbackup命令的选项" width="100%" border="1" summary="This table lists the options for the spbackup command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e4916">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e4919">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e4924" headers="d69575e4916 ">
                                 <p><span class="italic"><code class="codeph">资源</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e4924 d69575e4919 ">
                                 <p>指定源文件名。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e4933" headers="d69575e4916 ">
                                 <p><span class="italic"><code class="codeph">目的地</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e4933 d69575e4919 ">
                                 <p>指定目标文件。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>如果要在相同或不同的磁盘组中对SPFILE进行单个或多个备份而不在目标磁盘组中创建SPFILE，则应使用<code class="codeph">spbackup</code> 。
                     </p>
                     <p>请注意以下关于<code class="codeph">spbackup</code>的使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">spbackup</code>可以将Oracle ASM SPFILE从磁盘组备份到磁盘组或操作系统文件。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spbackup</code>可以将Oracle ASM SPFILE从操作系统文件备份到磁盘组。
                           </p>
                        </li>
                        <li>
                           <p>当打开的Oracle ASM实例使用SPFILE时， <code class="codeph">spbackup</code>可以备份Oracle ASM SPFILE。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spbackup</code>可以在同一磁盘组中对Oracle ASM SPFILE进行多次备份。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">spbackup</code>不会影响GPnP配置文件。创建的备份文件不是特殊文件类型，不会标识为SPFILE。无法使用<code class="codeph">spcopy</code>复制此备份文件。要将此备份文件复制到磁盘组或从磁盘组复制此备份文件，请使用ASMCMD <code class="codeph">cp</code>命令。
                     </p>
                     <p>要在标识为SPFILE文件的磁盘组中制作备份文件的副本，请执行以下操作：</p>
                     <ol>
                        <li>
                           <p>使用ASMCMD <code class="codeph">cp</code>命令将备份文件从磁盘组复制到操作系统文件。见<span class="q">“ <a href="asmcmd-file-commands.html#GUID-54815B29-C25E-4286-86FF-8E84F6B51CDC">cp</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>使用ASMCMD spcopy命令将操作系统文件复制到磁盘组。见<span class="q">“ <a href="asmcmd-instance-commands.html#GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8">spcopy</a> ”</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC__GUID-7E2EDD99-D8BB-46C5-B8C4-1C3B065AEEBB">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">spbackup</code>命令的示例。第一个示例备份<code class="codeph">data</code>磁盘组中的SPFILE。第二个示例将SPFILE从<code class="codeph">data</code>磁盘组备份到<code class="codeph">fra</code>磁盘组。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-22B3BB91-D3BD-44ED-A1A4-89AAB074EFCC__GUID-88595683-07D7-448E-AE2A-30227063C58F">
                     <p class="titleinexample">示例10-23使用ASMCMD spbackup命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; spbackup + DATA / asm / asmparameterfile / registry.253.721810181 + DATA / spfileBackASM.bak ASMCMD&gt; spbackup + DATA / asm / asmparameterfile / registry.253.721810181 + FRA / spfileBackASM.bak</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94421"></a><a id="OSTMG94422"></a><a id="OSTMG94423"></a><a id="OSTMG94424"></a><a id="OSTMG94425"></a><a id="OSTMG94420"></a><div class="props_rev_3"><a id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8" name="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8"></a><h3 id="OSTMG-GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8" class="sect3">spcopy</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__GUID-CF3D48CF-0EBC-4608-A7A0-4738EA7E7003">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将Oracle ASM SPFILE从源位置复制到目标位置的SPFILE。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__GUID-B13E5050-58A7-4531-8B56-231E408D8392">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">spcopy [-u] <span class="italic">源</span> <span class="italic">目标</span></pre><p> <a href="asmcmd-instance-commands.html#GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__CIHGDFAB" title="此表列出了spcopy命令的选项以及说明">表10-20</a>列出了<code class="codeph">spcopy</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__CIHGDFAB">
                     <p class="titleintable">表10-20 spcopy命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="spcopy命令的选项" width="100%" border="1" summary="This table lists the options for the spcopy command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e5220">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e5223">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e5228" headers="d69575e5220 ">
                                 <p><code class="codeph">-u</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e5228 d69575e5223 ">
                                 <p>更新网格即插即用（GPnP）配置文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e5236" headers="d69575e5220 ">
                                 <p><span class="italic"><code class="codeph">资源</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e5236 d69575e5223 ">
                                 <p>指定源文件名。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e5245" headers="d69575e5220 ">
                                 <p><span class="italic"><code class="codeph">目的地</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e5245 d69575e5223 ">
                                 <p>指定目标。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>请注意以下关于<code class="codeph">spcopy</code>的使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">spcopy</code>可以将Oracle ASM SPFILE从磁盘组复制到其他磁盘组或操作系统文件。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spcopy</code>可以将Oracle ASM SPFILE从操作系统文件复制到磁盘组。
                           </p>
                        </li>
                        <li>
                           <p>当打开的Oracle ASM实例使用SPFILE时， <code class="codeph">spcopy</code>可以复制Oracle ASM SPFILE。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">spcopy</code>无法在同一磁盘组中创建Oracle ASM SPFILE的多个副本。您可以使用<code class="codeph">spbackup</code>来实现此目的。
                           </p>
                        </li>
                     </ul>
                     <p>要更新GPnP轮廓，包括<code class="codeph">-u</code>与选项<code class="codeph">spcopy</code> 。您还可以使用<code class="codeph">spset</code>如果更新GPnP轮廓<code class="codeph">spcopy</code>是没有运行<code class="codeph">-u</code>选项。
                     </p>
                     <p>复制SPFILE并更新GPnP配置文件后，必须在新位置使用SPFILE重新启动实例以使用该SPFILE。当Oracle ASM实例在新位置使用SPFILE运行时，您可以删除源SPFILE。</p>
                     <p>要使用<code class="codeph">spcopy</code>将Oracle ASM SPFILE复制到磁盘组，必须在目标磁盘组中将<code class="codeph">COMPATIBLE.ASM</code>属性设置为<code class="codeph">11.2</code>或更高。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__GUID-8418DCEC-FE0F-4C6E-8390-34D4CC8F991A">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">spcopy</code>命令的示例。第一个示例将Oracle ASM SPFILE从<code class="codeph">data</code>磁盘组复制到<code class="codeph">fra</code>磁盘组。第二个示例将Oracle ASM SPFILE从<code class="codeph">data</code>磁盘组复制到操作系统位置。第三个示例将Oracle ASM SPFILE从操作系统位置复制到<code class="codeph">data</code>磁盘组，并使用<code class="codeph">-u</code>选项更新GPnP配置文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__GUID-B39F1F96-01BE-43BB-A79D-A5699053A72A">
                     <p class="titleinexample">示例10-24使用ASMCMD spcopy命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; spcopy + DATA / asm / asmparameterfile / registry.253.721810181 + FRA / spfileCopyASM.ora ASMCMD&gt; spcopy + DATA / asm / asmparameterfile / registry.253.721810181 $ ORACLE_HOME / dbs / spfileCopyASM.ora ASMCMD&gt; spcopy -u / oracle / product / 11.2.0 / grid / dbs / spfileTestASM.ora + DATA / ASM / spfileCopyASM.ora</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-528363BF-F4C8-4F05-BB61-DF7A6863E5B8__GUID-67AB804B-AB10-489A-873D-623A7F956154">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="asmcmd-instance-commands.html#GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7">spset</a>信息有关使用ASMCMD <code class="codeph">spset</code>命令</p>
                           </li>
                           <li>
                              <p><a href="init-params-asm-instance.html#GUID-388D4954-D213-42DA-8A9E-F7168F399223" title="您可以使用ASMCMD spbackup，spcopy或spmove命令备份，复制或移动Oracle ASM SPFILE。">关于备份，复制和移动Oracle ASM初始化参数文件，</a>以获取有关在升级后复制和移动Oracle ASM实例初始化参数文件的信息</p>
                           </li>
                           <li>
                              <p>有关使用<code class="codeph">CREATE SPFILE</code> SQL语句创建服务器参数文件的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=SQLRF01315" target="_blank"><span><cite>参见“Oracle数据库SQL语言参考</cite></span></a> ”</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94427"></a><a id="OSTMG94428"></a><a id="OSTMG94429"></a><a id="OSTMG94430"></a><a id="OSTMG94426"></a><div class="props_rev_3"><a id="GUID-517B4BFC-83B6-4371-8286-C23410C5C559" name="GUID-517B4BFC-83B6-4371-8286-C23410C5C559"></a><h3 id="OSTMG-GUID-517B4BFC-83B6-4371-8286-C23410C5C559" class="sect3">spget</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-517B4BFC-83B6-4371-8286-C23410C5C559__GUID-3CCFBD46-0310-4237-8211-77D89B487007">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>从Grid即插即用（GPnP）配置文件中检索Oracle ASM SPFILE的位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-517B4BFC-83B6-4371-8286-C23410C5C559__GUID-ADD8E473-6F9C-45C4-B58D-3AF9589E4F91">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">spget</pre><p><code class="codeph">spget</code>检索的位置是GPnP配置文件中的位置，但并不总是当前使用的SPFILE的位置。例如，最近可能已通过<code class="codeph">spset</code>或<code class="codeph">spcopy</code>使用<code class="codeph">-u</code>选项在尚未重新启动的Oracle ASM实例上更新该位置。在下次重新启动Oracle ASM之后，此位置指向当前正在使用的Oracle ASM SPFILE。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-517B4BFC-83B6-4371-8286-C23410C5C559__GUID-691094BD-4A51-42B4-AE91-D7BDF631FF8F">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">spget</code>命令的示例，该命令从GPnP配置文件中检索并显示SPFILE的位置。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-517B4BFC-83B6-4371-8286-C23410C5C559__GUID-83546947-9FDF-45C4-B2C7-5BE7E9B934AD">
                     <p class="titleinexample">示例10-25使用ASMCMD spget命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; spget + DATA / ASM / ASMPARAMETERFILE / registry.253.813507611</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94432"></a><a id="OSTMG94433"></a><a id="OSTMG94434"></a><a id="OSTMG94435"></a><a id="OSTMG94436"></a><a id="OSTMG94431"></a><div class="props_rev_3"><a id="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD" name="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD"></a><h3 id="OSTMG-GUID-05F55D3C-F582-481E-8C23-A58E16260DAD" class="sect3">spmove</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD__GUID-E88FBD78-1E15-4EBE-B783-6C4354C91CC5">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将Oracle ASM SPFILE从源移动到目标，并自动更新GPnP配置文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD__GUID-CF35482D-4323-4403-B17C-1012932EB0BA">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">spmove <span class="italic">源</span> <span class="italic">目的地</span></pre><p> <a href="asmcmd-instance-commands.html#GUID-05F55D3C-F582-481E-8C23-A58E16260DAD__CIHHEBHG" title="此表列出了spcopy命令的选项以及说明">表10-21</a>列出了<code class="codeph">spmove</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD__CIHHEBHG">
                     <p class="titleintable">表10-21 spmove命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="spmove命令的选项" width="100%" border="1" summary="This table lists the options for the spcopy command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e5775">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e5778">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e5783" headers="d69575e5775 ">
                                 <p><span class="italic"><code class="codeph">资源</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e5783 d69575e5778 ">
                                 <p>指定源文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e5792" headers="d69575e5775 ">
                                 <p><span class="italic"><code class="codeph">目的地</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e5792 d69575e5778 ">
                                 <p>指定目标文件。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>请注意以下关于<code class="codeph">spmove</code>的使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当打开的实例使用PFILE或不同的SPFILE时， <code class="codeph">spmove</code>可以移动Oracle ASM SPFILE。移动SPFILE后，必须使用新位置的SPFILE重新启动实例才能使用该SPFILE。</p>
                        </li>
                        <li>
                           <p>当打开的Oracle ASM实例使用SPFILE时， <code class="codeph">spmove</code>无法移动Oracle ASM SPFILE。
                           </p>
                        </li>
                     </ul>
                     <p>有关在升级后复制和移动Oracle ASM实例初始化参数文件的信息，请参阅<span class="q">“ <a href="init-params-asm-instance.html#GUID-388D4954-D213-42DA-8A9E-F7168F399223" title="您可以使用ASMCMD spbackup，spcopy或spmove命令备份，复制或移动Oracle ASM SPFILE。">关于备份，复制和移动Oracle ASM初始化参数文件</a> ”</span> 。
                     </p>
                     <p>要使用<code class="codeph">spmove</code>将Oracle ASM SPFILE移动到磁盘组，磁盘组属性<code class="codeph">COMPATIBLE.ASM</code>必须设置为<code class="codeph">11.2</code>或更高。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD__GUID-3B5EE141-1CF8-4AC8-8C06-B7536EBF6142">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">spmove</code>命令的示例。第一个示例将Oracle ASM SPFILE从<code class="codeph">data</code>磁盘组移动到操作系统位置。第二个示例将SPFILE从操作系统位置移动到<code class="codeph">data</code>磁盘组。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-05F55D3C-F582-481E-8C23-A58E16260DAD__GUID-97900E41-5A6B-4DAE-9FAD-50C5F5F75FDA">
                     <p class="titleinexample">示例10-26使用ASMCMD spmove命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; spmove + DATA / spfileASM.ora /oracle/product/11.2.0/grid/dbs/spfileMoveASM.ora ASMCMD&gt; spmove /oracle/product/11.2.0/grid/dbs/spfile+ASM.ora + DATA / ASM /spfileMoveASM.ora</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94438"></a><a id="OSTMG94439"></a><a id="OSTMG94440"></a><a id="OSTMG94441"></a><a id="OSTMG94442"></a><a id="OSTMG94437"></a><div class="props_rev_3"><a id="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7" name="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7"></a><h3 id="OSTMG-GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7" class="sect3">spset</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7__GUID-1788631F-90E6-4D38-A6D9-C110FE4EC0AF">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>在网格即插即用（GPnP）配置文件中设置Oracle ASM SPFILE的位置。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7__GUID-0ED7A073-53E2-405A-8500-01BAEC57E20B">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">spset <span class="italic">位置</span></pre><p> <a href="asmcmd-instance-commands.html#GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7__CIHIIEEI" title="此表列出了spset命令的选项以及说明">表10-22</a>列出了<code class="codeph">spset</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7__CIHIIEEI">
                     <p class="titleintable">表10-22 spset命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="spset命令的选项" width="100%" border="1" summary="This table lists the options for the spset command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e6060">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e6063">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e6068" headers="d69575e6060 ">
                                 <p><span class="italic"><code class="codeph">地点</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e6068 d69575e6063 ">
                                 <p>指定Oracle ASM SPFILE的位置。该位置是SPFILE的完整路径。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7__GUID-0A1B8EC3-B58C-41AA-9FA9-C1D3B14CF995">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">spset</code>命令的示例，该命令用于设置<code class="codeph">data</code>磁盘组中Oracle ASM SPFILE命令的位置。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-8946D285-8EAF-4466-8985-BDE95EE5B0C7__GUID-AC1C5EA9-9AFB-47FC-BE2C-EA82FFD3BECE">
                     <p class="titleinexample">示例10-27使用ASMCMD spset命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; spset + DATA / asm / asmparameterfile / asmspfile.ora</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94444"></a><a id="OSTMG94445"></a><a id="OSTMG94446"></a><a id="OSTMG94447"></a><a id="OSTMG94448"></a><a id="OSTMG94443"></a><div class="props_rev_3"><a id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84" name="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84"></a><h3 id="OSTMG-GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84" class="sect3">启动</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__GUID-39261BF2-3371-4742-AA10-B4F1EB7392AC">目的</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>启动默认实例。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__GUID-30AFF227-8E36-4602-A391-DBC3D9B6220C">语法和说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">startup [--mount] [--nomount] [--restrict] [--pfile <span class="italic">pfile</span> ]</pre><p> <a href="asmcmd-instance-commands.html#GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__CIHCHEGB" title="此表列出了启动命令的选项以及说明">表10-23</a>列出了<code class="codeph">startup</code>命令的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__CIHCHEGB">
                     <p class="titleintable">表10-23启动命令的选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="启动命令的选项" width="100%" border="1" summary="This table lists the options for the startup command, along with a description" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d69575e6281">选项</th>
                              <th align="left" valign="bottom" width="69%" id="d69575e6284">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e6289" headers="d69575e6281 ">
                                 <p><code class="codeph">- 安装</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e6289 d69575e6284 ">
                                 <p>指定装入操作。这是默认操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e6297" headers="d69575e6281 ">
                                 <p><code class="codeph">--nomount</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e6297 d69575e6284 ">
                                 <p>指定无挂载操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e6305" headers="d69575e6281 ">
                                 <p><code class="codeph">- 限制</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e6305 d69575e6284 ">
                                 <p>指定限制模式。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d69575e6313" headers="d69575e6281 ">
                                 <p><code class="codeph">--pfile</code> <span class="italic"><code class="codeph">pfile</code></span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d69575e6313 d69575e6284 ">
                                 <p>Oracle ASM初始化参数文件。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>此命令启动<code class="codeph">ORACLE_SID</code>环境变量指定的实例。该变量可以设置为Oracle ASM，IOServer或APX代理实例。
                     </p>
                     <p>Oracle ASM实例的默认操作是安装磁盘组并启用Oracle ASM Dynamic Volume Manager（Oracle ADVM）卷的启动。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__GUID-618ACAAE-A3C7-4BD2-B1CD-7C40D7D01CBC">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是<code class="codeph">startup</code>命令的示例，该命令在没有安装磁盘组的情况下启动Oracle ASM实例（ <code class="codeph">ORACLE_SID=+ASM</code> ）并使用<code class="codeph">asm_init.ora</code>初始化参数文件。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__GUID-1BC79331-3D67-41D5-A008-60007A732F0A">
                     <p class="titleinexample">示例10-28使用ASMCMD启动命令</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; startup --nomount --pfile asm_init.ora</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-4F9BF4B8-D939-4DF4-B4A7-7AE4007BBA84__GUID-20BF58F5-407E-4BD3-932F-18034B60DA80">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="admin-asm-instance.html#GUID-42A450CF-67A7-4D83-83A7-879E0D6537C5">关于在启动时挂载磁盘组，</a>以获取有关在启动时<a href="admin-asm-instance.html#GUID-42A450CF-67A7-4D83-83A7-879E0D6537C5">挂载的磁盘组</a>的信息</p>
                           </li>
                           <li>
                              <p><a href="admin-asm-instance.html#GUID-E485B808-B78F-4E52-95A5-7FE353C1AE5F" title="You start an Oracle ASM instance similarly to the way in which you start an Oracle Database instance with some minor differences.">关于启动Oracle ASM实例</a>以获取有关启动<a href="admin-asm-instance.html#GUID-E485B808-B78F-4E52-95A5-7FE353C1AE5F" title="您启动Oracle ASM实例的方式与启动Oracle数据库实例的方式类似，但有一些细微差别。">Oracle ASM实例</a>的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01546.rman-backup-concepts.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>RMAN备份概念</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96241-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="part-backing-up-archiving.html" title="Previous" type="text/html"></link>
      <link rel="next" href="backing-up-database.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="BRADV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part-backing-up-archiving.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="backing-up-database.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复用户指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-backing-up-archiving.html" property="item" typeof="WebPage"><span property="name">备份和存档数据</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">RMAN备份概念</li>
            </ol>
            <a id="GUID-B3380142-ABCD-437F-9E06-B219D74E6738" name="GUID-B3380142-ABCD-437F-9E06-B219D74E6738"></a><a id="BRADV002"></a>
            
            <h2 id="BRADV-GUID-B3380142-ABCD-437F-9E06-B219D74E6738" class="sect2"><span class="enumeration_chapter">8</span> RMAN备份概念</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了进行任何类型的RMAN备份时必须了解的一般概念。本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" title="使用RMAN BACKUP命令创建一致和不一致的备份。">关于一致且不一致的RMAN备份</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" title="您可以创建RMAN备份或用户管理的备份。">关于在线备份和备份模式</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" title="在RMAN中执行BACKUP命令时，您将创建一个或多个备份集或映像副本。默认情况下，无论目标是磁盘还是媒体管理器，RMAN都会创建备份集。">关于备份集</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-3580BA12-463A-4A61-939D-58C51E81FF12" title="映像副本是单个数据文件，归档重做日志文件或控制文件的精确副本。">关于RMAN图像副本</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" title="RMAN使您可以创建多个相同的备份副本。">关于RMAN备份的多个副本</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-95840C84-1595-49AC-923D-310DA750676B" title="在许多恢复情况下，最近备份控制文件和服务器参数文件非常有用。为确保您备份这些文件，数据库支持控制文件和服务器参数文件自动备份。">关于RMAN控制文件和服务器参数文件自动备份</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" title="增量备份仅复制自上次备份以来已更改的数据块。您可以使用RMAN创建数据文件，表空间或整个数据库的增量备份。">关于RMAN增量备份</a></p>
                  </li>
                  <li>
                     <p><a href="rman-backup-concepts.html#GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" title="您可以使用CONFIGURE RETENTION POLICY命令创建持久性和自动备份保留策略。">关于备份保留策略</a></p>
                  </li>
               </ul>
            </div><a id="BRADV89477"></a><div class="props_rev_3"><a id="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" name="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0"></a><h3 id="BRADV-GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0" class="sect3"><span class="enumeration_section">8.1</span>关于一致且不一致的RMAN备份</h3>
               <div>
                  <p>使用RMAN <code class="codeph">BACKUP</code>命令创建一致和不一致的备份。
                  </p>
                  <p>RMAN <code class="codeph">BACKUP</code>命令支持备份以下类型的文件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据文件和控制文件</p>
                     </li>
                     <li>
                        <p>服务器参数文件</p>
                     </li>
                     <li>
                        <p>存档的重做日志</p>
                     </li>
                     <li>
                        <p>RMAN备份</p>
                     </li>
                  </ul>
                  <p>虽然数据库依赖于其他类型的文件，例如网络配置文件，密码文件和Oracle主目录的内容，但您无法使用RMAN备份这些文件。同样，Oracle数据库的某些功能（如外部表）可能依赖于数据文件，控制文件和重做日志以外的文件。RMAN无法备份这些文件。使用Oracle Secure Backup等通用备份软件来保护RMAN不支持的文件。</p>
                  <p>在RMAN中执行<code class="codeph">BACKUP</code>命令时，输出始终是一个或多个备份集或一个或多个映像副本。<a href="glossary.html#GUID-6AA43E7D-9946-4C41-A62F-01E5BACEB8A7"><span class="xrefglossterm">备份集</span></a>是RMAN特定的专有格式，而<a href="glossary.html#GUID-397CB99E-3F07-4980-96B3-9D0D0ABBABEA"><span class="xrefglossterm">映像副本</span></a>是文件的逐位副本。默认情况下，RMAN会创建备份集。
                  </p>
                  <div class="infoboxnotealso" id="GUID-3FD1F547-74C0-434A-98D0-5D85A851FCC0__GUID-5A6CD23D-6A3C-4E15-B343-E5F8861DDC3A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" title="当数据库处于一致状态时，将发生一致的备份。您可以使用BACKUP命令对数据库进行一致的备份。">关于一致的RMAN备份</a></p>
                        </li>
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" title="任何不一致的数据库备份都是不一致的备份。数据库打开时进行的备份不一致，实例失败或SHUTDOWN ABORT命令后进行备份也是如此。">关于不一致的RMAN备份</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV99964"></a><div class="props_rev_3"><a id="GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" name="GUID-10871A83-DD0B-49FB-9601-A598D367ECD3"></a><h4 id="BRADV-GUID-10871A83-DD0B-49FB-9601-A598D367ECD3" class="sect4"><span class="enumeration_section">8.1.1</span>关于一致的RMAN备份</h4>
                  <div>
                     <p>当数据库处于一致状态时，将发生一致的备份。您可以使用<code class="codeph">BACKUP</code>命令对数据库进行一致的备份。
                     </p>
                     <p>使用<a href="../rcmrf/SHUTDOWN.html#RCMRF155" target="_blank"><code class="codeph">SHUTDOWN</code></a> <code class="codeph">NORMAL</code> ， <code class="codeph">SHUTDOWN IMMEDIATE</code>或<code class="codeph">SHUTDOWN TRANSACTIONAL</code>命令关闭数据库后，数据库处于一致状态。一致的关闭可确保所有重做都已应用于数据文件。如果您在此时装入数据库并进行备份，则可以稍后还原数据库备份并在不执行介质恢复的情况下将其打开。但是，当然，您将丢失创建备份后发生的所有事务。
                     </p>
                  </div>
               </div><a id="BRADV99965"></a><div class="props_rev_3"><a id="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" name="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C"></a><h4 id="BRADV-GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C" class="sect4"><span class="enumeration_section">8.1.2</span>关于不一致的RMAN备份</h4>
                  <div>
                     <p>任何不一致的数据库备份都是不一致的备份。数据库打开时进行的备份不一致，实例失败或<code class="codeph">SHUTDOWN ABORT</code>命令后进行备份也是如此。
                     </p>
                     <p>从不一致的备份还原数据库时，Oracle数据库必须先执行介质恢复，然后才能打开数据库，并应用创建备份后发生的重做日志中的更改。</p>
                     <div class="infoboxnote" id="GUID-23606AAD-40E3-4198-BC70-B3D0FE698C9C__GUID-4EFE7E16-3939-4EAD-A8D4-579546927B87">
                        <p class="notep1">注意：</p>
                        <p>当数据库处于<code class="codeph">NOARCHIVELOG</code>模式时，RMAN不允许您进行不一致的备份。如果对<code class="codeph">NOARCHIVELOG</code>数据库使用用户管理的备份技术，则不得对此数据库进行不一致的备份。
                        </p>
                     </div>
                     <p>如果数据库以<code class="codeph">ARCHIVELOG</code>模式运行，并且备份存档的重做日志和数据文件，则不一致的备份可以作为完善的备份和恢复策略的基础。不一致的备份提供了卓越的可用性，因为您不必关闭数据库来进行完全保护数据库的备份。
                     </p>
                  </div>
               </div>
            </div><a id="BRADV89479"></a><div class="props_rev_3"><a id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" name="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C"></a><h3 id="BRADV-GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C" class="sect3"><span class="enumeration_section">8.2</span>关于在线备份和备份模式</h3>
               <div>
                  <p>您可以创建RMAN备份或用户管理的备份。</p>
                  <p>在执行联机表空间或数据库的<a href="glossary.html#GUID-F4A66D43-CA48-412E-98E8-B25CE1C7B065"><span class="xrefglossterm">用户管理备份</span></a>时，操作系统实用程序可以在数据库写程序（DBWR）更新文件的同时备份数据文件。该实用程序可以读取处于半更新状态的块，以便复制到备份介质的块在其前半部分更新，而后半部分包含较旧的数据。这种类型的<a href="glossary.html#GUID-E55A74E5-8AD7-478F-A458-E4CB2E389009"><span class="xrefglossterm">逻辑损坏</span></a>称为<a href="glossary.html#GUID-9999D934-31A1-44D5-995F-EC5B92583B17"><span class="xrefglossterm">断裂块</span></a> ，即与SCN不一致的块。如果必须还原此备份并且块需要恢复，则恢复将失败，因为该块不可用。
                  </p>
                  <p>对于第三方快照技术，您必须使用以下技术之一来消除创建破裂块的风险：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>确保快照技术符合Oracle对联机备份的要求</p>
                     </li>
                     <li>
                        <p>脱机获取数据库或数据文件</p>
                     </li>
                     <li>
                        <p>在使用第三方快照备份之前，请将数据库置于备份模式</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C__GUID-EAD87694-A55A-4E23-AAE6-341EF6AC2416">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p> <a href="user-managed-database-backups.html#GUID-A1112F2C-D0ED-4C2F-BA24-A614F99F0FCA">使用第三方快照技术进行备份</a> 。
                           </p>
                        </li>
                        <li>
                           <p><a href="user-managed-flashback-dbpitr.html#GUID-5A3BB8EE-291F-41C6-976C-1F304069FF0B">使用存储快照优化进行恢复</a></p>
                        </li>
                     </ul>
                  </div>
                  <p>与用户管理的工具不同，RMAN不需要额外的日志记录或备份模式，因为它知道数据块的格式。RMAN保证不备份破碎的块。在RMAN备份期间，数据库服务器会话将读取每个数据块，并通过比较块头和页脚来检查它是否已断开。如果块被破坏，则会话重新读取块。如果发现相同的裂缝，那么该块被认为是永久性的腐败。此外，RMAN不需要冻结数据文件头检查点，因为它知道块的读取顺序，这使它能够捕获文件的已知良好检查点。</p>
                  <div class="infoboxnotealso" id="GUID-2CF40BDC-A193-4450-8B10-DEA0E416388C__GUID-D0B338C8-E6E6-4F4A-8D20-D5C8161A6A1B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="user-managed-database-backups.html#GUID-57387AB6-1204-44F0-826A-F9B638453935">制作用户管理的联机表空间和数据文件备份，</a>以了解如何在不使用RMAN时备份联机表空间</p>
                  </div>
               </div>
            </div><a id="BRADV106"></a><div class="props_rev_3"><a id="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" name="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D"></a><h3 id="BRADV-GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D" class="sect3"><span class="enumeration_section">8.3</span>关于备份集</h3>
               <div>
                  <p>在RMAN中执行<code class="codeph">BACKUP</code>命令时，您将创建一个或多个备份集或映像副本。默认情况下，无论目标是磁盘还是媒体管理器，RMAN都会创建备份集。
                  </p>
                  <div class="infoboxnote" id="GUID-74FF41AF-D1EE-4DB1-AC0D-56FC83CAA91D__GUID-A2E6EAE1-8A44-4967-9E06-8BC9BC74B382">
                     <p class="notep1">注意：</p>
                     <p>数据文件备份集通常小于数据文件映像副本，并且写入时间较短。</p>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-1C871377-D8A7-4414-B0F0-884403666E8C" title="RMAN可以将备份数据存储在称为备份集的逻辑结构中，该备份集是RMAN备份的最小单元。">关于备份集和备份片</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" title="创建备份集时，RMAN可以使用块压缩。">关于备份集的RMAN块压缩</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-2AFCD551-95CB-4F9F-946E-550E89613974" title="RMAN支持备份集的二进制压缩。二进制压缩仅在BACKUP命令中指定AS COMPRESSED BACKUPSET时启用，或者一次使用配置设备类型[DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET命令。">关于RMAN备份集的二进制压缩</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" title="在备份撤消优化中，RMAN排除了恢复备份时不需要的撤销，即已经提交的事务。">关于RMAN备份撤消优化</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" title="RMAN支持备份集的备份加密。您可以使用基于密钥库的透明加密，基于密码的加密或两者。">关于RMAN备份集的加密</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" title="您可以让RMAN确定备份片段的唯一名称，也可以使用FORMAT子句指定名称。">关于RMAN备份片的文件名</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" title="默认情况下，备份集包含一个备份片。要限制每个备份片的大小，请指定CONFIGURE CHANNEL或ALLOCATE CHANNEL命令的MAXPIECESIZE选项。">关于RMAN备份片的数量和大小</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" title="您可以使用BACKUP命令的backupSpec子句指定要备份的对象。每个backupSpec子句至少生成一个备份集。">关于RMAN备份集的数量和大小</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" title="创建备份集时，RMAN可以同时从磁盘读取多个文件，然后将其块写入同一备份集。例如，RMAN可以同时读取两个数据文件，然后将这些数据文件中的块组合成一个备份片。来自多个文件的块组合称为备份多路复用。">关于Multiplexed RMAN备份集</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" title="在代理副本期间，RMAN将数据传输的控制权转交给支持此功能的媒体管理器。代理副本只能与支持它的媒体管理器一起使用，不能与DISK类型的通道一起使用。 BACKUP命令的PROXY选项指定备份是代理副本。">关于RMAN代理副本</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89480"></a><div class="props_rev_3"><a id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C" name="GUID-1C871377-D8A7-4414-B0F0-884403666E8C"></a><h4 id="BRADV-GUID-1C871377-D8A7-4414-B0F0-884403666E8C" class="sect4"><span class="enumeration_section">8.3.1</span>关于备份集和备份片</h4>
                  <div>
                     <p>RMAN可以将备份数据存储在称为备份集的逻辑结构中，该备份集是RMAN备份的最小单元。</p>
                     <p>备份集包含来自一个或多个数据文件，归档重做日志，控制文件或服务器参数文件的数据。仅通过RMAN创建和访问的备份集是RMAN可以将备份写入磁带驱动器和磁带库等介质管理器的唯一形式。</p>
                     <p>备份集包含一个或多个RMAN特定格式的二进制文件。这些文件中的每一个都称为<a href="glossary.html#GUID-AED62318-D45A-49FA-B4B4-DAD98647FCF6"><span class="xrefglossterm">备份</span></a>文件。备份集可以包含多个数据文件。例如，您可以将10个数据文件备份到由单个备份片组成的单个备份集中。在这种情况下，RMAN会创建一个备份片作为输出。备份集仅包含此备份片。
                     </p>
                     <p>如果在<code class="codeph">BACKUP</code>命令上指定<code class="codeph">SECTION SIZE</code>参数，则RMAN会生成<a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">多节备份</span></a> 。这是单个大文件的备份，由多个并行通道生成，每个通道生成一个备份片。每个备份片段包含要备份的文件的一个<a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">文件部分</span></a> 。
                     </p>
                     <p>对于非多节备份，RMAN仅在存储库中记录成功完成的备份集。没有部分备份集这样的东西。这不同于不成功的多节备份，其中RMAN元数据可能包含部分备份集的记录。在后一种情况下，必须使用<code class="codeph">DELETE</code>命令删除部分备份集。
                     </p>
                     <div class="infoboxnote" id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C__GUID-E6714636-A1C2-428D-ACDD-36AA384045F2">
                        <p class="notep1">注意：</p>
                        <p>RMAN从未将部分备份视为还原和恢复的候选者。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-1C871377-D8A7-4414-B0F0-884403666E8C__GUID-0AB0FE3D-9617-44F7-ABE0-A21A2180368F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="使用BACKUP命令创建RMAN备份。RMAN备份的主要目的是保护您的数据。如果发生介质故障或灾难，则可以还原备份并恢复丢失的更改。您可以使用RMAN客户端中的BACKUP命令备份全部或部分数据库。您可以为BACKUP命令提供参数以覆盖默认备份选项。BACKUP命令采用DEVICE TYPE子句，指定是备份到磁盘还是磁带设备。RMAN可以在磁盘上创建备份作为映像副本或备份集。RMAN提供了一系列选项来命名BACKUP命令生成的文件。备份到磁盘时，您可以指定一种格式以将备份分布在多个驱动器上以提高性能。RMAN将一个称为标记的字符串附加到它创建的每个备份上，作为识别备份的一种方式。您可以接受默认标记，也可以使用BACKUP命令的TAG参数指定自己的标记。用户指定的标记是指示不同类别的备份或副本的用途或用法的有用方法。将TAG参数与BACKUP命令一起使用可指定备份集和映像副本的标记。创建备份集时，可以通过在BACKUP命令中包含AS COMPRESSED BACKUPSET选项，使用RMAN支持对备份集进行二进制压缩。通过多节备份，可以将大型数据文件划分为多个部分，这些部分可以跨多个通道并行备份。这提供了更快的备份性能和更好的恢复时间。在创建映像副本时，RMAN使用多个通道写入文件节。但是，此操作的输出是每个数据文件的一个副本。您可以在装入或打开数据库的情况下执行整个数据库备份。您可以使用BACKUP TABLESPACE命令备份一个或多个表空间，或使用BACKUP DATAFILE命令备份一个或多个数据文件。您可以在装入或打开数据库时备份控制文件。RMAN使用快照控制文件来确保读取一致的版本。控制文件的手动备份与控制文件自动备份不同。在备份BACKUP命令中指定的文件后，RMAN会进行控制文件自动备份。要进行手动备份，可以在备份其他文件时指定INCLUDE CURRENT CONTROLFILE或指定BACKUP CURRENT CONTROLFILE。在某些情况下，RMAN会自动备份当前服务器参数文件。BACKUP SPFILE命令显式备份参数文件。备份的服务器参数文件是实例当前使用的文件。只有在数据库关闭且处于一致状态时，才能以NOARCHIVELOG模式备份数据库。预打印备份确保在将非CDB作为PDB插入CDB后可以使用RMAN备份。使用BACKUP命令备份多租户容器数据库（CDB）和可插拔数据库（PDB）。RMAN和Oracle Enterprise Manager Cloud Control为多租户环境中的备份和恢复提供全面支持。备份整个多租户容器数据库（CDB）类似于备份非CDB。备份整个CDB时，RMAN会备份根，所有可插拔数据库（PDB）和归档重做日志。您可以使用RMAN仅备份根。由于根包含整个CDB的关键元数据，因此Oracle建议您定期备份根或备份整个CDB。Oracle Enterprise Manager云控制（云控制）可用于备份根。RMAN允许您使用BACKUP命令备份CDB中的一个或多个PDB。迁移PDB并将其插入到不同的目标CDB后，PDB的预打印备份可用于执行还原和恢复操作.Oracle Enterprise Manager云控制（云控制）可用于执行可插拔数据库（PDB）的备份。由于不同PDB中的表空间可以具有相同的名称，因此为了消除歧义，您必须直接连接到PDB以备份其一个或多个表空间。此示例创建CDB cdb_prod中包含的PDB my_pdb的预包装备份。CDB使用共享撤消，并在读写模式下打开。RMAN使您可以使用BACKUP命令在应用程序根，一个或多个应用程序PDB和应用程序容器上执行备份操作。RMAN可以备份应用程序容器，应用程序PDB和应用程序根目录。使用RMAN BACKUP命令备份应用程序根目录。使用BACKUP命令备份应用程序容器，该容器由应用程序根目录和属于应用程序根目录的所有应用程序PDB组成。BACKUP命令用于备份一个或多个应用程序PDB。使用BACKUP命令备份稀疏数据库。RMAN使您可以使用备份集或映像副本格式中的备份整个数据库的步骤来备份稀疏数据库。您可以使用BACKUP命令备份包含稀疏数据文件或单个稀疏数据文件的一个或多个表空间。RMAN使您可以备份CDB中的一个或多个稀疏PDB。归档重做日志是成功恢复媒体的关键。你应该定期备份它们。RMAN备份的若干功能特定于归档重做日志。例如，您可以使用BACKUP ...删除以将备份到备份集后从磁盘中删除一个或所有归档重做日志副本。即使您的重做日志存档到多个目标并且您使用RMAN备份存档的重做日志，RMAN也只选择一个存档的重做日志文件副本以包含在备份集中。由于具有相同日志序列号的日志相同，因此RMAN不需要包含多个日志副本。自动在线重做日志切换是一项重要的RMAN功能。在CDB中，只有当您以具有SYSDBA或SYSBACKUP权限的普通用户身份连接到根时，才能备份存档的重做日志。要备份存档日志，请使用BACKUP ARCHIVELOG命令。您可以指示RMAN应自动跳过归档重做日志的备份。您可以使用BACKUP ARCHIVELOG命令备份多租户容器数据库（CDB）中的归档重做日志。BACKUP ARCHIVELOG ......DELETE INPUT命令在备份后删除存档的日志文件。此命令消除了手动删除存档重做日志的单独步骤。在CDB中，您可以使用BACKUP ARCHIVELOG备份后删除存档的重做日志...DELETE INPUT命令。增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。RMAN增量备份提供多种好处。根据可接受的MTTR（平均恢复时间）选择备份策略。您可以将卷影复制服务（VSS）与Oracle VSS编写器一起使用，以在数据库中制作卷影副本或文件快照。通过逐步更新备份，可以避免对数据文件进行完整映像副本备份的开销，同时还可以最大限度地减少介质恢复数据库所需的时间。例如，如果您运行每日备份脚本，那么您永远不会有超过1天的重做时间来申请媒体恢复。要创建增量备份以用于增量更新的备份策略，请使用BACKUP ...使用TAG形式的BACKUP命令恢复COPY。在实现策略的示例脚本中最好地理解该命令。增量备份的块更改跟踪功能通过记录每个数据文件的更改块来提高备份性能。如果在主数据库或备用数据库上启用了块更改跟踪，则RMAN使用块更改跟踪文件来标识已更改的块以进行增量备份。通过读取这个小位图文件来确定哪些块发生了变化，RMAN避免了必须扫描它备份的数据文件中的每个块。Oracle数据库自动管理更改跟踪文件中的空间，以保留涵盖最近八个备份的块更改数据。达到最多八个位图后，最旧的位图将被跟踪当前更改的位图覆盖。默认情况下，块更改跟踪文件在DB_CREATE_FILE_DEST初始化参数指定的目标中创建为Oracle托管文件。您还可以通过在启用块更改跟踪时指定其名称，将块更改跟踪文件放在您选择的任何位置。块更改跟踪文件的大小与数据库的大小和重做的已启用线程数成比例。您可以在打开或装入数据库时启用块更改跟踪。禁用块更改跟踪时，数据库将从操作系统中删除块更改跟踪文件。您可以查询V $ BLOCK_CHANGE_TRACKING视图以确定是否启用了更改跟踪，如果是，则确定块更改跟踪文件的文件名。要移动更改跟踪文件，请使用ALTER DATABASE RENAME FILE语句。你可以使用BACKUP ......保持创建既包含所有权又不受备份保留策略限制的备份。通过使用带有BACKUP命令的KEEP选项，可以从保留策略中免除备份。通常，您将归档备份到磁带。由于您的数据保护备份最有可能位于一组仍可访问且可回收的磁带上，因此建议为归档备份保留一组磁带。使用带有KEEP选项的BACKUP命令进行归档备份。归档备份的一个目的是创建测试数据库。您可以使用BACKUP BACKUPSET命令备份其他备份作业生成的备份集。您还可以使用BACKUP RECOVERY AREA备份在当前和所有先前快速恢复区域目标中创建的恢复文件。BACKUP BACKUPSET命令在备份集中创建备份片的其他副本，但不创建新的备份集。对于基于冗余的备份保留策略，备份集将计为备份的一个实例。即使存在构成备份集的备份片的多个副本（例如，备份集已从磁盘备份到磁带），此语句也是如此。使用BACKUP BACKUPSET命令将备份集从磁盘复制到磁带。使用BACKUP命令将映像副本备份到磁带。">备份数据库</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89481"></a><div class="props_rev_3"><a id="GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" name="GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070"></a><h4 id="BRADV-GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" class="sect4"><span class="enumeration_section">8.3.2</span>关于备份集的RMAN块压缩</h4>
                  <div>
                     <p>创建备份集时，RMAN可以使用块压缩。</p>
                     <p>可以使用以下类型的块压缩：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>未使用的块压缩（支持磁盘备份和Oracle Secure Backup磁带备份）</p>
                        </li>
                        <li>
                           <p>空块压缩（支持所有备份）</p>
                        </li>
                     </ul>
                     <p>RMAN块压缩不是传统的二进制压缩。相反，它是RMAN用来完全避免备份此备份中不需要的某些块的一组技术。</p>
                  </div><a id="BRADV193"></a><div class="props_rev_3"><a id="GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51" name="GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51"></a><h5 id="BRADV-GUID-50F8DBCD-C285-491F-B8E7-E1B2140E1B51" class="sect5"><span class="enumeration_section">8.3.2.1</span>关于未使用的块压缩</h5>
                     <div>
                        <p>使用未使用的块压缩时，RMAN会跳过读取和备份当前未分配给某个数据库对象的任何数据库块。这与先前是否已分配这些块无关。</p>
                        <p>因此，如果删除数据库表，RMAN将不会备份该表占用的空间，直到在该空间中创建新对象为止。</p>
                        <p>满足以下条件时，将自动使用未使用的块压缩：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">COMPATIBLE</code>初始化参数设置为10.2或更高。
                              </p>
                           </li>
                           <li>
                              <p>目前没有为数据库定义的保证还原点。</p>
                           </li>
                           <li>
                              <p>数据文件是本地管理的。</p>
                           </li>
                           <li>
                              <p>数据文件作为完整备份或0级增量备份的一部分备份到备份集。</p>
                           </li>
                           <li>
                              <p>备份集在磁盘上创建，或Oracle Secure Backup是媒体管理器。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV192"></a><div class="props_rev_3"><a id="GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87" name="GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87"></a><h5 id="BRADV-GUID-89D85BBF-C0F2-4393-A1BF-7D6C8D9A6C87" class="sect5"><span class="enumeration_section">8.3.2.2</span>关于空块压缩</h5>
                     <div>
                        <p>当使用空块压缩时，RMAN从其输出中省略任何从未包含数据的块。</p>
                        <p>空块压缩始终与以备份集格式创建的级别0或完全备份一起使用。</p>
                     </div>
                  </div>
               </div><a id="BRADV194"></a><div class="props_rev_3"><a id="GUID-2AFCD551-95CB-4F9F-946E-550E89613974" name="GUID-2AFCD551-95CB-4F9F-946E-550E89613974"></a><h4 id="BRADV-GUID-2AFCD551-95CB-4F9F-946E-550E89613974" class="sect4"><span class="enumeration_section">8.3.3</span>关于RMAN备份集的二进制压缩</h4>
                  <div>
                     <p>RMAN支持备份集的二进制压缩。二进制压缩仅在<code class="codeph">BACKUP</code>命令中指定<code class="codeph">AS COMPRESSED BACKUPSET</code>时启用，或者一次使用<code class="codeph">CONFIGURE DEVICE TYPE [DISK | SBT] BACKUP TYPE TO COMPRESSED BACKUPSET</code>命令。
                     </p>
                     <p>您有两个二进制压缩选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以使用<code class="codeph">BASIC</code>压缩算法，该算法不需要Oracle Advanced Compression选项。此设置提供与<code class="codeph">MEDIUM</code>相当的压缩比，但会增加CPU消耗。
                           </p>
                        </li>
                        <li>
                           <p>如果已启用Oracle Advanced Compression选项，则可以从<span class="q">“ <a href="configuring-rman-client-advanced.html#GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45">关于Oracle Advanced Compression选项</a> ”中</span>概述的压缩级别中进行<span class="q"><a href="configuring-rman-client-advanced.html#GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45">选择</a></span> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-2AFCD551-95CB-4F9F-946E-550E89613974__GUID-E9A27EB7-A169-4973-8402-BEBAB927D5AB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-rman-client-advanced.html#GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" title="RMAN支持预压缩处理和备份集的二进制压缩。CONFIGURE COMPRESSION ALGORITHM命令可以配置压缩选项。">配置压缩选项</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> ，了解<code class="codeph">BACKUP AS BACKUPSET</code>和<code class="codeph">CONFIGURE COMPRESSION ALGORITHM</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV417"></a><div class="props_rev_3"><a id="GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" name="GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005"></a><h4 id="BRADV-GUID-1AD870B1-4D49-4056-A7C0-9B10BC3EE005" class="sect4"><span class="enumeration_section">8.3.4</span>关于RMAN备份撤消优化</h4>
                  <div>
                     <p>在备份撤消优化中，RMAN排除了恢复备份时不需要的撤销，即已经提交的事务。</p>
                     <p>备份撤消优化适用于磁盘备份和Oracle Secure Backup磁带备份。与<a href="glossary.html#GUID-C75B395F-CA6E-4286-826B-67AABE99606A"><span class="xrefglossterm">备份优化</span></a>不同，备份撤消优化不可配置。
                     </p>
                  </div>
               </div><a id="BRADV89482"></a><div class="props_rev_3"><a id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" name="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF"></a><h4 id="BRADV-GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF" class="sect4"><span class="enumeration_section">8.3.5</span>关于RMAN备份集的加密</h4>
                  <div>
                     <p>RMAN支持备份集的备份加密。您可以使用基于密钥库的透明加密，基于密码的加密或两者。</p>
                     <p>您可以使用<a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE ENCRYPTION</code></a>命令配置持久透明加密。使用<a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN会话</span></a>级别的<a href="../rcmrf/SET.html#RCMRF153" target="_blank"><code class="codeph">SET ENCRYPTION</code></a>命令指定基于密码的加密。
                     </p>
                     <div class="infoboxnote" id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF__GUID-C34AC04A-0343-460B-9496-444AC6E04E9A">
                        <p class="notep1">注意：</p>
                        <p>基于密钥库的加密比基于密码的加密更安全，因为不涉及密码。仅在绝对必要时才使用基于密码的加密，因为备份必须是可传输的。</p>
                     </div>
                     <p>要使用RMAN在磁盘上创建加密备份，数据库必须使用高级安全性选项。对于直接加密到磁带的RMAN备份， <a href="glossary.html#GUID-8879C26C-4DF5-4040-BC7A-37CF7C482C56"><span class="xrefglossterm">Oracle Secure Backup</span></a> <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a>是唯一受支持的接口。
                     </p>
                     <div class="infoboxnotealso" id="GUID-BE9E3C3F-F4A5-439F-8E80-D8CB4C8CC8DF__GUID-0F6E14DB-917F-44C9-8075-294A3027AACA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-rman-client-advanced.html#GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" title="为了提高安全性，您可以为RMAN备份集配置备份加密。如果未经授权的用户获取加密备份，则无法读取这些备份。">配置备份加密</a></p>
                           </li>
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-ECBE4965-57F7-49F0-BECD-734196F417F5" title="您可以使用备份加密保护RMAN备份集。如果未经授权的用户获取加密备份，则无法读取这些备份。">加密RMAN备份</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89483"></a><div class="props_rev_3"><a id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" name="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9"></a><h4 id="BRADV-GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" class="sect4"><span class="enumeration_section">8.3.6</span>关于RMAN备份片的文件名</h4>
                  <div>
                     <p>您可以让RMAN确定备份片段的唯一名称，也可以使用<code class="codeph">FORMAT</code>子句指定名称。
                     </p>
                     <p>如果未指定<code class="codeph">FORMAT</code>参数，则RMAN会在默认备份位置自动生成具有<code class="codeph">%U</code>替换变量的唯一文件名。
                     </p>
                     <p>RMAN通过<code class="codeph">%U</code>生成SBT备份片名的示例是：</p><pre class="pre codeblock"><code>2i1nk47_1_1</code></pre><p>磁盘上的非Oracle托管文件（OMF）备份片的示例是：</p><pre class="pre codeblock"><code>/备份/ TEST / 2i1nk47_1_1</code></pre><p><code class="codeph">FORMAT</code>子句支持<code class="codeph">%U</code>以外的替换变量来生成唯一文件名。例如，您可以使用<code class="codeph">%d</code>生成数据库的名称，使用<code class="codeph">%I</code>表示DBID，使用<code class="codeph">%t</code>表示时间戳，依此类推。
                     </p>
                     <p>您最多可以指定四个<code class="codeph">FORMAT</code>参数。如果指定多个<code class="codeph">FORMAT</code>参数，则只有在指定多个副本时，RMAN才会使用多个<code class="codeph">FORMAT</code>参数。您可以使用<code class="codeph">BACKUP ...</code>创建多个副本<code class="codeph">BACKUP ...</code><code class="codeph">COPIES</code> ， <a href="../rcmrf/SET.html#RCMRF153" target="_blank"><code class="codeph">SET BACKUP COPIES</code></a>或<a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE ...BACKUP COPIES</code></a>命令。
                     </p>
                     <div class="infoboxnote" id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9__GUID-19CC7970-0D5B-4B70-977A-092FC189D732">
                        <p class="notep1">注意：</p>
                        <p>如果使用媒体管理器，请检查供应商文档以了解<code class="codeph">FORMAT</code>限制，例如名称大小，命名约定等。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9__GUID-68F4AC4E-0297-419C-9E6F-0769116E7081">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="backing-up-database.html#GUID-A733BDFC-8239-4610-8D26-40B6F2D07091" title="RMAN提供了一系列选项来命名BACKUP命令生成的文件。">指定RMAN备份的格式</a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle数据库备份和恢复参考，</cite></span></a>用于描述<code class="codeph">FORMAT</code>子句和替换变量</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89484"></a><div class="props_rev_3"><a id="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" name="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9"></a><h4 id="BRADV-GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9" class="sect4"><span class="enumeration_section">8.3.7</span>关于RMAN备份片的数量和大小</h4>
                  <div>
                     <p>默认情况下，备份集包含一个备份片。要限制每个备份片的大小，请指定<code class="codeph">CONFIGURE CHANNEL</code>或<code class="codeph">ALLOCATE CHANNEL</code>命令的<code class="codeph">MAXPIECESIZE</code>选项。
                     </p>
                     <p><code class="codeph">MAXPIECESIZE</code>选项将备份片段大小限制为指定的字节数。如果备份集的总大小大于指定的备份片大小，则RMAN会创建多个物理片段来保存备份集内容。
                     </p>
                     <p>您可以将此选项用于无法管理跨多个磁带的备份片段的媒体管理器。例如，如果磁带可容纳10 GB，但正在创建的备份集必须包含80 GB的数据，则必须指示RMAN创建10 GB的备份片段，小到足以适合与媒体管理器一起使用的磁带。在这种情况下，备份集媒体由八个磁带组成。支持SBT 2.0的媒体管理器可以向RMAN返回一个值，表示RMAN在规划备份活动时使用的最大支持备份片段大小。</p>
                     <p>如果在<code class="codeph">BACKUP</code>命令上指定<code class="codeph">SECTION SIZE</code>参数，则RMAN可以创建<a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">多节备份</span></a> 。在这种情况下，单个备份集可以包含多个备份片，每个备份片包含一个<a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">文件节</span></a> 。多节备份的目的是使多个通道能够并行备份大型文件。
                     </p>
                     <div class="infoboxnotealso" id="GUID-DD7E7E32-B0F7-4FA0-91C3-0811610A13D9__GUID-1B03D6AC-4A72-4BC0-AFFB-6B9B9FA1B862">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-rman-client-advanced.html#GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" title="当备份片大小超过文件系统或媒体管理软件允许的最大文件大小时，它是一个问题。您可以使用CONFIGURE CHANNEL或ALLOCATE CHANNEL命令的MAXPIECESIZE参数来限制备份片的大小。">配置备份片的最大大小</a></p>
                           </li>
                           <li>
                              <p>适用于<code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code>语法的<a href="../rcmrf/ALLOCATE-CHANNEL.html#RCMRF102" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">CONFIGURE</code>语法的<a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89485"></a><div class="props_rev_3"><a id="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" name="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A"></a><h4 id="BRADV-GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A" class="sect4"><span class="enumeration_section">8.3.8</span>关于RMAN备份集的数量和大小</h4>
                  <div>
                     <p>您可以使用<code class="codeph">BACKUP</code>命令的<span class="italic"><code class="codeph">backupSpec</code></span>子句指定要备份的对象。每个<span class="italic"><code class="codeph">backupSpec</code></span>子句至少生成一个备份集。
                     </p>
                     <p>备份集的总数和大小主要取决于内部RMAN算法。但是，您可以使用<code class="codeph">CONFIGURE</code>或<code class="codeph">BACKUP</code>命令中的<code class="codeph">MAXSETSIZE</code>参数来影响RMAN行为。通过限制备份集的大小，该参数间接限制了集中的文件数，并可能强制RMAN创建其他备份集。此外，您可以指定<code class="codeph">BACKUP ...FILESPERSET</code>指定每个备份集中的最大文件数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A5E1735-A8D6-4481-BED9-105144E9B39A__GUID-757856C9-A548-4205-9623-BBF1EAE042C5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7" title="BACKUP命令的MAXSETSIZE参数指定备份集的最大大小，以字节（默认），千字节，兆字节或千兆字节为单位。">关于备份集大小</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-rman-performance.html#GUID-33D81037-2310-4021-8039-1A2C579AAA5A" title="RMAN调整的目的是识别给定作业的瓶颈，并使用RMAN命令，初始化参数或对物理介质的调整来提高性能。当RMAN通道从磁盘读取数据时，多个因素会影响性能。在备份期间，RMAN通道将输入文件中的块读入I / O磁盘缓冲区。磁盘子系统上的数据库文件可以由自动存储管理（ASM）或备用卷管理器或文件系统管理。备份调整的注意事项会根据您是否使用ASM管理数据库文件而更改。当通道读取或写入磁盘时，I / O可以是同步I / O或异步I / O.在不支持本机异步I / O的操作系统上，数据库可以使用特殊的I / O从属进程对其进行仿真。这些过程专门用于代表另一个进程执行I / O.您可以使用RATE参数设置读取的字节数的上限，以便RMAN不会消耗过多的磁盘带宽并降低在线性能。从本质上讲，RATE充当备用节流阀。在复制阶段，通道将块从输入缓冲区复制到输出缓冲区并执行其他处理。备份到SBT时，RMAN为媒体管理软件提供字节流，并将唯一名称与此流关联。存储流的方式和位置的所有细节完全由媒体管理器处理。因此，备份到磁带涉及RMAN和媒体管理器的交互。影响SBT写入阶段的RMAN特定因素类似于影响磁盘读取的因素。在这两种情况下，缓冲区分配，从属进程以及同步或异步I / O都会影响性能。多种因素会影响备份到磁带的速度。如果磁带设备是远程的，则介质管理器必须通过网络传输数据。磁带本机传输速率是在没有压缩的情况下写入磁带的速度。此速度表示备份速率的上限。磁带压缩级别对备份性能非常重要。如果磁带具有良好的压缩性，则持续备份速率更快。写入操作期间的磁带流对磁带备份性能有重大影响。物理磁带块大小会影响备份性能。影响磁盘写入阶段的主要因素是缓冲区大小。通常，您可以使用V $视图开始调整过程，以确定RMAN备份和还原操作遇到问题的位置。您可以通过查询视图V $ SESSION_LONGOPS来监视备份和还原作业的进度。 RMAN在V $ SESSION_LONGOPS中使用两种类型的行：详细信息行和聚合行。您可以使用V $ BACKUP_SYNC_IO和V $ BACKUP_ASYNC_IO视图来确定备份或还原瓶颈的来源，并查看备份作业的详细进度。查询V $ BACKUP_SYNC_IO视图以识别具有同步I / O的瓶颈。查询V $ BACKUP_ASYNC_IO以识别异步I / O的瓶颈。许多因素都会影响备份性能。通常，找到缓慢备份的解决方案是一个反复试验的过程。通道上的RATE参数旨在减少而不是增加备份吞吐量，以便为其他数据库操作提供更多磁盘带宽。如果备份未流式传输到磁带，则确认未设置RATE参数。某些操作系统支持本机异步I / O.当且仅当您的磁盘不支持异步I / O时，请设置DBWR_IO_SLAVES。 DBWR_IO_SLAVES的任何非零值都会导致使用固定数量的磁盘I / O从站进行备份和还原，从而模拟异步I / O.如果数据库在警报日志中报告错误，则说明它不是，那么请设置LARGE_POOL_SIZE初始化参数。有足够的内存，无法启动I / O从属。您可以执行多项任务来识别和修复影响备份性能的瓶颈。确定输出设备或输入磁盘I / O是否是给定备份作业的瓶颈的一种可靠方法是将运行备份任务所需的时间与运行相同任务的BACKUP VALIDATE所需的时间进行比较。备份的BACKUP VALIDATE执行与真实备份相同的磁盘读取，但不对输出设备执行I / O.调整读取阶段有助于提高RMAN性能。如果读取阶段表现良好，那么复制或写入阶段可能是瓶颈。特别是，如果RMAN正在以足够快的速度向磁带驱动器发送数据块以支持流式传输，但磁带不是流式传输，那么SBT写入阶段就是瓶颈。">调整RMAN性能</a>以了解RMAN缓冲区管理</p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle数据库备份和恢复参考，</cite></span></a>以了解<span class="italic"><code class="codeph">backupSpec</code></span>子句的语法</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV196"></a><a id="BRADV89486"></a><div class="props_rev_3"><a id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" name="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97"></a><h4 id="BRADV-GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97" class="sect4"><span class="enumeration_section">8.3.9</span>关于多路复用RMAN备份集</h4>
                  <div>
                     <p>创建备份集时，RMAN可以同时从磁盘读取多个文件，然后将其块写入同一备份集。例如，RMAN可以同时读取两个数据文件，然后将这些数据文件中的块组合成一个备份片。来自多个文件的块组合称为备份多路复用。</p>
                     <p>相反，图像副本从不复用。</p>
                     <div class="infoboxnote" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-10CE3FAB-D691-4ECD-9857-11AB637004E5">
                        <p class="notep1">注意：</p>
                        <p>如果RMAN创建数据文件的<a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">多节备份</span></a> ，则数据文件不会与任何其他数据文件或<a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">文件节</span></a>复用。
                        </p>
                     </div>
                     <p><a href="rman-backup-concepts.html#GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__I1018026">如图8-1</a>所示，RMAN可以将三个数据文件备份到仅包含一个备份片的备份集中。该备份片包含三个输入数据文件的混合数据块。
                     </p>
                     <div class="figure" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__I1018026">
                        <p class="titleinfigure">图8-1数据文件复用</p><img src="img/bradv022.gif" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/bradv022.html"><br><a href="img_text/bradv022.html">“图8-1数据文件复用”的描述</a></div>
                     <!-- class="figure" -->
                     <p>RMAN复用由几个因素决定。例如， <code class="codeph">BACKUP</code>命令的<code class="codeph">FILESPERSET</code>参数确定要在每个备份集中放入多少数据文件。<code class="codeph">ALLOCATE CHANNEL</code>或<code class="codeph">CONFIGURE CHANNEL</code>的<code class="codeph">MAXOPENFILES</code>参数定义了RMAN可以同时读取的数据文件数量。基本的复用算法如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个备份集中的文件数</p>
                           <p>此数字是<code class="codeph">FILESPERSET</code>设置的最小值和每个通道读取的文件数。<code class="codeph">FILESPERSET</code>默认值为64。
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-648D7B2D-7AB2-40C0-AFFD-0A6FE569F3D7"><span class="xrefglossterm">多路复用的程度</span></a></p>
                           <p>这是同时读取然后写入同一备份片段的输入文件数。多路复用级别是<code class="codeph">MAXOPENFILES</code>的最小值和每个备份集中的文件数。<code class="codeph">MAXOPENFILES</code>默认值为8。
                           </p>
                        </li>
                     </ul>
                     <p>假设当<code class="codeph">FILEPERSET</code>设置为4时，您使用一个通道备份12个数据文件。多路复用级别是这个数字中较小的一个，8。因此，通道同时将来自4个数据文件的块写入每个备份片。
                     </p>
                     <p>现在假设您使用一个通道备份50个数据文件。每个备份集中的文件数为50。多路复用级别是这个数字中较小的一个，8。因此，通道同时将来自8个数据文件的块写入每个备份片。</p>
                     <p>备份集的RMAN复用与<a href="glossary.html#GUID-C40B78A9-99C9-4B49-85D0-8174FD1E271B"><span class="xrefglossterm">媒体管理器复用</span></a>不同。当媒体管理器将来自多个RMAN信道的并发输出写入单个顺序设备时，发生一种类型的媒体管理器复用。当备份在同一磁带上混合数据库文件和非数据库文件时，会出现另一种类型。
                     </p>
                     <div class="infoboxnote" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-E4DAF1D6-C569-4440-A486-DEBA713A4C37">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议您永远不要将介质管理器多路复用用于RMAN备份。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-6E6613A6-545A-4E65-8D5E-849CB6B91E97__GUID-23DF9C1B-2AA3-460D-834F-D14D63550319">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="tuning-rman-performance.html#GUID-59FBFBBE-78F0-4035-8FAC-818DB539576B" title="在备份期间，RMAN通道将输入文件中的块读入I / O磁盘缓冲区。磁盘子系统上的数据库文件可以由自动存储管理（ASM）或备用卷管理器或文件系统管理。备份调整的注意事项会根据您是否使用ASM管理数据库文件而更改。">分配输入磁盘缓冲区</a>以了解多路复用如何影响备份期间磁盘缓冲区的分配</p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">BACKUP</code>语法的<a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89487"></a><div class="props_rev_3"><a id="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" name="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47"></a><h4 id="BRADV-GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47" class="sect4"><span class="enumeration_section">8.3.10</span>关于RMAN代理副本</h4>
                  <div>
                     <p>在代理副本期间，RMAN将数据传输的控制权转交给支持此功能的媒体管理器。代理副本只能与支持它的媒体管理器一起使用，不能与<code class="codeph">DISK</code>类型的通道一起使用。 <code class="codeph">BACKUP</code>命令的<code class="codeph">PROXY</code>选项指定备份是代理副本。
                     </p>
                     <p>对于您尝试使用<code class="codeph">BACKUP</code> <code class="codeph">PROXY</code>命令进行<code class="codeph">BACKUP</code>每个文件，RMAN会查询媒体管理器以确定它是否可以执行代理副本。如果媒体管理器无法代理复制文件，则RMAN将备份该文件，就像未使用<code class="codeph">PROXY</code>选项一样。（如果无法执行代理副本，请使用<code class="codeph">PROXY</code> <code class="codeph">ONLY</code>选项强制RMAN失败。）
                     </p>
                     <p>永远不会使用代理副本备份控制文件。如果在备份控制文件的操作上指定了<code class="codeph">PROXY</code>选项，则会以静默方式忽略该选项以备份控制文件。
                     </p>
                     <div class="infoboxnotealso" id="GUID-2F6EBF71-E699-4C9C-832B-9AA8566E3F47__GUID-53D434D4-1052-40A7-9D65-D21EC89FFF83">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">V$PROXY_DATAFILE</code>视图的更多信息，请<a href="../refrn/V-PROXY_DATAFILE.html#REFRN30188" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$PROXY_ARCHIVEDLOG</code>视图的更多信息，请<a href="../refrn/V-PROXY_ARCHIVEDLOG.html#REFRN30187" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">BACKUP</code>命令和<code class="codeph">PROXY</code>选项的<a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89488"></a><div class="props_rev_3"><a id="GUID-3580BA12-463A-4A61-939D-58C51E81FF12" name="GUID-3580BA12-463A-4A61-939D-58C51E81FF12"></a><h3 id="BRADV-GUID-3580BA12-463A-4A61-939D-58C51E81FF12" class="sect3"><span class="enumeration_section">8.4</span>关于RMAN映像副本</h3>
               <div>
                  <p>映像副本是单个数据文件，归档重做日志文件或控制文件的精确副本。</p>
                  <p>图像副本不以RMAN特定格式存储。它们与使用操作系统命令复制文件的结果相同。RMAN可以在RMAN还原和恢复操作期间使用映像副本，还可以使用具有非RMAN还原和恢复技术的映像副本。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" title="要创建映像副本并将其记录在RMAN存储库中，请运行RMAN BACKUP AS COPY命令。">关于RMAN创建的映像副本</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" title="RMAN可以使用由RMAN外部的机制创建的映像副本，例如本机操作系统文件复制命令或将文件的映像副本保留在磁盘上的第三方实用程序。此类副本称为用户管理的备份或操作系统备份。">关于用户管理的映像副本</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV197"></a><a id="BRADV89489"></a><div class="props_rev_3"><a id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" name="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4"></a><h4 id="BRADV-GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4" class="sect4"><span class="enumeration_section">8.4.1</span>关于RMAN创建的映像副本</h4>
                  <div>
                     <p>要创建映像副本并将其记录在RMAN存储库中，请运行RMAN <code class="codeph">BACKUP</code> <code class="codeph">AS</code> <code class="codeph">COPY</code>命令。
                     </p>
                     <p>或者，您可以将磁盘的默认备份类型配置为映像副本。数据库服务器会话用于创建副本。服务器会话还执行诸如验证文件中的块并将映像副本记录在RMAN存储库中的操作。</p>
                     <p>与备份片段一样， <a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><code class="codeph">FORMAT</code></a>变量用于指定图像副本的名称。默认格式<code class="codeph">%U</code> （在<span class="q">“ <a href="rman-backup-concepts.html#GUID-B68A34FB-FF89-4C27-AC7C-FDED81C75FD9" title="您可以让RMAN确定备份片段的唯一名称，也可以使用FORMAT子句指定名称。">关于RMAN备份片段的文件名</a> ”</span>中进行了说明）对图像副本的定义不同。以下示例显示<code class="codeph">%U</code>生成的数据文件<code class="codeph">2</code>的名称：</p><pre class="pre codeblock"><code>/d1/oracle/work/orcva/RDBMS/datafile/o1_mf_sysaux_2qylngm3_.dbf</code></pre><p>创建映像副本时，还可以使用<code class="codeph">BACKUP</code>命令的<code class="codeph">DB_FILE_NAME_CONVERT</code>参数命名输出副本。此参数与<a href="../refrn/DB_FILE_NAME_CONVERT.html#REFRN10038" target="_blank"><code class="codeph">DB_FILE_NAME_CONVERT</code></a>初始化参数的工作方式相同。提供成对的文件名前缀以更改输出文件的名称。如果文件未被任何对转换，则RMAN使用<code class="codeph">FORMAT</code>规范：如果未指定<code class="codeph">FORMAT</code> ，则RMAN使用默认格式<code class="codeph">%U</code> 。</p>
                     <div class="example" id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4__CHDFBHHA">
                        <p class="titleinexample">示例8-1使用DB_FILE_NAME_CONVERT指定文件名</p>
                        <p>此示例复制其文件名以<code class="codeph">/maindisk/oradata/users</code>为前缀的数据文件，以便它们以<code class="codeph">/backups/users_ts</code>为前缀。
                        </p><pre class="pre codeblock"><code>BACKUP AS COPY DB_FILE_NAME_CONVERT（'/ maindisk / oradata / users'，'/ backups / users_ts'）TABLESPACE用户;</code></pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>如果运行<code class="codeph">RESTORE</code>命令，则默认情况下，RMAN会将映像副本备份复制到该位置，从而将数据文件或控制文件还原到其原始位置。由于在搜索要恢复的文件时读取整个备份集的额外开销，因此在备份集上选择映像副本。
                        </p>
                        <p>如果必须还原和恢复当前数据文件，并且磁盘上有可用的映像副本，则无需将映像副本RMAN复制回其旧位置。相反，您可以使用映像副本作为要还原的数据文件的替代。 <span class="q">“ <a href="rman-complete-database-recovery.html#GUID-19A07A76-AE1E-41EE-8B7D-7C4EF1FD3137" title="您可以通过切换到无法访问的数据文件的映像副本来恢复数据库。这种技术比传统的恢复和恢复花费的时间更少，因为不需要恢复备份。">切换到副本后执行完全恢复</a> ”</span>说明了如何执行此任务。
                        </p>
                        <div class="infoboxnotealso" id="GUID-D73BDDC7-A4AC-40A2-B279-1A764A51EBC4__GUID-4B1FF3CA-8C95-42D6-9849-ED5D8E2A449C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-rman-client-basic.html#GUID-BC37B3E4-3338-4452-A363-DB882F2E9415" title="BACKUP命令可以创建备份集或映像副本。对于磁盘，您可以使用CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO命令将RMAN配置为创建备份集或映像副本作为其默认备份类型。">配置备份的默认类型：备份集或副本</a>以了解如何使备份集或映像副本成为默认类型的RMAN备份</p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database.html#GUID-030BA0C5-832E-42A1-A63A-5E2D768BABB9" title="RMAN可以在磁盘上创建备份作为映像副本或备份集。">为RMAN备份指定备份集或复制到磁盘</a></p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> ，了解图像副本的<code class="codeph">%U</code>含义</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89490"></a><div class="props_rev_3"><a id="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" name="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0"></a><h4 id="BRADV-GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0" class="sect4"><span class="enumeration_section">8.4.2</span>关于用户管理的映像副本</h4>
                  <div>
                     <p>RMAN可以使用由RMAN外部的机制创建的映像副本，例如本机操作系统文件复制命令或将文件的映像副本保留在磁盘上的第三方实用程序。此类副本称为用户管理的备份或操作系统备份。</p>
                     <p>您可以使用<a href="../rcmrf/CATALOG.html#RCMRF109" target="_blank"><code class="codeph">CATALOG</code></a>命令检查现有映像副本，并将其元数据输入RMAN存储库。但是， <code class="codeph">CATALOG</code>命令不执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读取数据文件副本中的所有块以确保没有损坏</p>
                        </li>
                        <li>
                           <p>保证在<a href="glossary.html#GUID-BD2A12D3-A995-49B8-AE99-B8DDDF4FE7E7"><span class="xrefglossterm">备份模式下</span></a>正确进行映像复制</p>
                        </li>
                     </ul>
                     <p>对这些文件进行编目后，可以像使用RMAN生成的映像副本一样将它们与<a href="../rcmrf/RESTORE.html#RCMRF149" target="_blank"><code class="codeph">RESTORE</code></a>或<a href="../rcmrf/SWITCH.html#RCMRF159" target="_blank"><code class="codeph">SWITCH</code></a>命令一起使用。
                     </p>
                     <p>某些站点将其数据文件存储在镜像磁盘卷上，这允许通过<a href="glossary.html#GUID-4810DFC7-CC25-4CD9-8D04-79EE7DAF061D"><span class="xrefglossterm">断开镜像来</span></a>创建映像副本。在破坏镜像后，您可以通知RMAN存在新的用户管理副本，从而使其有资格进行备份。使用<a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><code class="codeph">CHANGE</code></a>时，您必须在副本不再可用时通知RMAN <code class="codeph">...</code> <code class="codeph">UNCATALOG</code>命令。
                     </p>
                     <div class="infoboxnotealso" id="GUID-C0BD0706-29EF-44C6-AF53-401522B4BDD0__GUID-CAA82815-C2C1-43AC-800B-90579187BAA2">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="user-managed-database-backups.html#GUID-2193FAD0-F62C-4671-9272-55E8BD7367DC">进行用户管理的数据库备份</a></p>
                           </li>
                           <li>
                              <p><a href="maintaining-rman-backups.html#GUID-3FC88C14-C9CC-445D-8922-C92659004FA4" title="您可以使用CATALOG命令使RMAN知道存储库中未记录的存档日志的存在，或者通过RMAN以外的方式创建的数据库文件的副本。">将备份记录添加到RMAN存储库</a>以了解如何编目数据文件和存档日志映像副本</p>
                           </li>
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C" title="许多站点保留存储在磁盘上的数据库的备份，以防主数据库发生介质故障或不正确的用户操作需要时间点恢复。磁盘上的数据文件备份简化了恢复的恢复步骤，使恢复更加快速和可靠。">使用RMAN进行分割镜像备份</a></p>
                           </li>
                           <li>
                              <p>适用于<code class="codeph">CHANGE</code>语法的<a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865" name="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865"></a><h3 id="BRADV-GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865" class="sect3"><span class="enumeration_section">8.5</span>关于稀疏备份</h3>
               <div>
                  <p>您可以使用RMAN <code class="codeph">BACKUP</code>命令从稀疏数据文件，包含稀疏数据文件的表空间，稀疏可插拔数据库（PDB）和包含稀疏PDB的多租户容器数据库（CDB）备份数据块。
                  </p>
                  <p>稀疏数据文件是一个逻辑Oracle对象，它创建为基础数据文件对象的阴影，并存储在称为增量空间的物理存储空间中。例如，考虑从基础数据库<code class="codeph">DB</code>创建的稀疏数据库<code class="codeph">DB0</code> 。在稀疏环境中，基础对象必须是只读的。与基础数据库不同，稀疏数据库是读写数据库。在这种情况下， <code class="codeph">DB</code>是一个只读数据库，由5个数据文件组成。<code class="codeph">DB0</code>重新创建这5个基本数据文件中每个文件的逻辑版本，并为每个单独的文件分配单独的增量存储空间。当稀疏数据库<code class="codeph">DB0</code>更新稀疏数据文件之一中的数据块时，仅将更新的块逻辑地存储在该修改的数据文件的增量空间中。当您选择在<code class="codeph">DB0</code>上执行稀疏备份时，操作将仅从数据库的增量存储空间和稀疏数据文件的增量空间复制数据。稀疏备份可以是备份集格式（默认）或映像副本格式。RMAN从稀疏备份还原稀疏数据文件，然后从归档和重做日志中恢复它们。您可以对稀疏数据文件执行完整或时间点恢复。
                  </p>
                  <p>要执行稀疏备份和恢复操作，数据库必须将<code class="codeph">COMPATIBLE</code>初始化参数设置为12.2或更高。
                  </p>
                  <p>如果数据库的<code class="codeph">COMPATIBLE</code>初始化参数为12.2，并且您对非稀疏（正常）数据文件执行完全或0级增量备份，则RMAN会对指定的数据文件执行传统的完全备份或0级增量备份。另一方面，如果在稀疏数据文件上执行完全或0级增量备份，则RMAN仅对该特定数据文件的增量存储空间中的所有最新更改执行备份。
                  </p>
                  <p>对于<code class="codeph">COMPATIBLE</code>初始化参数小于12.2的数据库，RMAN继续像以前一样执行备份和恢复操作，不受数据文件稀疏性的影响。
                  </p>
                  <p>稀疏备份有助于有效管理存储空间，并有助于加快备份和恢复速度。</p>
                  <div class="infoboxnote" id="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865__GUID-32B516C4-6C90-49D5-8C04-E9AAC0D767DB">
                     <p class="notep1">注意：</p>
                     <p>稀疏数据库中的基本（只读）数据文件未加密。确保基础数据文件存储在受保护的存储中，并使用安全通信进行访问。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-D0AEBAF2-FDEA-4977-9B4D-97759A1CA865__GUID-5B10FB60-6A45-45BE-B3AF-33B7B34F112C">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="backing-up-database.html#GUID-17F2020E-9C9B-4D1C-BC60-A09C3A87CF55" title="使用BACKUP命令备份稀疏数据库。">使用RMAN备份稀疏数据库</a></p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" name="GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D"></a><h3 id="BRADV-GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" class="sect3"><span class="enumeration_section">8.6</span>关于预备份备份</h3>
               <div>
                  <p>预包装备份是在非CDB或PDB插入其他CDB之前创建的非CDB或PDB的RMAN备份。</p>
                  <p></p>
                  <p>插入非CDB或PDB的CDB称为目标CDB。预刷新备份可用于目标CDB中的PDB还原和恢复操作。要执行介质恢复，所有必需的归档重做日志都必须包含在预刷新备份中。</p>
                  <p>要使预涂层备份在目标CDB中可用，必须将有关预涂层备份的元数据导出到目标CDB的RMAN存储库。从源CDB拔出PDB时，所需的元数据存储在拔出操作期间创建的XML文件中。对于非CDB，使用<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP()</code>过程将在目标CDB中可用的预备份备份所需的元数据添加到非CDB的数据字典中。
                  </p>
                  <p>预填充备份仅可用于插入源非CDB或PDB的目标CDB。例如，假设您将PDB从CDB <code class="codeph">src_cdb</code>迁移到CDB <code class="codeph">stage_cdb</code> 。随后，将源PDB从CDB <code class="codeph">stage_cdb</code>到CDB <code class="codeph">prod_cdb</code> 。CDB <code class="codeph">src_pdb</code>可以访问在CDB <code class="codeph">stage_pdb</code>上创建的PDB备份。然而，CDB <code class="codeph">prod_cdb</code>只能访问在CDB创建的PDB备份<code class="codeph">stage_cdb</code> ，而不是在CDB创建的PDB备份<code class="codeph">src_cdb</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D__GUID-24EF611B-FF85-458E-ABCF-237CF477990E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="backing-up-database.html#GUID-E5A3E523-C55C-4666-8334-81E7A224371B" title="在PDB迁移并插入到其他目标CDB之后，PDB的预刷新备份可用于执行还原和恢复操作。">使用RMAN创建PDB的预刷新备份</a></p>
                        </li>
                        <li>
                           <p><a href="backing-up-database.html#GUID-7F9F8913-2838-4066-A000-048B35A70EA4" title="预打印备份确保在将非CDB作为PDB插入CDB后可以使用RMAN备份。">创建整个数据库的预刷新备份</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV107"></a><div class="props_rev_3"><a id="GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" name="GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5"></a><h3 id="BRADV-GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" class="sect3"><span class="enumeration_section">8.7</span>关于RMAN备份的多个副本</h3>
               <div>
                  <p>RMAN使您可以创建多个相同的备份副本。</p>
                  <p>使用以下方法之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">BACKUP</code>双工备份<code class="codeph">...COPIES</code>命令，在这种情况下，RMAN会为每个备份集创建多个副本</p>
                        <p>请参见<a href="rman-backup-concepts.html#GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A">关于双工备份集</a> 。
                        </p>
                     </li>
                     <li>
                        <p>将文件备份为备份集或映像副本，然后使用RMAN <code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code>或<code class="codeph">BACKUP</code> <code class="codeph">COPY OF</code>命令备份备份集或映像副本</p>
                        <p>请参阅<a href="rman-backup-concepts.html#GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" title="RMAN BACKUP BACKUPSET命令备份在磁盘上创建的备份集。该命令是在多个媒体之间传播备份的有用方法。">关于RMAN备份的备份</a> 。
                        </p>
                     </li>
                  </ul>
               </div><a id="BRADV89491"></a><div class="props_rev_3"><a id="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A" name="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A"></a><h4 id="BRADV-GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A" class="sect4"><span class="enumeration_section">8.7.1</span>关于双工备份集</h4>
                  <div>
                     <p><a id="d36784e3646" class="indexterm-anchor"></a><a id="d36784e3648" class="indexterm-anchor"></a>将数据文件，归档重做日志文件，服务器参数文件和控制文件备份到备份片段时，RMAN可以创建<a href="glossary.html#GUID-614D6594-1A1A-46EE-A041-312ADAB7E151"><span class="xrefglossterm">双工备份集</span></a> ，在不同备份目标的备份集中为每个备份片创建最多四个相同的副本，其中一个<code class="codeph">BACKUP</code>命令。生成映像副本的备份操作不支持双工。
                     </p>
                     <p>您可以在<code class="codeph">CONFIGURE</code> ， <code class="codeph">SET</code>或中使用<code class="codeph">COPIES</code>参数<a id="d36784e3673" class="indexterm-anchor"></a><a id="d36784e3677" class="indexterm-anchor"></a> <code class="codeph">BACKUP</code>命令用于在使用<code class="codeph">BACKUP</code>命令时指定备份集的双工。RMAN可以将备份双工复制到磁盘或磁带，但不能同时将备份复制到磁带和磁盘。备份到磁带时，请确保副本数量不超过可用磁带设备的数量。
                     </p>
                     <p><a id="d36784e3690" class="indexterm-anchor"></a><a id="d36784e3694" class="indexterm-anchor"></a> <code class="codeph">BACKUP</code>命令的<code class="codeph">FORMAT</code>参数指定双工备份的目标。以下示例创建数据文件7备份的三个副本：</p><pre class="oac_no_warn" dir="ltr">备份设备类型磁盘副本3数据文件7格式'/ disk1 /％U'，'？/ ORADATA /％U ''？/％U';</pre><p>RMAN将每个备份片的第一个副本放在<code class="codeph">/disk1</code> ，第二个放在<code class="codeph">?/oradata</code> ，以及Oracle主页中的第三个。RMAN不会生成三个备份集，每个备份集具有不同的唯一备份集密钥。相反，RMAN生成一个具有唯一键的备份集，并为该集中的每个备份片生成三个相同的副本。
                     </p>
                     <div class="infoboxnotealso" id="GUID-7BDEDD51-33B0-4B95-8D62-B11C225C490A__GUID-E86A1E9C-6391-414B-B664-6785ED7B1BDB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="configuring-rman-client-advanced.html#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" title="使用配置...BACKUP COPIES命令指定在指定类型的文件的指定设备类型上创建每个备份片的副本数。此类备份称为双工备份集。">配置备份双工</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="backing-up-database-advanced.html#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" title="RMAN最多可以同时备份四个备份集，每个副本与其他备份集完全相同。">双工备份集</a> ”</span></p>
                           </li>
                           <li>
                              <p><code class="codeph">CONFIGURE</code>语法的<a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">SET</code>语法的<a href="../rcmrf/SET.html#RCMRF153" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89492"></a><div class="props_rev_3"><a id="GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" name="GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91"></a><h4 id="BRADV-GUID-3F8EDAFC-8A29-4E7B-BFEC-087AE10EDC91" class="sect4"><span class="enumeration_section">8.7.2</span>关于RMAN备份的备份</h4>
                  <div>
                     <p>您可以使用<code class="codeph">BACKUP</code>命令备份现有备份集和映像副本。备份现有备份使您可以创建多个相同的RMAN备份副本。
                     </p>
                     <p>以下部分提供有关创建备份备份方法的详细信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-27161367-1F36-403A-9862-F7C69DA24642" title="RMAN BACKUP BACKUPSET命令备份在磁盘上创建的备份集。该命令是在多个媒体之间传播备份的有用方法。">备份集的备份</a></p>
                        </li>
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01">备份图像副本</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV607"></a><a id="BRADV203"></a><a id="BRADV89493"></a><div class="props_rev_3"><a id="GUID-27161367-1F36-403A-9862-F7C69DA24642" name="GUID-27161367-1F36-403A-9862-F7C69DA24642"></a><h5 id="BRADV-GUID-27161367-1F36-403A-9862-F7C69DA24642" class="sect5"><span class="enumeration_section">8.7.2.1</span>备份集的备份</h5>
                     <div>
                        <p>RMAN <code class="codeph">BACKUP BACKUPSET</code>命令备份在磁盘上创建的备份集。该命令是在多个媒体之间传播备份的有用方法。
                        </p>
                        <p>如果RMAN发现备份集的一个副本已损坏或丢失，则它会搜索同一备份集的其他副本。此行为类似于备份存在于多个归档目标中的归档重做日志时RMAN的行为。</p>
                        <p>从Oracle Database Release 18c开始，在备份备份集时，您可以使用<code class="codeph">BACKUP AS COMPRESSED BACKUPSET</code>命令压缩先前未压缩的备份集。
                        </p>
                        <p>RMAN使您可以创建未加密备份集的加密备份。在备份未加密的备份集之前，请使用<code class="codeph">SET ENCRYPTION FOR DATABASE ON</code>命令启用加密。请注意， <code class="codeph">SET</code>命令启用当前RMAN会话的加密。如果后续操作不需要加密，则关闭数据库的加密。
                        </p>
                        <div class="example" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__CHDHGCFI">
                           <p class="titleinexample">示例8-2将备份集备份到磁带</p>
                           <p>此示例显示了如何每周运行<code class="codeph">BACKUP</code>命令作为生产备份计划的一部分。这样，您可以确保磁盘和磁带上都存在所有备份。
                           </p><pre class="oac_no_warn" dir="ltr">备份设备类型磁盘作为BACKUPSET DATABASE PLUS ARCHIVELOG;备份设备类型sbt BACKUPSET ALL; ＃将磁盘上的备份集复制到磁带上</pre><div class="infoboxnote" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__GUID-4A312AF8-5FB7-44B5-A2C4-63CD32486337">
                              <p class="notep1">注意：</p>
                              <p>备份到使用自动通道的<code class="codeph">sbt</code>要求您首先运行<code class="codeph">CONFIGURE</code> <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code>命令。
                              </p>
                           </div>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__CHDFIGIE">
                           <p class="titleinexample">示例8-3管理空间分配</p>
                           <p>您还可以使用<code class="codeph">BACKUP</code> <code class="codeph">BACKUPSET</code>来管理备份空间分配。此示例备份一周以前从磁盘到磁带创建的备份集，然后从磁盘中删除它们。
                           </p><pre class="oac_no_warn" dir="ltr">备份设备类型sbt BACKUPSET在'SYSDATE-7'之前完成删除输入;</pre><p>此处的<code class="codeph">DELETE</code> <code class="codeph">INPUT</code>等效于<code class="codeph">DELETE</code> <code class="codeph">ALL</code> <code class="codeph">INPUT</code> ：RMAN删除备份集的所有现有副本。如果将备份双工复制到四个位置，则RMAN将删除备份集中所有四个副本。
                           </p>
                           <div class="infoboxnotealso" id="GUID-27161367-1F36-403A-9862-F7C69DA24642__GUID-A8948460-5FB1-41A4-9C8D-57660ACBF89F">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="backing-up-database.html#GUID-731ADA67-235E-481D-AC17-9F9067AD55BF" title="您可以使用BACKUP BACKUPSET命令备份其他备份作业生成的备份集。您还可以使用BACKUP RECOVERY AREA备份在当前和所有先前快速恢复区域目标中创建的恢复文件。BACKUP BACKUPSET命令在备份集中创建备份片的其他副本，但不创建新的备份集。对于基于冗余的备份保留策略，备份集将计为备份的一个实例。即使存在构成备份集的备份片的多个副本（例如，备份集已从磁盘备份到磁带），此语句也是如此。使用BACKUP BACKUPSET命令将备份集从磁盘复制到磁带。使用BACKUP命令将映像副本备份到磁带。">备份RMAN备份</a> ”</span></p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV89494"></a><div class="props_rev_3"><a id="GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01" name="GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01"></a><h5 id="BRADV-GUID-FEBF71D7-0FD8-4BB4-8B71-6485165C8C01" class="sect5"><span class="enumeration_section">8.7.2.2</span>映像副本的备份</h5>
                     <div>
                        <p><a id="d36784e4125" class="indexterm-anchor"></a><a id="d36784e4129" class="indexterm-anchor"></a>您可以使用<code class="codeph">BACKUP COPY OF</code>命令将数据库文件的现有映像副本备份为备份集或映像副本。使用此命令时，必须存在命令中指定的每个数据文件的映像副本。如果有多个数据文件副本，则使用最新的副本。如果指定表空间或整个数据库，则如果数据库或表空间中没有映像副本备份的数据文件，则RMAN会发出错误。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV111"></a><div class="props_rev_3"><a id="GUID-95840C84-1595-49AC-923D-310DA750676B" name="GUID-95840C84-1595-49AC-923D-310DA750676B"></a><h3 id="BRADV-GUID-95840C84-1595-49AC-923D-310DA750676B" class="sect3"><span class="enumeration_section">8.8</span>关于RMAN控制文件和服务器参数文件自动备份</h3>
               <div>
                  <p>在许多恢复情况下，最近备份控制文件和服务器参数文件非常有用。为确保您备份这些文件，数据库支持控制文件和服务器参数文件自动备份。</p>
                  <p>自动备份独立于作为<code class="codeph">BACKUP</code>命令的一部分显式请求的当前控制文件的任何备份。使用<a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">控制文件自动备份</span></a> ，即使当前控制文件，恢复目录和服务器参数文件不可访问，RMAN也可以恢复数据库。由于用于存储自动备份的路径遵循众所周知的格式，因此RMAN可以从该自动备份中搜索并还原服务器参数文件。使用还原的服务器参数文件启动实例后，RMAN可以从自动备份还原控制文件。装入控制文件后，使用装入的控制文件中的RMAN存储库还原数据文件。
                  </p>
                  <p>建议您打开控制文件自动备份。否则，RMAN数据库点即时恢复（DBPITR）和点即时恢复（PITR）为<a href="glossary.html#GUID-993BFB3F-3305-481C-999D-26132095DEC9"><span class="xrefglossterm">PDB</span></a> S可不能有效PITR时需要还原数据文件增删工作。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" title="根据目标数据库的配置，RMAN可以执行控制文件和服务器参数文件的自动备份。">当RMAN执行控制文件自动备份时</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" title="在备份作业期间分配的第一个通道创建自动备份并将其放入其自己的备份集中。对于数据库结构更改后的自动备份，与结构更改关联的服务器进程进行备份。">RMAN如何执行控制文件自动备份</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89495"></a><div class="props_rev_3"><a id="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" name="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2"></a><h4 id="BRADV-GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2" class="sect4"><span class="enumeration_section">8.8.1</span>当RMAN执行控制文件自动备份时</h4>
                  <div>
                     <p>根据目标数据库的配置，RMAN可以执行控制文件和服务器参数文件的自动备份。</p>
                     <p>对于非CDB，如果<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP</code>为<code class="codeph">ON</code> ，则在成功执行<code class="codeph">BACKUP</code>命令后，RMAN会自动备份控制文件和当前服务器参数文件（如果用于启动数据库）。对于<code class="codeph">COMPATIBLE</code>初始化参数设置为12.0或更高的CDB和独立数据库，默认情况下，控制文件自动备份已打开。
                     </p>
                     <p>如果数据库以<code class="codeph">ARCHIVELOG</code>模式运行，则当对数据库的结构更改影响控制文件的内容时，RMAN会进行控制文件自动备份。
                     </p>
                     <div class="infoboxnote" id="GUID-05C3D461-EF32-4605-959A-DAF03C7C4CC2__GUID-FD13ECCC-B9EF-4E08-96F4-FCB5A89CCDBF">
                        <p class="notep1">注意：</p>
                        <p>从Oracle Database Release <span class="italic">11g</span>第2版开始，当脚本中包含多个结构更改时，RMAN只接受一个控制文件自动备份（例如，添加表空间，更改表空间或数据文件的状态，添加新的联机重做日志，重命名）已应用文件等。
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV89496"></a><div class="props_rev_3"><a id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" name="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F"></a><h4 id="BRADV-GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F" class="sect4"><span class="enumeration_section">8.8.2</span> RMAN如何执行控制文件自动备份</h4>
                  <div>
                     <p>在备份作业期间分配的第一个通道创建自动备份并将其放入其自己的备份集中。对于数据库结构更改后的自动备份，与结构更改关联的服务器进程进行备份。</p>
                     <p>如果数据库正在使用服务器参数文件，则RMAN将其备份到与控制文件自动备份相同的备份集中。自动备份完成后，数据库会将包含备份片段的完整路径和设备类型的消息写入位于<a href="glossary.html#GUID-BDCE90D1-13B7-4D2C-A761-1583A238A247"><span class="xrefglossterm">自动诊断信息库（ADR）中</span></a>的警报日志。
                     </p>
                     <div class="infoboxnote" id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F__GUID-D20BCECC-CFD2-472C-87D3-EF83B039D85D">
                        <p class="notep1">注意：</p>
                        <p>控制文件自动备份从不双工。</p>
                     </div>
                     <p>控制文件自动备份文件名对于所有设备类型都具有默认格式<code class="codeph">%F</code> ，以便RMAN可以确定文件位置并在没有存储库的情况下还原它。您可以使用<code class="codeph">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code>命令指定其他格式，但所有自动备份格式都必须包含<code class="codeph">%F</code>变量。如果不使用默认格式，则在灾难恢复期间必须指定用于生成自动备份的格式。否则，RMAN无法还原自动备份。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CC0CBD56-E3A5-4EAC-A542-29D21F36D67F__GUID-FAB4770C-BD14-4909-A759-94D224954DC0">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-rman-client-basic.html#GUID-98BA7492-7108-4DF9-B5A2-21957072E308" title="您可以配置RMAN以自动备份控制文件和服务器参数文件。每当添加备份记录时都会发生自动备份。">配置控制文件和服务器参数文件自动备份</a></p>
                           </li>
                           <li>
                              <p><code class="codeph">CONFIGURE</code>语法的<a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">BACKUP</code>语法的<a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a>以了解替换变量<code class="codeph">%F</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV109"></a><div class="props_rev_3"><a id="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" name="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023"></a><h3 id="BRADV-GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023" class="sect3"><span class="enumeration_section">8.9</span>关于RMAN增量备份</h3>
               <div>
                  <p>增量备份仅复制自上次备份以来已更改的数据块。您可以使用RMAN创建数据文件，表空间或整个数据库的增量备份。</p>
                  <p>默认情况下，RMAN进行完全备份。数据文件的<a href="glossary.html#GUID-D47BE9B3-BAE1-4415-B4B4-4D577B6CB493"><span class="xrefglossterm">完整备份</span></a>包括正在备份的文件中的每个已分配块。数据文件的完整备份可以是映像副本，在这种情况下，每个数据块都会被备份。它也可以存储在备份集中，在这种情况下可以跳过未使用的数据文件块。
                  </p>
                  <p>完整备份对后续增量备份没有影响。映像副本始终是完全备份，因为它们包含数据文件中的每个数据块。默认情况下，备份集是完整备份，因为它可能包含数据文件中的每个数据块，尽管<a href="glossary.html#GUID-0AA7EB43-FEA6-405F-9443-A4A2B43FFF96"><span class="xrefglossterm">未使用的块压缩</span></a>意味着排除从未使用过的块，在某些情况下，排除当前未使用的块（请参阅<span class="q">“ <a href="rman-backup-concepts.html#GUID-073C85A4-E28C-4FE2-A089-1EABF3D00070" title="创建备份集时，RMAN可以使用块压缩。">关于RMAN块”）压缩备份集</a> “</span> ）。
                  </p>
                  <p>完整备份不能成为增量备份策略的一部分;也就是说，它不能是后续增量备份的父级。</p>
                  <div class="infoboxnotealso" id="GUID-C93F3588-BBA9-4AE2-9E47-74C7A9468023__GUID-9396A789-0FFE-4DE0-9FC2-DC28188F90E7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" title="RMAN可以创建多级增量备份。每个增量级别由值0或1表示。">关于多级增量备份</a></p>
                        </li>
                        <li>
                           <p><a href="rman-backup-concepts.html#GUID-4F871762-2D64-4709-910A-1880D39A4B99">关于增量备份算法</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV89499"></a><div class="props_rev_3"><a id="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" name="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79"></a><h4 id="BRADV-GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79" class="sect4"><span class="enumeration_section">8.9.1</span>关于多级增量备份</h4>
                  <div>
                     <p>RMAN可以创建多级增量备份。每个增量级别由值0或1表示。</p>
                     <p><a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">级别0增量备份</span></a> （后续增量备份的基础）会复制包含数据的所有块。0级增量备份和完全备份之间的唯一区别是增量策略中永远不会包含完整备份。因此，增量级别0备份是完全备份，恰好是级别大于0的增量备份的父级。
                     </p>
                     <p>1级增量备份可以是以下类型之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="glossary.html#GUID-353B6668-6BA5-4815-8F08-1CD5B446FBD6"><span class="xrefglossterm">差异增量备份</span></a> ，用于备份在级别1或0的最新增量备份后更改的所有块</p>
                           <p>请参见<a href="rman-backup-concepts.html#GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" title="在差异级别1备份中，RMAN备份自级别1（累积或差异）或级别0的最新增量备份以来已更改的所有块。">关于差异增量备份</a> 。
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-8BABFB51-EA47-4204-9A44-E1695A9F9FBF"><span class="xrefglossterm">累积增量备份</span></a> ，用于备份在级别0的最新增量备份后更改的所有块</p>
                           <p>请参阅<a href="rman-backup-concepts.html#GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" title="在累积级别1备份中，RMAN备份自当前或父级化身中最近的0级增量备份以来使用的所有块。">关于累积增量备份</a> 。
                           </p>
                        </li>
                     </ul>
                     <p>默认情况下，增量备份是差异的。</p>
                     <p>级别0的增量备份可以是备份集或映像副本，但级别1的增量备份只能是备份集。</p>
                     <div class="infoboxnote" id="GUID-0E273817-1EE0-40FD-BD92-51C4A0CAAF79__GUID-2C755C08-D6E9-4822-AD53-A29EB3762F30">
                        <p class="notep1">注意：</p>
                        <p>当恢复时间比磁盘空间更重要时，累积备份优于差异备份，因为在恢复期间必须应用更少的增量备份。</p>
                     </div>
                     <p>备份文件的大小仅取决于修改的块数，增量备份级别和增量备份的类型（差异或累积）。</p>
                  </div><a id="BRADV207"></a><a id="BRADV89500"></a><div class="props_rev_3"><a id="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" name="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2"></a><h5 id="BRADV-GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2" class="sect5"><span class="enumeration_section">8.9.1.1</span>关于差异增量备份</h5>
                     <div>
                        <p>在差异级别1备份中，RMAN备份自级别1（累积或差异）或级别0的最新增量备份以来已更改的所有块。</p>
                        <p>例如，在差异级别1备份中，RMAN确定最近发生的哪个级别1备份，并备份在该备份之后修改的所有块。如果没有级别1可用，则RMAN会复制自基础级别0备份以来更改的所有块。</p>
                        <p>如果当前或父级<a href="glossary.html#GUID-4CCAB7DD-FEA7-4237-AF2C-304BA3BD52B1"><span class="xrefglossterm">化身中</span></a>没有可用的0级备份，则行为会因兼容性模式设置而异。如果兼容性&gt; = 10.0.0，则RMAN会复制自创建文件以来已更改的所有块。否则，RMAN会生成0级备份。
                        </p>
                        <div class="figure" id="GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2__BABFJCBH">
                           <p class="titleinfigure">图8-2差异增量备份</p><img src="img/bradv017.gif" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/bradv017.html"><br><a href="img_text/bradv017.html">“图8-2差分增量备份”的说明</a></div>
                        <!-- class="figure" -->
                        <p>在<a href="rman-backup-concepts.html#GUID-E9ABBACB-8259-4677-A8D4-81ED3194E7E2__BABFJCBH">图8-2</a>所示的示例中，每周发生以下活动：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>星期日</p>
                              <p>增量级别0备份将备份此数据库中曾使用过的<span class="italic">所有</span>块。
                              </p>
                           </li>
                           <li>
                              <p>周一至周六</p>
                              <p>在星期一到星期六的每一天，差异增量级别1备份将备份自级别1或0的最新增量备份以来已更改的所有块。星期一备份复制自星期日0级备份以来更改的块，星期二备份复制自星期一1级备份以来更改的块，依此类推。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV208"></a><a id="BRADV89501"></a><div class="props_rev_3"><a id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" name="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859"></a><h5 id="BRADV-GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859" class="sect5"><span class="enumeration_section">8.9.1.2</span>关于累积增量备份</h5>
                     <div>
                        <p>在累积级别1备份中，RMAN备份自当前或父级化身中最近的0级增量备份以来使用的所有块。</p>
                        <p>累积增量备份通过确保您只需要来自任何特定级别的一个增量备份来减少还原操作所需的工作。累积备份比差异备份需要更多的空间和时间，因为它们会复制先前备份在同一级别完成的工作。</p>
                        <p>在<a href="rman-backup-concepts.html#GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__BABHEJFE">图8-3</a>所示的示例中，每周发生以下情况：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>星期日</p>
                              <p>增量级别0备份将备份此数据库中曾使用过的<span class="italic">所有</span>块。
                              </p>
                           </li>
                           <li>
                              <p>周一周六</p>
                              <p>累积增量级别1备份会复制自最近的0级备份以来更改的所有块。由于最新的0级备份是在星期日创建的，因此星期一到星期六每天的1级备份会备份自星期日备份以来更改的所有块。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__GUID-059641F8-F35E-4CD7-A2BA-7731466DCE33">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="backing-up-database.html#GUID-2AF8EE74-CEB2-468D-A3B2-DD6AD8E41304" title="增量备份仅复制自指定的先前备份以来已更改的数据文件块。使用BACKUP命令创建增量备份。">制作和更新RMAN增量备份</a></p>
                        </div>
                        <div class="figure" id="GUID-F0FC9AEE-4227-42E2-9EC0-8DBB717A0859__BABHEJFE">
                           <p class="titleinfigure">图8-3累积增量备份</p><img src="img/bradv018.gif" alt="下面是图8-3的描述" title="下面是图8-3的描述" longdesc="img_text/bradv018.html"><br><a href="img_text/bradv018.html">“图8-3累积增量备份”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div>
               </div><a id="BRADV90078"></a><div class="props_rev_3"><a id="GUID-16069217-F44A-45BF-BAE6-774B99155E3A" name="GUID-16069217-F44A-45BF-BAE6-774B99155E3A"></a><h4 id="BRADV-GUID-16069217-F44A-45BF-BAE6-774B99155E3A" class="sect4"><span class="enumeration_section">8.9.2</span>关于块更改跟踪</h4>
                  <div>
                     <p>增量备份的块更改跟踪功能通过在块更改跟踪文件中记录每个数据文件中的更改块来提高增量备份性能。</p>
                     <p>块更改跟踪文件是存储在<a href="glossary.html#GUID-B2954743-3455-4045-9200-891927E38048"><span class="xrefglossterm">数据库区域中</span></a>的小型二进制文件。当生成重做时，RMAN跟踪已更改的块。
                     </p>
                     <p>如果启用了块更改跟踪，则RMAN使用更改跟踪文件来标识增量备份的已更改块，从而无需扫描数据文件中的每个块。当增量级别大于0时，RMAN仅使用块更改跟踪，因为<a href="glossary.html#GUID-DF84C185-E97D-4D3C-BF4E-41A9090C5F4C"><span class="xrefglossterm">级别0增量备份</span></a>包括所有块。
                     </p>
                     <div class="infoboxnotealso" id="GUID-16069217-F44A-45BF-BAE6-774B99155E3A__GUID-5C91A0AD-884F-4CDF-9A9D-982EEE49E19A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="backing-up-database.html#GUID-4E1F605A-76A7-48D0-9D9B-7343B4327E2A" title="增量备份的块更改跟踪功能通过记录每个数据文件的更改块来提高备份性能。">使用块更改跟踪来提高增量备份性能</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89498"></a><div class="props_rev_3"><a id="GUID-4F871762-2D64-4709-910A-1880D39A4B99" name="GUID-4F871762-2D64-4709-910A-1880D39A4B99"></a><h4 id="BRADV-GUID-4F871762-2D64-4709-910A-1880D39A4B99" class="sect4"><span class="enumeration_section">8.9.3</span>关于增量备份算法</h4>
                  <div>
                     <p>以下概念对于理解RMAN用于进行增量备份的算法至关重要：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>检查点SCN</p>
                           <p>每个数据文件都有一个<a href="glossary.html#GUID-22212AAE-6F3C-4E84-B940-5AB2261A7EDA"><span class="xrefglossterm">数据文件检查点</span></a> SCN，您可以在<code class="codeph">V$DATAFILE.CHECKPOINT_CHANGE#</code>查看。SCN <span class="italic">低于</span>此SCN的所有更改都保证在文件中。还原级别0增量备份时，还原的数据文件包含创建级别0时的检查点SCN。将1级增量备份应用于文件时，文件的检查点SCN将前进到创建增量级别1备份时文件所具有的检查点SCN。
                           </p>
                        </li>
                        <li>
                           <p>增量启动SCN</p>
                           <p>此SCN仅适用于1级增量备份。SCN大于或等于增量启动SCN的所有块都包含在备份中。SCN低于增量启动SCN的块不包含在备份中。增量启动SCN通常是1级备份父级的检查点SCN。</p>
                        </li>
                        <li>
                           <p>阻止SCN</p>
                           <p>数据文件中的每个数据块都记录最近对块进行更改的SCN。</p>
                        </li>
                     </ul>
                     <p>当RMAN对文件进行1级增量备份时，RMAN将读取该文件，检查每个块的SCN，并备份其SCN大于或等于此备份的增量启动SCN的块。如果备份是差异的，则增量启动SCN是最新的1级备份的检查点SCN。如果备份是累积的，则增量启动SCN是最新的0级备份的检查点SCN。</p>
                     <p>启用块更改跟踪时，RMAN使用位图来避免读取在从增量启动SCN到检查点SCN的范围内未更改的块。 RMAN仍会检查每个读取的块，并使用块中的SCN来确定要包含在备份中的块。</p>
                     <p>增量备份算法的一个结果是RMAN在恢复期间应用包含已更改数据的所有块，即使更改是使用<code class="codeph">NOLOGGING</code>选项创建的对象。因此，如果在还原<code class="codeph">NOLOGGING</code>之前还原备份，则增量备份是恢复这些更改的唯一方法。
                     </p>
                  </div>
               </div><a id="BRADV89497"></a><div class="props_rev_3"><a id="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610" name="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610"></a><h4 id="BRADV-GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610" class="sect4"><span class="enumeration_section">8.9.4</span>关于使用增量备份进行恢复</h4>
                  <div>
                     <p>在介质恢复期间，RMAN会检查还原的文件，以确定是否可以使用增量备份来恢复它们。如果可以选择，则RMAN始终在归档重做日志上选择增量备份，因为在块级别应用更改比应用重做更快。</p>
                     <p>RMAN无需还原数据文件的基本增量备份，以在恢复期间将增量备份应用于数据文件。例如，您可以还原数据文件映像副本并使用增量备份进行恢复。</p>
                     <div class="infoboxnotealso" id="GUID-D3BD53B8-91F3-474C-BD10-00AE9B30E610__GUID-FB2DD143-9EA7-41E5-A74D-1357F41DFC72">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="rman-data-repair-concepts.html#GUID-EC33413A-79B8-4ECF-A77B-DF91957D76FF" title="RMAN自动化媒体恢复。RMAN自动恢复并应用增量备份和归档重做日志，无论哪种组合最有效。">关于增量备份和归档重做日志的选择</a></p>
                     </div>
                  </div>
               </div><a id="BRADV567"></a><div class="props_rev_3"><a id="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" name="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6"></a><h4 id="BRADV-GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6" class="sect4"><span class="enumeration_section">8.9.5</span>关于恢复设备的增量备份策略</h4>
                  <div>
                     <p>备份永久备份策略消除了在备份到零数据丢失恢复设备（恢复设备）时创建重复完整备份的需要。虽然Recovery Appliance支持其他RMAN备份策略，但是持续备份的推荐方法是永久增量备份策略。</p>
                     <p>使用增量永久备份策略，您只需创建一个初始级别0完全备份和后续级别1增量备份。初始备份和后续增量必须是RMAN备份集，而不是映像副本。</p>
                     <p>请注意，恢复设备永久永久备份策略与传统RMAN设置中的增量更新备份策略不同。对于RMAN，增量更新的备份使用初始映像副本，然后是增量备份，最终合并到完整备份中。因此，始终至少有一个完整映像副本，一些增量备份和一些归档重做日志。</p>
                     <div class="infoboxnotealso" id="GUID-819CED6A-55E4-4606-BCA4-3B395FCD30C6__GUID-ED558961-9446-4E59-B910-E094E321A212">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="rman-complete-database-recovery.html#GUID-C192C448-0D8A-4366-91AB-BE62ED5B12ED" title="零数据丢失恢复设备（恢复设备）大大减少了连续归档重做日志备份之间存在的潜在数据丢失窗口。您可以在数据库故障的几个亚之内恢复目标数据库。">关于恢复设备的实时重做传输</a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB768" target="_blank"><span class="italic">“零数据丢失恢复设备受保护数据库配置指南”</span></a> ，了解有关永久增量备份策略的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV99966"></a><div class="props_rev_3"><a id="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" name="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF"></a><h3 id="BRADV-GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF" class="sect3"><span class="enumeration_section">8.10</span>关于备份保留策略</h3>
               <div>
                  <p>您可以使用<code class="codeph">CONFIGURE RETENTION POLICY</code>命令创建持久性和自动备份保留策略。
                  </p>
                  <p>当备份保留策略生效时，RMAN会根据<code class="codeph">CONFIGURE</code>命令中指定的条件将数据文件或控制文件的<a href="glossary.html#GUID-A4D8B0BE-D3B9-4DD9-A7B3-BC0D88D25DC0"><span class="xrefglossterm">备份</span></a>视为<a href="glossary.html#GUID-A4D8B0BE-D3B9-4DD9-A7B3-BC0D88D25DC0"><span class="xrefglossterm">过时备份</span></a> ，即不再需要进行恢复。您可以使用<a href="../rcmrf/REPORT.html#RCMRF147" target="_blank"><code class="codeph">REPORT OBSOLETE</code></a>命令查看过时文件，使用<a href="../rcmrf/DELETE.html#RCMRF121" target="_blank"><code class="codeph">DELETE OBSOLETE</code></a>命令删除它们。
                  </p>
                  <p>随着时间的推移生成备份，旧备份将变得过时，因为不再需要它们来满足保留策略。RMAN可以为您识别过时的文件，但它不会自动删除它们。必须使用<code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code>命令删除不再需要的文件才能满足保留策略。
                  </p>
                  <p>如果配置了快速恢复区域，则当新文件需要更多恢复区空间时，数据库会自动删除过时或备份到磁带的文件。磁盘配额规则与保留策略规则不同，但数据库从不删除违反保留策略的文件以满足磁盘配额。请参阅<span class="q">“ <a href="maintaining-rman-backups.html#GUID-3F11ECB5-1321-45F5-A557-BB1A5BAF011F" title="如果RMAN保留策略要求保留一组大于快速恢复区磁盘配额的备份，或者保留策略设置为NONE，则快速恢复区域可以完全填充，没有可回收空间。">响应完全快速恢复区</a> ”</span> 。
                  </p>
                  <p>当<code class="codeph">REPORT</code> <code class="codeph">OBSOLETE</code>或<code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code>根据用户定义的保留策略确定不需要进行恢复时，备份已过时。仅当RMAN执行交叉检查且无法找到该文件时， <a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">备份</span></a>才会被视为<a href="glossary.html#GUID-A8547B27-5415-4AAA-B2B4-C0998EB62E47"><span class="xrefglossterm">过期备份</span></a> 。简而言之， <span class="italic">过时</span>意味着不需要文件，而<span class="italic">过期则</span>意味着找不到文件。
                  </p>
                  <p>备份保留策略仅适用于完整或0级数据文件和控制文件备份。对于数据文件副本和代理副本，如果RMAN确定不需要副本或代理副本，则可以删除副本或代理副本。对于数据文件备份集，在备份集中的所有数据文件备份都已过时之前，RMAN无法删除备份集。</p>
                  <p>保留策略不负责删除或呈现过时的归档重做日志和增量级别1备份。相反，当没有需要它们的完整备份时，这些文件就会过时。除了影响完整或0级数据文件和控制文件备份外，保留策略还会影响归档重做日志和1级增量备份。首先，RMAN决定哪些数据文件和控制文件备份已过时。然后，RMAN认为所有归档日志和增量级别1备份都是过时的，这些备份不需要恢复必须保留的最旧的数据文件或控制文件备份。</p>
                  <div class="infoboxnote" id="GUID-3F68F554-FBC9-4375-85DE-7F844C48C8FF__GUID-4F6CC500-7BC2-43B6-86E1-603D8F983494">
                     <p class="notep1">注意：</p>
                     <p>如果通过非RMAN技术删除备份（例如，通过介质管理器的磁带保留策略），则RMAN无法实施自动保留策略。在从该介质管理器的目录中删除该磁带上的所有RMAN备份之前，介质管理器必须永不过期。</p>
                  </div>
                  <p>实施保留策略有两个互斥的选项： <a href="glossary.html#GUID-57A71B9A-2353-4669-A152-EFAD9AFF3ED3"><span class="xrefglossterm">冗余</span></a>和<a href="glossary.html#GUID-1C595EF7-B8A1-4AA3-8C45-44E9FC8BAB9E"><span class="xrefglossterm">恢复窗口</span></a> 。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" title="恢复窗口是一个以当前时间开始并向后延伸到可恢复点的时间段。可恢复性是假设时间点恢复的最早时间，也就是说，在媒体故障后您可以恢复的最早时间点。">关于恢复窗口</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" title="在某些情况下，使用恢复窗口会使磁盘空间规划复杂化，因为必须保留的备份数量不是恒定的，并且取决于备份计划。相反，基于冗余的保留策略指定必须保留每个数据文件的备份数。">关于备份冗余</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" title="您可以运行REPORT OBSOLETE命令，以根据保留策略确定当前哪些备份已过时。">关于批量删除过时备份</a></p>
                     </li>
                     <li>
                        <p><a href="rman-backup-concepts.html#GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" title="如果配置快速恢复区域，则数据库使用内部算法选择快速恢复区域中不再需要的文件以满足配置的保留策略。">关于备份保留策略和快速恢复区删除规则</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV209"></a><a id="BRADV608"></a><a id="BRADV89502"></a><div class="props_rev_3"><a id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" name="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED"></a><h4 id="BRADV-GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED" class="sect4"><span class="enumeration_section">8.10.1</span>关于恢复窗口</h4>
                  <div>
                     <p>恢复窗口是一个以当前时间开始并向后延伸到可恢复点的时间段。可恢复性是假设时间点恢复的最早时间，也就是说，在媒体故障后您可以恢复的最早时间点。</p>
                     <p>例如，如果您实施1周的恢复窗口，则RMAN将保留完整备份和所需的增量备份和归档日志，以便数据库可以在过去最多7天内恢复。您实施此保留策略如下：</p><pre class="pre codeblock"><code>配置保留政策，以恢复7天的窗口;</code></pre><p>此命令可确保为每个数据文件保留一个早于可恢复点的备份。例如，如果恢复窗口为<code class="codeph">7</code> ，则必须始终存在满足以下条件的每个数据文件的一个备份：</p><pre class="pre codeblock"><code>SYSDATE  -  BACKUP CHECKPOINT TIME&gt; = 7</code></pre><p>所有早于满足此条件的最新备份的备份都已过时。</p>
                     <p>假设保留策略<a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018027">如图8-4所示</a> 。保留政策包括以下几个方面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>恢复窗口为7天。</p>
                        </li>
                        <li>
                           <p>这些天，数据库备份每两周安排一次：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>1月1日</p>
                              </li>
                              <li>
                                 <p>1月15日</p>
                              </li>
                              <li>
                                 <p>1月29日</p>
                              </li>
                              <li>
                                 <p>2月12日</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>数据库以<code class="codeph">ARCHIVELOG</code>模式运行，只有在保留策略需要时，存档日志才会保存在磁盘上。
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018027">
                        <p class="titleinfigure">图8-4恢复窗口，第1部分</p><img src="img/bradv004.png" alt="下面是图8-4的描述" title="下面是图8-4的描述" longdesc="img_text/bradv004.html"><br><a href="img_text/bradv004.html">“图8-4恢复窗口，第1部分”的描述</a></div>
                     <!-- class="figure" -->
                     <p><a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018027">如图8-4所示</a> ，当前时间是1月23日，可恢复点是1月16日。因此，恢复需要1月15日备份，日志序列500到850的归档日志也是如此。500之前的日志和1月1日的备份已过时，因为恢复到窗口内的某个点不需要它们。
                     </p>
                     <p>一周后假设相同的场景， <a href="rman-backup-concepts.html#GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018028">如图8-5所示</a> 。
                     </p>
                     <div class="figure" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__I1018028">
                        <p class="titleinfigure">图8-5恢复窗口，第2部分</p><img src="img/bradv002.png" alt="下面是图8-5的描述" title="下面是图8-5的描述" longdesc="img_text/bradv002.html"><br><a href="img_text/bradv002.html">“图8-5恢复窗口，第2部分”的描述</a></div>
                     <!-- class="figure" -->
                     <p>在这种情况下，当前时间是1月30日，可恢复点是1月23日。请注意，即使恢复窗口中存在更新的备份（1月29日），1月15日备份也<span class="italic">不会</span>过时。出现这种情况是因为恢复1月29日备份无法使您恢复到1月23日窗口中的最早时间。要确保窗口中任何一点的可恢复性，必须将1月15日备份和所有已归档日志从序列500保存到1150。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A2C982AA-5385-4A45-B0D4-20C1CEFE3DED__GUID-E17A29E0-6A1B-45B3-9C68-A3F61AEF6AF6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-95ABBB30-713E-4781-B5C3-6ADBEB658DE3" title="CONFIGURE命令的RECOVERY WINDOW参数指定当前时间与最早可恢复点之间的天数。">配置基于恢复窗口的保留策略</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89503"></a><div class="props_rev_3"><a id="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" name="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9"></a><h4 id="BRADV-GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9" class="sect4"><span class="enumeration_section">8.10.2</span>关于备份冗余</h4>
                  <div>
                     <p>在某些情况下，使用恢复窗口会使磁盘空间规划复杂化，因为必须保留的备份数量不是恒定的，并且取决于备份计划。相反，基于冗余的保留策略指定必须保留每个数据文件的备份数。</p>
                     <p>例如，您可以按如下方式配置冗余2：</p><pre class="pre codeblock"><code>配置保留政策以减少冗余2;</code></pre><p>默认保留策略配置为<code class="codeph">REDUNDANCY</code> <code class="codeph">1</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5AA05D2C-79E0-4BE7-8834-F0DB40186EB9__GUID-D1B32A62-734C-48E6-B67C-6B2E43D02001">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="configuring-rman-client-basic.html#GUID-E9AEAC34-6C40-40A1-BAF5-3EAE20417715" title="CONFIGURE RETENTION POLICY命令的REDUNDANCY参数指定RMAN保留的每个数据文件和控制文件的完整备份数或0级备份数。默认保留策略为REDUNDANCY 1。">配置基于冗余的保留策略</a></p>
                     </div>
                  </div>
               </div><a id="BRADV89504"></a><div class="props_rev_3"><a id="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" name="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A"></a><h4 id="BRADV-GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A" class="sect4"><span class="enumeration_section">8.10.3</span>关于批量删除过时备份</h4>
                  <div>
                     <p>您可以运行<code class="codeph">REPORT OBSOLETE</code>命令，以根据保留策略确定当前哪些备份已过时。
                     </p>
                     <p>配对命令<code class="codeph">DELETE OBSOLETE</code>根据保留策略删除所有过时的文件。您可以定期运行<code class="codeph">DELETE OBSOLETE</code>以最大限度地减少存储过时备份所浪费的空间。例如，您可以在每周脚本中运行<code class="codeph">DELETE OBSOLETE</code> 。
                     </p>
                     <p>您还可以通过在<code class="codeph">REPORT</code>或<code class="codeph">DELETE</code>命令上指定<code class="codeph">REDUNDANCY</code>或<code class="codeph">RECOVERY</code> <code class="codeph">WINDOW</code>选项来覆盖已配置的保留策略。使用<code class="codeph">DELETE OBSOLETE</code>的恢复窗口短于配置的恢复窗口，可以有效地减少可恢复性窗口。例如，如果配置的窗口是14天，但您执行<code class="codeph">DELETE OBSOLETE RECOVERY WINDOW OF 7 DAYS</code> ，那么您将无法再恢复到7到14天之前的时间。
                     </p>
                     <div class="infoboxnotealso" id="GUID-52F6659C-BA57-400F-8E61-4FD5E18AFB4A__GUID-EA814556-9A91-4E69-91ED-457FA7107112">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="reporting-rman-operations.html#GUID-550638CC-0D16-4B1A-83C7-5D10181DC7C1" title="作为备份和恢复策略的一部分，您应定期运行指示已备份内容的报告。您可以确定哪些数据文件需要备份或哪些文件最近未备份。此外，您还可以预览出现问题时RMAN必须还原的备份。RMAN存储执行操作的每个数据库的元数据。在Data Guard环境中，您可以在不使用Data Guard时使用LIST，REPORT和SHOW命令。您可以使用FOR DB_UNIQUE_NAME子句运行这些命令，以显示与指定数据库关联的备份。LIST命令使用RMAN存储库中的信息来提供备份列表以及与备份和恢复相关的其他对象。LIST命令的主要用途是列出备份和副本。使用listObjList或recordSpec子句指定所需的对象。如果未指定对象，则RMAN将显示所有数据库文件和归档重做日志文件的副本。您可以指定几个不同的条件来缩小LIST输出。使用LIST命令列出预包装备份和预刷新存档的重做日志文件。每次在数据库上执行OPEN RESETLOGS操作时，此操作都会创建数据库的新版本。RMAN REPORT命令分析可用备份和数据库。REPORT命令提供各种RMAN备份报告。使用REPORT NEED BACKUP命令确定在特定保留策略下需要备份的数据库文件。您可以使用REPORT NEED BACKUP命令的选项指定不同的保留策略。REPORT NEED BACKUP命令可以检查整个数据库，跳过指定的表空间，或仅根据不同的保留策略检查特定的表空间或数据文件。您可以将REPORT NEED BACKUP命令测试的备份限制为仅基于磁盘或基于磁带的备份。当通过不可恢复的操作（例如直接加载插入）更改数据文件时，不能使用正常的介质恢复来恢复文件，因为不可恢复的操作不会生成重做。在执行此类操作后，您必须对受影响的数据文件执行完全备份或增量备份，以确保可以使用RMAN恢复受不可恢复操作影响的数据块。您可以报告已过时的备份集，备份片和数据文件副本是，不需要通过指定OBSOLETE关键字来满足指定的保留策略。REPORT SCHEMA命令列出并显示有关数据库文件，表空间等的信息。您可以查看与多租户容器数据库（CDB），仅root用户或一个或多个可插拔数据库（PDB）相关的元数据的报告。使用带有GUID选项的LIST命令列出已从多租户容器数据库（CDB）中删除的可插拔数据库（PDB）的备份。在某些情况下，V $视图通过使用LIST和REPORT命令提供不可用的信息。RMAN作业是在RMAN会话中执行的一组命令。因此，一个RMAN作业可以包含多个命令。V $ BACKUP_PIECE和V $ RMAN_BACKUP_PIECE视图的ENCRYPTED列指示备份片段是加密（YES）还是未加密（NO）。LIST，REPORT和SHOW命令提供了访问控制文件和恢复目录中数据的最简单方法。RMAN从目标数据库控制文件中获取备份和恢复元数据，并将其存储在恢复目录的表中。恢复目录视图是从这些表派生的。恢复目录视图未针对用户查询进行规范化或优化。大多数恢复目录视图包含DB_KEY和DBINC_KEY列。可以通过主键（DB_KEY列值）或DBID（32位唯一数据库标识符）唯一标识在恢复目录中注册的每个数据库。数据库的每个版本都由DBINC_KEY列唯一标识。在Data Guard环境中查询恢复目录时，需要考虑特殊注意事项。DB_KEY值是注册数据库的主键，仅在恢复目录中使用。最简单的方法是获取DB_KEY是使用目标数据库的DBID，每当您将RMAN作为TARGET连接到数据库时，都会显示该DBID。您可以查询视图RC_BACKUP_FILES，以获取有关在恢复目录中注册的任何数据库的所有备份的信息。但是，在查询RC_BACKUP_FILES之前，必须调用DBMS_RCVMAN.SETDATABASE过程。">报告RMAN操作</a>以了解如何生成报告和删除备份</p>
                           </li>
                           <li>
                              <p>用于<code class="codeph">DELETE</code>语法的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF121" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">REPORT</code>语法的<a href="../rcmrf/REPORT.html#RCMRF147" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89505"></a><div class="props_rev_3"><a id="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" name="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A"></a><h4 id="BRADV-GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A" class="sect4"><span class="enumeration_section">8.10.4</span>关于备份保留策略和快速恢复区删除规则</h4>
                  <div>
                     <p>如果配置快速恢复区域，则数据库使用内部算法选择快速恢复区域中不再需要的文件以满足配置的保留策略。</p>
                     <p>在确定要从快速恢复区域中删除哪些文件以满足磁盘配额规则时，永远不会违反保留策略。这些备份的状态为<code class="codeph">OBSOLETE</code> ，可以删除以满足<a href="glossary.html#GUID-925AC655-2953-4F1F-9E5A-F8EA6D9DA552"><span class="xrefglossterm">磁盘配额</span></a>规则。
                     </p>
                     <p>始终根据保留策略确定RMAN状态<code class="codeph">OBSOLETE</code> 。例如，如果数据库备份在RMAN存储库中被视为<code class="codeph">OBSOLETE</code> ，那么这是因为它不需要恢复到恢复窗口中的某个点，或者它是多余的。
                     </p>
                     <p><code class="codeph">OBSOLETE</code>状态的快速恢复区域规则与删除资格的磁盘配额规则之间存在一个重要区别。假设当前恢复窗口需要磁盘上存档的日志1000到2000，因此不会过时。如果将这些日志备份到磁带，则保留策略会根据需要考虑磁盘日志，即不会过时。尽管如此，快速恢复区磁盘配额算法认为磁盘上的日志符合删除条件，因为它们已备份到磁带上。磁盘上的日志在存储库中没有<code class="codeph">OBSOLETE</code>状态，但它们有资格被快速恢复区域删除。
                     </p>
                     <div class="infoboxnotealso" id="GUID-C55C7DC1-57DB-4E6B-B56E-006C8472054A__GUID-445086E2-9643-4162-AA09-F83404107818">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="maintaining-rman-backups.html#GUID-2D7B9EF4-C306-4377-82F2-DDE3549FB63C" title="RMAN使用某些规则来确定何时可以从快速恢复区域删除文件。">快速恢复区的删除规则</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03444.synchronous-refresh.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>同步刷新</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Warehousing Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Warehousing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="refreshing-materialized-views.html" title="Previous" type="text/html"></link>
      <link rel="next" href="monitoring-materialized-view-refresh.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DWHSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="refreshing-materialized-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="monitoring-materialized-view-refresh.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据仓库指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-optimizing-dw.html" property="item" typeof="WebPage"><span property="name">优化数据仓库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">同步刷新</li>
            </ol>
            <a id="GUID-14730F6C-D96D-4AA3-A91E-9FBF456EC889" name="GUID-14730F6C-D96D-4AA3-A91E-9FBF456EC889"></a>
            
            <h2 id="DWHSG-GUID-14730F6C-D96D-4AA3-A91E-9FBF456EC889" class="sect2"><span class="enumeration_chapter">8</span>同步刷新</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了一种将更改同步到数据仓库中的表和物化视图的方法。此方法基于同步对表和物化视图的更新，称为同步刷新。
               </p>
               <p>本章包括以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-01C7861A-8A84-4ECE-9BBF-716FB5D20113">关于物化视图的同步刷新</a></p>
                  </li>
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-8C78842C-8A78-4206-A303-7B74B8803A1C">对物化视图使用同步刷新</a></p>
                  </li>
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-D393EB28-D659-4A0C-8BD8-B174262A27C0">使用同步刷新组</a></p>
                  </li>
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-5C15E4A2-75FD-4B87-AD20-CE749676CE65">为同步刷新指定和准备更改数据</a></p>
                  </li>
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-AEEB3AAA-BB56-4D8D-9F33-181F12E97AD6">同步刷新操作疑难解答</a></p>
                  </li>
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-9E57C982-149A-4C0C-AB9C-3F8A3F4CE2E3">执行同步刷新资格分析</a></p>
                  </li>
                  <li>
                     <p><a href="synchronous-refresh.html#GUID-DC8054E4-FC5E-4DF1-8484-595562EA70CB">同步刷新安全注意事项概述</a></p>
                  </li>
               </ul>
            </div><a id="DWHSG9083"></a><div class="props_rev_3"><a id="GUID-01C7861A-8A84-4ECE-9BBF-716FB5D20113" name="GUID-01C7861A-8A84-4ECE-9BBF-716FB5D20113"></a><h3 id="DWHSG-GUID-01C7861A-8A84-4ECE-9BBF-716FB5D20113" class="sect3"><span class="enumeration_section">8.1</span>关于物化视图的同步刷新</h3>
               <div>
                  <p>同步刷新是Oracle Database 12 <span class="italic">c</span>第1版中引入的一种刷新方法，它使您能够保持一组表和在它们上定义的物化视图始终保持同步。它非常适用于数据仓库，其中增量数据的加载受到严格控制并且定期发生。
                  </p>
                  <p>在大多数数据仓库中，事实表按时间维度进行分区，并且通常，增量数据负载主要包括对最近时间段的更改。同步刷新利用这些特性来大大提高刷新性能和吞吐量。这样可以为计划查询和即席查询提供快速查询性能，这对于成功的数据仓库至关重要。</p>
                  <p>本节介绍同步刷新的主要要求和基本概念，包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-50E3A936-A1A2-4C25-A304-D4854A5AB13D">什么是同步刷新？</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-B7C9CD15-A741-4F9F-ACE3-375128958EAA">为什么要使用同步刷新？</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-2C51B6A4-ECA7-41C9-9356-DC1145D0318B">为同步刷新注册表和物化视图</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-DF69A4CD-ABAD-4195-AEA6-B34C26E426DF">指定刷新的更改数据</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-6107A6D9-4A8C-4D72-9631-060CE2E6AEEF">同步刷新准备和执行</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-9CB3EDE1-25F6-4B04-9E35-572DD86F620F">物化视图资格规则和同步刷新限制</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9283"></a><div class="props_rev_3"><a id="GUID-50E3A936-A1A2-4C25-A304-D4854A5AB13D" name="GUID-50E3A936-A1A2-4C25-A304-D4854A5AB13D"></a><h4 id="DWHSG-GUID-50E3A936-A1A2-4C25-A304-D4854A5AB13D" class="sect4"><span class="enumeration_section">8.1.1</span>什么是同步刷新？
                  </h4>
                  <div>
                     <p>同步刷新是一种在数据仓库中维护表和物化视图的新方法，其中表和物化视图同时刷新。在传统的刷新方法中，更改将应用于基表，并使用以下刷新方法之一单独刷新实例化视图：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果此类日志可用，则使用物化视图日志进行基于日志的增量（快速）刷新</p>
                        </li>
                        <li>
                           <p>PCT刷新（如果适用）</p>
                        </li>
                        <li>
                           <p>完成刷新</p>
                        </li>
                     </ul>
                     <p>同步刷新结合了基于日志的增量（快速）刷新和PCT刷新方法的一些元素，但它仅适用于<code class="codeph">ON</code> <code class="codeph">DEMAND</code>物化视图，与其他两种方法不同。它与其他刷新方法有三个主要区别：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>同步刷新要求您注册表和物化视图。</p>
                        </li>
                        <li>
                           <p>同步刷新要求您根据某些正式指定的规则指定对数据的更改。</p>
                        </li>
                        <li>
                           <p>同步刷新的工作原理是将刷新操作分为两个步骤：准备和执行。与其他方法相比，该方法提供了一些重要的优点，例如更好的性能和更多的控制。</p>
                        </li>
                     </ul>
                     <p>同步刷新API在名为<code class="codeph">DBMS_SYNC_REFRESH</code>的新包中定义。有关此程序包的更多信息，请参阅<a href="../arpls/DBMS_SYNC_REFRESH.html#ARPLS73623" target="_blank"><span><cite>Oracle Database PL / SQL程序包和类型参考</cite></span></a> 。
                     </p>
                  </div>
               </div><a id="DWHSG9085"></a><div class="props_rev_3"><a id="GUID-B7C9CD15-A741-4F9F-ACE3-375128958EAA" name="GUID-B7C9CD15-A741-4F9F-ACE3-375128958EAA"></a><h4 id="DWHSG-GUID-B7C9CD15-A741-4F9F-ACE3-375128958EAA" class="sect4"><span class="enumeration_section">8.1.2</span>为什么要使用同步刷新？
                  </h4>
                  <div>
                     <p>与用于刷新数据仓库中的实体化视图的传统类型的方法相比，同步刷新具有以下优势：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>它通过非常有效地刷新从属物化视图本身来协调将更改加载到基表中。</p>
                        </li>
                        <li>
                           <p>它减少了优化程序无法使用物化视图重写查询的时间。</p>
                        </li>
                        <li>
                           <p>它非常适合数据仓库中常用的各种物化视图（物化聚合视图和物化连接视图）。它确实需要对物化视图进行分区以及事实表，如果物化视图当前未被分区，则可以有效地对它们进行分区以利用同步刷新。</p>
                        </li>
                        <li>
                           <p>它充分利用了分区和数据仓库加载周期的性质，以确保在整个刷新过程中物化视图和基表之间的同步。</p>
                        </li>
                        <li>
                           <p>在典型的数据仓库中，数据准备包括从一个或多个源中提取数据，清理和格式化以保持一致性，以及转换为数据仓库模式。数据准备区域称为临时区域，数据仓库中的基表从暂存区域中的表中加载。同步刷新方法适用于此模型，因为它允许您将更改数据加载到暂存日志中。</p>
                        </li>
                        <li>
                           <p>登台日志与传统快速刷新方法中的物化视图日志起着相同的作用。然而，有一个重要的区别。在传统的快速刷新方法中，首先更新基表，然后将变化从物化视图日志应用到物化视图。但是在同步刷新方法中，应用了分段日志的更改以刷新实例化视图，同时还应用于基表。</p>
                        </li>
                        <li>
                           <p>数据仓库中的大多数物化视图通常采用星型或雪花式模式，其中事实和维度表以外键连接到主键关系。同步刷新方法可以处理所有可能的更改数据加载方案中的两个模式，范围从添加到事实表的行到对事实和维度表的任意更改。</p>
                        </li>
                        <li>
                           <p>您可以选择以外部表的形式直接提供更改数据，而不是在暂存日志中提供更改负载数据，外部表包含要与基表中受影响的分区交换的数据。此功能由<code class="codeph">DBMS_SYNC_REFRESH</code>包中的<code class="codeph">REGISTER_PARTITION_OPERATION</code>过程提供。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9086"></a><div class="props_rev_3"><a id="GUID-2C51B6A4-ECA7-41C9-9356-DC1145D0318B" name="GUID-2C51B6A4-ECA7-41C9-9356-DC1145D0318B"></a><h4 id="DWHSG-GUID-2C51B6A4-ECA7-41C9-9356-DC1145D0318B" class="sect4"><span class="enumeration_section">8.1.3</span>为同步刷新注册表和物化视图</h4>
                  <div>
                     <div class="section">
                        <p>在实际执行同步刷新之前，必须注册相应的表和物化视图。同步刷新提供了这些方法来注册表和物化视图：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过在表上创建<span class="bold">暂存</span> <span class="bold">日志</span>来使用同步刷新注册表。使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句创建分段日志，该语句的语法已在此版本中进行了扩展，以创建分段日志以及用于传统增量刷新的熟悉的物化视图日志。在表上创建登台日志后，它将被视为已注册同步刷新，并且只能使用同步刷新过程进行修改。换句话说，在其上定义了分段日志的表是使用同步刷新注册的，并且不能由用户直接修改。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DBMS_SYNC_REFRESH</code>包中的<code class="codeph">REGISTER_MVIEWS</code>过程向同步刷新注册物化视图。<code class="codeph">REGISTER_MVIEWS</code>过程隐式创建称为同步刷新组的相关对象组。<span class="bold">同步</span> <span class="bold">刷新</span> <span class="bold">组</span>由所有相关的物化视图和表组成，这些视图和表必须作为单个实体一起刷新，因为它们彼此依赖。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-2C51B6A4-ECA7-41C9-9356-DC1145D0318B__GUID-03226C2E-7F1E-403B-BA42-EC1328B1EB5C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>语句的更多信息，请<a href="../sqlrf/CREATE-MATERIALIZED-VIEW-LOG.html#SQLRF01303" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SYNC_REFRESH</code>包的更多信息，请<code class="codeph">DBMS_SYNC_REFRESH</code> <a href="../arpls/DBMS_SYNC_REFRESH.html#ARPLS73623" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9087"></a><div class="props_rev_3"><a id="GUID-DF69A4CD-ABAD-4195-AEA6-B34C26E426DF" name="GUID-DF69A4CD-ABAD-4195-AEA6-B34C26E426DF"></a><h4 id="DWHSG-GUID-DF69A4CD-ABAD-4195-AEA6-B34C26E426DF" class="sect4"><span class="enumeration_section">8.1.4</span>指定刷新的更改数据</h4>
                  <div>
                     <div class="section">
                        <p>在其他刷新方法中，您可以直接修改实例化视图的基表，并且不会出现指定更改数据的问题。但是，对于同步刷新，您需要根据某些正式指定的规则并使用<code class="codeph">DBMS_SYNC_REFRESH</code>程序包提供的API来指定和准备更改数据。
                        </p>
                        <p>有两种方法可以指定更改数据：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在外部表中提供更改数据，并使用<code class="codeph">REGISTER_PARTITION_OPERATION</code>过程进行<code class="codeph">REGISTER_PARTITION_OPERATION</code> 。
                              </p>
                              <p>有关更多详细信息，请参阅<span class="q">“ <a href="synchronous-refresh.html#GUID-DA9C2503-832C-49A0-BCC6-3A0B35F397E1">在捕获同步刷新的更改数据时使用分区操作</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>通过暂存日志提供更改数据，并使用<code class="codeph">PREPARE_STAGING_LOG</code>过程处理它们。<span class="q">“ <a href="synchronous-refresh.html#GUID-E93084C2-BC19-4007-8F7F-D16FE72030E6">使用暂存日志同时捕获同步刷新的更改数据</a> ”</span>中描述了分段日志的格式和填充规则。在<code class="codeph">PREPARE_STAGING_LOG</code>表执行刷新操作之前，您需要为每个表运行<code class="codeph">PREPARE_STAGING_LOG</code>过程。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9088"></a><div class="props_rev_3"><a id="GUID-6107A6D9-4A8C-4D72-9631-060CE2E6AEEF" name="GUID-6107A6D9-4A8C-4D72-9631-060CE2E6AEEF"></a><h4 id="DWHSG-GUID-6107A6D9-4A8C-4D72-9631-060CE2E6AEEF" class="sect4"><span class="enumeration_section">8.1.5</span>同步刷新准备和执行</h4>
                  <div>
                     <div class="section">
                        <p>准备好更改数据后，您可以执行实际的刷新操作。同步刷新采用了一种刷新执行的新方法。它的工作原理是将刷新操作分为两个步骤：准备和执行。这是它与其他刷新方法之间的主要区别之一，并提供了一些重要的好处。</p>
                        <p>准备步骤确定事实表分区和物化视图分区之间的映射。此步骤计算新表，这些新表仅对应于增量更改数据加载已更改的事实表的分区。在计算了这些称为<span class="bold">外部</span> <span class="bold">表的表之后</span> ，刷新操作的实际执行发生在执行步骤中，该步骤仅包括将外部表与事实表或物化视图中的相应分区进行交换。
                        </p>
                        <p>通过将刷新执行步骤分为两个阶段并为它们提供单独的过程，同步刷新不仅可以控制刷新执行过程，还可以提高整体系统性能。它通过最小化直接访问或优化器无法使用实体化视图的时间来实现此目的，因为刷新过程会修改它们。在准备阶段，物化视图及其表不会被修改，因为此时所有刷新更改都记录在外部表中。因此，物化视图可用于需要读取它们的任何查询。只有在执行期间才会修改表和物化视图。执行性能主要受维度表更改次数的影响;如果这个数字很小，那么性能应该非常好，因为交换分区操作本身非常快。</p>
                        <p><code class="codeph">DBMS_SYNC_REFRESH</code>包提供了<code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code>过程来执行这两个步骤。
                        </p>
                        <div class="infoboxnotealso" id="GUID-6107A6D9-4A8C-4D72-9631-060CE2E6AEEF__GUID-8DEC7708-4D30-43D2-B120-D4009470C9AE">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../arpls/DBMS_SYNC_REFRESH.html#ARPLS73623" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9090"></a><div class="props_rev_3"><a id="GUID-9CB3EDE1-25F6-4B04-9E35-572DD86F620F" name="GUID-9CB3EDE1-25F6-4B04-9E35-572DD86F620F"></a><h4 id="DWHSG-GUID-9CB3EDE1-25F6-4B04-9E35-572DD86F620F" class="sect4"><span class="enumeration_section">8.1.6</span>物化视图资格规则和同步刷新限制</h4>
                  <div>
                     <p>物化视图有资格进行同步刷新的主要要求是物化视图必须使用可从其事实表的分区键派生的键进行分区。以下部分描述了同步刷新资格的其他要求。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-2A769373-2083-470A-A479-57A349731F74">同步刷新限制：分区</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-860B7F23-63B2-4201-AABE-7D1EBD7BF5E6">同步刷新限制：刷新选项</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-4A2FE559-E04E-4220-A1E9-9F264C4F6304">同步刷新限制：约束</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-9EFEDAE2-38D3-4F51-A531-4661CE090566">同步刷新限制：表</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-3075EC55-67F5-42CF-BDBF-126D8F2A9AD2">同步刷新限制：物化视图</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-50F75F56-0AC1-4253-A3E9-DB4B807014A8">同步刷新限制：具有聚合的物化视图</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9091"></a><div class="props_rev_3"><a id="GUID-2A769373-2083-470A-A479-57A349731F74" name="GUID-2A769373-2083-470A-A479-57A349731F74"></a><h5 id="DWHSG-GUID-2A769373-2083-470A-A479-57A349731F74" class="sect5"><span class="enumeration_section">8.1.6.1</span>同步刷新限制：分区</h5>
                     <div>
                        <div class="section">
                           <p>使用同步刷新有两个关键要求：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>物化视图必须沿与事实表相同的维度进行分区。</p>
                              </li>
                              <li>
                                 <p>事实表的分区键应在功能上确定物化视图的分区键。</p>
                              </li>
                           </ul>
                           <p>术语<span class="italic">功能</span> <span class="italic">确定</span>意味着可以基于外键约束关系从事实表的分区键导出物化视图的分区键。如果物化视图的分区键与事实表的分区键相同，或者通过从事实表到维度表的连接相关，如星型或雪花模式，则满足此条件。例如，如果事实表由日期列（例如<code class="codeph">TIME_KEY</code>分区，则物化视图可以按<code class="codeph">TIME_KEY</code> ， <code class="codeph">MONTH</code>或<code class="codeph">YEAR</code>进行分区。</p>
                           <p>同步刷新支持事实表和物化视图上的两种类型的分区：范围分区和复合分区，当顶级分区类型为范围时。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9092"></a><div class="props_rev_3"><a id="GUID-860B7F23-63B2-4201-AABE-7D1EBD7BF5E6" name="GUID-860B7F23-63B2-4201-AABE-7D1EBD7BF5E6"></a><h5 id="DWHSG-GUID-860B7F23-63B2-4201-AABE-7D1EBD7BF5E6" class="sect5"><span class="enumeration_section">8.1.6.2</span>同步刷新限制：刷新选项</h5>
                     <div>
                        <div class="section">
                           <p>定义实例化视图时，可以指定三个刷新选项：如何刷新;是否可以使用可信约束;以及要执行什么类型的刷新。如果未指定，则默认值分别为<code class="codeph">ON</code> <code class="codeph">DEMAND</code> ， <code class="codeph">ENFORCED</code>约束和<code class="codeph">FORCE</code> 。同步刷新要求前两个选项必须分别具有<code class="codeph">ON</code> <code class="codeph">DEMAND</code>和<code class="codeph">TRUSTED</code>约束值。同步刷新不要求刷新类型具有任何特定值，因此它可以是<code class="codeph">FAST</code> ， <code class="codeph">FORCE</code>或<code class="codeph">COMPLETE</code> 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9093"></a><div class="props_rev_3"><a id="GUID-4A2FE559-E04E-4220-A1E9-9F264C4F6304" name="GUID-4A2FE559-E04E-4220-A1E9-9F264C4F6304"></a><h5 id="DWHSG-GUID-4A2FE559-E04E-4220-A1E9-9F264C4F6304" class="sect5"><span class="enumeration_section">8.1.6.3</span>同步刷新限制：约束</h5>
                     <div>
                        <div class="section">
                           <p>事实和维度表之间的关系由表上的外键和主键约束声明。同步刷新信任这些约束以执行刷新，并要求必须在物化视图定义中指定<code class="codeph">USING</code> <code class="codeph">TRUSTED</code> <code class="codeph">CONSTRAINTS</code> 。这允许在刷新期间使用未经验证的<code class="codeph">RELY</code>约束并在<code class="codeph">UNKNOWN</code>或<code class="codeph">FRESH</code>状态下重写物化视图。
                           </p>
                           <p>为同步刷新注册表时，其约束可能处于<code class="codeph">VALIDATE</code>或<code class="codeph">NOVALIDATE</code>状态。如果表是维度表，则同步刷新将在刷新执行过程中保留此状态。
                           </p>
                           <p>但是，如果表是事实表，则同步刷新会在刷新执行期间标记约束<code class="codeph">NOVALIDATE</code>状态。这避免了在作为同步刷新方法的基础的分区交换期间验证对现有数据的约束的需要，并且提高了刷新执行的性能。
                           </p>
                           <p>由于同步刷新不强制对事实表施加约束，因此您必须验证所提供数据的完整性和一致性。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9094"></a><div class="props_rev_3"><a id="GUID-9EFEDAE2-38D3-4F51-A531-4661CE090566" name="GUID-9EFEDAE2-38D3-4F51-A531-4661CE090566"></a><h5 id="DWHSG-GUID-9EFEDAE2-38D3-4F51-A531-4661CE090566" class="sect5"><span class="enumeration_section">8.1.6.4</span>同步刷新限制：表</h5>
                     <div>
                        <div class="section">
                           <p>要符合同步刷新条件，表必须满足以下条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>该表不能在其上定义VPD或触发器。</p>
                              </li>
                              <li>
                                 <p>该表不能有任何<code class="codeph">RAW</code>类型。
                                 </p>
                              </li>
                              <li>
                                 <p>该表不能是远程的。</p>
                              </li>
                              <li>
                                 <p>为同步刷新注册的每个表的登台日志密钥应满足<span class="q">“ <a href="synchronous-refresh.html#GUID-44BDEF00-DB5A-4F28-8E2E-D99CEA905F9A">关于</a></span>登台日志密钥”中描述的要求。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9095"></a><div class="props_rev_2"><a id="GUID-3075EC55-67F5-42CF-BDBF-126D8F2A9AD2" name="GUID-3075EC55-67F5-42CF-BDBF-126D8F2A9AD2"></a><h5 id="DWHSG-GUID-3075EC55-67F5-42CF-BDBF-126D8F2A9AD2" class="sect5"><span class="enumeration_section">8.1.6.5</span>同步刷新限制：物化视图</h5>
                     <div>
                        <div class="section">
                           <p>还有一些其他限制特定于为同步刷新注册的物化视图：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">ROWID</code>列不能用于定义查询。它不相关，因为它使用分区交换，它用外表替换原始分区。因此，定义查询不应包含任何<code class="codeph">ROWID</code>列。
                                 </p>
                              </li>
                              <li>
                                 <p>同步刷新不支持物化视图定义中的嵌套物化视图， <code class="codeph">UNION</code> <code class="codeph">ALL</code>物化视图，子查询或复杂查询。定义查询必须符合星型或雪花式架构。
                                 </p>
                              </li>
                              <li>
                                 <p>这些SQL结构也不受支持：分析窗口函数（如<code class="codeph">RANK</code> ）， <code class="codeph">MODEL</code>子句和<code class="codeph">CONNECT</code> <code class="codeph">BY</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>引用视图，远程表或外连接的实例化视图不支持同步刷新。</p>
                              </li>
                              <li>
                                 <p>物化视图不得包含对非重复表达式（如<code class="codeph">SYSDATE</code>和<code class="codeph">ROWNUM</code>引用。</p>
                              </li>
                           </ul>
                           <p>通常，适用于PCT刷新，快速刷新和一般查询重写的大多数限制也适用于同步刷新。这些限制可在以下网址获得</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="basic-materialized-views.html#GUID-6A80266B-444E-4BB6-8A48-911E4619338B">关于查询重写的物化视图限制</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="basic-materialized-views.html#GUID-A5409962-E85D-46DD-B34A-820074CA579C">一般查询重写限制</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="basic-materialized-views.html#GUID-505C24CF-5D56-4820-88AA-2221410950E7">快速刷新的一般限制</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG9096"></a><div class="props_rev_3"><a id="GUID-50F75F56-0AC1-4253-A3E9-DB4B807014A8" name="GUID-50F75F56-0AC1-4253-A3E9-DB4B807014A8"></a><h5 id="DWHSG-GUID-50F75F56-0AC1-4253-A3E9-DB4B807014A8" class="sect5"><span class="enumeration_section">8.1.6.6</span>同步刷新限制：具有聚合的物化视图</h5>
                     <div>
                        <div class="section">
                           <p>对于具有聚合的物化视图，同步刷新通过快速刷新共享这些限制：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>仅支持<code class="codeph">SUM</code> ， <code class="codeph">COUNT</code> ， <code class="codeph">AVG</code> ， <code class="codeph">STDDEV</code> ， <code class="codeph">VARIANCE</code> ， <code class="codeph">MIN</code>和<code class="codeph">MAX</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>必须指定<code class="codeph">COUNT(*)</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>聚合函数必须仅作为表达式的最外层部分发生。也就是说，不允许诸如<code class="codeph">AVG(AVG(x))</code>或<code class="codeph">AVG(x)+ AVG(x)</code>聚合。
                                 </p>
                              </li>
                              <li>
                                 <p>对于每个聚合，例如<code class="codeph">AVG(expr)</code> ，必须存在相应的<code class="codeph">COUNT(expr)</code> 。Oracle建议指定<code class="codeph">SUM(expr)</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果指定了<code class="codeph">VARIANCE(expr)</code>或<code class="codeph">STDDEV(expr)</code>则必须指定<code class="codeph">COUNT(expr)</code>和<code class="codeph">SUM(expr)</code> 。Oracle建议指定<code class="codeph">SUM(expr *expr)</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9097"></a><div class="props_rev_3"><a id="GUID-8C78842C-8A78-4206-A303-7B74B8803A1C" name="GUID-8C78842C-8A78-4206-A303-7B74B8803A1C"></a><h3 id="DWHSG-GUID-8C78842C-8A78-4206-A303-7B74B8803A1C" class="sect3"><span class="enumeration_section">8.2</span>对物化视图使用同步刷新</h3>
               <div>
                  <div class="section">
                     <p>同步刷新在许多方面与其他刷新方法不同。一个是同步刷新的API包含在一个名为<code class="codeph">DBMS_SYNC_REFRESH</code>的新包中，而其他刷新方法则在<code class="codeph">DBMS_MVIEW</code>包中声明。另一个区别是在使用同步刷新注册对象后，一旦注册，其他刷新方法就不能与它们一起使用。
                     </p>
                     <p>与同步刷新相关的操作可分为以下三个广泛阶段：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445">同步刷新步骤1：注册阶段</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988">同步刷新步骤2：同步刷新阶段</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-03C3D5B9-C16E-4989-BA2C-279D59183162">同步刷新步骤3：取消注册阶段</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="DWHSG9099"></a><a id="DWHSG9100"></a><a id="DWHSG9101"></a><a id="DWHSG9098"></a><div class="props_rev_3"><a id="GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445" name="GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445"></a><h4 id="DWHSG-GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445" class="sect4"><span class="enumeration_section">8.2.1</span>同步刷新步骤1：注册阶段</h4>
                  <div>
                     <div class="section">
                        <p>在此阶段（ <a href="synchronous-refresh.html#GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGGGBID">图8-1</a> ），您可以注册用于同步刷新的对象。此阶段的两个步骤是首先注册表，然后是物化视图。您注册表（通过创建登台日志）和物化视图（使用<code class="codeph">REGISTER_MVIEWS</code>过程）。使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">LOG</code> <code class="codeph">…</code> <code class="codeph">FOR</code> <code class="codeph">SYNCHRONOUS</code> <code class="codeph">REFRESH</code>语句创建登台日志。如果表已经有一个常规的物化视图日志，则可以使用<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">LOG</code> <code class="codeph">…</code> <code class="codeph">FOR</code> <code class="codeph">SYNCHRONOUS</code> <code class="codeph">REFRESH</code>语句将其转换为分段日志。
                        </p>
                        <div class="figure" id="GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGGGBID">
                           <p class="titleinfigure">图8-1注册阶段</p><img src="img/dwhsg_vm_157.png" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/dwhsg_vm_157.html"><br><a href="img_text/dwhsg_vm_157.html">“图8-1注册阶段”的描述</a></div>
                        <!-- class="figure" -->
                        <p>您可以使用语句创建登台日志，如<a href="synchronous-refresh.html#GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGJJBFD">例8-1所示</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGJJBFD">
                        <p class="titleinexample">例8-1注册表</p><pre class="oac_no_warn" dir="ltr">创建物化视图登录事实同步刷新使用st_fact;</pre><p>如果表具有实例化视图日志，则可以使用语句将其更改为暂存日志，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED VIEW LOG ON使用st_fact进行同步刷新的事实;</pre><p>您可以使用语句注册<a href="synchronous-refresh.html#GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGCBBIE">实例</a>化视图，如<a href="synchronous-refresh.html#GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGCBBIE">例8-2</a>所示。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-79DB80C5-E5F0-4709-B0AB-3F43E68F6445__BCGCBBIE">
                        <p class="titleinexample">示例8-2注册物化视图</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.REGISTER_MVIEWS（'MV1'）;</pre><p>您可以一次注册多个物化视图：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.REGISTER_MVIEWS（'mv2，mv2_year，mv1_halfmonth'）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DWHSG9103"></a><a id="DWHSG9102"></a><div class="props_rev_3"><a id="GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988" name="GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988"></a><h4 id="DWHSG-GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988" class="sect4"><span class="enumeration_section">8.2.2</span>同步刷新步骤2：同步刷新阶段</h4>
                  <div>
                     <div class="section">
                        <p><a href="synchronous-refresh.html#GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988__BCGJGEIA">图8-2</a>显示了同步刷新阶段。可以重复使用此阶段来执行同步刷新。这一阶段的三个主要步骤是：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>准备刷新操作的更改数据。您可以在表中提供更改数据并使用<code class="codeph">REGISTER_PARTITION_OPERATION</code>过程进行注册，也可以通过填充分段日志来提供数据。在继续下一步之前，必须使用<code class="codeph">PREPARE_STAGING_LOG</code>过程处理分段日志。</span><div>
                              <p>一个例子是<a href="synchronous-refresh.html#GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGFBBHD">例8-12</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>执行刷新操作的第一步（ <code class="codeph">PREPARE_REFRESH</code> ）。这可能是一个长时间运行的操作，因为它准备并加载外部表。</span><div>
                              <p>一个例子是<a href="synchronous-refresh.html#GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725__BCGCCJFA">例8-16</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>执行刷新操作的第二步和最后一步（ <code class="codeph">EXECUTE_REFRESH</code> ）。这通常运行得非常快，因为它通常包含一系列分区交换操作。</span><div>
                              <p>一个例子是<a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGHDIBJ">例8-20</a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>在<a href="synchronous-refresh.html#GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988__BCGJGEIA">图8-2中</a> ，实线箭头表示标准控制流程，虚线箭头用于错误处理案例。如果任一刷新操作（ <code class="codeph">PREPARE_REFRESH</code>或<code class="codeph">EXECUTE_REFRESH</code> ）引发用户错误，则使用<code class="codeph">ABORT_REFRESH</code>过程将表和物化视图还原到刷新操作之前存在的状态，解决问题，并从头开始重试刷新操作。
                        </p>
                        <div class="figure" id="GUID-200D698E-5AB0-4DAD-BBA1-F9FC7998D988__BCGJGEIA">
                           <p class="titleinfigure">图8-2刷新阶段</p><img src="img/dwhsg_vm_156.png" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/dwhsg_vm_156.html"><br><a href="img_text/dwhsg_vm_156.html">“图8-2刷新阶段”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9105"></a><a id="DWHSG9106"></a><a id="DWHSG9107"></a><a id="DWHSG9104"></a><div class="props_rev_3"><a id="GUID-03C3D5B9-C16E-4989-BA2C-279D59183162" name="GUID-03C3D5B9-C16E-4989-BA2C-279D59183162"></a><h4 id="DWHSG-GUID-03C3D5B9-C16E-4989-BA2C-279D59183162" class="sect4"><span class="enumeration_section">8.2.3</span>同步刷新步骤3：取消注册阶段</h4>
                  <div>
                     <div class="section">
                        <p>如果选择停止使用同步刷新，则必须取消注册实例化视图， <a href="synchronous-refresh.html#GUID-03C3D5B9-C16E-4989-BA2C-279D59183162__BCGFDBDI">如图8-3</a>所示。物化视图首先取消注册<code class="codeph">UNREGISTER_MVIEWS</code>过程。然后，通过删除暂存日志或将暂存日志更改为普通日志来取消注册表。请注意，如果将分段日志转换为具有<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">LOG</code> <code class="codeph">…</code> <code class="codeph">FOR</code> <code class="codeph">FAST</code> <code class="codeph">REFRESH</code>语句的普通物化视图日志，则可以使用标准快速刷新方法维护物化视图。
                        </p>
                        <div class="figure" id="GUID-03C3D5B9-C16E-4989-BA2C-279D59183162__BCGFDBDI">
                           <p class="titleinfigure">图8-3取消注册阶段</p><img src="img/dwhsg_vm_155.png" alt="下面是图8-3的描述" title="下面是图8-3的描述" longdesc="img_text/dwhsg_vm_155.html"><br><a href="img_text/dwhsg_vm_155.html">“图8-3取消注册阶段”的说明</a></div>
                        <!-- class="figure" -->
                        <p><a href="synchronous-refresh.html#GUID-03C3D5B9-C16E-4989-BA2C-279D59183162__BCGBCCBC">例8-3</a>说明了如何取消注册单个物化视图<code class="codeph">MV1</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-03C3D5B9-C16E-4989-BA2C-279D59183162__BCGBCCBC">
                        <p class="titleinexample">示例8-3取消注册物化视图</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.UNREGISTER_MVIEWS（'MV1'）;</pre><p>您可以一次取消注册多个物化视图：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.UNREGISTER_MVIEWS（'mv2，mv2_year，mv1_halfmonth'）;</pre><p>您可以通过查询<code class="codeph">DBA_SR_OBJ_ALL</code>视图来验证是否已取消注册<code class="codeph">DBA_SR_OBJ_ALL</code>视图。
                        </p>
                        <p><a href="synchronous-refresh.html#GUID-03C3D5B9-C16E-4989-BA2C-279D59183162__BCGJCAHB">例8-4</a>说明了如何删除登台日志。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-03C3D5B9-C16E-4989-BA2C-279D59183162__BCGJCAHB">
                        <p class="titleinexample">示例8-4取消注册表</p><pre class="oac_no_warn" dir="ltr">DROP MATERIALIZED VIEW LOG ON事实;</pre><p>或者您可以将表更改为物化视图日志：</p><pre class="oac_no_warn" dir="ltr">更改材料查看登录事实快速刷新;</pre><p>您可以通过查询<code class="codeph">DBA_SR_OBJ_ALL</code>视图来验证是否已取消<code class="codeph">DBA_SR_OBJ_ALL</code> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="DWHSG9108"></a><div class="props_rev_3"><a id="GUID-D393EB28-D659-4A0C-8BD8-B174262A27C0" name="GUID-D393EB28-D659-4A0C-8BD8-B174262A27C0"></a><h3 id="DWHSG-GUID-D393EB28-D659-4A0C-8BD8-B174262A27C0" class="sect3"><span class="enumeration_section">8.3</span>使用同步刷新组</h3>
               <div>
                  <p>同步刷新的显着特征是对表及其物化视图的更改将一起加载和刷新，因此名称为同步刷新。对于要通过同步刷新维护的表和物化视图，必须注册对象。在为其创建登台日志时，将为同步刷新注册表，并使用<code class="codeph">REGISTER_MVIEWS</code>过程注册实例化视图。
                  </p>
                  <p>同步刷新支持刷新构建在多个表上的物化视图，其中包含一个或多个表的更改。必须一起刷新与约束相关的表，以确保数据完整性。此外，为同步刷新注册的某些表有可能在它们之上构建了几个物化视图，在这种情况下，所有这些物化视图也必须一起刷新。</p>
                  <p>Oracle Database不是让您跟踪这些依赖关系，而是在正确的表集上发出刷新命令，而是自动生成必须一起刷新的最小的表集和物化视图。这些集合称为同步刷新组或仅同步刷新组。每个同步刷新组由<code class="codeph">GROUP_ID</code> .value标识。
                  </p>
                  <p>与执行同步刷新（ <code class="codeph">PREPARE_REFRESH</code> ， <code class="codeph">EXECUTE_REFRESH</code>和<code class="codeph">ABORT_REFRESH</code> ）相关的三个过程将单个组ID或标识同步刷新组的组ID列表作为输入。
                  </p>
                  <p>为同步刷新注册的每个表或物化视图都分配了一个<code class="codeph">GROUP_ID</code>值，如果它们之间的依赖关系发生变化，则该值可能随时间而变化。发出<code class="codeph">REGISTER_MVIEWS</code>和<code class="codeph">UNREGISTER_MVIEWS</code>过程时会发生这种情况。以下示例显示了许多方案中的同步刷新组。
                  </p>
                  <p>由于<code class="codeph">GROUP_ID</code>值可能随时间变化，因此Oracle建议在调用同步刷新过程时不使用实际的<code class="codeph">GROUP_ID</code>值，而是使用函数<code class="codeph">DBMS_SYNC_REFRESH.GET_GROUP_ID</code> 。此函数将物化视图名称作为输入，并返回<code class="codeph">GROUP_ID</code>化视图的<code class="codeph">GROUP_ID</code>值。
                  </p>
                  <div class="infoboxnotealso" id="GUID-D393EB28-D659-4A0C-8BD8-B174262A27C0__GUID-348325CA-4877-45AB-9189-73DC1C7D09AA">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_SYNC_REFRESH.html#ARPLS73623" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>有关如何使用<code class="codeph">DBMS_SYNC_REFRESH.REGISTER_MVIEWS</code>过程的信息</p>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-FAC6FB90-55F8-486D-B3C8-C19389199717">具有同步刷新组的常见操作示例</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-37DDCE10-EFBD-4307-8037-72DC1FFEE4AE">使用多个同步刷新组的示例</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9110"></a><a id="DWHSG9111"></a><a id="DWHSG9112"></a><a id="DWHSG9109"></a><div class="props_rev_3"><a id="GUID-FAC6FB90-55F8-486D-B3C8-C19389199717" name="GUID-FAC6FB90-55F8-486D-B3C8-C19389199717"></a><h4 id="DWHSG-GUID-FAC6FB90-55F8-486D-B3C8-C19389199717" class="sect4"><span class="enumeration_section">8.3.1</span>具有同步刷新组的常见操作示例</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">rdbms/demo</code>目录中的同步刷新演示脚本使您可以查看可能执行的典型操作。主脚本是<code class="codeph">syncref_run.sql</code> ，其日志是<code class="codeph">syncref_run.log</code> 。<a href="synchronous-refresh.html#GUID-FAC6FB90-55F8-486D-B3C8-C19389199717__BCGIJAJC">下面的例8-5</a> ， <a href="synchronous-refresh.html#GUID-FAC6FB90-55F8-486D-B3C8-C19389199717__BCGJCFAC">例8-6</a>和<a href="synchronous-refresh.html#GUID-FAC6FB90-55F8-486D-B3C8-C19389199717__BCGFACBG">例8-7</a>说明了可以使用<code class="codeph">GET_GROUP_ID</code>函数的不同上下文。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FAC6FB90-55F8-486D-B3C8-C19389199717__BCGIJAJC">
                        <p class="titleinexample">示例8-5显示在组中注册的对象</p>
                        <p>此示例说明如何在注册后显示在组中注册的对象。</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.REGISTER_MVIEWS（'MV1'）;选择名称，类型，STAGING_LOG_NAME来自USER_SR_OBJ WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）ORDER BY TYPE，NAME; NAME TYPE STAGING_LOG_NAME ---------- ---------- ---------------- MV1 MVIEW FACT TABLE ST_FACT STORE TABLE ST_STORE TIME TABLE ST_TIME</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-FAC6FB90-55F8-486D-B3C8-C19389199717__BCGJCFAC">
                        <p class="titleinexample">示例8-6调用刷新操作</p>
                        <p>此示例说明了如何调用刷新操作。</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（ -  DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; EXECUTE DBMS_SYNC_REFRESH.EXECUTE_REFRESH（ -  DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））;选择名称，类型，状态来自USER_SR_OBJ_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）ORDER BY TYPE，NAME;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-FAC6FB90-55F8-486D-B3C8-C19389199717__BCGFACBG">
                        <p class="titleinexample">示例8-7验证组中注册的对象的状态</p>
                        <p>此示例说明如何在<code class="codeph">EXECUTE_REFRESH</code>操作之后验证在组中注册的对象的状态。
                        </p><pre class="oac_no_warn" dir="ltr">选择名称，类型，状态来自USER_SR_OBJ_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）ORDER BY TYPE，NAME; NAME TYPE STATUS ---------------- ---------- ---------------- MV1 MVIEW COMPLETE FACT TABLE完整的商店表完整的时间表完成</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DWHSG9114"></a><a id="DWHSG9115"></a><a id="DWHSG9113"></a><div class="props_rev_3"><a id="GUID-37DDCE10-EFBD-4307-8037-72DC1FFEE4AE" name="GUID-37DDCE10-EFBD-4307-8037-72DC1FFEE4AE"></a><h4 id="DWHSG-GUID-37DDCE10-EFBD-4307-8037-72DC1FFEE4AE" class="sect4"><span class="enumeration_section">8.3.2</span>使用多个同步刷新组的示例</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用以下API一次使用多个刷新组：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GET_GROUP_ID_LIST</code> 
                              </p>
                              <p>将物化视图列表作为输入，并在列表中返回其组ID。</p>
                           </li>
                           <li>
                              <p><code class="codeph">GET_ALL_GROUP_IDS</code></p>
                              <p>返回列表中系统中所有组的组ID。</p>
                           </li>
                           <li>
                              <p>准备刷新过程（ <code class="codeph">PREPARE_REFRESH</code> ， <code class="codeph">EXECUTE_REFRESH</code>和<code class="codeph">ABORT_REFRESH</code> ）可以处理多个组。他们的重载版本一次接受组ID列表。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-37DDCE10-EFBD-4307-8037-72DC1FFEE4AE__BCGJBHIJ">
                        <p class="titleinexample">示例8-8准备同步刷新组</p>
                        <p>此示例说明如何准备<code class="codeph">MV1</code> ， <code class="codeph">MV2</code>和<code class="codeph">MV3</code>的同步刷新组。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID_LIST（'MV1，MV2，MV3'））;</pre><p>请注意，这三个物化视图不必全部在不同的组中。两个物化视图可能在一个组中，第三个在另一个组中;甚至所有三个物化视图都在同一组中。由于<code class="codeph">PREPARE_REFRESH</code>过载以接受组ID或组ID列表，因此上述调用将适用于所有情况。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-37DDCE10-EFBD-4307-8037-72DC1FFEE4AE__BCGCIDAF">
                        <p class="titleinexample">示例8-9执行同步刷新组</p>
                        <p>此示例说明如何准备和执行系统中所有同步刷新组的刷新。</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_ALL_GROUP_IDS）; EXECUTE DBMS_SYNC_REFRESH.EXECUTE_REFRESH（DBMS_SYNC_REFRESH.GET_ALL_GROUP_IDS）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="DWHSG9116"></a><div class="props_rev_3"><a id="GUID-5C15E4A2-75FD-4B87-AD20-CE749676CE65" name="GUID-5C15E4A2-75FD-4B87-AD20-CE749676CE65"></a><h3 id="DWHSG-GUID-5C15E4A2-75FD-4B87-AD20-CE749676CE65" class="sect3"><span class="enumeration_section">8.4</span>指定和准备同步刷新的更改数据</h3>
               <div>
                  <div class="section">
                     <p>同步刷新要求您指定和准备用作<code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code>过程输入的更改数据。指定更改数据有两种方法：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在外部表中提供更改数据，并使用<code class="codeph">REGISTER_PARTITION_OPERATION</code>过程进行<code class="codeph">REGISTER_PARTITION_OPERATION</code> ，如<a href="synchronous-refresh.html#GUID-DA9C2503-832C-49A0-BCC6-3A0B35F397E1">使用分区操作同时捕获同步刷新的更改数据中所述</a> 。
                           </p>
                        </li>
                        <li>
                           <p>通过暂存日志提供更改数据，并使用<code class="codeph">PREPARE_STAGING_LOG</code>过程处理它们，如在<a href="synchronous-refresh.html#GUID-E93084C2-BC19-4007-8F7F-D16FE72030E6">捕获同步刷新的更改数据时使用暂存日志中</a>所述。
                           </p>
                        </li>
                     </ul>
                     <p>关于变更数据的一些重要观点是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>这两种方法不是互斥的，可以同时使用，即使在同一个表上，但在指定的更改中不会有任何冲突。例如，您可以使用分段日志来指定具有少量更改的分区中的更改，但如果另一个分区有大量更改，则可以在外部表中提供该分区的更改。</p>
                        </li>
                        <li>
                           <p>对于维度表，您只能使用登台日志来提供更改。</p>
                        </li>
                        <li>
                           <p>同步刷新可以处理事实和维度表中的任意更改组合，但它针对最常见的数据仓库使用方案进行了优化，其中大部分更改仅针对事实表的几个分区。</p>
                        </li>
                        <li>
                           <p>同步刷新对使用非破坏性分区维护操作（PMOPS）没有限制，例如在数据仓库中常用的添加分区。这种PMOPS的使用与用于指定变更数据的方法没有直接关系。</p>
                        </li>
                        <li>
                           <p>同步刷新要求必须准备组中的所有暂存日志，即使暂存日志中没有注册更改也是如此。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="DWHSG9118"></a><a id="DWHSG9117"></a><div class="props_rev_3"><a id="GUID-DA9C2503-832C-49A0-BCC6-3A0B35F397E1" name="GUID-DA9C2503-832C-49A0-BCC6-3A0B35F397E1"></a><h4 id="DWHSG-GUID-DA9C2503-832C-49A0-BCC6-3A0B35F397E1" class="sect4"><span class="enumeration_section">8.4.1</span>在捕获同步刷新的更改数据时使用分区操作</h4>
                  <div>
                     <div class="section">
                        <p>使用<code class="codeph">REGISTER_PARTITION_OPERATION</code>过程，您可以直接提供更改数据。此方法仅适用于事实表。对于每个更改的事实表分区，您必须提供包含该分区数据的外部表。同步刷新演示（ <code class="codeph">syncref_run.sql</code>和<code class="codeph">syncref_run.log</code> ）包含一个示例。步骤是：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为要替换的分区创建外部表。它必须与事实表具有相同的约束，并且可以在任何所需的表空间中创建。</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE fact_ot_fp3（time_key DATE NOT NULL REFERENCES time（time_key），store_key INTEGER NOT NULL REFERENCES store（store_key），dollar_sales NUMBER（6,2），unit_sales INTEGER）tablespace syncref_fp3_tbs;</pre></div>
                        </li>
                        <li class="stepexpand"><span>将此分区的数据插入外部表。</span></li>
                        <li class="stepexpand"><span>注册此表以进行分区交换。</span><div><pre class="oac_no_warn" dir="ltr">开始DBMS_SYNC_REFRESH.REGISTER_PARTITION_OPERATION（partition_op =&gt;'EXCHANGE'，schema_name =&gt;'SYNCREF_USER'，base_table_name =&gt;'FACT'，partition_name =&gt;'FP3'，outside_partn_table_schema =&gt;'SYNCREF_USER'，outside_partn_table_name =&gt;'FACT_OT_FP3'）;结束; //</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>注册外部表并执行刷新时，Oracle数据库在<code class="codeph">EXECUTE_REFRESH</code>时执行以下操作：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE FACT EXCHANGE PARTITION fp3 with TABLE fact_ot_fp3包括没有验证的指数;</pre><p>但是，您不得直接自行发布上述声明。如果您这样做，Oracle数据库将给出以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-31908：无法使用暂存日志修改表的内容。
</pre><p>除<code class="codeph">EXCHANGE</code>操作外，可以使用<code class="codeph">REGISTER_PARTITION_OPERATION</code>过程注册的另外两个分区操作是<code class="codeph">DROP</code>和<code class="codeph">TRUNCATE</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DA9C2503-832C-49A0-BCC6-3A0B35F397E1__BCGDJGBD">
                        <p class="titleinexample">示例8-10注册DROP操作</p>
                        <p>此示例说明如何使用以下语句指定第一个分区（ <code class="codeph">FP1</code> ）的丢弃。
                        </p><pre class="oac_no_warn" dir="ltr">开始DBMS_SYNC_REFRESH.REGISTER_PARTITION_OPERATION（partition_op =&gt;'DROP'，schema_name =&gt;'SYNCREF_USER'，base_table_name =&gt;'FACT'，partition_name =&gt;'FP1'）;结束; /</pre><p>如果您想要截断分区，则可以为<code class="codeph">partition_op</code>参数指定<code class="codeph">TRUNCATE</code>而不是<code class="codeph">DROP</code> 。
                        </p>
                        <p>三个分区操作（ <code class="codeph">EXCHANGE</code> ， <code class="codeph">DROP</code>和<code class="codeph">TRUNCATE</code> ）称为破坏性PMOPS，因为它们修改了表的内容。以下分区操作不具有破坏性，可以直接在使用同步刷新注册的表上执行：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ADD</code> <code class="codeph">PARTITION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MERGE</code> <code class="codeph">PARTITIONS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MOVE</code> <code class="codeph">PARTITION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">RENAME</code> <code class="codeph">PARTITION</code></p>
                           </li>
                        </ul>
                        <p>在数据仓库中，这些分区操作通常用于管理大量数据，而同步刷新不会限制其使用。Oracle数据库仅要求在发出<code class="codeph">PREPARE_REFRESH</code>命令之前执行这些操作。这是因为<code class="codeph">PREPARE_REFRESH</code>过程计算事实表分区和物化视图分区之间的映射，如果在<code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code>过程之间进行了任何分区维护，Oracle数据库将在<code class="codeph">EXECUTE_REFRESH</code>处检测到此情况并显示错误。
                        </p>
                        <p>您可以使用<code class="codeph">USER_SR_PARTN_OPS</code>目录视图来显示已注册的分区操作。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT TABLE_NAME，PARTITION_OP，PARTITION_NAME，OUTSIDE_TABLE_SCHEMA ot_schema，OUTSIDE_TABLE_NAME ot_name FROM USER_SR_PARTN_OPS ORDER BY TABLE_NAME; TABLE_NAME PARTITION_ PARTITION_NAME OT_SCHEMA OT_NAME ---------- ---------- --------------- ---------- ----- -------------------- FACT EXCHANGE FP3 SYNCREF_USER FACT_OT_FP3选择1行。
</pre><p>这些分区操作由同步刷新操作使用，并由<code class="codeph">EXECUTE_REFRESH</code>过程自动取消注册。因此，如果在<code class="codeph">EXECUTE_REFRESH</code>之后查询<code class="codeph">USER_SR_PARTN_OPS</code> ，它将不显示任何行。
                        </p>
                        <p>注册分区后，如果发现错误或改变主意，可以使用<code class="codeph">UNREGISTER_PARTITION_OPERATION</code>命令撤消它：</p><pre class="oac_no_warn" dir="ltr">开始DBMS_SYNC_REFRESH.UNREGISTER_PARTITION_OPERATION（partition_op =&gt;'EXCHANGE'，schema_name =&gt;'SYNCREF_USER'，base_table_name =&gt;'FACT'，partition_name =&gt;'FP3'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DWHSG9119"></a><div class="props_rev_3"><a id="GUID-E93084C2-BC19-4007-8F7F-D16FE72030E6" name="GUID-E93084C2-BC19-4007-8F7F-D16FE72030E6"></a><h4 id="DWHSG-GUID-E93084C2-BC19-4007-8F7F-D16FE72030E6" class="sect4"><span class="enumeration_section">8.4.2</span>在捕获同步刷新的更改数据时使用分段日志</h4>
                  <div>
                     <p>在同步刷新中，登台日志的作用类似于增量刷新中的物化视图日志。它们是使用DDL语句创建的，可以更改为实体化视图日志。但是，与物化视图日志不同，您负责以指定格式将更改加载到登台日志中。登台日志中的每一行都必须有一个密钥才能唯一标识它;此密钥称为<span class="bold">登台</span> <span class="bold">日志</span> <span class="bold">密钥</span> ，在<span class="q">“ <a href="synchronous-refresh.html#GUID-44BDEF00-DB5A-4F28-8E2E-D99CEA905F9A">关于</a></span> <span class="bold">登台</span> <span class="bold">日志</span> <span class="bold">密钥</span> <span class="q">”中</span>定义。
                     </p>
                     <p>您负责填充登台日志，该登录日志将包含基表中的所有列以及<code class="codeph">CHAR(2)</code>类型的附加控制列<code class="codeph">DMLTYPE$$</code> 。这必须具有值<code class="codeph">'I'</code>以表示正在插入行， <code class="codeph">'D'</code>表示删除，并且<code class="codeph">'UN'</code>和<code class="codeph">'UO'</code>分别表示要更新的行的新旧值。最后两个必须成对出现。
                     </p>
                     <p>登台日志由<code class="codeph">PREPARE_STAGING_LOG</code>过程验证，并由同步刷新操作（ <code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code> ）使用。在<code class="codeph">PREPARE_STAGING_LOG</code>验证期间，如果检测到错误，它们将在异常表中捕获。您可以查询视图<code class="codeph">USER_SR_STLOG_EXCEPTIONS</code>以获取有关异常的详细信息。
                     </p>
                     <p>同步刷新要求在为同步刷新组调用<code class="codeph">PREPARE_REFRESH</code>之前，必须使用<code class="codeph">PREPARE_STAGING_LOG</code>处理组中所有表的分段日志。即使表没有更改数据且其暂存日志为空，这也是必需的。
                     </p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-44BDEF00-DB5A-4F28-8E2E-D99CEA905F9A">关于暂存日志密钥</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-AB38C8B9-A34C-4B47-9A11-12A53B6317EB">关于暂存日志规则</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-F672472C-FBB9-4EAF-AA9B-610BDDA767C0">关于列更新为NULL</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-82DB4858-381A-4F37-8A82-58463B6C57BE">使用暂存日志的示例</a></p>
                        </li>
                        <li>
                           <p><a href="synchronous-refresh.html#GUID-D89D76FD-0476-4DE7-8FE5-B4EDBBE9220F">准备分段日志时的错误处理</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9120"></a><div class="props_rev_3"><a id="GUID-44BDEF00-DB5A-4F28-8E2E-D99CEA905F9A" name="GUID-44BDEF00-DB5A-4F28-8E2E-D99CEA905F9A"></a><h5 id="DWHSG-GUID-44BDEF00-DB5A-4F28-8E2E-D99CEA905F9A" class="sect5"><span class="enumeration_section">8.4.2.1</span>关于分段日志密钥</h5>
                     <div>
                        <p>要在基表上创建登台日志，基表必须具有密钥。如果表具有主键，则主键被视为表的登台日志上的暂存日志键。请注意，每个维度表都有一个主键。</p>
                        <p>使用事实表，他们拥有主键的情况较少见。如果表没有主键，则作为其维表的外键的列构成其暂存日志键。</p>
                        <p>登台日志的关键可以描述为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>基表的主键。如果事实表具有主键，则有时将其称为代理键。</p>
                           </li>
                           <li>
                              <p>事实表的外键集。如果事实表没有主键，则适用。这种假设在数据仓库中很常见，但并未强制执行。</p>
                           </li>
                        </ul>
                        <p>有关加载登台日志的规则，请参阅<span class="q">“ <a href="synchronous-refresh.html#GUID-AB38C8B9-A34C-4B47-9A11-12A53B6317EB">关于</a></span>登台日志<span class="q"><a href="synchronous-refresh.html#GUID-AB38C8B9-A34C-4B47-9A11-12A53B6317EB">规则</a> ”</span> 。
                        </p>
                        <p><code class="codeph">PREPARE_STAGING_LOG</code>过程验证每个键值最多<code class="codeph">PREPARE_STAGING_LOG</code>指定一次。填充登台日志时，如果具有相同键值的行被多次更改，则您有责任合并更改。此过程称为<span class="bold">更改</span> <span class="bold">合并</span> 。在进行更改合并时，您必须：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将同一行的删除插入合并到具有行<code class="codeph">'UO'</code>和<code class="codeph">'UN'</code>的更新操作中。
                              </p>
                           </li>
                           <li>
                              <p>将多个更新合并到一个更新中。</p>
                           </li>
                           <li>
                              <p>防止出现在分段日志中的同一行的插入更新 - 删除等空更改。</p>
                           </li>
                           <li>
                              <p>将插入合并后跟多个更新合并到单个插入中。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DWHSG9121"></a><div class="props_rev_3"><a id="GUID-AB38C8B9-A34C-4B47-9A11-12A53B6317EB" name="GUID-AB38C8B9-A34C-4B47-9A11-12A53B6317EB"></a><h5 id="DWHSG-GUID-AB38C8B9-A34C-4B47-9A11-12A53B6317EB" class="sect5"><span class="enumeration_section">8.4.2.2</span>关于暂存日志规则</h5>
                     <div>
                        <p>每行应包含构成主键的所有列的非空值。您需要合并所有更改，以便只能为一种类型的操作指定分段日志中的每个密钥。</p>
                        <p>对于要插入的行（ <code class="codeph">DMLTYPE$$</code>为<code class="codeph">'I'</code> ），必须为登台日志中的所有列提供有效值，以符合基表中相应列的任何约束。要插入的行的键不得存在于基表中。
                        </p>
                        <p>对于要删除的行（ <code class="codeph">DMLTYPE$$</code>为<code class="codeph">'D</code> ”），非键列值是可选的。类似地，对于指定要更新的列的旧值的行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UO'</code> ），非键列值是可选的;一个重要的例外是其值正在更新为<code class="codeph">NULL</code>的列，如后面所述。
                        </p>
                        <p>对于指定要更新的列的新值的行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UN'</code> ），非键列值是可选的，除了已更改的列的值。
                        </p>
                     </div>
                  </div><a id="DWHSG9122"></a><div class="props_rev_3"><a id="GUID-F672472C-FBB9-4EAF-AA9B-610BDDA767C0" name="GUID-F672472C-FBB9-4EAF-AA9B-610BDDA767C0"></a><h5 id="DWHSG-GUID-F672472C-FBB9-4EAF-AA9B-610BDDA767C0" class="sect5"><span class="enumeration_section">8.4.2.3</span>关于将列更新为NULL</h5>
                     <div>
                        <p>如果将列更新为<code class="codeph">NULL</code> ，则必须指定其旧值。否则，Oracle数据库可能无法将其与更新中值保持不变的列区分开来。
                        </p>
                        <p>例如，让表<code class="codeph">T1</code>有三列<code class="codeph">c1</code> ， <code class="codeph">c2</code>和<code class="codeph">c3</code> 。让（ <code class="codeph">c1, c2, c3) = (1, 5, 10)</code>有一行，并在暂存日志中提供以下信息：</p>
                        <div class="tblformal" id="GUID-F672472C-FBB9-4EAF-AA9B-610BDDA767C0__GUID-D59D54B1-6235-45BA-8583-944614B1F3D3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table contains the old and new values for one row data in the staging log of table T1." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d34570e2024">DMLTYPE $$</th>
                                    <th align="left" valign="bottom" width="18%" id="d34570e2027">C1</th>
                                    <th align="left" valign="bottom" width="29%" id="d34570e2030">C2</th>
                                    <th align="left" valign="bottom" width="29%" id="d34570e2033">C3</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d34570e2038" headers="d34570e2024 ">
                                       <p>UO</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d34570e2038 d34570e2027 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d34570e2038 d34570e2030 ">
                                       <p>空值</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d34570e2038 d34570e2033 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d34570e2051" headers="d34570e2024 ">
                                       <p>联合国</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d34570e2051 d34570e2027 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d34570e2051 d34570e2030 ">
                                       <p>空值</p>
                                    </td>
                                    <td align="left" valign="top" width="29%" headers="d34570e2051 d34570e2033 ">
                                       <p>11</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>结果是新行可能是<code class="codeph">(1, 5, 11)</code>或<code class="codeph">(1, NULL, 11)</code>而没有指定旧值。但是，根据该规范，很明显新行是（ <code class="codeph">1, 5, 11)</code> 。如果要为<code class="codeph">c2</code>指定<code class="codeph">NULL</code> ，则应在<code class="codeph">UO</code>行中指定旧值，如下所示：</p>
                        <div class="tblformal" id="GUID-F672472C-FBB9-4EAF-AA9B-610BDDA767C0__GUID-B57F64A3-C933-4D64-8C45-F2A9E8C0ED03">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table contains the old and new values for one row data in the staging log of table T1." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d34570e2094">DMLTYPE $$</th>
                                    <th align="left" valign="bottom" width="25%" id="d34570e2097">C1</th>
                                    <th align="left" valign="bottom" width="25%" id="d34570e2100">C2</th>
                                    <th align="left" valign="bottom" width="25%" id="d34570e2103">C3</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d34570e2108" headers="d34570e2094 ">
                                       <p>UO</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d34570e2108 d34570e2097 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d34570e2108 d34570e2100 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d34570e2108 d34570e2103 ">
                                       <p>空值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d34570e2121" headers="d34570e2094 ">
                                       <p>联合国</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d34570e2121 d34570e2097 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d34570e2121 d34570e2100 ">
                                       <p>空值</p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d34570e2121 d34570e2103 ">
                                       <p>11</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>因为<code class="codeph">c2</code>的旧值是<code class="codeph">5</code> ，（列的正确的先前更新值），其新值将为<code class="codeph">NULL</code> ，新行为<code class="codeph">(1, NULL, 11)</code> 。
                        </p>
                     </div>
                  </div><a id="DWHSG9124"></a><a id="DWHSG9125"></a><a id="DWHSG9126"></a><a id="DWHSG9127"></a><a id="DWHSG9128"></a><a id="DWHSG9123"></a><div class="props_rev_3"><a id="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE" name="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE"></a><h5 id="DWHSG-GUID-82DB4858-381A-4F37-8A82-58463B6C57BE" class="sect5"><span class="enumeration_section">8.4.2.4</span>使用分段日志的示例</h5>
                     <div>
                        <p>本节说明使用登台日志的示例。</p>
                        <p><code class="codeph">PREPARE_STAGING_LOG</code>过程有一个名为<code class="codeph">PSL_MODE</code>的可选第三个参数。这允许您指定是否可以将登台日志中指定的三种类型的DML语句中的任何一种或全部视为可信，并且不受<code class="codeph">PREPARE_STAGING_LOG</code>过程的验证，如<a href="synchronous-refresh.html#GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGFFJHI">例8-11</a>所示。
                        </p>
                        <div class="example" id="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGFFJHI">
                           <p class="titleinexample">示例8-11指定受信任的DML语句</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'store'，DBMS_SYNC_REFRESH.INSERT_TRUSTED + DBMS_SYNC_REFRESH.DELETE_TRUSTED）;</pre><p>此调用将跳过<code class="codeph">STORE</code>的临时日志中的<code class="codeph">INSERT</code>和<code class="codeph">DELETE</code> DML语句的验证，但将验证<code class="codeph">UPDATE</code> DML语句。
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGFBBHD">
                           <p class="titleinexample">示例8-12准备分段日志</p>
                           <p>此示例取自演示<code class="codeph">syncref_run.sql</code> 。它显示用户已为删除和更新操作的所有列提供了值。如果这些值可用，建议使用此选项。
                           </p><pre class="oac_no_warn" dir="ltr">INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'I'，5,5，'Store 5'，'03060'）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'I'，6,6，'Store 6'，'03062'）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'UO'，4,4，'Store 4'，'03062'）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'UN'，4,4，'Stor4NewNam'，'03062'）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'D'，3,3，'Store 3'，'03060'）; EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'store'）; - 显示st_store的初始内容SELECT dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE FROM st_store ORDER BY STORE_KEY ASC，dmltype $$ DESC; DM STORE_KEY STORE_NUMBER STORE_NAME ZIPCODE  -  --------- ------------ ---------- ------- D 3 3商店3 03060 UO 4 4商店4 03062 UN 4 4 Stor4NewNam 03062 I 5 5商店5 03060 I 5 5商店6 03062 5行选择。
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGEEGJD">
                           <p class="titleinexample">示例8-13填写缺失值以删除和更新记录</p>
                           <p>此示例显示如果您未提供删除和更新操作的所有值，则在运行<code class="codeph">PREPARE_STAGING_LOG</code>过程时，Oracle数据库将填写缺失值。
                           </p><pre class="oac_no_warn" dir="ltr">INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'D'，3，NULL，NULL，NULL）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'UO'，4，NULL，NULL，NULL）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'UN'，4，NULL，NULL，'03063'）; EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'store'）; SELECT dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE FROM ST_STORE ORDER BY STORE_KEY ASC，dmltype $$ DESC; DM STORE_KEY STORE_NUMBER STORE_NAME ZIPCODE  -  --------- ------------ ----------- --------- D 3 3商店3 03060 UO 4 4商店4 03062 UN 4 4商店4 03063</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGGACCB">
                           <p class="titleinexample">示例8-14将列更新为NULL</p>
                           <p>此示例说明如何将列更新为<code class="codeph">NULL</code> 。如果要将列值更新为<code class="codeph">NULL</code> ，则必须在<code class="codeph">UO</code>记录中提供其旧值。
                           </p>
                           <p>在此示例中，您的目标是将存储4的zipcode更改为03063，将其名称更改为<code class="codeph">NULL</code> 。您可以提供旧的zipcode值，但必须在<code class="codeph">'UO'</code>行中提供旧的<code class="codeph">store_name</code>值，否则<code class="codeph">store_name</code>将保持不变。
                           </p><pre class="oac_no_warn" dir="ltr">INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'UO'，4，NULL，'Store 4'，NULL）; INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'UN'，4，NULL，NULL，'03063'）; EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'store'）; SELECT dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE FROM st_store ORDER BY STORE_KEY ASC，dmltype $$ DESC; DM STORE_KEY STORE_NUMBER STORE_NAME ZIPCODE  -  --------- ------------ ----------- -------- UO 4 4商店4 03062 UN 4 4 03063</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-82DB4858-381A-4F37-8A82-58463B6C57BE__BCGBGHFG">
                           <p class="titleinexample">示例8-15显示分段日志统计信息</p>
                           <p>此示例说明如何使用<code class="codeph">USER_SR_STLOG_STATS</code>目录视图显示登台日志统计信息。
                           </p><pre class="oac_no_warn" dir="ltr">SELECT TABLE_NAME，STAGING_LOG_NAME，NUM_INSERTS，NUM_DELETE，NUM_UPDATES FROM USER_SR_STLOG_STATS ORDER BY TABLE_NAME; TABLE_NAME STAGING_LOG_NAME NUM_INSERTS NUM_DELETES NUM_UPDATES ---------- ---------------- ----------- -------- --- ----------- FACT ST_FACT 4 1 1 STORE ST_STORE 2 1 1 TIME ST_TIME 1 0 0 3行选择。
</pre><p>如果在<code class="codeph">EXECUTE_REFRESH</code>过程结束时使用相同的查询，则不会获得任何行，表示更改数据已全部由同步刷新消耗。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DWHSG9129"></a><div class="props_rev_3"><a id="GUID-D89D76FD-0476-4DE7-8FE5-B4EDBBE9220F" name="GUID-D89D76FD-0476-4DE7-8FE5-B4EDBBE9220F"></a><h5 id="DWHSG-GUID-D89D76FD-0476-4DE7-8FE5-B4EDBBE9220F" class="sect5"><span class="enumeration_section">8.4.2.5</span>准备分段日志时的错误处理</h5>
                     <div>
                        <p>当<code class="codeph">PREPARE_STAGING_LOG</code>过程处理表时，它将检测并报告仅与该表相关的变更数据规范中的错误。例如，它将验证正在插入的行的键是否已存在于基表中，并且确实存在要删除或更新的行的键。但是， <code class="codeph">PREPARE_STAGING_LOG</code>过程无法检测与表上的参照完整性约束相关的错误;也就是说，如果涉及多个表的更改数据规范存在不一致，则无法检测到错误。将在<code class="codeph">EXECUTE_REFRESH</code>过程时检测到此类错误。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9130"></a><div class="props_rev_3"><a id="GUID-AEEB3AAA-BB56-4D8D-9F33-181F12E97AD6" name="GUID-AEEB3AAA-BB56-4D8D-9F33-181F12E97AD6"></a><h3 id="DWHSG-GUID-AEEB3AAA-BB56-4D8D-9F33-181F12E97AD6" class="sect3"><span class="enumeration_section">8.5</span>同步刷新操作故障排除</h3>
               <div>
                  <p>本节介绍如何监视两个同步刷新过程的状态， <code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code>以及如何解决可能发生的错误。要成功使用同步刷新，您应该了解可能出现的不同类型的错误以及如何处理它们。
                  </p>
                  <p>最可能的错误来源之一是错误准备变更数据。运行<code class="codeph">EXECUTE_REFRESH</code>过程时，这些错误将表现为参照约束违规。在这种情况下，组的状态设置为<code class="codeph">ABORT</code> 。学会识别这些错误并解决它们非常重要。
                  </p>
                  <p>本节涉及的主题是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-3E3A9189-D84D-4120-B901-48EFD19C19DC">刷新操作的状态概述</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-D2DE66DA-9D73-4789-A39B-040090819CCB">PREPARE_REFRESH如何设置STATUS字段</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725">使用PREPARE_REFRESH准备同步刷新的示例</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-85CAA6F2-B89F-4576-9A1B-32C2376CA97E">EXECUTE_REFRESH如何在同步刷新期间设置状态字段</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654">使用EXECUTE_REFRESH执行同步刷新的示例</a></p>
                     </li>
                     <li>
                        <p><a href="synchronous-refresh.html#GUID-30E9A864-9C14-413B-93E4-6DD6E165BCC8">带有约束冲突的EXECUTE_REFRESH示例</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9131"></a><div class="props_rev_3"><a id="GUID-3E3A9189-D84D-4120-B901-48EFD19C19DC" name="GUID-3E3A9189-D84D-4120-B901-48EFD19C19DC"></a><h4 id="DWHSG-GUID-3E3A9189-D84D-4120-B901-48EFD19C19DC" class="sect4"><span class="enumeration_section">8.5.1</span>刷新操作状态概述</h4>
                  <div>
                     <p><code class="codeph">DBMS_SYNC_REFRESH</code>包提供了三个控制刷新执行过程的过程。使用<code class="codeph">PREPARE_REFRESH</code>过程启动同步刷新，该过程计划整个刷新操作并执行大部分计算工作以进行刷新，然后执行<code class="codeph">EXECUTE_REFRESH</code>过程，执行刷新。提供的第三个过程是<code class="codeph">ABORT_REFRESH</code> ，如果这些过程中的任何一个失败，则用于从错误中恢复。
                     </p>
                     <p><code class="codeph">USER_SR_GRP_STATUS</code>和<code class="codeph">USER_SR_OBJ_STATUS</code>目录视图包含有关当前组的这些刷新操作状态的所有信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">USER_SR_GRP_STATUS</code>视图显示整个组的状态。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">OPERATION</code>字段指示在组上运行的当前刷新过程： <code class="codeph">PREPARE</code>或<code class="codeph">EXECUTE</code> 。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">STATUS</code>字段指示操作的状态 - <code class="codeph">RUNNING</code> ， <code class="codeph">COMPLETE</code> ， <code class="codeph">ERROR</code> - <code class="codeph">SOFT</code> ， <code class="codeph">ERROR</code> - <code class="codeph">HARD</code> ， <code class="codeph">ABORT</code> ， <code class="codeph">PARTIAL</code> 。稍后将详细解释这些。
                                 </p>
                              </li>
                              <li>
                                 <p>该组由其组ID标识。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><code class="codeph">USER_SR_OBJ_STATUS</code>视图显示每个对象的状态。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>该对象由其所有者，名称和类型（ <code class="codeph">TABLE</code>或<code class="codeph">MVIEW</code> ）和组ID标识。</p>
                              </li>
                              <li>
                                 <p>的<code class="codeph">STATUS</code>字段，其可以被<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code> ， <code class="codeph">ABORT</code> ，或<code class="codeph">COMPLETE</code> 。稍后将详细解释这些。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9132"></a><div class="props_rev_3"><a id="GUID-D2DE66DA-9D73-4789-A39B-040090819CCB" name="GUID-D2DE66DA-9D73-4789-A39B-040090819CCB"></a><h4 id="DWHSG-GUID-D2DE66DA-9D73-4789-A39B-040090819CCB" class="sect4"><span class="enumeration_section">8.5.2</span> PREPARE_REFRESH如何设置STATUS字段</h4>
                  <div>
                     <p>当您启动新的<code class="codeph">PREPARE_REFRESH</code>作业时，组的<code class="codeph">STATUS</code>设置为<code class="codeph">RUNNING</code>并且组中对象的<code class="codeph">STATUS</code>设置为<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code> 。 <code class="codeph">PREPARE_REFRESH</code>作业完成后，对象的状态保持不变，但组的状态更改为以下三个值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">COMPLETE</code>如果作业顺利完成。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ERROR_SOFT</code>如果作业遇到ORA-01536：超出了表空间'％s'错误的空间配额。
                           </p>
                        </li>
                        <li>
                           <p>否则为<code class="codeph">ERROR_HARD</code> （即，如果作业遇到ORA-01536以外的任何错误）。
                           </p>
                        </li>
                     </ul>
                     <p>使用<code class="codeph">PREPARE_REFRESH</code>过程时要记住以下<code class="codeph">PREPARE_REFRESH</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>组中对象的<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code>状态表示<code class="codeph">PREPARE_REFRESH</code>作业未修改对象的数据。数据修改仅在<code class="codeph">EXECUTE_REFRESH</code>步骤中发生，此时状态将根据需要进行更改。这将在后面描述。
                           </p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">STATUS</code>是<code class="codeph">ERROR_SOFT</code> ，则可以通过增加指定表空间的空间配额来修复ORA-01536错误，并恢复<code class="codeph">PREPARE_REFRESH</code> 。或者，您可以选择使用<code class="codeph">ABORT_REFRESH</code>中止刷新。</p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">STATUS</code>值为<code class="codeph">ERROR_HARD</code> ，那么您唯一的选择是使用<code class="codeph">ABORT_REFRESH</code>中止刷新。</p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">PREPARE_REFRESH</code>过程完成后的<code class="codeph">STATUS</code>值为<code class="codeph">RUNNING</code> ，则表示发生了错误。请联系Oracle支持服务以获取帮助。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ERROR_HARD</code>的<code class="codeph">STATUS</code>值可能与资源耗尽有关，因为<code class="codeph">PREPARE_REFRESH</code>过程可能是资源密集型的。如果您无法确定问题，请与Oracle支持服务联系以获取帮助。但是，如果您可以识别问题并修复它，那么您可以继续使用同步刷新，首先运行<code class="codeph">ABORT_REFRESH</code> ，然后运行<code class="codeph">PREPARE_REFRESH</code>过程。
                           </p>
                        </li>
                        <li>
                           <p>请记住，只有当组上的先前刷新操作（如果有）已成功完成执行或已中止时，才能启动新的<code class="codeph">PREPARE_REFRESH</code>作业。
                           </p>
                        </li>
                        <li>
                           <p>如果末尾的<code class="codeph">PREPARE_REFRESH</code>过程的<code class="codeph">STATUS</code>值不是<code class="codeph">COMPLETE</code> ，则无法继续执行<code class="codeph">EXECUTE_REFRESH</code>步骤。如果您无法使<code class="codeph">PREPARE_REFRESH</code>正常工作，则可以继续执行取消注册阶段，并使用其他刷新方法维护组中的对象。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9134"></a><a id="DWHSG9135"></a><a id="DWHSG9136"></a><a id="DWHSG9137"></a><a id="DWHSG9133"></a><div class="props_rev_3"><a id="GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725" name="GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725"></a><h4 id="DWHSG-GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725" class="sect4"><span class="enumeration_section">8.5.3</span>使用PREPARE_REFRESH准备同步刷新的示例</h4>
                  <div>
                     <div class="section">
                        <p>本节提供准备刷新时常见情况的示例。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725__BCGCCJFA">
                        <p class="titleinexample">示例8-16 PREPARE_REFRESH成功，状态为COMPLETE</p>
                        <p>此示例显示<code class="codeph">PREPARE_REFRESH</code>过程成功完成。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; PL / SQL过程成功完成。SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------准备完成</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725__BCGJJHBI">
                        <p class="titleinexample">示例8-17 PREPARE_REFRESH失败，状态为ERROR_SOFT</p>
                        <p>此示例显示遇到ORA-01536的<code class="codeph">PREPARE_REFRESH</code>过程。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; BEGIN DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））;结束; *第1行的错误：ORA-01536：表空间'DUMMY_TS'ORA-06512超出空间配额：在“SYS.DBMS_SYNC_REFRESH”，第63行ORA-06512：在“SYS.DBMS_SYNC_REFRESH”，第411行ORA-06512：at“ SYS.DBMS_SYNC_REFRESH“，第429行ORA-06512：第1PL / SQL行成功完成。SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------ PREPARE ERROR_SOFT</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725__BCGGCBCA">
                        <p class="titleinexample">例8-18 PREPARE_REFRESH的恢复成功</p>
                        <p>此示例是<a href="synchronous-refresh.html#GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725__BCGJJHBI">示例8-17</a>的延续。引发ORA-01536错误后，增加<code class="codeph">DUMMY_TS</code>的表空间并重新运行<code class="codeph">PREPARE_REFRESH</code>过程，该过程现在成功完成。请注意， <code class="codeph">PREPARE_REFRESH</code>过程将从停止的位置继续处理。另请注意， <code class="codeph">PREPARE_REFRESH</code>过程的使用与正常情况没有区别，并且不需要任何参数或设置来指示正在恢复过程。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; PL / SQL过程成功完成。SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------准备完成</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DE05AC44-A036-447F-A8B1-4FEEC6503725__BCGCBFJF">
                        <p class="titleinexample">例8-19 PREPARE_REFRESH的中止</p>
                        <p>此示例假定<code class="codeph">PREPARE_REFRESH</code>过程已失败且<code class="codeph">STATUS</code>值为<code class="codeph">ERROR_HARD</code> 。然后运行<code class="codeph">ABORT_REFRESH</code>过程以中止准备作业。请注意， <code class="codeph">STATUS</code>值最后已从<code class="codeph">ERROR_HARD</code>更改为<code class="codeph">ABORT</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------ PREPARE ERROR_HARD EXECUTE DBMS_SYNC_REFRESH.ABORT_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; PL / SQL过程成功完成。SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------ PREPARE ABORT</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DWHSG9138"></a><div class="props_rev_3"><a id="GUID-85CAA6F2-B89F-4576-9A1B-32C2376CA97E" name="GUID-85CAA6F2-B89F-4576-9A1B-32C2376CA97E"></a><h4 id="DWHSG-GUID-85CAA6F2-B89F-4576-9A1B-32C2376CA97E" class="sect4"><span class="enumeration_section">8.5.4</span> EXECUTE_REFRESH如何在同步刷新期间设置状态字段</h4>
                  <div>
                     <p><code class="codeph">EXECUTE_REFRESH</code>过程将同步刷新组中的对象组划分为子组，每个子组都以原子方式刷新。第一个子组由基表组成。同步刷新组中的每个物化视图都放在一个单独的子组中，并以原子方式刷新。
                     </p>
                     <p>对于<code class="codeph">EXECUTE_REFRESH</code>过程， <code class="codeph">STATUS</code>字段的可能结束状态为： <code class="codeph">COMPLETE</code> ， <code class="codeph">PARTIAL</code>和<code class="codeph">ABORT</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">STATUS</code> <code class="codeph">=</code> <code class="codeph">COMPLETE</code></p>
                           <p>如果基表和所有物化视图成功刷新，则会达到此状态。</p>
                        </li>
                        <li>
                           <p><code class="codeph">STATUS</code> <code class="codeph">=</code> <code class="codeph">ABORT</code></p>
                           <p>此状态表示基表子组的刷新失败;表格和物化视图中的数据是一致的但不变。如果发生这种情况，则应该存在与故障相关的错误。如果是用户错误，如违反约束，那么你就可以解决这个问题，并从头开始重新同步刷新操作（即<code class="codeph">PREPARE_STAGING_LOG</code>为组中的每个表<code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code> ）。如果不是用户错误，那么您应该联系Oracle支持服务。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">STATUS</code> <code class="codeph">=</code> <code class="codeph">PARTIAL</code></p>
                           <p>如果所有基表刷新成功并且某些（但不是全部）物化视图成功刷新，则会达到此状态。已成功刷新的表和物化视图中的数据彼此一致;其他物化视图陈旧，需要完全刷新。如果发生这种情况，则应该存在与故障相关的错误。这很可能不是用户错误，而是您应该向Oracle支持服务报告的Oracle错误。在这种状态下你有两个选择：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>重试执行<code class="codeph">EXECUTE_REFRESH</code>过程。在这种情况下， <code class="codeph">EXECUTE_REFRESH</code>将使用另一种刷新方法（如PCT-refresh或<code class="codeph">COMPLETE</code> refresh）重新尝试刷新失败的实例化视图。如果所有物化视图都成功，则状态将设置为<code class="codeph">COMPLETE</code> 。否则，状态将保留在<code class="codeph">PARTIAL</code> 。</p>
                              </li>
                              <li>
                                 <p>调用<code class="codeph">ABORT_REFRESH</code>过程以中止<code class="codeph">ABORT_REFRESH</code>化视图。这将回滚对所有物化视图和基表的更改。在将分段日志或已注册的分区操作中的任何更改应用于它们之前，它们都将具有与原始状态相同的数据。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>如果<code class="codeph">EXECUTE_REFRESH</code>过程中出现错误， <code class="codeph">USER_SR_GRP_STATUS</code>视图中的以下字段也很有用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">NUM_MVS_COMPLETED</code> ，包含已成功完成刷新操作的<code class="codeph">NUM_MVS_COMPLETED</code>化视图的数量。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">NUM_MVS_ABORTED</code> ，其中包含已中止的物化视图的数量。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ERROR</code>和<code class="codeph">ERROR_MESSAGE</code> ，记录操作中遇到的错误。
                           </p>
                        </li>
                     </ul>
                     <p>在<code class="codeph">EXECUTE_REFRESH</code>过程结束时，组中对象的状态在<code class="codeph">USER_SR_OBJ_STATUS</code>视图中标记如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果已成功应用更改，则对象的状态将设置为<code class="codeph">COMPLETE</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果未成功应用更改，则对象的状态将设置为<code class="codeph">ABORT</code> 。在这种情况下，对象将处于刷新操作之前的状态。<code class="codeph">ERROR</code>和<code class="codeph">ERROR_MESSAGE</code>字段记录操作中遇到的错误。
                           </p>
                        </li>
                        <li>
                           <p>对象的状态保持<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code>如果没有更改应用到它。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9140"></a><a id="DWHSG9141"></a><a id="DWHSG9142"></a><a id="DWHSG9143"></a><a id="DWHSG9139"></a><div class="props_rev_3"><a id="GUID-12BD73E0-A438-4F41-89D5-D48B2704C654" name="GUID-12BD73E0-A438-4F41-89D5-D48B2704C654"></a><h4 id="DWHSG-GUID-12BD73E0-A438-4F41-89D5-D48B2704C654" class="sect4"><span class="enumeration_section">8.5.5</span>使用EXECUTE_REFRESH执行同步刷新的示例</h4>
                  <div>
                     <div class="section">
                        <p>本节提供执行刷新时常见情况的示例。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGHDIBJ">
                        <p class="titleinexample">示例8-20 EXECUTE_REFRESH成功完成</p>
                        <p><a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGHDIBJ">例8-20</a>显示了<code class="codeph">EXECUTE_REFRESH</code>过程成功完成。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.EXECUTE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; PL / SQL过程成功完成。SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------执行完成</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGIJHFE">
                        <p class="titleinexample">例8-21 EXECUTE_REFRESH部分成功</p>
                        <p><a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGIJHFE">例8-21</a>显示了部分成功的<code class="codeph">EXECUTE_REFRESH</code>过程。在此示例中，在刷新基表之后但在完成所有物化视图的刷新之前， <code class="codeph">EXECUTE_REFRESH</code>过程失败。组的结果状态为<code class="codeph">PARTIAL</code>并抛出QSM-03280错误消息。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.EXECUTE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; BEGIN DBMS_SYNC_REFRESH.EXECUTE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））;结束; *第1行的错误：ORA-31928：同步刷新错误QSM-03280：一个或多个物化视图无法成功刷新。ORA-06512：在“SYS.DBMS_SYNC_REFRESH”，第63行ORA-06512：在“SYS.DBMS_SYNC_REFRESH”，第411行ORA-06512：在“SYS.DBMS_SYNC_REFRESH”，第446行ORA-06512：在第1行</pre><p>在<code class="codeph">EXECUTE_REFRESH</code> .procedure之后检查组本身的状态。请注意，操作字段设置为<code class="codeph">EXECUTE</code> ，状态为<code class="codeph">PARTIAL</code> 。</p><pre class="oac_no_warn" dir="ltr">SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ------------- EXECUTE PARTIAL</pre><p>通过查询<code class="codeph">USER_SR_GRP_STATUS</code>视图，您可以发现已中止的物化视图数为1，失败的物化视图为<code class="codeph">MV1</code> 。
                        </p>
                        <p>如果检查组中对象的状态，因为<code class="codeph">STORE</code>和<code class="codeph">TIME</code>未更改，则其状态为<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code> 。</p><pre class="oac_no_warn" dir="ltr">选择名称，类型，状态来自USER_SR_OBJ_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）ORDER BY TYPE，NAME; NAME TYPE STATUS ---------------- ---------- ---------------- MV1 MVIEW ABORT MV1_HALFMONTH MVIEW COMPLETE MV2 MVIEW完成MV2_YEAR MVIEW完成事实表完整存储表未处理时间表未处理选择7行。SELECT NUM_TBLS，NUM_MVS，NUM_MVS_COMPLETED，NUM_MVS_ABORTED来自USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）; NUM_TBLS NUM_MVS NUM_MVS_COMPLETED NUM_MVS_ABORTED -------- ------- ----------------- -------------- -  3 4 3 1</pre><p>此时，您可以再次尝试运行<code class="codeph">EXECUTE_REFRESH</code>过程。如果重试成功并且失败的物化视图成功，则组状态将设置为<code class="codeph">COMPLETE</code> 。否则，状态将保留在<code class="codeph">PARTIAL</code> 。这在<a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGGCHFG">例8-22中显示</a> 。您也可以中止刷新过程并返回到原始状态。这在<a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGHCEFA">例8-23中显示</a> 。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGGCHFG">
                        <p class="titleinexample">示例8-22在PARTIAL状态后重试刷新</p>
                        <p><a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGGCHFG">例8-22</a>说明了<a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGIJHFE">例8-21</a>的继续。您重试<code class="codeph">EXECUTE_REFRESH</code>过程并成功：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.EXECUTE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; PL / SQL过程成功完成。- 在EXECUTE_REFRESH操作后检查组本身的状态; - 注意操作字段设置为EXECUTE且状态为COMPLETE。 SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态--------- ---------执行完成</pre><p>通过查询<code class="codeph">USER_SR_GRP_STATUS</code>视图，可以发现已中止的物化视图数为0， <code class="codeph">MV1</code>的状态为<code class="codeph">COMPLETE</code> 。如果检查组中对象的状态，因为<code class="codeph">STORE</code>和<code class="codeph">TIME</code>未更改，则其状态为<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code> 。</p><pre class="oac_no_warn" dir="ltr">选择名称，类型，状态来自USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）ORDER BY TYPE，NAME; NAME TYPE STATUS ---------------- ---------- ---------------- MV1 MVIEW COMPLETE MV1_HALFMONTH MVIEW COMPLETE MV2 MVIEW完成MV2_YEAR MVIEW完成事实表完整存储表未处理时间表未处理选择7行。SELECT NUM_TBLS，NUM_MVS，NUM_MVS_COMPLETED，NUM_MVS_ABORTED来自USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）; NUM_TBLS NUM_MVS NUM_MVS_COMPLETED NUM_MVS_ABORTED -------- ------- ----------------- -------------- -  3 4 4 0</pre><p>您可以检查表和物化视图，以验证更改数据中的更改是否已正确应用于它们，并且物化视图和表彼此一致。</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGHCEFA">
                        <p class="titleinexample">示例8-23使用PARTIAL状态中止刷新</p>
                        <p><a href="synchronous-refresh.html#GUID-12BD73E0-A438-4F41-89D5-D48B2704C654__BCGHCEFA">例8-23</a>说明了中止处于<code class="codeph">PARTIAL</code>状态的刷新过程。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SYNC_REFRESH.ABORT_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; PL / SQL过程成功完成。
</pre><p>在<code class="codeph">ABORT_REFRESH</code>过程之后检查组本身的状态;请注意，操作字段设置为<code class="codeph">EXECUTE</code>且状态为<code class="codeph">ABORT</code> 。</p><pre class="oac_no_warn" dir="ltr">SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态---------- -------执行中止</pre><p>通过查询<code class="codeph">USER_SR_GRP_STATUS</code>视图，您会看到所有物化视图都已中止，并且事实表也是如此。检查组中对象的状态;因为<code class="codeph">STORE</code>和<code class="codeph">TIME</code>是不变的，他们的地位是<code class="codeph">NOT</code> <code class="codeph">PROCESSED</code> 。</p><pre class="oac_no_warn" dir="ltr">选择名称，类型，状态来自USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）ORDER BY TYPE，NAME; NAME TYPE STATUS ---------------- ---------- ---------------- MV1 MVIEW ABORT MV1_HALFMONTH MVIEW ABORT MV2 MVIEW ABORT MV2_YEAR MVIEW ABORT FACT TABLE ABORT STORE TABLE NOT PROCESSED TIME TABLE NOT PROCESSED 7行选择。SELECT NUM_TBLS，NUM_MVS，NUM_MVS_COMPLETED，NUM_MVS_ABORTED来自USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）; NUM_TBLS NUM_MVS NUM_MVS_COMPLETED NUM_MVS_ABORTED -------- ------- ----------------- -------------- -  3 4 0 4</pre><p>您可以检查表和物化视图，以验证它们是否都处于原始状态，并且未对更改数据应用任何更改。</p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DWHSG9145"></a><a id="DWHSG9144"></a><div class="props_rev_3"><a id="GUID-30E9A864-9C14-413B-93E4-6DD6E165BCC8" name="GUID-30E9A864-9C14-413B-93E4-6DD6E165BCC8"></a><h4 id="DWHSG-GUID-30E9A864-9C14-413B-93E4-6DD6E165BCC8" class="sect4"><span class="enumeration_section">8.5.6</span>带有约束冲突的EXECUTE_REFRESH示例</h4>
                  <div>
                     <div class="section">
                        <p>在同步刷新方法中，更改数据同时加载到表和实例化视图中以使它们保持同步。在其他刷新方法中，首先将更改数据加载到表中，然后检查所有已启用的约束。在同步刷新方法中，使用来自用户的可信数据准备外部表，并关闭约束验证以节省执行时间。以下示例显示了<code class="codeph">EXECUTE_REFRESH</code>过程捕获的约束违规。在这种情况下， <code class="codeph">EXECUTE_REFRESH</code>过程的最终状态将为<code class="codeph">ABORT</code> 。您必须在更改数据中识别并修复问题，并始终开始同步刷新阶段。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-30E9A864-9C14-413B-93E4-6DD6E165BCC8__BCGJJDEH">
                        <p class="titleinexample">示例8-24子密钥约束违规</p>
                        <p>在<a href="synchronous-refresh.html#GUID-30E9A864-9C14-413B-93E4-6DD6E165BCC8__BCGJJDEH">例8-24中</a> ，假设使用与<code class="codeph">rdbms/demo</code>目录中的文件<code class="codeph">syncref_run.sql</code>相同的表并使用相同的数据填充。特别地，表<code class="codeph">STORE</code>具有四行，其中主键<code class="codeph">STORE_KEY</code>具有值1到4，并且<code class="codeph">FACT</code>表具有引用所有四个存储的行，包括存储3。
                        </p>
                        <p>要演示父键约束违例，请使用删除<code class="codeph">STORE_KEY</code>为3的行填充<code class="codeph">STORE</code>的暂存日志。其他表没有其他更改。当<code class="codeph">EXECUTE_REFRESH</code>过程运行时，它会因ORA-02292错误而失败，如图所示。
                        </p><pre class="oac_no_warn" dir="ltr">INSERT INTO st_store（dmltype $$，STORE_KEY，STORE_NUMBER，STORE_NAME，ZIPCODE）VALUES（'D'，3,3，'Store 3'，'03060'）; - 准备登台日志EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'fact'）; EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'time'）; EXECUTE DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（'syncref_user'，'store'）; - 准备刷新EXECUTE DBMS_SYNC_REFRESH.PREPARE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; - 执行刷新EXECUTE DBMS_SYNC_REFRESH.EXECUTE_REFRESH（ -  DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））; BEGIN DBMS_SYNC_REFRESH.EXECUTE_REFRESH（DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'））;结束; *第1行的错误：ORA-02292：违反了完整性约束（SYNCREF_USER.SYS_C0031765） - 找到子记录ORA-06512：第1行ORA-06512：第“第71行ORBS-REFRESH”，第63行ORA-06512：“SYS。 DBMS_SYNC_REFRESH“，第411行ORA-06512：位于”SYS.DBMS_SYNC_REFRESH“，第446行ORA-06512：第1行</pre><p>在<code class="codeph">EXECUTE_REFRESH</code>过程之后检查组本身的状态。请注意，操作字段设置为<code class="codeph">EXECUTE</code> ，状态为<code class="codeph">ABORT</code> 。</p><pre class="oac_no_warn" dir="ltr">SELECT OPERATION，STATUS FROM USER_SR_GRP_STATUS WHERE GROUP_ID = DBMS_SYNC_REFRESH.GET_GROUP_ID（'MV1'）;操作状态---------- --------------执行中止</pre><p>如果检查基表和<code class="codeph">MV1</code>的内容，则会发现没有变化，并且它们都具有原始值。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="DWHSG9147"></a><a id="DWHSG9146"></a><div class="props_rev_3"><a id="GUID-9E57C982-149A-4C0C-AB9C-3F8A3F4CE2E3" name="GUID-9E57C982-149A-4C0C-AB9C-3F8A3F4CE2E3"></a><h3 id="DWHSG-GUID-9E57C982-149A-4C0C-AB9C-3F8A3F4CE2E3" class="sect3"><span class="enumeration_section">8.6</span>执行同步刷新资格分析</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">CAN_SYNCREF_TABLE</code>函数告诉您表及其相关的物化视图是否有资格进行同步刷新。它提供了对其分析的解释。如果表和视图不符合条件，您可以检查原因并尽可能采取适当的措施。要符合同步刷新的条件，表必须满足前面描述的各种条件。
                     </p>
                     <p>您可以通过两种方式调用<code class="codeph">CAN_SYNCREF_TABLE</code>函数：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用表来存储<code class="codeph">CAN_SYNCREF_TABLE</code>函数的输出</p>
                           <p>以下显示了使用输出表的基本语法：</p><pre class="oac_no_warn" dir="ltr">can_syncref_table（schema_name IN VARCHAR2，table_name IN VARCHAR2，statement_id IN VARCHAR2）</pre></li>
                        <li>
                           <p>使用VARRAY存储CAN_SYNCREF_TABLE函数的输出</p>
                           <p>要将<code class="codeph">CAN_SYNCREF_TABLE</code>函数的输出<code class="codeph">CAN_SYNCREF_TABLE</code>到<code class="codeph">VARRAY</code>而不是表，请按如下方式调用过程：</p><pre class="oac_no_warn" dir="ltr">can_syncref_table（schema_name IN VARCHAR2，table_name IN VARCHAR2，output_array IN OUT Sys。CanSyncRefTypeArray）</pre></li>
                     </ul>
                     <p>您可以通过执行<code class="codeph">utlcsrt.sql</code>脚本来创建名为<code class="codeph">SYNCREF_TABLE</code>的输出表。
                     </p>
                     <div class="tblformal" id="GUID-9E57C982-149A-4C0C-AB9C-3F8A3F4CE2E3__GUID-16DECA53-81BE-4D70-ACF1-8D97E2BA9067">
                        <p class="titleintable">表8-1 CAN_SYNCREF_TABLE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="CAN_SYNCREF_TABLE" width="100%" border="1" summary="This table describes the parameters of the CAN_SYNCREF_TABLE function." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d34570e3294">参数</th>
                                 <th align="left" valign="bottom" width="77%" id="d34570e3297">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d34570e3302" headers="d34570e3294 ">
                                    <p><code class="codeph">SCHEMA_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d34570e3302 d34570e3297 ">
                                    <p>基表的模式的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d34570e3310" headers="d34570e3294 ">
                                    <p><code class="codeph">base_table_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d34570e3310 d34570e3297 ">
                                    <p>基表的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d34570e3318" headers="d34570e3294 ">
                                    <p><code class="codeph">statement_id</code></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d34570e3318 d34570e3297 ">
                                    <p>一个字符串（ <code class="codeph">VARCHAR2(30)</code>用于标识与输出定向到用户模式中名为<code class="codeph">SYNCREF_TABLE</code>的表的<code class="codeph">CAN_SYNCREF_TABLE</code>函数调用有关的行。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d34570e3335" headers="d34570e3294 ">
                                    <p><code class="codeph">output_array</code></p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d34570e3335 d34570e3297 ">
                                    <p><code class="codeph">CAN_SYNCREF_TABLE</code>在其中记录有关基表及其相关物化视图的同步刷新资格的信息的输出数组。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-9E57C982-149A-4C0C-AB9C-3F8A3F4CE2E3__GUID-59A88AF1-D638-40E7-A996-D00AFF3CF935">
                        <p class="notep1">注意：</p>
                        <p>只需要为<code class="codeph">CAN_SYNCREF_TABLE</code>函数提供一个<code class="codeph">statement_id</code>或<code class="codeph">output_array</code>参数。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="DWHSG9148"></a><div class="props_rev_3"><a id="GUID-525992D6-4104-44BA-84D6-7B7CE50B8951" name="GUID-525992D6-4104-44BA-84D6-7B7CE50B8951"></a><h4 id="DWHSG-GUID-525992D6-4104-44BA-84D6-7B7CE50B8951" class="sect4"><span class="enumeration_section">8.6.1</span>使用SYNCREF_TABLE存储同步刷新资格分析的结果</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">CAN_SYNCREF_TABLE</code>函数的输出可以定向到名为<code class="codeph">SYNCREF_TABLE</code>的表。您负责创建<code class="codeph">SYNCREF_TABLE</code> ;它可以在不再需要时丢弃。<code class="codeph">SYNCREF_TABLE</code>的格式如下：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE SYNCREF_TABLE（statement_id VARCHAR2（30），schema_name VARCHAR2（30），table_name VARCHAR2（30），mv_schema_name VARCHAR2（30），mv_name VARCHAR2（30），符合条件的VARCHAR2（1）， - 'Y'，'N'seq_num NUMBER，msg_number NUMBER，消息VARCHAR2（4000））;</pre><p>您必须在同一个表上为此过程的每次调用提供不同的<code class="codeph">statement_id</code>参数。如果不是，则会抛出错误。<code class="codeph">statement_id</code> ， <code class="codeph">schema_name</code>和<code class="codeph">table_name</code>字段标识给定表和<code class="codeph">statement_id</code>的结果。
                        </p>
                        <p>每行包含有关表或其从属物化视图的合格性的信息。<code class="codeph">CAN_SYNCREF_TABLE</code>函数保证每行都具有<code class="codeph">mv_schema_name</code>和<code class="codeph">mv_name</code>值，这些<code class="codeph">mv_schema_name</code> <code class="codeph">NULL</code>或非<code class="codeph">NULL</code> 。这些行具有以下语义：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果<code class="codeph">mv_schema_name</code>值为<code class="codeph">NULL</code>且<code class="codeph">mv_name</code>为<code class="codeph">NULL</code> ，则<code class="codeph">ELIGIBLE</code>字段描述该表是否符合同步刷新的条件;如果表不符合条件，则<code class="codeph">MSG_NUMBER</code>和<code class="codeph">MESSAGE</code>字段提供此原因。
                              </p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">mv_schema_name</code>值为<code class="codeph">NOT</code> <code class="codeph">NULL</code>且<code class="codeph">mv_name</code>为<code class="codeph">NOT</code> <code class="codeph">NULL</code> ，则<code class="codeph">ELIGIBLE</code>字段描述物化视图是否符合同步刷新的条件;如果物化视图<code class="codeph">MSG_NUMBER</code> ，则<code class="codeph">MSG_NUMBER</code>和<code class="codeph">MESSAGE</code>字段提供此原因。
                              </p>
                           </li>
                        </ul>
                        <p>您必须在同一个表上为此过程的每次调用提供不同的<code class="codeph">statement_id</code>参数，否则将引发错误。<code class="codeph">statement_id</code> ， <code class="codeph">schema_name</code>和<code class="codeph">table_name</code>字段标识给定表和<code class="codeph">statement_id</code>的结果。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9149"></a><div class="props_rev_3"><a id="GUID-07ED0045-231C-477A-91F8-109BF4A92553" name="GUID-07ED0045-231C-477A-91F8-109BF4A92553"></a><h4 id="DWHSG-GUID-07ED0045-231C-477A-91F8-109BF4A92553" class="sect4"><span class="enumeration_section">8.6.2</span>使用VARRAY存储同步刷新资格分析的结果</h4>
                  <div>
                     <div class="section">
                        <p>您可以将<code class="codeph">CAN_SYNCREF_TABLE</code>函数的输出保存在PL / SQL <code class="codeph">VARRAY</code> 。此数组的元素是<code class="codeph">CanSyncRefMessage</code>类型，它在<code class="codeph">SYS</code>模式中预定义，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">TYPE CanSyncRefMessage IS OBJECT（schema_name VARCHAR2（30），table_name VARCHAR2（30），mv_schema_name VARCHAR2（30），mv_name VARCHAR2（30），符合条件的VARCHAR2（1）， - 'Y'，'N'seq_num NUMBER，msg_number NUMBER，消息VARCHAR2（4000））;</pre><p>数组类型<code class="codeph">CanSyncRefArrayType</code>是<code class="codeph">CanSyncRefMessage</code>对象的<code class="codeph">VARRAY</code> ，在<code class="codeph">SYS</code>模式中预定义，如下所示：</p><pre class="oac_no_warn" dir="ltr">TYPE CanSyncRefArrayType AS VARRAY（256）OF CanSyncRefMessage;</pre><p>每个<code class="codeph">CanSyncRefMessage</code>记录都提供有关基表资格的消息或同步刷新的从属物化视图。字段的语义与<code class="codeph">SYNCREF_TABLE</code>相应字段的语义相同。但是， <code class="codeph">SYNCREF_TABLE</code>有一个在<code class="codeph">CanSyncRefMessage</code>不存在的<code class="codeph">statement_id</code>字段，因为当使用<code class="codeph">VARRAY</code>参数调用<code class="codeph">CAN_SYNCREF_TABLE</code>过程时，不提供<code class="codeph">statement_id</code> （因为它不是必需的）。
                        </p>
                        <p><code class="codeph">CanSyncRefArrayType</code>的默认大小限制为256个元素。如果需要超过256个元素， <code class="codeph">CanSyncRefArray</code> <code class="codeph">SYS</code> <code class="codeph">CanSyncRefArray</code>连接并重新定义<code class="codeph">CanSyncRefArray</code> 。以<code class="codeph">SYS</code>用户身份连接时，以下命令重新定义<code class="codeph">CanSyncRefArray</code>并将限制设置为2048个元素：</p><pre class="oac_no_warn" dir="ltr">创建或替换类型CanSyncRefArrayType AS VARRAY（2048）OF SYS.CanSyncRefMessage; / GRANT EXECUTE SYS.CanSyncRefMessage TO PUBLIC;为SYS.CanSyncRefMessage创建或替换公共SYNONYM CanSyncRefMessage; / GRANT EXECUTE ON SYS.CanSyncRefArrayType TO PUBLIC;创建或替换公共SYNONYM CanSyncRefArrayType FOR SYS.CanSyncRefArrayType; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DWHSG9150"></a><div class="props_rev_3"><a id="GUID-3EA67828-9F6F-491A-8249-55564D88F284" name="GUID-3EA67828-9F6F-491A-8249-55564D88F284"></a><h4 id="DWHSG-GUID-3EA67828-9F6F-491A-8249-55564D88F284" class="sect4"><span class="enumeration_section">8.6.3</span>演示脚本</h4>
                  <div>
                     <p><code class="codeph">rdbms/demo</code>目录中的同步刷新演示脚本包含各种同步刷新操作的最常见方案的示例，包括<code class="codeph">CAN_SYNCREF_API</code> 。主要脚本是<code class="codeph">syncref_run.sql</code> ，其日志是<code class="codeph">syncref_run.log</code> 。文件<code class="codeph">syncref_cst.sql</code>定义了两个过程<code class="codeph">DO_CST</code>和<code class="codeph">DO_CST_ARR</code> ，它们简化了<code class="codeph">CAN_SYNCREF_TABLE</code>函数的使用，并以方便的格式在屏幕上显示信息。<code class="codeph">syncref_cst.sql</code>文件中记录了此格式。
                     </p>
                  </div>
               </div>
            </div><a id="DWHSG9151"></a><div class="props_rev_3"><a id="GUID-DC8054E4-FC5E-4DF1-8484-595562EA70CB" name="GUID-DC8054E4-FC5E-4DF1-8484-595562EA70CB"></a><h3 id="DWHSG-GUID-DC8054E4-FC5E-4DF1-8484-595562EA70CB" class="sect3"><span class="enumeration_section">8.7</span>同步刷新安全注意事项概述</h3>
               <div>
                  <p><code class="codeph">DBMS_SYNC_REFRESH</code>程序包的执行权限授予<code class="codeph">PUBLIC</code> ，因此所有用户都可以执行该程序包中的过程，以对其拥有的对象执行同步刷新。数据库管理员可以对数据库中的所有表和物化视图执行同步刷新操作。
                  </p>
                  <p>通常，如果没有<code class="codeph">DBA</code>权限的用户想要在另一个用户的表上使用同步刷新，则他必须具有读取和写入该表的完整权限;也就是说，用户必须对该表或物化视图具有<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>权限。用户可以具有<code class="codeph">READ</code>权限而不是<code class="codeph">SELECT</code>权限。以下是一些例外情况：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">PURGE_REFRESH_STATS</code>和<code class="codeph">ALTER_REFRESH_STATS_RETENTION</code>函数</p>
                        <p>这两个函数实现清除策略，可用于更改默认保留期。这些功能只能由数据库管理员执行。</p>
                     </li>
                     <li>
                        <p><code class="codeph">CAN_SYNCREF_TABLE</code>函数</p>
                        <p>这是一个咨询功能，用于检查与指定表关联的所有物化视图的同步刷新的合格性。因此，此函数需要对与指定表关联的所有实例化视图具有<code class="codeph">READ</code>或<code class="codeph">SELECT</code>权限。
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01094.DBMS_RULE_ADM.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_RULE_ADM package provides the subprograms for creating and managing rules, rule sets, and rule evaluation contexts."></meta>
      <meta name="description" content="The DBMS_RULE_ADM package provides the subprograms for creating and managing rules, rule sets, and rule evaluation contexts."></meta>
      <title>DBMS_RULE_ADM</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_RULE_ADM package provides the subprograms for creating and managing rules, rule sets, and rule evaluation contexts."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_RULE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_SCHEDULER.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_RULE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_SCHEDULER.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_RULE_ADM</li>
            </ol>
            <a id="GUID-3AC54B50-C163-43E0-AFB6-DD1B7C1CDF03" name="GUID-3AC54B50-C163-43E0-AFB6-DD1B7C1CDF03"></a><a id="ARPLS304"></a><a id="ARPLS304"></a>
            
            <h2 id="ARPLS-GUID-3AC54B50-C163-43E0-AFB6-DD1B7C1CDF03" class="sect2"><span class="enumeration_chapter">144</span> DBMS_RULE_ADM</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_RULE_ADM</code>包提供用于创建和管理规则，规则集和规则评估上下文的子程序。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_RULE_ADM.html#GUID-79586CBE-84C2-4790-B932-81BA6B4F64C4" title="此包提供用于创建和管理规则，规则集和规则评估上下文的子程序。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_RULE_ADM.html#GUID-B836ADCC-B8ED-4348-9CFD-2F4FFD58E9AF" title="PUBLIC被授予此程序包的EXECUTE特权。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_RULE_ADM.html#GUID-96B621F6-D7FF-4014-996A-1B6FD5C2AB81" title="该表列出了DBMS_RULE_ADM子程序并简要描述了它们。">DBMS_RULE_ADM子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS73182"></a><a id="ARPLS73182"></a><div class="props_rev_3"><a id="GUID-79586CBE-84C2-4790-B932-81BA6B4F64C4" name="GUID-79586CBE-84C2-4790-B932-81BA6B4F64C4"></a><h3 id="ARPLS-GUID-79586CBE-84C2-4790-B932-81BA6B4F64C4" class="sect3"><span class="enumeration_section">144.1</span> DBMS_RULE_ADM概述</h3>
               <div>
                  <p>此包提供用于创建和管理规则，规则集和规则评估上下文的子程序。</p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-79586CBE-84C2-4790-B932-81BA6B4F64C4__GUID-28C140C4-23B4-47BC-B03C-7778A412360D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="This chapter describes the types used with rules, rule sets, and evaluation contexts.">规则类型</a>有关与<code class="codeph">DBMS_RULE_ADM</code>包一起使用的<a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="本章介绍与规则，规则集和评估上下文一起使用的类型。">类型</a>的更多信息</p>
                           </li>
                           <li>
                              <p><a href="DBMS_RULE.html#GUID-B846207D-78A5-4EB5-BE93-9224756F6CC0" title="DBMS_RULE包中包含的子程序可用于评估指定事件的规则集。">DBMS_RULE</a> 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67791"></a><a id="ARPLS67791"></a><div class="props_rev_3"><a id="GUID-B836ADCC-B8ED-4348-9CFD-2F4FFD58E9AF" name="GUID-B836ADCC-B8ED-4348-9CFD-2F4FFD58E9AF"></a><h3 id="ARPLS-GUID-B836ADCC-B8ED-4348-9CFD-2F4FFD58E9AF" class="sect3"><span class="enumeration_section">144.2</span> DBMS_RULE_ADM安全模型</h3>
               <div>
                  <p><code class="codeph">PUBLIC</code>被授予此程序包的<code class="codeph">EXECUTE</code>特权。
                  </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-B836ADCC-B8ED-4348-9CFD-2F4FFD58E9AF__GUID-EA07FC5B-EB49-4C95-9BCE-416A43CE7423">
                        <p class="notep1">也可以看看：</p>
                        <p>有关用户组<code class="codeph">PUBLIC</code>详细信息，请<a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG40048" target="_blank"><span class="italic">参见“Oracle数据库安全指南”</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS531"></a><a id="ARPLS67792"></a><a id="ARPLS67792"></a><a id="ARPLS531"></a><div class="props_rev_3"><a id="GUID-96B621F6-D7FF-4014-996A-1B6FD5C2AB81" name="GUID-96B621F6-D7FF-4014-996A-1B6FD5C2AB81"></a><h3 id="ARPLS-GUID-96B621F6-D7FF-4014-996A-1B6FD5C2AB81" class="sect3"><span class="enumeration_section">144.3</span> DBMS_RULE_ADM子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_RULE_ADM</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-96B621F6-D7FF-4014-996A-1B6FD5C2AB81__GUID-569BF17A-5B82-47EE-947F-BCD049A0D29D">
                     <p class="titleintable">表144-1 DBMS_RULE_ADM包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_RULE_ADM包子程序" width="100%" border="1" summary="This table lists the DBMS_RULE_ADM subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="44%" id="d760349e446">子程序</th>
                              <th align="left" valign="bottom" width="56%" id="d760349e449">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e454" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737" title="此过程将指定的规则添加到指定的规则集。">ADD_RULE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e454 d760349e449 ">
                                 <p>将指定的规则添加到指定的规则集</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e466" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-17922ABB-D34D-4882-8106-75ACB3023723" title="此过程会更改规则评估上下文。规则评估上下文定义可在规则条件中引用的外部数据。外部数据可以作为变量存在，也可以作为表数据存在。">ALTER_EVALUATION_CONTEXT程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e466 d760349e449 ">
                                 <p>改变规则评估上下文</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e478" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9" title="此过程更改指定规则的一个或多个方面。">ALTER_RULE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e478 d760349e449 ">
                                 <p>更改指定规则的一个或多个方面</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e490" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51" title="此过程创建规则评估上下文。规则评估上下文定义可在规则条件中引用的外部数据。外部数据可以作为变量存在，也可以作为表数据存在。">CREATE_EVALUATION_CONTEXT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e490 d760349e449 ">
                                 <p>创建规则评估上下文</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e502" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7" title="此过程创建规则。">CREATE_RULE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e502 d760349e449 ">
                                 <p>创建具有指定名称的规则</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e514" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632" title="此过程创建规则集。">CREATE_RULE_SET过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e514 d760349e449 ">
                                 <p>创建具有指定名称的规则集</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e526" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-21803734-225E-4BAB-BB87-A68340DC391A" title="此过程将删除规则评估上下文。">DROP_EVALUATION_CONTEXT程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e526 d760349e449 ">
                                 <p>删除具有指定名称的规则评估上下文</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e538" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C" title="此过程会删除规则。">DROP_RULE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e538 d760349e449 ">
                                 <p>删除具有指定名称的规则</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e550" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-D2091FC3-63DF-4375-82B5-6D02E1377435" title="此过程将删除规则集。">DROP_RULE_SET过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e550 d760349e449 ">
                                 <p>删除具有指定名称的规则集</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e562" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6" title="此过程将指定对象的指定对象特权授予指定的用户或角色。如果用户拥有该对象，则会使用grant选项自动授予该用户对该对象的所有权限。">GRANT_OBJECT_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e562 d760349e449 ">
                                 <p>将指定对象的指定对象权限授予指定的用户或角色</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e574" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-2F14077C-81B4-495D-8F9B-898F580999BC" title="此过程将指定的系统特权授予指定的用户或角色。">GRANT_SYSTEM_PRIVILEGE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e574 d760349e449 ">
                                 <p>将指定的系统特权授予指定的用户或角色</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e587" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-753514AB-0FA1-4946-B713-477ECECD9EE8" title="此过程从指定的规则集中删除指定的规则。">REMOVE_RULE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e587 d760349e449 ">
                                 <p>从指定的规则集中删除指定的规则</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e599" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22" title="此过程从指定的用户或角色撤消指定对象的指定对象特权。">REVOKE_OBJECT_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e599 d760349e449 ">
                                 <p>从指定的用户或角色撤消指定对象的指定对象权限</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="44%" id="d760349e611" headers="d760349e446 ">
                                 <p><a href="DBMS_RULE_ADM.html#GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64" title="此过程从指定的用户或角色撤消指定的系统特权。">REVOKE_SYSTEM_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d760349e611 d760349e449 ">
                                 <p>从指定的用户或角色撤消指定的系统特权</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-96B621F6-D7FF-4014-996A-1B6FD5C2AB81__GUID-4ACBD27C-2E46-43BC-BB1F-286F1B3041CD">
                        <p class="notep1">注意：</p>
                        <p>除非另有说明，否则所有子程序均提交。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS559"></a><a id="ARPLS67793"></a><a id="ARPLS67793"></a><a id="ARPLS559"></a><div class="props_rev_3"><a id="GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737" name="GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737"></a><h4 id="ARPLS-GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737" class="sect4"><span class="enumeration_section">144.3.1</span> ADD_RULE过程</h4>
                  <div>
                     <p>此过程将指定的规则添加到指定的规则集。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737__GUID-112EB6F9-AE93-4238-965F-A5C43DCD90E4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.ADD_RULE（rule_name IN VARCHAR2，rule_set_name IN VARCHAR2，evaluation_context IN VARCHAR2 DEFAULT NULL，rule_comment IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737__GUID-13B3BAD5-49F1-48F3-A6E8-343A57093C14">参数</p>
                        <div class="tblformal" id="GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737__GUID-B568B826-AE37-4760-994E-693D9FA33FB1">
                           <p class="titleintable">表144-2 ADD_RULE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_RULE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.ADD_RULE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e740">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e743">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e748" headers="d760349e740 ">
                                       <p><code class="codeph">RULE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e748 d760349e743 ">
                                       <p>要添加到规则集的规则的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中添加名为<code class="codeph">all_a</code>的规则，请为此参数输入<code class="codeph">hr.all_a</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e776" headers="d760349e740 ">
                                       <p><code class="codeph">rule_set_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e776 d760349e743 ">
                                       <p>要添加规则的规则集的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_set_name</code></span> 。例如，要将规则添加到<code class="codeph">hr</code>模式中名为<code class="codeph">apply_rules</code>的规则集，请为此参数输入<code class="codeph">hr.apply_rules</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e804" headers="d760349e740 ">
                                       <p><code class="codeph">evaluation_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e804 d760349e743 ">
                                       <p><code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span>形式的评估上下文名称。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>如果规则本身没有评估上下文，并且您不希望将规则集的评估上下文用于规则，则仅指定评估上下文。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e825" headers="d760349e740 ">
                                       <p><code class="codeph">rule_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e825 d760349e743 ">
                                       <p>可选描述，可以包含将规则添加到规则集的原因</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71C93373-9E4F-42D2-B766-2DCBF1BCE737__GUID-2A979D0B-AD6D-441A-87D7-6A48F3A1A38D">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对规则集具有<code class="codeph">ALTER_ON_RULE_SET</code>权限</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">ALTER</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code> _ <code class="codeph">SET</code>系统权限</p>
                           </li>
                           <li>
                              <p>成为规则集的所有者</p>
                           </li>
                        </ul>
                        <p>此外，规则集所有者必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>拥有该规则的<code class="codeph">EXECUTE_ON_RULE</code>权限</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">EXECUTE</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code>系统特权</p>
                           </li>
                           <li>
                              <p>成为规则所有者</p>
                           </li>
                        </ul>
                        <p>如果规则没有评估上下文，并且在运行此过程时未指定评估上下文，则规则将使用与规则集关联的评估上下文。在这种情况下，规则所有者必须对使用评估上下文的规则访问的所有基础对象具有必要的特权。</p>
                        <p>如果指定了评估上下文，则规则集所有者必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对评估上下文具有<code class="codeph">EXECUTE_ON_EVALUATION_CONTEXT</code>权限</p>
                           </li>
                           <li>
                              <p>具有<code class="codeph">EXECUTE_ANY_EVALUATION_CONTEXT</code>系统特权，评估上下文的所有者不得为<code class="codeph">SYS</code></p>
                           </li>
                           <li>
                              <p>成为评估上下文所有者</p>
                           </li>
                        </ul>
                        <p>此外，规则所有者必须对使用评估上下文的规则访问的所有基础对象具有必要的权限。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67794"></a><a id="ARPLS67795"></a><a id="ARPLS67795"></a><a id="ARPLS67794"></a><div class="props_rev_3"><a id="GUID-17922ABB-D34D-4882-8106-75ACB3023723" name="GUID-17922ABB-D34D-4882-8106-75ACB3023723"></a><h4 id="ARPLS-GUID-17922ABB-D34D-4882-8106-75ACB3023723" class="sect4"><span class="enumeration_section">144.3.2</span> ALTER_EVALUATION_CONTEXT过程</h4>
                  <div>
                     <p>此过程会更改规则评估上下文。规则评估上下文定义可在规则条件中引用的外部数据。外部数据可以作为变量存在，也可以作为表数据存在。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-17922ABB-D34D-4882-8106-75ACB3023723__GUID-9E21E0BE-1C20-4319-8096-CBC7E4AF57EC">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.ALTER_EVALUATION_CONTEXT（evaluate_context_name IN VARCHAR2，table_aliases IN SYS.RE $ TABLE_ALIAS_LIST DEFAULT NULL，remove_table_aliases IN BOOLEAN DEFAULT FALSE，variable_types IN SYS.RE $ VARIABLE_TYPE_LIST DEFAULT NULL，remove_variable_types IN BOOLEAN DEFAULT FALSE，evaluation_function IN VARCHAR2 DEFAULT NULL，remove_evaluation_function IN BOOLEAN DEFAULT FALSE，evaluation_context_comment IN VARCHAR2 DEFAULT NULL，remove_eval_context_comment IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17922ABB-D34D-4882-8106-75ACB3023723__GUID-49CCEE3E-0EE8-4B26-A45A-D5B5DA558C2C">参数</p>
                        <div class="tblformal" id="GUID-17922ABB-D34D-4882-8106-75ACB3023723__GUID-3AC5406D-538C-4752-BD0A-7C47413BD31C">
                           <p class="titleintable">表144-3 ALTER_EVALUATION_CONTEXT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_EVALUATION_CONTEXT过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.ALTER_EVALUATION_CONTEXT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="41%" id="d760349e1027">参数</th>
                                    <th align="left" valign="bottom" width="59%" id="d760349e1030">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1035" headers="d760349e1027 ">
                                       <p><code class="codeph">evaluation_context_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1035 d760349e1030 ">
                                       <p>要更改的评估上下文的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span> 。
                                       </p>
                                       <p>例如，要在<code class="codeph">hr</code>模式中更改名为<code class="codeph">dept_</code> <code class="codeph">eval_context</code>的评估上下文，请为此参数输入<code class="codeph">hr.dept_eval_context</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1067" headers="d760349e1027 ">
                                       <p><code class="codeph">table_aliases</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1067 d760349e1030 ">
                                       <p>如果<code class="codeph">NULL</code>和<code class="codeph">remove_table_aliases</code>为<code class="codeph">FALSE</code> ，则该过程将保留现有的表别名。如果<code class="codeph">NULL</code>和<code class="codeph">remove_table_aliases</code>为<code class="codeph">TRUE</code> ，则该过程将删除现有的表别名。
                                       </p>
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的表别名替换评估上下文的现有表别名。
                                       </p>
                                       <p>表别名指定评估上下文中的表。表别名可用于在规则条件中引用表。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1101" headers="d760349e1027 ">
                                       <p><code class="codeph">remove_table_aliases</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1101 d760349e1030 ">
                                       <p>如果<code class="codeph">TRUE</code>和<code class="codeph">table_aliases</code>为<code class="codeph">NULL</code> ，则该过程将删除评估上下文的现有表别名。如果<code class="codeph">TRUE</code>和<code class="codeph">table_aliases</code>为非<code class="codeph">NULL</code> ，则该过程引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会删除表别名。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1133" headers="d760349e1027 ">
                                       <p><code class="codeph">variable_types</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1133 d760349e1030 ">
                                       <p>如果<code class="codeph">NULL</code>和<code class="codeph">remove_variable_types</code>为<code class="codeph">FALSE</code> ，则该过程保留变量类型。如果<code class="codeph">NULL</code>和<code class="codeph">remove_variable_types</code>为<code class="codeph">TRUE</code> ，则该过程将删除现有变量类型。
                                       </p>
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的变量类型替换评估上下文的现有变量类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1165" headers="d760349e1027 ">
                                       <p><code class="codeph">remove_variable_types</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1165 d760349e1030 ">
                                       <p>如果<code class="codeph">TRUE</code>和<code class="codeph">variable_types</code>为<code class="codeph">NULL</code> ，则该过程将删除评估上下文的现有变量类型。如果<code class="codeph">TRUE</code>和<code class="codeph">variable_types</code>为非<code class="codeph">NULL</code> ，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会删除变量类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1197" headers="d760349e1027 ">
                                       <p><code class="codeph">evaluation_function</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1197 d760349e1030 ">
                                       <p>如果<code class="codeph">NULL</code>和<code class="codeph">remove_evaluation_function</code>为<code class="codeph">FALSE</code> ，则该过程将保留现有的评估函数。如果<code class="codeph">NULL</code>和<code class="codeph">remove_evaluation_function</code>为<code class="codeph">TRUE</code> ，则该过程将删除现有的评估函数。
                                       </p>
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的评估函数替换评估上下文的现有评估函数。
                                       </p>
                                       <p>评估函数是一个可选函数，将调用它来评估使用评估上下文的规则。它必须与<code class="codeph">DBMS_RULE.EVALUATE</code>过程具有相同的格式。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>有关评估函数的更多信息，请参见<a href="DBMS_RULE_ADM.html#GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51" title="此过程创建规则评估上下文。规则评估上下文定义可在规则条件中引用的外部数据。外部数据可以作为变量存在，也可以作为表数据存在。">CREATE_EVALUATION_CONTEXT过程</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1243" headers="d760349e1027 ">
                                       <p><code class="codeph">remove_evaluation_function</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1243 d760349e1030 ">
                                       <p>如果<code class="codeph">TRUE</code>和<code class="codeph">evaluation_function</code>为<code class="codeph">NULL</code> ，则该过程将删除评估上下文的现有评估函数。如果<code class="codeph">TRUE</code>和<code class="codeph">evaluation_function</code>为非<code class="codeph">NULL</code> ，则该过程引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会删除评估函数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1275" headers="d760349e1027 ">
                                       <p><code class="codeph">evaluation_context_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1275 d760349e1030 ">
                                       <p>如果<code class="codeph">NULL</code>和<code class="codeph">remove_eval_context_comment</code>为<code class="codeph">FALSE</code> ，则该过程将保留现有的评估上下文注释。如果<code class="codeph">NULL</code>和<code class="codeph">remove_evaluation_function</code>为<code class="codeph">TRUE</code> ，则该过程将删除现有的评估上下文注释。
                                       </p>
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的注释替换评估上下文的现有注释。
                                       </p>
                                       <p>评估上下文注释是规则评估上下文的可选描述。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="41%" id="d760349e1309" headers="d760349e1027 ">
                                       <p><code class="codeph">remove_eval_context_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d760349e1309 d760349e1030 ">
                                       <p>如果<code class="codeph">TRUE</code>且<code class="codeph">evaluation_context_comment</code>为<code class="codeph">NULL</code> ，则该过程将删除评估上下文的现有注释。如果<code class="codeph">TRUE</code>且<code class="codeph">evaluation_context_comment</code>为非<code class="codeph">NULL</code> ，则该过程引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会删除评估上下文注释。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-17922ABB-D34D-4882-8106-75ACB3023723__GUID-64BE542E-2944-4C8D-A973-529BA7BCB3A6">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>是被更改的评估上下文的所有者</p>
                           </li>
                           <li>
                              <p>对另一个用户拥有的评估上下文具有<code class="codeph">ALL_ON_EVALUATION_CONTEXT</code>或<code class="codeph">ALTER_ON_EVALUATION_CONTEXT</code>对象特权</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">ALTER_ANY_EVALUATION_CONTEXT</code>系统权限</p>
                              <div class="infoboxnotealso" id="GUID-17922ABB-D34D-4882-8106-75ACB3023723__GUID-4453313B-1A7B-4845-9C6E-71BA4299FA35">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="This chapter describes the types used with rules, rule sets, and evaluation contexts.">规则类型</a>有关与<code class="codeph">DBMS_RULE_ADM</code>包一起使用的<a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="本章介绍与规则，规则集和评估上下文一起使用的类型。">类型</a>的更多信息</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS328"></a><a id="ARPLS67796"></a><a id="ARPLS67796"></a><a id="ARPLS328"></a><div class="props_rev_3"><a id="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9" name="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9"></a><h4 id="ARPLS-GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9" class="sect4"><span class="enumeration_section">144.3.3</span> ALTER_RULE过程</h4>
                  <div>
                     <p>此过程更改指定规则的一个或多个方面。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9__GUID-D1A81C37-E012-4AD8-AA32-BA4BDC819A22">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.ALTER_RULE（rule_name IN VARCHAR2，condition IN VARCHAR2 DEFAULT NULL，evaluation_context IN VARCHAR2 DEFAULT NULL，remove_evaluation_context IN BOOLEAN DEFAULT FALSE，action_context IN SYS.RE $ NV_LIST DEFAULT NULL，remove_action_context IN BOOLEAN DEFAULT FALSE，rule_comment IN VARCHAR2 DEFAULT NULL，remove_rule_comment IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9__GUID-A1892E1B-7F54-403F-A816-8F0862F9872F">参数</p>
                        <div class="tblformal" id="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9__GUID-B6F2DECA-4BBA-4FD1-9952-02241F2E6389">
                           <p class="titleintable">表144-4 ALTER_RULE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_RULE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.ALTER_RULE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="38%" id="d760349e1490">参数</th>
                                    <th align="left" valign="bottom" width="62%" id="d760349e1493">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1498" headers="d760349e1490 ">
                                       <p><code class="codeph">RULE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1498 d760349e1493 ">
                                       <p>要更改的规则的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_name</code></span> 。例如，要更改<code class="codeph">hr</code>模式中名为<code class="codeph">all_a</code>的规则，请为此参数输入<code class="codeph">hr.all_a</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1526" headers="d760349e1490 ">
                                       <p><code class="codeph">条件</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1526 d760349e1493 ">
                                       <p>与规则关联的条件。</p>
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的条件替换规则的现有条件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1539" headers="d760349e1490 ">
                                       <p><code class="codeph">evaluation_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1539 d760349e1493 ">
                                       <p><code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span>形式的评估上下文名称。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将使用指定的评估上下文替换规则的现有评估上下文。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1563" headers="d760349e1490 ">
                                       <p><code class="codeph">remove_evaluation_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1563 d760349e1493 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将规则的评估上下文设置为<code class="codeph">NULL</code> ，这有效地从规则中删除了评估上下文。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程将保留指定规则的任何评估上下文。
                                       </p>
                                       <p>如果<code class="codeph">evaluation_context</code>参数为非<code class="codeph">NULL</code> ，则此参数应设置为<code class="codeph">FALSE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1593" headers="d760349e1490 ">
                                       <p><code class="codeph">action_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1593 d760349e1493 ">
                                       <p>如果为非<code class="codeph">NULL</code> ，则该过程将更改与规则关联的操作上下文。规则操作上下文是与规则相关联的信息，规则在评估规则时由规则引擎的客户端解释。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1604" headers="d760349e1490 ">
                                       <p><code class="codeph">remove_action_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1604 d760349e1493 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将规则的操作上下文设置为<code class="codeph">NULL</code> ，这有效地从规则中删除了操作上下文。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程将保留指定规则的任何操作上下文。
                                       </p>
                                       <p>如果<code class="codeph">action_context</code>参数为非<code class="codeph">NULL</code> ，则此参数应设置为<code class="codeph">FALSE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1634" headers="d760349e1490 ">
                                       <p><code class="codeph">rule_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1634 d760349e1493 ">
                                       <p>如果为非<code class="codeph">NULL</code> ，则规则的现有注释将替换为指定的注释。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d760349e1645" headers="d760349e1490 ">
                                       <p><code class="codeph">remove_rule_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d760349e1645 d760349e1493 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将规则的注释设置为<code class="codeph">NULL</code> ，这将有效地从规则中删除注释。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程保留对指定规则的任何注释。
                                       </p>
                                       <p>如果<code class="codeph">rule_comment</code>参数为非<code class="codeph">NULL</code> ，则此参数应设置为<code class="codeph">FALSE</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9__GUID-F9E95279-9BB8-4AB7-AD04-D78F899031B9">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>拥有该规则的<code class="codeph">ALTER_ON_RULE</code>权限</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">ALTER</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code>系统权限</p>
                           </li>
                           <li>
                              <p>成为被修改规则的所有者</p>
                           </li>
                        </ul>
                        <p>如果指定了评估上下文，则规则所有者必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对评估上下文具有<code class="codeph">EXECUTE_ON_EVALUATION_CONTEXT</code>权限</p>
                           </li>
                           <li>
                              <p>具有<code class="codeph">EXECUTE_ANY_EVALUATION_CONTEXT</code>系统特权，评估上下文的所有者不得为<code class="codeph">SYS</code></p>
                           </li>
                           <li>
                              <p>成为评估上下文所有者</p>
                           </li>
                        </ul>
                        <p>此外，规则所有者必须对使用评估上下文的规则访问的所有基础对象具有必要的权限。</p>
                        <div class="infoboxnotealso" id="GUID-BFF7D165-FDF5-4726-BCBE-5A234BCE93B9__GUID-56B6C13F-4C1C-47D5-8402-A72FF99172C2">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="This chapter describes the types used with rules, rule sets, and evaluation contexts.">规则类型</a>有关与<code class="codeph">DBMS_RULE_ADM</code>包一起使用的<a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="本章介绍与规则，规则集和评估上下文一起使用的类型。">类型</a>的更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS327"></a><a id="ARPLS67797"></a><a id="ARPLS67797"></a><a id="ARPLS327"></a><div class="props_rev_3"><a id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51" name="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51"></a><h4 id="ARPLS-GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51" class="sect4"><span class="enumeration_section">144.3.4</span> CREATE_EVALUATION_CONTEXT过程</h4>
                  <div>
                     <p>此过程创建规则评估上下文。规则评估上下文定义可在规则条件中引用的外部数据。外部数据可以作为变量存在，也可以作为表数据存在。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__GUID-CFA6A4AE-3285-415C-A34A-4B88C6DE1838">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.CREATE_EVALUATION_CONTEXT（evaluation_context_name IN VARCHAR2，table_aliases IN SYS.RE $ TABLE_ALIAS_LIST DEFAULT NULL，variable_types IN SYS.RE $ VARIABLE_TYPE_LIST DEFAULT NULL，evaluation_function IN VARCHAR2 DEFAULT NULL，evaluation_context_comment IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__GUID-55951FA5-611C-4C8F-B63C-52408593C5FA">参数</p>
                        <div class="tblformal" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__GUID-053B8A70-58AD-4303-B7F3-8C41EDFC8B58">
                           <p class="titleintable">表144-5 CREATE_EVALUATION_CONTEXT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_EVALUATION_CONTEXT过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.CREATE_EVALUATION_CONTEXT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d760349e1851">参数</th>
                                    <th align="left" valign="bottom" width="60%" id="d760349e1854">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d760349e1859" headers="d760349e1851 ">
                                       <p><code class="codeph">evaluation_context_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d760349e1859 d760349e1854 ">
                                       <p>您正在创建的评估上下文的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span> 。
                                       </p>
                                       <p>例如，要在<code class="codeph">hr</code>模式中创建名为<code class="codeph">dept_</code> <code class="codeph">eval_context</code>的评估上下文，请为此参数输入<code class="codeph">hr.dept_eval_context</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d760349e1891" headers="d760349e1851 ">
                                       <p><code class="codeph">table_aliases</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d760349e1891 d760349e1854 ">
                                       <p>表别名，用于指定评估上下文中的表。表别名可用于在规则条件中引用表。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d760349e1899" headers="d760349e1851 ">
                                       <p><code class="codeph">variable_types</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d760349e1899 d760349e1854 ">
                                       <p>评估上下文的变量列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d760349e1907" headers="d760349e1851 ">
                                       <p><code class="codeph">evaluation_function</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d760349e1907 d760349e1854 ">
                                       <p>一个可选函数，将使用评估上下文来评估规则。它必须与<code class="codeph">DBMS_RULE.EVALUATE</code>过程具有相同的格式。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>有关评估功能的详细信息，请参阅<span class="q">“ <a href="DBMS_RULE_ADM.html#GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__I997112">使用说明</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d760349e1924" headers="d760349e1851 ">
                                       <p><code class="codeph">evaluation_context_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d760349e1924 d760349e1854 ">
                                       <p>规则评估上下文的可选描述。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__I997112">
                        <p class="subhead3" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__GUID-02F3DB8A-A85F-4BFF-8801-37AB78D9A4B6">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>是要创建的评估上下文的所有者，并具有<code class="codeph">CREATE_EVALUATION_CONTEXT_OBJ</code>系统特权</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">CREATE</code> _ <code class="codeph">ANY</code> _ <code class="codeph">EVALUATION</code> _ <code class="codeph">CONTEXT</code>系统权限</p>
                              <div class="infoboxnotealso" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__GUID-E34FE8A7-03E5-4D14-802E-0855A67162CE">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="This chapter describes the types used with rules, rule sets, and evaluation contexts.">规则类型</a>有关与<code class="codeph">DBMS_RULE_ADM</code>包一起使用的<a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="本章介绍与规则，规则集和评估上下文一起使用的类型。">类型</a>的更多信息</p>
                              </div>
                           </li>
                        </ul>
                        <p>评估函数必须具有以下签名：</p><pre class="oac_no_warn" dir="ltr">FUNCTION <span class="italic">evaluation_function_name（</span> rule_set_name IN VARCHAR2，evaluation_context IN VARCHAR2，event_context IN SYS.RE $ NV_LIST DEFAULT NULL，table_values IN SYS.RE $ TABLE_VALUE_LIST DEFAULT NULL，column_values IN SYS.RE $ COLUMN_VALUE_LIST DEFAULT NULL，variable_values IN SYS.RE $ VARIABLE_VALUE_LIST DEFAULT NULL ，attribute_values IN SYS.RE $ ATTRIBUTE_VALUE_LIST DEFAULT NULL，stop_on_first_hit IN BOOLEAN DEFAULT FALSE，simple_rules_only IN BOOLEAN DEFAULT FALSE，true_rules OUT SYS.RE $ RULE_HIT_LIST，maybe_rules OUT SYS.RE $ RULE_HIT_LIST）;返回BINARY_INTEGER;</pre><div class="infoboxnote" id="GUID-91361B09-C6E2-4CE5-BB7D-510E29116A51__GUID-B6C4F53E-F7DC-4543-9218-7C84D7350B75">
                           <p class="notep1">注意：</p>
                           <p>每个参数都是必需的，并且必须具有指定的数据类型。但是，您可以更改参数的名称。</p>
                        </div>
                        <p>函数的返回值必须是以下之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBMS_RULE_ADM.EVALUATION_SUCCESS</code> ：用户指定的评估函数成功完成了规则集评估。规则引擎使用<code class="codeph">DBMS_RULE.EVALUATE</code>过程将评估函数获得的评估结果返回给规则引擎客户端。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_RULE_ADM.EVALUATION_CONTINUE</code> ：规则引擎评估规则集，就好像没有评估函数一样。不使用评估函数，并忽略评估函数返回的任何结果。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_RULE_ADM.EVALUATION_FAILURE</code> ：用户指定的评估函数失败。规则集评估停止，并引发错误。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS560"></a><a id="ARPLS67798"></a><a id="ARPLS67798"></a><a id="ARPLS560"></a><div class="props_rev_3"><a id="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7" name="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7"></a><h4 id="ARPLS-GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7" class="sect4"><span class="enumeration_section">144.3.5</span> CREATE_RULE过程</h4>
                  <div>
                     <p>此过程创建规则。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7__GUID-229C90E4-CCC1-4EF8-AF7B-6584B8F247A5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.CREATE_RULE（rule_name IN VARCHAR2，condition IN VARCHAR2，evaluation_context IN VARCHAR2 DEFAULT NULL，action_context IN SYS.RE $ NV_LIST DEFAULT NULL，rule_comment IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7__GUID-795B49E7-336A-488F-83EB-D31C8929CDFC">参数</p>
                        <div class="tblformal" id="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7__GUID-51EC8FFE-4B8A-4C25-B709-10840A65066F">
                           <p class="titleintable">表144-6 CREATE_RULE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_RULE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.CREATE_RULE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e2116">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e2119">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2124" headers="d760349e2116 ">
                                       <p><code class="codeph">RULE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2124 d760349e2119 ">
                                       <p>您正在创建的规则的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中创建名为<code class="codeph">all_a</code>的规则，请为此参数输入<code class="codeph">hr.all_a</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2152" headers="d760349e2116 ">
                                       <p><code class="codeph">条件</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2152 d760349e2119 ">
                                       <p>与规则关联的条件。条件的计算结果为<code class="codeph">TRUE</code>或<code class="codeph">FALSE</code> ，可以是<code class="codeph">SELECT</code>语句的<code class="codeph">WHERE</code>子句中允许的任何条件。例如，以下是有效的规则条件：</p><pre class="oac_no_warn" dir="ltr">department_id = 30</pre><p>确保在规则条件中将正确的大小写用于文本。</p>
                                       <p><span class="bold">注意：</span>不要在条件中包含单词<code class="codeph">"WHERE"</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2183" headers="d760349e2116 ">
                                       <p><code class="codeph">evaluation_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2183 d760349e2119 ">
                                       <p><code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span>形式的可选评估上下文名称，该名称与规则关联。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>如果未指定<code class="codeph">evaluation_context</code> ，则规则将从其规则集继承评估上下文。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2207" headers="d760349e2116 ">
                                       <p><code class="codeph">action_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2207 d760349e2119 ">
                                       <p>与规则关联的操作上下文。规则操作上下文是与规则相关联的信息，规则在评估规则时由规则引擎的客户端解释。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2215" headers="d760349e2116 ">
                                       <p><code class="codeph">rule_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2215 d760349e2119 ">
                                       <p>规则的可选描述</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7__GUID-4F9EABB3-92A4-489F-800A-3DC0F8AD72DB">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>是要创建的规则的所有者，并具有<code class="codeph">CREATE_RULE_OBJ</code>系统特权</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">CREATE</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code>系统特权</p>
                           </li>
                        </ul>
                        <p>如果指定了评估上下文，则规则所有者必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对评估上下文具有<code class="codeph">EXECUTE_ON_EVALUATION_CONTEXT</code>权限</p>
                           </li>
                           <li>
                              <p>具有<code class="codeph">EXECUTE_ANY_EVALUATION_CONTEXT</code>系统特权，评估上下文的所有者不得为<code class="codeph">SYS</code> 。</p>
                           </li>
                           <li>
                              <p>成为评估上下文所有者</p>
                           </li>
                        </ul>
                        <p>此外，规则所有者必须对使用评估上下文的规则访问的所有基础对象具有必要的权限。</p>
                        <div class="infoboxnotealso" id="GUID-153359B7-F63E-4E1E-B9F2-A4B06C8C0CE7__GUID-EF3D18AB-DB4E-4EC1-812D-5417581BBFDC">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="This chapter describes the types used with rules, rule sets, and evaluation contexts.">规则类型</a>有关与<code class="codeph">DBMS_RULE_ADM</code>包一起使用的<a href="Rule-TYPEs.html#GUID-8F7F6A05-3356-4B93-860D-78B0E1931C8B" title="本章介绍与规则，规则集和评估上下文一起使用的类型。">类型</a>的更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS561"></a><a id="ARPLS67799"></a><a id="ARPLS67799"></a><a id="ARPLS561"></a><div class="props_rev_3"><a id="GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632" name="GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632"></a><h4 id="ARPLS-GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632" class="sect4"><span class="enumeration_section">144.3.6</span> CREATE_RULE_SET过程</h4>
                  <div>
                     <p>此过程创建规则集。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632__GUID-B51E4014-C809-469B-B5A6-C7ECD8A52C8F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.CREATE_RULE_SET（rule_set_name IN VARCHAR2，evaluation_context IN VARCHAR2 DEFAULT NULL，rule_set_comment IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632__GUID-526FA958-3F82-48A6-B43E-D46AAEE13D5E">参数</p>
                        <div class="tblformal" id="GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632__GUID-A8DCDA9B-7B10-43FF-A9A5-A3CE875B3660">
                           <p class="titleintable">表144-7 CREATE_RULE_SET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_RULE_SET过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.CREATE_RULE_SET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d760349e2395">参数</th>
                                    <th align="left" valign="bottom" width="72%" id="d760349e2398">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d760349e2403" headers="d760349e2395 ">
                                       <p><code class="codeph">rule_set_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d760349e2403 d760349e2398 ">
                                       <p>您正在创建的规则集的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_set_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中创建名为<code class="codeph">apply_rules</code>的规则集，请为此参数输入<code class="codeph">hr.apply_rules</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d760349e2431" headers="d760349e2395 ">
                                       <p><code class="codeph">evaluation_context</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d760349e2431 d760349e2398 ">
                                       <p><code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span>形式的可选评估上下文名称，它适用于规则集中未明确与评估上下文关联的所有规则。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d760349e2450" headers="d760349e2395 ">
                                       <p><code class="codeph">rule_set_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d760349e2450 d760349e2398 ">
                                       <p>规则集的可选描述</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D25CBBBE-D8DA-4119-AB7A-0DDA0CD97632__GUID-CF7C7628-7CB1-44BE-840E-96D1F6663843">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>是要创建的规则集的所有者，并具有<code class="codeph">CREATE_RULE_SET_OBJ</code>系统特权</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">CREATE</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code> _ <code class="codeph">SET</code>系统权限</p>
                           </li>
                        </ul>
                        <p>如果指定了评估上下文，则规则集所有者必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对评估上下文具有<code class="codeph">EXECUTE_ON_EVALUATION_CONTEXT</code>权限</p>
                           </li>
                           <li>
                              <p>具有<code class="codeph">EXECUTE_ANY_EVALUATION_CONTEXT</code>系统特权，评估上下文的所有者不得为<code class="codeph">SYS</code></p>
                           </li>
                           <li>
                              <p>成为评估上下文所有者</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS562"></a><a id="ARPLS67800"></a><a id="ARPLS67800"></a><a id="ARPLS562"></a><div class="props_rev_3"><a id="GUID-21803734-225E-4BAB-BB87-A68340DC391A" name="GUID-21803734-225E-4BAB-BB87-A68340DC391A"></a><h4 id="ARPLS-GUID-21803734-225E-4BAB-BB87-A68340DC391A" class="sect4"><span class="enumeration_section">144.3.7</span> DROP_EVALUATION_CONTEXT过程</h4>
                  <div>
                     <p>此过程将删除规则评估上下文。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-21803734-225E-4BAB-BB87-A68340DC391A__GUID-989B0D7F-A07D-4AA0-803C-8D51AE95193D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.DROP_EVALUATION_CONTEXT（evaluation_context_name IN VARCHAR2，强制IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21803734-225E-4BAB-BB87-A68340DC391A__GUID-9CBF95B1-F124-4F99-AF11-1FEA4EE6EC4B">参数</p>
                        <div class="tblformal" id="GUID-21803734-225E-4BAB-BB87-A68340DC391A__GUID-DE82A174-A45A-45FA-B1F2-BF41F73AA5E0">
                           <p class="titleintable">表144-8 DROP_EVALUATION_CONTEXT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_EVALUATION_CONTEXT过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.DROP_EVALUATION_CONTEXT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="35%" id="d760349e2620">参数</th>
                                    <th align="left" valign="bottom" width="65%" id="d760349e2623">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d760349e2628" headers="d760349e2620 ">
                                       <p><code class="codeph">evaluation_context_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d760349e2628 d760349e2623 ">
                                       <p>要删除的评估上下文的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span> 。
                                       </p>
                                       <p>例如，要在<code class="codeph">hr</code>模式中删除名为<code class="codeph">dept_eval_context</code>的评估上下文，请为此参数输入<code class="codeph">hr.dept_eval_context</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d760349e2658" headers="d760349e2620 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d760349e2658 d760349e2623 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将从使用它的所有规则和规则集中删除规则评估上下文。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code>且没有规则或规则集使用规则评估上下文，则该过程将删除规则评估上下文。
                                       </p>
                                       <p>如果<code class="codeph">FALSE</code>和一个或多个规则或规则集使用规则评估上下文，则该过程会引发异常。
                                       </p>
                                       <p><span class="bold">警告：</span>将<code class="codeph">force</code>设置为<code class="codeph">TRUE</code>会导致规则和规则集没有评估上下文。如果规则和规则集都没有评估上下文，并且<code class="codeph">ADD_RULE</code>过程没有为规则指定评估上下文，则无法评估规则。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21803734-225E-4BAB-BB87-A68340DC391A__GUID-243A01A8-C4CF-4191-AD61-5DAD96D46DC1">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>成为评估上下文的所有者</p>
                           </li>
                           <li>
                              <p>有<code class="codeph">DROP</code> _ <code class="codeph">ANY</code> _ <code class="codeph">EVALUATION</code> _ <code class="codeph">CONTEXT</code>系统权限</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS563"></a><a id="ARPLS67801"></a><a id="ARPLS67801"></a><a id="ARPLS563"></a><div class="props_rev_3"><a id="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C" name="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C"></a><h4 id="ARPLS-GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C" class="sect4"><span class="enumeration_section">144.3.8</span> DROP_RULE过程</h4>
                  <div>
                     <p>此过程会删除规则。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C__GUID-9666A060-6195-4640-A2A7-D41EE0C9C06A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.DROP_RULE（rule_name IN VARCHAR2，强制IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C__GUID-BD44B398-9FBA-4B9C-8790-12CF095BD241">参数</p>
                        <div class="tblformal" id="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C__GUID-8CF240D8-5EB5-45C9-95F2-6C8EFB6E5B5F">
                           <p class="titleintable">表144-9 DROP_RULE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_RULE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.DROP_RULE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e2830">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e2833">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2838" headers="d760349e2830 ">
                                       <p><code class="codeph">RULE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2838 d760349e2833 ">
                                       <p>要删除的规则的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中删除名为<code class="codeph">all_a</code>的规则，请为此参数输入<code class="codeph">hr.all_a</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e2866" headers="d760349e2830 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e2866 d760349e2833 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将从包含它的所有规则集中删除该规则。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code>且没有规则集包含规则，则该过程将删除该规则。
                                       </p>
                                       <p>如果<code class="codeph">FALSE</code>和一个或多个规则集包含规则，则该过程会引发异常。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C__GUID-D7BEE59A-0AD7-4E4E-BE10-7853BED91A23">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>成为规则的所有者</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">DROP</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code>系统特权</p>
                              <div class="infoboxnote" id="GUID-4F67D0CC-7E75-483D-BAC1-7FBAFE43721C__GUID-BE2CAAAF-D764-4D26-BAB3-2A0D77027C8B">
                                 <p class="notep1">注意：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>要从规则集中删除规则而不从数据库中删除规则，请使用<code class="codeph">REMOVE_RULE</code>过程。
                                       </p>
                                    </li>
                                    <li>
                                       <p>运行此过程时，不会删除与规则关联的规则评估上下文（如果有）。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS564"></a><a id="ARPLS67802"></a><a id="ARPLS67802"></a><a id="ARPLS564"></a><div class="props_rev_3"><a id="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435" name="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435"></a><h4 id="ARPLS-GUID-D2091FC3-63DF-4375-82B5-6D02E1377435" class="sect4"><span class="enumeration_section">144.3.9</span> DROP_RULE_SET过程</h4>
                  <div>
                     <p>此过程将删除规则集。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435__GUID-085DE380-F430-4350-BD08-2AF419A1207D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.DROP_RULE_SET（rule_set_name IN VARCHAR2，delete_rules IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435__GUID-128A73E7-C539-4703-BF56-FAA3C72D8CA2">参数</p>
                        <div class="tblformal" id="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435__GUID-8D5DE7BD-27C1-415D-AEDB-E06DB0192D67">
                           <p class="titleintable">表144-10 DROP_RULE_SET过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_RULE_SET过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.DROP_RULE_SET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e3033">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e3036">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3041" headers="d760349e3033 ">
                                       <p><code class="codeph">rule_set_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3041 d760349e3036 ">
                                       <p>要删除的规则集的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_set_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中删除名为<code class="codeph">apply_rules</code>的规则集，请为此参数输入<code class="codeph">hr.apply_rules</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3069" headers="d760349e3033 ">
                                       <p><code class="codeph">delete_rules</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3069 d760349e3036 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将删除规则集中的所有规则。如果规则集中的任何规则也在另一个规则集中，则不会删除这些规则。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会删除规则集中的规则。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435__GUID-C187409E-93A6-412A-86A7-F8FF9AB458B3">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有<code class="codeph">DROP</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code> _ <code class="codeph">SET</code>系统权限</p>
                           </li>
                           <li>
                              <p>成为规则集的所有者</p>
                              <div class="infoboxnote" id="GUID-D2091FC3-63DF-4375-82B5-6D02E1377435__GUID-A761F018-F44D-49AC-BCFA-95C1C2E18731">
                                 <p class="notep1">注意：</p>
                                 <p>运行此过程时，不会删除与规则集关联的规则评估上下文（如果有）。</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS330"></a><a id="ARPLS67803"></a><a id="ARPLS67804"></a><a id="ARPLS67803"></a><a id="ARPLS67804"></a><a id="ARPLS330"></a><div class="props_rev_3"><a id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6" name="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6"></a><h4 id="ARPLS-GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6" class="sect4"><span class="enumeration_section">144.3.10</span> GRANT_OBJECT_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程将指定对象的指定对象特权授予指定的用户或角色。如果用户拥有该对象，则会使用grant选项自动授予该用户对该对象的所有权限。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__GUID-FB9B34BF-8BA7-4E26-9CB1-FA0FF6F9880B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.GRANT_OBJECT_PRIVILEGE（特权IN BINARY_INTEGER，object_name IN VARCHAR2，被授权者IN VARCHAR2，grant_option IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__GUID-3149D770-5AC0-4CE0-92CC-575433D20FBD">参数</p>
                        <div class="tblformal" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__GUID-0262E6B5-3DF3-46EB-A40A-3488D1BB0F8F">
                           <p class="titleintable">表144-11 GRANT_OBJECT_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GRANT_OBJECT_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.GRANT_OBJECT_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e3229">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e3232">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3237" headers="d760349e3229 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3237 d760349e3232 ">
                                       <p>要授予对象上的被授予者的对象特权的名称。有关可用的对象权限，请参阅<span class="q">“ <a href="DBMS_RULE_ADM.html#GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__I997412">使用说明</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3249" headers="d760349e3229 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3249 d760349e3232 ">
                                       <p>要为其授予特权的对象的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">object_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中为名为<code class="codeph">apply_rules</code>的规则集授予权限，请为此参数输入<code class="codeph">hr.apply_rules</code> 。如果未指定架构，则当前用户是默认用户。该对象必须是现有规则，规则集或评估上下文。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3277" headers="d760349e3229 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3277 d760349e3232 ">
                                       <p>授予权限的用户或角色的名称。指定的用户不能是该对象的所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3285" headers="d760349e3229 ">
                                       <p><code class="codeph">grant_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3285 d760349e3232 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则指定的用户或授予指定权限的用户可以将此权限授予其他用户。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则指定的用户或授予指定权限的用户无法将此权限授予其他用户。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__I997412">
                        <p class="subhead3" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__GUID-5740FDCB-EB87-4673-84BE-46CC935F4EC4">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>是授予权限的对象的所有者</p>
                           </li>
                           <li>
                              <p>与授予选项授予的权限具有相同的权限</p>
                           </li>
                        </ul>
                        <p>此外，如果对象是规则集，则用户必须对具有grant选项的规则集中的所有规则具有<code class="codeph">EXECUTE</code>特权，或者必须拥有规则集中的规则。
                        </p>
                        <p><a href="DBMS_RULE_ADM.html#GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__CDEGCCAI" title="此表描述了GRANT_OBJECT_PRIVILEGE子程序使用的评估上下文，规则和规则集的对象权限。">表144-12</a>列出了对象权限。
                        </p>
                        <div class="tblformalwide" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__CDEGCCAI">
                           <p class="titleintable">表144-12评估上下文，规则和规则集的对象权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="评估上下文，规则和规则集的对象权限" width="100%" border="1" summary="This table describes Object Privileges for Evaluation Contexts, Rules, and Rule Sets used by the GRANT_OBJECT_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="58%" id="d760349e3333">特权</th>
                                    <th align="left" valign="bottom" width="42%" id="d760349e3336">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3341" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALL_ON_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3341 d760349e3336 ">
                                       <p>在另一个用户的模式中更改并执行特定的评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3349" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALL_ON_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3349 d760349e3336 ">
                                       <p>在另一个用户的架构中更改并执行特定规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3357" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALL_ON_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3357 d760349e3336 ">
                                       <p>在另一个用户的架构中更改并执行特定的规则集</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3365" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALTER_ON_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3365 d760349e3336 ">
                                       <p>更改另一个用户架构中的特定评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3373" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALTER_ON_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3373 d760349e3336 ">
                                       <p>更改另一个用户架构中的特定规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3381" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALTER_ON_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3381 d760349e3336 ">
                                       <p>更改另一个用户架构中的特定规则集</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3389" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.EXECUTE_ON_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3389 d760349e3336 ">
                                       <p>在另一个用户的架构中执行特定的评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3397" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.EXECUTE_ON_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3397 d760349e3336 ">
                                       <p>在另一个用户的架构中执行特定规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="58%" id="d760349e3405" headers="d760349e3333 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.EXECUTE_ON_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="42%" headers="d760349e3405 d760349e3336 ">
                                       <p>在另一个用户的架构中执行特定的规则集</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6__GUID-741F50E3-57C1-455F-9515-4EDC3FE42B56">例子</p>
                        <p>例如，要授予<code class="codeph">HR</code>用户在<code class="codeph">strmadmin</code>架构中更改名为<code class="codeph">hr_dml</code>的规则的权限，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_RULE_ADM.GRANT_OBJECT_PRIVILEGE（privilege =&gt; SYS.DBMS_RULE_ADM.ALTER_ON_RULE，object_name =&gt;'strmadmin.hr_dml'，grantee =&gt;'hr'，grant_option =&gt; FALSE）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS331"></a><a id="ARPLS67805"></a><a id="ARPLS67806"></a><a id="ARPLS67805"></a><a id="ARPLS67806"></a><a id="ARPLS331"></a><div class="props_rev_3"><a id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC" name="GUID-2F14077C-81B4-495D-8F9B-898F580999BC"></a><h4 id="ARPLS-GUID-2F14077C-81B4-495D-8F9B-898F580999BC" class="sect4"><span class="enumeration_section">144.3.11</span> GRANT_SYSTEM_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程将指定的系统特权授予指定的用户或角色。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC__GUID-E5F28543-FDC1-4C5F-99D5-4D2701FCB31B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE（特权IN BINARY_INTEGER，被授予者IN VARCHAR2，grant_option IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC__GUID-4ABC7A5E-3C23-44C8-9D26-DB2DE151226F">参数</p>
                        <div class="tblformal" id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC__GUID-D3C664E0-D1FC-4386-93C8-29D92637FFD6">
                           <p class="titleintable">表144-13 GRANT_SYSTEM_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GRANT_SYSTEM_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e3547">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e3550">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3555" headers="d760349e3547 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3555 d760349e3550 ">
                                       <p>授予被授予者的系统特权的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3563" headers="d760349e3547 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3563 d760349e3550 ">
                                       <p>授予权限的用户或角色的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e3571" headers="d760349e3547 ">
                                       <p><code class="codeph">grant_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e3571 d760349e3550 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则指定的用户或授予指定权限的用户可以将系统特权授予其他用户。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则指定的用户或授予指定权限的用户无法将系统特权授予其他用户。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC__GUID-F2D2ED63-16CE-4F2B-9C1B-2FBED85F3D38">使用说明</p>
                        <p><a href="DBMS_RULE_ADM.html#GUID-2F14077C-81B4-495D-8F9B-898F580999BC__CDEJCCAC" title="此表描述了（续）GRANT_SYSTEM_PRIVILEGE子程序使用的评估上下文，规则和规则集的系统权限。">表144-14</a>列出了系统特权。
                        </p>
                        <div class="tblformalwide" id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC__CDEJCCAC">
                           <p class="titleintable">表144-14评估上下文，规则和规则集的系统权限</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="评估上下文，规则和规则集的系统权限" width="100%" border="1" summary="This table describes the (Cont.) System Privileges for Evaluation Contexts, Rules, and Rule Sets used by GRANT_SYSTEM_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="59%" id="d760349e3605">特权</th>
                                    <th align="left" valign="bottom" width="41%" id="d760349e3608">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3613" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALTER_ANY_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3613 d760349e3608 ">
                                       <p>更改任何用户拥有的任何评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3621" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALTER_ANY_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3621 d760349e3608 ">
                                       <p>更改任何用户拥有的任何规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3629" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.ALTER_ANY_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3629 d760349e3608 ">
                                       <p>更改任何用户拥有的任何规则集</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3637" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.CREATE_ANY_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3637 d760349e3608 ">
                                       <p>在任何架构中创建新的评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3645" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.CREATE_EVALUATION_CONTEXT_OBJ</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3645 d760349e3608 ">
                                       <p>在被授权者的模式中创建新的评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3653" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.CREATE_ANY_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3653 d760349e3608 ">
                                       <p>在任何架构中创建新规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3661" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.CREATE_RULE_OBJ</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3661 d760349e3608 ">
                                       <p>在被授权者的架构中创建新规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3669" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.CREATE_ANY_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3669 d760349e3608 ">
                                       <p>在任何架构中创建新规则集</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3677" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.CREATE_RULE_SET_OBJ</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3677 d760349e3608 ">
                                       <p>在被授权者的架构中创建新规则集</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3685" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.DROP_ANY_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3685 d760349e3608 ">
                                       <p>删除任何架构中的任何评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3693" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.DROP_ANY_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3693 d760349e3608 ">
                                       <p>删除任何架构中的任何规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3702" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.DROP_ANY_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3702 d760349e3608 ">
                                       <p>删除任何架构中的任何规则集</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3710" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.EXECUTE_ANY_EVALUATION_CONTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3710 d760349e3608 ">
                                       <p>执行任何用户拥有的任何评估上下文</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3718" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.EXECUTE_ANY_RULE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3718 d760349e3608 ">
                                       <p>执行任何用户拥有的任何规则</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="59%" id="d760349e3726" headers="d760349e3605 ">
                                       <p><code class="codeph">SYS.DBMS_RULE_ADM.EXECUTE_ANY_RULE_SET</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d760349e3726 d760349e3608 ">
                                       <p>执行任何用户拥有的任何规则集</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>例如，要授予<code class="codeph">strmadmin</code>用户在任何模式中创建规则集的权限，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE（privilege =&gt; SYS.DBMS_RULE_ADM.CREATE_ANY_RULE_SET，grantee =&gt;'strmadmin'，grant_option =&gt; FALSE）;结束; /</pre><div class="infoboxnote" id="GUID-2F14077C-81B4-495D-8F9B-898F580999BC__GUID-4B063CF3-2FF7-4DF4-9B36-E32586EC6FCB">
                           <p class="notep1">注意：</p>
                           <p>当您对<code class="codeph">"ANY"</code>对象授予权限（例如， <code class="codeph">ALTER_ANY_RULE</code> ），并且初始化参数<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>设置为<code class="codeph">FALSE</code> ，您授予用户对除<code class="codeph">SYS</code>模式之外的所有模式中的该类型对象的访问权限。默认情况下，初始化参数<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>设置为<code class="codeph">FALSE</code> 。</p>
                           <p>如果要授予对<code class="codeph">SYS</code>模式中对象的访问权限，则可以在对象上显式授予对象权限。或者，您可以将<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>初始化参数设置为<code class="codeph">TRUE</code> 。然后，在<code class="codeph">"ANY"</code>对象上授予的权限允许访问任何模式，包括<code class="codeph">SYS</code> 。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS511"></a><a id="ARPLS67807"></a><a id="ARPLS67807"></a><a id="ARPLS511"></a><div class="props_rev_3"><a id="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8" name="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8"></a><h4 id="ARPLS-GUID-753514AB-0FA1-4946-B713-477ECECD9EE8" class="sect4"><span class="enumeration_section">144.3.12</span> REMOVE_RULE程序</h4>
                  <div>
                     <p>此过程从指定的规则集中删除指定的规则。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8__GUID-0EF3AE53-05BD-4B1B-9720-8E5B3AF41879">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.REMOVE_RULE（rule_name IN VARCHAR2，rule_set_name IN VARCHAR2，evaluation_context IN VARCHAR2 DEFAULT NULL，all_evaluation_contexts IN BOOLEAN DEFAULT FALSE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8__GUID-8E225B91-F44F-4054-B610-D8EA11278601">参数</p>
                        <div class="tblformal" id="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8__GUID-178A17E5-95CD-4D94-AC83-50828955DE18">
                           <p class="titleintable">表144-15 REMOVE_RULE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_RULE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.REMOVE_RULE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="35%" id="d760349e3896">参数</th>
                                    <th align="left" valign="bottom" width="65%" id="d760349e3899">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d760349e3904" headers="d760349e3896 ">
                                       <p><code class="codeph">RULE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d760349e3904 d760349e3899 ">
                                       <p>要从规则集中删除的规则的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_name</code></span> 。例如，要删除<code class="codeph">hr</code>模式中名为<code class="codeph">all_a</code>的规则，请为此参数输入<code class="codeph">hr.all_a</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d760349e3932" headers="d760349e3896 ">
                                       <p><code class="codeph">rule_set_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d760349e3932 d760349e3899 ">
                                       <p>要从中删除规则的规则集的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">rule_set_name</code></span> 。例如，要从<code class="codeph">hr</code>模式中名为<code class="codeph">apply_rules</code>的规则集中删除规则，请为此参数输入<code class="codeph">hr.apply_rules</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d760349e3960" headers="d760349e3896 ">
                                       <p><code class="codeph">evaluation_context_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d760349e3960 d760349e3899 ">
                                       <p>与要删除的规则关联的评估上下文的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">evaluation_context_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中指定名为<code class="codeph">dept_eval_context</code>的评估上下文，请为此参数输入<code class="codeph">hr.dept_eval_context</code> 。如果未指定架构，则当前用户是默认用户。
                                       </p>
                                       <p>如果使用<code class="codeph">ADD_RULE</code>过程将规则添加到规则集时要为要删除的规则指定评估上下文，则指定相同的评估上下文。如果您使用不同的评估上下文多次添加相同的规则，请使用要删除的评估上下文指定规则。如果指定与规则无关的评估上下文，则该过程会引发错误。
                                       </p>
                                       <p>如果在将规则添加到规则集时未指定评估上下文，请指定<code class="codeph">NULL</code> 。如果指定<code class="codeph">NULL</code>并且有一个或多个与规则关联的评估上下文，则该过程会引发错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="35%" id="d760349e4001" headers="d760349e3896 ">
                                       <p><code class="codeph">all_evaluation_contexts</code></p>
                                    </td>
                                    <td align="left" valign="top" width="65%" headers="d760349e4001 d760349e3899 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程将从规则集中删除包含其所有关联评估上下文的规则。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程仅删除具有指定评估上下文的规则。
                                       </p>
                                       <p>仅当同一规则多次添加到具有不同评估上下文的规则集时，此参数才相关。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8__GUID-FF12DA66-FBCC-4ED3-90E1-F03DFBE22AD2">使用说明</p>
                        <p>要运行此过程，用户必须满足以下至少一个要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对规则集具有<code class="codeph">ALTER_ON_RULE_SET</code>权限</p>
                           </li>
                           <li>
                              <p>拥有<code class="codeph">ALTER</code> _ <code class="codeph">ANY</code> _ <code class="codeph">RULE</code> _ <code class="codeph">SET</code>系统权限</p>
                           </li>
                           <li>
                              <p>成为规则集的所有者</p>
                              <div class="infoboxnote" id="GUID-753514AB-0FA1-4946-B713-477ECECD9EE8__GUID-6A0D8DE2-7A83-4C3F-B963-C5E1E3AF48E0">
                                 <p class="notep1">注意：</p>
                                 <p>此过程不会从数据库中删除规则。要从数据库中删除规则，请使用<code class="codeph">DROP_RULE</code>过程。
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS565"></a><a id="ARPLS67808"></a><a id="ARPLS67808"></a><a id="ARPLS565"></a><div class="props_rev_3"><a id="GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22" name="GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22"></a><h4 id="ARPLS-GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22" class="sect4"><span class="enumeration_section">144.3.13</span> REVOKE_OBJECT_PRIVILEGE程序</h4>
                  <div>
                     <p>此过程从指定的用户或角色撤消指定对象的指定对象特权。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22__GUID-B04C569B-C7BA-48E8-AC9C-E2D299D948DD">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.REVOKE_OBJECT_PRIVILEGE（特权IN BINARY_INTEGER，object_name IN VARCHAR2，revokee IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22__GUID-87B37F29-F423-4822-BB69-68BB69A0CA38">参数</p>
                        <div class="tblformal" id="GUID-D45337AA-081D-4638-88A4-5AD38F4F4F22__GUID-D27C75F4-0877-48D7-AF23-090C0BCEC135">
                           <p class="titleintable">表144-16 REVOKE_OBJECT_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REVOKE_OBJECT_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.REVOKE_OBJECT_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e4170">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e4173">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e4178" headers="d760349e4170 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e4178 d760349e4173 ">
                                       <p>要从revokee撤消的对象的对象特权名称。有关对象权限的列表，请参阅<a href="DBMS_RULE_ADM.html#GUID-3C0BDA24-BB48-41E0-9735-E05C415208B6" title="此过程将指定对象的指定对象特权授予指定的用户或角色。如果用户拥有该对象，则会使用grant选项自动授予该用户对该对象的所有权限。">GRANT_OBJECT_PRIVILEGE过程</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e4193" headers="d760349e4170 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e4193 d760349e4173 ">
                                       <p>要从revokee撤消权限的对象的名称，指定为<code class="codeph">[</code> <span class="italic"><code class="codeph">schema_name</code></span> <code class="codeph">.]</code> <span class="italic"><code class="codeph">object_name</code></span> 。例如，要在<code class="codeph">hr</code>模式中撤消名为<code class="codeph">apply_rules</code>的规则集的对象特权，请为此参数输入<code class="codeph">hr.apply_rules</code> 。如果未指定架构，则当前用户是默认用户。该对象必须是现有规则，规则集或评估上下文。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e4221" headers="d760349e4170 ">
                                       <p><code class="codeph">revokee</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e4221 d760349e4173 ">
                                       <p>撤消权限的用户或角色的名称。无法指定拥有该对象的用户。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS566"></a><a id="ARPLS67809"></a><a id="ARPLS67809"></a><a id="ARPLS566"></a><div class="props_rev_3"><a id="GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64" name="GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64"></a><h4 id="ARPLS-GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64" class="sect4"><span class="enumeration_section">144.3.14</span> REVOKE_SYSTEM_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程从指定的用户或角色撤消指定的系统特权。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64__GUID-CE8BD74E-D8C7-4D1F-BE6B-946C40AD3089">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_RULE_ADM.REVOKE_SYSTEM_PRIVILEGE（特权IN BINARY_INTEGER，撤销IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64__GUID-0D2D8351-BE05-4FE1-8043-89E6F1F0D417">参数</p>
                        <div class="tblformal" id="GUID-7A9B26C7-C4EC-4A32-A656-C92CE7985E64__GUID-88DCA4D2-5754-4959-8200-36E282D39047">
                           <p class="titleintable">表144-17 REVOKE_SYSTEM_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REVOKE_SYSTEM_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_RULE_ADM.REVOKE_SYSTEM_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d760349e4345">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d760349e4348">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e4353" headers="d760349e4345 ">
                                       <p><code class="codeph">特权</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e4353 d760349e4348 ">
                                       <p>从revokee撤消的系统特权的名称。有关系统特权的列表，请参阅<a href="DBMS_RULE_ADM.html#GUID-2F14077C-81B4-495D-8F9B-898F580999BC" title="此过程将指定的系统特权授予指定的用户或角色。">GRANT_SYSTEM_PRIVILEGE过程</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d760349e4368" headers="d760349e4345 ">
                                       <p><code class="codeph">revokee</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d760349e4368 d760349e4348 ">
                                       <p>撤消权限的用户或角色的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01103.DBMS_SPACE_ADMIN.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_SPACE_ADMIN package provides functionality for locally managed tablespaces."></meta>
      <meta name="description" content="The DBMS_SPACE_ADMIN package provides functionality for locally managed tablespaces."></meta>
      <title>DBMS_SPACE_ADMIN</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_SPACE_ADMIN package provides functionality for locally managed tablespaces."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_SPACE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_SPD.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SPACE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_SPD.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_SPACE_ADMIN</li>
            </ol>
            <a id="GUID-69488D9E-9BB2-4C56-994D-E9234D851DFF" name="GUID-69488D9E-9BB2-4C56-994D-E9234D851DFF"></a><a id="ARPLS057"></a><a id="ARPLS057"></a>
            
            <h2 id="ARPLS-GUID-69488D9E-9BB2-4C56-994D-E9234D851DFF" class="sect2"><span class="enumeration_chapter">153</span> DBMS_SPACE_ADMIN</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_SPACE_ADMIN</code>包为本地管理的表空间提供功能。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_SPACE_ADMIN.html#GUID-F2167FDD-F0F0-470E-947C-C270D27AC8E7" title="该包使用SYS权限运行;因此，任何有权执行包的用户都可以操作位图。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPACE_ADMIN.html#GUID-A756A567-E42E-4D16-BBB9-5C55374228DC" title="DBMS_SPACE_ADMIN包提供可用于指定参数值的常量。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPACE_ADMIN.html#GUID-03D26FCD-E8A7-4D8F-9532-38B084D0139C" title="在迁移SYSTEM表空间之前，必须满足某些条件。除冷备份外，这些条件由TABLESPACE_MIGRATE_TO_LOCAL过程强制执行。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SPACE_ADMIN.html#GUID-67CC1AF8-E3DB-4FB3-80FC-F8DBDEA325E1" title="该表列出了DBMS_SPACE_ADMIN子程序并简要描述了它们。">DBMS_SPACE_ADMIN子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-69488D9E-9BB2-4C56-994D-E9234D851DFF__GUID-520A1FAB-22CC-4C55-958E-056705446EC1">
                  <p class="notep1">也可以看看：</p>
                  <p>有关使用<code class="codeph">DBMS_SPACE_ADMIN</code>的示例和说明，请<code class="codeph">DBMS_SPACE_ADMIN</code> <a href="../admin/managing-tablespaces.html#ADMIN-GUID-1C162C60-6698-44F2-B2A9-F3E2D2958D88" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> 。</p>
               </div>
            </div><a id="ARPLS68118"></a><a id="ARPLS68118"></a><div class="props_rev_3"><a id="GUID-F2167FDD-F0F0-470E-947C-C270D27AC8E7" name="GUID-F2167FDD-F0F0-470E-947C-C270D27AC8E7"></a><h3 id="ARPLS-GUID-F2167FDD-F0F0-470E-947C-C270D27AC8E7" class="sect3"><span class="enumeration_section">153.1</span> DBMS_SPACE_ADMIN安全模型</h3>
               <div>
                  <p>该包使用<code class="codeph">SYS</code>权限运行;因此，任何有权执行包的用户都可以操作位图。
                  </p>
               </div>
            </div><a id="ARPLS68119"></a><a id="ARPLS68120"></a><a id="ARPLS68120"></a><a id="ARPLS68119"></a><div class="props_rev_3"><a id="GUID-A756A567-E42E-4D16-BBB9-5C55374228DC" name="GUID-A756A567-E42E-4D16-BBB9-5C55374228DC"></a><h3 id="ARPLS-GUID-A756A567-E42E-4D16-BBB9-5C55374228DC" class="sect3"><span class="enumeration_section">153.2</span> DBMS_SPACE_ADMIN常量</h3>
               <div>
                  <p><code class="codeph">DBMS_SPACE_ADMIN</code>包提供可用于指定参数值的常量。
                  </p>
                  <div class="tblformal" id="GUID-A756A567-E42E-4D16-BBB9-5C55374228DC__GUID-08051652-DDBA-49B0-8338-5AE303C7971B">
                     <p class="titleintable">表153-1 DBMS_SPACE_ADMIN常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPACE_ADMIN常量" width="100%" border="1" summary="This table describes Constants used by DBMS_SPACE_ADMIN subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d848569e341">不变</th>
                              <th align="left" valign="bottom" width="16%" id="d848569e344">类型</th>
                              <th align="left" valign="bottom" width="16%" id="d848569e347">值</th>
                              <th align="left" valign="bottom" width="38%" id="d848569e350">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e355" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_VERIFY_EXTENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e355 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e355 d848569e347 ">
                                 <p><code class="codeph">1</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e355 d848569e350 ">
                                 <p>验证段所拥有的空间是否在使用的位图中正确反映</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e371" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_VERIFY_EXTENTS_GLOBAL</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e371 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e371 d848569e347 ">
                                 <p><code class="codeph">2</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e371 d848569e350 ">
                                 <p>验证段所拥有的空间是否适当地反映在所使用的位图中，并且没有其他段声明它所使用的任何空间</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e387" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_MARK_CORRUPT</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e387 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e387 d848569e347 ">
                                 <p><code class="codeph">3</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e387 d848569e350 ">
                                 <p>将临时段标记为损坏，从而便于将其从字典中删除（无需空间回收）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e403" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_MARK_VALID</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e403 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e403 d848569e347 ">
                                 <p><code class="codeph">4</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e403 d848569e350 ">
                                 <p>将损坏的临时段标记为有效。当段范围映射或其他地方的损坏已经解决并且可以正常删除段时，它很有用。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e419" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_DUMP_EXTENT_MAP</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e419 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e419 d848569e347 ">
                                 <p><code class="codeph">五</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e419 d848569e350 ">
                                 <p>转储给定段的范围映射</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e435" headers="d848569e341 ">
                                 <p><code class="codeph">TABLESPACE_VERIFY_BITMAP</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e435 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e435 d848569e347 ">
                                 <p><code class="codeph">6</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e435 d848569e350 ">
                                 <p>使用该表空间中的段的范围映射验证表空间的位图，以确保一切都是一致的</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e451" headers="d848569e341 ">
                                 <p><code class="codeph">TABLESPACE_EXTENT_MAKE_FREE</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e451 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e451 d848569e347 ">
                                 <p><code class="codeph">7</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e451 d848569e350 ">
                                 <p>在位图中将块范围（范围）标记为空闲</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e467" headers="d848569e341 ">
                                 <p><code class="codeph">TABLESPACE_EXTENT_MAKE_USED</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e467 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e467 d848569e347 ">
                                 <p><code class="codeph">8</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e467 d848569e350 ">
                                 <p>标记位图中使用的块范围（范围）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e483" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_VERIFY</code> <code class="codeph">_BASIC</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e483 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e483 d848569e347 ">
                                 <p><code class="codeph">9</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e483 d848569e350 ">
                                 <p>执行基本元数据检查</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e501" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_VERIFY</code> <code class="codeph">_DEEP</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e501 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e501 d848569e347 ">
                                 <p><code class="codeph">10</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e501 d848569e350 ">
                                 <p>执行深度验证</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e519" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENT_VERIFY</code> <code class="codeph">_SPECIFIC</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e519 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e519 d848569e347 ">
                                 <p><code class="codeph">11</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e519 d848569e350 ">
                                 <p>对细分市场执行特定检查</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e538" headers="d848569e341 ">
                                 <p><code class="codeph">HWM_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e538 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e538 d848569e347 ">
                                 <p><code class="codeph">12</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e538 d848569e350 ">
                                 <p>检查高水位线（HWM）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e554" headers="d848569e341 ">
                                 <p><code class="codeph">BMB_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e554 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e554 d848569e347 ">
                                 <p><code class="codeph">13</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e554 d848569e350 ">
                                 <p>检查L1，L2和L3 BMB（位图块）之间的完整性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e570" headers="d848569e341 ">
                                 <p><code class="codeph">SEG_DICT_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e570 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e570 d848569e347 ">
                                 <p><code class="codeph">14</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e570 d848569e350 ">
                                 <p>检查段头与相应<code class="codeph">SEG</code>条目的一致性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e589" headers="d848569e341 ">
                                 <p><code class="codeph">EXTENT_TS_BITMAP_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e589 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e589 d848569e347 ">
                                 <p><code class="codeph">15</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e589 d848569e350 ">
                                 <p>检查是否使用了与范围映射对应的表空间位图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e605" headers="d848569e341 ">
                                 <p><code class="codeph">DB_BACKPOINTER_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e605 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e605 d848569e347 ">
                                 <p><code class="codeph">16</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e605 d848569e350 ">
                                 <p>检查L1 BMB，L2 BMB，L3 BMB和数据块是否指向同一父段</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e621" headers="d848569e341 ">
                                 <p><code class="codeph">EXTENT_SEGMENT_BITMAP_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e621 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e621 d848569e347 ">
                                 <p><code class="codeph">17</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e621 d848569e350 ">
                                 <p>检查位图块是否与范围映射一致</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e637" headers="d848569e341 ">
                                 <p><code class="codeph">BITMAPS_CHECK</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e637 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e637 d848569e347 ">
                                 <p><code class="codeph">18</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e637 d848569e350 ">
                                 <p>从数据块检查表示块的位图状态是否一致</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e653" headers="d848569e341 ">
                                 <p><code class="codeph">TS_VERIFY_BITMAPS</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e653 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e653 d848569e347 ">
                                 <p><code class="codeph">19</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e653 d848569e350 ">
                                 <p>检查表空间位图是否与属于该表空间的扩展区一致</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e669" headers="d848569e341 ">
                                 <p><code class="codeph">TS_VERIFY_DEEP</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e669 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e669 d848569e347 ">
                                 <p><code class="codeph">20</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e669 d848569e350 ">
                                 <p>使用<code class="codeph">DEEP</code>选项执行<code class="codeph">TS_VERIFY_BITMAPS</code>和<code class="codeph">TS_VERIFY_SEGMENTS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e694" headers="d848569e341 ">
                                 <p><code class="codeph">TS_VERIFY_SEGMENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e694 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e694 d848569e347 ">
                                 <p><code class="codeph">21</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e694 d848569e350 ">
                                 <p>对表空间中的所有段执行<code class="codeph">ASSM_SEGMENT_VERIFY</code> ，采用<code class="codeph">BASIC</code>或<code class="codeph">DEEP</code>选项</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d848569e719" headers="d848569e341 ">
                                 <p><code class="codeph">SEGMENTS_DUMP_BITMAP_SUMMARY</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e719 d848569e344 ">
                                 <p><code class="codeph">正</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d848569e719 d848569e347 ">
                                 <p><code class="codeph">27</code></p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d848569e719 d848569e350 ">
                                 <p>仅转储位图块摘要</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS68121"></a><a id="ARPLS68121"></a><div class="props_rev_3"><a id="GUID-03D26FCD-E8A7-4D8F-9532-38B084D0139C" name="GUID-03D26FCD-E8A7-4D8F-9532-38B084D0139C"></a><h3 id="ARPLS-GUID-03D26FCD-E8A7-4D8F-9532-38B084D0139C" class="sect3"><span class="enumeration_section">153.3</span> DBMS_SPACE_ADMIN操作说明</h3>
               <div>
                  <p>在迁移<code class="codeph">SYSTEM</code>表空间之前，必须满足某些条件。除冷备份外，这些条件由<code class="codeph">TABLESPACE_MIGRATE_TO_LOCAL</code>过程强制执行。
                  </p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库必须具有非<code class="codeph">SYSTEM</code>的默认临时表空间。</p>
                        </li>
                        <li>
                           <p>字典管理的表空间不能有任何回滚段。</p>
                        </li>
                        <li>
                           <p>本地管理的表空间必须至少具有一个联机回滚段。如果使用自动撤消管理，则撤消表空间必须在线。</p>
                        </li>
                        <li>
                           <p>除包含回滚段或撤消表空间的表空间外，所有表空间必须是只读的。</p>
                        </li>
                        <li>
                           <p>您必须具有数据库的冷备份。</p>
                        </li>
                        <li>
                           <p>系统必须处于受限模式。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS68122"></a><a id="ARPLS68123"></a><a id="ARPLS68123"></a><a id="ARPLS68122"></a><div class="props_rev_3"><a id="GUID-67CC1AF8-E3DB-4FB3-80FC-F8DBDEA325E1" name="GUID-67CC1AF8-E3DB-4FB3-80FC-F8DBDEA325E1"></a><h3 id="ARPLS-GUID-67CC1AF8-E3DB-4FB3-80FC-F8DBDEA325E1" class="sect3"><span class="enumeration_section">153.4</span> DBMS_SPACE_ADMIN子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_SPACE_ADMIN</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-67CC1AF8-E3DB-4FB3-80FC-F8DBDEA325E1__GUID-AE213AC3-8C46-4CFB-8072-5983E588D9EA">
                     <p class="titleintable">表153-2 DBMS_SPACE_ADMIN包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SPACE_ADMIN包子程序" width="100%" border="1" summary="This table lists the DBMS_SPACE_ADMIN subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d848569e950">子程序</th>
                              <th align="left" valign="bottom" width="61%" id="d848569e953">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e958" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471" title="给定段定义，该过程验证空间元数据块的基本一致性以及空间元数据和段数据块之间的一致性。此过程验证在自动段空间管理（ASSM）表空间中创建的段。">ASSM_SEGMENT_VERIFY程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e958 d848569e953 ">
                                 <p>验证在ASSM（自动段 - 空间管理）表空间中创建的段</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e970" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B" title="此过程验证在ASSM表空间中创建的所有段。每个段的验证执行空间元数据块的基本一致性检查以及空间元数据和段数据块之间的一致性检查。">ASSM_TABLESPACE_VERIFY程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e970 d848569e953 ">
                                 <p>验证ASSM表空间</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e982" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D" title="此过程从空表或表片段和依赖对象中删除段。">DROP_EMPTY_SEGMENTS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e982 d848569e953 ">
                                 <p>从空表或表片段和依赖对象中删除段</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e994" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-43CA2704-73B3-407B-93ED-3D359F2954FF" title="此过程返回DBMS_SPACE_ADMIN包的属性值。">GET_SEGADV_ATTRIB程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e994 d848569e953 ">
                                 <p>返回<code class="codeph">DBSM_SPACE_ADMIN</code>包的属性值</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1012" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0" title="此过程使用延迟段创建及其依赖对象实现表和表片段的段。">MATERIALIZE_DEFERRED_SEGMENTS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1012 d848569e953 ">
                                 <p>使用延迟段创建及其依赖对象实现表和表片段的段</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1024" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-998EE338-CD40-4F52-A8CE-C072D10EF766" title="此过程标记段损坏或有效，以便可以执行适当的错误恢复。">SEGMENT_CORRUPT程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1024 d848569e953 ">
                                 <p>标记该段损坏或有效，以便可以进行适当的错误恢复</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1036" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545" title="此过程会删除当前标记为损坏的段（不回收空间）。">SEGMENT_DROP_CORRUPT程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1036 d848569e953 ">
                                 <p>删除当前标记为已损坏的段（不回收空间）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1048" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D" title="此过程将特定段的段头和位图块转储到USER_DUMP_DEST初始化参数中指定的位置。">SEGMENT_DUMP程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1048 d848569e953 ">
                                 <p>转储给定段的段头和范围映射</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1063" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B" title="此过程检查段范围映射与表空间文件位图的一致性。">SEGMENT_VERIFY程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1063 d848569e953 ">
                                 <p>验证段的范围映射的一致性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1075" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5" title="此过程设置DBMS_SPACE_ADMIN包的属性值。">SET_SEGADV_ATTRIB过程</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1075 d848569e953 ">
                                 <p>设置/更改<code class="codeph">DBSM_SPACE_ADMIN</code>包的属性值</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1093" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-244977B8-36E5-4434-81B2-C82B83B902BD" title="此过程将适当的块范围（范围）标记为空闲或在位图中使用。它不能在SYSTEM表空间中使用。">TABLESPACE_FIX_BITMAPS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1093 d848569e953 ">
                                 <p>将适当的块范围（范围）标记为空闲或在位图中使用</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1109" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B" title="此过程修复了中止迁移的表空间中的段的状态。">TABLESPACE_FIX_SEGMENT_STATES过程</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1109 d848569e953 ">
                                 <p>修复了中止迁移的表空间中段的状态</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1122" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503" title="此过程将本地管理的表空间迁移到字典管理的表空间。">TABLESPACE_MIGRATE_FROM_LOCAL过程</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1122 d848569e953 ">
                                 <p>将本地管理的表空间迁移到字典管理的表空间</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1134" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-B634DAB0-15B5-4759-A95E-0A805153140B" title="此过程将表空间从字典管理的格式迁移到本地管理的格式。迁移到本地管理格式的表空间是用户管理的。">TABLESPACE_MIGRATE_TO_LOCAL过程</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1134 d848569e953 ">
                                 <p>将表空间从字典管理格式迁移到本地管理格式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1146" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586" title="此过程重建适当的位图。如果未指定位图块，则它将重建给定表空间的所有位图。">TABLESPACE_REBUILD_BITMAPS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1146 d848569e953 ">
                                 <p>重建适当的位图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1158" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88" title="此过程重建给定表空间的配额。">TABLESPACE_REBUILD_QUOTAS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1158 d848569e953 ">
                                 <p>重建给定表空间的配额</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1170" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840" title="此过程将位图重定位到指定的目标。">TABLESPACE_RELOCATE_BITMAPS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1170 d848569e953 ">
                                 <p>将位图重定位到指定的目标</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d848569e1182" headers="d848569e950 ">
                                 <p><a href="DBMS_SPACE_ADMIN.html#GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69" title="此过程验证表空间中的段的位图和范围映射是否已同步。">TABLESPACE_VERIFY程序</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d848569e1182 d848569e953 ">
                                 <p>验证表空间中的段的位图和范围映射是否已同步</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS68124"></a><a id="ARPLS68125"></a><a id="ARPLS68125"></a><a id="ARPLS68124"></a><div class="props_rev_3"><a id="GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471" name="GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471"></a><h4 id="ARPLS-GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471" class="sect4"><span class="enumeration_section">153.4.1</span> ASSM_SEGMENT_VERIFY程序</h4>
                  <div>
                     <p>给定段定义，该过程验证空间元数据块的基本一致性以及空间元数据和段数据块之间的一致性。此过程验证在自动段空间管理（ASSM）表空间中创建的段。</p>
                     <div class="section">
                        <p>但是，基本验证和深度验证之间存在差异：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>基本验证涉及空间元数据的一致性检查，例如1级，2级，3级位图块的完整性，段范围映射的一致性和1级位图范围。</p>
                           </li>
                           <li>
                              <p>深度验证涉及数据块和空间元数据块之间的一致性检查，例如数据块是否正确指向父级别1位图块，以及数据块中的空闲状态是否与对应于该级别1的位图块中的位的空闲状态一致。数据块。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471__GUID-BDA56074-0A1E-4EC1-ABB8-A91D523EAB6C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.ASSM_SEGMENT_VERIFY（segment_owner IN VARCHAR2，segment_name IN VARCHAR2，segment_type IN VARCHAR2，partition_name IN VARCHAR2，verify_option IN POSITIVE DEFAULT SEGMENT_VERIFY_BASIC，attrib in POSITIVE DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471__GUID-B7CDD345-E0A3-490D-8BFC-2266C95E313D">参数</p>
                        <div class="tblformal" id="GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471__GUID-9CE306F1-E7C7-4F13-9440-E4065874EAA5">
                           <p class="titleintable">表153-3 ASSM_SEGMENT_VERIFY过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ASSM_SEGMENT_VERIFY过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.ASSM_SEGMENT_VERIFY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e1313">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e1316">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1321" headers="d848569e1313 ">
                                       <p><code class="codeph">segment_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1321 d848569e1316 ">
                                       <p>拥有该细分的架构</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1329" headers="d848569e1313 ">
                                       <p><code class="codeph">SEGMENT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1329 d848569e1316 ">
                                       <p>要验证的段的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1337" headers="d848569e1313 ">
                                       <p><code class="codeph">段类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1337 d848569e1316 ">
                                       <p>段命名空间是<code class="codeph">TABLE</code> ， <code class="codeph">TABLE</code> <code class="codeph">PARTITION</code> ， <code class="codeph">TABLE</code> <code class="codeph">SUBPARTITION</code> ， <code class="codeph">INDEX</code> ， <code class="codeph">INDEX</code> <code class="codeph">PARTITION</code> ， <code class="codeph">INDEX</code> <code class="codeph">SUBPARTITION</code> ， <code class="codeph">LOB</code> ， <code class="codeph">LOB</code> <code class="codeph">PARTITION</code> ， <code class="codeph">LOB</code> <code class="codeph">SUBPARTITION</code> ， <code class="codeph">CLUSTER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1394" headers="d848569e1313 ">
                                       <p><code class="codeph">的partition_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1394 d848569e1316 ">
                                       <p>分区或子分区的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1402" headers="d848569e1313 ">
                                       <p><code class="codeph">verify_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1402 d848569e1316 ">
                                       <p>以下选项之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SEGMENT_VERIFY_BASIC</code> ：= 9。执行基本元数据检查（默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEGMENT_VERIFY_DEEP</code> ：= 10。执行深度验证</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEGMENT_VERIFY_SPECIFIC</code> ：= 11。对细分市场执行特定检查</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1426" headers="d848569e1313 ">
                                       <p><code class="codeph">ATTRIB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1426 d848569e1316 ">
                                       <p>当选项<code class="codeph">SEGMENT_VERIFY_SPECIFIC</code>指定为选项时， <code class="codeph">attrib</code>可以是以下之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">HWM_CHECK</code> ：= 12。检查高水位信息是否准确</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BMB_CHECK</code> ：= 13。检查空间位图块是否具有到段头的正确后向指针</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEG_DICT_CHECK</code> ：= 14。检查段的字典信息是否准确</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXTENT_TS_BITMAP_CHECK</code> ：= 15。检查扩展区映射是否与文件级位图一致</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DB_BACKPOINTER_CHECK</code> ：= 16。检查数据块是否具有到空间元数据块的正确后向指针</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXTENT_SEGMENT_BITMAP_CHECK</code> ：= 17。检查段中的范围映射是否与段中的位图匹配</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BITMAPS_CHECK</code> ：= 18。检查空间位图块是否准确</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8BEFC252-6758-43C3-BFE4-8C42E7C47471__GUID-1964A519-34E1-4228-B6C7-9C2D4DFD68EF">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用此过程需要<code class="codeph">SYSDBA</code>权限。
                              </p>
                           </li>
                           <li>
                              <p>您可以通过查询<code class="codeph">DBA_SEGMENTS</code>来确定相关文件＃和标头块＃（ <code class="codeph">header_relative_file</code>和<code class="codeph">header_block</code>参数）。</p>
                           </li>
                           <li>
                              <p>此过程输出名为<code class="codeph">sid_ora_</code> <span class="italic"><code class="codeph">process_ID</code></span>的转储文件。 <code class="codeph">trc</code>到<code class="codeph">USER_DUMP_DEST</code>初始化参数中指定的位置。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68126"></a><a id="ARPLS68127"></a><a id="ARPLS68127"></a><a id="ARPLS68126"></a><div class="props_rev_3"><a id="GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B" name="GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B"></a><h4 id="ARPLS-GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B" class="sect4"><span class="enumeration_section">153.4.2</span> ASSM_TABLESPACE_VERIFY过程</h4>
                  <div>
                     <p>此过程验证在ASSM表空间中创建的所有段。每个段的验证执行空间元数据块的基本一致性检查以及空间元数据和段数据块之间的一致性检查。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B__GUID-F502B147-ADA9-4F23-B1AE-616BA7D2D45A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.ASSM_TABLESPACE_VERIFY（tablespace_name IN VARCHAR2，ts_option IN POSITIVE，segment_option IN POSITIVE DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B__GUID-571590E0-04D2-470B-A399-FEA087252EA0">参数</p>
                        <div class="tblformal" id="GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B__GUID-E064FB33-43AB-4189-8BBC-008AB0F9FDB5">
                           <p class="titleintable">表153-4 ASSM_TABLESPACE_VERIFY过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ASSM_TABLESPACE_VERIFY过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.ASSM_TABLESPACE_VERIFY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e1623">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e1626">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1631" headers="d848569e1623 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1631 d848569e1626 ">
                                       <p>要验证的表空间的名称。表空间必须是ASSM表空间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1639" headers="d848569e1623 ">
                                       <p><code class="codeph">ts_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1639 d848569e1626 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TS_VERIFY_BITMAPS</code> ：= 19。位图将根据范围进行验证。这会检测标记为已使用或错误的位，并检测多个范围分配。根据文件<code class="codeph">file$</code>和控制文件验证文件元数据。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TS_VERIFY_DEEP</code> ：= 20。此选项用于验证文件位图以及对所有段执行检查。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TS_VERIFY_SEGMENTS</code> ：= 21。此选项用于在表空间中的所有段上调用<code class="codeph">SEGMENT_VERIFY</code> 。（可选）您可以编写一个脚本来查询表空间中的所有段并调用<code class="codeph">SEGMENT_VERIFY</code> 。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1670" headers="d848569e1623 ">
                                       <p><code class="codeph">segment_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1670 d848569e1626 ">
                                       <p>指定<code class="codeph">TS_VERIFY_SEGMENTS</code> ， <code class="codeph">segment_option</code>可以是以下之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SEGMENT_VERIFY_BASIC</code> ：= 9</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEGMENT_VERIFY_DEEP</code> ：= 10</p>
                                          </li>
                                       </ul>
                                       <p>指定<code class="codeph">TS_VERIFY_DEEP</code>或<code class="codeph">TS_VERIFY_BITMAPS</code>时， <code class="codeph">segment_option</code>值为<code class="codeph">NULL</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FEC2FEAB-BF7D-4E1D-9B86-EE4A4EAFA03B__GUID-7F01FBE8-86FD-4680-83DA-D4E7C69AC642">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用此过程需要<code class="codeph">SYSDBA</code>权限。
                              </p>
                           </li>
                           <li>
                              <p>此过程输出名为<code class="codeph">sid_ora_</code> <span class="italic"><code class="codeph">process_ID</code></span>的转储文件。 <code class="codeph">trc</code>到<code class="codeph">USER_DUMP_DEST</code>初始化参数中指定的位置。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73093"></a><a id="ARPLS73094"></a><a id="ARPLS73094"></a><a id="ARPLS73093"></a><div class="props_rev_3"><a id="GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D" name="GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D"></a><h4 id="ARPLS-GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D" class="sect4"><span class="enumeration_section">153.4.3</span> DROP_EMPTY_SEGMENTS过程</h4>
                  <div>
                     <p>此过程从空表或表片段和依赖对象中删除段。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D__GUID-00E1D9C9-6C96-4BEA-8ECB-35B476F9F0E4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.DROP_EMPTY_SEGMENTS（schema_name IN VARCHAR2 DEFAULT NULL，table_name IN VARCHAR2 DEFAULT NULL，partition_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D__GUID-D824D7F9-3A7A-47F6-A736-88833A8512E0">参数</p>
                        <div class="tblformal" id="GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D__GUID-1EEBC722-FD10-4F6F-B478-B42C8A068A6B">
                           <p class="titleintable">表153-5 DROP_EMPTY_SEGMENTS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_EMPTY_SEGMENTS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.DROP_EMPTY_SEGMENTS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e1843">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e1846">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1851" headers="d848569e1843 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1851 d848569e1846 ">
                                       <p>架构名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1859" headers="d848569e1843 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1859 d848569e1846 ">
                                       <p>表的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e1867" headers="d848569e1843 ">
                                       <p><code class="codeph">的partition_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e1867 d848569e1846 ">
                                       <p>分区名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B627605C-9909-40F5-AEBB-2C5EFED86E5D__GUID-8A7C7280-D1AA-4C93-A5F5-E5965FF5DDA1">使用说明</p>
                        <p>给定模式名称，此过程将扫描模式中的所有表。对于每个表，如果发现表或其任何片段为空，并且表满足某些条件（限制与<a href="../sqlrf/CREATE-TABLE.html#SQLRF54480" target="_blank">“延迟段创建的限制”中</a>描述的那些相同），则空表片段和关联的索引段被删除以及相应的LOB数据和索引段。后续插入会创建具有相同属性的段。
                        </p>
                        <p>可选：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>未指定<code class="codeph">schema_name</code> ，在这种情况下，将扫描属于所有模式的表</p>
                           </li>
                           <li>
                              <p>指定<code class="codeph">schema_name</code>和<code class="codeph">table_name</code>以对指定的表执行操作</p>
                           </li>
                           <li>
                              <p>提供了所有三个参数，将操作限制为分区及其依赖对象</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-43CA2704-73B3-407B-93ED-3D359F2954FF" name="GUID-43CA2704-73B3-407B-93ED-3D359F2954FF"></a><h4 id="ARPLS-GUID-43CA2704-73B3-407B-93ED-3D359F2954FF" class="sect4"><span class="enumeration_section">153.4.4</span> GET_SEGADV_ATTRIB过程</h4>
                  <div>
                     <p>此过程返回<code class="codeph">DBMS_SPACE_ADMIN</code>包的属性值。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-43CA2704-73B3-407B-93ED-3D359F2954FF__GUID-D1BAE20C-E47C-403E-ABA9-DA6513D344EB">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.GET_SEGADV_ATTRIB（属性IN NUMBER，值OUT NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-43CA2704-73B3-407B-93ED-3D359F2954FF__GUID-1F1311E9-E948-44F5-B22E-901A11B3B079">参数</p>
                        <div class="tblformal" id="GUID-43CA2704-73B3-407B-93ED-3D359F2954FF__GUID-D1867F86-4C79-482E-9824-72D05B494CBE">
                           <p class="titleintable">表153-6 GET_SEGADV_ATTRIB过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_SEGADV_ATTRIB过程参数" width="100%" border="1" summary="This table describes parameters used by the DBMS_SPACE_ADMIN.GET_SEGADV_ATTRIB subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e2013">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e2016">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2021" headers="d848569e2013 ">
                                       <p><code class="codeph">属性</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2021 d848569e2016 ">
                                       <p>支持的属性：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">COMP_ADVISOR</code> - 提供启用或禁用自动段顾问的压缩顾问的选项。默认情况下，为自动段顾问启用Compression Advisor。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMP_LOB</code> - 提供一个选项，用于在自动分段Advisor运行时为具有LOB列的表启用或禁用Compression Advisor。默认情况下，对具有LOB列的表启用Compression Advisor。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2040" headers="d848569e2013 ">
                                       <p><code class="codeph">值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2040 d848569e2016 ">
                                       <p>支持的值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ATTR_ENABLE：1</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ATTR_DISABLE：O</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73095"></a><a id="ARPLS73096"></a><a id="ARPLS73096"></a><a id="ARPLS73095"></a><div class="props_rev_3"><a id="GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0" name="GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0"></a><h4 id="ARPLS-GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0" class="sect4"><span class="enumeration_section">153.4.5</span> MATERIALIZE_DEFERRED_SEGMENTS过程</h4>
                  <div>
                     <p>此过程使用延迟段创建及其依赖对象实现表和表片段的段。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0__GUID-6CEAE273-F4B5-4946-9E5C-ED49990638F5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.MATERIALIZE_DEFERRED_SEGMENTS（schema_name IN VARCHAR2 DEFAULT NULL，table_name IN VARCHAR2 DEFAULT NULL，partition_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0__GUID-609DDFD1-3EFE-436A-A41E-4AFB522EB739">参数</p>
                        <div class="tblformal" id="GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0__GUID-85E919D6-782C-449F-A1E8-03B3F2631E48">
                           <p class="titleintable">表153-7 MATERIALIZE_DEFERRED_SEGMENTS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MATERIALIZE_DEFERRED_SEGMENTS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.MATERIALIZE_DEFERRED_SEGMENTS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e2167">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e2170">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2175" headers="d848569e2167 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2175 d848569e2170 ">
                                       <p>架构名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2183" headers="d848569e2167 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2183 d848569e2170 ">
                                       <p>表的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2191" headers="d848569e2167 ">
                                       <p><code class="codeph">的partition_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2191 d848569e2170 ">
                                       <p>分区名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6D689A2-FEFE-480D-BF1C-9959BF28D6A0__GUID-55CBFE43-E39B-4F1A-B68A-9F8BC8103FE6">使用说明</p>
                        <p>给定模式名称，此过程将扫描模式中的所有表。对于每个表，如果为表或其任何片段设置了延迟或延迟段属性，则会为这些片段及其依赖对象创建新段。</p>
                        <p>可选：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>未指定<code class="codeph">schema_name</code> ，在这种情况下，将扫描属于所有模式的表</p>
                           </li>
                           <li>
                              <p>指定<code class="codeph">schema_name</code>和<code class="codeph">table_name</code>以对指定的表执行操作</p>
                           </li>
                           <li>
                              <p>提供了所有三个参数，将操作限制为分区及其依赖对象</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68128"></a><a id="ARPLS68129"></a><a id="ARPLS68129"></a><a id="ARPLS68128"></a><div class="props_rev_3"><a id="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766" name="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766"></a><h4 id="ARPLS-GUID-998EE338-CD40-4F52-A8CE-C072D10EF766" class="sect4"><span class="enumeration_section">153.4.6</span> SEGMENT_CORRUPT程序</h4>
                  <div>
                     <p>此过程标记段损坏或有效，以便可以执行适当的错误恢复。</p>
                     <div class="section">
                        <p>它不能在<code class="codeph">SYSTEM</code>表空间中使用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766__GUID-17D79985-D174-485F-9078-BB5BFBC52529">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.SEGMENT_CORRUPT（tablespace_name IN VARCHAR2，header_relative_file IN POSITIVE，header_block IN NUMBER，corrupt_option IN POSITIVE DEFAULT SEGMENT_MARK_CORRUPT）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766__GUID-F67F10F0-EF77-4A79-B00F-925D8E4FB4DD">参数</p>
                        <div class="tblformal" id="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766__GUID-DABE3309-4FF0-459D-84D2-A476CF871F1B">
                           <p class="titleintable">表153-8 SEGMENT_CORRUPT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEGMENT_CORRUPT过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.SEGMENT_CORRUPT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e2340">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e2343">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2348" headers="d848569e2340 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2348 d848569e2343 ">
                                       <p>段所在的表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2356" headers="d848569e2340 ">
                                       <p><code class="codeph">header_relative_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2356 d848569e2343 ">
                                       <p>段头的相对文件号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2364" headers="d848569e2340 ">
                                       <p><code class="codeph">header_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2364 d848569e2343 ">
                                       <p>块头的块号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2372" headers="d848569e2340 ">
                                       <p><code class="codeph">corrupt_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2372 d848569e2343 ">
                                       <p><code class="codeph">SEGMENT_MARK_CORRUPT</code> （默认）或<code class="codeph">SEGMENT_MARK_VALID</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766__GUID-F4894F95-7D9B-4608-AE34-B241E445925F">使用Noes</p>
                        <p>您可以通过查询<code class="codeph">DBA_SEGMENTS</code>来确定段头块的相对文件号和块号（ <code class="codeph">header_relative_file</code>和<code class="codeph">header_block</code>参数）。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-998EE338-CD40-4F52-A8CE-C072D10EF766__GUID-DC0A0362-5FE6-4421-BA1B-B5DA45314190">例子</p>
                        <p>以下示例将该段标记为已损坏：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.SEGMENT_CORRUPT（'USERS'，4,33，DBMS_SPACE_ADMIN.SEGMENT_MARK_CORRUPT）;</pre><p>或者，下一个示例标记有效的损坏段：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.SEGMENT_CORRUPT（'USERS'，4,33，DBMS_SPACE_ADMIN.SEGMENT_MARK_VALID）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68130"></a><a id="ARPLS68131"></a><a id="ARPLS68131"></a><a id="ARPLS68130"></a><div class="props_rev_3"><a id="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545" name="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545"></a><h4 id="ARPLS-GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545" class="sect4"><span class="enumeration_section">153.4.7</span> SEGMENT_DROP_CORRUPT过程</h4>
                  <div>
                     <p>此过程会删除当前标记为损坏的段（不回收空间）。</p>
                     <div class="section">
                        <p>为此，必须将段标记为<span class="italic">临时</span>段。要将损坏的段标记为临时段，请在段上发出<code class="codeph">DROP</code>命令。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545__GUID-03635EEB-9682-4617-8321-600A95342736">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.SEGMENT_DROP_CORRUPT（tablespace_name IN VARCHAR2，header_relative_file IN POSITIVE，header_block IN NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545__GUID-C5405C63-08D6-43AD-B8C3-B3A42281E74D">参数</p>
                        <div class="tblformal" id="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545__GUID-3B18BB50-7FD6-4C10-956F-24528ECFF04D">
                           <p class="titleintable">表153-9 SEGMENT_DROP_CORRUPT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEGMENT_DROP_CORRUPT过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.SEGMENT_DROP_CORRUPT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e2527">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e2530">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2535" headers="d848569e2527 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2535 d848569e2530 ">
                                       <p>段所在的表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2543" headers="d848569e2527 ">
                                       <p><code class="codeph">header_relative_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2543 d848569e2530 ">
                                       <p>段头的相对文件号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2551" headers="d848569e2527 ">
                                       <p><code class="codeph">header_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2551 d848569e2530 ">
                                       <p>块头的块号</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545__GUID-C7F4C276-8221-430F-9F65-824D9C8BA257">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该段的空间未释放，必须使用<a href="DBMS_SPACE_ADMIN.html#GUID-244977B8-36E5-4434-81B2-C82B83B902BD" title="此过程将适当的块范围（范围）标记为空闲或在位图中使用。它不能在SYSTEM表空间中使用。">TABLESPACE_FIX_BITMAPS过程</a>或<a href="DBMS_SPACE_ADMIN.html#GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586" title="此过程重建适当的位图。如果未指定位图块，则它将重建给定表空间的所有位图。">TABLESPACE_REBUILD_BITMAPS过程</a>进行修复。
                              </p>
                           </li>
                           <li>
                              <p>该过程不能在<code class="codeph">SYSTEM</code>表空间上使用。
                              </p>
                           </li>
                           <li>
                              <p>您可以通过查询<code class="codeph">DBA_SEGMENTS</code>来确定段头块的相对文件号和块号（ <code class="codeph">header_relative_file</code>和<code class="codeph">header_block</code>参数）。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6D4A9-0216-4CD1-A110-8504CFAC1545__GUID-BD1FFAEB-9622-41AF-B6B3-AFBFFA34861E">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.SEGMENT_DROP_CORRUPT（'USERS'，4,33）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68132"></a><a id="ARPLS68133"></a><a id="ARPLS68133"></a><a id="ARPLS68132"></a><div class="props_rev_3"><a id="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D" name="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D"></a><h4 id="ARPLS-GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D" class="sect4"><span class="enumeration_section">153.4.8</span> SEGMENT_DUMP程序</h4>
                  <div>
                     <p>此过程将特定段的段头和位图块转储到<code class="codeph">USER_DUMP_DEST</code>初始化参数中指定的位置。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D__GUID-5929E300-6E97-4B1B-952F-DA0BEA6CDCC6">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.SEGMENT_DUMP（tablespace_name IN VARCHAR2，header_relative_file IN POSITIVE，header_block IN NUMBER，dump_option IN POSITIVE DEFAULT SEGMENT_DUMP_EXTENT_MAP）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D__GUID-B21C9F7F-204D-4A0A-A955-634B0B9B58E8">参数</p>
                        <div class="tblformal" id="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D__GUID-43FC8B3B-A802-4C40-AF70-F91A2AA7B2FE">
                           <p class="titleintable">表153-10 SEGMENT_DUMP过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEGMENT_DUMP过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.SEGMENT_DUMP subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e2719">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e2722">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2727" headers="d848569e2719 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2727 d848569e2722 ">
                                       <p>段所在的表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2735" headers="d848569e2719 ">
                                       <p><code class="codeph">header_relative_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2735 d848569e2722 ">
                                       <p>段头的相对文件号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2743" headers="d848569e2719 ">
                                       <p><code class="codeph">header_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2743 d848569e2722 ">
                                       <p>块头的块号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2751" headers="d848569e2719 ">
                                       <p><code class="codeph">dump_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2751 d848569e2722 ">
                                       <p>以下选项之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SEGMENT_DUMP_EXTENT_MAP</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEGMENT_DUMP_BITMAP_SUMMARY</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D__GUID-CC44A25B-A404-4C83-B6DF-197001C7CD21">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果将<code class="codeph">SEGMENT_DUMP_BITMAP_SUMMARY</code>作为<code class="codeph">dump_option</code>参数传递，则可以生成略微缩写的转储，其中包括段头和位图块摘要，而不包含每个块的无百分比状态。
                              </p>
                           </li>
                           <li>
                              <p>您可以通过查询<code class="codeph">DBA_SEGMENTS</code>来确定段头块的相对文件号和块号（ <code class="codeph">header_relative_file</code>和<code class="codeph">header_block</code>参数）。 <code class="codeph">HEADER_FILE</code> 。如果<code class="codeph">HEADER_FILE</code>大于1023，然后使用<code class="codeph">DBA_DATA_FILES</code> 。 <code class="codeph">RELATIVE_FNO</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6FDAF184-3689-4803-88C6-24C703F2EF6D__GUID-474C693D-EDFD-4531-9625-D64297DDBD02">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.SEGMENT_DUMP（'USERS'，4,33）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68134"></a><a id="ARPLS68135"></a><a id="ARPLS68135"></a><a id="ARPLS68134"></a><div class="props_rev_3"><a id="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B" name="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B"></a><h4 id="ARPLS-GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B" class="sect4"><span class="enumeration_section">153.4.9</span> SEGMENT_VERIFY程序</h4>
                  <div>
                     <p>此过程检查段范围映射与表空间文件位图的一致性。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B__GUID-3C28C223-2AAC-4161-90C7-EEA217A9A113">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.SEGMENT_VERIFY（tablespace_name IN VARCHAR2，header_relative_file IN POSITIVE，header_block IN NUMBER，verify_option IN POSITIVE DEFAULT SEGMENT_VERIFY_EXTENTS）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B__GUID-ABB1C6D6-8993-4DB3-A3CC-08DFACD8925F">参数</p>
                        <div class="tblformal" id="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B__GUID-066B8F70-0D8F-4381-B06E-C31A15B09661">
                           <p class="titleintable">表153-11 SEGMENT_VERIFY过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEGMENT_VERIFY过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.SEGMENT_VERIFY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e2920">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e2923">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2928" headers="d848569e2920 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2928 d848569e2923 ">
                                       <p>段所在的表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2936" headers="d848569e2920 ">
                                       <p><code class="codeph">header_relative_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2936 d848569e2923 ">
                                       <p>段头的相对文件号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2944" headers="d848569e2920 ">
                                       <p><code class="codeph">header_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2944 d848569e2923 ">
                                       <p>块头的块号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e2952" headers="d848569e2920 ">
                                       <p><code class="codeph">verify_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e2952 d848569e2923 ">
                                       <p>要做什么样的检查： <code class="codeph">SEGMENT_VERIFY_EXTENTS</code>或<code class="codeph">SEGMENT_VERIFY_EXTENTS_GLOBAL</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B__GUID-01A1BD42-CF24-4283-AE66-BEB683000A43">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在跟踪文件中，异常被输出为块范围，位图块，位图块范围，异常信息，用于发现具有不正确空间表示的所有块范围。报告的问题类型是不被认为是免费的自由空间，被认为是免费的使用空间，以及被多个部分考虑使用的相同空间。</p>
                           </li>
                           <li>
                              <p>您可以通过查询<code class="codeph">DBA_SEGMENTS</code>来确定段头块的相对文件号和块号（ <code class="codeph">header_relative_file</code>和<code class="codeph">header_block</code>参数）。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE186D4F-868D-4878-B3A9-FEBB80EB350B__GUID-7BFDE213-BD6B-412B-B028-92A3C421AAAE">例子</p>
                        <p>以下示例验证具有相对文件号4（块号33）的段头的段是否具有其扩展区映射和位图同步。</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.SEGMENT_VERIFY（'USERS'，4,33，DBMS_SPACE_ADMIN.SEGMENT_VERIFY_EXTENTS）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5" name="GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5"></a><h4 id="ARPLS-GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5" class="sect4"><span class="enumeration_section">153.4.10</span> SET_SEGADV_ATTRIB过程</h4>
                  <div>
                     <p>此过程设置<code class="codeph">DBMS_SPACE_ADMIN</code>包的属性值。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5__GUID-BD29998F-89CF-4E9F-86DD-95B240C75B88">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.SET_SEGADV_ATTRIB（属性IN NUMBER，值IN NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5__GUID-29FA64BC-6099-4064-B55D-38D7F64EFB12">参数</p>
                        <div class="tblformal" id="GUID-BCD2412D-8820-434F-BFD8-AD00EA6E8BB5__GUID-F3992EA2-23E7-4D7C-9F91-9F48CD38C9D6">
                           <p class="titleintable">表153-12 SET_SEGADV_ATTRIB过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_SEGADV_ATTRIB过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.SET_SEGADV_ATTRIB subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e3099">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e3102">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3107" headers="d848569e3099 ">
                                       <p><code class="codeph">属性</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3107 d848569e3102 ">
                                       <p>支持的属性：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">COMP_ADVISOR</code> - 提供启用或禁用自动段顾问的压缩顾问的选项。默认情况下，为自动段顾问启用Compression Advisor。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMP_LOB</code> - 提供一个选项，用于在自动分段Advisor运行时为具有LOB列的表启用或禁用Compression Advisor。默认情况下，对具有LOB列的表启用Compression Advisor。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3126" headers="d848569e3099 ">
                                       <p><code class="codeph">值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3126 d848569e3102 ">
                                       <p>支持的值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ATTR_ENABLE：1</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ATTR_DISABLE：O</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68136"></a><a id="ARPLS68137"></a><a id="ARPLS68137"></a><a id="ARPLS68136"></a><div class="props_rev_3"><a id="GUID-244977B8-36E5-4434-81B2-C82B83B902BD" name="GUID-244977B8-36E5-4434-81B2-C82B83B902BD"></a><h4 id="ARPLS-GUID-244977B8-36E5-4434-81B2-C82B83B902BD" class="sect4"><span class="enumeration_section">153.4.11</span> TABLESPACE_FIX_BITMAPS过程</h4>
                  <div>
                     <p>此过程将适当的块范围（范围）标记为空闲或在位图中使用。它不能在<code class="codeph">SYSTEM</code>表空间中使用。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-244977B8-36E5-4434-81B2-C82B83B902BD__GUID-227C713B-34B2-49F3-9E18-28F791114C53">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_FIX_BITMAPS（tablespace_name IN VARCHAR2，dbarange_relative_file IN POSITIVE，dbarange_begin_block IN POSITIVE，dbarange_end_block IN POSITIVE，fix_option IN POSITIVE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-244977B8-36E5-4434-81B2-C82B83B902BD__GUID-BFA13027-3434-4914-A172-7297F3A899BC">参数</p>
                        <div class="tblformal" id="GUID-244977B8-36E5-4434-81B2-C82B83B902BD__GUID-F56DD070-138A-47FB-BFBE-2D494749057C">
                           <p class="titleintable">表153-13 TABLESPACE_FIX_BITMAPS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_FIX_BITMAPS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_FIX_BITMAPS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e3256">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e3259">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3264" headers="d848569e3256 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3264 d848569e3259 ">
                                       <p>表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3272" headers="d848569e3256 ">
                                       <p><code class="codeph">dbarange_relative_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3272 d848569e3259 ">
                                       <p>块范围的相对文件数（范围）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3280" headers="d848569e3256 ">
                                       <p><code class="codeph">dbarange_begin_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3280 d848569e3259 ">
                                       <p>程度开始的块数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3288" headers="d848569e3256 ">
                                       <p><code class="codeph">dbarange_end_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3288 d848569e3259 ">
                                       <p>范围结束的块编号（包括）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3296" headers="d848569e3256 ">
                                       <p><code class="codeph">fix_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3296 d848569e3259 ">
                                       <p>以下选项之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TABLESPACE_EXTENT_MAKE_FREE</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TABLESPACE_EXTENT_MAKE_USED</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-244977B8-36E5-4434-81B2-C82B83B902BD__GUID-9DBDC919-AF71-4D34-A4F7-06BDD14C1C9D">例子</p>
                        <p>以下示例为相对文件编号4的51个块标记位，从块编号33开始到83结束，如位图中的<code class="codeph">USED</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_FIX_BITMAPS（'USERS'，4,33,83，DBMS_SPACE_ADMIN.EXTENT_MAKE_USED）;</pre><p>或者，指定<code class="codeph">TABLESPACE_EXTENT_MAKE_FREE</code>选项可在位图中标记位。<code class="codeph">BEGIN</code>和<code class="codeph">END</code>块必须在范围边界并且是范围倍数;否则，会引发错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68138"></a><a id="ARPLS68139"></a><a id="ARPLS68139"></a><a id="ARPLS68138"></a><div class="props_rev_3"><a id="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B" name="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B"></a><h4 id="ARPLS-GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B" class="sect4"><span class="enumeration_section">153.4.12</span> TABLESPACE_FIX_SEGMENT_STATES过程</h4>
                  <div>
                     <p>此过程修复了中止迁移的表空间中的段的状态。</p>
                     <div class="section">
                        <p>在表空间迁移到本地或从本地迁移期间，段处于临时状态。如果中止迁移，则在设置事件10906时，SMON会更正段状态。具有处于这种瞬态状态的段的数据库不能降级。该过程可用于修复此类段的状态。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B__GUID-05599495-C967-4DFA-B1CB-7725E2A5ABB3">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_FIX_SEGMENT_STATES（tablespace_name IN VARCHAR）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B__GUID-479FDADE-03E1-4087-B8FC-AE05DB84805C">参数</p>
                        <div class="tblformal" id="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B__GUID-82C7FE49-5947-44A5-8369-99A084741FF8">
                           <p class="titleintable">表153-14 TABLESPACE_FIX_SEGMENT_STATES过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_FIX_SEGMENT_STATES过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_FIX_SEGMENT_STATES subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d848569e3446">参数名称</th>
                                    <th align="left" valign="bottom" width="74%" id="d848569e3449">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d848569e3454" headers="d848569e3446 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d848569e3454 d848569e3449 ">
                                       <p>必须修复其段的表空间的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B__GUID-2900D6EE-F0AB-4407-91CE-36A8A7417122">使用说明</p>
                        <p>调用此过程时，表空间必须保持在线并读/写。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87FE374A-D508-48F6-8F32-6997F4A0B23B__GUID-43FC2530-C776-4C1D-9CFF-2638A57CBA9B">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_FIX_SEGMENT_STATES（'TS1'）</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68140"></a><a id="ARPLS68141"></a><a id="ARPLS68141"></a><a id="ARPLS68140"></a><div class="props_rev_3"><a id="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503" name="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503"></a><h4 id="ARPLS-GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503" class="sect4"><span class="enumeration_section">153.4.13</span> TABLESPACE_MIGRATE_FROM_LOCAL过程</h4>
                  <div>
                     <p>此过程将本地管理的表空间迁移到字典管理的表空间。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503__GUID-03074D39-012D-4E48-B246-E4620E836FB7">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_MIGRATE_FROM_LOCAL（tablespace_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503__GUID-A3C5071D-12E0-46FB-BAEE-478523833061">参数</p>
                        <div class="tblformal" id="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503__GUID-76AE43AD-AADA-46FC-AD19-7821766A6C10">
                           <p class="titleintable">表153-15 TABLESPACE_MIGRATE_FROM_LOCAL过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_MIGRATE_FROM_LOCAL过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_MIGRATE_FROM_LOCAL subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="38%" id="d848569e3581">参数</th>
                                    <th align="left" valign="bottom" width="62%" id="d848569e3584">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="38%" id="d848569e3589" headers="d848569e3581 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d848569e3589 d848569e3584 ">
                                       <p>表空间的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503__GUID-9A44B6CE-C7AB-4EAE-884D-C13F2B53CBDE">使用说明</p>
                        <p>在迁移期间，表空间必须保持在线并进行读/写。不支持迁移临时表空间和迁移<code class="codeph">SYSTEM</code>表空间。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC56047A-62AA-4055-BA7F-0BE2FF4C1503__GUID-A6ECB590-18B7-4491-BE47-5AB7A2E4C69F">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_MIGRATE_FROM_LOCAL（'USERS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68142"></a><a id="ARPLS68143"></a><a id="ARPLS68143"></a><a id="ARPLS68142"></a><div class="props_rev_3"><a id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B" name="GUID-B634DAB0-15B5-4759-A95E-0A805153140B"></a><h4 id="ARPLS-GUID-B634DAB0-15B5-4759-A95E-0A805153140B" class="sect4"><span class="enumeration_section">153.4.14</span> TABLESPACE_MIGRATE_TO_LOCAL过程</h4>
                  <div>
                     <p>此过程将表空间从字典管理的格式迁移到本地管理的格式。迁移到本地管理格式的表空间是用户管理的。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B__GUID-613618E7-45EB-469F-B1E9-E66B41139023">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_MIGRATE_TO_LOCAL（tablespace_name IN VARCHAR2，unit_size IN POSITIVE DEFAULT NULL，rfno IN POSITIVE DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B__GUID-A064E105-29E0-41C5-9711-124024809C4E">参数</p>
                        <div class="tblformal" id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B__GUID-29C27ADE-B3D9-4B7F-ABAB-7D7D5A09F898">
                           <p class="titleintable">表153-16 TABLESPACE_MIGRATE_TO_LOCAL过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_MIGRATE_TO_LOCAL过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_MIGRATE_TO_LOCAL subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d848569e3720">参数名称</th>
                                    <th align="left" valign="bottom" width="74%" id="d848569e3723">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d848569e3728" headers="d848569e3720 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d848569e3728 d848569e3723 ">
                                       <p>要迁移的表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d848569e3736" headers="d848569e3720 ">
                                       <p><code class="codeph">unit_size</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d848569e3736 d848569e3723 ">
                                       <p>在块数指定的表空间中的位图单元大小（可以分配的最小可用空间块的大小）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d848569e3744" headers="d848569e3720 ">
                                       <p><code class="codeph">rfno</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d848569e3744 d848569e3723 ">
                                       <p>放置位图块的文件的相对文件号</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B__GUID-B1972A4C-7758-4BCB-884A-5DF5972741CA">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在迁移<code class="codeph">SYSTEM</code>表空间之前，将要在读/写模式下使用的任何字典管理的表空间迁移到本地管理。迁移<code class="codeph">SYSTEM</code>表空间后，您无法将字典管理的表空间更改为读/写。
                              </p>
                              <div class="infoboxnotealso" id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B__GUID-B0FA4313-83EE-40A5-8634-B9222E67882D">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="../admin/managing-tablespaces.html#ADMIN11393" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></p>
                              </div>
                           </li>
                           <li>
                              <p>在迁移期间，表空间必须保持在线并进行读/写。请注意，无法迁移临时表空间。</p>
                           </li>
                           <li>
                              <p>可以选择指定分配单元。默认值由系统根据表空间的所有扩展区（已使用或已用）的最高公约数计算。根据表空间的<code class="codeph">MINIMUM EXTENT</code>进一步修剪此数字（如果未指定<code class="codeph">MINIMUM EXTENT</code>则为5）。因此，计算值不会大于表空间的<code class="codeph">MINIMUM EXTENT</code> 。GCD计算中忽略每个文件中的最后一个空闲范围。如果指定单位大小，则它必须是系统计算的<code class="codeph">unit_size</code>的因子;否则返回错误消息。
                              </p>
                           </li>
                           <li>
                              <p>Relative File Number参数用于将位图放在所需的文件中。如果在文件中找不到空格，则会发出错误。指定的数据文件必须是要迁移的表空间的一部分。如果未指定数据流，则系统选择放置初始位图块的数据流。如果找不到初始位图的空间，则会引发错误。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B634DAB0-15B5-4759-A95E-0A805153140B__GUID-0694807B-0234-4426-8CE9-558FFACDDBFA">例子</p>
                        <p>要以2KB块大小迁移表空间“TS1”，最小扩展区大小为1MB：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_MIGRATE_TO_LOCAL（'TS1'，512,2）;</pre><p>位图放在文件中，相对文件号为2。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68144"></a><a id="ARPLS68145"></a><a id="ARPLS68145"></a><a id="ARPLS68144"></a><div class="props_rev_3"><a id="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586" name="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586"></a><h4 id="ARPLS-GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586" class="sect4"><span class="enumeration_section">153.4.15</span> TABLESPACE_REBUILD_BITMAPS过程</h4>
                  <div>
                     <p>此过程重建适当的位图。如果未指定位图块，则它将重建给定表空间的所有位图。</p>
                     <div class="section">
                        <p>该过程不能在<code class="codeph">SYSTEM</code>表空间上使用。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586__GUID-17E7165B-9B67-47CC-B5C4-64375EEEBFD3">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_REBUILD_BITMAPS（tablespace_name IN VARCHAR2，bitmap_relative_file IN POSITIVE DEFAULT NULL，bitmap_block IN POSITIVE DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586__GUID-D71DA963-5074-48AE-A3D5-F4DCCFE8332D">参数</p>
                        <div class="tblformal" id="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586__GUID-63FF701C-ABCD-42A2-8E45-A4FBE9AC9E1C">
                           <p class="titleintable">表153-17 TABLESPACE_REBUILD_BITMAPS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_REBUILD_BITMAPS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_REBUILD_BITMAPS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e3916">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e3919">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3924" headers="d848569e3916 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3924 d848569e3919 ">
                                       <p>表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3932" headers="d848569e3916 ">
                                       <p><code class="codeph">bitmap_relative_file</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3932 d848569e3919 ">
                                       <p>要重建的位图块的相对文件号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e3940" headers="d848569e3916 ">
                                       <p><code class="codeph">bitmap_block</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e3940 d848569e3919 ">
                                       <p>要重建的位图块的块编号</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586__GUID-910D2BEE-3BD9-479D-9E70-D900E3163618">使用说明</p>
                        <p>仅支持完全重建。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3981E4C7-8F42-42EE-8CA9-9EB77B79A586__GUID-980BA0E9-B878-4578-A992-27A47916C2E1">例子</p>
                        <p>以下示例为<code class="codeph">USERS</code>表空间中的所有文件重建位图。
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_REBUILD_BITMAPS（'USERS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68146"></a><a id="ARPLS68147"></a><a id="ARPLS68147"></a><a id="ARPLS68146"></a><div class="props_rev_3"><a id="GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88" name="GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88"></a><h4 id="ARPLS-GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88" class="sect4"><span class="enumeration_section">153.4.16</span> TABLESPACE_REBUILD_QUOTAS过程</h4>
                  <div>
                     <p>此过程重建给定表空间的配额。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88__GUID-93F1E121-CDC5-467C-87AC-624550D02D79">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_REBUILD_QUOTAS（tablespace_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88__GUID-B6D5EC78-A48E-45FF-A295-2BFA5D3BDB2F">参数</p>
                        <div class="tblformal" id="GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88__GUID-5B4C9E57-B9DE-40FE-A044-6D3EF9DE2E33">
                           <p class="titleintable">表153-18 TABLESPACE_REBUILD_QUOTAS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_REBUILD_QUOTAS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_REBUILD_QUOTAS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e4072">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e4075">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e4080" headers="d848569e4072 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e4080 d848569e4075 ">
                                       <p>表空间的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A3772BB-1FB8-4D03-BB9C-C01A80947E88__GUID-587F3188-FAD3-4E85-9992-CE897A1A5510">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_REBUILD_QUOTAS（'USERS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68148"></a><a id="ARPLS68149"></a><a id="ARPLS68149"></a><a id="ARPLS68148"></a><div class="props_rev_3"><a id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840" name="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840"></a><h4 id="ARPLS-GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840" class="sect4"><span class="enumeration_section">153.4.17</span> TABLESPACE_RELOCATE_BITMAPS过程</h4>
                  <div>
                     <p>此过程将位图重定位到指定的目标。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840__GUID-55C330EE-65FB-4BAE-9452-03CDC2F5F21A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_RELOCATE_BITMAPS（tablespace_name IN VARCHAR2，filno IN POSITIVE，blkno IN POSITIVE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840__GUID-51116D12-364C-4EB6-A4E1-8617577CE894">参数</p>
                        <div class="tblformal" id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840__GUID-0FC6995D-C177-4E85-9811-682AF3F42210">
                           <p class="titleintable">表153-19 TABLESPACE_RELOCATE_BITMAPS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_RELOCATE_BITMAPS过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_RELOCATE_BITMAPS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d848569e4203">参数名称</th>
                                    <th align="left" valign="bottom" width="72%" id="d848569e4206">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d848569e4211" headers="d848569e4203 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d848569e4211 d848569e4206 ">
                                       <p>表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d848569e4219" headers="d848569e4203 ">
                                       <p><code class="codeph">filno</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d848569e4219 d848569e4206 ">
                                       <p>目标文件的相对文件号</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d848569e4227" headers="d848569e4203 ">
                                       <p><code class="codeph">BLKNO</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d848569e4227 d848569e4206 ">
                                       <p>块目标范围的编号</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840__GUID-A9DA603C-F252-45C8-9D02-2FB88FEBBD92">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将表空间从字典管理迁移到本地管理格式可能会导致创建包含位图块的<code class="codeph">SPACE HEADER</code>段。<code class="codeph">SPACE</code> <code class="codeph">HEADER</code>段被视为用户数据。如果在空间标题段或其下显式调整文件大小，则会发出错误。使用<code class="codeph">TABLESPACE_RELOCATE_BITMAPS</code>命令将控制信息移动到其他目标，然后调整文件大小。
                              </p>
                           </li>
                           <li>
                              <p>此过程不能在<code class="codeph">SYSTEM</code>表空间上使用。
                              </p>
                           </li>
                           <li>
                              <p>在重定位位图期间，表空间必须保持在线并读/写。这只能在迁移的本地管理的表空间上完成。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840__GUID-03684029-C33F-4FF0-AD3E-387A61E0C479">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_RELOCATE_BITMAPS（'TS1'，3,4）;</pre><p>将位图移动到文件3，块4。</p>
                        <div class="infoboxnote" id="GUID-86A97D76-BF3F-49D5-BD99-B9ADAB0CC840__GUID-8298207B-A728-43F8-9E2C-26EE30811379">
                           <p class="notep1">注意：</p>
                           <p>源地址和目标地址不得重叠。目标块编号向下舍入到单位边界。如果该位置存在用户数据，则会引发错误。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68150"></a><a id="ARPLS68151"></a><a id="ARPLS68151"></a><a id="ARPLS68150"></a><div class="props_rev_3"><a id="GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69" name="GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69"></a><h4 id="ARPLS-GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69" class="sect4"><span class="enumeration_section">153.4.18</span> TABLESPACE_VERIFY过程</h4>
                  <div>
                     <p>此过程验证表空间中的段的位图和范围映射是否已同步。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69__GUID-E1C83689-56CC-4B62-80C2-F00035BBD72A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SPACE_ADMIN.TABLESPACE_VERIFY（tablespace_name IN VARCHAR2，verify_option IN POSITIVE DEFAULT TABLESPACE_VERIFY_BITMAP）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69__GUID-80B172D9-7F20-4185-B606-D511617CC597">参数</p>
                        <div class="tblformal" id="GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69__GUID-6BAD2080-C1C6-4A1B-A6E9-7E31385938D4">
                           <p class="titleintable">表153-20 TABLESPACE_VERIFY过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TABLESPACE_VERIFY过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SPACE_ADMIN.TABLESPACE_VERIFY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d848569e4382">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d848569e4385">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e4390" headers="d848569e4382 ">
                                       <p><code class="codeph">TABLESPACE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e4390 d848569e4385 ">
                                       <p>表空间的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d848569e4398" headers="d848569e4382 ">
                                       <p><code class="codeph">verify_option</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d848569e4398 d848569e4385 ">
                                       <p>支持一个选项： <code class="codeph">TABLESPACE_VERIFY_BITMAP</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8977CC15-4B1D-44CE-9AA1-F96E2DA30C69__GUID-130D7A3F-45ED-4C2C-8078-A13F47E318F5">例子</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_SPACE_ADMIN.TABLESPACE_VERIFY（'USERS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html id="03361.getting-started-with-oracle-database-vault.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."></meta>
      <meta name="description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."></meta>
      <title>Oracle Database Vault入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide "></meta>
      <meta property="og:description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96302-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="what-to-expect-after-you-enable-oracle-database-vault.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-realms.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DVADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="what-to-expect-after-you-enable-oracle-database-vault.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-realms.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Database Vault入门</li>
            </ol>
            <a id="GUID-D3F37B71-0935-462C-A459-557D28F8CF20" name="GUID-D3F37B71-0935-462C-A459-557D28F8CF20"></a><a id="DVADM002"></a>
            
            <h2 id="DVADM-GUID-D3F37B71-0935-462C-A459-557D28F8CF20" class="sect2"><span class="enumeration_chapter">3</span> Oracle Database Vault入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D">关于使用Oracle数据库注册Oracle Database Vault</a><br>安装Oracle数据库之后，必须使用安装它的Oracle数据库注册（即配置和启用）Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D">在多租户环境中向Oracle数据库注册Oracle Database Vault</a><br>您可以基于多种方案在多租户环境中注册Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB">在非多租户环境中注册数据库保管库</a><br>您可以在非多租户环境中从SQL * Plus注册Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2">验证是否已配置并启用数据库保管库</a><br><code class="codeph">DBA_DV_STATUS</code> ， <code class="codeph">CDB_DV_STATUS</code> ， <code class="codeph">DBA_OLS_STATUS</code>和<code class="codeph">CDB_OLS_STATUS</code>数据字典视图验证是否已配置并启用Oracle数据库。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a><br>Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD">快速入门教程：从DBA访问保护架构</a><br>本教程介绍如何围绕<code class="codeph">HR</code>模式创建领域。
                  </li>
               </ul>
            </div>
            <a id="DVADM71415"></a><div class="props_rev_3"><a id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" name="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D"></a><h3 id="DVADM-GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" class="sect3">关于使用Oracle数据库注册Oracle Database Vault</h3>
               <div>
                  <p>安装Oracle数据库之后，必须使用安装它的Oracle数据库注册（即配置和启用）Oracle Database Vault。</p>
                  <p>当您选择在安装过程中包含默认数据库时，Oracle数据库包括Database Vault，但您必须先注册它才能使用它。如果您创建自定义数据库，则可以使用DBCA为其安装和启用Database Vault。注册过程启用Oracle Label Security（如果尚未启用）。Oracle Database Vault需要Oracle Label Security，但除非您单独开始使用Oracle Label Security并创建Oracle Label Security策略，否则它不需要单独的许可证。此过程适用于CDB根，应用程序根目录和当前可插拔数据库（PDB），以及单实例和Oracle Real Application Clusters（Oracle RAC）安装。在多租户数据库中，必须先使用CDB根配置Database Vault，然后才能配置任何PDB Database Vault。</p>
                  <p>作为注册过程的一部分，您创建了Database Vault备份帐户。这些是包含关键数据库保管库角色的帐户。最初使用这些帐户将角色置备到具有管理权限的命名用户。维护备份帐户将允许您从命名用户中恢复丢失或以某种方式错放其凭据，因为<code class="codeph">SYS</code>将无法为具有这些角色的用户重置这些密码。
                  </p>
                  <p>您可以在多租户和非多租户环境中注册Oracle数据库。对于多租户环境，您可以选择多种方法进行注册。</p>
                  <div class="infoboxnote" id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D__GUID-1E94AF86-0609-4112-AB72-4547728B0DE9">
                     <p class="notep1">注意：</p>如果您已从早于Oracle Database 12 <span class="italic">c</span>的版本升级，并且在早期版本中已启用早期Oracle Database Vault，则在升级过程完成后，您必须使用<code class="codeph">DBMS_MACADM.ENABLE_DV</code>过程启用Oracle Database Vault 。
                     <p>在多租户环境中，如果要从版本12c之前的版本迁移非Database Vault注册的Oracle数据库，则必须手动安装Database Vault。</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM30031"></a><div class="props_rev_3"><a id="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" name="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D"></a><h3 id="DVADM-GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" class="sect3">在多租户环境中向Oracle数据库注册Oracle Database Vault</h3>
               <div>
                  <p>您可以基于多种方案在多租户环境中注册Oracle Database Vault。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864">关于在多租户环境中注册Database Vault</a><br>在多租户环境中，必须先在CDB根目录中注册Oracle Database Vault，然后才能在任何关联的PDB中注册Database Vault。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A">在CDB根目录中注册Database Vault</a><br>在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193">注册Database Vault公共用户以管理特定PDB</a><br>在多租户环境中，您必须首先在根目录中注册Oracle Database Vault，然后在PDB中注册。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-75E90559-133D-4B5E-B658-D77810B590C6">注册Database Vault本地用户以管理特定PDB</a><br>在多租户环境中，您必须先在根目录中注册Oracle Database Vault，然后再在PDB中注册。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-54699671-483A-49EF-B900-81D286845E8E">插入启用Database Vault的PDB</a><br>在SQL * Plus中，在多租户环境中，您可以插入已启用Database Vault的数据库。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260">在多租户环境中手动安装Oracle Database Vault</a><br>在某些情况下，对于多租户环境，您必须手动安装Oracle Database Vault。例如，没有Database Vault的11g Oracle数据库升级到版本12c，然后转换为PDB以插入12c Database Vault启用的数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864" name="GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864"></a><h4 id="DVADM-GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864" class="sect4">关于在多租户环境中注册Database Vault</h4>
                  <div>
                     <p>在多租户环境中，必须先在CDB根目录中注册Oracle Database Vault，然后才能在任何关联的PDB中注册Database Vault。</p>
                     <p>在CDB根目录中分配了<code class="codeph">DV_OWNER</code>和<code class="codeph">DV_ACCTMGR</code>角色的普通用户也可以在PDB中具有相同的角色。PDB可以使用相同的公共用户注册Database Vault，也可以使用单独的PDB本地用户。<code class="codeph">DV_ACCTMGR</code>角色通常授予CDB根目录中的公共用户。当您使用CDB根注册Database Vault时，可以将<code class="codeph">DV_OWNER</code>本地或通常授予CDB根公共用户。在本地向普通用户授予<code class="codeph">DV_OWNER</code>可防止常见的<code class="codeph">DV_OWNER</code>用户在任何PDB中使用此角色。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71417"></a><div class="props_rev_3"><a id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" name="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A"></a><h4 id="DVADM-GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" class="sect4">在CDB根目录中注册Database Vault</h4>
                  <div>
                     <p>在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。</p>
                     <ol>
                        <li class="stepexpand"><span>在多租户环境中，以具有创建用户权限并授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限的用户身份登录数据库实例的根目录。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>sqlplus c ## dba_debra输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__CHDGDEIB"><span>选择将用于数据库保管库所有者（ <code class="codeph">DV_OWNER</code>角色）和数据库保管库客户管理器（ <code class="codeph">DV_ACCTMGR</code>角色）帐户的用户帐户（或创建新用户）。</span><div>
                              <p>Oracle强烈建议您为每个角色维护两个帐户。一个帐户（主要命名的用户帐户）将在日常使用，另一个帐户将用作备份帐户，以防主帐户的密码丢失并且必须重置。</p>
                           </div>
                           <div>
                              <p>使用<code class="codeph">c##</code>或<code class="codeph">C##</code>这些帐户的名称。例如：</p><pre class="pre codeblock"><code>GRANT CREATE SESSION，SET CONTAINER to c ## sec_admin_owen IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## dbv_owner_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## accts_admin_ace IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## dbv_acctmgr_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;</code></pre><p>在本规范中：</p>
                              <ul id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_EFL_1LP_GFB" style="list-style-type:disc">
                                 <li>如果新角色<code class="codeph">DV_ADMIN</code>和<code class="codeph">DV_ACCTMGR</code>尚不存在，则创建主帐户（ <code class="codeph">c##sec_admin_owen</code>和<code class="codeph">c##accts_admin_ace</code> ）。</li>
                                 <li>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份连接到root</span><div><pre class="pre codeblock"><code>CONN SYS AS SYSDBA输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>配置两个备份Database Vault用户帐户。</span><div>例如：<pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## dbv_acctmgr_root_backup'，force_local_dvowner =&gt; FALSE）;结束; /</code></pre></div>
                           <div>在此示例中，将<code class="codeph">force_local_dvowner</code>设置为<code class="codeph">FALSE</code>可使公共用户具有与此CDB根关联的PDB的<code class="codeph">DV_OWNER</code>权限。将其设置为<code class="codeph">TRUE</code>限制公共<code class="codeph">DV_OWNER</code>用户仅具有CDB根的<code class="codeph">DV_OWNER</code>角色权限。如果您将<code class="codeph">DV_OWNER</code>本地授予CDB根公共用户，则该用户无法将<code class="codeph">DV_OWNER</code>角色共同授予任何其他用户。
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译根目录中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何指示，则再次运行它。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为刚刚配置的主Database Vault Owner用户连接到root。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令之一启用Oracle Database Vault：</span><div>
                              <ul id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_LYQ_35D_R2B" style="list-style-type:disc">
                                 <li>
                                    <p>要使Oracle Database Vault能够使用常规模式：</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></li>
                                 <li>
                                    <p>如果每个关联的PDB都需要在此数据库中启用Database Vault，请使用以下命令。（完成此过程后，您需要启用每个PDB。）在重新启动数据库之后，未启用Database Vault的PDB将处于受限模式，直到PDB中启用了Database Vault：</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV（strict_mode =&gt;'y'）;</code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重启数据库。</span><div><pre class="pre codeblock"><code>关机立即启动</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已安装并启用Oracle Database Vault和Oracle Label Security。</span><div><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS; SELECT * FROM DBA_OLS_STATUS; SELECT * FROM CDB_DV_STATUS; SELECT * FROM CDB_OLS_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO c ## sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予备份<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_acctmgr_root_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="DV_PATCH_ADMIN角色用于修补操作。">DV_PATCH_ADMIN数据库保管库数据库修补程序角色</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" title="CONFIGURE_DV过程配置最初的两个Oracle数据库用户帐户，分别被授予DV_OWNER和DV_ACCTMGR角色。">CONFIGURE_DV一般系统维护程序</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71429"></a><div class="props_rev_3"><a id="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" name="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193"></a><h4 id="DVADM-GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" class="sect4">注册Database Vault公共用户以管理特定PDB</h4>
                  <div>
                     <p>在多租户环境中，您必须首先在根目录中注册Oracle Database Vault，然后在PDB中注册。</p>
                     <div class="section">如果您首先尝试在PDB中注册，则会<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code>错误<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> 。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>如果尚未执行此操作，请标识或创建命名的公共用户帐户，以用作Database Vault帐户以及关联的备份帐户。</span></li>
                        <li class="stepexpand"><span>确保您已在CDB根目录中注册了Oracle Database Vault，并且<code class="codeph">DV_OWNER</code>角色已共同授予普通用户。</span></li>
                        <li class="stepexpand"><span>以PDB本地的管理员身份连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT dba_debra @ <span class="italic">pdb_name</span>输入密码： <span class="italic">密码</span>
</code></pre><p>要查找可用的PDB，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>为此PDB的用户授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限。</span><div>例如：<pre class="pre codeblock"><code>GRANT CREATE SESSION，SET CONTAINER to c ## sec_admin_owen CONTAINER = CURRENT; GRANT CREATE SESSION，SET CONTAINER to c ## accts_admin_ace CONTAINER = CURRENT;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户身份连接<code class="codeph">SYSDBA</code>管理权限</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>仍在PDB中时，配置两个备份Database Vault用户帐户。</span><div><pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## dbv_acctmgr_root_backup'）;结束; /</code></pre><p>在此示例中，省略<code class="codeph">force_local_dvowner</code>参数，因为它是不必要的。在PDB中配置的所有普通用户都受限于PDB的范围。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译此PDB中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何指示，则再次运行它。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为您刚刚配置的备份Database Vault Owner用户连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup @ <span class="italic">pdb_name</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在此PDB中启用Oracle Database Vault。</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到CDB。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新打开PDB。</span><div>例如：<pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE; ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已为Database Vault配置和启用PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO c ## sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予主<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_acctmgr_root_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="DV_PATCH_ADMIN角色用于修补操作。">DV_PATCH_ADMIN数据库保管库数据库修补程序角色</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" title="CONFIGURE_DV过程配置最初的两个Oracle数据库用户帐户，分别被授予DV_OWNER和DV_ACCTMGR角色。">CONFIGURE_DV一般系统维护程序</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。">在CDB根目录中注册Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-75E90559-133D-4B5E-B658-D77810B590C6" name="GUID-75E90559-133D-4B5E-B658-D77810B590C6"></a><h4 id="DVADM-GUID-75E90559-133D-4B5E-B658-D77810B590C6" class="sect4">注册Database Vault本地用户以管理特定PDB</h4>
                  <div>
                     <p>在多租户环境中，您必须先在根目录中注册Oracle Database Vault，然后再在PDB中注册。</p>
                     <div class="p">如果您首先尝试在PDB中注册，则会<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code>错误<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> 。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在多租户环境中，以具有创建用户权限并授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限的用户身份登录PDB。</span><div>例如：<pre class="pre codeblock"><code>sqlplus sec_admin <span class="italic">@pdb_name</span>输入密码： <span class="italic">密码</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果不使用现有的本地用户命名帐户来创建新的Database Vault角色，请创建新的命名本地用户帐户。</span><div>在这两种情况下，您必须创建备份帐户以保留数据库保管库角色，以防命名用户丢失或忘记其密码。</div>
                           <div><pre class="pre codeblock"><code>GRANT创建会话，将容器设置为sec_admin_owen通过<span class="italic">密码</span>识别; GRANT创建会话，将容器设置为dbv_owner_backup IDENTIFIED BY <span class="italic">password</span> ; GRANT创建会话，将容器设置为accts_admin_ace通过<span class="italic">密码</span>识别; GRANT创建会话，将容器设置为dbv_acctmgr_backup IDENTIFIED BY <span class="italic">密码</span> ;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>确保您已在CDB根目录中注册了Oracle Database Vault。</span><div>暂时连接到根，然后查询<code class="codeph">DBA_DV_STATUS</code>视图。<pre class="pre codeblock"><code>CONNECT SYS / AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份连接到PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>仍在PDB中时，配置两个备份Database Vault用户帐户。</span><div><pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'dbv_owner_backup'，dvacctmgr_uname =&gt;'dbv_acctmgr_backup'）;结束; /</code></pre><p>在此示例中，省略<code class="codeph">force_local_dvowner</code>参数，因为它是不必要的。在PDB中配置时，将在本地授予Database Vault角色。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译此PDB中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何说明，请再次运行。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为您刚刚配置的备份Database Vault Owner用户连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT dbv_owner_backup @ <span class="italic">pdb_name</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在此PDB中启用Oracle Database Vault。</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到CDB。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新打开PDB。</span><div><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE; ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已为Database Vault配置和启用PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予备份<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT dbv_acctmgr_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。">在CDB根目录中注册Database Vault</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-54699671-483A-49EF-B900-81D286845E8E" name="GUID-54699671-483A-49EF-B900-81D286845E8E"></a><h4 id="DVADM-GUID-54699671-483A-49EF-B900-81D286845E8E" class="sect4">插入启用Database Vault的PDB</h4>
                  <div>
                     <p>在SQL * Plus中，在多租户环境中，您可以插入已启用Database Vault的数据库。</p>
                     <p>在此方案中，插入的数据库具有自己的本地Database Vault帐户。请注意，如果将启用了Database Vault的数据库插入未启用Database Vault的CDB，则PDB将保持受限模式，直到您在CDB中启用Database Vault，然后重新启动CDB。如果将未启用Database Vault的PDB插入启用了Database Vault的CDB，则PDB将保持受限模式，直到您在PDB中启用Database Vault，然后重新启动PDB。仍然可以使用此插入的非Database Vault启用的PDB。但是，如果CDB是使用严格选项集启用的Database Vault，则PDB必须启用Database Vault。</p>
                     <p>在插入支持Database Vault的PDB并且将数据库保管库角色授予普通用户之前，请确保完全了解插入PDB对普通用户的影响。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../multi/plugging-in-a-pdb.html#MULTI-GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70" target="_blank"><span class="italic">Oracle多租户管理员指南</span></a></li>
                           <li><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-81D0494C-E838-4DD9-AC82-B56473F98D06" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" name="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260"></a><h4 id="DVADM-GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" class="sect4">在多租户环境中手动安装Oracle Database Vault</h4>
                  <div>
                     <p>在某些情况下，对于多租户环境，您必须手动安装Oracle Database Vault。例如，没有Database Vault的11g Oracle数据库升级到版本12c，然后转换为PDB以插入12c Database Vault启用的数据库。</p>
                     <div class="section">如果在将PDB插入安装了Database Vault和Label Security的CDB时此PDB没有这些产品，则必须在PDB中手动安装Oracle Database Vault（和Oracle Label Security）。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>作为已被授予<code class="codeph">SYSDBA</code>管理权限的用户，请登录到要在其中安装Oracle Database Vault的PDB。</span><div>
                              <p>例如，要登录名为<code class="codeph">hr_pdb</code>的PDB：</p><pre class="pre codeblock"><code>sqlplus sec_admin @ hr_pdb as sysdba输入密码： <span class="italic">password</span></code></pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如有必要，请检查此PDB上是否已安装Oracle Database Vault和Oracle Label Security。</span><div>如果存在<code class="codeph">DVSYS</code>帐户（用于Database Vault）和<code class="codeph">LBACSYS</code>帐户（用于标签安全性），则PDB上存在Database Vault和Label Security。</div>
                           <div><pre class="pre codeblock"><code>SELECT USERNAME FROM DBA_USERS WHERE USERNAME IN（'DVSYS'，'LBACSYS'）;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果既未安装Database Vault也未安装Label Security，则通过执行<code class="codeph">catols.sql</code>脚本来安装Oracle Label Security。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ catols.sql</code></pre><p>必须先安装Oracle Label Security，然后才能安装Oracle Database Vault。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过执行<code class="codeph">catmac.sql</code>脚本来安装Oracle Database Vault。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ catmac.sql</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在<code class="codeph">Enter value for 1</code>提示符下，输入<code class="codeph">SYSTEM</code>作为表空间以安装<code class="codeph">DVSYS</code> 。</span></li>
                        <li class="stepexpand"><span>在<code class="codeph">Enter value for 2</code>提示符下，输入PDB的临时表空间。</span></li>
                     </ol>
                     <div class="section">安装完成后，您可以在PDB中注册Oracle Database Vault。如果数据库保管库尚未在CDB中注册，则必须先关闭PDB，然后才能在CDB根目录中注册Database Vault。数据库保管库必须先在CDB根目录中注册，然后才能在PDB中注册。数据库保管库在CDB根目录中注册并且数据库已重新启动后，您可以打开PDB并注册数据库保管库。</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DVADM71416"></a><div class="props_rev_3"><a id="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" name="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB"></a><h3 id="DVADM-GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" class="sect3">在非多租户环境中注册数据库保管库</h3>
               <div>
                  <p>您可以在非多租户环境中从SQL * Plus注册Oracle Database Vault。</p>
                  <ol>
                     <li class="stepexpand"><span>以具有创建用户帐户权限的用户身份登录数据库实例，并将<code class="codeph">CREATE SESSION</code>权限授予其他用户。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>识别（或在必要时创建新的命名用户帐户）命名用户帐户，以用于数据库保管库所有者（ <code class="codeph">DV_OWNER</code>角色）和数据库保管库客户管理器（ <code class="codeph">DV_ACCTMGR</code>角色）帐户。</span><div>
                           <p>Oracle强烈建议您为每个角色创建两个帐户。一个帐户（主要命名的用户帐户）将在日常使用，另一个帐户将用作备份帐户，以防主帐户的密码丢失并且必须重置。</p>
                        </div>
                        <div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT创建会话到sec_admin_owen IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到dbv_owner_backup IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到accts_admin_ace IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到dbv_acctmgr_backup IDENTIFIED BY <span class="italic">密码</span> ;</pre><p>请遵循“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”中</cite></span></a>的准则，将<span class="italic"><code class="codeph">password</code></span>替换为安全的密码。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用两个备份用户帐户配置Database Vault。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN CONFIGURE_DV（dvowner_uname =&gt;'dbv_owner_backup'，dvacctmgr_uname =&gt;'dbv_acctmgr_backup'）;结束; /</pre><p>请勿为这些用户帐户输入名称<code class="codeph">DV_OWNER</code> ， <code class="codeph">DV_ACCTMGR</code>或任何其他Database Vault角色的名称。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译失效的对象。</span><div><pre class="oac_no_warn" dir="ltr">@？/rdbms/admin/utlrp.sql</pre><p>如果脚本为您提供了任何说明，请按照它们操作，然后再次运行该脚本。如果脚本异常终止而未给出任何说明，请再次运行。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>作为刚刚配置的备份Database Vault Owner用户进行连接。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>启用Oracle Database Vault。</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA</pre></div>
                     </li>
                     <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                     </li>
                     <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;</pre></div>
                     </li>
                     <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予主<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_acctmgr_backup输入密码： <span class="italic">密码</span> GRANT DV_ACCTMGR TO accts_admin_ace WITH ADMIN OPTION;</pre></div>
                     </li>
                     <li class="stepexpand"><span>验证配置是否成功。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA SELECT * FROM DBA_DV_STATUS; SELECT * FROM DBA_OLS_STATUS;</pre></div>
                     </li>
                     <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                        <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault提供基于特定用户任务的默认角色，并遵循职责分离概念。">Oracle Database Vault角色</a></li>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM71421"></a><div class="props_rev_3"><a id="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" name="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2"></a><h3 id="DVADM-GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" class="sect3">验证是否已配置并启用数据库保管库</h3>
               <div>
                  <p><code class="codeph">DBA_DV_STATUS</code> ， <code class="codeph">CDB_DV_STATUS</code> ， <code class="codeph">DBA_OLS_STATUS</code>和<code class="codeph">CDB_OLS_STATUS</code>数据字典视图验证是否已配置并启用Oracle数据库。
                  </p>
                  <div class="section">除Oracle Database Vault管理员外，Oracle Database <code class="codeph">SYS</code>用户和已被授予<code class="codeph">DBA</code>角色的用户可以查询这些视图。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于Database Vault：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果要查找非多租户数据库的数据库保管库状态，或者仅在根目录或单个PDB的多租户环境中，请查询<code class="codeph">DBA_DV_STATUS</code> 。例如：</p><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS;</code></pre><p>输出类似于以下内容：</p><pre class="pre codeblock"><code>NAME STATUS -------------------- ----------- DV_CONFIGURE_STATUS TRUE DV_ENABLE_STATUS TRUE</code></pre></li>
                              <li>
                                 <p>如果要在多租户环境中查找所有PDB的数据库保管库状态（作为具有管理权限的公共用户），请查询<code class="codeph">CDB_DV_STATUS</code> ，它提供了容器ID（ <code class="codeph">CON_ID</code> ）字段的添加。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>对于Oracle Label Security，请查询以下数据字典视图，这些视图与其Database Vault等效视图类似：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBA_OLS_STATUS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CDB_OLS_STATUS</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM30001"></a><div class="props_rev_3"><a id="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" name="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6"></a><h3 id="DVADM-GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" class="sect3">从Oracle Enterprise Cloud Control登录Oracle Database Vault</h3>
               <div>
                  <p>Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。</p>
                  <div class="section">Oracle Database Vault页面可用于从集中控制台管理和监视受Database Vault保护的数据库。通过此控制台，您可以自动执行警报，查看Database Vault报告以及将Database Vault策略传播到其他受Database Vault保护的数据库。</div>
                  <!-- class="section" -->
                  <div class="p">在尝试登录之前，请确保已按照Oracle Enterprise Manager联机帮助配置了计划与Database Vault一起使用的Cloud Control目标数据库。还必须在Oracle数据库中注册Oracle Database Vault。</div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动云控制。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">https://myserver.example.com:7799/em</pre></div>
                     </li>
                     <li class="stepexpand"><span>以安全管理员身份登录Cloud Control。</span></li>
                     <li class="stepexpand"><span>在Cloud Control主页中，从“ <span class="bold">目标”</span>菜单中选择“ <span class="bold">数据库”</span> 。</span></li>
                     <li class="stepexpand"><span>在“数据库”页面中，选择要连接的受Oracle Database Vault保护的数据库的链接。</span><div>
                           <p>将显示“数据库”主页。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>从<span class="bold">Security</span>菜单中，选择<span class="bold">Database Vault</span> 。</span><div>
                           <p>出现“数据库登录”页面。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>输入以下信息：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">用户名：</span>输入已被授予相应Oracle Database Vault角色的用户的名称：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>创建和传播Database Vault策略： <code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色， <code class="codeph">SELECT ANY DICTIONARY</code>权限</p>
                                    </li>
                                    <li>
                                       <p>查看Database Vault警报和报告： <code class="codeph">DV_OWNER</code> ， <code class="codeph">DV_ADMIN</code>或<code class="codeph">DV_SECANALYST</code>角色， <code class="codeph">SELECT ANY DICTIONARY</code>特权</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><span class="bold">密码：</span>输入您的密码。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">角色：</span>从列表中选择<span class="bold">NORMAL</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">另存为：</span>如果您希望下次显示此页面时自动填写这些凭据，请选中此复选框。凭据以安全的方式存储在企业管理器中。访问这些凭据取决于当前登录的用户。
                                 </p>
                              </li>
                           </ul>
                           <p>将显示Database Vault主页。</p><br><img src="img/em_dv_home_page.png" alt="em_dv_home_page.png的描述如下" title="em_dv_home_page.png的描述如下" longdesc="img_text/em_dv_home_page.html"><br><a href="img_text/em_dv_home_page.html">em_dv_home_page.png插图的描述</a><br></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-F9FF7E47-641E-45D3-8EF2-3EA6B9FFD6A3" title="Oracle Database Vault提供了管理Oracle Database Vault所需的一组角色。">关于Oracle Database Vault角色</a></li>
                        <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E" title="Oracle Database Vault管理员可以在Oracle Enterprise Manager云控制中执行任务，例如将策略传播到其他数据库。">将Oracle Database Vault与Oracle Enterprise Manager配合使用</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM70135"></a><div class="props_rev_3"><a id="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" name="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD"></a><h3 id="DVADM-GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" class="sect3">快速入门教程：从DBA访问保护架构</h3>
               <div>
                  <p>本教程介绍如何围绕<code class="codeph">HR</code>模式创建领域。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B">关于本教程</a><br>在本教程中，您将使用Oracle Database Vault PL / SQL包为<code class="codeph">HR</code>示例数据库模式创建一个领域。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-872977EE-3DAD-46F4-8AE3-36176093F999">步骤1：以SYSTEM身份登录以访问HR模式</a><br>您必须为本教程启用<code class="codeph">HR</code>模式。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C">第2步：创建一个领域</a><br>领域可以保护一个或多个模式，单个模式对象和数据库角色。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16">第3步：创建SEBASTIAN用户帐户</a><br>在此阶段，没有数据库帐户或角色有权访问或以其他方式操作域将保护的数据库对象。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7">第4步：让用户SEBASTIAN测试领域</a><br>在此阶段，让用户<code class="codeph">SEBASTIAN</code>测试该领域，即使他具有<code class="codeph">READ ANY TABLE</code>系统特权。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833">第5步：为领域创建授权</a><br>接下来，必须授予用户<code class="codeph">SEBASTIAN</code>对HR Apps领域的授权，以便他可以访问<code class="codeph">HR.EMPLOYEES</code>表。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7">第6步：测试领域</a><br>要测试该域，您必须尝试以<code class="codeph">HR</code>以外的用户身份访问<code class="codeph">EMPLOYEES</code>表。</li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A">步骤7：如果未启用统一审核，则运行报告</a><br>由于您为HR Apps域启用了失败审核，因此您可以生成报告以查找任何安全违规。
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2">步骤8：删除本教程的组件</a><br>如果不再需要，可以删除为本教程创建的组件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></p>
                     </div>
                  </div>
               </div>
               <a id="DVADM71114"></a><div class="props_rev_3"><a id="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" name="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B"></a><h4 id="DVADM-GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" class="sect4">关于本教程</h4>
                  <div>
                     <p>在本教程中，您将使用Oracle Database Vault PL / SQL包为<code class="codeph">HR</code>示例数据库模式创建一个领域。
                     </p>
                     <p>在<code class="codeph">HR</code>模式中， <code class="codeph">EMPLOYEES</code>表包含应该从公司中的大多数员工隐藏的工资等信息，包括具有管理访问权限的员工。要实现此目的，请将<code class="codeph">HR</code>模式添加到保护区域的安全对象中，该对象在Oracle Database Vault中称为<span class="italic">领域</span> ，位于数据库中。然后你授予这个领域有限的授权。之后，您测试领域以确保它已被正确保护。最后，要了解Oracle Database Vault如何为您在测试领域时尝试的可疑活动提供审计跟踪，您将运行报告。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70137"></a><div class="props_rev_3"><a id="GUID-872977EE-3DAD-46F4-8AE3-36176093F999" name="GUID-872977EE-3DAD-46F4-8AE3-36176093F999"></a><h4 id="DVADM-GUID-872977EE-3DAD-46F4-8AE3-36176093F999" class="sect4">步骤1：以SYSTEM身份登录以访问HR模式</h4>
                  <div>
                     <p>您必须为本教程启用<code class="codeph">HR</code>模式。
                     </p>
                     <div class="p">在开始本教程之前，请确保已安装<code class="codeph">HR</code>示例模式。<a href="../comsc/introduction-to-sample-schemas.html#COMSC005" target="_blank"><span><cite>Oracle数据库示例模式</cite></span></a>描述了如何安装示例模式。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DBA</code>角色的用户身份登录数据库实例，然后访问<code class="codeph">HR</code>模式。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus系统输入密码： <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>在多租户环境中，连接到相应的PDB。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM @ my_pdb输入密码： <span class="italic">密码</span>
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">HR.EMPLOYEES</code>表如下。</span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY ROWNUM &lt;10;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME SALARY -------------------- -------------------------  - -------- Steven King 24000 Neena Kochhar 17000 Lex De Haan 17000 Alexander Hunold 9000 Bruce Ernst 6000 David Austin 4800 Valli Pataballa 4800 Diana Lorentz 4200 Nancy Greenberg 12008 9行入选。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>如果<code class="codeph">HR</code>模式已锁定且已过期，请以<code class="codeph">DV_ACCTMGR</code>用户身份登录数据库实例，然后解锁并<code class="codeph">DV_ACCTMGR</code>该帐户。例如：</span><div><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr <span class="italic">- 对于多租户环境，sqlplus bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">password</span> ALTER USER HR <span class="italic">ACCOCO UNENOCK</span> IDENTIFIED BY <span class="italic">password</span>
</pre><p>请遵循“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”中</cite></span></a>的准则，将<span class="italic"><code class="codeph">password</code></span>替换为安全的密码。
                              </p>
                              <p>如您所见， <code class="codeph">SYSTEM</code>可以访问<code class="codeph">HR</code>模式的<code class="codeph">EMPLOYEES</code>表中的工资信息。这是因为<code class="codeph">SYSTEM</code>自动被授予<code class="codeph">DBA</code>角色，其中包括<code class="codeph">SELECT ANY TABLE</code>系统特权。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>不要退出SQL * Plus。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70138"></a><div class="props_rev_3"><a id="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" name="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C"></a><h4 id="DVADM-GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" class="sect4">第2步：创建一个领域</h4>
                  <div>
                     <p>领域可以保护一个或多个模式，单个模式对象和数据库角色。</p>
                     <div class="section">创建领域后，您可以创建适用于领域内架构及其架构对象的安全限制。您需要为<code class="codeph">HR</code>模式创建一个领域。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已授予<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色和<code class="codeph">SELECT ANY DICTIONARY</code>权限的用户身份从Cloud Control登录Oracle Database Vault Administrator。<a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager云控制（云控制）提供用于管理Oracle Database Vault的页面。">从Oracle Enterprise Cloud Control登录Oracle Database Vault</a>说明了如何登录。</span></li>
                        <li class="stepexpand"><span>在“管理”页面的“数据库Vault组件”下，单击<span class="bold">“域”</span> 。</span></li>
                        <li class="stepexpand"><span>在Oracle Database Vault Administrator的“Realms”页面中，单击“ <span class="bold">Create”</span> 。</span></li>
                        <li class="stepexpand"><span>在“创建域”页面的“常规”下，在“ <span class="bold">名称”</span>后输入“ <code class="codeph">HR Apps</code> 。</span></li>
                        <li class="stepexpand"><span>在<span class="bold">Description</span>字段中，输入<code class="codeph">Realm to protect the HR schema</code> 。</span></li>
                        <li class="stepexpand"><span>不选中<span class="bold">Mandatory Realm</span>复选框。</span></li>
                        <li class="stepexpand"><span>在Status之后，确保选中<span class="bold">Enabled</span>以便可以使用领域。</span></li>
                        <li class="stepexpand"><span>在“审核选项”下，确保选中“ <span class="bold">审核失败”</span> ，以便稍后可以创建审核试用。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">下一步”</span>以显示“Realm安全对象”页面。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">添加”</span>按钮，在“添加安全对象”对话框中，输入以下信息：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">所有者：</span>输入<code class="codeph">HR</code>以选择<code class="codeph">HR</code>模式。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">对象类型：</span>输入<code class="codeph">TABLE</code> 。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">对象名称：</span>输入<code class="codeph">EMPLOYEES</code> 。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span><div>
                              <p><code class="codeph">HR.EMPLOYEES</code>表被添加到Create Realm：Realm Secured Objects页面。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">“完成”</span> ，然后单击“ <span class="bold">完成”</span> 。</span></li>
                     </ol>
                     <div class="section">
                        <p>在此阶段，您已创建域，但尚未为其分配任何授权。您将在本教程的后面部分进行处理。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71219"></a><div class="props_rev_3"><a id="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" name="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16"></a><h4 id="DVADM-GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" class="sect4">第3步：创建SEBASTIAN用户帐户</h4>
                  <div>
                     <p>在此阶段，没有数据库帐户或角色有权访问或以其他方式操作域将保护的数据库对象。</p>
                     <div class="section">
                        <p>因此，下一步是授权数据库帐户或数据库角色，以便他们可以访问领域中的模式。您将创建<code class="codeph">SEBASTIAN</code>用户帐户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，以具有<code class="codeph">DV_ACCTMGR</code>角色的Database Vault帐户管理器身份进行<code class="codeph">DV_ACCTMGR</code> ，并创建本地用户<code class="codeph">SEBASTIAN</code> 。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr <span class="italic">- 或者，CONNECT bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">密码</span> GRANT创建会话以通过<span class="italic">密码</span>识别SEBASTIAN;</pre><p>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。有关创建密码的最低要求，请参见“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”</cite></span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">SYS</code>与<code class="codeph">SYSDBA</code>权限连接，然后为<code class="codeph">SEBASTIAN</code>授予以下附加权限。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSDBA连接<span class="italic">- 或者，连接SYS @hrpdb</span> AS SYSDBA输入密码： <span class="italic">password</span> GRANT READ <span class="italic">SEY</span> TABLE TO SEBASTIAN;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>不要退出SQL * Plus;当你测试领域时，你需要它来进行<a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="要测试该域，您必须尝试以HR以外的用户身份访问EMPLOYEES表。">第6步：测试</a>领域。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" name="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7"></a><h4 id="DVADM-GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" class="sect4">第4步：让用户SEBASTIAN测试领域</h4>
                  <div>
                     <p>在此阶段，让用户<code class="codeph">SEBASTIAN</code>测试该领域，即使他具有<code class="codeph">READ ANY TABLE</code>系统特权。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以<code class="codeph">SEBASTIAN</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sebastian输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">HR.EMPLOYEES</code>表。</span><div><pre class="oac_no_warn" dir="ltr">从CO.EMPLOYEES中选择COUNT（*）;</pre></div>
                           <div>
                              <p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-01031：权限不足</pre></div>
                        </li>
                     </ol>
                     <div class="section">即使用户<code class="codeph">SEBASTIAN</code>具有<code class="codeph">READ ANY TABLE</code>系统特权，他也无法查询<code class="codeph">HR.EMPLOYEES</code>表，因为HR Apps领域优先于<code class="codeph">READ ANY TABLE</code>系统特权。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70140"></a><div class="props_rev_3"><a id="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" name="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833"></a><h4 id="DVADM-GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" class="sect4">第5步：为领域创建授权</h4>
                  <div>
                     <p>接下来，必须授予用户<code class="codeph">SEBASTIAN</code>对HR Apps领域的授权，以便他可以访问<code class="codeph">HR.EMPLOYEES</code>表。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>在Database Vault Administrator的Realms页面中，选择领域列表中的<span class="bold">HR Apps</span> ，然后单击<span class="bold">Edit</span> 。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">下一步”</span>按钮，直到到达“域”授权页面。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">添加”</span> ，然后在“添加授权”对话框中输入以下信息：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">领域授权受让人：</span>输入<code class="codeph">SEBASTIAN</code> 。</p>
                                 </li>
                                 <li>
                                    <p><span class="bold">领域授权类型：</span>从列表中选择<span class="bold">参与者</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">领域授权规则集：</span>将此字段留空。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span><div>
                              <p>参与者授权允许HR应用领域中的用户<code class="codeph">SEBASTIAN</code>管理对HR应用领域保护的对象的访问，操纵和创建。在这种情况下， <code class="codeph">HR</code>用户和<code class="codeph">SEBASTIAN</code>是唯一允许查看<code class="codeph">EMPLOYEES</code>表的用户。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="bold">“完成”</span> ，然后单击<span class="bold">“</span> <span class="bold">完成”</span> 。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70141"></a><div class="props_rev_3"><a id="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" name="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7"></a><h4 id="DVADM-GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" class="sect4">第6步：测试领域</h4>
                  <div>
                     <p>要测试该域，您必须尝试以<code class="codeph">HR</code>以外的用户身份访问<code class="codeph">EMPLOYEES</code>表。</p>
                     <div class="section">
                        <p><code class="codeph">SYSTEM</code>帐户通常可以访问<code class="codeph">HR</code>模式中的所有对象，但是现在您已经使用Oracle Database Vault保护了<code class="codeph">EMPLOYEES</code>表，现在不再是这种情况了。
                        </p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以<code class="codeph">SYSTEM</code>身份连接。</p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM <span class="italic">- 或者，CONNECT SYSTEM @ hrpdb</span>输入密码： <span class="italic">密码</span>
</pre></li>
                           <li>
                              <p>尝试再次访问<code class="codeph">EMPLOYEES</code>表中的薪水信息：</p><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY ROWNUM &lt;10;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">第1行出错：ORA-01031：权限不足</pre><p><code class="codeph">SYSTEM</code>不再能够访问EMPLOYEES表中的薪资信息。（事实上，即使用户<code class="codeph">SYS</code>也无法访问此表。）但是，用户<code class="codeph">SEBASTIAN</code>确实可以访问此信息。
                              </p>
                           </li>
                           <li>
                              <p>以<code class="codeph">SEBASTIAN</code>用户身份连接。</p><pre class="oac_no_warn" dir="ltr">CONNECT sebastian <span class="italic">- 或者，CONNECT sebastian @ hrpdb</span>输入密码： <span class="italic">密码</span>
</pre></li>
                           <li>
                              <p>执行以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY ROWNUM &lt;10;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME LAST_NAME SALARY -------------------- -------------------------  - -------- Steven King 24000 Neena Kochhar 17000 Lex De Haan 17000 Alexander Hunold 9000 Bruce Ernst 6000 David Austin 4800 Valli Pataballa 4800 Diana Lorentz 4200 Nancy Greenberg 12008 9行入选。</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70142"></a><div class="props_rev_3"><a id="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" name="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A"></a><h4 id="DVADM-GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" class="sect4">步骤7：如果未启用统一审核，则运行报告</h4>
                  <div>
                     <p>由于您为HR Apps域启用了失败审核，因此您可以生成报告以查找任何安全违规。</p>
                     <div class="section">
                        <p>例如，您可以为在<a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="要测试该域，您必须尝试以HR以外的用户身份访问EMPLOYEES表。">步骤6：测试领域中</a>尝试的违规生成报告。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，以用户<code class="codeph">SYSTEM</code>身份连接，并确保未启用统一审核。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM <span class="italic">- 或者，CONNECT SYSTEM @hrpdb</span>输入密码： <span class="italic">password</span> SQL&gt; SELECT VALUE FROM V $ OPTION WHERE PARAMETER ='Unified Auditing';</pre><p>如果<code class="codeph">VALUE</code>返回<code class="codeph">TRUE</code> ，则无法完成此部分。转到<a href="getting-started-with-oracle-database-vault.html#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" title="如果不再需要，可以删除为本教程创建的组件。">步骤8：删除本教程的组件</a> 。
                              </p>
                              <p>如果启用了统一审核，则必须创建统一审核策略以捕获事件。有关如何为Oracle Database Vault创建统一审核策略的信息，请参见“ <a href="../dbseg/configuring-audit-policies.html#DBSEG419" target="_blank"><span><cite>Oracle数据库安全指南”</cite></span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在Database Vault Administrator页面中，单击<span class="bold">Home</span>以显示主页。</span></li>
                        <li class="stepexpand"><span>在Database Vault主页的<span class="bold">“报告”</span>下，选择“ <span class="bold">数据库Vault报告”</span> 。</span></li>
                        <li class="stepexpand"><span>在Database Vault Reports页面中，选择<span class="bold">Database Vault Enforcement Audit Report</span> 。</span></li>
                        <li class="stepexpand"><span>从<span class="bold">Database Vault Audit Report</span>列表中，选择<span class="bold">Realm Audit Report</span> 。</span></li>
                        <li class="stepexpand"><span>在“搜索”区域的“ <span class="bold">命令”</span>菜单中，选择“ <span class="bold">等于”，</span>然后在文本字段中输入“ <code class="codeph">SELECT</code> 。然后单击<span class="bold">搜索</span> 。</span><div>
                              <p>该报告显示在“搜索”区域后面的表中。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">确定”</span>退出报告。</span></li>
                     </ol>
                     <div class="section">
                        <p>Oracle Database Vault会生成一个报告，列出违规类型（在本例中为上一节中输入的<code class="codeph">SELECT</code>语句），发生的时间和地点，尝试违规的登录帐户以及违规情况。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70143"></a><div class="props_rev_3"><a id="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" name="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2"></a><h4 id="DVADM-GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" class="sect4">步骤8：删除本教程的组件</h4>
                  <div>
                     <p>如果不再需要，可以删除为本教程创建的组件。</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>删除用户<code class="codeph">SEBASTIAN</code> 。</p>
                              <p>在SQL * Plus中，以Oracle Database Vault帐户管理器（例如， <code class="codeph">bea_dvacctmgr</code> ） <code class="codeph">bea_dvacctmgr</code> ，然后按如下方式删除<code class="codeph">SEBASTIAN</code> ：</p><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr <span class="italic">- 或者，CONNECT bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">password</span> DROP USER SEBASTIAN;</pre></li>
                           <li>
                              <p>删除HR Apps领域。</p>
                              <ol type="a">
                                 <li>
                                    <p>在Cloud Control中，确保以具有<code class="codeph">DV_OWNER</code>角色的用户身份登录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Database Vault主页中，单击“ <span class="bold">管理”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Realms页面中，从领域列表中选择<code class="codeph">HR Apps</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">删除”</span> ，然后在“确认”窗口中单击“ <span class="bold">是”</span> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>如有必要，在SQL * Plus中，锁定并使<code class="codeph">HR</code>帐户过期。
                              </p><pre class="oac_no_warn" dir="ltr">ALTER USER HR账户锁密码存款;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="本教程介绍如何围绕HR模式创建领域。">快速入门教程：从DBA访问保护架构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00641.administration-of-XML-DB.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Administration of Oracle XML DB includes installing, upgrading, and configuring it."></meta>
      <meta name="description" content="Administration of Oracle XML DB includes installing, upgrading, and configuring it."></meta>
      <title>管理Oracle XML DB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Administration of Oracle XML DB includes installing, upgrading, and configuring it."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-tools-that-support-XML-DB.html" title="Previous" type="text/html"></link>
      <link rel="next" href="how-to-load-XML-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-tools-that-support-XML-DB.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="how-to-load-XML-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-tools-that-support-XML-DB.html" property="item" typeof="WebPage"><span property="name">支持Oracle XML DB的Oracle工具</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Oracle XML DB</li>
            </ol>
            <a id="GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" name="GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D"></a><a id="ADXDB2700"></a>
            
            <h2 id="ADXDB-GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" class="sect2"><span class="enumeration_chapter">34</span> Oracle XML DB管理</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='administration-of-XML-DB'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>Oracle XML DB的管理包括安装，升级和配置它。</p>
               <div class="section"></div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896">升级或降级现有Oracle XML DB安装</a><br>从Oracle Database 12c第1版（12.1.0.1）之前的版本开始，各种注意事项适用于Oracle数据库的所有升级。
                  </li>
                  <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-8D1BE3A4-5235-4E3D-9481-D822E6FDC46E">使用Oracle Enterprise Manager管理Oracle XML DB</a><br>您可以使用Oracle Enterprise Manager轻松执行Oracle XML DB管理任务。这包括配置Oracle XML DB;创建，搜索，编辑和删除XML模式， <code class="codeph">XMLType</code>表和视图，以及Oracle XML DB资源库<span class="italic">资源</span>及其<span class="italic">访问控制列表</span> （ACL）;注册XML模式;并创建基于函数的索引。
                  </li>
                  <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE">使用xdbconfig.xml配置Oracle XML DB</a><br>Oracle XML DB通过配置文件<code class="codeph">xdbconfig.xml</code>内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。
                  </li>
                  <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9">Oracle XML DB和数据库整合</a><br>每个可插拔数据库都有自己的Oracle XML DB存储库和自己的Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。
                  </li>
                  <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232">包DBMS_XDB_ADMIN</a><br>PL / SQL包<code class="codeph">DBMS_XDB_ADMIN</code>具有用于管理和配置Oracle XML DB和Oracle XML DB存储库的子程序。
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="use-of-XLink-and-XInclude-with-XML-DB.html#GUID-CC5F92B5-4718-4E29-B407-544C960AE5BE" title="将描述您用作资源以配置XLink（不建议使用）和XInclude处理其他资源的资源配置文件。">为XLink和XInclude配置存储库资源</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-tools-that-support-XML-DB.html#GUID-6E519C79-C879-46D0-BAD4-3E9FEA7BA35F" title="您可以将各种Oracle工具与Oracle XML DB一起使用。其中包括用于管理Oracle XML DB，加载XML数据和交换XML数据的工具。">支持Oracle XML DB的Oracle工具</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5703"></a><div class="props_rev_3"><a id="GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" name="GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896"></a><h3 id="ADXDB-GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" class="sect3"><span class="enumeration_section">34.1</span>升级或降级现有Oracle XML DB安装</h3>
               <div>
                  <p>从Oracle Database 12c第1版（12.1.0.1）之前的版本开始，各种注意事项适用于Oracle数据库的所有升级。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>像往常一样运行脚本<code class="codeph">catproc.sql</code> 。
                        </p>
                     </li>
                     <li>
                        <p>任何复制方法都不支持复制启用层次结构的表，包括滚动升级。</p>
                     </li>
                     <li>
                        <p>如果启用了补充日志记录，则不支持这些操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">APPEND</code>提示进行<code class="codeph">INSERT</code></p>
                           </li>
                           <li>
                              <p>SQL * Loader直接路径插入<code class="codeph">XMLType</code>数据</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>如果使用滚动升级并在主数据库上调用以下任何操作，则会在备用数据库上引发<span class="italic">不受支持的操作</span>错误：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBMS_XDB_ADMIN</code> - 所有操作</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XMLSCHEMA.copyEvolve</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XMLSCHEMA.compileSchema</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XMLINDEX.dropparameter</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XMLINDEX.modifyparameter</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DBMS_XMLINDEX.registerparameter</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>ACL安全性：在Oracle Database 11g第1版之前的版本中，ACE之间针对相同主体和相同权限的冲突通过优先考虑具有子<code class="codeph">deny</code>任何ACE来解决，无论ACE之前是否具有子<code class="codeph">grant</code> 。也就是说，ACE命令并不重要。在Oracle Database 11g及更高版本中，此<code class="codeph">deny-trumps-grant</code>行为仍然可用，但它不是默认行为。
                        </p>
                     </li>
                     <li>
                        <p>在Oracle Database 12c第1版（12.1.0.1）之前，基本访问身份验证是唯一可用的HTTP身份验证机制。从12c版本1开始，可以使用摘要访问身份验证。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A">数据库安装，升级和降级的身份验证注意事项</a><br>各种身份验证注意事项适用于数据库安装，升级和降级。
                     </li>
                     <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-1463FD08-D572-49FD-BFBF-CCB051667E25">自动安装Oracle XML DB</a><br>升级期间会自动安装Oracle XML DB。如果要使用Oracle XML DB，请确保兼容级别至少为12.1.0.1。</li>
                     <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-72F182D1-0318-4562-8087-DB0FFA4CFDA7">验证ACL文档和配置文件</a><br>在升级期间，现有ACL文档和Oracle XML DB配置文件将根据其XML模式进行验证。如果验证失败，那么您需要采取某些措施。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896__GUID-85871C45-3128-4F1E-9ADE-5B1624BF2D68">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关执行滚动升级的信息，请参阅<a href="../sbydb/using-sql-apply-to-perform-rolling-upgrade.html#SBYDB00830" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="repository-access-control.html#GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452" title="在允许主体访问受ACL保护的存储库资源之前，将检查权限。通过按顺序评估该主体的保护ACL来完成此检查。对于每个此类ACL，将按顺序检查其中适用于主体的ACE。">ACL和ACE评估</a>有关ACE之间冲突的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">Oracle XML DB的管理</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB6110"></a><div class="props_rev_3"><a id="GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A" name="GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A"></a><h4 id="ADXDB-GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A" class="sect4"><span class="enumeration_section">34.1.1</span>数据库安装，升级和降级的身份验证注意事项</h4>
                  <div>
                     <p>各种身份验证注意事项适用于数据库安装，升级和降级。</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-6641A84E-6BEC-4CB1-A0B0-9799E239F530">数据库安装的身份验证注意事项</a><br>在默认数据库安装中，启用摘要式身份验证，并且不允许基本身份验证。为<span class="italic">所有</span>用户自动生成摘要验证程序。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-EA48F64E-DEEF-44DD-986F-38BD03BB4EE2">数据库升级的身份验证注意事项</a><br>从Oracle Database 12c第1版（12.1.0.1）之前的版本升级后，摘要式身份验证将附加到允许的身份验证机制列表中。但是，如果在升级之前启用了基本身份验证，那么它仍然是当前的身份验这是<span class="italic">唯一的</span>向后兼容性。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-371739FA-6495-4080-B357-9C6CEAA6C3A2">数据库降级的身份验证注意事项</a><br>如果您降级到不支持摘要式身份验证的版本，则会禁用摘要式身份验证，并使其不可用作身份验证选项。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="repository-access-using-protocols.html#GUID-8B00C84F-AA90-4594-BFBF-8A19A1C945D3" title="您可以通过在配置文件xdbconfig.xml中设置元素身份验证（元素httpconfig的子级）来配置身份验证机制，以允许对Oracle XML DB存储库进行HTTP访问。">HTTP身份验证机制的配置和管理</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" title="从Oracle Database 12c第1版（12.1.0.1）之前的版本开始，各种注意事项适用于Oracle数据库的所有升级。">升级或降级现有Oracle XML DB安装</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB6111"></a><div class="props_rev_3"><a id="GUID-6641A84E-6BEC-4CB1-A0B0-9799E239F530" name="GUID-6641A84E-6BEC-4CB1-A0B0-9799E239F530"></a><h5 id="ADXDB-GUID-6641A84E-6BEC-4CB1-A0B0-9799E239F530" class="sect5"><span class="enumeration_section">34.1.1.1</span>数据库安装的身份验证注意事项</h5>
                     <div>
                        <p>在默认数据库安装中，启用摘要式身份验证，并且不允许基本身份验证。为<span class="italic">所有</span>用户自动生成摘要验证程序。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A" title="各种身份验证注意事项适用于数据库安装，升级和降级。">数据库安装，升级和降级的身份验证注意事项</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB6112"></a><div class="props_rev_3"><a id="GUID-EA48F64E-DEEF-44DD-986F-38BD03BB4EE2" name="GUID-EA48F64E-DEEF-44DD-986F-38BD03BB4EE2"></a><h5 id="ADXDB-GUID-EA48F64E-DEEF-44DD-986F-38BD03BB4EE2" class="sect5"><span class="enumeration_section">34.1.1.2</span>数据库升级的身份验证注意事项</h5>
                     <div>
                        <p>从Oracle Database 12c第1版（12.1.0.1）之前的版本升级后，摘要式身份验证将附加到允许的身份验证机制列表中。但是，如果在升级之前启用了基本身份验证，那么它仍然是当前的身份验这是<span class="italic">唯一的</span>向后兼容性。
                        </p>
                        <div class="section">
                           <p>Oracle建议您的数据库管理员在升级后<span class="italic">尽快禁用基本身份验证</span> 。此类升级后基本身份验证仍然有效的原因是允许用户使用不支持摘要式身份验证的Web浏览器更改其密码。
                           </p>
                           <p>对于此类升级，将为所有<span class="italic">新</span>用户以及在升级期间<span class="italic">密码更改的</span>所有先前存在的<span class="italic">用户</span>计算摘要验证程序。其他用户<span class="italic">没有</span>摘要验证程序。
                           </p>
                           <p>升级后，DBA可以使用数据库视图<code class="codeph">DBA_DIGEST_VERIFIERS</code>来检查哪些用户具有摘要验证器并采取适当的操作，如下所示：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将<span class="italic">基本</span>身份验证配置为Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> <span class="italic">第一个</span>允许的身份验证机制。这可确保基本身份验证可用于HTTP访问。</span></li>
                           <li class="stepexpand"><span>使那些没有摘要验证程序的用户的所有密码都过期。此查询返回这些用户：</span><div><pre class="pre codeblock"><code>SELECT USERNAME FROM DBA_DIGEST_VERIFIERS WHERE HAS_DIGEST_VERIFIERS ='NO'且DIGEST_TYPE为NULL;</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>更改了所有此类用户的密码后，请配置<code class="codeph">xdbconfig.xml</code>以重新启用摘要作为第一个或（最好）唯一允许的身份验证机制。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A" title="各种身份验证注意事项适用于数据库安装，升级和降级。">数据库安装，升级和降级的身份验证注意事项</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB6113"></a><div class="props_rev_3"><a id="GUID-371739FA-6495-4080-B357-9C6CEAA6C3A2" name="GUID-371739FA-6495-4080-B357-9C6CEAA6C3A2"></a><h5 id="ADXDB-GUID-371739FA-6495-4080-B357-9C6CEAA6C3A2" class="sect5"><span class="enumeration_section">34.1.1.3</span>数据库降级的身份验证注意事项</h5>
                     <div>
                        <p>如果您降级到不支持摘要式身份验证的版本，则会禁用摘要式身份验证，并使其不可用作身份验证选项。</p>
                        <p>在降级期间，所有摘要验证器都将<span class="italic">被删除</span> 。这尤其意味着，如果降级之后是升级，那么在降级和后续升级之后，能够在降级之前进行身份验证的用户将被拒绝摘要式身份验证。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-5B2FAA2F-AFB3-48EA-9978-F08F0490612A" title="各种身份验证注意事项适用于数据库安装，升级和降级。">数据库安装，升级和降级的身份验证注意事项</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB6102"></a><div class="props_rev_3"><a id="GUID-1463FD08-D572-49FD-BFBF-CCB051667E25" name="GUID-1463FD08-D572-49FD-BFBF-CCB051667E25"></a><h4 id="ADXDB-GUID-1463FD08-D572-49FD-BFBF-CCB051667E25" class="sect4"><span class="enumeration_section">34.1.2</span>自动安装Oracle XML DB</h4>
                  <div>
                     <p>升级期间会自动安装Oracle XML DB。如果要使用Oracle XML DB，请确保兼容级别至少为12.1.0.1。</p>
                     <p>如果在升级到Oracle Database 12c第1版（12.1.0.1）或更高版本之前尚未在数据库中安装Oracle XML DB，则在升级期间会自动将其安装在表空间<code class="codeph">SYSAUX</code>中。
                     </p>
                     <p>如果已自动安装Oracle XML DB，并且如果要使用Oracle XML DB，则在升级操作之后，必须将数据库兼容性设置为至少12.1.0.1。如果兼容性小于12.1.0.1，则在尝试使用Oracle XML DB时会引发错误。</p>
                     <p>如果在升级期间自动安装了Oracle XML DB且当前兼容级别低于12.1.0.1，则在任何降级到先前版本期间会自动卸载Oracle DB。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" title="从Oracle Database 12c第1版（12.1.0.1）之前的版本开始，各种注意事项适用于Oracle数据库的所有升级。">升级或降级现有Oracle XML DB安装</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5704"></a><div class="props_rev_3"><a id="GUID-72F182D1-0318-4562-8087-DB0FFA4CFDA7" name="GUID-72F182D1-0318-4562-8087-DB0FFA4CFDA7"></a><h4 id="ADXDB-GUID-72F182D1-0318-4562-8087-DB0FFA4CFDA7" class="sect4"><span class="enumeration_section">34.1.3</span>验证ACL文档和配置文件</h4>
                  <div>
                     <p>在升级期间，现有ACL文档和Oracle XML DB配置文件将根据其XML模式进行验证。如果验证失败，那么您需要采取某些措施。</p>
                     <p>访问控制列表（ACL）文档存储在表<code class="codeph">XDB$ACL</code> 。 Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code>存储在表<code class="codeph">XDB$CONFIG</code> 。从Oracle Database 12c第1版（12.1.0.1）开始，这些表使用后解析（二进制XML）存储模型。这意味着ACL文档和配置文件将根据其各自的XML模式进行完全验证。验证在升级期间使用现有ACL文档和配置文件以及相应的现有XML模式进行。
                     </p>
                     <p>如果ACL文档在升级期间无法验证，则文档将移至表<code class="codeph">XDB$INVALID_ACL</code> 。</p>
                     <p>如果在升级期间验证配置文件<code class="codeph">xdbconfig.xml</code>失败，则该文件保存在表<code class="codeph">XDB$INVALID_CONFIG</code> ，默认配置文件将其替换为表<code class="codeph">XDB$CONFIG</code> ，并且数据库的<code class="codeph">XDB</code>组件标记为无效。然后，您必须在正常模式下启动数据库并修复<code class="codeph">XDB</code>组件，然后再尝试使用数据库。
                     </p>
                     <p>要修复<code class="codeph">XDB</code>组件，可以修复无效文件以使其有效，然后调用PL / SQL过程<code class="codeph">RecoverUpgrade</code> 。验证后，此过程将固定文件移动到表<code class="codeph">XDB$ACL</code>和<code class="codeph">XDB$CONFIG</code> ，并标记<code class="codeph">XDB</code>组件有效。
                     </p>
                     <p>作为选项，您可以将参数<code class="codeph">use_default</code>设置为<code class="codeph">TRUE</code>过程<code class="codeph">RecoverUpgrade</code>调用，以放弃任何无效文件。在这种情况下，任何有效文件都将移动到表<code class="codeph">XDB$ACL</code>和<code class="codeph">XDB$CONFIG</code> ，并删除任何剩余的无效文件。使用默认文件代替任何无效文件。对于ACL，使用默认ACL文档。对于配置文件，使用默认的<code class="codeph">xdbconfig.xml</code> （其中ACE顺序很重要）。
                     </p>
                     <div class="infoboxnote" id="GUID-72F182D1-0318-4562-8087-DB0FFA4CFDA7__GUID-8A33B58E-E184-4240-B7BE-D78E7D1CDB37">
                        <p class="notep1">警告：</p>
                        <p><span class="italic">仅</span>当您确定不再需要旧的ACL文件或无效的配置文件时， <code class="codeph">use_default</code>参数<code class="codeph">use_default</code>使用<code class="codeph">TRUE</code>值。这些文件已<span class="italic">删除</span> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" title="从Oracle Database 12c第1版（12.1.0.1）之前的版本开始，各种注意事项适用于Oracle数据库的所有升级。">升级或降级现有Oracle XML DB安装</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5708"></a><div class="props_rev_3"><a id="GUID-8D1BE3A4-5235-4E3D-9481-D822E6FDC46E" name="GUID-8D1BE3A4-5235-4E3D-9481-D822E6FDC46E"></a><h3 id="ADXDB-GUID-8D1BE3A4-5235-4E3D-9481-D822E6FDC46E" class="sect3"><span class="enumeration_section">34.2</span>使用Oracle Enterprise Manager管理Oracle XML DB</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager轻松执行Oracle XML DB管理任务。这包括配置Oracle XML DB;创建，搜索，编辑和删除XML模式， <code class="codeph">XMLType</code>表和视图，以及Oracle XML DB资源库<span class="italic">资源</span>及其<span class="italic">访问控制列表</span> （ACL）;注册XML模式;并创建基于函数的索引。
                  </p>
                  <p>有关使用Enterprise Manager执行以下任务的信息，请参阅Oracle Enterprise Manager提供的联机帮助：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>配置Oracle XML DB。查看或编辑Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。
                        </p>
                     </li>
                     <li>
                        <p>搜索，创建，编辑，取消删除Oracle XML DB资源库<span class="italic">资源</span>及其关联的<span class="italic">访问控制列表</span> （ACL）。
                        </p>
                     </li>
                     <li>
                        <p>搜索，创建，编辑和删除<code class="codeph">XMLType</code> <span class="italic">表</span>和<span class="italic">视图</span> 。
                        </p>
                     </li>
                     <li>
                        <p>搜索，创建，注册和删除<span class="italic">XML模式</span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-8D1BE3A4-5235-4E3D-9481-D822E6FDC46E__GUID-7C370F7E-F19D-4850-A0BF-A74E59A6CD73">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML DB通过配置文件xdbconfig.xml在内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。">配置Oracle XML DB使用xdbconfig.xml</a>获取有关在不使用Oracle Enterprise Manager的情况下配置Oracle XML DB的信息</p>
                        </li>
                        <li>
                           <p><a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库，</a>用于在不使用Oracle Enterprise Manager的情况下创建和管理资源的信息</p>
                        </li>
                        <li>
                           <p><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema是用于描述XML文档的内容和结构的标准。您可以注册，更新和删除与Oracle XML DB一起使用的XML架构。您可以定义用于基于XML模式的数据的存储结构，并将XML模式数据类型映射到SQL数据类型。">XML Schema Storage and Query：Basic，</a>用于在不使用Oracle Enterprise Manager的情况下操作XML模式的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">Oracle XML DB的管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5709"></a><div class="props_rev_3"><a id="GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" name="GUID-D1551B64-4A75-44CD-AA04-0A68018410AE"></a><h3 id="ADXDB-GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" class="sect3"><span class="enumeration_section">34.3</span>使用xdbconfig.xml配置Oracle XML DB</h3>
               <div>
                  <p>Oracle XML DB通过配置文件<code class="codeph">xdbconfig.xml</code>内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。
                  </p>
                  <p>可以在运行时修改配置文件。更新配置文件会创建此存储库资源的新版本。在每个会话开始时，配置文件的当前版本将绑定到该会话。除非您进行显式调用以将会话刷新到最新版本，否则会话将使用此配置文件版本。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB">Oracle XML DB配置文件，xdbconfig.xml</a><br>Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源<code class="codeph">xdbconfig.xml</code> ，该资源符合Oracle XML DB配置XML架构<code class="codeph">http://xmlns.oracle.com/xdb/xdbconfig.xsd</code> 。要配置或重新配置Oracle XML DB，请更新配置文件<code class="codeph">xdbconfig.xml</code> 。您需要管理员权限才能访问文件<code class="codeph">xdbconfig.xml</code> 。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">Oracle XML DB的管理</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5710"></a><div class="props_rev_3"><a id="GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" name="GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB"></a><h4 id="ADXDB-GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" class="sect4"><span class="enumeration_section">34.3.1</span> Oracle XML DB配置文件，xdbconfig.xml</h4>
                  <div>
                     <p>Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源<code class="codeph">xdbconfig.xml</code> ，该资源符合Oracle XML DB配置XML架构<code class="codeph">http://xmlns.oracle.com/xdb/xdbconfig.xsd</code> 。要配置或重新配置Oracle XML DB，请更新配置文件<code class="codeph">xdbconfig.xml</code> 。您需要管理员权限才能访问文件<code class="codeph">xdbconfig.xml</code> 。
                     </p>
                     <p>以下各节介绍了配置文件的结构。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-BE6705C8-17DB-4730-AA91-08878F6E7931">元素xdbconfig（顶级）</a><br>元素<code class="codeph">xdbconfig</code>是Oracle XML DB配置文件的顶级元素。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-9191745A-530B-4124-92A5-FD6C2BF92450">元素sysconfig（xdbconfig的子代）</a><br>元素<code class="codeph">sysconfig</code>是<code class="codeph">xdbconfig</code> 。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-BB03B882-4767-4685-9E7C-E2DE7709C6A0">元素userconfig（xdbconfig的子代）</a><br>元素<code class="codeph">userconfig</code>是<code class="codeph">xdbconfig</code> 。它包含您可能要添加的任何参数。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-4A6817FC-2460-4CD6-91C9-2102481B6842">元素protocolconfig（sysconfig的子代）</a><br>Element <code class="codeph">protocolconfig</code>是<code class="codeph">sysconfig</code>的子代。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B">元素httpconfig（protocolconfig的子代）</a><br>描述了元素<code class="codeph">httpconfig</code> ，它是<code class="codeph">protocolconfig</code>的子<code class="codeph">httpconfig</code> 。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-C4035945-583B-474E-97D1-A9C05DEF820D">元素servlet（httpconfig的后代）</a><br>元素<code class="codeph">servlet</code>是元素<code class="codeph">httpconfig</code>的后代。它用于配置servlet，包括Java servlet和嵌入式PL / SQL网关servlet。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-8EF64F1F-9EEE-44FB-9F78-F1A605019098">Oracle XML DB配置文件示例</a><br>提供了一个示例Oracle XML DB配置文件。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C">Oracle XML DB配置API</a><br>您可以像访问任何其他基于XML模式的资源一样访问Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。您可以使用FTP，HTTP（S），WebDAV，Oracle Enterprise Manager或任何用于Java，PL / SQL或C（OCI）的资源和文档对象模型（DOM）API。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-3031B88B-BD96-4508-8B2C-1BB67BA55732">从默认命名空间到模式位置的映射配置</a><br>Oracle XML DB提供了一种配置默认XML架构位置映射的机制。
                        </li>
                        <li class="ulchildlink"><a href="administration-of-XML-DB.html#GUID-03B51F0F-0896-4EDB-8423-093CDA63D86C">XML文件扩展的配置</a><br>Oracle XML DB Repository根据文件扩展名将某些文件视为XML文档。将此类文件插入存储库时，Oracle XML DB会预解析它们以标识XML架构位置（或使用默认映射（如果存在））并将文档插入相应的默认表中。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB__GUID-D39459A4-1CEB-4842-BAD8-42C47CABA288">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-6B384EEE-07D8-46AC-956C-1DF36159D23C" title="提供了文件xdbconfig.xsd的完整列表，其中包含用于配置Oracle XML DB的XML架构。">xdbconfig.xsd：用于配置Oracle XML DB的XML模式，</a>以获取Oracle XML DB配置XML模式的完整列表</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML DB通过配置文件xdbconfig.xml在内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。">使用xdbconfig.xml配置Oracle XML DB</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5711"></a><div class="props_rev_3"><a id="GUID-BE6705C8-17DB-4730-AA91-08878F6E7931" name="GUID-BE6705C8-17DB-4730-AA91-08878F6E7931"></a><h5 id="ADXDB-GUID-BE6705C8-17DB-4730-AA91-08878F6E7931" class="sect5"><span class="enumeration_section">34.3.1.1</span>元素xdbconfig（顶级）</h5>
                     <div>
                        <p>元素<code class="codeph">xdbconfig</code>是Oracle XML DB配置文件的顶级元素。
                        </p>
                        <div class="section">
                           <p>其结构如下：</p><pre class="pre codeblock"><code>&lt;xdbconfig&gt; &lt;sysconfig&gt; ... &lt;/ sysconfig&gt; &lt;userconfig&gt; ... &lt;/ userconfig&gt; &lt;/ xdbconfig&gt;</code></pre><p>Element <code class="codeph">sysconfig</code>定义特定于系统的内置参数。元素<code class="codeph">userconfig</code>允许您存储新的自定义参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5712"></a><div class="props_rev_3"><a id="GUID-9191745A-530B-4124-92A5-FD6C2BF92450" name="GUID-9191745A-530B-4124-92A5-FD6C2BF92450"></a><h5 id="ADXDB-GUID-9191745A-530B-4124-92A5-FD6C2BF92450" class="sect5"><span class="enumeration_section">34.3.1.2</span>元素sysconfig（xdbconfig的子代）</h5>
                     <div>
                        <p>元素<code class="codeph">sysconfig</code>是<code class="codeph">xdbconfig</code> 。
                        </p>
                        <div class="section">
                           <p>其结构如下：</p><pre class="pre codeblock"><code>&lt;sysconfig&gt; <span class="italic">常规参数</span> &lt;protocolconfig&gt; ... &lt;/ protocolconfig&gt; &lt;/ sysconfig&gt;</code></pre><p>元素<code class="codeph">sysconfig</code>包含几个适用于所有Oracle XML DB的常规参数作为内容，例如访问控制列表（ACL）的最大年龄。子元素<code class="codeph">protocolconfig</code>包含特定于协议的参数。
                           </p>
                           <div class="infoboxnote" id="GUID-9191745A-530B-4124-92A5-FD6C2BF92450__GUID-29C2E9A1-0BAE-4532-B178-DFD84C98E06A">
                              <p class="notep1">注意：</p>
                              <p>元素<code class="codeph">case-sensitive</code> ，元素<code class="codeph">sysconfig</code>子元素，对XQuery或全文搜索的区分大小写没有影响。否则，它会影响所有Oracle XML DB的行为。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5713"></a><div class="props_rev_3"><a id="GUID-BB03B882-4767-4685-9E7C-E2DE7709C6A0" name="GUID-BB03B882-4767-4685-9E7C-E2DE7709C6A0"></a><h5 id="ADXDB-GUID-BB03B882-4767-4685-9E7C-E2DE7709C6A0" class="sect5"><span class="enumeration_section">34.3.1.3</span>元素userconfig（xdbconfig的子代）</h5>
                     <div>
                        <p>元素<code class="codeph">userconfig</code>是<code class="codeph">xdbconfig</code> 。它包含您可能要添加的任何参数。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5714"></a><div class="props_rev_3"><a id="GUID-4A6817FC-2460-4CD6-91C9-2102481B6842" name="GUID-4A6817FC-2460-4CD6-91C9-2102481B6842"></a><h5 id="ADXDB-GUID-4A6817FC-2460-4CD6-91C9-2102481B6842" class="sect5"><span class="enumeration_section">34.3.1.4</span>元素协议配置（sysconfig的<span class="enumeration_section">子代</span> ）</h5>
                     <div>
                        <p>Element <code class="codeph">protocolconfig</code>是<code class="codeph">sysconfig</code>的子代。
                        </p>
                        <div class="section">
                           <p>其结构如下：</p><pre class="oac_no_warn" dir="ltr">&lt;protocolconfig&gt; &lt;common&gt; ... &lt;/ common&gt; &lt;ftpconfig&gt; ... &lt;/ ftpconfig&gt; &lt;httpconfig&gt; ... &lt;/ httpconfig&gt; &lt;/ protocolconfig&gt;</pre><p>在<code class="codeph">common</code>元素下，Oracle数据库存储适用于所有协议的参数，例如MIME类型信息。特定于协议FTP和HTTP（S）的参数分别位于元素<code class="codeph">ftpconfig</code>和<code class="codeph">httpconfig</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="您可以使用FTP和HTTP（S）/ WebDAV协议访问Oracle XML DB存储库数据。">使用协议的存储库访问</a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-4A6817FC-2460-4CD6-91C9-2102481B6842__GUID-C24031A7-33AE-49E0-91DE-265C01F3A564">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="repository-access-using-protocols.html#GUID-EB04CB87-ECAB-427B-9DB0-FC2CAB5A0C6D__BABJEIEG" title="该表描述了协议配置参数。">表28-1</a> ， <a href="repository-access-using-protocols.html#GUID-EB04CB87-ECAB-427B-9DB0-FC2CAB5A0C6D__G1029943" title="此表描述了特定于FTP的协议配置参数。">表28-2</a>和<a href="repository-access-using-protocols.html#GUID-EB04CB87-ECAB-427B-9DB0-FC2CAB5A0C6D__G1029959" title="此表描述了特定于HTTP或WebDAV的协议配置参数。">表28-3</a> ，列出了协议配置参数</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5715"></a><div class="props_rev_3"><a id="GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B" name="GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B"></a><h5 id="ADXDB-GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B" class="sect5"><span class="enumeration_section">34.3.1.5</span>元素httpconfig（protocolconfig的子代）</h5>
                     <div>
                        <p>描述了元素<code class="codeph">httpconfig</code> ，它是<code class="codeph">protocolconfig</code>的子<code class="codeph">httpconfig</code> 。
                        </p>
                        <div class="section">
                           <p>这是<code class="codeph">httpconfig</code>的结构：</p><pre class="pre codeblock"><code>&lt;httpconfig&gt; ...&lt;webappconfig&gt; ...&lt;servletconfig&gt; ...&lt;servlet-list&gt; &lt;servlet&gt; ... &lt;/ servlet&gt; ...&lt;/ servlet-list&gt; &lt;/ servletconfig&gt; &lt;/ webappconfig&gt; ...&lt;plsql&gt; ... &lt;/ plsql&gt; &lt;/ httpconfig&gt;</code></pre><p>元素<code class="codeph">httpconfig</code>除了其他元素<code class="codeph">httpconfig</code>还有以下子元素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">webappconfig</code> - 用于配置基于Web的应用程序。这包括特定于Web应用程序的参数，例如图标名称，应用程序的显示名称以及servlet列表。
                                 </p>
                                 <p>元素<code class="codeph">servletconfig</code>是<code class="codeph">webappconfig</code> ，用于定义servlet。它有子元素<code class="codeph">servlet-list</code> ，它有子元素<code class="codeph">servlet</code> （参见<a href="administration-of-XML-DB.html#GUID-C4035945-583B-474E-97D1-A9C05DEF820D" title="元素servlet是元素httpconfig的后代。它用于配置servlet，包括Java servlet和嵌入式PL / SQL网关servlet。">Element servlet（httpconfig的后代）</a> ）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">plsql</code> <a id="GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B__CHDJHBCH" name="GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B__CHDJHBCH" href="#GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B__CHDJHBCH" there="" are="" two="" different="" plsql="" elements="" that="" used="" to="" configure="" the="" embedded="" pl="" /sql="" gateway.="" one,="" a="" child="" of="" httpconfig,="" defines="" global="" parameters.="" other,="" servlet,="" dad="" attributes=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a> - 用于在配置<span class="italic">嵌入式PL / SQL网关</span>时定义全局配置参数。每个全局参数都使用<code class="codeph">plsql</code>的子元素定义。元素名称与全局参数名称相同。元素内容与参数值相同。
                                 </p>
                                 <p>配置嵌入式PL / SQL网关的推荐方法是使用PL / SQL包<code class="codeph">DBMS_EPG</code> ， <span class="italic">而不是</span>编辑文件<code class="codeph">xdbconfig.xml</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="您可以使用FTP和HTTP（S）/ WebDAV协议访问Oracle XML DB存储库数据。">使用协议的存储库访问</a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B__GUID-848A282E-E26D-401A-945E-4FAED054D195">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="repository-access-using-protocols.html#GUID-EB04CB87-ECAB-427B-9DB0-FC2CAB5A0C6D__BABJEIEG" title="该表描述了协议配置参数。">表28-1</a> ， <a href="repository-access-using-protocols.html#GUID-EB04CB87-ECAB-427B-9DB0-FC2CAB5A0C6D__G1029943" title="此表描述了特定于FTP的协议配置参数。">表28-2</a>和<a href="repository-access-using-protocols.html#GUID-EB04CB87-ECAB-427B-9DB0-FC2CAB5A0C6D__G1029959" title="此表描述了特定于HTTP或WebDAV的协议配置参数。">表28-3</a> ，列出了协议配置参数</p>
                              </li>
                              <li>
                                 <p>有关配置和使用嵌入式PL / SQL网关的完整信息，请<a href="../adfns/web-applications.html#ADFNS015" target="_blank"><span><cite>参见“Oracle数据库开发指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关包<code class="codeph">DBMS_EPG</code>信息，请<a href="../arpls/DBMS_EPG.html#ARPLS193" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5716"></a><div class="props_rev_3"><a id="GUID-C4035945-583B-474E-97D1-A9C05DEF820D" name="GUID-C4035945-583B-474E-97D1-A9C05DEF820D"></a><h5 id="ADXDB-GUID-C4035945-583B-474E-97D1-A9C05DEF820D" class="sect5"><span class="enumeration_section">34.3.1.6</span>元素servlet（httpconfig的后代）</h5>
                     <div>
                        <p>元素<code class="codeph">servlet</code>是元素<code class="codeph">httpconfig</code>的后代。它用于配置servlet，包括Java servlet和嵌入式PL / SQL网关servlet。
                        </p>
                        <div class="section">
                           <p>请参阅<a href="administration-of-XML-DB.html#GUID-67C929FC-52FC-4972-BD5F-B663E5B35C4B" title="描述了元素httpconfig，它是protocolconfig的子节点。">Element httpconfig（protocolconfig的子代）</a> 。
                           </p>
                           <div class="infoboxnote" id="GUID-C4035945-583B-474E-97D1-A9C05DEF820D__GUID-B9F89A8E-8595-4F9C-BE99-01EE88BEBB71">
                              <p class="notep1">注意：</p>
                              <p>以下servlet在文件<code class="codeph">xdbconfig.xml</code>中预先配置。<span class="italic">不要</span>删除它们。
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">ORSServlet</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">EMExpressServlet</code></p>
                                 </li>
                              </ul>
                           </div>
                           <p>可选元素<code class="codeph">plsql</code>是<code class="codeph">servlet <a id="fnsrc_d166715e1595" name="fnsrc_d166715e1595" href="#fnsrc_d166715e1595" there="" are="" two="" different="" plsql="" elements="" that="" used="" to="" configure="" the="" embedded="" pl="" /sql="" gateway.="" one,="" a="" child="" of="" httpconfig,="" defines="" global="" parameters.="" other,="" servlet,="" dad="" attributes=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></code>子元素，用于配置嵌入式PL / SQL网关servlet。但是， <span class="italic">建议的</span>配置嵌入式网关的方法是使用PL / SQL包<code class="codeph">DBMS_EPG</code> ， <span class="italic">而不是</span>编辑文件<code class="codeph">xdbconfig.xml</code> 。
                           </p>
                           <p>元素<code class="codeph">plsql</code>具有配置嵌入式网关所需的每个嵌入式PL / SQL DAD属性<a id="fn_2" name="fn_2" href="#fn_2" dad="" is="" an="" abbreviation="" for="" database="" access="" descriptor.="" attributes="" are="" parameters="" that="" define="" such="" a="" descriptor=")" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a>的子元素。所有这些孩子都是可选的。元素名称与DAD属性名称相同。元素内容与DAD属性值相同。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C4035945-583B-474E-97D1-A9C05DEF820D__GUID-2A8199BD-241D-4A7C-B032-5FD715310829">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关配置Java servlet的信息，请参阅<a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="提供了使用Java编写Oracle XML DB应用程序的设计指南。这包括为Oracle XML DB编写和配置Java servlet的准则。">Java中的Oracle XML DB应用程序指南</a></p>
                              </li>
                              <li>
                                 <p>有关配置和使用嵌入式PL / SQL网关的完整信息，请<a href="../adfns/web-applications.html#ADFNS015" target="_blank"><span><cite>参见“Oracle数据库开发指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关Oracle Application Express的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=HTMDB" target="_blank"><span><span><cite>“Oracle Application Express App Builder用户指南”</cite></span></span></a></p>
                              </li>
                              <li>
                                 <p>有关包<code class="codeph">DBMS_EPG</code>信息，请<a href="../arpls/DBMS_EPG.html#ARPLS193" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5718"></a><a id="ADXDB5717"></a><div class="props_rev_3"><a id="GUID-8EF64F1F-9EEE-44FB-9F78-F1A605019098" name="GUID-8EF64F1F-9EEE-44FB-9F78-F1A605019098"></a><h5 id="ADXDB-GUID-8EF64F1F-9EEE-44FB-9F78-F1A605019098" class="sect5"><span class="enumeration_section">34.3.1.7</span> Oracle XML DB配置文件示例</h5>
                     <div>
                        <p>提供了一个示例Oracle XML DB配置文件。</p>
                        <div class="example" id="GUID-8EF64F1F-9EEE-44FB-9F78-F1A605019098__GUID-50F6D12A-E4E8-4C02-9C73-D83FDCFA1ED3">
                           <p class="titleinexample">示例34-1 Oracle XML DB配置文件</p><pre class="pre codeblock"><code>&lt;xdbconfig xmlns =“http://xmlns.oracle.com/xdb/xdbconfig.xsd”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：schemaLocation =“http：/ /xmlns.oracle.com/xdb/xdbconfig.xsd http://xmlns.oracle.com/xdb/xdbconfig.xsd“&gt; &lt;sysconfig&gt; &lt;acl-max-age&gt; 900 &lt;/ acl-max-age&gt; &lt;acl -cache-size&gt; 32 &lt;/ acl-cache-size&gt; &lt;invalid-pathname-chars&gt;，&lt;/ invalid-pathname-chars&gt; &lt;区分大小写&gt; true &lt;/ case-sensitive&gt; &lt;call-timeout&gt; 300 &lt;/ call-timeout&gt; &lt;max-link-queue&gt; 65536 &lt;/ max-link-queue&gt; &lt;max-session-use&gt; 100 &lt;/ max-session-use&gt; &lt;persistent-sessions&gt; false &lt;/ persistent-sessions&gt; &lt;default -lock-timeout&gt; 3600 &lt;/ default-lock-timeout&gt; &lt;xdbcore-logfile-path&gt; /sys/log/xdblog.xml &lt;/ xdbcore-logfile-path&gt; &lt;xdbcore-log-level&gt; 0 &lt;/ xdbcore-log -level&gt; &lt;resource-view-cache-size&gt; 1048576 &lt;/ resource-view-cache-size&gt; &lt;protocolconfig&gt; &lt;common&gt; &lt;extension-mappings&gt; &lt;mime-mappings&gt; &lt;mime-mapping&gt; &lt;extension&gt; au &lt;/扩展&gt; &lt;mime-type&gt; audio / basic &lt;/ mime-type&gt; &lt;/ mime-mapping&gt; &lt;mime-mapping&gt; &lt;extension&gt; avi &lt;/ extension&gt; &lt;mime-type&gt; video / x-msvideo &lt;/ mime-type &gt; &lt;/ mime-mapping&gt; &lt;mime-mapping&gt; &lt;extension&gt; bin &lt;/ extension&gt; &lt;mime-type&gt; application / octet-stream &lt;/ mime-type&gt; &lt;/ mime-mapping&gt; &lt;/ mime-mappings&gt; &lt;lang -mappings&gt; &lt;lang-mapping&gt; &lt;extension&gt; en &lt;/ extension&gt; &lt;lang&gt; english &lt;/ lang&gt; &lt;/ lang-mapping&gt; &lt;/ lang-mappings&gt; &lt;charset-mappings&gt; &lt;/ charset-mappings&gt; &lt;encoding-映射&gt; &lt;encoding-mapping&gt; &lt;extension&gt; gzip &lt;/ extension&gt; &lt;encoding&gt; zip文件&lt;/ encoding&gt; &lt;/ encoding-mapping&gt; &lt;encoding-mapping&gt; &lt;extension&gt; tar &lt;/ extension&gt; &lt;encoding&gt; tar file &lt;/ encoding&gt; &lt;/ encoding-mapping&gt; &lt;/ encoding-mappings&gt; &lt;/ extension-mappings&gt; &lt;session-pool-size&gt; 50 &lt;/ session-pool-size&gt; &lt;session-timeout&gt; 6000 &lt;/ session-timeout&gt; &lt;/ common&gt; &lt;ftpconfig&gt; &lt;ftp-port&gt; 2100 &lt;/ ftp-port&gt; &lt;ftp-listener&gt; local_listener &lt;/ ftp-listener&gt; &lt;ftp-protocol&gt; tcp &lt;/ ftp-protocol&gt; &lt;logfile-path&gt; / sys / log /ftplog.xml &lt;/ logfile-path&gt; &lt;log-level&gt; 0 &lt;/ log-level&gt; &lt;session-timeout&gt; 6000 &lt;/ session-timeout&gt; &lt;buffer-size&gt; 8192 &lt;/ buffer-size&gt; &lt;/ ftpconfig&gt; &lt;httpconfig&gt; &lt;http-port&gt; 8080 &lt;/ http-port&gt; &lt;http-listener&gt; local_listener &lt;/ http-listener&gt; &lt;http-protocol&gt; tcp &lt;/ http-protocol&gt; &lt;max-http-headers&gt; 64 &lt;/ max-http-headers&gt; &lt;session-timeout&gt; 6000 &lt;/ session-timeout&gt; &lt;server-name&gt; XDB HTTP Server &lt;/ server-name&gt; &lt;max-header-size&gt; 16384 &lt;/ max-header-size&gt; &lt;max-request-body&gt; 2000000000 &lt;/ max-request-body&gt; &lt;logfile-path&gt; /sys/log/httplog.xml &lt; / logfile-path&gt; &lt;log-level&gt; 0 &lt;/ log-level&gt; &lt;servlet-realm&gt; Basic realm =“XDB”&lt;/ servlet-realm&gt; &lt;webappconfig&gt; &lt;welcome-file-list&gt; &lt;welcome-file&gt; index .html &lt;/ welcome-file&gt; &lt;welcome-file&gt; index.htm &lt;/ welcome-file&gt; &lt;/ welcome-file-list&gt; &lt;error-pages&gt; &lt;/ error-pages&gt; &lt;servletconfig&gt; &lt;servlet-mappings&gt; &lt; servlet-mapping&gt; &lt;servlet-pattern&gt; / oradb / * &lt;/ servlet-pattern&gt; &lt;servlet-name&gt; DBURIServlet &lt;/ servlet-name&gt; &lt;/ servlet-mapping&gt; &lt;/ servlet-mappings&gt; &lt;servlet-list&gt; &lt;servlet &gt; &lt;servlet-name&gt; DBURIServlet &lt;/ servlet-name&gt; &lt;display-name&gt; DBURI &lt;/ display-name&gt; &lt;servlet-language&gt; C &lt;/ servlet-language&gt; &lt;description&gt;用于访问DBURI的Servlet &lt;/ description&gt; &lt;security -role-ref&gt; &lt;role-name&gt; authenticatedUser &lt;/ role-name&gt; &lt;role-link&gt; authenticatedUser &lt; / role-link&gt; &lt;/ security-role-ref&gt; &lt;/ servlet&gt; &lt;/ servlet-list&gt; &lt;/ servletconfig&gt; &lt;/ webappconfig&gt; &lt;/ httpconfig&gt; &lt;/ protocolconfig&gt; &lt;xdbcore-xobmem-bound&gt; 1024 &lt;/ xdbcore -xobmem-bound&gt; &lt;xdbcore-loadableunit-size&gt; 16 &lt;/ xdbcore-loadableunit-size&gt; &lt;/ sysconfig&gt; &lt;/ xdbconfig&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5720"></a><a id="ADXDB5719"></a><div class="props_rev_3"><a id="GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C" name="GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C"></a><h5 id="ADXDB-GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C" class="sect5"><span class="enumeration_section">34.3.1.8</span> Oracle XML DB配置API</h5>
                     <div>
                        <p>您可以像访问任何其他基于XML模式的资源一样访问Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。您可以使用FTP，HTTP（S），WebDAV，Oracle Enterprise Manager或任何用于Java，PL / SQL或C（OCI）的资源和文档对象模型（DOM）API。
                        </p>
                        <p>为方便起见，您可以使用PL / SQL包<code class="codeph">DBMS_XDB_CONFIG</code>包进行配置访问。它公开了以下功能和程序：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">cfg_get</code> - 返回当前会话的配置信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">cfg_refresh</code> - 使用当前配置文件刷新会话配置信息。<code class="codeph">cfg_refresh</code>典型用法包括以下内容：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>您已修改配置，现在希望会话获取最新版本的配置信息。</p>
                                 </li>
                                 <li>
                                    <p>它是一个长时间运行的会话，配置已被并发会话修改，并且您希望当前会话获取最新版本的配置信息。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">cfg_update</code> - 更新配置信息，编写配置文件。执行<code class="codeph">COMMIT</code> 。
                              </p>
                           </li>
                        </ul>
                        <p><a href="administration-of-XML-DB.html#GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C__CACHDDGI">例34-2</a>更新配置文件中的参数<code class="codeph">ftp-port</code>和<code class="codeph">http-port</code> 。
                        </p>
                        <p>如果要更新许多参数，则可以更轻松地使用FTP，HTTP（S）或Oracle Enterprise Manager更新配置。</p>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C__GUID-20B7AADE-03A4-4255-A529-D1ED5F78BF34">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../arpls/DBMS_XDB.html#ARPLS371" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-BCDB503F-14D1-4538-92B8-BF478B8C872C__CACHDDGI">
                           <p class="titleinexample">示例34-2使用CFG_UPDATE和CFG_GET更新配置文件</p><pre class="pre codeblock"><code>DECLARE v_cfg XMLType; BEGIN SELECT XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/xdbconfig.xsd”; copy $ i：= $ cfg modify for $ j in $ i / xdbconfig return（替换node $的值） j / descendant :: ftp-port with“2121”，将$ j / descendant :: http-port的值替换为“19090”）返回$ i'PASSING <span class="bold">DBMS_XDB_CONFIG.cfg_get</span> （）AS“cfg”RETURNING CONTENT）INTO v_cfg来自双重; DBMS_XDB_CONFIG。 <span class="bold">cfg_update</span> （v_cfg）;结束; /</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="PLSQL-access-to-XML-DB-repository.html#GUID-604DDCE1-456D-4EC7-8B76-3110E3A6DD89" title="PL / SQL包DBMS_XDB_CONFIG提供Oracle XML DB配置管理功能和过程。">DBMS_XDB_CONFIG：配置管理</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5721"></a><div class="props_rev_3"><a id="GUID-3031B88B-BD96-4508-8B2C-1BB67BA55732" name="GUID-3031B88B-BD96-4508-8B2C-1BB67BA55732"></a><h5 id="ADXDB-GUID-3031B88B-BD96-4508-8B2C-1BB67BA55732" class="sect5"><span class="enumeration_section">34.3.1.9</span>从默认命名空间到模式位置的映射配置</h5>
                     <div>
                        <p>Oracle XML DB提供了一种配置默认XML架构位置映射的机制。</p>
                        <p>Oracle XML DB通过预解析输入XML文档来识别基于XML Schema的<code class="codeph">XMLType</code>实例。如果找到适当的<code class="codeph">xsi:schemaLocation</code>或<code class="codeph">xsi:noNamespaceSchemaLocation</code>属性，则使用指定的架构位置URL来查阅已注册的架构。
                        </p>
                        <p>如果未找到适当的<code class="codeph">xsi:</code>属性，则认为XML文档是非基于模式的。Oracle XML DB提供了一种配置默认架构位置映射的机制。如果未在XML文档中指定适当的<code class="codeph">xsi:</code>属性，则使用默认架构位置映射。
                        </p>
                        <p>Oracle XML DB配置XML模式<code class="codeph">xdbconfig.xsd</code>元素<code class="codeph">schemaLocation-mappings</code>可用于指定<span class="italic"><code class="codeph">(namespace, element)</code></span>对与默认模式位置之间的映射。如果<span class="italic"><code class="codeph">element</code></span>值为空，则映射将应用于指定命名空间中的所有全局元素。如果<span class="italic"><code class="codeph">namespace</code></span>值为空，则它对应于null名称空间。
                        </p>
                        <p><code class="codeph">schemaLocation-mappings</code>元素的定义如下：</p><pre class="pre codeblock"><code>&lt;element name =“schemaLocation-mappings”type =“xdbc：schemaLocation-mapping-type”minOccurs =“0”/&gt; &lt;complexType name =“schemaLocation-mapping-type”&gt; &lt;sequence&gt; &lt;element name =“schemaLocation-mapping “minOccurs =”0“maxOccurs =”unbounded“&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =”namespace“type =”string“/&gt; &lt;element name =”element“type =”string“/&gt; &lt;element name = “schemaURL”type =“string”/&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ sequence&gt; &lt;/ complexType&gt;</code></pre><p>使用的模式位置取决于Oracle XML DB配置文件中使用的命名空间和根文档元素的映射。例如，假设文档没有适当的<code class="codeph">xsi:</code>属性来指示架构位置。考虑命名空间<span class="italic">N中</span>的文档根元素<span class="italic">R.</span>用于标识默认模式位置的算法如下：</p>
                        <ol>
                           <li>
                              <p>如果Oracle XML DB配置文件具有<span class="italic">N</span>和<span class="italic">R</span>的映射，则使用相应的模式位置。
                              </p>
                           </li>
                           <li>
                              <p>如果配置文件具有<span class="italic">N</span>但不是<span class="italic">R</span>的映射，则使用<span class="italic">N</span>的模式位置。
                              </p>
                           </li>
                           <li>
                              <p>如果文档根<span class="italic">R</span>没有任何名称空间，则使用<span class="italic">R</span>的模式位置。
                              </p>
                           </li>
                        </ol>
                        <p>例如，假设您的Oracle XML DB配置文件包含以下映射：</p><pre class="pre codeblock"><code>&lt;schemaLocation-mappings&gt; &lt;schemaLocation-mapping&gt; &lt;namespace&gt; http://www.oracle.com/example &lt;/ namespace&gt; &lt;element&gt; <span class="bold">root</span> &lt;/ element&gt; &lt;schemaURL&gt; http://www.oracle.com/example /sch.xsd &lt;/ schemaURL&gt; &lt;/ schemaLocation-mapping&gt; &lt;schemaLocation-mapping&gt; &lt;namespace&gt; http://www.oracle.com/example2 &lt;/ namespace&gt; &lt;element&gt; &lt;/ element&gt; &lt;schemaURL&gt; http：/ /www.oracle.com/example2/sch.xsd &lt;/ schemaURL&gt; &lt;/ schemaLocation-mapping&gt; &lt;schemaLocation-mapping&gt; &lt;namespace&gt; &lt;/ namespace&gt; &lt;element&gt; <span class="bold">specialRoot</span> &lt;/ element&gt; &lt;schemaURL&gt; http：// www .oracle.com / example3 / sch.xsd &lt;/ schemaURL&gt; &lt;/ schemaLocation-mapping&gt; &lt;/ schemaLocation-mappings&gt;</code></pre><p>使用以下架构位置：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>根元素= <code class="codeph">root</code></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Namespace = <code class="codeph">http://www.oracle.com/example</code></p>
                                 </li>
                                 <li>
                                    <p>架构URL = <code class="codeph">http://www.oracle.com/example/sch.xsd</code></p>
                                 </li>
                              </ul>
                              <p>实例文档指定时使用此映射：</p><pre class="oac_no_warn" dir="ltr">&lt;root xmlns =“http://www.oracle.com/example”&gt;</pre></li>
                           <li>
                              <p>Root element = <code class="codeph">null</code> （命名空间中的任何全局元素）</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Namespace = <code class="codeph">http://www.oracle.com/example2</code></p>
                                 </li>
                                 <li>
                                    <p>架构URL = <code class="codeph">http://www.oracle.com/example2/sch.xsd</code></p>
                                 </li>
                              </ul>
                              <p>实例文档指定时使用此映射：</p><pre class="oac_no_warn" dir="ltr">&lt;root xmlns =“http：//www.oracle.example2”&gt;</pre></li>
                           <li>
                              <p>根元素= <code class="codeph">specialRoot</code></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Namespace = <code class="codeph">null</code> （即null命名空间）</p>
                                 </li>
                                 <li>
                                    <p>架构URL = <code class="codeph">http://www.oracle.com/example3/sch.xsd</code></p>
                                 </li>
                              </ul>
                              <p>实例文档指定时使用此映射：</p><pre class="pre codeblock"><code>&lt;specialRoot&gt;</code></pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-3031B88B-BD96-4508-8B2C-1BB67BA55732__GUID-FF3FBD3F-DFF0-40F1-ADEC-F06E9CFFB46E">
                           <p class="notep1">注意：</p>
                           <p>此功能仅在服务器端可用，即在服务器上解析XML时。如果在客户端解析XML，则仍需要相应的<code class="codeph">xsi:</code>属性。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5722"></a><div class="props_rev_3"><a id="GUID-03B51F0F-0896-4EDB-8423-093CDA63D86C" name="GUID-03B51F0F-0896-4EDB-8423-093CDA63D86C"></a><h5 id="ADXDB-GUID-03B51F0F-0896-4EDB-8423-093CDA63D86C" class="sect5"><span class="enumeration_section">34.3.1.10</span> XML文件扩展<span class="enumeration_section">名的</span>配置</h5>
                     <div>
                        <p>Oracle XML DB Repository根据文件扩展名将某些文件视为XML文档。将此类文件插入存储库时，Oracle XML DB会预解析它们以标识XML架构位置（或使用默认映射（如果存在））并将文档插入相应的默认表中。</p>
                        <p>默认情况下，以下扩展名被视为XML文件扩展名： <span class="bold"><code class="codeph">xml</code></span> ， <span class="bold"><code class="codeph">xsd</code></span> ， <span class="bold"><code class="codeph">xsl</code></span> ， <span class="bold"><code class="codeph">xlt</code></span> 。此外，Oracle XML DB为应用程序提供了一种机制，可将其他文件扩展名指定为XML文件扩展名。<span class="bold"><code class="codeph">xml-extensions</code></span>元素在配置模式<code class="codeph">http://xmlns.oracle.com/xdb/xdbconfig.xsd</code>定义，如下所示：</p><pre class="pre codeblock"><code>&lt;element name =“xml-extensions”type =“xdbc：xml-extension-type”minOccurs =“0”/&gt; &lt;complexType name =“xml-extension-type”&gt; &lt;sequence&gt; &lt;element name =“extension”type =“xdbc：exttype”minOccurs =“0”maxOccurs =“unbounded”&gt; &lt;/ element&gt; &lt;/ sequence&gt; &lt;/ complexType&gt;</code></pre><p>例如，Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code>的以下片段指定具有扩展名<code class="codeph">vsd</code> ， <code class="codeph">vml</code>和<code class="codeph">svgl</code>文件应被视为XML文件：</p><pre class="pre codeblock"><code>&lt;xml-extensions&gt; &lt;extension&gt; vsd &lt;/ extension&gt; &lt;extension&gt; vml &lt;/ extension&gt; &lt;extension&gt; svgl &lt;/ extension&gt; &lt;/ xml-extensions&gt;</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-B51D6B89-A584-4728-90A8-45BBAA1730CB" title="Oracle XML DB的配置已定义并存储在Oracle XML DB存储库资源xdbconfig.xml中，该资源符合Oracle XML DB配置XML架构http://xmlns.oracle.com/xdb/xdbconfig.xsd。要配置或重新配置Oracle XML DB，请更新配置文件xdbconfig.xml。您需要管理员权限才能访问文件xdbconfig.xml。">Oracle XML DB配置文件xdbconfig.xml</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB6099"></a><div class="props_rev_3"><a id="GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9" name="GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9"></a><h3 id="ADXDB-GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9" class="sect3"><span class="enumeration_section">34.4</span> Oracle XML DB和数据库整合</h3>
               <div>
                  <p>每个可插拔数据库都有自己的Oracle XML DB存储库和自己的Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。
                  </p>
                  <p>多租户容器数据库（CDB）由零个或多个可插拔数据库（PDB），根和种子PDB（用于创建PDB的模板）组成。给定的PDB一次只能与一个CDB相关联。PDB对用户和应用程序显示为单独的数据库。您的应用程序始终与单个PDB进行交互。查询和字典视图是PDB的本地视图。每个PDB都有自己的Oracle XML DB存储库和自己的Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code> 。
                  </p>
                  <p>CDB的根（ <code class="codeph">CDB$ROOT</code> ）不包含用户数据。但是，它有自己的配置文件<code class="codeph">xdbconfig.xml</code> 。
                  </p>
                  <p>CDB的根配置文件只有某些参数，这些参数仅用于根配置文件。如果这些参数中的任何一个也存在于作为CDB一部分的PDB的配置文件中，则忽略它们以支持根配置文件中的相应参数。</p>
                  <p>这些是从根使用的配置参数（并从任何PDB中忽略）：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ACL缓存大小</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ACL-max-age的</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">资源观高速缓存大小</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">xdbcore-loadableunit尺寸</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">xdbcore-xobmem绑定</code></p>
                     </li>
                  </ul>
                  <p>参数<code class="codeph">xdbcore-loadableunit-size</code>和<code class="codeph">xdbcore-xobmem-bound</code>是特定于进程的。其他是SGA配置参数。
                  </p>
                  <p>数据库模式（用户帐户） <code class="codeph">XDB</code>是一个普通用户，这意味着它可以连接到根和任何PDB，并在其中执行操作。
                  </p>
                  <div class="infoboxnote" id="GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9__GUID-7D9ED3B4-4B66-48FF-AF24-A2662B9A6655">
                     <p class="notep1">注意：</p>
                     <p>Oracle建议您在任何情况下都不要解锁数据库模式XDB。</p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9__GUID-1507D4B4-26CD-4232-A748-009226668678">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关数据库合并和PDB的信息，请参阅<a href="../multi/overview-of-managing-a-multitenant-environment.html#ADMIN13508" target="_blank"><span><cite>“Oracle多租户管理员指南”</cite></span></a>和“ <a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89235" target="_blank"><span><cite>Oracle多租户管理员指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关配置参数的信息，请参阅<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2" title="提供了用于提高资源创建和查询等存储库操作性能的指南。">Oracle XML DB存储库操作的性能指南</a> <code class="codeph">resource-view-cache-size</code> ， <code class="codeph">xdbcore-loadableunit-size</code>和<code class="codeph">xdbcore-xobmem-bound</code></p>
                        </li>
                        <li>
                           <p>有关配置参数的信息<a href="XML-Schema-and-query-object-relational-storage.html#GUID-32930A3C-AFD4-4950-94B6-B26ACAFBC70D" title="Oracle XML DB配置文件xdbconfig.xml具有控制加载操作使用的内存量的参数：xdbcore-loadableunit-size和xdbcore-xobmem-bound。">，请加载和检索带有集合的大型文档的注意事项</a> <code class="codeph">xdbcore-loadableunit-size</code>和<code class="codeph">xdbcore-xobmem-bound</code></p>
                        </li>
                        <li>
                           <p><a href="repository-access-control.html#GUID-A7903BE5-C081-40A9-B778-99289AB08E84" title="由于ACL会检查每次访问它们保护的数据，因此ACL检查操作的性能对此类数据（包括Oracle XML DB存储库资源）的性能至关重要。在Oracle XML DB中，通过使用多个缓存来实现此存储库操作所需的性能。">ACL缓存</a>有关配置参数<code class="codeph">acl-max-age</code></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">Oracle XML DB的管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6018"></a><a id="ADXDB6017"></a><div class="props_rev_3"><a id="GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232" name="GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232"></a><h3 id="ADXDB-GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232" class="sect3"><span class="enumeration_section">34.5</span>包DBMS_XDB_ADMIN</h3>
               <div>
                  <p>PL / SQL包<code class="codeph">DBMS_XDB_ADMIN</code>具有用于管理和配置Oracle XML DB和Oracle XML DB存储库的子程序。
                  </p>
                  <p><a href="administration-of-XML-DB.html#GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232__CHDFCGHD" title="此表描述了DBMS_XDB资源管理方法。">表34-1</a>介绍了这些子程序。
                  </p>
                  <div class="tblformalwide" id="GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232__CHDFCGHD">
                     <p class="titleintable">表34-1 DBMS_XDB_ADMIN管理过程</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="DBMS_XDB_ADMIN管理程序" width="100%" border="1" summary="This table describes DBMS_XDB resource management methods." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d166715e2374">功能/程序</th>
                              <th align="left" valign="bottom" width="70%" id="d166715e2377">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d166715e2382" headers="d166715e2374 ">
                                 <p><code class="codeph">moveXDB_tablespace</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d166715e2382 d166715e2377 ">
                                 <p>将数据库架构（用户帐户） <code class="codeph">XDB</code>到指定的表空间。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d166715e2393" headers="d166715e2374 ">
                                 <p><code class="codeph">rebuildHierarchicalIndex</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d166715e2393 d166715e2377 ">
                                 <p>重建分层存储库索引。这可能是不时需要的，特别是在调用<code class="codeph">moveXDB_tablespace</code> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnote" id="GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232__GUID-C63C0B48-AF23-40E4-AD64-56E0F97AD1AD">
                     <p class="notep1">注意：</p>
                     <p>在Oracle Database 11g第2版（11.2.0.3）之前，这些过程属于PL / SQL包<code class="codeph">DBMS_XDB</code> 。从版本11.2.0.3 <code class="codeph">DBMS_XDB</code> ， <span class="italic">不推荐使用</span> <code class="codeph">DBMS_XDB</code>包中的这两个过程。
                     </p>
                  </div>
                  <div class="infoboxnote" id="GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232__GUID-2B44D694-441F-40D4-BB88-05EAF7A72D82">
                     <p class="notep1">注意：</p>
                     <p>包含Oracle XML DB存储库的表空间<span class="italic">不能</span>是只读的，因为这会对XML操作产生负面影响。
                     </p>
                     <p>默认情况下，Oracle XML DB Repository驻留在表空间<code class="codeph">SYSAUX</code> ，该表空间也用于其他内容。相反，Oracle建议您创建专用表空间，仅供存储库使用。
                     </p>
                     <p>使用过程<code class="codeph">DBMS_XDB_ADMIN.moveXDB_tablespace</code>将数据库模式<code class="codeph">XDB</code>移动到专用于存储库的表空间。确保表空间不是只读的。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232__GUID-2CEF6BFA-BB4E-48B4-9FE8-F20A6ED1C196">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_XDB_ADMIN.html#ARPLS214" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">Oracle XML DB的管理</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p>有两个不同的<code class="codeph">plsql</code>元素用于配置嵌入式PL / SQL网关。一个是<code class="codeph">httpconfig</code>的子<code class="codeph">httpconfig</code> ，它定义了<span class="italic">全局参数</span> 。另一个是<code class="codeph">servlet</code>的子<code class="codeph">servlet</code> ，它定义了<span class="italic">DAD属性</span> 。
            </p><br>脚注2：<p>DAD是数据库访问描述符的缩写。DAD属性是定义这种描述符的参数。</p><br></div>
      </article>
   </body>
</html><html id="10355.AUDIT-Traditional-Auditing.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>审计（传统审计）</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ASSOCIATE-STATISTICS.html" title="Previous" type="text/html"></link>
      <link rel="next" href="AUDIT-Unified-Auditing.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ASSOCIATE-STATISTICS.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="AUDIT-Unified-Auditing.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ALTER-SYNONYM-to-COMMENT.html" property="item" typeof="WebPage"><span property="name">SQL语句：ALTER SYNONYM to COMMENT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">审计（传统审计）</li>
            </ol>
            <a id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD" name="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD"></a><a id="SQLRF53708"></a><a id="SQLRF53709"></a><a id="SQLRF53710"></a><a id="SQLRF53711"></a><a id="SQLRF53712"></a><a id="SQLRF53713"></a><a id="SQLRF53714"></a><a id="SQLRF53715"></a><a id="SQLRF53716"></a><a id="SQLRF53717"></a><a id="SQLRF53718"></a><a id="SQLRF53719"></a><a id="SQLRF53721"></a><a id="SQLRF53723"></a><a id="SQLRF53724"></a><a id="SQLRF53725"></a><a id="SQLRF53726"></a><a id="SQLRF53727"></a><a id="SQLRF53728"></a><a id="SQLRF53729"></a><a id="SQLRF53730"></a><a id="SQLRF53731"></a><a id="SQLRF55780"></a><a id="SQLRF53732"></a><a id="SQLRF56075"></a><a id="SQLRF53733"></a><a id="SQLRF55571"></a><a id="SQLRF53734"></a><a id="SQLRF56171"></a><a id="SQLRF53735"></a><a id="SQLRF53736"></a><a id="SQLRF53737"></a><a id="SQLRF53738"></a><a id="SQLRF53739"></a><a id="SQLRF53740"></a><a id="SQLRF53741"></a><a id="SQLRF53742"></a><a id="SQLRF53743"></a><a id="SQLRF53744"></a><a id="SQLRF53745"></a><a id="SQLRF01107"></a>
            
            <h2 id="SQLRF-GUID-ADF45B07-547A-4096-8144-50241FA2D8DD" class="sect2">审计（传统审计）</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>本节介绍<span class="bold">传统</span> <span class="bold">审计</span>的<code class="codeph">AUDIT</code>语句，该语句与早于Oracle Database 12 <span class="italic">c的</span>发行版中使用的审计功能相同。
                  </p>
                  <p>Oracle数据库<span class="italic">12c</span>中开始，Oracle引入<span class="bold">统一</span> <span class="bold">审计</span> ，它提供了一整套增强审核功能。为了向后兼容，仍然支持传统审计。但是，Oracle建议您计划将现有审核设置迁移到新的统一审核策略语法。对于新的审计要求，Oracle建议您使用新的统一审计。在未来的主要版本中可能不支持传统审计。
                  </p>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-E6B840CB-FC57-44B4-887B-079B2C80BC93">
                     <p class="notep1">也可以看看：</p>
                     <p><a id="d291751e196" class="indexterm-anchor"></a> <a href="AUDIT-Unified-Auditing.html#GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA">AUDIT（统一审计），</a>用于描述统一审计的<code class="codeph">AUDIT</code>语句</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-64546826-4133-46E4-AC6D-DCD8A258EFBC">目的</p>
                  <p><a id="d291751e212" class="indexterm-anchor"></a>使用<code class="codeph">AUDIT</code>语句：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>跟踪后续用户会话中SQL语句的发布。您可以跟踪特定SQL语句或特定系统特权授权的所有SQL语句的发布。SQL语句的审计操作仅适用于后续会话，而不适用于当前会话。</p>
                     </li>
                     <li>
                        <p>跟踪特定架构对象的操作。架构对象的审计操作适用于当前会话以及后续会话。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-970AAFD2-5EB4-454E-933E-1A19793FBC93">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d291751e231" class="indexterm-anchor"></a>有关<code class="codeph">DBMS_FGA</code>程序包的信息，可以使用<a href="../arpls/DBMS_FGA.html#ARPLS015" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a> ，该程序包允许您创建和管理基于值的审计策略</p>
                        </li>
                        <li>
                           <p><a href="NOAUDIT-Traditional-Auditing.html#GUID-9D8EAF18-4AB3-4C04-8BF7-37BD0E15434D">NOAUDIT（传统审计）</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-137CF89A-CA37-4206-B9B8-16EF272C83D2">先决条件</p>
                  <p>要审核SQL语句的发布，您必须具有<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>系统特权。但是，使用<code class="codeph">IN</code> <code class="codeph">SESSION</code> <code class="codeph">CURRENT</code>子句时，不需要<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>系统特权。
                  </p>
                  <p>要收集审核结果，必须通过将初始化参数<code class="codeph">AUDIT_TRAIL</code>为默认设置<code class="codeph">NONE</code>以外的值来启用审核。无论是否启用审核，您都可以指定审核选项。但是，在启用审计之前，Oracle数据库不会生成审计记录。
                  </p>
                  <p>要审核架构对象上的操作，您选择用于审计的对象必须位于您自己的架构中，或者您必须具有<code class="codeph">AUDIT</code> <code class="codeph">ANY</code>系统特权。此外，如果您选择用于审计的对象是目录对象，即使您创建了该对象，也必须具有<code class="codeph">AUDIT</code> <code class="codeph">ANY</code>系统特权。
                  </p>
                  <p>连接到多租户容器数据库（CDB）时，您必须具有本节中描述的权限，可以在当前容器中本地授予或通常授予。</p>
                  <p>要指定<code class="codeph">CONTAINER</code>子句，必须连接到多租户容器数据库（CDB）。要指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> ，当前容器必须是可插拔数据库（PDB）。要指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> ，当前容器必须是根。
                  </p>
                  <p><span class="bold">关于在CDB中使用AUDIT声明的说明</span></p>
                  <p>在CDB中发出<code class="codeph">AUDIT</code>语句时，数据库将执行审计，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果在当前容器是PDB时发出<code class="codeph">AUDIT</code>语句，则数据库将在该PDB中执行审计。如果指定<code class="codeph"><span class="codeinlineitalic">auditing_by_clause</span></code> ，则用户必须是PDB中的本地用户或普通用户。如果指定<code class="codeph"><span class="codeinlineitalic">audit_schema_object_clause</span></code> ，则该对象必须是PDB中的本地对象。</p>
                     </li>
                     <li>
                        <p>如果在当前容器是根目录时发出<code class="codeph">AUDIT</code>语句，则数据库将在整个CDB（即根目录和所有PDB）中执行审计。如果指定<code class="codeph"><span class="codeinlineitalic">auditing_by_clause</span></code> ，则用户必须是普通用户。如果省略<code class="codeph"><span class="codeinlineitalic">auditing_by_clause</span></code> ，则会<code class="codeph"><span class="codeinlineitalic">auditing_by_clause</span></code>所有普通用户。如果指定<code class="codeph"><span class="codeinlineitalic">audit_schema_object_clause</span></code> ，则该对象必须是根目录中的本地对象或公共对象。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-DD7382E5-540D-4EEF-BF96-14153DCBAEC1">
                     <p class="notep1">注意：</p>
                     <p><a id="d291751e367" class="indexterm-anchor"></a> <code class="codeph">AUDIT</code> <code class="codeph">ANY</code>系统特权允许被授权者审计除<code class="codeph">SYS</code>模式之外的任何模式中的任何对象。您可以通过将<code class="codeph">O7_DICTIONARY_ACCESSIBILITY</code>初始化参数设置为<code class="codeph">TRUE</code>来允许此类被授予者审核<code class="codeph">SYS</code>模式中的对象。出于安全原因，Oracle建议您仅谨慎使用此设置。
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-CAB45AB8-27F9-4669-A727-FB99C614F64E">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">AUDIT_TRAIL</code>参数的信息，请<a href="../refrn/AUDIT_TRAIL.html#REFRN10006" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-FCD513B4-7016-47B2-8D0C-6050DD9D7667">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-071D7528-A362-4843-B7F1-7BF4DCAE7799"><span class="italic">audit</span> :: =</p>
                  <div class="figure" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-E402BE85-6E7F-4C6C-A784-7675A777DEFE"><img src="img/audit.gif" alt="audit.eps的描述如下" title="audit.eps的描述如下" longdesc="img_text/audit.html"><br><a href="img_text/audit.html">说明audit.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-A11237D9-9F8D-4356-AE05-EBF54DD2AAD0"><span class="italic">audit_operation_clause</span> :: =</p><a id="d291751e417" class="indexterm-anchor"></a><a id="d291751e421" class="indexterm-anchor"></a><div class="figure" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-86C9EB02-1C8F-4677-85FC-09505B81D1E2"><img src="img/audit_operation_clause.gif" alt="audit_operation_clause.eps的描述如下" title="audit_operation_clause.eps的描述如下" longdesc="img_text/audit_operation_clause.html"><br><a href="img_text/audit_operation_clause.html">说明audit_operation_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-07D28147-1E68-4A1B-B902-50DD96A241C5"><span class="italic">auditing_by_clause</span> :: =</p><a id="d291751e433" class="indexterm-anchor"></a><a id="d291751e439" class="indexterm-anchor"></a><div class="figure" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-57F8EBBE-F076-4F0C-B7FA-D9F7F6A5CA99"><img src="img/auditing_by_clause.gif" alt="下面是auditing_by_clause.eps的描述" title="下面是auditing_by_clause.eps的描述" longdesc="img_text/auditing_by_clause.html"><br><a href="img_text/auditing_by_clause.html">说明auditing_by_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-EA2877D0-3845-4728-8EC5-A736910E81AA"><span class="italic">audit_schema_object_clause</span> :: =</p>
                  <div class="figure" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-8827FD58-FDAC-4A9C-BA2D-4DECDEBFB9F0"><img src="img/audit_schema_object_clause.gif" alt="audit_schema_object_clause.eps的描述如下" title="audit_schema_object_clause.eps的描述如下" longdesc="img_text/audit_schema_object_clause.html"><br><a href="img_text/audit_schema_object_clause.html">说明audit_schema_object_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-24306E64-3F20-4A07-9DC0-2ADF12E0234B"><span class="italic">auditing_on_clause</span> :: =</p><a id="d291751e461" class="indexterm-anchor"></a><a id="d291751e467" class="indexterm-anchor"></a><div class="figure" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-04CCC6A7-3CB7-43B5-855F-386C63D46D80"><img src="img/auditing_on_clause.gif" alt="下面是auditing_on_clause.eps的描述" title="下面是auditing_on_clause.eps的描述" longdesc="img_text/auditing_on_clause.html"><br><a href="img_text/auditing_on_clause.html">说明auditing_on_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-6C49902C-6CCE-474C-9C84-D70E51E70B13">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-B5DE4452-30FA-4C3F-A209-46FF54F0D02A"><span class="italic">audit_operation_clause</span></p>
                  <p>无论受操作影响的架构对象如何，都使用<span class="italic"><code class="codeph">audit_operation_clause</code></span>审计指定的操作。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-E1DA34DB-39E4-4BFE-8333-F86F578A9C67"><span class="italic">sql_statement_shortcut</span></p>
                  <p>指定审核特定SQL语句使用的快捷方式。<a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__BABEFEAC" title="第一列列出了语句选项，第二列列出了SQL语句和操作">表12-1</a>和<a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__G2274817" title="第一列列出了语句选项，第二列列出了SQL语句和操作">表12-2</a>列出了它们审计的快捷方式和SQL语句。
                  </p>
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-7C97B362-081F-4174-A6AB-97C1B24534AC">
                     <p class="notep1">注意：</p>
                     <p>不要将SQL语句快捷方式与系统特权混淆。例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">AUDIT</code> <code class="codeph">USER</code>语句指定用于审核所有<code class="codeph">CREATE</code> <code class="codeph">USER</code> ， <code class="codeph">ALTER</code> <code class="codeph">USER</code>和<code class="codeph">DROP</code> <code class="codeph">USER</code> SQL语句的<code class="codeph">USER</code> <span class="italic">快捷方式</span> 。在这种情况下，审计包括用户使用<code class="codeph">ALTER</code> <code class="codeph">USER</code>语句更改自己的密码的操作。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">AUDIT</code> <code class="codeph">ALTER</code> <code class="codeph">USER</code>语句指定<code class="codeph">ALTER</code> <code class="codeph">USER</code> <span class="italic">系统特权，</span>用于审核使用该系统特权的所有操作。在这种情况下，审计<span class="italic">不</span>包括用户更改自己的密码的操作，因为该操作不需要<code class="codeph">ALTER</code> <code class="codeph">USER</code>系统特权。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>对于每个审计操作，Oracle数据库会生成包含以下信息的审计记录：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>用户执行操作</p>
                     </li>
                     <li>
                        <p>操作类型</p>
                     </li>
                     <li>
                        <p>操作涉及的对象</p>
                     </li>
                     <li>
                        <p>操作的日期和时间</p>
                     </li>
                  </ul>
                  <p>Oracle数据库将审计记录写入审计跟踪，审计跟踪是包含审计记录的数据库表。您可以通过数据字典视图检查审计跟踪来查看数据库活动。</p>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-B1A739E4-E0CB-4267-A0FD-FA86A6C1B75F">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic">Oracle数据库安全指南11g第2版（11.2）</span> ，其中列出了审计跟踪数据字典视图。有关如何查找Oracle Database <span class="italic">11g</span>第2版（11.2）文档的说明，请参阅“ <a href="../upgrd/recommended-and-best-practices-complete-upgrading-oracle-database.html#UPGRD52813" target="_blank"><span class="italic">Oracle数据库升级指南”</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关数据字典视图的详细说明，请<a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115960">审核与角色相关的SQL语句：示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-7C9A490B-0214-4B6B-A050-CA89F35FDC49"><span class="italic">system_privilege</span></p>
                  <p>指定系统特权以审核由指定系统特权授权的SQL语句和其他操作。</p>
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-D54FAA93-1FB1-44F9-A388-E6F27EF3AB90">
                     <p class="notep1">注意：</p>
                     <p>审计使用包含<code class="codeph">ANY</code>关键字的系统特权比在没有<code class="codeph">ANY</code>关键字的情况下审计使用相同特权更具限制性。例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">AUDIT</code> <code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code>使用<code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code>权限审核发布的语句。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">AUDIT</code> <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code>仅审核使用<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code>权限发出的语句。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>您可以指定角色<code class="codeph">CONNECT</code> ， <code class="codeph">RESOURCE</code>和<code class="codeph">DBA</code> ，而不是指定许多单独的系统特权。这样做等同于审核授予这些角色的所有系统特权。
                  </p>
                  <p><a id="d291751e705" class="indexterm-anchor"></a><a id="d291751e709" class="indexterm-anchor"></a> Oracle数据库还提供了三个快捷方式，用于一次指定系统权限组和语句选项：</p>
                  <p><span class="bold">所有</span></p>
                  <p>指定<code class="codeph">ALL</code>以审核<a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__BABEFEAC" title="第一列列出了语句选项，第二列列出了SQL语句和操作">表12-1中</a>显示的所有语句选项，但不检查<a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__G2274817" title="第一列列出了语句选项，第二列列出了SQL语句和操作">表12-2中</a>显示的其他语句选项。
                  </p>
                  <p><span class="bold">所有声明</span></p>
                  <p>指定<code class="codeph">ALL</code> <code class="codeph">STATEMENTS</code>以审核所有<a id="d291751e743" class="indexterm-anchor"></a>执行<span class="bold">顶级SQL语句</span> 。顶级SQL语句由用户直接发布。从PL / SQL过程或函数中运行的SQL语句不被视为顶级语句。因此，本节不审计PL / SQL过程或函数中执行的语句。但是，审计PL / SQL过程或函数本身的执行。如果要审计特定环境中的所有语句，而不考虑系统范围或用户特定的其他审计配置，则此子句非常有用。
                  </p>
                  <p><span class="bold">所有特权</span></p>
                  <p>指定<code class="codeph">ALL</code> <code class="codeph">PRIVILEGES</code>以审核系统权限。
                  </p>
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-763A6E2E-F3B9-4103-B153-1E5643CFC15D">
                     <p class="notep1">注意：</p>
                     <p>Oracle建议您为审核而不是角色或快捷方式指定单独的系统特权和语句选项。角色和快捷方式所包含的特定系统特权和语句选项会从一个发行版更改为下一个发行版，并且可能在Oracle数据库的未来版本中不受支持。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-51F9988D-0364-4A20-8E88-4D354299DBE9">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="GRANT.html#GUID-20B4E2C0-A7F8-4BC8-A5E8-BE61BDC41AC3__BABEFFEE" title="第1列包含命名数据库对象的粗体子标题行。第1列中子标题下的单元格逐项列出与该数据库对象相关的系统特权。第2列描述了系统特权授权的操作。">表18-1</a>列出了所有系统特权及其授权的操作</p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">CONNECT</code> ， <code class="codeph">RESOURCE</code>和<code class="codeph">DBA</code>角色的详细信息，请<code class="codeph">CONNECT</code> <a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG4414" target="_blank"><span class="italic">“Oracle数据库安全指南”</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115972">审核查询和更新SQL语句：示例</a> ”</span> ， <span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115983">审核删除：示例</a> ”</span>和<span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115994">与目录相关的审核语句：示例</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-3DC59B15-4440-4D78-9AB2-A559601026D6"><span class="italic">auditing_by_clause</span></p>
                  <p>指定<span class="italic"><code class="codeph">auditing_by_clause</code></span>以将审核限制为仅指定用户发出的SQL语句。如果省略此子句，则Oracle数据库会审核所有用户的语句。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-2E44806A-B96C-4A14-902C-9FA3C14D89CF">在会议当前</p>
                  <p>使用此子句将审核限制为当前会话。审计将持续到会话结束，并且无法使用<code class="codeph">NOAUDIT</code>语句停止。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-D6F787E7-A39A-480D-9891-1A98AD06EAF7"><span class="italic">audit_schema_object_clause</span></p>
                  <p>使用<span class="italic"><code class="codeph">audit_schema_object_clause</code></span>审核特定架构对象的操作。
                  </p>
                  <p><span class="bold">对</span> <span class="bold"><span class="italic">audit_schema_object_clause的</span></span> <span class="bold">限制</span></p>
                  <p>连接到CDB时，可以指定<code class="codeph"><span class="codeinlineitalic">audit_schema_object_clause</span></code> ，但不能同时指定<code class="codeph">CONTAINER</code>子句。此限制不限制功能，因为<code class="codeph">CONTAINER</code>子句的唯一允许值是默认值。有关更多信息，请参阅<a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__CONTAINERCLAUSE-A4065270">CONTAINER子句</a> 。
                  </p>
                  <p><span class="bold"><span class="italic">sql_operation</span></span></p>
                  <p>指定要审核的SQL操作。<a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__BABCFIEA" title="此表列出了左侧列中的数据库对象，并列出了右侧列中每个数据库对象有效的对象选项。">表12-3</a>显示了可以审计的对象类型，以及每个对象可以审计的SQL语句。例如，如果选择使用<code class="codeph">ALTER</code>操作审核表，则Oracle数据库将审核针对该表发出的所有<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句。如果选择使用<code class="codeph">SELECT</code>操作审核序列，则数据库将审核使用序列的任何值的所有语句。
                  </p>
                  <p><span class="bold">所有</span></p>
                  <p>将<code class="codeph">ALL</code>指定为等效于指定适用于对象类型的所有SQL操作的快捷方式。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-18E21866-EDD1-415F-8DEC-A2DD926DD6BB"><span class="italic">auditing_on_clause</span></p>
                  <p><span class="italic"><code class="codeph">auditing_on_clause</code></span>允许您指定要审计的特定架构对象。
                  </p>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-383D111D-E2F1-4317-8550-BB498F07E7A0">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116010">审核表上的查询：示例</a> ”</span> ， <span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116021">审核表上的插入和更新：示例</a> ”</span>和<span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116032">序列上的审核操作：示例</a> ”</span></p>
                  </div>
                  <p><span class="bold"><span class="italic">模式</span></span></p>
                  <p>指定包含为审计选择的对象的架构。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle数据库假定该对象位于您自己的模式中。
                  </p>
                  <p><span class="bold"><span class="italic">宾语</span></span></p>
                  <p>指定要审核的对象的名称。对象必须是表，视图，序列，存储过程，函数，包，物化视图，挖掘模型或库。</p>
                  <p>您还可以为表，视图，序列，过程，存储函数，包，物化视图或用户定义类型指定同义词。</p>
                  <p><span class="bold">在默认情况下</span><a id="d291751e926" class="indexterm-anchor"></a></p>
                  <p>指定<code class="codeph">ON</code> <code class="codeph">DEFAULT</code>以将指定的对象选项建立为后续创建的对象的默认对象选项。建立这些默认审计选项后，将使用这些选项自动审计随后创建的任何对象。视图的默认审计选项始终是视图基表的审计选项的并集。您可以通过查询<code class="codeph">ALL_DEF_AUDIT_OPTS</code>数据字典视图来查看当前的默认审计选项。
                  </p>
                  <p>更改默认审核选项时，先前创建的对象的审核选项保持不变。您只能通过在<code class="codeph">AUDIT</code>语句的<code class="codeph">ON</code>子句中指定对象来更改现有对象的审计选项。
                  </p>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-05F4A277-8562-4AA8-9C86-5F47D9FCE3DF">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="AUDIT-Traditional-Auditing.html#GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116057">设置默认审核选项：示例</a> ”</span></p>
                  </div>
                  <p><span class="bold">在目录上</span> <a id="d291751e959" class="indexterm-anchor"></a><a id="d291751e963" class="indexterm-anchor"></a></p>
                  <p><code class="codeph">ON</code> <code class="codeph">DIRECTORY</code>子句允许您指定为审计选择的目录的名称。
                  </p>
                  <p><span class="bold">采矿模型</span> <a id="d291751e979" class="indexterm-anchor"></a><a id="d291751e983" class="indexterm-anchor"></a></p>
                  <p><code class="codeph">ON</code> <code class="codeph">MINING</code> <code class="codeph">MODEL</code>子句允许您指定要审计的挖掘模型的名称。
                  </p>
                  <p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__BABEDDFH"><span class="bold">ON SQL翻译简档</span><a id="d291751e1001" class="indexterm-anchor"></a></p>
                  <p><code class="codeph">ON</code> <code class="codeph">SQL</code> <code class="codeph">TRANSLATION</code> <code class="codeph">PROFILE</code>子句允许您指定要审核的SQL转换概要文件的名称。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-1E288FB2-62EB-4E3A-8627-D505B05C6D50">网络</p>
                  <p><a id="d291751e1023" class="indexterm-anchor"></a><a id="d291751e1027" class="indexterm-anchor"></a>使用此子句可以检测网络层中的内部故障。
                  </p>
                  <div class="infoboxnotealso" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-3CE84006-FBF7-4C75-B015-6434A7949DEE">
                     <p class="notep1">也可以看看：</p>
                     <p>有关网络审计的信息，请<span class="italic">参见Oracle数据库安全指南11g第2版（11.2）</span> 。有关如何查找Oracle Database <span class="italic">11g</span>第2版（11.2）文档的说明，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=UPGRD52813" target="_blank"><span class="italic">Oracle数据库升级指南”</span></a> 。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-4CB11EE6-EFB8-4C2E-AC0B-717E14F2F7EB">DIRECT_PATH负载</p>
                  <p>使用此子句可以审计SQL * Loader直接路径加载。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-1B36CB75-9F87-4AEB-B770-2528DF084BAD">通过会话</p>
                  <p><a id="d291751e1054" class="indexterm-anchor"></a><a id="d291751e1058" class="indexterm-anchor"></a>在早期版本中， <code class="codeph">BY</code> <code class="codeph">SESSION</code>导致数据库为同一会话中相同模式对象上执行的所有SQL语句或相同类型的操作编写单个记录。从此版本的Oracle数据库开始， <code class="codeph">BY</code> <code class="codeph">SESSION</code>和<code class="codeph">BY</code> <code class="codeph">ACCESS</code>导致Oracle数据库为每个经过审计的语句和操作编写一条审计记录。与<code class="codeph">BY</code> <code class="codeph">ACCESS</code>相比， <code class="codeph">BY</code> <code class="codeph">SESSION</code>继续为审计跟踪填充不同的值。 Oracle建议您为所有<code class="codeph">AUDIT</code>语句包含<code class="codeph">BY</code> <code class="codeph">ACCESS</code>子句，从而生成更详细的审计记录。如果未指定子句，则<code class="codeph">BY</code> <code class="codeph">ACCESS</code>是默认值。
                  </p>
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-8AD524C4-2FA4-43FF-AB26-F678F1039F7F">
                     <p class="notep1">注意：</p>
                     <p>此更改仅适用于审核除数据定义语言（DDL）语句之外的SQL语句的架构对象审计选项，语句选项和系统特权。数据库始终审计<code class="codeph">BY</code> <code class="codeph">ACCESS</code>审计DDL语句的所有SQL语句和系统特权。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-B2BC05E4-992A-49BA-BB01-5869735EB519">通过访问</p>
                  <p><a id="d291751e1125" class="indexterm-anchor"></a><a id="d291751e1129" class="indexterm-anchor"></a>如果希望Oracle数据库为每个经过审计的语句和操作写入一条记录，请指定<code class="codeph">BY</code> <code class="codeph">ACCESS</code> 。
                  </p>
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-C8BD7C68-58C9-447D-B243-5239C991A1C4">
                     <p class="notep1">注意：</p>
                     <p>如果指定SQL语句快捷方式或审计数据定义语言（DDL）语句的系统特权，则数据库始终按访问进行审计。在所有其他情况下，数据库遵循<code class="codeph">BY</code> <code class="codeph">SESSION</code>或<code class="codeph">BY</code> <code class="codeph">ACCESS</code>规范。
                     </p>
                  </div>
                  <p>对于审核DDL以外的SQL语句的语句选项和系统特权，可以指定<code class="codeph">BY</code> <code class="codeph">SESSION</code>或<code class="codeph">BY</code> <code class="codeph">ACCESS</code> 。 <code class="codeph">BY</code> <code class="codeph">ACCESS</code>是默认值。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-98324A81-01EB-4A74-8DD0-A71029DA7929">在[NOT]成功的时候</p>
                  <p><a id="d291751e1182" class="indexterm-anchor"></a><a id="d291751e1186" class="indexterm-anchor"></a>指定<code class="codeph">WHENEVER</code> <code class="codeph">SUCCESSFUL</code>仅审核<code class="codeph">SUCCESSFUL</code> SQL语句和操作。
                  </p>
                  <p>指定<code class="codeph">WHENEVER</code> <code class="codeph">NOT</code> <code class="codeph">SUCCESSFUL</code>仅审核失败或导致错误的SQL语句和操作。
                  </p>
                  <p>如果省略此子句，则无论成功与否，Oracle数据库都会执行审核。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__CONTAINERCLAUSE-A4065270">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-127DC3E2-483F-4378-BAE9-E5530E27C657">集装箱条款</p>
                  <p><code class="codeph">CONTAINER</code>子句仅在连接到CDB时适用。您可以使用此子句指定<code class="codeph">AUDIT</code>语句的范围。但是，没有必要指定<code class="codeph">CONTAINER</code>子句，因为它的默认值是唯一允许的值。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>如果在当前容器是PDB时发出<code class="codeph">AUDIT</code>语句，则可以选择指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">CURRENT</code> ，这是默认值。
                     </li>
                     <li>
                        <p>如果在当前容器是根时发出<code class="codeph">AUDIT</code>语句，则可以选择指定<code class="codeph">CONTAINER</code> <code class="codeph">=</code> <code class="codeph">ALL</code> ，这是默认值。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-416B84DF-9B68-4DAA-AEF7-DE01F24D763B">审计选项表</p>
                  <div class="tblformal" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__BABEFEAC">
                     <p class="titleintable">表12-1审计的SQL语句快捷方式</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="用于审计的SQL语句快捷方式" width="100%" border="1" summary="The first column lists the statement option and the second column lists the SQL statements and operations" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d291751e1270">SQL语句快捷方式</th>
                              <th align="left" valign="bottom" width="67%" id="d291751e1273">经过审核的SQL语句和操作</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1278" headers="d291751e1270 ">
                                 <p><code class="codeph">改变系统</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1278 d291751e1273 ">
                                 <p><code class="codeph">改变系统</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1289" headers="d291751e1270 ">
                                 <p><code class="codeph">簇</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1289 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">CLUSTER</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">CLUSTER</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">CLUSTER</code></p>
                                 <p><code class="codeph">TRUNCATE</code> <code class="codeph">CLUSTER</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1319" headers="d291751e1270 ">
                                 <p><code class="codeph">CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1319 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">CONTEXT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1337" headers="d291751e1270 ">
                                 <p><code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1337 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1373" headers="d291751e1270 ">
                                 <p><code class="codeph">尺寸</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1373 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">DIMENSION</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">DIMENSION</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">DIMENSION</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1397" headers="d291751e1270 ">
                                 <p><code class="codeph">目录</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1397 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1415" headers="d291751e1270 ">
                                 <p><code class="codeph">指数</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1415 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">INDEX</code></p>
                                 <p><code class="codeph">分析指数</code> 
                                 </p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">INDEX</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1443" headers="d291751e1270 ">
                                 <p><code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1443 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1480" headers="d291751e1270 ">
                                 <p><code class="codeph">NOT</code> <code class="codeph">EXISTS</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1480 d291751e1273 ">
                                 <p>由于指定对象不存在而失败的所有SQL语句。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1491" headers="d291751e1270 ">
                                 <p><code class="codeph">大纲</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1491 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">OUTLINE</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">OUTLINE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">OUTLINE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1515" headers="d291751e1270 ">
                                 <p><code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1515 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1552" headers="d291751e1270 ">
                                 <p><code class="codeph">PROCEDURE</code> （参见表格末尾的注释）</p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1552 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code></p>
                                 <p><code class="codeph">CREATE</code> <code class="codeph">LIBRARY</code></p>
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code></p>
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code></p>
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">FUNCTION</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">LIBRARY</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">PACKAGE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">PROCEDURE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1616" headers="d291751e1270 ">
                                 <p><code class="codeph">轮廓</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1616 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PROFILE</code></p>
                                 <p><code class="codeph">ALTER PROFILE</code></p>
                                 <p><code class="codeph">DROP PROFILE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1634" headers="d291751e1270 ">
                                 <p><code class="codeph">PUBLIC</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1634 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PUBLIC</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">PUBLIC</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">PUBLIC</code> <code class="codeph">DATABASE</code> <code class="codeph">LINK</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1682" headers="d291751e1270 ">
                                 <p><code class="codeph">PUBLIC</code> <code class="codeph">SYNONYM</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1682 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">PUBLIC</code> <code class="codeph">SYNONYM</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">PUBLIC</code> <code class="codeph">SYNONYM</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1709" headers="d291751e1270 ">
                                 <p><code class="codeph">角色</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1709 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">ROLE</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">ROLE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">ROLE</code></p>
                                 <p><code class="codeph">SET</code> <code class="codeph">ROLE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1739" headers="d291751e1270 ">
                                 <p><code class="codeph">ROLLBACK SEGMENT</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1739 d291751e1273 ">
                                 <p><code class="codeph">创建ROLLBACK SEGMENT</code></p>
                                 <p><code class="codeph">ALTER ROLLBACK SEGMENT</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">ROLLBACK</code> <code class="codeph">SEGMENT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1760" headers="d291751e1270 ">
                                 <p><code class="codeph">序列</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1760 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">SEQUENCE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">SEQUENCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1778" headers="d291751e1270 ">
                                 <p><code class="codeph">SESSION</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1778 d291751e1273 ">
                                 <p>登录</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1786" headers="d291751e1270 ">
                                 <p><code class="codeph">代名词</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1786 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">SYNONYM</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">SYNONYM</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1804" headers="d291751e1270 ">
                                 <p><code class="codeph">系统审核</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1804 d291751e1273 ">
                                 <p><code class="codeph">AUDIT</code> <span class="italic"><code class="codeph">sql_statements</code></span></p>
                                 <p><code class="codeph">NOAUDIT</code> <span class="italic"><code class="codeph">sql_statements</code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1824" headers="d291751e1270 ">
                                 <p><code class="codeph">系统授权</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1824 d291751e1273 ">
                                 <p><code class="codeph">GRANT</code> <span class="italic"><code class="codeph">system_privileges_and_roles</code></span></p>
                                 <p><code class="codeph">REVOKE</code> <span class="italic"><code class="codeph">system_privileges_and_roles</code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1845" headers="d291751e1270 ">
                                 <p><code class="codeph">表</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1845 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">TABLE</code></p>
                                 <p><code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1869" headers="d291751e1270 ">
                                 <p><code class="codeph">TABLESPACE</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1869 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">TABLESPACE</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">TABLESPACE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1893" headers="d291751e1270 ">
                                 <p><code class="codeph">触发</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1893 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">TRIGGER</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">TRIGGER</code> 
                                 </p>
                                 <p>使用<code class="codeph">ENABLE</code>和<code class="codeph">DISABLE</code>子句</p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">TRIGGER</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code></p>
                                 <p>使用<code class="codeph">ENABLE</code> <code class="codeph">ALL</code> <code class="codeph">TRIGGERS</code>子句</p>
                                 <p>和<code class="codeph">DISABLE</code> <code class="codeph">ALL</code> <code class="codeph">TRIGGERS</code>条款</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1954" headers="d291751e1270 ">
                                 <p><code class="codeph">类型</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1954 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">TYPE</code></p>
                                 <p><code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">BODY</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">TYPE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">TYPE</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">TYPE</code> <code class="codeph">BODY</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e1996" headers="d291751e1270 ">
                                 <p><code class="codeph">用户</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e1996 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">USER</code></p>
                                 <p><code class="codeph">ALTER</code> <code class="codeph">USER</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">USER</code></p>
                                 <p><span class="bold">笔记：</span></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">AUDIT</code> <code class="codeph">USER</code>审核这三个SQL语句。使用<code class="codeph">AUDIT</code> <code class="codeph">ALTER</code> <code class="codeph">USER</code>审核需要<code class="codeph">ALTER</code> <code class="codeph">USER</code>系统特权的语句。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">AUDIT</code> <code class="codeph">ALTER</code> <code class="codeph">USER</code>语句不会审核用户更改自己的密码，因为此活动不需要<code class="codeph">ALTER</code> <code class="codeph">USER</code>系统特权。
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d291751e2066" headers="d291751e1270 ">
                                 <p><code class="codeph">视图</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d291751e2066 d291751e1273 ">
                                 <p><code class="codeph">CREATE</code> <code class="codeph">VIEW</code></p>
                                 <p><code class="codeph">DROP</code> <code class="codeph">VIEW</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnote" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-C78AF2EF-D22C-43F2-A2B4-C2AECA36CED6">
                     <p class="notep1">注意：</p>
                     <p>Java模式对象（源，类和资源）被视为与审计SQL语句的过程相同。</p>
                  </div>
                  <div class="tblformal" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__G2274817">
                     <p class="titleintable">表12-2用于审计的其他SQL语句快捷方式</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="用于审计的其他SQL语句快捷方式" width="100%" border="1" summary="The first column lists the statement option and the second column lists the SQL statements and operations" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d291751e2096">SQL语句快捷方式</th>
                              <th align="left" valign="bottom" width="66%" id="d291751e2099">经过审核的SQL语句和操作</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2104" headers="d291751e2096 ">
                                 <p><code class="codeph">ALTER</code> <code class="codeph">SEQUENCE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2104 d291751e2099 ">
                                 <p><code class="codeph">ALTER</code> <code class="codeph">SEQUENCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2119" headers="d291751e2096 ">
                                 <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2119 d291751e2099 ">
                                 <p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2134" headers="d291751e2096 ">
                                 <p><code class="codeph">COMMENT</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2134 d291751e2099 ">
                                 <p><code class="codeph">COMMENT</code> <code class="codeph">ON</code> <code class="codeph">TABLE</code> <span class="italic"><code class="codeph">table</code></span> <span class="italic">，</span> <span class="italic"><code class="codeph">view</code></span> <span class="italic">，</span> <span class="italic"><code class="codeph">materialized</code></span> <span class="italic"> </span> <span class="italic"><code class="codeph">view</code></span></p>
                                 <p><code class="codeph">COMMENT</code> <code class="codeph">ON</code> <code class="codeph">COLUMN</code> <span class="italic"><code class="codeph">table</code></span> <span class="italic">。</span> <span class="italic"><code class="codeph">column</code></span> <span class="italic">，</span> <span class="italic"><code class="codeph">view</code></span> <span class="italic">。</span> <span class="italic"><code class="codeph">column</code></span> <span class="italic">，</span> <span class="italic"><code class="codeph">materialized</code></span> <span class="italic"> </span> <span class="italic"><code class="codeph">view</code></span> <span class="italic">。</span> <span class="italic"><code class="codeph">column</code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2216" headers="d291751e2096 ">
                                 <p><code class="codeph">DELETE</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2216 d291751e2099 ">
                                 <p><code class="codeph">FROM</code> <span class="italic"><code class="codeph">table</code></span> <code class="codeph">DELETE</code> ， <span class="italic"><code class="codeph">view</code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2239" headers="d291751e2096 ">
                                 <p><code class="codeph">EXECUTE</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2239 d291751e2099 ">
                                 <p>执行目录中的任何程序</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2250" headers="d291751e2096 ">
                                 <p><code class="codeph">EXECUTE</code> <code class="codeph">PROCEDURE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2250 d291751e2099 ">
                                 <p><code class="codeph">呼叫</code></p>
                                 <p>执行任何过程或函数或访问包内的任何变量，库或游标</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2264" headers="d291751e2096 ">
                                 <p><code class="codeph">GRANT</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2264 d291751e2099 ">
                                 <p><code class="codeph">GRANT</code>权限<code class="codeph">ON</code>目录</p>
                                 <p><code class="codeph">REVOKE</code>特权<code class="codeph">ON</code>目录</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2287" headers="d291751e2096 ">
                                 <p><code class="codeph">GRANT</code> <code class="codeph">PROCEDURE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2287 d291751e2099 ">
                                 <p><code class="codeph">GRANT</code>权限<code class="codeph">ON</code>过程，函数，包</p>
                                 <p><code class="codeph">REVOKE</code>权限<code class="codeph">ON</code>过程，函数，包</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2310" headers="d291751e2096 ">
                                 <p><code class="codeph">GRANT</code> <code class="codeph">SEQUENCE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2310 d291751e2099 ">
                                 <p><code class="codeph">GRANT</code>权限<code class="codeph">ON</code>序列</p>
                                 <p><code class="codeph">REVOKE</code>特权<code class="codeph">ON</code>序列</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2333" headers="d291751e2096 ">
                                 <p><code class="codeph">GRANT</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2333 d291751e2099 ">
                                 <p><code class="codeph">GRANT</code>权限<code class="codeph">ON</code>表，视图，物化视图</p>
                                 <p><code class="codeph">REVOKE</code>特权<code class="codeph">ON</code>表，视图，物化视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2356" headers="d291751e2096 ">
                                 <p><code class="codeph">GRANT</code> <code class="codeph">TYPE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2356 d291751e2099 ">
                                 <p><code class="codeph">GRANT</code>权限<code class="codeph">ON</code> <code class="codeph">TYPE</code></p>
                                 <p><code class="codeph">REVOKE</code>特权<code class="codeph">ON</code> <code class="codeph">TYPE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2384" headers="d291751e2096 ">
                                 <p><code class="codeph">INSERT</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2384 d291751e2099 ">
                                 <p><code class="codeph">INSERT</code> <code class="codeph">INTO</code>表，视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2400" headers="d291751e2096 ">
                                 <p><code class="codeph">LOCK</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2400 d291751e2099 ">
                                 <p><code class="codeph">LOCK</code> <code class="codeph">TABLE</code>表，视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2416" headers="d291751e2096 ">
                                 <p><code class="codeph">READ</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2416 d291751e2099 ">
                                 <p>读取目录上的操作</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2427" headers="d291751e2096 ">
                                 <p><code class="codeph">SELECT</code> <code class="codeph">SEQUENCE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2427 d291751e2099 ">
                                 <p>任何包含<span class="italic"><code class="codeph">sequence</code></span>语句。<code class="codeph">CURRVAL</code>或<span class="italic"><code class="codeph">sequence</code></span> 。<code class="codeph">NEXTVAL</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2451" headers="d291751e2096 ">
                                 <p><code class="codeph">SELECT</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2451 d291751e2099 ">
                                 <p><code class="codeph">SELECT</code> <code class="codeph">FROM</code> table，view，materialized view</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2467" headers="d291751e2096 ">
                                 <p><code class="codeph">UPDATE</code> <code class="codeph">TABLE</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2467 d291751e2099 ">
                                 <p><code class="codeph">UPDATE</code>表，视图</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d291751e2480" headers="d291751e2096 ">
                                 <p><code class="codeph">WRITE</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d291751e2480 d291751e2099 ">
                                 <p>在目录上编写操作</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformal" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__BABCFIEA">
                     <p class="titleintable">表12-3架构对象审计选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="模式对象审计选项" width="100%" border="1" summary="This table lists database objects in the left-hand column and lists the object options valid with each datbase object in the right-hand column." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d291751e2500">宾语</th>
                              <th align="left" valign="bottom" width="69%" id="d291751e2503">SQL操作</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2508" headers="d291751e2500 ">
                                 <p><span class="bold">表</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2508 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">改变</code></li>
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">评论</code></li>
                                    <li><code class="codeph">删除</code></li>
                                    <li><code class="codeph">FLASHBACK</code> （注1）</li>
                                    <li><code class="codeph">GRANT</code></li>
                                    <li><code class="codeph">指数</code></li>
                                    <li><code class="codeph">插入</code></li>
                                    <li><code class="codeph">锁</code></li>
                                    <li><code class="codeph">改名</code></li>
                                    <li><code class="codeph">选择</code></li>
                                    <li><code class="codeph">UPDATE</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2553" headers="d291751e2500 ">
                                 <p><span class="bold">视图</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2553 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">评论</code></li>
                                    <li><code class="codeph">删除</code></li>
                                    <li><code class="codeph">FLASHBACK</code> （注1）</li>
                                    <li><code class="codeph">GRANT</code></li>
                                    <li><code class="codeph">插入</code></li>
                                    <li><code class="codeph">锁</code></li>
                                    <li><code class="codeph">改名</code></li>
                                    <li><code class="codeph">选择</code></li>
                                    <li><code class="codeph">UPDATE</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2591" headers="d291751e2500 ">
                                 <p><span class="bold">序列</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2591 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">改变</code></li>
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">GRANT</code></li>
                                    <li><code class="codeph">选择</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2610" headers="d291751e2500 ">
                                 <p><span class="bold">程序，功能，包装</span> （注2）</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2610 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">EXECUTE</code> （注3和4）</li>
                                    <li><code class="codeph">GRANT</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2628" headers="d291751e2500 ">
                                 <p><span class="bold">物化视图</span> （注5）</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2628 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">改变</code></li>
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">评论</code></li>
                                    <li><code class="codeph">删除</code></li>
                                    <li><code class="codeph">指数</code></li>
                                    <li><code class="codeph">插入</code></li>
                                    <li><code class="codeph">锁</code></li>
                                    <li><code class="codeph">选择</code></li>
                                    <li><code class="codeph">UPDATE</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2663" headers="d291751e2500 ">
                                 <p><span class="bold">挖掘模型</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2663 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">评论</code></li>
                                    <li><code class="codeph">GRANT</code></li>
                                    <li><code class="codeph">改名</code></li>
                                    <li><code class="codeph">选择</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2685" headers="d291751e2500 ">
                                 <p><span class="bold">目录</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2685 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">GRANT</code></li>
                                    <li><code class="codeph">读</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2701" headers="d291751e2500 ">
                                 <p><span class="bold">图书馆</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2701 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">执行</code></li>
                                    <li><code class="codeph">GRANT</code></li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d291751e2714" headers="d291751e2500 ">
                                 <p><span class="bold">对象类型</span></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d291751e2714 d291751e2503 ">
                                 <ul class="simple" style="list-style-type:none;padding-left:0">
                                    <li><code class="codeph">改变</code></li>
                                    <li><code class="codeph">审计</code></li>
                                    <li><code class="codeph">GRANT</code></li>
                                 </ul>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>注1： <code class="codeph">FLASHBACK</code>审计对象选项仅适用于闪回查询。
                  </p>
                  <p>注2：出于审计选项的目的，Java模式对象（源，类和资源）被视为与过程，函数和包相同。</p>
                  <p>注3：当您在PL / SQL存储过程或存储函数上审计<code class="codeph">EXECUTE</code>操作时，数据库仅考虑其在确定操作成功或失败时查找过程或函数并授权其执行的能力，以便进行审计。因此，如果指定<code class="codeph">WHENEVER</code> <code class="codeph">NOT</code> <code class="codeph">SUCCESSFUL</code>子句，则仅审计无效对象错误，不存在的对象错误和授权失败;执行过程或函数期间遇到的错误不会被审计。如果指定<code class="codeph">WHENEVER</code> <code class="codeph">SUCCESSFUL</code>子句，则无论是否在执行期间遇到错误，都会审计未被无效对象错误，不存在的对象错误或授权失败阻止的所有执行。
                  </p>
                  <p>注4：要审计PL / SQL存储过程或存储函数内的递归SQL操作失败，请为SQL操作配置审计。</p>
                  <p>注意5：您只能在可更新的物化视图上审核<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>操作。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__GUID-95986F02-D115-46D6-9DA1-7CBEE1CC8C6E">例子</p>
                  <p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115960"><span class="bold">审核与角色相关的SQL语句：示例</span> 
                  </p>
                  <p>要为创建，更改，删除或设置角色的每个SQL语句选择审核，无论语句是否成功完成，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">审计角色;</pre><p>要为成功创建，更改，删除或设置角色的每个语句选择审核，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">成功的审计角色;</pre><p>要为导致Oracle数据库错误的每个<code class="codeph">CREATE</code> <code class="codeph">ROLE</code> ， <code class="codeph">ALTER</code> <code class="codeph">ROLE</code> ， <code class="codeph">DROP</code> <code class="codeph">ROLE</code>或<code class="codeph">SET</code> <code class="codeph">ROLE</code>语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">审计角色无法成功;</pre><p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115972"><span class="bold">审核查询和更新SQL语句：示例</span></p>
                  <p>要为查询或更新任何表的任何语句选择审核，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">AUDIT SELECT TABLE，UPDATE TABLE;</pre><p>要为查询或更新表或视图的用户<code class="codeph">hr</code>和<code class="codeph">oe</code>发出的语句选择审计，请发出以下语句</p><pre class="oac_no_warn" dir="ltr">AUDIT SELECT TABLE，UPDATE TABLE BY hr，oe;</pre><p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115983"><span class="bold">审核删除：示例</span></p>
                  <p>要为使用<code class="codeph">DELETE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权发出的语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">AUDIT DELETE ANY TABLE;</pre><p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2115994"><span class="bold">与目录有关的审计声明：示例</span></p>
                  <p>要为使用<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">DIRECTORY</code>系统特权发出的语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">审核创建任何目录;</pre><p>要为不使用<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">DIRECTORY</code>系统特权的<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code> （和<code class="codeph">DROP</code> <code class="codeph">DIRECTORY</code> ）语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">审计目录;</pre><p>要为从<code class="codeph">bfile_dir</code>目录中读取文件的每个语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">AUDIT READ ON DIRECTORY bfile_dir;</pre><p>要为从任何目录读取文件的每个语句选择审核，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">AUDIT READ DIRECTORY;</pre><p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116010"><span class="bold">审核表上的查询：示例</span></p>
                  <p>要为在模式<code class="codeph">hr</code>中查询<code class="codeph">employees</code>表的每个SQL语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">hr.employees上的AUDIT SELECT;</pre><p>要为在模式<code class="codeph">hr</code>中成功查询<code class="codeph">employees</code>表的每个语句选择审核，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">在成功的情况下审核hr.employees;</pre><p>要为在模式<code class="codeph">hr</code>中查询<code class="codeph">employees</code>表的每个语句选择审计并导致Oracle数据库错误，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">对员工进行审计选择，但不能成功;</pre><p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116021"><span class="bold">审核表上的插入和更新：示例</span></p>
                  <p>要为在模式<code class="codeph">oe</code>中的<code class="codeph">customers</code>表中插入或更新行的每个语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">审计插入，更新oe.customers;</pre><p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116032"><span class="bold">序列上的审计操作：示例</span></p>
                  <p>要为在模式<code class="codeph">hr</code>对<code class="codeph">employees_seq</code>序列执行任何操作的每个语句选择审计，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">AUDIT ALL ON hr.employees_seq;</pre><p>上述语句使用<code class="codeph">ALL</code>快捷方式为以下对序列进行操作的语句选择审计：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ALTER</code> <code class="codeph">SEQUENCE</code> 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">审计</code> 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">GRANT</code> 
                        </p>
                     </li>
                     <li>
                        <p>任何使用伪列<code class="codeph">CURRVAL</code>或<code class="codeph">NEXTVAL</code>访问序列值的语句 
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-ADF45B07-547A-4096-8144-50241FA2D8DD__I2116057"><span class="bold">设置默认审核选项：示例</span></p>
                  <p>以下语句指定将来创建的对象的默认审计选项：</p><pre class="oac_no_warn" dir="ltr">审核更改，授予，插入，更新，删除默认;</pre><p>稍后创建的任何对象都将自动配置为使用适用于它们的指定选项进行审计。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果创建表，则Oracle数据库会自动配置针对表发出的审计选项<code class="codeph">ALTER</code> ， <code class="codeph">GRANT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code> 。
                        </p>
                     </li>
                     <li>
                        <p>如果创建视图，则Oracle Database会自动为视图配置审计选项<code class="codeph">GRANT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code> 。
                        </p>
                     </li>
                     <li>
                        <p>如果创建序列，则Oracle数据库会自动根据序列配置审计选项<code class="codeph">ALTER</code>或<code class="codeph">GRANT</code> 。
                        </p>
                     </li>
                     <li>
                        <p>如果您创建过程，包或函数，则Oracle数据库会自动为其配置审计选项<code class="codeph">ALTER</code>或<code class="codeph">GRANT</code> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="02643.using-real-application-security-in-java-applications.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在Java应用程序中使用Real Application Security</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-data-security.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-fusion-middleware-integration-with-real-application-security.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-data-security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-fusion-middleware-integration-with-real-application-security.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Java应用程序中使用Real Application Security</li>
            </ol>
            <a id="GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181" name="GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181"></a><a id="DBFSG99844"></a>
            
            <h2 id="DBFSG-GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181" class="sect2"><span class="enumeration_chapter">6</span>在Java应用程序中使用Real Application Security</h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">本章介绍如何在Java应用程序中使用Real Application Security。本章包含以下部分：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-F003B955-1845-41BE-B818-02CDC6231EBA">关于初始化中间层</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-BC164147-DE1C-4E73-84B7-715540C5FC88">关于管理Real Application Security会话</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F">使用Java API验证应用程序用户</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3">关于使用ACL授权应用程序用户</a></p>
                     </li>
                     <li>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3">人力资源管理用例：用Java实现</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG99845"></a><div class="props_rev_3"><a id="GUID-F003B955-1845-41BE-B818-02CDC6231EBA" name="GUID-F003B955-1845-41BE-B818-02CDC6231EBA"></a><h3 id="DBFSG-GUID-F003B955-1845-41BE-B818-02CDC6231EBA" class="sect3">关于初始化中间层</h3>
               <div>
                  <p><code class="codeph">XSSessionManager</code>类管理会话的生命周期。它提供了创建，附加，分配，分离和销毁会话的方法。它还提供了执行缓存活动的方法。
                  </p>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">关于中间层配置模式</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958">使用getSessionManager方法</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE">关于更改中间层缓存设置</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG464"></a><div class="props_rev_3"><a id="GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315" name="GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315"></a><h4 id="DBFSG-GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315" class="sect4">关于中间层配置模式</h4>
                  <div>
                     <p>您可以使用<a id="d28828e385" class="indexterm-anchor"></a>一个中间层配置模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Dispatcher模式 - 获取具有调度程序连接的会话管理器</p>
                        </li>
                     </ul>
                     <p>在调度程序模式下，调度程序用户必须具有会话管理和缓存访问权限。应用程序用户不需要任何会话或缓存权限。可以将两个预定义的数据库角色<code class="codeph">xs_session_admin</code>和<code class="codeph">xs_cache_admin</code>授予调度程序。
                     </p>
                     <p>为了获得最佳安全实践，应该为应用程序用户提供最少的权限，因此调度程序模式是建议的中间层配置。</p>
                  </div>
               </div><a id="DBFSG462"></a><a id="DBFSG463"></a><a id="DBFSG99848"></a><a id="DBFSG99846"></a><div class="props_rev_3"><a id="GUID-565444BC-7235-4E94-9D67-B6640330B958" name="GUID-565444BC-7235-4E94-9D67-B6640330B958"></a><h4 id="DBFSG-GUID-565444BC-7235-4E94-9D67-B6640330B958" class="sect4">使用getSessionManager方法</h4>
                  <div>
                     <div class="section">
                        <p>有一种方法可以使会话管理器遵循<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">关于中间层配置模式</a> ” <a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">中</a></span>描述的<span class="q"><a href="using-real-application-security-in-java-applications.html#GUID-2DA94DA8-FCA0-44CD-A59C-68CC2D42B315">中间层配置模式</a></span> ：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>传递调度程序用户的连接或连接池。通过这种方式，所需的权限被授予调度程序。<code class="codeph">xs_session_admin</code>两个预定义角色<code class="codeph">xs_session_admin</code>和<code class="codeph">xs_cache_admin</code>授予调度程序用户。调度程序用户是直接登录Real Application Security用户。
                              </p>
                           </li>
                        </ul>
                        <p>使用调度程序模式，您可以通过获取会话管理器的实例来启动Real Application Security中间层（请参阅<a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBGGGIC">示例6-1</a> ）。使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">getSessionManager</code>方法（粗体字）获取会话管理器的实例。此方法使用单个连接或连接池初始化Real Application Security会话管理器。<code class="codeph">getSessionManager</code>方法的调用者应具有Java身份验证和授权服务（JAAS）权限<code class="codeph">XSSecurityPermission("initSecurityManager")</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBJBIGB">
                        <p class="subhead3" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__GUID-6C0162EE-0531-4A66-BDDE-550C195E2772">会话管理器的权限</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Real Application Security会话管理器使用特权用户的连接进行初始化，该特权用户代表常规Real Application Security应用程序用户授权会话操作。如果会话管理器具有会话操作权限，则会话管理器下的每个应用程序用户不需要具有会话操作权限，并且应用程序用户的会话操作可以作为可信方执行。会话管理器授权连接的会话操作，因此您无需将<code class="codeph">createSession</code>和<code class="codeph">attachToSession</code>权限直接授予常规Real Application Security应用程序用户。此会话管理员必须具有以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Real Application Security数据库对象权限，用于管理中间层中的缓存数据。</p>
                           </li>
                           <li>
                              <p>会话生命周期管理权限，以便会话管理器代表Real Application Security应用程序用户和外部用户创建或附加会话。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__GUID-2C6CCE2C-C4C2-42A7-9E5B-B898DD15E5CC">会话管理器的角色</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>会话管理器需要以下两个角色才能拥有<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBJBIGB">会话管理器</a></span>权限”中提到的<span class="q"><a href="using-real-application-security-in-java-applications.html#GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBJBIGB">权限</a></span> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>具有以下权限的数据库角色<code class="codeph">xs_cache_admin</code> ：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>查询Real Application Security实体和同步元数据的权限</p>
                                 </li>
                                 <li>
                                    <p>权限执行密钥交换的代码</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>实际的应用程序安全性的作用， <code class="codeph">xs_session_admin</code> ，与<code class="codeph">ADMIN_SESSION</code>特权</p>
                           </li>
                        </ul>
                        <p>这些角色是在系统中预定义的。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-565444BC-7235-4E94-9D67-B6640330B958__BGBGGGIC">
                        <p class="titleinexample">示例6-1如何使用单个连接在Java中获取会话管理器的实例</p><pre class="oac_no_warn" dir="ltr">静态XSSessionManager管理器; static Connection dispatcherConn = null; int cacheMaxIdleTime = 30; int cacheMaxsize = 2048000;字符串主机;字符串端口; String sid; ...dispatcherConn = DriverManager.getConnection（“jdbc：oracle：thin：@”+ host +“：”+ port +“：”+ sid，dispatcherUser，dispatcherPassword）; ...
<span class="bold">manager = XSSessionManager.getSessionManager（dispatcherConn，cacheMaxIdleTime，cacheMaxsize）;</span>
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99849"></a><div class="props_rev_3"><a id="GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE" name="GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE"></a><h4 id="DBFSG-GUID-910C7955-080E-4DD2-9C6E-4B4FFF61FEEE" class="sect4">关于更改中间层缓存设置</h4>
                  <div>
                     <p>初始化会话管理器后，它会开始将一些数据（如ACL和Security类信息）添加到缓存中。可以重用此缓存数据。使用默认设置初始化缓存，以后可以更改。</p>
                     <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73">关于设置最大缓存空闲时间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E">关于设置最大缓存大小</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50">关于获取最大缓存空闲时间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8692B1EC-5636-4D40-A16C-39FB49C02456">关于获取最大缓存大小</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44">关于从缓存中删除条目</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E">关于清除缓存</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG99850"></a><div class="props_rev_3"><a id="GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73" name="GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73"></a><h5 id="DBFSG-GUID-7F9509F7-6BFF-449B-A817-95E7969CAB73" class="sect5">关于设置最大缓存空闲时间</h5>
                     <div>
                        <p>设置<a id="d28828e899" class="indexterm-anchor"></a>最大缓存空闲时间，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">setCacheMaxIdleTime</code>方法。<code class="codeph">setCacheMaxIdleTime</code>方法设置缓存无需更新即可运行的最大分钟数。
                        </p>
                        <p>如果尝试从缓存中获取对象并且<code class="codeph">XSSessionManager</code>没有调用<code class="codeph">updateCache</code>方法一段时间等于<code class="codeph">setCacheMaxIdleTime</code>方法设置的值，那么在返回任何对象之前，会强制调用<code class="codeph">updateCache</code>方法来检查所有缓存的对象仍然有效。<code class="codeph">setCacheMaxIdleTime</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("setCacheMaxIdleTime")</code> 。
                        </p>
                     </div>
                  </div><a id="DBFSG99851"></a><div class="props_rev_3"><a id="GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E" name="GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E"></a><h5 id="DBFSG-GUID-AA44F843-8DB3-470C-9BF6-B82B86E4666E" class="sect5">关于设置最大缓存大小</h5>
                     <div>
                        <p>设置<a id="d28828e1050" class="indexterm-anchor"></a>最大缓存大小，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">setCacheMaxSize</code>方法。此方法设置中间层上的缓存大小。
                        </p>
                        <p>缓存的默认大小为10MB。最小缓存大小为1MB。 <code class="codeph">setCacheMaxSize</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("setCacheMaxSize")</code> 。
                        </p>
                     </div>
                  </div><a id="DBFSG99852"></a><div class="props_rev_3"><a id="GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50" name="GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50"></a><h5 id="DBFSG-GUID-52D7EF79-6554-4086-B62E-9AEBFD6F0C50" class="sect5">关于获取最大缓存空闲时间</h5>
                     <div>
                        <p>得到的<a id="d28828e1186" class="indexterm-anchor"></a>最大缓存空闲时间，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">getCacheMaxIdleTime</code>方法。此方法返回缓存没有<code class="codeph">updateCache</code>调用以更新缓存的最大分钟数。<code class="codeph">getCachemaxIdleTime</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("getCacheMaxIdleTime")</code> 。
                        </p>
                     </div>
                  </div><a id="DBFSG99853"></a><div class="props_rev_3"><a id="GUID-8692B1EC-5636-4D40-A16C-39FB49C02456" name="GUID-8692B1EC-5636-4D40-A16C-39FB49C02456"></a><h5 id="DBFSG-GUID-8692B1EC-5636-4D40-A16C-39FB49C02456" class="sect5">关于获取最大缓存大小</h5>
                     <div>
                        <p>得到的<a id="d28828e1323" class="indexterm-anchor"></a>最大缓存大小，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">getCacheMaxSize</code>方法。此方法以字节为单位返回缓存的最大大小。<code class="codeph">getCacheMaxSize</code>方法的调用者必须具有JAAS权限XSSecurityPermission（“getCacheMaxSize”）。
                        </p>
                     </div>
                  </div><a id="DBFSG99854"></a><div class="props_rev_2"><a id="GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44" name="GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44"></a><h5 id="DBFSG-GUID-5328F766-CB95-4B39-AA3B-7D95C611EE44" class="sect5">关于从缓存中删除条目</h5>
                     <div>
                        <p>为了从缓存中删除条目，使用缓存逐出算法以及水印级别。水印级别确定数据在被删除之前应保留在内存缓存中的时间。当高速缓存大小达到高水印时，高速缓存逐出算法移除条目，直到高速缓存大小达到低水印。</p>
                        <div class="p">本节介绍从缓存中删除条目的以下活动：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7">关于设置WaterMark</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-0B74A41C-A241-42F5-9B25-92BB70C85578">关于获得High WaterMark</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D">关于获得低水标记</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="DBFSG99855"></a><div class="props_rev_3"><a id="GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7" name="GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7"></a><h6 id="DBFSG-GUID-2F0EB720-4ADB-40D7-8738-B7B95EBC2DB7" class="sect6">关于设置WaterMark</h6>
                        <div>
                           <p>设置<a id="d28828e1590" class="indexterm-anchor"></a>水印，使用<code class="codeph">XSSessionManager</code>类中的<code class="codeph">setWaterMark</code>方法。<code class="codeph">setWaterMark</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("setWaterMark")</code> 。
                           </p>
                        </div>
                     </div><a id="DBFSG99856"></a><div class="props_rev_3"><a id="GUID-0B74A41C-A241-42F5-9B25-92BB70C85578" name="GUID-0B74A41C-A241-42F5-9B25-92BB70C85578"></a><h6 id="DBFSG-GUID-0B74A41C-A241-42F5-9B25-92BB70C85578" class="sect6">关于获得High WaterMark</h6>
                        <div>
                           <p>得到的<a id="d28828e1723" class="indexterm-anchor"></a>缓存的高水印，使用<code class="codeph">XSSessionManager</code>类中的<code class="codeph">getHighWaterMark</code>方法。
                           </p>
                        </div>
                     </div><a id="DBFSG99857"></a><div class="props_rev_3"><a id="GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D" name="GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D"></a><h6 id="DBFSG-GUID-B39AE5D8-E06F-4E5C-BC25-12151461A58D" class="sect6">关于获得低水标记</h6>
                        <div>
                           <p>得到的<a id="d28828e1851" class="indexterm-anchor"></a>缓存的低水印，使用<a id="d28828e1858" class="indexterm-anchor"></a>来自<code class="codeph">XSSessionManager</code>类的<code class="codeph">getLowWaterMark</code>方法。
                           </p>
                        </div>
                     </div>
                  </div><a id="DBFSG99858"></a><div class="props_rev_3"><a id="GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E" name="GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E"></a><h5 id="DBFSG-GUID-8101F9C6-43ED-4209-AB56-F28DEB35FC9E" class="sect5">关于清除缓存</h5>
                     <div>
                        <p>清除缓存<a id="d28828e1983" class="indexterm-anchor"></a>明确地从中间层，使用<a id="d28828e1990" class="indexterm-anchor"></a> <code class="codeph">XSSessionManager</code>类的<code class="codeph">clearCache</code>方法。此方法显式清除中间层的共享缓存。<code class="codeph">clearCache</code>方法的调用者必须具有JAAS权限<code class="codeph">XSSecurityPermission("clearCache")</code> 。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DBFSG99861"></a><div class="props_rev_3"><a id="GUID-BC164147-DE1C-4E73-84B7-715540C5FC88" name="GUID-BC164147-DE1C-4E73-84B7-715540C5FC88"></a><h3 id="DBFSG-GUID-BC164147-DE1C-4E73-84B7-715540C5FC88" class="sect3">关于管理Real Application Security会话</h3>
               <div>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E">创建Real Application Security用户会话</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A">附加应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9">分配或切换应用程序用户</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-930E5B82-A24B-482C-BCB6-44113251D5C8">启用Real Application Security应用程序角色</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-6ED38345-63A3-490E-84A6-037C42B3164F">关于以会话用户身份执行命名空间操作</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8">关于执行其他与会话相关的活动</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B">分离应用程序会话</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004">销毁真实应用程序安全应用程序会话</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG99863"></a><a id="DBFSG99862"></a><div class="props_rev_3"><a id="GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E" name="GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E"></a><h4 id="DBFSG-GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E" class="sect4">创建Real Application Security用户会话</h4>
                  <div>
                     <div class="section">
                        <p>创建一个实时应用安全用户会话，例如， <code class="codeph">lws</code> ，应用程序用户<code class="codeph">lwuser</code> ，使用<code class="codeph">createSession</code>所述的方法<code class="codeph">XSSessionManager</code>类（参见<a href="using-real-application-security-in-java-applications.html#GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">实施例6-2</a> ）。<code class="codeph">createSession</code>方法（粗体字）。使用传递的指定参数在服务器上创建会话。执行此操作需要数据库往返。
                        </p>
                        <p>要创建匿名的Real Application Security应用程序会话，请使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">createAnonymousSession</code>方法。此会话的应用程序用户是预定义的匿名用户，因此在此方法中不传递任何用户参数。
                        </p>
                        <p>这两种方法都支持使用cookie和命名空间。</p>
                        <p>作为参数传递的cookie可用于在将来的调用中标识新创建的Real Application Security应用程序会话，直到cookie值更改或会话被销毁。</p>
                        <p>作为参数传递的名称空间可用于在会话中创建名称空间。有关详细信息，请参阅<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-6ED38345-63A3-490E-84A6-037C42B3164F">关于将会话空间操作作为会话用户执行</a> ”</span> 。
                        </p>
                        <p>可以重新分配特定应用程序用户以接管此会话。在这种情况下，仍然保留匿名用户的某些会话状态。有关详细信息，请参阅<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9">分配或切换应用程序用户</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-583E51CC-E332-4649-A00F-B6ED09D4F27E__BGBJJCCB">
                        <p class="titleinexample">示例6-2如何使用Java创建实际应用程序安全性会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null;静态XSSessionManager管理器; static Connection lwsConn = null; static String user =“lwuser”; String cookie =“nst”; ...
<span class="bold">lws = manager.createSession（lwsConn，user，cookie，null）;</span> ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG466"></a><a id="DBFSG467"></a><a id="DBFSG465"></a><div class="props_rev_3"><a id="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A" name="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A"></a><h4 id="DBFSG-GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A" class="sect4">附加应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>附加申请<a id="d28828e2450" class="indexterm-anchor"></a> session，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">attachSession</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">例6-3</a> ）。<code class="codeph">attachSession</code>方法（粗体字体）将JDBC连接附加到指定的Real Application Security应用程序会话对象。它还启用或禁用动态应用程序角色，创建会话的命名空间以及设置身份验证时间。
                        </p>
                        <p>您还可以使用ID或cookie附加到会话，如<a href="using-real-application-security-in-java-applications.html#GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__CHDIHFHI">例6-4</a>所示。有关使用cookie附加到会话的另一个示例，请参见<a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">示例7-2</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__BABJCJBI">
                        <p class="titleinexample">示例6-3如何使用Java附加Real Application Security会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static Connection lwsConn = null;静态XSSessionManager管理器; static String user =“lwuser”; String cookie =“lwscookie”; List &lt;String&gt; edynamicRoles = new ArrayList &lt;String&gt;（）; edynamicRoles.add（ “EDYNROLE001”）; edynamicRoles.add（ “EDYNROLE002”）; List &lt;String&gt; ddynamicRoles = new ArrayList &lt;String&gt;（）; ddynamicRoles.add（ “DDYNROLE001”）; ddynamicRoles.add（ “DDYNROLE002”）; ...lws = manager.createSession（lwsConn，user，cookie，null）; <span class="bold">manager.attachSession（lwsConn，lws，edynamicRoles，ddynamicRoles，null，new Timestamp（System.currentTimeMillis（）））;</span>
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3C2EC26F-6493-41E2-BD52-B5923FEE8E8A__CHDIHFHI">
                        <p class="titleinexample">示例6-4如何使用Cookie附加</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static Connection lwsConn = null;静态XSSessionManager管理器; ...lws = manager.attachSessionByCookie（lwsConn，“myCookie”，null，null，null，null，null）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG471"></a><a id="DBFSG472"></a><a id="DBFSG470"></a><div class="props_rev_3"><a id="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9" name="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9"></a><h4 id="DBFSG-GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9" class="sect4">分配或切换应用程序用户</h4>
                  <div>
                     <div class="section">
                        <p>如果您有匿名会话，则可以稍后将其重新分配给其他应用程序用户。否则，如果您的会话已分配给应用程序用户，则可以将会话切换到另一个应用程序用户。在任何一种情况下，必须首先附加会话，然后才能分配或切换应用程序用户。</p>
                        <p>要为以前的匿名应用程序用户指定名称，请使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">assignUser</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">示例6-5</a> ）。<code class="codeph">assignUser</code>方法（粗体字体） <code class="codeph">assignUser</code>上下文（用户和角色）更改为给定用户（例如<code class="codeph">lwuser</code> ，但保留现有命名空间。它也可以通过任何给定的动态角色和命名空间参数同时更改会话，方法与<code class="codeph">attachSession</code>方法相同。除非通过另一个调用删除它们，否则关联的会话属性仍然有效。
                        </p>
                        <p>要将会话用户从命名用户（非匿名）更改为另一个命名用户，请使用Session对象的<code class="codeph">switchUser</code>方法。
                        </p>
                        <p>禁用在附加会话时分配的任何保留动态应用程序角色的请求。仅当新应用程序用户也包含在新应用程序用户的动态应用程序角色列表中时，才会保留动态应用程序角色。除非重置会话属性列表，否则关联的会话属性仍然有效。</p>
                        <p>此方法将会话上下文（用户和角色）更改为目标用户（有关角色更改的详细信息，请参阅<span class="q">“ <a href="configuring-application-sessions.html#GUID-CC76B226-1A50-4E2E-9569-8970B1EA2EF3">将当前应用程序用户切换到当前应用程序会话中的另一个应用程序用户</a> ”</span> ），但默认情况下<span class="italic">不</span>保留现有命名空间。如果要保留现有命名空间，可以使用Session对象的<code class="codeph">switchUserKeepState</code>方法。它也可以通过任何给定的动态角色和命名空间参数同时更改会话，方法与<code class="codeph">attachSession</code>方法相同。
                        </p>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">例6-6</a>演示了如何将应用程序用户从<code class="codeph">lwuser</code>到<code class="codeph">lwuser1</code> 。<code class="codeph">switchUser</code>方法以粗体字体显示。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABJABAB">
                        <p class="titleinexample">示例6-5如何使用Java将应用程序用户分配给会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null;静态XSSessionManager管理器; static String user =“lwuser”; ...
<span class="bold">manager.assignUser（lws，user，null，null，null，new Timestamp（System.currentTimeMillis（）））;</span>
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-4D8AEEB1-29BF-4813-9023-4EA8FB21E5D9__BABDIGAE">
                        <p class="titleinexample">示例6-6如何使用Java在会话中切换应用程序用户</p><pre class="oac_no_warn" dir="ltr">Session lws = null; Vector &lt;String&gt; listOfNamespaces; static String user =“lwuser”; List &lt;String&gt; nslist1 = new ArrayList &lt;String&gt;（）; ...manager.assignUser（lws，user，nslist1，nslist2，nslist3，new Timestamp（System.currentTimeMillis（）））; ...
<span class="bold">lws.switchUser（ “lwuser1”，listOfNamespaces）;</span>
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG473"></a><div class="props_rev_3"><a id="GUID-930E5B82-A24B-482C-BCB6-44113251D5C8" name="GUID-930E5B82-A24B-482C-BCB6-44113251D5C8"></a><h4 id="DBFSG-GUID-930E5B82-A24B-482C-BCB6-44113251D5C8" class="sect4">启用Real Application Security应用程序角色</h4>
                  <div>
                     <div class="section">
                        <p>Real Application Security应用程序角色是一个角色，只能授予Real Application Security应用程序用户或其他Real Application Security应用程序角色。Real Application Security应用程序角色通过数据库角色授予数据库权限。数据库权限被授予数据库角色，而后者又被授予Real Application Security应用程序角色。有关Real Application Security应用程序用户和应用程序角色的更多信息，请参阅<span class="q">“ <a href="indroducing-oracle-database-real-application-security.html#GUID-75ECE2BF-08EE-451E-B303-43DB307382F6">Principals：Users and Roles</a> ”</span> 。
                        </p>
                        <div class="p">本节介绍与应用程序角色关联的以下操作：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-51C12565-C2CE-4406-8152-3D67D4001A9B">启用Real Application Security应用程序角色</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9">禁用Real Application Security应用程序角色</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7">检查是否启用了真正的应用程序安全应用程序角色</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DBFSG475"></a><a id="DBFSG474"></a><div class="props_rev_3"><a id="GUID-51C12565-C2CE-4406-8152-3D67D4001A9B" name="GUID-51C12565-C2CE-4406-8152-3D67D4001A9B"></a><h5 id="DBFSG-GUID-51C12565-C2CE-4406-8152-3D67D4001A9B" class="sect5">启用Real Application Security应用程序角色</h5>
                     <div>
                        <div class="section">
                           <p>启用Real Application Security应用程序<a id="d28828e2935" class="indexterm-anchor"></a>授予当前应用程序用户会话的角色，使用<code class="codeph">Session</code>接口的<code class="codeph">enableRole</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-51C12565-C2CE-4406-8152-3D67D4001A9B__BABIFEGI">例6-7</a> ）。
                           </p>
                           <p>如果当前禁用了特定的应用程序角色，则<code class="codeph">enableRole</code>方法（粗体字体）无效。此操作需要数据库往返。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-51C12565-C2CE-4406-8152-3D67D4001A9B__BABIFEGI">
                           <p class="titleinexample">示例6-7如何在Java中启用Real Application Security应用程序角色</p><pre class="oac_no_warn" dir="ltr">静态会话lws;静态角色r1; ...r1 =新角色（“HROLE1”，null，0）; <span class="bold">lws.enableRole（R1）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG477"></a><a id="DBFSG476"></a><div class="props_rev_3"><a id="GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9" name="GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9"></a><h5 id="DBFSG-GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9" class="sect5">禁用Real Application Security应用程序角色</h5>
                     <div>
                        <div class="section">
                           <p>禁用Real Application Security <a id="d28828e3077" class="indexterm-anchor"></a>授予当前用户会话的应用程序角色，使用<code class="codeph">Session</code>接口的<code class="codeph">disableRole</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9__BABJJGHA">例6-8</a> ）。此操作需要数据库往返。<code class="codeph">disableRole</code>方法以粗体字体表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-A56BB20C-9ED7-440E-8B44-3F7ECD55C4D9__BABJJGHA">
                           <p class="titleinexample">示例6-8如何在Java中禁用实际应用程序安全应用程序角色</p><pre class="oac_no_warn" dir="ltr">静态会话lws;静态角色r1; ...r1 =新角色（“HROLE1”，null，0）; lws.enableRole（R1）; ...
<span class="bold">lws.disableRole（R1）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG479"></a><a id="DBFSG478"></a><div class="props_rev_3"><a id="GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7" name="GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7"></a><h5 id="DBFSG-GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7" class="sect5">检查是否启用了真正的应用程序安全应用程序角色</h5>
                     <div>
                        <div class="section">
                           <p>测试指定的应用程序<a id="d28828e3218" class="indexterm-anchor"></a>在Real Application Security应用程序会话中启用角色，使用<a id="d28828e3223" class="indexterm-anchor"></a> <code class="codeph">Session</code>接口的<code class="codeph">isRoleEnabled</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7__BABDCGIJ">例6-9</a> ）。<code class="codeph">isRoleEnabled</code>方法以粗体字体表示。
                           </p>
                           <p>此方法没有关联的数据库操作。您必须具有<code class="codeph">administerSession</code> Real Application Security应用程序特权才能调用此方法。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-52F935A4-BBFB-4EB7-81B9-8F4A02CE8FD7__BABDCGIJ">
                           <p class="titleinexample">示例6-9如何测试是否在Java中启用了真正的应用程序安全应用程序角色</p><pre class="oac_no_warn" dir="ltr">静态会话lws; ...lws.enableRole（ “HROLE1”）; ...
<span class="bold">boolean b = lws.isRoleEnabled（“HROLE1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DBFSG99901"></a><div class="props_rev_3"><a id="GUID-6ED38345-63A3-490E-84A6-037C42B3164F" name="GUID-6ED38345-63A3-490E-84A6-037C42B3164F"></a><h4 id="DBFSG-GUID-6ED38345-63A3-490E-84A6-037C42B3164F" class="sect4">关于以会话用户身份执行命名空间操作</h4>
                  <div>
                     <p>命名空间是会话上下文的一组附加属性。应用程序使用命名空间来存储应用程序定义的属性 - 值对。当前会话用户应具有<code class="codeph">MODIFY_NAMESPACE</code> （用于名称空间）和<code class="codeph">MODIFY_ATTRIBUTE</code> （用于属性）应用程序权限。有关命名空间的更多信息，请参阅<span class="q">“ <a href="configuring-application-sessions.html#GUID-0B1ED666-0401-4050-BE4E-EF375752A39B">关于使用命名空间模板创建命名空间</a> ”</span> 。
                     </p>
                     <div class="p">本节介绍如何执行以下活动：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304">创建命名空间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-07954A29-1F53-4609-9F69-7A883972E6D0">删除命名空间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2">隐式创建命名空间</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC">关于使用命名空间属性</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG99903"></a><a id="DBFSG99902"></a><div class="props_rev_3"><a id="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304" name="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304"></a><h5 id="DBFSG-GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304" class="sect5">创建命名空间</h5>
                     <div>
                        <div class="section">
                           <p>要在Java中创建命名空间，请使用<code class="codeph">Session</code>接口的<code class="codeph">createNamespace</code>方法（请参阅<a href="using-real-application-security-in-java-applications.html#GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">示例6-10</a> ）。<code class="codeph">createNamespace</code>方法（以粗体字体表示）创建一个新的会话命名空间<a id="d28828e3527" class="indexterm-anchor"></a>使用名称与指定名称匹配的名称空间模板文档。如果在模板文档中指定了事件处理程序，则指定的事件处理程序将应用于使用该模板创建的所有名称空间。
                           </p>
                           <div class="infoboxnote" id="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__GUID-ED2842BE-9C6F-4A3F-B52D-95EFEB92C2B9">
                              <p class="notep1">注意：</p>
                              <p>您还可以通过使用前面部分中讨论的<code class="codeph">createSession</code>和<code class="codeph">attachSession</code>方法将名称空间名称作为参数传递来创建名称空间。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F96DD9EA-EF6D-41D9-B64C-4C3CEE69E304__BGBEFDHB">
                           <p class="titleinexample">示例6-10如何在Java中创建命名空间</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...
<span class="bold">SessionNamespace ns = lws.createNamespace（“TESTNS1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG99927"></a><a id="DBFSG99926"></a><div class="props_rev_3"><a id="GUID-07954A29-1F53-4609-9F69-7A883972E6D0" name="GUID-07954A29-1F53-4609-9F69-7A883972E6D0"></a><h5 id="DBFSG-GUID-07954A29-1F53-4609-9F69-7A883972E6D0" class="sect5">删除命名空间</h5>
                     <div>
                        <div class="section">
                           <p>删除一个<a id="d28828e3665" class="indexterm-anchor"></a> Java中的命名空间，使用<code class="codeph">Session</code>接口的<code class="codeph">deleteNamespace</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-07954A29-1F53-4609-9F69-7A883972E6D0__BGBEIACD">例6-11</a> ）。<code class="codeph">deleteNamespace</code>方法（粗体字体）从会话中删除命名空间。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-07954A29-1F53-4609-9F69-7A883972E6D0__BGBEIACD">
                           <p class="titleinexample">示例6-11如何在Java中删除命名空间</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...SessionNamespace ns = lws.createNamespace（“TESTNS1”）; ...
<span class="bold">lws.deleteNamespace（ “TESTNS1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG99905"></a><a id="DBFSG99904"></a><div class="props_rev_3"><a id="GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2" name="GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2"></a><h5 id="DBFSG-GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2" class="sect5">隐式创建命名空间</h5>
                     <div>
                        <div class="section">
                           <p>隐含地<a id="d28828e3806" class="indexterm-anchor"></a>创建名称空间对象以表示会话名称空间，使用<code class="codeph">Session</code>接口的<code class="codeph">getNamespace</code>方法（请参阅<a href="using-real-application-security-in-java-applications.html#GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2__BGBCDFGB">示例6-12</a> ）。<code class="codeph">getNamespace</code>方法以粗体字体表示。如果指定的命名空间已存在，则抛出错误。
                           </p>
                           <p>要检索命名空间的String表示形式，请使用<a id="d28828e3824" class="indexterm-anchor"></a> <code class="codeph">SessionNamespace</code>接口的<code class="codeph">toString</code>方法。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-FCF83764-6C46-4B38-97E1-92D01F7D16B2__BGBCDFGB">
                           <p class="titleinexample">示例6-12如何在Java中隐式创建命名空间</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...
<span class="bold">SessionNamespace ns2 = lws.getNamespace（“TESTNS1”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG99909"></a><div class="props_rev_3"><a id="GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC" name="GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC"></a><h5 id="DBFSG-GUID-D7FC21CA-68C1-4890-80BF-379C0D7445FC" class="sect5">关于使用命名空间属性</h5>
                     <div>
                        <p>会话命名空间管理单个应用程序模块在会话期间存储的属性。会话命名空间将属性存储在单个命名空间，一组访问控制限制或单个事件处理程序过程中，该过程调度该命名空间的属性更改事件。</p>
                        <div class="p">本节介绍如何执行以下活动：<ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57">创建会话命名空间属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567">关于设置会话命名空间属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2">获取会话命名空间属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E">列出属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29">重置属性</a></p>
                              </li>
                              <li>
                                 <p><a href="using-real-application-security-in-java-applications.html#GUID-4679C940-38C5-4013-997A-7A4D45184508">删除属性</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="DBFSG99911"></a><a id="DBFSG99910"></a><div class="props_rev_3"><a id="GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57" name="GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57"></a><h6 id="DBFSG-GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57" class="sect6">创建会话命名空间属性</h6>
                        <div>
                           <div class="section">
                              <p>创建一个<a id="d28828e4105" class="indexterm-anchor"></a> Java中的session namespace属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">createAttribute</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57__BGBGEEGH">例6-13</a> ）。<code class="codeph">createAttribute</code>方法（粗体字体）在命名空间中创建一个新属性。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-941BB32F-DCE5-42EE-AA1A-576BC0577E57__BGBGEEGH">
                              <p class="titleinexample">示例6-13如何在Java中创建会话命名空间属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...
<span class="bold">SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG480"></a><div class="props_rev_3"><a id="GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567" name="GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567"></a><h6 id="DBFSG-GUID-BEF803A4-9CE4-4F82-B31A-FFC5C1C0E567" class="sect6">关于设置会话命名空间属性</h6>
                        <div>
                           <p>设置一个<a id="d28828e4243" class="indexterm-anchor"></a> Java中的session namespace属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">setAttribute</code>方法。
                           </p>
                        </div>
                     </div><a id="DBFSG99913"></a><a id="DBFSG99912"></a><div class="props_rev_3"><a id="GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2" name="GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2"></a><h6 id="DBFSG-GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2" class="sect6">获取会话命名空间属性</h6>
                        <div>
                           <div class="section">
                              <p>要检索<a id="d28828e4371" class="indexterm-anchor"></a> Java中的会话命名空间属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">getAttribute</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2__BGBFFFAD">例6-14</a> ）。<code class="codeph">getAttribute</code>方法（粗体字体）返回其名称指定为参数的属性。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-B1C5CF5C-A134-4FE8-922C-A64292895DB2__BGBFFFAD">
                              <p class="titleinexample">示例6-14如何在Java中检索会话命名空间属性</p><pre class="oac_no_warn" dir="ltr">String name =“empid'; String value =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa = ns.createAttribute（name，value）; ...
<span class="bold">String attrvalue = ns.getAttribute（“empid”）。getValue（）;</span> <span class="bold">ns.getAttribute（ “EMPID”）的setValue（ “NEWVALUE”）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG99921"></a><a id="DBFSG99920"></a><div class="props_rev_3"><a id="GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E" name="GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E"></a><h6 id="DBFSG-GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E" class="sect6">列出属性</h6>
                        <div>
                           <div class="section">
                              <p>列出属性<a id="d28828e4514" class="indexterm-anchor"></a>在命名空间中，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">listAttributes</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E__BGBFJEAC">例6-15</a> ）。<code class="codeph">listAttributes</code>方法（粗体字体）返回命名空间中属性名称的集合</p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-29C27170-36F2-449C-82E4-9DD0687BFE6E__BGBFJEAC">
                              <p class="titleinexample">示例6-15如何在Java中列出属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）; ...
<span class="bold">for（Enumeration e = ns.listAttributes（）; e.hasMoreElements（）;）</span> {System.out.println（“ - ”+ e.nextElement（））; } ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG99923"></a><a id="DBFSG99922"></a><div class="props_rev_3"><a id="GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29" name="GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29"></a><h6 id="DBFSG-GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29" class="sect6">重置属性</h6>
                        <div>
                           <div class="section">
                              <p>要重置<a id="d28828e4654" class="indexterm-anchor"></a>在Java中使用属性，使用<code class="codeph">SessionNamespace</code>接口的<code class="codeph">resetAttribute</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29__BGBIEIGE">例6-16</a> ）。<code class="codeph">resetAttribute</code>方法（粗体字体）将名称空间中的属性重置为其默认值。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-8873B2F2-80C5-4F88-8E3F-05471C94DE29__BGBIEIGE">
                              <p class="titleinexample">示例6-16如何在Java中重置属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）; ...
<span class="bold">ns.resetAttribute（ “EMPID”）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="DBFSG99925"></a><a id="DBFSG99924"></a><div class="props_rev_3"><a id="GUID-4679C940-38C5-4013-997A-7A4D45184508" name="GUID-4679C940-38C5-4013-997A-7A4D45184508"></a><h6 id="DBFSG-GUID-4679C940-38C5-4013-997A-7A4D45184508" class="sect6">删除属性</h6>
                        <div>
                           <div class="section">
                              <p>删除<a id="d28828e4795" class="indexterm-anchor"></a> Java中的一个属性，使用<a id="d28828e4800" class="indexterm-anchor"></a> <code class="codeph">deleteAttribute</code>所述的方法<code class="codeph">SessionNamespace</code>接口（参见<a href="using-real-application-security-in-java-applications.html#GUID-4679C940-38C5-4013-997A-7A4D45184508__BGBHJDED">实施例6-17</a> ）。<code class="codeph">deleteAttribute</code>方法（粗体字体）删除命名空间中的特定属性。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-4679C940-38C5-4013-997A-7A4D45184508__BGBHJDED">
                              <p class="titleinexample">示例6-17如何在Java中删除属性</p><pre class="oac_no_warn" dir="ltr">String name1 =“empid'; String value1 =”JB007“; SessionNamespace ns; ...SessionNamespaceAttribute sa1 = ns.createAttribute（name1，value1）; ...
<span class="bold">ns.deleteAttribute（ “EMPID”）;</span> ...
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div>
               </div><a id="DBFSG682"></a><div class="props_rev_3"><a id="GUID-ED231373-C97C-436C-9EF1-BDC33D723B9D" name="GUID-ED231373-C97C-436C-9EF1-BDC33D723B9D"></a><h4 id="DBFSG-GUID-ED231373-C97C-436C-9EF1-BDC33D723B9D" class="sect4">关于将命名空间操作作为会话管理器执行</h4>
                  <div>
                     <p>每个命名空间都有一个关联的ACL，用于确定谁可以操作命名空间及其属性。如果应用程序不希望当前会话用户操作命名空间，但允许会话管理器执行此操作，则可以将其作为会话管理器<code class="codeph">XSSessionManager</code>来完成。
                     </p>
                     <p><code class="codeph">XSSessionManager</code>有一组重载方法作为Session来管理命名空间。其用法类似于<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-6ED38345-63A3-490E-84A6-037C42B3164F">关于以会话用户身份执行命名空间操作</a> ”</span>中为会话用户所描述的用法。
                     </p>
                     <p>请注意，会话管理器实例<code class="codeph">XSSessionManager</code>可能不适用于应用程序代码;只有受信任的基础架构层才能使用会话管理器来操作这样一个安全的命名空间。
                     </p>
                  </div>
               </div><a id="DBFSG481"></a><div class="props_rev_3"><a id="GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8" name="GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8"></a><h4 id="DBFSG-GUID-1A982585-B7E7-4AB7-92F3-B5B07C240AF8" class="sect4">关于执行其他与会话相关的活动</h4>
                  <div>
                     <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76">关于获取与会话关联的Oracle连接</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-20026189-D342-40D1-8629-462020DD4D67">关于获取会话的应用程序用户标识</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7">获取会话的会话ID</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-27784741-9900-41B7-9D35-4D7866D26D4B">关于获取会话的字符串表示形式</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6">获取会话Cookie</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA">将会话不活动超时设置为会话管理器</a></p>
                           </li>
                           <li>
                              <p><a href="using-real-application-security-in-java-applications.html#GUID-23E01854-C532-4A86-AB09-B4C10342410D">将会话Cookie设置为会话管理器</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DBFSG482"></a><div class="props_rev_3"><a id="GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76" name="GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76"></a><h5 id="DBFSG-GUID-1076C1C0-E2AB-42EE-BE5B-9E0D696ADC76" class="sect5">关于获取与会话关联的Oracle连接</h5>
                     <div>
                        <p>获取Oracle连接<a id="d28828e5217" class="indexterm-anchor"></a>与会话相关联，如果它当前绑定到一个会话，则使用<code class="codeph">Session</code>接口的<code class="codeph">getConnection</code>方法。
                        </p>
                     </div>
                  </div><a id="DBFSG483"></a><div class="props_rev_3"><a id="GUID-20026189-D342-40D1-8629-462020DD4D67" name="GUID-20026189-D342-40D1-8629-462020DD4D67"></a><h5 id="DBFSG-GUID-20026189-D342-40D1-8629-462020DD4D67" class="sect5">关于获取会话的应用程序用户标识</h5>
                     <div>
                        <p>获得申请<a id="d28828e5342" class="indexterm-anchor"></a>特定会话的用户标识符（ID），使用<code class="codeph">Session</code>接口的<code class="codeph">getUserId</code>方法。
                        </p>
                        <p>要检查会话的应用程序用户是否是匿名的，请使用<code class="codeph">Session</code>接口的<code class="codeph">isAnonymous</code>方法。
                        </p>
                     </div>
                  </div><a id="DBFSG485"></a><a id="DBFSG484"></a><div class="props_rev_3"><a id="GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7" name="GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7"></a><h5 id="DBFSG-GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7" class="sect5">获取会话的会话ID</h5>
                     <div>
                        <div class="section">
                           <p>获得会议<a id="d28828e5478" class="indexterm-anchor"></a>特定会话的标识符（ID），使用<code class="codeph">Session</code>接口的<code class="codeph">getId</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7__BABJIIIH">例6-18</a> ）。<code class="codeph">getId</code>方法以粗体字体表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-121ABCE5-04D8-41DB-8A6D-21C8AAD73EF7__BABJIIIH">
                           <p class="titleinexample">示例6-18如何使用Java获取会话的会话ID</p><pre class="oac_no_warn" dir="ltr">Session lws = null; ...
<span class="bold">System.out.println（“会话ID为”+ lws.getId（））;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG488"></a><div class="props_rev_3"><a id="GUID-27784741-9900-41B7-9D35-4D7866D26D4B" name="GUID-27784741-9900-41B7-9D35-4D7866D26D4B"></a><h5 id="DBFSG-GUID-27784741-9900-41B7-9D35-4D7866D26D4B" class="sect5">关于获取会话的字符串表示形式</h5>
                     <div>
                        <p>获取String表示形式<a id="d28828e5616" class="indexterm-anchor"></a>在会话中，使用<code class="codeph">Session</code>接口的<code class="codeph">toString</code>方法。
                        </p>
                     </div>
                  </div><a id="DBFSG493"></a><a id="DBFSG492"></a><div class="props_rev_3"><a id="GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6" name="GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6"></a><h5 id="DBFSG-GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6" class="sect5">获取会话Cookie</h5>
                     <div>
                        <div class="section">
                           <p>获得安全会话<a id="d28828e5743" class="indexterm-anchor"></a>用于会话的cookie，使用<code class="codeph">Session</code>接口的<code class="codeph">getSessionCookie</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6__BABBGHHH">例6-19</a> ）。<code class="codeph">getSessionCookie</code>方法以粗体字体表示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8E4A0C2D-1B6A-4C91-99A2-502397F154A6__BABBGHHH">
                           <p class="titleinexample">示例6-19如何使用Java获取安全会话Cookie</p><pre class="oac_no_warn" dir="ltr">静态会话lws; ...
<span class="bold">System.out.println（lws.getSessionCookie（））</span> ;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DBFSG489"></a><div class="props_rev_3"><a id="GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA" name="GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA"></a><h5 id="DBFSG-GUID-8481DB9B-7085-4F2B-8C96-27A81F18CEFA" class="sect5">将会话不活动超时设置为会话管理器</h5>
                     <div>
                        <div class="section">
                           <p>设置超时<a id="d28828e5883" class="indexterm-anchor"></a>会话，使用<a id="d28828e5888" class="indexterm-anchor"></a> <code class="codeph">SessionManager</code>接口的<code class="codeph">setInactivityTimeout</code>方法。此方法以分钟为单位设置会话超时。
                           </p>
                           <p><code class="codeph">setInactivityTimeout</code>方法会覆盖正常的会话超时配置。方法是：</p><pre class="oac_no_warn" dir="ltr">sessionManager.setInactivityTimeout（Session session，int minutes）;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DBFSG491"></a><a id="DBFSG490"></a><div class="props_rev_3"><a id="GUID-23E01854-C532-4A86-AB09-B4C10342410D" name="GUID-23E01854-C532-4A86-AB09-B4C10342410D"></a><h5 id="DBFSG-GUID-23E01854-C532-4A86-AB09-B4C10342410D" class="sect5">将会话Cookie设置为会话管理器</h5>
                     <div>
                        <div class="section">
                           <p>设置安全<a id="d28828e6021" class="indexterm-anchor"></a>会话cookie用于会话，使用<a id="d28828e6026" class="indexterm-anchor"></a> <code class="codeph">SessionManager</code>接口的<code class="codeph">setCookie</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-23E01854-C532-4A86-AB09-B4C10342410D__BABJJBHF">例6-20</a> ）。<code class="codeph">setCookie</code>方法（粗体字体）返回用于此会话的安全会话cookie。方法是：</p><pre class="oac_no_warn" dir="ltr">sessionManager.setCookie（LWS “newCookieValue”）;</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-23E01854-C532-4A86-AB09-B4C10342410D__BABJJBHF">
                           <p class="titleinexample">示例6-20如何使用Java设置安全会话Cookie</p><pre class="oac_no_warn" dir="ltr">静态XSSessionManager管理器; ...
<span class="bold">manager.sessionManager.setCookie（lws，“巧克力片”）;</span>
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="DBFSG469"></a><a id="DBFSG468"></a><div class="props_rev_3"><a id="GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B" name="GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B"></a><h4 id="DBFSG-GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B" class="sect4">分离应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>分离Real Application Security <a id="d28828e6167" class="indexterm-anchor"></a> Java中的应用程序会话，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">detachSession</code>方法（参见<a href="using-real-application-security-in-java-applications.html#GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B__BABJFIGH">例6-21</a> ）。<code class="codeph">detachSession</code>方法（粗体字）分离其接受的对象作为参数的会话。<code class="codeph">detachSession</code>方法调用在数据库级别提交请求中的所有更改。执行此操作需要数据库往返。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-1644F4CF-90DE-40BE-AC5C-341372A0DB3B__BABJFIGH">
                        <p class="titleinexample">示例6-21如何使用Java分离实际应用程序安全会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null;静态XSSessionManager管理器; static Connection lwsConn = null; static String user =“lwuser”;字符串cookie; ...lws = manager.createSession（lwsConn，user，cookie，null）; manager.attachSession（lwsConn，lws，null，null，null，new Timestamp（System.currentTimeMillis（）））; ...
<span class="bold">manager.detachSession（LWS）;</span> ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99866"></a><a id="DBFSG99865"></a><div class="props_rev_3"><a id="GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004" name="GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004"></a><h4 id="DBFSG-GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004" class="sect4">销毁真实应用程序安全应用程序会话</h4>
                  <div>
                     <div class="section">
                        <p>摧毁<a id="d28828e6312" class="indexterm-anchor"></a>使用Java中的Real Application Security应用程序会话，使用<code class="codeph">XSSessionManager</code>类的<code class="codeph">destroySession</code>方法（请参见<a href="using-real-application-security-in-java-applications.html#GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004__BGBIJIFH">示例6-22</a> ）。<code class="codeph">destroySession</code>方法（粗体字体）接受数据库连接对象和会话对象作为参数。调用此方法后，无法再从任何JVM访问已销毁的会话。需要数据库往返来执行此操作以及创建会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6DACB579-26F2-4641-A4D5-E7DE2A1B0004__BGBIJIFH">
                        <p class="titleinexample">示例6-22如何在Java中销毁实际应用程序安全会话</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static Connection lwsConn = null;静态XSSessionManager管理器; static String user =“lwuser”;字符串cookie; ...lws = manager.createSession（lwsConn，user，cookie，null）; manager.attachSession（lwsConn，lws，null，null，null，new Timestamp（System.currentTimeMillis（）））; ...manager.detachSession（LWS）; <span class="bold">manager.destroySession（lwsConn，lws）;</span> ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="DBFSG99938"></a><a id="DBFSG99937"></a><div class="props_rev_3"><a id="GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F" name="GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F"></a><h3 id="DBFSG-GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F" class="sect3">使用Java API验证应用程序用户</h3>
               <div>
                  <div class="section">
                     <p>验证应用程序<a id="d28828e6453" class="indexterm-anchor"></a>用户是应用程序所需的主要安全功能。<code class="codeph">XSAuthenticationModule</code>类用于验证应用程序用户。<code class="codeph">XSAuthenticationModule</code>类的<code class="codeph">authenticate</code>方法用于验证应用程序用户凭据（请参见<a href="using-real-application-security-in-java-applications.html#GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F__BGBJHDID">示例6-23</a> ）。<code class="codeph">authenticate</code>方法以粗体字体表示。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FDF62B47-A13B-4CA1-AA9C-F2EF602FF60F__BGBJHDID">
                     <p class="titleinexample">示例6-23如何使用Java验证应用程序用户</p><pre class="oac_no_warn" dir="ltr">boolean authOk = false; String dbUser; String passwd;字符串主机;字符串端口; String sid; ...
<span class="bold">authOk = XSAuthenticationModule.authenticate（host +“：”+ port +“：”+ sid，dbUser，passwd）;</span> ...
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DBFSG99928"></a><div class="props_rev_3"><a id="GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3" name="GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3"></a><h3 id="DBFSG-GUID-A3A5BE47-E770-4206-8DA8-4A9D70FA89E3" class="sect3">关于使用ACL授权应用程序用户</h3>
               <div>
                  <p>授权是应用程序所需的另一个主要安全功能。在Real Application Security中，授权策略包括访问控制列表（ACL）和应用程序权限。它们在Real Application Security数据库中定义，并在中间层的缓存中进行管理。应用程序权限是数据权限。数据权限用于定义函数或操作对数据的访问。一旦函数将连接附加到会话，任何通过连接传递的查询都将由数据库服务器自动强制执行。</p>
                  <div class="p"><code class="codeph">AclId</code>类提供了各种方法来执行以下操作：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1">构造ACL标识符</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747">使用checkAcl方法</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B">关于获取与特定ACL关联的数据权限</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG497"></a><a id="DBFSG99929"></a><div class="props_rev_3"><a id="GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1" name="GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1"></a><h4 id="DBFSG-GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1" class="sect4">构造ACL标识符</h4>
                  <div>
                     <div class="section">
                        <p>构建一个<a id="d28828e6735" class="indexterm-anchor"></a>访问控制列表（ACL）标识符，使用<code class="codeph">AclId</code>类的重载参数化构造函数之一（请参见<a href="using-real-application-security-in-java-applications.html#GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1__BGBDEFAE">示例6-24</a> ）。如果要从原始二进制数据构造ACL标识符，请使用以下构造函数：</p><pre class="oac_no_warn" dir="ltr">public AclId（byte [] raw）</pre><p>调用此构造函数时，将创建使用从查询的<code class="codeph">ora_get_aclids</code>运算符返回的原始二进制文件的ACL标识符。
                        </p>
                        <p>如果要从内部ACL标识符构造ACL标识符，请使用以下构造函数：</p><pre class="oac_no_warn" dir="ltr">public AclId（java.util。名单&lt;java.lang中。长&gt; ids）</pre><p>调用此构造函数时，它会使用内部ACL标识符创建ACL标识符。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-99DFC9BD-59D5-40A7-B876-5E0AB52059D1__BGBDEFAE">
                        <p class="titleinexample">示例6-24如何构造ACL标识符</p><pre class="oac_no_warn" dir="ltr">Session lws = null; static byte [] aclRaw; ...AclId id = new AclId（aclRaw）; boolean ret = lws.checkAcl（aclRaw，“UPDATE_INFO”）; ...</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG498"></a><a id="DBFSG99934"></a><div class="props_rev_3"><a id="GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747" name="GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747"></a><h4 id="DBFSG-GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747" class="sect4">使用checkAcl方法</h4>
                  <div>
                     <div class="section">
                        <p>检查一个或多个ACL <a id="d28828e6879" class="indexterm-anchor"></a>对于指定的数据权限，请使用<code class="codeph">XSAccessController</code>类的<code class="codeph">checkAcl</code>方法。根据<code class="codeph">AclId</code>对象中定义的一个或多个ACL检查数据特权。只有在ACL中授予所有数据权限时， <code class="codeph">checkAcl</code>方法才返回<code class="codeph">true</code> 。请务必注意，不需要在单个ACL中授予所有权限。使用<code class="codeph">checkAcl</code>方法需要一个会话，如<a href="using-real-application-security-in-java-applications.html#GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747__BGBCBEIA">例6-25</a>所示。
                        </p>
                        <p><a href="using-real-application-security-in-java-applications.html#GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747__BGBCBEIA">例6-25</a>演示了如何获取与数据特权<code class="codeph">privileges22</code>相关联的ACL。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A6FCD53A-A13B-48BF-9A27-85E453B35747__BGBCBEIA">
                        <p class="titleinexample">示例6-25如何获取指定数据权限的ACL</p><pre class="oac_no_warn" dir="ltr">boolean ret; Session lws = null; AclId id2 = new AclId（ids）; List &lt;String&gt; privileges22 = new ArrayList &lt;String&gt;（）; ...ret = XSAccessController.checkAcl（lws，id2，privileges22）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG99936"></a><div class="props_rev_3"><a id="GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B" name="GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B"></a><h4 id="DBFSG-GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B" class="sect4">关于获取与特定ACL关联的数据权限</h4>
                  <div>
                     <p>获取数据集合<a id="d28828e7031" class="indexterm-anchor"></a>对于给定的会话，在给定ACL中授予的权限使用<code class="codeph">Session</code>类的<code class="codeph">getPrivileges</code>方法。
                     </p>
                     <div class="infoboxnote" id="GUID-AF830025-6F45-4E53-9506-6F6260AF6F4B__GUID-0C7C27E4-2FF8-4061-A52A-CCCC76047D49">
                        <p class="notep1">注意：</p>
                        <p>您可以使用<code class="codeph">checkAcl</code>方法实现数据安全性，使用<code class="codeph">checkPrivilege</code>方法实现功能安全性。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="DBFSG456"></a><a id="DBFSG501"></a><a id="DBFSG502"></a><a id="DBFSG503"></a><a id="DBFSG504"></a><a id="DBFSG505"></a><a id="DBFSG506"></a><a id="DBFSG500"></a><div class="props_rev_3"><a id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3" name="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3"></a><h3 id="DBFSG-GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3" class="sect3">人力资源管理用例：用Java实现</h3>
               <div>
                  <div class="section">
                     <p>本节介绍如何在中间层验证与数据安全性相关的应用程序权限。此Java示例基于<span class="q">“ <a href="configuring-data-security.html#GUID-C6EF75C9-C167-4482-828E-065BD552E0B7">Real Application Security：All It All Together</a> ”</span>中描述的安全人力资源（HR）场景。它使用示例<code class="codeph">HR</code>模式中的<code class="codeph">EMPLOYEES</code>表。该示例使用两个Real Application Security应用程序用户<code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code>来说明Real Application Security概念。该示例可分为以下模块：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CHDGBCJB">设置中间层相关配置</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCEEE">设置连接并初始化中间层</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBDHCEF">使用中间层API设置会话和授权</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBGGIID">在数据库上运行查询</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCIGH">执行清理操作</a></p>
                        </li>
                        <li>
                           <p><a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBCBIJJ">主要方法</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CHDGBCJB">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-755253E6-ECF0-417C-B8BF-0E38C9D3CEA7">设置中间层相关配置</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>要设置中档配置包括创建一个<code class="codeph">DISPATCHER</code>用户名和密码，并授予该用户的<code class="codeph">xscacfeadmin</code>和<code class="codeph">xsessionadmin</code>真正应用安全管理员权限。
                     </p><pre class="oac_no_warn" dir="ltr">exec xs_principal.create_user（name =&gt;'dispatcher'，schema =&gt;'HR'）; exec sys.xs_principal.set_password（'dispatcher'，' <span class="italic">password</span> '）; exec xs_principal.grant_roles（'dispatcher'，'xscacheadmin'）; exec xs_principal.grant_roles（'dispatcher'，'xssessionadmin'）;</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCEEE">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-E2A6A33B-8443-4E2F-8590-A3940ECFB80A">设置连接并初始化中间层</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7248" class="indexterm-anchor"></a>使用<code class="codeph">setupConnection</code>方法创建与数据库的连接。<code class="codeph">setupConnection</code>方法接受String数组作为参数，其中：</p>
                     <p><code class="codeph">args[0]</code> =数据库用户</p>
                     <p><code class="codeph">args[1]</code> =密码</p>
                     <p><code class="codeph">args[2]</code> =主持人</p>
                     <p>此方法还通过调用<code class="codeph">oracle.security.xs.的<code class="codeph">getSessionManager</code>方法初始化中间层<code class="codeph">oracle.security.xs.XSSecurityManager</code>类。
                     </p><pre class="oac_no_warn" dir="ltr">public static void setupConnection（String [] args）throws Exception {mgrConnection = DriverManager.getConnection（args [2]，“dispatcher”，“ <span class="italic">password</span> ”）; mgr = XSSessionManager.getSessionManager（mgrConnection，30,2048000）; appConnection = DriverManager.getConnection（args [2]，args [0]，args [1]）; }</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBDHCEF">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-E253697C-E16C-48C9-A0A9-3099D118CBDE">使用中间层API设置会话和授权</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7292" class="indexterm-anchor"></a><a id="d28828e7298" class="indexterm-anchor"></a>使用<code class="codeph">queryAsUser</code>方法设置会话并使用中间层<code class="codeph">checkAcl</code>方法进行授权。此示例创建会话并附加会话，然后调用<code class="codeph">queryEmployees</code>方法。<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBGGIID">在数据库上运行查询</a> ”中</span>的<code class="codeph">queryEmployees</code>方法检查ACL是否具有<code class="codeph">UPDATE</code>权限，如果为<code class="codeph">TRUE</code> ，则允许更新;它再次检查ACL以获取<code class="codeph">VIEW_SALARY</code>应用程序权限，如果为<code class="codeph">TRUE</code> ，则允许访问<code class="codeph">SALARY</code>列并显示所有员工记录，包括<code class="codeph">SALARY</code>列中的敏感数据。然后在显示员工记录后，它会分离会话，并销毁会话。
                     </p><pre class="oac_no_warn" dir="ltr">private static void queryAsUser（String user）抛出SQLException {System.out.println（“\ nQuery HR.EMPLOYEES表as user”“+ user +”\“”）;尝试{Session lws = mgr.createSession（appConnection，user，null，null）; mgr.attachSession（appConnection，lws，null，null，null，null，null）; queryEmployees（LWS）; mgr.detachSession（LWS）; mgr.destroySession（appConnection，lws）; } catch（Exception e）{e.printStackTrace（）; }}</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBGGIID">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-D27C5F71-B5DC-4788-A290-07CDEDB3F879">在数据库上运行查询</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7349" class="indexterm-anchor"></a>使用<code class="codeph">queryEmployees</code>方法在HR数据库上运行查询。
                     </p><pre class="oac_no_warn" dir="ltr">public static void queryEmployees（Session lws）throws SQLException {Connection conn = lws.getConnection（）;字符串查询=“从hr.employees \ temp中选择email，first_name，last_name，department_id，salary，ora_get_aclids（emp），其中department_id in（40,60,100）通过电子邮件订购”;语句stmt = null; ResultSet rs = null; System.out.printf（“EMAIL | FIRST_NAME | LAST_NAME | DEPT | SALARY | UPDATE | VIEW_SALARY \ n”）; try {stmt = conn.createStatement（）; rs = stmt.executeQuery（query）; while（rs.next（））{String email = rs.getString（“EMAIL”）; String first_name = rs.getString（“FIRST_NAME”）; String last_name = rs.getString（“LAST_NAME”）; String department_id = rs.getString（“DEPARTMENT_ID”）;字符串工资; if（（（OracleResultSet）rs）。getAuthorizationIndicator（“SALARY”）== AuthorizationIndicator。NONE）{salary = rs.getString（“SALARY”）; } else {salary =“*****”; } byte [] aclRaw = rs.getBytes（6）;字符串更新，viewSalary; if（XSAccessController.checkAcl（lws，aclRaw，“UPDATE”））{update =“true”; } else {update =“false”; if（XSAccessController.checkAcl（lws，aclRaw，“VIEW_SALARY”））{viewSalary =“true”; } else {viewSalary =“false”; System.out.printf（“％9s |％12s |％12s |％6s |％8s |％8s |％8s \ n”，email，first_name，last_name，department_id，salary，update，viewSalary）; catch（Exception e）{e.printStackTrace（）; } finally {try {if（rs！）= null）rs.close（）; } catch（例外e）{};试试{if（stmt！= null）stmt.close（）; } catch（例外e）{}; }}}</pre><p><code class="codeph">queryEmployees</code>方法为应用程序用户<code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBJCIGH">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-C4FB5BCD-BD3B-4D58-98FD-B89B9A0B3CDC">执行清理操作</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个例子<a id="d28828e7379" class="indexterm-anchor"></a>使用<code class="codeph">cleanup</code>方法进行系统清理操作。
                     </p><pre class="oac_no_warn" dir="ltr">public static void cleanupConnection（）抛出异常{mgrConnection.close（）; appConnection.close（）; }</pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__CBBCBIJJ">
                     <p class="subhead2" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-C4B9B0EF-3685-4931-BF91-078335C62851">主要方法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这个部分<a id="d28828e7397" class="indexterm-anchor"></a>包含所讨论的Java示例的<code class="codeph">main</code>方法。此部分还包含运行该程序必须导入的不同软件包。
                     </p><pre class="oac_no_warn" dir="ltr">import java.sql。连接; import java.sql。DriverManager的; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import java.util。数组列表; import java.util。清单; import oracle.jdbc。一个OracleDriver; import oracle.jdbc。OracleResultSet; import oracle.jdbc。OracleResultSet。AuthorizationIndicator; import oracle.security.xs。角色; import oracle.security.xs。会议; import oracle.security.xs。XSAccessController; import oracle.security.xs。XSSessionManager; / ** * HR演示java版，检查中间层* / public class的数据安全相关权限HRDemo {static Connection mgrConnection = null; static Connection appConnection = null; static XSSessionManager mgr = null; static String user = null; public static void main（String [] args）{try {DriverManager.registerDriver（new OracleDriver（））; if（args.length&gt; = 3）{user = args [0]; } else {System.out.println（“用法HRDemo用户pwd dbURL”）; System.exit（1）; } setupConnection（args）; queryAsUser（ “DAUSTIN”）; queryAsUser（ “SMAVRIS”）; cleanupConnection（）; } catch（Exception e1）{e1.printStackTrace（）; }}</pre></div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在Java中运行Security HR演示假定已运行<span class="q">“ <a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">设置安全HR演示组件</a> ”中</span>描述的设置脚本来设置Real Application Security组件。</span></li>
                     <li class="stepexpand"><span>编译Java代码。</span><div><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / jdk6 / bin / javac -classpath $ ORACLE_HOME / rdbms_ho / jlib / xs.jar：$ ORACLE_HOME / dbjava / lib / ojdbc6.jar HRdemo.java</pre><div class="infoboxnote" id="GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3__GUID-8BB95CE3-813F-42C6-8AD5-92F20979B559">
                              <p class="notep1">注意：</p>
                              <p>您必须将JDK 6与<code class="codeph">xs.jar</code>和<code class="codeph">ojdbc6.jar</code> ，它们位于Oracle主目录中。不同的罐子和JDK可能无法正常工作。
                              </p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>运行Java代码。</span><div><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / jdk6 / bin / java -classpath $ ORACLE_HOME / rdbms_ho / jlib / xs.jar：$ ORACLE_HOME / dbjava / lib / ojdbc6.jar HRdemo db_hr db_hr jdbc：oracle：thin：@myserver：myport：mysid</pre></div>
                     </li>
                  </ol>
               </div>
               <div class="sect3"><a id="CHDDJHBI" name="CHDDJHBI"></a><h4 id="DBFSG-CHDDJHBI" class="sect4">产量</h4>
                  <div>
                     <div class="section">
                        <p>在Java中运行Security HR演示假定已运行<span class="q">“ <a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">设置安全HR演示组件</a> ”中</span>描述的设置脚本来设置Real Application Security组件。运行Security HR演示时，将返回两个查询的结果。
                        </p>
                        <p>第一个查询与应用程序用户<code class="codeph">DAUSTIN</code>一起运行，应用程序用户<code class="codeph">DAUSTIN</code>具有应用程序角色<code class="codeph">EMP_ROLE</code>和<code class="codeph">IT_ROLE</code> ，因此他可以查看IT部门中的员工记录，但除了自己的工资记录外，他无法查看<code class="codeph">SALARY</code>列。查询结果如下：</p><pre class="oac_no_warn" dir="ltr">将HR.EMPLOYEES表作为用户“DAUSTIN”EMAIL |进行查询FIRST_NAME | LAST_NAME | DEPT | SALARY |更新| VIEW_SALARY AHUNOLD |亚历山大|胡诺尔德| 60 | ***** |假|假BERNST |布鲁斯|恩斯特| 60 | ***** |假|假DAUSTIN |大卫|奥斯汀| 60 | 4800 |假|真正的DLORENTZ |戴安娜|洛伦兹| 60 | ***** |假|假VPATABAL |瓦利| Pataballa | 60 | ***** |假|假</pre><p>请注意，应用程序用户<code class="codeph">DAUSTIN</code>只能查看自己记录的<code class="codeph">SALARY</code>列数据，而不能查看其他记录。
                        </p>
                        <p>第二个查询与应用程序用户SMAVRIS一起运行，应用程序用户SMAVRIS具有应用程序角色<code class="codeph">EMP_ROLE</code>和<code class="codeph">HR_ROLE</code> ，因此她可以查看和更新所有员工记录。查询结果如下：</p><pre class="oac_no_warn" dir="ltr">将HR.EMPLOYEES表作为用户“SMAVRIS”EMAIL |进行查询FIRST_NAME | LAST_NAME | DEPT | SALARY |更新| VIEW_SALARY AHUNOLD |亚历山大|胡诺尔德| 60 | 9000 |真|真的BERNST |布鲁斯|恩斯特| 60 | 6000 |真|真的DAUSTIN |大卫|奥斯汀| 60 | 4800 |真|真DFAVIET |丹尼尔| Faviet | 100 | 9000 |真|真正的DLORENTZ |戴安娜|洛伦兹| 60 | 4200 |真|真正的ISCIARRA |伊斯梅尔| Sciarra | 100 | 7700 |真|真的JCHEN |约翰|陈| 100 | 8200 |真|真JMURMAN |何塞曼努埃尔| Urman | 100 | 7800 |真|真正的LPOPP |路易斯|波普| 100 | 6900 |真|真正的NGREENBE |南希|格林伯格| 100 | 12008 |真|真正的SMAVRIS |苏珊| Mavris | 40 | 6500 |真|真正的VPATABAL |瓦利| Pataballa | 60 | 4800 |真|真正</pre><p>请注意，应用程序用户<code class="codeph">SMAVRIS</code>可以查看所有员工记录，包括<code class="codeph">SALARY</code>列中的所有数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05231.plsql-data-types.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Every PL/SQL constant, variable, parameter, and function return value has a data type that determines its storage format and its valid values and operations."></meta>
      <meta name="description" content="Every PL/SQL constant, variable, parameter, and function return value has a data type that determines its storage format and its valid values and operations."></meta>
      <title>PL / SQL数据类型</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database PL/SQL Language Reference "></meta>
      <meta property="og:description" content="Every PL/SQL constant, variable, parameter, and function return value has a data type that determines its storage format and its valid values and operations."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database PL/SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96448-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="plsql-language-fundamentals.html" title="Previous" type="text/html"></link>
      <link rel="next" href="plsql-control-statements.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="LNPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="plsql-language-fundamentals.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="plsql-control-statements.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库PL / SQL语言参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL / SQL数据类型</li>
            </ol>
            <a id="GUID-391C58FD-16AF-486C-AF28-173E309CDBA5" name="GUID-391C58FD-16AF-486C-AF28-173E309CDBA5"></a><a id="LNPLS283"></a><a id="LNPLS003"></a>
            
            <h2 id="LNPLS-GUID-391C58FD-16AF-486C-AF28-173E309CDBA5" class="sect2"><span class="enumeration_chapter">3个</span> PL / SQL数据类型</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='plsql-data-types'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>每个PL / SQL常量，变量，参数和函数返回值都有一个<span class="bold">数据类型</span> ，用于确定其存储格式及其有效值和操作。
               </p>
               <p>本章介绍<span class="bold">标量数据类型</span> ，它存储没有内部组件的值。
               </p>
               <p>标量数据类型可以具有子类型。<span class="bold">子类型</span>是数据类型，它是另一种数据类型的子集，这是其<span class="bold">基本类型</span> 。子类型与其基本类型具有相同的有效操作。数据类型及其子类型包括<span class="bold">数据类型族</span> 。
               </p>
               <p>PL / SQL在包<code class="codeph">STANDARD</code>预定义了许多类型和子类型，并允许您定义自己的子类型。
               </p>
               <p>PL / SQL标量数据类型是：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>SQL数据类型</p>
                  </li>
                  <li>
                     <p><code class="codeph">布尔</code></p>
                  </li>
                  <li>
                     <p><code class="codeph">PLS_INTEGER</code></p>
                  </li>
                  <li>
                     <p><code class="codeph">BINARY_INTEGER</code></p>
                  </li>
                  <li>
                     <p><code class="codeph">REF</code> <code class="codeph">CURSOR</code></p>
                  </li>
                  <li>
                     <p>用户定义的子类型</p>
                  </li>
               </ul>
               <div class="section">
                  <p class="subhead1" id="GUID-391C58FD-16AF-486C-AF28-173E309CDBA5__GUID-8655FDCD-B723-4494-A164-D7A434746C4B">话题</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="plsql-data-types.html#GUID-239A89A6-4CBC-46F5-8A6A-10E8B465B7E8" title="PL / SQL数据类型包括SQL数据类型。">SQL数据类型</a></p>
                  </li>
                  <li>
                     <p><a href="plsql-data-types.html#GUID-02AEA63C-9A27-43F4-80B7-4781343445D0" title="PL / SQL数据类型BOOLEAN存储逻辑值，它们是布尔值TRUE和FALSE以及值NULL。 NULL表示未知值。">BOOLEAN数据类型</a></p>
                  </li>
                  <li>
                     <p><a href="plsql-data-types.html#GUID-9517B7AC-9CEA-4C36-A454-52588BEEBE8F" title="PL / SQL数据类型PLS_INTEGER和BINARY_INTEGER是相同的。">PLS_INTEGER和BINARY_INTEGER数据类型</a></p>
                  </li>
                  <li>
                     <p><a href="plsql-data-types.html#GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF" title="SIMPLE_INTEGER是PLS_INTEGER数据类型的预定义子类型。">SIMPLE_INTEGER PLS_INTEGER的子类型</a></p>
                  </li>
                  <li>
                     <p><a href="plsql-data-types.html#GUID-0E03C20F-2960-4ED9-8692-D4DCBF1F9670" title="PL / SQL允许您定义自己的子类型。">用户定义的PL / SQL子类型</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-391C58FD-16AF-486C-AF28-173E309CDBA5__GUID-10A6FF0B-092D-457A-9CF1-9B9889862FB3">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关<span class="bold">复合数据类型的</span>信息，请参阅<span class="q">“ <a href="plsql-collections-and-records.html#GUID-7115C8B6-62F9-496D-BEC3-F7441DFE148A" title="PL / SQL允许您定义两种复合数据类型：集合和记录。">PL / SQL集合和记录</a> ”</span></p>
                     </li>
                     <li>
                        <p>有关<code class="codeph">REF</code> <code class="codeph">CURSOR</code>信息的<span class="q">“ <a href="static-sql.html#GUID-4A6E054A-4002-418D-A1CA-DE849CD7E6D5" title="要创建游标变量，请声明预定义类型SYS_REFCURSOR的变量或定义REF CURSOR类型，然后声明该类型的变量。打开游标变量后，可以使用FETCH语句获取查询结果集的行。您可以为PL / SQL游标变量分配另一个PL / SQL游标变量或主机游标变量的值。与游标变量关联的查询可以引用其范围中的任何变量。您可以使用游标变量作为子程序参数，这使得它可以在子程序之间传递查询结果。您可以将游标变量用作主变量，这使得在PL / SQL存储的子程序及其客户端之间传递查询结果非常有用。">光标变量</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="CREATE-TYPE-statement.html#GUID-389D603D-FBD0-452A-8414-240BBBC57034" title="CREATE TYPE语句指定类型的名称及其属性，方法和其他属性。">CREATE TYPE语句</a> ”，</span>以获取有关创建模式级用户定义数据类型的信息</p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="plsql-predefined-data-types.html#GUID-1D28B7B6-15AE-454A-8134-F8724551AE8B">PL / SQL预定义数据类型</a> ”，</span>用于预定义的PL / SQL数据类型和子类型，按数据类型族分组</p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNPLS286"></a><div class="props_rev_3"><a id="GUID-239A89A6-4CBC-46F5-8A6A-10E8B465B7E8" name="GUID-239A89A6-4CBC-46F5-8A6A-10E8B465B7E8"></a><h3 id="LNPLS-GUID-239A89A6-4CBC-46F5-8A6A-10E8B465B7E8" class="sect3"><span class="enumeration_section">3.1</span> SQL数据类型</h3>
               <div>
                  <p>PL / SQL数据类型包括SQL数据类型。</p>
                  <p>有关SQL数据类型的信息，请参阅<a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> - 有关数据类型和子类型，数据类型比较规则，数据转换，文字和格式模型的所有信息都适用于SQL和PL / SQL，除非此处另有说明：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="plsql-data-types.html#GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0">不同的最大尺寸</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-data-types.html#GUID-9410B67C-0E65-45BE-9376-0BD97E39D678">BINARY_FLOAT和BINARY_DOUBLE的附加PL / SQL常量</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-data-types.html#GUID-48101DAA-B168-4648-A05A-CA81A9512E8C">BINARY_FLOAT和BINARY_DOUBLE的附加PL / SQL子类型</a></p>
                     </li>
                  </ul>
                  <p>与SQL不同，PL / SQL允许您声明以下主题适用的变量：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="plsql-data-types.html#GUID-43BB16CE-9D77-419B-ACE9-32D8A91B3D43" title="这解释了使用CHAR和VARCHAR2进行空白填充的差异和注意事项。用于比较字符值的SQL规则适用于PL / SQL字符变量。">CHAR和VARCHAR2变量</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-data-types.html#GUID-89ABA12C-6096-446C-9E2C-65687A0B8DA9">长期和长期变量</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-data-types.html#GUID-378DD770-A137-44F7-9F0C-C4AB9A5E1650">ROWID和UROWID变量</a></p>
                     </li>
                  </ul>
               </div><a id="LNPLS2172"></a><a id="LNPLS99943"></a><div class="props_rev_3"><a id="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0" name="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0"></a><h4 id="LNPLS-GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0" class="sect4"><span class="enumeration_section">3.1.1</span>不同的最大尺寸</h4>
                  <div>
                     <p><a href="plsql-data-types.html#GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAHEEJF" title="该表有三列。第一列列出了PL / SQL和SQL中具有不同最大值的预定义SQL数据类型，第二列列出了PL / SQL中的最大大小，第三列列出了SQL中的最大值。">表3-1中</a>列出的SQL数据类型在PL / SQL和SQL中具有不同的最大大小。</p>
                     <div class="tblformal" id="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAHEEJF">
                        <p class="titleintable">表3-1 PL / SQL和SQL中具有不同最大大小的数据类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="PL / SQL和SQL中具有不同最大大小的数据类型" width="100%" border="1" summary="This table has three columns. The first column lists the predefined SQL data types that have different maximum values in PL/SQL and SQL, the second column gives their maximum sizes in PL/SQL, and the third column gives their maximum values in SQL." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d27514e500">数据类型</th>
                                 <th align="left" valign="bottom" width="32%" id="d27514e503">PL / SQL中的最大大小</th>
                                 <th align="left" valign="bottom" width="48%" id="d27514e506">SQL中的最大大小</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e511" headers="d27514e500 ">
                                    <p><code class="codeph">CHAR</code> <a id="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJADBCHJ" name="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJADBCHJ" href="#GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJADBCHJ" size="" value="" data="" type="" when="" specifying="" the="" maximum="" of="" a="" this="" in="" pl="" /sql,="" use="" an="" integer="" literal="" (not="" constant="" or="" variable)="" whose="" is="" range="" from="" 1="" through="" 32,767=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e511 d27514e503 ">
                                    <p>32,767字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e511 d27514e506 ">
                                    <p>2,000字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e525" headers="d27514e500 ">
                                    <p><code class="codeph">NCHAR</code> <a id="fnsrc_d27514e529" name="fnsrc_d27514e529" href="#fnsrc_d27514e529" size="" value="" data="" type="" when="" specifying="" the="" maximum="" of="" a="" this="" in="" pl="" /sql,="" use="" an="" integer="" literal="" (not="" constant="" or="" variable)="" whose="" is="" range="" from="" 1="" through="" 32,767=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e525 d27514e503 ">
                                    <p>32,767字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e525 d27514e506 ">
                                    <p>2,000字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e538" headers="d27514e500 ">
                                    <p><code class="codeph">RAW</code> <a id="fnsrc_d27514e542" name="fnsrc_d27514e542" href="#fnsrc_d27514e542" size="" value="" data="" type="" when="" specifying="" the="" maximum="" of="" a="" this="" in="" pl="" /sql,="" use="" an="" integer="" literal="" (not="" constant="" or="" variable)="" whose="" is="" range="" from="" 1="" through="" 32,767=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e538 d27514e503 ">
                                    <p>32,767字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e538 d27514e506 ">
                                    <p>2,000字节<a id="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAGGFGH" name="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAGGFGH" href="#GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAGGFGH" size="" to="" eliminate="" this="" difference,="" follow="" the="" instructions="" in="" oracle="" database="" sql="" language="" reference=")" ="" onclick="footdisplay(2, "><sup>脚2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e559" headers="d27514e500 ">
                                    <p><code class="codeph">VARCHAR2</code> <a id="fnsrc_d27514e563" name="fnsrc_d27514e563" href="#fnsrc_d27514e563" size="" value="" data="" type="" when="" specifying="" the="" maximum="" of="" a="" this="" in="" pl="" /sql,="" use="" an="" integer="" literal="" (not="" constant="" or="" variable)="" whose="" is="" range="" from="" 1="" through="" 32,767=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e559 d27514e503 ">
                                    <p>32,767字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e559 d27514e506 ">
                                    <p>4,000字节<a id="fnsrc_d27514e571" name="fnsrc_d27514e571" href="#fnsrc_d27514e571" size="" to="" eliminate="" this="" difference,="" follow="" the="" instructions="" in="" oracle="" database="" sql="" language="" reference=")" ="" onclick="footdisplay(2, "><sup>Footref 2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e574" headers="d27514e500 ">
                                    <p><code class="codeph">NVARCHAR2</code> <a id="fnsrc_d27514e578" name="fnsrc_d27514e578" href="#fnsrc_d27514e578" size="" value="" data="" type="" when="" specifying="" the="" maximum="" of="" a="" this="" in="" pl="" /sql,="" use="" an="" integer="" literal="" (not="" constant="" or="" variable)="" whose="" is="" range="" from="" 1="" through="" 32,767=")" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e574 d27514e503 ">
                                    <p>32,767字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e574 d27514e506 ">
                                    <p>4,000字节<a id="fnsrc_d27514e586" name="fnsrc_d27514e586" href="#fnsrc_d27514e586" size="" to="" eliminate="" this="" difference,="" follow="" the="" instructions="" in="" oracle="" database="" sql="" language="" reference=")" ="" onclick="footdisplay(2, "><sup>Footref 2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e589" headers="d27514e500 ">
                                    <p><code class="codeph">LONG</code> <a id="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAFECGG" name="GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAFECGG" href="#GUID-C3B938C9-7B0B-4AAC-8323-FEB2ED0225D0__CJAFECGG" supported="" only="" for="" backward="" compatibility="" with="" existing="" applications=")" ="" onclick="footdisplay(3, "><sup>脚3</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e589 d27514e503 ">
                                    <p>32,760字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e589 d27514e506 ">
                                    <p>2千兆字节（GB） -  1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e603" headers="d27514e500 ">
                                    <p><code class="codeph">LONG</code> <code class="codeph">RAW</code> <a id="fnsrc_d27514e610" name="fnsrc_d27514e610" href="#fnsrc_d27514e610" supported="" only="" for="" backward="" compatibility="" with="" existing="" applications=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e603 d27514e503 ">
                                    <p>32,760字节</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e603 d27514e506 ">
                                    <p>2 GB</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e619" headers="d27514e500 ">
                                    <p><code class="codeph">BLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e619 d27514e503 ">
                                    <p>128太字节（TB）</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e619 d27514e506 ">
                                    <p>（4 GB  -  1）* <span class="italic"><code class="codeph">database_block_size</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e633" headers="d27514e500 ">
                                    <p><code class="codeph">CLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e633 d27514e503 ">
                                    <p>128 TB</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e633 d27514e506 ">
                                    <p>（4 GB  -  1）* <span class="italic"><code class="codeph">database_block_size</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d27514e647" headers="d27514e500 ">
                                    <p><code class="codeph">NCLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d27514e647 d27514e503 ">
                                    <p>128 TB</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d27514e647 d27514e506 ">
                                    <p>（4 GB  -  1）* <span class="italic"><code class="codeph">database_block_size</code></span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>在PL / SQL中指定此数据类型的值的最大大小时，请使用整数文字（不是常量或变量），其值在1到32,767之间。</p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>要消除此大小差异，请按照<a href="../sqlrf/Data-Types.html#SQLRF55623" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>的说明进行操作。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注3</sup></p><p>仅支持与现有应用程序的向后兼容性。</p>
                     <p></p>
                  </div>
               </div><a id="LNPLS327"></a><a id="LNPLS326"></a><div class="props_rev_3"><a id="GUID-9410B67C-0E65-45BE-9376-0BD97E39D678" name="GUID-9410B67C-0E65-45BE-9376-0BD97E39D678"></a><h4 id="LNPLS-GUID-9410B67C-0E65-45BE-9376-0BD97E39D678" class="sect4"><span class="enumeration_section">3.1.2</span> BINARY_FLOAT和BINARY_DOUBLE的附加PL / SQL常量</h4>
                  <div>
                     <p>SQL数据类型<code class="codeph">BINARY_FLOAT</code>和<code class="codeph">BINARY_DOUBLE</code>表示单精度和双精度IEEE 754格式浮点数。
                     </p>
                     <p><code class="codeph">BINARY_FLOAT</code>和<code class="codeph">BINARY_DOUBLE</code>计算不会引发异常，因此必须通过将它们与预定义常量进行比较来检查它们为溢出和下溢等条件生成的值（例如，请参阅<a href="../sqlrf/Literals.html#SQLRF51060" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ）。PL / SQL比SQL具有更多这些常量。
                     </p>
                     <p><a href="plsql-data-types.html#GUID-9410B67C-0E65-45BE-9376-0BD97E39D678__CIHHEAFG" title="此表总结了预定义的PL / SQL BINARY_FLOAT和BINARY_DOUBLE常量（带有星号，表示SQL也定义了哪些常量）。">表3-2</a>列出并描述了<code class="codeph">BINARY_FLOAT</code>和<code class="codeph">BINARY_DOUBLE</code>的预定义PL / SQL常量，并标识了SQL也定义的那些常量。
                     </p>
                     <div class="tblformal" id="GUID-9410B67C-0E65-45BE-9376-0BD97E39D678__CIHHEAFG">
                        <p class="titleintable">表3-2预定义的PL / SQL BINARY_FLOAT和BINARY_DOUBLE常量</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="预定义的PL / SQL BINARY_FLOAT和BINARY_DOUBLE常量" width="100%" border="1" summary="This table summarizes the predefined PL/SQL BINARY_FLOAT and BINARY_DOUBLE constants (with asterisks indicating which constants SQL also defines)." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="41%" id="d27514e794">不变</th>
                                 <th align="left" valign="bottom" width="59%" id="d27514e797">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e802" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_FLOAT_NAN</code> （*）</p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e802 d27514e797 ">
                                    <p>条件为<code class="codeph">IS</code> <code class="codeph">NAN</code> （非数字）的<code class="codeph">BINARY_FLOAT</code>值为true</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e819" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_FLOAT_INFINITY</code> （*）</p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e819 d27514e797 ">
                                    <p>单精度正无穷大</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e828" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_FLOAT_MAX_NORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e828 d27514e797 ">
                                    <p>最大正常<code class="codeph">BINARY_FLOAT</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e839" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_FLOAT_MIN_NORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e839 d27514e797 ">
                                    <p>最低正常<code class="codeph">BINARY_FLOAT</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e850" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_FLOAT_MAX_SUBNORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e850 d27514e797 ">
                                    <p>最大次正常<code class="codeph">BINARY_FLOAT</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e861" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_FLOAT_MIN_SUBNORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e861 d27514e797 ">
                                    <p>最小次正规<code class="codeph">BINARY_FLOAT</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e872" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_DOUBLE_NAN</code> （*）</p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e872 d27514e797 ">
                                    <p>条件为<code class="codeph">IS</code> <code class="codeph">NAN</code> （非数字）的<code class="codeph">BINARY_DOUBLE</code>值为true</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e889" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_DOUBLE_INFINITY</code> （*）</p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e889 d27514e797 ">
                                    <p>双精度正无穷大</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e898" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_DOUBLE_MAX_NORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e898 d27514e797 ">
                                    <p>最大正常<code class="codeph">BINARY_DOUBLE</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e909" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_DOUBLE_MIN_NORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e909 d27514e797 ">
                                    <p>最小正常<code class="codeph">BINARY_DOUBLE</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e920" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_DOUBLE_MAX_SUBNORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e920 d27514e797 ">
                                    <p>最大次正常<code class="codeph">BINARY_DOUBLE</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d27514e932" headers="d27514e794 ">
                                    <p><code class="codeph">BINARY_DOUBLE_MIN_SUBNORMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d27514e932 d27514e797 ">
                                    <p>最小次正规<code class="codeph">BINARY_DOUBLE</code>值</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p id="GUID-9410B67C-0E65-45BE-9376-0BD97E39D678__SQLALSOPREDEFINESTHISCONSTANT.-5C523FE8">（*）SQL也预定义了这个常量。</p>
                  </div>
               </div><a id="LNPLS99942"></a><div class="props_rev_3"><a id="GUID-48101DAA-B168-4648-A05A-CA81A9512E8C" name="GUID-48101DAA-B168-4648-A05A-CA81A9512E8C"></a><h4 id="LNPLS-GUID-48101DAA-B168-4648-A05A-CA81A9512E8C" class="sect4"><span class="enumeration_section">3.1.3</span> BINARY_FLOAT和BINARY_DOUBLE的附加PL / SQL子类型</h4>
                  <div>
                     <p>PL / SQL预定义了这些子类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">SIMPLE_FLOAT</code> ，SQL数据类型<code class="codeph">BINARY_FLOAT</code>的子<code class="codeph">BINARY_FLOAT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SIMPLE_DOUBLE</code> ，SQL数据类型<code class="codeph">BINARY_DOUBLE</code>的子类型</p>
                        </li>
                     </ul>
                     <p>每个子类型与其基类型具有相同的范围，并具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束（在<span class="q">“ <a href="plsql-language-fundamentals.html#GUID-6705CC7D-470A-4B4A-BCAD-6843F227C012" title="您可以对标量变量或常量（或复合变量或常量的标量组件）施加NOT NULL约束。">NOT NULL约束</a> ”中进行了</span>解释）。
                     </p>
                     <p>如果您知道变量永远不会为<code class="codeph">NULL</code> ，则将其声明为<code class="codeph">SIMPLE_FLOAT</code>或<code class="codeph">SIMPLE_DOUBLE</code> ，而不是<code class="codeph">BINARY_FLOAT</code>或<code class="codeph">BINARY_DOUBLE</code> 。如果没有检查nullness的开销，子类型提供的性能明显优于基类型。<code class="codeph">PLSQL_CODE_TYPE='NATIVE'</code>的性能提升比<code class="codeph">PLSQL_CODE_TYPE='INTERPRETED'</code>更高（有关更多信息，请参阅<span class="q">“ <a href="plsql-optimization-and-tuning.html#GUID-CB9BF149-8E00-45F1-99E8-AC42795CF6D0">使用硬件算术的数据类型</a> ”</span> ）。
                     </p>
                  </div>
               </div><a id="LNPLS288"></a><a id="LNPLS332"></a><div class="props_rev_3"><a id="GUID-43BB16CE-9D77-419B-ACE9-32D8A91B3D43" name="GUID-43BB16CE-9D77-419B-ACE9-32D8A91B3D43"></a><h4 id="LNPLS-GUID-43BB16CE-9D77-419B-ACE9-32D8A91B3D43" class="sect4"><span class="enumeration_section">3.1.4</span> CHAR和VARCHAR2变量</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-43BB16CE-9D77-419B-ACE9-32D8A91B3D43__GUID-04046E77-E6A6-434F-828C-040EAA5A96BE">话题</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="plsql-data-types.html#GUID-FB44B23B-0F5C-4507-AC5C-17D29339BD8A">分配或插入太长的值</a></p>
                           </li>
                           <li>
                              <p><a href="plsql-data-types.html#GUID-042904FC-F495-45D1-BF3F-17378D397C00">声明多字节字符的变量</a></p>
                           </li>
                           <li>
                              <p><a href="plsql-data-types.html#GUID-7D0D76A5-D921-4823-91F5-FC9887598795" title="这解释了使用CHAR和VARCHAR2进行空白填充的差异和注意事项。用于比较字符值的SQL规则适用于PL / SQL字符变量。">CHAR和VARCHAR2数据类型之间的差异</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPLS99941"></a><div class="props_rev_3"><a id="GUID-FB44B23B-0F5C-4507-AC5C-17D29339BD8A" name="GUID-FB44B23B-0F5C-4507-AC5C-17D29339BD8A"></a><h5 id="LNPLS-GUID-FB44B23B-0F5C-4507-AC5C-17D29339BD8A" class="sect5"><span class="enumeration_section">3.1.4.1</span>分配或插入太长的值</h5>
                     <div>
                        <div class="section">
                           <p>如果分配给字符变量的值大于变量的最大大小，则会发生错误。例如：</p><pre class="oac_no_warn" dir="ltr">DECLARE c VARCHAR2（ <span class="bold">3 CHAR</span> ）; BEGIN c：= <span class="bold">'abc'</span> ;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的DECLARE * ERROR： <span class="bold">ORA-06502：PL / SQL：数字或值错误：字符串缓冲区太小</span> <span class="bold">ORA-06512：第4行</span>
</pre><p>同样，如果将一个字符变量插入一列，并且该变量的值大于列的已定义宽度，则会发生错误。例如：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE t; CREATE TABLE t（c CHAR（ <span class="bold">3 CHAR</span> ））; DECLARE <span class="bold">s VARCHAR2（5 CHAR）：='abc'</span> ; BEGIN INSERT INTO <span class="bold">T（℃）VALUES（S）;</span>结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的BEGIN * ERROR： <span class="bold">ORA-12899：列“HR”的值太大。“T”。“C”（实际：5，最大值：3）</span> <span class="bold">ORA-06512：第4行</span>
</pre><p>要在将字符值分配给变量或将其插入列之前从字符值中删除尾随空白，请使用<code class="codeph">RTRIM</code>函数，如<a href="../sqlrf/RTRIM.html#SQLRF06104" target="_blank"><span class="italic">Oracle数据库SQL语言参考中所述</span></a> 。例如：</p><pre class="oac_no_warn" dir="ltr">DECLARE c VARCHAR2（3 CHAR）; BEGIN c：= <span class="bold">RTRIM（'abc'）</span> ;插入t（c）值（ <span class="bold">RTRIM（'abc'）</span> ）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">PL / SQL过程成功完成。</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPLS99940"></a><div class="props_rev_3"><a id="GUID-042904FC-F495-45D1-BF3F-17378D397C00" name="GUID-042904FC-F495-45D1-BF3F-17378D397C00"></a><h5 id="LNPLS-GUID-042904FC-F495-45D1-BF3F-17378D397C00" class="sect5"><span class="enumeration_section">3.1.4.2</span>声明多字节字符的变量</h5>
                     <div>
                        <div class="section">
                           <p>无论您是以字符还是以字节为单位指定最大<span class="italic">大小</span> ， <code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>变量的最大<span class="italic">大小</span>为32,767字节。变量中的最大<span class="italic">字符数</span>取决于字符集类型，有时还取决于字符本身：</p>
                           <div class="tblformal" id="GUID-042904FC-F495-45D1-BF3F-17378D397C00__GUID-751238CD-9C01-42A4-A1A9-90ED5EC43C85">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The left column lists the types of character sets and the right column lists the maximum number of characters that the character set type can have." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="40%" id="d27514e1456">字符集类型</th>
                                       <th align="left" valign="bottom" width="60%" id="d27514e1459">最大字符数</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d27514e1464" headers="d27514e1456 ">
                                          <p>单字节字符集</p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d27514e1464 d27514e1459 ">
                                          <p>32,767</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d27514e1471" headers="d27514e1456 ">
                                          <p><span class="italic">n</span>字节固定宽度多字节字符集（例如，AL16UTF16）</p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d27514e1471 d27514e1459 ">
                                          <p><code class="codeph">FLOOR(32,767/</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">)</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d27514e1486" headers="d27514e1456 ">
                                          <p><span class="italic">n</span>字节可变宽度多字节字符集，字符宽度介于1和<span class="italic">n</span>字节之间（例如，JA16SJIS或AL32UTF8）</p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d27514e1486 d27514e1459 ">
                                          <p>取决于字符本身 - 可以是32,767（对于只包含1字节字符的字符串）到<code class="codeph">FLOOR(32,767/</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">)</code> （对于只包含<span class="italic">n</span>字节字符的字符串）。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>声明<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>变量时，要确保它始终可以在任何多字节字符集中保存<span class="italic">n个</span>字符，请以字符形式声明其长度 - 即<code class="codeph">CHAR(</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">CHAR)</code>或<code class="codeph">VARCHAR2(</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">CHAR)</code> ，其中<span class="italic">n</span>不超过<code class="codeph">FLOOR(32767/4)</code> = 8191。
                           </p>
                           <div class="infoboxnotealso" id="GUID-042904FC-F495-45D1-BF3F-17378D397C00__GUID-19106AF6-B38A-4D94-9974-6069A994C9A8">
                              <p class="notep1">也可以看看：</p>
                              <p>有关Oracle数据库字符集支持的信息，请<a href="../nlspg/overview-of-globalization-support.html#NLSPG153" target="_blank"><span class="italic">参见“Oracle数据库全球化支持指南</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPLS99939"></a><div class="props_rev_3"><a id="GUID-7D0D76A5-D921-4823-91F5-FC9887598795" name="GUID-7D0D76A5-D921-4823-91F5-FC9887598795"></a><h5 id="LNPLS-GUID-7D0D76A5-D921-4823-91F5-FC9887598795" class="sect5"><span class="enumeration_section">3.1.4.3</span> CHAR和VARCHAR2数据类型之间的差异</h5>
                     <div>
                        <p><code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>数据类型的不同之处在于：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="plsql-data-types.html#GUID-6E2DB5F5-FB20-456D-9861-B0846207F53C">预定义的子类型</a></p>
                           </li>
                           <li>
                              <p><a href="plsql-data-types.html#GUID-91989965-9087-4091-8B37-01E025E33FD7" title="这解释了使用CHAR和VARCHAR2进行空白填充的差异和注意事项。">空白填充如何工作</a></p>
                           </li>
                           <li>
                              <p><a href="plsql-data-types.html#GUID-624E93C5-2115-44FB-9F75-F5513FD25204" title="用于比较字符值的SQL规则适用于PL / SQL字符变量。">价值比较</a></p>
                           </li>
                        </ul>
                     </div><a id="LNPLS333"></a><div class="props_rev_3"><a id="GUID-6E2DB5F5-FB20-456D-9861-B0846207F53C" name="GUID-6E2DB5F5-FB20-456D-9861-B0846207F53C"></a><h6 id="LNPLS-GUID-6E2DB5F5-FB20-456D-9861-B0846207F53C" class="sect6"><span class="enumeration_section">3.1.4.3.1</span>预定义的子类型</h6>
                        <div>
                           <p><code class="codeph">CHAR</code>数据类型在PL / SQL和SQL- <code class="codeph">CHARACTER</code>都有一个预定义的子类型。</p>
                           <p><code class="codeph">VARCHAR2</code>数据类型在PL / SQL和SQL， <code class="codeph">VARCHAR</code>都有一个预定义的子类型，在PL / SQL， <code class="codeph">STRING</code>一个额外的预定义子类型。</p>
                           <p>每个子类型具有与其基本类型相同的值范围。</p>
                           <div class="infoboxnote" id="GUID-6E2DB5F5-FB20-456D-9861-B0846207F53C__GUID-821BD336-F10E-4F22-9B99-A45CF44A7AF8">
                              <p class="notep1">注意：</p>
                              <p>在未来的PL / SQL版本中，为了适应新兴的SQL标准， <code class="codeph">VARCHAR</code>可能会成为一个单独的数据类型，不再是<code class="codeph">VARCHAR2</code>同义词。
                              </p>
                           </div>
                        </div>
                     </div><a id="LNPLS289"></a><a id="LNPLS335"></a><div class="props_rev_3"><a id="GUID-91989965-9087-4091-8B37-01E025E33FD7" name="GUID-91989965-9087-4091-8B37-01E025E33FD7"></a><h6 id="LNPLS-GUID-91989965-9087-4091-8B37-01E025E33FD7" class="sect6"><span class="enumeration_section">3.1.4.3.2</span>空白填充的工作<span class="enumeration_section">原理</span></h6>
                        <div>
                           <p>这解释了使用CHAR和VARCHAR2进行空白填充的差异和注意事项。</p>
                           <p>考虑以下情况：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您为变量赋值的值小于变量的最大值。</p>
                              </li>
                              <li>
                                 <p>插入到列中的值比列的定义宽度短。</p>
                              </li>
                              <li>
                                 <p>从列中检索到变量的值小于变量的最大大小。</p>
                              </li>
                           </ul>
                           <p>如果接收器的数据类型为<code class="codeph">CHAR</code> ，则PL / SQL将值填充为最大值。有关原始值中的尾随空白的信息将丢失。
                           </p>
                           <p>如果接收器的数据类型是<code class="codeph">VARCHAR2</code> ，则PL / SQL既不填空值也不剥离尾随空白。字符值完整分配，不会丢失任何信息。
                           </p>
                           <div class="example" id="GUID-91989965-9087-4091-8B37-01E025E33FD7__CHDBABGF">
                              <p class="titleinexample">例3-1 CHAR和VARCHAR2空白填充差异</p>
                              <p>在此示例中， <code class="codeph">CHAR</code>变量和<code class="codeph">VARCHAR2</code>变量的最大大小均为10个字符。每个变量接收一个五个字符的值，其中一个尾随空白。分配给<code class="codeph">CHAR</code>变量的值为空白填充为10个字符，并且您无法判断结果值中的六个尾随空白中的一个是否为原始值。分配给<code class="codeph">VARCHAR2</code>变量的值不会更改，您可以看到它有一个尾随空白。
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE first_name CHAR（10 CHAR）; last_name VARCHAR2（10 CHAR）; BEGIN first_name：='John'; last_name：='陈'; DBMS_OUTPUT.PUT_LINE（'*'|| first_name ||'*'）; DBMS_OUTPUT.PUT_LINE（'*'|| last_name ||'*'）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">* John * * Chen *</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="LNPLS336"></a><div class="props_rev_3"><a id="GUID-624E93C5-2115-44FB-9F75-F5513FD25204" name="GUID-624E93C5-2115-44FB-9F75-F5513FD25204"></a><h6 id="LNPLS-GUID-624E93C5-2115-44FB-9F75-F5513FD25204" class="sect6"><span class="enumeration_section">3.1.4.3.3</span>价值比较</h6>
                        <div>
                           <p>用于比较字符值的SQL规则适用于PL / SQL字符变量。</p>
                           <p>只要比较中的一个或两个值具有数据类型<code class="codeph">VARCHAR2</code>或<code class="codeph">NVARCHAR2</code> ，就应用非填充比较语义;否则，空白填充语义适用。有关更多信息，请参见<a href="../sqlrf/Data-Type-Comparison-Rules.html#SQLRF51040" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="LNPLS346"></a><div class="props_rev_3"><a id="GUID-89ABA12C-6096-446C-9E2C-65687A0B8DA9" name="GUID-89ABA12C-6096-446C-9E2C-65687A0B8DA9"></a><h4 id="LNPLS-GUID-89ABA12C-6096-446C-9E2C-65687A0B8DA9" class="sect4"><span class="enumeration_section">3.1.5</span>长期和长期变量</h4>
                  <div>
                     <div class="infoboxnote" id="GUID-89ABA12C-6096-446C-9E2C-65687A0B8DA9__GUID-7F06927A-56ED-4AEC-94F7-419D3CE6D474">
                        <p class="notep1">注意：</p>
                        <p>Oracle仅支持<code class="codeph">LONG</code>和<code class="codeph">LONG</code> <code class="codeph">RAW</code>数据类型，以便与现有应用程序向后兼容。对于新应用：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>而不是<code class="codeph">LONG</code> ，使用<code class="codeph">VARCHAR2(32760)</code> ， <code class="codeph">BLOB</code> ， <code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code> 。</p>
                           </li>
                           <li>
                              <p>而不是<code class="codeph">LONG</code> <code class="codeph">RAW</code> ，请使用<code class="codeph">BLOB</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <p>您可以将任何<code class="codeph">LONG</code>值插入<code class="codeph">LONG</code>列。您可以将任何<code class="codeph">LONG</code> <code class="codeph">RAW</code>值插入<code class="codeph">LONG</code> <code class="codeph">RAW</code>列。您无法从<code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW</code>列检索长度超过32,760字节的值为<code class="codeph">LONG</code>或<code class="codeph">LONG</code> <code class="codeph">RAW</code>变量。
                     </p>
                     <p>您可以将任何<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>值插入<code class="codeph">LONG</code>列。您不能从<code class="codeph">LONG</code>列检索长度超过32,767字节的值到<code class="codeph">CHAR</code>或<code class="codeph">VARCHAR2</code>变量。
                     </p>
                     <p>您可以将任何<code class="codeph">RAW</code>值插入<code class="codeph">LONG</code> <code class="codeph">RAW</code>列。您无法从<code class="codeph">LONG</code> <code class="codeph">RAW</code>列检索长度超过32,767字节的值到<code class="codeph">RAW</code>变量。
                     </p>
                     <div class="infoboxnotealso" id="GUID-89ABA12C-6096-446C-9E2C-65687A0B8DA9__GUID-BF1DF5EB-DC4B-4165-80E0-126E49F9C2F9">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="plsql-triggers.html#GUID-CC076546-C00D-4CC6-A664-82CCE4F64533">触发LONG和LONG RAW数据类型限制</a> ”，</span>用于限制触发器中的<code class="codeph">LONG</code>和<code class="codeph">LONG</code> <code class="codeph">RAW</code>数据类型</p>
                     </div>
                  </div>
               </div><a id="LNPLS347"></a><div class="props_rev_3"><a id="GUID-378DD770-A137-44F7-9F0C-C4AB9A5E1650" name="GUID-378DD770-A137-44F7-9F0C-C4AB9A5E1650"></a><h4 id="LNPLS-GUID-378DD770-A137-44F7-9F0C-C4AB9A5E1650" class="sect4"><span class="enumeration_section">3.1.6</span> ROWID和UROWID变量</h4>
                  <div>
                     <p>将rowid检索到<code class="codeph">ROWID</code>变量时，使用<code class="codeph">ROWIDTOCHAR</code>函数将二进制值转换为字符值。有关此功能的信息，请参阅<a href="../sqlrf/ROWIDTOCHAR.html#SQLRF06101" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                     </p>
                     <p>要将<code class="codeph">ROWID</code>变量的值转换为rowid，请使用<code class="codeph">CHARTOROWID</code>函数，如<a href="../sqlrf/CHARTOROWID.html#SQLRF00615" target="_blank"><span class="italic">Oracle数据库SQL语言参考中所述</span></a> 。如果该值不表示有效的rowid，则PL / SQL会引发预定义的异常<code class="codeph">SYS_INVALID_ROWID</code> 。</p>
                     <p>要检索一个rowid为<code class="codeph">UROWID</code>变量，或到的值转换<code class="codeph">UROWID</code>变量一个rowid，使用赋值语句;转换是隐含的。
                     </p>
                     <div class="infoboxnote" id="GUID-378DD770-A137-44F7-9F0C-C4AB9A5E1650__GUID-20833E69-059E-4F40-8B7A-0D522C52D5D6">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">UROWID</code>是一种比<code class="codeph">ROWID</code>更通用的数据类型，因为它与逻辑和物理rowid兼容。
                              </p>
                           </li>
                           <li>
                              <p>更新使用混合列压缩（HCC）压缩的表中的行时，行的<code class="codeph">ROWID</code>会更改。<a href="../cncpt/tables-and-table-clusters.html#CNCPT89198" target="_blank"><span class="italic">Oracle数据库概念中</span></a>描述了HCC，某些Oracle存储系统的一个特性。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-378DD770-A137-44F7-9F0C-C4AB9A5E1650__GUID-4B362DDB-EF06-4519-8551-C58CF805E1AE">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_ROWID.html#ARPLS053" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a>有关<code class="codeph">DBMS_ROWID</code>包的信息，其子程序允许您创建和返回有关<code class="codeph">ROWID</code>值（但不是<code class="codeph">UROWID</code>值）的信息</p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPLS290"></a><a id="LNPLS518"></a><a id="LNPLS348"></a><div class="props_rev_3"><a id="GUID-02AEA63C-9A27-43F4-80B7-4781343445D0" name="GUID-02AEA63C-9A27-43F4-80B7-4781343445D0"></a><h3 id="LNPLS-GUID-02AEA63C-9A27-43F4-80B7-4781343445D0" class="sect3"><span class="enumeration_section">3.2</span> BOOLEAN数据类型</h3>
               <div>
                  <p>PL / SQL数据类型<code class="codeph">BOOLEAN</code>存储<span class="bold">逻辑值</span> ，它们是布尔值<code class="codeph">TRUE</code>和<code class="codeph">FALSE</code>以及值<code class="codeph">NULL</code> 。 <code class="codeph">NULL</code>表示未知值。
                  </p>
                  <p>声明<code class="codeph">BOOLEAN</code>变量的语法是：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">variable_name</span> BOOLEAN</pre><p>您可以分配给<code class="codeph">BOOLEAN</code>变量的唯一值是<code class="codeph">BOOLEAN</code>表达式。有关详细信息，请参阅<span class="q">“ <a href="plsql-language-fundamentals.html#GUID-E277B6FF-866F-486A-BCB1-58235C0AFC69" title="BOOLEAN表达式是一个返回BOOLEAN值-TRUE，FALSE或NULL的表达式。">BOOLEAN表达式</a> ”</span> 。
                  </p>
                  <p>因为SQL没有与<code class="codeph">BOOLEAN</code>等效的数据类型，所以不能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将<code class="codeph">BOOLEAN</code>值分配给数据库表列</p>
                     </li>
                     <li>
                        <p>选择或获取数据库表列的值为<code class="codeph">BOOLEAN</code>变量</p>
                     </li>
                     <li>
                        <p>在SQL函数中使用<code class="codeph">BOOLEAN</code>值</p>
                        <p>（但是，SQL查询可以调用具有<code class="codeph">BOOLEAN</code>参数的PL / SQL函数，如<span class="q">“ <a href="plsql-data-types.html#GUID-02AEA63C-9A27-43F4-80B7-4781343445D0__CJAJAJIC">示例3-3</a> ”中所示</span> 。）
                        </p>
                     </li>
                     <li>
                        <p>在SQL语句中使用<code class="codeph">BOOLEAN</code>表达式，但作为SQL查询或PL / SQL匿名块中调用的PL / SQL函数的参数除外。
                        </p>
                        <div class="infoboxnote" id="GUID-02AEA63C-9A27-43F4-80B7-4781343445D0__GUID-768CF4E6-867D-4EF2-97D3-021CCDD30F47">
                           <p class="notep1">注意：</p>
                           <p>在静态SQL查询中调用的PL / SQL函数的参数不能是<code class="codeph">BOOLEAN</code>文字。解决方法是将文字分配给变量，然后将变量传递给函数，如<span class="q">“ <a href="plsql-data-types.html#GUID-02AEA63C-9A27-43F4-80B7-4781343445D0__CJAJAJIC">示例3-3</a> ”中所示</span> 。
                           </p>
                        </div>
                     </li>
                  </ul>
                  <p>您不能将<code class="codeph">BOOLEAN</code>值传递给<code class="codeph">DBMS_OUTPUT</code> 。 <code class="codeph">PUT</code>或<code class="codeph">DBMS_OUTPUT</code> 。 <code class="codeph">PUTLINE</code>子程序。要打印<code class="codeph">BOOLEAN</code>值，请使用<code class="codeph">IF</code>或<code class="codeph">CASE</code>语句将其转换为字符值（有关这些语句的信息，请参阅<span class="q">“ <a href="plsql-control-statements.html#GUID-B7DD4E62-3ED2-41E9-AAE5-90A78788BB31" title="条件选择语句IF和CASE针对不同的数据值运行不同的语句。">条件选择语句</a> ”</span> ）。
                  </p>
                  <div class="example" id="GUID-02AEA63C-9A27-43F4-80B7-4781343445D0__CHDHDHHA">
                     <p class="titleinexample">示例3-2打印BOOLEAN值</p>
                     <p>在这个例子中，该过程接受一个<code class="codeph">BOOLEAN</code>参数，并使用一个<code class="codeph">CASE</code>语句来打印<code class="codeph">Unknown</code> ，如果该参数的值为<code class="codeph">NULL</code> ， <code class="codeph">Yes</code> ，如果它是<code class="codeph">TRUE</code> ，并且<code class="codeph">No</code>如果是<code class="codeph">FALSE</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-02AEA63C-9A27-43F4-80B7-4781343445D0__GUID-95CBF1E9-1457-458C-A0D7-84E772F30FDE">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="plsql-language-fundamentals.html#GUID-9D19FEBB-A397-47F5-A4EC-D71B0DE91738__CIHDAFEJ">例2-34</a> ，它创建一个使用<code class="codeph">IF</code>语句的<code class="codeph">print_boolean</code>过程。
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">程序print_boolean（b BOOLEAN）AS BEGIN DBMS_OUTPUT.PUT_LINE（例如，当b为空时'未知'当'那么'是'当'不是那么'否'结束时）;结束; BEGIN print_boolean（TRUE）; print_boolean（FALSE）; print_boolean（NULL）;结束;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">是否未知</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-02AEA63C-9A27-43F4-80B7-4781343445D0__CJAJAJIC">
                     <p class="titleinexample">例3-3 SQL语句使用BOOLEAN参数调用PL / SQL函数</p>
                     <p>在此示例中，SQL语句调用具有<code class="codeph">BOOLEAN</code>参数的PL / SQL函数。
                     </p><pre class="oac_no_warn" dir="ltr">功能f（ <span class="bold">x BOOLEAN</span> ，y PLS_INTEGER）RETURN employees.employee_id％TYPE AUTHID CURRENT_USER as BEGIN if x THEN RETURN y; ELSE RETURN 2 * y;万一;结束; DECLARE名称employees.last_name％TYPE; <span class="bold">b BOOLEAN：= TRUE;</span> BEGIN SELECT last_name INTO name FROM employees WHERE employee_id = <span class="bold">f（b，100）</span> ; DBMS_OUTPUT.PUT_LINE（名）; <span class="bold">b：= FALSE;</span> SELECT last_name INTO name FROM employees WHERE employee_id = <span class="bold">f（b，100）</span> ; DBMS_OUTPUT.PUT_LINE（名）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">惠伦国王</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNPLS291"></a><a id="LNPLS319"></a><div class="props_rev_3"><a id="GUID-9517B7AC-9CEA-4C36-A454-52588BEEBE8F" name="GUID-9517B7AC-9CEA-4C36-A454-52588BEEBE8F"></a><h3 id="LNPLS-GUID-9517B7AC-9CEA-4C36-A454-52588BEEBE8F" class="sect3"><span class="enumeration_section">3.3</span> PLS_INTEGER和BINARY_INTEGER数据类型</h3>
               <div>
                  <p>PL / SQL数据类型<code class="codeph">PLS_INTEGER</code>和<code class="codeph">BINARY_INTEGER</code>是相同的。
                  </p>
                  <p>为简单起见，本文档使用<code class="codeph">PLS_INTEGER</code>表示<code class="codeph">PLS_INTEGER</code>和<code class="codeph">BINARY_INTEGER</code> 。</p>
                  <p><code class="codeph">PLS_INTEGER</code>数据类型存储-2,147,483,648到2,147,483,647范围内的有符号整数，以32位表示。
                  </p>
                  <p>与<code class="codeph">NUMBER</code>数据类型和<code class="codeph">NUMBER</code>子类型相比， <code class="codeph">PLS_INTEGER</code>数据类型具有以下优势：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">PLS_INTEGER</code>值需要较少的存储空间。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">PLS_INTEGER</code>操作使用硬件算法，因此它们比使用库算术的<code class="codeph">NUMBER</code>操作更快。
                        </p>
                     </li>
                  </ul>
                  <p>为了提高效率，请对其范围内的所有计算使用<code class="codeph">PLS_INTEGER</code>值。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-9517B7AC-9CEA-4C36-A454-52588BEEBE8F__GUID-4E80819D-0420-48DE-A9A7-649BC0C6DA3B">话题</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="plsql-data-types.html#GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965" title="具有溢出PLS_INTEGER范围的两个PLS_INTEGER值的计算会引发溢出异常。">防止PLS_INTEGER溢出</a></p>
                        </li>
                        <li>
                           <p><a href="plsql-data-types.html#GUID-00859F04-85FC-422D-B35B-93F5B5F4B912" title="此摘要列出了PLS_INTEGER数据类型的预定义子类型，并描述了它们存储的数据。">预定义的PLS_INTEGER子类型</a></p>
                        </li>
                        <li>
                           <p><a href="plsql-data-types.html#GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF" title="SIMPLE_INTEGER是PLS_INTEGER数据类型的预定义子类型。">SIMPLE_INTEGER PLS_INTEGER的子类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPLS292"></a><a id="LNPLS293"></a><a id="LNPLS99938"></a><div class="props_rev_3"><a id="GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965" name="GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965"></a><h4 id="LNPLS-GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965" class="sect4"><span class="enumeration_section">3.3.1</span>防止PLS_INTEGER溢出</h4>
                  <div>
                     <p>具有溢出<code class="codeph">PLS_INTEGER</code>范围的两个<code class="codeph">PLS_INTEGER</code>值的计算会引发溢出异常。
                     </p>
                     <div class="section">
                        <p>对于<code class="codeph">PLS_INTEGER</code>范围之外的计算，请使用<code class="codeph">INTEGER</code> ， <code class="codeph">NUMBER</code>数据类型的预定义子类型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965__CHDDIAEG">
                        <p class="titleinexample">示例3-4 PLS_INTEGER计算引发溢出异常</p>
                        <p>此示例显示，即使将结果分配给<code class="codeph">NUMBER</code>数据类型，具有溢出<code class="codeph">PLS_INTEGER</code>范围的两个<code class="codeph">PLS_INTEGER</code>值的计算也会引发溢出异常。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE p1 PLS_INTEGER：= 2147483647; p2 PLS_INTEGER：= 1; n NUMBER;开始n：= p1 + p2;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的DECLARE * ERROR： <span class="bold">ORA-01426：数字溢出</span> ORA-06512：第6行</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965__CHDEDAGD">
                        <p class="titleinexample">实施例3-5防止<span><a href="plsql-data-types.html#GUID-EC45A8BA-1D95-4A36-AE06-6F1E77EC4965__CHDDIAEG">实施例3-4</a></span>溢出</p>
                        <p>此示例显示正确使用<code class="codeph">INTEGER</code>预定义子类型进行<code class="codeph">PLS_INTEGER</code>范围之外的计算。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE p1 PLS_INTEGER：= 2147483647; p2 <span class="bold">INTEGER</span> ：= 1; n NUMBER;开始n：= p1 + p2;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">PL / SQL过程成功完成。</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS309"></a><a id="LNPLS311"></a><a id="LNPLS99937"></a><div class="props_rev_3"><a id="GUID-00859F04-85FC-422D-B35B-93F5B5F4B912" name="GUID-00859F04-85FC-422D-B35B-93F5B5F4B912"></a><h4 id="LNPLS-GUID-00859F04-85FC-422D-B35B-93F5B5F4B912" class="sect4"><span class="enumeration_section">3.3.2</span>预定义的PLS_INTEGER子类型</h4>
                  <div>
                     <p>此摘要列出了<code class="codeph">PLS_INTEGER</code>数据类型的预定义子类型，并描述了它们存储的数据。
                     </p>
                     <div class="tblformal" id="GUID-00859F04-85FC-422D-B35B-93F5B5F4B912__CHDDFGFG">
                        <p class="titleintable">表3-3 PLS_INTEGER数据类型的预定义子类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="PLS_INTEGER数据类型的预定义子类型" width="100%" border="1" summary="This table summarizes the predefined subtypes of the PLS_INTEGER datatype." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d27514e3109">数据类型</th>
                                 <th align="left" valign="bottom" width="78%" id="d27514e3112">数据描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d27514e3117" headers="d27514e3109 ">
                                    <p><code class="codeph">自然</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d27514e3117 d27514e3112 ">
                                    <p>非负<code class="codeph">PLS_INTEGER</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d27514e3128" headers="d27514e3109 ">
                                    <p><code class="codeph">NATURALN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d27514e3128 d27514e3112 ">
                                    <p>具有<code class="codeph">NOT NULL</code>约束的非负<code class="codeph">PLS_INTEGER</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d27514e3142" headers="d27514e3109 ">
                                    <p><code class="codeph">正</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d27514e3142 d27514e3112 ">
                                    <p>正<code class="codeph">PLS_INTEGER</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d27514e3153" headers="d27514e3109 ">
                                    <p><code class="codeph">POSITIVEN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d27514e3153 d27514e3112 ">
                                    <p>具有<code class="codeph">NOT NULL</code>约束的正<code class="codeph">PLS_INTEGER</code>值</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d27514e3167" headers="d27514e3109 ">
                                    <p><code class="codeph">SIGNTYPE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d27514e3167 d27514e3112 ">
                                    <p><code class="codeph">PLS_INTEGER</code>值-1,0或1（对编程三态逻辑很有用）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d27514e3177" headers="d27514e3109 ">
                                    <p><code class="codeph">SIMPLE_INTEGER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d27514e3177 d27514e3112 ">
                                    <p>具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的<code class="codeph">PLS_INTEGER</code>值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><code class="codeph">PLS_INTEGER</code>及其子类型可以隐式转换为以下数据类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CHAR</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">VARCHAR2</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">数</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">长</code></p>
                        </li>
                     </ul>
                     <p>除<code class="codeph">LONG</code>和所有<code class="codeph">PLS_INTEGER</code>子类型之外的所有前述数据类型都可以隐式转换为<code class="codeph">PLS_INTEGER</code> 。</p>
                     <p>仅当值不违反子类型的约束时，才能将<code class="codeph">PLS_INTEGER</code>值隐式转换为<code class="codeph">PLS_INTEGER</code>子类型。
                     </p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-00859F04-85FC-422D-B35B-93F5B5F4B912__GUID-3B696C9A-95DC-4972-804F-E1E419347D02">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="plsql-language-fundamentals.html#GUID-6705CC7D-470A-4B4A-BCAD-6843F227C012" title="您可以对标量变量或常量（或复合变量或常量的标量组件）施加NOT NULL约束。">NOT NULL Constraint</a> ”</span>有关<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="plsql-data-types.html#GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF" title="SIMPLE_INTEGER是PLS_INTEGER数据类型的预定义子类型。">SIMPLE_INTEGER PLS_INTEGER的子类型</a> ”</span>有关<code class="codeph">SIMPLE_INTEGER</code>更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div class="example" id="GUID-00859F04-85FC-422D-B35B-93F5B5F4B912__CHDBJFJE">
                        <p class="titleinexample">示例3-6违反SIMPLE_INTEGER子类型的约束</p>
                        <p>此示例显示将<code class="codeph">PLS_INTEGER</code>值<code class="codeph">NULL</code>转换为<code class="codeph">SIMPLE_INTEGER</code>子类型会引发异常。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE SIMPLE_INTEGER：= 1; b PLS_INTEGER：= NULL;开始a：= b;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的DECLARE * ERROR：ORA-06502：PL / SQL：数值或值错误ORA-06512：第5行</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS314"></a><a id="LNPLS00305"></a><div class="props_rev_3"><a id="GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF" name="GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF"></a><h4 id="LNPLS-GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF" class="sect4"><span class="enumeration_section">3.3.3</span> SIMPLE_INTEGER PLS_INTEGER的子类型</h4>
                  <div>
                     <p><code class="codeph">SIMPLE_INTEGER</code>是<code class="codeph">PLS_INTEGER</code>数据类型的预定义子类型。
                     </p>
                     <p><code class="codeph">SIMPLE_INTEGER</code>与<code class="codeph">PLS_INTEGER</code>具有相同的范围，并具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。它在溢出语义上与<code class="codeph">PLS_INTEGER</code>显着不同。
                     </p>
                     <p>如果您知道变量永远不会为<code class="codeph">NULL</code>或需要溢出检查，请将其声明为<code class="codeph">SIMPLE_INTEGER</code>而不是<code class="codeph">PLS_INTEGER</code> 。没有检查空值和溢出的开销， <code class="codeph">SIMPLE_INTEGER</code>性能明显优于<code class="codeph">PLS_INTEGER</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF__GUID-AE120E3E-0891-49C2-9735-FC5742BBC510">话题</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="plsql-data-types.html#GUID-508CD868-0C7A-431B-9BA8-419ACD3F1964" title="当且仅当表达式中的所有操作数都具有数据类型SIMPLE_INTEGER时，PL / SQL使用二进制补码算法并忽略溢出。">SIMPLE_INTEGER溢出语义</a></p>
                           </li>
                           <li>
                              <p><a href="plsql-data-types.html#GUID-55F1EF5E-77CA-4AFA-A577-94710502470C" title="如果表达式同时具有SIMPLE_INTEGER和其他操作数，则PL / SQL会将SIMPLE_INTEGER值隐式转换为PLS_INTEGER NOT NULL。">SIMPLE_INTEGER和其他操作数的表达式</a></p>
                           </li>
                           <li>
                              <p><a href="plsql-data-types.html#GUID-5F982083-9915-420C-A73F-FCD3D7ECE5C2" title="SIMPLE_INTEGER范围内的整数文字的数据类型为SIMPLE_INTEGER。">SIMPLE_INTEGER范围内的整数文字</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-84C413B0-BDCA-4ABC-B402-3B8CED013DAF__GUID-552BD564-3870-4043-A4EF-F1BB5B862C8A">
                           <p class="notep1">也可以看看：</p><span class="q">“ <a href="plsql-language-fundamentals.html#GUID-6705CC7D-470A-4B4A-BCAD-6843F227C012" title="您可以对标量变量或常量（或复合变量或常量的标量组件）施加NOT NULL约束。">NOT NULL约束</a> ”</span></div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPLS321"></a><div class="props_rev_3"><a id="GUID-508CD868-0C7A-431B-9BA8-419ACD3F1964" name="GUID-508CD868-0C7A-431B-9BA8-419ACD3F1964"></a><h5 id="LNPLS-GUID-508CD868-0C7A-431B-9BA8-419ACD3F1964" class="sect5"><span class="enumeration_section">3.3.3.1</span> SIMPLE_INTEGER溢出语义</h5>
                     <div>
                        <p>当且仅当表达式中的所有操作数都具有数据类型<code class="codeph">SIMPLE_INTEGER</code> ，PL / SQL使用二进制补码算法并忽略溢出。
                        </p>
                        <p>因为忽略了溢出，所以值可以从正到负或从负到正;例如：</p>
                        <p>2 <sup>30</sup> + 2 <sup>30</sup> = 0x40000000 + 0x40000000 = 0x80000000 = -2 <sup>31</sup></p>
                        <p>-2 <sup>31</sup> + -2 <sup>31</sup> = 0x80000000 + 0x80000000 = 0x00000000 = 0</p>
                        <p>例如，此块运行没有错误：</p><pre class="oac_no_warn" dir="ltr">DECLARE n <span class="bold">SIMPLE_INTEGER</span> ：= 2147483645;开始为j IN 1..4 LOOP n：= n + 1; DBMS_OUTPUT.PUT_LINE（TO_CHAR（n，'S9999999999'））;结束循环; FOR j IN 1..4 LOOP n：= n  -  1; DBMS_OUTPUT.PUT_LINE（TO_CHAR（n，'S9999999999'））;结束循环;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">+2147483646 +2147483647 -2147483648 -2147483647 -2147483648 +2147483647 +2147483646 +2147483645 PL / SQL过程已成功完成。</pre></div>
                  </div><a id="LNPLS99936"></a><div class="props_rev_3"><a id="GUID-55F1EF5E-77CA-4AFA-A577-94710502470C" name="GUID-55F1EF5E-77CA-4AFA-A577-94710502470C"></a><h5 id="LNPLS-GUID-55F1EF5E-77CA-4AFA-A577-94710502470C" class="sect5"><span class="enumeration_section">3.3.3.2同时</span>使用SIMPLE_INTEGER和其他操作数的表达式</h5>
                     <div>
                        <p>如果表达式同时具有<code class="codeph">SIMPLE_INTEGER</code>和其他操作数，则PL / SQL会将<code class="codeph">SIMPLE_INTEGER</code>值隐式转换为<code class="codeph">PLS_INTEGER</code> <code class="codeph">NOT</code> <code class="codeph">NULL</code> 。</p>
                        <p>当<code class="codeph">SIMPLE_INTEGER</code>和其他值以可能通过禁止某些优化可能对性能产生负面影响的方式混合时，PL / SQL编译器会发出警告。
                        </p>
                     </div>
                  </div><a id="LNPLS323"></a><div class="props_rev_3"><a id="GUID-5F982083-9915-420C-A73F-FCD3D7ECE5C2" name="GUID-5F982083-9915-420C-A73F-FCD3D7ECE5C2"></a><h5 id="LNPLS-GUID-5F982083-9915-420C-A73F-FCD3D7ECE5C2" class="sect5"><span class="enumeration_section">3.3.3.3</span> SIMPLE_INTEGER范围内的整数文字</h5>
                     <div>
                        <p><code class="codeph">SIMPLE_INTEGER</code>范围内的整数文字的数据类型为<code class="codeph">SIMPLE_INTEGER</code> 。</p>
                        <p>但是，为了确保向后兼容性，当算术表达式中的所有操作数都是整数文字时，PL / SQL会将整数文字视为转换为<code class="codeph">PLS_INTEGER</code> 。</p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPLS315"></a><a id="LNPLS99935"></a><div class="props_rev_3"><a id="GUID-0E03C20F-2960-4ED9-8692-D4DCBF1F9670" name="GUID-0E03C20F-2960-4ED9-8692-D4DCBF1F9670"></a><h3 id="LNPLS-GUID-0E03C20F-2960-4ED9-8692-D4DCBF1F9670" class="sect3"><span class="enumeration_section">3.4</span>用户定义的PL / SQL子类型</h3>
               <div>
                  <p>PL / SQL允许您定义自己的子类型。</p>
                  <p>基类型可以是任何标量或用户定义的PL / SQL数据类型说明符，例如<code class="codeph">CHAR</code> ， <code class="codeph">DATE</code>或<code class="codeph">RECORD</code> （包括先前定义的用户定义的子类型）。
                  </p>
                  <div class="infoboxnote" id="GUID-0E03C20F-2960-4ED9-8692-D4DCBF1F9670__GUID-2DF9F3A6-8991-4354-8CFE-39DFAC5BC295">
                     <p class="notep1">注意：</p>
                     <p>本主题中的信息适用于用户定义的子类型和<a href="plsql-predefined-data-types.html#GUID-1D28B7B6-15AE-454A-8134-F8724551AE8B">PL / SQL预定义数据类型中</a>列出的预定义子<a href="plsql-predefined-data-types.html#GUID-1D28B7B6-15AE-454A-8134-F8724551AE8B">类型</a> 。
                     </p>
                  </div>
                  <p>子类型可以：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>提供与ANSI / ISO数据类型的兼容性</p>
                     </li>
                     <li>
                        <p>显示该类型数据项的预期用途</p>
                     </li>
                     <li>
                        <p>检测超出范围的值</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-0E03C20F-2960-4ED9-8692-D4DCBF1F9670__GUID-4982318C-C573-4176-9FE2-8CA7BDB40809">话题</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="plsql-data-types.html#GUID-31F465A3-F8F7-413A-AB6F-7EF422D052E0" title="不受约束的子类型具有与其基本类型相同的值集，因此它只是基本类型的另一个名称。">无约束的子类型</a></p>
                        </li>
                        <li>
                           <p><a href="plsql-data-types.html#GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F" title="受约束的子类型仅具有其基本类型的值的子集。">受约束的子类型</a></p>
                        </li>
                        <li>
                           <p><a href="plsql-data-types.html#GUID-126CB7F3-7E65-40BC-B6CD-2244B63240A7" title="如果两个子类型在同一数据类型族中具有不同的基类型，则只有在源值不违反目标子类型的约束时，才能将一个子类型隐式转换为另一个子类型。">具有相同数据类型族的基类型的子类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPLS316"></a><a id="LNPLS99934"></a><div class="props_rev_3"><a id="GUID-31F465A3-F8F7-413A-AB6F-7EF422D052E0" name="GUID-31F465A3-F8F7-413A-AB6F-7EF422D052E0"></a><h4 id="LNPLS-GUID-31F465A3-F8F7-413A-AB6F-7EF422D052E0" class="sect4"><span class="enumeration_section">3.4.1无</span>约束的子类型</h4>
                  <div>
                     <p><span class="bold">不受约束的子类型</span>具有与其基本类型相同的值集，因此它只是基本类型的另一个名称。
                     </p>
                     <p>因此，相同碱基类型的无约束亚型可彼此互换并与基础类型互换。不会发生数据类型转换。</p>
                     <p>要定义不受约束的子类型，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">SUBTYPE <span class="italic">subtype_name</span> IS <span class="italic">base_type</span>
</pre><p>有关<span class="italic"><code class="codeph">subtype_name</code></span>和<span class="italic"><code class="codeph">base_type</code></span> ，请参阅<span class="bold"><a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CHDECJAH">subtype</a></span> 。
                     </p>
                     <p>PL / SQL预定义与ANSI兼容的无约束子类型的示例是：</p><pre class="oac_no_warn" dir="ltr">子类“双精度”是浮动的</pre><div class="example" id="GUID-31F465A3-F8F7-413A-AB6F-7EF422D052E0__BABEDFGH">
                        <p class="titleinexample">示例3-7用户定义的无约束子类型显示预期用途</p>
                        <p>在此示例中，无约束的子类型<code class="codeph">Balance</code>和<code class="codeph">Counter</code>显示其类型的数据项的预期用途。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE <span class="bold">SUBTYPE余额是数字</span> ; checking_account余额（6,2）; savings_account余额（8,2）; certificate_of_deposit余额（8,2）; max_insured常数余额（8,2）：= 250000.00; <span class="bold">SUBTYPE计数器是自然的</span> ;账户柜台：= 1;存款柜台：= 0;提款柜台：= 0;透支计数器：= 0;程序存款（账户IN OUT余额，金额IN余额）是BEGIN账户：=账户+金额;存款：=存款+ 1;结束; BEGIN NULL;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS374"></a><a id="LNPLS317"></a><a id="LNPLS99933"></a><div class="props_rev_3"><a id="GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F" name="GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F"></a><h4 id="LNPLS-GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F" class="sect4"><span class="enumeration_section">3.4.2</span>约束子类型</h4>
                  <div>
                     <p><span class="bold">受约束的子类型</span>仅具有其基本类型的值的子集。
                     </p>
                     <p>如果基类型允许您指定大小，精度和比例或一系列值，则可以为其子类型指定它们。子类型定义语法是：</p><pre class="oac_no_warn" dir="ltr">SUBTYPE <span class="italic">subtype_name</span> IS <span class="italic">base_type</span> { <span class="italic">precision</span> [， <span class="italic">scale</span> ] | RANGE <span class="italic">low_value</span> .. <span class="italic">high_value</span> } [NOT NULL]</pre><p>否则，您可以在其子类型上放置的唯一约束是<code class="codeph">NOT</code> <code class="codeph">NULL</code> ：</p><pre class="oac_no_warn" dir="ltr">SUBTYPE <span class="italic">subtype_name</span> IS <span class="italic">base_type</span> [NOT NULL]</pre><div class="infoboxnote" id="GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F__GUID-73884108-CAE5-4155-843C-49CC4C829F3E">
                        <p class="notep1">注意：</p>
                        <p>您可以指定一系列值的唯一基类型是<code class="codeph">PLS_INTEGER</code>及其子类型（预定义和用户定义）。
                        </p>
                     </div>
                     <p>受约束的子类型可以隐式转换为其基类型，但只有在值不违反子类型的约束时，才能将基类型隐式转换为约束子类型。</p>
                     <p>仅当源值不违反目标子类型的约束时，约束子类型才可以隐式转换为具有相同基本类型的另一个约束子类型。</p>
                     <div class="infoboxnotealso" id="GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F__GUID-059627C8-295E-49E9-B269-0C81BFB2B55F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CHDCIGAD">subtype_definition :: =</a> ”</span>语法图</p> 
                           </li>
                           <li>
                              <p><span class="q">“ <a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CHDECJAH">子类型</a> ”</span>语义描述</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="plsql-data-types.html#GUID-00859F04-85FC-422D-B35B-93F5B5F4B912__CHDBJFJE">示例3-6</a> ”</span> ， <span class="q">“违反SIMPLE_INTEGER子类型的约束”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="plsql-subprograms.html#GUID-BA13F32D-4E04-4004-8CE5-5B628678A253">约束子类型的形式参数</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="plsql-language-fundamentals.html#GUID-6705CC7D-470A-4B4A-BCAD-6843F227C012" title="您可以对标量变量或常量（或复合变量或常量的标量组件）施加NOT NULL约束。">NOT NULL约束</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F__CJABHGBG">
                        <p class="titleinexample">示例3-8用户定义的约束子类型检测超出范围的值</p>
                        <p>在此示例中，受约束的子类型<code class="codeph">Balance</code>检测超出范围的值。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE <span class="bold">SUBTYPE余额是数字（8,2）</span> ; checking_account余额; <span class="bold">savings_account余额</span> ; bEGIN checking_account：= 2000.00; <span class="bold">savings_account：= 1000000.00</span> ;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的DECLARE * ERROR： <span class="bold">ORA-06502：PL / SQL：数值或值错误：数字精度太大</span> ORA-06512：第9行</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-FDC366F3-66AA-4F6A-A59B-5A08DCBD4F9F__CHDDEEJC">
                        <p class="titleinexample">示例3-9具有相同基类型的约束子类型之间的隐式转换</p>
                        <p>在此示例中，三个约束子类型具有相同的基本类型。前两个子类型可以隐式转换为第三个子类型，但不能相互转换。</p><pre class="oac_no_warn" dir="ltr">DECLARE SUBTYPE数字是PLS_INTEGER范围0..9; SUBTYPE Double_digit是PLS_INTEGER RANGE 10..99; SUBTYPE Under_100 IS PLS_INTEGER RANGE 0..99; d数字：= 4; dd Double_digit：= 35;你欠100;开始你：= d; - 成功; Under_100范围包括数字范围u：= dd; - 成功; Under_100范围包括Double_digit范围dd：= d; - 引发错误; Double_digit范围不包括数字范围END; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的DECLARE * ERROR：ORA-06502：PL / SQL：数值或值错误ORA-06512：第12行</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNPLS318"></a><a id="LNPLS99932"></a><div class="props_rev_3"><a id="GUID-126CB7F3-7E65-40BC-B6CD-2244B63240A7" name="GUID-126CB7F3-7E65-40BC-B6CD-2244B63240A7"></a><h4 id="LNPLS-GUID-126CB7F3-7E65-40BC-B6CD-2244B63240A7" class="sect4"><span class="enumeration_section">3.4.3</span>具有相同数据类型族的基类型的子类型</h4>
                  <div>
                     <p>如果两个子类型在同一数据类型族中具有不同的基类型，则只有在源值不违反目标子类型的约束时，才能将一个子类型隐式转换为另一个子类型。</p>
                     <p>对于按数据类型系列分组的预定义PL / SQL数据类型和子类型，请参阅<a href="plsql-predefined-data-types.html#GUID-1D28B7B6-15AE-454A-8134-F8724551AE8B">PL / SQL预定义数据类型</a> 。
                     </p>
                     <div class="example" id="GUID-126CB7F3-7E65-40BC-B6CD-2244B63240A7__CHDIIGEA">
                        <p class="titleinexample">示例3-10同一族中具有基类型的子类型之间的隐式转换</p>
                        <p>在此示例中，子类型<code class="codeph">Word</code>和<code class="codeph">Text</code>在同一数据类型系列中具有不同的基本类型。第一个赋值语句隐式将<code class="codeph">Word</code>值转换为<code class="codeph">Text</code> 。第二个赋值语句隐式将<code class="codeph">Text</code>值转换为<code class="codeph">Word</code> 。第三个赋值语句不能将<code class="codeph">Text</code>值隐式转换为<code class="codeph">Word</code> ，因为该值太长。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE SUBTYPE Word是CHAR（6）; SUBTYPE Text IS VARCHAR2（15）;动词Word：='run';第1句sentence2文字：='快点！“; sentence3文字：='看汤姆跑。“; BEGIN sentence1：=动词; -  3个字符的值，15个字符的限制动词：= sentence2; -  6个字符的值，6个字符的限制动词：= sentence3; -  12个字符的值，6个字符的限制END; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第1行的DECLARE * ERROR：ORA-06502：PL / SQL：数字或值错误：字符串缓冲区太小ORA-06512：第13行</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04697.intervalds-class.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>IntervalDS类</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96205-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="environment-class.html" title="Previous" type="text/html"></link>
      <link rel="next" href="intervalym-class.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNCPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="environment-class.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="intervalym-class.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="occi-application-programing-interface.html" property="item" typeof="WebPage"><span property="name">OCCI应用程序编程接口</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">IntervalDS类</li>
            </ol>
            <a id="GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124" name="GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124"></a><a id="LNCPP21003"></a><a id="LNCPP21004"></a><a id="LNCPP21005"></a><a id="LNCPP21006"></a><a id="LNCPP1011"></a>
            
            <h2 id="LNCPP-GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124" class="sect2"><span class="enumeration_section">13.15</span> IntervalDS类</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>IntervalDS类根据天，小时，分钟，秒和小数秒来封装时间间隔计算。前导字段精度由日输入中的小数位数确定。分数秒精度由输入的分数位数确定。</p>
               </div>
               <!-- class="section" -->
               <div class="tblformal" id="GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124__GUID-56394893-89F9-44D6-AC07-4644E6B39834">
                  <p class="titleintable">表13-19 IntervalDS类的字段</p>
                  <table cellpadding="4" cellspacing="0" class="Formal" title="IntervalDS类的字段" width="100%" border="1" summary="First column lists fields; second column provides field types; third column provides description and range of legal values of the fields." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="14%" id="d127196e116">领域</th>
                           <th align="left" valign="bottom" width="13%" id="d127196e119">类型</th>
                           <th align="left" valign="bottom" width="72%" id="d127196e122">描述</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="14%" id="d127196e127" headers="d127196e116 ">
                              <p><code class="codeph">天</code></p>
                           </td>
                           <td align="left" valign="top" width="13%" headers="d127196e127 d127196e119 ">
                              <p><code class="codeph">INT</code></p>
                           </td>
                           <td align="left" valign="top" width="72%" headers="d127196e127 d127196e122 ">
                              <p>日组件。有效值为<code class="codeph">-10^9</code>到<code class="codeph">10^9</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="14%" id="d127196e145" headers="d127196e116 ">
                              <p><code class="codeph">小时</code></p>
                           </td>
                           <td align="left" valign="top" width="13%" headers="d127196e145 d127196e119 ">
                              <p><code class="codeph">INT</code></p>
                           </td>
                           <td align="left" valign="top" width="72%" headers="d127196e145 d127196e122 ">
                              <p>小时组件。有效值为<code class="codeph">-23</code>到<code class="codeph">23</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="14%" id="d127196e163" headers="d127196e116 ">
                              <p><code class="codeph">分钟</code></p>
                           </td>
                           <td align="left" valign="top" width="13%" headers="d127196e163 d127196e119 ">
                              <p><code class="codeph">INT</code></p>
                           </td>
                           <td align="left" valign="top" width="72%" headers="d127196e163 d127196e122 ">
                              <p>分钟组件。有效值为<code class="codeph">-59</code>到<code class="codeph">59</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="14%" id="d127196e181" headers="d127196e116 ">
                              <p><code class="codeph">第二</code></p>
                           </td>
                           <td align="left" valign="top" width="13%" headers="d127196e181 d127196e119 ">
                              <p><code class="codeph">INT</code></p>
                           </td>
                           <td align="left" valign="top" width="72%" headers="d127196e181 d127196e122 ">
                              <p>第二部分。有效值为<code class="codeph">-59</code>到<code class="codeph">59</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="14%" id="d127196e199" headers="d127196e116 ">
                              <p><code class="codeph">FS</code></p>
                           </td>
                           <td align="left" valign="top" width="13%" headers="d127196e199 d127196e119 ">
                              <p><code class="codeph">INT</code></p>
                           </td>
                           <td align="left" valign="top" width="72%" headers="d127196e199 d127196e122 ">
                              <p>分数第二组分。构造一个<code class="codeph">NULL</code> <code class="codeph">IntervalDS</code>对象。可以通过赋值或调用<code class="codeph">fromText</code>方法初始化<code class="codeph">NULL</code> <code class="codeph">intervalDS</code> 。可以在<code class="codeph">NULL</code> <code class="codeph">intervalDS</code>对象上调用的方法是<a href="bfile-class.html#GUID-96AA140C-73F2-432D-9E76-0123BBEDFB6D">setName（）</a>和<a href="intervalds-class.html#GUID-E891191D-0F10-4230-8977-96E79AF83882">isNull（）</a> 。
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <div class="example" id="GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124__GUID-CD97B9F0-A73F-49CC-B2E3-156C87C089B2">
                  <p class="titleinexample">示例13-6如何通过直接分配使用空IntervalDS对象</p>
                  <p>此示例演示默认构造函数如何创建<code class="codeph">NULL</code>值，以及如何将非<code class="codeph">NULL</code>值分配给第二个时间间隔，然后对其执行操作。
                  </p><pre class="oac_no_warn" dir="ltr">Environment * env = Environment :: createEnvironment（）; //创建NULL天秒间隔IntervalDS ds; if（ds.isNull（））cout &lt;&lt;“\ n ds is null”; //为ds IntervalDS anotherDS（env，“10 20：14：10.2”）分配非NULL值; ds = anotherDS; //现在IntervalDS上的所有操作都是有效的，因为DAY = ds.getDay（）;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124__GUID-BF4B4129-EDFD-4B89-98F6-E86A20FF1FF7">
                  <p class="titleinexample">示例13-7如何通过* Text（）方法使用空IntervalDS对象</p>
                  <p>此示例演示如何创建<code class="codeph">NULL</code>日 - 秒间隔，使用<code class="codeph">fromText()</code>方法初始化第二天间隔，使用+ =运算符添加到第二天间隔，乘以*运算符，比较2每秒间隔，并使用<code class="codeph">toText</code>方法将第二天的间隔转换为字符串：</p><pre class="oac_no_warn" dir="ltr">Environment * env = Environment :: createEnvironment（）; //创建空的第二天间隔IntervalDS ds1 //使用fromText方法ds1.fromText（“20 10：20：30.9”，“”，env）初始化空的第二天间隔; IntervalDS addWith（env，2,1）; ds1 + = addWith; // call + = operator IntervalDS mulDs1 = ds1 * Number（env，10）; // call * operator if（ds1 == mulDs1）// call == operator。。string strds = ds1.toText（2,4）; // 2是领先的字段精度// 4是分数字段精度</pre></div>
               <!-- class="example" -->
               <div class="tblformal" id="GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124__GUID-8DBB21FE-059F-4066-B08E-0BB86656F12A">
                  <p class="titleintable">表13-20 IntervalDS方法摘要</p>
                  <table cellpadding="4" cellspacing="0" class="Formal" title="IntervalDS方法综述" width="100%" border="1" summary="First column lists methods; second column provides description of these methods." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="37%" id="d127196e277">方法</th>
                           <th align="left" valign="bottom" width="63%" id="d127196e280">摘要</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e285" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-8349424B-4776-4972-BA6B-E445EA8CA6A0">IntervalDS（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e285 d127196e280 ">
                              <p><code class="codeph">IntervalDS</code>类构造函数。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e295" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3">fromText（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e295 d127196e280 ">
                              <p>返回从<code class="codeph">string</code>转换的<code class="codeph">IntervalDS</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e309" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-4F715C9E-88FD-4359-A0B7-9FD9AE4D8E0A">fromUText（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e309 d127196e280 ">
                              <p>返回<code class="codeph">IntervalDS</code>从转换<code class="codeph">UString</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e323" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-D3017C3B-E3A8-4DAB-B06D-E58412CA6420">getDay（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e323 d127196e280 ">
                              <p>返回日间隔值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e331" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-ADCB5B82-94A9-4F12-8C05-067F41B46104">getFracSec（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e331 d127196e280 ">
                              <p>返回小数秒的间隔值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e339" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-ADCB5B82-94A9-4F12-8C05-067F41B46104">getFracSec（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e339 d127196e280 ">
                              <p>返回小时间隔值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e347" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-14272F29-2E5B-4CA2-960E-249E0DB5E555">getMinute（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e347 d127196e280 ">
                              <p>返回分钟间隔值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e355" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-BE16430A-7B29-40C8-87D2-FBFC18266401">getSecond（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e355 d127196e280 ">
                              <p>返回第二个间隔值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e363" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-E891191D-0F10-4230-8977-96E79AF83882">一片空白（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e363 d127196e280 ">
                              <p>如果<code class="codeph">IntervalDS</code>为<code class="codeph">NULL</code> ，则返回<code class="codeph">true</code> ，否则返回<code class="codeph">false</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e383" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-0916C0D3-9814-4023-9F38-AED86E447123">运营商*（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e383 d127196e280 ">
                              <p>返回两个<code class="codeph">IntervalDS</code>值的乘积。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e394" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-CCDC92E2-EA36-40B8-AEF7-5C7F3CEF10B4">操作员* =（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e394 d127196e280 ">
                              <p>乘法赋值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e403" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-3B659232-E1EB-4749-A7D5-A0A2A520318E">运算符=（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e403 d127196e280 ">
                              <p>简单的任务。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e411" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-4FF89992-93D7-4677-A819-EDD5B55DBE10">==操作符（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e411 d127196e280 ">
                              <p>检查<code class="codeph">a</code>和<code class="codeph">b</code>是否相等。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e425" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-2C2C678E-C6F9-4CA0-8B7E-3C0B3F48FB84">运营商！=（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e425 d127196e280 ">
                              <p>检查<code class="codeph">a</code>和<code class="codeph">b</code>是否不相等。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e439" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-EBFFB831-232D-45BB-9471-A36ED9197C5B">运营商/（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e439 d127196e280 ">
                              <p>返回值为<code class="codeph">(</code> <code class="codeph">a</code> <code class="codeph">/</code> <code class="codeph">b</code> <code class="codeph">)</code>的<code class="codeph">IntervalDS</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e461" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-D0B4CB32-D42A-45CE-8752-83745198CF43">运营商/ =（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e461 d127196e280 ">
                              <p>部门分配。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e469" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-691EC167-EB76-4644-AAD3-45BEF0760A93">操作者&gt;（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e469 d127196e280 ">
                              <p>检查<code class="codeph">a</code>是否大于<code class="codeph">b</code> 
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e483" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-9226E924-B130-4952-923E-F79DDD362766">操作者&gt; =（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e483 d127196e280 ">
                              <p>检查<code class="codeph">a</code>是否大于或等于<code class="codeph">b</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e497" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-A48AFDA4-50D5-4CB7-83D1-03506DD03E53">操作者&lt;（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e497 d127196e280 ">
                              <p>检查<code class="codeph">a</code>是否小于<code class="codeph">b</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e511" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-414CE18D-F4FE-4654-AB7E-84BA7AA83B76">操作者&lt;=（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e511 d127196e280 ">
                              <p>检查<code class="codeph">a</code>是否小于或等于<code class="codeph">b</code> 。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e525" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-D1313768-C265-4137-ABE1-F35872CB2C97">操作符 - （）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e525 d127196e280 ">
                              <p>返回具有值的<code class="codeph">IntervalDS</code> （ <code class="codeph">a -</code> <code class="codeph"> </code> <code class="codeph">b</code> ）。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e543" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-C4ED08C3-A76A-4317-A2DE-DAADA2208D8F">操作员 -  =（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e543 d127196e280 ">
                              <p>减法赋值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e552" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-C379C037-07BA-453C-A34E-05F3ECDE8D69">操作者+（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e552 d127196e280 ">
                              <p>返回两个<code class="codeph">IntervalDS</code>值的总和。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e563" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-8880A94F-60EB-43BB-944F-5FAF645112C2">操作者+ =（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e563 d127196e280 ">
                              <p>增加任务。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e571" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-24A5A776-CCC4-4822-8A1D-469536EA4A88">组（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e571 d127196e280 ">
                              <p>设置第二天的间隔。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e579" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-BB2E52DE-824E-42E7-BAB7-157D38F948B7">的setNull（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e579 d127196e280 ">
                              <p>将第二秒间隔设置为<code class="codeph">NULL</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e590" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-6064D2CB-1072-4C6E-916B-2604EB8F2D6E">到文本（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e590 d127196e280 ">
                              <p>转换为间隔的<code class="codeph">string</code>表示形式。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="37%" id="d127196e601" headers="d127196e277 ">
                              <p><a href="intervalds-class.html#GUID-6DD2E239-BCA6-43E5-91A5-E3807F607016">toUText（）</a></p>
                           </td>
                           <td align="left" valign="top" width="63%" headers="d127196e601 d127196e280 ">
                              <p>转换为间隔的<code class="codeph">UString</code>表示。
                              </p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="LNCPP21007"></a><div class="props_rev_3"><a id="GUID-8349424B-4776-4972-BA6B-E445EA8CA6A0" name="GUID-8349424B-4776-4972-BA6B-E445EA8CA6A0"></a><h3 id="LNCPP-GUID-8349424B-4776-4972-BA6B-E445EA8CA6A0" class="sect3"><span class="enumeration_section">13.15.1</span> IntervalDS（）</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">IntervalDS</code>类构造函数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-8349424B-4776-4972-BA6B-E445EA8CA6A0__GUID-E47D5EF0-4989-4871-BAD7-AED9511DF219">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists versions of the constructor; second column provides descriptions of these versions." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d127196e688">句法</th>
                              <th align="left" valign="bottom" width="66%" id="d127196e691">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d127196e696" headers="d127196e688 "><pre class="oac_no_warn" dir="ltr">IntervalDS（）;</pre></td>
                              <td align="left" valign="top" width="66%" headers="d127196e696 d127196e691 ">
                                 <p>构造一个<code class="codeph">NULL</code> <code class="codeph">IntervalDS</code>对象。可以通过赋值或调用<a href="intervalds-class.html#GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3">fromText（）</a>方法初始化<code class="codeph">NULL</code> <code class="codeph">IntervalDS</code> 。可以在<code class="codeph">NULL</code> <code class="codeph">IntervalDS</code>对象上调用的方法是<a href="bfile-class.html#GUID-96AA140C-73F2-432D-9E76-0123BBEDFB6D">setName（）</a>和<a href="bfile-class.html#GUID-2A7B4150-BC6A-450E-999C-3633C0022D31">isNull（）</a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d127196e731" headers="d127196e688 "><pre class="oac_no_warn" dir="ltr">IntervalDS（const Environment * env，int day = 0，int hour = 0，int minute = 0，int second = 0，int fs = 0）;</pre></td>
                              <td align="left" valign="top" width="66%" headers="d127196e731 d127196e691 ">
                                 <p>在指定的<code class="codeph">Environment</code>构造<code class="codeph">IntervalDS</code>对象。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d127196e744" headers="d127196e688 "><pre class="oac_no_warn" dir="ltr">IntervalDS（const IntervalDS＆src）;</pre></td>
                              <td align="left" valign="top" width="66%" headers="d127196e744 d127196e691 ">
                                 <p>从<code class="codeph">src</code>构造一个<code class="codeph">IntervalYM</code>对象。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="tblformal" id="GUID-8349424B-4776-4972-BA6B-E445EA8CA6A0__GUID-0B529771-7D5D-40DE-AC47-B63E00740CB2">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d127196e764">参数</th>
                              <th align="left" valign="bottom" width="79%" id="d127196e767">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e772" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">ENV</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e772 d127196e767 ">
                                 <p><code class="codeph">Environment</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e782" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">天</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e782 d127196e767 ">
                                 <p><code class="codeph">IntervalDS</code>的<code class="codeph">day</code>字段。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e795" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">小时</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e795 d127196e767 ">
                                 <p><code class="codeph">IntervalDS</code>的<code class="codeph">hour</code>字段。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e808" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">分钟</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e808 d127196e767 ">
                                 <p><code class="codeph">IntervalDS</code>的<code class="codeph">minute</code>字段。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e821" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e821 d127196e767 ">
                                 <p><code class="codeph">IntervalDS</code>的第二个字段。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e831" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">FS</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e831 d127196e767 ">
                                 <p><code class="codeph">IntervalDS</code>的<code class="codeph">fs</code>字段。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e844" headers="d127196e764 "><pre class="oac_no_warn" dir="ltr">SRC</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e844 d127196e767 ">
                                 <p>从中复制<code class="codeph">IntervalDS</code>对象的源。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21009"></a><a id="LNCPP21008"></a><div class="props_rev_3"><a id="GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3" name="GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3"></a><h3 id="LNCPP-GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3" class="sect3"><span class="enumeration_section">13.15.2</span> fromText（）</h3>
               <div>
                  <div class="section">
                     <p>根据指定的字符串创建间隔。使用与相关环境关联的<code class="codeph">nls</code>参数转换字符串。<code class="codeph">nls</code>参数从<code class="codeph">env</code> 。如果<code class="codeph">env</code>为<code class="codeph">NULL</code> ，则从与实例关联的环境中拾取<code class="codeph">nls</code>参数（如果有）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3__GUID-E1C1B5A7-C93D-4C35-8A48-0C36AEA7389A">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">void fromText（const string＆inpstr，const string＆nlsParam =“”，const Environment * env = NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-C1290BD4-D236-4E23-9F38-A19ACC7621D3__GUID-190C67C2-BB38-4ACB-B48B-A993C2149A26">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d127196e954">参数</th>
                              <th align="left" valign="bottom" width="79%" id="d127196e957">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e962" headers="d127196e954 "><pre class="oac_no_warn" dir="ltr">inpstr</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e962 d127196e957 ">
                                 <p>输入字符串表示“days hours：minutes：seconds”形式的第二个时间间隔，例如，'10 20：14：10.2'</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e969" headers="d127196e954 "><pre class="oac_no_warn" dir="ltr">nlsParam</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e969 d127196e957 ">
                                 <p><code class="codeph">NLS</code>参数字符串。如果指定了<code class="codeph">nlsParam</code> ，则确定要用于转换的NLS参数。如果未指定<code class="codeph">nlsParam</code> ，则从<code class="codeph">envp</code>中获取NLS参数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e988" headers="d127196e954 "><pre class="oac_no_warn" dir="ltr">ENV</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e988 d127196e957 ">
                                 <p>使用NLS参数的环境。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21011"></a><a id="LNCPP21010"></a><div class="props_rev_3"><a id="GUID-4F715C9E-88FD-4359-A0B7-9FD9AE4D8E0A" name="GUID-4F715C9E-88FD-4359-A0B7-9FD9AE4D8E0A"></a><h3 id="LNCPP-GUID-4F715C9E-88FD-4359-A0B7-9FD9AE4D8E0A" class="sect3"><span class="enumeration_section">13.15.3</span> fromUText（）</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">UString</code>指定的<code class="codeph">UString</code>创建间隔。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4F715C9E-88FD-4359-A0B7-9FD9AE4D8E0A__GUID-3F7D8BDB-23B8-48F6-B6E7-143B52D7CAC5">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">void fromUText（const UString＆inpstr，const Environment * env = NULL）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-4F715C9E-88FD-4359-A0B7-9FD9AE4D8E0A__GUID-D519E15A-5E46-4FE0-B073-A58EC9BBBFA4">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d127196e1080">参数</th>
                              <th align="left" valign="bottom" width="79%" id="d127196e1083">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e1088" headers="d127196e1080 "><pre class="oac_no_warn" dir="ltr">inpstr</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e1088 d127196e1083 ">
                                 <p>输入<code class="codeph">UString</code>表示“days hours：minutes：seconds”形式的第二个时间间隔，例如，'10 20：14：10.2'</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e1098" headers="d127196e1080 "><pre class="oac_no_warn" dir="ltr">ENV</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e1098 d127196e1083 ">
                                 <p><code class="codeph">Environment</code> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21013"></a><a id="LNCPP21012"></a><div class="props_rev_3"><a id="GUID-D3017C3B-E3A8-4DAB-B06D-E58412CA6420" name="GUID-D3017C3B-E3A8-4DAB-B06D-E58412CA6420"></a><h3 id="LNCPP-GUID-D3017C3B-E3A8-4DAB-B06D-E58412CA6420" class="sect3"><span class="enumeration_section">13.15.4</span> getDay（）</h3>
               <div>
                  <div class="section">
                     <p>返回间隔的日期分量。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D3017C3B-E3A8-4DAB-B06D-E58412CA6420__GUID-0A97CFEC-A90F-4F47-90DF-A31924B57122">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">int getDay（）const;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21015"></a><a id="LNCPP21014"></a><div class="props_rev_3"><a id="GUID-ADCB5B82-94A9-4F12-8C05-067F41B46104" name="GUID-ADCB5B82-94A9-4F12-8C05-067F41B46104"></a><h3 id="LNCPP-GUID-ADCB5B82-94A9-4F12-8C05-067F41B46104" class="sect3"><span class="enumeration_section">13.15.5</span> getFracSec（）</h3>
               <div>
                  <div class="section">
                     <p>返回间隔的小数第二个分量。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ADCB5B82-94A9-4F12-8C05-067F41B46104__GUID-5904C2E4-242D-4352-B3A4-3CC58B7B75A0">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">int getFracSec（）const;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21017"></a><a id="LNCPP21016"></a><div class="props_rev_3"><a id="GUID-F8D06B39-F83C-415F-83E0-13190BD4E80F" name="GUID-F8D06B39-F83C-415F-83E0-13190BD4E80F"></a><h3 id="LNCPP-GUID-F8D06B39-F83C-415F-83E0-13190BD4E80F" class="sect3"><span class="enumeration_section">13.15.6</span> getHour（）</h3>
               <div>
                  <div class="section">
                     <p>返回间隔的小时部分。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F8D06B39-F83C-415F-83E0-13190BD4E80F__GUID-3A753BBD-A64C-4B41-9CE2-835501DB6FA3">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">int getHour（）const;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21019"></a><a id="LNCPP21018"></a><div class="props_rev_3"><a id="GUID-14272F29-2E5B-4CA2-960E-249E0DB5E555" name="GUID-14272F29-2E5B-4CA2-960E-249E0DB5E555"></a><h3 id="LNCPP-GUID-14272F29-2E5B-4CA2-960E-249E0DB5E555" class="sect3"><span class="enumeration_section">13.15.7</span> getMinute（）</h3>
               <div>
                  <div class="section">
                     <p>返回此间隔的分钟组件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-14272F29-2E5B-4CA2-960E-249E0DB5E555__GUID-E3D0D031-305A-4D43-A6BE-91C66494B501">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">int getMinute（）const;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21021"></a><a id="LNCPP21020"></a><div class="props_rev_3"><a id="GUID-BE16430A-7B29-40C8-87D2-FBFC18266401" name="GUID-BE16430A-7B29-40C8-87D2-FBFC18266401"></a><h3 id="LNCPP-GUID-BE16430A-7B29-40C8-87D2-FBFC18266401" class="sect3"><span class="enumeration_section">13.15.8</span> getSecond（）</h3>
               <div>
                  <div class="section">
                     <p>返回此间隔的秒组件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE16430A-7B29-40C8-87D2-FBFC18266401__GUID-9219F9B6-AC4F-427B-A5BE-A1BA6800333A">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">int getSecond（）const;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21023"></a><a id="LNCPP21022"></a><div class="props_rev_3"><a id="GUID-E891191D-0F10-4230-8977-96E79AF83882" name="GUID-E891191D-0F10-4230-8977-96E79AF83882"></a><h3 id="LNCPP-GUID-E891191D-0F10-4230-8977-96E79AF83882" class="sect3"><span class="enumeration_section">13.15.9</span> isNull（）</h3>
               <div>
                  <div class="section">
                     <p>测试间隔是否为<code class="codeph">NULL</code> 。如果间隔为<code class="codeph">NULL</code>则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E891191D-0F10-4230-8977-96E79AF83882__GUID-5256BB6F-899F-4722-A7F3-7558D2726C99">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">bool isNull（）const;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21025"></a><a id="LNCPP21024"></a><div class="props_rev_3"><a id="GUID-0916C0D3-9814-4023-9F38-AED86E447123" name="GUID-0916C0D3-9814-4023-9F38-AED86E447123"></a><h3 id="LNCPP-GUID-0916C0D3-9814-4023-9F38-AED86E447123" class="sect3"><span class="enumeration_section">13.15.10</span> operator *（）</h3>
               <div>
                  <div class="section">
                     <p>将间隔乘以指定值并返回结果。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0916C0D3-9814-4023-9F38-AED86E447123__GUID-EDAF4802-B397-45B5-AC29-F0511A8423F5">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">const IntervalDS运算符*（const IntervalDS＆interval，const Number＆val）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-0916C0D3-9814-4023-9F38-AED86E447123__GUID-10C345FC-9359-4635-88C5-C451F74B893A">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d127196e1647">参数</th>
                              <th align="left" valign="bottom" width="79%" id="d127196e1650">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e1655" headers="d127196e1647 "><pre class="oac_no_warn" dir="ltr">间隔</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e1655 d127196e1650 ">
                                 <p>间隔倍增。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e1662" headers="d127196e1647 "><pre class="oac_no_warn" dir="ltr">VAL</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e1662 d127196e1650 ">
                                 <p>间隔乘以的值。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21027"></a><a id="LNCPP21026"></a><div class="props_rev_3"><a id="GUID-CCDC92E2-EA36-40B8-AEF7-5C7F3CEF10B4" name="GUID-CCDC92E2-EA36-40B8-AEF7-5C7F3CEF10B4"></a><h3 id="LNCPP-GUID-CCDC92E2-EA36-40B8-AEF7-5C7F3CEF10B4" class="sect3"><span class="enumeration_section">13.15.11</span> operator * =（）</h3>
               <div>
                  <div class="section">
                     <p>将<code class="codeph">IntervalDS</code>和<code class="codeph">a</code>的乘积分配给<code class="codeph">IntervalDS</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CCDC92E2-EA36-40B8-AEF7-5C7F3CEF10B4__GUID-8E7100A4-F8E6-4CA9-8E16-F484BD372091">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">IntervalDS＆operator * =（const IntervalDS＆factor）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-CCDC92E2-EA36-40B8-AEF7-5C7F3CEF10B4__GUID-4AAD1A16-6BAE-44E4-A842-2153EF0BA53E">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d127196e1759">参数</th>
                              <th align="left" valign="bottom" width="79%" id="d127196e1762">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e1767" headers="d127196e1759 "><pre class="oac_no_warn" dir="ltr">因子</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e1767 d127196e1762 ">
                                 <p>一天的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21029"></a><a id="LNCPP21028"></a><div class="props_rev_3"><a id="GUID-3B659232-E1EB-4749-A7D5-A0A2A520318E" name="GUID-3B659232-E1EB-4749-A7D5-A0A2A520318E"></a><h3 id="LNCPP-GUID-3B659232-E1EB-4749-A7D5-A0A2A520318E" class="sect3"><span class="enumeration_section">13.15.12</span> operator =（）</h3>
               <div>
                  <div class="section">
                     <p>将指定值分配给间隔。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3B659232-E1EB-4749-A7D5-A0A2A520318E__GUID-5987E4B8-19A9-448F-A23B-1F7783E25EE6">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">IntervalDS＆operator =（const IntervalDS＆src）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-3B659232-E1EB-4749-A7D5-A0A2A520318E__GUID-413A9881-80C8-4E6E-AF1E-9CF2ABA8AA62">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d127196e1856">参数</th>
                              <th align="left" valign="bottom" width="79%" id="d127196e1859">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d127196e1864" headers="d127196e1856 "><pre class="oac_no_warn" dir="ltr">SRC</pre></td>
                              <td align="left" valign="top" width="79%" headers="d127196e1864 d127196e1859 ">
                                 <p>要分配的值。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21031"></a><a id="LNCPP21030"></a><div class="props_rev_3"><a id="GUID-4FF89992-93D7-4677-A819-EDD5B55DBE10" name="GUID-4FF89992-93D7-4677-A819-EDD5B55DBE10"></a><h3 id="LNCPP-GUID-4FF89992-93D7-4677-A819-EDD5B55DBE10" class="sect3"><span class="enumeration_section">13.15.13</span> operator ==（）</h3>
               <div>
                  <div class="section">
                     <p>比较指定的间隔。如果间隔相等，则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。如果任一间隔为<code class="codeph">NULL</code>则抛出SQLException。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4FF89992-93D7-4677-A819-EDD5B55DBE10__GUID-6577B888-E581-4FE8-8948-CA9421CDC69B">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">bool运算符==（const IntervalDS＆first，const IntervalDS＆ <code class="codeph">second</code> ）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-4FF89992-93D7-4677-A819-EDD5B55DBE10__GUID-AD94A29A-1F98-4A12-A5EA-FAF397098617">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e1964">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e1967">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e1972" headers="d127196e1964 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e1972 d127196e1967 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e1979" headers="d127196e1964 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e1979 d127196e1967 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21033"></a><a id="LNCPP21032"></a><div class="props_rev_3"><a id="GUID-2C2C678E-C6F9-4CA0-8B7E-3C0B3F48FB84" name="GUID-2C2C678E-C6F9-4CA0-8B7E-3C0B3F48FB84"></a><h3 id="LNCPP-GUID-2C2C678E-C6F9-4CA0-8B7E-3C0B3F48FB84" class="sect3"><span class="enumeration_section">13.15.14</span>运营商！=（）</h3>
               <div>
                  <div class="section">
                     <p>比较指定的间隔。如果间隔不相等则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。如果任一间隔为<code class="codeph">NULL</code>则抛出SQLException。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2C2C678E-C6F9-4CA0-8B7E-3C0B3F48FB84__GUID-973EC1FC-48BC-4F65-ADA6-6BA49590ADBB">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">布尔运营商！=（const IntervalDS＆first，const IntervalDS＆second）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-2C2C678E-C6F9-4CA0-8B7E-3C0B3F48FB84__GUID-12B1A26D-5012-4713-9619-EA6BC5E39A42">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2076">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2079">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2084" headers="d127196e2076 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2084 d127196e2079 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2091" headers="d127196e2076 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2091 d127196e2079 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21035"></a><a id="LNCPP21034"></a><div class="props_rev_3"><a id="GUID-EBFFB831-232D-45BB-9471-A36ED9197C5B" name="GUID-EBFFB831-232D-45BB-9471-A36ED9197C5B"></a><h3 id="LNCPP-GUID-EBFFB831-232D-45BB-9471-A36ED9197C5B" class="sect3"><span class="enumeration_section">13.15.15</span> operator /（）</h3>
               <div>
                  <div class="section">
                     <p>返回将间隔除以常量值的结果。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EBFFB831-232D-45BB-9471-A36ED9197C5B__GUID-8FDBF3C0-F121-46A7-89E5-A64746B76DD9">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">const IntervalDS运算符/（const IntervalDS＆dividend，const Number＆factor）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-EBFFB831-232D-45BB-9471-A36ED9197C5B__GUID-A11B0A37-0070-43A0-AAB8-93EAC7B4D8B1">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2180">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2183">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2188" headers="d127196e2180 "><pre class="oac_no_warn" dir="ltr">股利</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2188 d127196e2183 ">
                                 <p>要划分的间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2195" headers="d127196e2180 "><pre class="oac_no_warn" dir="ltr">因子</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2195 d127196e2183 ">
                                 <p>间隔的值除以。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21037"></a><a id="LNCPP21036"></a><div class="props_rev_3"><a id="GUID-D0B4CB32-D42A-45CE-8752-83745198CF43" name="GUID-D0B4CB32-D42A-45CE-8752-83745198CF43"></a><h3 id="LNCPP-GUID-D0B4CB32-D42A-45CE-8752-83745198CF43" class="sect3"><span class="enumeration_section">13.15.16</span> operator / =（）</h3>
               <div>
                  <div class="section">
                     <p>将<code class="codeph">IntervalDS</code>和<code class="codeph">val</code>的商指定给<code class="codeph">IntervalDS</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D0B4CB32-D42A-45CE-8752-83745198CF43__GUID-56BA5F66-7522-4FD6-B47D-0B8400968533">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">IntervalDS＆operator / =（const IntervalDS＆factor）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D0B4CB32-D42A-45CE-8752-83745198CF43__GUID-2EDA82E7-8E37-4B60-ACBC-24D90B494700">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2292">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2295">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2300" headers="d127196e2292 "><pre class="oac_no_warn" dir="ltr">因子</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2300 d127196e2295 ">
                                 <p>一天的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21039"></a><a id="LNCPP21038"></a><div class="props_rev_3"><a id="GUID-691EC167-EB76-4644-AAD3-45BEF0760A93" name="GUID-691EC167-EB76-4644-AAD3-45BEF0760A93"></a><h3 id="LNCPP-GUID-691EC167-EB76-4644-AAD3-45BEF0760A93" class="sect3"><span class="enumeration_section">13.15.17</span> operator&gt;（）</h3>
               <div>
                  <div class="section">
                     <p>比较指定的间隔。如果第一个间隔大于第二个间隔，则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。如果任一间隔为<code class="codeph">NULL</code>则抛出SQLException。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-691EC167-EB76-4644-AAD3-45BEF0760A93__GUID-70F4ED9E-75AA-4B86-8B11-643A29AFB575">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">bool运算符&gt;（const IntervalDS＆first，const IntervalDS＆ <code class="codeph">second</code> ）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-691EC167-EB76-4644-AAD3-45BEF0760A93__GUID-4F3ACE34-B08E-4915-8C23-DC1974C0F73F">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2400">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2403">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2408" headers="d127196e2400 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2408 d127196e2403 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2415" headers="d127196e2400 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2415 d127196e2403 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21041"></a><a id="LNCPP21040"></a><div class="props_rev_3"><a id="GUID-9226E924-B130-4952-923E-F79DDD362766" name="GUID-9226E924-B130-4952-923E-F79DDD362766"></a><h3 id="LNCPP-GUID-9226E924-B130-4952-923E-F79DDD362766" class="sect3"><span class="enumeration_section">13.15.18</span> operator&gt; =（）</h3>
               <div>
                  <div class="section">
                     <p>比较指定的间隔。如果第一个间隔大于或等于第二个间隔，则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。如果任一间隔为<code class="codeph">NULL</code>则抛出SQLException。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9226E924-B130-4952-923E-F79DDD362766__GUID-C146E83F-D5C7-4EAA-A067-3B2FA1F8CE9D">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">bool运算符&gt; =（const IntervalDS＆first，const IntervalDS＆first）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9226E924-B130-4952-923E-F79DDD362766__GUID-147F5AB5-1C00-49A2-866E-94F0511A48E5">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2513">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2516">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2521" headers="d127196e2513 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2521 d127196e2516 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2528" headers="d127196e2513 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2528 d127196e2516 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21043"></a><a id="LNCPP21042"></a><div class="props_rev_3"><a id="GUID-A48AFDA4-50D5-4CB7-83D1-03506DD03E53" name="GUID-A48AFDA4-50D5-4CB7-83D1-03506DD03E53"></a><h3 id="LNCPP-GUID-A48AFDA4-50D5-4CB7-83D1-03506DD03E53" class="sect3"><span class="enumeration_section">13.15.19</span>运营商&lt;（）</h3>
               <div>
                  <div class="section">
                     <p>比较指定的间隔。如果第一个间隔小于第二个间隔，则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。如果任一间隔为<code class="codeph">NULL</code>则抛出SQLException。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A48AFDA4-50D5-4CB7-83D1-03506DD03E53__GUID-8222EA90-A9D3-4C09-8725-3A214A7923DD">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">bool运算符&lt;（const IntervalDS＆first，const IntervalDS＆ <code class="codeph">second</code> ）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-A48AFDA4-50D5-4CB7-83D1-03506DD03E53__GUID-7DFF9AEF-C2FE-4B6F-AD75-6EDDE34DE74F">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2628">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2631">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2636" headers="d127196e2628 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2636 d127196e2631 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2643" headers="d127196e2628 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2643 d127196e2631 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21045"></a><a id="LNCPP21044"></a><div class="props_rev_3"><a id="GUID-414CE18D-F4FE-4654-AB7E-84BA7AA83B76" name="GUID-414CE18D-F4FE-4654-AB7E-84BA7AA83B76"></a><h3 id="LNCPP-GUID-414CE18D-F4FE-4654-AB7E-84BA7AA83B76" class="sect3"><span class="enumeration_section">13.15.20</span> operator &lt;=（）</h3>
               <div>
                  <div class="section">
                     <p>比较指定的间隔。如果第一个间隔小于或等于第二个间隔，则返回<code class="codeph">TRUE</code> ;否则，返回<code class="codeph">FALSE</code> 。如果任一间隔为<code class="codeph">NULL</code>则抛出SQLException。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-414CE18D-F4FE-4654-AB7E-84BA7AA83B76__GUID-58B0BBAD-05BF-4A27-B566-1A69161AB804">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">bool operator &lt;=（const IntervalDS＆first，const IntervalDS＆second）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-414CE18D-F4FE-4654-AB7E-84BA7AA83B76__GUID-D97DF66F-E4FE-445E-90BD-F0A824D111C7">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2740">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2743">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2748" headers="d127196e2740 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2748 d127196e2743 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2755" headers="d127196e2740 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2755 d127196e2743 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21047"></a><a id="LNCPP21046"></a><div class="props_rev_3"><a id="GUID-D1313768-C265-4137-ABE1-F35872CB2C97" name="GUID-D1313768-C265-4137-ABE1-F35872CB2C97"></a><h3 id="LNCPP-GUID-D1313768-C265-4137-ABE1-F35872CB2C97" class="sect3"><span class="enumeration_section">13.15.21</span> operator-（）</h3>
               <div>
                  <div class="section">
                     <p>返回<code class="codeph">first</code>和<code class="codeph">second</code>区间之间的差异。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D1313768-C265-4137-ABE1-F35872CB2C97__GUID-E28C324A-B87D-462B-9D1C-C8A47D0237C6">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">const IntervalDS运算符 - （const IntervalDS＆first，const IntervalDS＆ <code class="codeph">second</code> ）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D1313768-C265-4137-ABE1-F35872CB2C97__GUID-4212C558-9A79-4402-97D7-12A8D34CB23E">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2853">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2856">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2861" headers="d127196e2853 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2861 d127196e2856 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2868" headers="d127196e2853 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2868 d127196e2856 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21049"></a><a id="LNCPP21048"></a><div class="props_rev_3"><a id="GUID-C4ED08C3-A76A-4317-A2DE-DAADA2208D8F" name="GUID-C4ED08C3-A76A-4317-A2DE-DAADA2208D8F"></a><h3 id="LNCPP-GUID-C4ED08C3-A76A-4317-A2DE-DAADA2208D8F" class="sect3"><span class="enumeration_section">13.15.22</span> operator <code class="codeph">-=</code> （）</h3>
               <div>
                  <div class="section">
                     <p>将<code class="codeph">IntervalDS</code>和<code class="codeph">val</code>之间的差异分配给<code class="codeph">IntervalDS</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C4ED08C3-A76A-4317-A2DE-DAADA2208D8F__GUID-5217DE06-3518-4CBD-93F6-3AE196D5FBCF">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">IntervalDS＆operator  -  =（const IntervalDS＆val）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-C4ED08C3-A76A-4317-A2DE-DAADA2208D8F__GUID-494F75E9-29DA-4EC4-A54F-EC1FDDC029B8">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e2968">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e2971">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e2976" headers="d127196e2968 "><pre class="oac_no_warn" dir="ltr">VAL</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e2976 d127196e2971 ">
                                 <p>一天的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21051"></a><a id="LNCPP21050"></a><div class="props_rev_3"><a id="GUID-C379C037-07BA-453C-A34E-05F3ECDE8D69" name="GUID-C379C037-07BA-453C-A34E-05F3ECDE8D69"></a><h3 id="LNCPP-GUID-C379C037-07BA-453C-A34E-05F3ECDE8D69" class="sect3"><span class="enumeration_section">13.15.23</span>运算符+（）</h3>
               <div>
                  <div class="section">
                     <p>返回指定间隔的总和。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C379C037-07BA-453C-A34E-05F3ECDE8D69__GUID-A7F54B14-8212-43AF-9D5B-49C9FC06097F">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">const IntervalDS运算符+（const IntervalDS＆first，const IntervalDS＆ <code class="codeph">second</code> ）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-C379C037-07BA-453C-A34E-05F3ECDE8D69__GUID-E7A5C303-A310-4E5A-9C84-25B00E521325">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e3067">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e3070">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3075" headers="d127196e3067 "><pre class="oac_no_warn" dir="ltr">第一</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3075 d127196e3070 ">
                                 <p>要比较的第一个间隔。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3082" headers="d127196e3067 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3082 d127196e3070 ">
                                 <p>要比较的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21053"></a><a id="LNCPP21052"></a><div class="props_rev_3"><a id="GUID-8880A94F-60EB-43BB-944F-5FAF645112C2" name="GUID-8880A94F-60EB-43BB-944F-5FAF645112C2"></a><h3 id="LNCPP-GUID-8880A94F-60EB-43BB-944F-5FAF645112C2" class="sect3"><span class="enumeration_section">13.15.24</span> operator + =（）</h3>
               <div>
                  <div class="section">
                     <p>将<code class="codeph">IntervalDS</code>和<code class="codeph">val</code>的总和分配给<code class="codeph">IntervalDS</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8880A94F-60EB-43BB-944F-5FAF645112C2__GUID-3FD9219B-F865-4D6D-91E3-DB0380BF53E1">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">IntervalDS＆operator + =（const IntervalDS＆val）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-8880A94F-60EB-43BB-944F-5FAF645112C2__GUID-86D611CC-B840-4FD5-99A9-00818953C24B">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e3180">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e3183">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3188" headers="d127196e3180 "><pre class="oac_no_warn" dir="ltr">VAL</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3188 d127196e3183 ">
                                 <p>一天的第二个间隔。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21055"></a><a id="LNCPP21054"></a><div class="props_rev_3"><a id="GUID-24A5A776-CCC4-4822-8A1D-469536EA4A88" name="GUID-24A5A776-CCC4-4822-8A1D-469536EA4A88"></a><h3 id="LNCPP-GUID-24A5A776-CCC4-4822-8A1D-469536EA4A88" class="sect3"><span class="enumeration_section">13.15.25</span> set（）</h3>
               <div>
                  <div class="section">
                     <p>将间隔设置为指定的值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-24A5A776-CCC4-4822-8A1D-469536EA4A88__GUID-7860FE1B-492E-40C0-823B-A33953B8AC77">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">void set（int day，int hour，int minute，int second，int fracsec）;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-24A5A776-CCC4-4822-8A1D-469536EA4A88__GUID-E976225F-76F6-4243-BFEE-A1C21C3136B0">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="18%" id="d127196e3276">参数</th>
                              <th align="left" valign="bottom" width="82%" id="d127196e3279">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d127196e3284" headers="d127196e3276 "><pre class="oac_no_warn" dir="ltr">天</pre></td>
                              <td align="left" valign="top" width="82%" headers="d127196e3284 d127196e3279 ">
                                 <p>日组件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d127196e3291" headers="d127196e3276 "><pre class="oac_no_warn" dir="ltr">小时</pre></td>
                              <td align="left" valign="top" width="82%" headers="d127196e3291 d127196e3279 ">
                                 <p>小时组件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d127196e3298" headers="d127196e3276 "><pre class="oac_no_warn" dir="ltr">分</pre></td>
                              <td align="left" valign="top" width="82%" headers="d127196e3298 d127196e3279 ">
                                 <p>分钟组件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d127196e3305" headers="d127196e3276 "><pre class="oac_no_warn" dir="ltr">第二</pre></td>
                              <td align="left" valign="top" width="82%" headers="d127196e3305 d127196e3279 ">
                                 <p>第二部分。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="18%" id="d127196e3312" headers="d127196e3276 "><pre class="oac_no_warn" dir="ltr">fracsec</pre></td>
                              <td align="left" valign="top" width="82%" headers="d127196e3312 d127196e3279 ">
                                 <p>分数第二组分。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21057"></a><a id="LNCPP21056"></a><div class="props_rev_3"><a id="GUID-BB2E52DE-824E-42E7-BAB7-157D38F948B7" name="GUID-BB2E52DE-824E-42E7-BAB7-157D38F948B7"></a><h3 id="LNCPP-GUID-BB2E52DE-824E-42E7-BAB7-157D38F948B7" class="sect3"><span class="enumeration_section">13.15.26</span> setNull（）</h3>
               <div>
                  <div class="section">
                     <p>将<code class="codeph">IntervalDS</code>设置为<code class="codeph">NULL</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BB2E52DE-824E-42E7-BAB7-157D38F948B7__GUID-39C67B03-518E-4235-9C99-B9893F2113D0">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">void setNull（）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP21059"></a><a id="LNCPP21058"></a><div class="props_rev_3"><a id="GUID-6064D2CB-1072-4C6E-916B-2604EB8F2D6E" name="GUID-6064D2CB-1072-4C6E-916B-2604EB8F2D6E"></a><h3 id="LNCPP-GUID-6064D2CB-1072-4C6E-916B-2604EB8F2D6E" class="sect3"><span class="enumeration_section">13.15.27</span> toText（）</h3>
               <div>
                  <div class="section">
                     <p>转换为间隔的<code class="codeph">string</code>表示形式。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6064D2CB-1072-4C6E-916B-2604EB8F2D6E__GUID-E36DC8D2-462B-4A2C-9D14-FE0A5CFD4AA8">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">string toText（unsigned int lfprec，unsigned int fsprec，const string＆nlsParam =“”）const;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-6064D2CB-1072-4C6E-916B-2604EB8F2D6E__GUID-4DAFD149-B099-4004-84D4-3AACD817CE1C">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e3484">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e3487">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3492" headers="d127196e3484 "><pre class="oac_no_warn" dir="ltr">lfprec</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3492 d127196e3487 ">
                                 <p>领先的领域精度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3499" headers="d127196e3484 "><pre class="oac_no_warn" dir="ltr">fsprec</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3499 d127196e3487 ">
                                 <p>分数秒精度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3506" headers="d127196e3484 "><pre class="oac_no_warn" dir="ltr">nlsParam</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3506 d127196e3487 ">
                                 <p>NLS参数字符串。如果指定了<code class="codeph">nlsParam</code> ，则确定要用于转换的NLS参数。如果未指定<code class="codeph">nlsParam</code> ，则从<code class="codeph">envp</code>中获取NLS参数。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="LNCPP21061"></a><a id="LNCPP21060"></a><div class="props_rev_3"><a id="GUID-6DD2E239-BCA6-43E5-91A5-E3807F607016" name="GUID-6DD2E239-BCA6-43E5-91A5-E3807F607016"></a><h3 id="LNCPP-GUID-6DD2E239-BCA6-43E5-91A5-E3807F607016" class="sect3"><span class="enumeration_section">13.15.28</span> toUText（）</h3>
               <div>
                  <div class="section">
                     <p>转换为间隔的<code class="codeph">UString</code>表示。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6DD2E239-BCA6-43E5-91A5-E3807F607016__GUID-0F389FEA-D435-4E1C-BF3E-B3420C7C78AF">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">UString toUText（unsigned int lfprec，unsigned int fsprec）cosnt;</pre></div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-6DD2E239-BCA6-43E5-91A5-E3807F607016__GUID-28E6B732-CB32-47B3-A9CE-EBD5CBC8885D">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists parameters; second column provides description of these parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d127196e3606">参数</th>
                              <th align="left" valign="bottom" width="72%" id="d127196e3609">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3614" headers="d127196e3606 "><pre class="oac_no_warn" dir="ltr">lfprec</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3614 d127196e3609 ">
                                 <p>领先的领域精度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d127196e3621" headers="d127196e3606 "><pre class="oac_no_warn" dir="ltr">fsprec</pre></td>
                              <td align="left" valign="top" width="72%" headers="d127196e3621 d127196e3609 ">
                                 <p>分数秒精度。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="02638.real-application-security-hr-demo.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>真实应用安全HR演示</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95725-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="XS_SECURITY_CLASS-package.html" title="Previous" type="text/html"></link>
      <link rel="next" href="predefined-objects-in-real-application-security.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator&#39;s and Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBFSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XS_SECURITY_CLASS-package.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="predefined-objects-in-real-application-security.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security管理员和开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">真实应用安全HR演示</li>
            </ol>
            <a id="GUID-F38C8CA7-05B0-4939-AF59-741D8EF7FB87" name="GUID-F38C8CA7-05B0-4939-AF59-741D8EF7FB87"></a><a id="DBFSG806"></a>
            
            <h2 id="DBFSG-GUID-F38C8CA7-05B0-4939-AF59-741D8EF7FB87" class="sect2"><span class="enumeration_chapter">12</span> Real Application Security HR演示</h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">本章介绍以下主题：<ul style="list-style-type:disc">
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A">安全人力资源演示概述</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C">每个脚本的作用</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">设置安全HR演示组件</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-FA992EC6-83D5-4465-86D8-334EAA195C41">使用直接登录运行安全HR演示</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A">运行连接到真实应用程序安全会话的安全HR演示</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B">运行安全HR演示清理脚本</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-36443370-D363-45F1-8F39-45FC8FA52FEB">在Java界面中运行安全HR演示</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-73D8B4A8-43B1-47CF-B23F-07248275176F" title="介绍如何使用RASADM使用图形用户界面创建Real Application Security数据安全策略。">关于使用RASADM运行安全HR演示</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG807"></a><div class="props_rev_3"><a id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A" name="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A"></a><h3 id="DBFSG-GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A" class="sect3">安全人力资源演示概述</h3>
               <div>
                  <p>此人力资源（HR）演示展示了如何使用基本的Real Application Security（RAS）功能。本教程是一个端到端的用例场景。可以在<a href="real-application-security-hr-demo-files.html#GUID-9289D66D-6426-4CE5-9E5E-941A360B0E9C">Real Application Security HR演示文件中</a>找到PL / SQL脚本，Java程序源文件和日志文件。
                  </p>
                  <p>HR演示通过应用具有三个领域的数据安全策略来保护<code class="codeph">HR.EMPLOYEE</code>表：</p>
                  <ol>
                     <li id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHJHIDF">
                        <p>员工自己的记录领域。ACL， <code class="codeph">EMP_ACL</code>控制此领域，授予应用程序角色<code class="codeph">employee</code>权限以访问领域，包括<code class="codeph">SALARY</code>列。
                        </p>
                     </li>
                     <li id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHGGHEH">
                        <p>IT部门领域的所有记录。ACL， <code class="codeph">IT_ACL</code>控制此领域，授予应用程序角色<code class="codeph">it_engineer</code>权限以访问领域，但不包括<code class="codeph">SALARY</code>列。
                        </p>
                     </li>
                     <li id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHBGEEH">
                        <p>所有员工记录领域。ACL，HR_ACL控制此领域，授予应用程序角色<code class="codeph">hr_representative</code>权限以访问领域，包括<code class="codeph">SALARY</code>列。
                        </p>
                     </li>
                  </ol>
                  <p>HR演示定义了两个应用程序用户来演示策略的效果：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DAUSTIN</code> ，IT部门的应用程序用户。他有应用角色<code class="codeph">employee</code>和<code class="codeph">it_engineer</code> 。所以，他可以访问前面提到的领域＃ <a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHJHIDF">1</a>和领域＃ <a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHGGHEH">2</a> ;也就是说，他可以在IT部门查看员工记录，但除了自己的工资记录外，他无法查看<code class="codeph">SALARY</code>列。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">SMAVRIS</code> ，人力资源部门的应用程序用户。她有应用程序角色<code class="codeph">employee</code>和<code class="codeph">hr_representative</code> 。所以，她可以访问前面提到的领域＃ <a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHJHIDF">1</a>和领域＃ <a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHBGEEH">3</a> ;也就是说，她可以查看和更新所有员工记录。
                        </p>
                     </li>
                  </ul>
                  <p>人力资源演示脚本显示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如何创建Real Application Security对象：应用程序用户，应用程序角色，ACL，安全性类和数据安全性策略。</p>
                     </li>
                     <li>
                        <p>如何使用数据安全策略来保护表的行（使用领域约束）和列（使用列约束）。</p>
                     </li>
                     <li>
                        <p>如何使用应用程序用户直接登录数据库（需要密码），以及如何创建，附加，分离和销毁Real Application Security会话。</p>
                     </li>
                     <li>
                        <p>如何在Real Application Security会话中启用和禁用应用程序角色。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG808"></a><div class="props_rev_3"><a id="GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C" name="GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C"></a><h3 id="DBFSG-GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C" class="sect3">每个脚本的作用</h3>
               <div>
                  <p>Security HR演示用例运行以下PL / SQL脚本集来设置组件并运行演示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">hrdemo_setup.sql</code> ：通过以下方式设置演示组件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建数据库用户作为Real Application Security管理员，然后作为Real Application Security管理员连接以创建组件。</p>
                           </li>
                           <li>
                              <p>创建数据库角色<code class="codeph">DB_EMP</code> 。</p>
                           </li>
                           <li>
                              <p>创建IT应用程序用户<code class="codeph">DAUSTIN</code> 。</p>
                           </li>
                           <li>
                              <p>创建HR应用程序用户<code class="codeph">SMAVRIS</code> 。</p>
                           </li>
                           <li>
                              <p>创建应用程序角色： <code class="codeph">employee</code> ， <code class="codeph">it_engineer</code>和<code class="codeph">hr_representative</code> ，然后将数据库角色<code class="codeph">DB_EMP</code>授予每个应用程序角色。
                              </p>
                           </li>
                           <li>
                              <p>将应用程序角色<code class="codeph">employee</code>和<code class="codeph">it_engineer</code>授予应用程序用户<code class="codeph">DAUSTIN</code> 。</p>
                           </li>
                           <li>
                              <p>将应用程序角色<code class="codeph">employee</code>和<code class="codeph">hr_representative</code>授予应用程序用户<code class="codeph">SMAVRIS</code> 。</p>
                           </li>
                           <li>
                              <p>创建<code class="codeph">VIEW_SALARY</code>特权并创建用于确定特权范围的<code class="codeph">hr_privileges</code>安全性类。
                              </p>
                           </li>
                           <li>
                              <p>创建三个ACL： <code class="codeph">EMP_ACL</code> ， <code class="codeph">IT_ACL</code>和<code class="codeph">HR_ACL</code> ，其中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">EMP_ACL</code>授予<code class="codeph">employee</code>角色<code class="codeph">SELECT</code>数据库权限和<code class="codeph">VIEW_SALARY</code>应用程序特权，以查看员工自己的记录，包括<code class="codeph">SALARY</code>列。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IT_ACL</code>仅授予<code class="codeph">it_engineer</code>角色<code class="codeph">SELECT</code>数据库权限以查看IT部门中的员工记录，但它不授予访问<code class="codeph">SALARY</code>列所需的<code class="codeph">VIEW_SALARY</code>特权。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">HR_ACL</code>授予<code class="codeph">hr_representative</code>角色<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>数据库特权，以查看和更新所有员工的记录，并授予<code class="codeph">VIEW_SALARY</code>应用程序特权以查看<code class="codeph">SALARY</code>列。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>HR演示通过创建和应用具有以下三个领域和列约束的数据安全策略<code class="codeph">EMPLOYEES_DS</code>保护<code class="codeph">HR.EMPLOYEE</code>表：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>员工自己的记录领域。ACL， <code class="codeph">EMP_ACL</code>控制此领域，授予应用程序角色<code class="codeph">employee</code>权限以访问领域，包括<code class="codeph">SALARY</code>列。
                                    </p>
                                 </li>
                                 <li>
                                    <p>IT部门领域的所有记录。ACL， <code class="codeph">IT_ACL</code>控制此领域，授予应用程序角色<code class="codeph">it_engineer</code>权限以访问领域，但不包括<code class="codeph">SALARY</code>列。
                                    </p>
                                 </li>
                                 <li>
                                    <p>所有员工记录领域。ACL， <code class="codeph">HR_ACL</code>控制此领域，授予应用程序角色<code class="codeph">hr_representative</code>权限以访问领域，包括<code class="codeph">SALARY</code>列。
                                    </p>
                                 </li>
                                 <li>
                                    <p>通过要求<code class="codeph">VIEW_SALARY</code>特权查看其敏感数据来保护<code class="codeph">SALARY</code>列的列约束。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>验证已创建的所有对象以确保所有配置都正确。</p>
                           </li>
                           <li>
                              <p>通过创建<code class="codeph">DISPATCHER</code>用户，设置此用户的密码以及向此<code class="codeph">DISPATCHER</code>用户授予角色<code class="codeph">XSCONNECT</code>和<code class="codeph">xsdispatcher</code>来设置中间层相关配置。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo.sql</code> ：直接登录运行演示，演示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>IT应用程序用户<code class="codeph">DAUSTIN</code>可以查看IT部门中的记录，但只能查看自己的工资记录，并且无法更新自己的记录。
                              </p>
                           </li>
                           <li>
                              <p>HR应用程序用户<code class="codeph">SMAVRIS</code>可以查看所有记录，包括<code class="codeph">SALARY</code>列中的所有工资行，并可以更新任何记录。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo_session.sql</code> ：运行演示创建并附加到Real Application Security会话，演示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>作为Real Application Security管理员连接并为应用程序用户<code class="codeph">SMAVRIS</code>创建应用程序会话并附加到该应用程序。
                              </p>
                           </li>
                           <li>
                              <p>将当前用户显示为<code class="codeph">SMAVRIS</code> 。</p>
                           </li>
                           <li>
                              <p>将已启用的数据库角色显示为<code class="codeph">DB_EMP</code> ，将应用程序角色<code class="codeph">XSPUBLIC</code>为当前用户<code class="codeph">SMAVRIS</code> <code class="codeph">employee</code> ， <code class="codeph">hr_representative</code>和<code class="codeph">SMAVRIS</code> 。</p>
                           </li>
                           <li>
                              <p>该<code class="codeph">SMAVRIS</code>应用程序用户可以查看所有记录，包括<code class="codeph">SALARY</code>列中的所有工资行。
                              </p>
                           </li>
                           <li>
                              <p>禁用<code class="codeph">hr_representative</code> ，从而限制应用程序用户<code class="codeph">SMAVRIS</code>仅查看她自己的员工记录。
                              </p>
                           </li>
                           <li>
                              <p>启用<code class="codeph">hr_representative</code> ，从而允许<code class="codeph">SMAVRIS</code>应用程序用户再次查看所有记录，包括<code class="codeph">SALARY</code>列中的所有工资行。
                              </p>
                           </li>
                           <li>
                              <p>从应用程序会话中分离。</p>
                           </li>
                           <li>
                              <p>销毁应用程序会话。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo_clean.sql</code> ：执行清除操作，删除：应用程序角色，应用程序用户，ACL，数据安全策略，数据库角色，Real Application Security管理用户和中间层调度程序用户。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo.java</code> ：使用Java界面运行HR Demo。
                        </p>
                     </li>
                  </ul>
                  <p><span class="q">“ <a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">设置安全性HR演示组件</a> ”</span>更详细地描述了如何创建每个Real Application Security组件以及执行其他一些重要任务。
                  </p>
               </div>
            </div><a id="DBFSG809"></a><div class="props_rev_3"><a id="GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4" name="GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4"></a><h3 id="DBFSG-GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4" class="sect3">设置安全HR演示组件</h3>
               <div>
                  <div class="section">
                     <p>在创建Real Application Security组件之前，必须先以<code class="codeph">SYS/</code> user身份连接为<code class="codeph">SYSDBA</code> 。</p><pre class="oac_no_warn" dir="ltr">define passwd =＆1将sys / <span class="italic">＆passwd</span>连接为sysdba</pre><div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD">关于创建角色和应用程序用户</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2">关于创建安全性类和ACL</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D">关于创建数据安全策略</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-9519B6E3-ACC5-403A-BF54-99862F01665D">关于验证Real Application Security对象</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4">关于设置中间层相关配置</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="DBFSG810"></a><div class="props_rev_3"><a id="GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD" name="GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD"></a><h4 id="DBFSG-GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD" class="sect4">关于创建角色和应用程序用户</h4>
                  <div>
                     <p>创建应用程序角色<code class="codeph">EMPLOYEE</code> ， <code class="codeph">IT_ENGINEER</code>和<code class="codeph">HR_REPRESENTATIVE</code> ，以及数据库角色<code class="codeph">DB_EMP</code> 。 <code class="codeph">DB_EMP</code>角色用于向创建的两个应用程序用户<code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code>授予所需的对象权限。最后，为<code class="codeph">HR</code>用户授予策略管理权限<code class="codeph">ADMIN_ANY_SEC_POLICY</code> 。</p>
                     <p>以<code class="codeph">SYS/</code>用户身份连接为<code class="codeph">SYSDBA</code> 。</p><pre class="oac_no_warn" dir="ltr">define passwd =＆1将sys /＆passwd连接为sysdba</pre><p>为普通员工创建应用程序角色<code class="codeph">EMPLOYEE</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_role（name =&gt;'employee'，enabled =&gt; true）;</pre><p>为IT部门创建应用程序角色<code class="codeph">IT_ENGINEER</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_role（name =&gt;'it_engineer'，enabled =&gt; true）;</pre><p>为HR部门创建应用程序角色<code class="codeph">HR_REPRESENTATIVE</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_role（name =&gt;'hr_representative'，enabled =&gt; true）;</pre><p>为对象权限授予创建数据库角色<code class="codeph">DB_EMP</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">创建角色db_emp;</pre><p>将<code class="codeph">DB_EMP</code>数据库角色授予三个应用程序角色，以便它们各自具有访问该表所需的对象特权。
                     </p><pre class="oac_no_warn" dir="ltr">将db_emp授予员工;将db_emp授予it_engineer;将db_emp授予hr_representative;</pre><p>创建应用程序用户。</p>
                     <p>创建应用程序用户<code class="codeph">DAUSTIN</code> （在IT部门中）并授予此用户应用程序角色<code class="codeph">EMPLOYEE</code>和<code class="codeph">IT_ENGINEER</code> 。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_user（name =&gt;'daustin'，schema =&gt;'hr'）; exec sys.xs_principal.set_password（'daustin'，'welcome1'）; exec sys.xs_principal.grant_roles（'daustin'，'XSCONNECT'）; exec sys.xs_principal.grant_roles（'daustin'，'employee'）; exec sys.xs_principal.grant_roles（'daustin'，'it_engineer'）;</pre><p>创建应用程序用户<code class="codeph">SMAVRIS</code> （在HR部门中）并授予此用户应用程序角色<code class="codeph">EMPLOYEE</code>和<code class="codeph">HR_REPRESENTATIVE</code> 。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_user（name =&gt;'smavris'，schema =&gt;'hr'）; exec sys.xs_principal.set_password（'smavris'，'welcome1'）; exec sys.xs_principal.grant_roles（'smavris'，'XSCONNECT'）; exec sys.xs_principal.grant_roles（'smavris'，'employee'）; exec sys.xs_principal.grant_roles（'smavris'，'hr_representative'）;</pre><p>为<code class="codeph">HR</code>用户授予策略管理权限<code class="codeph">ADMIN_ANY_SEC_POLICY</code> 。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_admin_util.grant_system_privilege（'ADMIN_ANY_SEC_POLICY'，'HR'）;</pre></div>
               </div><a id="DBFSG811"></a><div class="props_rev_3"><a id="GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2" name="GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2"></a><h4 id="DBFSG-GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2" class="sect4">关于创建安全性类和ACL</h4>
                  <div>
                     <p>首先，为<code class="codeph">DB_EMP</code>角色授予必要的表权限。
                     </p>
                     <p>接下来，根据预定义的DML安全性类创建安全性类<code class="codeph">HR_PRIVILEGES</code> 。<code class="codeph">HR_PRIVILEGES</code>有一个新权限<code class="codeph">VIEW_SALARY</code> ，它控制对<code class="codeph">SALARY</code>列的访问。最后，创建三个ACL， <code class="codeph">EMP_ACL</code> ， <code class="codeph">IT_ACL</code>和<code class="codeph">HR_ACL</code> 。</p>
                     <p>以<code class="codeph">HR</code>用户身份连接。
                     </p><pre class="oac_no_warn" dir="ltr">连接hr / hr;</pre><p>为<code class="codeph">DB_EMP</code>角色授予必要的对象权限。此角色用于向应用程序用户授予所需的对象权限。
                     </p><pre class="oac_no_warn" dir="ltr">将hr.employees上的select，insert，update，delete授予db_emp;</pre><pre class="oac_no_warn" dir="ltr">declare begin sys.xs_security_class.create_security_class（name =&gt;'hr_privileges'，parent_list =&gt; xs $ name_list（'sys.dml'），priv_list =&gt; xs $ privilege_list（xs $ privilege（'view_salary'）））;结束; /</pre><p>创建三个ACL， <code class="codeph">EMP_ACL</code> ， <code class="codeph">IT_ACL</code>和<code class="codeph">HR_ACL</code>以授予稍后定义的数据安全策略的权限。
                     </p><pre class="oac_no_warn" dir="ltr">声明aces xs $ ace_list：= xs $ ace_list（）;开始aces.extend（1）; -  EMP_ACL：此ACL授予EMPLOYEE角色查看员工自己的记录（包括SALARY列）的权限。aces（1）：= xs $ ace_type（privilege_list =&gt; xs $ name_list（'select'，'view_salary'），principal_name =&gt;'employee'）; sys.xs_acl.create_acl（name =&gt;'emp_acl'，ace_list =&gt; aces，sec_class =&gt;'hr_privileges'）; -  IT_ACL：此ACL授予IT_ENGINEER角色查看员工的权限 -  IT部门中的记录，但不授予访问SALARY列所需的VIEW_SALARY特权。aces（1）：= xs $ ace_type（privilege_list =&gt; xs $ name_list（'select'），principal_name =&gt;'it_engineer'）; sys.xs_acl.create_acl（name =&gt;'it_acl'，ace_list =&gt; aces，sec_class =&gt;'hr_privileges'）; -  HR_ACL：此ACL授予HR_REPRESENTITIVE角色查看和更新所有员工记录（包括SALARY列）的权限。aces（1）：= xs $ ace_type（privilege_list =&gt; xs $ name_list（'select'，'insert'，'update'，'delete'，'view_salary'），principal_name =&gt;'hr_representative'）; sys.xs_acl.create_acl（name =&gt;'hr_acl'，ace_list =&gt; aces，sec_class =&gt;'hr_privileges'）;结束; /</pre></div>
               </div><a id="DBFSG812"></a><div class="props_rev_3"><a id="GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D" name="GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D"></a><h4 id="DBFSG-GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D" class="sect4">关于创建数据安全策略</h4>
                  <div>
                     <p>为<code class="codeph">EMPLOYEE</code>表创建数据安全策略。该策略定义了三个领域约束和一个保护<code class="codeph">SALARY</code>列的列约束。
                     </p><pre class="oac_no_warn" dir="ltr">声明领域xs $ realm_constraint_list：= xs $ realm_constraint_list（）; cols xs $ column_constraint_list：= xs $ column_constraint_list（）; begin realms.extend（3）; - 领域＃1：只有员工自己的记录。-  EMPLOYEE角色可以查看包括SALARY列的领域。realms（1）：= xs $ realm_constraint_type（realm =&gt;'email = xs_sys_context（''xs $ session''，''username''）'，acl_list =&gt; xs $ name_list（'emp_acl'））; - 领域＃2：IT部门的记录。-  IT_ENGINEER角色可以查看除SALARY列之外的域。realms（2）：= xs $ realm_constraint_type（realm =&gt;'department_id = 60'，acl_list =&gt; xs $ name_list（'it_acl'））; - 境界＃3：所有记录。-  HR_REPRESENTATIVE角色可以查看和更新包括SALARY列的领域。realms（3）：= xs $ realm_constraint_type（realm =&gt;'1 = 1'，acl_list =&gt; xs $ name_list（'hr_acl'））; - 列约束通过要求VIEW_SALARY  - 特权来保护SALARY列。cols.extend（1）; cols（1）：= xs $ column_constraint_type（column_list =&gt; xs $ list（'salary'），privilege =&gt;'view_salary'）; sys.xs_data_security.create_policy（name =&gt;'employees_ds'，realm_constraint_list =&gt; realms，column_constraint_list =&gt; cols）;结束; /</pre><p>将数据安全策略应用于<code class="codeph">EMPLOYEES</code>表。
                     </p><pre class="oac_no_warn" dir="ltr">begin sys.xs_data_security.apply_object_policy（policy =&gt;'employees_ds'，schema =&gt;'hr'，object =&gt;'employees'）;结束; /</pre></div>
               </div><a id="DBFSG813"></a><div class="props_rev_3"><a id="GUID-9519B6E3-ACC5-403A-BF54-99862F01665D" name="GUID-9519B6E3-ACC5-403A-BF54-99862F01665D"></a><h4 id="DBFSG-GUID-9519B6E3-ACC5-403A-BF54-99862F01665D" class="sect4">关于验证Real Application Security对象</h4>
                  <div>
                     <p>创建这些Real Application Security对象后，请对其进行验证以确保它们都已正确配置。</p><pre class="oac_no_warn" dir="ltr">start if（sys.xs_diag.validate_workspace（））然后dbms_output.put_line（'所有配置都正确。“）; else dbms_output.put_line（'某些配置不正确。“）;万一;结束; /  -  XS $ VALIDATION_TABLE包含验证错误（如果有）。- 期望不选择任何行。从xs $ validation_table顺序中选择* 1,2,3,4;</pre></div>
               </div><a id="DBFSG814"></a><div class="props_rev_3"><a id="GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4" name="GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4"></a><h4 id="DBFSG-GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4" class="sect4">关于设置中间层相关配置</h4>
                  <div>
                     <p>设置稍后要使用的中间层配置。这涉及创建会话管理员<code class="codeph">hr_session</code> ，该管理员只具有Real Application Security管理权限（ <code class="codeph">XS_SESSION_ADMIN</code>和<code class="codeph">CREATE SESSION</code> ），但没有数据权限。会话管理员负责管理每个应用程序用户的Real Application Security会话。此外，它还涉及创建<code class="codeph">DISPATCHER</code>用户和密码，并授予此用户<code class="codeph">XSCONNECT</code>和<code class="codeph">XSDISPATCHER</code> Real Application Security管理员权限。
                     </p><pre class="oac_no_warn" dir="ltr">授予xs_session_admin，创建hr_session标识的hr_session会话;将创建会话授予hr_common标识的hr_common;</pre><p>为Java演示创建调度程序用户，以便为应用程序用户设置会话。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_user（name =&gt;'dispatcher'，schema =&gt;'HR'）; exec sys.xs_principal.set_password（'dispatcher'，'welcome1'）; exec sys.xs_principal.grant_roles（'dispatcher'，'XSCONNECT'）; exec sys.xs_principal.grant_roles（'dispatcher'，'xsdispatcher'）;</pre></div>
               </div>
            </div><a id="DBFSG815"></a><div class="props_rev_3"><a id="GUID-FA992EC6-83D5-4465-86D8-334EAA195C41" name="GUID-FA992EC6-83D5-4465-86D8-334EAA195C41"></a><h3 id="DBFSG-GUID-FA992EC6-83D5-4465-86D8-334EAA195C41" class="sect3">使用直接登录运行安全HR演示</h3>
               <div>
                  <div class="section">
                     <p>要运行HR Demo，首先以应用程序用户<code class="codeph">DAUSTIN</code>身份进行连接，该用户只具有<code class="codeph">EMPLOYEE</code>和<code class="codeph">IT_ENGINEER</code>应用程序角色。
                     </p><pre class="oac_no_warn" dir="ltr">conn daustin / welcome1;</pre><p>使用默认指示符星号（*******）代替列值，自定义SQL * Plus中安全列值的显示方式。</p><pre class="oac_no_warn" dir="ltr">在UNAUTH上设置SECUREDCOL *******</pre><p>执行查询以显示应用程序用户<code class="codeph">DAUSTIN</code>可以查看IT部门中的记录，但只能查看自己的<code class="codeph">SALARY</code>列。
                     </p><pre class="oac_no_warn" dir="ltr">通过电子邮件选择电子邮件，first_name，last_name，department_id，manager_id，员工薪水; SQL&gt;通过电子邮件从员工订单中选择email，first_name，last_name，department_id，manager_id，salary 2; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- --------- ---------- ------- AHUNOLD Alexander Hunold 60 102 ******* BERNST Bruce Ernst 60 103 ******* DAUSTIN David Austin 60 103 4800 DLORENTZ Diana Lorentz 60 103 ******* VPATABAL Valli Pataballa 60 103 *******选择了5行。
</pre><p>通过在未经授权的情况下显示空值代替应用程序用户的列值，并设置安全级别未知的列值，设置为SQL * Plus中显示安全列值的默认显示方式。</p><pre class="oac_no_warn" dir="ltr">SET SECUREDCOL OFF</pre><p>执行更新操作以显示应用程序用户无权更新记录。</p><pre class="oac_no_warn" dir="ltr">更新员工设置manager_id = 102 where email ='DAUSTIN'; SQL&gt; update employees set manager_id = 102 where email ='DAUSTIN'; 0行已更新。
</pre><p>执行查询以显示记录未更改。</p><pre class="oac_no_warn" dir="ltr">选择email，first_name，last_name，department_id，manager_id，员工的工资，其中email ='DAUSTIN'; SQL&gt;从email ='DAUSTIN'的员工中选择email，first_name，last_name，department_id，manager_id，salary 2; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- --------- ---------- ------- DAUSTIN David Austin 60 103 4800 1排选中。
</pre><p>以应用程序用户<code class="codeph">SMAVRIS</code>身份进行连接，该用户具有<code class="codeph">EMPLOYEE</code>和<code class="codeph">HR_REPRESENTATIVE</code>应用程序角色。
                     </p><pre class="oac_no_warn" dir="ltr">conn smavris / welcome1;</pre><p>执行查询以显示应用程序用户<code class="codeph">SMAVRIS</code>可以查看包括<code class="codeph">SALARY</code>列在内的所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资，其中department_id = 60或department_id = 40 order by department_id，email; SQL&gt;选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资2，其中department_id = 60或department_id = 40 3按department_id，电子邮件订购; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- --------- ---------- ------- SMAVRIS Susan Mavris 40 101 6500 AHUNOLD Alexander Hunold 60 102 9000 BERNST Bruce Ernst 60 103 6000 DAUSTIN David Austin 60 103 4800 DLORENTZ Diana Lorentz 60 103 4200 VPATABAL Valli Pataballa 60 103 4800 6行选择。
</pre><p>执行查询以显示应用程序用户<code class="codeph">SMAVRIS</code>可以访问所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">从员工中选择计数（*）; SQL&gt;从员工中选择count（*）; COUNT（*）---------- 107选择1行。
</pre><p>执行记录更新以显示应用程序用户<code class="codeph">SMAVRIS</code>可以更新记录。
                     </p><pre class="oac_no_warn" dir="ltr">更新员工设置manager_id = 102 where email ='DAUSTIN'; SQL&gt; update employees set manager_id = 102 where email ='DAUSTIN'; 1行更新。
</pre><p>执行查询以显示记录已更改。</p><pre class="oac_no_warn" dir="ltr">选择email，first_name，last_name，department_id，manager_id，员工的工资，其中email ='DAUSTIN'; SQL&gt;从email ='DAUSTIN'的员工中选择email，first_name，last_name，department_id，manager_id，salary 2; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- ---------- ---------- ------- DAUSTIN David Austin 60 102 4800 1行选中。
</pre><p>更新记录以将其更改回其原始状态。</p><pre class="oac_no_warn" dir="ltr">更新员工设置manager_id = 103 where email ='DAUSTIN'; SQL&gt; update employees set manager_id = 103 where email ='DAUSTIN'; 1行更新。
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG816"></a><div class="props_rev_3"><a id="GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A" name="GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A"></a><h3 id="DBFSG-GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A" class="sect3">运行连接到真实应用程序安全会话的安全HR演示</h3>
               <div>
                  <div class="section">
                     <p>要运行附加到Real Application Security会话的演示，Real Application Security管理员必须首先为应用程序用户创建会话并附加到该会话。在此过程中，创建一个变量来记住会话ID。</p><pre class="oac_no_warn" dir="ltr">connect hr_session / hr_session; var gsessionid varchar2（32）;声明sessionid raw（16）; begin sys.dbms_xs_sessions.create_session（'SMAVRIS'，sessionid）; ：gsessionid：= rawtohex（sessionid）; sys.dbms_xs_sessions.attach_session（sessionid，null）;结束 ; /</pre><p>显示当前用户。</p><pre class="oac_no_warn" dir="ltr">从双重选择xs_sys_context（'xs $ session'，'username'）; SQL&gt;从双重选择xs_sys_context（'xs $ session'，'username'）; XS_SYS_CONTEXT（'XS $ SESSION'，'USERNAME'）-------------------------------------- ------------------------------------------选择SMAVRIS 1行。
</pre><p>显示当前应用程序用户的已启用数据库和应用程序角色。</p><pre class="oac_no_warn" dir="ltr">从v $ xs_session_roles中选择role_name从session_roles中选择union的角色顺序为1;从v $ xs_session_roles union 2中选择SQL&gt; select role_name从session_roles中选择角色顺序为1; ROLE_NAME ------------------------------------------------- ------------------------------- DB_EMP EMPLOYEE HR_REPRESENTATIVE XSPUBLIC选择了4行。
</pre><p>执行查询以显示应用程序用户<code class="codeph">SMAVRIS</code>可以查看包括<code class="codeph">SALARY</code>列在内的所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资，其中department_id = 60或department_id = 40 order by department_id，email; SQL&gt;选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资2，其中department_id = 60或department_id = 40 3按department_id，电子邮件订购; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- --------- ---------- ------- SMAVRIS Susan Mavris 40 101 6500 AHUNOLD Alexander Hunold 60 102 9000 BERNST Bruce Ernst 60 103 6000 DAUSTIN David Austin 60 103 4800 DLORENTZ Diana Lorentz 60 103 4200 VPATABAL Valli Pataballa 60 103 4800 6行选择。
</pre><p>执行查询以显示应用程序用户<code class="codeph">SMAVRIS</code>可以访问所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">从员工中选择计数（*）; SQL&gt;从员工中选择count（*）; COUNT（*）---------- 107选择1行。
</pre><p>禁用<code class="codeph">HR_REPRESENTATIVE</code>角色。这将限制应用程序用户<code class="codeph">SMAVRIS</code>只能看到自己的记录。
                     </p><pre class="oac_no_warn" dir="ltr">exec dbms_xs_sessions.disable_role（'hr_representative'）;</pre><p>执行查询</p><pre class="oac_no_warn" dir="ltr">选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资，其中department_id = 60或department_id = 40 order by department_id，email; SQL&gt;选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资2，其中department_id = 60或department_id = 40 3按department_id，电子邮件订购; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- --------- ---------- ------- SMAVRIS苏珊马维里斯40 101 6500 1排选中。
</pre><p>启用<code class="codeph">HR_REPRESENTATIVE</code>角色，以便应用程序用户可以查看包括<code class="codeph">SALARY</code>列在内的所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">exec dbms_xs_sessions.enable_role（'hr_representative'）;</pre><p>执行查询以显示应用程序用户可以查看包括<code class="codeph">SALARY</code>列的所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资，其中department_id = 60或department_id = 40 order by department_id，email; SQL&gt;  -  SMAVRIS可以再次查看所有记录。SQL&gt;选择电子邮件，first_name，last_name，department_id，manager_id，来自员工的工资2，其中department_id = 60或department_id = 40 3按department_id，电子邮件订购; EMAIL FIRST_NAME LAST_NAME DEPARTMENT_ID MANAGER_ID SALARY ---------- --------------- --------------- ---- --------- ---------- ------- SMAVRIS Susan Mavris 40 101 6500 AHUNOLD Alexander Hunold 60 102 9000 BERNST Bruce Ernst 60 103 6000 DAUSTIN David Austin 60 103 4800 DLORENTZ Diana Lorentz 60 103 4200 VPATABAL Valli Pataballa 60 103 4800 6行选择。
</pre><p>执行查询以显示应用程序用户<code class="codeph">SMAVRIS</code>可以访问所有记录。
                     </p><pre class="oac_no_warn" dir="ltr">从员工中选择计数（*）; SQL&gt;从员工中选择count（*）; COUNT（*）---------- 107选择1行。
</pre><p>分离并销毁应用程序会话。</p><pre class="oac_no_warn" dir="ltr">声明sessionid raw（16）; begin sessionid：= hextoraw（：gsessionid）; sys.dbms_xs_sessions.detach_session; sys.dbms_xs_sessions.destroy_session（的sessionid）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG817"></a><div class="props_rev_3"><a id="GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B" name="GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B"></a><h3 id="DBFSG-GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B" class="sect3">运行安全HR演示清理脚本</h3>
               <div>
                  <div class="section">
                     <p>运行HR演示后，您可以运行清理脚本以删除所有Real Application Security组件。</p>
                     <p>首先，以Real Application Security Administrator身份连接，然后开始删除组件。</p><pre class="oac_no_warn" dir="ltr">define passwd =＆1 connect hr / hr;</pre><p>从<code class="codeph">EMPLOYEES</code>表中删除数据安全策略。
                     </p><pre class="oac_no_warn" dir="ltr">开始xs_data_security.remove_object_policy（policy =&gt;'employees_ds'，schema =&gt;'hr'，object =&gt;'employees'）;结束; /</pre><p>删除安全级别和ACL。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_security_class.delete_security_class（'hrprivs'，xs_admin_util.cascade_option）; exec sys.xs_acl.delete_acl（'emp_acl'，xs_admin_util.cascade_option）; exec sys.xs_acl.delete_acl（'it_acl'，xs_admin_util.cascade_option）; exec sys.xs_acl.delete_acl（'hr_acl'，xs_admin_util.cascade_option）;</pre><p>删除数据安全策略。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_data_security.delete_policy（'employees_ds'，xs_admin_util.cascade_option）;</pre><p>以<code class="codeph">SYS/</code>用户身份连接为<code class="codeph">SYSDBA</code> 。</p><pre class="oac_no_warn" dir="ltr">将sys /＆passwd连接为sysdba</pre><p>删除应用程序角色和应用程序用户。</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.delete_principal（'employee'，xs_admin_util.cascade_option）; exec sys.xs_principal.delete_principal（'hr_representative'，xs_admin_util.cascade_option）; exec sys.xs_principal.delete_principal（'it_engineer'，xs_admin_util.cascade_option）; exec sys.xs_principal.delete_principal（'smavris'，xs_admin_util.cascade_option）; exec sys.xs_principal.delete_principal（'daustin'，xs_admin_util.cascade_option）;</pre><p>删除数据库角色。</p><pre class="oac_no_warn" dir="ltr">drop role db_emp;</pre><p>删除Real Application Security会话管理员。</p><pre class="oac_no_warn" dir="ltr">drop user hr_session;</pre><p>删除用于连接数据库的普通用户。</p><pre class="oac_no_warn" dir="ltr">drop user hr_common;</pre><p>删除中间层使用的<code class="codeph">DISPATCHER</code>用户。
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.delete_principal（'dispatcher'，xs_admin_util.cascade_option）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG818"></a><div class="props_rev_3"><a id="GUID-36443370-D363-45F1-8F39-45FC8FA52FEB" name="GUID-36443370-D363-45F1-8F39-45FC8FA52FEB"></a><h3 id="DBFSG-GUID-36443370-D363-45F1-8F39-45FC8FA52FEB" class="sect3">在Java界面中运行安全HR演示</h3>
               <div>
                  <div class="section">
                     <p>有关在Java界面中运行Security HR Demo返回的两个查询的说明，请参阅<span class="q">“ <a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3">人力资源管理用例：Java实现</a> ”</span>中的<span class="q">“</span>输出”部分。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-73D8B4A8-43B1-47CF-B23F-07248275176F" name="GUID-73D8B4A8-43B1-47CF-B23F-07248275176F"></a><h3 id="DBFSG-GUID-73D8B4A8-43B1-47CF-B23F-07248275176F" class="sect3">关于使用RASADM运行安全HR演示</h3>
               <div>
                  <p>介绍如何使用RASADM使用图形用户界面创建Real Application Security数据安全策略。</p>
                  <p>Oracle数据库实际应用程序安全管理（RASADM）允许您使用图形用户界面创建Real Application Security数据安全策略。有关安装和配置RASADM的详细信息，请参阅<a href="../rasad/index.html" target="_blank">Real Application Security Administration</a> 。
                  </p>
                  <div class="p">本节介绍以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" title="描述如何运行RASADM应用程序。">关于运行RASADM应用程序</a></p>
                        </li>
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B" title="在设计阶段，您可以识别应用程序执行的所有任务，这些任务需要应用程序权限才能控制数据访问。">设计阶段</a></p>
                        </li>
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8" title="要使用RASADM开发数据安全策略，您必须遵循一些基本步骤。">发展趋势</a></p>
                        </li>
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72" title="介绍如何使用RASADM创建HR Demo应用程序。">关于使用RASADM创建HR演示</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" name="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC"></a><h4 id="DBFSG-GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" class="sect4">关于运行RASADM应用程序</h4>
                  <div>
                     <p>描述如何运行RASADM应用程序。</p>
                     <p>以下URL仅是一个示例，真实URL基于您当前的Application Express配置。确保提供了正确的URL。然后使用安装期间给出的相同密码以RASADM管理员身份登录。</p>
                     <p>要运行RASADM应用程序，您需要在浏览器中输入如下URL：https：//www.example.com：8080 / etcx / f？p = radadm。</p>
                     <p>Oracle建议您打开HTTPS。</p>
                     <p>您可以使用安装期间给出的密码以RASADM <code class="codeph">admin</code>用户或安装后创建的任何用户身份登录，如以下屏幕截图所示。
                     </p>
                     <div class="figure" id="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC__GUID-8772133B-FF97-498A-BE9B-7978A485C93C"><img src="img/ras_ui_login.png" height="390" width="387" alt="ras_ui_login.png的描述如下" title="ras_ui_login.png的描述如下" longdesc="img_text/ras_ui_login.html"><br><a href="img_text/ras_ui_login.html">插图描述ras_ui_login.png</a></div>
                     <!-- class="figure" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC__GUID-26AD9430-4D83-4F96-97FB-592F0842C242">欲获得更多信息</p>
                        <p>有关更多信息，请参阅以下资源：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Real Application Security论坛： <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbfsg&amp;id=ras_discussion_forum" target="_blank">数据库安全 - 一般</a></p>
                           </li>
                           <li>
                              <p>Real Application Security Documentation：请参阅<a href="../rasad/index.html" target="_blank"><span><cite>Oracle Database Real Application Security Administration</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B" name="GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B"></a><h4 id="DBFSG-GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B" class="sect4">设计阶段</h4>
                  <div>
                     <p>在设计阶段，您可以识别应用程序执行的所有任务，这些任务需要应用程序权限才能控制数据访问。</p>
                     <p>例如，在设计阶段，应用程序策略设计者必须确定：</p>
                     <ol>
                        <li>
                           <p>需要访问控制的应用程序级操作集。</p>
                        </li>
                        <li>
                           <p>表和视图的行和列，可以作为应用程序级操作的一部分进行访问。</p>
                        </li>
                        <li>
                           <p>可以执行这些操作的一组actor或principal（用户和角色）。</p>
                        </li>
                        <li>
                           <p>运行时应用程序会话属性标识一个或多个表的行。这些属性名称在选择要授权的行的谓词中使用，并且在应用程序执行期间设置它们的值。</p>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8" name="GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8"></a><h4 id="DBFSG-GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8" class="sect4">发展趋势</h4>
                  <div>
                     <p>要使用RASADM开发数据安全策略，您必须遵循一些基本步骤。</p>
                     <p>在开发阶段，作为RASADM管理员，您可以按照以下步骤使用RASADM开发数据安全策略：</p>
                     <ol>
                        <li>
                           <p>创建相应的应用程序用户和角色。如果使用外部目录服务器，请在目录服务器中创建应用程序用户和角色或用户组。请按照此过程在数据库中本机创建这些主体：</p>
                           <ol type="a">
                              <li>
                                 <p>如果需要，创建应用程序角色并将应用程序角色授予应用程序角色。请参阅有关创建应用程序角色的主题</p>
                              </li>
                              <li>
                                 <p>创建应用程序用户并向应用程序用户授予应用程序角色。请参阅有关创建应用程序用户的主题</p>
                              </li>
                              <li>
                                 <p>使用来自外部存储的主体时，配置目录服务器以获取用户和角色。请参阅有关配置的主题。</p>
                              </li>
                              <li>
                                 <p>对于外部Directory Server中的用户和角色，请管理将RASADM与Directory Server一起使用的参数设置。请参阅有关管理设置的主题。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>创建计划用于为应用程序开发安全策略的每个权限类。每个权限类由一个或多个适当的权限组成，您可以在ACL中引用这些权限，并将其授予应用程序用户和应用程序角色。每个权限类都通过ACL授权数据安全策略所需的应用程序级操作。请参阅有关创建应用程序权限类的主题。</p>
                        </li>
                        <li>
                           <p>创建一个或多个可在不同应用程序会话中使用的会话命名空间。这包括为会话命名空间定义其属性集（应用程序属性）及其关联的访问控制策略或ACL，您可以从列表或创建中进行选择。请参阅有关创建命名空间的主题。</p>
                        </li>
                        <li>
                           <p>通过将每个数据域与ACL相关联来创建数据安全策略，以便根据需要创建数据域授权和列授权。这个过程包括四个部分：</p>
                           <ol type="a">
                              <li>
                                 <p>策略信息 - 您选择要保护的对象和保护它的权限类，以及指定策略名称并选择策略模式。请参阅有关创建数据安全策略主题中的步骤3。</p>
                              </li>
                              <li>
                                 <p>列级别授权 - 选择要保护的列的名称，并选择要授予访问列的权限，该列与您在步骤3a中选择的权限类相关联。请参阅有关创建数据安全策略主题中的步骤4。</p>
                              </li>
                              <li>
                                 <p>数据领域授权 - 您创建一个SQL谓词来表示要保护的数据领域，并将每个谓词添加到数据领域授权列表中。然后选择或创建ACL以保护数据领域。接下来，通过选择适当的权限，创建要添加到由每个主体组成的权限授予列表以及是否允许授权或拒绝授权的权限授予。请参阅有关创建数据安全策略主题中的步骤5。</p>
                              </li>
                              <li>
                                 <p>应用策略 - 您可以应用，删除，启用或禁用您正在创建的数据安全策略，并选择指定某些应用选项，允许表或视图的所有者绕过此数据安全策略，以及是否强制执行语句类型这个政策。请参阅有关创建数据安全策略主题中的步骤6。</p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72" name="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72"></a><h4 id="DBFSG-GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72" class="sect4">关于使用RASADM创建HR演示</h4>
                  <div>
                     <p>介绍如何使用RASADM创建HR Demo应用程序。</p>
                     <p>首先，您应该运行RASADM应用程序并以<code class="codeph">ADMIN</code>用户身份登录，如<a href="real-application-security-hr-demo.html#GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" title="描述如何运行RASADM应用程序。">关于运行RASADM应用程序</a>中所述，并在以下屏幕截图中显示。
                     </p>
                     <div class="figure" id="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72__GUID-C04FE61D-54D4-4268-B5AD-86FD7ADF145D"><img src="img/ras_ui_home_part1.png" alt="ras_ui_home_part1.png的描述如下" title="ras_ui_home_part1.png的描述如下" longdesc="img_text/ras_ui_home_part1.html"><br><a href="img_text/ras_ui_home_part1.html">插图描述ras_ui_home_part1.png</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72__GUID-BC3768F6-7B19-4B07-865C-056EA29EC806"><img src="img/ras_ui_part2.png" alt="ras_ui_part2.png的描述如下" title="ras_ui_part2.png的描述如下" longdesc="img_text/ras_ui_part2.html"><br><a href="img_text/ras_ui_part2.html">插图描述ras_ui_part2.png</a></div>
                     <!-- class="figure" -->
                     <p>您将执行以下任务：</p>
                  </div>
                  <div class="sect4"><a id="GUID-F6632E85-1A85-4CCE-9CB5-C8D4EA097392" name="GUID-F6632E85-1A85-4CCE-9CB5-C8D4EA097392"></a><h5 id="DBFSG-GUID-F6632E85-1A85-4CCE-9CB5-C8D4EA097392" class="sect5">关于创建应用程序角色</h5>
                     <div>
                        <p>描述如何创建应用程序角色，特别是数据库DB_EMP角色。</p>
                        <p>您必须使用SQL * Plus创建数据库<code class="codeph">DB_EMP</code>角色，并在<code class="codeph">HR.EMPLOYEES</code>授予此角色<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>权限，如此代码段所示。
                        </p><pre class="oac_no_warn" dir="ltr">- 创建数据库角色DB_EMP并授予必要的表权限。- 此角色将用于向应用程序用户授予所需的对象权限。CREATE ROLE DB_EMP; GRANT SELECT，INSERT，UPDATE，DELETE ON HR.EMPLOYEES TO DB_EMP;</pre><p>有关更多信息，请参阅<a href="real-application-security-hr-demo-files.html#GUID-E7974492-8418-4DAD-8497-530F3A669064">hrdemo_setup.sql</a> 。
                        </p>
                        <p>下一个任务涉及创建以下应用程序角色： <code class="codeph">EMP_ROLE</code> ， <code class="codeph">IT_ROLE</code>和<code class="codeph">HR_ROLE</code> ，然后启用每个应用程序角色。
                        </p>
                        <p>此任务可以通过以下两种方式之一执行：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用RASADM创建这些应用程序角色。</p>
                           </li>
                           <li>
                              <p>使用外部目录服务器在目录服务器中创建应用程序角色。</p>
                           </li>
                        </ul>
                        <p>在任何一种情况下，对于HR Demo，将创建以下应用程序角色：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">EMP_ROLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">IT_ROLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">HR_ROLE</code></p>
                           </li>
                        </ul>
                        <p>最后，使用SQL * Plus，您必须为每个应用程序角色授予数据库<code class="codeph">DB_EMP</code>角色，如以下代码段所示。
                        </p><pre class="oac_no_warn" dir="ltr">- 将DB_EMP授予三个应用程序角色，因此它们具有访问该表所需的对象特权。GRANT DB_EMP TO EMP_ROLE; GRANT DB_EMP TO IT_ROLE; GRANT DB_EMP TO HR_ROLE;</pre><p>有关更多信息，请参阅<a href="real-application-security-hr-demo-files.html#GUID-E7974492-8418-4DAD-8497-530F3A669064">hrdemo_setup.sql</a> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>请参阅<a href="real-application-security-hr-demo.html#GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003" title="描述如何使用RASADM创建应用程序角色。">使用RASADM创建应用程序角色</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="sect5"><a id="GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003" name="GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003"></a><h6 id="DBFSG-GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003" class="sect6">使用RASADM创建应用程序角色</h6>
                        <div>
                           <p>描述如何使用RASADM创建应用程序角色。</p>
                           <div class="section">要开始，请单击“ <span class="bold">角色”</span>选项卡，然后单击“ <span class="bold">创建角色”</span> 。
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li><span>在“ <code class="codeph">Application Role</code>页面上，在以下字段中输入信息：</span><ol type="a">
                                    <li><span><span class="bold">角色名称：</span>输入<code class="codeph">EMP_ROLE</code> 。</span></li>
                                    <li><span><span class="bold">描述：</span>输入简要说明。</span></li>
                                    <li><span><span class="bold">角色类型：</span>选择默认值<code class="codeph">ROLE</code> 。</span></li>
                                    <li><span><span class="bold">默认启用：</span>选择<code class="codeph">Yes</code> 。</span></li>
                                 </ol>
                              </li>
                              <li><span>在“ <span class="bold">角色授予”</span>部分的“ <span class="bold">角色”</span>字段中，单击“ <span class="bold">^”</span>并从列表中选择“ <span class="bold">DB_EMP</span>角色”以将其添加为直接角色授予。</span></li>
                              <li><span>单击“ <span class="bold">应用更改”</span>以创建<code class="codeph">EMP_ROLE</code>应用程序角色。</span></li>
                              <li><span>单击角色<code class="codeph">EMP_ROLE</code>以查看此角色的编辑视图，如以下屏幕截图所示。</span></li>
                              <li><span>重复这些步骤以创建<code class="codeph">IT_ROLE</code>和<code class="codeph">HR_ROLE</code>应用程序角色。同样，没有应用程序角色可以授予这些应用程序角色。</span></li>
                           </ol>
                           <div class="section">
                              <div class="figure" id="GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003__GUID-9B3B7646-B174-443A-980D-E8EAC55E1DED"><img src="img/application_role.png" alt="application_role.png的描述如下" title="application_role.png的描述如下" longdesc="img_text/application_role.html"><br><a href="img_text/application_role.html">插图application_role.png的描述</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A99CAD2C-D0A8-46F0-8AD0-C4D15A95EBE9" name="GUID-A99CAD2C-D0A8-46F0-8AD0-C4D15A95EBE9"></a><h5 id="DBFSG-GUID-A99CAD2C-D0A8-46F0-8AD0-C4D15A95EBE9" class="sect5">关于创建应用程序用户</h5>
                     <div>
                        <p>描述创建应用程序用户并授予他们角色。</p>
                        <p>此任务涉及创建每个应用程序用户并授予每个应用程序用户各自的应用程序角色。</p>
                        <p>此任务可以通过以下两种方式之一执行：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用RASADM创建应用程序用户： <code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code> 。</p>
                              <p>接下来，执行以下授权：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>将应用程序角色<code class="codeph">EMP_ROLE</code>和<code class="codeph">IT_ROLE</code>授予<code class="codeph">DAUSTIN</code> 。</p>
                                 </li>
                                 <li>
                                    <p>将应用程序角色<code class="codeph">EMP_ROLE</code>和<code class="codeph">HR_ROLE</code>授予<code class="codeph">SMAVRIS</code> 。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>使用外部目录服务器在目录服务器中创建应用程序用户或应用程序用户组。</p>
                           </li>
                        </ul>
                        <p>在任何一种情况下，对于此HR演示，将创建以下应用程序用户：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DAUSTIN</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">SMAVRIS</code></p>
                           </li>
                        </ul>
                        <p>接下来，您将执行以下授权：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将应用程序角色<code class="codeph">EMP_ROLE</code>授予用户<code class="codeph">DAUSTIN</code>和<code class="codeph">SMAVRIS</code> 。</p>
                           </li>
                           <li>
                              <p>将应用程序角色<code class="codeph">IT_ROLE</code>授予用户<code class="codeph">DAUSTIN</code> 。</p>
                           </li>
                           <li>
                              <p>将应用程序角色<code class="codeph">HR_ROLE</code>授予用户<code class="codeph">SMAVRIS</code> 。</p>
                           </li>
                        </ul>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>请参阅<a href="real-application-security-hr-demo.html#GUID-81090CE9-0F71-4778-8A90-6C0D24509005" title="描述使用RASADM创建应用程序用户。">使用RASADM创建应用程序用户</a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="sect5"><a id="GUID-81090CE9-0F71-4778-8A90-6C0D24509005" name="GUID-81090CE9-0F71-4778-8A90-6C0D24509005"></a><h6 id="DBFSG-GUID-81090CE9-0F71-4778-8A90-6C0D24509005" class="sect6">使用RASADM创建应用程序用户</h6>
                        <div>
                           <p>描述使用RASADM创建应用程序用户。</p>
                           <div class="section">要开始使用，请单击“ <span class="bold">用户”</span>选项卡，然后单击“ <span class="bold">创建用户”</span> 。
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li><span>在“ <span class="bold">应用程序用户”</span>部分的“ <code class="codeph">Manage User</code>页面上，在以下字段中输入信息：</span><ol type="a">
                                    <li><span><span class="bold">名称：</span>输入<code class="codeph">DAUSTIN.</code></span></li>
                                    <li><span><span class="bold">描述：</span>输入简要说明。</span></li>
                                    <li><span><span class="bold">默认架构：</span>选择<code class="codeph">HR</code> 。</span></li>
                                    <li><span><span class="bold">角色默认启用：</span>选择<code class="codeph">Yes</code> 。</span></li>
                                    <li><span><span class="bold">状态：</span>选择<code class="codeph">Active</code> 。</span></li>
                                 </ol>
                              </li>
                              <li><span>在“ <span class="bold">角色授予”</span>部分中，选择要授予应用程序用户<code class="codeph">daustin</code>的应用程序角色。通过单击<span class="bold">^</span>并选择<code class="codeph">EMP_ROLE</code> ，在<span class="bold">Role：</span>字段中输入信息。</span></li>
                              <li><span>单击“ <span class="bold">添加”</span>以授予此角色。重复此过程以将<code class="codeph">IT_ROLE</code>授予<code class="codeph">DAUSTIN</code> 。</span></li>
                              <li><span>单击<span class="bold">Apply Changes</span>以创建应用程序用户<code class="codeph">DAUSTIN</code> 。</span></li>
                              <li><span>单击用户<code class="codeph">DAUSTIN</code>以查看此用户的编辑视图，如以下屏幕截图所示。</span></li>
                              <li><span>重复这些步骤以将<code class="codeph">EMP_ROLE</code>和<code class="codeph">HR_ROLE</code>授予应用程序用户<code class="codeph">SMAVRIS</code> 。</span></li>
                           </ol>
                           <div class="section">
                              <div class="figure" id="GUID-81090CE9-0F71-4778-8A90-6C0D24509005__GUID-DE5DA579-D02C-432A-96CE-D100A28ADC91"><img src="img/application_user__daustin.png" alt="application_user__daustin.png的描述如下" title="application_user__daustin.png的描述如下" longdesc="img_text/application_user__daustin.html"><br><a href="img_text/application_user__daustin.html">插图application_user__daustin.png的描述</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                           <div class="section"></div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-1A2F1C33-17A8-4A9A-98F7-47D7FB8A1863" name="GUID-1A2F1C33-17A8-4A9A-98F7-47D7FB8A1863"></a><h5 id="DBFSG-GUID-1A2F1C33-17A8-4A9A-98F7-47D7FB8A1863" class="sect5">关于创建数据安全策略</h5>
                     <div>
                        <p>描述创建数据安全策略的流程。</p>
                        <p>此任务涉及创建HRDEMO数据安全策略。这包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>输入政策信息。</p>
                           </li>
                           <li>
                              <p>创建<code class="codeph">HRPRIVS</code>特权级别及其<code class="codeph">VIEW_SALARY</code>特权。
                              </p>
                           </li>
                           <li>
                              <p>创建<code class="codeph">SALARY</code>列授权并选择要应用于该列的<code class="codeph">HRPRIVS</code>特权级别。
                              </p>
                           </li>
                           <li>
                              <p>创建由三个数据域组成的数据领域授权，一个用于员工访问，一个用于IT访问，一个用于HR访问以及每个关联的ACL及其各自定义的权限授予每个主体以控制其行访问。</p>
                           </li>
                           <li>
                              <p>通过启用<code class="codeph">HRDEMO</code>数据安全策略来应用它。
                              </p>
                           </li>
                        </ul>
                        <p>本节包括以下主题：</p>
                     </div>
                     <div class="sect5"><a id="GUID-D5A48389-58F8-486B-A721-0130A77F2800" name="GUID-D5A48389-58F8-486B-A721-0130A77F2800"></a><h6 id="DBFSG-GUID-D5A48389-58F8-486B-A721-0130A77F2800" class="sect6">输入政策信息</h6>
                        <div>
                           <p>描述使用RASADM应用程序输入数据安全策略信息。</p>
                           <div class="section">要创建数据安全策略，请单击“ <span class="bold">策略”</span>选项卡，然后单击“ <span class="bold">创建”</span>以显示“ <span class="bold">策略信息”</span>页面。
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>在“ <span class="bold">策略信息”</span>页面上，在以下字段中输入策略信息：</span><ol type="a">
                                    <li><span><span class="bold">策略架构：</span>单击<span class="bold">^</span>并选择<code class="codeph">HR</code> 。</span></li>
                                    <li><span><span class="bold">策略名称：</span>输入名称<code class="codeph">Employees_DS</code> 。</span></li>
                                    <li><span><span class="bold">描述：</span>输入此策略的简要说明。</span></li>
                                    <li><span><span class="bold">权限类：</span>单击“ <span class="bold">新建”</span>以创建<code class="codeph">HRPRIVS</code>权限类。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span>在“ <span class="bold">权限类”</span>页面上，输入以下信息：</span><ol type="a">
                                    <li><span>对于<span class="bold">特权等级</span> 。特权级别名称：输入<code class="codeph">HRPRIVS</code> 。</span></li>
                                    <li><span>对于<span class="bold">特权等级</span> 。描述：输入简要说明。</span></li>
                                    <li><span>对于<span class="bold">应用程序权限</span> 。权限名称：输入名称<code class="codeph">VIEW_SALARY</code> 。</span></li>
                                    <li><span>对于<span class="bold">应用程序权限</span> 。描述：输入简要说明。</span></li>
                                    <li><span>对于<span class="bold">应用程序权限</span> 。隐含权限：单击“ <code class="codeph">Select</code> 。</span></li>
                                    <li><span>单击“ <span class="bold">添加”</span>将<code class="codeph">VIEW_SALARY</code>权限添加到“应用程序权限”列表中。请参见下图。</span></li>
                                    <li><span>单击“ <span class="bold">应用更改”</span>以保存<code class="codeph">HRPRIVS</code>权限类。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span>在同一<span class="bold">Privilege Class</span>页面上，输入以下信息：</span><ol type="a">
                                    <li><span><span class="bold">受保护对象的架构：</span>单击<span class="bold">^</span>并选择<code class="codeph">HR</code> 。</span></li>
                                    <li><span><span class="bold">受保护对象：</span>单击<span class="bold">^</span>并选择<code class="codeph">EMPLOYEES</code> 。</span></li>
                                 </ol>
                                 <div>以下屏幕截图显示了<code class="codeph">Employees_DS</code>数据安全策略的“ <span class="bold">策略信息”</span>页面。
                                    <div class="figure" id="GUID-D5A48389-58F8-486B-A721-0130A77F2800__GUID-2DCC3EBD-9B73-41A4-902E-1795852A793B"><img src="img/hr_hrprivs_privileges.png" alt="hr_hrprivs_privileges.png的描述如下" title="hr_hrprivs_privileges.png的描述如下" longdesc="img_text/hr_hrprivs_privileges.html"><br><a href="img_text/hr_hrprivs_privileges.html">说明hr_hrprivs_privileges.png的描述</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span>单击“ <span class="bold">下一步”</span>转到“ <code class="codeph">Column Authorization</code>页面。</span></li>
                           </ol>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB" name="GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB"></a><h6 id="DBFSG-GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB" class="sect6">创建列授权</h6>
                        <div>
                           <p>描述创建数据安全策略的列授权部分。</p>
                           <ol>
                              <li class="stepexpand"><span>在“ <span class="bold">列授权”</span>页面上，输入以下信息以创建列授权：</span><ol type="a">
                                    <li><span><span class="bold">列：</span>单击<span class="bold">^</span>并选择<code class="codeph">SALARY</code> 。</span></li>
                                    <li><span><span class="bold">权限：</span>单击<span class="bold">^</span>并选择<code class="codeph">VIEW_SALARY</code> 。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span>单击“ <span class="bold">添加”</span>将列授权添加到“ <span class="bold">列约束”</span>列表中。</span><div>以下屏幕截图显示了<span class="bold">Column Authorization</span>页面，其中创建的<code class="codeph">SALARY</code>列授权受<code class="codeph">VIEW_SALARY</code>特权保护。
                                    <div class="figure" id="GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB__GUID-C69EEAEF-AD42-40CB-BC4F-62A7D18AB87F"><img src="img/column_authorization.png" alt="下面是column_authorization.png的描述" title="下面是column_authorization.png的描述" longdesc="img_text/column_authorization.html"><br><a href="img_text/column_authorization.html">插图描述column_authorization.png</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span>单击“ <span class="bold">下一步”</span>转到“ <span class="bold">数据域授权”</span>页面。</span></li>
                           </ol>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E" name="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E"></a><h6 id="DBFSG-GUID-022C5D0B-3919-4C78-837D-18ECB950A85E" class="sect6">创建数据领域授权</h6>
                        <div>
                           <p>描述创建数据安全策略的数据领域授权部分。</p>
                           <div class="section">将创建三个数据领域授权：<ul style="list-style-type:disc">
                                 <li>
                                    <p>允许授予<code class="codeph">IT_ROLE</code>的用户查看IT部门中除<code class="codeph">SALARY</code>列之外的记录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>允许授予<code class="codeph">EMP_ROLE</code>的用户查看自己的记录，包括<code class="codeph">SALARY</code>列</p>
                                 </li>
                                 <li>
                                    <p>允许授予<code class="codeph">HR_ROLE</code>的用户查看和更新所有记录，包括<code class="codeph">SALARY</code>列。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>在“ <span class="bold">数据域授权”</span>页面上，在以下字段中输入信息以创建数据域，以允许IT部门成员访问其部门记录，不包括<code class="codeph">SALARY</code>列：</span><ol type="a">
                                    <li><span><span class="bold">描述：</span>输入简要说明。</span></li>
                                    <li><span><span class="bold">SQL谓词：</span>单击<span class="bold">&gt;</span>以展开<span class="bold">Predicate Builder</span>字段。在以下字段中输入信息：</span></li>
                                    <li><span><span class="bold">列名称：</span>单击<span class="bold">^</span>以选择<code class="codeph">DEPARTMENT</code>列名称。</span></li>
                                    <li><span><span class="bold">运算符：</span>单击<span class="bold">^</span>以选择<code class="codeph">=</code>运算符。</span></li>
                                    <li><span><span class="bold">值：</span>输入值<code class="codeph">60</code> 。</span></li>
                                    <li><span><span class="bold">AND / OR：</span>忽略此选项。</span></li>
                                    <li><span>单击“ <span class="bold">应用”</span>以创建SQL谓词。</span></li>
                                 </ol>
                                 <div>以下屏幕显示已完成的IT部门数据领域授权。
                                    <div class="figure" id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E__GUID-24F74958-67FB-4CA8-AD79-9A4E2F7B0910"><img src="img/it_department_dr.png" alt="下面是it_department_dr.png的描述" title="下面是it_department_dr.png的描述" longdesc="img_text/it_department_dr.html"><br><a href="img_text/it_department_dr.html">it_department_dr.png插图的描述</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span><span class="bold">ACL名称：</span>单击<span class="bold">+</span>以创建<code class="codeph">IT_ACL</code> 。在以下字段中输入信息：</span><ol type="a">
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">ACL名称：</span>输入<code class="codeph">IT_ACL</code> 。</span></li>
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">说明：</span>输入简要说明。</span></li>
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">ACL继承：</span>忽略此字段。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ，Principal：单击<span class="bold">&lt; -</span>选择主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Type：</span>单击<span class="bold">User</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Store：</span>单击“ <span class="bold">数据库”</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Filter：</span>输入<code class="codeph">DAUSTIN</code>并单击<span class="bold">Search</span> 。然后单击“ <span class="bold">选择”</span>以选择<span class="bold">DAUSTIN</span>作为主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Privilege：</span>选择默认选项<span class="bold">SELECT</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Grant：</span>选择<span class="bold">Grant</span> 。</span></li>
                                    <li><span>单击“ <span class="bold">添加”</span>以添加此权限授予。</span></li>
                                 </ol>
                                 <div>以下屏幕截图显示了已完成的<code class="codeph">IT_ACL</code> ACL及其授予IT_ROLE角色的SELECT权限的权限授予。
                                    <div class="figure" id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E__GUID-C003BEED-8F21-4592-B2E0-CAE4961B9FEE"><img src="img/hr_it_acl.png" alt="hr_it_acl.png的描述如下" title="hr_it_acl.png的描述如下" longdesc="img_text/hr_it_acl.html"><br><a href="img_text/hr_it_acl.html">hr_it_acl.png插图的描述</a></div>
                                    <!-- class="figure" --> 
                                 </div>
                              </li>
                              <li class="stepexpand"><span><span class="bold">Data Realm Grant：</span>单击<span class="bold">Add</span>以授予此数据域。</span></li>
                              <li class="stepexpand"><span>在“ <span class="bold">数据域授权”</span>页面上，单击“ <span class="bold">添加”</span>以开始添加下一个数据域授权。在以下字段中输入信息以创建数据领域，以允许员工访问其自己的记录，包括<code class="codeph">SALARY</code>列。</span><ol type="a">
                                    <li><span><span class="bold">描述：</span>输入简要说明。</span></li>
                                    <li><span><span class="bold">SQL谓词：</span>输入<code class="codeph">UPPER(email) = XS_SYS_CONTEXT('XS$SESSION','USERNAME')</code> 。</span></li>
                                    <li><span>单击“ <span class="bold">预览”</span>以查看查询结果，并查看它是否符合预期。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">ACL名称：</span>单击<span class="bold">+</span>以创建<code class="codeph">EMP_ACL</code> 。在以下字段中输入信息：</span><ol type="a">
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">ACL名称：</span>输入<code class="codeph">EMP_ACL</code></span></li>
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">说明：</span>输入简要说明。</span></li>
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">ACL继承：</span>忽略此字段。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ，Principal：单击<span class="bold">&lt; -</span>选择主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Type：</span>单击<span class="bold">User</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Store：</span>单击“ <span class="bold">数据库”</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Filter：</span>输入<code class="codeph">DAUSTIN</code>并单击<span class="bold">Search</span> 。然后单击“ <span class="bold">选择”</span>以选择<span class="bold">DAUSTIN</span>作为主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Privilege：</span>选择默认选项<span class="bold">SELECT</span></span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Grant：</span>选择<span class="bold">Grant</span> 。</span></li>
                                    <li><span>单击“ <span class="bold">添加”</span>以添加此权限授予。</span></li>
                                    <li><span>为用户<code class="codeph">SMAVRIS</code>重复这两个相同的授权，因此用户<code class="codeph">SMAVRIS</code>被授予<code class="codeph">SELECT</code>和<code class="codeph">VIEW_SALARY</code>应用程序特权。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">Data Realm Grant：</span>单击<span class="bold">Add</span>以授予此数据域。</span></li>
                              <li class="stepexpand"><span>在“ <span class="bold">数据域授权”</span>页面上，单击“ <span class="bold">添加”</span>以开始添加下一个数据域授权。在以下字段中输入信息以创建数据领域，以允许HR人员访问和更新所有员工记录，包括<code class="codeph">SALARY</code>列。</span><ol type="a">
                                    <li><span><span class="bold">描述：</span>输入简要说明。</span></li>
                                    <li><span><span class="bold">SQL谓词：</span>输入<code class="codeph">UPPER(email) = XS_SYS_CONTEXT('XS$SESSION','USERNAME')</code> 。</span></li>
                                    <li><span>单击“ <span class="bold">预览”</span>以查看查询结果，并查看它是否符合预期。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">ACL名称：</span>单击<span class="bold">+</span>以创建<code class="codeph">HR_ACL</code> 。在以下字段中输入信息：</span><ol type="a">
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">ACL名称：</span>输入<code class="codeph">HR_ACL</code></span></li>
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">说明：</span>输入简要说明。</span></li>
                                    <li><span>对于<span class="bold">ACL控制列表（ACL）</span> ， <span class="bold">ACL继承：</span>忽略此字段。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ，Principal：单击<span class="bold">&lt; -</span>选择主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Type：</span>单击<span class="bold">User</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Store：</span>单击“ <span class="bold">数据库”</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Filter：</span>输入<code class="codeph">SMAVRIS</code>并单击<span class="bold">Search</span> 。然后单击“ <span class="bold">选择”</span>以选择<code class="codeph">SMAVRIS</code>作为主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Privilege：</span>选择默认选项<span class="bold">SELECT</span></span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Grant：</span>选择<span class="bold">Grant</span> 。</span></li>
                                    <li><span>重复此<span class="bold">权限授予</span>步骤以将<code class="codeph">UPDATE</code>授予<code class="codeph">SMAVRIS</code> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ，Principal：单击<span class="bold">&lt; -</span>选择主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Type：</span>单击<span class="bold">User</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Store：</span>单击“ <span class="bold">数据库”</span> 。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Principal Filter：</span>输入<code class="codeph">SMAVRIS</code>并单击<span class="bold">Search</span> 。然后单击“ <span class="bold">选择”</span>以选择<code class="codeph">SMAVRIS</code>作为主体。</span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Privilege：</span>选择<span class="bold">UPDATE</span></span></li>
                                    <li><span>对于<span class="bold">Privilege Grants</span> ， <span class="bold">Grant：</span>选择<span class="bold">Grant</span> 。</span></li>
                                    <li><span>重复此步骤两次以将<code class="codeph">INSERT</code>和<code class="codeph">DELETE</code>授予<code class="codeph">SMAVRIS</code> 。</span></li>
                                    <li><span>单击“ <span class="bold">添加”</span>以添加此权限授予。</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">Data Realm Grant：</span>单击<span class="bold">Add</span>将此数据领域授权<span class="bold">添加</span>到数据领域授权列表。</span></li>
                           </ol>
                           <div class="section">以下屏幕截图显示了三个已完成的数据领域授权和已完成的列授权。
                              <div class="figure" id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E__GUID-B987DB7F-28C4-411B-8DDC-578441D1E3F3"><img src="img/employee_ds_policy.png" alt="employee_ds_policy.png的描述如下" title="employee_ds_policy.png的描述如下" longdesc="img_text/employee_ds_policy.html"><br><a href="img_text/employee_ds_policy.html">employee_ds_policy.png插图的描述</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C" name="GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C"></a><h6 id="DBFSG-GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C" class="sect6">适用政策</h6>
                        <div>
                           <p>描述应用数据安全策略。</p>
                           <div class="section">要应用<code class="codeph">Employees_DS</code>数据安全策略，请执行以下步骤：</div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>在“ <span class="bold">应用策略”</span>页面上，通过选择“ <code class="codeph">Enable</code>以启用此数据安全策略，在“ <span class="bold">应用策略”</span>字段中输入信息。</span><div>以下屏幕截图显示了<span class="bold">策略</span>页面上已完成的<code class="codeph">Employees_DS</code>数据安全策略，其策略已设置为已启用。
                                    <div class="figure" id="GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C__GUID-7972B77E-7E29-447C-A6D5-70335B715E43"><img src="img/apply_policy.png" alt="apply_policy.png的描述如下" title="apply_policy.png的描述如下" longdesc="img_text/apply_policy.html"><br><a href="img_text/apply_policy.html">说明apply_policy.png的说明</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span>单击“ <span class="bold">应用更改”</span>以创建<code class="codeph">Employees_DS</code>数据安全策略。</span></li>
                           </ol>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04835.using-sql_statements-in-oci.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter discusses the concepts and steps involved in processing SQL statements with Oracle Call Interface."></meta>
      <meta name="description" content="This chapter discusses the concepts and steps involved in processing SQL statements with Oracle Call Interface."></meta>
      <title>在OCI中使用SQL语句</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter discusses the concepts and steps involved in processing SQL statements with Oracle Call Interface."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="data-types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="binding-and-defining-in-oci.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="binding-and-defining-in-oci.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在OCI中使用SQL语句</li>
            </ol>
            <a id="GUID-3F20EDC9-D436-4A54-9698-4FA95988A819" name="GUID-3F20EDC9-D436-4A54-9698-4FA95988A819"></a><a id="LNOCI040"></a>
            
            <h2 id="LNOCI-GUID-3F20EDC9-D436-4A54-9698-4FA95988A819" class="sect2"><span class="enumeration_chapter">6</span>在OCI中使用SQL语句</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论使用Oracle Call Interface处理SQL语句时涉及的概念和步骤。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07" title="OCI程序最常见的任务之一是接受和处理SQL语句。">SQL语句处理概述</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8" title="通过使用语句prepare调用和任何必要的绑定调用，准备执行SQL和PL / SQL语句。">关于准备报表</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70" title="大多数DML语句和一些查询（例如具有WHERE子句的查询）都需要程序将数据作为SQL或PL / SQL语句的一部分传递给Oracle数据库。">关于在OCI中绑定占位符</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-C71878A2-B089-4666-9898-AA56A54AD03D" title="OCI应用程序使用OCIStmtExecute（）单独执行预准备语句。">关于执行语句</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-DDB109DD-52EB-4AA8-A69A-34015F8D5D6E" title="如果您的OCI应用程序正在处理查询，您可能需要获取有关选择列表中的项目的更多信息。">关于描述选择列表项</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-F5FB3DBA-9FDA-45FC-AF5D-2D8D4C436296" title="Query语句将数据从数据库返回给您的应用程序。">关于在OCI中定义输出变量</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6" title="如果OCI应用程序已处理查询，则通常需要在语句完成执行后使用OCIStmtFetch2（）获取结果。">关于获取结果</a></p>
                  </li>
                  <li>
                     <p><a href="using-sql_statements-in-oci.html#GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2" title="游标是结果集中的当前位置。">关于在OCI中使用可滚动游标</a></p>
                  </li>
               </ul>
            </div><a id="LNOCI16338"></a><a id="LNOCI16337"></a><div class="props_rev_3"><a id="GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07" name="GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07"></a><h3 id="LNOCI-GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07" class="sect3"><span class="enumeration_section">6.1</span> SQL语句处理概述</h3>
               <div>
                  <p>OCI程序最常见的任务之一是接受和处理SQL语句。</p>
                  <p>第3章“OCI编程基础知识”讨论了任何OCI应用程序涉及的基本步骤。本章更详细地介绍了在OCI程序中处理SQL语句所涉及的特定任务。</p>
                  <p>本节概述了接受和处理SQL语句所涉及的具体步骤。</p>
                  <p>分配必要的句柄并连接到Oracle数据库后，请按照<a href="using-sql_statements-in-oci.html#GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07__I448548">图6-1</a>中<a href="using-sql_statements-in-oci.html#GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07__I448548">所示</a>的步骤操作。
                  </p>
                  <div class="figure" id="GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07__I448548">
                     <p class="titleinfigure">图6-1处理SQL语句的步骤</p><img src="img/lnoci020.png" alt="下面是图6-1的描述" title="下面是图6-1的描述" longdesc="img_text/lnoci020.html"><br><a href="img_text/lnoci020.html">“图6-1处理SQL语句的步骤”的说明</a></div>
                  <!-- class="figure" -->
                  <ol>
                     <li>
                        <p>准备声明。使用<code class="codeph">OCIStmtPrepare2()</code>定义应用程序请求。<code class="codeph">OCIStmtPrepare2()</code>是一个加强版<code class="codeph">OCIStmtPrepare()</code>这是推出了支持语句缓存。从Oracle Database 12 <code class="codeph">c</code>第2版（12.2）开始，不推荐使用<code class="codeph">OCIStmtPrepare()</code> 。
                        </p>
                     </li>
                     <li>
                        <p>如有必要，绑定占位符。对于具有输入变量的DML语句和查询，请执行以下一个或多个绑定调用，以将每个输入变量（或PL / SQL输出变量）或数组的地址绑定到语句中的每个占位符。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OCIBindByPos2()</code>或<code class="codeph">OCIBindByPos()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIBindByName2()</code>或<code class="codeph">OCIBindByName()</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIBindObject（）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIBindDynamic（）</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIBindArrayOfStruct（）</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>通过调用<code class="codeph">OCIStmtExecute()</code>执行该语句。对于DDL语句，不需要进一步的步骤。
                        </p>
                     </li>
                     <li>
                        <p>如有必要，使用<code class="codeph">OCIParamGet()</code>和<code class="codeph">OCIAttrGet()</code>描述选择列表项。如果在编译时已知选择列表项的数量和每个项的属性（例如其长度和数据类型），则不需要这是可选步骤。
                        </p>
                     </li>
                     <li>
                        <p>如有必要，定义输出变量。对于查询，执行一个或多个对<code class="codeph">OCIDefineByPos2()</code>或<code class="codeph">OCIDefineByPos()</code> ， <code class="codeph">OCIDefineObject()</code> ， <code class="codeph">OCIDefineDynamic()</code>或<code class="codeph">OCIDefineArrayOfStruct()</code>定义调用， <code class="codeph">OCIDefineByPos2()</code>为SQL语句中的每个选择列表项定义输出变量。请注意，您不使用define调用来定义匿名PL / SQL块中的输出变量。绑定数据时执行此操作。
                        </p>
                     </li>
                     <li>
                        <p>如有必要，通过调用<code class="codeph">OCIStmtFetch2()</code>获取查询结果。
                        </p>
                     </li>
                  </ol>
                  <p>完成这些步骤后，应用程序可以释放已分配的句柄，然后从服务器分离，或者它可以处理其他语句。</p>
                  <div class="infoboxnote" id="GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07__GUID-8C43E4A5-00DA-417F-AEAC-A0925D1B1E4E">
                     <p class="notep1">注意：</p>
                     <p>OCI程序不再需要明确的解析步骤。如果必须解析语句，则该步骤在执行时发生，这意味着8.0版或更高版本的应用程序必须为DML和DDL语句发出执行命令。</p>
                  </div>
                  <p>以下部分详细介绍了每个步骤。</p>
                  <div class="infoboxnote" id="GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07__GUID-B29CCA9E-01EC-4666-B12F-3B98118CE6FE">
                     <p class="notep1">注意：</p>
                     <p>步骤顺序的一些变化是可能的。例如，如果在编译时已知返回值的数据类型和长度，则可以在执行步骤之前执行define步骤。</p>
                  </div>
                  <p>如果您的应用程序必须执行以下任何操作，则可能需要超出前面列出的步骤：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>启动和管理多个交易</p>
                     </li>
                     <li>
                        <p>管理多个执行线程</p>
                     </li>
                     <li>
                        <p>执行分段插入，更新或提取</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-8D6FD01B-5B8A-49A2-BFD8-71B404529F07__GUID-F46AE940-96E8-4121-8B87-26A230E94D09">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performance-topics.html#GUID-4947CAE8-1F00-4897-BB2B-7F921E495175" title="语句缓存是指为每个会话提供和管理语句缓存的功能。">OCI中的语句缓存</a></p>
                        </li>
                        <li>
                           <p><a href="oci-programming-basics.html#GUID-4CFB8AF7-EF05-4E0F-847F-2D0710E552C5" title="本章介绍了使用OCI进行编程所涉及的概念和过程。">OCI编程基础</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a>或<a href="deprecated-oci-functions.html#GUID-FD74B639-8B97-4A5A-BC3E-269CE59345CA" title="从Oracle Database 12c第2版（12.2）开始，不推荐使用此功能。">OCIStmtPrepare（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-5C505821-323D-473D-825B-448C8D9A6702" title="在SQL语句或PL / SQL块中创建程序变量和占位符之间的关联。当客户端上的实际长度超过UB2MAXVAL时，在处理数据类型时使用此调用。">OCIBindByPos2（）</a>或<a href="bind-define-describe-functions.html#GUID-D28DF5A7-3C75-4E52-82F7-A5D6D5714E69" title="在SQL语句或PL / SQL块中创建程序变量和占位符之间的关联。">OCIBindByPos（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-55C47708-5468-4106-89BE-1AB60861D037" title="在SQL语句或PL / SQL块中创建程序变量和占位符之间的关联。当客户端上的实际长度超过UB2MAXVAL时，在处理数据类型时使用此函数。">OCIBindByName2（）</a>或<a href="bind-define-describe-functions.html#GUID-CD63DF78-2178-4727-A896-B9673C4A37F0" title="在SQL语句或PL / SQL块中创建程序变量和占位符之间的关联。">OCIBindByName（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-384B5D31-165B-4661-A334-8C2B5E475AEF" title="设置命名数据类型（对象）绑定所需的其他属性。">OCIBindObject（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-030270CB-346A-412E-B3B3-556DD6947BE2" title="注册用户回调以进行动态数据分配。">OCIBindDynamic（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-E83BF668-88FC-4F31-A950-3580B79588E0" title="设置静态数组绑定的跳过参数。">OCIBindArrayOfStruct（）</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                        </li>
                        <li>
                           <p><a href="handle-and-descriptor-functions.html#GUID-35D2FF91-139B-4A5C-97C8-8BC29866CCA4" title="返回由describe句柄或语句句柄中的position指定的参数的描述符。">OCIParamGet（）</a></p>
                        </li>
                        <li>
                           <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-74939FB5-919E-4D24-B327-AFB532435061" title="将选择列表中的项与类型和输出数据缓冲区相关联。当客户端上的实际长度超过UB2MAXVAL时，在处理数据类型时使用此调用。">OCIDefineByPos2（）</a>或<a href="bind-define-describe-functions.html#GUID-CFE5AA54-DEBC-42D3-8A27-AFF1E7815691" title="将选择列表中的项与类型和输出数据缓冲区相关联。">OCIDefineByPos（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-F211198D-C88C-493B-A65E-2C2A95E6197B" title="设置命名数据类型或REF定义所需的其他属性。">OCIDefineObject（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-DD404526-9615-4E44-B790-1D17396C82A9" title="如果在OCIDefineByPos（）或OCIDefineByPos2（）中选择了OCI_DYNAMIC_FETCH模式，则设置所需的其他属性。">OCIDefineDynamic（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-D3F74828-5DA7-48AD-A170-120AD547DEB3" title="指定静态数组定义所需的其他属性，用于结构数组（多行，多列）提取。">OCIDefineArrayOfStruct（）</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNOCI16340"></a><a id="LNOCI16339"></a><div class="props_rev_3"><a id="GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8" name="GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8"></a><h3 id="LNOCI-GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8" class="sect3"><span class="enumeration_section">6.2</span>关于准备报表</h3>
               <div>
                  <p>通过使用语句prepare调用和任何必要的绑定调用，准备执行SQL和PL / SQL语句。</p>
                  <p>在此阶段，应用程序指定SQL或PL / SQL语句，并将语句中的关联占位符绑定到要执行的数据。客户端库分配存储以维护为执行准备的语句。</p>
                  <p>应用程序请求使用<code class="codeph">OCIStmtPrepare2()</code>调用准备执行SQL或PL / SQL语句，并将先前分配的语句句柄传递给此调用。这是一个完全本地的呼叫，不需要往返服务器。此时语句与特定服务器之间没有关联。
                  </p>
                  <p>在请求调用之后，应用程序可以在语句句柄上调用<code class="codeph">OCIAttrGet()</code> ，将<code class="codeph">OCI_ATTR_STMT_TYPE</code>传递给<code class="codeph">attrtype</code>参数，以确定准备了哪种类型的SQL语句。<a href="using-sql_statements-in-oci.html#GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8__CIHEHCEJ" title="该表有2列。第1列是属性值，第2列描述其对应的SQL语句类型。">表6-1</a>中列出了可能的属性值和相应的语句类型。
                  </p>
                  <div class="tblformal" id="GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8__CIHEHCEJ">
                     <p class="titleintable">表6-1 OCI_ATTR_STMT_TYPE值和语句类型</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="OCI_ATTR_STMT_TYPE值和语句类型" width="100%" border="1" summary="This table has 2 columns. Column 1 is the attribute value and column 2 describes its corresponding SQL statement type." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="45%" id="d70425e967">属性值</th>
                              <th align="left" valign="bottom" width="55%" id="d70425e970">声明类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e975" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_SELECT</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e975 d70425e970 ">
                                 <p><code class="codeph">SELECT</code>语句</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e985" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_UPDATE</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e985 d70425e970 ">
                                 <p><code class="codeph">UPDATE</code>声明</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e995" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_DELETE</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e995 d70425e970 ">
                                 <p><code class="codeph">DELETE</code>语句</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1005" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_INSERT</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1005 d70425e970 ">
                                 <p><code class="codeph">INSERT</code>语句</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1015" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_CREATE</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1015 d70425e970 ">
                                 <p><code class="codeph">CREATE</code>语句</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1025" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_DROP</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1025 d70425e970 ">
                                 <p><code class="codeph">DROP</code>语句</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1035" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_ALTER</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1035 d70425e970 ">
                                 <p><code class="codeph">ALTER</code>声明</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1045" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_BEGIN</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1045 d70425e970 ">
                                 <p><code class="codeph">BEGIN</code> ......（PL / SQL）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1055" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_DECLARE</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1055 d70425e970 ">
                                 <p><code class="codeph">DECLARE</code> ......（PL / SQL）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1065" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_CALL</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1065 d70425e970 ">
                                 <p><code class="codeph">CALL</code> ......（PL / SQL）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d70425e1075" headers="d70425e967 ">
                                 <p><code class="codeph">OCI_STMT_MERGE</code></p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d70425e1075 d70425e970 ">
                                 <p><code class="codeph">MERGE</code> ......（PL / SQL）</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>本节包括以下主题： <a href="using-sql_statements-in-oci.html#GUID-1FC53A56-7859-4099-8DB8-7674FB2470D5" title="通过将语句句柄与服务器的相应服务上下文句柄重新关联，可以在运行时在多个服务器上执行准备好的应用程序请求。">关于在多个服务器上使用预准备语句</a></p>
                  <div class="infoboxnotealso" id="GUID-91AF021D-9FCD-4A4D-A647-2F2AB5B448B8__GUID-B0A1D3C7-C225-412D-9AEC-2987E671F870">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></p>
                        </li>
                        <li>
                           <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                        </li>
                        <li>
                           <p><a href="oci-programming-basics.html#GUID-46090C93-4BC4-4E88-AA09-3E9B716917A3" title="PL / SQL是Oracle对SQL语言的过程扩展。">关于在OCI程序中使用PL / SQL</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16341"></a><div class="props_rev_3"><a id="GUID-1FC53A56-7859-4099-8DB8-7674FB2470D5" name="GUID-1FC53A56-7859-4099-8DB8-7674FB2470D5"></a><h4 id="LNOCI-GUID-1FC53A56-7859-4099-8DB8-7674FB2470D5" class="sect4"><span class="enumeration_section">6.2.1</span>关于在多个服务器上使用准备好的语句</h4>
                  <div>
                     <p>通过将语句句柄与服务器的相应服务上下文句柄重新关联，可以在运行时在多个服务器上执行准备好的应用程序请求。</p>
                     <p>在建立新关联时，有关当前服务上下文和语句句柄关联的所有信息都将丢失。</p>
                     <p>例如，考虑管理多个服务器的应用程序，例如网络管理器。在许多情况下，可能必须对多个服务器执行相同的<code class="codeph">SELECT</code>语句以检索要显示的信息。OCI允许网络管理器应用程序准备一次<code class="codeph">SELECT</code>语句并针对多个服务器执行它。在将准备好的语句与下一个服务器重新关联之前，它必须从每个服务器获取所有必需的行。
                     </p>
                     <div class="infoboxnote" id="GUID-1FC53A56-7859-4099-8DB8-7674FB2470D5__GUID-D891C149-5A14-49C1-8554-F2402CF925D4">
                        <p class="notep1">注意：</p>
                        <p>如果必须在同一服务器上频繁地重新执行预准备语句，则为另一个服务上下文准备新语句会更有效。</p>
                     </div>
                  </div>
               </div>
            </div><a id="LNOCI72596"></a><a id="LNOCI16342"></a><div class="props_rev_3"><a id="GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70" name="GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70"></a><h3 id="LNOCI-GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70" class="sect3"><span class="enumeration_section">6.3</span>关于OCI中的绑定占位符</h3>
               <div>
                  <p>大多数DML语句和一些查询（例如具有<code class="codeph">WHERE</code>子句的<code class="codeph">WHERE</code> ）都需要程序将数据作为SQL或PL / SQL语句的一部分传递给Oracle数据库。
                  </p>
                  <p>这些数据可以是常量或文字，在编译程序时已知。例如，以下将数据库添加到数据库的SQL语句包含多个文字，例如“BESTRY”和2365：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO VALUES（2365，'BESTRY'，'PROGRAMMER'，2000,20）</pre><p>将这样的语句编码到应用程序中将严重限制其有用性。每次将新员工添加到数据库时，都必须更改语句并重新编译程序。为了使程序更加灵活，您可以编写程序，以便用户可以在运行时提供输入数据。</p>
                  <p>当您准备包含要在运行时提供的输入数据的SQL语句或PL / SQL块时，SQL语句或PL / SQL块中的占位符标记必须提供数据的位置。例如，以下SQL语句包含五个占位符（由前面的冒号（ <code class="codeph">:ename</code> ）表示），用于显示程序必须提供输入数据的位置。
                  </p><pre class="oac_no_warn" dir="ltr">INSERT INTO emp VALUES（：empno，：ename，：job，：sal，：deptno）</pre><p>您可以在任何<code class="codeph">DELETE</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">SELECT</code>或<code class="codeph">UPDATE</code>语句中或PL / SQL块中的输入变量中使用占位符，在语句中可以使用表达式或文字值的任何位置。在PL / SQL中，占位符也可用于输出变量。
                  </p>
                  <p>占位符不能用于表示其他Oracle对象，例如表。例如，以下内容<span class="italic">不是</span> <code class="codeph">emp</code>占位符的有效用法：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO：emp VALUES（12345，'OERTEL'，'WRITER'，50000,30）</pre><p>对于SQL语句或PL / SQL块中的每个占位符，必须调用OCI例程，该例程将程序中变量的地址绑定到该占位符。当语句执行时，数据库将获取程序放入输入变量或绑定变量的数据，并使用SQL语句将其传递给服务器。</p>
                  <p>绑定用于非查询操作中的输入和输出变量。在<a href="using-sql_statements-in-oci.html#GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70__CIHHHEFJ">示例6-1中</a> ，应绑定变量<code class="codeph">empno_out</code> ， <code class="codeph">ename_out</code> ， <code class="codeph">job_out</code> ， <code class="codeph">sal_out</code>和<code class="codeph">deptno_out</code> 。这些是outbinds（与常规的inbinds相对）。
                  </p>
                  <div class="example" id="GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70__CIHHHEFJ">
                     <p class="titleinexample">例6-1在非查询操作中绑定输入和输出变量</p><pre class="oac_no_warn" dir="ltr">INSERT INTO emp VALUES（：empno，：ename，：job，：sal，：deptno）RETURNING（empno，ename，job，sal，deptno）INTO（：empno_out，：ename_out，：job_out，：sal_out，：deptno_out）</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>本节包括以下主题： <a href="using-sql_statements-in-oci.html#GUID-A0A6D04B-C60D-4499-9951-873A6DD7D0D2" title="列出并描述形成占位符的规则。">占位符规则</a></p>
                     <div class="infoboxnotealso" id="GUID-CB348BD8-9A45-4921-B397-ADFE96B75C70__GUID-4E05D7F7-1F88-4456-AFF9-1261EA92761B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="binding-and-defining-in-oci.html#GUID-4C2BD7BB-5768-4E8A-82BF-84FB0030A8C5" title="本章介绍OCI中的绑定和定义。">OCI中的绑定和定义，</a>以获取有关实现绑定操作的详细信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNOCI16343"></a><div class="props_rev_3"><a id="GUID-A0A6D04B-C60D-4499-9951-873A6DD7D0D2" name="GUID-A0A6D04B-C60D-4499-9951-873A6DD7D0D2"></a><h4 id="LNOCI-GUID-A0A6D04B-C60D-4499-9951-873A6DD7D0D2" class="sect4"><span class="enumeration_section">6.3.1</span>占位符规则</h4>
                  <div>
                     <p>列出并描述形成占位符的规则。</p>
                     <p>形成占位符的规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>第一个字符是冒号（“：”）。</p>
                        </li>
                        <li>
                           <p>冒号之后是下划线（“_”），A到Z，a到z或0到9的组合。但是，冒号后面的第一个字符不能是下划线。</p>
                        </li>
                        <li>
                           <p>这些字母必须仅来自英文字母，并且只有冒号后的前30个字符才有意义。该名称不区分大小写。</p>
                        </li>
                        <li>
                           <p>占位符只能包含冒号后的数字。如果只是数字，则占位符必须小于65536。如果名称以数字开头，则只允许数字。</p>
                        </li>
                        <li>
                           <p>连字符（“ - ”）是不允许的。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNOCI16344"></a><div class="props_rev_3"><a id="GUID-C71878A2-B089-4666-9898-AA56A54AD03D" name="GUID-C71878A2-B089-4666-9898-AA56A54AD03D"></a><h3 id="LNOCI-GUID-C71878A2-B089-4666-9898-AA56A54AD03D" class="sect3"><span class="enumeration_section">6.4</span>关于执行语句</h3>
               <div>
                  <p>OCI应用程序使用<code class="codeph">OCIStmtExecute()</code>单独执行<code class="codeph">OCIStmtExecute()</code>准备语句。
                  </p>
                  <p>当OCI应用程序执行查询时，它从Oracle数据库接收与查询规范匹配的数据。在数据库中，数据以Oracle定义的格式存储。返回结果时，OCI应用程序可以请求将数据转换为特定的主机语言格式，并存储在特定的输出变量或缓冲区中。</p>
                  <p>对于查询的选择列表中的每个项目，OCI应用程序必须定义输出变量以接收查询的结果。define步骤指示缓冲区的地址和要检索的数据类型。</p>
                  <div class="infoboxnote" id="GUID-C71878A2-B089-4666-9898-AA56A54AD03D__GUID-E82F5F0B-DD20-49FE-8E4D-8E4AACE9D0E1">
                     <p class="notep1">注意：</p>
                     <p>如果在调用<code class="codeph">OCIStmtExecute()</code>之前为<code class="codeph">SELECT</code>语句定义了输出变量，则会将<code class="codeph">iters</code>参数指定的行数直接提取到定义的输出缓冲区中，并预取与预取计数等效的其他行。如果没有其他行，则完成提取而不调用<code class="codeph">OCIStmtFetch2()</code> 。
                     </p>
                  </div>
                  <p><span class="bold"></span>对于非查询，在数组操作期间执行语句的次数等于<code class="codeph">iters - rowoff</code> ，其中<code class="codeph">rowoff</code>是绑定数组中的偏移量，并且也是<code class="codeph">OCIStmtExecute()</code>调用的参数。
                  </p>
                  <p>例如，如果将10个项的数组绑定到<code class="codeph">INSERT</code>语句的占位符，并且将<code class="codeph">iters</code>设置为10，则当<code class="codeph">rowoff</code>为零时，所有10个项都将插入到单个执行调用中。如果<code class="codeph">rowoff</code>设置为2，则仅插入8个项目。
                  </p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF" title="OCIStmtExecute（）调用提供了确保多个服务上下文在数据库提交的数据的相同一致快照上运行的能力。">执行快照</a></p>
                        </li>
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-AE8B3835-50CD-49DB-925A-740F31E7FD3B" title="您可以为OCIStmtExecute（）调用指定多种模式。">OCIStmtExecute（）的执行模式</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-C71878A2-B089-4666-9898-AA56A54AD03D__GUID-DD1BFE0C-6D36-4D60-8C8A-38A9591A5568">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                        </li>
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-F5FB3DBA-9FDA-45FC-AF5D-2D8D4C436296" title="Query语句将数据从数据库返回给您的应用程序。">关于在OCI中定义输出变量</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16345"></a><div class="props_rev_3"><a id="GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF" name="GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF"></a><h4 id="LNOCI-GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF" class="sect4"><span class="enumeration_section">6.4.1</span>执行快照</h4>
                  <div>
                     <p><code class="codeph">OCIStmtExecute()</code>调用提供了确保多个服务上下文在数据库提交的数据的相同一致快照上运行的能力。
                     </p>
                     <p>这是通过获取一个<code class="codeph">OCIStmtExecute()</code>调用的<code class="codeph">snap_out</code>参数的内容并将该值作为下一个<code class="codeph">OCIStmtExecute()</code>调用的<code class="codeph">snap_in</code>参数传递来实现的。
                     </p>
                     <div class="infoboxnote" id="GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF__GUID-5D019542-B9C5-4317-B3E3-22C4866E490D">
                        <p class="notep1">注意：</p>
                        <p>即使两个调用都使用相同的快照，一个服务上下文中的未提交数据<span class="italic">也不</span>会对另一个上下文可见。
                        </p>
                     </div>
                     <p><code class="codeph">snap_out</code>和<code class="codeph">snap_in</code>参数的数据类型是<code class="codeph">OCISnapshot</code> 。OCISnapshot是使用<code class="codeph">OCIDescriptorAlloc()</code>函数分配的OCI快照描述符。
                     </p>
                     <p>调用<code class="codeph">OCIStmtExecute()</code>时无需指定<span class="italic">快照</span> 。以下示例代码显示了一个基本执行，其中<code class="codeph">snapsho</code> t参数作为<code class="codeph">NULL</code>传递。</p><pre class="oac_no_warn" dir="ltr">checkerr（errhp，OCIStmtExecute（svchp，stmthp，errhp，（ub4）1，（ub4）0，（OCISnapshot *）NULL，（OCISnapshot *）NULL，OCI_DEFAULT））;</pre><div class="infoboxnote" id="GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF__GUID-ED0C13AA-D35C-4C64-B371-ED41963F76B8">
                        <p class="notep1">注意：</p>
                        <p>用户开发的<code class="codeph">checkerr()</code>函数评估来自OCI应用程序的返回码。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A4D09C66-C273-46C3-9EC8-0BCFBE4E61CF__GUID-B93B608C-7050-492B-9882-B314A1F8445C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-E9EF2766-E078-49A7-B1D1-738E4BA4814F" title="分配存储以保存描述符或LOB定位符。">OCIDescriptorAlloc（）</a></p>
                           </li>
                           <li>
                              <p><a href="oci-programming-basics.html#GUID-82F35CC7-A79D-42CE-BF90-DE63FCBAAB7C" title="OCI描述符和定位符是不透明的数据结构，用于维护特定于数据的信息。">OCI描述符</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNOCI16346"></a><div class="props_rev_3"><a id="GUID-AE8B3835-50CD-49DB-925A-740F31E7FD3B" name="GUID-AE8B3835-50CD-49DB-925A-740F31E7FD3B"></a><h4 id="LNOCI-GUID-AE8B3835-50CD-49DB-925A-740F31E7FD3B" class="sect4"><span class="enumeration_section">6.4.2</span> OCIStmtExecute（）的执行模式</h4>
                  <div>
                     <p>您可以为<code class="codeph">OCIStmtExecute()</code>调用指定多种模式。
                     </p>
                     <p>本节介绍OCIStmtExecute（）调用。有关参数<code class="codeph">mode</code>其他值，请参阅<code class="codeph">OCIStmtExecute()</code> 。
                     </p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-sql_statements-in-oci.html#GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D" title="OCI提供执行阵列DML操作的能力。">使用批处理错误模式</a></p>
                           </li>
                           <li>
                              <p><a href="using-sql_statements-in-oci.html#GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D" title="显示如何使用批处理错误执行模式。">批错误模式的示例</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AE8B3835-50CD-49DB-925A-740F31E7FD3B__GUID-0BB59F1B-28D3-406F-8C78-F32F8F735B52">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                     </div>
                  </div><a id="LNOCI16347"></a><div class="props_rev_3"><a id="GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D" name="GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D"></a><h5 id="LNOCI-GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D" class="sect5"><span class="enumeration_section">6.4.2.1</span>使用批处理错误模式</h5>
                     <div>
                        <p>OCI提供执行阵列DML操作的能力。</p>
                        <div class="section">
                           <p>例如，应用程序可以使用单个语句执行来处理<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句的数组。如果其中一个操作由于服务器的错误而失败，例如唯一约束违规，则阵列操作终止，并且OCI返回错误。数组中剩余的所有行都将被忽略。然后，应用程序必须重新执行数组的其余部分，如果遇到更多错误，则会再次完成整个过程，这会导致额外的往返。
                           </p>
                           <p>为了便于处理阵列DML操作，OCI提供<span class="italic">批处理错误模式</span> （也称为<span class="italic">增强型DML阵列</span>功能）。如果存在一个或多个错误，则在<code class="codeph">OCIStmtExecute()</code>调用中指定的此模式可简化DML阵列处理。在此模式下，OCI尝试插入，更新或删除所有行，并收集有关发生的任何错误的信息。然后，应用程序可以检索错误信息并重新执行在第一次调用期间失败的任何DML操作。这样，在第一次调用中尝试阵列中的所有DML操作，并且可以在第二次调用中重新发出任何失败的操作。
                           </p>
                           <div class="infoboxnote" id="GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D__GUID-9D30323B-B0AC-4A05-906E-7D038B3A6561">
                              <p class="notep1">注意：</p>
                              <p>此功能仅适用于与8.1或更高版本服务器上运行的8.1版或更高版本OCI库链接的应用程序。还必须重新编码应用程序以考虑本节中描述的新程序逻辑。</p>
                           </div>
                           <p>此模式使用如下：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>用户指定<code class="codeph">OCI_BATCH_ERRORS</code>作为<code class="codeph">OCIStmtExecute()</code>调用的<span class="italic">模式</span>参数。</span></li>
                           <li class="stepexpand"><span>在使用<code class="codeph">OCIStmtExecute()</code>执行数组DML操作后，应用程序可以通过在语句句柄上调用<code class="codeph">OCIAttrGet()</code>来检索操作期间遇到的错误数，以检索<code class="codeph">OCI_ATTR_NUM_DML_ERRORS</code>属性，如以下代码示例所示。</span><div>
                                 <p>调用OCIAttrGet（）以检索在数组DML操作期间遇到的错误数</p><pre class="oac_no_warn" dir="ltr">ub4 num_errs; OCIAttrGet（stmtp，OCI_HTYPE_STMT，＆num_errs，0，OCI_ATTR_NUM_DML_ERRORS，errhp）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>应用程序使用<code class="codeph">OCIParamGet()</code>及其行信息从传递给<code class="codeph">OCIStmtExecute()</code>调用的错误句柄中提取每个错误。要检索信息，应用程序必须为<code class="codeph">OCIParamGet()</code>调用分配一个额外的新错误句柄，并使用批处理错误信息填充新的错误句柄。应用程序通过在新错误句柄上调用<code class="codeph">OCIAttrGet()</code> ，使用<code class="codeph">OCIErrorGet()</code>获取每个错误的语法，并将行偏移到发生错误的DML数组中。</span><div>
                                 <p>例如，在检索到<code class="codeph">num_errs</code> amount之后，应用程序可以发出以下代码示例中显示的以下调用。
                                 </p>
                                 <p>在数组DML操作后检索有关每个错误的信息</p><pre class="oac_no_warn" dir="ltr">OCIError errhndl，errhp2; for（i = 0; i &lt;num_errs; i ++）{OCIParamGet（errhp，OCI_HTYPE_ERROR，errhp2，（void **）＆errhndl，i）; OCIAttrGet（errhndl，OCI_HTYPE_ERROR，＆row_offset，0，OCI_ATTR_DML_ROW_OFFSET，errhp2）; OCIErrorGet（...，errhndl，...）;</pre><p>执行此操作后，应用程序可以使用从批处理错误中检索到的诊断信息来更正阵列中相应条目的绑定信息。一旦纠正或更新了适当的绑定缓冲区，应用程序就可以重新执行相关的DML语句。</p>
                                 <p>因为在编译时无法确定第一次执行中哪些行可能导致错误，所以后续DML的绑定应该通过在运行时传入适当的缓冲区来动态完成。在第一个DML操作完成的数组绑定中使用的绑定缓冲区可以重用。</p>
                                 <div class="infoboxnotealso" id="GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D__GUID-05BC5278-5CD5-4A9D-AC40-741044179C67">
                                    <p class="notep1">也可以看看：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                                       </li>
                                       <li>
                                          <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                                       </li>
                                       <li>
                                          <p><a href="handle-and-descriptor-functions.html#GUID-35D2FF91-139B-4A5C-97C8-8BC29866CCA4" title="返回由describe句柄或语句句柄中的position指定的参数的描述符。">OCIParamGet（）</a></p>
                                       </li>
                                       <li>
                                          <p><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></p>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="LNOCI72599"></a><a id="LNOCI16348"></a><div class="props_rev_2"><a id="GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D" name="GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D"></a><h5 id="LNOCI-GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D" class="sect5"><span class="enumeration_section">6.4.2.2</span>批错误模式示例</h5>
                     <div>
                        <p>显示如何使用批处理错误执行模式。</p>
                        <div class="section">
                           <p><a href="using-sql_statements-in-oci.html#GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D__CIHGDAIE">例6-2</a>显示了如何使用批处理错误执行模式的示例。在此示例中，假设您有一个应用程序将五行（具有两列，类型为<code class="codeph">NUMBER</code>和<code class="codeph">CHAR</code> ）插入表中。此外，假设在初始DML操作中仅成功插入了两行（1和3）。然后，用户继续纠正数据（第一次插入错误的数据）并发布带有更正数据的更新。用户使用语句处理<code class="codeph">stmtp1</code>和<code class="codeph">stmtp2</code>分别发出<code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>语句。
                           </p>
                           <p>在<a href="using-sql_statements-in-oci.html#GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D__CIHGDAIE">示例6-2中</a> ， <code class="codeph">OCIBindDynamic()</code>与回调一起使用，因为用户在编译时不知道哪些行可能返回错误。使用回调，您只需通过回调上下文传递存储在<code class="codeph">row_off</code>的错误行号，并仅发送必须更新或更正的行。可以在<code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>语句执行之间共享相同的绑定缓冲区。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D__CIHGDAIE">
                           <p class="titleinexample">示例6-2使用批处理错误执行模式</p><pre class="oac_no_warn" dir="ltr">OCIBind * bindp1 [2]，* bindp2 [2]; ub4 num_errs，row_off [MAXROWS]，number [MAXROWS] = {1,2,3,4,5}; char grade [MAXROWS] = {'A'，'B'，'C'，'D'，'E'}; OCIError * errhp2; OCIError * errhndl [MAXROWS]; .../ *数组绑定所有位置* / OCIBindByPos（stmtp1，＆bindp1 [0]，errhp，1，（void *）＆number [0]，sizeof（number [0]），SQLT_INT，（void *）0，（ub2 * ）0，（ub2 *）0,0，（ub4 *）0，OCI_DEFAULT）; OCIBindByPos（stmtp1，＆bindp1 [1]，errhp，2，（void *）＆grade [0]，sizeof（grade [0]），SQLT_CHR，（void *）0，（ub2 *）0，（ub2 *）0， 0，（ub4 *）0，OCI_DEFAULT）; / *执行数组INSERT * / OCIStmtExecute（svchp，stmtp1，errhp，5,0,0,0，OCI_BATCH_ERRORS）; / *获取错误数量。使用不同的错误处理程序errhp2，以便*更改errhp的状态* / OCIAttrGet（stmtp1，OCI_HTYPE_STMT，＆num_errs，0，OCI_ATTR_NUM_DML_ERRORS，errhp2）; if（num_errs）{/ *用户可以执行以下两种操作之一：1）分配尽可能多的* / / *错误句柄作为错误数量，并在以后释放所有句柄* / / *;或者2）分配一个错误的句柄并重用* / / *相同的句柄用于所有错误* / for（i = 0; i &lt;num_errs; i ++）{OCIHandleAlloc（（void *）envhp，（void **）＆errhndl [ i]，（ub4）OCI_HTYPE_ERROR，0，（void *）0）; OCIParamGet（errhp，OCI_HTYPE_ERROR，errhp2，＆errhndl [i]，i）; OCIAttrGet（errhndl [i]，OCI_HTYPE_ERROR，＆row_off [i]，0，OCI_ATTR_DML_ROW_OFFSET，errhp2）; / * get server diagnostics * / OCIErrorGet（...，errhndl [i]，...）;修改绑定数据* / OCIBindByPos（stmtp2，＆bindp2 [0]，errhp，1，（void *）0，sizeof（grade [0]），SQLT_INT，（void *）0，（ub2 *） 0，（ub2 *）0,0，（ub4 *）0，OCI_DATA_AT_EXEC）; OCIBindByPos（stmtp2，＆bindp2 [1]，errhp，2，（void *）0，sizeof（number [0]），SQLT_DAT，（void *）0，（ub2 *）0，（ub2 *）0,0，（ ub4 *）0，OCI_DATA_AT_EXEC）; / *为每个绑定句柄注册回调，row_off和position *信息可以通过context *指针传递给回调函数。* / OCIBindDynamic（bindp2 [0]，errhp，ctxp1，my_callback，0,0）; OCIBindDynamic（bindp2 [1]，errhp，ctxp2，my_callback，0,0）; / *执行UPDATE语句* / OCIStmtExecute（svchp，stmtp2，errhp，num_errs，0,0,0，OCI_BATCH_ERRORS）; ...
</pre><div class="infoboxnotealso" id="GUID-4DC077FC-7F6C-4EB0-830C-530642A46B9D__GUID-81862A58-233D-4AA2-9416-7BA91BEF2EDF">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="bind-define-describe-functions.html#GUID-030270CB-346A-412E-B3B3-556DD6947BE2" title="注册用户回调以进行动态数据分配。">OCIBindDynamic（）</a></p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNOCI16349"></a><div class="props_rev_3"><a id="GUID-DDB109DD-52EB-4AA8-A69A-34015F8D5D6E" name="GUID-DDB109DD-52EB-4AA8-A69A-34015F8D5D6E"></a><h3 id="LNOCI-GUID-DDB109DD-52EB-4AA8-A69A-34015F8D5D6E" class="sect3"><span class="enumeration_section">6.5</span>关于描述选择列表项</h3>
               <div>
                  <p>如果您的OCI应用程序正在处理查询，您可能需要获取有关选择列表中的项目的更多信息。</p>
                  <p>对于直到运行时才知道其内容的动态查询尤其如此。在这种情况下，程序可能需要获得有关选择列表项的数据类型和列长度的信息。此信息是定义可能接收查询结果的输出变量所必需的。</p>
                  <p>例如，考虑一个查询，其中程序没有关于<code class="codeph">employees</code>表中列的先验信息：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM员工</pre><p>有两种类型的描述：隐式和显式。</p>
                  <p><span class="italic">隐式描述</span>不需要任何特殊的调用来检索描述从服务器获取信息，但特别要求<span class="italic">是</span>必要的访问信息。隐式描述允许应用程序<span class="italic">在执行</span>语句<span class="italic">之后</span>获取选择列表信息作为语句句柄的属性，而不进行特定的描述调用。它被称为<span class="italic">隐式，</span>因为不需要描述调用。描述信息随声明执行而<span class="italic">免费</span>提供。
                  </p>
                  <p><span class="italic">显式描述</span>要求应用程序调用特定函数以从服务器获取描述信息。应用程序可以隐式或显式地描述选择列表（查询）。必须明确描述其他模式元素。
                  </p>
                  <p>您可以在执行之前显式描述查询，方法是将<code class="codeph">OCI_DESCRIBE_ONLY</code>指定为<code class="codeph">OCIStmtExecute()</code>的模式，该模式不执行该语句，但返回选择列表描述。出于性能原因，Oracle建议应用程序使用隐式describe，它随标准语句执行而<span class="italic">免费</span>提供。
                  </p>
                  <p><code class="codeph">OCIDescribeAny()</code>调用的显式描述获取有关模式对象的信息，而不是选择列表。
                  </p>
                  <p>在所有情况下，通过读取句柄属性来检索有关列和数据类型的特定信息。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2" title="执行SQL语句后，有关选择列表的信息可用作语句句柄的属性。不需要明确的描述调用。">隐含的描述</a></p>
                        </li>
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-1FE451DB-FB37-4966-8334-AE04E532D27C" title="通过将OCI_DESCRIBE_ONLY指定为OCIStmtExecute（）的模式，可以在执行前显式描述查询">显式描述查询</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-DDB109DD-52EB-4AA8-A69A-34015F8D5D6E__GUID-D17C0F49-3D91-4601-87CC-D3CEAA8285AA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="describing-schema-metadata.html#GUID-CED0D15A-D873-43F7-A5B2-51FC0662C250" title="Performs an explicit describe of schema objects and their subschema objects.The OCIDescribeAny() call limits information returned to the basic information and stops expanding a node if it amounts to another describe operation.What to be aware of when performing describe operations.The OCI_ATTR_TYPECODE attribute returns typecodes that represent the types supplied by the user when a new type is created using the CREATE TYPE statement.To describe type objects, it is necessary to initialize the OCI process in object mode.The column attribute OCI_ATTR_PRECISION can be returned using an implicit describe with OCIStmtExecute() and an explicit describe with OCIDescribeAny().The OCI_ATTR_LIST_ARGUMENTS attribute for type methods represents second-level arguments for the method.This section describes the attributes and handles that belong to different parameters. Lists and describes the type-specific attributes for parameters for a table or view. Lists and describes the type-specific attributes when a parameter is for a procedure or function.Lists and describes the attributes when a parameter is for a package.Lists and describes the attributes when a parameter is for a type. Lists and describes the attributes when a parameter is for an attribute of a type.Lists and dsescribes the attributes when a parameter is for a method of a type.Lists and describes the attributes when a parameter is for a collection type.Lists and describes the attributes when a parameter is for a synonym.Lists and describes the attributes when a parameter is for a sequence.Lists and describes the attributes when a parameter is for a column of a table or view.Lists and describes the attributes when a parameter is for an argument of a procedure or function.Lists and describes the attributes when the parameter is for a list of columns, arguments, and subprograms, or fields of a package record type.Lists and describes the attributes when a parameter is for a schema type.Lists and describes the attributes when a parameter is for a database type.Lists and describes the attributes when a parameter is for a rule.Lists and describes the attributes when a parameter is for a rule set.Lists and describes the attributes when a parameter is for an evaluation context.Lists and describes the attributes when a parameter is for a table alias.Lists and describes the attributes when a parameter is for a variable.Lists and describes the attributes when a parameter is for a name-value pair.Query and column information are supported with character-length semantics.If the database column was created using character-length semantics, then the implicit describe information contains the character length, the byte length, and a flag indicating how the database column was created.Explicit describes of tables have three attributes: OCI_ATTR_DATA_SIZE, OCI_ATTR_CHAR_SIZE, and OCI_ATTR_CHAR_USED.Character-length semantics depends on the release of the server or client. It is best described when both server and client are Oracle9i or later. Otherwise, compatibility issues as described result.The following examples demonstrate the use of OCIDescribeAny() for describing different types of schema objects.Illustrates the use of an explicit describe that retrieves the column data types for a table.The steps required to describe type methods (also divided into functions and procedures) are identical to those of regular PL/SQL functions and procedures.Illustrates the use of an explicit describe on a named object type.Illustrates the use of an explicit describe on a named collection type.Shows a loop that retrieves the column names and data types corresponding to a query following query execution.Illustrates the use of invisible column properties and checking each column to determine if it is an invisible column.">描述模式元数据</a>以获取有关使用<a href="bind-define-describe-functions.html#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="描述现有的模式和子模式对象。">OCIDescribeAny（）</a>获取与模式对象相关的<a href="describing-schema-metadata.html#GUID-CED0D15A-D873-43F7-A5B2-51FC0662C250" title="执行模式对象及其子模式对象的显式描述。OCIDescribeAny（）调用限制返回到基本信息的信息，并停止扩展节点（如果它等于另一个描述操作）。执行描述操作时应注意什么。OCI_ATTR_TYPECODE属性返回表示使用CREATE TYPE语句创建新类型时用户提供的类型的类型代码。要描述类型对象，必须在对象模式下初始化OCI进程。可以使用带有OCIStmtExecute（）的隐式描述和带有OCIDescribeAny（）的显式描述来返回列属性OCI_ATTR_PRECISION。类型方法的OCI_ATTR_LIST_ARGUMENTS属性表示方法的第二级参数。本节介绍属于不同参数的属性和句柄。列出并描述表或视图的参数的类型特定属性。列出并描述参数用于过程或函数时的特定于类型的属性。列出并描述参数用于包时的属性。列出并描述参数用于类型时的属性。列出并描述参数用于类型属性时的属性。当参数用于类型的方法时，列出并记录属性。列出并描述参数用于集合类型时的属性。列出并描述参数用于同义词时的属性。列出并描述参数用于序列时的属性。列出并描述参数用于表或视图列时的属性。列出并描述参数用于过程或函数的参数时的属性。当参数用于列，参数和子程序列表或包记录类型的字段时，列出并描述属性。列出并描述参数用于模式类型时的属性。列出并描述参数用于数据库类型时的属性。列出并描述参数用于规则时的属性。列出并描述参数用于规则集时的属性。列出并描述参数用于评估上下文时的属性。列出并描述参数用于表别名时的属性。列出并描述参数用于变量时的属性。列出并描述参数用于名称 - 值对时的属性。查询和列信息支持字符长度语义。如果使用字符长度语义创建数据库列，则隐式描述信息包含字符长度，字节长度和指示如何创建数据库列的标志。表的显式描述有三个属性：OCI_ATTR_DATA_SIZE，OCI_ATTR_CHAR_SIZE和OCI_ATTR_CHAR_USED.Character-length语义取决于服务器或客户端的发布。最好在服务器和客户端都是Oracle9i或更高版本时进行描述。否则，将导致兼容性问题。以下示例演示了如何使用OCIDescribeAny（）来描述不同类型的架构对象。说明使用显式描述来检索表的列数据类型。描述类型方法（也分为函数和过程）所需的步骤与常规PL / SQL函数和过程相同。说明在命名对象类型上使用显式描述。说明在命名集合类型上使用显式描述。显示一个循环，用于在查询执行后检索与查询对应的列名和数据类型。说明使用不可见列属性并检查每列以确定它是否为不可见列。">元数据</a>的信息</p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                        </li>
                        <li>
                           <p><a href="bind-define-describe-functions.html#GUID-AE9F73FB-DCC1-401E-8151-A8A89059163A" title="描述现有的模式和子模式对象。">OCIDescribeAny（）</a></p>
                        </li>
                     </ul>
                     <p></p>
                  </div>
               </div><a id="LNOCI72600"></a><a id="LNOCI16350"></a><div class="props_rev_3"><a id="GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2" name="GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2"></a><h4 id="LNOCI-GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2" class="sect4"><span class="enumeration_section">6.5.1</span>隐含描述</h4>
                  <div>
                     <p>执行SQL语句后，有关选择列表的信息可用作语句句柄的属性。不需要明确的描述调用。</p>
                     <p>要检索有关多个选择列表项的信息，应用程序可以在第一次将<span class="italic">pos</span>参数设置为1时调用<code class="codeph">OCIParamGet()</code> ，然后迭代<span class="italic">pos</span>的值并重复<code class="codeph">OCIParamGet()</code>调用，直到<code class="codeph">OCI_ERROR</code>带有<code class="codeph">ORA-24334</code> <code class="codeph">OCI_ERROR</code> 。应用程序还可以指定任意位置<span class="italic">n</span>以随机获取列。
                     </p>
                     <p>一旦为选择列表中的位置分配了参数描述符，应用程序就可以通过在参数描述符上调用<code class="codeph">OCIAttrGet()</code>来检索特定信息。参数描述符中可用的信息包括参数的数据类型和最大大小。
                     </p>
                     <p><a href="using-sql_statements-in-oci.html#GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2__CIHHFJJE">示例6-3</a> <a href="using-sql_statements-in-oci.html#GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2__CIHHFJJE">示例6-3</a>中的示例代码显示了一个循环，该循环在查询执行后检索与查询对应的列名和数据类型。通过先前调用<code class="codeph">OCIStmtPrepare2()</code>将查询与语句句柄相关联。
                     </p>
                     <p><a href="using-sql_statements-in-oci.html#GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2__CIHHFJJE">例6-3中</a>的<code class="codeph">checkerr()</code>函数用于错误处理。完整列表可以在<a href="oci-demo-programs.html#GUID-75E18629-0C54-4495-A747-AFB346034F26" title="列出示例程序，其中包含示例代码，用于演示OCI句柄的分配和使用。">OCI演示程序</a>中的第一个示例应用程序中找到。
                     </p>
                     <p>对<code class="codeph">OCIAttrGet()</code>和<code class="codeph">OCIParamGet()</code>的调用是不需要网络往返的本地调用，因为在执行语句之后，所有选择列表信息都缓存在客户端。
                     </p>
                     <div class="example" id="GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2__CIHHFJJE">
                        <p class="titleinexample">示例6-3隐式描述 - 选择列表可用作语句句柄的属性</p><pre class="oac_no_warn" dir="ltr">...OCIParam * mypard =（OCIParam *）0; ub2 dtype; text * col_name; ub4 counter，col_name_len，char_semantics; ub2 col_width; sb4 parm_status; text * sqlstmt =（text *）“SELECT * FROM employees WHERE employee_id = 100”; checkerr（errhp，OCIStmtPrepare2（svchp，＆stmthp，errhp，（OraText *）sqlstmt，（ub4）strlen（（char *）sqlstmt），NULL，0，（ub4）OCI_NTV_SYNTAX，（ub4）OCI_DEFAULT））; checkerr（errhp，OCIStmtExecute（svchp，stmthp，errhp，0,0，（OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT））; / *在选择列表中请求位置1的参数描述符* / counter = 1; parm_status = OCIParamGet（（void *）stmthp，OCI_HTYPE_STMT，errhp，（void **）＆mypard，（ub4）counter）; / *仅当成功检索到当前位置的描述符时才循环，从1 * / while开始（parm_status == OCI_SUCCESS）{/ *检索数据类型属性* / checkerr（errhp，OCIAttrGet（（void *）mypard，（ub4） ）OCI_DTYPE_PARAM，（void *）＆dtype，（ub4 *）0，（ub4）OCI_ATTR_DATA_TYPE，（OCIError *）errhp））; / *检索列名属性* / col_name_len = 0; checkerr（errhp，OCIAttrGet（（void *）mypard，（ub4）OCI_DTYPE_PARAM，（void **）＆col_name，（ub4 *）＆col_name_len，（ub4）OCI_ATTR_NAME，（OCIError *）errhp））; / *检索列* / char_semantics = 0的长度语义; checkerr（errhp，OCIAttrGet（（void *）mypard，（ub4）OCI_DTYPE_PARAM，（void *）＆char_semantics，（ub4 *）0，（ub4）OCI_ATTR_CHAR_USED，（OCIError *）errhp））; col_width = 0; if（char_semantics）/ *以字符* / checkerr（errhp，OCIAttrGet（（void *）mypard，（ub4）OCI_DTYPE_PARAM，（void *）＆col_width，（ub4 *）0，（ub4）OCI_ATTR_CHAR_SIZE，（OCIError）检索列宽*）errhp））; else / *以字节为单位检索列宽* / checkerr（errhp，OCIAttrGet（（void *）mypard，（ub4）OCI_DTYPE_PARAM，（void *）＆col_width，（ub4 *）0，（ub4）OCI_ATTR_DATA_SIZE，（OCIError *）errhp ））; / *递增计数器并获取下一个描述符，如果有一个* / counter ++; parm_status = OCIParamGet（（void *）stmthp，OCI_HTYPE_STMT，errhp，（void **）＆mypard，（ub4）counter）; } / * while * / ...
</pre><div class="infoboxnotealso" id="GUID-1494AB91-F7BD-4B73-97B9-4F3AA51D2EB2__GUID-439F6784-9B0D-4EDE-A84B-4BD86F6984E9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-35D2FF91-139B-4A5C-97C8-8BC29866CCA4" title="返回由describe句柄或语句句柄中的position指定的参数的描述符。">OCIParamGet（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                              </li>
                              <li>
                                 <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="分配一组描述符。">OCIArrayDescriptorAlloc（）</a></p>
                              </li>
                              <li>
                                 <p><a href="handle-and-descriptor-functions.html#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="分配一组描述符。">OCIArrayDescriptorAlloc（）</a>可读取的参数描述符的特定属性列表的<a href="describing-schema-metadata.html#GUID-2EB52CE1-9947-472C-B8B3-24214D66EE19" title="本节介绍属于不同参数的属性和句柄。">参数属性</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNOCI72601"></a><a id="LNOCI16351"></a><div class="props_rev_3"><a id="GUID-1FE451DB-FB37-4966-8334-AE04E532D27C" name="GUID-1FE451DB-FB37-4966-8334-AE04E532D27C"></a><h4 id="LNOCI-GUID-1FE451DB-FB37-4966-8334-AE04E532D27C" class="sect4"><span class="enumeration_section">6.5.2</span>显式描述查询</h4>
                  <div>
                     <p>通过将<code class="codeph">OCI_DESCRIBE_ONLY</code>指定为<code class="codeph">OCIStmtExecute()</code>的模式，可以在执行前显式描述查询</p>
                     <p>这不执行语句，但返回选择列表描述。</p>
                     <div class="infoboxnote" id="GUID-1FE451DB-FB37-4966-8334-AE04E532D27C__GUID-9DBAC0A6-0912-4607-A80A-83A3820FD686">
                        <p class="notep1">注意：</p>
                        <p>为了最大限度地提高性能，Oracle建议应用程序以默认模式执行语句，并使用执行时附带的隐式描述。</p>
                     </div>
                     <p><a href="using-sql_statements-in-oci.html#GUID-1FE451DB-FB37-4966-8334-AE04E532D27C__CIHCGFEE">例6-4中</a>的代码演示了如何在选择列表中使用显式describe来返回有关列的信息。
                     </p>
                     <div class="example" id="GUID-1FE451DB-FB37-4966-8334-AE04E532D27C__CIHCGFEE">
                        <p class="titleinexample">示例6-4显式描述 - 返回每列的选择列表描述</p><pre class="oac_no_warn" dir="ltr">...int i = 0; ub4 numcols = 0; ub2 type = 0; OCIParam * colhd =（OCIParam *）0; / *列句柄* / text * sqlstmt =（text *）“SELECT * FROM employees WHERE employee_id = 100”; checkerr（errhp，OCIStmtPrepare2（svchp，＆stmthp，errhp，（OraText *）sqlstmt，（ub4）strlen（（char *）sqlstmt），NULL，0，（ub4）OCI_NTV_SYNTAX，（ub4）OCI_DEFAULT））; / *初始化svchp，stmthp，errhp，rowoff，iters，snap_in，snap_out * / / *将执行模式设置为OCI_DESCRIBE_ONLY。请注意，除了执行语句* / checkerr（errhp，OCIStmtExecute（svchp，stmthp，errhp，0,0，（OCISnapshot *）0，（OCISnapshot *）0）之外，将模式设置为OCI_DEFAULT会对语句进行隐式描述， OCI_DESCRIBE_ONLY））; / *获取查询中的列数* / checkerr（errhp，OCIAttrGet（（void *）stmthp，OCI_HTYPE_STMT，（void *）＆numcols，（ub4 *）0，OCI_ATTR_PARAM_COUNT，errhp））; / *遍历列列表并检索每列的数据类型。从pos = 1 * /开始（i = 1; i &lt;= numcols; i ++）{/ *获取列i * / checkerr的参数（errhp，OCIParamGet（（void *）stmthp，OCI_HTYPE_STMT，errhp，（void ** ）＆colhd，i））; / *获取列i * / type = 0的数据类型; checkerr（errhp，OCIAttrGet（（void *）colhd，OCI_DTYPE_PARAM，（void *）＆type，（ub4 *）0，OCI_ATTR_DATA_TYPE，errhp））; } ...
</pre><div class="infoboxnotealso" id="GUID-1FE451DB-FB37-4966-8334-AE04E532D27C__GUID-755DD05A-64EB-42FA-902E-7672D8152BBB">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNOCI16352"></a><div class="props_rev_3"><a id="GUID-F5FB3DBA-9FDA-45FC-AF5D-2D8D4C436296" name="GUID-F5FB3DBA-9FDA-45FC-AF5D-2D8D4C436296"></a><h3 id="LNOCI-GUID-F5FB3DBA-9FDA-45FC-AF5D-2D8D4C436296" class="sect3"><span class="enumeration_section">6.6</span>关于在OCI中定义输出变量</h3>
               <div>
                  <p>Query语句将数据从数据库返回给您的应用程序。</p>
                  <p>处理查询时，必须为选择列表中的每个项目定义输出变量或输出变量数组，以从中检索数据。define步骤创建一个关联，用于确定返回结果的存储位置以及格式。</p>
                  <p>例如，要处理以下语句，通常会定义两个输出变量：一个用于接收从<code class="codeph">name</code>列返回的值，另一个用于接收从<code class="codeph">ssn</code>列返回的值：</p><pre class="oac_no_warn" dir="ltr">SELECT name，ssn FROM employees WHERE empno =：empnum</pre><div class="infoboxnotealso" id="GUID-F5FB3DBA-9FDA-45FC-AF5D-2D8D4C436296__GUID-E3130724-AA9E-4D2B-AD0E-1A75CF1F3005">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="binding-and-defining-in-oci.html#GUID-4C2BD7BB-5768-4E8A-82BF-84FB0030A8C5" title="本章介绍OCI中的绑定和定义。">OCI中的绑定和定义</a></p>
                  </div>
               </div>
            </div><a id="LNOCI16353"></a><div class="props_rev_3"><a id="GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6" name="GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6"></a><h3 id="LNOCI-GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6" class="sect3"><span class="enumeration_section">6.7</span>关于获取结果</h3>
               <div>
                  <p>如果OCI应用程序已处理查询，则通常需要在语句完成执行后使用<code class="codeph">OCIStmtFetch2()</code>获取结果。
                  </p>
                  <p><code class="codeph">OCIStmtFetch2()</code>函数支持<span class="italic">可滚动游标</span> 。
                  </p>
                  <p>将提取的数据检索到已由define操作指定的输出变量中。</p>
                  <div class="infoboxnote" id="GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6__GUID-C5DC1425-6EB1-4C0D-9D59-D79DF64D5AB2">
                     <p class="notep1">注意：</p>
                     <p>如果在调用<code class="codeph">OCIStmtExecute()</code>之前为<code class="codeph">SELECT</code>语句定义了输出变量，那么<code class="codeph">iters</code>参数指定的行数将直接<code class="codeph">iters</code>到定义的输出缓冲区中</p>
                     <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                           <li>
                              <p><a href="using-sql_statements-in-oci.html#GUID-531299F8-6F55-4550-B389-1B3346045FC2" title="如果LOB列或属性是选择列表的一部分，则它们可以作为LOB定位符或实际LOB值返回，具体取决于您定义它们的方式。">关于获取LOB数据</a></p>
                           </li>
                           <li>
                              <p><a href="using-sql_statements-in-oci.html#GUID-7AE9DBE2-5316-4802-99D1-969B72823F02" title="为了最大限度地减少服务器往返次数并优化性能，OCI可以在执行查询时预取结果集行。">关于设置预取计数</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="infoboxnotealso" id="GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6__GUID-9E5CCC5C-711B-4A5B-998C-ED09B56D1990">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2" title="游标是结果集中的当前位置。">关于在OCI中使用可滚动游标</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                        </li>
                        <li>
                           <p>前面提到的这些语句<a href="binding-and-defining-in-oci.html#GUID-E965AB3C-003F-45CD-82FA-586BBB4082A4" title="A basic define is done with a position call, OCIDefineByPos() or OCIDefineByPos2().">在OCI定义</a>中使用的<a href="binding-and-defining-in-oci.html#GUID-E965AB3C-003F-45CD-82FA-586BBB4082A4" title="使用位置调用OCIDefineByPos（）或OCIDefineByPos2（）完成基本定义。">步骤中</a>获取与示例代码相关的数据。有关更多信息，请参阅该示例。
                           </p>
                        </li>
                        <li>
                           <p>有关定义输出变量的信息<a href="binding-and-defining-in-oci.html#GUID-8A09BC68-4C3D-4977-86C9-134F73121E26" title="Query语句将数据从数据库返回给您的应用程序。">，请在OCI中定义概述</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16354"></a><div class="props_rev_3"><a id="GUID-531299F8-6F55-4550-B389-1B3346045FC2" name="GUID-531299F8-6F55-4550-B389-1B3346045FC2"></a><h4 id="LNOCI-GUID-531299F8-6F55-4550-B389-1B3346045FC2" class="sect4"><span class="enumeration_section">6.7.1</span>关于获取LOB数据</h4>
                  <div>
                     <p>如果LOB列或属性是选择列表的一部分，则它们可以作为LOB定位符或实际LOB值返回，具体取决于您定义它们的方式。</p>
                     <p>如果获取了LOB定位符，则应用程序可以通过<code class="codeph">OCILobXXX</code>函数对这些定位器执行进一步操作。
                     </p>
                     <div class="infoboxnotealso" id="GUID-531299F8-6F55-4550-B389-1B3346045FC2__GUID-A4A28A80-A70B-48FC-B577-7AE99C3818D2">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关在OCI中使用LOB定位器的更多信息，请参阅<a href="lobs-and-bfile-operations.html#GUID-0A094518-F97C-40BE-A336-259AA82BD0A2" title="本章介绍LOB和BFILE操作。">LOB和BFILE操作</a></p>
                           </li>
                           <li>
                              <p><a href="binding-and-defining-in-oci.html#GUID-16652266-2A22-43AB-8BA3-9868CCEC9271">关于定义LOB输出变量</a>用于使用和不使用定位器选择LOB数据的示例</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNOCI16355"></a><div class="props_rev_3"><a id="GUID-7AE9DBE2-5316-4802-99D1-969B72823F02" name="GUID-7AE9DBE2-5316-4802-99D1-969B72823F02"></a><h4 id="LNOCI-GUID-7AE9DBE2-5316-4802-99D1-969B72823F02" class="sect4"><span class="enumeration_section">6.7.2</span>关于设置预取计数</h4>
                  <div>
                     <p>为了最大限度地减少服务器往返次数并优化性能，OCI可以在执行查询时预取结果集行。</p>
                     <p>您可以使用<code class="codeph">OCIAttrSet()</code>函数设置语句句柄的<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>或<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>属性来自定义此预取。这些属性使用如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>设置要预取的行数。如果未设置，则默认值为1。如果<code class="codeph">OCIStmtExecute()</code>的<code class="codeph">iters</code>参数为0并且启用了预取，则在调用<code class="codeph">OCIStmtFetch2()</code>期间会缓冲这些行。执行后和提取之间可以更改预取值。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>设置为要预取的行分配的内存。然后，应用程序将获取尽可能多的行，以适应那么多内存。
                           </p>
                        </li>
                     </ul>
                     <p>当设置了这两个属性时，OCI <code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>行预取到<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>限制，除非达到<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>限制，在这种情况下，OCI返回的行数可以容纳在大小为<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>的缓冲区中。</p>
                     <p>默认情况下，打开预取，OCI会获取一个额外的行，除非查询不支持预取（请参阅下面的注释）。要关闭预取，请将<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>和<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>属性都设置为零。
                     </p>
                     <p>如果显式设置了<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>和<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>属性，则OCI使用两个约束中的更紧密来确定要预取的行数。
                     </p>
                     <p>要根据内存约束进行预取，请设置<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>属性，并确保通过将其设置为零来禁用<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>属性（以覆盖默认设置1行）。
                     </p>
                     <p>要根据行数约束进行预取，请设置<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>属性并通过将其设置为零来禁用<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>属性（如果它已明确设置为非零值）。
                     </p>
                     <p><code class="codeph">REF CURSOR</code>和嵌套游标列可以进行预取。默认情况下， <code class="codeph">REF CURSOR</code>没有打开预取。要打开<code class="codeph">REF CURSOR</code>的预取，请在从<code class="codeph">REF CURSOR</code>获取行之前设置<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>或<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code>属性。当<code class="codeph">REF CURSOR</code>传递一个OCI应用和PL / SQL之间多次并获取关于<code class="codeph">REF CURSOR</code>在OCI和PL / SQL完成后，通过OCI（如果启用）预取的行导致表现得好像OUT-应用正在PL / SQL中获取订单行。在这种情况下，不应在<code class="codeph">REF CURSOR</code>上启用OCI预取。
                     </p>
                     <div class="infoboxnote" id="GUID-7AE9DBE2-5316-4802-99D1-969B72823F02__GUID-BDED5EA1-B78B-429C-B938-02AD86D55370">
                        <p class="notep1">注意：</p>
                        <p>如果<code class="codeph">LONG</code> ，LOB或Opaque Type列（例如<code class="codeph">XMLType</code> ）是查询的一部分，则预取不起作用。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7AE9DBE2-5316-4802-99D1-969B72823F02__GUID-DA3E7081-C740-46C5-9151-959E661E08A6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="handle-and-descriptor-attributes.html#GUID-A251CF91-EB9F-4DBC-8BB8-FB5EA92C20DE" title="列出并描述语句句柄属性。">语句句柄属性</a></p>
                           </li>
                           <li>
                              <p><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                           </li>
                        </ul>
                        <p></p>
                     </div>
                  </div>
               </div>
            </div><a id="LNOCI16356"></a><div class="props_rev_3"><a id="GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2" name="GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2"></a><h3 id="LNOCI-GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2" class="sect3"><span class="enumeration_section">6.8</span>关于在OCI中使用可滚动游标</h3>
               <div>
                  <p>游标是<span class="italic">结果集中</span>的当前位置。
                  </p>
                  <p>执行游标会将查询结果放入一组称为结果集的行中，这些行可以按顺序或非顺序获取。在后一种情况下，游标称为<span class="italic">可滚动游标。</span></p>
                  <p>可滚动游标通过使用绝对或相对行数偏移到结果集中，支持从给定位置向前和向后访问结果集。</p>
                  <p>行从1开始编号。对于可滚动游标，您可以获取先前获取的行，结果集中的第n行或当前位置的第n行。部分或整个结果集的客户端缓存通过限制对服务器的调用来提高性能。</p>
                  <p>Oracle数据库不支持可滚动游标的DML操作。如果<code class="codeph">LONG</code>数据类型是选择列表的一部分，则无法使游标可滚动。
                  </p>
                  <p>此外，来自可滚动语句句柄的提取基于执行时的快照。OCI客户端预取与OCI可滚动游标一起使用。客户端预取高速缓存的大小可以由现有的OCI属性<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>和<code class="codeph">OCI_ATTR_PREFETCH_MEMORY</code> 。</p>
                  <div class="infoboxnote" id="GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2__GUID-54D355A4-C206-4DC4-A1F0-F3AC66052AA4">
                     <p class="notep1">注意：</p>
                     <p>除非您需要其功能，否则不要使用可滚动游标，因为它们使用更多服务器资源并且可以比不可滚动游标具有更长的响应时间。</p>
                  </div>
                  <p><code class="codeph">OCIStmtExecute()</code>调用具有可滚动游标的执行模式， <code class="codeph">OCI_STMT_SCROLLABLE_READONLY</code> 。语句句柄的缺省值是不可滚动的，仅限前向顺序访问，其中模式为<code class="codeph">OCI_FETCH_NEXT</code> 。每次执行语句句柄时都必须设置此执行模式。
                  </p>
                  <p>只能使用<code class="codeph">OCIAttrGet()</code>检索语句句柄属性<code class="codeph">OCI_ATTR_CURRENT_POSITION</code> 。该属性不能由应用程序设置;它表示结果集中的当前位置。
                  </p>
                  <p>对于不可滚动游标， <code class="codeph">OCI_ATTR_ROW_COUNT</code>是在执行此语句句柄后使用<code class="codeph">OCIStmtFetch2()</code>调用<code class="codeph">OCIStmtFetch2()</code>到用户缓冲区中的<code class="codeph">OCIStmtFetch2()</code> 。由于不可滚动游标仅是前向顺序，因此<code class="codeph">OCI_ATTR_ROW_COUNT</code>也表示应用程序检测到的最高行数。
                  </p>
                  <p>从Oracle Database 12.1版开始，如果行计数值可能超过OCI应用程序的<code class="codeph">UB4MAXVAL</code>值，则使用属性<code class="codeph">OCI_ATTR_UB8_ROW_COUNT</code>优先使用属性<code class="codeph">OCI_ATTR_ROW_COUNT</code> 。
                  </p>
                  <p>对于可滚动游标， <code class="codeph">OCI_ATTR_ROW_COUNT</code>表示提取到用户缓冲区中的最大（绝对）行号。因为应用程序可以任意定位提取，所以这不一定是自执行（可滚动）语句以来提取到用户缓冲区的行总数。
                  </p>
                  <p>语句句柄上的属性<code class="codeph">OCI_ATTR_ROWS_FETCHED</code>表示在上次提取调用或执行中成功提取到用户缓冲区的行数。它适用于可滚动和不可滚动的游标。
                  </p>
                  <p>使用<code class="codeph">OCIStmtFetch2()</code>调用，而不是<code class="codeph">OCIStmtFetch()</code>调用，该调用是为了向后兼容而保留的。我们鼓励您使用<code class="codeph"></code> <code class="codeph">OCIStmtFetch2()</code>适用于所有新应用程序，甚至是那些不使用可滚动游标的应用程序。此调用也适用于不可滚动的游标，但如果传递<code class="codeph">OCI_DEFAULT</code>或<code class="codeph">OCI_FETCH_NEXT</code>之外的任何其他方向，则可能引发错误。
                  </p>
                  <p>远程映射查询支持可滚动游标。可滚动游标支持透明应用程序故障转移（TAF）。</p>
                  <div class="infoboxnote" id="GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2__GUID-6C0E8BAB-B241-4AED-A1C3-86A4822C21CA">
                     <p class="notep1">注意：</p>
                     <p>如果在<code class="codeph">nrows</code>参数设置为0的情况下调用<code class="codeph">OCIStmtFetch2()</code> ，则会取消游标。
                     </p>
                  </div>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-EF4297B5-78A7-449A-ABB4-9C5B754D3A89" title="如果使用OCI客户端预取缓冲区，则响应时间会得到改善。">关于提高可滚动游标性能</a></p>
                        </li>
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-4A994A3E-EA41-4DA1-B58C-2BBB3C083613" title="显示可滚动游标的使用。">可滚动游标上的访问示例</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2__GUID-95D92C90-1E96-4BFA-AC7F-377A7AFB3A78">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                        </li>
                        <li>
                           <p><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></p>
                        </li>
                        <li>
                           <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                        </li>
                        <li>
                           <p><a href="using-sql_statements-in-oci.html#GUID-7AE9DBE2-5316-4802-99D1-969B72823F02" title="为了最大限度地减少服务器往返次数并优化性能，OCI可以在执行查询时预取结果集行。">关于设置预取计数</a> 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI16357"></a><div class="props_rev_3"><a id="GUID-EF4297B5-78A7-449A-ABB4-9C5B754D3A89" name="GUID-EF4297B5-78A7-449A-ABB4-9C5B754D3A89"></a><h4 id="LNOCI-GUID-EF4297B5-78A7-449A-ABB4-9C5B754D3A89" class="sect4"><span class="enumeration_section">6.8.1</span>关于提高可滚动游标性能</h4>
                  <div>
                     <p>如果使用OCI客户端预取缓冲区，则响应时间会得到改善。</p>
                     <p>调用后<code class="codeph">OCIStmtExecute()</code>用于可滚动光标，调用<code class="codeph">OCIStmtFetch2()</code>使用<code class="codeph">OCI_FETCH_LAST</code>以获得结果集的大小。然后将<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>设置<code class="codeph">OCI_ATTR_PREFETCH_ROWS</code>大小的大约20％，如果结果集使用大量内存，则设置<code class="codeph">OCI_PREFETCH_MEMORY</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-EF4297B5-78A7-449A-ABB4-9C5B754D3A89__GUID-08630751-DF92-421D-A7EA-98E742A655F3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                           </li>
                           <li>
                              <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNOCI72602"></a><a id="LNOCI16358"></a><div class="props_rev_3"><a id="GUID-4A994A3E-EA41-4DA1-B58C-2BBB3C083613" name="GUID-4A994A3E-EA41-4DA1-B58C-2BBB3C083613"></a><h4 id="LNOCI-GUID-4A994A3E-EA41-4DA1-B58C-2BBB3C083613" class="sect4"><span class="enumeration_section">6.8.2</span>可滚动游标上的访问示例</h4>
                  <div>
                     <p>显示可滚动游标的使用。</p>
                     <p>假设以下SQL查询返回结果集，并且表<code class="codeph">EMP</code>有14行：</p><pre class="oac_no_warn" dir="ltr">SELECT empno，ename FROM emp</pre><p><a href="using-sql_statements-in-oci.html#GUID-4A994A3E-EA41-4DA1-B58C-2BBB3C083613__CIHBFFEB">示例6-5中</a>显示了可滚动游标的一种用法。
                     </p>
                     <div class="example" id="GUID-4A994A3E-EA41-4DA1-B58C-2BBB3C083613__CIHBFFEB">
                        <p class="titleinexample">示例6-5对可滚动游标的访问</p><pre class="oac_no_warn" dir="ltr">.../ *在可滚动模式下执行可滚动游标* / OCIStmtExecute（svchp，stmthp，errhp，（ub4）0，（ub4）0，（CONST OCISnapshot *）NULL，（OCISnapshot *）NULL，OCI_STMT_SCROLLABLE_READONLY）; / *获取具有绝对行号6,7,8的行。在此调用之后，OCI_ATTR_CURRENT_POSITION = 8，OCI_ATTR_ROW_COUNT = 8 * / checkprint（errhp，OCIStmtFetch2（stmthp，errhp，（ub4）3，OCI_FETCH_ABSOLUTE，（sb4）6，OCI_DEFAULT）; / *获取具有绝对行号6,7的行， 8。在此调用之后，OCI_ATTR_CURRENT_POSITION = 8，OCI_ATTR_ROW_COUNT = 8 * / checkprint（errhp，OCIStmtFetch2（stmthp，errhp，（ub4）3，OCI_FETCH_RELATIVE，（sb4）-2，OCI_DEFAULT）; / *获取具有绝对行号14的行。在此调用之后，OCI_ATTR_CURRENT_POSITION = 14，OCI_ATTR_ROW_COUNT = 14 * / checkprint（errhp，OCIStmtFetch2（stmthp，errhp，（ub4）1，OCI_FETCH_LAST，（sb4）0，OCI_DEFAULT）; / *获取绝对行号为1的行。在此调用之后，OCI_ATTR_CURRENT_POSITION = 1，OCI_ATTR_ROW_COUNT = 14 * / checkprint（errhp，OCIStmtFetch2（stmthp，errhp，（ub4）1，OCI_FETCH_FIRST，（sb4）0，OCI_DEFAULT）; / *获取绝对行号为2,3的行， 4。在此调用之后，OCI_ATTR_CURRENT_POSITION = 4，OCI_ATTR_ROW_COUNT = 14 * / checkprint（errhp，OCIStmtFetch2（stmthp，errhp，（ub4）3，OCI_FETCH_NEXT，（sb4）0，OCI_DEFAULT）; / *获取具有绝对行号3,4的行， 5,6,7。在此调用之后，OCI_ATTR_CURRENT_POSITION = 7，OCI_ATTR_ROW_COUNT = 14。假设已分配用户的定义内存。* / checkprint（errhp，OCIStmtFetch2（stmthp，errhp，（ub4）5，OCI_FETCH_PRIOR，（sb4）0，OCI_DEFAULT）; ...} checkprint（errhp，status）{ub4 rows_fetched; / *这会在定义缓冲区* / checkerr（errhp，status）中打印fetch调用的结果之前检查是否有任何OCI错误; checkerr（errhp，OCIAttrGet（（CONST void *）stmthp，OCI_HTYPE_STMT，（void *）＆rows_fetched，（uint *）0，OCI_ATTR_ROWS_FETCHED，errhp））; } ...
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05499.using-oracle-database-vault-with-a-cdb.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use Oracle Database Vault in a multitenant container database (CDB)."></meta>
      <meta name="description" content="You can use Oracle Database Vault in a multitenant container database (CDB)."></meta>
      <title>将Oracle Database Vault与CDB一起使用</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can use Oracle Database Vault in a multitenant container database (CDB)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-oracle-scheduler-with-a-cdb.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-xstream-with-a-cdb.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-oracle-scheduler-with-a-cdb.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-xstream-with-a-cdb.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">在多租户环境中使用Oracle功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">将Oracle Database Vault与CDB一起使用</li>
            </ol>
            <a id="GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" name="GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3"></a>
            
            <h2 id="MULTI-GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" class="sect2"><span class="enumeration_chapter">24</span>将Oracle Database Vault与CDB一起使用</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。</p>
               <p>本节包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-59526942-DC4F-489B-819E-D4F33BA17F9D">关于Oracle Database Vault</a><br>Oracle Database Vault安全控制可保护应用程序数据免受未经授权的访问，并符合隐私和法规要求。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-F4182518-DEFF-4433-9593-0D73315DF661">Oracle Database Vault如何在多租户环境中运行</a><br>为了提高整合的安全性，您可以将Oracle Database Vault与Oracle Multitenant一起使用。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2">验证是否已配置并启用数据库保管库</a><br><code class="codeph">DBA_DV_STATUS</code> ， <code class="codeph">CDB_DV_STATUS</code> ， <code class="codeph">DBA_OLS_STATUS</code>和<code class="codeph">CDB_OLS_STATUS</code>数据字典视图验证是否已配置并启用Oracle数据库。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D">在多租户环境中向Oracle数据库注册Oracle Database Vault</a><br>您可以基于多种方案在多租户环境中注册Oracle Database Vault。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-86DA4697-8BE2-4F27-92E3-C15843F9A3A6">配置领域</a><br>您可以围绕数据库对象创建领域以保护它们，然后设置授权以控制用户对此数据的访问。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-6308CB8B-6777-44AF-A523-F1A956591F6D">多租户环境中的规则集和规则</a><br>在多租户环境中，您可以在应用程序根目录中创建规则集及其关联规则。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-571C5AF1-909C-4A76-BE2B-9BAC5232FE84">多租户环境中的命令规则</a><br>在多租户环境中，您可以在CDB根目录或应用程序根目录中创建公共和本地命令规则。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-07513135-CB45-4788-A596-E5A71879BB81">多租户环境中的Oracle Database Vault策略</a><br>Oracle Database Vault策略仅在创建它们的可插拔数据库（PDB）本地。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F">使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</a><br>您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-517E9611-546B-43D9-8C54-37037AF0B198">将独立Oracle数据库转换为PDB并将其插入CDB</a><br>您可以将独立的Oracle Database Release 12c或更高版本的数据库转换为PDB，然后将此PDB插入CDB。</li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="您可以在多租户环境中使用Oracle数据库功能。">在多租户环境中使用Oracle功能</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-59526942-DC4F-489B-819E-D4F33BA17F9D" name="GUID-59526942-DC4F-489B-819E-D4F33BA17F9D"></a><h3 id="MULTI-GUID-59526942-DC4F-489B-819E-D4F33BA17F9D" class="sect3"><span class="enumeration_section">24.1</span>关于Oracle Database Vault</h3>
               <div>
                  <p>Oracle Database Vault安全控制可保护应用程序数据免受未经授权的访问，并符合隐私和法规要求。</p>
                  <p>您可以部署控件以阻止对应用程序数据的特权帐户访问，并使用受信任路径授权控制数据库内的敏感操作。通过对特权和角色的分析，您可以使用最小特权最佳实践来提高现有应用程序的安全性。Oracle Database Vault透明地保护现有数据库环境，从而消除了代价高昂且耗时的应用程序更改。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-F4182518-DEFF-4433-9593-0D73315DF661" name="GUID-F4182518-DEFF-4433-9593-0D73315DF661"></a><h3 id="MULTI-GUID-F4182518-DEFF-4433-9593-0D73315DF661" class="sect3"><span class="enumeration_section">24.2</span> Oracle Database Vault在多租户环境中的工作原理</h3>
               <div>
                  <p>为了提高整合的安全性，您可以将Oracle Database Vault与Oracle Multitenant一起使用。</p>
                  <p>Oracle Database Vault可以阻止可插拔数据库（PDB）内的特权用户访问以及PDB与容器数据库中的公共特权用户之间的特权用户访问。每个PDB都有自己的Database Vault元数据，例如领域，规则集，命令规则，默认策略（例如默认域）等。此外， <code class="codeph">DVSYS</code>和<code class="codeph">DVF</code>模式中的对象可自动用于任何子PDB。两种模式都是常见的用户模式。
                  </p>
                  <p>您只能在应用程序根目录中配置公共领域，但可以在应用程序根目录或CDB根目录中创建通用规则集和命令规则。应用程序根目录中的公共命令规则适用于其关联的PDB，CDB根目录中的公共命令规则适用于CDB环境中的所有PDB。通过创建通用领域和命令规则，您可以创建在整个CDB环境中使用共享领域，规则集或命令规则的策略，而不必为多租户环境中的每个PDB创建这些相同的组件。通用保护适用于与启用了Oracle Database Vault的应用程序根关联的所有PDB。</p>
                  <p>您可以为每个PDB创建单独的本地策略。使用Database Vault保护对象时，Database Vault会将公共对象的公共权限设置为与本地系统权限相同的强制规则。</p>
                  <p>配置启用了数据库保管库的PDB时， <code class="codeph">DVSYS</code>模式是存储在根目录中的公共用户模式。这意味着<code class="codeph">DVSYS</code>架构中的所有对象（表，数据字典视图，用户帐户，PL / SQL包，默认策略等）都受此架构可用的公共权限的约束。换句话说，您可以在根目录中创建领域，因子等，以保护根中的架构。在关联的PDB中配置Database Vault之前，请确保先在根目录中配置Database Vault。
                  </p>
                  <p>在CDB根目录中启用Oracle Database Vault时，可以选择常规模式或严格模式。设置根据您选择的设置在整个CDB中传播。例如，假设CDB包含启用了Database Vault的PDB和未启用Database Vault的PDB。如果使用常规模式启用Database Vault，则两种类型的PDB将继续正常运行。如果使用严格模式启用Database Vault，则禁用Database Vault的PDB将以受限模式运行。</p>
                  <p><a href="using-oracle-database-vault-with-a-cdb.html#GUID-F4182518-DEFF-4433-9593-0D73315DF661__CHDGHEHH">图24-1</a>说明了常规模式下的数据库如何允许对公共和本地数据库管理员进行不同的访问，具体取决于是否启用了Database Vault。在这种情况下，普通用户和本地用户都无法访问PDB1和PDB2中的域。普通用户和PDB3本地用户都可以访问PDB3中的自定义应用程序应用程序，其中未启用Database Vault。
                  </p>
                  <div class="figure" id="GUID-F4182518-DEFF-4433-9593-0D73315DF661__CHDGHEHH">
                     <p class="titleinfigure">图24-1具有常规模式的多租户环境中的Oracle Database Vault</p><img src="img/dvadm_vm_005c.png" alt="下面是图24-1的描述" title="下面是图24-1的描述" longdesc="img_text/dvadm_vm_005c.html"><br><a href="img_text/dvadm_vm_005c.html">“图24-1具有常规模式的多租户环境中的Oracle Database Vault”的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-72403156-3E91-43FD-8D06-859DBBC10568" title="在多租户环境中，您可以创建领域以保护应用程序根目录中的公共对象。">多租户环境中的领域</a></li>
                        <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-6308CB8B-6777-44AF-A523-F1A956591F6D" title="在多租户环境中，您可以在应用程序根目录中创建规则集及其关联规则。">多租户环境中的规则集和规则</a></li>
                        <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-571C5AF1-909C-4A76-BE2B-9BAC5232FE84" title="在多租户环境中，您可以在CDB根目录或应用程序根目录中创建公共和本地命令规则。">多租户环境中的命令规则</a></li>
                        <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-517E9611-546B-43D9-8C54-37037AF0B198" title="您可以将独立的Oracle Database Release 12c或更高版本的数据库转换为PDB，然后将此PDB插入CDB。">将独立Oracle数据库转换为PDB并将其插入CDB</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" name="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2"></a><h3 id="MULTI-GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" class="sect3"><span class="enumeration_section">24.3</span>验证是否已配置并启用数据库保管库</h3>
               <div>
                  <p><code class="codeph">DBA_DV_STATUS</code> ， <code class="codeph">CDB_DV_STATUS</code> ， <code class="codeph">DBA_OLS_STATUS</code>和<code class="codeph">CDB_OLS_STATUS</code>数据字典视图验证是否已配置并启用Oracle数据库。
                  </p>
                  <div class="section">除Oracle Database Vault管理员外，Oracle Database <code class="codeph">SYS</code>用户和已被授予<code class="codeph">DBA</code>角色的用户可以查询这些视图。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于Database Vault：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果要查找非多租户数据库的数据库保管库状态，或者仅在根目录或单个PDB的多租户环境中，请查询<code class="codeph">DBA_DV_STATUS</code> 。例如：</p><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS;</code></pre><p>输出类似于以下内容：</p><pre class="pre codeblock"><code>NAME STATUS -------------------- ----------- DV_CONFIGURE_STATUS TRUE DV_ENABLE_STATUS TRUE</code></pre></li>
                              <li>
                                 <p>如果要在多租户环境中查找所有PDB的数据库保管库状态（作为具有管理权限的公共用户），请查询<code class="codeph">CDB_DV_STATUS</code> ，它提供了容器ID（ <code class="codeph">CON_ID</code> ）字段的添加。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>对于Oracle Label Security，请查询以下数据字典视图，这些视图与其Database Vault等效视图类似：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBA_OLS_STATUS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CDB_OLS_STATUS</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" name="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D"></a><h3 id="MULTI-GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" class="sect3"><span class="enumeration_section">24.4</span>在多租户环境中向Oracle数据库注册Oracle Database Vault</h3>
               <div>
                  <p>您可以基于多种方案在多租户环境中注册Oracle Database Vault。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A">在CDB根目录中注册Database Vault</a><br>在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193">注册Database Vault公共用户以管理特定PDB</a><br>在多租户环境中，您必须首先在根目录中注册Oracle Database Vault，然后在PDB中注册。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-75E90559-133D-4B5E-B658-D77810B590C6">注册Database Vault本地用户以管理特定PDB</a><br>在多租户环境中，您必须先在根目录中注册Oracle Database Vault，然后再在PDB中注册。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-54699671-483A-49EF-B900-81D286845E8E">插入启用Database Vault的PDB</a><br>在SQL * Plus中，在多租户环境中，您可以插入已启用Database Vault的数据库。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260">在多租户环境中手动安装Oracle Database Vault</a><br>在某些情况下，对于多租户环境，您必须手动安装Oracle Database Vault。例如，没有Database Vault的11g Oracle数据库升级到版本12c，然后转换为PDB以插入12c Database Vault启用的数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" name="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A"></a><h4 id="MULTI-GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" class="sect4"><span class="enumeration_section">24.4.1</span>在CDB根目录中注册Database Vault</h4>
                  <div>
                     <p>在多租户环境中，您向将使用CDB根目录中的数据库保管库强制角色的普通用户注册Oracle Database Vault。</p>
                     <ol>
                        <li class="stepexpand"><span>在多租户环境中，以具有创建用户权限并授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限的用户身份登录数据库实例的根目录。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>sqlplus c ## dba_debra输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__CHDGDEIB"><span>选择将用于数据库保管库所有者（ <code class="codeph">DV_OWNER</code>角色）和数据库保管库客户管理器（ <code class="codeph">DV_ACCTMGR</code>角色）帐户的用户帐户（或创建新用户）。</span><div>
                              <p>Oracle强烈建议您为每个角色维护两个帐户。一个帐户（主要命名的用户帐户）将在日常使用，另一个帐户将用作备份帐户，以防主帐户的密码丢失并且必须重置。</p>
                           </div>
                           <div>
                              <p>使用<code class="codeph">c##</code>或<code class="codeph">C##</code>这些帐户的名称。例如：</p><pre class="pre codeblock"><code>GRANT CREATE SESSION，SET CONTAINER to c ## sec_admin_owen IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## dbv_owner_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## accts_admin_ace IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL; GRANT CREATE SESSION，SET CONTAINER to c ## dbv_acctmgr_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;</code></pre><p>在本规范中：</p>
                              <ul id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_EFL_1LP_GFB" style="list-style-type:disc">
                                 <li>如果新角色<code class="codeph">DV_ADMIN</code>和<code class="codeph">DV_ACCTMGR</code>尚不存在，则创建主帐户（ <code class="codeph">c##sec_admin_owen</code>和<code class="codeph">c##accts_admin_ace</code> ）。</li>
                                 <li>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份连接到root</span><div><pre class="pre codeblock"><code>CONN SYS AS SYSDBA输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>配置两个备份Database Vault用户帐户。</span><div>例如：<pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## dbv_acctmgr_root_backup'，force_local_dvowner =&gt; FALSE）;结束; /</code></pre></div>
                           <div>在此示例中，将<code class="codeph">force_local_dvowner</code>设置为<code class="codeph">FALSE</code>可使公共用户具有与此CDB根关联的PDB的<code class="codeph">DV_OWNER</code>权限。将其设置为<code class="codeph">TRUE</code>限制公共<code class="codeph">DV_OWNER</code>用户仅具有CDB根的<code class="codeph">DV_OWNER</code>角色权限。如果您将<code class="codeph">DV_OWNER</code>本地授予CDB根公共用户，则该用户无法将<code class="codeph">DV_OWNER</code>角色共同授予任何其他用户。
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译根目录中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何指示，则再次运行它。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为刚刚配置的主Database Vault Owner用户连接到root。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin_owen输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令之一启用Oracle Database Vault：</span><div>
                              <ul id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_LYQ_35D_R2B" style="list-style-type:disc">
                                 <li>
                                    <p>要使Oracle Database Vault能够使用常规模式：</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></li>
                                 <li>
                                    <p>如果每个关联的PDB必须在此数据库中启用Database Vault，请使用以下命令。在重新启动数据库之后，未启用Database Vault的PDB将处于受限模式，直到PDB中启用了Database Vault：</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV（strict_mode =&gt;'y'）;</code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重启数据库。</span><div><pre class="pre codeblock"><code>关机立即启动</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已安装并启用Oracle Database Vault和Oracle Label Security。</span><div><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS; SELECT * FROM DBA_OLS_STATUS; SELECT * FROM CDB_DV_STATUS; SELECT * FROM CDB_OLS_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO c ## sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予备份<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_acctmgr_root_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="../dvadm/oracle-database-vault-schemas-roles-and-accounts.html#DVADM-GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                           <li><a href="../dvadm/getting-started-with-oracle-database-vault.html#DVADM-GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" name="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193"></a><h4 id="MULTI-GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" class="sect4"><span class="enumeration_section">24.4.2</span>注册Database Vault公共用户以管理特定PDB</h4>
                  <div>
                     <p>在多租户环境中，您必须首先在根目录中注册Oracle Database Vault，然后在PDB中注册。</p>
                     <div class="section">如果您首先尝试在PDB中注册，则会<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code>错误<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> 。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>如果尚未执行此操作，请标识或创建命名的公共用户帐户，以用作Database Vault帐户以及关联的备份帐户。</span></li>
                        <li class="stepexpand"><span>确保您已在CDB根目录中注册了Oracle Database Vault，并且<code class="codeph">DV_OWNER</code>角色已共同授予普通用户。</span></li>
                        <li class="stepexpand"><span>以PDB本地的管理员身份连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT dba_debra @ <span class="italic">pdb_name</span>输入密码： <span class="italic">密码</span>
</code></pre><p>要查找可用的PDB，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>为此PDB的用户授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限。</span><div>例如：<pre class="pre codeblock"><code>GRANT CREATE SESSION，SET CONTAINER to c ## sec_admin_owen CONTAINER = CURRENT; GRANT CREATE SESSION，SET CONTAINER to c ## accts_admin_ace CONTAINER = CURRENT;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户身份连接<code class="codeph">SYSDBA</code>管理权限</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>仍在PDB中时，配置两个备份Database Vault用户帐户。</span><div><pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## dbv_acctmgr_root_backup'）;结束; /</code></pre><p>在此示例中，省略<code class="codeph">force_local_dvowner</code>参数，因为它是不必要的。在PDB中配置的所有普通用户都受限于PDB的范围。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译此PDB中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何指示，则再次运行它。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为您刚刚配置的备份Database Vault Owner用户连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT c ## dbv_owner_root_backup @ <span class="italic">pdb_name</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在此PDB中启用Oracle Database Vault。</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到CDB。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新打开PDB。</span><div>例如：<pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE; ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已为Database Vault配置和启用PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_owner_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO c ## sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予主<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT c ## dbv_acctmgr_root_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="DBA_DV_STATUS，CDB_DV_STATUS，DBA_OLS_STATUS和CDB_OLS_STATUS数据字典视图验证是否已配置并启用Oracle数据库。">验证是否已配置并启用数据库保管库</a></li>
                           <li><a href="../dvadm/oracle-database-vault-schemas-roles-and-accounts.html#DVADM-GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                           <li><a href="../dvadm/getting-started-with-oracle-database-vault.html#DVADM-GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-75E90559-133D-4B5E-B658-D77810B590C6" name="GUID-75E90559-133D-4B5E-B658-D77810B590C6"></a><h4 id="MULTI-GUID-75E90559-133D-4B5E-B658-D77810B590C6" class="sect4"><span class="enumeration_section">24.4.3</span>注册Database Vault本地用户以管理特定PDB</h4>
                  <div>
                     <p>在多租户环境中，您必须先在根目录中注册Oracle Database Vault，然后再在PDB中注册。</p>
                     <div class="p">如果您首先尝试在PDB中注册，则会<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code>错误<code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> 。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在多租户环境中，以具有创建用户权限并授予<code class="codeph">CREATE SESSION</code>和<code class="codeph">SET CONTAINER</code>权限的用户身份登录PDB。</span><div>例如：<pre class="pre codeblock"><code>sqlplus sec_admin <span class="italic">@pdb_name</span>输入密码： <span class="italic">密码</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果不使用现有的本地用户命名帐户来创建新的Database Vault角色，请创建新的命名本地用户帐户。</span><div>在这两种情况下，您必须创建备份帐户以保留数据库保管库角色，以防命名用户丢失或忘记其密码。</div>
                           <div><pre class="pre codeblock"><code>GRANT创建会话，将容器设置为sec_admin_owen通过<span class="italic">密码</span>识别; GRANT创建会话，将容器设置为dbv_owner_backup IDENTIFIED BY <span class="italic">password</span> ; GRANT创建会话，将容器设置为accts_admin_ace通过<span class="italic">密码</span>识别; GRANT创建会话，将容器设置为dbv_acctmgr_backup IDENTIFIED BY <span class="italic">密码</span> ;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>确保您已在CDB根目录中注册了Oracle Database Vault。</span><div>暂时连接到根，然后查询<code class="codeph">DBA_DV_STATUS</code>视图。<pre class="pre codeblock"><code>CONNECT SYS / AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份连接到PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>仍在PDB中时，配置两个备份Database Vault用户帐户。</span><div><pre class="pre codeblock"><code>BEGIN CONFIGURE_DV（dvowner_uname =&gt;'dbv_owner_backup'，dvacctmgr_uname =&gt;'dbv_acctmgr_backup'）;结束; /</code></pre><p>在此示例中，省略<code class="codeph">force_local_dvowner</code>参数，因为它是不必要的。在PDB中配置时，将在本地授予Database Vault角色。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">utlrp.sql</code>脚本以重新编译此PDB中的无效对象。</span><div><pre class="pre codeblock"><code>@？/rdbms/admin/utlrp.sql</code></pre><p>如果脚本提供说明，请按照说明操作，然后再次运行脚本。如果脚本异常终止而未给出任何说明，请再次运行。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为您刚刚配置的备份Database Vault Owner用户连接到PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT dbv_owner_backup @ <span class="italic">pdb_name</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在此PDB中启用Oracle Database Vault。</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到CDB。</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>关闭并重新打开PDB。</span><div><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE; ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证是否已为Database Vault配置和启用PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ <span class="italic">pdb_name</span> AS SYSDBA输入密码： <span class="italic">password</span> SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>以备份<code class="codeph">DV_OWNER</code>用户身份进行连接，然后将<code class="codeph">DV_OWNER</code>角色授予您之前创建的主<code class="codeph">DV_OWNER</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT dbv_owner_backup输入密码： <span class="italic">密码</span> GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为备份<code class="codeph">DV_ACCTMGR</code>用户连接，然后将<code class="codeph">DV_ACCTMGR</code>角色授予备份<code class="codeph">DV_ACCTMGR</code>用户。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT dbv_acctmgr_backup输入密码： <span class="italic">password</span> GRANT DV_ACCTMGR to c ## accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将两个备份帐户密码存储在安全位置，例如特权帐户管理（PAM）系统，以备将来需要时使用。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-54699671-483A-49EF-B900-81D286845E8E" name="GUID-54699671-483A-49EF-B900-81D286845E8E"></a><h4 id="MULTI-GUID-54699671-483A-49EF-B900-81D286845E8E" class="sect4"><span class="enumeration_section">24.4.4</span>插入启用Database Vault的PDB</h4>
                  <div>
                     <p>在SQL * Plus中，在多租户环境中，您可以插入已启用Database Vault的数据库。</p>
                     <p>在此方案中，插入的数据库具有自己的本地Database Vault帐户。请注意，如果将启用了Database Vault的数据库插入未启用Database Vault的CDB，则PDB将保持受限模式，直到您在CDB中启用Database Vault，然后重新启动CDB。如果将未启用Database Vault的PDB插入启用了Database Vault的CDB，则PDB将保持受限模式，直到您在PDB中启用Database Vault，然后重新启动PDB。仍然可以使用此插入的非Database Vault启用的PDB。但是，如果CDB是使用严格选项集启用的Database Vault，则PDB必须启用Database Vault。</p>
                     <p>在插入支持Database Vault的PDB并且将数据库保管库角色授予普通用户之前，请确保完全了解插入PDB对普通用户的影响。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-81D0494C-E838-4DD9-AC82-B56473F98D06" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" name="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260"></a><h4 id="MULTI-GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" class="sect4"><span class="enumeration_section">24.4.5</span>在多租户环境中手动安装Oracle Database Vault</h4>
                  <div>
                     <p>在某些情况下，对于多租户环境，您必须手动安装Oracle Database Vault。例如，没有Database Vault的11g Oracle数据库升级到版本12c，然后转换为PDB以插入12c Database Vault启用的数据库。</p>
                     <div class="section">如果在将PDB插入安装了Database Vault和Label Security的CDB时此PDB没有这些产品，则必须在PDB中手动安装Oracle Database Vault（和Oracle Label Security）。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>作为已被授予<code class="codeph">SYSDBA</code>管理权限的用户，请登录到要在其中安装Oracle Database Vault的PDB。</span><div>
                              <p>例如，要登录名为<code class="codeph">hr_pdb</code>的PDB：</p><pre class="pre codeblock"><code>sqlplus sec_admin @ hr_pdb as sysdba输入密码： <span class="italic">password</span></code></pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如有必要，请检查此PDB上是否已安装Oracle Database Vault和Oracle Label Security。</span><div>如果存在<code class="codeph">DVSYS</code>帐户（用于Database Vault）和<code class="codeph">LBACSYS</code>帐户（用于标签安全性），则PDB上存在Database Vault和Label Security。</div>
                           <div><pre class="pre codeblock"><code>SELECT USERNAME FROM DBA_USERS WHERE USERNAME IN（'DVSYS'，'LBACSYS'）;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>如果既未安装Database Vault也未安装Label Security，则通过执行<code class="codeph">catols.sql</code>脚本来安装Oracle Label Security。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ catols.sql</code></pre><p>必须先安装Oracle Label Security，然后才能安装Oracle Database Vault。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过执行<code class="codeph">catmac.sql</code>脚本来安装Oracle Database Vault。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ catmac.sql</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在<code class="codeph">Enter value for 1</code>提示符下，输入<code class="codeph">SYSTEM</code>作为表空间以安装<code class="codeph">DVSYS</code> 。</span></li>
                        <li class="stepexpand"><span>在<code class="codeph">Enter value for 2</code>提示符下，输入PDB的临时表空间。</span></li>
                     </ol>
                     <div class="section">安装完成后，您可以在PDB中注册Oracle Database Vault。如果数据库保管库尚未在CDB中注册，则必须先关闭PDB，然后才能在CDB根目录中注册Database Vault。数据库保管库必须先在CDB根目录中注册，然后才能在PDB中注册。数据库保管库在CDB根目录中注册并且数据库已重新启动后，您可以打开PDB并注册数据库保管库。</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dvadm/getting-started-with-oracle-database-vault.html#DVADM-GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="您可以基于多种方案在多租户环境中注册Oracle Database Vault。">在多租户环境中向Oracle数据库注册Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-86DA4697-8BE2-4F27-92E3-C15843F9A3A6" name="GUID-86DA4697-8BE2-4F27-92E3-C15843F9A3A6"></a><h3 id="MULTI-GUID-86DA4697-8BE2-4F27-92E3-C15843F9A3A6" class="sect3"><span class="enumeration_section">24.5</span>配置领域</h3>
               <div>
                  <p>您可以围绕数据库对象创建领域以保护它们，然后设置授权以控制用户对此数据的访问。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-D200353D-D15B-46AE-82DA-FE874D24800C">什么是领域？</a><br>Realms使您可以保护数据库对象，包括特定的对象类型。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-DA60AF6B-D669-4E17-94B4-043BB41FC673">多租户环境中的领域授权</a><br>在多租户环境中，常见域授权的规则和行为类似于其他常见对象的授权。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-D200353D-D15B-46AE-82DA-FE874D24800C" name="GUID-D200353D-D15B-46AE-82DA-FE874D24800C"></a><h4 id="MULTI-GUID-D200353D-D15B-46AE-82DA-FE874D24800C" class="sect4"><span class="enumeration_section">24.5.1</span>什么是领域？
                  </h4>
                  <div>
                     <p>Realms使您可以保护数据库对象，包括特定的对象类型。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-5B043984-7C0F-49E3-8A0C-A983E4F12FD0">关于领域</a><br>领域是必须为给定应用程序保护的数据库模式，数据库对象和数据库角色的分组。
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-72403156-3E91-43FD-8D06-859DBBC10568">多租户环境中的领域</a><br>在多租户环境中，您可以创建领域以保护应用程序根目录中的公共对象。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-86DA4697-8BE2-4F27-92E3-C15843F9A3A6" title="您可以围绕数据库对象创建领域以保护它们，然后设置授权以控制用户对此数据的访问。">配置领域</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-5B043984-7C0F-49E3-8A0C-A983E4F12FD0" name="GUID-5B043984-7C0F-49E3-8A0C-A983E4F12FD0"></a><h5 id="MULTI-GUID-5B043984-7C0F-49E3-8A0C-A983E4F12FD0" class="sect5"><span class="enumeration_section">24.5.1.1</span>关于领域</h5>
                     <div>
                        <p>领域是必须为给定应用程序保护的数据库模式，数据库对象和数据库角色的分组。</p>
                        <p>将领域视为数据库对象的保护区域。模式是数据库对象（如表，视图和包）的逻辑集合，而角色是特权的集合。通过将模式和角色安排到功能组中，您可以控制用户对这些组使用系统特权的能力，并防止数据库管理员或具有系统特权的其他强大用户访问未经授权的数据。Oracle Database Vault不会替换现有Oracle数据库中的自主访问控制模型。对于领域和命令规则，它在此模型的顶部充当层。</p>
                        <p>Oracle Database Vault提供两种类型的域：常规域和强制域。两种域类型都可以选择性地保护整个模式或模式中的关键对象，例如表和索引。对于常规领域，对象所有者或已被授予对象权限的用户可以在没有领域授权的情况下执行查询或DML操作，但必须具有领域授权才能执行DDL操作。强制领域为领域内的对象提供更强大的保护。强制域阻止基于对象权限和基于系统权限的访问，并且不允许具有对象权限的用户在没有域授权的情况下执行查询，DML或DDL操作。换句话说，如果对象受到强制领域的保护，即使对象所有者也无法在没有适当领域授权的情况下访问他或她自己的对象。</p>
                        <p>对于使用Oracle闪回技术的数据库，常规域和强制域都会对闪回表强制执行相同的行为。如果用户被授权到领域，则用户可以在受领域保护的表上执行<code class="codeph">FLASHBACK TABLE</code> SQL语句。
                        </p>
                        <p>对于使用信息生命周期管理（ILM）的数据库，Database Vault管理员可以使用<code class="codeph">DBMS_MACADM.AUTHORIZE_MAINTENANCE_USER</code>和<code class="codeph">DBMS_MACADM.UNAUTHORIZE_MAINTENANCE_USER</code>过程来控制谁可以对受域保护的对象执行ILM操作。
                        </p>
                        <p>您可以将模式，模式中特定类型的所有对象或模式中的单个对象注册到领域中。创建领域后，您可以注册一组架构对象或角色（安全对象）以进行领域保护，并授权一组用户或角色访问安全对象。受常规域保护的对象允许DML访问具有直接对象授权的用户。</p>
                        <p>例如，您可以创建领域以保护会计部门中使用的所有现有数据库模式。该领域禁止未经授权的任何用户使用系统权限来访问安全的记帐数据。当整个模式受到保护时，模式中的所有对象都受到保护，包括表，索引，过程和其他对象。</p>
                        <p>您可以在Oracle Database Vault中创建的域上运行报告。您可以在开发，测试甚至生产阶段使用模拟模式来仅记录域违规而不是阻止访问。这使您可以使用Database Vault领域快速测试应用程序。</p>
                        <p>您可以使用Oracle Enterprise Manager Cloud Control中的Oracle Database Vault Administrator页面配置域。或者，您可以使用Oracle Database Vault提供的PL / SQL接口和包来配置域。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-D200353D-D15B-46AE-82DA-FE874D24800C" title="Realms使您可以保护数据库对象，包括特定的对象类型。">什么是领域？</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-72403156-3E91-43FD-8D06-859DBBC10568" name="GUID-72403156-3E91-43FD-8D06-859DBBC10568"></a><h5 id="MULTI-GUID-72403156-3E91-43FD-8D06-859DBBC10568" class="sect5"><span class="enumeration_section">24.5.1.2</span>多租户环境中的领域</h5>
                     <div>
                        <p>在多租户环境中，您可以创建领域以保护应用程序根目录中的公共对象。</p>
                        <p>在应用程序根目录中创建领域而不是在单个可插拔数据库（PDB）中围绕这些对象创建大量对象和领域的优点是，您可以在一个位置（应用程序根目录）创建它们。这样，您就可以集中管理它们。</p>
                        <p>您无法在CDB根目录中创建公共领域。</p>
                        <p>Database Vault公共领域可以是常规领域或强制领域。领域仅保护应用程序根目录中的对象，而不保护PDB中的本地对象。 CDB根，应用程序根和任何受影响的PDB都必须启用Database Vault。</p>
                        <p>要配置公共领域，通常必须授予<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色。要为公共领域授予通用授权，您必须位于应用程序根目录中。要将域传播到与应用程序根关联的PDB，必须同步应用程序根。例如，要同步名为<code class="codeph">saas_sales_app</code>的应用程序</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION saas_sales_app SYNC;</code></pre></div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../dvadm/configuring-realms.html#DVADM-GUID-18D6FFCB-42C2-49D1-9F53-BADE7B0754AB" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-D200353D-D15B-46AE-82DA-FE874D24800C" title="Realms使您可以保护数据库对象，包括特定的对象类型。">什么是领域？</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DA60AF6B-D669-4E17-94B4-043BB41FC673" name="GUID-DA60AF6B-D669-4E17-94B4-043BB41FC673"></a><h4 id="MULTI-GUID-DA60AF6B-D669-4E17-94B4-043BB41FC673" class="sect4"><span class="enumeration_section">24.5.2</span>多租户环境中的域授权</h4>
                  <div>
                     <p>在多租户环境中，常见域授权的规则和行为类似于其他常见对象的授权。</p>
                     <p><span class="bold">共同领域的本地授权</span></p>
                     <p>对公共领域的本地授权是指用户对该用户正在访问的PDB的授权。</p>
                     <p>对共同领域的本地授权规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通常被授予<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色的用户可以向普通用户，公共角色，本地用户和本地角色授予本地授权。常见的<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>用户还可以从PDB中的公共<code class="codeph">DV_OWNER</code>删除本地授权。</p>
                        </li>
                        <li>
                           <p>本地Database Vault管理员可以在PDB中本地授权（即，向本地用户和普通用户授予本地授权）。常见的Database Vault管理员还可以在每个PDB中授予授权。通用域授权只能由应用程序根目录中的公共Database Vault管理员授予。</p>
                        </li>
                        <li>
                           <p>公共Database Vault管理员可以在PDB中向公共领域添加或删除本地授权。</p>
                        </li>
                        <li>
                           <p>如果普通用户仅具有对公共领域的本地授权，则该用户无法访问除本地授权之外的任何其他PDB中的公共领域。</p>
                        </li>
                        <li>
                           <p>普通用户或共同角色可以同时具有对公共领域的本地授权和公共授权。从公共领域删除普通用户的本地授权不会影响普通用户的公共授权。从公共领域删除普通用户的公共授权不会影响普通用户的本地授权。</p>
                        </li>
                     </ul>
                     <p><span class="bold">共同领域的共同授权</span></p>
                     <p>公共领域的公共授权是指普通用户或公共角色在应用程序根目录中的授权，而授权在启用Database Vault的每个容器中生效。</p>
                     <p>对共同领域的本地授权规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通常被授予<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色的用户可以向应用程序根目录中的公共用户或角色授予公共领域授权。此通用Database Vault管理员可以在应用程序根目录中执行常见授权的删除。
                           </p>
                        </li>
                        <li>
                           <p>此通用授权适用于已在CDB中启用Database Vault的容器。</p>
                        </li>
                        <li>
                           <p>如果普通用户被授权到应用程序根目录中的公共领域，则该用户可以访问由应用程序根目录中的公共领域和任何应用程序PDB保护的对象。</p>
                        </li>
                        <li>
                           <p>与公共领域关联的任何规则集都必须是通用规则集。添加到与公共授权关联的公共规则集的规则不能涉及任何本地对象。</p>
                        </li>
                     </ul>
                     <p><span class="bold">领域的授权如何在应用程序根和单个PDB中工作</span></p>
                     <p>在容器中的Database Vault强制执行期间，当在PDB中本地使用时，公共领域执行与同一领域相同的强制执行行为。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-86DA4697-8BE2-4F27-92E3-C15843F9A3A6" title="您可以围绕数据库对象创建领域以保护它们，然后设置授权以控制用户对此数据的访问。">配置领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-6308CB8B-6777-44AF-A523-F1A956591F6D" name="GUID-6308CB8B-6777-44AF-A523-F1A956591F6D"></a><h3 id="MULTI-GUID-6308CB8B-6777-44AF-A523-F1A956591F6D" class="sect3"><span class="enumeration_section">24.6</span>多租户环境中的规则集和规则</h3>
               <div>
                  <p>在多租户环境中，您可以在应用程序根目录中创建规则集及其关联规则。</p>
                  <p>当Database Vault评估关联的域或命令规则时，公共领域必须使用公共规则集。通用规则集及其规则只能在应用程序根目录中创建。创建公共规则集后，它将存在于与创建公共规则集的根关联的每个容器中。通用规则集只能包含通用规则。</p>
                  <p>要配置通用规则集及其规则，通常必须授予<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-oracle-database-vault-with-a-cdb.html#GUID-571C5AF1-909C-4A76-BE2B-9BAC5232FE84" title="在多租户环境中，您可以在CDB根目录或应用程序根目录中创建公共和本地命令规则。">多租户环境中的命令规则</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-571C5AF1-909C-4A76-BE2B-9BAC5232FE84" name="GUID-571C5AF1-909C-4A76-BE2B-9BAC5232FE84"></a><h3 id="MULTI-GUID-571C5AF1-909C-4A76-BE2B-9BAC5232FE84" class="sect3"><span class="enumeration_section">24.7</span>多租户环境中的命令规则</h3>
               <div>
                  <p>在多租户环境中，您可以在CDB根目录或应用程序根目录中创建公共和本地命令规则。</p>
                  <p>通用命令规则只能与通用领域，规则集和规则相关联。本地命令规则只能与本地域，规则集和规则相关联。</p>
                  <p>要将这些命令规则应用于整个多租户环境，必须从CDB根目录或应用程序根目录执行命令规则过程，作为已被授予<code class="codeph">DVADM</code>或<code class="codeph">DVOWNER</code>角色的普通用户。在CDB根目录中创建的公共命令规则将应用于该CDB环境中的所有PDB。在应用程序根目录中创建的常用命令规则将仅应用于与此应用程序根目录关联的PDB。要将命令规则传播到与CDB根或应用程序根关联的PDB，必须同步PDB。例如，要将名为<code class="codeph">saas_sales_app</code>的应用程序根同步到其应用程序PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION saas_sales_app SYNC;</code></pre><p>要将CDB根目录中的公共命令规则同步到PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION APP $ CDB $ SYSTEM SYNC;</code></pre><p>您可以通过查询<code class="codeph">USER_ROLE_PRIVS</code>数据字典视图来检查用户的角色。要查找有关命令规则的信息，请查询<code class="codeph">DBA_DV_COMMAND_RULE</code>数据字典视图。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-07513135-CB45-4788-A596-E5A71879BB81" name="GUID-07513135-CB45-4788-A596-E5A71879BB81"></a><h3 id="MULTI-GUID-07513135-CB45-4788-A596-E5A71879BB81" class="sect3"><span class="enumeration_section">24.8</span>多租户环境中的Oracle Database Vault策略</h3>
               <div>
                  <p>Oracle Database Vault策略仅在创建它们的可插拔数据库（PDB）本地。</p>
                  <p>也就是说，如果您在PDB中创建了策略，则只能向其添加本地域和命令规则。您无法创建可以具有公共领域或常用命令规则的Database Vault策略。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" name="GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F"></a><h3 id="MULTI-GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" class="sect3"><span class="enumeration_section">24.9</span>使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</h3>
               <div>
                  <p>您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-1A67C2FE-A83C-4B5F-AB2E-1A7E96922064">关于使用Database Vault Operations Control</a><br>您可以自动限制普通用户访问自治，常规云或内部部署环境中的可插拔数据库（PDB）本地数据。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-9CC9C99D-7168-4C39-8380-81C1CBF1E8C3">启用Database Vault Operations Control</a><br>要启用Database Vault操作控制，请使用<code class="codeph">DBMS_MACADM.ENABLE_APP_PROTECTION</code> PL / SQL过程。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-00868C98-FC37-49BC-B867-558B9FB27B6A">将公共用户和包添加到例外列表</a><br>必须访问PDB本地数据的公共用户和应用程序可以添加到例外列表中。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-57584CE8-8BC0-40DA-A446-A45AFF882726">从例外列表中删除公共用户和包</a><br>可以从例外列表中删除不再需要访问PDB本地数据的用户和应用程序。
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-database-vault-with-a-cdb.html#GUID-D23A52A4-0556-4F71-9157-6CC081EF7819">禁用Database Vault Operations Control</a><br>要禁用Database Vault操作控制，请使用<code class="codeph">DBMS_MACADM.DISABLE_APP_PROTECTION</code> PL / SQL过程。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../dvadm/dba-operations-in-an-oracle-database-vault-environment.html#DVADM-GUID-17665902-E9F9-479A-B60A-29853672BB2B" target="_blank">Oracle Database Vault环境中的DBA操作<span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-1A67C2FE-A83C-4B5F-AB2E-1A7E96922064" name="GUID-1A67C2FE-A83C-4B5F-AB2E-1A7E96922064"></a><h4 id="MULTI-GUID-1A67C2FE-A83C-4B5F-AB2E-1A7E96922064" class="sect4"><span class="enumeration_section">24.9.1</span>关于使用Database Vault Operations Control</h4>
                  <div>
                     <p>您可以自动限制普通用户访问自治，常规云或内部部署环境中的可插拔数据库（PDB）本地数据。</p>
                     <p>要实现此目的，您可以使用Oracle Database Vault操作控制，该控制适用于普通用户（例如基础架构数据库管理员和应用程序）。</p>
                     <p>Database Vault操作控制对于数据库管理员必须以高权限用户身份登录CDB根目录但仍无法访问PDB客户数据的情况非常有用。数据库操作控制不会阻止PDB数据库管理员。要阻止这些用户，请在PDB中启用Oracle Database Vault，然后使用域库控制等数据库保险库功能来阻止这些用户。</p>
                     <p>对于公共用户或应用程序必须执行必须访问PDB上的本地数据的任务的情况，您可以为公共用户和程序包的Database Vault操作控制创建例外列表。您要为例外列表指定的普通用户类型的示例是<code class="codeph">CTXSYS</code>应用程序帐户，该帐户负责Oracle Text。通过在例外列表中指定包，您可以应用更细粒度的控件，而不是在例外列表中提供对用户的完全访问权限。
                     </p>
                     <p>使用Database Vault操作控制的一般过程如下：</p>
                     <ol id="GUID-1A67C2FE-A83C-4B5F-AB2E-1A7E96922064__OL_JMR_TFW_Q2B">
                        <li>启用Database Vault操作控制并为生产环境启用它。</li>
                        <li>在此阶段，无论PDB是否已启用Database Vault，Database Vault操作控制都适用于环境中的所有PDB。</li>
                        <li>要使特定用户和程序包能够访问PDB的本地模式，请将它们添加到例外列表中。当用户或包不再需要访问权限时，您可以从例外列表中删除它们。例如，如果数据库使用的是Oracle Text，则可以将<code class="codeph">CTXSYS</code>管理用户帐户和程序包添加到例外列表中。
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" title="您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。">使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-9CC9C99D-7168-4C39-8380-81C1CBF1E8C3" name="GUID-9CC9C99D-7168-4C39-8380-81C1CBF1E8C3"></a><h4 id="MULTI-GUID-9CC9C99D-7168-4C39-8380-81C1CBF1E8C3" class="sect4"><span class="enumeration_section">24.9.2</span>启用Database Vault Operations Control</h4>
                  <div>
                     <p>要启用Database Vault操作控制，请使用<code class="codeph">DBMS_MACADM.ENABLE_APP_PROTECTION</code> PL / SQL过程。
                     </p>
                     <div class="section">
                        <p>Oracle建议，如果您选择对多租户生产服务器使用Database Vault操作控制，则应始终启用Database Vault操作控制。</p>在大多数情况下，您将为整个CDB启用数据库操作控制，而不仅仅是特定的PDB。如果需要为特定PDB禁用它（例如，用于故障排除），则可以在PDB上执行<code class="codeph">DBMS_MACADM.DISABLE_APP_PROTECTION</code>过程。完成PDB故障排除后，请重新启用它以进行Database Vault操作控制，如本主题中的示例所示。
                     </div>
                     <!-- class="section" -->
                     <div class="p">在启用Database Vault操作控制之前，必须在CDB根目录中启用并配置Database Vault。但是，不需要在PDB中启用Database Vault。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的普通用户身份登录CDB根目录。</span><div>例如：<pre class="pre codeblock"><code>sqlplus c ## sec_admin_owen_root输入密码： <span class="italic">密码</span>  </code></pre></div>
                        </li>
                        <li class="stepexpand"><span>执行<code class="codeph">DBMS_MACADM.ENABLE_APP_PROTECTION</code>过程。</span><ul id="GUID-9CC9C99D-7168-4C39-8380-81C1CBF1E8C3__CHOICES_YPW_BBS_R2B">
                              <li>要为CDB环境中的所有PDB启用Database Vault操作控制：<pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_APP_PROTECTION;</code></pre></li>
                              <li>要为特定PBB启用Database Vault操作控制（例如， <code class="codeph">HRPDB</code> ）：<pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_APP_PROTECTION（'HRPDB'）;</code></pre></li>
                           </ul>
                        </li>
                     </ol>
                     <div class="section">在此阶段，启用一个或所有PDB以进行Database Vault操作控制。如果特定的受信任公共用户或程序包必须能够访问这些PDB的本地模式以执行特殊操作，则可以使用<code class="codeph">DBMS_MACADM.ADD_APP_EXCEPTION</code>过程将用户或程序包添加到Database Vault操作控制的例外列表中。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dvadm/dba-operations-in-an-oracle-database-vault-environment.html#DVADM-GUID-00868C98-FC37-49BC-B867-558B9FB27B6A" target="_blank">将公共用户和软件包添加到例外列表<span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" title="您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。">使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-00868C98-FC37-49BC-B867-558B9FB27B6A" name="GUID-00868C98-FC37-49BC-B867-558B9FB27B6A"></a><h4 id="MULTI-GUID-00868C98-FC37-49BC-B867-558B9FB27B6A" class="sect4"><span class="enumeration_section">24.9.3</span>将普通用户和包添加到例外列表</h4>
                  <div>
                     <p>必须访问PDB本地数据的公共用户和应用程序可以添加到例外列表中。</p>
                     <div class="section">如果程序包是用户帐户中唯一需要访问PDB本地数据的对象，请将用户程序包添加到例外列表中。这允许对放入例外列表的内容进行细粒度控制。您要添加到例外列表中的常见用户和包的类型是PDB运行所必需的。例如，如果您使用的是Oracle Spatial，则应将<code class="codeph">MDSYS</code>帐户添加到例外列表中。<code class="codeph">MDSYS</code>需要访问Oracle Spatial功能的客户PDB数据。要将公共用户和程序包添加到Database Vault操作控制例外列表，可以使用<code class="codeph">DBMS_MACADM.ADD_APP_EXCEPTION</code> PL / SQL过程。要查找现有异常，可以查询<code class="codeph">DBA_DV_APP_EXCEPTION</code>数据字典视图。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的普通用户身份登录CDB根目录。</span><div>例如：<pre class="pre codeblock"><code>qlplus c ## sec_admin_owen_root输入密码： <span class="italic">密码</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>确保您为普通用户指定的包满足以下要求：</span><div>
                              <ul id="GUID-00868C98-FC37-49BC-B867-558B9FB27B6A__UL_RMR_XVN_S2B" style="list-style-type:disc">
                                 <li>包必须由普通用户拥有。</li>
                                 <li>必须使用定义者权限过程创建用户创建的包。</li>
                              </ul>
                              <p>您可以通过查询<code class="codeph">DBA_OBJECTS</code>数据字典视图找到有关用户创建的包的更多信息。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>执行<code class="codeph">DBMS_MACADM.ADD_APP_EXCEPTION</code>过程。</span><div>例如：<pre class="pre codeblock"><code>DBMS_MACADM.ADD_APP_EXCEPTION（'MDSYS'，'PATCH_APP'）;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" title="您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。">使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-57584CE8-8BC0-40DA-A446-A45AFF882726" name="GUID-57584CE8-8BC0-40DA-A446-A45AFF882726"></a><h4 id="MULTI-GUID-57584CE8-8BC0-40DA-A446-A45AFF882726" class="sect4"><span class="enumeration_section">24.9.4</span>从例外列表中删除公共用户和包</h4>
                  <div>
                     <p>可以从例外列表中删除不再需要访问PDB本地数据的用户和应用程序。</p>
                     <div class="section">要从Database Vault操作控制例外列表中删除公共用户和包，可以使用<code class="codeph">DBMS_MACADM.DELETE_APP_PROTECTION</code> PL / SQL过程。要查找现有异常，可以查询<code class="codeph">DBA_DV_APP_EXCEPTION</code>数据字典视图。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的普通用户身份登录CDB根目录。</span><div>例如：<pre class="pre codeblock"><code>sqlplus c ## sec_admin_owen_root输入密码： <span class="italic">密码</span>  </code></pre></div>
                        </li>
                        <li class="stepexpand"><span>执行<code class="codeph">DBMS_MACADM.DELETE_APP_EXCEPTION</code>过程。</span><div>例如：<pre class="pre codeblock"><code>DBMS_MACADM.DELETE_APP_EXCEPTION（'MDSYS'，'PATCH_APP'）;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" title="您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。">使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-D23A52A4-0556-4F71-9157-6CC081EF7819" name="GUID-D23A52A4-0556-4F71-9157-6CC081EF7819"></a><h4 id="MULTI-GUID-D23A52A4-0556-4F71-9157-6CC081EF7819" class="sect4"><span class="enumeration_section">24.9.5</span>禁用Database Vault Operations Control</h4>
                  <div>
                     <p>要禁用Database Vault操作控制，请使用<code class="codeph">DBMS_MACADM.DISABLE_APP_PROTECTION</code> PL / SQL过程。
                     </p>
                     <div class="section">在大多数情况下，您应该启用Database Vault操作控制。如果故障排除要求从Database Vault操作控制中删除PDB，则Oracle建议您临时禁用PDB的Database Vault操作控制（并维护其余PDB的操作控制）。完成故障排除后，您应该重新启用Database Vault操作控制。</div>
                     <!-- class="section" -->
                     <ol id="GUID-D23A52A4-0556-4F71-9157-6CC081EF7819__STEPS_HFJ_TSX_Q2B">
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的普通用户身份登录CDB根目录。</span><div>例如：<pre class="pre codeblock"><code>sqlplus c ## sec_admin_owen_root输入密码： <span class="italic">密码</span>  </code></pre></div>
                        </li>
                        <li class="stepexpand"><span>执行<code class="codeph">DBMS_MACADM.DISABLE_APP_PROTECTION</code>过程。</span><ul id="GUID-D23A52A4-0556-4F71-9157-6CC081EF7819__CHOICES_YPW_BBS_R2B">
                              <li>要为CDB环境中的所有PDB禁用Database Vault操作控制：<pre class="pre codeblock"><code>EXEC DBMS_MACADM.DISABLE_APP_PROTECTION;</code></pre></li>
                              <li>要禁用特定PBB的Database Vault操作控制（例如， <code class="codeph">HRPDB</code> ）：<pre class="pre codeblock"><code>EXEC DBMS_MACADM.DISABLE_APP_PROTECTION（'HRPDB'）;</code></pre></li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-E04CBDD1-17F0-4942-BF78-21C340A4425F" title="您可以通过CDB根公共用户（例如基础结构数据库管理员）控制PDB访问。">使用Database Vault Operations Control限制多租户公共用户对本地PDB数据的访问</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-517E9611-546B-43D9-8C54-37037AF0B198" name="GUID-517E9611-546B-43D9-8C54-37037AF0B198"></a><h3 id="MULTI-GUID-517E9611-546B-43D9-8C54-37037AF0B198" class="sect3"><span class="enumeration_section">24.10</span>将独立Oracle数据库转换为PDB并将其插入CDB</h3>
               <div>
                  <p>您可以将独立的Oracle Database Release 12c或更高版本的数据库转换为PDB，然后将此PDB插入CDB。</p>
                  <ol>
                     <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的用户身份连接到root。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>sqlplus c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">CONTAINER = CURRENT</code>将<code class="codeph">DV_PATCH_ADMIN</code>角色授予用户<code class="codeph">SYS</code> 。</span><div><pre class="pre codeblock"><code>GRANT DV_PATCH_ADMIN TO SYS CONTAINER = CURRENT;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>在根目录中，以<code class="codeph">SYS</code>用户身份连接<code class="codeph">SYSOPER</code>系统特权。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>将SYS作为SYSOPER连接<span class="italic">- 或者，连接SYS @hrpdb AS SYSOPER</span>输入密码： <span class="italic">password</span>
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>以只读模式重新启动数据库。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>SHUTDOWN立即启动安装ALTER DATABASE OPEN READ ONLY</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>以具有<code class="codeph">DV_OWNER</code>角色的用户身份连接到启用Database Vault的数据库。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>CONNECT sec_admin @ dv_db</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>将<code class="codeph">DV_PATCH_ADMIN</code>角色授予此数据库上的用户<code class="codeph">SYS</code> 。</span><div><pre class="pre codeblock"><code>GRANT DV_PATCH_ADMIN TO SYS;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>（可选）运行<code class="codeph">DBMS_PDB.CHECK_PLUG_COMPATIBILITY</code>函数以确定未插入的PDB是否与CDB兼容。</span><div>
                           <p>运行该功能时，请设置以下参数：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">pdb_descr_file</code> ：将此参数设置为包含PDB描述的XML文件的完整路径。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">store_report</code> ：设置此参数以指示在PDB与CDB不兼容时是否要生成报告。将其设置为<code class="codeph">TRUE</code>以生成报告，或将其设置为<code class="codeph">FALSE</code>以不生成报告。生成的报告存储在<code class="codeph">PDB_PLUG_IN_VIOLATIONS</code>临时表中，仅在PDB与CDB不兼容时生成。</p>
                              </li>
                           </ul>
                           <p>例如，要确定<code class="codeph">/disk1/usr/dv_db_pdb.xml</code>文件描述的PDB是否与当前CDB兼容，请运行以下PL / SQL块：</p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON DECLARE兼容的CONSTANT VARCHAR2（3）：= CASE DBMS_PDB.CHECK_PLUG_COMPATIBILITY（pdb_descr_file =&gt;'/disk1 / usr / dv_db_pdb.xml'，store_report =&gt; TRUE）当为“是”时，“否”结束; BEGIN DBMS_OUTPUT.PUT_LINE（兼容）;结束; /</code></pre><p>如果输出为<code class="codeph">YES</code> ，则PDB兼容，您可以继续下一步。
                           </p>
                           <p>如果输出为<code class="codeph">NO</code> ，则PDB不兼容。您可以检查<code class="codeph">PDB_PLUG_IN_VIOLATIONS</code>临时表以查看它不兼容的原因。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建描述PDB的XML文件。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>BEGIN DBMS_PDB.DESCRIBE（pdb_descr_file =&gt;'/disk1 / oracle / dv_db.xml'）;结束; /</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句，并在<code class="codeph">USING</code>子句中指定XML文件。在需要时指定其他子句。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>使用'dv_db.xml'NOCOPY创建可插入数据库dv_db_pdb AS CLONE;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限连接到您刚刚以<code class="codeph">SYS</code>用户身份创建的PDB。</span><div><pre class="pre codeblock"><code>CONNECT SYS @ dv_db_pdb AS SYSDBA</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行<code class="codeph">noncdb_to_pdb.sql</code>脚本。</span><div><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ noncdb_to_pdb.sql</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>以读/写限制模式打开此PDB。</span><div><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE dv_db_pdb OPEN READ WRITE RESTRICTED;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>运行以下过程以同步PDB：</span><div><pre class="pre codeblock"><code>EXECUTE DBMS_PDB.SYNC_PDB;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的用户身份连接到root。</span><div><pre class="pre codeblock"><code>sqlplus c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">CONTAINER = CURRENT</code>从用户<code class="codeph">SYS</code>撤消<code class="codeph">DV_PATCH_ADMIN</code>角色。</span><div><pre class="pre codeblock"><code>从SYS CONTAINER RETROKE DV_PATCH_ADMIN = CURRENT;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>使用具有<code class="codeph">SYSOPER</code>系统特权的用户<code class="codeph">SYS</code>连接到启用Database Vault的旧数据库。</span><div><pre class="pre codeblock"><code>作为SYSOPER连接SYS @ dv_db_pdb</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>重启此数据库。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>关闭IMIMEDIATE STARUP</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>从用户<code class="codeph">SYS</code>撤消<code class="codeph">DV_PATCH_ADMIN</code>角色。</span><div><pre class="pre codeblock"><code>从SYS中撤消DV_PATCH_ADMIN;</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle-database-vault-with-a-cdb.html#GUID-5CD1D1E7-2435-4331-876F-34C5AE04BAD3" title="您可以在多租户容器数据库（CDB）中使用Oracle Database Vault。">将Oracle Database Vault与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>